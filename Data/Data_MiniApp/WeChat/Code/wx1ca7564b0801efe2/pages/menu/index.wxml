<import src="../../components/toast/index.wxml"></import>
<theme-container bind:tap="updatePrePriceTipsFn" bind:touchmove="updatePrePriceTipsFn" extraRequestParams="{{extraGetDecorationRequestParam}}" location="{{location}}" needLocationCheck="{{true}}" options="{{options}}" themeType="2">
    <adapter wx:if="{{showFullLoading&&!errorInfo}}"></adapter>
    <view class="container {{expandedShopInfo?'forbid-scroll':''}} {{hasTabBar?'has-tab-bar':''}}" wx:if="{{hasEnoughOptions||errorInfo}}">
        <view wx:if="{{toast&&toast.title}}">
            <template is="rms-toast" data="{{toast:toast}}"></template>
        </view>
        <limo-container bind:addToCart="addDishFuncMenu" bind:groupon-coupon-login-gotoMemberLogin="gotoMemberLogin" bind:groupon-coupon-login-gotoThirdLogin="gotoThirdLogin" bind:groupon-coupon-swiper-cancelGrouponCoupon="cancelGrouponCoupon" bind:groupon-coupon-swiper-checkMore="toggleCouponPanel" bind:groupon-coupon-swiper-loadMore="getCouponList" bind:groupon-coupon-swiper-useCoupon="useCoupon" bind:groupon-coupon-swiper-useGrouponCoupon="useGrouponCoupon" bind:member-info-collectCoupon="openCouponPanel" bind:menu-shop-info-closeOrderProgress="closeOrderProgress" bind:menu-shop-info-collectCoupon="openCouponPanel" bind:menu-shop-info-expandShopInfo="expandShopInfo" bind:minusDish="minusDishFuncMenu" bind:onclickCountNum="onClickCountNum" bind:panel-container-menu-gotoMemberLogin="gotoMemberLogin" bind:panel-container-menu-gotoThirdLogin="gotoThirdLogin" bind:recommendation-module-dealPanelData="showPanelType" bind:recommendation-module-openDishDetailTop="menuDetail" bind:recommendation-module-operateDish="operateCartDish" bind:recommendation-module-showDishTimeInfoModalFn="showDishTimeInfoModalFn" bind:showDishTimeInfoModalFn="showDishTimeInfoModalFn" data="{{limoMenuData}}" id="limo-menu-container" wx:if="{{!errorInfo}}"></limo-container>
        <menu-list allDishList="{{allDishList}}" bind:addToCart="addDishFuncMenu" bind:clickedAdvertiseCB="clickedAdvertise" bind:gotoThirdLogin="gotoThirdLogin" bind:minusDish="minusDishFuncMenu" bind:modifyDishList="modifyDishList" bind:onCouponAssistantCheckMore="toggleCouponPanel" bind:onclickCountNum="onClickCountNum" bind:openDishDetail="showDishPanel" bind:operationPanelFn="showPanelType" bind:showDishTimeInfoModalFn="showDishTimeInfoModalFn" bind:switchCategory="switchCategory" bind:updateDish="updateDishList" bind:useCoupon="useCoupon" cartDishList="{{cartDishList}}" catch:operateDish="operateCartDish" categoriesList="{{categoriesList}}" categoryHasIcon="{{categoryHasIcon}}" categoryStickyTop="{{categoryStickyTop}}" couponAssistantStyle="{{couponAssistantStyle}}" dishShowType="{{dishShowType}}" finishSetDishList="{{finishSetDishList}}" forbidScroll="{{!expandedShopInfo}}" groupCoupon="{{groupCoupon}}" hasTabBar="{{hasTabBar}}" horizontal="{{horizontal}}" id="dish-menu" memberInfo="{{memberInfo}}" menuType="{{menuType}}" menuUpdateTime="{{menuUpdateTime}}" mpUserInfo="{{mpUserInfo}}" pageOptions="{{options}}" pageTitle="{{pageTitle}}" payCouponDecoInfo="{{payCouponDecoInfo}}" reachBoundary="{{reachBoundary}}" scrollY="{{menuScrollY}}" shopMarketings="{{shopMarketings}}" showCouponPackage="{{showCouponPackage}}" spuMatchRecommendPages="{{spuMatchRecommendPages}}" stickyTop="{{stickyTop}}" userInfo="{{userInfo}}" winWidth="{{recycleWinWidth}}" wx:if="{{!errorInfo}}"></menu-list>
        <coupon-assistant-floating bind:click="toggleCouponPanel" bind:login="onCouponAssistantLogin" count="{{couponExtra.totalCouponNum}}" couponStyle="{{couponAssistantStyle}}" hide="{{hideCouponAssistant}}" loginMode="{{couponAssistantLoginMode}}" wx:if="{{couponAssistantStyle&&couponAssistantStyle.couponAssistantSwitch&&couponAssistantStyle.position==='float_tag'}}"></coupon-assistant-floating>
        <common-error-page bind:errorButtonClick="handleErrorClick" btnConfig="{{errorInfo.btnConfig}}" errorTitle="{{errorInfo.errorTitle}}" wx:if="{{errorInfo&&errorInfo.errorTitle}}"></common-error-page>
        <must-dish-panel bind:operateDish="operateCartDish" bind:operationPanel="showPanelType" bind:showDishTimeInfoModalFn="showDishTimeInfoModalFn" isNativeTabbarPage="{{isNativeTabbarPage}}" shopId="{{options.shopId}}"></must-dish-panel>
        <bottom-bar-container fromPage="menu" isNativeTabbarPage="{{isNativeTabbarPage}}">
            <cart bind:onclickCountNum="onClickCountNum" bind:operationPanel="showPanelType" bind:tapTipsBannerButton="onTapTipsBannerButton" cartDishList="{{cartDishList}}" cartDishSortMapList="{{cartDishSortMapList}}" catch:operateDish="operateCartDish" hasTabBar="{{hasTabBar}}" hideCartBarWhenEmpty="{{hideCartBarWhenEmpty}}" isNativeTabbarPage="{{isNativeTabbarPage}}" isShowBigBtn="{{isShowBigBtn}}" options="{{options}}" shopConfig="{{shopConfig}}" wx:if="{{!errorInfo}}"></cart>
        </bottom-bar-container>
        <container-panel bind:addToCartCoupon="addToCartCoupon" bind:onSelect="onDishSelect" categoriesList="{{categoriesList}}" isMenu="{{true}}" isNativeTabbarPage="{{isNativeTabbarPage}}" options="{{options}}" showContainerPanelTag="{{showContainerPanelTag}}" spuComboShowType="{{spuComboShowType}}" wx:if="{{showContainerPanelTag}}"></container-panel>
        <view class="fullpage-loading-mask" wx:if="{{!options.shopId}}"></view>
        <view wx:if="{{showDishInfoModal}}">
            <dish-time-info-modal bind:dishTimeInfoModalEvent="dishTimeInfoModalEvent" requestInfo="{{dishTimeInfoModalRequestInfo}}"></dish-time-info-modal>
        </view>
        <take-coupon-panel bind:closeTakeCouponPanel="closeTakeCouponPanel" bind:handleTakeCoupon="handleTakeCoupon" isNativeTabbarPage="{{isNativeTabbarPage}}" takeCouponPanelData="{{takeCouponPanelData}}" title="{{takeCouponPanelInfo.title}}" wx:if="{{takeCouponPanelInfo.takeCouponPanelTag}}"></take-coupon-panel>
        <coupon-panel bind:onClose="toggleCouponPanel" bind:onLoadMore="getCouponList" bind:useCoupon="useCoupon" shopId="{{options.shopId}}" wx:if="{{showCouponPanel}}"></coupon-panel>
        <coupon-dish-panel bind:onAddToCart="onCouponDishAddToCart" bind:onCheck="onCouponDishCheck" bind:onClose="onCloseCouponDishPanel" dishList="{{couponDishList}}" selected="{{selectedDish}}" title="{{couponDishPanelTitle}}" wx:if="{{showCouponDishPanel}}"></coupon-dish-panel>
    </view>
</theme-container>
<privacy-popup></privacy-popup>
