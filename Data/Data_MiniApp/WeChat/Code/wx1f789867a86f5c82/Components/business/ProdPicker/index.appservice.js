$gwx_XC_29=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_29 || [];
function gz$gwx_XC_29_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_29_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_29_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_29_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'__l'])
Z([3,'__e'])
Z([1,8])
Z([3,'component-prod-picker data-v-13a62cca'])
Z([[4],[[5],[[4],[[5],[[5],[1,'^input']],[[4],[[5],[[4],[[5],[[5],[1,'__set_model']],[[4],[[5],[[5],[[5],[[5],[1,'']],[1,'popupShow']],[1,'$event']],[[4],[[5]]]]]]]]]]]]])
Z([3,'80%'])
Z([3,'bottom'])
Z([[7],[3,'popupShow']])
Z([3,'3379e6fa-1'])
Z([[4],[[5],[1,'default']]])
Z([3,'1000'])
Z([[4],[[5],[[5],[[5],[[5],[[5],[1,'_div']],[1,'data-v-13a62cca']],[1,'prod-picker-container']],[[7],[3,'brand']]],[[2,'&&'],[[7],[3,'showThemeSkin']],[1,'themeSkin']]]])
Z([[7],[3,'prodLoading']])
Z(z[0])
Z([3,'data-v-13a62cca'])
Z([3,'circle'])
Z([[2,'+'],[[2,'+'],[1,'3379e6fa-2'],[1,',']],[1,'3379e6fa-1']])
Z([3,'prod-picker-content _div data-v-13a62cca'])
Z(z[0])
Z(z[1])
Z(z[1])
Z([[7],[3,'brand']])
Z([3,'data-v-13a62cca vue-ref'])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^close']],[[4],[[5],[[4],[[5],[1,'e0']]]]]]]],[[4],[[5],[[5],[1,'^preview']],[[4],[[5],[[4],[[5],[1,'previewHandle']]]]]]]]])
Z([3,'specHeader'])
Z([3,'SpecHeader'])
Z([[7],[3,'prodImgForShow']])
Z([[7],[3,'title']])
Z([[2,'+'],[[2,'+'],[1,'3379e6fa-3'],[1,',']],[1,'3379e6fa-1']])
Z([3,'body data-v-13a62cca'])
Z([1,true])
Z(z[0])
Z(z[1])
Z(z[1])
Z(z[21])
Z(z[14])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^change']],[[4],[[5],[[4],[[5],[1,'selectChildProd']]]]]]]],[[4],[[5],[[5],[1,'^explainShow']],[[4],[[5],[[4],[[5],[1,'explainShow']]]]]]]]])
Z([[7],[3,'checkedProdIds']])
Z([[7],[3,'fromShopCart']])
Z([[2,'?:'],[[2,'==='],[[7],[3,'prodMultiple']],[1,null]],[[6],[[7],[3,'childProdsForSelect']],[3,'multiple']],[[7],[3,'prodMultiple']]])
Z([[7],[3,'nodeMap']])
Z([[7],[3,'prodTips']])
Z([[7],[3,'childProdsForSelect']])
Z([[2,'+'],[[2,'+'],[1,'3379e6fa-4'],[1,',']],[1,'3379e6fa-1']])
Z([3,'index'])
Z([3,'item'])
Z([[6],[[7],[3,'childProdPeopleNum']],[3,'normal']])
Z(z[44])
Z(z[0])
Z(z[1])
Z(z[14])
Z([[7],[3,'item']])
Z([[4],[[5],[[4],[[5],[[5],[1,'^change']],[[4],[[5],[[4],[[5],[1,'changePeopleNum']]]]]]]]])
Z([[2,'+'],[[2,'+'],[[2,'+'],[1,'3379e6fa-5-'],[[7],[3,'index']]],[1,',']],[1,'3379e6fa-1']])
Z([[2,'&&'],[[6],[[7],[3,'childProdPeopleNum']],[3,'special']],[[6],[[6],[[7],[3,'childProdPeopleNum']],[3,'special']],[3,'length']]])
Z(z[0])
Z(z[1])
Z(z[14])
Z([[6],[[7],[3,'childProdPeopleNum']],[3,'special']])
Z(z[52])
Z([[2,'+'],[[2,'+'],[1,'3379e6fa-6'],[1,',']],[1,'3379e6fa-1']])
Z([3,'__i0__'])
Z([3,'upgradeData'])
Z([[6],[[7],[3,'$root']],[3,'l0']])
Z([3,'pid'])
Z([[6],[[7],[3,'upgradeData']],[3,'g0']])
Z([3,'upgrade-selector-wrap _div data-v-13a62cca'])
Z([[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'serviceGroups']])
Z([3,'__i1__'])
Z([3,'serviceGroup'])
Z(z[67])
Z([3,'id'])
Z(z[0])
Z(z[1])
Z(z[1])
Z(z[21])
Z(z[14])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^change']],[[4],[[5],[[4],[[5],[1,'selectService']]]]]]]],[[4],[[5],[[5],[1,'^explainShow']],[[4],[[5],[[4],[[5],[1,'explainShow']]]]]]]]])
Z([[2,'?:'],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[[2,'||'],[[6],[[6],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[3,'services']],[[6],[[7],[3,'serviceGroup']],[3,'id']]],[[4],[[5]]]],[[4],[[5]]]])
Z([[2,'?:'],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[[6],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[3,'peopleNum']],[1,0]])
Z([[6],[[7],[3,'serviceGroup']],[3,'required']])
Z(z[30])
Z([[7],[3,'serviceGroup']])
Z([[2,'+'],[[2,'+'],[[2,'+'],[[2,'+'],[[2,'+'],[1,'3379e6fa-7-'],[[7],[3,'__i0__']]],[1,'-']],[[7],[3,'__i1__']]],[1,',']],[1,'3379e6fa-1']])
Z([[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'retailSkuData']])
Z(z[0])
Z(z[1])
Z(z[1])
Z(z[21])
Z(z[14])
Z([[7],[3,'retailNumMap']])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^changeNum']],[[4],[[5],[[4],[[5],[1,'changeUpgradeNum']]]]]]]],[[4],[[5],[[5],[1,'^change']],[[4],[[5],[[4],[[5],[1,'selectRetail']]]]]]]]])
Z([[2,'?:'],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[[6],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[3,'retailSkus']],[[4],[[5]]]])
Z([[6],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'retailSkuData']],[3,'required']])
Z(z[84])
Z([[2,'+'],[[2,'+'],[[2,'+'],[1,'3379e6fa-8-'],[[7],[3,'__i0__']]],[1,',']],[1,'3379e6fa-1']])
Z([[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'gonggeService']])
Z(z[0])
Z(z[1])
Z(z[1])
Z(z[21])
Z(z[14])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^change']],[[4],[[5],[[4],[[5],[1,'selectGonggeService']]]]]]]],[[4],[[5],[[5],[1,'^explainShow']],[[4],[[5],[[4],[[5],[1,'explainShow']]]]]]]]])
Z([[2,'||'],[[6],[[6],[[7],[3,'checkedProdsMap']],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'pid']]],[3,'jxjyNum']],[[4],[[5]]]])
Z(z[30])
Z(z[79])
Z([[6],[[6],[[6],[[7],[3,'upgradeData']],[3,'$orig']],[3,'gonggeService']],[3,'required']])
Z(z[96])
Z([[2,'+'],[[2,'+'],[[2,'+'],[1,'3379e6fa-9-'],[[7],[3,'__i0__']]],[1,',']],[1,'3379e6fa-1']])
Z([[2,'||'],[[7],[3,'christmasNote']],[[6],[[7],[3,'money']],[3,'pickDesList']]])
Z([[4],[[5],[[5],[[5],[[5],[[5],[1,'_div']],[1,'data-v-13a62cca']],[1,'footer']],[[7],[3,'brand']]],[[2,'?:'],[[7],[3,'hidePrice']],[1,'flex-center-center nopadding'],[1,'flex-between-center']]]])
Z(z[109])
Z([[2,'!'],[[7],[3,'hidePrice']]])
Z([[6],[[7],[3,'money']],[3,'discount']])
Z(z[0])
Z(z[1])
Z(z[14])
Z([[7],[3,'isBrandMini']])
Z([[4],[[5],[[4],[[5],[[5],[1,'^click']],[[4],[[5],[[4],[[5],[1,'confirm']]]]]]]]])
Z([[7],[3,'confirmDisabled']])
Z([[2,'?:'],[[7],[3,'hidePrice']],[1,'main'],[1,'mini']])
Z([3,'bg'])
Z(z[21])
Z([[2,'+'],[[2,'+'],[1,'3379e6fa-10'],[1,',']],[1,'3379e6fa-1']])
Z(z[9])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_29_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_29_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_29=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_29=true;
var x=['./Components/business/ProdPicker/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_29_1()
var xYG=_mz(z,'u-popup',['bind:__l',0,'bind:input',1,'borderRadius',1,'class',2,'data-event-opts',3,'height',4,'mode',5,'value',6,'vueId',7,'vueSlots',8,'zIndex',9],[],e,s,gg)
var oZG=_n('view')
_rz(z,oZG,'class',11,e,s,gg)
var f1G=_v()
_(oZG,f1G)
if(_oz(z,12,e,s,gg)){f1G.wxVkey=1
var c2G=_mz(z,'u-loading',['bind:__l',13,'class',1,'mode',2,'vueId',3],[],e,s,gg)
_(f1G,c2G)
}
else{f1G.wxVkey=2
var h3G=_n('view')
_rz(z,h3G,'class',17,e,s,gg)
var o4G=_mz(z,'spec-header',['bind:__l',18,'bind:close',1,'bind:preview',2,'brand',3,'class',4,'data-event-opts',5,'data-ref',6,'id',7,'prodArr',8,'title',9,'vueId',10],[],e,s,gg)
_(h3G,o4G)
var c5G=_mz(z,'scroll-view',['class',29,'scrollY',1],[],e,s,gg)
var a8G=_mz(z,'prod-selector',['bind:__l',31,'bind:change',1,'bind:explainShow',2,'brand',3,'class',4,'data-event-opts',5,'defaultCheckedProdIds',6,'fromShopCart',7,'multiple',8,'nodeMap',9,'prodTips',10,'prodsData',11,'vueId',12],[],e,s,gg)
_(c5G,a8G)
var t9G=_v()
_(c5G,t9G)
var e0G=function(oBH,bAH,xCH,gg){
var fEH=_mz(z,'people-counter',['bind:__l',48,'bind:change',1,'class',2,'counterData',3,'data-event-opts',4,'vueId',5],[],oBH,bAH,gg)
_(xCH,fEH)
return xCH
}
t9G.wxXCkey=4
_2z(z,46,e0G,e,s,gg,t9G,'item','index','index')
var o6G=_v()
_(c5G,o6G)
if(_oz(z,54,e,s,gg)){o6G.wxVkey=1
var cFH=_mz(z,'special-people-counter',['bind:__l',55,'bind:change',1,'class',2,'data',3,'data-event-opts',4,'vueId',5],[],e,s,gg)
_(o6G,cFH)
}
var hGH=_v()
_(c5G,hGH)
var oHH=function(oJH,cIH,lKH,gg){
var tMH=_v()
_(lKH,tMH)
if(_oz(z,65,oJH,cIH,gg)){tMH.wxVkey=1
var eNH=_n('view')
_rz(z,eNH,'class',66,oJH,cIH,gg)
var bOH=_v()
_(eNH,bOH)
if(_oz(z,67,oJH,cIH,gg)){bOH.wxVkey=1
var oRH=_v()
_(bOH,oRH)
var fSH=function(hUH,cTH,oVH,gg){
var oXH=_mz(z,'upgrade-selector',['bind:__l',72,'bind:change',1,'bind:explainShow',2,'brand',3,'class',4,'data-event-opts',5,'defaultCheckedIds',6,'peopleNum',7,'required',8,'showExplainTitle',9,'upgradeData',10,'vueId',11],[],hUH,cTH,gg)
_(oVH,oXH)
return oVH
}
oRH.wxXCkey=4
_2z(z,70,fSH,oJH,cIH,gg,oRH,'serviceGroup','__i1__','id')
}
var oPH=_v()
_(eNH,oPH)
if(_oz(z,84,oJH,cIH,gg)){oPH.wxVkey=1
var lYH=_mz(z,'upgrade-selector',['bind:__l',85,'bind:change',1,'bind:changeNum',2,'brand',3,'class',4,'countMap',5,'data-event-opts',6,'defaultCheckedIds',7,'required',8,'upgradeData',9,'vueId',10],[],oJH,cIH,gg)
_(oPH,lYH)
}
var xQH=_v()
_(eNH,xQH)
if(_oz(z,96,oJH,cIH,gg)){xQH.wxVkey=1
var aZH=_mz(z,'upgrade-selector',['bind:__l',97,'bind:change',1,'bind:explainShow',2,'brand',3,'class',4,'data-event-opts',5,'defaultCheckedIds',6,'isImg',7,'peopleNum',8,'required',9,'upgradeData',10,'vueId',11],[],oJH,cIH,gg)
_(xQH,aZH)
}
bOH.wxXCkey=1
bOH.wxXCkey=3
oPH.wxXCkey=1
oPH.wxXCkey=3
xQH.wxXCkey=1
xQH.wxXCkey=3
_(tMH,eNH)
}
tMH.wxXCkey=1
tMH.wxXCkey=3
return lKH
}
hGH.wxXCkey=4
_2z(z,63,oHH,e,s,gg,hGH,'upgradeData','__i0__','pid')
var l7G=_v()
_(c5G,l7G)
if(_oz(z,109,e,s,gg)){l7G.wxVkey=1
}
o6G.wxXCkey=1
o6G.wxXCkey=3
l7G.wxXCkey=1
_(h3G,c5G)
var t1H=_n('view')
_rz(z,t1H,'class',110,e,s,gg)
var e2H=_v()
_(t1H,e2H)
if(_oz(z,111,e,s,gg)){e2H.wxVkey=1
}
var b3H=_v()
_(t1H,b3H)
if(_oz(z,112,e,s,gg)){b3H.wxVkey=1
var o4H=_v()
_(b3H,o4H)
if(_oz(z,113,e,s,gg)){o4H.wxVkey=1
}
o4H.wxXCkey=1
}
var x5H=_mz(z,'h-button',['bind:__l',114,'bind:click',1,'class',2,'customStyle',3,'data-event-opts',4,'disabled',5,'size',6,'theme',7,'type',8,'vueId',9,'vueSlots',10],[],e,s,gg)
_(t1H,x5H)
e2H.wxXCkey=1
b3H.wxXCkey=1
_(h3G,t1H)
_(f1G,h3G)
}
f1G.wxXCkey=1
f1G.wxXCkey=3
f1G.wxXCkey=3
_(xYG,oZG)
_(r,xYG)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_29";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_29();	if (__vd_version_info__.delayedGwx) __wxAppCode__['Components/business/ProdPicker/index.wxml'] = [$gwx_XC_29, './Components/business/ProdPicker/index.wxml'];else __wxAppCode__['Components/business/ProdPicker/index.wxml'] = $gwx_XC_29( './Components/business/ProdPicker/index.wxml' );
	;__wxRoute = "Components/business/ProdPicker/index";__wxRouteBegin = true;__wxAppCurrentFile__="Components/business/ProdPicker/index.js";define("Components/business/ProdPicker/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../@babel/runtime/helpers/Arrayincludes"),(global.webpackJsonp=global.webpackJsonp||[]).push([["Components/business/ProdPicker/index"],{"14e9":function(e,t,i){i.r(t);var r=i("e118"),n=i("a359");for(var u in n)["default"].indexOf(u)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("f650");var o=i("f0c5"),a=Object(o.a)(n.default,r.b,r.c,!1,null,"13a62cca",null,!1,r.a,void 0);t.default=a.exports},"57ec":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(i("4795")),n=s(i("2ef0")),u=i("2f62"),o=i("8f93"),a=i("7cdd"),d=i("f274"),c=i("cb19");function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,i,r,n,u,o){try{var a=e[u](o),d=a.value}catch(e){return void i(e)}a.done?t(d):Promise.resolve(d).then(r,n)}function p(e){return function(){var t=this,i=arguments;return new Promise((function(r,n){var u=e.apply(t,i);function o(e){l(u,r,n,o,a,"next",e)}function a(e){l(u,r,n,o,a,"throw",e)}o(void 0)}))}}function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var P="https://cdn.haimati.cn/himo-user-miniapp/assets/image/bgImage/placeholder/lazyload-square.png",y="https://cdn.haimati.cn/himo-user-miniapp/assets/image/bgImage/placeholder/lazyload-square-big.png",k={name:"ProdPicker",components:{SpecHeader:function(){i.e("Components/business/ProdPicker/Components/SpecHeader/index").then(function(){return resolve(i("2b49"))}.bind(null,i)).catch(i.oe)},ProdSelector:function(){i.e("Components/business/ProdPicker/Components/ProdSelector/index").then(function(){return resolve(i("e8f6"))}.bind(null,i)).catch(i.oe)},UpgradeSelector:function(){i.e("Components/business/ProdPicker/Components/UpgradeSelector/index").then(function(){return resolve(i("7ed40"))}.bind(null,i)).catch(i.oe)},PeopleCounter:function(){i.e("Components/business/ProdPicker/Components/PeopleCounter/index").then(function(){return resolve(i("6724"))}.bind(null,i)).catch(i.oe)},SpecialPeopleCounter:function(){i.e("Components/business/ProdPicker/Components/SpecialPeopleCounter/index").then(function(){return resolve(i("b79c"))}.bind(null,i)).catch(i.oe)}},props:{requestDataLoading:{type:Boolean,default:!1},brand:String,pickerKey:[Number,String],value:Boolean,title:String,sourceProd:{type:Object,default:function(){return{}}},discountRules:{type:Array,default:function(){return[]}},defaultCheckedProdData:{type:Array,default:function(){return[]}},prodMultiple:{type:Boolean,default:null},globalNodeMap:Object,globalServiceGroupMap:Object,hidePrice:Boolean,confirmButtonText:String,subPackageId:Number,packageId:Number,fromShopCart:{type:Boolean,default:!1}},data:function(){return{count:1,productArr:[],childProdsForSelect:{},selectSortList:[],checkedProdsMap:{},serviceCountMap:{},upgradeSelectorData:[],prodLoading:!1,nodeMap:{},serviceGroupMap:{},retailSkuMap:{},retailNumMap:{},christmasNote:null,prodTips:[]}},computed:g(g(g({},(0,u.mapState)({cityDiscountRules:function(e){return e.discountRule.cityDiscountRules},showThemeSkin:function(e){return e.home.showThemeSkin}})),(0,u.mapGetters)(["currentCity"])),{},{isRetailProduct:function(){return!this.subPackageId},isBrandMini:function(e){var t=e.brand,i=e.hidePrice;return"gold"!==t||i?{}:{width:"300rpx"}},popupShow:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},confirmDisabled:function(){return 0===this.checkedProdIds.length},checkedProdIds:function(){return n.default.map(n.default.keys(this.checkedProdsMap),(function(e){return Number(e)}))||[]},childProdPeopleNum:function(){var e={normal:[],special:[]},t=this.checkedProdsMap||{};return n.default.filter(this.productArr,(function(e){return e&&t[e.id]&&e.maxPeopleNum!==e.minPeopleNum})).forEach((function(i){var r={id:i.id,max:i.maxPeopleNum,min:i.minPeopleNum};if(!i.peopleNumConfig||n.default.isEmpty(i.peopleNumConfig))r.count=t[i.id].peopleNum,r.name=i.name+"拍摄人数",e.normal.push(r);else{var u=n.default.filter(i.peopleNumConfig,(function(e){return e}));r.counter=n.default.map(u,(function(e){var r=(t[i.id]||{}).counter||{};return{id:e.id,name:e.name,count:r[e.id],min:e.minNum,max:e.maxNum}})),e.special.push(r)}})),e},prodImgForShow:function(){var e=this,t=n.default.values(this.checkedProdsMap).reduce((function(t,i){var r=e.nodeMap[i.id],u=r.name,o=r.imgForShow,d=r.christmasNote;d&&(e.christmasNote=d);var c=n.default.flatten(n.default.values(i.services));if(!0===i.isEntity?i.retailSkus.forEach((function(r,n){var u=e.retailSkuMap[i.retailSkus[n]];if(u){var o=u.mainImg,a=u.productName;t.push({id:i.id,name:a,img:o,thumbImg:o})}})):n.default.isEmpty(c)&&n.default.isEmpty(i.jxjyNum)&&t.push({id:i.id,name:u,img:o||P,thumbImg:o?o+"?imageView2/2/w/200":y}),!n.default.isEmpty(c)){var s=n.default.map(c,(function(t){var r=e.nodeMap[t],n=r.name,o=r.mainImg,d=n;return a.GONGGE_NAMES.includes(n)&&(d=u+n),{id:i.id,name:d,img:o||P,thumbImg:o?o+"?imageView2/2/w/200":y}}));t=[].concat(f(t),f(s))}if(n.default.isArray(i.jxjyNum)&&!n.default.isEmpty(i.jxjyNum)){var l=e.nodeMap[i.id],p=n.default.map(l.gonggeServices?l.gonggeServices.services:[],(function(e){if(i.jxjyNum.includes(e.jxjyNum)){var t=e.img;return{id:i.id,name:l.name+e.name,img:t||P,thumbImg:t?t+"?imageView2/2/w/200":y}}return""}));t=n.default.compact([].concat(f(t),f(p)))}return t=t.sort((function(t,i){return n.default.indexOf(e.selectSortList,t.id)-n.default.indexOf(e.selectSortList,i.id)}))}),[]);return f(t)},checkProdToCartDate:function(){var e=this;if(n.default.isEmpty(this.checkedProdsMap))return{};var t=g({},this.checkedProdsMap);return n.default.transform(t,(function(t,i,r){var u=e.nodeMap[r],o=u.isEntity,a=void 0!==o&&o,d=u.id,c=u.nodeType,s=a?i.retailSkus:n.default.flatten(n.default.values(i.services));return t[r]={counter:i.counter,categoryId:i.categoryId,id:d,peopleNum:i.peopleNum,num:1,isEntity:a,jxjyNum:i.jxjyNum||[],nodeType:c,services:n.default.isEmpty(s)?[]:s.map((function(t){return{id:Number(t),peopleNum:i.peopleNum,num:a&&e.retailNumMap[t]||1}}))},t}),{})},money:function(){var e={price:0,discount:0,discountDes:[],pickDesArr:[]};if(!n.default.isEmpty(this.checkProdToCartDate)){var t,i=[];n.default.forIn(this.checkProdToCartDate,(function(e){i.push(e)})),t=n.default.isEmpty(this.discountRules)?this.cityDiscountRules:this.discountRules;try{e=(0,d.calcPrice)({shopCartList:i,nodeMap:this.nodeMap,retailSkuMap:this.retailSkuMap,rules:t})}catch(e){this.$littleToast(e.message)}}return{price:e.price,originalPrice:e.originalPrice,discount:e.totalDiscount,discountText:(e.discountDes||[]).join("，").replace("人头优惠","人数优惠"),pickDesList:(e.pickDesArr||[]).join("，")}}}),watch:{pickerKey:{immediate:!0,handler:function(){this.dataInit(),this.getProdTipConfig()}},requestDataLoading:{immediate:!0,handler:function(e){e||!this.pickerKey||n.default.isEmpty(this.sourceProd)||(this.dataInit(),this.getProdTipConfig(),this.prodLoading=!1)}}},methods:{getProdTipConfig:function(){var e=this;return p(r.default.mark((function t(){var i,u,d;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=n.default.map(e.productArr,(function(e){return e.id})),!n.default.isEmpty(u)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,(0,o.getResourceConfigListApi)({type:a.RESOURCE_TYPE.SKU_SELECT_TIPS,productIds:u,cityId:null===(i=e.currentCity)||void 0===i?void 0:i.code});case 5:d=t.sent,e.prodTips=d;case 7:case"end":return t.stop()}}),t)})))()},selectImage:function(){var e=this;return p(r.default.mark((function t(){var i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=e.$refs.specHeader.getImgList(),t.abrupt("return",i);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},confirm:function(){var e=this,t=!0,i=n.default.map(n.default.values(n.default.cloneDeep(this.checkProdToCartDate)),(function(i){var r=i.id,u=i.services,o=e.nodeMap[r];if(i.isEntity=o.isEntity,i.notBuyChristmasCategory=o.notBuyChristmasCategory,n.default.isEmpty(u)){var a=n.default.isEmpty(o.services)?[]:n.default.keys(o.services),d=n.default.reduce(a,(function(t,i){var r=e.serviceGroupMap[i];return!n.default.isEmpty(r)&&t.push(r),t}),[]);n.default.some(d,(function(e){return e.required}))&&(e.$littleToast("请选择子产品或升级服务哦～"),t=!1)}else i.services=n.default.map(i.services,(function(e){return e.serviceId=e.id,e}));return o.retailProductId&&(i.retailProductIds=o.retailProductId),i.categoryId=e.sourceProd.id,i.productId=i.id,i.module=e.brand,e.subPackageId&&(i.subPackageId=e.subPackageId),e.packageId&&(i.packageId=e.packageId),i}));if(!t)return!1;try{var r=[],u=[];i.forEach((function(e){r.push(String(e.productId)),u=[].concat(f(u),f(n.default.map(e.services,(function(e){return String(e.serviceId)}))))})),this.$sensors.track("product_select_detail",{sku_ids:r,service_ids:u,package_ids:[],cur_spm:""})}catch(e){}this.$emit("confirm",i,this.pickerKey,this.prodImgForShow,this.selectImage())},previewHandle:function(e){var t=e.index,i=e.list;this.$emit("preview",i,t)},close:function(){this.popupShow=!1},explainShow:function(e){this.$emit("showImgTip",e)},selectChildProd:function(e){var t=this;if(this.isRetailProduct){var i=null,r=[];for(var u in this.checkedProdsMap)r.push(this.nodeMap[this.checkedProdsMap[u].id]);if(r.filter((function(t){return!e.includes(t.id)})).forEach((function(n){i=r.find((function(e){return Array.isArray(e.retailProductId)&&e.retailProductId.includes(n.id)})),t.nodeMap[n.id].retailProductId&&t.nodeMap[n.id].retailProductId.length&&(e=e.filter((function(e){return!t.nodeMap[n.id].retailProductId.includes(e)})))})),i&&e.length)return}var o=null,a={},d=n.default.cloneDeep(this.checkedProdsMap),c=n.default.map(n.default.keys(d),(function(e){return Number(e)})),s=n.default.map(e,(function(e){return Number(e)}));e.length||(this.christmasNote=o),s.length>c.length&&this.unshitSortedList(s[0]);var l=n.default.intersection(c,s);n.default.forIn(d,(function(e,t){l.includes(Number(t))&&(a[t]=e)}));var p=n.default.filter(s,(function(e){return!n.default.includes(l,e)}));n.default.isEmpty(p)||(n.default.forEach(p,(function(e){var i=t.getSkuProduct(e);if(i){var r=i.handledProduct,n=i.product;n.christmasNote&&(o=n.christmasNote),a[e]=r,t.isRetailProduct&&n.retailProductId&&n.retailProductId.length&&n.retailProductId.forEach((function(e){if(!t.checkedProdIds.includes(n.id)){var i=t.getSkuProduct(e);a[i.handledProduct.id]=i.handledProduct}}))}})),this.christmasNote=o),this.checkedProdsMap=a},getSkuProduct:function(e){var t={},i=this.nodeMap[e];if(i){var r=i.defaultPeopleNum;if(t={id:e,services:{},retailSkus:[],nodeType:i.isProduct?a.NODE_TYPE.PRODUCT:"",peopleNum:r||i.minPeopleNum,isEntity:i.isEntity||!1,jxjyNum:i.jxjyNum||[]},i.peopleNumConfig&&!n.default.isEmpty(i.peopleNumConfig)&&(t.counter=n.default.reduce(i.peopleNumConfig,(function(e,t){return e[t.id]=t.minNum,e}),{})),n.default.isEmpty(i.servicesGroups)||n.default.forEach(i.servicesGroups,(function(e){e&&e.required&&!n.default.isEmpty(e.services)&&(t.services[e.id]=[e.services[0].id])})),i.isEntity&&!n.default.isEmpty(i.retailSkus)){var u=n.default.map(i.retailSkus,(function(e){return e.id}));for(var o in t.retailSkus=[u[0]],this.retailNumMap)u.includes(Number(o))&&this.$set(this.retailNumMap,o,1)}return{handledProduct:t,product:i}}},selectRetail:function(e,t){this.$set(this.checkedProdsMap[t],"retailSkus",e||[])},selectService:function(e,t,i){this.unshitSortedList(t),this.$set(this.checkedProdsMap[t].services,i,e||[])},selectGonggeService:function(e,t){this.$set(this.checkedProdsMap,t,n.default.assign({},this.checkedProdsMap[t],{jxjyNum:e})),this.unshitSortedList(t)},changePeopleNum:function(e,t,i){var r,u=this,o=this.checkedProdsMap[t];i?(o.counter||(o.counter={}),o.counter[i]=e,r=n.default.sum(n.default.values(o.counter))):r=Number(e),o.peopleNum=r;var a=o.services;n.default.isEmpty(a)||(o.services=n.default.transform(a,(function(e,t,i){return e[i]=n.default.filter(t,(function(e){var t=u.nodeMap[e];return r>=t.minPeopleNum&&r<=t.maxPeopleNum})),e}),{}));var d=o.jxjyNum;if(!n.default.isEmpty(d)){var c=this.nodeMap[t].gonggeServices.services||[];o.jxjyNum=n.default.filter(d,(function(e){var t=n.default.find(c,(function(t){return t.jxjyNum===e}));return r>=t.minPeople&&r<=t.maxPeople}))}this.$set(this,"checkedProdsMap",n.default.assign({},this.checkedProdsMap))},changeUpgradeNum:function(e,t,i){i&&this.$set(this.retailNumMap,t,e)},unshitSortedList:function(e){this.selectSortList=n.default.filter(this.selectSortList,(function(t){return t!==e})),this.selectSortList.unshift(e)},dataInit:function(){var e=this;if(this.sourceProd&&!n.default.isEmpty(this.sourceProd)){var t=this.handleNodeMap(this.sourceProd);this.nodeMap=t.nodeMap,this.serviceGroupMap=t.serviceGroupMap,this.retailSkuMap=t.retailSkuMap,this.checkedProdsMap=this.handleInitCheckedProd(this.sourceProd,n.default.cloneDeep(this.defaultCheckedProdData)),this.productArr=this.handleProductArr(this.sourceProd),this.childProdsForSelect=this.handleChildProdsForSelect(this.sourceProd,this.productArr),this.upgradeSelectorData=this.handleUpgradeSelectorData(this.productArr,this.checkedProdsMap),this.checkedProdsMap=this.handleInitCheckedProd(this.sourceProd,n.default.cloneDeep(this.defaultCheckedProdData)),this.$nextTick((function(){if(!e.childProdsForSelect.multiple){var t=[];for(var i in e.checkedProdsMap)t.push(e.nodeMap[e.checkedProdsMap[i].id].id);var r=t.filter((function(t){return e.nodeMap[t]&&!e.nodeMap[t].isEntity})),n=t.filter((function(t){return e.nodeMap[t]&&e.nodeMap[t].isEntity}));if(r&&r.length>1){var u=[];for(var o in u.push(r[0]),u.push.apply(u,f(n)),e.checkedProdsMap)u.includes(e.checkedProdsMap[o].id)||e.$delete(e.checkedProdsMap,o)}}}))}},handleNodeMap:function(e){return this.globalNodeMap&&!n.default.isEmpty(this.globalNodeMap)?{nodeMap:this.globalNodeMap||{},serviceGroupMap:this.globalServiceGroupMap||{}}:(0,c.handleNodeMapOneNode)(e)},handleProductArr:function(e){var t=e.isProduct?[e]:n.default.map(e.children);return this.fromShopCart&&(t=t.filter((function(e){return!e.isEntity||!!t.some((function(t){return t.retailProductId&&t.retailProductId.includes(e.id)}))}))),t},handleInitCheckedProd:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=n.default.cloneDeep(e),u={},o={},a=[];if(n.default.isEmpty(r))return u;if(!n.default.isEmpty(i))return i.forEach((function(e){var i=e.productId,r=e.num,d=e.peopleNum,c=e.services,s=e.jxjyNum,l=e.isEntity,p=e.counter,m=[i],h={id:i,num:r,peopleNum:d,jxjyNum:s,isEntity:l,counter:p,services:{},retailSkus:[]},g=t.nodeMap[i];if(c&&!n.default.isEmpty(c)&&!l){var v=n.default.isEmpty(g.servicesGroups)?{}:g.servicesGroups;n.default.forEach(v,(function(e){var t=n.default.map(e.services||[],(function(e){return e.id})),i=e.id,r=n.default.map(c,(function(e){return e.serviceId})),u=n.default.intersection(t,r);n.default.isEmpty(u)||(h.services[i]=u,m=[].concat(f(u),f(m)))}))}c&&!n.default.isEmpty(c)&&l&&c.forEach((function(e){o[e.serviceId]=e.num,h.retailSkus.push(e.serviceId)})),u[i]=n.default.cloneDeep(h),a=[].concat(f(a),f(m))})),this.selectSortList=a,this.retailNumMap=o,u;var d=n.default.find(r.children,(function(e){return!e.isEntity}));if(d.retailProductId&&Array.isArray(d.retailProductId)&&d.retailProductId[0]){var c=d.retailProductId[0];if(!u[c]){var s=this.getSkuProduct(c);s&&(u[c]=s.handledProduct)}}var l=r.isProduct?r:d,p=n.default.isEmpty(l.servicesGroups)?{}:l.servicesGroups,m=null==l?void 0:l.defaultPeopleNum,h={categoryId:r.id,id:l.id,peopleNum:m||l.minPeopleNum,services:{},retailSkus:[]};return a.push(l.id),l.peopleNumConfig&&!n.default.isEmpty(l.peopleNumConfig)&&(h.counter=n.default.reduce(l.peopleNumConfig,(function(e,t){return e[t.id]=t.minNum,e}),{})),n.default.forEach(p,(function(e){e&&e.required&&!n.default.isEmpty(e.services)&&(h.services[e.id]=[e.services[0].id],a.unshift(e.services[0].id))})),l.gonggeServices&&!n.default.isEmpty(l.gonggeServices.services)&&l.gonggeServices.required&&(h.jxjyNum=[l.gonggeServices.services[0].jxjyNum]),u[l.id]=h,this.selectSortList=a,u},handleChildProdsForSelect:function(e,t){var i={explainName:"",explainImg:"",multiple:!1,productArr:[]};return n.default.isEmpty(e)||(i.productArr=n.default.map(t,(function(e){return{id:e.id,name:e.name,isEntity:e.isEntity,isRecommended:e.isRecommended}})),i.explainName=n.default.get(e,"extend.nameForExplanation",""),i.explainImg=n.default.get(e,"extend.imgForExplanation",""),i.multiple=e.isMultiply),i},handleUpgradeSelectorData:function(e,t){return n.default.filter(e,(function(e){return!n.default.isEmpty(e.gonggeServices)||!n.default.isEmpty(e.servicesGroups)||!n.default.isEmpty(e.retailSkus)})).map((function(e,i){var r=t[e.id]?t[e.id].peopleNum:0,u=e.gonggeServices,o=e.servicesGroups,a=e.retailSkus,d=n.default.get(e,"price.gonggePrice.discount",{});return{pid:e.id,serviceGroups:o?n.default.map(o,(function(t){return{id:t.id,pid:e.id,title:e.name+(t.name||""),multiple:t.multiple,required:t.required,checkedId:[],explainName:t.explainName,explainImg:t.explainImg,list:n.default.map(t.services,(function(e){return{id:e.id,name:e.name,max:e.maxPeopleNum,min:e.minPeopleNum,disabled:r<e.minPeopleNum||r>e.maxPeopleNum}}))}})):null,gonggeService:u?{id:e.id+"_gongge_"+i,pid:e.id,title:e.name+(u.name||""),multiple:u.multiple,required:u.required,checkedId:[],explainName:u.explainName,explainImg:u.explainImg,list:n.default.map(u.services,(function(t){return{id:t.jxjyNum,name:t.name,max:t.maxPeople,min:t.minPeople,disabled:r<t.minPeople||r>t.maxPeople,img:t.img,discountText:n.default.get(e,"price.gonggePrice.type","")===c.GonggeType.REDUCTION&&d[t.key]?d[t.key]/10+"折":""}}))}:null,retailSkuData:a?{id:e.id+"_retail_"+i,pid:e.id,title:"".concat(e.name,"尺寸及颜色"),isEntity:!0,multiple:!0,required:!0,max:e.maxPeopleNum,checkedId:[],list:n.default.map(a,(function(e){return{id:e.id,name:e.name,max:e.maxPeopleNum,min:e.minPeopleNum}}))}:null}}))}}};t.default=k},a359:function(e,t,i){i.r(t);var r=i("57ec"),n=i.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(u);t.default=n.a},ad75:function(e,t,i){},e118:function(e,t,i){i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return r}));var r={uPopup:function(){return i.e("node-modules/uview-ui/components/u-popup/u-popup").then(i.bind(null,"df25"))},uLoading:function(){return i.e("node-modules/uview-ui/components/u-loading/u-loading").then(i.bind(null,"1bfa"))}},n=function(){var e=this,t=(e.$createElement,e._self._c,e.prodLoading?null:e.__map(e.upgradeSelectorData,(function(t,i){return{$orig:e.__get_orig(t),g0:e.checkedProdIds.includes(t.pid)}}))),i=e.prodLoading||e.hidePrice?null:e.money.price.toFixed(2);e._isMounted||(e.e0=function(t){e.popupShow=!1}),e.$mp.data=Object.assign({},{$root:{l0:t,g1:i}})},u=[]},f650:function(e,t,i){var r=i("ad75");i.n(r).a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["Components/business/ProdPicker/index-create-component",{"Components/business/ProdPicker/index-create-component":function(e,t,i){i("543d").createComponent(i("14e9"))}},[["Components/business/ProdPicker/index-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'Components/business/ProdPicker/index.js'});require("Components/business/ProdPicker/index.js");