var __wxAppData=__wxAppData||{};var __wxRoute=__wxRoute||"";var __wxRouteBegin=__wxRouteBegin||"";var __wxAppCode__=__wxAppCode__||{};var global=global||{};var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:undefined,total_ops:0};var __wxAppCurrentFile__=__wxAppCurrentFile__||"";var Component=Component||function(){};var definePlugin=definePlugin||function(){};var requirePlugin=requirePlugin||function(){};var Behavior=Behavior||function(){};var __vd_version_info__=__vd_version_info__||{};var __GWX_GLOBAL__=__GWX_GLOBAL__||{};

  try {Object.assign(__wxConfig, {resolveAlias: {"@/*":"/*","@libs/*":"/libs/*","@events/*":"/events/*","@utils/*":"/utils/*","@services/*":"/services/*","@models/*":"/models/*","@behavior/*":"/behavior/*","@store/*":"/store/*"}});}catch(e) {console.error('resolveAlias is illegal', e);}
if(typeof globalThis!=="object"){var globalThis={}}var __webnode__;(function(){"use strict";var e={};(function(){e.d=function(r,n){for(var t in n){if(e.o(n,t)&&!e.o(r,t)){Object.defineProperty(r,t,{enumerable:true,get:n[t]})}}}})();(function(){e.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}})();(function(){e.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();var r={};e.r(r);e.d(r,{define:function(){return c},require:function(){return O},requireOnce:function(){return S}});var n=globalThis;var t=1;var i=2;var o={};var a={};var u=1;if(globalThis.wxModuleVersion){var s=~~globalThis.wxModuleVersion;globalThis.enableWxModule=u>s}else{globalThis.wxModuleVersion=u;globalThis.enableWxModule=true}var f=function(){return{__wxRoute:n.__wxRoute,__wxAppCurrentFile__:n.__wxAppCurrentFile__,__wxRouteBegin:n.__wxRouteBegin}};var l=function(e){n.__wxRoute=e.__wxRoute;n.__wxAppCurrentFile__=e.__wxAppCurrentFile__;n.__wxRouteBegin=e.__wxRouteBegin};function c(e,r){var n;if((n=o[e])!==null&&n!==void 0&&n.factory){var i=o[e];var a=r.toString();if(!i.factoryString){i.factoryString=i.factory.toString()}if(a!==i.factoryString){o[e]={status:t,factory:r,factoryString:a}}}else{o[e]={status:t,factory:r}}}var _=function(e){var r=e.match(/(.*)\/([^/]+)?$/);return!r||!r[1]?"./":r[1]};var v=function(e){if(!e){return undefined}if(m.subPackages){for(var r=0,n=m.subPackages.length;r<n;r++){if(e.indexOf(m.subPackages[r].root)===0){return m.subPackages[r]}}}return undefined};var d=function(e){var r=[];var n=e.split("/");for(var t=0,i=n.length;t<i;++t){var o=n[t];if(o===""||o==="."){continue}if(o===".."){if(r.length===0){r=null;break}r.pop()}else if(t+1<i&&n[t+1]===".."){t++}else{r.push(o)}}return r};var g=function(e){var r=d(e+"/index.js").join("/");if(o[r])return r;r=d(e).join("/");if(!/\.js$/.test(r))r+=".js";if(o[r])return r;return""};var p=function(e,r,n){var t=e;if(!/\.js$/.test(t))t+=".js";if(typeof t==="string"&&o[t])return t;var i=d(r);if(!i)throw new Error("can not find module : "+n);var a=e.substring(i.join("/").length);var u;var s;while(i.length){s=i.join("/")+"/miniprogram_npm"+a;u=g(s);if(u)break;i.pop()}if(!u){a=a[0]==="/"?a:"/"+a;s="miniprogram_npm"+a;u=g(s)}return u||e};var b=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];function h(e,r){var n=e==="__APP__";if(e.slice(-1)!=="/")e+="/";if(m.platform==="devtools"){WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},r)}else{__appServiceSDK__.loadSubpackage({name:e,success(){var t=m.subPackages.find((function(r){return r.root===e}));var i=Object.keys(t.plugins||{}).map((function(e){var r=t.plugins[e].provider;var n="__plugin__/"+r;return{plugin_id:r,prefix_path:b.includes(r)?null:n}}));__subContextEngine__.injectEntryFile(n?"":e,i);r()}})}}var w=function(e){var r;var n=(r=m)===null||r===void 0?void 0:r.subPackages;if(!n)n=[];for(var t=0;t<n.length;++t){var i=n[t].root||"";if(i&&i.slice(-1)!=="/"){i+="/"}if(e.slice(0,i.length)===i){return i}}return"__APP__"};var x=false;var y=[];var j=function(e){Object.keys(e).forEach((function(r){var n=r;if(r.endsWith("*")){n=n.slice(0,-1)}var t=e[r];if(e[r].endsWith("*")){t=t.slice(0,-1)}y.push({key:n,value:t})}))};var m=Object.assign({},__wxConfig);if(typeof __wxConfig.onReady==="function"){__wxConfig.onReady((function(){m=Object.assign({},__wxConfig);if(typeof m.resolveAlias==="object"){x=!!Object.keys(m.resolveAlias).length;x&&j(m.resolveAlias)}}))}else{if(typeof m.resolveAlias==="object"){x=!!Object.keys(m.resolveAlias).length;x&&j(m.resolveAlias)}}var k=function(e){var r={key:""};var n=false;y.forEach((function(t){if(e.startsWith(t.key)&&r.key.length<t.key.length){r=t;n=true}}));if(!n){return}var t=e.replace(r.key,r.value);if(t[0]==="/"){t=t.slice(1)}return t};var P=function(e){var r=_(e);var n=function(n,t){var i=r;if(typeof n!=="string"){throw new Error("require args must be a string")}var o;if(n==="/__wx__/private-api"){o=d(n).join("/")}else{if(x){o=k(n)}if(o!==undefined){i="";o=d(o).join("/")}else{o=d(i+"/"+n).join("/")}}if(!o)throw new Error("can not find module : ".concat(o,", require args is ").concat(n));try{var a=p(o,i,n);var u=function(e){return d(e)[0]==="functional-pages"};if(u(a)!==u(e)){Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+n+'") in '+e})}if(m.platform==="devtools"&&m.subPackages&&t===undefined){var s=v(a);var f=v(e);if(s&&s!==f){console.warn('Requires "'.concat(n,'" from "').concat(e,'" without a callback may fail in production, since they are in different subPackages'))}}return O(a,undefined,t,n)}catch(e){throw e}};n.async=function(e){return new Promise((function(r){return n(e,r)}))};return n};function O(e,r,n){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";if(typeof r==="undefined"){r=true}if(typeof e!=="string"){throw new Error("require args must be a string")}var s=o[e];if(!s){var c=e.indexOf("/")===-1?e+"/index.js":e;c="miniprogram_npm/"+c;if(!/\.js$/.test(c))c+=".js";s=o[c]}if(!e.endsWith(".js"))e+=".js";if(!s&&m.platform!=="devtools"&&typeof __subContextEngine__!=="undefined"){var _="/"+e.substr(0,e.length-3)+".appservice.js";var v=f();var d=__subContextEngine__.loadJsFiles([_],null,{waitResult:true});l(v);s=o[e];d&&d(!!s)}if(typeof n==="function"){if(s){setTimeout((function(){return n(O(e))}))}else{var g=w(e);var p=f();h(g,(function(){n(O(e));l(p)}))}return}if(!s){var b="module '".concat(e,"' is not defined, require args is '").concat(u===""?e:u,"'");throw new Error(b)}var x={exports:{}};var y=s.factory;if(!r||a[e]){delete s.exports;s.status=t;a[e]=true;y&&y(P(e),x,x.exports);return x.exports}if(s.status===t){s.exports=x.exports;s.status=i;var j;try{y&&(j=y(P(e),x,x.exports))}catch(e){s.status=t;throw e}s.exports=x.exports!==undefined?x.exports:j}return s.exports}function S(e){return O(e,false)}n.__modules__=o;__webnode__=r})();if(globalThis.enableWxModule!==false){var defineMiniProgramFile=define=__webnode__.define;var requireMiniProgramFile=require=__webnode__.require;requireOnce=__webnode__.requireOnce}/*v0.5vv_20211229_syb_scopedata*/global.__wcc_version__='v0.5vv_20211229_syb_scopedata';global.__wcc_version_info__={"customComponents":true,"fixZeroRpx":true,"propValueDeepCopy":false};
var $gwxc
var $gaic={}
$gwx=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx || [];
__WXML_GLOBAL__.ops_set.$gwx=z;
__WXML_GLOBAL__.ops_init.$gwx=true;
var nv_require=function(){var nnm={"p_./components/JoinUsers/JoinUsers.wxs":np_0,"p_./wxs/format.wxs":np_1,"p_./wxs/lottery.wxs":np_2,"p_./wxs/util.wxs":np_3,};var nom={};return function(n){if(n[0]==='p'&&n[1]==='_'&&f_[n.slice(2)])return f_[n.slice(2)];return function(){if(!nnm[n]) return undefined;try{if(!nom[n])nom[n]=nnm[n]();return nom[n];}catch(e){e.message=e.message.replace(/nv_/g,'');var tmp = e.stack.substring(0,e.stack.lastIndexOf(n));e.stack = tmp.substring(0,tmp.lastIndexOf('\n'));e.stack = e.stack.replace(/\snv_/g,' ');e.stack = $gstack(e.stack);e.stack += '\n    at ' + n.substring(2);console.error(e);}
}}}()
f_['./components/JiaFenAvatar/JiaFenAvatar.wxml']={};
f_['./components/JiaFenAvatar/JiaFenAvatar.wxml']['format'] =f_['./wxs/format.wxs'] || nv_require("p_./wxs/format.wxs");
f_['./components/JiaFenAvatar/JiaFenAvatar.wxml']['format']();

f_['./components/JoinUsers/JoinUsers.wxml']={};
f_['./components/JoinUsers/JoinUsers.wxml']['format'] =f_['./wxs/format.wxs'] || nv_require("p_./wxs/format.wxs");
f_['./components/JoinUsers/JoinUsers.wxml']['format']();
f_['./components/JoinUsers/JoinUsers.wxml']['wxs'] =f_['./components/JoinUsers/JoinUsers.wxs'] || nv_require("p_./components/JoinUsers/JoinUsers.wxs");
f_['./components/JoinUsers/JoinUsers.wxml']['wxs']();

f_['./components/JoinUsers/JoinUsers.wxs'] = nv_require("p_./components/JoinUsers/JoinUsers.wxs");
function np_0(){var nv_module={nv_exports:{}};nv_module.nv_exports = ({nv_isShow:(function (nv_extra){if (!nv_extra){return(true)} else {return((nv_extra.nv_hide_data || []).nv_indexOf('join_users') < 0)}}),});return nv_module.nv_exports;}

f_['./components/PrizeImages/PrizeImages.wxml']={};
f_['./components/PrizeImages/PrizeImages.wxml']['format'] =f_['./wxs/format.wxs'] || nv_require("p_./wxs/format.wxs");
f_['./components/PrizeImages/PrizeImages.wxml']['format']();

f_['./components/PrizeNameInfo/PrizeNameInfo.wxml']={};
f_['./components/PrizeNameInfo/PrizeNameInfo.wxml']['format'] =f_['./wxs/format.wxs'] || nv_require("p_./wxs/format.wxs");
f_['./components/PrizeNameInfo/PrizeNameInfo.wxml']['format']();

f_['./wxs/format.wxs'] = nv_require("p_./wxs/format.wxs");
function np_1(){var nv_module={nv_exports:{}};var nv_currencyReg = nv_getRegExp('.','g');var nv_rAvatar = nv_getRegExp('^(https:\x5c/\x5c/wx.qlogo.cn\x5c/mmopen\x5c/vi_32\x5c/[^/]+\x5c/)(\x5cd+)$','ig');var nv_chnNumChar = ["零","一","二","三","四","五","六","七","八","九"];var nv_chnUnitSection = ["","万","亿","万亿","亿亿"];var nv_chnUnitChar = ["","十","百","千"];function nv_SectionToChinese(nv_section){var nv_strIns = "";var nv_chnStr = "";var nv_unitPos = 0;var nv_zero = true;while(nv_section > 0){var nv_v = nv_section % 10;if (nv_v === 0){if (!nv_zero){nv_zero = true;nv_chnStr = nv_chnNumChar[((nt_0=(nv_v),null==nt_0?undefined:'number'=== typeof nt_0?nt_0:"nv_"+nt_0))] + nv_chnStr}} else {nv_zero = false;nv_strIns = nv_chnNumChar[((nt_1=(nv_v),null==nt_1?undefined:'number'=== typeof nt_1?nt_1:"nv_"+nt_1))];nv_strIns += nv_chnUnitChar[((nt_2=(nv_unitPos),null==nt_2?undefined:'number'=== typeof nt_2?nt_2:"nv_"+nt_2))];nv_chnStr = nv_strIns + nv_chnStr};nv_unitPos++;nv_section = Math.nv_floor(nv_section / 10)};return(nv_chnStr)};function nv_numberToChinese(nv_number){var nv_a = (nv_number + '').nv_split('');var nv_s = [];var nv_chars = '零一二三四五六七八九';var nv_units = '个十百千万@#%亿^\x26~';var nv_j = nv_a.nv_length - 1;if (nv_a.nv_length > 12){nv_throw;nv_new;nv_Error('too big')} else {var nv_i = 0;for(nv_i , nv_j;nv_i <= nv_j;nv_i++){if (nv_j === 1 || nv_j === 5 || nv_j === 9){if (nv_i === 0){if (nv_a[((nt_3=(nv_i),null==nt_3?undefined:'number'=== typeof nt_3?nt_3:"nv_"+nt_3))] !== '1')nv_s.nv_push(nv_chars.nv_charAt(nv_a[((nt_4=(nv_i),null==nt_4?undefined:'number'=== typeof nt_4?nt_4:"nv_"+nt_4))]));} else {nv_s.nv_push(nv_chars.nv_charAt(nv_a[((nt_5=(nv_i),null==nt_5?undefined:'number'=== typeof nt_5?nt_5:"nv_"+nt_5))]))}} else {nv_s.nv_push(nv_chars.nv_charAt(nv_a[((nt_6=(nv_i),null==nt_6?undefined:'number'=== typeof nt_6?nt_6:"nv_"+nt_6))]))};if (nv_i !== nv_j){nv_s.nv_push(nv_units.nv_charAt(nv_j - nv_i))}}};return(nv_s.nv_join('').nv_replace(nv_getRegExp('零([十百千万亿@#%^\x26~])','g'),(function (nv_m,nv_d,nv_b){nv_b = nv_units.nv_indexOf(nv_d);if (nv_b !== -1){if (nv_d === '亿')return(nv_d);;if (nv_d === '万')return(nv_d);;if (nv_a[((nt_7=(nv_j - nv_b),null==nt_7?undefined:'number'=== typeof nt_7?nt_7:"nv_"+nt_7))] === '0')return('零');};return('')})).nv_replace(nv_getRegExp('零+','g'),'零').nv_replace(nv_getRegExp('零([万亿])','g'),(function (nv_m,nv_b){return(nv_b)})).nv_replace(nv_getRegExp('亿[万千百]','g'),'亿').nv_replace(nv_getRegExp('[零]$'),'').nv_replace(nv_getRegExp('[@#%^\x26~]','g'),(function (nv_m){return(({'nv_@':'十','nv_#':'百','nv_%':'千','nv_^':'十','nv_\x26':'百','nv_~':'千',})[((nt_8=(nv_m),null==nt_8?undefined:'number'=== typeof nt_8?nt_8:"nv_"+nt_8))])})).nv_replace(nv_getRegExp('([亿万])([一-九])','g'),(function (nv_m,nv_d,nv_b,nv_c){nv_c = nv_units.nv_indexOf(nv_d);if (nv_c !== -1){if (nv_a[((nt_9=(nv_j - nv_c),null==nt_9?undefined:'number'=== typeof nt_9?nt_9:"nv_"+nt_9))] === '0')return(nv_d + '零' + nv_b);};return(nv_m)})))};function nv_addZero(nv_t){if (nv_t < 10){return('0' + nv_t)};return(nv_t.nv_toString())};function nv_includes(nv_arr,nv_item){if (!nv_arr){return(false)};return(nv_arr.nv_indexOf(nv_item) !== -1)};nv_module.nv_exports = ({nv_chineseNumber:(function (nv_num){var nv_unitPos = 0;var nv_strIns = "";var nv_chnStr = "";var nv_needZero = false;if (nv_num === 0){return(nv_chnNumChar[(0)])};while(nv_num > 0){var nv_section = nv_num % 10000;if (nv_needZero){nv_chnStr = nv_chnNumChar[(0)] + nv_chnStr};nv_strIns = nv_SectionToChinese(nv_section);nv_strIns += nv_section !== 0 ? nv_chnUnitSection[((nt_12=(nv_unitPos),null==nt_12?undefined:'number'=== typeof nt_12?nt_12:"nv_"+nt_12))]:nv_chnUnitSection[(0)];nv_chnStr = nv_strIns + nv_chnStr;nv_needZero = nv_section < 1000 && nv_section > 0;nv_num = Math.nv_floor(nv_num / 10000);nv_unitPos++};if (nv_chnStr.nv_indexOf('一十') === 0){nv_chnStr = nv_chnStr.nv_slice(1)};return(nv_chnStr)}),nv_prizeLevel:(function (nv_level){return(nv_numberToChinese(nv_level))}),nv_numberToChinese:(function (nv_num){return(nv_numberToChinese(nv_num))}),nv_currency:(function (nv_num,nv_short){nv_num = nv_num / 100;if (nv_short){return(nv_num.nv_toString())};return(nv_num.nv_toFixed(2).nv_toString().nv_replace(nv_currencyReg,(function (nv_c,nv_i,nv_a){return(nv_i && nv_c !== "." && ((nv_a.nv_length - nv_i) % 3 === 0) ? ',' + nv_c:nv_c)})))}),nv_wxAvatar:(function (nv_image,nv_size){nv_size = nv_size || 64;if (nv_rAvatar.nv_test(nv_image)){return(nv_image.nv_replace(nv_rAvatar,'$1' + nv_size))} else {return(nv_image)}}),nv_groupUsers:(function (nv_users){return(nv_users.nv_slice(0,3))}),nv_conditionImage:(function (nv_type,nv_value){if (nv_type === 'area'){return('https://lucky-cdn.nocode.com/mina/lottery/icn-condition-location@3x.png')} else if (nv_type === 'gender'){if (nv_value === '男'){return('https://lucky-cdn.nocode.com/mina/lottery/icn-condition-male@3x.png')} else {return('https://lucky-cdn.nocode.com/mina/lottery/icn-condition-female@3x.png')}} else if (nv_type === 'point'){return('https://lucky-cdn.nocode.com/mina/lottery/icn-condition-wishes@3x.png?t\x3d2')} else {return('')}}),nv_image:(function (nv_image,nv_process){if (!nv_image){return("")};var nv_split = nv_image.nv_split("!");if (nv_split.nv_length === 1){return(nv_image + "!webp90")} else {return(nv_split[(0)] + (nv_process ? ('!' + nv_process):"!webp90"))}}),nv_detailImage:(function (nv_image,nv_process){if (!nv_image){return("")};if (typeof nv_image.nv_image === 'string'){nv_image = nv_image.nv_image};var nv_split = nv_image.nv_split("!");return(nv_split[(0)] + (nv_process ? "!" + nv_process:"!webp90"))}),nv_processImage:(function (nv_image,nv_format){if (!nv_image){return("")};var nv_split = nv_image.nv_split("!");return(nv_split[(0)] + (nv_format ? ('!' + nv_format):"!webp90"))}),nv_appendPrizeName:(function (nv_prizes){if (!nv_prizes || !nv_prizes.nv_length){return('')};return(nv_prizes.nv_map((function (nv_i){return(nv_i.nv_name)})).nv_join('、'))}),nv_slice:(function (nv_arr,nv_end){if (nv_arr){return(nv_arr.nv_slice(0,nv_end))} else {return(nv_arr)}}),nv_fixedNumber:(function (nv_number,nv_range){return(nv_number.nv_toFixed(nv_range))}),nv_numberToPercentString:(function (nv_num){var nv_percent = nv_num * 100;if (nv_percent >= 10){return(nv_percent.nv_toFixed(0))} else if (nv_percent >= 1){return(nv_percent.nv_toFixed(1))} else if (nv_percent >= 0.1){return(nv_percent.nv_toFixed(2))} else if (nv_percent >= 0.01){return(nv_percent.nv_toFixed(3))} else if (nv_percent >= 0.001){return(nv_percent.nv_toFixed(4))} else if (nv_percent >= 0.0001){return(nv_percent.nv_toFixed(5))} else {return(nv_percent.nv_toFixed(0))}}),nv_indexOf:(function (nv_arr,nv_item){if (!nv_arr || !nv_arr.nv_indexOf){return(-1)};return(nv_arr.nv_indexOf(nv_item))}),nv_changeToOneElement:(function (nv_arr){if (nv_arr.nv_constructor === 'Array'){return([nv_arr[(0)]])} else {return(nv_arr)}}),nv_getAvatarPendant:(function (nv_style,nv_pendant){return(nv_pendant[((nt_18=(nv_style),null==nt_18?undefined:'number'=== typeof nt_18?nt_18:"nv_"+nt_18))])}),nv_getPrizeName:(function (nv_prize){if (nv_prize.nv_name){return(nv_prize.nv_name)};if (nv_prize.nv_type === 7 && nv_prize.nv_money){return(nv_prize.nv_money + ' 元拼手气红包')};if (nv_prize.nv_type === 2 && nv_prize.nv_money){return(nv_prize.nv_money + ' 元现金红包')};return('')}),nv_transformDate:(function (nv_date){if (!nv_date){return('')};var nv_d = nv_getDate(nv_date);var nv_month = nv_d.nv_getMonth() + 1;var nv_day = nv_d.nv_getDate();var nv_hour = nv_d.nv_getHours();var nv_minutes = nv_d.nv_getMinutes();return(nv_month + ' 月 ' + nv_day + ' 日 ' + nv_addZero(nv_hour) + ':' + nv_addZero(nv_minutes))}),nv_compressAvatar:(function (nv_avatar){if (!nv_avatar){return('')};if (nv_avatar.nv_indexOf('https://lucky-cdn') > -1){return(nv_avatar + '!t1')};return(nv_avatar)}),nv_includes:nv_includes,});return nv_module.nv_exports;}

f_['./wxs/lottery.wxs'] = nv_require("p_./wxs/lottery.wxs");
function np_2(){var nv_module={nv_exports:{}};function nv_isQuizLottery(nv_lottery){if (!nv_lottery){return(false)};if (nv_lottery.nv_form_template){var nv_formData = nv_lottery.nv_form_template;if (nv_formData.nv_enable && nv_formData.nv_type === 'exam'){return(true)}};return(false)};function nv_showJoinNotification(nv_lottery){if (!nv_lottery){return(false)};var nv_joinable = nv_lottery.nv_state === 0 || nv_lottery.nv_state === 1;var nv_canRecall = nv_lottery.nv_extra && nv_lottery.nv_extra.nv_enable_user_recall;return(!nv_lottery.nv_is_participator && nv_joinable && nv_canRecall && !nv_isQuizLottery(nv_lottery))};nv_module.nv_exports = ({nv_isQuizLottery:nv_isQuizLottery,nv_showJoinNotification:nv_showJoinNotification,});return nv_module.nv_exports;}

f_['./wxs/util.wxs'] = nv_require("p_./wxs/util.wxs");
function np_3(){var nv_module={nv_exports:{}};nv_module.nv_exports = ({nv_inArray:(function (nv_val,nv_arr){return(nv_arr.nv_indexOf(nv_val) > -1)}),nv_truncate:(function (nv_target,nv_length,nv_enable){if (nv_enable === false)return(nv_target);;return(nv_target.nv_slice(0,nv_length))}),nv_getCurrentYear:(function (){var nv_date = nv_getDate();return(nv_date.nv_getFullYear())}),});return nv_module.nv_exports;}

var x=[];if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||true)$gwx();;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/Arrayincludes.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(0==n)return!1;for(var i,o,a=0|e,u=Math.max(0<=a?a:n-Math.abs(a),0);u<n;){if((i=t[u])===(o=r)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;u++}return!1}});
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/Arrayincludes.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/Objectentries.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
Object.entries||(Object.entries=function(e){for(var r=Object.keys(e),t=r.length,n=new Array(t);t--;)n[t]=[r[t],e[r[t]]];return n});
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/Objectentries.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/Objectvalues.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(e[t]);return r});
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/Objectvalues.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/arrayLikeToArray.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,l=new Array(r);e<r;e++)l[e]=n[e];return l};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/arrayLikeToArray.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/arrayWithHoles.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(r){if(Array.isArray(r))return r};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/arrayWithHoles.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/arrayWithoutHoles.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./arrayLikeToArray");module.exports=function(a){if(Array.isArray(a))return r(a)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/arrayWithoutHoles.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/assertThisInitialized.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/assertThisInitialized.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/asyncToGenerator.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
function n(n,t,o,r,e,i,u){try{var c=n[i](u),v=c.value}catch(n){return void o(n)}c.done?t(v):Promise.resolve(v).then(r,e)}module.exports=function(t){return function(){var o=this,r=arguments;return new Promise((function(e,i){var u=t.apply(o,r);function c(t){n(u,e,i,c,v,"next",t)}function v(t){n(u,e,i,c,v,"throw",t)}c(void 0)}))}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/asyncToGenerator.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/classCallCheck.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/classCallCheck.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/construct.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./setPrototypeOf"),t=require("./isNativeReflectConstruct");function r(n,o,u){return t()?module.exports=r=Reflect.construct.bind():module.exports=r=function(t,r,n){var o=[null];o.push.apply(o,r);var u=new(Function.bind.apply(t,o));return n&&e(u,n.prototype),u},r.apply(null,arguments)}module.exports=r;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/construct.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/createClass.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./toPropertyKey");function r(r,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,e(n.key),n)}}module.exports=function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/createClass.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/createForOfIteratorHelper.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./unsupportedIterableToArray");module.exports=function(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=r(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var o=0,a=function(){};return{s:a,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,f=!1;return{s:function(){t=t.call(n)},n:function(){var r=t.next();return u=r.done,r},e:function(r){f=!0,i=r},f:function(){try{u||null==t.return||t.return()}finally{if(f)throw i}}}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/createForOfIteratorHelper.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/createSuper.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./getPrototypeOf"),t=require("./isNativeReflectConstruct"),e=require("./possibleConstructorReturn");module.exports=function(o){var u=t();return function(){var t,i=r(o);if(u){var s=r(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return e(this,t)}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/createSuper.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/defineProperty.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./toPropertyKey");module.exports=function(r,t,n){return(t=e(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/defineProperty.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/getPrototypeOf.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
function t(e){return module.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}module.exports=t;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/getPrototypeOf.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/inherits.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./setPrototypeOf");module.exports=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e(t,r)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/inherits.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/isNativeFunction.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/isNativeFunction.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/isNativeReflectConstruct.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/isNativeReflectConstruct.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/iterableToArray.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/iterableToArray.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/iterableToArrayLimit.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(l,r){var e=null==l?null:"undefined"!=typeof Symbol&&l[Symbol.iterator]||l["@@iterator"];if(null!=e){var t,n,u,f,i=[],o=!0,a=!1;try{if(u=(e=e.call(l)).next,0===r){if(Object(e)!==e)return;o=!1}else for(;!(o=(t=u.call(e)).done)&&(i.push(t.value),i.length!==r);o=!0);}catch(l){a=!0,n=l}finally{try{if(!o&&null!=e.return&&(f=e.return(),Object(f)!==f))return}finally{if(a)throw n}}return i}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/iterableToArrayLimit.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/nonIterableRest.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/nonIterableRest.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/nonIterableSpread.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
module.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/nonIterableSpread.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/objectSpread2.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./defineProperty");function r(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}module.exports=function(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/objectSpread2.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/possibleConstructorReturn.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./typeof"),r=require("./assertThisInitialized");module.exports=function(o,t){if(t&&("object"===e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(o)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/possibleConstructorReturn.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/regeneratorRuntime.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var t=require("./typeof");function e(){module.exports=e=function(){return r},module.exports.__esModule=!0,module.exports.default=module.exports;var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new k(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var p={};function d(){}function v(){}function y(){}var g={};h(g,u,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(G([])));w&&w!==n&&o.call(w,u)&&(g=w);var x=y.prototype=d.prototype=Object.create(g);function L(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function b(e,r){function n(i,a,u,c){var l=s(e[i],e,a);if("throw"!==l.type){var h=l.arg,f=h.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):r.resolve(f).then((function(t){h.value=t,u(h)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=_(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function G(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=h(y,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},r.awrap=function(t){return{__await:t}},L(b.prototype),h(b.prototype,c,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(x),h(x,l,"Generator"),h(x,u,(function(){return this})),h(x,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:G(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}module.exports=e,module.exports.__esModule=!0,module.exports.default=module.exports;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/regeneratorRuntime.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/setPrototypeOf.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
function t(e,o){return module.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t(e,o)}module.exports=t;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/setPrototypeOf.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/slicedToArray.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./arrayWithHoles"),e=require("./iterableToArrayLimit"),t=require("./unsupportedIterableToArray"),i=require("./nonIterableRest");module.exports=function(u,a){return r(u)||e(u,a)||t(u,a)||i()};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/slicedToArray.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/toConsumableArray.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./arrayWithoutHoles"),e=require("./iterableToArray"),u=require("./unsupportedIterableToArray"),a=require("./nonIterableSpread");module.exports=function(o){return r(o)||e(o)||u(o)||a()};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/toConsumableArray.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/toPrimitive.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./typeof");module.exports=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/toPrimitive.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/toPropertyKey.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./typeof"),e=require("./toPrimitive");module.exports=function(i){var t=e(i,"string");return"symbol"===r(t)?t:String(t)};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/toPropertyKey.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/typeof.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
function o(t){return module.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}module.exports=o;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/typeof.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/unsupportedIterableToArray.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var r=require("./arrayLikeToArray");module.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}};
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/unsupportedIterableToArray.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("@babel/runtime/helpers/wrapNativeSuper.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
var e=require("./getPrototypeOf"),r=require("./setPrototypeOf"),t=require("./isNativeFunction"),o=require("./construct");function n(u){var i="function"==typeof Map?new Map:void 0;return module.exports=n=function(n){if(null===n||!t(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,u)}function u(){return o(n,arguments,e(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r(u,n)},n(u)}module.exports=n;
},{isPage:false,isComponent:false,currentFile:'@babel/runtime/helpers/wrapNativeSuper.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/addFansCommon.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,a=(e=require("moment"))&&e.__esModule?e:{default:e},r=require("../utils/tools");exports.default=Behavior({methods:{handleSaveLocal:function(e,r){var o=wx.getStorageSync("USER_ADD_FANS_RECORD");if(o){o[e]||(o[e]={clearTime:(0,a.default)(r).add(1,"day")},wx.setStorageSync("USER_ADD_FANS_RECORD",o))}else{var t={};t[e]={clearTime:(0,a.default)(r).add(1,"day")},wx.setStorageSync("USER_ADD_FANS_RECORD",t)}},recordFansHandle:function(e){if(console.log("recordFansHandle",e),(0,r.dontNeedRecord)(e))return!1;var a=e.id,o=e.latest_draw_time;try{this.handleSaveLocal(a,o)}catch(e){console.error(e)}finally{var t=wx.getStorageSync("USER_ADD_FANS_RECORD");console.log(t,"recordFansHandle")}}}});
},{isPage:false,isComponent:false,currentFile:'behavior/addFansCommon.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/common.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";module.exports=Behavior({attached:function(){this.$page=this.selectRootComponent()},detached:function(){this.$page=null},methods:{selectRootComponent:function(){var t=getCurrentPages();return t[t.length-1]},showDialog:function(t,o){var n=this.selectRootComponent(),e=(n&&n.dialogs||[]).find((function(o){return o.dataset.id===t}));e?e.show(o):console.warn("dialog ".concat(t," not found"),this)},getDialog:function(t){var o=this.selectRootComponent(),n=(o&&o.dialogs||[]).find((function(o){return o.dataset.id===t}));if(n)return n;console.warn("dialog ".concat(t," not found in Page"))}}});
},{isPage:false,isComponent:false,currentFile:'behavior/common.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/dialog.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=(e=require("./common"))&&e.__esModule?e:{default:e},i=require("../utils/tools");exports.default=Behavior({behaviors:[t.default],attached:function(){this.$page||(this.$page=(0,i.selectRootComponent)()),this.$page.dialogs||(this.$page.dialogs=[]),this.$page.dialogs.push(this)},detached:function(){if(this.$page&&this.$page.dialogs){var e=this.$page.dialogs.indexOf(this);this.$page.dialogs.splice(e,1)}},methods:{show:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.data&&(this.setData(t.data),this._on=t.on||{}),null===(e=this.selectComponent(".dialog"))||void 0===e||e.show()},hide:function(){var e;null===(e=this.selectComponent(".dialog"))||void 0===e||e.hide()}}});
},{isPage:false,isComponent:false,currentFile:'behavior/dialog.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/initiatorBehavior.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),a=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(require("@utils/tools")),i=(e=require("@behavior/common"))&&e.__esModule?e:{default:e},n=require("@utils/subscribeMessage"),o=require("@services/game"),u=require("@services/newSub");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}exports.default=Behavior({behaviors:[i.default],methods:{handleShareTrigger:function(){var e;this.triggerEvent("shareLottery",{id:null===(e=this.data.lottery)||void 0===e?void 0:e.id},{bubbles:!0,composed:!0})},handleInitiatorShare:function(){var e=this;return t(r().mark((function t(){var i,s,l,c,d,f,b,h,p,g,T,E,_,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.data.lottery,s=i.id,l=i.is_initiator,c=i.users,d=i.extra,l){r.next=3;break}return r.abrupt("return",e.handleShareTrigger());case 3:if(!(0,n.isInitiatorNeedAuthLotteryResult)(s)){r.next=13;break}return f=null==d?void 0:d.enable_user_recall,b=f?[n.TEMPLATE_TYPES.CREATE_LOTTERY,n.TEMPLATE_TYPES.RECALL_TOEXPIRE,n.TEMPLATE_TYPES.RECALL_REMIND]:[n.TEMPLATE_TYPES.CREATE_LOTTERY,n.TEMPLATE_TYPES.PROMOTION_STATECHANGE],r.next=9,(0,n.authSubscribeMesssage)(b,a.get(e.data,"lottery",""));case 9:h=r.sent,(0,u.reportNewSpec)(h[1],"detail_sub_sharelottery_creator"),(0,n.getAuthed)(b,h)?(p=b.map((function(e){var r=n.TEMPLATE_IDS[e];return{subscribe_type:e,data_id:r,notify:"accept"===h[1][r]}})),(0,o.subscribe)(p)):((0,n.storeRejectedSubscribeMessage)(s),null==(T=a.getCurrentPage())||null===(g=T.refreshPage)||void 0===g||g.call(T));case 13:E=a.get(getApp().globalData,"userInfo.user_id",""),_=c.data.find((function(e){return e.id!==E}));try{(v=wx.getStorageSync("lottery_share_dialog"))&&v===s||_?e.handleShareTrigger():e.showDialog("initiator-share-box")}catch(r){_?e.handleShareTrigger():e.showDialog("initiator-share-box")}case 16:case"end":return r.stop()}}),t)})))()}}});
},{isPage:false,isComponent:false,currentFile:'behavior/initiatorBehavior.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/join.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=p(require("../utils/tools")),n=l(require("../behavior/common")),i=p(require("../services/chou")),o=require("../services/game"),a=require("../models/followingOfficialHandler"),u=require("../utils/wechatAPI"),s=require("../models/authPhone"),c=require("@mina-modules/mina-sentry"),f=l(require("../utils/analyse"));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}exports.default=Behavior({behaviors:[n.default],methods:{onCommonAuthSubscribeFinish:function(e){var t=e.detail.authed,r=this.properties.lottery;t&&((0,u.showToast)("开启通知成功"),this.triggerEvent("updateLottery",{id:r.id,sub_msg_allow:!0},{bubbles:!0,composed:!0}))},commonShareLottery:function(){this.triggerEvent("shareLottery",{id:this.properties.lottery.id},{bubbles:!0,composed:!0})},commonShowNextLottery:function(){var e=this.properties.lottery;this.triggerEvent("nextLottery",{id:e.id},{bubbles:!0,composed:!0})},processOfficialAccounts:function(e){new a.OfficialFollowHandler(e,this).operate()},canJoinOfOfficialAccounts:function(n){return t(e().mark((function t(){var i,a,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.officialCode,a=n.id,!i){e.next=6;break}return e.next=4,(0,o.isJoinCodeEffective)(a,i);case 4:return u=e.sent,e.abrupt("return",r.get(u,"data.result",!1));case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),t)})))()},handlePartyJoinBehavior:function(){return(0,u.showToast)("抽奖已开始，不能继续参加"),!1},handleSquareJoinBehavior:function(){return(0,u.showToast)("通过审核前不可参与"),!1},handleOfficialJoinBehavior:function(n){var i=this;return t(e().mark((function t(){var o,a,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.official_data){e.next=2;break}return e.abrupt("return",!0);case 2:if(o=r.get(n,"official_data.official_auth_id",""),a=r.get(n,"official_data.official_id",""),s=r.get(n,"official_data.state"),!o||a){e.next=8;break}return(0,u.showToast)("公众号还未授权"),e.abrupt("return",!1);case 8:if(-1!==s){e.next=11;break}return(0,u.showToast)("公众号授权已失效"),e.abrupt("return",!1);case 11:if(c=n.officialCode,e.t0=c,!e.t0){e.next=17;break}return e.next=16,i.canJoinOfOfficialAccounts(n);case 16:e.t0=!e.sent;case 17:if(!e.t0){e.next=20;break}return wx.showModal({content:"本次抽奖资格已被他人使用",confirmText:"重新获取",showCancel:!1,success:function(e){e.confirm&&wx.redirectTo({url:"/pages/lucky/lottery/detail?id=".concat(n.id,"&redirect=Y")})}}),e.abrupt("return",!1);case 20:if(c){e.next=23;break}return i.processOfficialAccounts(n),e.abrupt("return",!1);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),t)})))()},handleConditionJoinBehavior:function(e){return!e.condition_error||("心愿不足，去「我的」领取心愿"===e.condition_error?(h(),!1):((0,u.showToast)(e.condition_error),!1))},handleTimelineJoinBehavior:function(e){return e.kefu_share_data&&e.kefu_share_data.title?(this.showDialog("timeline-join-guide-dialog",{data:{lotteryId:e.id}}),!1):((0,u.showToast)("该抽奖仅限从发起人朋友圈参与",{duration:3e3}),!1)},handleAuditJoinBehavior:function(){return wx.showModal({title:"提示",content:"因图片或文本内容违规，将不会开奖相关信息。如有疑问请联系我们",showCancel:!1}),!1},checkoutLotteryPrecondition:function(e){var t=r.getOptionsSync();return!(!e||e.is_participator||1154===t.scene)},isLotteryPartyBehavior:function(e){return e.party&&1===e.party.state},isLotterySquareBehavior:function(e){return e.square_id&&!e.square_verified},isLotteryTimelineBehavior:function(e){return e.timeline_only&&!e.timelineCode},commonCheckJoinable:function(){var r=this;return t(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.properties.lottery,e.next=3,(0,s.handleAuthPhone)(n);case 3:if(r.checkoutLotteryPrecondition(n)){e.next=5;break}return e.abrupt("return",!1);case 5:if(!r.isLotteryPartyBehavior(n)){e.next=7;break}return e.abrupt("return",r.handlePartyJoinBehavior());case 7:if(!r.isLotterySquareBehavior(n)){e.next=9;break}return e.abrupt("return",r.handleSquareJoinBehavior());case 9:return i=null,e.prev=10,e.next=13,r.handleOfficialJoinBehavior(n);case 13:i=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),(0,c.error)("检查公众号可参与",e.t0);case 19:if(i){e.next=21;break}return e.abrupt("return",!1);case 21:if(r.handleConditionJoinBehavior(n)){e.next=23;break}return e.abrupt("return",!1);case 23:if(!r.isLotteryTimelineBehavior(n)){e.next=25;break}return e.abrupt("return",r.handleTimelineJoinBehavior(n));case 25:if(-2!==n.audit_state){e.next=27;break}return e.abrupt("return",r.handleAuditJoinBehavior(n));case 27:return e.next=29,getApp().needUpdateUserInfo();case 29:if(!e.sent){e.next=32;break}return r.showDialog("login-dialog"),e.abrupt("return",!1);case 32:return e.abrupt("return",!0);case 33:case"end":return e.stop()}}),t,null,[[10,16]])})))()},commonPreJoin:function(){var n=this;return t(e().mark((function t(){var o,a,u,s,c,f;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.properties.lottery,a=o.conditions||[],u=0,s=a.length;case 3:if(!(u<s)){e.next=20;break}if("point"!==(c=a[u]).type){e.next=17;break}if(f=r.get(c.info,"point_count",0),!(i.getUserPoints()<f)){e.next=12;break}return h(),e.abrupt("return",!1);case 12:return e.next=14,r.promisify(wx.showModal)({title:"提示",content:"消耗 ".concat(f," 心愿参与抽奖")});case 14:if(!e.sent.cancel){e.next=17;break}return e.abrupt("return",!1);case 17:u++,e.next=3;break;case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),t)})))()},commonPostJoin:function(n){var i=this;return t(e().mark((function t(){var o,a,s,c,f,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=i.properties.lottery,i.triggerEvent("joinSuccess",{id:o.id,sub_msg_allow:!!n},{bubbles:!0,composed:!0}),a=o.conditions||[],s=0,c=a.length;s<c;s++)"point"===(f=a[s]).type&&(l=r.get(f.info,"point_count",0),(0,u.showToast)("参与成功，心愿 -".concat(l)));(o.is_official||o.square)&&wx.setStorageSync("join_public_time",(new Date).getTime());case 5:case"end":return e.stop()}}),t)})))()}}});function h(){(0,f.default)("dialog_detail_join_lackwish_show");var e=r.getCurrentPage();null==e||e.setData({showLackPointTip:!0})}
},{isPage:false,isComponent:false,currentFile:'behavior/join.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/managerBtn.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("@/utils/tools"),a=require("../services/game");exports.default=Behavior({data:{actionVisible:!1,itemList:[]},methods:{chooseAction:function(s){var n,o,i=this,c=s.currentTarget.dataset.value;"关闭抽奖"===c?wx.showModal({title:"请输入关闭信息",editable:!0,success:(o=t(e().mark((function t(s){var n,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!s.confirm){e.next=15;break}if(""!==(n=s.content).trim()){e.next=5;break}return e.abrupt("return",wx.showToast({title:"信息不能为空",icon:"error"}));case 5:return e.prev=5,e.next=8,null===(o=a.managerItemMap[c])||void 0===o?void 0:o.call(a.managerItemMap,i.data.lottery,n);case 8:e.sent.result?((0,r.showToast)("关闭抽奖成功"),i.onClose(),(0,r.triggerBubbleEvent)(i,"refreshPage")):(0,r.showToast)("关闭抽奖失败"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),(0,r.showToast)(e.t0.message);case 15:case"end":return e.stop()}}),t,null,[[5,12]])}))),function(e){return o.apply(this,arguments)})}):wx.showModal({title:"提示",content:"确认".concat(c),confirmColor:"#E6575C",success:(n=t(e().mark((function t(s){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.confirm){e.next=13;break}return e.prev=1,wx.showLoading({title:""}),e.next=5,null===(n=a.managerItemMap[c])||void 0===n?void 0:n.call(a.managerItemMap,i.data.lottery);case 5:(0,r.showToast)("操作成功"),i.onClose(),(0,r.triggerBubbleEvent)(i,"refreshPage"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,r.showToast)(e.t0.message);case 13:case"end":return e.stop()}}),t,null,[[1,10]])}))),function(e){return n.apply(this,arguments)})})},onClose:function(){this.setData({actionVisible:!1})},showAction:function(e){var t=e.detail.itemList;this.setData({actionVisible:!0,itemList:t})}}});
},{isPage:false,isComponent:false,currentFile:'behavior/managerBtn.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/simulation-wepy.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e=(t=require("lodash"))&&t.__esModule?t:{default:t};exports.default=Behavior({lifetimes:{created:function(){this.$$initPropWith$(),this.$$initPropOfThis()}},methods:{$apply:function(t){this.setData(e.default.cloneDeep(this.data),t)},$$initPropWith$:function(){this.$parent=getApp(),this.$wxpage=this,this.$emit=this.triggerEvent,this.$broadcast=function(){},this.methods=this},$$initPropOfThis:function(){var t=this,e=Object.keys(this.data||{});e.length&&e.forEach((function(e){"options"!==e&&Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t.data[e]},set:function(i){t.data[e]=i}})}))}}});
},{isPage:false,isComponent:false,currentFile:'behavior/simulation-wepy.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("behavior/visible.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=Behavior({properties:{visible:{type:Boolean,observer:function(e){e&&this.show()}}}});
},{isPage:false,isComponent:false,currentFile:'behavior/visible.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("components/ImgTextInput/utils.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minaScrollBy=function(e){return o.apply(this,arguments)};var e=require("../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../@babel/runtime/helpers/asyncToGenerator"),t=require("@/utils/tools");function n(){return new Promise((function(e){(0,t.getCurrentPage)().createSelectorQuery().selectViewport().scrollOffset().exec((function(r){e(r[0])}))}))}function o(){return(o=r(e().mark((function r(t){var o,u,s,c=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>1&&void 0!==c[1]?c[1]:300,e.next=3,n();case 3:u=e.sent,s=u.scrollTop,wx.pageScrollTo({scrollTop:s+t,duration:o});case 6:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'components/ImgTextInput/utils.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("components/ShareOrderItem/service.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteLuckyReview=function(e){return a.apply(this,arguments)},exports.editLuckyReview=function(e,r,t){return c.apply(this,arguments)};var e,r=require("../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../@babel/runtime/helpers/asyncToGenerator"),u=(e=require("@/config"))&&e.__esModule?e:{default:e},n=require("@libs/request");function c(){return(c=t(r().mark((function e(t,c,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(t,"/lucky_review/").concat(c),method:"POST",data:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lucky_review/").concat(t),method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'components/ShareOrderItem/service.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("config.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./version")),t=o(require("lodash"));function o(e){return e&&e.__esModule?e:{default:e}}var n,r="wxwork"===(0,require("@mina-modules/system-info").getSysInfo)().environment?"wework":"wechat",c=(n=wx.getAccountInfoSync(),t.default.get(n,"miniProgram.envVersion","")),a="trial"===c||"develop"===c?"https://lucky-pre.nocode.com":"https://lucky.nocode.com";exports.default={API_HOST:a,WS_HOST:"wss://lucky-live.nocode.com",DELIVERY_HOST:"https://mina-api.nocode.com/delivery",SHARE_TITLE:"抽奖助手",VERSION:e.default,RENDER_VERSION:"0.0.1",BUILD_DATE:"__BUILD_DATE__",AGREEMENT_VERSION:"v20230719",API_VERSION:"v2",UPYUN:{bucket:"lottery-cdn-new",operator:"lotteryfront",getSignatureUrl:"".concat(a,"/").concat("v2","/thirdparty/upyun_signature")},CDN:"https://lucky-cdn-resource.nocode.com",PLATFORM:r,dsn:"https://0087164855d9426ca56a6a94b5b444b1@sentry2.nocode.com/14",token:"nuTW7z+c(H?MD+kbWR6XGnb6Be2v8ttU",GA:{name:"抽奖助手小程序",id:"UA-115768895-1",proxy:"https://mina-ga.nocode.com"},AD_GA:{name:"抽奖助手小程序",id:"G-SBDWVJMN4T",proxy:"https://ad-ga.nocode.com"},SUPPORT_CONTACT:!0,GOOD_TYPES:["obj","coupon","img","kefu_url","kefu_image","mina"],VIDEO_ID:"adunit-b1e2be4241299ec1",INTERSTITIAL_AD_ID:"adunit-b88c2e8d787fe2cf",RECOMMAND_VIDEO_ID:"adunit-827488ac5961180d",getUploadPath:function(e){var t,o=(t=getCurrentPages())[t.length-1],n="/uploads/cover/";return"pages/new/create/create"!==o.route&&"pages/new/marketingSetting/marketingSetting"!==o.route||(n="/uploads/1x1/cover/"),"".concat(n).concat((new Date).toISOString().split("T")[0].split("-").join(""),"/").concat(e)}};
},{isPage:false,isComponent:false,currentFile:'config.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("constant.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gameConditionMapToNumber=exports.defaultGameData=exports.default=exports.WRITE_OFF_CODE_STATE=exports.TIME_MAP=exports.REDPACKET_ICON=exports.QUIZ_EMPTY_IMAGE=exports.PRIZE_DEFAULT_IMAGE_MAP=exports.PI_YI_XIA_IMAGE_DEFAULT=exports.PARTY_SHARE_CARD=exports.PARTY_PRIZE_DEFAULT=exports.PARTY_DEFAULT_IMAGE=exports.NOOP=exports.NEW_CREATE_PAGE_PATH=exports.MONEY_PRIZE_COVER=exports.MINI_AVATAR_PENDANTS=exports.MAX_PRIZE_COUNT_NORMAL=exports.MARKETING_WHEEL_DEFAULT_IMAGE=exports.MARKETING_MOON_DEFAULT_IMAGE=exports.MARKETING_LOT_DEFAULT_IMAGE=exports.LotteryTypes=exports.JOIN_NUMBER=exports.IdTypes=exports.GameWinCondition=exports.GameTypes=exports.GRADIENT_BG=exports.GAME_DEFAULT_IMAGE=exports.EditingTypes=exports.EMPTY_IMAGE=exports.DEFAULT_MARKETING_WHEEL=exports.DEFAULT_MARKETING_STRAW=exports.DEFAULT_MARKETING_ONTIME=exports.DEFAULT_MARKETING_LOT=exports.DEFAULT_IMAGE_REDPACKET_RECT=exports.DEFAULT_IMAGE_REDPACKET=exports.DEFAULT_IMAGE_NORMAL_RECT=exports.DEFAULT_IMAGE_NORMAL=exports.DEFAULT_AVATAR=exports.CLOSED_ABOUT_ADD_GUID=exports.BUBBLE_OPTION=exports.AssistTaskState=exports.AVATAR_PENDANTS=exports.ACTIVITY_TEMPLATE_PAGE_PATH=exports.ACTIVITY_SETTING_PAGE_PATH=exports.ACTIVITY_CREATE_PAGE_PATH=exports.ACTION_SHEET_MAP_REPORT=exports.ACTION_SHEET_MAP=void 0,exports.getCreatePagePath=function(){return T},exports.reward_list=exports.maxDrawDay=void 0,exports.setCreatePagePath=function(e){T=e},exports.wxsData=exports.subscribeBtns=void 0;var e=require("@babel/runtime/helpers/defineProperty"),t=require("./models/lottery"),o=require("./models/marketing"),r={platform_friend:"微信好友",template_message:"微信模板消息",platform_id:"微信号",platform_wallet:"微信钱包",platform_conversation:"微信会话",platform_group:"微信群",platform_account:"微信账户",mina:"微信小程序",platform:"微信"},p=(exports.default=r,exports.wxsData={constant:r,keys:Object.keys(r)},exports.maxDrawDay=32,exports.TIME_MAP=e(e(e({},t.DrawTypes.TIME,"time"),t.DrawTypes.ONTIME,"timeOfReal"),t.DrawTypes.USER,"timeOfUser"),exports.ACTION_SHEET_MAP=e(e(e(e({},t.PrizeTypes.REAL,["快递邮寄（开奖后 72h 填写时效）","让中奖者联系我（手机、微信、店铺地址）","中奖者填写信息","跳转其它小程序领取"]),t.PrizeTypes.MONEY,["拼手气红包","普通红包"]),t.PrizeTypes.RANDOM,["拼手气红包","普通红包"]),t.PrizeTypes.COUPON,["让中奖者联系我（手机、微信、店铺地址）","跳转其它小程序领取"]),exports.ACTION_SHEET_MAP_REPORT=e(e({},t.PrizeTypes.REAL,["快递邮寄","让中奖者联系我","中奖者填写信息","跳转其它小程序领取"]),t.PrizeTypes.COUPON,["让中奖者联系我","跳转其它小程序领取"]),exports.GRADIENT_BG="https://lucky-cdn-temp.nocode.com/mina/lottery/assist-gradient.png",exports.DEFAULT_IMAGE_NORMAL="https://lucky-cdn-resource.nocode.com/mina/lottery/1x1/Physical-default.jpg"),E=(exports.DEFAULT_IMAGE_NORMAL_RECT="https://lucky-cdn.nocode.com/mina/lottery/default_normal_prize@2x.png",exports.DEFAULT_IMAGE_REDPACKET="https://lucky-cdn-resource.nocode.com/mina/lottery/1x1/red-envelope-default.jpg"),s=(exports.DEFAULT_IMAGE_REDPACKET_RECT="https://lucky-cdn.nocode.com/mina/lottery/default_cash_prize@2x.png",exports.PI_YI_XIA_IMAGE_DEFAULT="https://lucky-cdn-resource.nocode.com/mina/lottery/1x1/Skin.jpg",exports.GAME_DEFAULT_IMAGE="https://lucky-cdn-resource.nocode.com/uploads/cover/20210902/8be848e0-0bcd-11ec-805a-9b3e08b8435e"),_=(exports.DEFAULT_AVATAR="https://lucky-cdn.nocode.com/mina/lottery/default-avatar-2023-07-10.png",exports.MARKETING_WHEEL_DEFAULT_IMAGE="https://lucky-cdn-new.nocode.com/mina/marketing/lucky.png"),n=exports.MARKETING_LOT_DEFAULT_IMAGE="https://lucky-cdn.nocode.com/mina/marketing/marketing-lot-default.png",A=(exports.MARKETING_MOON_DEFAULT_IMAGE="https://lucky-cdn.nocode.com/mina/lottery/marketing-moon-cover-default.png",exports.MONEY_PRIZE_COVER="https://lucky-cdn.nocode.com/mina/lottery/money-prize-cover.png",exports.PARTY_DEFAULT_IMAGE="https://lucky-cdn.nocode.com/mina/lottery/party-bg-mina.png",exports.PARTY_PRIZE_DEFAULT="https://lucky-cdn.nocode.com/mina/lottery/party-prize-default.png",exports.PARTY_SHARE_CARD="https://lucky-cdn.nocode.com/mina/lottery/party-share-card.jpg",exports.PRIZE_DEFAULT_IMAGE_MAP=e(e(e(e(e(e({},t.PrizeTypes.REAL,p),t.PrizeTypes.MONEY,E),t.PrizeTypes.RANDOM,E),t.PrizeTypes.SHOP,p),t.PrizeTypes.VIRTUAL,p),t.PrizeTypes.COUPON,p),exports.REDPACKET_ICON={CASH:"https://lucky-cdn.nocode.com/mina/lottery/detail_redpacket_tag@3x.png",RANDOM:"https://lucky-cdn.nocode.com/mina/lottery/detail_redpacket_pin_tag@3x.png"},exports.NEW_CREATE_PAGE_PATH="/pages/new/create/create"),T=(exports.ACTIVITY_SETTING_PAGE_PATH="/pages/new/marketingSetting/marketingSetting",exports.ACTIVITY_CREATE_PAGE_PATH="/pages/new/marketingCreate/marketingCreate",exports.ACTIVITY_TEMPLATE_PAGE_PATH="/pages/new/marketingTemplate/marketingTemplate",A);var a=exports.GameTypes=function(e){return e[e["小鸟飞飞"]=10001]="小鸟飞飞",e}({}),c=exports.GameWinCondition=function(e){return e.FIVE="坚持飞 5 秒",e.TEN="坚持飞 10 秒",e.NONE="无",e}({}),i=exports.gameConditionMapToNumber=e(e(e({},c.NONE,null),c.FIVE,5),c.TEN,10);exports.defaultGameData={game_id:a.小鸟飞飞,assistable:!1,threshold:i[c.NONE],media:{background_image:s}},exports.EMPTY_IMAGE="https://lucky-cdn.nocode.com/mina/lottery/empty-image.png",exports.QUIZ_EMPTY_IMAGE="https://lucky-cdn.nocode.com/mina/lottery/vote_pic_empty_n@3x.jpg",exports.IdTypes=function(e){return e.SELF_HELP_ID="sid",e.LOTTERY_ID="lottery_id",e}({}),exports.LotteryTypes=function(e){return e.NORMAL="normal",e.SELF_HELP="square",e.SMART="smart",e}({}),exports.EditingTypes=function(e){return e.CREATOR_COPY="creator_copy",e.JOIN_COPY="join_copy",e.EDITING="editing",e.AUTO_CREATE="auto_create",e}({}),exports.JOIN_NUMBER="JOIN_NUMBER",exports.CLOSED_ABOUT_ADD_GUID="CLOSED_ABOUT_ADD_GUID",exports.DEFAULT_MARKETING_WHEEL={type:o.marketingTypes.WHEEL,backgroundImage:_,backgroundColor:"#AB3731"},exports.DEFAULT_MARKETING_LOT={type:o.marketingTypes.LOT,backgroundImage:n,backgroundColor:"#AA2F1F"},exports.DEFAULT_MARKETING_ONTIME={type:o.marketingTypes.ONTIME,backgroundImage:_,backgroundColor:"#e2453a"},exports.DEFAULT_MARKETING_STRAW={type:o.marketingTypes.STRAW,backgroundImage:_,backgroundColor:"#e65637",title:"抽签中大奖",start_at:""},exports.MAX_PRIZE_COUNT_NORMAL=99,exports.BUBBLE_OPTION={bubbles:!0,composed:!0},exports.NOOP=function(){},exports.AVATAR_PENDANTS={jinli:"https://lucky-cdn.nocode.com/pendant-jinli.png",666:"https://lucky-cdn.nocode.com/pendant-666.png",good:"https://lucky-cdn.nocode.com/pendant-good.png"},exports.MINI_AVATAR_PENDANTS={jinli:"https://lucky-cdn.nocode.com/mini-pendant-jinli.png",666:"https://lucky-cdn.nocode.com/mini-pendant-666.png",good:"https://lucky-cdn.nocode.com/mini-pendant-good.png"},exports.AssistTaskState=function(e){return e[e.FINISHED=2]="FINISHED",e}({}),exports.reward_list=[{label:"随机增加 1~10 倍",value:[1,10]},{label:"增加 1 倍",value:1},{label:"增加 2 倍",value:2},{label:"增加 3 倍",value:3},{label:"增加 4 倍",value:4},{label:"增加 5 倍",value:5},{label:"增加 6 倍",value:6},{label:"增加 7 倍",value:7},{label:"增加 8 倍",value:8},{label:"增加 9 倍",value:9},{label:"增加 10 倍",value:10}],exports.WRITE_OFF_CODE_STATE=function(e){return e[e.UN_CHECKED=1]="UN_CHECKED",e[e.CHECKED=2]="CHECKED",e[e.EXPIRED=-1]="EXPIRED",e}({}),exports.subscribeBtns=[{text:"取消",id:"no-notity",theme:"white",hide:!0},{text:"去设置",id:"open-setting",hide:!0}];
},{isPage:false,isComponent:false,currentFile:'constant.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/Badge.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.needShow=function(e,t){if(!e||!t)return!1;return!r[e+"_"+t]},exports.showed=function(t,o){if(!t||!o)return!1;r[t+"_"+o]=!0,function(){try{wx.setStorage({key:"badge",data:r})}catch(r){(0,e.error)(r)}}()};var e=require("@mina-modules/mina-sentry"),r={};try{r=wx.getStorageSync("badge")||{},console.log("badge",r)}catch(r){(0,e.error)(r)}
},{isPage:false,isComponent:false,currentFile:'libs/Badge.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/GameManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../@babel/runtime/helpers/Arrayincludes");var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("../@babel/runtime/helpers/classCallCheck"),a=require("../@babel/runtime/helpers/createClass"),n=require("../@babel/runtime/helpers/inherits"),i=require("../@babel/runtime/helpers/createSuper"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(require("../services/game")),u=_(require("./ListManager")),o=_(require("lodash")),c=_(require("moment")),l=require("../utils/tools"),p=_(require("currency.js")),d=require("../libs/JoinedGameCache"),f=require("../services/visitedAdTags"),m=require("@/utils/lotteryUtils");function _(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var h=new(function(u){n(x,u);var _,v,h,g,y,b,w,k,q=i(x);function x(e){var t;return r(this,x),(t=q.call(this,e)).tempData={},t.filter="",t}return a(x,[{key:"onRequest",value:(k=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.getUserGames(r,this.filter));case 1:case"end":return e.stop()}}),t,this)}))),function(e){return k.apply(this,arguments)})},{key:"process",value:function(){}},{key:"setFilter",value:function(e){this.filter=e||""}},{key:"previewGame",value:function(e,t){if(!e)return{};var r={previewType:t};try{r.shopPrize=o.default.find(o.default.get(e,"prizes.data"),(function(e){return 4===e.type}));var a=e.prizes.data[0];return r.sponsor=e.sponsor||o.default.get(a,"extra.sponsor",null),r.canRedirectToMinaApp=o.default.every([o.default.get(r.sponsor,"appid"),2===t,o.default.get(r.sponsor,"name")],Boolean),function(e,t,r){var a;(null==t||null===(a=t.readable_conditions)||void 0===a?void 0:a.length)>0&&(e.readable_conditions=t.readable_conditions);r.auto_increase&&(e.supportShareIncreaseCount=!0);t.square_id&&(e.square_id=t.square_id,e.square_verified=t.square_verified);t.square&&(e.square_id=t.square.square_id,e.square_verified=t.square.verified);t.promotion_id&&(e.promotion_id=t.promotion_id);t.smart_promotion_conflict&&(e.smartConflictText=t.smart_promotion_conflict.join("、"));t.smart_promotion_warn&&(e.smartWarnText=t.smart_promotion_warn.join("、"));t.square_conflict&&(e.squareConflictText=t.square_conflict.join("、"));t.square_warn&&(e.squareWarnText=t.square_warn.join("、"))}(r,e,a),r.canEdit=(0,m.isLotteryCanEdit)(e),r.promotion=e.promotion,r.smart_promotion_enable=e.smart_promotion_enable,r.smart_promotion_conflict=e.smart_promotion_conflict,r.smart_promotion_warn=e.smart_promotion_warn,r.square_conflict=e.square_conflict,r.square_warn=e.square_warn,r.groupable=!!e.groupable,r.guaranteed=!!e.guaranteed,r.is_official=!!e.is_official,r.joined=e.joined,r.user_count=e.user_count,r.join_type=e.join_type,r.latest_draw_time=e.latest_draw_time,r.payscore_verified=e.payscore_verified,(0,d.checkJoinedGameId)(e.id)&&(r.joined=!0),r.prevLottery&&(0,d.checkJoinedGameId)(r.prevLottery.id)&&(r.prevLottery.joined=!0),r.banner=o.default.get(a,"extra.banner",null),r.prizes=e.prizes.data.sort((function(e,t){return(e.level?+e.level:1)-(t.level?+t.level:1)})).map((function(t){return t.amount&&(t.displayAmount=(0,p.default)(t.amount).multiply(.01).format()),4===t.type&&t.goods&&t.goods.shelves&&(t.isShopAvailable=!0),t.groupable=!!e.groupable,t})),r.prizeImage=r.prizes[0].image,r.prizeImages=r.prizes.reduce((function(e,t){return t.image&&e.push(t.image),e}),[]),r.prizeSmallImage=r.prizes.reduce((function(e,t){return t.square_index_image&&e.push(t.square_index_image),e}),[]),r.imagePrizes=r.prizes.filter((function(e){return!!e.image})),r.id=e.id,r.state=e.state,r.is_initiator=e.is_initiator,r.is_participator=e.is_participator,r.draw_type=e.draw_type,r.theme=e.theme||"default-theme",function(e,t){["time","ontime"].includes(t.draw_type)&&(e.remainDate=(0,l.getDurationDate)(t.latest_draw_time));if("ontime"===t.draw_type){var r=o.default.reduce(o.default.get(t,"prizes.data"),(function(e,t){return e+t.count}),0);try{e.winnerRate=(a=100*r/t.min_user_count)<.01?a.toFixed(4):a<1?a.toFixed(2):Math.floor(a)}catch(t){console.error(t),e.winnerRate="未知"}}var a;t.min_user_count&&(e.minUserCount=t.min_user_count,e.min_user_count=t.min_user_count);t.remaining_prize_count&&(e.remaining_prize_count=t.remaining_prize_count);t.latest_draw_time&&(e.endTime=(0,l.displayDatetime)((0,c.default)(t.latest_draw_time)),e.simpleEndTime=(0,l.displaySimpleDatetime)((0,c.default)(t.latest_draw_time)));t.finished_at&&(e.endTime=(0,l.displayDatetime)((0,c.default)(t.finished_at)),e.simpleEndTime=(0,l.displaySimpleDatetime)((0,c.default)(t.finished_at)),e.finished_at=t.finished_at);t.initiator&&(e.initiator=t.initiator);t.is_initiator&&(e.deliveryInfo={total:o.default.get(t,"contact_users.meta.count",0),filled:o.default.get(t,"contact_users.meta.filled_count",0)})}(r,e),function(e,t){t.hideEndTag&&(e.hideEndTag=t.hideEndTag);t.square&&(e.square=t.square);void 0!==t.weight&&(e.weight=t.weight);t.vote&&(e.vote=t.vote);o.default.has(t,"userpage")&&(e.userpage=t.userpage)}(r,e),r.initiator=e.initiator,r.kefu_share=e.kefu_share,r.kefu_share_data=e.kefu_share_data,r.assistable=!!e.assist_info,r.is_smart_promotion=e.is_smart_promotion,r.is_payed=e.is_payed,r.message_enable=e.message_enable,r.extra=e.extra,r.public_tag=e.public_tag,r.position=e.position,r.list_image=e.list_image,r}catch(e){return console.error(e),null}}},{key:"isSponsorGame",value:function(e){return o.default.get(e,"is_official",!1)||!!o.default.get(e,"prizes.data[0].extra.sponsor",!1)}},{key:"hasBanner",value:function(e){return!!o.default.get(e,"prizes.data[0].extra.banner",!1)}},{key:"getGroupedGames",value:function(){var e=this,t=this.getData(),r=[{label:"待开奖",games:[]},{label:"已结束",games:[]}];return t.forEach((function(t){if(0===t.state||1===t.state)r[0].games.push(e.previewGame(t,1));else{var a=4;t.prizes.data.length>1&&(a=5),r[1].games.push(e.previewGame(t,a))}})),console.log(r),r}},{key:"getGameById",value:function(e){var t=this.getData();return o.default.find(t,(function(t){return t.id===e}))}},{key:"hideGame",value:function(e){this.datas.data=this.datas.data.filter((function(t){return t.id!==e}))}},{key:"editGame",value:function(e){this._editGame=e}},{key:"getEditGame",value:function(){return this._editGame}},{key:"removeTemp",value:function(e){var t=this.tempData[e];return t&&delete this.tempData[e],t}},{key:"temp",value:function(e,t,r){var a=this;if(!t)return this.tempData[e];this.tempData[e]=t,r&&setTimeout((function(){a.tempData[e]=null}),r)}},{key:"fetchGame",value:(w=t(e().mark((function t(r){var a,n,i,u,o,c=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]&&c[1],e.next=3,(0,f.getVisitedAdTags)(3);case 3:return n=e.sent,e.next=6,s.getGame(r,n,a);case 6:if(!(i=e.sent).errors){e.next=11;break}throw(u=new Error(i.errors[0].title||"加载失败")).type="app",u;case 11:if(!i.error){e.next=15;break}throw(o=new Error(i.error.message)).type="app",o;case 15:return e.abrupt("return",i.data);case 16:case"end":return e.stop()}}),t)}))),function(e){return w.apply(this,arguments)})},{key:"createGame",value:(b=t(e().mark((function t(r){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.id){e.next=6;break}return e.next=3,s.updateGame(r);case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,s.createGame(r);case 8:a=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),t)}))),function(e){return b.apply(this,arguments)})},{key:"createVote",value:(y=t(e().mark((function t(r){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.vote_id){e.next=8;break}return e.next=3,s.updateVote(r);case 3:e.sent.result&&(a={data:{vote_id:r.vote_id}}),e.next=11;break;case 8:return e.next=10,s.createVote(r);case 10:a=e.sent;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),t)}))),function(e){return y.apply(this,arguments)})},{key:"fetchGameResult",value:(g=t(e().mark((function t(r){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getGameResult(r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),t)}))),function(e){return g.apply(this,arguments)})},{key:"saveWishContact",value:(h=t(e().mark((function t(r,a){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.postWishContact(r,a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),t)}))),function(e,t){return h.apply(this,arguments)})},{key:"saveContact",value:(v=t(e().mark((function t(r,a){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.postContact(r,a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),t)}))),function(e,t){return v.apply(this,arguments)})},{key:"saveContactByJoinId",value:(_=t(e().mark((function t(r,a,n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.postContact(r,a,n);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),t)}))),function(e,t,r){return _.apply(this,arguments)})}]),x}(u.default));exports.default=h;
},{isPage:false,isComponent:false,currentFile:'libs/GameManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/GameUsersManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=require("../@babel/runtime/helpers/classCallCheck"),u=require("../@babel/runtime/helpers/createClass"),a=require("../@babel/runtime/helpers/inherits"),i=require("../@babel/runtime/helpers/createSuper"),s=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(require("../services/game"));function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:r})(e)}var o=function(e){a(c,e);var l,o=i(c);function c(e,r){var t;return n(this,c),(t=o.call(this,r)).id=e,t}return u(c,[{key:"onRequest",value:(l=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.getGameUsers(this.id,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})}]),c}(((e=require("./ListManager"))&&e.__esModule?e:{default:e}).default);exports.default=o;
},{isPage:false,isComponent:false,currentFile:'libs/GameUsersManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/ImgMainColor.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){return s.apply(this,arguments)};var r=require("../@babel/runtime/helpers/regeneratorRuntime"),e=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("@mina-modules/system-info"),n=require("@mina-modules/mina-sentry"),a=40,o=32,u=["#fff","#000"],i=[];function s(){return(s=e(r().mark((function e(t){var n;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(n=t.src||"")||console.error("图片地址不能为空"),"number"==typeof t.size&&t.size>0&&(a=t.size),"number"==typeof t.level&&t.level>0&&t.level<255&&(o=t.level),"[object Array]"===Object.prototype.toString.call(t.exclude)&&(u=t.exclude),r.abrupt("return",new Promise((function(r){l(n,t.canvasId,(function(e){if(e.length<4)return r("");f();var t=y(p(e));if(t){var n=m(t);return r(x(n))}return r("")}))})));case 9:return r.prev=9,r.t0=r.catch(0),console.error("出现了一些问题",r.t0),r.abrupt("return","");case 13:case"end":return r.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function l(r,e,a){wx.createSelectorQuery().select("#".concat(e)).fields({node:!0,size:!0},(function(o){var u=o.node;if(u){var i=(0,t.getSysInfo)().pixelRatio;try{u.width=Math.min(o.width*i,4096),u.height=Math.min(o.height*i,4096)}catch(r){throw new Error("canvas 宽高设置报错：".concat(r))}var s=u.createImage();s.onload=function(){var r=u.getContext("2d");r.drawImage(s,0,0,s.width,s.height);var e=r.getImageData(0,0,s.width,s.height).data;a(e)},s.onerror=function(r){a([]),console.error(r)},s.src=r}else(0,n.error)("通过 ID: ".concat(e,"， 没有获取到 canvas 实例, file: ImgMainColor.js"))})).exec()}var c=/^rgba*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*\d*\.*\d+\s*)*\)$/;function f(){for(var r=0;r<u.length;r++){var e=u[r]+"";if(e=0==e.indexOf("#")?h(e):c.test(e)?g(e):null){var t=v(e);i.push(t)}}}function h(r){if(4!=r.length&&5!=r.length&&7!=r.length&&9!=r.length)return{r:0,g:0,b:0,a:255};var e=2;4!=r.length&&5!=r.length||(e=1);var t=r.substr(1+0*e,e),n=r.substr(1+1*e,e),a=r.substr(1+2*e,e),o="f";return 5==r.length?o=r.substr(4,1):9==r.length&&(o=r.substr(7,2)),1==e&&(t+=t,n+=n,a+=a,o+=o),{r:parseInt(t,16),g:parseInt(n,16),b:parseInt(a,16),a:parseInt(o,16)}}function g(r){var e=(r=r.replace(/rgba*|\(|\)|\s/gi,"")).split(","),t=e[3]?255*e[3]:255;return t=t>255||t<0?255:t,{r:1*e[0],g:1*e[1],b:1*e[2],a:t}}function v(r){return d(r.r)+"_"+d(r.g)+"_"+d(r.b)+"_"+d(r.a)}function d(r){return Math.round(r/o)}function p(r){for(var e=r.length,t={},n=0;n<e;n+=4*a){var o=b(r,n),u=v(o);t[u]||(t[u]=[]),t[u].push(o)}return t}function b(r,e){var t=[],n=a,o=4*a;r.length<=e+o&&(n=Math.floor((r.length-e-1)/4));for(var u=0;u<n;u+=4)t.push({r:r[e+u+0],g:r[e+u+1],b:r[e+u+2],a:r[e+u+3]});return m(t)}function m(r){var e=r.length,t=0,n=0,a=0,o=0;return r.map((function(r){t+=r.r,n+=r.g,a+=r.b,o+=r.a})),{r:Math.round(t/e),g:Math.round(n/e),b:Math.round(a/e),a:Math.round(o/e)}}function y(r){var e=null,t=0;for(var n in r)!w(n)&&r[n].length>t&&(e=r[n],t=r[n].length);return e}function w(r){for(var e=0;e<i.length;e++)if(i[e]==r)return!0;return!1}function x(r){return"rgba("+r.r+","+r.g+","+r.b+","+(r.a/255).toFixed(4).replace(/\.*0+$/,"")+")"}
},{isPage:false,isComponent:false,currentFile:'libs/ImgMainColor.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/JoinedGameCache.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkJoinedGameId=function(e){return(getApp().globalData.joinLotteryIds||[]).indexOf(e)>-1};
},{isPage:false,isComponent:false,currentFile:'libs/JoinedGameCache.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/ListManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e=require("../@babel/runtime/helpers/regeneratorRuntime"),a=require("../@babel/runtime/helpers/asyncToGenerator"),s=require("../@babel/runtime/helpers/classCallCheck"),i=require("../@babel/runtime/helpers/createClass"),r=(t=require("lodash"))&&t.__esModule?t:{default:t},n=require("@mina-modules/mina-sentry");var u=function(){function t(e){s(this,t),this.init(e)}var u,h;return i(t,[{key:"init",value:function(t){t?(this.datas=t,this.datas.links&&this.datas.data&&this.datas.links.next&&0!==r.default.get(this,"datas.data.length")?this.isLoadEnd=!1:this.isLoadEnd=!0):(this.isLoadEnd=!1,this.datas={data:[],meta:{count:0},links:{next:""}})}},{key:"process",value:function(t){}},{key:"getData",value:function(){try{return this.datas.data}catch(t){return[]}}},{key:"getMeta",value:function(){try{return this.datas.meta}catch(t){return[]}}},{key:"getLinks",value:function(){try{return this.datas.links}catch(t){return[]}}},{key:"getNextUrl",value:function(){return r.default.get(this.datas,"links.next")}},{key:"remove",value:function(t){return"number"==typeof t?this.datas.data.splice(t,1):"function"==typeof t?this.datas.data.splice(r.default.findIndex(this.datas.data,t),1):void 0}},{key:"setFilter",value:function(t){this.filter=t}},{key:"refresh",value:(h=a(e().mark((function t(){var a,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isFreshing){t.next=2;break}return t.abrupt("return",!1);case 2:return this.isFreshing=!0,t.prev=3,t.next=6,this.onRequest("",this.filter,this);case 6:return a=t.sent,0!==r.default.get(a,"data.length")&&r.default.get(a,"links.next")?this.isLoadEnd=!1:this.isLoadEnd=!0,this.meta=r.default.get(a,"meta",{}),null!==(s=a.meta)&&void 0!==s&&s.count&&(this.count=a.meta.count),this.process(a),this.datas=a,t.abrupt("return",this);case 15:throw t.prev=15,t.t0=t.catch(3),(0,n.error)(t.t0),t.t0;case 19:return t.prev=19,this.isFreshing=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[3,15,19,22]])}))),function(){return h.apply(this,arguments)})},{key:"load",value:(u=a(e().mark((function t(){var a,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("load"),!this.isLoadEnd&&!this.isLoading){t.next=3;break}return t.abrupt("return");case 3:return this.isLoading=!0,t.prev=4,t.next=7,this.onRequest(this.getNextUrl(),this.filter,this);case 7:s=t.sent,t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(4),this.isLoading=!1,t.t0;case 14:return console.log("resp",s),this.isLoading=!1,this.meta=r.default.get(s,"meta",{}),0!==r.default.get(s,"data.length")&&r.default.get(s,"links.next")?this.isLoadEnd=!1:this.isLoadEnd=!0,null!==(a=s.meta)&&void 0!==a&&a.count&&(this.count=s.meta.count),this.process(s),s.data=this.datas.data.concat(s.data),this.datas=s,t.abrupt("return",this);case 23:case"end":return t.stop()}}),t,this,[[4,10]])}))),function(){return u.apply(this,arguments)})}]),t}();exports.default=u;
},{isPage:false,isComponent:false,currentFile:'libs/ListManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/PublicManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("../@babel/runtime/helpers/classCallCheck"),a=require("../@babel/runtime/helpers/createClass"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}a.default=e,r&&r.set(e,a);return a}(require("../services/game")),n=l(require("./GameManager")),s=l(require("lodash")),u=require("../libs/JoinedGameCache"),o=l(require("../utils/analyse"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var d=new(function(){function l(e){r(this,l),this.init(e)}var c,d,h;return a(l,[{key:"process",value:function(){}},{key:"onRequest",value:(h=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.getPublicGames(r));case 1:case"end":return e.stop()}}),t)}))),function(e){return h.apply(this,arguments)})},{key:"init",value:function(e){e?(this.datas=e,this.datas.links&&this.datas.links.next?this.isLoadEnd=!1:this.isLoadEnd=!0):(this.isLoadEnd=!1,this.datas={public:[],square:[],meta:{public_banner:""},links:{next:""}},this.dailyCashCount=0)}},{key:"getNextUrl",value:function(){return s.default.get(this.datas,"links.next")}},{key:"refresh",value:(d=t(e().mark((function t(){var r,a,i,n,u,l=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>0&&void 0!==l[0]&&l[0],!this.isFreshing){e.next=3;break}return e.abrupt("return",!1);case 3:return this.isFreshing=!0,e.prev=4,(0,o.default)("index_data"),e.next=8,this.onRequest("/public?no_card=0",this);case 8:return a=e.sent,s.default.get(a,"links.next")?this.isLoadEnd=!1:this.isLoadEnd=!0,this.meta=s.default.get(a,"meta",{}),this.process(a),this.datas=a,this.dailyCashCount=null!==(i=null===(n=this.datas)||void 0===n||null===(u=n.meta)||void 0===u?void 0:u.red_packet_sub_count)&&void 0!==i?i:0,e.abrupt("return",this);case 17:if(e.prev=17,e.t0=e.catch(4),console.log(e.t0),!r){e.next=22;break}throw e.t0;case 22:return e.abrupt("return",!1);case 23:return e.prev=23,this.isFreshing=!1,e.finish(23);case 26:case"end":return e.stop()}}),t,this,[[4,17,23,26]])}))),function(){return d.apply(this,arguments)})},{key:"load",value:(c=t(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("load"),!this.isLoadEnd&&!this.isLoading){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.prev=4,e.next=7,this.onRequest(this.getNextUrl(),this);case 7:r=e.sent,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),this.isLoading=!1,e.t0;case 14:return console.log("resp",r),this.isLoading=!1,this.meta=s.default.get(r,"meta",{}),s.default.get(r,"links.next")?this.isLoadEnd=!1:this.isLoadEnd=!0,this.process(r),this.datas.square=this.datas.square.concat(r.square),this.datas.links=r.links,e.abrupt("return",this);case 22:case"end":return e.stop()}}),t,this,[[4,10]])}))),function(){return c.apply(this,arguments)})},{key:"getFloatBar",value:function(){var e,t;return s.default.map(null===(e=this.datas)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.lucky_text,(function(e){return{id:e.lottery_id,name:e.nick_name,count:e.user_count,image:e.image}}))}},{key:"updateDailyCashCount",value:function(){return++this.dailyCashCount}},{key:"getDailyCash",value:function(){var e,t;return{count:this.dailyCashCount,list:s.default.map(null===(e=this.datas)||void 0===e||null===(t=e.public_lottery)||void 0===t?void 0:t.red_packet_list,(function(e){return{id:e.id,joined:e.joined||(0,u.checkJoinedGameId)(e.id),drawTime:e.latest_draw_time}}))}}},{key:"getSwiperCard",value:function(){try{var e,t;return{recommendList:s.default.map(null===(e=this.datas)||void 0===e||null===(t=e.public_lottery)||void 0===t?void 0:t.recommend_card_list,(function(e){return{id:e.lottery_id,image:e.image,name:e.name,joined:e.joined||(0,u.checkJoinedGameId)(e.lottery_id),state:e.state,assistable:e.assistable,isTop:!!e.is_top}}))}}catch(e){return{}}}},{key:"getPublic",value:function(){try{return this.datas.public_lottery.daily_list.map((function(e){return e.is_official=!0,n.default.previewGame(e,3)}))}catch(e){return[]}}},{key:"getWishLottery",value:function(){try{var e;return(null===(e=this.datas.public_lottery)||void 0===e?void 0:e.point)||{}}catch(e){return{}}}},{key:"getSquare",value:function(){try{return this.datas.square.map((function(e){return n.default.previewGame(e,9)}))}catch(e){return[]}}},{key:"getUpcomingSubLottories",value:function(){try{var e;return(null===(e=this.datas.meta)||void 0===e?void 0:e.sub_tag)||[]}catch(e){return[]}}},{key:"getOntimeWish",value:function(){try{return s.default.get(this.datas,"meta.ontime_wish",null)?this.datas.meta.ontime_wish:null}catch(e){return null}}}]),l}());exports.default=d;
},{isPage:false,isComponent:false,currentFile:'libs/PublicManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/RandomLotteryManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("../@babel/runtime/helpers/classCallCheck"),a=require("../@babel/runtime/helpers/createClass"),n=require("../@babel/runtime/helpers/inherits"),s=require("../@babel/runtime/helpers/createSuper"),i=l(require("lodash")),u=require("../services/game");function l(e){return e&&e.__esModule?e:{default:e}}var o=function(l){n(d,l);var o,c,h=s(d);function d(){var e;return r(this,d),(e=h.call(this)).next="",e.filter={type:"base",size:1},e}return a(d,[{key:"refresh",value:(c=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"load",value:(o=t(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("load"),!this.isLoading){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.prev=4,e.next=7,(0,u.randomLotteries)(this.next,this.filter);case 7:r=e.sent,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),this.isLoading=!1,e.t0;case 14:return this.next=i.default.get(r,"links.next",""),console.log("resp",r),this.isLoading=!1,this.meta=i.default.get(r,"meta",{}),0!==r.data.length&&i.default.get(r,"links.next")?this.isLoadEnd=!1:this.isLoadEnd=!0,r.meta&&r.meta.count&&(this.count=r.meta.count),this.datas=r,e.abrupt("return",this);case 22:case"end":return e.stop()}}),t,this,[[4,10]])}))),function(){return o.apply(this,arguments)})},{key:"setFilter",value:function(e){i.default.assign(this.filter,e||{})}}]),d}(l(require("./ListManager")).default);exports.default=o;
},{isPage:false,isComponent:false,currentFile:'libs/RandomLotteryManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/ShopManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),u=require("../@babel/runtime/helpers/classCallCheck"),n=require("../@babel/runtime/helpers/createClass"),i=require("../@babel/runtime/helpers/inherits"),a=require("../@babel/runtime/helpers/createSuper"),s=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(u,i,a):u[i]=e[i]}u.default=e,t&&t.set(e,u);return u}(require("../services/shop")),o=(e=require("./ListManager"))&&e.__esModule?e:{default:e},l=require("./request"),p=require("../utils/tools");function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}var f=function(e){i(f,e);var o,c=a(f);function f(){return u(this,f),c.apply(this,arguments)}return n(f,[{key:"abort",value:function(){(0,l.abort)(this.rid)}},{key:"onRequest",value:(o=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rid=(0,p.uid)(),e.abrupt("return",s.getGoodsList(t,this.filter,this.rid));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}]),f}(o.default);exports.default=f;
},{isPage:false,isComponent:false,currentFile:'libs/ShopManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/SquareManager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=require("../@babel/runtime/helpers/classCallCheck"),u=require("../@babel/runtime/helpers/createClass"),a=require("../@babel/runtime/helpers/inherits"),i=require("../@babel/runtime/helpers/createSuper"),s=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(require("../services/square"));function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:r})(e)}var o=new(function(e){a(p,e);var l,o=i(p);function p(){return n(this,p),o.apply(this,arguments)}return u(p,[{key:"onRequest",value:(l=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.getSquareGames(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})}]),p}(((e=require("./ListManager"))&&e.__esModule?e:{default:e}).default));exports.default=o;
},{isPage:false,isComponent:false,currentFile:'libs/SquareManager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/cloud.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator");function n(){return(n=t(r().mark((function t(n,u){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(wx.cloud.Cloud){r.next=2;break}return r.abrupt("return");case 2:if(e){r.next=6;break}return e=new wx.cloud.Cloud({resourceAppid:"wx50d5f3f54db5e32d",resourceEnv:"lottery-9gh34c0708b81075"}),r.next=6,e.init();case 6:return r.prev=6,r.abrupt("return",e.callFunction({name:n,data:u}));case 10:if(r.prev=10,r.t0=r.catch(6),-1!==r.t0.errCode){r.next=16;break}return r.next=15,e.init();case 15:return r.abrupt("return",e.callFunction({name:n,data:u}));case 16:case"end":return r.stop()}}),t,null,[[6,10]])})))).apply(this,arguments)}exports.default=function(e,r){return n.apply(this,arguments)};
},{isPage:false,isComponent:false,currentFile:'libs/cloud.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/i18n.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,r=(e=require("moment"))&&e.__esModule?e:{default:e};require("./moment-zh-cn"),r.default.locale("zh-cn");
},{isPage:false,isComponent:false,currentFile:'libs/i18n.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/lodash-inject.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";global.Object=Object,global.Array=Array,global.DataView=DataView,global.Date=Date,global.Error=Error,global.Float32Array=Float32Array,global.Float64Array=Float64Array,global.Function=Function,global.Int8Array=Int8Array,global.Int16Array=Int16Array,global.Int32Array=Int32Array,global.Map=Map,global.Math=Math,global.Promise=Promise,global.RegExp=RegExp,global.Set=Set,global.String=String,global.Symbol=Symbol,global.TypeError=TypeError,global.Uint8Array=Uint8Array,global.Uint8ClampedArray=Uint8ClampedArray,global.Uint16Array=Uint16Array,global.Uint32Array=Uint32Array,global.WeakMap=WeakMap,global.clearTimeout=clearTimeout,global.isFinite=isFinite,global.parseInt=parseInt,global.setTimeout=setTimeout;
},{isPage:false,isComponent:false,currentFile:'libs/lodash-inject.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/moment-zh-cn.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,d=(e=require("moment"))&&e.__esModule?e:{default:e};
//! moment.js locale configuration
//! locale : Chinese (China) [zh-cn]
//! author : suupic : https://github.com/suupic
//! author : Zeno Zeng : https://github.com/zenozeng
//! author : uu109 : https://github.com/uu109
exports.default=d.default.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,d){return 12===e&&(e=0),"凌晨"===d||"早上"===d||"上午"===d?e:"下午"===d||"晚上"===d?e+12:e>=11?e:e+12},meridiem:function(e,d,_){var t=100*e+d;return t<600?"凌晨":t<900?"早上":t<1130?"上午":t<1230?"中午":t<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,d){switch(d){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});
},{isPage:false,isComponent:false,currentFile:'libs/moment-zh-cn.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/nocode-format.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t,e,n=require("../@babel/runtime/helpers/typeof");t=window,e=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=133)}([function(t,e){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(1),o=n(0),i=n(8),u=n(9),a=n(11),f=function t(e,n,f){var c,s,l,p=e&t.F,h=e&t.G,d=e&t.S,v=e&t.P,y=e&t.B,g=e&t.W,m=h?o:o[n]||(o[n]={}),b=m.prototype,S=h?r:d?r[n]:(r[n]||{}).prototype;for(c in h&&(f=n),f)(s=!p&&S&&void 0!==S[c])&&a(m,c)||(l=s?S[c]:f[c],m[c]=h&&"function"!=typeof S[c]?f[c]:y&&s?i(l,r):g&&S[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):v&&"function"==typeof l?i(Function.call,l):l,v&&((m.virtual||(m.virtual={}))[c]=l,e&t.R&&b&&!b[c]&&u(b,c,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,e,n){var r=n(35)("wks"),o=n(22),i=n(1).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e){t.exports=function(t){return"object"==n(t)?null!==t:"function"==typeof t}},function(t,e,n){var r=n(7),o=n(48),i=n(31),u=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(10)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(14);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(5),o=n(19);t.exports=n(6)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(32),o=n(28);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(5).f,o=n(11),i=n(3)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(8),o=n(78),i=n(79),u=n(7),a=n(33),f=n(80),c={},s={};(e=t.exports=function(t,e,n,l,p){var h,d,v,y,g=p?function(){return t}:f(t),m=r(n,l,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(i(g)){for(h=a(t.length);h>b;b++)if((y=e?m(u(d=t[b])[0],d[1]):m(t[b]))===c||y===s)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=o(v,m,d.value,e))===c||y===s)return y}).BREAK=c,e.RETURN=s},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(7),o=n(72),i=n(36),u=n(34)("IE_PROTO"),a=function(){},f=function(){var t,e=n(30)("iframe"),r=i.length;for(e.style.display="none",n(51).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;r--;)delete f.prototype[i[r]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[u]=t):n=f(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(50),o=n(36);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(28);t.exports=function(t){return Object(r(t))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){},function(t,e,n){var r=n(70)(!0);n(29)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(13),o=n(2),i=n(49),u=n(9),a=n(15),f=n(71),c=n(17),s=n(52),l=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,d,v,y,g){f(n,e,d);var m,b,S,x=function(t){if(!p&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",w="values"==v,M=!1,P=t.prototype,O=P[l]||P["@@iterator"]||v&&P[v],k=O||x(v),T=v?w?x("entries"):k:void 0,E="Array"==e&&P.entries||O;if(E&&(S=s(E.call(new t)))!==Object.prototype&&S.next&&(c(S,_,!0),r||"function"==typeof S[l]||u(S,l,h)),w&&O&&"values"!==O.name&&(M=!0,k=function(){return O.call(this)}),r&&!g||!p&&!M&&P[l]||u(P,l,k),a[e]=k,a[_]=h,v)if(m={values:w?k:x("values"),keys:y?k:x("keys"),entries:T},g)for(b in m)b in P||i(P,b,m[b]);else o(o.P+o.F*(p||M),e,m);return m}},function(t,e,n){var r=n(4),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(16);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(27),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(35)("keys"),o=n(22);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(1),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(13)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){n(75);for(var r=n(1),o=n(9),i=n(15),u=n(3)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<a.length;f++){var c=a[f],s=r[c],l=s&&s.prototype;l&&!l[u]&&o(l,u,c),i[c]=i.Array}},function(t,e,n){var r=n(16),o=n(3)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(14);function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){e.f=n(3)},function(t,e,r){var o=r(22)("meta"),i=r(4),u=r(11),a=r(5).f,f=0,c=Object.isExtensible||function(){return!0},s=!r(10)((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,o,{value:{i:"O"+ ++f,w:{}}})},p=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==n(t)?t:("string"==typeof t?"S":"P")+t;if(!u(t,o)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[o].i},getWeak:function(t,e){if(!u(t,o)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[o].w},onFreeze:function(t){return s&&p.NEED&&c(t)&&!u(t,o)&&l(t),t}}},function(t,e,n){var r=n(1),o=n(0),i=n(13),u=n(42),a=n(5).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:u.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports=n(66)},function(t,e,n){e.__esModule=!0;var r,o=(r=n(68))&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default((function(t,n){return function r(i,u){try{var a=e[i](u),f=a.value}catch(t){return void n(t)}if(!a.done)return o.default.resolve(f).then((function(t){r("next",t)}),(function(t){r("throw",t)}));t(f)}("next")}))}}},function(t,e,n){t.exports=!n(6)&&!n(10)((function(){return 7!=Object.defineProperty(n(30)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){t.exports=n(9)},function(t,e,n){var r=n(11),o=n(12),i=n(73)(!1),u=n(34)("IE_PROTO");t.exports=function(t,e){var n,a=o(t),f=0,c=[];for(n in a)n!=u&&r(a,n)&&c.push(n);for(;e.length>f;)r(a,n=e[f++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(11),o=n(23),i=n(34)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(7),o=n(14),i=n(3)("species");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||null==(n=r(u)[i])?e:o(n)}},function(t,e,n){var r,o,i,u=n(8),a=n(81),f=n(51),c=n(30),s=n(1),l=s.process,p=s.setImmediate,h=s.clearImmediate,d=s.MessageChannel,v=s.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete g[t]},"process"==n(16)(l)?r=function(t){l.nextTick(u(m,t,1))}:v&&v.now?r=function(t){v.now(u(m,t,1))}:d?(i=(o=new d).port2,o.port1.onmessage=b,r=u(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(t){s.postMessage(t+"","*")},s.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){f.appendChild(c("script")).onreadystatechange=function(){f.removeChild(this),m.call(t)}}:function(t){setTimeout(u(m,t,1),0)}),t.exports={set:p,clear:h}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(7),o=n(4),i=n(40);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(1),o=n(0),i=n(5),u=n(6),a=n(3)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];u&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){e.__esModule=!0;var r,o=(r=n(91))&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,r){e.__esModule=!0;var o=a(r(95)),i=a(r(97)),u="function"==typeof i.default&&"symbol"==n(o.default)?function(t){return n(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":n(t)};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(50),o=n(36).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(24),o=n(19),i=n(12),u=n(31),a=n(11),f=n(48),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=i(t),e=u(e,!0),f)try{return c(t,e)}catch(t){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(67),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){var r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag",c="object"==n(t),s=e.regeneratorRuntime;if(s)c&&(t.exports=s);else{(s=e.regeneratorRuntime=c?t.exports:{}).wrap=y;var l={},p={};p[u]=function(){return this};var h=Object.getPrototypeOf,d=h&&h(h(k([])));d&&d!==r&&o.call(d,u)&&(p=d);var v=S.prototype=m.prototype=Object.create(p);b.prototype=v.constructor=S,S.constructor=b,S[f]=b.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f in t||(t[f]="GeneratorFunction")),t.prototype=Object.create(v),t},s.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[a]=function(){return this},s.AsyncIterator=_,s.async=function(t,e,n,r){var o=new _(y(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(v),v[f]="Generator",v[u]=function(){return this},v.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),f=o.call(i,"finallyLoc");if(a&&f){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}}}function y(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),u=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var a=w(u,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var f=g(t,e,n);if("normal"===f.type){if(r=n.done?"completed":"suspendedYield",f.arg===l)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(r="completed",n.method="throw",n.arg=f.arg)}}}(t,n,u),i}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function m(){}function b(){}function S(){}function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(r,i){function u(){return new Promise((function(e,u){!function e(r,i,u,a){var f=g(t[r],t,i);if("throw"!==f.type){var c=f.arg,s=c.value;return s&&"object"==n(s)&&o.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,u,a)}),(function(t){e("throw",t,u,a)})):Promise.resolve(s).then((function(t){c.value=t,u(c)}),a)}a(f.arg)}(r,i,e,u)}))}return e=e?e.then(u,u):u()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=g(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function k(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){t.exports={default:n(69),__esModule:!0}},function(t,e,n){n(25),n(26),n(37),n(77),n(85),n(86),t.exports=n(0).Promise},function(t,e,n){var r=n(27),o=n(28);t.exports=function(t){return function(e,n){var i,u,a=String(o(e)),f=r(n),c=a.length;return f<0||f>=c?t?"":void 0:(i=a.charCodeAt(f))<55296||i>56319||f+1===c||(u=a.charCodeAt(f+1))<56320||u>57343?t?a.charAt(f):i:t?a.slice(f,f+2):u-56320+(i-55296<<10)+65536}}},function(t,e,n){var r=n(20),o=n(19),i=n(17),u={};n(9)(u,n(3)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(5),o=n(7),i=n(21);t.exports=n(6)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),a=u.length,f=0;a>f;)r.f(t,n=u[f++],e[n]);return t}},function(t,e,n){var r=n(12),o=n(33),i=n(74);t.exports=function(t){return function(e,n,u){var a,f=r(e),c=o(f.length),s=i(u,c);if(t&&n!=n){for(;c>s;)if((a=f[s++])!=a)return!0}else for(;c>s;s++)if((t||s in f)&&f[s]===n)return t||s||0;return!t&&-1}}},function(t,e,n){var r=n(27),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(76),o=n(53),i=n(15),u=n(12);t.exports=n(29)(Array,"Array",(function(t,e){this._t=u(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){var r,o,i,u,a=n(13),f=n(1),c=n(8),s=n(38),l=n(2),p=n(4),h=n(14),d=n(39),v=n(18),y=n(54),g=n(55).set,m=n(82)(),b=n(40),S=n(56),x=n(83),_=n(57),w=f.TypeError,M=f.process,P=M&&M.versions,O=P&&P.v8||"",k=f.Promise,T="process"==s(M),E=function(){},j=o=b.f,N=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n(3)("species")]=function(t){t(E,E)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e&&0!==O.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,o=1==t._s,i=0,u=function(e){var n,i,u,a=o?e.ok:e.fail,f=e.resolve,c=e.reject,s=e.domain;try{a?(o||(2==t._h&&D(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&(s.exit(),u=!0)),n===e.promise?c(w("Promise-chain cycle")):(i=C(n))?i.call(n,f,c):f(n)):c(r)}catch(t){s&&!u&&s.exit(),c(t)}};n.length>i;)u(n[i++]);t._c=[],t._n=!1,e&&!t._h&&L(t)}))}},L=function(t){g.call(f,(function(){var e,n,r,o=t._v,i=B(t);if(i&&(e=S((function(){T?M.emit("unhandledRejection",o,t):(n=f.onunhandledrejection)?n({promise:t,reason:o}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||B(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){g.call(f,(function(){var e;T?M.emit("rejectionHandled",t):(e=f.onrejectionhandled)&&e({promise:t,reason:t._v})}))},F=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},R=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw w("Promise can't be resolved itself");(n=C(e))?m((function(){var o={_w:r,_d:!1};try{n.call(e,c(t,o,1),c(F,o,1))}catch(t){F.call(o,t)}})):(r._v=e,r._s=1,A(r,!1))}catch(e){F.call({_w:r,_d:!1},e)}}};N||(k=function(t){d(this,k,"Promise","_h"),h(t),r.call(this);try{t(c(R,this,1),c(F,this,1))}catch(t){F.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(41)(k.prototype,{then:function(t,e){var n=j(y(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=c(R,t,1),this.reject=c(F,t,1)},b.f=j=function(t){return t===k||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!N,{Promise:k}),n(17)(k,"Promise"),n(58)("Promise"),u=n(0).Promise,l(l.S+l.F*!N,"Promise",{reject:function(t){var e=j(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!N),"Promise",{resolve:function(t){return _(a&&this===u?k:this,t)}}),l(l.S+l.F*!(N&&n(84)((function(t){k.all(t).catch(E)}))),"Promise",{all:function(t){var e=this,n=j(e),r=n.resolve,o=n.reject,i=S((function(){var n=[],i=0,u=1;v(t,!1,(function(t){var a=i++,f=!1;n.push(void 0),u++,e.resolve(t).then((function(t){f||(f=!0,n[a]=t,--u||r(n))}),o)})),--u||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=j(e),r=n.reject,o=S((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){var r=n(7);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(15),o=n(3)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(38),o=n(3)("iterator"),i=n(15);t.exports=n(0).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(1),o=n(55).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,a=r.Promise,f="process"==n(16)(u);t.exports=function(){var t,e,n,c=function(){var r,o;for(f&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(f)n=function(){u.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var s=a.resolve(void 0);n=function(){s.then(c)}}else n=function(){o.call(r,c)};else{var l=!0,p=document.createTextNode("");new i(c).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(1).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(3)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){var r=n(2),o=n(0),i=n(1),u=n(54),a=n(57);r(r.P+r.R,"Promise",{finally:function(t){var e=u(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){var r=n(2),o=n(40),i=n(56);r(r.S,"Promise",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){n(89),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var r=n(23),o=n(52);n(90)("getPrototypeOf",(function(){return function(t){return o(r(t))}}))},function(t,e,n){var r=n(2),o=n(0),i=n(10);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",u)}},function(t,e,n){t.exports={default:n(92),__esModule:!0}},function(t,e,n){n(93);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(2);r(r.S+r.F*!n(6),"Object",{defineProperty:n(5).f})},function(t,e,n){e.__esModule=!0;var r,o=(r=n(61))&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){t.exports={default:n(96),__esModule:!0}},function(t,e,n){n(26),n(37),t.exports=n(42).f("iterator")},function(t,e,n){t.exports={default:n(98),__esModule:!0}},function(t,e,n){n(99),n(25),n(102),n(103),t.exports=n(0).Symbol},function(t,e,r){var o=r(1),i=r(11),u=r(6),a=r(2),f=r(49),c=r(43).KEY,s=r(10),l=r(35),p=r(17),h=r(22),d=r(3),v=r(42),y=r(44),g=r(100),m=r(62),b=r(7),S=r(4),x=r(12),_=r(31),w=r(19),M=r(20),P=r(101),O=r(64),k=r(5),T=r(21),E=O.f,j=k.f,N=P.f,C=o.Symbol,A=o.JSON,L=A&&A.stringify,B=d("_hidden"),D=d("toPrimitive"),F={}.propertyIsEnumerable,R=l("symbol-registry"),$=l("symbols"),G=l("op-symbols"),I=Object.prototype,H="function"==typeof C,W=o.QObject,V=!W||!W.prototype||!W.prototype.findChild,z=u&&s((function(){return 7!=M(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=E(I,e);r&&delete I[e],j(t,e,n),r&&t!==I&&j(I,e,r)}:j,K=function(t){var e=$[t]=M(C.prototype);return e._k=t,e},U=H&&"symbol"==n(C.iterator)?function(t){return"symbol"==n(t)}:function(t){return t instanceof C},X=function t(e,n,r){return e===I&&t(G,n,r),b(e),n=_(n,!0),b(r),i($,n)?(r.enumerable?(i(e,B)&&e[B][n]&&(e[B][n]=!1),r=M(r,{enumerable:w(0,!1)})):(i(e,B)||j(e,B,w(1,{})),e[B][n]=!0),z(e,n,r)):j(e,n,r)},J=function(t,e){b(t);for(var n,r=g(e=x(e)),o=0,i=r.length;i>o;)X(t,n=r[o++],e[n]);return t},Q=function(t){var e=F.call(this,t=_(t,!0));return!(this===I&&i($,t)&&!i(G,t))&&(!(e||!i(this,t)||!i($,t)||i(this,B)&&this[B][t])||e)},Z=function(t,e){if(t=x(t),e=_(e,!0),t!==I||!i($,e)||i(G,e)){var n=E(t,e);return!n||!i($,e)||i(t,B)&&t[B][e]||(n.enumerable=!0),n}},Y=function(t){for(var e,n=N(x(t)),r=[],o=0;n.length>o;)i($,e=n[o++])||e==B||e==c||r.push(e);return r},q=function(t){for(var e,n=t===I,r=N(n?G:x(t)),o=[],u=0;r.length>u;)!i($,e=r[u++])||n&&!i(I,e)||o.push($[e]);return o};H||(f((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function e(n){this===I&&e.call(G,n),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),z(this,t,w(1,n))};return u&&V&&z(I,t,{configurable:!0,set:e}),K(t)}).prototype,"toString",(function(){return this._k})),O.f=Z,k.f=X,r(63).f=P.f=Y,r(24).f=Q,r(45).f=q,u&&!r(13)&&f(I,"propertyIsEnumerable",Q,!0),v.f=function(t){return K(d(t))}),a(a.G+a.W+a.F*!H,{Symbol:C});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var nt=T(d.store),rt=0;nt.length>rt;)y(nt[rt++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(R,t+="")?R[t]:R[t]=C(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?M(t):J(M(t),e)},defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Y,getOwnPropertySymbols:q}),A&&a(a.S+a.F*(!H||s((function(){var t=C();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(S(e)||void 0!==t)&&!U(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!U(e))return e}),r[1]=e,L.apply(A,r)}}),C.prototype[D]||r(9)(C.prototype,D,C.prototype.valueOf),p(C,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(t,e,n){var r=n(21),o=n(45),i=n(24);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,a=n(t),f=i.f,c=0;a.length>c;)f.call(t,u=a[c++])&&e.push(u);return e}},function(t,e,r){var o=r(12),i=r(63).f,u={}.toString,a="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==u.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(o(t))}},function(t,e,n){n(44)("asyncIterator")},function(t,e,n){n(44)("observable")},function(t,e,n){e.__esModule=!0;var r=u(n(105)),o=u(n(109)),i=u(n(61));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,i.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(106),__esModule:!0}},function(t,e,n){n(107),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var r=n(2);r(r.S,"Object",{setPrototypeOf:n(108).set})},function(t,e,n){var r=n(4),o=n(7),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(8)(Function.call,n(64).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e,n){n(111);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(2);r(r.S,"Object",{create:n(20)})},function(t,e,n){var r=s(n(46)),o=s(n(47)),i=s(n(113)),u=s(n(59)),a=s(n(60)),f=s(n(117)),c=s(n(132));function s(t){return t&&t.__esModule?t:{default:t}}var l="~!！@#$%^&*(（)）-_=+[]【】{}|;；:：'\"‘’“”,，。<.>《》/、?？ ".split("").reduce((function(t,e){return t.set(e,!0),t}),new f.default),p="iOS,iPhone,iPhone Pro,iPad,iPad Pro,Android,Mac,macOS,iMac,Mac Book Air,Mac Book Pro,App Store,Apple Pay,Apple Music,Beats,Uber,Google,KEYone,Lyft,App,.NET,0x10c,3D,3DS,3ds Max,3G,4G,4K,Ace,AdMob,Adobe,AdSense,AdWords,AeroFS,AirMech Arena,Alexa,Alfred,Algolia,Alienware,AlphaGo,Amazon Web Services,AMD,Amiibo,AMP,Android,AngularJS,Anno,Ansible,Apache,Aperture,API,App.net,Apple,Apple TV,Arc,Arch,Arduino,ARKit,Asana,asdf,Atlassian,Atom,AutoCAD,Avocado,Backbone.js,Bash,BASIC,Battle for Wesnoth,Battlefield 1,Battlefield 3,Battlefield 4,Battlefield Hardline,Bento,Besiege,BFBC2,BGP,Big Data,Bing,Bitcoin,BlackBerry,Blender,Blogger,Blu-ray,BOINC,bong,Bootstrap,Borderlands,Bose,Braun,BTSync,bzr,C/C++/Obj-C,C3Edge,Caddy,Caffe,Call of Duty,Camino,Cardboard,Cassandra,Catchpoint,CDN,Celery,Cement,CentOS,Ceph,CG,Charles,Chef,Cherokee,Chevrolet,Chocolat,Chrome,Cisco,Clash of Clans,Clojure,Cloud9,Cloudera,CloudStack,Cobra,cocos2d,CodeMirror,Coding,ColdFusion,Computer vision,Confluence,Core,Core ML,CoreOS,Corvette,Couchbase,CouchDB,Cray,Crysis,CSS,CUDA,cURL,Cut the Rope,DaoCloud,Dart,Daydream,Debian,Dell,Delphi,Destiny,Dev,DevOps,Diablo III,DirectX,Discourse,Django,DJI,DNS,Docker,Doit.im,DotA,DotCloud,Dribbble,Dropbox,Duolingo,DUST 514,Dyn,EA,Edge,EdgeCast,Elasticsearch,Electron,ELINKVPS,Elixir,Emacs,EMC,Erlang,ERP,Eucalyptus,EVE,Evernote,Excel,Factorio,Fedora,FFmpeg,Final Cut Pro,fir.im,Firebase,Firefox,Fitbit,Flash,Flask,Fling,Fluentd,FoundationDB,FreeBSD,Fusion-io,Game Dev Story,GCC,GDG,Gentoo,Getting Things Done,Ghost,Ghost in the Shell,git,GitBook,GitCafe,GitHub,GitLab,GlassFish,Gnome,Go,Google App Engine,Google Cloud,Google Glass,Google Wave Protocol,GoPro,Gran Turismo,Grand Theft Auto,Guild Wars 2,G-WAN,Hack,Hadoop,HAProxy,Haskell,Hawken,HBase,Hearthstone,Herman Miller,Heroes of the Storm,Heroku,Hexo,HLS,Homebrew,HomePod,HTML,HTTP,HUBOT,HubSpot,Hue,Hyper_,Hyperloop,iAd,iBeacon,iBook,iCloud,iCode,iDev,IE,IFTTT,iGame,IIS,iLife,Illustrator,iMac,iMarketing,InDesign,InfluxDB,Ingress,Instagram,Instapaper,Intel,io,Ionic,iOS,iPad,iPhone,iPod,iray,IRC,iRobot,iTransfer,iTunes,iWork,Java,JavaScript,Jekyll,JetBrains,Jinja,JIRA,jQuery,Juniper,Jupyter,Kafka,KDE,Keras,Keybase,Kibana,Killzone,Kindle,Kirby,Kotlin,KVM,Kyoto Tycoon,LaunchBar,LeanCloud,LEGO,Lightroom,Lighttpd,LINE,Linux,Linux Mint,Lisp,LLVM,Logstash,Lua,Lucene,LUMIX,LVM,LXC,Lynda,Mac mini,Mac Pro,MacBook,MacBook Air,MacBook Pro,macOS,MacType,make,MapR,MapReduce,Markdown,Matrix,Maya,MECE,Medal of Honor,Medium,memcached,MemSQL,mental ray,Mercurial,Mermaid,Mesos,Metal,Metal Gear Solid,Meteor,Microsoft Office,Minecraft,MIUI,MobileMe,MODO,ModSecurity,MoinMoin,Monero,MonetDB,MongoDB,Motion,Mozilla,Mudbox,Munin,MusicKit,MySQL,NAS,NDS,Need for Speed,NES,NetBeans,NetBSD,New Relic,Nexus,NGINX,Nintendo,Nintendo Switch,Nissan,Node.js,Nokia,NoSQL,Notes,NVIDIA,OAuth,OBS,Oculus VR,OneAPM,OpenBSD,OpenCL,OpenGL,OpenNebula,OpenResty,OpenShift,OpenSolaris,OpenStack,openSUSE,OpenTSDB,OpenVZ,OpenWrt,Opera,Oracle,ORCA,O'Reilly,Otto,OUYA,Overwatch,PayPal,Percona,Perl,Phabricator,Photoshop,PHP,Phusion Passenger,Ping++,Pixel,Pixelmator,PlayStation 3,PlayStation 4,PlayStation Vita,Plone,Podcast,Pogo,Polymer,Portal series,PostgreSQL,PowerDNS,PowerShell,Processing,Project Asteroid,Project Galaxy,Project Museum,Project Picky,Project Stormwind,Project Zeppelin,PSP,Puppet,pytest,Python,Qt,Quip,RabbitMQ,Racket,RAGE,Raspberry Pi,Razer,React,Reddit,Redis,RescueTime,Resident Evil 5,Resident Evil 6,reStructuredText,RethinkDB,RetroArch,RFC,Riak,Ripple,RQ,RRDtool,Ruby,Ruby on Rails,Rust,Safari,Sailfish,Salt Stack,Samsung,SAP,Scala,scikit-learn,Scrum,SDN,Sentry,Serf,Serverless,Servo,Shade,shadowsocks,SimCity,Sina App Engine,Sketch,Smartisan OS,SmartOS,SmokePing,SNES,Snort,SolarCity,Solaris,Solr,SONY,SpaceX,Spark,Sphinx,Splunk,Sputnik,SQLAlchemy,SQLite,Square,Squid,SSD,SSDB,SSH,SSL,Stack Overflow,StarCraft 2,Stash,Steam,Stingray,STOP,Storm,Stripe,stunnel,Sublime Text,Subversion,Surface,Surge,Swift,Synology,Syslog,Tarsnap,Telegram,TensorFlow,Tesla,Textie,TextMate,Theano,ThinkPad,Titanfall,tmux,Torch,Tornado,Toruk,Traffic Server,Trello,tvOS,Twitch,Uber,Ubersmith,UBNT,Ubuntu,Udacity,UNITY,Unix,Unreal Development Kit,Vagrant,Varnish,Velocity,Vim,VirtualBox,Visual Studio Code,Vivaldi,Vive,VMware,VoltDB,VPN,VPS,Vue.js,Wacom,Wargaming,Waze,WebGL,webOS,WebP,webpack,WebRTC,WhatsApp,Wii,Wii U,Wiki,Windows,Windows Azure,Windows Phone,Wireshark,WordPress,World of Warcraft,WWDC,Xbox 360,Xbox One,Xcode,XCOM,XeHost,Xen,XenServer,Y Combinator,ZFS,ZooKeeper,Zope".split(","),h=/\b(ios)(\d+)\b/i;t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,t),this.config=(0,i.default)({autoSync:!0,nouns:p,autoSyncInterval:3e4,disableNouns:!1},e),this._init()}var e;return(0,a.default)(t,[{key:"_init",value:function(){var t=this.config,e=t.nouns;if(t.autoSync,t.autoSyncInterval,!t.disableNouns)if("[object Array]"===Object.prototype.toString.call(e))this.nouns=e,this.nounsMap=this._nounsMap(e),this.nounsMatchMap=this._nounsMatchMap(e);else if("[object Function]"===Object.prototype.toString.call(e))this.updater=e,this.nouns=[],this.nounsMap=this._nounsMap(p),this.nounsMatchMap=this._nounsMatchMap(p),this._runSync();else{if("string"!=typeof e)throw new Error("not support");this.nouns=[],this.nounsMap=this._nounsMap(p),this.nounsMatchMap=this._nounsMatchMap(p),this._runSync()}}},{key:"updateNounsByData",value:function(t){"[object Array]"===Object.prototype.toString.call(t)&&(this.nouns=t,this.nounsMap=this._nounsMap(this.nouns),this.nounsMatchMap=this._nounsMatchMap(this.nouns))}},{key:"formatText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=(t||"").trim())?this._formatFragment(t,e):t}},{key:"_getMatch",value:function(t,e,n){if(n.count>6)return console.warn("fuck off",t,e,n),{index:n.index,key:n.key,value:""};if(t[e]){var r=t[e].toLowerCase();n.key&&(r=n.key+r);var o=r.replace(/^\s|\s$/g,""),i=this.nounsMatchMap[o],u=this.nounsMap[o];if(i)return n.key=r,n.value=u,n.index=e,n.count=n.count?n.count+1:1,this._getMatch(t,e+1,n)}if(n.key)for(var a=" "===n.key[n.key.length-1],f=n.key.split(" "),c=f.length,s=c;s>0;s--){var l=f.slice(0,s).join(" "),p=this.nounsMap[l];if(p)return n.key=l,n.value=p,n.index=n.index-2*(c-s)+(a?1:0),n}return{index:n.index,key:n.key,value:""}}},{key:"_formatFragment",value:function(t,e){if(t=(t=(t=(t=(t=(t=(t=t.replace(/【[^【】]+】/gi,"")).replace(/[“”]([^“”]+)[“”]/g,"「$1」")).replace(/"([^"]+)"/g,"「$1」")).replace(/％/g,"%")).replace(/^「([^」]+)」/,"$1")).replace(/『([^』]+)』/g,"「$1」")).replace(/•/g,"·"),t=c.default.spacing(t),!this.config.disableNouns){for(var n=[],r=[],o="",i="",u=0,a=t.length;u<a;u++)i=t[u],l.get(i)?(o&&(n.push(o),o=""),n.push(i)):o+=i;o&&n.push(o);for(var f=0,s=n.length;f<s;f++){var p=this._getMatch(n,f,{});p.value?(r.push(p.value),f=p.index):r.push(n[f])}t=r.join("")}return(t=(t=(t=(t=(t=(t=t.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]\s*):/g,"$1：")).replace(/(\d+)\s*[:|：]\s*(\d{2,})/g,"$1:$2")).replace(/\s*(A|B|C|D|E|F|G)\s*\+\s*轮/g," $1+ 轮")).replace(/News \+/g,"News+")).replace(/TV \+/g,"TV+")).replace(/\s*·\s*/g,"·")).replace(h,"$1 $2")}},{key:"_formatFuckText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3];return e&&/\w[\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]|[\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]\w/.test(e+t[0])&&(e+=" "),n&&/\w[\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]|[\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]\w/.test(n+t[t.length-1])&&(n=" "+n),t=this._formatFragment(e+t+n,r),e&&(t=t.slice(1)),n&&(t=t.slice(0,t.length-1)),t}},{key:"formatHTML",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(t=(t||"").trim()).replace(/\s*【[^【】]+】\s*/gi,"");for(var n=/<([\w]+)[^>]*>(.*?)<\/\1>/g,r="",o=0,i=0,u=n.exec(t);u;)i=u.index,r+=this._formatFragment(t.slice(o,i),e),o=i+u[0].length,r+="<"+u[1]+">"+this._formatFuckText(u[2],t[i-1],t[o],e)+"</"+u[1]+">",u=n.exec(t);return r+this._formatFragment(t.slice(o,t.length),e)}},{key:"formatHTMLText",value:function(t){for(var e={hump:!1},n=/<[^>]+>/g,r="",o=0,i=0,u=n.exec(t);u;)i=u.index,r+=this._formatFragment(t.slice(o,i),e),o=i+u[0].length,r+=u[0],u=n.exec(t);return r+this._formatFragment(t.slice(o,t.length),e)}},{key:"_runSync",value:(e=(0,o.default)(r.default.mark((function t(){var e=this;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.updateNouns();case 3:this.config.autoSync&&setTimeout((0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._runSync();case 2:case"end":return t.stop()}}),t,e)}))),this.config.autoSyncInterval),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),setTimeout((0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._runSync();case 2:case"end":return t.stop()}}),t,e)}))),this.config.autoSyncInterval);case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return e.apply(this,arguments)})},{key:"_nounsMap",value:function(t){var e={};return t?(t.forEach((function(t){e[t.toLowerCase().replace(/^\s|\s$/g,"")]=t})),e):e}},{key:"_nounsMatchMap",value:function(t){var e={};return t?(t.forEach((function(t){var n=t.split(" ");n.forEach((function(t,r){var o=n.slice(0,r+1).join(" ");e[o.toLowerCase().replace(/^\s|\s$/g,"")]=!0}))})),e):e}}]),t}()},function(t,e,n){t.exports={default:n(114),__esModule:!0}},function(t,e,n){n(115),t.exports=n(0).Object.assign},function(t,e,n){var r=n(2);r(r.S+r.F,"Object",{assign:n(116)})},function(t,e,n){var r=n(21),o=n(45),i=n(24),u=n(23),a=n(32),f=Object.assign;t.exports=!f||n(10)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=f({},t)[n]||Object.keys(f({},e)).join("")!=r}))?function(t,e){for(var n=u(t),f=arguments.length,c=1,s=o.f,l=i.f;f>c;)for(var p,h=a(arguments[c++]),d=s?r(h).concat(s(h)):r(h),v=d.length,y=0;v>y;)l.call(h,p=d[y++])&&(n[p]=h[p]);return n}:f},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){n(25),n(26),n(37),n(119),n(125),n(128),n(130),t.exports=n(0).Map},function(t,e,n){var r=n(120),o=n(65);t.exports=n(121)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){var r=n(5).f,o=n(20),i=n(41),u=n(8),a=n(39),f=n(18),c=n(29),s=n(53),l=n(58),p=n(6),h=n(43).fastKey,d=n(65),v=p?"_s":"size",y=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var s=t((function(t,r){a(t,s,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[v]=0,null!=r&&f(r,n,t[c],t)}));return i(s.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),p&&r(s.prototype,"size",{get:function(){return d(this,e)[v]}}),s},def:function(t,e,n){var r,o,i=y(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[v]++,"F"!==o&&(t._i[o]=i)),t},getEntry:y,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?s(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,s(1))}),n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){var r=n(1),o=n(2),i=n(43),u=n(10),a=n(9),f=n(41),c=n(18),s=n(39),l=n(4),p=n(17),h=n(5).f,d=n(122)(0),v=n(6);t.exports=function(t,e,n,y,g,m){var b=r[t],S=b,x=g?"set":"add",_=S&&S.prototype,w={};return v&&"function"==typeof S&&(m||_.forEach&&!u((function(){(new S).entries().next()})))?(S=e((function(e,n){s(e,S,t,"_c"),e._c=new b,null!=n&&c(n,g,e[x],e)})),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in _)||m&&"clear"==t||a(S.prototype,t,(function(n,r){if(s(this,S,t),!e&&m&&!l(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o}))})),m||h(S.prototype,"size",{get:function(){return this._c.size}})):(S=y.getConstructor(e,t,g,x),f(S.prototype,n),i.NEED=!0),p(S,t),w[t]=S,o(o.G+o.W+o.F,w),m||y.setStrong(S,t,g),S}},function(t,e,n){var r=n(8),o=n(32),i=n(23),u=n(33),a=n(123);t.exports=function(t,e){var n=1==t,f=2==t,c=3==t,s=4==t,l=6==t,p=5==t||l,h=e||a;return function(e,a,d){for(var v,y,g=i(e),m=o(g),b=r(a,d,3),S=u(m.length),x=0,_=n?h(e,S):f?h(e,0):void 0;S>x;x++)if((p||x in m)&&(y=b(v=m[x],x,g),t))if(n)_[x]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:_.push(v)}else if(s)return!1;return l?-1:c||s?s:_}}},function(t,e,n){var r=n(124);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(4),o=n(62),i=n(3)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(2);r(r.P+r.R,"Map",{toJSON:n(126)("Map")})},function(t,e,n){var r=n(38),o=n(127);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(18);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(129)("Map")},function(t,e,n){var r=n(2);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(131)("Map")},function(t,e,n){var r=n(2),o=n(14),i=n(8),u=n(18);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,a,f=arguments[1];return o(this),(e=void 0!==f)&&o(f),null==t?new this:(n=[],e?(r=0,a=i(f,arguments[2],2),u(t,!1,(function(t){n.push(a(t,r++))}))):u(t,!1,n.push,n),new this(n))}})}},function(t,e,r){
/*!
     * pangu.js
     * --------
     * @version: 3.3.0
     * @homepage: https://github.com/vinta/pangu.js
     * @license: MIT
     * @author: Vinta Chen <vinta.chen@gmail.com> (https://github.com/vinta)
     */
var o;o=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,r){var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=n(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.topTags=/^(html|head|body|#document)$/i,t.ignoreTags=/^(script|code|pre|textarea)$/i,t.spaceSensitiveTags=/^(a|del|pre|s|strike|u)$/i,t.spaceLikeTags=/^(br|hr|i|img|pangu)$/i,t.blockTags=/^(div|h1|h2|h3|h4|h5|h6|p)$/i,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+n(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"canIgnoreNode",value:function(t){for(var e=t.parentNode;e&&e.nodeName&&-1===e.nodeName.search(this.topTags);){if(e.nodeName.search(this.ignoreTags)>=0||e.isContentEditable||"true"===e.getAttribute("g_editable"))return!0;e=e.parentNode}return!1}},{key:"isFirstTextChild",value:function(t,e){for(var n=t.childNodes,r=0;r<n.length;r++){var o=n[r];if(8!==o.nodeType&&o.textContent)return o===e}return!1}},{key:"isLastTextChild",value:function(t,e){for(var n=t.childNodes,r=n.length-1;r>-1;r--){var o=n[r];if(8!==o.nodeType&&o.textContent)return o===e}return!1}},{key:"spacingNodeByXPath",value:function(t,e){for(var n=document.evaluate(t,e,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=void 0,o=void 0,i=n.snapshotLength-1;i>-1;--i)if(r=n.snapshotItem(i),this.canIgnoreNode(r))o=r;else{var u=this.spacing(r.data);if(r.data!==u&&(r.data=u),o){if(r.nextSibling&&r.nextSibling.nodeName.search(this.spaceLikeTags)>=0){o=r;continue}var a=r.data.toString().substr(-1)+o.data.toString().substr(0,1);if(this.spacing(a)!==a){for(var f=o;f.parentNode&&-1===f.nodeName.search(this.spaceSensitiveTags)&&this.isFirstTextChild(f.parentNode,f);)f=f.parentNode;for(var c=r;c.parentNode&&-1===c.nodeName.search(this.spaceSensitiveTags)&&this.isLastTextChild(c.parentNode,c);)c=c.parentNode;if(c.nextSibling&&c.nextSibling.nodeName.search(this.spaceLikeTags)>=0){o=r;continue}if(-1===c.nodeName.search(this.blockTags))if(-1===f.nodeName.search(this.spaceSensitiveTags))-1===f.nodeName.search(this.ignoreTags)&&-1===f.nodeName.search(this.blockTags)&&(o.previousSibling?-1===o.previousSibling.nodeName.search(this.spaceLikeTags)&&(o.data=" "+o.data):this.canIgnoreNode(o)||(o.data=" "+o.data));else if(-1===c.nodeName.search(this.spaceSensitiveTags))r.data=r.data+" ";else{var s=document.createElement("pangu");s.innerHTML=" ",f.previousSibling?-1===f.previousSibling.nodeName.search(this.spaceLikeTags)&&f.parentNode.insertBefore(s,f):f.parentNode.insertBefore(s,f),s.previousElementSibling||s.parentNode&&s.parentNode.removeChild(s)}}}o=r}}},{key:"spacingNode",value:function(t){this.spacingNodeByXPath(".//*/text()[normalize-space(.)]",t)}},{key:"spacingElementById",value:function(t){var e='id("'+t+'")//text()';this.spacingNodeByXPath(e,document)}},{key:"spacingElementByClassName",value:function(t){var e='//*[contains(concat(" ", normalize-space(@class), " "), "'+t+'")]//text()';this.spacingNodeByXPath(e,document)}},{key:"spacingElementByTagName",value:function(t){var e="//"+t+"//text()";this.spacingNodeByXPath(e,document)}},{key:"spacingPageTitle",value:function(){this.spacingNodeByXPath("/html/head/title/text()",document)}},{key:"spacingPageBody",value:function(){for(var t="/html/body//*/text()[normalize-space(.)]",e=["script","style","textarea"],n=0;n<e.length;n++)t+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+e[n]+'"]';this.spacingNodeByXPath(t,document)}},{key:"spacingPage",value:function(){this.spacingPageTitle(),this.spacingPageBody()}}]),e}(r(1).Pangu),u=new i;(t.exports=u).Pangu=i},function(t,e){var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(["])/g,o=/(["])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,i=/(["']+)(\s*)(.+?)(\s*)(["']+)/g,u=/(["]+)(\s*)(.+?)(\s*)(["]+)/g,a=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])( )(')([A-Za-z])/g,f=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#)([A-Za-z0-9\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]+)(#)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,c=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#([^ ]))/g,s=/(([^ ])#)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,l=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\+\-\*\/=\\|<>])([A-Za-z0-9])/g,p=/([A-Za-z0-9])([\+\-\*\/=&\\|<>])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,h=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c]+(.*?)[\)\]\}>\u201d]+)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,d=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c>])/g,v=/([\)\]\}>\u201d<])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,y=/([\(\[\{<\u201c]+)(\s*)(.+?)(\s*)([\)\]\}>\u201d]+)/,g=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([~!;:,\.\?\u2026])([A-Za-z0-9])/g,m=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([A-Za-z0-9`\$%\^&\*\-=\+\\\|/@\u00a1-\u00ff\u2022\u2027\u2150-\u218f])/g,b=/([A-Za-z0-9`~\$%\^&\*\-=\+\\\|/!;:,\.\?\u00a1-\u00ff\u2022\u2026\u2027\u2150-\u218f])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"spacing",value:function(t){var e=t;e=(e=e.replace(r,"$1 $2")).replace(o,"$1 $2");var n=e=(e=(e=(e=(e=(e=(e=/^[^\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]+$/.test(e)?e.replace(u,"$1$3$5"):e.replace(i,"$1$3$5")).replace(a,"$1$3$4")).replace(f,"$1 $2$3$4 $5")).replace(c,"$1 $2")).replace(s,"$1 $3")).replace(l,"$1 $2 $3")).replace(p,"$1 $2 $3"),S=e.replace(h,"$1 $2 $4");return e=S,n===S&&(e=(e=e.replace(d,"$1 $2")).replace(v,"$1 $2")),(e=(e=(e=e.replace(y,"$1$3$5")).replace(g,"$1$2 $3")).replace(m,"$1 $2")).replace(b,"$1 $2")}},{key:"spacingText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var n=this.spacing(t);e(null,n)}catch(t){e(t)}}}]),t}(),x=new S;(t.exports=x).Pangu=S}])},t.exports=o()},function(t,e,n){var r=l(n(46)),o=l(n(47)),i=l(n(87)),u=l(n(59)),a=l(n(60)),f=l(n(94)),c=l(n(104)),s=l(n(112));function l(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.default)(this,e),(0,f.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t))}var n;return(0,c.default)(e,t),(0,a.default)(e,[{key:"updateNouns",value:(n=(0,o.default)(r.default.mark((function t(){var e;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.updater){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.updater();case 4:"string"==typeof(e=t.sent)&&(e=e.split(",")),this.nouns=e,this.nounsMap=this._nounsMap(this.nouns),this.nounsMatchMap=this._nounsMatchMap(this.nouns);case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(s.default)}])},"object"==("undefined"==typeof exports?"undefined":n(exports))&&"object"==("undefined"==typeof module?"undefined":n(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":n(exports))?exports.NocodeFormat=e():t.NocodeFormat=e();
},{isPage:false,isComponent:false,currentFile:'libs/nocode-format.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/redux.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,t,r=require("../@babel/runtime/helpers/typeof");e=void 0,t=function(e){var t="function"==typeof Symbol&&Symbol.observable||"@@observable",n=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function i(e){if("object"!==r(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=r(e);switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";var n=function(e){return"function"==typeof e.constructor?e.constructor.name:null}(e);switch(n){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return n}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}function u(e){return r(e),a(e)}function c(e,n,a){var s;if("function"==typeof n&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof n&&void 0===a&&(a=n,n=void 0),void 0!==a){if("function"!=typeof a)throw new Error("Expected the enhancer to be a function. Instead, received: '"+u(a)+"'");return a(c)(e,n)}if("function"!=typeof e)throw new Error("Expected the root reducer to be a function. Instead, received: '"+u(e)+"'");var f=e,d=n,l=[],p=l,h=!1;function y(){p===l&&(p=l.slice())}function b(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return d}function w(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function. Instead, received: '"+u(e)+"'");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var t=!0;return y(),p.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");t=!1,y();var r=p.indexOf(e);p.splice(r,1),l=null}}}function v(e){if(!i(e))throw new Error("Actions must be plain objects. Instead, the actual type was: '"+u(e)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,d=f(d,e)}finally{h=!1}for(var t=l=p,r=0;r<t.length;r++)(0,t[r])();return e}function g(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function. Instead, received: '"+u(e));f=e,v({type:o.REPLACE})}function m(){var e,n=w;return(e={subscribe:function(e){if("object"!==r(e)||null===e)throw new Error("Expected the observer to be an object. Instead, received: '"+u(e)+"'");function t(){e.next&&e.next(b())}return t(),{unsubscribe:n(t)}}})[t]=function(){return this},e}return v({type:o.INIT}),(s={dispatch:v,subscribe:w,getState:b,replaceReducer:g})[t]=m,s}var s=c;function f(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function d(e,t){return function(){return t(e.apply(this,arguments))}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}e.__DO_NOT_USE__ActionTypes=o,e.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=y.apply(void 0,i)(r.dispatch),h(h({},r),{},{dispatch:n})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return d(e,t);if("object"!==r(e)||null===e)throw new Error("bindActionCreators expected an object or a function, but instead received: '"+u(e)+'\'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var o in e){var i=e[o];"function"==typeof i&&(n[o]=d(i,t))}return n},e.combineReducers=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];void 0===e[a]&&f('No reducer provided for key "'+a+'"'),"function"==typeof e[a]&&(r[a]=e[a])}var c,s,d=Object.keys(r);c={};try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:o.INIT}))throw new Error('The slice reducer for key "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('The slice reducer for key "'+t+"\" returned undefined when probed with a random type. Don't try to handle '"+o.INIT+'\' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;var n=function(e,t,r,n){var a=Object.keys(t),c=r&&r.type===o.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===a.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!i(e))return"The "+c+' has unexpected type of "'+u(e)+'". Expected argument to be an object with the following keys: "'+a.join('", "')+'"';var s=Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)&&!n[e]}));return s.forEach((function(e){n[e]=!0})),r&&r.type===o.REPLACE?void 0:s.length>0?"Unexpected "+(s.length>1?"keys":"key")+' "'+s.join('", "')+'" found in '+c+'. Expected to find one of the known reducer keys instead: "'+a.join('", "')+'". Unexpected keys will be ignored.':void 0}(e,r,t,c);n&&f(n);for(var a=!1,l={},p=0;p<d.length;p++){var h=d[p],y=r[h],b=e[h],w=y(b,t);if(void 0===w){var v=t&&t.type;throw new Error("When called with an action of type "+(v?'"'+String(v)+'"':"(unknown type)")+', the slice reducer for key "'+h+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}l[h]=w,a=a||w!==b}return(a=a||d.length!==Object.keys(e).length)?l:e}},e.compose=y,e.createStore=c,e.legacy_createStore=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"===("undefined"==typeof exports?"undefined":r(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Redux={});
},{isPage:false,isComponent:false,currentFile:'libs/redux.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/request.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abort=function(e){e&&m[e]&&m[e].abort()},exports.superRequest=q;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("../@babel/runtime/helpers/defineProperty"),n=g(require("lodash")),a=g(require("../config")),o=require("../utils/tools"),u=require("../utils/env"),c=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(require("../utils/global")),s=g(require("../utils/analyse")),i=g(require("../utils/event")),l=require("@mina-modules/system-info"),f=require("@mina-modules/sign"),d=require("@utils/login");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function g(e){return e&&e.__esModule?e:{default:e}}var w=t(t({},"".concat(a.default.API_HOST,"/config"),"".concat(a.default.API_HOST,"/v2/config")),"".concat(a.default.API_HOST,"/sponsor_request"),"".concat(a.default.API_HOST,"/v2/sponsor")),b=[],v=(0,l.getSysInfo)(),m={},h=(0,u.getAppPlatform)();function q(e){return y.apply(this,arguments)}function y(){return(y=r(e().mark((function t(u){var l,f,p,g,w,b=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=b.length>1&&void 0!==b[1]?b[1]:{},f=b.length>2&&void 0!==b[2]?b[2]:3,p=b.length>3&&void 0!==b[3]&&b[3],g=u||{},f--,w="",p){t.next=10;break}return t.next=9,(0,d.appLogin)();case 9:w=t.sent;case 10:return t.abrupt("return",new Promise((function(t,u){P(g);var p={"X-Request-ID":(0,o.fileName)(),version:a.default.VERSION,"Client-Version":v.version,SDKVersion:v.SDKVersion,platform:h};if(w&&(p.Authorization="Bearer ".concat(w)),g.header=n.default.assign({},g.header||{},p),g.data)for(var b in g.data)Object.prototype.hasOwnProperty.call(g.data,b)&&(void 0!==g.data[b]&&"function"!=typeof g.data[b]||delete g.data[b]);g=x(g);var y=(new Date).getTime();g.success=function(){var a=r(e().mark((function r(a){var s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===a.statusCode?console.info("".concat((new Date).toLocaleString()," ").concat(g.url," ").concat(g.header["X-Request-ID"]," request success after ").concat((new Date).getTime()-y," ms:"),a):console.warn("".concat((new Date).toLocaleString()," ").concat(g.url," ").concat(g.header["X-Request-ID"]," request success after ").concat((new Date).getTime()-y," ms:"),a),s="请求失败，".concat(g.header["X-Request-ID"],"，").concat((0,o.currentPageRoute)()),400!==a.statusCode){e.next=13;break}if(console.log(a,"400400"),!a.data.error){e.next=8;break}return e.abrupt("return",l.fullError?u(a.data.error):u(new Error(n.default.get(a,"data.error.message",s))));case 8:if(!a.data.errors){e.next=12;break}return e.abrupt("return",u(new Error(n.default.get(a,"data.errors[0].message",s))));case 12:return e.abrupt("return",u(new Error(s)));case 13:if(401!==a.statusCode){e.next=28;break}if(c.rmKey("auth"),wx.removeStorageSync("SESSION_NEW_1"),wx.removeStorageSync("USER_1"),!(f<0)){e.next=22;break}return i.default.emit("app:request_auth_fail"),e.abrupt("return",u(new Error("未登录或登录状态过期, 请登录后重试")));case 22:return(0,d.clearToken)(),e.t0=t,e.next=26,q(g,l,f);case 26:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 28:E(a,t,u,s);case 29:case"end":return e.stop()}}),r)})));return function(e){return a.apply(this,arguments)}}(),g.fail=function(e){(0,s.default)("request_error",{label:"".concat(g.url,",").concat(g.header["X-Request-ID"],",").concat(e.errMsg)});var r=new Error("请求异常. ".concat((0,o.currentPageRoute)()," ").concat(g.url," ").concat(g.method," ").concat(e.errMsg));u(r)},g.complete=function(){l.rid&&m[l.rid]&&delete m[l.rid]},console.info("".concat((new Date).toLocaleString()," ").concat(g.url," ").concat(g.header["X-Request-ID"]," request begin:"),g),g.timeout=1e4;var O=wx.request(g);S(l.rid,O)})));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(e,r){e&&(m[e]=r)}function x(e){return e.enableHttp2=!0,(0,f.withSign)(e)}function P(e){w[e.url]?e.url=w[e.url]:b.forEach((function(r){var t=r.exec(e.url);t&&(e.url=e.url.slice(0,t.index)+"/v2"+e.url.slice(t.index))}))}function E(e,r,t,a){return 14001===e.statusCode?t(new Error("解密信息与用户信息不一致")):404===e.statusCode?t(new Error("服务器404, ".concat(a))):502===e.statusCode?t(new Error("服务器502, ".concat((0,o.currentPageRoute)()))):500===e.statusCode?t(new Error("服务器500, ".concat((0,o.currentPageRoute)()))):e.data.error?t(new Error(n.default.get(e,"data.error.message",a))):e.data.errors?t(new Error(n.default.get(e,"data.errors[0].message",a))):r(e.data)}
},{isPage:false,isComponent:false,currentFile:'libs/request.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/textarea.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTextArea=function(t){var e=new r(t);return o[e.id]=e,e},exports.getTextArea=function(t){return console.log("current text area",o),o[t]};var t=require("../@babel/runtime/helpers/objectSpread2"),e=require("../@babel/runtime/helpers/classCallCheck"),n=require("../@babel/runtime/helpers/createClass"),i={navigationTitle:"编辑",placeholder:"请输入",confirmText:"完成",value:""},o={},r=function(){function o(n){if(e(this,o),this.content="",this.options=t(t({},i),n),!this.options.id)throw new Error("miss id");this.id=this.options.id,this.content=this.options.value}return n(o,[{key:"edit",value:function(t){t&&(this.content=t),wx.navigateTo({url:"/pages/helpers/textarea/textarea?id=".concat(this.id,"&placeholder=").concat(this.options.placeholder,"&navigationTitle=").concat(this.options.navigationTitle,"&confirmText=").concat(this.options.confirmText,"&value=").concat(this.content)})}},{key:"setContent",value:function(t){this.content=t}},{key:"getContent",value:function(){return this.content}}]),o}();
},{isPage:false,isComponent:false,currentFile:'libs/textarea.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("libs/uuid.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var r,t=require("../@babel/runtime/helpers/typeof");
/*!
**  Pure-UUID -- Pure JavaScript Based Universally Unique Identifier (UUID)
**  Copyright (c) 2004-2017 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/r=function(){var r=function(r,t){for(var e=[],n=0;n<r;n++)e[n]=Math.floor(Math.random()*t+1);return e},e=function(r,t,e,n,i,o){for(var a=function(r,t){var e=r.toString(16);return e.length<2&&(e="0"+e),t&&(e=e.toUpperCase()),e},f=t;f<=e;f++)i[o++]=a(r[f],n);return i},n=function(r,t,e,n,i){for(var o=t;o<=e;o+=2)n[i++]=parseInt(r.substr(o,2),16)},i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#".split(""),o=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0],a=function(r,t){var e={ibits:8,obits:8,obigendian:!0};for(var n in t)void 0!==e[n]&&(e[n]=t[n]);for(var i,o,a,f=[],u=0,d=0,s=0,h=r.length;0===d&&(o=r.charCodeAt(u++)),i=o>>e.ibits-(d+8)&255,d=(d+8)%e.ibits,e.obigendian?0===s?a=i<<e.obits-8:a|=i<<e.obits-8-s:0===s?a=i:a|=i<<s,!(0==(s=(s+8)%e.obits)&&(f.push(a),u>=h)););return f},f=function(r,t){var e={ibits:32,ibigendian:!0};for(var n in t)void 0!==e[n]&&(e[n]=t[n]);var i="",o=4294967295;e.ibits<32&&(o=(1<<e.ibits)-1);for(var a=r.length,f=0;f<a;f++)for(var u=r[f]&o,d=0;d<e.ibits;d+=8)e.ibigendian?i+=String.fromCharCode(u>>e.ibits-8-d&255):i+=String.fromCharCode(u>>d&255);return i},u=function(r,t,e,n,i,o,a,f){return[f,a,o,i,n,e,t,r]},d=function(){return u(0,0,0,0,0,0,0,0)},s=function(r){for(var t=d(),e=0;e<8;e++)t[e]=Math.floor(r%256),r/=256;return t},h=function(r,t){for(var e=0,n=0;n<8;n++)e+=r[n]+t[n],r[n]=Math.floor(e%256),e=Math.floor(e/256);return e},c=function(r,t){for(var e=0,n=0;n<8;n++)e+=r[n]*t,r[n]=Math.floor(e%256),e=Math.floor(e/256);return e},p=function(r,t){var e=d();if(t%8!=0)throw new Error("ui64_ror: only bit rotations supported with a multiple of digit bits");for(var n=Math.floor(t/8),i=0;i<n;i++){for(var o=6;o>=0;o--)e[o+1]=e[o];for(e[0]=r[0],o=0;o<7;o++)r[o]=r[o+1];r[o]=0}return function(r){for(var t=0,e=7;e>=0;e--)t*=256,t+=r[e];return Math.floor(t)}(e)},l=function(r,t){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e},v=function(r,t){return r<<t&4294967295|r>>>32-t&4294967295},b=function(r){return f(function(r,t){function e(r,t,e,n){return r<20?t&e|~t&n:r<40?t^e^n:r<60?t&e|t&n|e&n:t^e^n}function n(r){return r<20?1518500249:r<40?1859775393:r<60?-1894007588:-899497514}r[t>>5]|=128<<24-t%32,r[15+(t+64>>9<<4)]=t;for(var i=Array(80),o=1732584193,a=-271733879,f=-1732584194,u=271733878,d=-1009589776,s=0;s<r.length;s+=16){for(var h=o,c=a,p=f,b=u,x=d,m=0;m<80;m++){i[m]=m<16?r[s+m]:v(i[m-3]^i[m-8]^i[m-14]^i[m-16],1);var g=l(l(v(o,5),e(m,a,f,u)),l(l(d,i[m]),n(m)));d=u,u=f,f=v(a,30),a=o,o=g}o=l(o,h),a=l(a,c),f=l(f,p),u=l(u,b),d=l(d,x)}return[o,a,f,u,d]}(a(r,{ibits:8,obits:32,obigendian:!0}),8*r.length),{ibits:32,ibigendian:!0})},x=function(r){return f(function(r,t){function e(r,t,e,n,i,o){return l(v(l(l(t,r),l(n,o)),i),e)}function n(r,t,n,i,o,a,f){return e(t&n|~t&i,r,t,o,a,f)}function i(r,t,n,i,o,a,f){return e(t&i|n&~i,r,t,o,a,f)}function o(r,t,n,i,o,a,f){return e(t^n^i,r,t,o,a,f)}function a(r,t,n,i,o,a,f){return e(n^(t|~i),r,t,o,a,f)}r[t>>5]|=128<<t%32,r[14+(t+64>>>9<<4)]=t;for(var f=1732584193,u=-271733879,d=-1732584194,s=271733878,h=0;h<r.length;h+=16){var c=f,p=u,b=d,x=s;f=n(f,u,d,s,r[h+0],7,-680876936),s=n(s,f,u,d,r[h+1],12,-389564586),d=n(d,s,f,u,r[h+2],17,606105819),u=n(u,d,s,f,r[h+3],22,-1044525330),f=n(f,u,d,s,r[h+4],7,-176418897),s=n(s,f,u,d,r[h+5],12,1200080426),d=n(d,s,f,u,r[h+6],17,-1473231341),u=n(u,d,s,f,r[h+7],22,-45705983),f=n(f,u,d,s,r[h+8],7,1770035416),s=n(s,f,u,d,r[h+9],12,-1958414417),d=n(d,s,f,u,r[h+10],17,-42063),u=n(u,d,s,f,r[h+11],22,-1990404162),f=n(f,u,d,s,r[h+12],7,1804603682),s=n(s,f,u,d,r[h+13],12,-40341101),d=n(d,s,f,u,r[h+14],17,-1502002290),f=i(f,u=n(u,d,s,f,r[h+15],22,1236535329),d,s,r[h+1],5,-165796510),s=i(s,f,u,d,r[h+6],9,-1069501632),d=i(d,s,f,u,r[h+11],14,643717713),u=i(u,d,s,f,r[h+0],20,-373897302),f=i(f,u,d,s,r[h+5],5,-701558691),s=i(s,f,u,d,r[h+10],9,38016083),d=i(d,s,f,u,r[h+15],14,-660478335),u=i(u,d,s,f,r[h+4],20,-405537848),f=i(f,u,d,s,r[h+9],5,568446438),s=i(s,f,u,d,r[h+14],9,-1019803690),d=i(d,s,f,u,r[h+3],14,-187363961),u=i(u,d,s,f,r[h+8],20,1163531501),f=i(f,u,d,s,r[h+13],5,-1444681467),s=i(s,f,u,d,r[h+2],9,-51403784),d=i(d,s,f,u,r[h+7],14,1735328473),f=o(f,u=i(u,d,s,f,r[h+12],20,-1926607734),d,s,r[h+5],4,-378558),s=o(s,f,u,d,r[h+8],11,-2022574463),d=o(d,s,f,u,r[h+11],16,1839030562),u=o(u,d,s,f,r[h+14],23,-35309556),f=o(f,u,d,s,r[h+1],4,-1530992060),s=o(s,f,u,d,r[h+4],11,1272893353),d=o(d,s,f,u,r[h+7],16,-155497632),u=o(u,d,s,f,r[h+10],23,-1094730640),f=o(f,u,d,s,r[h+13],4,681279174),s=o(s,f,u,d,r[h+0],11,-358537222),d=o(d,s,f,u,r[h+3],16,-722521979),u=o(u,d,s,f,r[h+6],23,76029189),f=o(f,u,d,s,r[h+9],4,-640364487),s=o(s,f,u,d,r[h+12],11,-421815835),d=o(d,s,f,u,r[h+15],16,530742520),f=a(f,u=o(u,d,s,f,r[h+2],23,-995338651),d,s,r[h+0],6,-198630844),s=a(s,f,u,d,r[h+7],10,1126891415),d=a(d,s,f,u,r[h+14],15,-1416354905),u=a(u,d,s,f,r[h+5],21,-57434055),f=a(f,u,d,s,r[h+12],6,1700485571),s=a(s,f,u,d,r[h+3],10,-1894986606),d=a(d,s,f,u,r[h+10],15,-1051523),u=a(u,d,s,f,r[h+1],21,-2054922799),f=a(f,u,d,s,r[h+8],6,1873313359),s=a(s,f,u,d,r[h+15],10,-30611744),d=a(d,s,f,u,r[h+6],15,-1560198380),u=a(u,d,s,f,r[h+13],21,1309151649),f=a(f,u,d,s,r[h+4],6,-145523070),s=a(s,f,u,d,r[h+11],10,-1120210379),d=a(d,s,f,u,r[h+2],15,718787259),u=a(u,d,s,f,r[h+9],21,-343485551),f=l(f,c),u=l(u,p),d=l(d,b),s=l(s,x)}return[f,u,d,s]}(a(r,{ibits:8,obits:32,obigendian:!1}),8*r.length),{ibits:32,ibigendian:!1})},m=0,g=0,w=function(){if(1===arguments.length&&"string"==typeof arguments[0])this.parse.apply(this,arguments);else if(arguments.length>=1&&"number"==typeof arguments[0])this.make.apply(this,arguments);else{if(arguments.length>=1)throw new Error("UUID: constructor: invalid arguments");for(var r=0;r<16;r++)this[r]=0}};return(w.prototype="undefined"!=typeof Uint8Array?new Uint8Array(16):Buffer?new Buffer(16):new Array(16)).constructor=w,w.prototype.make=function(e){var n,i=this;if(1===e){var o=new Date,a=o.getTime();a!==m?g=0:g++,m=a;var f,d=s(a);c(d,1e4),h(d,u(1,178,29,210,19,129,64,0)),g>0&&h(d,s(g)),f=p(d,8),i[3]=255&f,f=p(d,8),i[2]=255&f,f=p(d,8),i[1]=255&f,f=p(d,8),i[0]=255&f,f=p(d,8),i[5]=255&f,f=p(d,8),i[4]=255&f,f=p(d,8),i[7]=255&f,f=p(d,8),i[6]=15&f;var l=r(2,255);i[8]=l[0],i[9]=l[1];var v=r(6,255);for(v[0]|=1,v[0]|=2,n=0;n<6;n++)i[10+n]=v[n]}else if(4===e){var y=r(16,255);for(n=0;n<16;n++)this[n]=y[n]}else{if(3!==e&&5!==e)throw new Error("UUID: make: invalid version");var U="",A="object"===t(arguments[1])&&arguments[1]instanceof w?arguments[1]:(new w).parse(arguments[1]);for(n=0;n<16;n++)U+=String.fromCharCode(A[n]);U+=arguments[2];var D=3===e?x(U):b(U);for(n=0;n<16;n++)i[n]=D.charCodeAt(n)}return i[6]&=15,i[6]|=e<<4,i[8]&=63,i[8]|=128,i},w.prototype.format=function(r){var t,n;return"z85"===r?t=function(r,t){if(t%4!=0)throw new Error("z85_encode: invalid input length (multiple of 4 expected)");for(var e="",n=0,o=0;n<t;)if(o=256*o+r[n++],n%4==0){for(var a=52200625;a>=1;){var f=Math.floor(o/a)%85;e+=i[f],a/=85}o=0}return e}(this,16):"b16"===r?(n=Array(32),e(this,0,15,!0,n,0),t=n.join("")):void 0!==r&&"std"!==r||(n=new Array(36),e(this,0,3,!1,n,0),n[8]="-",e(this,4,5,!1,n,9),n[13]="-",e(this,6,7,!1,n,14),n[18]="-",e(this,8,9,!1,n,19),n[23]="-",e(this,10,15,!1,n,24),t=n.join("")),t},w.prototype.toString=function(r){return this.format(r)},w.prototype.parse=function(r,t){if("string"!=typeof r)throw new Error("UUID: parse: invalid argument (type string expected)");if("z85"===t)!function(r,t){var e=r.length;if(e%5!=0)throw new Error("z85_decode: invalid input length (multiple of 5 expected)");void 0===t&&(t=new Array(4*e/5));for(var n=0,i=0,a=0;n<e;){var f=r.charCodeAt(n++)-32;if(f<0||f>=o.length)break;if(a=85*a+o[f],n%5==0){for(var u=16777216;u>=1;)t[i++]=Math.trunc(a/u%256),u/=256;a=0}}}(r,this);else if("b16"===t)n(r,0,35,this,0);else if(void 0===t||"std"===t){var e={nil:"00000000-0000-0000-0000-000000000000","ns:DNS":"6ba7b810-9dad-11d1-80b4-00c04fd430c8","ns:URL":"6ba7b811-9dad-11d1-80b4-00c04fd430c8","ns:OID":"6ba7b812-9dad-11d1-80b4-00c04fd430c8","ns:X500":"6ba7b814-9dad-11d1-80b4-00c04fd430c8"};if(void 0!==e[r])r=e[r];else if(!r.match(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/))throw new Error('UUID: parse: invalid string representation (expected "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")');n(r,0,7,this,0),n(r,9,12,this,4),n(r,14,17,this,6),n(r,19,22,this,8),n(r,24,35,this,10)}return this},w.prototype.export=function(){for(var r=Array(16),t=0;t<16;t++)r[t]=this[t];return r},w.prototype.import=function(r){if(!("object"===t(r)&&r instanceof Array))throw new Error("UUID: import: invalid argument (type Array expected)");if(16!==r.length)throw new Error("UUID: import: invalid argument (Array of length 16 expected)");for(var e=0;e<16;e++){if("number"!=typeof r[e])throw new Error("UUID: import: invalid array element #"+e+" (type Number expected)");if(!isFinite(r[e])||Math.floor(r[e])!==r[e])throw new Error("UUID: import: invalid array element #"+e+" (Number with integer value expected)");if(!(r[e]>=0&&r[e]<=255))throw new Error("UUID: import: invalid array element #"+e+" (Number with integer value in range 0...255 expected)");this[e]=r[e]}return this},w.prototype.compare=function(r){if("object"!==t(r))throw new Error("UUID: compare: invalid argument (type UUID expected)");if(!(r instanceof w))throw new Error("UUID: compare: invalid argument (type UUID expected)");for(var e=0;e<16;e++){if(this[e]<r[e])return-1;if(this[e]>r[e])return 1}return 0},w.prototype.fold=function(r){if(void 0===r)throw new Error("UUID: fold: invalid argument (number of fold operations expected)");if(r<1||r>4)throw new Error("UUID: fold: invalid argument (1-4 fold operations expected)");for(var t=16/Math.pow(2,r),e=new Array(t),n=0;n<t;n++){for(var i=0,o=0;n+o<16;o+=t)i^=this[n+o];e[n]=i}return e},w},"function"==typeof define&&void 0!==define.amd?define((function(){return r()})):"object"===("undefined"==typeof module?"undefined":t(module))&&"object"===t(module.exports)?(module.exports=r(),module.exports.default=module.exports):(void 0).UUID=r();
},{isPage:false,isComponent:false,currentFile:'libs/uuid.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/load-file/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../@babel/runtime/helpers/regeneratorRuntime");!function(){var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={},r=(t.r(n),t.d(n,{default:function(){return function(t){var n,r=t,o=r.url,i=r.fontFamily,s=void 0===i?"":i,f=r.fontDesc,l=r.fontScopes,p=r.success,d=void 0===p?function(){}:p,v=r.fail,h=void 0===v?function(){}:v,m=r.complete,w=void 0===m?function(){}:m;if(o)return t=a()(o),n="".concat(wx.env.USER_DATA_PATH,"/").concat(t),new Promise((function(t,r){var a,i;wx.getFileSystemManager().access({path:n,success:(i=c(e().mark((function a(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=9;break}return e.prev=1,e.next=4,u(n,s,f,l);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",(r(e.t0),h(e.t0),void w(e.t0)));case 9:t(n),d({filePath:n}),w({filePath:n});case 10:case"end":return e.stop()}}),a,null,[[1,6]])}))),function(){return i.apply(this,arguments)}),fail:(a=c(e().mark((function r(){var a,i,p,v,m;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.t0=t,a=o,i=n,p=s,v=f,m=l,r.next=9,new Promise((function(t,n){wx.downloadFile({url:a,success:function(r){var a;200===r.statusCode?wx.getFileSystemManager().saveFile({tempFilePath:r.tempFilePath,filePath:i,success:(a=c(e().mark((function r(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=9;break}return e.prev=1,e.next=4,u(i,p,v,m);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",n(e.t0));case 9:t(i);case 10:case"end":return e.stop()}}),r,null,[[1,6]])}))),function(){return a.apply(this,arguments)})}):n("下载文件失败")},fail:function(e){n(e)}})}));case 9:r.t1=r.sent,(0,r.t0)(r.t1),d({filePath:n}),w({filePath:n}),r.next=18;break;case 15:r.prev=15,r.t2=r.catch(0),t(o),h(r.t2),w({filePath:o,error:r.t2});case 18:case"end":return r.stop()}}),r,null,[[0,15]])}))),function(){return a.apply(this,arguments)})})}));throw new Error("参数 options 对象未包含 url")}}}),require("md5")),a=t.n(r);function o(e,t,n,r,a,o,c){try{var u=e[o](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function u(e){o(c,r,a,u,i,"next",e)}function i(e){o(c,r,a,u,i,"throw",e)}u(void 0)}))}}function u(e,t,n,r){return new Promise((function(a,o){wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(c){wx.loadFontFace({family:t,source:'url("data:font/ttf;charset=utf-8;base64,'.concat(c.data,'")'),global:!0,desc:n,scopes:r,success:function(){a(e)},fail:function(){o("加载字体文件失败")}})},fail:function(){o("读取字体文件失败")}})}))}module.exports=n}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/load-file/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/mina-sentry/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/typeof");module.exports=function(e){var r={};function n(t){var o;return(r[t]||(o=r[t]={i:t,l:!1,exports:{}},e[t].call(o.exports,o,o.exports,n),o.l=!0,o)).exports}return n.m=e,n.c=r,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==t(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,r){e.__esModule=!0,e.init=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=(i=wx.getAccountInfoSync()).miniProgram.envVersion,i=i.miniProgram.version;n.default.config(t,{environment:e?"trial":r,release:i}).install(),o=!0},e.info=function(){var t;(t=console).info.apply(t,arguments),i.info.apply(a,arguments),a.info.apply(a,arguments)},e.error=function(){var t;(t=console).error.apply(t,arguments),o?(1===arguments.length?"string"==typeof arguments[0]||arguments[0]instanceof Error?n.default.captureException(new Error(arguments[0]),{level:"error"}):n.default.captureException(new Error(JSON.stringify(arguments[0])),{level:"error"}):n.default.captureException(new Error(JSON.stringify(arguments)),{level:"error"}),i.error.apply(a,arguments),a.log.apply(a,arguments)):console.error("请先调初始化函数！")};e=r(1);var n=(r=e)&&r.__esModule?r:{default:r},o=!1,i=wx.getRealtimeLogManager(),a=wx.getLogManager({level:0})},function(e,r,n){e.exports=function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}l=r[a]={exports:{}},e[a][0].call(l.exports,(function(t){return o(e[a][1][t]||t)}),l,l.exports,t,e,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){function n(t){this.name="RavenConfigError",this.message=t}n.prototype=new Error,e.exports=n.prototype.constructor=n},{}],2:[function(t,e,r){e.exports={wrapMethod:function(t,e,r){var n,o=t[e],i=t;e in t&&(n="warn"===e?"warning":e,t[e]=function(){var t=[].slice.call(arguments),a=""+t.join(" "),s={level:n,logger:"console",extra:{arguments:t}};"assert"===e?!1===t[0]&&(a="Assertion failed: "+(t.slice(1).join(" ")||"console.assert"),s.extra.arguments=t.slice(1),r)&&r(a,s):r&&r(a,s),o&&Function.apply.call(o,i,t)})}}},{}],3:[function(e,r,n){(function(n){var o=e("../vendor/TraceKit/tracekit"),i=e("../vendor/json-stringify-safe/stringify"),a=e("./configError"),s=e("./utils"),l=s.isError,c=s.isObject,u=e("./console").wrapMethod,f="source protocol user pass host port path".split(" "),p=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function h(){return+new Date}var g="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},d=g.document,_=g.navigator;function v(t,e){return x(e)?function(r){return e(r,t)}:e}function m(){for(var e in this._hasJSON=!("object"!=("undefined"==typeof JSON?"undefined":t(JSON))||!JSON.stringify),this._hasDocument=!y(d),this._hasNavigator=!y(_),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=g.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=h(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=g.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}m.prototype={VERSION:"0.0.7",debug:!1,TraceKit:o,config:function(t,e){var r,n=this;return n._globalServer?this._logDebug("error","Error: Raven has already been configured"):t&&(r=n._globalOptions,e&&E(e,(function(t,e){"tags"===t||"extra"===t||"user"===t?n._globalContext[t]=e:r[t]=e})),n.setDSN(t),r.ignoreErrors.push(/^Script error\.?$/),r.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),r.ignoreErrors=j(r.ignoreErrors),r.ignoreUrls=!!r.ignoreUrls.length&&j(r.ignoreUrls),r.whitelistUrls=!!r.whitelistUrls.length&&j(r.whitelistUrls),r.includePaths=j(r.includePaths),r.maxBreadcrumbs=Math.max(0,Math.min(r.maxBreadcrumbs||100,100)),e={xhr:!1,console:!0,dom:!1,location:!1},t=r.autoBreadcrumbs,"[object Object]"==={}.toString.call(t)?t=O(e,t):!1!==t&&(t=e),r.autoBreadcrumbs=t,e={tryCatch:!0},t=r.instrument,"[object Object]"==={}.toString.call(t)?t=O(e,t):!1!==t&&(t=e),r.instrument=t,o.collectWindowErrors=!!r.collectWindowErrors),n},install:function(){var t=this;return t.isSetup()&&!t._isRavenInstalled&&(o.report.subscribe((function(){t._handleOnErrorStackInfo.apply(t,arguments)})),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._drainPlugins(),this.installWeapp(),t._isRavenInstalled=!0),Error.stackTraceLimit=t._globalOptions.stackTraceLimit,this},installWeapp:function(){var t=this;wx.getSystemInfo({success:function(e){t.setTagsContext({device:e.model,system:e.system,WXversion:e.version,SDKversion:e.SDKVersion})}}),wx.getNetworkType({success:function(e){t.setTagsContext({network:e.networkType})}})},setDSN:function(t){var e=this,r=e._parseDSN(t),n=r.path.lastIndexOf("/"),o=r.path.substr(1,n);e._dsn=t,e._globalKey=r.user,e._globalSecret=r.pass&&r.pass.substr(1),e._globalProject=r.path.substr(n+1),e._globalServer=e._getGlobalServer(r),e._globalEndpoint=e._globalServer+"/"+o+"api/"+e._globalProject+"/store/",this._resetBackoff()},context:function(t,e,r){return x(t)&&(r=e||[],e=t,t=void 0),this.wrap(t,e).apply(this,r)},wrap:function(t,e,r){var n,o=this;if(y(e)&&!x(t))return t;if(x(t)&&(e=t,t=void 0),!x(e))return e;try{if(e.__raven__)return e;if(e.__raven_wrapper__)return e.__raven_wrapper__}catch(n){return e}function i(){var n=[],i=arguments.length,a=!t||!1!==t.deep;for(r&&x(r)&&r.apply(this,arguments);i--;)n[i]=a?o.wrap(t,arguments[i]):arguments[i];try{return e.apply(this,n)}catch(n){throw o._ignoreNextOnError(),o.captureException(n,t),n}}for(n in e)C(e,n)&&(i[n]=e[n]);return i.prototype=e.prototype,(e.__raven_wrapper__=i).__raven__=!0,i.__inner__=e,i},uninstall:function(){return o.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(t,e){var r;if("[object String]"===Object.prototype.toString.call(t)&&-1!==t.indexOf("thirdScriptError")&&(r=t.split("\n"),(t=new Error(r[1])).name=r[0],r.shift(),r.shift(),t.stack=r.join("\n")),!l(t))return this.captureMessage(t,O({trimHeadFrames:1,stacktrace:!0},e));this._lastCapturedException=t;try{var n=o.computeStackTrace(t);this._handleStackInfo(n,e)}catch(e){if(t!==e)throw e}return this},captureMessage:function(t,e){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)){var r=O({message:t+""},e=e||{});if(this._globalOptions.stacktrace||e&&e.stacktrace){try{throw new Error(t)}catch(t){n=t}n.name=null,e=O({fingerprint:t,trimHeadFrames:(e.trimHeadFrames||0)+1},e);t=o.computeStackTrace(n);var n=this._prepareFrames(t,e);r.stacktrace={frames:n.reverse()}}return this._send(r),this}},captureBreadcrumb:function(t){if(t=O({timestamp:h()/1e3},t),x(this._globalOptions.breadcrumbCallback)){var e=this._globalOptions.breadcrumbCallback(t);if(c(e)&&!k(e))t=e;else if(!1===e)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(t){var e=[].slice.call(arguments,1);return this._plugins.push([t,e]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(t){return this._globalContext.user=t,this},setExtraContext:function(t){return this._mergeContext("extra",t),this},setTagsContext:function(t){return this._mergeContext("tags",t),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(t){return this._globalOptions.environment=t,this},setRelease:function(t){return this._globalOptions.release=t,this},setDataCallback:function(t){var e=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=v(e,t),this},setBreadcrumbCallback:function(t){var e=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=v(e,t),this},setShouldSendCallback:function(t){var e=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=v(e,t),this},setTransport:function(t){return this._globalOptions.transport=t,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!(!this._hasJSON||!this._globalServer&&(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),1))},afterLoad:function(){var t=g.RavenConfig;t&&this.config(t.dsn,t.config).install()},_ignoreNextOnError:function(){var t=this;this._ignoreOnError+=1,setTimeout((function(){--t._ignoreOnError}))},_triggerEvent:function(t,e){var r,n;if(this._hasDocument){for(n in e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),d.createEvent?(r=d.createEvent("HTMLEvents")).initEvent(t,!0,!0):(r=d.createEventObject()).eventType=t,e)C(e,n)&&(r[n]=e[n]);if(d.createEvent)d.dispatchEvent(r);else try{d.fireEvent("on"+r.eventType.toLowerCase(),r)}catch(t){}}},_captureUrlChange:function(t,e){var r=T(this._location.href),n=T(e),o=T(t);this._lastHref=e,r.protocol===n.protocol&&r.host===n.host&&(e=n.relative),r.protocol===o.protocol&&r.host===o.host&&(t=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:e,from:t}})},_instrumentTryCatch:function(){var t=this,e=t._wrappedBuiltIns;function r(e){return function(r,n){for(var o=new Array(arguments.length),i=0;i<o.length;++i)o[i]=arguments[i];var a=o[0];return x(a)&&(o[0]=t.wrap(a)),e.apply?e.apply(this,o):e(o[0],o[1])}}I(g,"setTimeout",r,e),I(g,"setInterval",r,e),g.requestAnimationFrame&&I(g,"requestAnimationFrame",(function(e){return function(r){return e(t.wrap(r))}}),e)},_instrumentBreadcrumbs:function(){var t,e,r=this,n=this._globalOptions.autoBreadcrumbs,o=r._wrappedBuiltIns,i=!((i=g.chrome)&&i.app&&i.app.runtime)&&g.history&&history.pushState;n.location&&i&&(t=g.onpopstate,g.onpopstate=function(){var e=r._location.href;if(r._captureUrlChange(r._lastHref,e),t)return t.apply(this,arguments)},I(history,"pushState",(function(t){return function(){var e=2<arguments.length?arguments[2]:void 0;return e&&r._captureUrlChange(r._lastHref,e+""),t.apply(this,arguments)}}),o)),n.console&&console&&console.log&&(e=function(t,e){r.captureBreadcrumb({message:t,level:e.level,category:"console"})},E(["debug","info","warn","error","log"],(function(t,r){u(console,r,e)})))},_restoreBuiltIns:function(){for(;this._wrappedBuiltIns.length;){var t=(r=this._wrappedBuiltIns.shift())[0],e=r[1],r=r[2];t[e]=r}},_drainPlugins:function(){var t=this;E(this._plugins,(function(e,r){var n=r[0];r=r[1];n.apply(t,[t].concat(r))}))},_parseDSN:function(t){var e=p.exec(t),r={},n=7;try{for(;n--;)r[f[n]]=e[n]||""}catch(e){throw new a("Invalid DSN: "+t)}if(r.pass&&!this._globalOptions.allowSecretKey)throw new a("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return r},_getGlobalServer:function(t){var e="//"+t.host+(t.port?":"+t.port:"");return t.protocol?t.protocol+":"+e:e},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(t,e){var r=this._prepareFrames(t,e);this._triggerEvent("handle",{stackInfo:t,options:e}),this._processException(t.name,t.message,t.url,t.lineno,r,e)},_prepareFrames:function(t,e){var r=this,n=[];if(t.stack&&t.stack.length&&(E(t.stack,(function(e,o){(o=r._normalizeFrame(o,t.url))&&n.push(o)})),e)&&e.trimHeadFrames)for(var o=0;o<e.trimHeadFrames&&o<n.length;o++)n[o].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(t,e){var r={filename:t.url,lineno:t.line,colno:t.column,function:t.func||"?"};return t.url||(r.filename=e),r.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(r.filename)||/(Raven|TraceKit)\./.test(r.function)||/raven\.(min\.)?js$/.test(r.filename)),r},_processException:function(t,e,r,n,o,i){var a;this._globalOptions.ignoreErrors.test&&this._globalOptions.ignoreErrors.test(e)||(e+="",o&&o.length?(r=o[0].filename||r,o.reverse(),a={frames:o}):r&&(a={frames:[{filename:r,lineno:n,in_app:!0}]}),this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(r))||this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(r)||(o=O({exception:{values:[{type:t,value:e,stacktrace:a}]},culprit:r},i),this._send(o))},_trimPacket:function(t){var e=this._globalOptions.maxMessageLength,r=(t.message&&(t.message=S(t.message,e)),t.exception&&((r=t.exception.values[0]).value=S(r.value,e)),t.request);return r&&(r.url&&(r.url=S(r.url,this._globalOptions.maxUrlLength)),r.Referer)&&(r.Referer=S(r.Referer,this._globalOptions.maxUrlLength)),t.breadcrumbs&&t.breadcrumbs.values&&this._trimBreadcrumbs(t.breadcrumbs),t},_trimBreadcrumbs:function(t){for(var e,r,n,o=["to","from","url"],i=0;i<t.values.length;++i)if((r=t.values[i]).hasOwnProperty("data")&&c(r.data)&&(n=r.data,!Object.isFrozen||!Object.isFrozen(n))){for(var a=O({},r.data),s=0;s<o.length;++s)a.hasOwnProperty(e=o[s])&&a[e]&&(a[e]=S(a[e],this._globalOptions.maxUrlLength));t.values[i].data=a}},_getHttpData:function(){var t={headers:{"User-Agent":"weapp"}},e=getCurrentPages();return e&&e.length&&(t.url=e[e.length-1].route),t},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&h()-this._backoffStart<this._backoffDuration},_isRepeatData:function(t){var e=this._lastData;return!(!e||t.message!==e.message||t.culprit!==e.culprit)&&(t.stacktrace||e.stacktrace?U(t.stacktrace,e.stacktrace):!t.exception&&!e.exception||!(!!(t=t.exception)^!!(e=e.exception))&&(t=t.values[0],e=e.values[0],t.type===e.type)&&t.value===e.value&&U(t.stacktrace,e.stacktrace))},_setBackoffState:function(t){if(!this._shouldBackoff()){var e,r=t.status;if(400===r||401===r||429===r){try{e=t.getResponseHeader("Retry-After"),e=1e3*parseInt(e,10)}catch(t){}this._backoffDuration=e||2*this._backoffDuration||1e3,this._backoffStart=h()}}},_send:function(t){var e=this._globalOptions,r={project:this._globalProject,logger:e.logger,platform:"javascript"},n=this._getHttpData();n&&(r.request=n),t.trimHeadFrames&&delete t.trimHeadFrames,(t=O(r,t)).tags=O(O({},this._globalContext.tags),t.tags),t.extra=O(O({},this._globalContext.extra),t.extra),t.extra["session:duration"]=h()-this._startTime,this._breadcrumbs&&0<this._breadcrumbs.length&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),k(t.tags)&&delete t.tags,this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),!(t=x(e.dataCallback)&&e.dataCallback(t)||t)||k(t)||x(e.shouldSendCallback)&&!e.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):("number"!=typeof e.sampleRate||Math.random()<e.sampleRate)&&this._sendProcessedPayload(t))},_getUuid:D,_sendProcessedPayload:function(t,e){var r,n,o,i=this,a=this._globalOptions;this.isSetup()&&(t=this._trimPacket(t),!this._globalOptions.allowDuplicates&&this._isRepeatData(t)?this._logDebug("warn","Raven dropped repeat event: ",t):(this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t),r={sentry_version:"7",sentry_client:"raven-weapp/"+this.VERSION,sentry_key:this._globalKey},this._globalSecret&&(r.sentry_secret=this._globalSecret),n=t.exception&&t.exception.values[0],this.captureBreadcrumb({category:"sentry",message:n?(n.type?n.type+": ":"")+n.value:t.message,event_id:t.event_id,level:t.level||"error"}),o=this._globalEndpoint,(a.transport||this._makeRequest).call(this,{url:o,auth:r,data:t,options:a,onSuccess:function(){i._resetBackoff(),i._triggerEvent("success",{data:t,src:o}),e&&e()},onError:function(r){i._logDebug("error","Raven transport failed to send: ",r),r.request&&i._setBackoffState(r.request),i._triggerEvent("failure",{data:t,src:o}),r=r||new Error("Raven send failed (no additional details provided)"),e&&e(r)}})))},_makeRequest:function(t){"release"!==this._globalOptions.environment&&"trial"!==this._globalOptions.environment||wx.request({url:t.url+"?"+R(t.auth),method:"POST",header:{"content-type":"text/plain;charset=UTF-8"},data:i(t.data),success:function(){t.onSuccess&&t.onSuccess()},fail:function(e){t.onError&&t.onError(e)}})},_logDebug:function(t){this._originalConsoleMethods[t]&&this.debug&&Function.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(t,e){y(e)?delete this._globalContext[t]:this._globalContext[t]=O(this._globalContext[t]||{},e)}};var b=Object.prototype;function y(t){return void 0===t}function x(t){return"function"==typeof t}function w(t){return"[object String]"===b.toString.call(t)}function k(t){for(var e in t)return!1;return!0}function E(t,e){var r,n;if(y(t.length))for(r in t)C(t,r)&&e.call(null,r,t[r]);else if(n=t.length)for(r=0;r<n;r++)e.call(null,r,t[r])}function O(t,e){return e&&E(e,(function(e,r){t[e]=r})),t}function S(t,e){return!e||t.length<=e?t:t.substr(0,e)+"…"}function C(t,e){return b.hasOwnProperty.call(t,e)}function j(t){for(var e,r=[],n=0,o=t.length;n<o;n++)w(e=t[n])?r.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&r.push(e.source);return new RegExp(r.join("|"),"i")}function R(t){var e=[];return E(t,(function(t,r){e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))})),e.join("&")}function T(t){var e,r;return(t=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/))?(e=t[6]||"",r=t[8]||"",{protocol:t[2],host:t[4],path:t[5],relative:t[5]+e+r}):{}}function D(){var t,e=g.crypto||g.msCrypto;return!y(e)&&e.getRandomValues?(t=new Uint16Array(8),e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768,(e=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e})(t[0])+e(t[1])+e(t[2])+e(t[3])+e(t[4])+e(t[5])+e(t[6])+e(t[7])):"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function U(t,e){if(!!t^!!e)return!1;var r,n,o=t.frames,i=e.frames;if(o.length!==i.length)return!1;for(var a=0;a<o.length;a++)if(r=o[a],n=i[a],r.filename!==n.filename||r.lineno!==n.lineno||r.colno!==n.colno||r.function!==n.function)return!1;return!0}function I(t,e,r,n){var o=t[e];t[e]=r(o),n&&n.push([t,e,o])}"undefined"!=typeof __DEV__&&__DEV__&&(m.utils={isUndefined:y,isFunction:x,isString:w,isObject:c,isEmptyObject:k,isError:l,each:E,objectMerge:O,truncate:S,hasKey:C,joinRegExp:j,urlencode:R,uuid4:D,parseUrl:T,fill:I}),m.prototype.setUser=m.prototype.setUserContext,m.prototype.setReleaseContext=m.prototype.setRelease,r.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../vendor/TraceKit/tracekit":6,"../vendor/json-stringify-safe/stringify":7,"./configError":1,"./console":2,"./utils":5}],4:[function(t,e,r){(function(r){var n=t("./raven"),o="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},i=o.Raven,a=new n;a.noConflict=function(){return o.Raven=i,a},a.afterLoad(),e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./raven":3}],5:[function(e,r,n){r.exports={isObject:function(e){return"object"==t(e)&&null!==e},isError:function(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},wrappedCallback:function(t){return function(e,r){return e=t(e)||e,r&&r(e)||e}}}},{}],6:[function(t,e,r){(function(r){function n(){var t=getCurrentPages();return t&&t.length?t[t.length-1].route:""}var o,i,a,s,l,c,u=t("../../src/utils"),f={collectWindowErrors:!0,debug:!1},p="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},h=[].slice,g=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function d(t,e){var r=null;if(!e||f.collectWindowErrors){for(var n in a)if(a.hasOwnProperty(n))try{a[n].apply(null,[t].concat(h.call(arguments,2)))}catch(t){r=t}if(r)throw r}}function _(t,e,r,i,a){return c?(f.computeStackTrace.augmentStackTraceWithInitialElement(c,e,r,t),v()):a&&u.isError(a)?d(f.computeStackTrace(a),!0):(a={url:e,line:r,column:i},e=void 0,"[object String]"==={}.toString.call(r=t)&&(i=t.match(g))&&(e=i[1],r=i[2]),a.func="?",d({name:e,message:r,url:n(),stack:[a]},!0)),!!o&&o.apply(this,arguments)}function v(){var t=c,e=s;l=c=s=null,d.apply(null,[t,!1].concat(e))}function m(t,e){var r=h.call(arguments,1);if(c){if(l===t)return;v()}var n=f.computeStackTrace(t);if(c=n,l=t,s=r,setTimeout((function(){l===t&&v()}),n.incomplete?2e3:0),!1!==e)throw t}function b(t){if(void 0!==t.stack&&t.stack){for(var e,r,o,i=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/\((\S*)(?::(\d+))(?::(\d+))\)/,s=t.stack.split("\n"),l=[],c=(/^(.*) is undefined$/.exec(t.message),0),u=s.length;c<u;++c)(e=i.exec(s[c]))&&(o=e[2]&&0===e[2].indexOf("native"),e[2]&&0===e[2].indexOf("eval")&&(r=a.exec(e[2]))&&(e[2]=r[1],e[3]=r[2],e[4]=r[3]),!(r={url:o?null:e[2],func:e[1]||"?",args:o?[e[2]]:[],line:e[3]?+e[3]:null,column:e[4]?+e[4]:null}).func&&r.line&&(r.func="?"),l.push(r));return l.length?{name:t.name,message:t.message,url:n(),stack:l}:null}}function y(t,e,r,n){if((e={url:e,line:r}).url&&e.line){if(t.incomplete=!1,e.func||(e.func="?"),0<t.stack.length&&t.stack[0].url===e.url){if(t.stack[0].line===e.line)return!1;if(!t.stack[0].line&&t.stack[0].func===e.func)return t.stack[0].line=e.line,!1}return t.stack.unshift(e),t.partial=!0}return!(t.incomplete=!0)}function x(t,e){for(var r,o,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],s={},l=!1,c=x.caller;c&&!l;c=c.caller)if(c!==w&&c!==f.report){if(o={url:null,func:"?",line:null,column:null},c.name?o.func=c.name:(r=i.exec(c.toString()))&&(o.func=r[1]),void 0===o.func)try{o.func=r.input.substring(0,r.input.indexOf("{"))}catch(t){}s[""+c]?l=!0:s[""+c]=!0,a.push(o)}return e&&a.splice(0,e),y(e={name:t.name,message:t.message,url:n(),stack:a},t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),e}function w(t,e){var r=null;e=null==e?0:+e;try{if(r=b(t))return r}catch(t){if(f.debug)throw t}try{if(r=x(t,e+1))return r}catch(t){if(f.debug)throw t}return{name:t.name,message:t.message,url:n()}}f.report=(a=[],c=l=s=null,m.subscribe=function(t){i||(o=p.onerror,p.onerror=_,i=!0),a.push(t)},m.unsubscribe=function(t){for(var e=a.length-1;0<=e;--e)a[e]===t&&a.splice(e,1)},m.uninstall=function(){i&&(p.onerror=o,i=!1,o=void 0),a=[]},m),f.computeStackTrace=(w.augmentStackTraceWithInitialElement=y,w.computeStackTraceFromStackProp=b,w),e.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../src/utils":5}],7:[function(t,e,r){function n(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}function o(t,e){var r=[],o=[];return null==e&&(e=function(t,e){return r[0]===e?"[Circular ~]":"[Circular ~."+o.slice(0,n(r,e)).join(".")+"]"}),function(i,a){var s;return 0<r.length?(~(s=n(r,this))?r.splice(s+1):r.push(this),~s?o.splice(s,1/0,i):o.push(i),~n(r,a)&&(a=e.call(this,i,a))):r.push(a),null==t?a:t.call(this,i,a)}}(e.exports=function(t,e,r,n){return JSON.stringify(t,o(e,n),r)}).getSerialize=o},{}]},{},[4])(4)}]);
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/mina-sentry/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/sign/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../@babel/runtime/helpers/typeof");!function(){var r={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},d:function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{initSign:function(){return function(e,r){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];n=r,o=e,i=t}},withSign:function(){return function(e){var r,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(n&&o)return r=t||n,b(b({},e),{},{header:b(b({},e.header),function(e){var r=(e.method||"get").toLowerCase(),t=e.url.indexOf("?"),n=e.url;-1<t&&(n=e.url.slice(0,t)),t="",t=d(t=("get"===r?function(e){return b(b({},p(e)),c.parse(c.stringify(e.data||{},{indices:!1})))}:p)(e));e="get"===r||l().isEmpty(e.data)?"":a()(d(e.data)).toString();var i=Date.now();return{timestamp:i,sign:r=f()("".concat(r,":").concat(n,":").concat(t,":").concat(e,":").concat(i,":").concat(o,":1")).toString().toLowerCase()}}(b(b({},e),{},{url:function(e){var t;return i?-1!==(t=e.indexOf("/api"))?e.slice(t+4):e:e.slice(r.length)}(e.url)})))});console.error("请先调用 initSign，初始化 host、token")}}});var n,o,i,c=require("qs"),u=require("md5"),a=r.n(u),f=(u=require("sha1"),r.n(u)),l=(u=require("lodash"),r.n(u));function s(e,r){var t,n=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)),n}function b(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var o,i;o=r,i=n[t=t],(t=function(r){return r=function(r,t){if("object"!=e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0===n)return String(r);if(n=n.call(r,t),"object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(r,"string"),"symbol"==e(r)?r:String(r)}(t))in o?Object.defineProperty(o,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function p(e){var r=e.url.indexOf("?");return-1<r?b({},c.parse(e.url.slice(r),{ignoreQueryPrefix:!0})):{}}function d(r){return l().isEmpty(r)?"":l().toPairs(r).sort((function(e,r){return e[0]>r[0]?1:-1})).map((function(r){var t=r[0],n=r[1];switch(e(n=(n=l().isArray(n)?"array":n)instanceof Object?"object":n)){case"string":case"boolean":case"number":n="".concat(n);break;default:n=""}return"".concat(t,"=").concat(n)})).join("&")}module.exports=t}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/sign/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/system-info/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../@babel/runtime/helpers/Arrayincludes");var e=require("../../../@babel/runtime/helpers/typeof");!function(){var t={d:function(e,r){for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function i(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)),i}function o(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?i(Object(o),!0).forEach((function(r){var i,n;i=t,n=o[r=r],(r=function(t){return t=function(t,r){if("object"!=e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if(i=i.call(t,r),"object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"==e(t)?t:String(t)}(r))in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}t.r(r),t.d(r,{getSysInfo:function(){return function(){var e,t,r=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=wx.getEnterOptionsSync();return n.isReady&&!n.isEmbedded&&"embedded"!==i.apiCategory||(t=!!((e=wx.getSystemInfoSync()).platform.toLowerCase().search("ios")+1)||!!(e.platform.toLowerCase().search("devtools")+1),(n=o(o(o({},{navBarHeight:0,isReady:!1,isCustomNavBar:!0,isEmbedded:!1,isPromiseApi:!0,IPX:!1}),e),{},{statusBarHeight:function(e){return["mac","windows"].includes(e.platform)?0:"embedded"!==wx.getEnterOptionsSync().apiCategory?e.statusBarHeight||20:e.statusBarHeight}(e)})).isCustomNavBar=r,n.navBarHeight=n.isCustomNavBar?n.statusBarHeight+44:0,n.iOS=t,n.IPX=40<n.statusBarHeight&&t,n.android="android"===n.platform,n.isReady=!0,n.isEmbedded="embedded"===i.apiCategory),n}}});var n=o({},{navBarHeight:0,isReady:!1,isCustomNavBar:!0,isEmbedded:!1,isPromiseApi:!0,IPX:!1});module.exports=r}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/system-info/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/upgrade-version/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";!function(){var e={d:function(n,t){for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function t(){return 1154===wx.getLaunchOptionsSync().scene}function r(e){var n=wx.getUpdateManager();n.onCheckForUpdate((function(t){t.hasUpdate?n.onUpdateReady((function(){n.applyUpdate()})):e&&wx.showToast({title:"已是最新版",icon:"none"})}))}e.r(n),e.d(n,{upgradeForce:function(){return function(e){t()||r(!e)}},upgradeOnApp:function(){return function(){var e;t()||(e=wx.getUpdateManager()).onUpdateReady((function(){wx.showModal({title:"更新提示",content:"发现新版本，是否更新",success:function(n){n.confirm&&e.applyUpdate()}})}))}},upgradeOnPage:function(){return function(e,n){var o;t()||e&&(o=e[o=(o=getCurrentPages())[o.length-1].route]||e["**"])&&n&&0<function(e,n){e=e.split("."),n=n.split(".");for(var t=Math.max(e.length,n.length);e.length<t;)e.push("0");for(;n.length<t;)n.push("0");for(var r=0;r<t;r++){var o=parseInt(e[r]),a=parseInt(n[r]);if(a<o)return 1;if(o<a)return-1}return 0}(o,n)&&r()}}}),module.exports=n}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/upgrade-version/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/@mina-modules/wxapp-ga/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/typeof");module.exports=function(){function e(e,i){var n,s;return o[e]?(o[e].status||((n=o[e].m)._exports=n._tempexports,(s=Object.getOwnPropertyDescriptor(n,"exports"))&&s.configurable&&Object.defineProperty(n,"exports",{set:function(e){"object"==t(e)&&e!==n._exports&&(n._exports.__proto__=e.__proto__,Object.keys(e).forEach((function(t){n._exports[t]=e[t]}))),n._tempexports=e},get:function(){return n._tempexports}}),o[e].status=1,o[e].func(o[e].req,n,n.exports)),o[e].m.exports):require(i)}var i,n,o={};return i=function(e,i,n){function o(t){this.app=t,this.systemInfo=x(),this.trackers=[],this.appName="Mini Program",this.appVersion="unknow",this.log=!0;t="_ga_cid";var e,i=((i=wx.getStorageSync(t)||!1)||(i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),wx.setStorageSync(t,i)),this.cid=i,this.userAgent=(e=!(i=-1<(t=this.systemInfo).system.toLowerCase().indexOf("android"))&&-1==t.model.toLowerCase().indexOf("iphone"),i?"Mozilla/5.0 (Linux; U; "+t.system+"; "+t.model+" Build/000000) AppleWebKit/537.36 (KHTML, like Gecko)Version/4.0 Chrome/49.0.0.0 Mobile Safari/537.36 MicroMessenger/"+t.version:e?"Mozilla/5.0 (iPad; CPU OS "+t.system.replace(/^.*?([0-9.]+).*?$/,(function(t,e){return e})).replace(/\./g,"_")+" like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/10A406 MicroMessenger/"+t.version:"Mozilla/5.0 (iPhone; CPU iPhone OS "+t.system.replace(/^.*?([0-9.]+).*?$/,(function(t,e){return e})).replace(/\./g,"_")+" like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 MicroMessenger/"+t.version),this.systemInfo.pixelRatio);this.sr=function(t,e,i){return-1<i.system.toLowerCase().indexOf("android")||i.model.toLowerCase().indexOf("iphone"),[t,e].join("x")}(Math.round(this.systemInfo.windowWidth*i),Math.round(this.systemInfo.windowHeight*i),this.systemInfo),this.vp=[this.systemInfo.windowWidth,this.systemInfo.windowHeight].map((function(t){return t})).join("x")}function s(t){return String(t).replace(/^&/,"")}function r(t,e){this.ga=t,this.trackerServer="https://www.google-analytics.com",this.hit={tid:e||"",cd:""},this.next_hit={},this.sending=!1,this.send_queue=[]}function p(){this.hit={t:"screenview",ni:0},this.custom_dimensions=[],this.custom_metrics=[],this.next_impression_index=1,this.impression_product_list={},this.next_product_index=1,this.next_promotion_index=1}function u(t,e,i){t.hit[e]==i&&delete t.hit[e]}function h(){p.call(this),this.setHitType("screenview")}function c(){p.call(this),this.setHitType("event"),this.setAll({ec:"",ea:"",el:"",ev:0})}function a(){p.call(this),this.setHitType("social"),this.setAll({sn:"",sa:"",st:""})}function f(){p.call(this),this.setHitType("exception"),this.setAll({exd:"",exf:1})}function l(){p.call(this),this.setHitType("timing"),this.setAll({utc:"",utv:"",utt:0,utl:""})}function d(){this.hit={}}function m(){this.hit={}}function y(t){this.hit={pa:t}}function _(){this.params={},this.params_map={utm_source:"cs",utm_medium:"cm",utm_term:"ck",utm_content:"cc",utm_campaign:"cn",gclid:"gclid"}}function g(t){var e,i=_.parseFromUrl(t),n=i.params_map,o={};for(e in i.params)o[n[e]]=i.params[e];return o}o.prototype.setAppName=function(t){return this.appName=t,this},o.prototype.setAppVersion=function(t){return this.appVersion=t,this},o.prototype.getDefaultTracker=function(){return this.trackers[0]},o.prototype.newTracker=function(t){return t=new r(this,t),this.trackers.push(t),t},o.prototype.setLog=function(t){return this.log=!!t,this},r.prototype.setTrackerServer=function(t){return this.trackerServer=t,this},r.prototype.get=function(t){return this.hit[s(t)]},r.prototype.set=function(t,e){return this.hit[s(t)]=e,this},r.prototype.setAnonymizeIp=function(t){return this.set("aip",t?1:0)},r.prototype.setAppId=function(t){return this.set("aid",t)},r.prototype.setAppInstallerId=function(t){return this.set("aiid",t)},r.prototype.setAppName=function(t){return this.set("an",t)},r.prototype.setAppVersion=function(t){return this.set("av",t)},r.prototype.setCampaignParamsOnNextHit=function(t){var e,i=g(t);for(e in this.next_hit={},i)this.next_hit[e]=i[e];return this},r.prototype.setClientId=function(t){return this.set("cid",t)},r.prototype.setEncoding=function(t){return this.set("de",t)},r.prototype.setLanguage=function(t){return this.set("ul",t)},r.prototype.setLocation=function(t){return this.set("geoid",t)},r.prototype.setScreenColors=function(t){return this.set("sd",t)},r.prototype.setScreenName=function(t){return this.set("cd",t)},r.prototype.setScreenResolution=function(t,e){return this.set("sr",[t,e].join("x"))},r.prototype.setViewportSize=function(t){return this.set("vp",t)},r.prototype.send=function(t){return this.send_queue_push(this.ga,t),this},r.prototype.send_queue_push=function(t,e){var i,n=this,o={v:1,cid:t.cid,ds:"app",ul:t.systemInfo.language,de:"UTF-8",sd:"24-bit",je:0,an:t.appName,av:t.appVersion,sr:t.sr,vp:t.vp,ua:t.userAgent};for(i in n.hit)o[i]=n.hit[i];for(i in n.next_hit)o[i]=n.next_hit[i];for(i in n.next_hit={},e)o[i]=e[i];this.ga.log&&console.log(["ga.queue.push",o]),this.send_queue.push([o,new Date]),this._do_send()},r.prototype._do_send=function(){if(!this.sending)if(this.send_queue.length<=0)this.sending=!1;else{this.sending=!0;for(var t=this,e=[];0<this.send_queue.length;){var i=(n=this.send_queue[0])[0],n=(i.qt=(new Date).getTime()-n[1].getTime(),i.z=Math.floor(2147483648*Math.random()),function(t){var e,i=[];for(e in t)i.push([encodeURIComponent(e),encodeURIComponent(t[e])].join("="));return i.join("&")}(i)),o=e.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0),s=n.length;if((16384<o+s||8192<s||20<=e.length)&&0<e.length)break;e.push(n),this.send_queue.shift(),this.ga.log&&console.log(["ga.queue.presend["+(e.length-1)+"]",i])}var r=e.join("\r\n"),p=this.trackerServer+"/collect";1<e.length?(this.ga.log&&console.log(["ga.queue.send.batch",r]),p=this.trackerServer+"/batch"):this.ga.log&&console.log(["ga.queue.send.collect",r]),wx.request({url:p,data:r,method:"POST",header:{"content-type":"text/plain"},enableHttp2:!0,enableQuic:!0,success:function(e){t.ga.log&&console.log(["ga:success",e])},fail:function(e){t.ga.log&&console.log(["ga:failed",e])},complete:function(){t.sending=!1,setTimeout((function(){t._do_send()}),0)}})}},p.prototype.get=function(t){return this.hit[s(t)]},p.prototype.set=function(t,e){return this.hit[s(t)]=e,this},p.prototype.setAll=function(t){for(var e in t)this.set(e,t[e]);return this},p.prototype.addImpression=function(t,e){this.impression_product_list[e]||(this.impression_product_list[e]=[this.next_impression_index,1],this.set("il"+this.next_impression_index+"nm",e),this.next_impression_index++);var i,n=this.impression_product_list[e][0],o=this.impression_product_list[e][1];for(i in t.hit)this.set("il"+n+"pi"+o+i,t.hit[i]);return this.impression_product_list[e][1]=o+1,this},p.prototype.addProduct=function(t){var e,i=this.next_product_index;for(e in t.hit)this.set("pr"+i+e,t.hit[e]);return this.next_product_index++,this},p.prototype.addPromotion=function(t){var e,i=this.next_promotion_index;for(e in t.hit)this.set("promo"+i+e,t.hit[e]);return this.next_promotion_index++,this},p.prototype.setProductAction=function(t){for(var e in t.hit)this.set(e,t.hit[e]);return this},p.prototype.setPromotionAction=function(t){return this.set("promoa",t)},p.prototype.setCampaignParamsFromUrl=function(t){return t=g(t),this.setAll(t)},p.prototype.setCustomDimension=function(t,e){return this.custom_dimensions.push([t,e]),this},p.prototype.setCustomMetric=function(t,e){return this.custom_metrics.push([t,e]),this},p.prototype.setNewSession=function(){return this.hit.sc="start",this},p.prototype.setEndSession=function(){return this.hit.sc="end",this},p.prototype.setNonInteraction=function(t){return this.hit.ni=t?1:0,this},p.prototype.setHitType=function(t){return this.hit.t=t,this},p.prototype.build=function(){var t,e=this,i=[];for(t in 0==this.hit.ni&&i.push("ni"),this.hit)t.match(/^(cd|cm)\d+$/)&&i.push(t);i.map((function(t){delete e.hit[t]}));for(var n=this.custom_dimensions,o=this.custom_metrics,s=0;s<n.length;s++){var r=n[s];this.hit["cd"+r[0]]=r[1]}for(s=0;s<o.length;s++){var p=o[s];this.hit["cm"+p[0]]=p[1]}return this.hit},(h.prototype=Object.create(p.prototype)).constructor=h,((c.prototype=Object.create(p.prototype)).constructor=c).prototype.setCategory=function(t){return this.set("ec",t)},c.prototype.setAction=function(t){return this.set("ea",t)},c.prototype.setLabel=function(t){return this.set("el",t)},c.prototype.setValue=function(t){return this.set("ev",t)},c.prototype.build=function(){return u(this,"ev",0),u(this,"el",""),p.prototype.build.apply(this,arguments)},((a.prototype=Object.create(p.prototype)).constructor=a).prototype.setNetwork=function(t){return this.set("sn",t)},a.prototype.setAction=function(t){return this.set("sa",t)},a.prototype.setTarget=function(t){return this.set("st",t)},a.prototype.build=function(){return u(this,"st",""),p.prototype.build.apply(this,arguments)},((f.prototype=Object.create(p.prototype)).constructor=f).prototype.setDescription=function(t){return this.set("exd",t)},f.prototype.setFatal=function(t){return this.set("exf",t?1:0)},((l.prototype=Object.create(p.prototype)).constructor=l).prototype.setCategory=function(t){return this.set("utc",t)},l.prototype.setVariable=function(t){return this.set("utv",t)},l.prototype.setValue=function(t){return this.set("utt",t)},l.prototype.setLabel=function(t){return this.set("utl",t)},l.prototype.build=function(){return u(this,"utl",""),p.prototype.build.apply(this,arguments)},d.prototype.setBrand=function(t){return this.hit.br=t,this},d.prototype.setCategory=function(t){return this.hit.ca=t,this},d.prototype.setCouponCode=function(t){return this.hit.cc=t,this},d.prototype.setCustomDimension=function(t,e){return this.hit["cd"+t]=e,this},d.prototype.setCustomMetric=function(t,e){return this.hit["cm"+t]=e,this},d.prototype.setId=function(t){return this.hit.id=t,this},d.prototype.setName=function(t){return this.hit.nm=t,this},d.prototype.setPosition=function(t){return this.hit.ps=t,this},d.prototype.setPrice=function(t){return this.hit.pr=t,this},d.prototype.setQuantity=function(t){return this.hit.qt=t,this},d.prototype.setVariant=function(t){return this.hit.va=t,this},m.ACTION_CLICK="click",m.ACTION_VIEW="view",m.prototype.setCreative=function(t){return this.hit.cr=t,this},m.prototype.setId=function(t){return this.hit.id=t,this},m.prototype.setName=function(t){return this.hit.nm=t,this},m.prototype.setPosition=function(t){return this.hit.ps=t,this},y.ACTION_ADD="add",y.ACTION_CHECKOUT="checkout",y.ACTION_CHECKOUT_OPTION="checkout_option",y.ACTION_CLICK="click",y.ACTION_DETAIL="detail",y.ACTION_PURCHASE="purchase",y.ACTION_REFUND="refund",y.ACTION_REMOVE="remove",y.prototype.setCheckoutOptions=function(t){return this.hit.col=t,this},y.prototype.setCheckoutStep=function(t){return this.hit.cos=t,this},y.prototype.setProductActionList=function(t){return this.hit.pal=t,this},y.prototype.setProductListSource=function(t){return this.hit.pls=t,this},y.prototype.setTransactionAffiliation=function(t){return this.hit.ta=t,this},y.prototype.setTransactionCouponCode=function(t){return this.hit.tcc=t,this},y.prototype.setTransactionId=function(t){return this.hit.ti=t,this},y.prototype.setTransactionRevenue=function(t){return this.hit.tr=t,this},y.prototype.setTransactionShipping=function(t){return this.hit.ts=t,this},y.prototype.setTransactionTax=function(t){return this.hit.tt=t,this},_.prototype.set=function(t,e){return t in this.params_map&&(this.params[t]=e),this},_.prototype.toUrl=function(){var t,e=[];for(t in this.params)e.push([encodeURIComponent(t),encodeURIComponent(this.params[t])].join("="));return"https://example.com?"+e.join("&")},_.parseFromPageOptions=function(t,e){t=t||{},e=e||{};var i,n=new _;for(i in t){var o=t[i];!(i=i in e?e[i]:i).match(/^utm_/)&&"gclid"!=i||n.set(i,o)}return n},_.buildFromWeappScene=function(t){var e={1001:"发现栏小程序主入口",1005:"顶部搜索框的搜索结果页",1006:"发现栏小程序主入口搜索框的搜索结果页",1007:"单人聊天会话中的小程序消息卡片",1008:"群聊会话中的小程序消息卡片",1011:"扫描二维码",1012:"长按图片识别二维码",1013:"手机相册选取二维码",1014:"小程序模版消息",1017:"前往体验版的入口页",1019:"微信钱包",1020:"公众号profile页相关小程序列表",1022:"聊天顶部置顶小程序入口",1023:"安卓系统桌面图标",1024:"小程序profile页",1025:"扫描一维码",1026:"附近小程序列表",1027:"顶部搜索框搜索结果页“使用过的小程序”列表",1028:"我的卡包",1029:"卡券详情页",1030:"自动化测试下打开小程序",1031:"长按图片识别一维码",1032:"手机相册选取一维码",1034:"微信支付完成页",1035:"公众号自定义菜单",1036:"App 分享消息卡片",1037:"小程序打开小程序",1038:"从另一个小程序返回",1039:"摇电视",1042:"添加好友搜索框的搜索结果页",1043:"公众号模板消息",1044:"带shareTicket的小程序消息卡片",1045:"朋友圈广告",1046:"朋友圈广告详情页",1047:"扫描小程序码",1048:"长按图片识别小程序码",1049:"手机相册选取小程序码",1052:"卡券的适用门店列表",1053:"搜一搜的结果页",1054:"顶部搜索框小程序快捷入口",1056:"音乐播放器菜单",1057:"钱包中的银行卡详情页",1058:"公众号文章",1059:"体验版小程序绑定邀请页",1064:"微信连Wifi状态栏",1067:"公众号文章广告",1068:"附近小程序列表广告",1069:"移动应用",1071:"钱包中的银行卡列表页",1072:"二维码收款页面",1073:"客服消息列表下发的小程序消息卡片",1074:"公众号会话下发的小程序消息卡片",1077:"摇周边",1078:"连Wi-Fi成功页",1079:"微信游戏中心",1081:"客服消息下发的文字链",1082:"公众号会话下发的文字链",1084:"朋友圈广告原生页",1089:"微信聊天主界面下拉",1090:"长按小程序右上角菜单唤出最近使用历史",1091:"公众号文章商品卡片",1092:"城市服务入口",1095:"小程序广告组件",1096:"聊天记录",1097:"微信支付签约页",1099:"页面内嵌插件",1102:"公众号 profile 页服务预览",1103:"发现栏小程序主入口，「我的小程序」列表（基础库2.2.4版本起废弃）",1104:"微信聊天主界面下拉，「我的小程序」栏（基础库2.2.4版本起废弃）",1106:"聊天主界面下拉，从顶部搜索结果页，打开小程序",1107:"订阅消息，打开小程序",1113:"安卓手机负一屏，打开小程序（三星）",1114:"安卓手机侧边栏，打开小程序（三星）",1124:"扫“一物一码”打开小程序",1125:"长按图片识别“一物一码”",1126:"扫描手机相册中选取的“一物一码”",1129:"微信爬虫访问",1131:"浮窗打开小程序",1133:"硬件设备打开小程序",1135:"小程序 profile 页其他小程序列表，打开小程序",1146:"地理位置信息打开出行类小程序",1148:"卡包-交通卡，打开小程序",1150:"扫一扫商品条码结果页打开小程序",1153:"“识物”结果页打开小程序",1154:"朋友圈内打开“单页模式”",1155:"“单页模式”打开小程序",1158:"群工具打开小程序",1167:"H5 通过开放标签打开小程序",1169:"发现栏小程序主入口，各个生活服务入口（例如快递服务、出行服务等）"},i=new _;return t in e?(i.set("utm_source","小程序场景"),i.set("utm_medium",t+":"+e[t])):t&&(i.set("utm_source","小程序场景"),i.set("utm_medium",t+":")),i},_.parseFromUrl=function(t){t=t.replace(/^[^?]+\?/,"");var e=new _,i=e.params_map;return t.split("&").map((function(t){t=t.split("=");var n=decodeURIComponent(t[0]);2==t.length&&""!==t[1]&&i[n]&&(t=decodeURIComponent(t[1]),e.set(n,t))})),e};var x=function(){return"object"==("undefined"==typeof wx?"undefined":t(wx))&&"function"==typeof wx.getSystemInfoSync?wx.getSystemInfoSync():{brand:"unknow",screenWidth:0,screenHeight:0,windowWidth:0,windowHeight:0,pixelRatio:1,language:"zh_CN",system:"unknow",model:"unknow",version:"unknow",platform:"unknow",fontSizeSetting:0,SDKVersion:"unknow"}};i.exports={GoogleAnalytics:{getInstance:function(t){return(t=t||{}).defaultGoogleAnalyticsInstance||(t.defaultGoogleAnalyticsInstance=new o(t)),t.defaultGoogleAnalyticsInstance}},HitBuilders:{HitBuilder:p,ScreenViewBuilder:h,EventBuilder:c,SocialBuilder:a,ExceptionBuilder:f,TimingBuilder:l},Product:d,ProductAction:y,Promotion:m,CampaignParams:_}},n=function(t){return e({}[t],t)},o[1706173694346]={status:0,func:i,req:n,m:{exports:{},_tempexports:{}}},e(1706173694346)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/@mina-modules/wxapp-ga/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/charenc/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t,e,r=require("../../@babel/runtime/helpers/typeof");module.exports=(t={},e=function(e,o){if(!t[e])return require(o);if(!t[e].status){var n=t[e].m;n._exports=n._tempexports;var s=Object.getOwnPropertyDescriptor(n,"exports");s&&s.configurable&&Object.defineProperty(n,"exports",{set:function(t){"object"===r(t)&&t!==n._exports&&(n._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(e){n._exports[e]=t[e]}))),n._tempexports=t},get:function(){return n._tempexports}}),t[e].status=1,t[e].func(t[e].req,n,n.exports)}return t[e].m.exports},function(e,r,o){t[e]={status:0,func:r,req:o,m:{exports:{},_tempexports:{}}}}(1706173694347,(function(t,e,r){var o={utf8:{stringToBytes:function(t){return o.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(o.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};e.exports=o}),(function(t){return e({}[t],t)})),e(1706173694347));
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/charenc/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/crypt/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var r,t,e=require("../../@babel/runtime/helpers/typeof");module.exports=(r={},t=function(t,n){if(!r[t])return require(n);if(!r[t].status){var o=r[t].m;o._exports=o._tempexports;var u=Object.getOwnPropertyDescriptor(o,"exports");u&&u.configurable&&Object.defineProperty(o,"exports",{set:function(r){"object"===e(r)&&r!==o._exports&&(o._exports.__proto__=r.__proto__,Object.keys(r).forEach((function(t){o._exports[t]=r[t]}))),o._tempexports=r},get:function(){return o._tempexports}}),r[t].status=1,r[t].func(r[t].req,o,o.exports)}return r[t].m.exports},function(t,e,n){r[t]={status:0,func:e,req:n,m:{exports:{},_tempexports:{}}}}(1706173694348,(function(r,t,e){var n,o;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={rotl:function(r,t){return r<<t|r>>>32-t},rotr:function(r,t){return r<<32-t|r>>>t},endian:function(r){if(r.constructor==Number)return 16711935&o.rotl(r,8)|4278255360&o.rotl(r,24);for(var t=0;t<r.length;t++)r[t]=o.endian(r[t]);return r},randomBytes:function(r){for(var t=[];r>0;r--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(r){for(var t=[],e=0,n=0;e<r.length;e++,n+=8)t[n>>>5]|=r[e]<<24-n%32;return t},wordsToBytes:function(r){for(var t=[],e=0;e<32*r.length;e+=8)t.push(r[e>>>5]>>>24-e%32&255);return t},bytesToHex:function(r){for(var t=[],e=0;e<r.length;e++)t.push((r[e]>>>4).toString(16)),t.push((15&r[e]).toString(16));return t.join("")},hexToBytes:function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(parseInt(r.substr(e,2),16));return t},bytesToBase64:function(r){for(var t=[],e=0;e<r.length;e+=3)for(var o=r[e]<<16|r[e+1]<<8|r[e+2],u=0;u<4;u++)8*e+6*u<=8*r.length?t.push(n.charAt(o>>>6*(3-u)&63)):t.push("=");return t.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],e=0,o=0;e<r.length;o=++e%4)0!=o&&t.push((n.indexOf(r.charAt(e-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(r.charAt(e))>>>6-2*o);return t}},t.exports=o}),(function(r){return t({}[r],r)})),t(1706173694348));
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/crypt/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/currency.js/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function e(e,r){var n,o;return i[e]?(i[e].status||((n=i[e].m)._exports=n._tempexports,(o=Object.getOwnPropertyDescriptor(n,"exports"))&&o.configurable&&Object.defineProperty(n,"exports",{set:function(e){"object"==t(e)&&e!==n._exports&&(n._exports.__proto__=e.__proto__,Object.keys(e).forEach((function(t){n._exports[t]=e[t]}))),n._tempexports=e},get:function(){return n._tempexports}}),i[e].status=1,i[e].func(i[e].req,n,n.exports)),i[e].m.exports):require(r)}var r,n,i={};return r=function(t,e,r){var n={symbol:"$",separator:",",decimal:".",formatWithSymbol:!1,errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#"},i=function(t){return Math.round(t)},o=function(t){return Math.pow(10,t)},s=/(\d)(?=(\d{3})+\b)/g,a=/(\d)(?=(\d\d)+\d\b)/g;function u(t,e){var r=this;if(!(r instanceof u))return new u(t,e);e=Object.assign({},n,e);var i=o(e.precision);t=p(t,e);r.intValue=t,r.value=t/i,e.increment=e.increment||1/i,e.useVedic?e.groups=a:e.groups=s,this.s=e,this.p=i}function p(t,e,r){var n=!(2<arguments.length&&void 0!==r)||r,s=0,a=e.decimal,p=e.errorOnInvalid,c=e.precision,l=(c=o(c),"number"==typeof t);if(l||t instanceof u)s=(l?t:t.value)*c;else if("string"==typeof t)l=new RegExp("[^-\\d"+a+"]","g"),a=new RegExp("\\"+a,"g"),s=(s=t.replace(/\((.*)\)/,"-$1").replace(l,"").replace(a,".")*c)||0;else{if(p)throw Error("Invalid Input");s=0}return s=s.toFixed(4),n?i(s):s}u.prototype={add:function(t){var e=this.intValue,r=this.s,n=this.p;return u((e+=p(t,r))/n,r)},subtract:function(t){var e=this.intValue,r=this.s,n=this.p;return u((e-=p(t,r))/n,r)},multiply:function(t){var e=this.intValue,r=this.s;return u((e*=t)/o(r.precision),r)},divide:function(t){var e=this.intValue,r=this.s;return u(e/=p(t,r,!1),r)},distribute:function(t){for(var e=this.intValue,r=this.p,n=this.s,i=[],o=Math[0<=e?"floor":"ceil"](e/t),s=Math.abs(e-o*t);0!==t;t--){var a=u(o/r,n);0<s--&&(a=0<=e?a.add(1/r):a.subtract(1/r)),i.push(a)}return i},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var e=(a=this.s).pattern,r=a.negativePattern,n=a.formatWithSymbol,i=a.symbol,o=a.separator,s=a.decimal,a=a.groups,u=(p=(this+"").replace(/^-/,"").split("."))[0],p=p[1];return(0<=this.value?e:r).replace("!",(t=void 0===t?n:t)?i:"").replace("#","".concat(u.replace(a,"$1"+o)).concat(p?s+p:""))},toString:function(){var t=this.intValue,e=this.p,r=this.s;return t/=e,e=r.increment,(i(t/e)*e).toFixed(r.precision)},toJSON:function(){return this.value}},e.exports=u},n=function(t){return e({}[t],t)},i[1706173694349]={status:0,func:r,req:n,m:{exports:{},_tempexports:{}}},e(1706173694349)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/currency.js/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/fast-deep-equal/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function r(r,e){var o,u;return n[r]?(n[r].status||((o=n[r].m)._exports=o._tempexports,(u=Object.getOwnPropertyDescriptor(o,"exports"))&&u.configurable&&Object.defineProperty(o,"exports",{set:function(r){"object"==t(r)&&r!==o._exports&&(o._exports.__proto__=r.__proto__,Object.keys(r).forEach((function(t){o._exports[t]=r[t]}))),o._tempexports=r},get:function(){return o._tempexports}}),n[r].status=1,n[r].func(n[r].req,o,o.exports)),n[r].m.exports):require(e)}var e,o,n={};return e=function(r,e,o){e.exports=function r(e,o){if(e===o)return!0;if(e&&o&&"object"==t(e)&&"object"==t(o)){if(e.constructor!==o.constructor)return!1;var n,u,s;if(Array.isArray(e)){if((n=e.length)!=o.length)return!1;for(u=n;0!=u--;)if(!r(e[u],o[u]))return!1}else{if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((n=(s=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(u=n;0!=u--;)if(!Object.prototype.hasOwnProperty.call(o,s[u]))return!1;for(u=n;0!=u--;){var f=s[u];if(!r(e[f],o[f]))return!1}}return!0}return e!=e&&o!=o}},o=function(t){return r({}[t],t)},n[1706173694350]={status:0,func:e,req:o,m:{exports:{},_tempexports:{}}},r(1706173694350)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/fast-deep-equal/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/is-buffer/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t,e,r=require("../../@babel/runtime/helpers/typeof");module.exports=(t={},e=function(e,o){if(!t[e])return require(o);if(!t[e].status){var n=t[e].m;n._exports=n._tempexports;var u=Object.getOwnPropertyDescriptor(n,"exports");u&&u.configurable&&Object.defineProperty(n,"exports",{set:function(t){"object"===r(t)&&t!==n._exports&&(n._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(e){n._exports[e]=t[e]}))),n._tempexports=t},get:function(){return n._tempexports}}),t[e].status=1,t[e].func(t[e].req,n,n.exports)}return t[e].m.exports},function(e,r,o){t[e]={status:0,func:r,req:o,m:{exports:{},_tempexports:{}}}}(1706173694351,(function(t,e,r){function o(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
     * Determine if an object is a Buffer
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
e.exports=function(t){return null!=t&&(o(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&o(t.slice(0,0))}(t)||!!t._isBuffer)}}),(function(t){return e({}[t],t)})),e(1706173694351));
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/is-buffer/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/lodash/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../@babel/runtime/helpers/Arrayincludes");var n=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function t(t,r){var e,i;return u[t]?(u[t].status||((e=u[t].m)._exports=e._tempexports,(i=Object.getOwnPropertyDescriptor(e,"exports"))&&i.configurable&&Object.defineProperty(e,"exports",{set:function(t){"object"==n(t)&&t!==e._exports&&(e._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(n){e._exports[n]=t[n]}))),e._tempexports=t},get:function(){return e._tempexports}}),u[t].status=1,u[t].func(u[t].req,e,e.exports)),u[t].m.exports):require(r)}var r,e,u={};return r=function(t,r,e){(function(){var t,u,i,o,f="Expected a function",c="__lodash_hash_undefined__",a="__lodash_placeholder__",l=9007199254740991,s=4294967295,h=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],p="[object Arguments]",_="[object Array]",v="[object Boolean]",g="[object Date]",y="[object Error]",d="[object Function]",b="[object GeneratorFunction]",w="[object Map]",m="[object Number]",x="[object Object]",j="[object Promise]",A="[object RegExp]",O="[object Set]",k="[object String]",I="[object Symbol]",R="[object WeakMap]",E="[object ArrayBuffer]",z="[object DataView]",S="[object Float32Array]",W="[object Float64Array]",L="[object Int8Array]",C="[object Int16Array]",U="[object Int32Array]",B="[object Uint8Array]",T="[object Uint8ClampedArray]",D="[object Uint16Array]",$="[object Uint32Array]",N=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,P=/[&<>"']/g,Z=RegExp(F.source),K=RegExp(P.source),V=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,nn=RegExp(X.source),tn=/^\s+/,rn=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,un=/\{\n\/\* \[wrapped with (.+)\] \*/,on=/,? & /,fn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,cn=/[()=,{}\[\]\/\s]/,an=/\\(\\)?/g,ln=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sn=/\w*$/,hn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,_n=/^\[object .+?Constructor\]$/,vn=/^0o[0-7]+$/i,gn=/^(?:0|[1-9]\d*)$/,yn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dn=/($^)/,bn=/['\n\r\u2028\u2029\\]/g,wn="\\ud800-\\udfff",mn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xn="\\ufe0e\\ufe0f",jn="["+wn+"]",An="["+(zn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",On="["+mn+"]",kn="["+(u="\\u2700-\\u27bf")+"]",In="["+(Gn="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Rn="\\u200d",En="(?:"+In+"|"+(zn="[^"+wn+zn+"\\d+"+u+Gn+(i="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]")+")",zn="(?:"+(i="["+i+"]")+"|"+zn+")",Sn="(?:['’](?:d|ll|m|re|s|t|ve))?",Wn="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ln=(Ln="["+xn+"]?")+(Cn="(?:"+On+"|"+(u="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:\\u200d(?:"+[Gn="[^"+wn+"]",Hn="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Ln+Cn+")*",Cn="(?:"+[kn,Hn,o].join("|")+")"+Ln,Un=(kn="(?:"+[Gn+On+"?",On,Hn,o,jn].join("|")+")",RegExp("['’]","g")),Bn=RegExp(On,"g"),Tn=RegExp(u+"(?="+u+")|"+kn+Ln,"g"),Dn=RegExp([i+"?"+In+"+"+Sn+"(?="+[An,i,"$"].join("|")+")",zn+"+"+Wn+"(?="+[An,i+En,"$"].join("|")+")",i+"?"+En+"+"+Sn,i+"+"+Wn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Cn].join("|"),"g"),$n=RegExp("["+Rn+wn+mn+xn+"]"),Nn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mn=-1,Fn={},Pn=(Fn[S]=Fn[W]=Fn[L]=Fn[C]=Fn[U]=Fn[B]=Fn[T]=Fn[D]=Fn[$]=!0,Fn[p]=Fn[_]=Fn[E]=Fn[v]=Fn[z]=Fn[g]=Fn[y]=Fn[d]=Fn[w]=Fn[m]=Fn[x]=Fn[A]=Fn[O]=Fn[k]=Fn[R]=!1,{}),Zn=(Pn[p]=Pn[_]=Pn[E]=Pn[z]=Pn[v]=Pn[g]=Pn[S]=Pn[W]=Pn[L]=Pn[C]=Pn[U]=Pn[w]=Pn[m]=Pn[x]=Pn[A]=Pn[O]=Pn[k]=Pn[I]=Pn[B]=Pn[T]=Pn[D]=Pn[$]=!0,Pn[y]=Pn[d]=Pn[R]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),Kn=parseFloat,Vn=parseInt,Gn="object"==("undefined"==typeof global?"undefined":n(global))&&global&&global.Object===Object&&global,Hn="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,Jn=Gn||Hn||Function("return this")(),Yn=(o="object"==n(e)&&e&&!e.nodeType&&e)&&"object"==n(r)&&r&&!r.nodeType&&r,Qn=Yn&&Yn.exports===o,Xn=Qn&&Gn.process,nt=(jn=function(){try{var n=Yn&&Yn.require&&Yn.require("util").types;return n||Xn&&Xn.binding&&Xn.binding("util")}catch(n){}}())&&jn.isArrayBuffer,tt=jn&&jn.isDate,rt=jn&&jn.isMap,et=jn&&jn.isRegExp,ut=jn&&jn.isSet,it=jn&&jn.isTypedArray;function ot(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function ft(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function ct(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function at(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function lt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function st(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function ht(n,t){return!(null==n||!n.length)&&-1<xt(n,t,0)}function pt(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function _t(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function vt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function gt(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function yt(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function dt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}var bt=kt("length");function wt(n,t,r){var e;return r(n,(function(n,r,u){if(t(n,r,u))return e=r,!1})),e}function mt(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function xt(n,t,r){if(t!=t)return mt(n,At,r);for(var e=n,u=t,i=r-1,o=e.length;++i<o;)if(e[i]===u)return i;return-1}function jt(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function At(n){return n!=n}function Ot(n,t){var r=null==n?0:n.length;return r?Et(n,t)/r:NaN}function kt(n){return function(r){return null==r?t:r[n]}}function It(n){return function(r){return null==n?t:n[r]}}function Rt(n,t,r,e,u){return u(n,(function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)})),r}function Et(n,r){for(var e,u=-1,i=n.length;++u<i;){var o=r(n[u]);o!==t&&(e=e===t?o:e+o)}return e}function zt(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function St(n){return n&&n.slice(0,Vt(n)+1).replace(tn,"")}function Wt(n){return function(t){return n(t)}}function Lt(n,t){return _t(t,(function(t){return n[t]}))}function Ct(n,t){return n.has(t)}function Ut(n,t){for(var r=-1,e=n.length;++r<e&&-1<xt(t,n[r],0););return r}function Bt(n,t){for(var r=n.length;r--&&-1<xt(t,n[r],0););return r}var Tt=It({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Dt=It({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $t(n){return"\\"+Zn[n]}function Nt(n){return $n.test(n)}function qt(n){var t=-1,r=Array(n.size);return n.forEach((function(n,e){r[++t]=[e,n]})),r}function Mt(n,t){return function(r){return n(t(r))}}function Ft(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==a||(n[r]=a,i[u++]=r)}return i}function Pt(n){var t=-1,r=Array(n.size);return n.forEach((function(n){r[++t]=n})),r}function Zt(n){return(Nt(n)?function(n){for(var t=Tn.lastIndex=0;Tn.test(n);)++t;return t}:bt)(n)}function Kt(n){return Nt(n)?n.match(Tn)||[]:n.split("")}function Vt(n){for(var t=n.length;t--&&rn.test(n.charAt(t)););return t}var Gt=It({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ht=function r(e){var u=(e=null==e?Jn:Ht.defaults(Jn.Object(),e,Ht.pick(Jn,qn))).Array,i=e.Date,o=e.Error,rn=e.Function,wn=e.Math,mn=e.Object,xn=e.RegExp,jn=e.String,An=e.TypeError,On=u.prototype,kn=rn.prototype,In=mn.prototype,Rn=e["__core-js_shared__"],En=kn.toString,zn=In.hasOwnProperty,Sn=0,Wn=(kn=/[^.]+$/.exec(Rn&&Rn.keys&&Rn.keys.IE_PROTO||""))?"Symbol(src)_1."+kn:"",Ln=In.toString,Cn=En.call(mn),Tn=Jn._,$n=xn("^"+En.call(zn).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zn=(kn=Qn?e.Buffer:t,e.Symbol),Gn=e.Uint8Array,Hn=kn?kn.allocUnsafe:t,Yn=Mt(mn.getPrototypeOf,mn),Xn=mn.create,bt=In.propertyIsEnumerable,It=On.splice,Jt=Zn?Zn.isConcatSpreadable:t,Yt=Zn?Zn.iterator:t,Qt=Zn?Zn.toStringTag:t,Xt=function(){try{var n=Qu(mn,"defineProperty");return n({},"",{}),n}catch(n){}}(),nr=e.clearTimeout!==Jn.clearTimeout&&e.clearTimeout,tr=i&&i.now!==Jn.Date.now&&i.now,rr=e.setTimeout!==Jn.setTimeout&&e.setTimeout,er=wn.ceil,ur=wn.floor,ir=mn.getOwnPropertySymbols,or=(kn=kn?kn.isBuffer:t,e.isFinite),fr=On.join,cr=Mt(mn.keys,mn),ar=wn.max,lr=wn.min,sr=i.now,hr=e.parseInt,pr=wn.random,_r=On.reverse,vr=(i=Qu(e,"DataView"),Qu(e,"Map")),gr=Qu(e,"Promise"),yr=Qu(e,"Set"),dr=(e=Qu(e,"WeakMap"),Qu(mn,"create")),br=e&&new e,wr={},mr=Oi(i),xr=Oi(vr),jr=Oi(gr),Ar=Oi(yr),Or=Oi(e),kr=(Zn=Zn?Zn.prototype:t)?Zn.valueOf:t,Ir=Zn?Zn.toString:t;function Rr(n){if(Lo(n)&&!jo(n)&&!(n instanceof Lr)){if(n instanceof Wr)return n;if(zn.call(n,"__wrapped__"))return ki(n)}return new Wr(n)}var Er=function(n){return Wo(n)?Xn?Xn(n):(zr.prototype=n,n=new zr,zr.prototype=t,n):{}};function zr(){}function Sr(){}function Wr(n,r){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=t}function Lr(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}function Cr(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Ur(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Br(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Tr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Br;++t<r;)this.add(n[t])}function Dr(n){n=this.__data__=new Ur(n),this.size=n.size}function $r(n,t){var r,e=jo(n),u=!e&&xo(n),i=!e&&!u&&Io(n),o=!e&&!u&&!i&&qo(n),f=e||u||i||o,c=f?zt(n.length,jn):[],a=c.length;for(r in n)!t&&!zn.call(n,r)||f&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||ii(r,a))||c.push(r);return c}function Nr(n){var r=n.length;return r?n[Be(0,r-1)]:t}function qr(n,t){return mi(gu(n),Jr(t,0,n.length))}function Mr(n){return mi(gu(n))}function Fr(n,r,e){(e===t||bo(n[r],e))&&(e!==t||r in n)||Gr(n,r,e)}function Pr(n,r,e){var u=n[r];zn.call(n,r)&&bo(u,e)&&(e!==t||r in n)||Gr(n,r,e)}function Zr(n,t){for(var r=n.length;r--;)if(bo(n[r][0],t))return r;return-1}function Kr(n,t,r,e){return te(n,(function(n,u,i){t(e,n,r(n),i)})),e}function Vr(n,t){return n&&yu(t,lf(t),n)}function Gr(n,t,r){"__proto__"==t&&Xt?Xt(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Hr(n,r){for(var e=-1,i=r.length,o=u(i),f=null==n;++e<i;)o[e]=f?t:uf(n,r[e]);return o}function Jr(n,r,e){return n==n&&(e!==t&&(n=n<=e?n:e),r!==t)?r<=n?n:r:n}function Yr(n,r,e,u,i,o){var f,c=1&r,a=2&r,l=4&r;if((f=e?i?e(n,u,i,o):e(n):f)===t){if(!Wo(n))return n;var s;if(u=jo(n)){if(f=function(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&zn.call(n,"index")&&(r.index=n.index,r.input=n.input),r}(n),!c)return gu(n,f)}else{var h=ti(n),_=h==d||h==b;if(Io(n))return lu(n,c);if(h==x||h==p||_&&!i){if(f=a||_?{}:ei(n),!c)return a?(y=_=n,y=(s=f)&&yu(y,sf(y),s),yu(_,ni(_),y)):(_=Vr(f,s=n),yu(s,Xu(s),_))}else{if(!Pn[h])return i?n:{};f=function(n,t,r){var e=n.constructor;switch(t){case E:return su(n);case v:case g:return new e(+n);case z:return function(n,t){return t=t?su(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength)}(n,r);case S:case W:case L:case C:case U:case B:case T:case D:case $:return hu(n,r);case w:return new e;case m:case k:return new e(n);case A:return function(n){var t=new n.constructor(n.source,sn.exec(n));return t.lastIndex=n.lastIndex,t}(n);case O:return new e;case I:return function(n){return kr?mn(kr.call(n)):{}}(n)}}(n,h,c)}}var y=(o=o||new Dr).get(n);if(y)return y;o.set(n,f),Do(n)?n.forEach((function(t){f.add(Yr(t,r,e,t,n,o))})):Co(n)&&n.forEach((function(t,u){f.set(u,Yr(t,r,e,u,n,o))}));var j=u?t:(l?a?Zu:Pu:a?sf:lf)(n);ct(j||n,(function(t,u){j&&(t=n[u=t]),Pr(f,u,Yr(t,r,e,u,n,o))}))}return f}function Qr(n,r,e){var u=e.length;if(null==n)return!u;for(n=mn(n);u--;){var i=e[u],o=r[i],f=n[i];if(f===t&&!(i in n)||!o(f))return!1}return!0}function Xr(n,r,e){if("function"!=typeof n)throw new An(f);return yi((function(){n.apply(t,e)}),r)}function ne(n,t,r,e){var u=-1,i=ht,o=!0,f=n.length,c=[],a=t.length;if(f){r&&(t=_t(t,Wt(r))),e?(i=pt,o=!1):200<=t.length&&(i=Ct,o=!1,t=new Tr(t));n:for(;++u<f;){var l=n[u],s=null==r?l:r(l);l=e||0!==l?l:0;if(o&&s==s){for(var h=a;h--;)if(t[h]===s)continue n;c.push(l)}else i(t,s,e)||c.push(l)}}return c}Rr.templateSettings={escape:V,evaluate:G,interpolate:H,variable:"",imports:{_:Rr}},(Rr.prototype=Sr.prototype).constructor=Rr,(Wr.prototype=Er(Sr.prototype)).constructor=Wr,(Lr.prototype=Er(Sr.prototype)).constructor=Lr,Cr.prototype.clear=function(){this.__data__=dr?dr(null):{},this.size=0},Cr.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},Cr.prototype.get=function(n){var r,e=this.__data__;return dr?(r=e[n])===c?t:r:zn.call(e,n)?e[n]:t},Cr.prototype.has=function(n){var r=this.__data__;return dr?r[n]!==t:zn.call(r,n)},Cr.prototype.set=function(n,r){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=dr&&r===t?c:r,this},Ur.prototype.clear=function(){this.__data__=[],this.size=0},Ur.prototype.delete=function(n){var t=this.__data__;return!((n=Zr(t,n))<0||(n==t.length-1?t.pop():It.call(t,n,1),--this.size,0))},Ur.prototype.get=function(n){var r=this.__data__;return(n=Zr(r,n))<0?t:r[n][1]},Ur.prototype.has=function(n){return-1<Zr(this.__data__,n)},Ur.prototype.set=function(n,t){var r=this.__data__,e=Zr(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},Br.prototype.clear=function(){this.size=0,this.__data__={hash:new Cr,map:new(vr||Ur),string:new Cr}},Br.prototype.delete=function(n){return n=Ju(this,n).delete(n),this.size-=n?1:0,n},Br.prototype.get=function(n){return Ju(this,n).get(n)},Br.prototype.has=function(n){return Ju(this,n).has(n)},Br.prototype.set=function(n,t){var r=Ju(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Tr.prototype.add=Tr.prototype.push=function(n){return this.__data__.set(n,c),this},Tr.prototype.has=function(n){return this.__data__.has(n)},Dr.prototype.clear=function(){this.__data__=new Ur,this.size=0},Dr.prototype.delete=function(n){var t=this.__data__;n=t.delete(n);return this.size=t.size,n},Dr.prototype.get=function(n){return this.__data__.get(n)},Dr.prototype.has=function(n){return this.__data__.has(n)},Dr.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Ur){var e=r.__data__;if(!vr||e.length<199)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Br(e)}return r.set(n,t),this.size=r.size,this};var te=wu(ae),re=wu(le,!0);function ee(n,t){var r=!0;return te(n,(function(n,e,u){return r=!!t(n,e,u)})),r}function ue(n,r,e){for(var u=-1,i=n.length;++u<i;){var o,f,c=n[u],a=r(c);null!=a&&(o===t?a==a&&!No(a):e(a,o))&&(o=a,f=c)}return f}function ie(n,t){var r=[];return te(n,(function(n,e,u){t(n,e,u)&&r.push(n)})),r}function oe(n,t,r,e,u){var i=-1,o=n.length;for(r=r||ui,u=u||[];++i<o;){var f=n[i];0<t&&r(f)?1<t?oe(f,t-1,r,e,u):vt(u,f):e||(u[u.length]=f)}return u}var fe=mu(),ce=mu(!0);function ae(n,t){return n&&fe(n,t,lf)}function le(n,t){return n&&ce(n,t,lf)}function se(n,t){return st(t,(function(t){return Eo(n[t])}))}function he(n,r){for(var e=0,u=(r=ou(r,n)).length;null!=n&&e<u;)n=n[Ai(r[e++])];return e&&e==u?n:t}function pe(n,t,r){return t=t(n),jo(n)?t:vt(t,r(n))}function _e(n){if(null==n)return n===t?"[object Undefined]":"[object Null]";if(Qt&&Qt in mn(n)){var r=n,e=zn.call(r,Qt),u=r[Qt];try{r[Qt]=t;var i=!0}catch(n){}var o=Ln.call(r);return i&&(e?r[Qt]=u:delete r[Qt]),o}return Ln.call(n)}function ve(n,t){return t<n}function ge(n,t){return null!=n&&zn.call(n,t)}function ye(n,t){return null!=n&&t in mn(n)}function de(n,r,e){for(var i=e?pt:ht,o=n[0].length,f=n.length,c=f,a=u(f),l=1/0,s=[];c--;){var h=n[c];c&&r&&(h=_t(h,Wt(r))),l=lr(h.length,l),a[c]=!e&&(r||120<=o&&120<=h.length)?new Tr(c&&h):t}h=n[0];var p=-1,_=a[0];n:for(;++p<o&&s.length<l;){var v=h[p],g=r?r(v):v;v=e||0!==v?v:0;if(!(_?Ct(_,g):i(s,g,e))){for(c=f;--c;){var y=a[c];if(!(y?Ct(y,g):i(n[c],g,e)))continue n}_&&_.push(g),s.push(v)}}return s}function be(n,r,e){return null==(r=null==(n=_i(n,r=ou(r,n)))?n:n[Ai(Si(r))])?t:ot(r,n,e)}function we(n){return Lo(n)&&_e(n)==p}function me(n,r,e,u,i){if(n===r)return!0;if(null==n||null==r||!Lo(n)&&!Lo(r))return n!=n&&r!=r;var o=me,f=jo(n),c=jo(r),a=f?_:ti(n),l=(c=c?_:ti(r),(a=a==p?x:a)==x),s=(c=c==p?x:c)==x;if((c=a==c)&&Io(n)){if(!Io(r))return!1;l=!(f=!0)}if(c&&!l){if(i=i||new Dr,f||qo(n))return Mu(n,r,e,u,o,i);var h=n,d=r,b=e,j=u,R=o,S=i;switch(a){case z:if(h.byteLength!=d.byteLength||h.byteOffset!=d.byteOffset)return!1;h=h.buffer,d=d.buffer;case E:return!(h.byteLength!=d.byteLength||!R(new Gn(h),new Gn(d)));case v:case g:case m:return bo(+h,+d);case y:return h.name==d.name&&h.message==d.message;case A:case k:return h==d+"";case w:var W=qt;case O:var L=1&b;return W=W||Pt,h.size==d.size||L?(L=S.get(h))?L==d:(b|=2,S.set(h,d),L=Mu(W(h),W(d),b,j,R,S),S.delete(h),L):!1;case I:if(kr)return kr.call(h)==kr.call(d)}return!1}if(!(1&e)&&(f=l&&zn.call(n,"__wrapped__"),a=s&&zn.call(r,"__wrapped__"),f||a))return o(l=f?n.value():n,s=a?r.value():r,e,u,i=i||new Dr);if(c){var C=n,U=r,B=e,T=u,D=o,$=i=i||new Dr,N=1&B,q=Pu(C),M=q.length;if(M!=(f=Pu(U).length)&&!N)return!1;for(var F=M;F--;){var P=q[F];if(!(N?P in U:zn.call(U,P)))return!1}if(f=$.get(C),a=$.get(U),f&&a)return f==U&&a==C;for(var Z=!0,K=($.set(C,U),$.set(U,C),N);++F<M;){var V,G=C[P=q[F]],H=U[P];if(!((V=T?N?T(H,G,P,U,C,$):T(G,H,P,C,U,$):V)===t?G===H||D(G,H,B,T,$):V)){Z=!1;break}K=K||"constructor"==P}return Z&&!K&&(f=C.constructor)!=(a=U.constructor)&&"constructor"in C&&"constructor"in U&&!("function"==typeof f&&f instanceof f&&"function"==typeof a&&a instanceof a)&&(Z=!1),$.delete(C),$.delete(U),Z}return!1}function xe(n,r,e,u){var i=e.length,o=i,f=!u;if(null==n)return!o;for(n=mn(n);i--;){var c=e[i];if(f&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++i<o;){var a=(c=e[i])[0],l=n[a],s=c[1];if(f&&c[2]){if(l===t&&!(a in n))return!1}else{var h,p=new Dr;if(!((h=u?u(l,s,a,n,r,p):h)===t?me(s,l,3,u,p):h))return!1}}return!0}function je(n){var t;return!(!Wo(n)||(t=n,Wn&&Wn in t))&&(Eo(n)?$n:_n).test(Oi(n))}function Ae(t){return"function"==typeof t?t:null==t?Bf:"object"==n(t)?jo(t)?Ee(t[0],t[1]):Re(t):Zf(t)}function Oe(n){if(!li(n))return cr(n);var t,r=[];for(t in mn(n))zn.call(n,t)&&"constructor"!=t&&r.push(t);return r}function ke(n,t){return n<t}function Ie(n,t){var r=-1,e=Oo(n)?u(n.length):[];return te(n,(function(n,u,i){e[++r]=t(n,u,i)})),e}function Re(n){var t=Yu(n);return 1==t.length&&t[0][2]?hi(t[0][0],t[0][1]):function(r){return r===n||xe(r,n,t)}}function Ee(n,r){return fi(n)&&si(r)?hi(Ai(n),r):function(e){var u=uf(e,n);return u===t&&u===r?of(e,n):me(r,u,3)}}function ze(n,r,e,u,i){n!==r&&fe(r,(function(o,f){var c,a,l,s,h,p,_,v,g,y,d,b,w;i=i||new Dr,Wo(o)?(a=r,s=e,h=ze,p=u,_=i,d=vi(c=n,l=f),b=vi(a,l),(w=_.get(b))||((a=(w=p?p(d,b,l+"",c,a,_):t)===t)&&(g=!(v=jo(b))&&Io(b),y=!v&&!g&&qo(b),w=b,v||g||y?w=jo(d)?d:ko(d)?gu(d):g?lu(b,!(a=!1)):y?hu(b,!(a=!1)):[]:Bo(b)||xo(b)?xo(w=d)?w=Ho(d):Wo(d)&&!Eo(d)||(w=ei(b)):a=!1),a&&(_.set(b,w),h(w,b,s,p,_),_.delete(b))),Fr(c,l,w)):(v=u?u(vi(n,f),o,f+"",n,r,i):t,Fr(n,f,v=v===t?o:v))}),sf)}function Se(n,r){var e=n.length;if(e)return ii(r+=r<0?e:0,e)?n[r]:t}function We(n,t,r){t=t.length?_t(t,(function(n){return jo(n)?function(t){return he(t,1===n.length?n[0]:n)}:n})):[Bf];var e=-1;t=_t(t,Wt(Hu()));var u=Ie(n,(function(n,r,u){return{criteria:_t(t,(function(t){return t(n)})),index:++e,value:n}})),i=(n=function(n,t){for(var e=r,u=-1,i=n.criteria,o=t.criteria,f=i.length,c=e.length;++u<f;){var a=pu(i[u],o[u]);if(a)return c<=u?a:a*("desc"==e[u]?-1:1)}return n.index-t.index},u.length);for(u.sort(n);i--;)u[i]=u[i].value;return u}function Le(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=he(n,o);r(f,o)&&qe(i,ou(o,n),f)}return i}function Ce(n,t,r,e){var u=e?jt:xt,i=-1,o=t.length,f=n;for(n===t&&(t=gu(t)),r&&(f=_t(n,Wt(r)));++i<o;)for(var c=0,a=t[i],l=r?r(a):a;-1<(c=u(f,l,c,e));)f!==n&&It.call(f,c,1),It.call(n,c,1);return n}function Ue(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u,i=t[r];r!=e&&i===u||(ii(u=i)?It.call(n,i,1):Qe(n,i))}}function Be(n,t){return n+ur(pr()*(t-n+1))}function Te(n,t){var r="";if(!(!n||t<1||l<t))for(;t%2&&(r+=n),(t=ur(t/2))&&(n+=n),t;);return r}function De(n,t){return di(pi(n,t,Bf),n+"")}function $e(n){return Nr(bf(n))}function Ne(n,t){return mi(n=bf(n),Jr(t,0,n.length))}function qe(n,r,e,u){if(Wo(n))for(var i=-1,o=(r=ou(r,n)).length,f=o-1,c=n;null!=c&&++i<o;){var a,l=Ai(r[i]),s=e;if("__proto__"===l||"constructor"===l||"prototype"===l)return n;Pr(c,l,s=i!=f&&(a=c[l],(s=u?u(a,l,c):t)===t)?Wo(a)?a:ii(r[i+1])?[]:{}:s),c=c[l]}return n}var Me=br?function(n,t){return br.set(n,t),n}:Bf;Zn=Xt?function(n,t){return Xt(n,"toString",{configurable:!0,enumerable:!1,value:Lf(t),writable:!0})}:Bf;function Fe(n){return mi(bf(n))}function Pe(n,t,r){for(var e=-1,i=n.length,o=((r=i<r?i:r)<0&&(r+=i),i=r<(t=t<0?i<-t?0:i+t:t)?0:r-t>>>0,t>>>=0,u(i));++e<i;)o[e]=n[e+t];return o}function Ze(n,t){var r;return te(n,(function(n,e,u){return!(r=t(n,e,u))})),!!r}function Ke(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=2147483647){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!No(o)&&(r?o<=t:o<t)?e=1+i:u=i}return u}return Ve(n,t,Bf,r)}function Ve(n,r,e,u){var i=0,o=null==n?0:n.length;if(0===o)return 0;for(var f=(r=e(r))!=r,c=null===r,a=No(r),l=r===t;i<o;){var s=ur((i+o)/2),h=e(n[s]),p=h!==t,_=null===h,v=h==h,g=No(h);(v=f?u||v:l?v&&(u||p):c?v&&p&&(u||!_):a?v&&p&&!_&&(u||!g):!_&&!g&&(u?h<=r:h<r))?i=s+1:o=s}return lr(o,4294967294)}function Ge(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o,f=n[r],c=t?t(f):f;r&&bo(c,o)||(o=c,i[u++]=0===f?0:f)}return i}function He(n){return"number"==typeof n?n:No(n)?NaN:+n}function Je(n){var t;return"string"==typeof n?n:jo(n)?_t(n,Je)+"":No(n)?Ir?Ir.call(n):"":"0"==(t=n+"")&&1/n==-1/0?"-0":t}function Ye(n,t,r){var e=-1,u=ht,i=n.length,o=!0,f=[],c=f;if(r)o=!1,u=pt;else if(200<=i){var a=t?null:Bu(n);if(a)return Pt(a);o=!1,u=Ct,c=new Tr}else c=t?[]:f;n:for(;++e<i;){var l=n[e],s=t?t(l):l;l=r||0!==l?l:0;if(o&&s==s){for(var h=c.length;h--;)if(c[h]===s)continue n;t&&c.push(s),f.push(l)}else u(c,s,r)||(c!==f&&c.push(s),f.push(l))}return f}function Qe(n,t){return null==(n=_i(n,t=ou(t,n)))||delete n[Ai(Si(t))]}function Xe(n,t,r,e){return qe(n,t,r(he(n,t)),e)}function nu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Pe(n,e?0:i,e?i+1:u):Pe(n,e?i+1:0,e?u:i)}function tu(n,t){var r=n;return gt(t,(function(n,t){return t.func.apply(t.thisArg,vt([n],t.args))}),r=n instanceof Lr?n.value():r)}function ru(n,t,r){var e=n.length;if(e<2)return e?Ye(n[0]):[];for(var i=-1,o=u(e);++i<e;)for(var f=n[i],c=-1;++c<e;)c!=i&&(o[i]=ne(o[i]||f,n[c],t,r));return Ye(oe(o,1),t,r)}function eu(n,r,e){for(var u=-1,i=n.length,o=r.length,f={};++u<i;){var c=u<o?r[u]:t;e(f,n[u],c)}return f}function uu(n){return ko(n)?n:[]}function iu(n){return"function"==typeof n?n:Bf}function ou(n,t){return jo(n)?n:fi(n,t)?[n]:ji(Jo(n))}var fu=De;function cu(n,r,e){var u=n.length;return e=e===t?u:e,!r&&u<=e?n:Pe(n,r,e)}var au=nr||function(n){return Jn.clearTimeout(n)};function lu(n,t){return t?n.slice():(t=n.length,t=Hn?Hn(t):new n.constructor(t),n.copy(t),t)}function su(n){var t=new n.constructor(n.byteLength);return new Gn(t).set(new Gn(n)),t}function hu(n,t){return t=t?su(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.length)}function pu(n,r){if(n!==r){var e=n!==t,u=null===n,i=n==n,o=No(n),f=r!==t,c=null===r,a=r==r,l=No(r);if(!c&&!l&&!o&&r<n||o&&f&&a&&!c&&!l||u&&f&&a||!e&&a||!i)return 1;if(!u&&!o&&!l&&n<r||l&&e&&i&&!u&&!o||c&&e&&i||!f&&i||!a)return-1}return 0}function _u(n,t,r,e){for(var i=-1,o=n.length,f=r.length,c=-1,a=t.length,l=ar(o-f,0),s=u(a+l),h=!e;++c<a;)s[c]=t[c];for(;++i<f;)(h||i<o)&&(s[r[i]]=n[i]);for(;l--;)s[c++]=n[i++];return s}function vu(n,t,r,e){for(var i=-1,o=n.length,f=-1,c=r.length,a=-1,l=t.length,s=ar(o-c,0),h=u(s+l),p=!e;++i<s;)h[i]=n[i];for(var _=i;++a<l;)h[_+a]=t[a];for(;++f<c;)(p||i<o)&&(h[_+r[f]]=n[i++]);return h}function gu(n,t){var r=-1,e=n.length;for(t=t||u(e);++r<e;)t[r]=n[r];return t}function yu(n,r,e,u){for(var i=!e,o=(e=e||{},-1),f=r.length;++o<f;){var c=r[o],a=u?u(e[c],n[c],c,e,n):t;(i?Gr:Pr)(e,c,a=a===t?n[c]:a)}return e}function du(n,t){return function(r,e){var u=jo(r)?ft:Kr,i=t?t():{};return u(r,n,Hu(e,2),i)}}function bu(n){return De((function(r,e){var u=-1,i=e.length,o=1<i?e[i-1]:t,f=2<i?e[2]:t;o=3<n.length&&"function"==typeof o?(i--,o):t;for(f&&oi(e[0],e[1],f)&&(o=i<3?t:o,i=1),r=mn(r);++u<i;){var c=e[u];c&&n(r,c,u,o)}return r}))}function wu(n,t){return function(r,e){if(null!=r){if(!Oo(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=mn(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););}return r}}function mu(n){return function(t,r,e){for(var u=-1,i=mn(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(!1===r(i[c],c,i))break}return t}}function xu(n){return function(r){var e=(u=Nt(r=Jo(r))?Kt(r):t)?u[0]:r.charAt(0),u=u?cu(u,1).join(""):r.slice(1);return e[n]()+u}}function ju(n){return function(t){return gt(zf(xf(t).replace(Un,"")),n,"")}}function Au(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Er(n.prototype),e=n.apply(r,t);return Wo(e)?e:r}}function Ou(n){return function(r,e,u){var i,o=mn(r);return-1<(e=(Oo(r)||(i=Hu(e,3),r=lf(r),e=function(n){return i(o[n],n,o)}),n(r,e,u)))?o[i?r[e]:e]:t}}function ku(n){return Fu((function(r){var e=r.length,u=e,i=Wr.prototype.thru;for(n&&r.reverse();u--;){var o=r[u];if("function"!=typeof o)throw new An(f);i&&!l&&"wrapper"==Vu(o)&&(l=new Wr([],!0))}for(u=l?u:e;++u<e;)var c=Vu(o=r[u]),a="wrapper"==c?Ku(o):t,l=a&&ci(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?l[Vu(a[0])].apply(l,a[3]):1==o.length&&ci(o)?l[c]():l.thru(o);return function(){var n=arguments,t=n[0];if(l&&1==n.length&&jo(t))return l.plant(t).value();for(var u=0,i=e?r[u].apply(this,n):t;++u<e;)i=r[u].call(this,i);return i}}))}function Iu(n,r,e,i,o,f,c,a,l,s){var h=128&r,p=1&r,_=2&r,v=24&r,g=512&r,y=_?t:Au(n);return function d(){for(var b,w,m,x=u(m=arguments.length),j=m;j--;)x[j]=arguments[j];return v&&(w=function(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}(x,b=Gu(d))),i&&(x=_u(x,i,o,v)),f&&(x=vu(x,f,c,v)),m-=w,v&&m<s?(w=Ft(x,b),Cu(n,r,Iu,d.placeholder,e,x,w,a,l,s-m)):(b=p?e:this,w=_?b[n]:n,m=x.length,a?x=function(n,r){for(var e=n.length,u=lr(r.length,e),i=gu(n);u--;){var o=r[u];n[u]=ii(o,e)?i[o]:t}return n}(x,a):g&&1<m&&x.reverse(),h&&l<m&&(x.length=l),(w=this&&this!==Jn&&this instanceof d?y||Au(w):w).apply(b,x))}}function Ru(n,t){return function(r,e){return r=r,u=n,i=t(e),o={},ae(r,(function(n,t,r){u(o,i(n),t,r)})),o;var u,i,o}}function Eu(n,r){return function(e,u){var i;if(e===t&&u===t)return r;if(e!==t&&(i=e),u!==t){if(i===t)return u;u=("string"==typeof e||"string"==typeof u?(e=Je(e),Je):(e=He(e),He))(u),i=n(e,u)}return i}}function zu(n){return Fu((function(t){return t=_t(t,Wt(Hu())),De((function(r){var e=this;return n(t,(function(n){return ot(n,e,r)}))}))}))}function Su(n,r){var e=(r=r===t?" ":Je(r)).length;return e<2?e?Te(r,n):r:(e=Te(r,er(n/Zt(r))),Nt(r)?cu(Kt(e),0,n).join(""):e.slice(0,n))}function Wu(n){return function(r,e,i){i&&"number"!=typeof i&&oi(r,e,i)&&(e=i=t),r=Zo(r),e===t?(e=r,r=0):e=Zo(e);for(var o=r,f=i=i===t?r<e?1:-1:Zo(i),c=n,a=-1,l=ar(er((e-o)/(f||1)),0),s=u(l);l--;)s[c?l:++a]=o,o+=f;return s}}function Lu(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Go(t),r=Go(r)),n(t,r)}}function Cu(n,r,e,u,i,o,f,c,a,l){var s=8&r;4&(r=(r|(s?32:64))&~(s?64:32))||(r&=-4),i=[n,r,i,s?o:t,s?f:t,s?t:o,s?t:f,c,a,l],o=e.apply(t,i);return ci(n)&&gi(o,i),o.placeholder=u,bi(o,n,r)}function Uu(n){var t=wn[n];return function(n,r){var e;return n=Go(n),(r=null==r?0:lr(Ko(r),292))&&or(n)?(e=(Jo(n)+"e").split("e"),+((e=(Jo(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"))[0]+"e"+(+e[1]-r))):t(n)}}var Bu=yr&&1/Pt(new yr([,-0]))[1]==1/0?function(n){return new yr(n)}:qf;function Tu(n){return function(t){var r,e,u,i=ti(t);return i==w?qt(t):i==O?(i=t,r=-1,e=Array(i.size),i.forEach((function(n){e[++r]=[n,n]})),e):_t(n(u=t),(function(n){return[n,u[n]]}))}}function Du(n,r,e,i,o,c,l,s){var h,p,_,v,g,y,d,b,w,m,x,j,A,O=2&r;if(O||"function"==typeof n)return(h=i?i.length:0)||(r&=-97,i=o=t),l=l===t?l:ar(Ko(l),0),s=s===t?s:Ko(s),h-=o?o.length:0,64&r&&(_=i,v=o,i=o=t),_=[n,r,e,i,o,_,v,c,l,s],(p=O?t:Ku(n))&&(v=p,b=(d=(l=(c=_)[1])|(y=v[1]))<131,w=128==y&&8==l||128==y&&256==l&&c[7].length<=v[8]||384==y&&v[7].length<=v[8]&&8==l,b||w)&&(1&y&&(c[2]=v[2],d|=1&l?0:4),(b=v[3])&&(g=c[3],c[3]=g?_u(g,b,v[4]):b,c[4]=g?Ft(c[3],a):v[4]),(b=v[5])&&(g=c[5],c[5]=g?vu(g,b,v[6]):b,c[6]=g?Ft(c[5],a):v[6]),(b=v[7])&&(c[7]=b),128&y&&(c[8]=null==c[8]?v[8]:lr(c[8],v[8])),null==c[9]&&(c[9]=v[9]),c[0]=v[0],c[1]=d),n=_[0],r=_[1],e=_[2],i=_[3],o=_[4],!(s=_[9]=_[9]===t?O?0:n.length:ar(_[9]-h,0))&&24&r&&(r&=-25),w=r&&1!=r?8==r||16==r?function(n,r,e){var i=Au(n);return function o(){for(var f=arguments.length,c=u(f),a=f,l=Gu(o);a--;)c[a]=arguments[a];return(f-=(l=f<3&&c[0]!==l&&c[f-1]!==l?[]:Ft(c,l)).length)<e?Cu(n,r,Iu,o.placeholder,t,c,l,t,t,e-f):ot(this&&this!==Jn&&this instanceof o?i:n,this,c)}}(n,r,s):32!=r&&33!=r||o.length?Iu.apply(t,_):function(n,t,r,e){var i=1&t,o=Au(n);return function t(){for(var f=-1,c=arguments.length,a=-1,l=e.length,s=u(l+c),h=this&&this!==Jn&&this instanceof t?o:n;++a<l;)s[a]=e[a];for(;c--;)s[a++]=arguments[++f];return ot(h,i?r:this,s)}}(n,r,e,i):(x=e,j=1&r,A=Au(m=n),function n(){return(this&&this!==Jn&&this instanceof n?A:m).apply(j?x:this,arguments)}),bi((p?Me:gi)(w,_),n,r);throw new An(f)}function $u(n,r,e,u){return n===t||bo(n,In[e])&&!zn.call(u,e)?r:n}function Nu(n,r,e,u,i,o){return Wo(n)&&Wo(r)&&(o.set(r,n),ze(n,r,t,Nu,o),o.delete(r)),n}function qu(n){return Bo(n)?t:n}function Mu(n,r,e,u,i,o){var f=1&e,c=n.length;if(c!=(a=r.length)&&!(f&&c<a))return!1;var a=o.get(n),l=o.get(r);if(a&&l)return a==r&&l==n;var s=-1,h=!0,p=2&e?new Tr:t;for(o.set(n,r),o.set(r,n);++s<c;){var _,v=n[s],g=r[s];if((_=u?f?u(g,v,s,r,n,o):u(v,g,s,n,r,o):_)!==t){if(_)continue;h=!1;break}if(p){if(!dt(r,(function(n,t){return!Ct(p,t)&&(v===n||i(v,n,e,u,o))&&p.push(t)}))){h=!1;break}}else if(v!==g&&!i(v,g,e,u,o)){h=!1;break}}return o.delete(n),o.delete(r),h}function Fu(n){return di(pi(n,t,Ei),n+"")}function Pu(n){return pe(n,lf,Xu)}function Zu(n){return pe(n,sf,ni)}var Ku=br?function(n){return br.get(n)}:qf;function Vu(n){for(var t=n.name+"",r=wr[t],e=zn.call(wr,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Gu(n){return(zn.call(Rr,"placeholder")?Rr:n).placeholder}function Hu(){var n=(n=Rr.iteratee||Tf)===Tf?Ae:n;return arguments.length?n(arguments[0],arguments[1]):n}function Ju(t,r){var e,u;t=t.__data__;return("string"==(u=n(e=r))||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==e:null===e)?t["string"==typeof r?"string":"hash"]:t.map}function Yu(n){for(var t=lf(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,si(u)]}return t}function Qu(n,r){return r=r,je(n=null==(n=n)?t:n[r])?n:t}var Xu=ir?function(n){return null==n?[]:(n=mn(n),st(ir(n),(function(t){return bt.call(n,t)})))}:Gf,ni=ir?function(n){for(var t=[];n;)vt(t,Xu(n)),n=Yn(n);return t}:Gf,ti=_e;function ri(n,t,r){for(var e=-1,u=(t=ou(t,n)).length,i=!1;++e<u;){var o=Ai(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:!!(u=null==n?0:n.length)&&So(u)&&ii(o,u)&&(jo(n)||xo(n))}function ei(n){return"function"!=typeof n.constructor||li(n)?{}:Er(Yn(n))}function ui(n){return jo(n)||xo(n)||!!(Jt&&n&&n[Jt])}function ii(t,r){var e=n(t);return!!(r=null==r?l:r)&&("number"==e||"symbol"!=e&&gn.test(t))&&-1<t&&t%1==0&&t<r}function oi(t,r,e){var u;if(Wo(e))return("number"==(u=n(r))?Oo(e)&&ii(r,e.length):"string"==u&&r in e)&&bo(e[r],t)}function fi(t,r){var e;if(!jo(t))return"number"==(e=n(t))||"symbol"==e||"boolean"==e||null==t||No(t)||Y.test(t)||!J.test(t)||null!=r&&t in mn(r)}function ci(n){var t=Vu(n),r=Rr[t];return"function"==typeof r&&t in Lr.prototype&&(n===r||(t=Ku(r))&&n===t[0])}(i&&ti(new i(new ArrayBuffer(1)))!=z||vr&&ti(new vr)!=w||gr&&ti(gr.resolve())!=j||yr&&ti(new yr)!=O||e&&ti(new e)!=R)&&(ti=function(n){var r=_e(n);if(n=(n=r==x?n.constructor:t)?Oi(n):"")switch(n){case mr:return z;case xr:return w;case jr:return j;case Ar:return O;case Or:return R}return r});var ai=Rn?Eo:Hf;function li(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||In)}function si(n){return n==n&&!Wo(n)}function hi(n,r){return function(e){return null!=e&&e[n]===r&&(r!==t||n in mn(e))}}function pi(n,r,e){return r=ar(r===t?n.length-1:r,0),function(){for(var t=arguments,i=-1,o=ar(t.length-r,0),f=u(o);++i<o;)f[i]=t[r+i];i=-1;for(var c=u(r+1);++i<r;)c[i]=t[i];return c[r]=e(f),ot(n,this,c)}}function _i(n,t){return t.length<2?n:he(n,Pe(t,0,-1))}function vi(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var gi=wi(Me),yi=rr||function(n,t){return Jn.setTimeout(n,t)},di=wi(Zn);function bi(n,t,r){var e,u,i;return di(n,(u=(t=(t=n=t=t+"").match(un))?t[1].split(on):[],i=r,ct(h,(function(n){var t="_."+n[0];i&n[1]&&!ht(u,t)&&u.push(t)})),(r=(t=u.sort()).length)?(t[e=r-1]=(1<r?"& ":"")+t[e],t=t.join(2<r?", ":" "),n.replace(en,"{\n/* [wrapped with "+t+"] */\n")):n))}function wi(n){var r=0,e=0;return function(){var u=sr(),i=16-(u-e);if(e=u,0<i){if(800<=++r)return arguments[0]}else r=0;return n.apply(t,arguments)}}function mi(n,r){var e=-1,u=n.length,i=u-1;for(r=r===t?u:r;++e<r;){var o=Be(e,i),f=n[o];n[o]=n[e],n[e]=f}return n.length=r,n}xi=(nr=po(nr=function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(Q,(function(n,r,e,u){t.push(e?u.replace(an,"$1"):r||n)})),t},(function(n){return 500===xi.size&&xi.clear(),n}))).cache;var xi,ji=nr;function Ai(n){var t;return"string"==typeof n||No(n)?n:"0"==(t=n+"")&&1/n==-1/0?"-0":t}function Oi(n){if(null!=n){try{return En.call(n)}catch(n){}try{return n+""}catch(n){}}return""}function ki(n){var t;return n instanceof Lr?n.clone():((t=new Wr(n.__wrapped__,n.__chain__)).__actions__=gu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t)}function Ii(n,t,r){var e=null==n?0:n.length;return e?((r=null==r?0:Ko(r))<0&&(r=ar(e+r,0)),mt(n,Hu(t,3),r)):-1}function Ri(n,r,e){var u,i=null==n?0:n.length;return i?(u=i-1,e!==t&&(u=Ko(e),u=e<0?ar(i+u,0):lr(u,i-1)),mt(n,Hu(r,3),u,!0)):-1}function Ei(n){return null!=n&&n.length?oe(n,1):[]}function zi(n){return n&&n.length?n[0]:t}function Si(n){var r=null==n?0:n.length;return r?n[r-1]:t}function Wi(n,t){return n&&n.length&&t&&t.length?Ce(n,t):n}i=De((function(n,t){return ko(n)?ne(n,oe(t,1,ko,!0)):[]})),gr=De((function(n,r){var e=Si(r);return ko(e)&&(e=t),ko(n)?ne(n,oe(r,1,ko,!0),Hu(e,2)):[]})),e=De((function(n,r){var e=Si(r);return ko(e)&&(e=t),ko(n)?ne(n,oe(r,1,ko,!0),t,e):[]})),Rn=De((function(n){var t=_t(n,uu);return t.length&&t[0]===n[0]?de(t):[]})),rr=De((function(n){var r=Si(n),e=_t(n,uu);return r===Si(e)?r=t:e.pop(),e.length&&e[0]===n[0]?de(e,Hu(r,2)):[]})),Zn=De((function(n){var r=Si(n),e=_t(n,uu);return(r="function"==typeof r?r:t)&&e.pop(),e.length&&e[0]===n[0]?de(e,t,r):[]})),nr=De(Wi);var Li=Fu((function(n,t){var r=null==n?0:n.length,e=Hr(n,t);return Ue(n,_t(t,(function(n){return ii(n,r)?+n:n})).sort(pu)),e}));function Ci(n){return null==n?n:_r.call(n)}var Ui=De((function(n){return Ye(oe(n,1,ko,!0))})),Bi=De((function(n){var r=Si(n);return ko(r)&&(r=t),Ye(oe(n,1,ko,!0),Hu(r,2))})),Ti=De((function(n){var r="function"==typeof(r=Si(n))?r:t;return Ye(oe(n,1,ko,!0),t,r)}));function Di(n){var t;return n&&n.length?(t=0,n=st(n,(function(n){return ko(n)&&(t=ar(n.length,t),1)})),zt(t,(function(t){return _t(n,kt(t))}))):[]}function $i(n,r){return n&&n.length?(n=Di(n),null==r?n:_t(n,(function(n){return ot(r,t,n)}))):[]}var Ni=De((function(n,t){return ko(n)?ne(n,t):[]})),qi=De((function(n){return ru(st(n,ko))})),Mi=De((function(n){var r=Si(n);return ko(r)&&(r=t),ru(st(n,ko),Hu(r,2))})),Fi=De((function(n){var r="function"==typeof(r=Si(n))?r:t;return ru(st(n,ko),t,r)})),Pi=De(Di),Zi=De((function(n){var r="function"==typeof(r=1<(r=n.length)?n[r-1]:t)?(n.pop(),r):t;return $i(n,r)}));function Ki(n){return(n=Rr(n)).__chain__=!0,n}function Vi(n,t){return t(n)}var Gi=Fu((function(n){function r(t){return Hr(t,n)}var e=n.length,u=e?n[0]:0,i=this.__wrapped__;return!(1<e||this.__actions__.length)&&i instanceof Lr&&ii(u)?((i=i.slice(u,+u+(e?1:0))).__actions__.push({func:Vi,args:[r],thisArg:t}),new Wr(i,this.__chain__).thru((function(n){return e&&!n.length&&n.push(t),n}))):this.thru(r)})),Hi=du((function(n,t,r){zn.call(n,r)?++n[r]:Gr(n,r,1)})),Ji=Ou(Ii),Yi=Ou(Ri);function Qi(n,t){return(jo(n)?ct:te)(n,Hu(t,3))}function Xi(n,t){return(jo(n)?at:re)(n,Hu(t,3))}var no=du((function(n,t,r){zn.call(n,r)?n[r].push(t):Gr(n,r,[t])})),to=De((function(n,t,r){var e=-1,i="function"==typeof t,o=Oo(n)?u(n.length):[];return te(n,(function(n){o[++e]=i?ot(t,n,r):be(n,t,r)})),o})),ro=du((function(n,t,r){Gr(n,r,t)}));function eo(n,t){return(jo(n)?_t:Ie)(n,Hu(t,3))}var uo=du((function(n,t,r){n[r?0:1].push(t)}),(function(){return[[],[]]})),io=De((function(n,t){var r;return null==n?[]:(1<(r=t.length)&&oi(n,t[0],t[1])?t=[]:2<r&&oi(t[0],t[1],t[2])&&(t=[t[0]]),We(n,oe(t,1),[]))})),oo=tr||function(){return Jn.Date.now()};function fo(n,r,e){return r=e?t:r,r=n&&null==r?n.length:r,Du(n,128,t,t,t,t,r)}function co(n,r){var e;if("function"!=typeof r)throw new An(f);return n=Ko(n),function(){return 0<--n&&(e=r.apply(this,arguments)),n<=1&&(r=t),e}}var ao=De((function(n,t,r){var e,u=1;return r.length&&(e=Ft(r,Gu(ao)),u|=32),Du(n,u,t,r,e)})),lo=De((function(n,t,r){var e,u=3;return r.length&&(e=Ft(r,Gu(lo)),u|=32),Du(t,u,n,r,e)}));function so(n,r,e){var u,i,o,c,a,l,s=0,h=!1,p=!1,_=!0;if("function"!=typeof n)throw new An(f);function v(r){var e=u,o=i;return u=i=t,s=r,c=n.apply(o,e)}function g(n){var e=n-l;return l===t||r<=e||e<0||p&&o<=n-s}function y(){var n,t=oo();if(g(t))return d(t);a=yi(y,(n=r-((t=t)-l),p?lr(n,o-(t-s)):n))}function d(n){return a=t,_&&u?v(n):(u=i=t,c)}function b(){var n=oo(),e=g(n);if(u=arguments,i=this,l=n,e){if(a===t)return s=n=l,a=yi(y,r),h?v(n):c;if(p)return au(a),a=yi(y,r),v(l)}return a===t&&(a=yi(y,r)),c}return r=Go(r)||0,Wo(e)&&(h=!!e.leading,o=(p="maxWait"in e)?ar(Go(e.maxWait)||0,r):o,_="trailing"in e?!!e.trailing:_),b.cancel=function(){a!==t&&au(a),s=0,u=l=i=a=t},b.flush=function(){return a===t?c:d(oo())},b}tr=De((function(n,t){return Xr(n,1,t)}));var ho=De((function(n,t,r){return Xr(n,Go(t)||0,r)}));function po(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new An(f);function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}return r.cache=new(po.Cache||Br),r}function _o(n){if("function"!=typeof n)throw new An(f);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}po.Cache=Br;fu=fu((function(n,t){var r=(t=1==t.length&&jo(t[0])?_t(t[0],Wt(Hu())):_t(oe(t,1),Wt(Hu()))).length;return De((function(e){for(var u=-1,i=lr(e.length,r);++u<i;)e[u]=t[u].call(this,e[u]);return ot(n,this,e)}))}));var vo=De((function(n,r){var e=Ft(r,Gu(vo));return Du(n,32,t,r,e)})),go=De((function(n,r){var e=Ft(r,Gu(go));return Du(n,64,t,r,e)})),yo=Fu((function(n,r){return Du(n,256,t,t,t,r)}));function bo(n,t){return n===t||n!=n&&t!=t}var wo=Lu(ve),mo=Lu((function(n,t){return t<=n})),xo=we(function(){return arguments}())?we:function(n){return Lo(n)&&zn.call(n,"callee")&&!bt.call(n,"callee")},jo=u.isArray,Ao=nt?Wt(nt):function(n){return Lo(n)&&_e(n)==E};function Oo(n){return null!=n&&So(n.length)&&!Eo(n)}function ko(n){return Lo(n)&&Oo(n)}var Io=kn||Hf;kn=tt?Wt(tt):function(n){return Lo(n)&&_e(n)==g};function Ro(n){var t;return!!Lo(n)&&((t=_e(n))==y||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!Bo(n))}function Eo(n){return!!Wo(n)&&((n=_e(n))==d||n==b||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function zo(n){return"number"==typeof n&&n==Ko(n)}function So(n){return"number"==typeof n&&-1<n&&n%1==0&&n<=l}function Wo(t){var r=n(t);return null!=t&&("object"==r||"function"==r)}function Lo(t){return null!=t&&"object"==n(t)}var Co=rt?Wt(rt):function(n){return Lo(n)&&ti(n)==w};function Uo(n){return"number"==typeof n||Lo(n)&&_e(n)==m}function Bo(n){return!(!Lo(n)||_e(n)!=x)&&(null===(n=Yn(n))||"function"==typeof(n=zn.call(n,"constructor")&&n.constructor)&&n instanceof n&&En.call(n)==Cn)}var To=et?Wt(et):function(n){return Lo(n)&&_e(n)==A},Do=ut?Wt(ut):function(n){return Lo(n)&&ti(n)==O};function $o(n){return"string"==typeof n||!jo(n)&&Lo(n)&&_e(n)==k}function No(t){return"symbol"==n(t)||Lo(t)&&_e(t)==I}var qo=it?Wt(it):function(n){return Lo(n)&&So(n.length)&&!!Fn[_e(n)]},Mo=Lu(ke),Fo=Lu((function(n,t){return n<=t}));function Po(n){if(!n)return[];if(Oo(n))return($o(n)?Kt:gu)(n);if(Yt&&n[Yt]){for(var t,r=n[Yt](),e=[];!(t=r.next()).done;)e.push(t.value);return e}var u=ti(n);return(u==w?qt:u==O?Pt:bf)(n)}function Zo(n){return n?(n=Go(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function Ko(n){var t=(n=Zo(n))%1;return n==n?t?n-t:n:0}function Vo(n){return n?Jr(Ko(n),0,s):0}function Go(n){if("number"==typeof n)return n;if(No(n))return NaN;if("string"!=typeof(n=Wo(n)?Wo(t="function"==typeof n.valueOf?n.valueOf():n)?t+"":t:n))return 0===n?n:+n;n=St(n);var t=pn.test(n);return t||vn.test(n)?Vn(n.slice(2),t?2:8):hn.test(n)?NaN:+n}function Ho(n){return yu(n,sf(n))}function Jo(n){return null==n?"":Je(n)}var Yo=bu((function(n,t){if(li(t)||Oo(t))yu(t,lf(t),n);else for(var r in t)zn.call(t,r)&&Pr(n,r,t[r])})),Qo=bu((function(n,t){yu(t,sf(t),n)})),Xo=bu((function(n,t,r,e){yu(t,sf(t),n,e)})),nf=bu((function(n,t,r,e){yu(t,lf(t),n,e)})),tf=Fu(Hr),rf=De((function(n,r){n=mn(n);var e=-1,u=r.length,i=2<u?r[2]:t;for(i&&oi(r[0],r[1],i)&&(u=1);++e<u;)for(var o=r[e],f=sf(o),c=-1,a=f.length;++c<a;){var l=f[c],s=n[l];(s===t||bo(s,In[l])&&!zn.call(n,l))&&(n[l]=o[l])}return n})),ef=De((function(n){return n.push(t,Nu),ot(pf,t,n)}));function uf(n,r,e){return(n=null==n?t:he(n,r))===t?e:n}function of(n,t){return null!=n&&ri(n,t,ye)}var ff=Ru((function(n,t,r){n[t=null!=t&&"function"!=typeof t.toString?Ln.call(t):t]=r}),Lf(Bf)),cf=Ru((function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ln.call(t)),zn.call(n,t)?n[t].push(r):n[t]=[r]}),Hu),af=De(be);function lf(n){return(Oo(n)?$r:Oe)(n)}function sf(n){return Oo(n)?$r(n,!0):function(n){if(!Wo(n)){var t=n,r=[];if(null!=t)for(var e in mn(t))r.push(e);return r}var u,i=li(n),o=[];for(u in n)("constructor"!=u||!i&&zn.call(n,u))&&o.push(u);return o}(n)}var hf=bu((function(n,t,r){ze(n,t,r)})),pf=bu((function(n,t,r,e){ze(n,t,r,e)})),_f=Fu((function(n,t){var r={};if(null!=n)for(var e=!1,u=(t=_t(t,(function(t){return t=ou(t,n),e=e||1<t.length,t})),yu(n,Zu(n),r),e&&(r=Yr(r,7,qu)),t.length);u--;)Qe(r,t[u]);return r})),vf=Fu((function(n,t){return null==n?{}:Le(r=n,t,(function(n,t){return of(r,t)}));var r}));function gf(n,t){var r;return null==n?{}:(r=_t(Zu(n),(function(n){return[n]})),t=Hu(t),Le(n,r,(function(n,r){return t(n,r[0])})))}var yf=Tu(lf),df=Tu(sf);function bf(n){return null==n?[]:Lt(n,lf(n))}var wf=ju((function(n,t,r){return t=t.toLowerCase(),n+(r?mf(t):t)}));function mf(n){return Ef(Jo(n).toLowerCase())}function xf(n){return(n=Jo(n))&&n.replace(yn,Tt).replace(Bn,"")}var jf=ju((function(n,t,r){return n+(r?"-":"")+t.toLowerCase()})),Af=ju((function(n,t,r){return n+(r?" ":"")+t.toLowerCase()})),Of=xu("toLowerCase"),kf=ju((function(n,t,r){return n+(r?"_":"")+t.toLowerCase()})),If=ju((function(n,t,r){return n+(r?" ":"")+Ef(t)})),Rf=ju((function(n,t,r){return n+(r?" ":"")+t.toUpperCase()})),Ef=xu("toUpperCase");function zf(n,r,e){return n=Jo(n),(r=e?t:r)===t?(e=n,Nn.test(e)?n.match(Dn)||[]:n.match(fn)||[]):n.match(r)||[]}var Sf=De((function(n,r){try{return ot(n,t,r)}catch(n){return Ro(n)?n:new o(n)}})),Wf=Fu((function(n,t){return ct(t,(function(t){t=Ai(t),Gr(n,t,ao(n[t],n))})),n}));function Lf(n){return function(){return n}}var Cf=ku(),Uf=ku(!0);function Bf(n){return n}function Tf(n){return Ae("function"==typeof n?n:Yr(n,1))}var Df=De((function(n,t){return function(r){return be(r,n,t)}})),$f=De((function(n,t){return function(r){return be(n,r,t)}}));function Nf(n,t,r){var e=lf(t),u=se(t,e),i=(null!=r||Wo(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=se(t,lf(t))),!(Wo(r)&&"chain"in r&&!r.chain)),o=Eo(n);return ct(u,(function(r){var e=t[r];n[r]=e,o&&(n.prototype[r]=function(){var t,r=this.__chain__;return i||r?(((t=n(this.__wrapped__)).__actions__=gu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),t.__chain__=r,t):e.apply(n,vt([this.value()],arguments))})})),n}function qf(){}var Mf=zu(_t),Ff=zu(lt),Pf=zu(dt);function Zf(n){return fi(n)?kt(Ai(n)):(t=n,function(n){return he(n,t)});var t}var Kf=Wu(),Vf=Wu(!0);function Gf(){return[]}function Hf(){return!1}var Jf,Yf=Eu((function(n,t){return n+t}),0),Qf=Uu("ceil"),Xf=Eu((function(n,t){return n/t}),1),nc=Uu("floor"),tc=Eu((function(n,t){return n*t}),1),rc=Uu("round"),ec=Eu((function(n,t){return n-t}),0);return Rr.after=function(n,t){if("function"!=typeof t)throw new An(f);return n=Ko(n),function(){if(--n<1)return t.apply(this,arguments)}},Rr.ary=fo,Rr.assign=Yo,Rr.assignIn=Qo,Rr.assignInWith=Xo,Rr.assignWith=nf,Rr.at=tf,Rr.before=co,Rr.bind=ao,Rr.bindAll=Wf,Rr.bindKey=lo,Rr.castArray=function(){var n;return arguments.length?jo(n=arguments[0])?n:[n]:[]},Rr.chain=Ki,Rr.chunk=function(n,r,e){r=(e?oi(n,r,e):r===t)?1:ar(Ko(r),0);var i=null==n?0:n.length;if(!i||r<1)return[];for(var o=0,f=0,c=u(er(i/r));o<i;)c[f++]=Pe(n,o,o+=r);return c},Rr.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},Rr.concat=function(){var n=arguments.length;if(!n)return[];for(var t=u(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return vt(jo(r)?gu(r):[r],oe(t,1))},Rr.cond=function(n){var t=null==n?0:n.length,r=Hu();return n=t?_t(n,(function(n){if("function"!=typeof n[1])throw new An(f);return[r(n[0]),n[1]]})):[],De((function(r){for(var e=-1;++e<t;){var u=n[e];if(ot(u[0],this,r))return ot(u[1],this,r)}}))},Rr.conforms=function(n){return t=Yr(n,1),r=lf(t),function(n){return Qr(n,t,r)};var t,r},Rr.constant=Lf,Rr.countBy=Hi,Rr.create=function(n,t){return n=Er(n),null==t?n:Vr(n,t)},Rr.curry=function n(r,e,u){return(r=Du(r,8,t,t,t,t,t,e=u?t:e)).placeholder=n.placeholder,r},Rr.curryRight=function n(r,e,u){return(r=Du(r,16,t,t,t,t,t,e=u?t:e)).placeholder=n.placeholder,r},Rr.debounce=so,Rr.defaults=rf,Rr.defaultsDeep=ef,Rr.defer=tr,Rr.delay=ho,Rr.difference=i,Rr.differenceBy=gr,Rr.differenceWith=e,Rr.drop=function(n,r,e){var u=null==n?0:n.length;return u?Pe(n,(r=e||r===t?1:Ko(r))<0?0:r,u):[]},Rr.dropRight=function(n,r,e){var u=null==n?0:n.length;return u?Pe(n,0,(r=u-(r=e||r===t?1:Ko(r)))<0?0:r):[]},Rr.dropRightWhile=function(n,t){return n&&n.length?nu(n,Hu(t,3),!0,!0):[]},Rr.dropWhile=function(n,t){return n&&n.length?nu(n,Hu(t,3),!0):[]},Rr.fill=function(n,r,e,u){if(!(a=null==n?0:n.length))return[];e&&"number"!=typeof e&&oi(n,r,e)&&(e=0,u=a);var i=n,o=r,f=e,c=u,a=i.length;for((f=Ko(f))<0&&(f=a<-f?0:a+f),(c=c===t||a<c?a:Ko(c))<0&&(c+=a),c=c<f?0:Vo(c);f<c;)i[f++]=o;return i},Rr.filter=function(n,t){return(jo(n)?st:ie)(n,Hu(t,3))},Rr.flatMap=function(n,t){return oe(eo(n,t),1)},Rr.flatMapDeep=function(n,t){return oe(eo(n,t),1/0)},Rr.flatMapDepth=function(n,r,e){return e=e===t?1:Ko(e),oe(eo(n,r),e)},Rr.flatten=Ei,Rr.flattenDeep=function(n){return null!=n&&n.length?oe(n,1/0):[]},Rr.flattenDepth=function(n,r){return null!=n&&n.length?oe(n,r=r===t?1:Ko(r)):[]},Rr.flip=function(n){return Du(n,512)},Rr.flow=Cf,Rr.flowRight=Uf,Rr.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},Rr.functions=function(n){return null==n?[]:se(n,lf(n))},Rr.functionsIn=function(n){return null==n?[]:se(n,sf(n))},Rr.groupBy=no,Rr.initial=function(n){return null!=n&&n.length?Pe(n,0,-1):[]},Rr.intersection=Rn,Rr.intersectionBy=rr,Rr.intersectionWith=Zn,Rr.invert=ff,Rr.invertBy=cf,Rr.invokeMap=to,Rr.iteratee=Tf,Rr.keyBy=ro,Rr.keys=lf,Rr.keysIn=sf,Rr.map=eo,Rr.mapKeys=function(n,t){var r={};return t=Hu(t,3),ae(n,(function(n,e,u){Gr(r,t(n,e,u),n)})),r},Rr.mapValues=function(n,t){var r={};return t=Hu(t,3),ae(n,(function(n,e,u){Gr(r,e,t(n,e,u))})),r},Rr.matches=function(n){return Re(Yr(n,1))},Rr.matchesProperty=function(n,t){return Ee(n,Yr(t,1))},Rr.memoize=po,Rr.merge=hf,Rr.mergeWith=pf,Rr.method=Df,Rr.methodOf=$f,Rr.mixin=Nf,Rr.negate=_o,Rr.nthArg=function(n){return n=Ko(n),De((function(t){return Se(t,n)}))},Rr.omit=_f,Rr.omitBy=function(n,t){return gf(n,_o(Hu(t)))},Rr.once=function(n){return co(2,n)},Rr.orderBy=function(n,r,e,u){return null==n?[]:We(n,r=jo(r)?r:null==r?[]:[r],e=jo(e=u?t:e)?e:null==e?[]:[e])},Rr.over=Mf,Rr.overArgs=fu,Rr.overEvery=Ff,Rr.overSome=Pf,Rr.partial=vo,Rr.partialRight=go,Rr.partition=uo,Rr.pick=vf,Rr.pickBy=gf,Rr.property=Zf,Rr.propertyOf=function(n){return function(r){return null==n?t:he(n,r)}},Rr.pull=nr,Rr.pullAll=Wi,Rr.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?Ce(n,t,Hu(r,2)):n},Rr.pullAllWith=function(n,r,e){return n&&n.length&&r&&r.length?Ce(n,r,t,e):n},Rr.pullAt=Li,Rr.range=Kf,Rr.rangeRight=Vf,Rr.rearg=yo,Rr.reject=function(n,t){return(jo(n)?st:ie)(n,_o(Hu(t,3)))},Rr.remove=function(n,t){var r=[];if(n&&n.length){var e=-1,u=[],i=n.length;for(t=Hu(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}Ue(n,u)}return r},Rr.rest=function(n,r){if("function"!=typeof n)throw new An(f);return De(n,r=r===t?r:Ko(r))},Rr.reverse=Ci,Rr.sampleSize=function(n,r,e){return r=(e?oi(n,r,e):r===t)?1:Ko(r),(jo(n)?qr:Ne)(n,r)},Rr.set=function(n,t,r){return null==n?n:qe(n,t,r)},Rr.setWith=function(n,r,e,u){return u="function"==typeof u?u:t,null==n?n:qe(n,r,e,u)},Rr.shuffle=function(n){return(jo(n)?Mr:Fe)(n)},Rr.slice=function(n,r,e){var u=null==n?0:n.length;return u?(e=e&&"number"!=typeof e&&oi(n,r,e)?(r=0,u):(r=null==r?0:Ko(r),e===t?u:Ko(e)),Pe(n,r,e)):[]},Rr.sortBy=io,Rr.sortedUniq=function(n){return n&&n.length?Ge(n):[]},Rr.sortedUniqBy=function(n,t){return n&&n.length?Ge(n,Hu(t,2)):[]},Rr.split=function(n,r,e){return e&&"number"!=typeof e&&oi(n,r,e)&&(r=e=t),(e=e===t?s:e>>>0)?(n=Jo(n))&&("string"==typeof r||null!=r&&!To(r))&&!(r=Je(r))&&Nt(n)?cu(Kt(n),0,e):n.split(r,e):[]},Rr.spread=function(n,t){if("function"!=typeof n)throw new An(f);return t=null==t?0:ar(Ko(t),0),De((function(r){var e=r[t];r=cu(r,0,t);return e&&vt(r,e),ot(n,this,r)}))},Rr.tail=function(n){var t=null==n?0:n.length;return t?Pe(n,1,t):[]},Rr.take=function(n,r,e){return n&&n.length?Pe(n,0,(r=e||r===t?1:Ko(r))<0?0:r):[]},Rr.takeRight=function(n,r,e){var u=null==n?0:n.length;return u?Pe(n,(r=u-(r=e||r===t?1:Ko(r)))<0?0:r,u):[]},Rr.takeRightWhile=function(n,t){return n&&n.length?nu(n,Hu(t,3),!1,!0):[]},Rr.takeWhile=function(n,t){return n&&n.length?nu(n,Hu(t,3)):[]},Rr.tap=function(n,t){return t(n),n},Rr.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new An(f);return Wo(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),so(n,t,{leading:e,maxWait:t,trailing:u})},Rr.thru=Vi,Rr.toArray=Po,Rr.toPairs=yf,Rr.toPairsIn=df,Rr.toPath=function(n){return jo(n)?_t(n,Ai):No(n)?[n]:gu(ji(Jo(n)))},Rr.toPlainObject=Ho,Rr.transform=function(n,t,r){var e,u=jo(n),i=u||Io(n)||qo(n);return t=Hu(t,4),null==r&&(e=n&&n.constructor,r=i?u?new e:[]:Wo(n)&&Eo(e)?Er(Yn(n)):{}),(i?ct:ae)(n,(function(n,e,u){return t(r,n,e,u)})),r},Rr.unary=function(n){return fo(n,1)},Rr.union=Ui,Rr.unionBy=Bi,Rr.unionWith=Ti,Rr.uniq=function(n){return n&&n.length?Ye(n):[]},Rr.uniqBy=function(n,t){return n&&n.length?Ye(n,Hu(t,2)):[]},Rr.uniqWith=function(n,r){return r="function"==typeof r?r:t,n&&n.length?Ye(n,t,r):[]},Rr.unset=function(n,t){return null==n||Qe(n,t)},Rr.unzip=Di,Rr.unzipWith=$i,Rr.update=function(n,t,r){return null==n?n:Xe(n,t,iu(r))},Rr.updateWith=function(n,r,e,u){return u="function"==typeof u?u:t,null==n?n:Xe(n,r,iu(e),u)},Rr.values=bf,Rr.valuesIn=function(n){return null==n?[]:Lt(n,sf(n))},Rr.without=Ni,Rr.words=zf,Rr.wrap=function(n,t){return vo(iu(t),n)},Rr.xor=qi,Rr.xorBy=Mi,Rr.xorWith=Fi,Rr.zip=Pi,Rr.zipObject=function(n,t){return eu(n||[],t||[],Pr)},Rr.zipObjectDeep=function(n,t){return eu(n||[],t||[],qe)},Rr.zipWith=Zi,Rr.entries=yf,Rr.entriesIn=df,Rr.extend=Qo,Rr.extendWith=Xo,Nf(Rr,Rr),Rr.add=Yf,Rr.attempt=Sf,Rr.camelCase=wf,Rr.capitalize=mf,Rr.ceil=Qf,Rr.clamp=function(n,r,e){return e===t&&(e=r,r=t),e!==t&&(e=(e=Go(e))==e?e:0),r!==t&&(r=(r=Go(r))==r?r:0),Jr(Go(n),r,e)},Rr.clone=function(n){return Yr(n,4)},Rr.cloneDeep=function(n){return Yr(n,5)},Rr.cloneDeepWith=function(n,r){return Yr(n,5,r="function"==typeof r?r:t)},Rr.cloneWith=function(n,r){return Yr(n,4,r="function"==typeof r?r:t)},Rr.conformsTo=function(n,t){return null==t||Qr(n,t,lf(t))},Rr.deburr=xf,Rr.defaultTo=function(n,t){return null==n||n!=n?t:n},Rr.divide=Xf,Rr.endsWith=function(n,r,e){n=Jo(n),r=Je(r);var u=n.length;u=e=e===t?u:Jr(Ko(e),0,u);return 0<=(e-=r.length)&&n.slice(e,u)==r},Rr.eq=bo,Rr.escape=function(n){return(n=Jo(n))&&K.test(n)?n.replace(P,Dt):n},Rr.escapeRegExp=function(n){return(n=Jo(n))&&nn.test(n)?n.replace(X,"\\$&"):n},Rr.every=function(n,r,e){return(jo(n)?lt:ee)(n,Hu(r=e&&oi(n,r,e)?t:r,3))},Rr.find=Ji,Rr.findIndex=Ii,Rr.findKey=function(n,t){return wt(n,Hu(t,3),ae)},Rr.findLast=Yi,Rr.findLastIndex=Ri,Rr.findLastKey=function(n,t){return wt(n,Hu(t,3),le)},Rr.floor=nc,Rr.forEach=Qi,Rr.forEachRight=Xi,Rr.forIn=function(n,t){return null==n?n:fe(n,Hu(t,3),sf)},Rr.forInRight=function(n,t){return null==n?n:ce(n,Hu(t,3),sf)},Rr.forOwn=function(n,t){return n&&ae(n,Hu(t,3))},Rr.forOwnRight=function(n,t){return n&&le(n,Hu(t,3))},Rr.get=uf,Rr.gt=wo,Rr.gte=mo,Rr.has=function(n,t){return null!=n&&ri(n,t,ge)},Rr.hasIn=of,Rr.head=zi,Rr.identity=Bf,Rr.includes=function(n,t,r,e){return n=Oo(n)?n:bf(n),r=r&&!e?Ko(r):0,e=n.length,r<0&&(r=ar(e+r,0)),$o(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<xt(n,t,r)},Rr.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?xt(n,t,n=(n=null==r?0:Ko(r))<0?ar(e+n,0):n):-1},Rr.inRange=function(n,r,e){return r=Zo(r),e===t?(e=r,r=0):e=Zo(e),(n=n=Go(n))>=lr(r=r,e=e)&&n<ar(r,e)},Rr.invoke=af,Rr.isArguments=xo,Rr.isArray=jo,Rr.isArrayBuffer=Ao,Rr.isArrayLike=Oo,Rr.isArrayLikeObject=ko,Rr.isBoolean=function(n){return!0===n||!1===n||Lo(n)&&_e(n)==v},Rr.isBuffer=Io,Rr.isDate=kn,Rr.isElement=function(n){return Lo(n)&&1===n.nodeType&&!Bo(n)},Rr.isEmpty=function(n){if(null!=n){if(Oo(n)&&(jo(n)||"string"==typeof n||"function"==typeof n.splice||Io(n)||qo(n)||xo(n)))return!n.length;var t,r=ti(n);if(r==w||r==O)return!n.size;if(li(n))return!Oe(n).length;for(t in n)if(zn.call(n,t))return!1}return!0},Rr.isEqual=function(n,t){return me(n,t)},Rr.isEqualWith=function(n,r,e){var u=(e="function"==typeof e?e:t)?e(n,r):t;return u===t?me(n,r,t,e):!!u},Rr.isError=Ro,Rr.isFinite=function(n){return"number"==typeof n&&or(n)},Rr.isFunction=Eo,Rr.isInteger=zo,Rr.isLength=So,Rr.isMap=Co,Rr.isMatch=function(n,t){return n===t||xe(n,t,Yu(t))},Rr.isMatchWith=function(n,r,e){return e="function"==typeof e?e:t,xe(n,r,Yu(r),e)},Rr.isNaN=function(n){return Uo(n)&&n!=+n},Rr.isNative=function(n){if(ai(n))throw new o("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return je(n)},Rr.isNil=function(n){return null==n},Rr.isNull=function(n){return null===n},Rr.isNumber=Uo,Rr.isObject=Wo,Rr.isObjectLike=Lo,Rr.isPlainObject=Bo,Rr.isRegExp=To,Rr.isSafeInteger=function(n){return zo(n)&&-l<=n&&n<=l},Rr.isSet=Do,Rr.isString=$o,Rr.isSymbol=No,Rr.isTypedArray=qo,Rr.isUndefined=function(n){return n===t},Rr.isWeakMap=function(n){return Lo(n)&&ti(n)==R},Rr.isWeakSet=function(n){return Lo(n)&&"[object WeakSet]"==_e(n)},Rr.join=function(n,t){return null==n?"":fr.call(n,t)},Rr.kebabCase=jf,Rr.last=Si,Rr.lastIndexOf=function(n,r,e){var u=null==n?0:n.length;if(!u)return-1;var i=u;if(e!==t&&(i=(i=Ko(e))<0?ar(u+i,0):lr(i,u-1)),r!=r)return mt(n,At,i,!0);for(var o=n,f=r,c=i+1;c--;)if(o[c]===f)return c;return c},Rr.lowerCase=Af,Rr.lowerFirst=Of,Rr.lt=Mo,Rr.lte=Fo,Rr.max=function(n){return n&&n.length?ue(n,Bf,ve):t},Rr.maxBy=function(n,r){return n&&n.length?ue(n,Hu(r,2),ve):t},Rr.mean=function(n){return Ot(n,Bf)},Rr.meanBy=function(n,t){return Ot(n,Hu(t,2))},Rr.min=function(n){return n&&n.length?ue(n,Bf,ke):t},Rr.minBy=function(n,r){return n&&n.length?ue(n,Hu(r,2),ke):t},Rr.stubArray=Gf,Rr.stubFalse=Hf,Rr.stubObject=function(){return{}},Rr.stubString=function(){return""},Rr.stubTrue=function(){return!0},Rr.multiply=tc,Rr.nth=function(n,r){return n&&n.length?Se(n,Ko(r)):t},Rr.noConflict=function(){return Jn._===this&&(Jn._=Tn),this},Rr.noop=qf,Rr.now=oo,Rr.pad=function(n,t,r){n=Jo(n);var e=(t=Ko(t))?Zt(n):0;return!t||t<=e?n:Su(ur(t=(t-e)/2),r)+n+Su(er(t),r)},Rr.padEnd=function(n,t,r){n=Jo(n);var e=(t=Ko(t))?Zt(n):0;return t&&e<t?n+Su(t-e,r):n},Rr.padStart=function(n,t,r){n=Jo(n);var e=(t=Ko(t))?Zt(n):0;return t&&e<t?Su(t-e,r)+n:n},Rr.parseInt=function(n,t,r){return t=r||null==t?0:t&&+t,hr(Jo(n).replace(tn,""),t||0)},Rr.random=function(n,r,e){var u;return e&&"boolean"!=typeof e&&oi(n,r,e)&&(r=e=t),e===t&&("boolean"==typeof r?(e=r,r=t):"boolean"==typeof n&&(e=n,n=t)),n===t&&r===t?(n=0,r=1):(n=Zo(n),r===t?(r=n,n=0):r=Zo(r)),r<n&&(u=n,n=r,r=u),e||n%1||r%1?(u=pr(),lr(n+u*(r-n+Kn("1e-"+((u+"").length-1))),r)):Be(n,r)},Rr.reduce=function(n,t,r){var e=jo(n)?gt:Rt,u=arguments.length<3;return e(n,Hu(t,4),r,u,te)},Rr.reduceRight=function(n,t,r){var e=jo(n)?yt:Rt,u=arguments.length<3;return e(n,Hu(t,4),r,u,re)},Rr.repeat=function(n,r,e){return r=(e?oi(n,r,e):r===t)?1:Ko(r),Te(Jo(n),r)},Rr.replace=function(){var n=arguments,t=Jo(n[0]);return n.length<3?t:t.replace(n[1],n[2])},Rr.result=function(n,r,e){var u=-1,i=(r=ou(r,n)).length;for(i||(i=1,n=t);++u<i;){var o=null==n?t:n[Ai(r[u])];o===t&&(u=i,o=e),n=Eo(o)?o.call(n):o}return n},Rr.round=rc,Rr.runInContext=r,Rr.sample=function(n){return(jo(n)?Nr:$e)(n)},Rr.size=function(n){var t;return null==n?0:Oo(n)?$o(n)?Zt(n):n.length:(t=ti(n))==w||t==O?n.size:Oe(n).length},Rr.snakeCase=kf,Rr.some=function(n,r,e){return(jo(n)?dt:Ze)(n,Hu(r=e&&oi(n,r,e)?t:r,3))},Rr.sortedIndex=function(n,t){return Ke(n,t)},Rr.sortedIndexBy=function(n,t,r){return Ve(n,t,Hu(r,2))},Rr.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Ke(n,t);if(e<r&&bo(n[e],t))return e}return-1},Rr.sortedLastIndex=function(n,t){return Ke(n,t,!0)},Rr.sortedLastIndexBy=function(n,t,r){return Ve(n,t,Hu(r,2),!0)},Rr.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Ke(n,t,!0)-1;if(bo(n[r],t))return r}return-1},Rr.startCase=If,Rr.startsWith=function(n,t,r){return n=Jo(n),r=null==r?0:Jr(Ko(r),0,n.length),t=Je(t),n.slice(r,r+t.length)==t},Rr.subtract=ec,Rr.sum=function(n){return n&&n.length?Et(n,Bf):0},Rr.sumBy=function(n,t){return n&&n.length?Et(n,Hu(t,2)):0},Rr.template=function(n,r,e){var u,i,f=Rr.templateSettings;e&&oi(n,r,e)&&(r=t),n=Jo(n),r=Xo({},r,f,$u);var c=lf(e=Xo({},r.imports,f.imports,$u)),a=Lt(e,c),l=0,s=(f=r.interpolate||dn,"__p += '"),h=(e=xn((r.escape||dn).source+"|"+f.source+"|"+(f===H?ln:dn).source+"|"+(r.evaluate||dn).source+"|$","g"),"//# sourceURL="+(zn.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mn+"]")+"\n");if(n.replace(e,(function(t,r,e,o,f,c){return e=e||o,s+=n.slice(l,c).replace(bn,$t),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),s+="';\n",f=zn.call(r,"variable")&&r.variable){if(cn.test(f))throw new o("Invalid `variable` option passed into `_.template`")}else s="with (obj) {\n"+s+"\n}\n";if(s=(i?s.replace(N,""):s).replace(q,"$1").replace(M,"$1;"),s="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}",(e=Sf((function(){return rn(c,h+"return "+s).apply(t,a)}))).source=s,Ro(e))throw e;return e},Rr.times=function(n,t){if((n=Ko(n))<1||l<n)return[];var r=s,e=lr(n,s);for(e=(t=Hu(t),n-=s,zt(e,t));++r<n;)t(r);return e},Rr.toFinite=Zo,Rr.toInteger=Ko,Rr.toLength=Vo,Rr.toLower=function(n){return Jo(n).toLowerCase()},Rr.toNumber=Go,Rr.toSafeInteger=function(n){return n?Jr(Ko(n),-l,l):0===n?n:0},Rr.toString=Jo,Rr.toUpper=function(n){return Jo(n).toUpperCase()},Rr.trim=function(n,r,e){return(n=Jo(n))&&(e||r===t)?St(n):n&&(r=Je(r))?cu(e=Kt(n),Ut(e,r=Kt(r)),Bt(e,r)+1).join(""):n},Rr.trimEnd=function(n,r,e){return(n=Jo(n))&&(e||r===t)?n.slice(0,Vt(n)+1):n&&(r=Je(r))?cu(e=Kt(n),0,Bt(e,Kt(r))+1).join(""):n},Rr.trimStart=function(n,r,e){return(n=Jo(n))&&(e||r===t)?n.replace(tn,""):n&&(r=Je(r))?cu(e=Kt(n),Ut(e,Kt(r))).join(""):n},Rr.truncate=function(n,r){var e,u=30,i="...";Wo(r)&&(e="separator"in r?r.separator:e,u="length"in r?Ko(r.length):u,i="omission"in r?Je(r.omission):i),r=(n=Jo(n)).length;if((r=Nt(n)?(o=Kt(n)).length:r)<=u)return n;if((r=u-Zt(i))<1)return i;var o;u=o?cu(o,0,r).join(""):n.slice(0,r);if(e!==t)if(o&&(r+=u.length-r),To(e)){if(n.slice(r).search(e)){var f,c=u;for((e=e.global?e:xn(e.source,Jo(sn.exec(e))+"g")).lastIndex=0;f=e.exec(c);)var a=f.index;u=u.slice(0,a===t?r:a)}}else n.indexOf(Je(e),r)!=r&&-1<(o=u.lastIndexOf(e))&&(u=u.slice(0,o));return u+i},Rr.unescape=function(n){return(n=Jo(n))&&Z.test(n)?n.replace(F,Gt):n},Rr.uniqueId=function(n){var t=++Sn;return Jo(n)+t},Rr.upperCase=Rf,Rr.upperFirst=Ef,Rr.each=Qi,Rr.eachRight=Xi,Rr.first=zi,Nf(Rr,(Jf={},ae(Rr,(function(n,t){zn.call(Rr.prototype,t)||(Jf[t]=n)})),Jf),{chain:!1}),Rr.VERSION="4.17.21",ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(n){Rr[n].placeholder=Rr})),ct(["drop","take"],(function(n,r){Lr.prototype[n]=function(e){e=e===t?1:ar(Ko(e),0);var u=this.__filtered__&&!r?new Lr(this):this.clone();return u.__filtered__?u.__takeCount__=lr(e,u.__takeCount__):u.__views__.push({size:lr(e,s),type:n+(u.__dir__<0?"Right":"")}),u},Lr.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}})),ct(["filter","map","takeWhile"],(function(n,t){var r=t+1,e=1==r||3==r;Lr.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:Hu(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}})),ct(["head","last"],(function(n,t){var r="take"+(t?"Right":"");Lr.prototype[n]=function(){return this[r](1).value()[0]}})),ct(["initial","tail"],(function(n,t){var r="drop"+(t?"":"Right");Lr.prototype[n]=function(){return this.__filtered__?new Lr(this):this[r](1)}})),Lr.prototype.compact=function(){return this.filter(Bf)},Lr.prototype.find=function(n){return this.filter(n).head()},Lr.prototype.findLast=function(n){return this.reverse().find(n)},Lr.prototype.invokeMap=De((function(n,t){return"function"==typeof n?new Lr(this):this.map((function(r){return be(r,n,t)}))})),Lr.prototype.reject=function(n){return this.filter(_o(Hu(n)))},Lr.prototype.slice=function(n,r){n=Ko(n);var e=this;return e.__filtered__&&(0<n||r<0)?new Lr(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),r!==t?(r=Ko(r))<0?e.dropRight(-r):e.take(r-n):e)},Lr.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Lr.prototype.toArray=function(){return this.take(s)},ae(Lr.prototype,(function(n,r){var e=/^(?:filter|find|map|reject)|While$/.test(r),u=/^(?:head|last)$/.test(r),i=Rr[u?"take"+("last"==r?"Right":""):r],o=u||/^find/.test(r);i&&(Rr.prototype[r]=function(){function r(n){return n=i.apply(Rr,vt([n],a)),u&&p?n[0]:n}var f,c=this.__wrapped__,a=u?[1]:arguments,l=c instanceof Lr,s=a[0],h=l||jo(c),p=(h&&e&&"function"==typeof s&&1!=s.length&&(l=h=!1),this.__chain__),_=(s=!!this.__actions__.length,o&&!p);l=l&&!s;return!o&&h?(c=l?c:new Lr(this),(f=n.apply(c,a)).__actions__.push({func:Vi,args:[r],thisArg:t}),new Wr(f,p)):_&&l?n.apply(this,a):(f=this.thru(r),_?u?f.value()[0]:f.value():f)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(n){var t=On[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);Rr.prototype[n]=function(){var n,u=arguments;return e&&!this.__chain__?(n=this.value(),t.apply(jo(n)?n:[],u)):this[r]((function(n){return t.apply(jo(n)?n:[],u)}))}})),ae(Lr.prototype,(function(n,t){var r,e=Rr[t];e&&(r=e.name+"",zn.call(wr,r)||(wr[r]=[]),wr[r].push({name:t,func:e}))})),wr[Iu(t,2).name]=[{name:"wrapper",func:t}],Lr.prototype.clone=function(){var n=new Lr(this.__wrapped__);return n.__actions__=gu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=gu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=gu(this.__views__),n},Lr.prototype.reverse=function(){var n;return this.__filtered__?((n=new Lr(this)).__dir__=-1,n.__filtered__=!0):(n=this.clone()).__dir__*=-1,n},Lr.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,r=jo(n),e=t<0,u=r?n.length:0,i=function(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=lr(t,n+o);break;case"takeRight":n=ar(n,t-o)}}return{start:n,end:t}}(0,u,this.__views__),o=i.start,f=(i=i.end)-o,c=e?i:o-1,a=this.__iteratees__,l=a.length,s=0,h=lr(f,this.__takeCount__);if(!r||!e&&u==f&&h==f)return tu(n,this.__actions__);var p=[];n:for(;f--&&s<h;){for(var _=-1,v=n[c+=t];++_<l;){var g=(y=a[_]).iteratee,y=y.type;g=g(v);if(2==y)v=g;else if(!g){if(1==y)continue n;break n}}p[s++]=v}return p},Rr.prototype.at=Gi,Rr.prototype.chain=function(){return Ki(this)},Rr.prototype.commit=function(){return new Wr(this.value(),this.__chain__)},Rr.prototype.next=function(){this.__values__===t&&(this.__values__=Po(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?t:this.__values__[this.__index__++]}},Rr.prototype.plant=function(n){for(var r,e=this;e instanceof Sr;){var u=ki(e),i=(u.__index__=0,u.__values__=t,r?i.__wrapped__=u:r=u,u);e=e.__wrapped__}return i.__wrapped__=n,r},Rr.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Lr?(n=n,(n=(n=this.__actions__.length?new Lr(this):n).reverse()).__actions__.push({func:Vi,args:[Ci],thisArg:t}),new Wr(n,this.__chain__)):this.thru(Ci)},Rr.prototype.toJSON=Rr.prototype.valueOf=Rr.prototype.value=function(){return tu(this.__wrapped__,this.__actions__)},Rr.prototype.first=Rr.prototype.head,Yt&&(Rr.prototype[Yt]=function(){return this}),Rr}();"function"==typeof define&&"object"==n(define.amd)&&define.amd?(Jn._=Ht,define((function(){return Ht}))):Yn?((Yn.exports=Ht)._=Ht,o._=Ht):Jn._=Ht}).call(this)},e=function(n){return t({}[n],n)},u[1706173694352]={status:0,func:r,req:e,m:{exports:{},_tempexports:{}}},t(1706173694352)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/lodash/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/md5/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var r,t,e=require("../../@babel/runtime/helpers/typeof");module.exports=(r={},t=function(t,n){if(!r[t])return require(n);if(!r[t].status){var o=r[t].m;o._exports=o._tempexports;var s=Object.getOwnPropertyDescriptor(o,"exports");s&&s.configurable&&Object.defineProperty(o,"exports",{set:function(r){"object"===e(r)&&r!==o._exports&&(o._exports.__proto__=r.__proto__,Object.keys(r).forEach((function(t){o._exports[t]=r[t]}))),o._tempexports=r},get:function(){return o._tempexports}}),r[t].status=1,r[t].func(r[t].req,o,o.exports)}return r[t].m.exports},function(t,e,n){r[t]={status:0,func:e,req:n,m:{exports:{},_tempexports:{}}}}(1706173694353,(function(r,t,e){var n,o,s,i,u;n=r("crypt"),o=r("charenc").utf8,s=r("is-buffer"),i=r("charenc").bin,(u=function r(t,e){t.constructor==String?t=e&&"binary"===e.encoding?i.stringToBytes(t):o.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var u=n.bytesToWords(t),c=8*t.length,a=1732584193,f=-271733879,p=-1732584194,_=271733878,g=0;g<u.length;g++)u[g]=16711935&(u[g]<<8|u[g]>>>24)|4278255360&(u[g]<<24|u[g]>>>8);u[c>>>5]|=128<<c%32,u[14+(c+64>>>9<<4)]=c;var y=r._ff,l=r._gg,x=r._hh,b=r._ii;for(g=0;g<u.length;g+=16){var h=a,v=f,m=p,d=_;a=y(a,f,p,_,u[g+0],7,-680876936),_=y(_,a,f,p,u[g+1],12,-389564586),p=y(p,_,a,f,u[g+2],17,606105819),f=y(f,p,_,a,u[g+3],22,-1044525330),a=y(a,f,p,_,u[g+4],7,-176418897),_=y(_,a,f,p,u[g+5],12,1200080426),p=y(p,_,a,f,u[g+6],17,-1473231341),f=y(f,p,_,a,u[g+7],22,-45705983),a=y(a,f,p,_,u[g+8],7,1770035416),_=y(_,a,f,p,u[g+9],12,-1958414417),p=y(p,_,a,f,u[g+10],17,-42063),f=y(f,p,_,a,u[g+11],22,-1990404162),a=y(a,f,p,_,u[g+12],7,1804603682),_=y(_,a,f,p,u[g+13],12,-40341101),p=y(p,_,a,f,u[g+14],17,-1502002290),a=l(a,f=y(f,p,_,a,u[g+15],22,1236535329),p,_,u[g+1],5,-165796510),_=l(_,a,f,p,u[g+6],9,-1069501632),p=l(p,_,a,f,u[g+11],14,643717713),f=l(f,p,_,a,u[g+0],20,-373897302),a=l(a,f,p,_,u[g+5],5,-701558691),_=l(_,a,f,p,u[g+10],9,38016083),p=l(p,_,a,f,u[g+15],14,-660478335),f=l(f,p,_,a,u[g+4],20,-405537848),a=l(a,f,p,_,u[g+9],5,568446438),_=l(_,a,f,p,u[g+14],9,-1019803690),p=l(p,_,a,f,u[g+3],14,-187363961),f=l(f,p,_,a,u[g+8],20,1163531501),a=l(a,f,p,_,u[g+13],5,-1444681467),_=l(_,a,f,p,u[g+2],9,-51403784),p=l(p,_,a,f,u[g+7],14,1735328473),a=x(a,f=l(f,p,_,a,u[g+12],20,-1926607734),p,_,u[g+5],4,-378558),_=x(_,a,f,p,u[g+8],11,-2022574463),p=x(p,_,a,f,u[g+11],16,1839030562),f=x(f,p,_,a,u[g+14],23,-35309556),a=x(a,f,p,_,u[g+1],4,-1530992060),_=x(_,a,f,p,u[g+4],11,1272893353),p=x(p,_,a,f,u[g+7],16,-155497632),f=x(f,p,_,a,u[g+10],23,-1094730640),a=x(a,f,p,_,u[g+13],4,681279174),_=x(_,a,f,p,u[g+0],11,-358537222),p=x(p,_,a,f,u[g+3],16,-722521979),f=x(f,p,_,a,u[g+6],23,76029189),a=x(a,f,p,_,u[g+9],4,-640364487),_=x(_,a,f,p,u[g+12],11,-421815835),p=x(p,_,a,f,u[g+15],16,530742520),a=b(a,f=x(f,p,_,a,u[g+2],23,-995338651),p,_,u[g+0],6,-198630844),_=b(_,a,f,p,u[g+7],10,1126891415),p=b(p,_,a,f,u[g+14],15,-1416354905),f=b(f,p,_,a,u[g+5],21,-57434055),a=b(a,f,p,_,u[g+12],6,1700485571),_=b(_,a,f,p,u[g+3],10,-1894986606),p=b(p,_,a,f,u[g+10],15,-1051523),f=b(f,p,_,a,u[g+1],21,-2054922799),a=b(a,f,p,_,u[g+8],6,1873313359),_=b(_,a,f,p,u[g+15],10,-30611744),p=b(p,_,a,f,u[g+6],15,-1560198380),f=b(f,p,_,a,u[g+13],21,1309151649),a=b(a,f,p,_,u[g+4],6,-145523070),_=b(_,a,f,p,u[g+11],10,-1120210379),p=b(p,_,a,f,u[g+2],15,718787259),f=b(f,p,_,a,u[g+9],21,-343485551),a=a+h>>>0,f=f+v>>>0,p=p+m>>>0,_=_+d>>>0}return n.endian([a,f,p,_])})._ff=function(r,t,e,n,o,s,i){var u=r+(t&e|~t&n)+(o>>>0)+i;return(u<<s|u>>>32-s)+t},u._gg=function(r,t,e,n,o,s,i){var u=r+(t&n|e&~n)+(o>>>0)+i;return(u<<s|u>>>32-s)+t},u._hh=function(r,t,e,n,o,s,i){var u=r+(t^e^n)+(o>>>0)+i;return(u<<s|u>>>32-s)+t},u._ii=function(r,t,e,n,o,s,i){var u=r+(e^(t|~n))+(o>>>0)+i;return(u<<s|u>>>32-s)+t},u._blocksize=16,u._digestsize=16,t.exports=function(r,t){if(null==r)throw new Error("Illegal argument "+r);var e=n.wordsToBytes(u(r,t));return t&&t.asBytes?e:t&&t.asString?i.bytesToString(e):n.bytesToHex(e)}}),(function(r){return t({}[r],r)})),t(1706173694353));
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/md5/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/miniprogram-computed/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/typeof"),e=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},r=e((function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{parseMultiDataPaths:function(){return u},getDataOnPath:function(){return c}});var r=/^\s/,n=function(t,e){throw Error('Parsing data path "'+t+'" failed at char "'+t[e]+'" (index '+e+")")},o=function(t,e){for(var r=e.index;e.index<e.length;){var o=t[e.index];if(!/^[0-9]/.test(o))break;e.index++}return r===e.index&&n(t,e.index),parseInt(t.slice(r,e.index),10)},a=function(t,e){var r=e.index,o=t[r];if(/^[_a-zA-Z$]/.test(o))for(e.index++;e.index<e.length;){var a=t[e.index];if(!/^[_a-zA-Z0-9$]/.test(a))break;e.index++}else n(t,e.index);return t.slice(r,e.index)},i=function(t,e){for(var r=[a(t,e)],i={deepCmp:!1};e.index<e.length;){var u=t[e.index];if("["===u)e.index++,r.push(""+o(t,e)),"]"!==t[e.index]&&n(t,e.index),e.index++;else{if("."!==u)break;if(e.index++,"*"===t[e.index]){if(e.index++,"*"===t[e.index]){e.index++,i.deepCmp=!0;break}n(t,e.index)}r.push(a(t,e))}}return{path:r,options:i}},u=function(t){var e={length:t.length,index:0},o=function(t,e){for(;r.test(t[e.index]);)e.index++;for(var o=[i(t,e)],a=!1;e.index<e.length;){var u=t[e.index];r.test(u)?e.index++:","===u?(a=!0,e.index++):a?(a=!1,o.push(i(t,e))):n(t,e.index)}return o}(t,e);return function(t,e){e.index<e.length&&n(t,e.index)}(t,e),o},c=function(e,r){var n=e;return r.forEach((function(e){n="object"!=t(n)||null===n?void 0:n[e]})),n}})),n=e((function(e,r){r.exports=function(){var e,r=null;function n(e){return!!e&&("object"==t(e)||"function"==typeof e)}function o(t){if(null!==t&&!n(t))throw new TypeError("Object prototype may only be an Object or null: "+t)}var a=Object,i=Boolean(a.create)||!({__proto__:null}instanceof a),u=a.create||(i?function(t){return o(t),{__proto__:t}}:function(t){if(o(t),null===t)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var e=function(){};return e.prototype=t,new e}),c=function(){return null},f=a.getPrototypeOf||([].__proto__===Array.prototype?function(t){var e=t.__proto__;return n(e)?e:null}:c);return(e=function(t,p){if(void 0===(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!n(t)||!n(p))throw new TypeError("Cannot create proxy with a non-object as target or handler");var s=function(){};r=function(){t=null,s=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}},setTimeout((function(){r=null}),0);var l=p;for(var d in p={get:null,set:null,apply:null,construct:null},l){if(!(d in p))throw new TypeError("Proxy polyfill does not support trap '".concat(d,"'"));p[d]=l[d]}"function"==typeof l&&(p.apply=l.apply.bind(l));var h,v=f(t),b=!1,y=!1;"function"==typeof t?(h=function(){var e=this&&this.constructor===h,r=Array.prototype.slice.call(arguments);if(s(e?"construct":"apply"),e&&p.construct)return p.construct.call(this,t,r);if(!e&&p.apply)return p.apply(t,this,r);if(e){r.unshift(t);var n=t.bind.apply(t,r);return new n}return t.apply(this,r)},b=!0):t instanceof Array?(h=[],y=!0):h=i||null!==v?u(v):{};var _=p.get?function(t){return s("get"),p.get(this,t,h)}:function(t){return s("get"),this[t]},m=p.set?function(t,e){s("set");p.set(this,t,e,h)}:function(t,e){s("set"),this[t]=e},g=a.getOwnPropertyNames(t),x={};g.forEach((function(e){if(!b&&!y||!(e in h)){var r=a.getOwnPropertyDescriptor(t,e),n={enumerable:Boolean(r.enumerable),get:_.bind(t,e),set:m.bind(t,e)};a.defineProperty(h,e,n),x[e]=!0}}));var w=!0;if(b||y){var P=a.setPrototypeOf||([].__proto__===Array.prototype?function(t,e){return o(e),t.__proto__=e,t}:c);v&&P(h,v)||(w=!1)}if(p.get||!w)for(var O in t)x[O]||a.defineProperty(h,O,{get:_.bind(t,O)});return a.seal(t),a.seal(h),h}).revocable=function(t,n){return{proxy:new e(t,n),revoke:r}},e}})),o=e((function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{create:function(){return a},unwrap:function(){return i}});var r,o=(0,(r=n(),r&&r.__esModule?r:{default:r}).default)();function a(e,r){return function e(r,n,a){if("object"!=t(r)||null===r)return r;var i={get:function(t,r){if("__rawObject__"===r)return t;var o=a.concat(r),i=t[r];return n.push({path:o,value:i}),e(i,n,o)}};try{return new Proxy(r,i)}catch(t){return new o(r,i)}}(e,r,[])}function i(e){if(null!==e&&"object"==t(e)&&"object"!=t(e.__rawObject__)){if(Array.isArray(e))return e.map((function(t){return i(t)}));var r={};return Object.keys(e).forEach((function(t){r[t]=i(e[t])})),r}return"object"!=t(e)||null===e||"object"!=t(e.__rawObject__)?e:e.__rawObject__}})),a=e((function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"behavior",{enumerable:!0,get:function(){return b}});var n,a=f(require("rfdc")),i=f(require("fast-deep-equal")),u=s(r()),c=s(o());function f(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(p=function(t){return t?r:e})(t)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=t(e)&&"function"!=typeof e)return{default:e};var n=p(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}var l,d=(0,a.default)({proto:!0});(l=n||(n={}))[l.CREATED=0]="CREATED",l[l.ATTACHED=1]="ATTACHED";var h=0;function v(t,e){return t===e||t!=t&&e!=e}var b=Behavior({lifetimes:{attached:function(){this.setData({_computedWatchInit:1})},created:function(){this.setData({_computedWatchInit:0})}},definitionFilter:function(e){var r,n=e.computed,o=e.watch,a=[],f=h++;a.push({fields:"_computedWatchInit",observer:function(){var t=this,e=this.data._computedWatchInit;if(0===e){var r={computedUpdaters:[],computedRelatedPathValues:{},watchCurVal:{},_triggerFromComputedAttached:{}};this._computedWatchInfo||(this._computedWatchInfo={}),this._computedWatchInfo[f]=r,o&&Object.keys(o).forEach((function(e){var n=u.parseMultiDataPaths(e).map((function(e){var r=e.path,n=e.options,o=u.getDataOnPath(t.data,r);return n.deepCmp?d(o):o}));r.watchCurVal[e]=n}))}else if(1===e){var a=this._computedWatchInfo[f];n&&Object.keys(n).forEach((function(e){var r,o=n[e],i=[],f=o(c.create(t.data,i)),p=i.map((function(e){var r=e.path;return{path:r,value:u.getDataOnPath(t.data,r)}}));t.setData(((r={})[e]=c.unwrap(f),r)),a._triggerFromComputedAttached[e]=!0,a.computedRelatedPathValues[e]=p;a.computedUpdaters.push((function(){for(var r,n=a.computedRelatedPathValues[e],i=!1,f=0;f<n.length;f++){var p=n[f],s=p.path;if(!v(p.value,u.getDataOnPath(t.data,s))){i=!0;break}}if(!i)return!1;var l=[],d=o(c.create(t.data,l));t.setData(((r={})[e]=c.unwrap(d),r));var h=l.map((function(e){var r=e.path;return{path:r,value:u.getDataOnPath(t.data,r)}}));return a.computedRelatedPathValues[e]=h,!0}))}))}}}),n&&a.push({fields:"**",observer:function(){var t,e=this;if(this._computedWatchInfo){var r=this._computedWatchInfo[f];if(r)do{t=r.computedUpdaters.some((function(t){return t.call(e)}))}while(t)}}}),o&&Object.keys(o).forEach((function(t){var e=u.parseMultiDataPaths(t);a.push({fields:t,observer:function(){var r=this;if(this._computedWatchInfo){var n=this._computedWatchInfo[f];if(n){if(Object.keys(n._triggerFromComputedAttached).length){var a={};for(var c in e.forEach((function(t){return a[t.path[0]]=!0})),n._triggerFromComputedAttached)if(n._triggerFromComputedAttached.hasOwnProperty(c)&&a[c]&&n._triggerFromComputedAttached[c])return void(n._triggerFromComputedAttached[c]=!1)}var p=n.watchCurVal[t],s=e.map((function(t){var e=t.path,n=t.options;return{val:u.getDataOnPath(r.data,e),options:n}})),l=s.map((function(t){var e=t.val;return t.options.deepCmp?d(e):e}));n.watchCurVal[t]=l;for(var h=!1,b=0;b<l.length;b++)if(e[b].options.deepCmp?!(0,i.default)(p[b],l[b]):!v(p[b],l[b])){h=!0;break}h&&o[t].apply(this,s.map((function(t){return t.val})))}}}})})),"object"!=t(e.observers)&&(e.observers={}),Array.isArray(e.observers)?(r=e.observers).push.apply(r,a):a.forEach((function(t){var r=e.observers[t.fields];e.observers[t.fields]=r?function(){t.observer.call(this),r.call(this)}:t.observer}))}})}));Object.defineProperty(exports,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(exports,{DataTracerMode:function(){return i},behavior:function(){return c.behavior},ComponentWithComputed:function(){return f},BehaviorWithComputed:function(){return p},getCurrentDataTracerMode:function(){return l},setCurrentDataTracerMode:function(){return d}});var i,u,c=a();function f(t){return Array.isArray(t.behaviors)||(t.behaviors=[]),t.behaviors.unshift(c.behavior),Component(t)}function p(t){return Array.isArray(t.behaviors)||(t.behaviors=[]),t.behaviors.unshift(c.behavior),Behavior(t)}(u=i||(i={}))[u.Auto=0]="Auto",u[u.Proxy=1]="Proxy",u[u.DefineProperty=2]="DefineProperty";var s=0,l=function(){return s},d=function(t){s=t};
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/miniprogram-computed/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/mitt/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function e(e,r){var o,s;return n[e]?(n[e].status||((o=n[e].m)._exports=o._tempexports,(s=Object.getOwnPropertyDescriptor(o,"exports"))&&s.configurable&&Object.defineProperty(o,"exports",{set:function(e){"object"==t(e)&&e!==o._exports&&(o._exports.__proto__=e.__proto__,Object.keys(e).forEach((function(t){o._exports[t]=e[t]}))),o._tempexports=e},get:function(){return o._tempexports}}),n[e].status=1,n[e].func(n[e].req,o,o.exports)),n[e].m.exports):require(r)}var r,o,n={};return r=function(t,e,r){e.exports=function(t){return t=t||Object.create(null),{on:function(e,r){(t[e]||(t[e]=[])).push(r)},off:function(e,r){t[e]&&t[e].splice(t[e].indexOf(r)>>>0,1)},emit:function(e,r){(t[e]||[]).slice().map((function(t){t(r)})),(t["*"]||[]).slice().map((function(t){t(e,r)}))}}}},o=function(t){return e({}[t],t)},n[1706173694355]={status:0,func:r,req:o,m:{exports:{},_tempexports:{}}},e(1706173694355)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/mitt/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/moment/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function t(t,n){var s,r;return i[t]?(i[t].status||((s=i[t].m)._exports=s._tempexports,(r=Object.getOwnPropertyDescriptor(s,"exports"))&&r.configurable&&Object.defineProperty(s,"exports",{set:function(t){"object"==e(t)&&t!==s._exports&&(s._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(e){s._exports[e]=t[e]}))),s._tempexports=t},get:function(){return s._tempexports}}),i[t].status=1,i[t].func(i[t].req,s,s.exports)),i[t].m.exports):require(n)}var n,s,i={};return n=function(t,n,s){var i;i=function(){var s;function i(){return s.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(o(e,t))return;return 1}function l(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){for(var n=[],s=e.length,i=0;i<s;++i)n.push(t(e[i],i));return n}function f(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,s){return vt(e,t,n,s,!0).utc()}function _(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function y(e){if(null==e._isValid){var t=_(e),n=p.call(t.parsedDateParts,(function(e){return null!=e}));n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function g(e){var t=m(NaN);return null!=e?f(_(t),e):_(t).userInvalidated=!0,t}var p=Array.prototype.some||function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},w=i.momentProperties=[],v=!1;function k(e,t){var n,s,i,r=w.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=_(t)),l(t._locale)||(e._locale=t._locale),0<r)for(n=0;n<r;n++)l(i=t[s=w[n]])||(e[s]=i);return e}function M(e){k(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,i.updateOffset(this),v=!1)}function D(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function S(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Y(t,n){var s=!0;return f((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),s){for(var r,a,u=[],l=arguments.length,h=0;h<l;h++){if(r="","object"==e(arguments[h])){for(a in r+="\n["+h+"] ",arguments[0])o(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[h];u.push(r)}S(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),s=!1}return n.apply(this,arguments)}),n)}var O={};function b(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),O[e]||(S(t),O[e]=!0)}function x(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var n,s=f({},e);for(n in t)o(t,n)&&(a(e[n])&&a(t[n])?(s[n]={},f(s[n],e[n]),f(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)o(e,n)&&!o(t,n)&&a(e[n])&&(s[n]=f({},s[n]));return s}function N(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;var P=Object.keys||function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};function R(e,t,n){var s=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var W=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,C=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},H={};function F(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(H[e]=i),t&&(H[t[0]]=function(){return R(i.apply(this,arguments),t[1],t[2])}),n&&(H[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function L(e,t){return e.isValid()?(t=V(t,e.localeData()),U[t]=U[t]||function(e){for(var t,n=e.match(W),s=0,i=n.length;s<i;s++)H[n[s]]?n[s]=H[n[s]]:n[s]=(t=n[s]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var s="",r=0;r<i;r++)s+=x(n[r])?n[r].call(t,e):n[r];return s}}(t),U[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(C.lastIndex=0;0<=n&&C.test(e);)e=e.replace(C,s),C.lastIndex=0,--n;return e}var G={};function E(e,t){var n=e.toLowerCase();G[n]=G[n+"s"]=G[t]=e}function A(e){return"string"==typeof e?G[e]||G[e.toLowerCase()]:void 0}function j(e){var t,n,s={};for(n in e)o(e,n)&&(t=A(n))&&(s[t]=e[n]);return s}var I={};function Z(e,t){I[e]=t}function z(e){return e%4==0&&e%100!=0||e%400==0}function $(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function q(e){var t=0;return 0!=(e=+e)&&isFinite(e)?$(e):t}function B(e,t){return function(n){return null!=n?(Q(this,e,n),i.updateOffset(this,t),this):J(this,e)}}function J(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&z(e.year())&&1===e.month()&&29===e.date()?(n=q(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Me(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var X=/\d/,K=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,se=/\d\d?/,ie=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,ae=/\d{1,3}/,oe=/\d{1,4}/,ue=/[+-]?\d{1,6}/,le=/\d+/,he=/[+-]?\d+/,de=/Z|[+-]\d\d:?\d\d/gi,ce=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function me(e,t,n){ge[e]=x(t)?t:function(e,s){return e&&n?n:t}}function _e(e,t){return o(ge,e)?ge[e](t._strict,t._locale):new RegExp(ye(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,s,i){return t||n||s||i}))))}function ye(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ge={},pe={};function we(e,t){var n,s,i=t;for("string"==typeof e&&(e=[e]),h(t)&&(i=function(e,n){n[t]=q(e)}),s=e.length,n=0;n<s;n++)pe[e[n]]=i}function ve(e,t){we(e,(function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)}))}var ke;function Me(e,t){var n;return isNaN(e)||isNaN(t)?NaN:(e+=(t-(n=(t%(n=12)+n)%n))/12,1==n?z(e)?29:28:31-n%7%2)}ke=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),F("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),E("month","M"),Z("month",8),me("M",se),me("MM",se,K),me("MMM",(function(e,t){return t.monthsShortRegex(e)})),me("MMMM",(function(e,t){return t.monthsRegex(e)})),we(["M","MM"],(function(e,t){t[1]=q(e)-1})),we(["MMM","MMMM"],(function(e,t,n,s){null!=(s=n._locale.monthsParse(e,s,n._strict))?t[1]=s:_(n).invalidMonth=e}));var De="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ye=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oe=fe,be=fe;function xe(e,t){var n;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=q(t);else if(!h(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),Me(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)}}function Te(e){return null!=e?(xe(this,e),i.updateOffset(this,!0),this):J(this,"Month")}function Ne(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=m([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=ye(n[r]),s[r]=ye(s[r]);for(r=0;r<24;r++)i[r]=ye(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Pe(e){return z(e)?366:365}F("Y",0,0,(function(){var e=this.year();return e<=9999?R(e,4):"+"+e})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),E("year","y"),Z("year",1),me("Y",he),me("YY",se,K),me("YYYY",oe,te),me("YYYYY",ue,ne),me("YYYYYY",ue,ne),we(["YYYYY","YYYYYY"],0),we("YYYY",(function(e,t){t[0]=2===e.length?i.parseTwoDigitYear(e):q(e)})),we("YY",(function(e,t){t[0]=i.parseTwoDigitYear(e)})),we("Y",(function(e,t){t[0]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return q(e)+(68<q(e)?1900:2e3)};var Re=B("FullYear",!0);function We(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}function Ce(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ue(e,t,n){return(n=7+t-n)-(7+Ce(e,0,n).getUTCDay()-t)%7-1}function He(e,t,n,s,i){var r;n=(t=1+7*(t-1)+(7+n-s)%7+Ue(e,s,i))<=0?Pe(r=e-1)+t:t>Pe(e)?(r=e+1,t-Pe(e)):(r=e,t);return{year:r,dayOfYear:n}}function Fe(e,t,n){var s,i,r=Ue(e.year(),t,n);return(r=Math.floor((e.dayOfYear()-r-1)/7)+1)<1?s=r+Le(i=e.year()-1,t,n):r>Le(e.year(),t,n)?(s=r-Le(e.year(),t,n),i=e.year()+1):(i=e.year(),s=r),{week:s,year:i}}function Le(e,t,n){var s=Ue(e,t,n);t=Ue(e+1,t,n);return(Pe(e)-s+t)/7}function Ve(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),E("week","w"),E("isoWeek","W"),Z("week",5),Z("isoWeek",5),me("w",se),me("ww",se,K),me("W",se),me("WW",se,K),ve(["w","ww","W","WW"],(function(e,t,n,s){t[s.substr(0,1)]=q(e)})),F("d",0,"do","day"),F("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),F("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),F("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),E("day","d"),E("weekday","e"),E("isoWeekday","E"),Z("day",11),Z("weekday",11),Z("isoWeekday",11),me("d",se),me("e",se),me("E",se),me("dd",(function(e,t){return t.weekdaysMinRegex(e)})),me("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),me("dddd",(function(e,t){return t.weekdaysRegex(e)})),ve(["dd","ddd","dddd"],(function(e,t,n,s){null!=(s=n._locale.weekdaysParse(e,s,n._strict))?t.d=s:_(n).invalidWeekday=e})),ve(["d","e","E"],(function(e,t,n,s){t[s]=q(e)}));var Ge="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ee="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ae="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),je=fe,Ie=fe,Ze=fe;function ze(){function e(e,t){return t.length-e.length}for(var t,n,s,i=[],r=[],a=[],o=[],u=0;u<7;u++)s=m([2e3,1]).day(u),t=ye(this.weekdaysMin(s,"")),n=ye(this.weekdaysShort(s,"")),s=ye(this.weekdays(s,"")),i.push(t),r.push(n),a.push(s),o.push(t),o.push(n),o.push(s);i.sort(e),r.sort(e),a.sort(e),o.sort(e),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function $e(){return this.hours()%12||12}function qe(e,t){F(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Be(e,t){return t._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,$e),F("k",["kk",2],0,(function(){return this.hours()||24})),F("hmm",0,0,(function(){return""+$e.apply(this)+R(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+$e.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),qe("a",!0),qe("A",!1),E("hour","h"),Z("hour",13),me("a",Be),me("A",Be),me("H",se),me("h",se),me("k",se),me("HH",se,K),me("hh",se,K),me("kk",se,K),me("hmm",ie),me("hmmss",re),me("Hmm",ie),me("Hmmss",re),we(["H","HH"],3),we(["k","kk"],(function(e,t,n){e=q(e),t[3]=24===e?0:e})),we(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),we(["h","hh"],(function(e,t,n){t[3]=q(e),_(n).bigHour=!0})),we("hmm",(function(e,t,n){var s=e.length-2;t[3]=q(e.substr(0,s)),t[4]=q(e.substr(s)),_(n).bigHour=!0})),we("hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[3]=q(e.substr(0,s)),t[4]=q(e.substr(s,2)),t[5]=q(e.substr(i)),_(n).bigHour=!0})),we("Hmm",(function(e,t,n){var s=e.length-2;t[3]=q(e.substr(0,s)),t[4]=q(e.substr(s))})),we("Hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[3]=q(e.substr(0,s)),t[4]=q(e.substr(s,2)),t[5]=q(e.substr(i))})),fe=B("Hours",!0);var Je,Qe={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:De,monthsShort:Se,week:{dow:0,doy:6},weekdays:Ge,weekdaysMin:Ae,weekdaysShort:Ee,meridiemParse:/[ap]\.?m?\.?/i},Xe={},Ke={};function et(e){return e&&e.toLowerCase().replace("_","-")}function tt(e){var s;if(void 0===Xe[e]&&void 0!==n&&n&&n.exports&&null!=e.match("^[^/\\\\]*$"))try{s=Je._abbr,t("./locale/"+e),nt(s)}catch(s){Xe[e]=null}return Xe[e]}function nt(e,t){return e&&((t=l(t)?it(e):st(e,t))?Je=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Je._abbr}function st(e,t){if(null===t)return delete Xe[e],null;var n,s=Qe;if(t.abbr=e,null!=Xe[e])b("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Xe[e]._config;else if(null!=t.parentLocale)if(null!=Xe[t.parentLocale])s=Xe[t.parentLocale]._config;else{if(null==(n=tt(t.parentLocale)))return Ke[t.parentLocale]||(Ke[t.parentLocale]=[]),Ke[t.parentLocale].push({name:e,config:t}),null;s=n._config}return Xe[e]=new N(T(s,t)),Ke[e]&&Ke[e].forEach((function(e){st(e.name,e.config)})),nt(e),Xe[e]}function it(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return Je;if(!r(e)){if(t=tt(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=et(e[r]).split("-")).length,n=(n=et(e[r+1]))?n.split("-"):null;0<t;){if(s=tt(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return Je}(e)}function rt(e){var t=e._a;return t&&-2===_(e).overflow&&(t=t[1]<0||11<t[1]?1:t[2]<1||t[2]>Me(t[0],t[1])?2:t[3]<0||24<t[3]||24===t[3]&&(0!==t[4]||0!==t[5]||0!==t[6])?3:t[4]<0||59<t[4]?4:t[5]<0||59<t[5]?5:t[6]<0||999<t[6]?6:-1,_(e)._overflowDayOfYear&&(t<0||2<t)&&(t=2),_(e)._overflowWeeks&&-1===t&&(t=7),_(e)._overflowWeekday&&-1===t&&(t=8),_(e).overflow=t),e}var at=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ot=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ut=/Z|[+-]\d\d(?::?\d\d)?/,lt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ht=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],dt=/^\/?Date\((-?\d+)/i,ct=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ft={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function mt(e){var t,n,s,i,r,a,o=e._i,u=at.exec(o)||ot.exec(o),l=(o=lt.length,ht.length);if(u){for(_(e).iso=!0,t=0,n=o;t<n;t++)if(lt[t][1].exec(u[1])){i=lt[t][0],s=!1!==lt[t][2];break}if(null==i)e._isValid=!1;else{if(u[3]){for(t=0,n=l;t<n;t++)if(ht[t][1].exec(u[3])){r=(u[2]||" ")+ht[t][0];break}if(null==r)return void(e._isValid=!1)}if(s||null==r){if(u[4]){if(!ut.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),pt(e)}else e._isValid=!1}}else e._isValid=!1}function _t(e){var t,n,s=ct.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));s?(t=function(e,t,n,s,i,r){return e=[function(e){return(e=parseInt(e,10))<=49?2e3+e:e<=999?1900+e:e}(e),Se.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)],r&&e.push(parseInt(r,10)),e}(s[4],s[3],s[2],s[5],s[6],s[7]),function(e,t,n){if(!e||Ee.indexOf(e)===new Date(t[0],t[1],t[2]).getDay())return 1;_(n).weekdayMismatch=!0,n._isValid=!1}(s[1],t,e)&&(e._a=t,e._tzm=(t=s[8],n=s[9],s=s[10],t?ft[t]:n?0:((t=parseInt(s,10))-(n=t%100))/100*60+n),e._d=Ce.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),_(e).rfc2822=!0)):e._isValid=!1}function yt(e,t,n){return null!=e?e:null!=t?t:n}function gt(e){var t,n,s,r,a,o,u,l,h,d,c,f=[];if(!e._d){for(s=e,r=new Date(i.now()),n=s._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()],e._w&&null==e._a[2]&&null==e._a[1]&&(null!=(r=(s=e)._w).GG||null!=r.W||null!=r.E?(l=1,h=4,a=yt(r.GG,s._a[0],Fe(kt(),1,4).year),o=yt(r.W,1),((u=yt(r.E,1))<1||7<u)&&(d=!0)):(l=s._locale._week.dow,h=s._locale._week.doy,c=Fe(kt(),l,h),a=yt(r.gg,s._a[0],c.year),o=yt(r.w,c.week),null!=r.d?((u=r.d)<0||6<u)&&(d=!0):null!=r.e?(u=r.e+l,(r.e<0||6<r.e)&&(d=!0)):u=l),o<1||o>Le(a,l,h)?_(s)._overflowWeeks=!0:null!=d?_(s)._overflowWeekday=!0:(c=He(a,o,u,l,h),s._a[0]=c.year,s._dayOfYear=c.dayOfYear)),null!=e._dayOfYear&&(r=yt(e._a[0],n[0]),(e._dayOfYear>Pe(r)||0===e._dayOfYear)&&(_(e)._overflowDayOfYear=!0),d=Ce(r,0,e._dayOfYear),e._a[1]=d.getUTCMonth(),e._a[2]=d.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=f[t]=n[t];for(;t<7;t++)e._a[t]=f[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Ce:We).apply(null,f),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==a&&(_(e).weekdayMismatch=!0)}}function pt(e){if(e._f===i.ISO_8601)mt(e);else if(e._f===i.RFC_2822)_t(e);else{e._a=[],_(e).empty=!0;for(var t,n,s,r,a,u=""+e._i,l=u.length,h=0,d=V(e._f,e._locale).match(W)||[],c=d.length,f=0;f<c;f++)n=d[f],(t=(u.match(_e(n,e))||[])[0])&&(0<(s=u.substr(0,u.indexOf(t))).length&&_(e).unusedInput.push(s),u=u.slice(u.indexOf(t)+t.length),h+=t.length),H[n]?(t?_(e).empty=!1:_(e).unusedTokens.push(n),s=n,a=e,null!=(r=t)&&o(pe,s)&&pe[s](r,a._a,a,s)):e._strict&&!t&&_(e).unusedTokens.push(n);_(e).charsLeftOver=l-h,0<u.length&&_(e).unusedInput.push(u),e._a[3]<=12&&!0===_(e).bigHour&&0<e._a[3]&&(_(e).bigHour=void 0),_(e).parsedDateParts=e._a.slice(0),_(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[3],e._meridiem),null!==(l=_(e).era)&&(e._a[0]=e._locale.erasConvertYear(l,e._a[0])),gt(e),rt(e)}}function wt(e){var t,n,s,o=e._i,u=e._f;if(e._locale=e._locale||it(e._l),null===o||void 0===u&&""===o)return g({nullInput:!0});if("string"==typeof o&&(e._i=o=e._locale.preparse(o)),D(o))return new M(rt(o));if(d(o))e._d=o;else if(r(u)){var m,p,w,v,S,Y,O=e,b=!1,x=O._f.length;if(0===x)_(O).invalidFormat=!0,O._d=new Date(NaN);else{for(v=0;v<x;v++)S=0,Y=!1,m=k({},O),null!=O._useUTC&&(m._useUTC=O._useUTC),m._f=O._f[v],pt(m),y(m)&&(Y=!0),S=(S+=_(m).charsLeftOver)+10*_(m).unusedTokens.length,_(m).score=S,b?S<w&&(w=S,p=m):(null==w||S<w||Y)&&(w=S,p=m,Y)&&(b=!0);f(O,p||m)}}else u?pt(e):l(u=(o=e)._i)?o._d=new Date(i.now()):d(u)?o._d=new Date(u.valueOf()):"string"==typeof u?(n=o,null!==(t=dt.exec(n._i))?n._d=new Date(+t[1]):(mt(n),!1===n._isValid&&(delete n._isValid,_t(n),!1===n._isValid)&&(delete n._isValid,n._strict?n._isValid=!1:i.createFromInputFallback(n)))):r(u)?(o._a=c(u.slice(0),(function(e){return parseInt(e,10)})),gt(o)):a(u)?(t=o)._d||(s=void 0===(n=j(t._i)).day?n.date:n.day,t._a=c([n.year,n.month,s,n.hour,n.minute,n.second,n.millisecond],(function(e){return e&&parseInt(e,10)})),gt(t)):h(u)?o._d=new Date(u):i.createFromInputFallback(o);return y(e)||(e._d=null),e}function vt(e,t,n,s,i){var o={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(a(e)&&u(e)||r(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=s,(i=new M(rt(wt(i=o))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function kt(e,t,n,s){return vt(e,t,n,s,!1)}function Mt(e,t){var n,s;if(!(t=1===t.length&&r(t[0])?t[0]:t).length)return kt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}i.createFromInputFallback=Y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){},ie=Y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),re=Y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:g()}));var Dt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function St(e){var t=(e=j(e)).year||0,n=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,r=e.day||0,a=e.hour||0,u=e.minute||0,l=e.second||0,h=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,i=Dt.length;for(t in e)if(o(e,t)&&(-1===ke.call(Dt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[Dt[n]]){if(s)return!1;parseFloat(e[Dt[n]])!==q(e[Dt[n]])&&(s=!0)}return!0}(e),this._milliseconds=+h+1e3*l+6e4*u+1e3*a*60*60,this._days=+r+7*i,this._months=+s+3*n+12*t,this._data={},this._locale=it(),this._bubble()}function Yt(e){return e instanceof St}function Ot(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function bt(e,t){F(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)}))}bt("Z",":"),bt("ZZ",""),me("Z",ce),me("ZZ",ce),we(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Tt(ce,e)}));var xt=/([\+\-]|\d\d)/gi;function Tt(e,t){return null===(t=(t||"").match(e))?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(xt)||["-",0,0])[1]+q(e[2]))?0:"+"===e[0]?t:-t}function Nt(e,t){var n;return t._isUTC?(t=t.clone(),n=(D(e)||d(e)?e:kt(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+n),i.updateOffset(t,!1),t):kt(e).local()}function Pt(e){return-Math.round(e._d.getTimezoneOffset())}function Rt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Wt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ct=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ut(t,n){var s,i=t;return Yt(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:h(t)||!isNaN(+t)?(i={},n?i[n]=+t:i.milliseconds=+t):(n=Wt.exec(t))?(s="-"===n[1]?-1:1,i={y:0,d:q(n[2])*s,h:q(n[3])*s,m:q(n[4])*s,s:q(n[5])*s,ms:q(Ot(1e3*n[6]))*s}):(n=Ct.exec(t))?(s="-"===n[1]?-1:1,i={y:Ht(n[2],s),M:Ht(n[3],s),w:Ht(n[4],s),d:Ht(n[5],s),h:Ht(n[6],s),m:Ht(n[7],s),s:Ht(n[8],s)}):null==i?i={}:"object"==e(i)&&("from"in i||"to"in i)&&(n=function(e,t){var n;return e.isValid()&&t.isValid()?(t=Nt(t,e),e.isBefore(t)?n=Ft(e,t):((n=Ft(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(kt(i.from),kt(i.to)),(i={}).ms=n.milliseconds,i.M=n.months),s=new St(i),Yt(t)&&o(t,"_locale")&&(s._locale=t._locale),Yt(t)&&o(t,"_isValid")&&(s._isValid=t._isValid),s}function Ht(e,t){return e=e&&parseFloat(e.replace(",",".")),(isNaN(e)?0:e)*t}function Ft(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Lt(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(b(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Vt(this,Ut(n,s),e),this}}function Vt(e,t,n,s){var r=t._milliseconds,a=Ot(t._days);t=Ot(t._months);e.isValid()&&(s=null==s||s,t&&xe(e,J(e,"Month")+t*n),a&&Q(e,"Date",J(e,"Date")+a*n),r&&e._d.setTime(e._d.valueOf()+r*n),s)&&i.updateOffset(e,a||t)}function Gt(e){return"string"==typeof e||e instanceof String}function Et(e){return D(e)||d(e)||Gt(e)||h(e)||function(e){var t=r(e),n=!1;return t&&(n=0===e.filter((function(t){return!h(t)&&Gt(e)})).length),t&&n}(e)||function(e){var t,n=a(e)&&!u(e),s=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r=i.length;for(t=0;t<r;t+=1)s=s||o(e,i[t]);return n&&s}(e)||null==e}function At(e,t){var n,s;return e.date()<t.date()?-At(t,e):-((n=12*(t.year()-e.year())+(t.month()-e.month()))+(t-(s=e.clone().add(n,"months"))<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s)))||0}function jt(e){return void 0===e?this._locale._abbr:(null!=(e=it(e))&&(this._locale=e),this)}function It(){return this._locale}Ut.fn=St.prototype,Ut.invalid=function(){return Ut(NaN)},De=Lt(1,"add"),Ge=Lt(-1,"subtract"),i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Ae=Y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));var Zt=126227808e5;function zt(e,t){return(e%t+t)%t}function $t(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-Zt:new Date(e,t,n).valueOf()}function qt(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-Zt:Date.UTC(e,t,n)}function Bt(e,t){return t.erasAbbrRegex(e)}function Jt(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(ye(i[r].name)),e.push(ye(i[r].abbr)),n.push(ye(i[r].narrow)),s.push(ye(i[r].name)),s.push(ye(i[r].abbr)),s.push(ye(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function Qt(e,t){F(0,[e,e.length],0,t)}function Xt(e,t,n,s,i){var r;return null==e?Fe(this,s,i).year:(r=Le(e,s,i),function(e,t,n,s,i){return t=Ce((e=He(e,t,n,s,i)).year,0,e.dayOfYear),this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=r<t?r:t,n,s,i))}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),me("N",Bt),me("NN",Bt),me("NNN",Bt),me("NNNN",(function(e,t){return t.erasNameRegex(e)})),me("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),we(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,s){(s=n._locale.erasParse(e,s,n._strict))?_(n).era=s:_(n).invalidEra=e})),me("y",le),me("yy",le),me("yyy",le),me("yyyy",le),me("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),we(["y","yy","yyy","yyyy"],0),we(["yo"],(function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,i):t[0]=parseInt(e,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Qt("gggg","weekYear"),Qt("ggggg","weekYear"),Qt("GGGG","isoWeekYear"),Qt("GGGGG","isoWeekYear"),E("weekYear","gg"),E("isoWeekYear","GG"),Z("weekYear",1),Z("isoWeekYear",1),me("G",he),me("g",he),me("GG",se,K),me("gg",se,K),me("GGGG",oe,te),me("gggg",oe,te),me("GGGGG",ue,ne),me("ggggg",ue,ne),ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,s){t[s.substr(0,2)]=q(e)})),ve(["gg","GG"],(function(e,t,n,s){t[s]=i.parseTwoDigitYear(e)})),F("Q",0,"Qo","quarter"),E("quarter","Q"),Z("quarter",7),me("Q",X),we("Q",(function(e,t){t[1]=3*(q(e)-1)})),F("D",["DD",2],"Do","date"),E("date","D"),Z("date",9),me("D",se),me("DD",se,K),me("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),we(["D","DD"],2),we("Do",(function(e,t){t[2]=q(e.match(se)[0])})),oe=B("Date",!0),F("DDD",["DDDD",3],"DDDo","dayOfYear"),E("dayOfYear","DDD"),Z("dayOfYear",4),me("DDD",ae),me("DDDD",ee),we(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=q(e)})),F("m",["mm",2],0,"minute"),E("minute","m"),Z("minute",14),me("m",se),me("mm",se,K),we(["m","mm"],4);var Kt;te=B("Minutes",!1),F("s",["ss",2],0,"second"),E("second","s"),Z("second",15),me("s",se),me("ss",se,K),we(["s","ss"],5),ue=B("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),E("millisecond","ms"),Z("millisecond",16),me("S",ae,X),me("SS",ae,K),me("SSS",ae,ee),Kt="SSSS";Kt.length<=9;Kt+="S")me(Kt,le);function en(e,t){t[6]=q(1e3*("0."+e))}for(Kt="S";Kt.length<=9;Kt+="S")we(Kt,en);function tn(e){return e}function nn(e,t,n,s){var i=it();s=m().set(s,t);return i[n](s,e)}function sn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return nn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=nn(e,i,n,"month");return s}function rn(e,t,n,s){"boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t=t||"";var i,r=it(),a=e?r._week.dow:0,o=[];if(null!=n)return nn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=nn(t,(i+a)%7,s,"day");return o}ne=B("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName"),(X=M.prototype).add=De,X.calendar=function(e,t){1===arguments.length&&(arguments[0]?Et(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=a(e)&&!u(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||o(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var n=e||kt(),s=Nt(n,this).startOf("day"),r=(s=i.calendarFormat(this,s)||"sameElse",t&&(x(t[s])?t[s].call(this,n):t[s]));return this.format(r||this.localeData().calendar(s,this,kt(n)))},X.clone=function(){return new M(this)},X.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Nt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=A(t)){case"year":r=At(this,s)/12;break;case"month":r=At(this,s);break;case"quarter":r=At(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:$(r)},X.endOf=function(e){var t,n;if(void 0!==(e=A(e))&&"millisecond"!==e&&this.isValid()){switch(n=this._isUTC?qt:$t,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-zt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-zt(t,1e3)-1}this._d.setTime(t),i.updateOffset(this,!0)}return this},X.format=function(e){return e=L(this,e=e||(this.isUtc()?i.defaultFormatUtc:i.defaultFormat)),this.localeData().postformat(e)},X.from=function(e,t){return this.isValid()&&(D(e)&&e.isValid()||kt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},X.fromNow=function(e){return this.from(kt(),e)},X.to=function(e,t){return this.isValid()&&(D(e)&&e.isValid()||kt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},X.toNow=function(e){return this.to(kt(),e)},X.get=function(e){return x(this[e=A(e)])?this[e]():this},X.invalidAt=function(){return _(this).overflow},X.isAfter=function(e,t){return e=D(e)?e:kt(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=A(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},X.isBefore=function(e,t){return e=D(e)?e:kt(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=A(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},X.isBetween=function(e,t,n,s){return e=D(e)?e:kt(e),t=D(t)?t:kt(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},X.isSame=function(e,t){e=D(e)?e:kt(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=A(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},X.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},X.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},X.isValid=function(){return y(this)},X.lang=Ae,X.locale=jt,X.localeData=It,X.max=re,X.min=ie,X.parsingFlags=function(){return f({},_(this))},X.set=function(t,n){if("object"==e(t))for(var s=function(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:I[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(t=j(t)),i=s.length,r=0;r<i;r++)this[s[r].unit](t[s[r].unit]);else if(x(this[t=A(t)]))return this[t](n);return this},X.startOf=function(e){var t,n;if(void 0!==(e=A(e))&&"millisecond"!==e&&this.isValid()){switch(n=this._isUTC?qt:$t,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=zt(t,6e4);break;case"second":t=this._d.valueOf(),t-=zt(t,1e3)}this._d.setTime(t),i.updateOffset(this,!0)}return this},X.subtract=Ge,X.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},X.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},X.toDate=function(){return new Date(this.valueOf())},X.toISOString=function(e){var t;return this.isValid()?(t=(e=!0!==e)?this.clone().utc():this).year()<0||9999<t.year()?L(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(t,"Z")):L(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ"):null},X.inspect=function(){var e,t,n;return this.isValid()?(t="moment",e="",this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z"),t="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+n+"-MM-DD[T]HH:mm:ss.SSS"+e+'[")]')):"moment.invalid(/* "+this._i+" */)"},"undefined"!=typeof Symbol&&null!=Symbol.for&&(X[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),X.toJSON=function(){return this.isValid()?this.toISOString():null},X.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},X.unix=function(){return Math.floor(this.valueOf()/1e3)},X.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},X.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},X.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},X.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},X.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},X.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,r=n.length;s<r;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-i(n[s].since).year())*e+n[s].offset;return this.year()},X.year=Re,X.isLeapYear=function(){return z(this.year())},X.weekYear=function(e){return Xt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},X.isoWeekYear=function(e){return Xt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},X.quarter=X.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},X.month=Te,X.daysInMonth=function(){return Me(this.year(),this.month())},X.week=X.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},X.isoWeek=X.isoWeeks=function(e){var t=Fe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},X.weeksInYear=function(){var e=this.localeData()._week;return Le(this.year(),e.dow,e.doy)},X.weeksInWeekYear=function(){var e=this.localeData()._week;return Le(this.weekYear(),e.dow,e.doy)},X.isoWeeksInYear=function(){return Le(this.year(),1,4)},X.isoWeeksInISOWeekYear=function(){return Le(this.isoWeekYear(),1,4)},X.date=oe,X.day=X.days=function(e){var t,n,s;return this.isValid()?(t=this._isUTC?this._d.getUTCDay():this._d.getDay(),null!=e?(n=e,s=this.localeData(),e="string"!=typeof n?n:isNaN(n)?"number"==typeof(n=s.weekdaysParse(n))?n:null:parseInt(n,10),this.add(e-t,"d")):t):null!=e?this:NaN},X.weekday=function(e){var t;return this.isValid()?(t=(this.day()+7-this.localeData()._week.dow)%7,null==e?t:this.add(e-t,"d")):null!=e?this:NaN},X.isoWeekday=function(e){var t,n;return this.isValid()?null!=e?(t=e,n=this.localeData(),n="string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:null!=e?this:NaN},X.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},X.hour=X.hours=fe,X.minute=X.minutes=te,X.second=X.seconds=ue,X.millisecond=X.milliseconds=ne,X.utcOffset=function(e,t,n){var s,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?r:Pt(this);if("string"==typeof e){if(null===(e=Tt(ce,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Pt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),r!==e&&(!t||this._changeInProgress?Vt(this,Ut(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this},X.utc=function(e){return this.utcOffset(0,e)},X.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e)&&this.subtract(Pt(this),"m"),this},X.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Tt(de,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},X.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?kt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},X.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},X.isLocal=function(){return!!this.isValid()&&!this._isUTC},X.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},X.isUtc=Rt,X.isUTC=Rt,X.zoneAbbr=function(){return this._isUTC?"UTC":""},X.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},X.dates=Y("dates accessor is deprecated. Use date instead.",oe),X.months=Y("months accessor is deprecated. Use month instead",Te),X.years=Y("years accessor is deprecated. Use year instead",Re),X.zone=Y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()})),X.isDSTShifted=Y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){var e,t;return l(this._isDSTShifted)&&(k(e={},this),(e=wt(e))._a?(t=(e._isUTC?m:kt)(e._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)q(e[a])!==q(t[a])&&r++;return r+i}(e._a,t.toArray())):this._isDSTShifted=!1),this._isDSTShifted})),(K=N.prototype).calendar=function(e,t,n){return x(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},K.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(W).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},K.invalidDate=function(){return this._invalidDate},K.ordinal=function(e){return this._ordinal.replace("%d",e)},K.preparse=tn,K.postformat=tn,K.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return x(i)?i(e,t,n,s):i.replace(/%d/i,e)},K.pastFuture=function(e,t){return x(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},K.set=function(e){var t,n;for(n in e)o(e,n)&&(x(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},K.eras=function(t,n){for(var s,r=this._eras||it("en")._eras,a=0,o=r.length;a<o;++a)switch("string"==typeof r[a].since&&(s=i(r[a].since).startOf("day"),r[a].since=s.valueOf()),e(r[a].until)){case"undefined":r[a].until=1/0;break;case"string":s=i(r[a].until).startOf("day").valueOf(),r[a].until=s.valueOf()}return r},K.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s]}else if(0<=[r,a,o].indexOf(e))return u[s]},K.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},K.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||Jt.call(this),e?this._erasAbbrRegex:this._erasRegex},K.erasNameRegex=function(e){return o(this,"_erasNameRegex")||Jt.call(this),e?this._erasNameRegex:this._erasRegex},K.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||Jt.call(this),e?this._erasNarrowRegex:this._erasRegex},K.months=function(e,t){return e?(r(this._months)?this._months:this._months[(this._months.isFormat||Ye).test(t)?"format":"standalone"])[e.month()]:r(this._months)?this._months:this._months.standalone},K.monthsShort=function(e,t){return e?(r(this._monthsShort)?this._monthsShort:this._monthsShort[Ye.test(t)?"format":"standalone"])[e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},K.monthsParse=function(e,t,n){var s,i;if(this._monthsParseExact)return function(e,t,n){var s,i,r;e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=m([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=ke.call(this._shortMonthsParse,e))?i:null:-1!==(i=ke.call(this._longMonthsParse,e))?i:null:"MMM"===t?-1!==(i=ke.call(this._shortMonthsParse,e))||-1!==(i=ke.call(this._longMonthsParse,e))?i:null:-1!==(i=ke.call(this._longMonthsParse,e))||-1!==(i=ke.call(this._shortMonthsParse,e))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=m([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},K.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=be),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},K.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Oe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},K.week=function(e){return Fe(e,this._week.dow,this._week.doy).week},K.firstDayOfYear=function(){return this._week.doy},K.firstDayOfWeek=function(){return this._week.dow},K.weekdays=function(e,t){return t=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Ve(t,this._week.dow):e?t[e.day()]:t},K.weekdaysMin=function(e){return!0===e?Ve(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},K.weekdaysShort=function(e){return!0===e?Ve(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},K.weekdaysParse=function(e,t,n){var s,i;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r;e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=m([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=ke.call(this._weekdaysParse,e))?i:null:"ddd"===t?-1!==(i=ke.call(this._shortWeekdaysParse,e))?i:null:-1!==(i=ke.call(this._minWeekdaysParse,e))?i:null:"dddd"===t?-1!==(i=ke.call(this._weekdaysParse,e))||-1!==(i=ke.call(this._shortWeekdaysParse,e))||-1!==(i=ke.call(this._minWeekdaysParse,e))?i:null:"ddd"===t?-1!==(i=ke.call(this._shortWeekdaysParse,e))||-1!==(i=ke.call(this._weekdaysParse,e))||-1!==(i=ke.call(this._minWeekdaysParse,e))?i:null:-1!==(i=ke.call(this._minWeekdaysParse,e))||-1!==(i=ke.call(this._weekdaysParse,e))||-1!==(i=ke.call(this._shortWeekdaysParse,e))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=m([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},K.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=je),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},K.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ie),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},K.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},K.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},K.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},nt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===q(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),i.lang=Y("moment.lang is deprecated. Use moment.locale instead.",nt),i.langData=Y("moment.langData is deprecated. Use moment.localeData instead.",it);var an=Math.abs;function on(e,t,n,s){return t=Ut(t,n),e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function un(e){return e<0?Math.floor(e):Math.ceil(e)}function ln(e){return 4800*e/146097}function hn(e){return 146097*e/4800}function dn(e){return function(){return this.as(e)}}function cn(e){return function(){return this.isValid()?this._data[e]:NaN}}ae=dn("ms"),ee=dn("s"),De=dn("m"),re=dn("h"),ie=dn("d"),Ge=dn("w"),fe=dn("M"),te=dn("Q"),ue=dn("y");ne=cn("milliseconds"),oe=cn("seconds"),Re=cn("minutes"),K=cn("hours");var fn=cn("days"),mn=cn("months"),_n=cn("years"),yn=Math.round,gn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};var pn=Math.abs;function wn(e){return(0<e)-(e<0)||+e}function vn(){var e,t,n,s,i,r,a,o,u,l,h;return this.isValid()?(e=pn(this._milliseconds)/1e3,t=pn(this._days),n=pn(this._months),(o=this.asSeconds())?(s=$(e/60),i=$(s/60),e%=60,s%=60,r=$(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",u=wn(this._months)!==wn(o)?"-":"",l=wn(this._days)!==wn(o)?"-":"",h=wn(this._milliseconds)!==wn(o)?"-":"",(o<0?"-":"")+"P"+(r?u+r+"Y":"")+(n?u+n+"M":"")+(t?l+t+"D":"")+(i||s||e?"T":"")+(i?h+i+"H":"")+(s?h+s+"M":"")+(e?h+a+"S":"")):"P0D"):this.localeData().invalidDate()}var kn=St.prototype;return kn.isValid=function(){return this._isValid},kn.abs=function(){var e=this._data;return this._milliseconds=an(this._milliseconds),this._days=an(this._days),this._months=an(this._months),e.milliseconds=an(e.milliseconds),e.seconds=an(e.seconds),e.minutes=an(e.minutes),e.hours=an(e.hours),e.months=an(e.months),e.years=an(e.years),this},kn.add=function(e,t){return on(this,e,t,1)},kn.subtract=function(e,t){return on(this,e,t,-1)},kn.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=A(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+ln(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(hn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},kn.asMilliseconds=ae,kn.asSeconds=ee,kn.asMinutes=De,kn.asHours=re,kn.asDays=ie,kn.asWeeks=Ge,kn.asMonths=fe,kn.asQuarters=te,kn.asYears=ue,kn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},kn._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*un(hn(n)+t),n=t=0),s.milliseconds=e%1e3,e=$(e/1e3),s.seconds=e%60,e=$(e/60),s.minutes=e%60,e=$(e/60),s.hours=e%24,t+=$(e/24),n+=e=$(ln(t)),t-=un(hn(e)),e=$(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},kn.clone=function(){return Ut(this)},kn.get=function(e){return e=A(e),this.isValid()?this[e+"s"]():NaN},kn.milliseconds=ne,kn.seconds=oe,kn.minutes=Re,kn.hours=K,kn.days=fn,kn.weeks=function(){return $(this.days()/7)},kn.months=mn,kn.years=_n,kn.humanize=function(t,n){var s,i;return this.isValid()?(s=!1,i=gn,"object"==e(t)&&(n=t,t=!1),"boolean"==typeof t&&(s=t),"object"==e(n)&&(i=Object.assign({},gn,n),null!=n.s)&&null==n.ss&&(i.ss=n.s-1),n=function(e,t,n,s){var i=Ut(e).abs(),r=yn(i.as("s")),a=yn(i.as("m")),o=yn(i.as("h")),u=yn(i.as("d")),l=yn(i.as("M")),h=yn(i.as("w"));return i=yn(i.as("y")),r=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||(a<=1?["m"]:a<n.m&&["mm",a])||(o<=1?["h"]:o<n.h&&["hh",o])||(u<=1?["d"]:u<n.d&&["dd",u]),(r=(r=null!=n.w?r||(h<=1?["w"]:h<n.w&&["ww",h]):r)||(l<=1?["M"]:l<n.M&&["MM",l])||(i<=1?["y"]:["yy",i]))[2]=t,r[3]=0<+e,r[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,r)}(this,!s,i,t=this.localeData()),s&&(n=t.pastFuture(+this,n)),t.postformat(n)):this.localeData().invalidDate()},kn.toISOString=vn,kn.toString=vn,kn.toJSON=vn,kn.locale=jt,kn.localeData=It,kn.toIsoString=Y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vn),kn.lang=Ae,F("X",0,0,"unix"),F("x",0,0,"valueOf"),me("x",he),me("X",/[+-]?\d+(\.\d{1,3})?/),we("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),we("x",(function(e,t,n){n._d=new Date(q(e))})),i.version="2.29.4",s=kt,i.fn=X,i.min=function(){return Mt("isBefore",[].slice.call(arguments,0))},i.max=function(){return Mt("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=m,i.unix=function(e){return kt(1e3*e)},i.months=function(e,t){return sn(e,t,"months")},i.isDate=d,i.locale=nt,i.invalid=g,i.duration=Ut,i.isMoment=D,i.weekdays=function(e,t,n){return rn(e,t,n,"weekdays")},i.parseZone=function(){return kt.apply(null,arguments).parseZone()},i.localeData=it,i.isDuration=Yt,i.monthsShort=function(e,t){return sn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return rn(e,t,n,"weekdaysMin")},i.defineLocale=st,i.updateLocale=function(e,t){var n,s;return null!=t?(s=Qe,null!=Xe[e]&&null!=Xe[e].parentLocale?Xe[e].set(T(Xe[e]._config,t)):(t=T(s=null!=(n=tt(e))?n._config:s,t),null==n&&(t.abbr=e),(s=new N(t)).parentLocale=Xe[e],Xe[e]=s),nt(e)):null!=Xe[e]&&(null!=Xe[e].parentLocale?(Xe[e]=Xe[e].parentLocale,e===nt()&&nt(e)):null!=Xe[e]&&delete Xe[e]),Xe[e]},i.locales=function(){return P(Xe)},i.weekdaysShort=function(e,t,n){return rn(e,t,n,"weekdaysShort")},i.normalizeUnits=A,i.relativeTimeRounding=function(e){return void 0===e?yn:"function"==typeof e&&(yn=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==gn[e]&&(void 0===t?gn[e]:(gn[e]=t,"s"===e&&(gn.ss=t-1),!0))},i.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},i.prototype=X,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i},"object"==e(s)&&void 0!==n?n.exports=i():"function"==typeof define&&define.amd?define(i):this.moment=i()},s=function(e){return t({}[e],e)},i[1706173694356]={status:0,func:n,req:s,m:{exports:{},_tempexports:{}}},t(1706173694356)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/moment/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/qs/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function t(e,t,r){o[e]={status:0,func:t,req:r,m:{exports:{},_tempexports:{}}}}function r(t,r){var n,i;return o[t]?(o[t].status||((n=o[t].m)._exports=n._tempexports,(i=Object.getOwnPropertyDescriptor(n,"exports"))&&i.configurable&&Object.defineProperty(n,"exports",{set:function(t){"object"==e(t)&&t!==n._exports&&(n._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(e){n._exports[e]=t[e]}))),n._tempexports=t},get:function(){return n._tempexports}}),o[t].status=1,o[t].func(o[t].req,n,n.exports)),o[t].m.exports):require(r)}var o={};return t(1706173694357,(function(e,t,r){var o=e("./stringify"),n=e("./parse");e=e("./formats");t.exports={formats:e,parse:n,stringify:o}}),(function(e){return r({"./stringify":1706173694358,"./parse":1706173694361,"./formats":1706173694360}[e],e)})),t(1706173694358,(function(t,r,o){function n(e,t){f.apply(e,u(t)?t:[t])}function i(t,r,o,c,l,s,f,p,y,m,h,b,g){var v=t;if("function"==typeof f?v=f(r,v):v instanceof Date?v=m(v):"comma"===o&&u(v)&&(v=v.join(",")),null===v){if(c)return s&&!b?s(r,d.encoder,g,"key"):r;v=""}if("string"==typeof(t=v)||"number"==typeof t||"boolean"==typeof t||"symbol"==e(t)||"bigint"==typeof t||a.isBuffer(v))return s?[h(b?r:s(r,d.encoder,g,"key"))+"="+h(s(v,d.encoder,g,"value"))]:[h(r)+"="+h(String(v))];var j,O=[];if(void 0!==v){j=u(f)?f:(t=Object.keys(v),p?t.sort(p):t);for(var x=0;x<j.length;++x){var w=j[x];l&&null===v[w]||(u(v)?n(O,i(v[w],"function"==typeof o?o(r,w):r,o,c,l,s,f,p,y,m,h,b,g)):n(O,i(v[w],r+(y?"."+w:"["+w+"]"),o,c,l,s,f,p,y,m,h,b,g)))}}return O}var a=t("./utils"),c=t("./formats"),l=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,f=Array.prototype.push,p=Date.prototype.toISOString,d=(t=c.default,{addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:t,formatter:c.formatters[t],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1});r.exports=function(t,r){var o=t,a=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=c.default;if(void 0!==e.format){if(!l.call(c.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}r=c.formatters[r];var o=d.filter;return"function"!=typeof e.filter&&!u(e.filter)||(o=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:d).addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:d).charsetSentinel,delimiter:(void 0===e.delimiter?d:e).delimiter,encode:("boolean"==typeof e.encode?e:d).encode,encoder:("function"==typeof e.encoder?e:d).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:d).encodeValuesOnly,filter:o,formatter:r,serializeDate:("function"==typeof e.serializeDate?e:d).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:d).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:d).strictNullHandling}}(r),f=("function"==typeof a.filter?o=(0,a.filter)("",o):u(a.filter)&&(y=a.filter),[]);if("object"!=e(o)||null===o)return"";t=r&&r.arrayFormat in s?r.arrayFormat:r&&"indices"in r&&!r.indices?"repeat":"indices";var p=s[t],y=y||Object.keys(o);a.sort&&y.sort(a.sort);for(var m=0;m<y.length;++m){var h=y[m];a.skipNulls&&null===o[h]||n(f,i(o[h],h,p,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}return r=f.join(a.delimiter),t=!0===a.addQueryPrefix?"?":"",a.charsetSentinel&&("iso-8859-1"===a.charset?t+="utf8=%26%2310003%3B&":t+="utf8=%E2%9C%93&"),0<r.length?t+r:""}}),(function(e){return r({"./utils":1706173694359,"./formats":1706173694360}[e],e)})),t(1706173694359,(function(t,r,o){function n(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(r[o]=e[o]);return r}var i=Object.prototype.hasOwnProperty,a=Array.isArray,c=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();r.exports={arrayToObject:n,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(t){for(var r=[{obj:{o:t},prop:"o"}],o=[],n=0;n<r.length;++n)for(var i=r[n],c=i.obj[i.prop],l=Object.keys(c),s=0;s<l.length;++s){var u=l[s],f=c[u];"object"==e(f)&&null!==f&&-1===o.indexOf(f)&&(r.push({obj:c,prop:u}),o.push(f))}for(var p=r;1<p.length;){var d=p.pop(),y=d.obj[d.prop];if(a(y)){for(var m=[],h=0;h<y.length;++h)void 0!==y[h]&&m.push(y[h]);d.obj[d.prop]=m}}return t},decode:function(e,t,r){if(e=e.replace(/\+/g," "),"iso-8859-1"===r)return e.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(e)}catch(t){return e}},encode:function(t,r,o){if(0===t.length)return t;var n=t;if("symbol"==e(t)?n=Symbol.prototype.toString.call(t):"string"!=typeof t&&(n=String(t)),"iso-8859-1"===o)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",a=0;a<n.length;++a){var l=n.charCodeAt(a);45===l||46===l||95===l||126===l||48<=l&&l<=57||65<=l&&l<=90||97<=l&&l<=122?i+=n.charAt(a):l<128?i+=c[l]:l<2048?i+=c[192|l>>6]+c[128|63&l]:l<55296||57344<=l?i+=c[224|l>>12]+c[128|l>>6&63]+c[128|63&l]:(a+=1,l=65536+((1023&l)<<10|1023&n.charCodeAt(a)),i+=c[240|l>>18]+c[128|l>>12&63]+c[128|l>>6&63]+c[128|63&l])}return i},isBuffer:function(t){return!(!t||"object"!=e(t)||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function t(r,o,c){if(!o)return r;if("object"!=e(o)){if(a(r))r.push(o);else{if(!r||"object"!=e(r))return[r,o];(c&&(c.plainObjects||c.allowPrototypes)||!i.call(Object.prototype,o))&&(r[o]=!0)}return r}var l;return r&&"object"==e(r)?(a(l=r)&&!a(o)&&(l=n(r,c)),a(r)&&a(o)?(o.forEach((function(o,n){var a;i.call(r,n)?(a=r[n])&&"object"==e(a)&&o&&"object"==e(o)?r[n]=t(a,o,c):r.push(o):r[n]=o})),r):Object.keys(o).reduce((function(e,r){var n=o[r];return i.call(e,r)?e[r]=t(e[r],n,c):e[r]=n,e}),l)):[r].concat(o)}}}),(function(e){return r({}[e],e)})),t(1706173694360,(function(e,t,r){var o=String.prototype.replace,n=/%20/g,i=(e=e("./utils"),{RFC1738:"RFC1738",RFC3986:"RFC3986"});t.exports=e.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return o.call(e,n,"+")},RFC3986:function(e){return String(e)}}},i)}),(function(e){return r({"./utils":1706173694359}[e],e)})),t(1706173694361,(function(e,t,r){function o(e,t,r,o){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,c=0<r.depth&&/(\[[^[\]]*])/.exec(n),s=[];if(e=c?n.slice(0,c.index):n){if(!r.plainObjects&&i.call(Object.prototype,e)&&!r.allowPrototypes)return;s.push(e)}for(var u=0;0<r.depth&&null!==(c=a.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&i.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(c[1])}c&&s.push("["+n.slice(c.index)+"]");for(var f=s,p=(e=t,r),d=o?e:l(e,p),y=f.length-1;0<=y;--y){var m,h,b,g=f[y];"[]"===g&&p.parseArrays?m=[].concat(d):(m=p.plainObjects?Object.create(null):{},h="["===g.charAt(0)&&"]"===g.charAt(g.length-1)?g.slice(1,-1):g,b=parseInt(h,10),p.parseArrays||""!==h?!isNaN(b)&&g!==h&&String(b)===h&&0<=b&&p.parseArrays&&b<=p.arrayLimit?(m=[])[b]=d:m[h]=d:m={0:d}),d=m}return d}}var n=e("./utils"),i=Object.prototype.hasOwnProperty,a=Array.isArray,c={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},l=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e};t.exports=function(e,t){var r=function(e){if(!e)return c;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?c:e).charset;return{allowDots:void 0===e.allowDots?c.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:c).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:c).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:c).charsetSentinel,comma:("boolean"==typeof e.comma?e:c).comma,decoder:("function"==typeof e.decoder?e:c).decoder,delimiter:("string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e:c).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:c.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:c).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:c).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:c).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:c).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){var r,o,s,u,f={},p=(e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,t.parameterLimit===1/0?void 0:t.parameterLimit),d=e.split(t.delimiter,p),y=-1,m=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?m="utf-8":"utf8=%26%2310003%3B"===d[r]&&(m="iso-8859-1"),y=r,r=d.length);for(r=0;r<d.length;++r)r!==y&&((u=-1===(u=-1===(u=(o=d[r]).indexOf("]="))?o.indexOf("="):u+1)?(s=t.decoder(o,c.decoder,m,"key"),t.strictNullHandling?null:""):(s=t.decoder(o.slice(0,u),c.decoder,m,"key"),function(e,t){if(a(e)){for(var r=[],o=0;o<e.length;o+=1)r.push(t(e[o]));return r}return t(e)}(l(o.slice(u+1),t),(function(e){return t.decoder(e,c.decoder,m,"value")}))))&&t.interpretNumericEntities&&"iso-8859-1"===m&&(u=u.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))),-1<o.indexOf("[]=")&&(u=a(u)?[u]:u),i.call(f,s)?f[s]=n.combine(f[s],u):f[s]=u);return f}(e,r):e,u=r.plainObjects?Object.create(null):{},f=Object.keys(s),p=0;p<f.length;++p){var d=o(d=f[p],s[d],r,"string"==typeof e);u=n.merge(u,d,r)}return n.compact(u)}}),(function(e){return r({"./utils":1706173694359}[e],e)})),r(1706173694357)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/qs/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/rfdc/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,r,t=require("../../@babel/runtime/helpers/typeof");module.exports=(e={},r=function(r,n){if(!e[r])return require(n);if(!e[r].status){var f=e[r].m;f._exports=f._tempexports;var a=Object.getOwnPropertyDescriptor(f,"exports");a&&a.configurable&&Object.defineProperty(f,"exports",{set:function(e){"object"===t(e)&&e!==f._exports&&(f._exports.__proto__=e.__proto__,Object.keys(e).forEach((function(r){f._exports[r]=e[r]}))),f._tempexports=e},get:function(){return f._tempexports}}),e[r].status=1,e[r].func(e[r].req,f,f.exports)}return e[r].m.exports},function(r,t,n){e[r]={status:0,func:t,req:n,m:{exports:{},_tempexports:{}}}}(1706173694362,(function(e,r,n){function f(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}r.exports=function(e){return(e=e||{}).circles?function(e){var r=[],n=[];return e.proto?function e(o){if("object"!==t(o)||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return a(o,e);if(o instanceof Map)return new Map(a(Array.from(o),e));if(o instanceof Set)return new Set(a(Array.from(o),e));var i={};for(var s in r.push(o),n.push(i),o){var u=o[s];if("object"!==t(u)||null===u)i[s]=u;else if(u instanceof Date)i[s]=new Date(u);else if(u instanceof Map)i[s]=new Map(a(Array.from(u),e));else if(u instanceof Set)i[s]=new Set(a(Array.from(u),e));else if(ArrayBuffer.isView(u))i[s]=f(u);else{var c=r.indexOf(u);i[s]=-1!==c?n[c]:e(u)}}return r.pop(),n.pop(),i}:function e(o){if("object"!==t(o)||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return a(o,e);if(o instanceof Map)return new Map(a(Array.from(o),e));if(o instanceof Set)return new Set(a(Array.from(o),e));var i={};for(var s in r.push(o),n.push(i),o)if(!1!==Object.hasOwnProperty.call(o,s)){var u=o[s];if("object"!==t(u)||null===u)i[s]=u;else if(u instanceof Date)i[s]=new Date(u);else if(u instanceof Map)i[s]=new Map(a(Array.from(u),e));else if(u instanceof Set)i[s]=new Set(a(Array.from(u),e));else if(ArrayBuffer.isView(u))i[s]=f(u);else{var c=r.indexOf(u);i[s]=-1!==c?n[c]:e(u)}}return r.pop(),n.pop(),i};function a(e,a){for(var o=Object.keys(e),i=new Array(o.length),s=0;s<o.length;s++){var u=o[s],c=e[u];if("object"!==t(c)||null===c)i[u]=c;else if(c instanceof Date)i[u]=new Date(c);else if(ArrayBuffer.isView(c))i[u]=f(c);else{var p=r.indexOf(c);i[u]=-1!==p?n[p]:a(c)}}return i}}(e):e.proto?function e(n){if("object"!==t(n)||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return r(n,e);if(n instanceof Map)return new Map(r(Array.from(n),e));if(n instanceof Set)return new Set(r(Array.from(n),e));var a={};for(var o in n){var i=n[o];"object"!==t(i)||null===i?a[o]=i:i instanceof Date?a[o]=new Date(i):i instanceof Map?a[o]=new Map(r(Array.from(i),e)):i instanceof Set?a[o]=new Set(r(Array.from(i),e)):ArrayBuffer.isView(i)?a[o]=f(i):a[o]=e(i)}return a}:function e(n){if("object"!==t(n)||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return r(n,e);if(n instanceof Map)return new Map(r(Array.from(n),e));if(n instanceof Set)return new Set(r(Array.from(n),e));var a={};for(var o in n)if(!1!==Object.hasOwnProperty.call(n,o)){var i=n[o];"object"!==t(i)||null===i?a[o]=i:i instanceof Date?a[o]=new Date(i):i instanceof Map?a[o]=new Map(r(Array.from(i),e)):i instanceof Set?a[o]=new Set(r(Array.from(i),e)):ArrayBuffer.isView(i)?a[o]=f(i):a[o]=e(i)}return a};function r(e,r){for(var n=Object.keys(e),a=new Array(n.length),o=0;o<n.length;o++){var i=n[o],s=e[i];"object"!==t(s)||null===s?a[i]=s:s instanceof Date?a[i]=new Date(s):ArrayBuffer.isView(s)?a[i]=f(s):a[i]=r(s)}return a}}}),(function(e){return r({}[e],e)})),r(1706173694362));
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/rfdc/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/sha1/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var r=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function t(t,e){var o,n;return s[t]?(s[t].status||((o=s[t].m)._exports=o._tempexports,(n=Object.getOwnPropertyDescriptor(o,"exports"))&&n.configurable&&Object.defineProperty(o,"exports",{set:function(t){"object"==r(t)&&t!==o._exports&&(o._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(r){o._exports[r]=t[r]}))),o._tempexports=t},get:function(){return o._tempexports}}),s[t].status=1,s[t].func(s[t].req,o,o.exports)),s[t].m.exports):require(e)}var e,o,s={};return e=function(r,t,e){function o(r,t){return r=s.wordsToBytes(function(r){r.constructor==String?r=n.stringToBytes(r):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||(r=r.toString());var t=s.bytesToWords(r),e=[],o=1732584193,u=-271733879,f=-1732584194,i=271733878,p=-1009589776;t[(r=8*r.length)>>5]|=128<<24-r%32,t[15+(64+r>>>9<<4)]=r;for(var c=0;c<t.length;c+=16){for(var a=o,_=u,y=f,x=i,b=p,g=0;g<80;g++){e[g]=g<16?t[c+g]:(l=e[g-3]^e[g-8]^e[g-14]^e[g-16])<<1|l>>>31;var l=(o<<5|o>>>27)+p+(e[g]>>>0)+(g<20?1518500249+(u&f|~u&i):g<40?1859775393+(u^f^i):g<60?(u&f|u&i|f&i)-1894007588:(u^f^i)-899497514);p=i,i=f,f=u<<30|u>>>2,u=o,o=l}o+=a,u+=_,f+=y,i+=x,p+=b}return[o,u,f,i,p]}(r)),t&&t.asBytes?r:t&&t.asString?u.bytesToString(r):s.bytesToHex(r)}var s,n,u;s=r("crypt"),n=r("charenc").utf8,u=r("charenc").bin,o._blocksize=16,o._digestsize=20,t.exports=o},o=function(r){return t({}[r],r)},s[1706173694363]={status:0,func:e,req:o,m:{exports:{},_tempexports:{}}},t(1706173694363)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/sha1/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("miniprogram_npm/wolfy87-eventemitter/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../@babel/runtime/helpers/typeof");module.exports=function(){function t(t,n){var r,s;return i[t]?(i[t].status||((r=i[t].m)._exports=r._tempexports,(s=Object.getOwnPropertyDescriptor(r,"exports"))&&s.configurable&&Object.defineProperty(r,"exports",{set:function(t){"object"==e(t)&&t!==r._exports&&(r._exports.__proto__=t.__proto__,Object.keys(t).forEach((function(e){r._exports[e]=t[e]}))),r._tempexports=t},get:function(){return r._tempexports}}),i[t].status=1,i[t].func(i[t].req,r,r.exports)),i[t].m.exports):require(n)}var n,r,i={};return n=function(t,n,r){function i(){}function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var u,f,c;u="undefined"!=typeof window?window:this||{},f=i.prototype,c=u.EventEmitter,f.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},f.flattenListeners=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n].listener);return t},f.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},f.addListener=function(t,n){if(!function t(n){return"function"==typeof n||n instanceof RegExp||!(!n||"object"!=e(n))&&t(n.listener)}(n))throw new TypeError("listener must be a function");var r,i=this.getListenersAsObject(t),o="object"==e(n);for(r in i)i.hasOwnProperty(r)&&-1===s(i[r],n)&&i[r].push(o?n:{listener:n,once:!1});return this},f.on=o("addListener"),f.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},f.once=o("addOnceListener"),f.defineEvent=function(e){return this.getListeners(e),this},f.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},f.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],t))&&i[r].splice(n,1);return this},f.off=o("removeListener"),f.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},f.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},f.manipulateListeners=function(t,n,r){var i,s,o=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if("object"!=e(n)||n instanceof RegExp)for(i=r.length;i--;)o.call(this,n,r[i]);else for(i in n)n.hasOwnProperty(i)&&(s=n[i])&&("function"==typeof s?o:u).call(this,i,s);return this},f.removeEvent=function(t){var n,r=e(t),i=this._getEvents();if("string"==r)delete i[t];else if(t instanceof RegExp)for(n in i)i.hasOwnProperty(n)&&t.test(n)&&delete i[n];else delete this._events;return this},f.removeAllListeners=o("removeEvent"),f.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},f.trigger=o("emitEvent"),f.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},f.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},f._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},f._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return u.EventEmitter=c,i},"function"==typeof define&&define.amd?define((function(){return i})):"object"==e(n)&&n.exports?n.exports=i:u.EventEmitter=i},r=function(e){return t({}[e],e)},i[1706173694364]={status:0,func:n,req:r,m:{exports:{},_tempexports:{}}},t(1706173694364)}();
},{isPage:false,isComponent:false,currentFile:'miniprogram_npm/wolfy87-eventemitter/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/activity.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FESTIVAL_TASK_TYPE=exports.FESTIVAL_STEP_TYPE=void 0;exports.FESTIVAL_STEP_TYPE=function(_){return _.JOIN_FRONTPAGE="join_frontpage",_.INVITE_FRIEND="invite_friend",_.COMPLETE_POINT_TASK="complete_wishes_task",_.USE_POINT="use_points",_.JOIN_WISH="join_ontime_wish",_.CREATE_ANY="create_any",_.CREATE_5_JOIN="create_5_join",_.CREATE_20_JOIN="create_20_join",_.CREATE_60_JOIN="create_60_join",_.CREATE_USER_JOIN="new_user_join",_.AD="ads",_.JOIN_PROMOTION="join_promotion",_}({}),exports.FESTIVAL_TASK_TYPE=function(_){return _["单次"]="once",_["周期型"]="cycle",_["广告"]="ads",_.TIME_LIMIT="timelimit",_}({});
},{isPage:false,isComponent:false,currentFile:'models/activity.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/activityTag.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dateMap=exports.Types=void 0,exports.getTypeByName=function(e){return a[e]};var e,t=require("../@babel/runtime/helpers/defineProperty"),r=(e=require("moment"))&&e.__esModule?e:{default:e};var a=exports.Types=function(e){return e["苹果专区"]="apple",e["免费抽 iPhone"]="iphone",e["每天 666"]="packet",e["周周抽手机"]="phone",e["周周送壕礼"]="big",e["节日福利"]="holiday",e["心愿福利"]="wish",e}({}),n=(exports.dateMap=t(t(t(t(t(t(t({},a.苹果专区,u),a["免费抽 iPhone"],(function(e){var t=(0,r.default)(e),a=t.get("month"),n=Math.ceil(t.get("date")/7);return"".concat(a+1," 月 第").concat(o[n],"场")})),a["每天 666"],(function(e){var t=(0,r.default)().get("date"),a=(0,r.default)(e);if(t===a.get("date"))return"今天";if(t+1===a.get("date"))return"明天";if(t+2===a.get("date"))return"后天";return a.format("MM 月 DD 日")})),a.周周抽手机,u),a.周周送壕礼,u),a.节日福利,u),a.心愿福利,u),{1:"一",2:"二",3:"三",4:"四",5:"五"}),o={1:"一",2:"一",3:"二",4:"二",5:"三"};function u(e){var t=(0,r.default)(e),a=t.get("month"),o=Math.ceil(t.get("date")/7);return"".concat(a+1," 月 第").concat(n[o],"场")}
},{isPage:false,isComponent:false,currentFile:'models/activityTag.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/allowToPublic.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasShowedDialogWhenFirstOpen=function(){return!!wx.getStorageSync("allow_to_public_dialog_has_showed")||(wx.setStorage({key:"allow_to_public_dialog_has_showed",data:!0}),!1)};
},{isPage:false,isComponent:false,currentFile:'models/allowToPublic.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/authPhone.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.authPhone=function(e,r){return i.apply(this,arguments)},exports.handleAuthPhone=function(e){return h.apply(this,arguments)},exports.isAuthedPhone=c;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("lodash"))&&e.__esModule?e:{default:e},u=require("./lottery"),o=require("../utils/user"),s=require("../services/chou"),a=require("../services/game");function i(){return(i=t(r().mark((function e(t,n){var u,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.checkSessionExpired)();case 2:if(u=e.sent,a="",!u){e.next=9;break}return e.next=7,(0,o.getWechatLoginInfo)();case 7:i=e.sent,a=i.code;case 9:return e.next=11,(0,s.phoneNumber)(t,n,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return n.default.get(getApp(),"globalData.userProfile.phone_authorized")}function p(e){var r;return(null==e||null===(r=e.extra)||void 0===r?void 0:r.join_detect)===u.DetectTypes.phone&&!c()}function h(){return(h=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p(t)){e.next=3;break}return e.next=3,(0,a.showAhthPhoneDialog)();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'models/authPhone.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/avatar.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAvatar=void 0;exports.getAvatar=function(){var e;return null===(e=getApp().globalData.userProfile)||void 0===e?void 0:e.avatar};
},{isPage:false,isComponent:false,currentFile:'models/avatar.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/checkJoinableHandler.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StepTypeHandler=exports.RemainCountHandler=void 0;var e,t=require("../@babel/runtime/helpers/inherits"),r=require("../@babel/runtime/helpers/createSuper"),i=require("../@babel/runtime/helpers/classCallCheck"),s=require("../@babel/runtime/helpers/createClass"),n=(e=require("lodash"))&&e.__esModule?e:{default:e},u=require("./activity");var a=function(){function e(t,r,s){i(this,e),this.currentTask=t,this.remainCount=r,this.recallAllow=s}return s(e,[{key:"setSuccessor",value:function(e){this.successor=e}}]),e}();exports.RemainCountHandler=function(e){t(u,a);var n=r(u);function u(){return i(this,u),n.apply(this,arguments)}return s(u,[{key:"operate",value:function(){var e;return!this.currentTask&&this.remainCount>0||(1===(null===(e=this.currentTask)||void 0===e?void 0:e.state)||(0===this.remainCount?"您今天的次数已经用完， 请明天再试":this.successor.operate()))}}]),u}(),exports.StepTypeHandler=function(e){t(o,a);var l=r(o);function o(){return i(this,o),l.apply(this,arguments)}return s(o,[{key:"operate",value:function(){var e,t,r,i;return(null===(e=this.currentTask)||void 0===e?void 0:e.step_type)===u.FESTIVAL_STEP_TYPE.USE_POINT?n.default.get(getApp(),"globalData.userProfile.info.points",0)>(this.currentTask.total_step||1)||"当前任务没有完成，请完成后重试":-1===(null===(t=this.currentTask)||void 0===t?void 0:t.id)?this.recallAllow:-2===(null===(r=this.currentTask)||void 0===r?void 0:r.id)||(0!==(null===(i=this.currentTask)||void 0===i?void 0:i.state)||(this.currentTask.step_type===u.FESTIVAL_STEP_TYPE.CREATE_USER_JOIN?"邀请指定数量新用户后重试":"当前任务没有完成，请完成后重试"))}}]),o}();
},{isPage:false,isComponent:false,currentFile:'models/checkJoinableHandler.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/create.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WinnerFillTypes=exports.WinnerFillType=exports.SwitchFields=exports.SelfHelpTypes=exports.RedPacketTypes=exports.ProductId=exports.ProType=exports.PrizeGiveTypes=exports.OptionNames=exports.LotteryTypes=exports.ImgTextType=exports.IdTypes=exports.GroupTypes=exports.FeaturesMark=exports.EditingTypes=exports.CREATE_TEMPLATE=void 0,exports.appendGaCreateLabel=function(e){n[i]||s();n[i].includes(e)||(n[i]+=e)},exports.getGaCreateLabel=function(){return(0,r.isString)(n[i])?n[i].slice(1):(s(),n[i])},exports.initGaCreateLabel=s,exports.isMinaPathLottery=function(r,o){return[e.PrizeTypes.REAL,e.PrizeTypes.COUPON].includes(r)&&o===t.GO_TO_MINA},exports.isPrizeLockEnable=function(e){return[o.UNLOCK,o.INCENTIVE].includes(null==e?void 0:e.template)||e.allowPrizeLock},exports.setGaKey=function(e){i=e},require("../@babel/runtime/helpers/Arrayincludes");var e=require("./lottery"),r=require("lodash"),t=(exports.ImgTextType=function(e){return e.IMG="IMG",e.TEXT="TEXT",e.JIA_FEN="JIA_FEN",e.COPY="COPY",e}({}),exports.OptionNames=function(e){return e.allowMultiJoin="同一用户多次参与 ",e.inviteFriend="邀请好友参与",e.teamUp="参与者可邀请好友组队",e.share="参与人页面隐藏分享按钮",e.group="仅群成员可参与",e.wecomGroup="企业微信客户群内可参与",e.friend="核验资格后参与",e.official="公众号粉丝可参与",e.signal="输入口令后参与",e.task="参与前完成指定任务",e.questionnaire="填写问卷后参与",e.vote="投票后参与",e.quiz="答题后参与",e.limit="从铁粉中抽取",e.game="玩游戏参与抽奖",e.company="加企业微信后参与",e.phone="收集参与者手机号",e.authPhone="要求参与者授权手机号验证",e.assist="参与后可助力增加助力值",e.allowToPublic="允许平台向更多人推荐你的抽奖",e.activeTask="设置打卡任务",e.limitedArea="指定区域用户可参与",e.auditEnable="先审核再参与",e.ontime="即抽即中",e.onUserCount="按人数开奖",e}({}),exports.SwitchFields=function(e){return e.INVITE_FRIEND="invite_friend",e.TEAM_UP="teamUp",e.DISABLE_SHARE="disableShare",e.FRIEND="friend",e.TASK="task",e.GROUP="group",e.OFFICIAL="official",e.SIGNAL="signal",e.QUESTIONNAIRE="questionnaire",e.VOTE="vote",e.QUIZ="quiz",e.GAME="game",e.COMPANY="companyEnable",e.LIMITED_AREA="limitedArea",e.SUBSCRIBE_JOIN="subscribeJoin",e}({}),exports.LotteryTypes=function(e){return e.NORMAL="normal",e.SELF_HELP="square",e.SMART="smart",e}({}),exports.EditingTypes=function(e){return e.CREATOR_COPY="creator_copy",e.JOIN_COPY="join_copy",e.EDITING="editing",e.AUTO_CREATE="auto_create",e}({}),exports.IdTypes=function(e){return e.SELF_HELP_ID="sid",e.LOTTERY_ID="lottery_id",e}({}),exports.ProType=function(e){return e.OPEN="open",e.CLOSE="close",e}({}),exports.PrizeGiveTypes=function(e){return e[e.MAILING=1]="MAILING",e[e.CONTACT_ME=2]="CONTACT_ME",e[e.WINNER_INFO=3]="WINNER_INFO",e[e.GO_TO_MINA=4]="GO_TO_MINA",e}({}));exports.RedPacketTypes=function(e){return e[e.NORMAL=10]="NORMAL",e[e.RANDOM=11]="RANDOM",e}({}),exports.ProductId=function(e){return e[e.PRO=1028]="PRO",e[e.RED_PACKET=2048]="RED_PACKET",e[e.SHOP=2050]="SHOP",e[e.NORMAL=2049]="NORMAL",e}({}),exports.SelfHelpTypes=function(e){return e[e.ONE_DAY=1]="ONE_DAY",e[e.THREE_DAY=3]="THREE_DAY",e[e.FIVE_DAY=5]="FIVE_DAY",e}({}),exports.GroupTypes=function(e){return e.group="普通微信群",e.weCom="企业微信客户群",e}({}),exports.WinnerFillType=function(e){return e[e["仅文字"]=1]="仅文字",e[e["图片加文字"]=2]="图片加文字",e}({}),exports.WinnerFillTypes=function(e){return e[e.TEXT=1]="TEXT",e[e.IMAGE=2]="IMAGE",e[e.PHONE=3]="PHONE",e[e.ADDRESS=4]="ADDRESS",e}({});var o=exports.CREATE_TEMPLATE={UNLOCK:"unlock",GROUP:"group",OFFICIAL:"official",FANSE:"fanse",ZSXQ:"zsxq",INCENTIVE:"incentive"};exports.FeaturesMark=function(e){return e["开启高级功能_顶部"]=".1",e["案例玩法"]=".2",e["更多图片_奖品_兑换码"]=".3",e["商城奖品"]=".4",e["实物"]=".5",e["红包奖项"]=".6",e["兑换码奖项"]=".7",e["输入奖品名称"]=".8",e["输入奖品份数"]=".9",e["切换奖品发放方式"]=".10",e["更多图片_红包"]=".11",e["普通红包金额"]=".12",e["切换红包形式"]=".13",e["红包数量说明"]=".15",e["兑换码设置说明"]=".18",e["兑换码设置"]=".19",e["添加奖项"]=".20",e["切换开奖条件"]=".21",e["设置开奖时间"]=".22",e["设置开奖人数"]=".23",e["按人数开奖_截止时间说明"]=".24",e["人数上限说明"]=".25",e["即开即中_截止时间说明"]=".27",e["抽奖说明"]=".29",e["更多功能"]=".30",e["快捷加粉说明"]=".31",e["设置快捷加粉"]=".32",e["分享说明"]=".33",e["分享按钮"]=".34",e["助力说明"]=".35",e["助力按钮"]=".36",e["组队说明"]=".37",e["组队按钮"]=".38",e["组队人数说明"]=".39",e["2人组队"]=".40",e["3人组队"]=".41",e["4人组队"]=".42",e["5人组队"]=".43",e["问卷_投票说明"]=".44",e["设置问卷_投票"]=".45",e["群抽奖说明"]=".46",e["群抽奖按钮"]=".47",e["公众号抽奖说明"]=".48",e["公众号抽奖按钮"]=".49",e["授权公众号"]=".50",e["回复关键词"]=".51",e["口令说明"]=".52",e["口令按钮"]=".53",e["口令内容"]=".54",e["添加图文内容"]=".55",e["开启高级功能_底部"]=".56",e["查看高级功能使用券"]=".57",e["免广告说明"]=".58",e["抽奖数据统计说明"]=".59",e["留言说明"]=".60",e["留言开关"]=".61",e["皮一下"]=".62",e["首页推广"]=".63",e["现场抽奖"]=".64",e["发起抽奖"]=".65",e["查看示例"]=".67",e["移除奖项"]=".68",e["发奖联系方式"]=".69",e["移除商城奖品"]=".70",e["更改商城奖品图片"]=".71",e["优惠券奖项"]=".72",e["按时间开奖"]=".73",e["按人数开奖"]=".74",e["即抽即中"]=".75",e["开奖方式介绍"]=".76",e["分享推广示例"]=".77",e["前置任务说明"]=".78",e["前置任务开关"]=".79",e["前置任务设置"]=".80",e["问卷说明"]=".81",e["问卷开关"]=".82",e["问卷设置"]=".83",e["投票说明"]=".84",e["投票开关"]=".85",e["投票设置"]=".86",e["红包联系客服"]=".87",e["公众号助力"]=".88",e["回复公众号助力关键词"]=".89",e["授权助力公众号"]=".90",e["核验资格后参与"]=".91",e["核验资格后参与示例"]=".92",e["关注公众号助力示例"]=".93",e["答题开关"]=".94",e["答题设置"]=".95",e["答题示例"]=".96",e["微信群抽奖"]=".97",e["公众号抽奖"]=".98",e["个人涨粉抽奖"]=".99",e["发起测试"]=".100",e["生成正式抽奖"]=".101",e["玩游戏参与抽奖示例"]=".102",e["设置游戏"]=".103",e["玩游戏参与抽奖开关"]=".104",e["从铁粉中抽取"]=".105",e["玩游戏抽奖"]=".106",e["营销活动"]=".107",e["营销活动/点击修改封面"]=".108",e["营销活动/点击转盘中的奖品"]=".109",e["营销活动/点击参与抽奖按钮"]=".110",e["营销活动/点击查看全部参与用户"]=".111",e["营销活动/点击设置活动信息"]=".112",e["营销活动/点击活动说明输入框"]=".113",e["营销活动/点击使用模版"]=".114",e["加企业微信后参与"]=".115",e["选择所在的企业"]=".116",e["展示我的企业微信"]=".117",e["营销活动大转盘入口"]=".118",e["营销活动抽码入口"]=".119",e["营销活动抽码/点击活动说明"]=".120",e["营销活动抽码/点击设置奖品信息"]=".121",e["营销活动抽码/点击奖品小卡片"]=".122",e["营销活动抽码/点击参与按钮"]=".123",e["营销活动抽码/点击查看全部"]=".124",e["营销活动老虎机"]=".125",e["微信红包封面奖项"]=".126",e["微信红包封面链接设置"]=".127",e["营销活动抽签入口"]=".128",e["营销活动抽签/点击签筒"]=".129",e["营销活动抽签/点击修改标题"]=".130",e["营销活动抽签/点击设置奖品信息"]=".131",e["邀请好友参与"]=".132",e["即抽即中开始时间按钮"]=".133",e["企业群抽奖"]=".134",e["要求参与者授权手机号验证"]=".135",e["参与后可助力增加助力值"]=".136",e["设置打卡任务"]=".137",e["指定区域用户可参与"]=".138",e["自动修改公众号为发起人"]=".139",e["查看自动修改的公众号发起人"]=".140",e["输入小程序AppID"]=".141",e["输入小程序页面路径"]=".142",e["专属引流位说明"]=".143",e["快递邮寄"]=".144",e["让中奖者联系我"]=".145",e["中奖者填写信息"]=".146",e["跳转其它小程序领取"]=".147",e["按参与人数解锁奖品"]=".148",e["输入奖品解锁人数"]=".149",e["引导参与者订阅"]=".150",e["允许重复参与抽奖"]=".151",e["关注公众号自动回复参与链接"]=".152",e["输入奖品领奖说明"]=".153",e["输入奖品兑换地址"]=".154",e["切换抽奖次数限制"]=".155",e["设置抽奖人数上限"]=".156",e["设置抽奖截止时间"]=".157",e["设置抽奖参与任务"]=".158",e["先审核再参与"]=".159",e}({});var n={},i="";function s(){n[i]=""}
},{isPage:false,isComponent:false,currentFile:'models/create.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/fillWinnerInfo.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toSettingPage=exports.toFillWinnerInfo=exports.submitWinnerInfo=exports.SettingTypes=void 0;var e,t=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../libs/request");exports.SettingTypes=function(e){return e.SETTING="setting",e.UPDATE="update",e}({}),exports.toFillWinnerInfo=function(){wx.navigateTo({url:"/pages/winnerInfo/winnerInfoPreview/winnerInfoPreview?type=update"})},exports.toSettingPage=function(e){wx.navigateTo({url:"/pages/winnerInfo/winnerInfoSetting/winnerInfoSetting?type=".concat(e)})},exports.submitWinnerInfo=function(e,o,i){return(0,n.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/lottery/").concat(e,"/lucky_fill_info?join_id=").concat(i||""),method:"POST",data:o})};
},{isPage:false,isComponent:false,currentFile:'models/fillWinnerInfo.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/followingOfficialHandler.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SponsorSDKHandler=exports.SponsorMpHandler=exports.OfficialFollowHandler=void 0;var e=require("../@babel/runtime/helpers/inherits"),t=require("../@babel/runtime/helpers/createSuper"),r=require("../@babel/runtime/helpers/classCallCheck"),a=require("../@babel/runtime/helpers/createClass"),i=u(require("lodash")),o=require("../utils/tools"),l=u(require("../utils/analyse")),s=require("../utils/dialog");function u(e){return e&&e.__esModule?e:{default:e}}var n=function(){function e(t){r(this,e),this.lottery=t}return a(e,[{key:"setSuccessor",value:function(e){this.successor=e}}]),e}();exports.SponsorMpHandler=function(o){e(s,n);var l=t(s);function s(){return r(this,s),l.apply(this,arguments)}return a(s,[{key:"operate",value:function(){var e=i.default.get(this.lottery,"kefu_share_data.official_article");e?wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent(e))}):this.successor.operate()}}]),s}(),exports.SponsorSDKHandler=function(u){e(c,n);var p=t(c);function c(){return r(this,c),p.apply(this,arguments)}return a(c,[{key:"operate",value:function(){var e=i.default.get(this.lottery,"kefu_share_data.type"),t=i.default.get(this.lottery,"kefu_share_data.image");if((0,o.canIdentifyQR)()&&t&&"url"!==e)return i.default.set(getApp(),"globalData.previewTimestamp",Date.now()),i.default.set(getApp(),"globalData.previewLocation","detail_qr_creator_preview"),wx.previewImage({urls:[t]}),void(0,l.default)("detail_creator_806");(0,s.showDialog)("#kefu-sponsor-dialog",{data:{type:i.default.get(this.lottery,"kefu_share_data.type"),id:i.default.get(this.lottery,"id"),key:"contact_lottery_id"}})}}]),c}(),exports.OfficialFollowHandler=function(i){e(l,n);var o=t(l);function l(){return r(this,l),o.apply(this,arguments)}return a(l,[{key:"operate",value:function(){(0,s.showDialog)("#join-normal-official-dialog",{lottery:this.lottery})}}]),l}();
},{isPage:false,isComponent:false,currentFile:'models/followingOfficialHandler.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/getLottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLottery=exports.getLottery=void 0;var t=null;exports.getLottery=function(){return t},exports.setLottery=function(e){t=Object.assign({},t,e)};
},{isPage:false,isComponent:false,currentFile:'models/getLottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/jiafen.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JIAFEN_TYPE=void 0,exports.convertSavedToSetting=function(n){if(!n)return n;var _=function(t){var n,_=e(e(e(e(e(e(e({},f.IMAGE_PERSONAL,(function(){return i.KEFU_SHARE_TYPE.IMAGE_PERSONAL})),f.IMAGE_OFFICIAL,(function(){return i.KEFU_SHARE_TYPE.IMAGE_OFFICIAL})),f.MINA,(function(){return t.shortlink?i.KEFU_SHARE_TYPE.SHORTLINK_MINA:t.appid&&t.apppath?i.KEFU_SHARE_TYPE.MINA:t.url?i.KEFU_SHARE_TYPE.IMAGE_MINA:i.KEFU_SHARE_TYPE.OTHER})),f.IMAGE_WECHATGROUP,(function(){return i.KEFU_SHARE_TYPE.IMAGE_WECHATGROUP})),f.SHOW_IMAGE,(function(){return i.KEFU_SHARE_TYPE.SHOW_IMAGE})),f.NONE,(function(){return i.KEFU_SHARE_TYPE.NONE})),f.CHANNEL_VIDEO,(function(){return i.KEFU_SHARE_TYPE.CHANNEL_VIDEO}));return null===(n=_[t.type])||void 0===n?void 0:n.call(_)}(n);return{kefu_share_type:_,type:_,title:n.name,image:n.url,id:t.default.get(n,"id",""),kefu_id:t.default.get(n,"id",""),kefu_image:t.default.get(n,"url",""),kefu_title:t.default.get(n,"name",""),kefu_mina_appid:t.default.get(n,"appid",""),kefu_mina_apppath:t.default.get(n,"apppath",""),kefu_shortlink:t.default.get(n,"shortlink",""),kefu_avatar:t.default.get(n,"avatar",""),kefu_desc:t.default.get(n,"description",""),kefu_feed_id:t.default.get(n,"feed_id",""),kefu_finder_user_name:t.default.get(n,"finder_user_name","")}},exports.getAvatar=function(e){var t=(0,a.getUserInfo)();if(null==e||!e.kefu_share_type)return null==t?void 0:t.avatar;return(null==e?void 0:e.kefu_avatar)||null},exports.getJiaFenBtnText=function(t){var n;if(!t)return"";var _=(e(e(e(e(e(e(e(e(e(e(n={},i.KEFU_SHARE_TYPE.IMAGE_OFFICIAL,"查看"),i.KEFU_SHARE_TYPE.IMAGE_PERSONAL,"加好友"),i.KEFU_SHARE_TYPE.IMAGE_MINA,"查看"),i.KEFU_SHARE_TYPE.SHORTLINK_MINA,"去体验"),i.KEFU_SHARE_TYPE.MINA,"去体验"),i.KEFU_SHARE_TYPE.IMAGE_WECHATGROUP,"查看"),i.KEFU_SHARE_TYPE.SHOW_IMAGE,"查看"),i.KEFU_SHARE_TYPE.OPEN_URL,"查看"),i.KEFU_SHARE_TYPE.URL,"查看"),i.KEFU_SHARE_TYPE.CHANNEL_VIDEO,"查看"),e(e(e(n,i.KEFU_SHARE_TYPE.PROMOTION,"免费抽"),i.KEFU_SHARE_TYPE.NONE,""),i.KEFU_SHARE_TYPE.OTHER,"")),r=A(t)||t;return _[r]||""},exports.getName=function(e){var t=(0,a.getUserInfo)();if(null==e||!e.kefu_share_type)return null==t?void 0:t.nick_name;return(null==e?void 0:e.kefu_title)||""},exports.goToPromotionDetail=d,exports.handleClickNormalBtn=function(t){var r,E,u=t.kefu_share_data,o=(e(e(e(e(e(e(e(e(e(e(r={},i.KEFU_SHARE_TYPE.IMAGE_OFFICIAL,(function(){return p(t)})),i.KEFU_SHARE_TYPE.URL,(function(){return p(t)})),i.KEFU_SHARE_TYPE.IMAGE_PERSONAL,(function(){return p(t)})),i.KEFU_SHARE_TYPE.IMAGE_WECHATGROUP,(function(){return p(t)})),i.KEFU_SHARE_TYPE.SHOW_IMAGE,(function(){return p(t)})),i.KEFU_SHARE_TYPE.OTHER,(function(){if(u&&"appid"in u&&u.appid)return l(t);p(t)})),i.KEFU_SHARE_TYPE.IMAGE_MINA,(function(){return function(e){var t=e.kefu_share_data;if(!t)return;var n=t.image||"";if("out_web_data"in t&&t.out_web_data){var r=t.out_web_data,a=r.type,E=r.appid,i=r.apppath;"mina"===a&&(0,_.goToMina)(i,E)}else wx.previewImage({current:n,urls:[n]})}(t)})),i.KEFU_SHARE_TYPE.SHORTLINK_MINA,(function(){return function(e){var t=null==e?void 0:e.kefu_share_data;if(!t)return;if("kefu_shortlink"in t&&t.kefu_shortlink)return(0,n.navigateToMiniProgram)({shortLink:t.kefu_shortlink});if("shortlink"in t&&t.shortlink)return(0,n.navigateToMiniProgram)({shortLink:t.shortlink})}(t)})),i.KEFU_SHARE_TYPE.MINA,(function(){return l(t)})),i.KEFU_SHARE_TYPE.OPEN_URL,(function(){var e;(e=(0,a.get)(t,"kefu_share_data.url"))?wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent(e))}):wx.showToast({title:"获取文章地址失败",icon:"none"})})),e(e(r,i.KEFU_SHARE_TYPE.CHANNEL_VIDEO,(function(){return function(e){var t=null==e?void 0:e.kefu_share_data;if(!t)return;if("feed_id"in t&&t.feed_id)return(0,n.openChannelsActivity)({feedId:t.feed_id,finderUserName:t.finder_user_name});if("kefu_feed_id"in t&&t.kefu_feed_id)return(0,n.openChannelsActivity)({feedId:t.kefu_feed_id,finderUserName:t.kefu_finder_user_name})}(t)})),i.KEFU_SHARE_TYPE.PROMOTION,(function(){return d(u)})));(null==u?void 0:u.type)&&(null===(E=o[u.type])||void 0===E||E.call(o))},exports.jiafenTypeToKefuType=A;var e=require("../@babel/runtime/helpers/defineProperty"),t=o(require("lodash")),n=require("@utils/wechatAPI"),_=require("@services/chou"),r=o(require("@utils/analyse")),a=require("@utils/tools"),E=require("@models/followingOfficialHandler"),i=require("@models/lottery"),u=require("@/services/smartPromotion");function o(e){return e&&e.__esModule?e:{default:e}}var f=exports.JIAFEN_TYPE=function(e){return e[e.IMAGE_PERSONAL=1]="IMAGE_PERSONAL",e[e.IMAGE_OFFICIAL=2]="IMAGE_OFFICIAL",e[e.MINA=3]="MINA",e[e.IMAGE_WECHATGROUP=4]="IMAGE_WECHATGROUP",e[e.SHOW_IMAGE=5]="SHOW_IMAGE",e[e.NONE=6]="NONE",e[e.CHANNEL_VIDEO=7]="CHANNEL_VIDEO",e}({});function A(t){return e(e(e(e(e(e(e({},f.IMAGE_PERSONAL,i.KEFU_SHARE_TYPE.IMAGE_PERSONAL),f.IMAGE_OFFICIAL,i.KEFU_SHARE_TYPE.IMAGE_OFFICIAL),f.MINA,i.KEFU_SHARE_TYPE.IMAGE_MINA),f.IMAGE_WECHATGROUP,i.KEFU_SHARE_TYPE.IMAGE_WECHATGROUP),f.SHOW_IMAGE,i.KEFU_SHARE_TYPE.SHOW_IMAGE),f.NONE,i.KEFU_SHARE_TYPE.NONE),f.CHANNEL_VIDEO,i.KEFU_SHARE_TYPE.CHANNEL_VIDEO)[t]}function d(e){var t,n={id:null===(t=e.promotion)||void 0===t?void 0:t.lottery_id,promotion:e.promotion};(0,r.default)("detail_reco",{ad_options:{adtype:"reco_detail_contact",adid:n.id}}),(0,u.goToPromotionLottery)(n,"reco_detail_contact")}function p(e){var t=null==e?void 0:e.kefu_share_data;if(t)if("out_web_data"in t&&t.out_web_data){var n=t.out_web_data,r=n.appid,a=n.apppath;(0,_.goToMina)(a,r)}else{var i=new E.SponsorMpHandler(e),u=new E.SponsorSDKHandler(e);i.setSuccessor(u),i.operate()}}function l(e){null!=e&&e.id&&(0,r.default)("detail_sponsormina",{id:e.id});var n=function(e){var n=e.kefu_share_data,_=e.sponsor;if(!e.kefu_share||t.default.isEmpty(n))return{appId:(null==_?void 0:_.appid)||"",appPath:(null==_?void 0:_.path)||""};if("kefu_mina_appid"in n&&n.kefu_mina_appid)return{appId:n.kefu_mina_appid,appPath:n.kefu_mina_apppath};if("appid"in n){if(!t.default.isEmpty(n.out_web_data))return{appId:n.out_web_data.appid,appPath:n.out_web_data.apppath};if(n.appid)return{appId:n.appid,appPath:n.apppath}}return{appId:"",appPath:""}}(e),a=n.appId,E=n.appPath;"wx01bb1ef166cd3f4e"===a?wx.navigateTo({url:E,fail:function(e){wx.showToast({title:e.errMsg,icon:"none"})}}):(0,_.goToMina)(E,a)}
},{isPage:false,isComponent:false,currentFile:'models/jiafen.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/join-task.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JoinTaskTypeEnum=void 0;var e=exports.JoinTaskTypeEnum=function(e){return e[e.mina=0]="mina",e[e.article=1]="article",e[e.channel_video=2]="channel_video",e}(e||{});
},{isPage:false,isComponent:false,currentFile:'models/join-task.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/lottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VIRTUAL_PRIZE_TYPES=exports.SQUARE_VERIFY_STATE=exports.PrizeTypes=exports.PRIZE_TYPES=exports.PRIZE_GIVE_TYPES=exports.LOTTERY_THEME=exports.LOTTERY_STATE_TYPE=exports.LOTTERY_JOIN_TYPE=exports.LOTTERY_FESTIVAL=exports.LOTTERY_AD_GITF_TYPE=exports.KEFU_SHARE_TYPE=exports.JumpFrom=exports.GROUP_STATUS=exports.FormType=exports.FormItemType=exports.ExamType=exports.DrawTypes=exports.DetectTypes=exports.DefaultAdsText=exports.DRAW_TYPE=exports.DEFAULT_IMAGE_NORMAL=exports.ContentTypesOfAd=exports.AssistTypes=exports.AssistTypeNames=exports.AssistReportLabels=void 0;var e,E=require("../@babel/runtime/helpers/defineProperty"),t=(exports.DEFAULT_IMAGE_NORMAL="https://lucky-cdn-resource.nocode.com/mina/lottery/1x1/Physical-default.jpg",exports.AssistTypes=function(e){return e.FRIEND="friend",e.GZH="subscribe_gzh",e.POINT="bonus_point",e.VIDEO="vedio_ads",e.MINA="mina_view",e.SELF="self_daily",e.WEBVIEW="webview",e.WEBSITE="website",e.TICKETS="virtual_ticket",e.ADS="ads",e.CHANNEL_VIDEO="channel_video",e.IMAGE="image",e.EMPTY="empty",e}({})),r=(exports.AssistTypeNames=(E(E(E(E(E(E(E(E(E(E(e={},t.FRIEND," 的助力"),t.GZH,"公众号助力"),t.MINA,"体验小程序"),t.POINT,"心愿兑换"),t.VIDEO,"观看激励视频"),t.TICKETS,"使用助力券"),t.SELF,"每日摇骰子助力"),t.WEBVIEW,"观看指定内容"),t.WEBSITE,"观看指定内容"),t.CHANNEL_VIDEO,"观看视频号"),E(e,t.IMAGE,"浏览图片")),exports.AssistReportLabels=E(E(E(E(E(E(E({},t.MINA,"mina"),t.WEBVIEW,"webview"),t.CHANNEL_VIDEO,"channel"),t.IMAGE,"pic"),t.VIDEO,"video"),t.POINT,"point"),t.SELF,"diary"),exports.LOTTERY_THEME=function(e){return e.FUNNY="funny",e.NEW_YEAR="new_year_23",e.SPRING="spring",e.MOON="moon",e.NATIONAL_DAY="nd",e.CHRISTMAS="xmas",e}({})),T=(exports.LOTTERY_FESTIVAL=r.NEW_YEAR,exports.DRAW_TYPE=function(e){return e.USER="user",e.TIME="time",e.MANUAL="manual",e.ONTIME="ontime",e.ONTIME_WISH="ontimewish",e.CHATROOM="chatroom",e.PARTY="party",e.FUNNY="funny",e}({}),exports.PRIZE_TYPES=function(e){return e[e.OBJ=1]="OBJ",e[e.CASH=2]="CASH",e[e.VIRTUAL=3]="VIRTUAL",e[e.MARKET=4]="MARKET",e[e.BONUS_POINT=5]="BONUS_POINT",e[e.OFFICIAL_CASH=6]="OFFICIAL_CASH",e[e.LUCKY_CASH=7]="LUCKY_CASH",e[e.COUPON=9]="COUPON",e}({}),exports.DrawTypes=function(e){return e.USER="user",e.TIME="time",e.MANUAL="manual",e.ONTIME="ontime",e.ONTIMEWISH="ontimewish",e.CHATROOM="chatroom",e.PARTY="party",e}({}),exports.ExamType=function(e){return e.EXACT_MATCH="exact_match",e.PARTIAL_MATCH="partial_match",e.ALL="all",e.NONE="",e}({}),exports.FormType=function(e){return e.FORM="form",e.EXAM="exam",e}({}),exports.PrizeTypes=function(e){return e[e.REAL=1]="REAL",e[e.MONEY=2]="MONEY",e[e.VIRTUAL=3]="VIRTUAL",e[e.SHOP=4]="SHOP",e[e.POINTS=5]="POINTS",e[e.CASH=6]="CASH",e[e.RANDOM=7]="RANDOM",e[e.COUPON=8]="COUPON",e[e.COVER=9]="COVER",e}({}),exports.LOTTERY_STATE_TYPE=function(e){return e[e.CLOSED=-4]="CLOSED",e[e.UNSHELVE=-3]="UNSHELVE",e[e.UNPASS=-2]="UNPASS",e[e.EXPIRED=-1]="EXPIRED",e[e.CREATED=0]="CREATED",e[e.STARTED=1]="STARTED",e[e.DRAWED=2]="DRAWED",e}({}),exports.LOTTERY_JOIN_TYPE=function(e){return e.NONE="none",e.VIDEO="video",e.MINA="mina",e.ARTICLE="article",e.CHANNEL_VIDEO="channel_video",e.INTERSTITIAL_AD="interstitialAd",e.JOIN_AD="joinAd",e.PHONE="phone",e.PUBLIC_QUESTIONNAIRE="form_data",e}({}),exports.GROUP_STATUS=function(e){return e[e.ACTIVE=1]="ACTIVE",e[e.FULL=2]="FULL",e}({}),exports.KEFU_SHARE_TYPE=function(e){return e.URL="url",e.IMAGE_OFFICIAL="image_official",e.IMAGE_PERSONAL="image_personal",e.IMAGE_WECHATGROUP="image_wechatgroup",e.IMAGE_MINA="image_mina",e.SHORTLINK_MINA="shortlink_mina",e.MINA="mina",e.OTHER="other",e.SHOW_IMAGE="show_image",e.OPEN_URL="open_url",e.NONE="none",e.CHANNEL_VIDEO="channel_video",e.PROMOTION="smart_promotion",e}({}),exports.VIRTUAL_PRIZE_TYPES=function(e){return e[e.THIRD_PARTY_COUPON=1]="THIRD_PARTY_COUPON",e[e.LOTTERY_VOUCHER=2]="LOTTERY_VOUCHER",e[e.MINA_PATH=3]="MINA_PATH",e[e.OTHER=4]="OTHER",e[e.COVER=5]="COVER",e[e.FILL_WINNER_INFO=9]="FILL_WINNER_INFO",e}({}),exports.PRIZE_GIVE_TYPES=function(e){return e[e.FILL_ADDRESS=1]="FILL_ADDRESS",e[e.CONTACT_ME=2]="CONTACT_ME",e[e.FILL_WINNER_INFO=9]="FILL_WINNER_INFO",e}({}),exports.SQUARE_VERIFY_STATE=function(e){return e[e.INITIAL=0]="INITIAL",e[e.PENDING=1]="PENDING",e[e.PASS=2]="PASS",e[e.UNPASS=-1]="UNPASS",e[e.REFUND=-2]="REFUND",e}({}),exports.LOTTERY_AD_GITF_TYPE={mina:"minapath",kefu_url:"customerservice",kefu_image:"customerservice",direct_url:"pic",copyable_info:"copy",video:"more_video",material_image:"material_image",smart_promotion:"smartpromotion"},exports.FormItemType=function(e){return e.NUMBER="number",e.LONG_TEXT="long_text",e.IMAGE="image",e.SHORT_TEXT="short_text",e.SINGLE_CHOICE="single_choice",e.MULTI_CHOICE="multi_choice",e}({}),exports.DetectTypes=function(e){return e.phone="phone",e.sheep="user_risk",e}({}),exports.ContentTypesOfAd=function(e){return e["小程序"]="mina",e["福利"]="welfare",e["小程序插件"]="plugin",e["进群"]="add_group",e["浏览公众号文章"]="article",e["跳转网页"]="direct_url",e["浏览视频号视频"]="channel_video",e["浏览图库图片"]="material_image",e["抽奖跳转"]="lottery",e["浏览图片"]="image",e["激励视频"]="ad_video",e}({}));exports.DefaultAdsText=E(E(E(E(E(E(E({},T.小程序,"体验小程序 15 秒，自动参与抽奖"),T.福利,"领取大额优惠券，自动参与抽奖"),T.浏览公众号文章,"浏览公众号文章 15 秒，自动参与抽奖"),T.浏览视频号视频,"浏览视频 15 秒，自动参与抽奖"),T.进群,"点击按钮进群，自动参与成功"),T.浏览图库图片,"浏览图片 6 秒"),T.浏览图片,"浏览图片 6 秒"),exports.JumpFrom=function(e){return e.DAYS="days",e.QRCODE="mp",e}({});
},{isPage:false,isComponent:false,currentFile:'models/lottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/marketing.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.marketingTypes=void 0;exports.marketingTypes=function(e){return e.WHEEL="wheel",e.LOT="lot",e.ONTIME="slot",e.STRAW="straw",e}({});
},{isPage:false,isComponent:false,currentFile:'models/marketing.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/misc.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnTimeJoinOperation=void 0;exports.OnTimeJoinOperation=function(O){return O[O.JOIN_NORMAL=0]="JOIN_NORMAL",O[O.JOIN_KEFU=1]="JOIN_KEFU",O[O.SHARE_WINNER=2]="SHARE_WINNER",O[O.SHARE_LOTTERY=3]="SHARE_LOTTERY",O[O.FILL_ADDRESS=4]="FILL_ADDRESS",O[O.FILL_INFO=5]="FILL_INFO",O[O.LUCKY_CONTACT=6]="LUCKY_CONTACT",O[O.WITH_DRAW=7]="WITH_DRAW",O[O.GOTO_MINA=8]="GOTO_MINA",O[O.GOTO_KEFU=9]="GOTO_KEFU",O[O.COPY_CODE=10]="COPY_CODE",O[O.OUTER_MINA=11]="OUTER_MINA",O[O.PREVIEW_QY_QRCODE=12]="PREVIEW_QY_QRCODE",O[O.PREVIEW_INITIAL_CONTACT=13]="PREVIEW_INITIAL_CONTACT",O[O.REFRESH=14]="REFRESH",O[O.NONE=15]="NONE",O[O.MOCK_JOIN=16]="MOCK_JOIN",O[O.GET_COVER=17]="GET_COVER",O[O.GOTO_VOUCHER=18]="GOTO_VOUCHER",O[O.GOTO_POINTS=19]="GOTO_POINTS",O}({});
},{isPage:false,isComponent:false,currentFile:'models/misc.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/modal.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confirm=function(o,e){wx.showModal({content:o,confirmColor:"#e2453a",success:function(o){o.confirm&&e()}})};
},{isPage:false,isComponent:false,currentFile:'models/modal.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/multijoin-task.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiJoinTaskState=void 0;var e=exports.MultiJoinTaskState=function(e){return e[e.published_online=1]="published_online",e[e.published_offline=-1]="published_offline",e}(e||{});
},{isPage:false,isComponent:false,currentFile:'models/multijoin-task.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/privateAssist.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toSetting=function(){wx.navigateTo({url:"/pages/new/assistSetting/assistSetting"})};
},{isPage:false,isComponent:false,currentFile:'models/privateAssist.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/shareImgDatas.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.commonFontFamily=exports.Types=void 0;exports.Types=function(e){return e["图片"]="image",e["文字"]="text",e["行内文本"]="inlineText",e["矩形"]="rect",e["二维码"]="qrcode",e}({}),exports.commonFontFamily={fontFamily:"SourceHanSansCN-Normal"};
},{isPage:false,isComponent:false,currentFile:'models/shareImgDatas.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/starDrawHandler.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisibleHandler=exports.SwitchShiningHandler=exports.ShiningHandler=exports.HighlightHandler=void 0;var t=require("../@babel/runtime/helpers/inherits"),i=require("../@babel/runtime/helpers/createSuper"),s=require("../@babel/runtime/helpers/classCallCheck"),h=require("../@babel/runtime/helpers/createClass"),e=function(){function t(i,h,e,r){s(this,t),this.star=i,this.showIndex=h,this.index=e,this.ctx=r}return h(t,[{key:"setSuccessor",value:function(t){this.successor=t}}]),t}();exports.HighlightHandler=function(r){t(n,e);var a=i(n);function n(){return s(this,n),a.apply(this,arguments)}return h(n,[{key:"operate",value:function(){if(this.star.highlighting){var t;this.star.showHighlightTime||(this.star.showHighlightTime=Date.now());var i=Math.min(Date.now()-this.star.showHighlightTime,this.star.highlightTime);return t=i<=this.star.highlightTime/2?44*(1-i)/(this.star.highlightTime/2):44*(1-(i-this.star.highlightTime/2)/(this.star.highlightTime/2)),i>=this.star.highlightTime&&(this.star.highlighting=!1,this.star.highlight=!0,this.star.showed=!0),void this.ctx.drawImage("https://lucky-cdn.nocode.com/mina/lottery/wish-star.png",this.star.pos.x-t/2,this.star.pos.y-t/2,t,t)}this.successor.operate()}}]),n}(),exports.VisibleHandler=function(r){t(n,e);var a=i(n);function n(){return s(this,n),a.apply(this,arguments)}return h(n,[{key:"operate",value:function(){if(this.showIndex===this.index){this.star.showStartTime||(this.star.showStartTime=Date.now());var t=Math.min(Date.now()-this.star.showStartTime,this.star.showTime)/this.star.showTime;return 1===t&&(this.star.showed=!0),this.ctx.beginPath(),this.ctx.arc(this.star.pos.x,this.star.pos.y,this.star.size/2,0,2*Math.PI),this.ctx.fillStyle="rgba(255, 219, 146, ".concat(t,")"),void this.ctx.fill()}this.successor.operate()}}]),n}(),exports.ShiningHandler=function(r){t(n,e);var a=i(n);function n(){return s(this,n),a.apply(this,arguments)}return h(n,[{key:"operate",value:function(){if(this.star.showed&&!this.star.shining)return this.ctx.beginPath(),this.ctx.arc(this.star.pos.x,this.star.pos.y,this.star.size/2,0,2*Math.PI),this.ctx.fillStyle="rgb(255, 219, 146)",void this.ctx.fill();this.successor.operate()}}]),n}(),exports.SwitchShiningHandler=function(r){t(n,e);var a=i(n);function n(){return s(this,n),a.apply(this,arguments)}return h(n,[{key:"operate",value:function(){if(this.star.shining){this.star.showShineTime||(this.star.showShineTime=Date.now());var t=1,i=Math.min(Date.now()-this.star.showShineTime,this.star.shineTime);t=i<=this.star.shineTime/2?1-.7*(s=i/(this.star.shineTime/2),1-Math.pow(2,-10*s)):.3+.7*function(t){return Math.pow(2,10*t-10)}((i-this.star.shineTime/2)/(this.star.shineTime/2)),i>=this.star.shineTime&&(this.star.shining=!1,this.star.showShineTime=null),this.ctx.beginPath(),this.ctx.arc(this.star.pos.x,this.star.pos.y,this.star.size/2,0,2*Math.PI),this.ctx.fillStyle="rgba(255, 219, 146, ".concat(t,")"),this.ctx.fill()}var s}}]),n}();
},{isPage:false,isComponent:false,currentFile:'models/starDrawHandler.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/task.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Task_Step_Type=exports.Task_Action_Type=void 0;exports.Task_Action_Type=function(_){return _.NONE="none",_.TEXT="text",_.PAGE="page",_.CUSTOM_SERVICE="custom_service",_.ADS="ads",_.MINA="mina",_}({}),exports.Task_Step_Type=function(_){return _.GIVE_VOUCHER="give_voucher",_.SUBSCRIBE_OA="subscribe_oa",_.JOIN_WISH="join_wish",_.JOIN_ONTIME_WISH="join_ontime_wish",_.JOIN_FRONTPAGE="join_frontpage",_.CREATE_100_JOIN="create_100_join",_.CREATE_30_JOIN="create_30_join",_.CREATE_20_JOIN="create_20_join",_.CREATE_15_JOIN="create_15_join",_.CREATE_10_JOIN="create_10_join",_.CREATE_5_JOIN="create_5_join",_.JOIN_ANY="join_any",_.NEW_USER_JOIN="new_user_join",_.WATCH_VIDEO="watch_video",_.CREATE_FUNNY="create_funny",_.GET_FANS="get_fans",_.UNLUCKY_LAST_WEEK="unlucky_last_week",_.GROUP_SUCCESS="group_success",_.SUB_SIGN="sub_sign",_.CREATE_ANY="create_any",_.LIGHTEN_WISH="lighten_wish",_.INVITE_FRIEND="invite_friend",_.COMPLETE_WISHES_TASK="complete_wishes_task",_.USE_POINTS="use_points",_.LIKE_LUCKY_REVIEW="like_lucky_review",_.REDEEM_GOODS="redeem_goods",_.GET_ASSIST="get_assist",_.VIEW_GUIDE="view_guide",_.DAILY_INVITE_FRIEND="daily_invite_friend",_.USE_MINA="use_mina",_.JOIN_THE_ONE="join_the_one",_}({});
},{isPage:false,isComponent:false,currentFile:'models/task.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("models/user.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChannelState=exports.AdPosition=exports.ADContentType=void 0;exports.ADContentType=function(E){return E.MINA="mina",E.KEFU_URL="kefu_url",E.KEFU_IMAGE="kefu_image",E.COPYABLE_INFO="copyable_info",E.VIDEO="video",E.DIRECT_URL="direct_url",E.SMART_PROMOTION="smart_promotion",E.LOTTERY="lottery",E.SHOW_IMAGE="show_image",E.CHANNEL_NOTICE="channel_notice",E.CHANNEL_LIVE="channel_live",E.CHANNEL_NOTICE_LIVE="channel_notice_live",E}({}),exports.ChannelState=function(E){return E[E.STREAMING_CANCEL=1]="STREAMING_CANCEL",E[E.STREAMING_GO=2]="STREAMING_GO",E[E.CHANNEL_CANCEL=3]="CHANNEL_CANCEL",E[E.STREAMING_END=4]="STREAMING_END",E[E.SCHEDULE_CLOSE=5]="SCHEDULE_CLOSE",E[E.SCHEDULE_CONFIRM=6]="SCHEDULE_CONFIRM",E[E.SCHEDULE_CANCEL=7]="SCHEDULE_CANCEL",E[E.SCHEDULED=8]="SCHEDULED",E[E.SCHEDULE_BREAK=9]="SCHEDULE_BREAK",E[E.EXPIRED=10]="EXPIRED",E}({}),exports.AdPosition=function(E){return E.INDEX_HEADER="wishindex",E.AFTER_JOIN="joinbutton",E.RESULT_PANNEL="unluckygift",E}({});
},{isPage:false,isComponent:false,currentFile:'models/user.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/activity.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMoneyActivityDetail=void 0;var e,t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../config"))&&e.__esModule?e:{default:e},i=require("../libs/request");exports.getMoneyActivityDetail=function(){var e=r(t().mark((function e(r,u){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u?"&from=".concat(u):"",e.abrupt("return",(0,i.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/activity/collect_money/info?activity_id=").concat(r).concat(a)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/activity.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/chou.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LotteryUpdateType=void 0,exports.UpdateUserInfo=function(e,t,r){return y.apply(this,arguments)},exports.UserInfo=function(){return w.apply(this,arguments)},exports.UserLogin=function(e,t){return _.apply(this,arguments)},exports.UserLogout=function(){return I.apply(this,arguments)},exports.fetchNewUserGift=void 0,exports.getActiveTasks=function(e){return T.apply(this,arguments)},exports.getAppConfig=function(){return O.apply(this,arguments)},exports.getAssistShareImage=void 0,exports.getTokenFromCloud=function(){return h.apply(this,arguments)},exports.getUserPoints=function(){return r.default.get(getApp().globalData.userProfile,"info.points",0)},exports.getWxUserInfo=function(){return d.apply(this,arguments)},exports.goToMina=function(e,t){if(e&&0===e.indexOf("https://"))return wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent(e))});var n=null==t?void 0:t.trim();if("wx01bb1ef166cd3f4e"===n){if((0,u.isTabPage)(e))wx.switchTab({url:e});else{/^pages\//.test(e)&&(e="/"+e),wx.navigateTo({url:e})}return}var a=(e||"").split("?");a.length>2&&(e=a[0]+"?"+r.default.join(r.default.slice(a,1),"%3F"));(wx.openEmbeddedMiniProgram||wx.navigateToMiniProgram)({appId:n,path:e,fail:function(e){e.errMsg.includes("appid")?(0,c.showToast)("请输入正确的 AppID 或路径"):e.errMsg.includes("cancel")||(0,c.showToast)(e.errMsg)},allowFullScreen:!0})},exports.isManager=function(){return r.default.get(getApp(),"globalData.userProfile.is_manager",!1)},exports.phoneNumber=function(e,t){return m.apply(this,arguments)},exports.reportAdFail=function(e){return(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/ads/fail"),method:"POST",data:{unique_id:e}})},exports.switchAdNoti=exports.reportUserClickAd=exports.reportChannelAd=void 0,exports.switchPushOfService=function(e){return(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/refuse_gift_msg"),method:"POST",data:{state:e?-1:1}})},exports.updateHideRatio=void 0,exports.updateLotteryByType=A,exports.updateUserAgreements=function(){return g.apply(this,arguments)},exports.updateUserContact=function(e){return v.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=f(require("lodash")),n=f(require("../config")),a=require("../libs/request"),u=require("../utils/tools"),o=require("../models/getLottery"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,r&&r.set(e,n);return n}(require("../utils/analyse")),c=require("../utils/wechatAPI"),i=f(require("@libs/cloud")),p=f(require("@utils/event"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=t(e().mark((function t(){var r,n=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:"更新用户信息",e.abrupt("return",new Promise((function(e,t){var n={desc:r,success:function(r){r.errMsg.includes("ok")?e(r):t(r)},fail:function(e){(0,s.default)("error_login",{label:"profile: ".concat(e.errMsg)}),t(e)}};console.log("🚀 wx.getUserProfile"),wx.getUserProfile(n)})));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(){return(_=t(e().mark((function t(r,u){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/v2external/user/login"),method:"POST",data:{code:r,platform:u?"wechatQy":"wechat"}},{retry:1},3,!0));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=t(e().mark((function t(){var n,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.default)("getUserInfo");case 2:if(a=e.sent,null!==(n=a.result)&&void 0!==n&&n.token){e.next=5;break}throw new Error("token is empty");case 5:if(r.default.isString(a.result.token)){e.next=7;break}throw new Error("token is not string");case 7:return e.abrupt("return",a.result.token);case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/logout")}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}exports.fetchNewUserGift=function(){var r=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/gift"),method:"POST",data:{type:"new_user"}}));case 1:case"end":return e.stop()}}),t)})));return function(){return r.apply(this,arguments)}}();function y(){return(y=t(e().mark((function t(r,u,o){var c,i,p,l,f=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]?f[3]:"",p=f.length>4?f[4]:void 0,console.log("update user info",r,u,o),e.next=5,(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/profile"),method:"POST",data:{encrypted_data:r,iv:u,platform:o?"wechatQy":"wechat",code:i,user_info:p}});case 5:return l=e.sent,(0,s.updateSpmTags)((null==l||null===(c=l.data)||void 0===c?void 0:c.recommend_tags)||[]),e.abrupt("return",l);case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=t(e().mark((function t(){var r,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/profile"),method:"GET"},{retry:1});case 2:return u=e.sent,(0,s.updateSpmTags)((null==u||null===(r=u.data)||void 0===r?void 0:r.recommend_tags)||[]),e.abrupt("return",u);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/contact"),method:"POST",data:r},{retry:1}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/config"),method:"GET"},{retry:1}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/agreement"),method:"POST",data:{agreement:n.default.AGREEMENT_VERSION}}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=t(e().mark((function t(r,u){var o,s=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:"",e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/wechat/phone"),method:"POST",data:{encrypted_data:r,iv:u,code:o}}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var x=exports.LotteryUpdateType=function(e){return e.FORM="form_exam_answer",e.KEFU="kefu_info",e.WINNING_RATE="hide_winning_rate",e.PRIZE_LOCK_COUNT="prize_lock_count",e.HIDE_PRIZE_LEVEL="hide_prize_level",e.CONTACT="lucky_contact",e.REPLY="official_account_reply",e.ENABLE_USER_RECALL="enable_user_recall",e.UPDATE_JOIN_DETECT="update_join_detect",e.LUCKY_FILL_INFO="lucky_fill_info",e.ASSIST_INFO="assist_info",e.ACTIVE_TASK="active_task",e.DAILY_MULTI_JOIN="daily_multi_join",e.INITIATOR_CONTACT_IMG="initiator_contact_img",e.OFFICIAL_DATA="official_data",e.JOIN_CONDITION="join_condition",e.SHAREABLE="shareable",e.IS_FANS_ONLY="is_fans_only",e.USERPAGE_RECOMMEND="userpage_recommend",e.USERPAGE_SHOW="userpage_show",e}({});function A(e,t){return P.apply(this,arguments)}function P(){return(P=t(e().mark((function t(r,u){var s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/update_by_type"),method:"POST",data:u},{retry:1});case 2:return s=e.sent,(0,o.setLottery)({extra:{lucky_contact:{fillInfo:u.data}}}),p.default.emit("lottery:update",{id:r,type:u.type,data:u.data}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/active_task"),method:"GET"}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}exports.getAssistShareImage=function(){var r=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/assist_share_image"),method:"GET"}));case 1:case"end":return e.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}(),exports.switchAdNoti=function(){var r=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/user/receive_ads"),method:"POST",data:{state:r?1:-1}}));case 1:case"end":return e.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}();exports.reportUserClickAd=function(){var r=t(e().mark((function t(r){var u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/ads/report"),method:"POST",data:{type:"click",unique_id:r}});case 5:return u=e.sent,e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),t,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}();exports.reportChannelAd=function(){var r=t(e().mark((function t(r){var u,o,s,c,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.finder_user_name,o=r.type,s=r.ad_id,c=r.success,i=r.result,e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/ads/channnel/report"),method:"POST",data:{finder_user_name:u,type:o,ad_id:s,success:c,result:i}}));case 2:case"end":return e.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}(),exports.updateHideRatio=function(){var r=t(e().mark((function t(r){var n,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.lotteryId,a=r.isHide,e.abrupt("return",A(n,{type:x.WINNING_RATE,data:{hide_winning_rate:a}}));case 2:case"end":return e.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/chou.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/config.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getConfigByType=function(e){return a.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../config"))&&e.__esModule?e:{default:e},u=require("../libs/request");function a(){return(a=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/config/").concat(t),method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/config.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/distribution.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distributionInfo=function(){return a.apply(this,arguments)},exports.distributionRelationship=function(t){return s.apply(this,arguments)},exports.getUserDistributionInfo=function(){return i.apply(this,arguments)},exports.getUserDistributorQrcode=function(){return o.apply(this,arguments)};var t,e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(t=require("../config"))&&t.__esModule?t:{default:t},u=require("../libs/request");function i(){return(i=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/distribution/info"),method:"GET"},{retry:1}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/distribution/qrcode"),method:"GET"},{retry:1}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/distribution/relationship"),method:"POST",data:{distributor_id:r}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/distribution/invitee/info"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/distribution.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/game.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.analytics=function(){return at.apply(this,arguments)},exports.banJump=$,exports.banLottery=Q,exports.banUser=et,exports.canJoinForWeComGroupchat=function(t){return Rt.apply(this,arguments)},exports.createGame=function(t){return R.apply(this,arguments)},exports.createVote=function(t){return v.apply(this,arguments)},exports.drawLottery=exports.detect=void 0,exports.endPartyGame=function(t){return Y.apply(this,arguments)},exports.fetchActivityTags=function(){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/config/public_tags"),method:"GET"})},exports.fetchLottery=function(t){return kt.apply(this,arguments)},exports.fetchPhoneInfoExcel=void 0,exports.fillLogisticsMessage=function(t){return Nt.apply(this,arguments)},exports.getAssistRank=function(t){return ut.apply(this,arguments)},exports.getCurrentUserPrizeForPrizeInfo=exports.getCurrentUserPrize=void 0,exports.getDailyPublicLottery=function(){return wt.apply(this,arguments)},exports.getDrawRecord=function(t){return D.apply(this,arguments)},exports.getExcelDownloadUrl=function(t){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(t,"/lucky_download")})},exports.getFormChoiceManage=function(t){return lt.apply(this,arguments)},exports.getFormResult=function(t,e){return it.apply(this,arguments)},exports.getGame=function(t){return H.apply(this,arguments)},exports.getGameGroupChat=function(t,e){return pt.apply(this,arguments)},exports.getGameLuckyUsers=function(t,e){return L.apply(this,arguments)},exports.getGameRank=function(t){return ct.apply(this,arguments)},exports.getGameResult=function(t){return C.apply(this,arguments)},exports.getGameUsers=function(t,e){return G.apply(this,arguments)},exports.getGroup=function(t){return B.apply(this,arguments)},exports.getInviteLeaders=function(t,e){return ot.apply(this,arguments)},exports.getInviteRank=function(t){return st.apply(this,arguments)},exports.getInvitedUserList=function(t){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(t,"/invitee_user"),method:"GET"})},exports.getLuckyDetail=function(t){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(t,"/lucky_base")})},exports.getLuckyPrizeUsers=function(t){var e=t.lotteryId,r=t.prizeId,n=t.type,o=t.next,c=void 0===o?"":o,s=t.size,i=void 0===s?10:s,p=c?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(c):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/lucky_prize_users?prize_id=").concat(r,"&type=").concat(n,"&size=").concat(i);return(0,u.superRequest)({url:p,method:"GET"})},exports.getPrizeOverviewName=function(t){var e=s.default.get(t,"prizes.data[0].name","");s.default.get(t,"prizes.data",[]).length>1&&(e+=" 等");return e},exports.getPublicGames=function(){return T.apply(this,arguments)},exports.getRandomGame=function(){return g.apply(this,arguments)},exports.getUserContact=void 0,exports.getUserGames=function(t,e){return S.apply(this,arguments)},exports.getVirtualPrizes=function(t){return K.apply(this,arguments)},exports.getWecomCompanyUsers=function(t){return At.apply(this,arguments)},exports.getWinnerPrizeAction=void 0,exports.hideGame=function(t){return W.apply(this,arguments)},exports.isFromGroupChatOrGroupUpcoming=yt,exports.isJoinCodeEffective=function(t,e){return ft.apply(this,arguments)},exports.isPrizeAllowShareOrder=function(t){var e=vt(t),r=(0,y.isPublicLottery)(t);return!r||r&&e&&(null==e?void 0:e.count)<500},exports.join=void 0,exports.joinGame=function(t,e,r,n,a,u){return V.apply(this,arguments)},exports.joinGroup=function(t,e,r){return F.apply(this,arguments)},exports.managerItemMap=void 0,exports.manualDrawStep=function(t,e){return z.apply(this,arguments)},exports.notifyWinners=void 0,exports.postContact=function(t,e,r){return j.apply(this,arguments)},exports.postWishContact=function(t,e){return U.apply(this,arguments)},exports.randomLotteries=function(t,e){return nt.apply(this,arguments)},exports.realJoin=void 0,exports.shareGroupMessageImage=function(t){return Z.apply(this,arguments)},exports.shareGroupPyqImage=function(t){return M.apply(this,arguments)},exports.shareImage=function(t){return J.apply(this,arguments)},exports.subscribe=exports.showAhthPhoneDialog=void 0,exports.updateActivityTag=function(t,e){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/user/subscribe_tags"),method:"POST",data:{type:e,tags:t}})},exports.updateGame=function(t){return A.apply(this,arguments)},exports.updateShaiDanSetting=function(t,e){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(t,"/lucky_review_status"),method:"POST",data:e})},exports.updateSquareSub=function(t){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square/subscribe"),method:"POST",data:{state:t?1:-1}})},exports.updateVote=function(t){return x.apply(this,arguments)},exports.uploadWeComGroupWelcome=function(t,e,r){return(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(t,"/qy_group_chat/welcome_template"),method:"POST",data:{text:e,image:r}})},exports.withdrawCashPrize=function(t,e,r){return dt.apply(this,arguments)};var t=require("../@babel/runtime/helpers/defineProperty");require("../@babel/runtime/helpers/Arrayincludes");var e=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/regeneratorRuntime"),n=require("../@babel/runtime/helpers/asyncToGenerator"),a=O(require("../config")),u=require("../libs/request"),o=require("../utils/tools"),c=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=P(e);if(r&&r.has(t))return r.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var o=a?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=t[u]}n.default=t,r&&r.set(t,n);return n}(require("../utils/analyse")),s=O(require("lodash")),i=require("../models/lottery"),p=require("../models/misc"),l=require("./group"),f=require("../models/authPhone"),d=require("../utils/wechatAPI"),h=require("./joinButtonLoading"),_=require("@mina-modules/mina-sentry"),I=O(require("@utils/event")),y=require("@/utils/lotteryUtils"),m=require("@/utils/withdraw");function P(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(P=function(t){return t?r:e})(t)}function O(t){return t&&t.__esModule?t:{default:t}}function g(){return(g=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/public/random"),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=n(r().mark((function t(){var e,n=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"/public",e="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(e),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e?e="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(e):(e="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery?page=1&size=10"),n&&(e="".concat(e,"&filter=").concat(n))),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/vote"),method:"POST",data:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/vote/").concat(e.vote_id),method:"POST",data:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("create game: ".concat(e),e),t.next=3,(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery"),method:"POST",data:e});case 3:return n=t.sent,I.default.emit("lottery:create",{id:e.id}),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("update game: ".concat(e)),t.next=3,(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e.id),method:"POST",data:e});case 3:return n=t.sent,I.default.emit("lottery:update",{id:e.id}),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return E.apply(this,arguments)}function E(){return(E=n(r().mark((function t(){var e,n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.authPrivateMessage)();case 2:return e=t.sent,n=e.encryptedData,a=e.iv,t.abrupt("return",n&&a?{encryptedData:n,iv:a}:null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return N.apply(this,arguments)}function N(){return(N=n(r().mark((function t(){var e,n,a,u,s,i,p,l=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(l.length>0&&void 0!==l[0])||l[0],n=l.length>1?l[1]:void 0,a=!(l.length>2&&void 0!==l[2])||l[2],t.prev=3,t.next=6,ht(n);case 6:if(u=t.sent){t.next=9;break}return t.abrupt("return",null);case 9:if(s={type:u},!a){t.next=34;break}return t.next=13,(0,o.getShareInfo)();case 13:if(!((i=t.sent)&&i.iv&&i.encryptedData)){t.next=33;break}if(p={},t.t0=!e,t.t0){t.next=21;break}return t.next=20,(0,o.isSessionExpired)();case 20:t.t0=t.sent;case 21:if(!t.t0){t.next=28;break}return t.next=24,(0,o.getLoginCode)();case 24:return p.code=t.sent,t.next=27,(0,o.getShareInfo)();case 27:i=t.sent;case 28:p.encryptedData=i.encryptedData,p.iv=i.iv,s.data=JSON.stringify(p),t.next=34;break;case 33:console.error("未获得群数据");case 34:return t.abrupt("return",s);case 37:return t.prev=37,t.t1=t.catch(3),console.error(t.t1.message),(0,c.default)("error_get_source_data",{label:null===t.t1||void 0===t.t1?void 0:t.t1.message}),t.abrupt("return",null);case 42:case"end":return t.stop()}}),t,null,[[3,37]])})))).apply(this,arguments)}var k=exports.showAhthPhoneDialog=function(t,e,r){return new Promise((function(n,a){(0,o.showCustomModal)({content:"发起人已开启参与者实名检测，请授权手机号后参与",cancelText:"暂不参与",confirmText:"授权手机号",confirmColor:"#e2453a",contentStyle:"text-align: center;",openType:"getPhoneNumber",success:function(t){var e=t.cancel;(0,c.default)("dialog_detail_join_telauth_cancel"),e&&a(r),(0,h.hideJoinBtnLoading)()},getPhoneNumber:function(r,u){if((0,c.default)("dialog_phonenumber_auth",{label:"join"}),!r.detail.encryptedData||!r.detail.iv)return(0,d.showToast)("授权失败，请授权手机号后再参与抽奖");(0,c.default)("dialog_detail_join_telauth_auth"),(0,f.authPhone)(r.detail.encryptedData,r.detail.iv).then((function(){(0,d.showToast)("授权成功"),(0,h.showJoinBtnLoading)(),n(t&&e?q(t,e,!0):""),u(),getApp().getUserProfile(!0)})).catch((function(t){(0,d.showToast)(t.message||"授权失败，请授权手机号后再参与抽奖"),a(t)}))}},"#auth-phone-dialog")}))},q=exports.realJoin=function(){var t=n(r().mark((function t(e,n,o){var i,p,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/join"),method:"POST",data:n});case 3:return i=t.sent,(0,c.wxReportEvent)("detail_join_success",{userid:s.default.get(getApp(),"globalData.userInfo.user_id",0),lotteryid:e}),t.abrupt("return",i);case 8:if(t.prev=8,t.t0=t.catch(0),(0,l.reportAboutGroup)(),(0,c.wxReportEvent)("detail_join_fail",{userid:s.default.get(getApp(),"globalData.userInfo.user_id",0),lotteryid:e,error:t.t0.message}),"INVALID_JOIN_DATA"!==t.t0.message||q.hasRetry){t.next=23;break}return q.hasRetry=!0,t.next=16,w(!1,e);case 16:return n.source=t.sent,t.next=19,b();case 19:return n.direct_share_info=t.sent,t.abrupt("return",q(e,n,o));case 23:if("实名认证未通过"!==t.t0.message){t.next=27;break}return t.abrupt("return",k(e,n,t.t0));case 27:throw(0,h.hideJoinBtnLoading)(),p=/[\u4e00-\u9fa5]/,f="参与抽奖失败",t.t0.message&&p.test(t.t0.message)?f=t.t0.message:console.error(t.t0),"你不是发起人的企业微信好友，无法参与抽奖"!==t.t0.message&&"指定区域用户可参与"!==t.t0.message||(o=!1),o&&(0,d.showToast)(f),t.t0;case 34:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r,n){return t.apply(this,arguments)}}();function V(){return(V=n(r().mark((function t(n,a,u,s,i,p){var l,f,d,h,_=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=_.length>6&&void 0!==_[6]?_[6]:null,s){t.next=8;break}return t.next=4,w(!0,n);case 4:return f=t.sent,t.next=7,b();case 7:d=t.sent;case 8:return h=e(e(e(e(e(e(e({form_id:a||""},(0,o.compact)("source",f)),(0,o.compact)("join_code",u)),(0,o.compact)("official_code",s)),(0,o.compact)("timeline_code",i)),(0,o.compact)("form_data",p)),(0,o.compact)("direct_share_info",d)),{},{location:l}),(0,c.default)("detail_join",{id:n}),q.hasRetry=!1,t.abrupt("return",q(n,h,!0));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.join=function(){var t=n(r().mark((function t(n){var a,u,s,i,p,l,f,d,h,_,I,y,m,P,O,g,T,S,v,x,R;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.id,u=n.subscribeType,s=n.joinCode,i=n.officialCode,p=n.timelineCode,l=n.formData,f=n.subscribeMessage,d=n.vote,h=n.joinKey,_=n.inviteId,I=n.showToast,y=void 0===I||I,m=n.needShareInfo,P=void 0!==m&&m,O=n.location,g=void 0===O?null:O,T=n.verifyInfo,S=void 0===T?null:T,i){t.next=8;break}return t.next=4,w(!0,a,P);case 4:return v=t.sent,t.next=7,b();case 7:x=t.sent;case 8:return R=e(e(e(e(e(e(e(e(e(e(e({form_id:u||"",location:g},(0,o.compact)("source",v)),(0,o.compact)("join_code",s)),(0,o.compact)("official_code",i)),(0,o.compact)("timeline_code",p)),(0,o.compact)("form_data",l)),(0,o.compact)("vote",d)),(0,o.compact)("direct_share_info",x)),(0,o.compact)("subscribe_message",(0,o.get)(f,"length",0)>0&&f)),(0,o.compact)("join_key",h)),(0,o.compact)("invite_id",_)),(0,o.compact)("verify_info",S)),(0,c.default)("detail_join",{id:a}),q.hasRetry=!1,t.abrupt("return",q(a,R,y));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function H(){return(H=n(r().mark((function t(e){var n,o,c,i,p=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:[],o=p.length>2&&void 0!==p[2]&&p[2],console.log("get game: ".concat(e)),c=n&&n.length>0?"ad_tags=".concat(n.join(",")):"",i="",c&&(i="?"+s.default.compact([c]).join("&")),o&&(i+=(i?"&":"?")+"fetch_coupon=true"),e){t.next=9;break}throw new Error("抽奖不存在");case 9:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e).concat(i),method:"GET"}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return(G=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("get game users: ".concat(e)),n){t.next=7;break}if(e){t.next=4;break}throw new Error("抽奖不存在");case 4:n="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/users?page=1&size=200"),t.next=8;break;case 7:n="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(n);case 8:return t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get game lucky users: ".concat(e)),n=n?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(n):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/lucky_users?page=1&size=21"),t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("get game result by initiator: ".concat(e)),e){t.next=3;break}throw new Error("抽奖不存在");case 3:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/result"),method:"GET"}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return(U=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("post wish contact: ".concat(n)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/wish_contact"),method:"POST",data:n}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=n(r().mark((function t(e,n,c){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("post contact: ".concat(n)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/contact?").concat((0,o.queryString)({join_id:c||""})),method:"POST",data:n}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){return(z=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("manual start: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/draw_step"),method:"POST",data:n}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return(D=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("manual start: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/draw_step"),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){return(Y=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("结束现场抽奖: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/party/end"),method:"POST"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return(J=n(r().mark((function t(e){var n,o=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"default",console.log("share image: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/share_image?type=").concat(n),method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return(Z=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("share group message image: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/group_share_image"),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("share group pyq image: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/group_pyq_share_image"),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(){return(W=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("hide game: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/hide"),method:"POST"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=n(r().mark((function t(e,n,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("join group: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery_group/").concat(e,"/join"),method:"POST",data:{form_id:n,form_data:o}}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){return(B=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get group: ".concat(e)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery_group/").concat(e),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(){return(K=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get virtual prizes",e),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/virtual_prizes?prize_id=").concat(e),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t){return X.apply(this,arguments)}function X(){return(X=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/unshelve"),method:"POST"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){return tt.apply(this,arguments)}function tt(){return(tt=n(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.appid,o=e.title,t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/merchant_contact/disable_appid"),method:"POST",data:{appid:n,title:o}}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return rt.apply(this,arguments)}function rt(){return(rt=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/user/ban"),method:"POST",data:{user_id:e}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(){return(nt=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e?-1===(e="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(e)).indexOf("?")?e+"?"+(0,o.queryString)(n):e+"&"+(0,o.queryString)(n):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/random?").concat((0,o.queryString)(n)),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(){return(at=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/analytics"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(){return(ut=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/assist_rank"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(){return(ot=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get invite leader list: ".concat(e)),n=n?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(n):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/invite_leader?page=1&page_size=20"),t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(){return(ct=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/game_rank"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(){return(st=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/invite_rank"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(){return(it=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(n):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/formdata"),t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(){return(pt=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(n):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/source/groupchat"),t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(){return(lt=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/choice_statistics"),t.abrupt("return",(0,u.superRequest)({url:n,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(){return(ft=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/official_code/detect"),method:"POST",data:{join_code:n}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(){return(dt=n(r().mark((function t(e,n,c){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/redpacket_withdraw?").concat((0,o.queryString)({join_id:c||""})),method:"POST",data:{amount:n}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.fetchPhoneInfoExcel=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/join_download")}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function ht(t){return _t.apply(this,arguments)}function _t(){return(_t=n(r().mark((function t(e){var n,a,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,o.getShareTicket)(),a=(0,o.getScene)(),u="NO",!n||1044!==a){t.next=7;break}return t.next=6,yt(e);case 6:u=t.sent;case 7:if(1044!==a||"NO"!==u){t.next=11;break}return t.abrupt("return","chat");case 11:if(!([1008,1044,1160].indexOf(a)>=0)){t.next=15;break}return t.abrupt("return","groupchat");case 15:if(!([1047,1048,1049].indexOf(a)>=0)){t.next=19;break}return t.abrupt("return","shareimage");case 19:if(1074!==a){t.next=23;break}return t.abrupt("return","officialcard");case 23:return t.abrupt("return","");case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var It=function(){var t=n(r().mark((function t(n){var o,c,s,i,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.type,c=n.encrypted_data,s=n.iv,i=n.code,p=n.lotteryId,t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/wechat/eptdata"),method:"POST",data:e({type:o,lottery_id:p,encrypted_data:c,iv:s},i?{code:i}:{})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function yt(t){return mt.apply(this,arguments)}function mt(){return(mt=n(r().mark((function t(e){var a,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.isSessionExpired)();case 2:if(!t.sent){t.next=6;break}return t.next=5,(0,o.getLoginCode)();case 5:a=t.sent;case 6:return t.next=8,(0,o.getShareInfo)();case 8:return u=t.sent,t.abrupt("return",new Promise((function(t){var s=function a(u,s){u&&u.encryptedData&&u.iv?It({type:"group",encrypted_data:u.encryptedData,iv:u.iv,lotteryId:e,code:s}).then((function(e){var r=e.data,n=r.openGId,a=r.right_group;t(!0===a?"YES":n?"PENDING":"NO")})).catch(function(){var e=n(r().mark((function e(n){var u,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasRetry){e.next=5;break}return(0,_.error)("getDataByIv",n),(0,c.default)("detail_groupchat_noauth",{label:"pe_eptdata"}),t("NO"),e.abrupt("return");case 5:if("解密信息与用户信息不一致"!==(null==n?void 0:n.message)){e.next=16;break}return e.next=8,(0,o.getLoginCode)();case 8:return u=e.sent,e.next=11,(0,o.getShareInfo)();case 11:s=e.sent,a(s,u),a.hasRetry=!0,e.next=18;break;case 16:return t("NO"),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):((0,c.default)("detail_groupchat_noauth",{label:"pew_get"}),(0,o.canUseGetGroupEnterInfo)()?(0,c.default)("detail_qygroupchat_noauth",{label:"notgroup"}):(0,c.default)("detail_qygroupchat_noauth",{label:"notgrouplowversion"}),t("NO"))};s.hasRetry=!1,s(u,a)})));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(t,e,r,n){var a,u=!(null==n||null===(a=n.lotteryResult)||void 0===a||!a.message);return e===i.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER||e===i.VIRTUAL_PRIZE_TYPES.MINA_PATH?function(t){return t?"联系\n发起人":"联系发起人"}(t):9===e?function(t,e){var r;return null!=e&&null!==(r=e.lotteryResult)&&void 0!==r&&r.lucky_fill_info?"已填写":t?"填写信\n息领奖":"填写信息领奖"}(t,n):u?function(t){return t?"查看\n留言":"查看发起人留言"}(t):function(t,e){return e?t?"地址\n已填写":"地址已填写":t?"填写\n地址":"填写地址"}(t,r)}function Ot(t){return t===i.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER||t===i.VIRTUAL_PRIZE_TYPES.MINA_PATH?p.OnTimeJoinOperation.LUCKY_CONTACT:t===i.VIRTUAL_PRIZE_TYPES.FILL_WINNER_INFO?p.OnTimeJoinOperation.FILL_INFO:p.OnTimeJoinOperation.FILL_ADDRESS}function gt(t,e){return[i.VIRTUAL_PRIZE_TYPES.MINA_PATH,i.VIRTUAL_PRIZE_TYPES.OTHER,i.VIRTUAL_PRIZE_TYPES.COVER].includes(e)?"点击领取":t?"复制\n兑换码":"复制兑换码"}function Tt(t){return t===i.VIRTUAL_PRIZE_TYPES.MINA_PATH?p.OnTimeJoinOperation.GOTO_MINA:t===i.VIRTUAL_PRIZE_TYPES.OTHER?p.OnTimeJoinOperation.GOTO_KEFU:t===i.VIRTUAL_PRIZE_TYPES.COVER?p.OnTimeJoinOperation.GET_COVER:p.OnTimeJoinOperation.COPY_CODE}exports.getWinnerPrizeAction=function(e,r,n){var a=!!xt(e);if(!r)return{btnText:"",btnAction:p.OnTimeJoinOperation.NONE};var u=r.type,o=r.virtualType,c=(0,m.getWithdrawBtnText)(e,r,n);return t(t(t(t(t(t(t({},i.PRIZE_TYPES.OBJ,{btnText:Pt(n,o,a,e),btnAction:Ot(o)}),i.PRIZE_TYPES.MARKET,{btnText:Pt(n,o,a,e),btnAction:Ot(o)}),i.PRIZE_TYPES.CASH,{btnText:c,btnAction:p.OnTimeJoinOperation.WITH_DRAW}),i.PRIZE_TYPES.LUCKY_CASH,{btnText:c,btnAction:p.OnTimeJoinOperation.WITH_DRAW}),i.PRIZE_TYPES.OFFICIAL_CASH,{btnText:c,btnAction:p.OnTimeJoinOperation.WITH_DRAW}),i.PRIZE_TYPES.VIRTUAL,{btnText:gt(n,o),btnAction:Tt(o)}),i.PRIZE_TYPES.BONUS_POINT,{btnText:"点击领取",btnAction:p.OnTimeJoinOperation.NONE})[u]||{btnText:"中奖者领奖",btnAction:p.OnTimeJoinOperation.NONE}};function St(t){var e,r;(t.displayAmount=t.amount/100,t.type===i.PRIZE_TYPES.LUCKY_CASH&&(t.cashName="".concat(t.amount/100," 元拼手气红包")),t.type===i.PRIZE_TYPES.VIRTUAL)&&(t.virtualType===i.VIRTUAL_PRIZE_TYPES.THIRD_PARTY_COUPON&&(t.name="兑换码: ".concat(null===(e=t.info)||void 0===e||null===(r=e.content[0])||void 0===r?void 0:r.value)));return t.redemptionInfo=s.default.get(t,"info.content[0]",null),t}var vt=exports.getCurrentUserPrize=function(t){var e=s.default.get(t,"lotteryResult.prize");if(!s.default.isEmpty(e))return(0,o.handlePrizeName)(e);try{for(var r=s.default.get(t,"lucky_users.data",[]),n=null,a=0,u=r.length;a<u;a++)if((n=r[a]).id===s.default.get(getApp().globalData.userInfo,"user_id","")){var i=s.default.get(t,"prizes.data",[]).filter((function(t){return t.id===n.prize_id}));if(i.length>0)return(0,c.default)("get_current_user_prize_users_data",{type:null==t?void 0:t.draw_type}),St(i[0])}return null}catch(t){return console.log(t),null}};exports.getCurrentUserPrizeForPrizeInfo=function(t){var e=s.default.get(t,"lotteryResult.prize",null);if(e&&Object.keys(e).length>0)return(0,o.handlePrizeNameForPrizeInfo)(e);try{for(var r=s.default.get(t,"lucky_users.data",[]),n=null,a=0,u=r.length;a<u;a++)if((n=r[a]).id===s.default.get(getApp().globalData.userInfo,"user_id","")){var c=s.default.get(t,"prizes.data",[]).filter((function(t){return t.id===n.prize_id}));if(c.length>0){var p=c[0];return p.displayAmount=p.amount/100,p.type===i.PRIZE_TYPES.LUCKY_CASH?p.cashName="".concat(p.amount/100," 元拼手气红包"):p.type===i.PRIZE_TYPES.OFFICIAL_CASH&&(p.cashName="".concat(p.amount/100," 元现金红包")),p.redemptionInfo=s.default.get(p,"info.content[0]",null),p}}return null}catch(t){return console.log(t),null}};var xt=exports.getUserContact=function(t){var e;if(null==t||null===(e=t.lotteryResult)||void 0===e||!e.contact)return"";var r=t.lotteryResult.contact,n=function(t){return t.telNumber||t.userName||t.cityName||t.countyName||t.detailInfo||t.provinceName?"".concat(t.userName,", ").concat(t.telNumber,", ").concat(t.provinceName).concat(t.cityName).concat(t.countyName).concat(t.detailInfo,"\n"):""}(r);return r.notes?n+=r.notes+"\n":r.detail&&!n&&(n+=r.detail+"\n"),n};exports.detect=function(){var t=n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/join_code/detect"),method:"POST",data:{join_code:n}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),exports.subscribe=function(){var t=n(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/subscribe_message/notify"),t.next=4,(0,u.superRequest)({url:n,method:"POST",data:e});case 4:return o=t.sent,t.abrupt("return",o);case 8:t.prev=8,t.t0=t.catch(0),(0,_.error)("subscribe_message/notify",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function Rt(){return(Rt=n(r().mark((function t(e){var n,a,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=null===(n=e.lottery_feature)||void 0===n?void 0:n.qy_group_chat)&&s.default.has(a,"init_success")&&!1!==a.init_success&&e.id){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,yt(e.id);case 5:return"NO"===(u=t.sent)&&(0,c.default)("detail_qygroupchat_noauth",{label:"notqygroup"}),t.abrupt("return","YES"===u);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function At(){return(At=n(r().mark((function t(e){var n,o=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/wechatqy/company/").concat(e,"/followers").concat(n?"?refresh=1":""),method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t,e){return Et.apply(this,arguments)}function Et(){return(Et=n(r().mark((function t(e,n){var o,c=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:"",console.log("manage lottery: ".concat(e,", ").concat(n)),t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/manage"),method:"POST",data:{type:n,message:o}}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.managerItemMap={"封禁当前抽奖":function(t){return Q(t.id)},"封禁当前抽奖发起人":function(t){return et(t.initiator.id)},"封禁当前小程序跳转":function(t){return $({appid:t.kefu_share_data.appid,title:t.kefu_share_data.title})},"取消公众号粉丝可参与功能":function(t){return bt(t.id,"关闭仅粉丝")},"取消仅好友可参与功能":function(t){return bt(t.id,"关闭仅好友")},"取消仅普通群聊可参与功能":function(t){return bt(t.id,"关闭微信群")},"开启收集手机号后可参与":function(t){return bt(t.id,"收集手机号")},"禁止分享":function(t){return bt(t.id,"禁止分享")},"开启分享":function(t){return bt(t.id,"开启分享")},"立即结束抽奖":function(t){return bt(t.id,"结束抽奖")},"关闭抽奖":function(t,e){return bt(t.id,"关闭抽奖",e)},"取消首页展示":function(t){return bt(t.id,"取消首页展示")}};function wt(){return(wt=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/daily_public"),method:"GET"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(){return(Nt=n(r().mark((function t(e){var n,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.lotteryId,o=e.joinId,c=e.message,t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(n,"/parti_message"),method:"POST",data:{join_id:o,message:c}}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.notifyWinners=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/lucky_fill_notify"),method:"POST"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function kt(){return(kt=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e),method:"GET"});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.drawLottery=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(e,"/draw"),method:"POST"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/game.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/group.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canUsePrivateMessage=exports.canJoinGroup=exports.authPrivateMessage=void 0,exports.getCannotJoinGroupText=l,exports.getGroupImage=function(e){return h.apply(this,arguments)},exports.previewGroupImage=function(e){return x.apply(this,arguments)},exports.reportAboutGroup=function(){var e,r=(0,a.getCurrentPage)();(0,u.get)(null===(e=r.getCurrentLottery)||void 0===e?void 0:e.call(r),"groupchat_only")&&(0,n.default)("detail_groupchat_noauth",{label:"pe_join"})};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../utils/analyse"))&&e.__esModule?e:{default:e},a=require("../utils/tools"),u=require("lodash"),i=require("./game"),o=require("@mina-modules/system-info"),s=require("../utils/lotteryUtils");var c=exports.authPrivateMessage=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=(0,a.getShareTicket)())||(t=(0,a.getLaunchShareTicket)()),!wx.authPrivateMessage||!t){e.next=4;break}return e.abrupt("return",new Promise((function(e){wx.authPrivateMessage({shareTicket:t,success:function(r){e(r)},fail:function(r){(0,n.default)("detail_groupchat_noauth",{label:"pew_auth"}),console.error(r),e({})}})})));case 4:return e.abrupt("return",new Promise((function(e){e({})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=exports.canUsePrivateMessage=function(){var e=(0,o.getSysInfo)().SDKVersion;return(0,a.compareVersion)(e,"2.13.0")>=0};exports.canJoinGroup=function(){var e=t(r().mark((function e(u){var o,l,f,h,x;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.id&&u.groupchat_only&&!(0,s.isLotteryEnd)(u)){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=(0,a.getShareTicket)(),l=(0,a.getScene)(),p()){e.next=7;break}return(0,n.default)("detail_groupchat_noauth",{label:"ver"}),e.abrupt("return",!1);case 7:if(o){e.next=10;break}return(0,n.default)("detail_groupchat_noauth",{label:"stlost_".concat(l)}),e.abrupt("return",!1);case 10:return e.next=12,(0,i.isFromGroupChatOrGroupUpcoming)(u.id);case 12:if(f=e.sent,h={PENDING:function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,n.default)("detail_groupchat_noauth",{label:"ci"}),e.next=3,c();case 3:if(t=e.sent,t.valid){e.next=8;break}return(0,n.default)("detail_groupchat_noauth",{label:"gni"}),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),NO:function(){return!1},YES:function(){return!0}},!(x=h[f])){e.next=17;break}return e.abrupt("return",x());case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();function l(e){return f.apply(this,arguments)}function f(){return(f=t(r().mark((function e(t){var u,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.groupchat_only){e.next=2;break}return e.abrupt("return");case 2:if(u="",i=(0,a.getScene)(),!(0,a.isWxWork)()){e.next=9;break}(0,n.default)("detail_privatemsg_joinfail_com"),u="请在手机个人微信上参与当前抽奖",e.next=24;break;case 9:if(p()){e.next=13;break}u="请将微信升级至最新版本后参与",e.next=24;break;case 13:if(1160!==i){e.next=17;break}u="请点击群聊的抽奖链接进入再试（请勿点击群待办）",e.next=24;break;case 17:return e.next=19,c();case 19:if(!e.sent.valid){e.next=23;break}u="",e.next=24;break;case 23:u="仅指定群聊成员可参与";case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:if(e.t0=e.sent,"仅指定群聊成员可参与"!==e.t0){e.next=7;break}e.t1=(0,s.getJoinGroupImage)(t),e.next=8;break;case 7:e.t1="";case 8:return e.abrupt("return",e.t1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:wx.previewImage({urls:[t],current:t});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/group.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/homepage.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchRecommendHomePage=function(){return o.apply(this,arguments)},exports.isEnableUserPage=function(){return t.default.get(getApp(),"globalData.userProfile.user_page",!1)},exports.postUserPage=function(e){return s.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=a(require("lodash")),n=a(require("../config")),u=require("../libs/request");function a(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=r(e().mark((function r(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/userpage/recommend"),method:"GET"}));case 1:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function r(t){var a,o=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/userpage"),method:"POST",data:{command_type:t,data:a}}));case 2:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/homepage.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/initiatorOpt.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyLotteryOfPrivate=exports.copyLottery=exports.closeLottery=void 0,exports.goToLotteryEdit=function(t){if(t.smart_promotions.length>0&&t.smart_promotions[0].state>=i.PROMOTION_STATE.pending)return(0,p.showToast)("当前抽奖已通过智能推广审核，无法修改。如需修改，请解除推广后再试。");t.draw_type===c.DRAW_TYPE.PARTY?wx.navigateTo({url:"/pages/offlinelottery/pages/create/create?id=".concat(t.id,"&edit_lottery_id=").concat(t.id)}):t.theme===c.LOTTERY_THEME.FUNNY?wx.navigateTo({url:"/pages/createwithfun/createwithfun?id=".concat(t.id,"&edit_lottery_id=").concat(t.id)}):t.square_id?wx.navigateTo({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?").concat(o.IdTypes.SELF_HELP_ID,"=").concat(t.square_id,"&edit_lottery_id=").concat(t.id,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(t.id,"&editing_type=").concat(o.EditingTypes.EDITING,"&type=").concat(o.LotteryTypes.SELF_HELP)}):t.marketing?wx.navigateTo({url:"".concat(o.ACTIVITY_CREATE_PAGE_PATH,"?").concat(o.IdTypes.LOTTERY_ID,"=").concat(t.id,"&editing_type=").concat(o.EditingTypes.EDITING,"&type=").concat(t.marketing.type)}):wx.navigateTo({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?id=").concat(t.id,"&edit_lottery_id=").concat(t.id,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(t.id,"&editing_type=").concat(o.EditingTypes.EDITING)})},exports.testToNormal=exports.goodsRefund=void 0;var t=require("../@babel/runtime/helpers/toConsumableArray"),e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=d(require("../config")),a=require("../libs/request"),c=require("../models/lottery"),o=require("../constant"),i=require("./smartPromotion"),u=require("./square"),s=d(require("lodash")),p=require("@utils/wechatAPI"),T=require("@/utils/lotteryUtils");function d(t){return t&&t.__esModule?t:{default:t}}exports.goodsRefund=function(){var t=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/close"),method:"POST",data:{}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),exports.copyLottery=function(){var n=r(e().mark((function n(a){var i,p,d,_,y,l,E,f=arguments;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=f.length>1&&void 0!==f[1]&&f[1],p=i?wx.redirectTo:wx.navigateTo,!a.marketing){n.next=4;break}return n.abrupt("return",wx.navigateTo({url:"".concat(o.ACTIVITY_CREATE_PAGE_PATH,"?editing_type=").concat(o.EditingTypes.CREATOR_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(a.id,"&type=").concat(a.marketing.type)}));case 4:if(a.draw_type!==c.DRAW_TYPE.PARTY){n.next=12;break}if(_={free:function(){return wx.navigateTo({url:"/pages/offlinelottery/pages/create/create?type=free&copy_lottery_id=".concat(a.id)})},vip:function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",wx.navigateTo({url:"/pages/offlinelottery/pages/create/create?type=vip&copy_lottery_id=".concat(a.id)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},!(y=_[null==a||null===(d=a.party)||void 0===d?void 0:d.type])){n.next=11;break}return n.abrupt("return",y());case 11:return n.abrupt("return",wx.showToast({title:"当前版本暂不支持",icon:"none"}));case 12:if(!(0,T.isSquare)(a)){n.next=19;break}return n.next=15,(0,u.getUnusedSquareTickets)();case 15:if(!(l=n.sent)){n.next=19;break}return E=l.map((function(t){return"首页推广 ".concat(t.key," 天（剩余 ").concat(t.items.length," 张券）")})),n.abrupt("return",wx.showActionSheet({itemList:["不使用推广"].concat(t(E)),success:function(){var t=r(e().mark((function t(r){var n,c,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.tapIndex>0)){t.next=4;break}if(n=s.default.get(l,"[".concat(r.tapIndex-1,"].items[0]"),{}),c=n.id,i=n.purchase_data,!c){t.next=4;break}return t.abrupt("return",wx.redirectTo({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?").concat(o.IdTypes.LOTTERY_ID,"=").concat(a.id,"&sid=").concat(c,"&type=").concat(o.LotteryTypes.SELF_HELP,"&self_help_type=").concat(i.days,"&editing_type=").concat(o.EditingTypes.CREATOR_COPY)}));case 4:return t.abrupt("return",p({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?editing_type=").concat(o.EditingTypes.CREATOR_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(a.id)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fail:function(){var t=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("🚀 ~ file: initiatorOpt.ts ~ line 93 ~ fail: ~ ee",r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}));case 19:if(!a.is_payed){n.next=21;break}return n.abrupt("return",p({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?editing_type=").concat(o.EditingTypes.CREATOR_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(a.id)}));case 21:if(a.theme!==c.LOTTERY_THEME.FUNNY){n.next=23;break}return n.abrupt("return",wx.navigateTo({url:"/pages/createwithfun/createwithfun?copy_lottery_id=".concat(a.id)}));case 23:p({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?editing_type=").concat(o.EditingTypes.CREATOR_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(a.id)});case 24:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),exports.copyLotteryOfPrivate=function(t){if(t)return t.marketing?wx.navigateTo({url:"".concat(o.ACTIVITY_CREATE_PAGE_PATH,"?copy_type=normal&editing_type=").concat(o.EditingTypes.JOIN_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(t.id,"&type=").concat(t.marketing.type)}):void wx.navigateTo({url:"".concat(o.NEW_CREATE_PAGE_PATH,"?copy_type=normal&editing_type=").concat(o.EditingTypes.JOIN_COPY,"&").concat(o.IdTypes.LOTTERY_ID,"=").concat(t.id)})};exports.closeLottery=function(){var t=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/close"),method:"POST"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),exports.testToNormal=function(){var t=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/lottery/").concat(r,"/test2normal"),method:"POST"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/initiatorOpt.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/joinButtonLoading.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hideJoinBtnLoading=function(){n()},exports.setLoading=function(e){t=e.show,n=e.hide},exports.showJoinBtnLoading=function(){e&&clearTimeout(e),t(),e=setTimeout((function(){n()}),5e3)};var e,o=require("@/constant"),t=o.NOOP,n=o.NOOP;
},{isPage:false,isComponent:false,currentFile:'services/joinButtonLoading.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/lottery-lite.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchLottery=function(e){return c.apply(this,arguments)},exports.joinLottery=function(e){return a.apply(this,arguments)};var e,t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../config"))&&e.__esModule?e:{default:e},u=require("@libs/request"),o=require("@utils/tools");function c(){return(c=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/concurrent/lottery/").concat(r),method:"GET"},{},3,!(0,o.getToken)()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/concurrent/lottery/").concat(r,"/join"),method:"POST"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/lottery-lite.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/lottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLottery=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=i(require("@/config")),n=require("@/libs/request"),u=require("./visitedAdTags"),o=i(require("lodash"));function i(e){return e&&e.__esModule?e:{default:e}}exports.getLottery=function(){var i=t(e().mark((function t(i,a){var s,c,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getVisitedAdTags)();case 2:return s=e.sent,c=[],s&&s.length>0&&c.push("ad_tags=".concat(s.join(","))),null!=a&&a.join_key&&c.push("join_key=".concat(a.join_key)),null!=a&&a.inviteId&&c.push("invite=".concat(a.inviteId)),l="",c.length>0&&(l="?"+c.join("&")),e.abrupt("return",(0,n.superRequest)({url:"".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(i).concat(l),method:"GET"}).then((function(e){var t=o.default.get(e,"data.gift_list",null);return t&&t.length<=1&&(1===t.length&&3===t[0].type?t.push({type:-1}):t.unshift({type:-1})),e})).catch((function(e){return console.log("getLottery -> error",e),{error:e}})));case 10:case"end":return e.stop()}}),t)})));return function(e,t){return i.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/lottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/lucky-users.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchLuckyUsersShareImage=function(e){return a.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),u=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../libs/request");function a(){return(a=t(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(t,"/result_image"),method:"GET"});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/lucky-users.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/messageArea.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLotteryMsg=function(t){return s.apply(this,arguments)},exports.getChoicenessMsgs=function(t,e,r){return o.apply(this,arguments)},exports.getMsgDetail=function(t,e){return i.apply(this,arguments)},exports.getNextMsgs=function(t){return p.apply(this,arguments)},exports.postMessageOperate=function(t,e,r){return l.apply(this,arguments)},exports.replyUserMsg=function(t,e,r){return c.apply(this,arguments)},exports.setLikeState=function(t,e,r){return f.apply(this,arguments)};var t=require("../@babel/runtime/helpers/regeneratorRuntime"),e=require("../@babel/runtime/helpers/asyncToGenerator"),r=u(require("../config")),n=require("../libs/request"),a=u(require("lodash"));function u(t){return t&&t.__esModule?t:{default:t}}function s(){return(s=e(t().mark((function e(a){var u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(a.id,"/message"),t.abrupt("return",(0,n.superRequest)({url:u,method:"POST",data:{text:a.text,accept_subscribed:a.isAllowed}}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=e(t().mark((function e(a,u,s){var c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(a,"/message/").concat(u,"/reply"),t.abrupt("return",(0,n.superRequest)({url:c,method:"POST",data:{text:s}}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=e(t().mark((function e(u,s,c){var o,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(u,"/message"),p={type:s},a.default.has(c,"last_id")&&a.default.set(p,"last_id",c.last_id),a.default.has(c,"page_size")&&a.default.set(p,"page_size",c.page_size),t.abrupt("return",(0,n.superRequest)({url:o,method:"GET",data:p}));case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=e(t().mark((function e(a){var u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION).concat(a),t.abrupt("return",(0,n.superRequest)({url:u,method:"GET"}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=e(t().mark((function e(a,u){var s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(a,"/message/").concat(u),t.abrupt("return",(0,n.superRequest)({url:s,method:"GET"}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=e(t().mark((function e(a,u,s){var c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(a,"/message/operate"),t.abrupt("return",(0,n.superRequest)({url:c,method:"POST",data:{command_type:u,data:s}}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=e(t().mark((function e(a,u,s){var c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat(r.default.API_HOST,"/").concat(r.default.API_VERSION,"/lottery/").concat(a,"/message/").concat(u),t.abrupt("return",(0,n.superRequest)({url:c,method:"POST",data:{command_type:s}}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/messageArea.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/multijoin-task.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMultiJoinTask=function(e,t){return i.apply(this,arguments)},exports.fetchMultiJoinTaskList=function(e){return s.apply(this,arguments)},exports.fetchMultiJoinTaskState=function(e){return l.apply(this,arguments)},exports.offlineMultiTask=function(e,t){return(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(e,"/multi_join_code/offline"),method:"POST",data:{id:t}})},exports.verifyMultiJoinTask=function(e,t){return(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(e,"/multi_join_code/verify"),method:"POST",data:t})};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=c(require("lodash")),u=c(require("../config")),a=require("@libs/request"),o=require("@mina-modules/mina-sentry");function c(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=r(e().mark((function r(o,c){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(o,"/multi_join_code"),method:"POST",data:t(t({},n.default.omit(c,"code_type")),{},{type:c.code_type})});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(r){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(r,"/multi_join_code"),method:"GET"});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),(0,o.error)(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=r(e().mark((function t(r){var n,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(r,"/join_task_state"),method:"GET"});case 2:return n=e.sent,o={},n.data.forEach((function(e){o[e.id]=e.state})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/multijoin-task.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/multijoin.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchResultByJoinId=function(e){return p.apply(this,arguments)},exports.multiJoin=void 0;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=o(require("lodash")),n=o(require("moment")),u=o(require("../config")),i=require("@libs/request"),a=require("@utils/multijoin-subscribe"),s=require("@/utils/lotteryUtils");function o(e){return e&&e.__esModule?e:{default:e}}exports.multiJoin=function(){var r=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.isPublicLottery)(r)){e.next=3;break}return e.next=3,c(r);case 3:return e.abrupt("return",(0,i.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(r.id,"/multi_join"),method:"POST"}));case 4:case"end":return e.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}();function c(e){return l.apply(this,arguments)}function l(){return(l=t(e().mark((function t(r){var u,i,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(u=r.multi_join_tasks)||void 0===u?void 0:u.some((function(e){return"daily"===e.code_type}))){e.next=3;break}return e.abrupt("return");case 3:if(i="subscribeMessage_multijoin_recall",s="".concat(r.id,"_").concat((0,n.default)().format("YYYY-MM-DD")),wx.getStorageSync(i)!==s){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,a.subscribe)(r.id);case 9:wx.setStorageSync(i,s);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=t(e().mark((function t(n){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/participate/").concat(n,"/result"),method:"GET"});case 2:return a=e.sent,r.default.set(a,"data.prize.join_id",n),e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/multijoin.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/newSub.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SubMsgState=exports.SUBSCRIBE_MESSAGE_STATE=void 0,exports.checkMainSwitchState=function(){return x.apply(this,arguments)},exports.getSubscriptionsSetting=d,exports.getTypeBy=g,exports.msgTypes=void 0,exports.reportNewSpec=function(e,t,r){return M.apply(this,arguments)},exports.subMsg=function(e,t){return l.apply(this,arguments)},require("../@babel/runtime/helpers/Arrayincludes");var e,t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/objectSpread2"),n=require("../@babel/runtime/helpers/asyncToGenerator"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var u=a?Object.getOwnPropertyDescriptor(e,c):null;u&&(u.get||u.set)?Object.defineProperty(n,c,u):n[c]=e[c]}n.default=e,r&&r.set(e,n);return n}(require("lodash")),c=require("@mina-modules/mina-sentry"),u=(e=require("../utils/analyse"))&&e.__esModule?e:{default:e},i=require("../utils/tools");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var s=exports.SUBSCRIBE_MESSAGE_STATE=function(e){return e.accept="accept",e.reject="reject",e.ban="ban",e.filter="filter",e}({}),f=exports.SubMsgState=function(e){return e[e["主开关关闭"]=0]="主开关关闭",e[e["自动接受"]=1]="自动接受",e[e["自动拒绝"]=2]="自动拒绝",e[e["手动接受"]=3]="手动接受",e[e["手动拒绝"]=4]="手动拒绝",e[e["后台封禁"]=5]="后台封禁",e[e["被过滤"]=6]="被过滤",e[e["微信报错"]=7]="微信报错",e[e["重复点击订阅按钮"]=8]="重复点击订阅按钮",e}({}),p=exports.msgTypes={"新活动上线提醒":b("YzWwd-5BxnovzZazIFrfVSZ_bOWnYUG1Ja8Iw8YzwAs","az"),"参与者召回提醒":b("9vQqlvUDc6cvGEzKPuxv8Bw58WjTMCU9uIHQ5uT9dLI","ay"),"用户参与过期提醒":b("G776cxv5nvk8CsskiWBwpj6trs-ec-9HJvnb3XHlYgY","ax"),"抽奖发奖提醒":b("eHO8hSc3b03kzAaJCEQtH8ofjsmxDfeMJnXzeHQ5524","aw"),"活动兑奖提醒":b("bBDcsyQM0q8SFvKo3CMvqcvHTbbvoIcw0UVucaGpp7k","av"),"活动报告通知":b("YT8gJXVmf_L90j9kwaahLFmLDhKBPmE1oMKjWnD-l2k","au"),"抽奖结果通知_1":b("nDxupFaNZCKSkTdvoIaRNdtVSP-hzGH_u1qjkZq9u2Q","at"),"抽奖结果通知_2":b("AF71z7RvTdeKh-zDqOwiAhqoYP9aOIhlMqGmlfTUtN0","aa"),"邀请结果通知":b("BnpA7MQCD1XhTlNEfGIhZ9ZHcPyGq83UCFOtxKHp6Io","as"),"赔付结果通知":b("0n2v7xxObigYAUUOjbOscL-N4UwNc_1jSowlsD_P2x4","ar"),"账单通知":b("HSs-mLPHke3wRTbWrroFQTksZc06wGrgjqLRv-WfbMY","aq"),"客诉受理通知":b("a9l8dKkD2_apKrL60MobHH2_Mrz8Ao5z3rAY_8a6GpI","ap"),"活动进度通知":b("LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4","ao"),"账户余额通知":b("rIyjhCODqXJEZFgxWA-8Wrcn_TQJrxp8B3Qr0UPUgbI","an"),"活动开始提醒":b("bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU","am"),"签到提醒_1":b("g3MWto5oZlFFfFfgbizSEex2lYGgPcV_TrdL0MGB9Sc","al"),"签到提醒_2":b("g3MWto5oZlFFfFfgbizSEewrtoq-eKvCySsWQgSfNX4","ac"),"留言回复通知":b("FRtX4NkDjLAMujWvxzjReNkX70jaaKtA_Q2sgsscQPM","ak"),"活动认领结果通知":b("X4kpcU5I_06xBA73gjK73OW5SKucqfkqXYmkheuUilU","aj"),"举报处理提醒":b("ottP7QQv0JRYPeZ-OCPx4cYQBGYb1qEFSAg7K6354H0","ai"),"提现结果通知":b("Y_gXCTFAx9Wl3CWht6x1Nhu6SzXHRWWOyHMFTKXkBH0","ah"),"客诉处理通知":b("sBxPnQqaGokH2kD_gUjNLtxP-kIeoNoTOEvsIj_ILlk","ag"),"申请结果通知":b("oTCxq_0cM2U6aEMIS0qsuBr05tvUDJq7wcAZSSUalmE","af"),"发货通知":b("GaCUjX9ypxOqiYF4dVtGwp-2hfRjoyPePHKWEMOX4wE","ae"),"退款通知":b("Ed13aFnWIMPjfwQ5ZLQ38cAXbSbWZqBMguc14AQ4IxY","ad"),"审核结果通知":b("8NE2G4B4dUR6mg50AuIg6GJLoiyTghO-d4J7mIcF70c","ab")};function l(){return(l=n(t().mark((function e(r,n){var u,o,s,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.promisify)(wx.requestSubscribeMessage)({tmplIds:h(r)});case 3:return u=e.sent,e.next=6,S(u);case 6:return o=e.sent,n&&w(o,n,r),e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),(0,c.error)(e.t0),console.error(e.t0),s={},p=e.t0.errMsg,(0,a.isArray)(r)||(r=[r]),r.forEach((function(e){if(p.includes("fail last call has not ended"))return s[g(e)]=f.重复点击订阅按钮;s[g(e)]=f.微信报错})),n&&w(s,n,r);case 20:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function b(e,t){return{id:e,label:t}}function h(e){return(0,a.isArray)(e)?e.map((function(e){return e.id})):[e.id]}function g(e){(0,a.isString)(e)||(e=e.id);for(var t=0,r=Object.keys(p);t<r.length;t++){var n=r[t];if(p[n].id===e)return n}throw(0,c.error)("id 为 ".concat(e," 的订阅消息类型没有被注册")),"id 为 ".concat(e," 的订阅消息类型没有被注册")}function S(e){return v.apply(this,arguments)}function v(){return(v=n(t().mark((function e(r){var n,a,c,u,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,d();case 3:if(a=e.sent,c=a.mainSwitch,u=a.itemSettings,i=void 0===u?{}:u,!1!==c){e.next=10;break}return Object.keys(r).forEach((function(e){"errMsg"!==e&&(n[g(e)]=f.主开关关闭)})),e.abrupt("return",n);case 10:return Object.keys(i).forEach((function(e){"errMsg"!==e&&(n[g(e)]=i[e]===s.accept?f.自动接受:i[e]===s.ban?f.后台封禁:i[e]===s.filter?f.被过滤:f.自动拒绝)})),Object.keys(r).forEach((function(e){"errMsg"!==e&&(Object.keys(i).every((function(t){return t!==e}))&&(n[g(e)]=r[e]===s.accept?f.手动接受:f.手动拒绝))})),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return new Promise((function(e,t){wx.getSetting({withSubscriptions:!0,success:function(t){var n=t.subscriptionsSetting;e(n?r({itemSettings:{}},n):{mainSwitch:!1,itemSettings:{}})},fail:function(e){t(e),(0,c.error)(e)}})}))}function y(e){return!(!e||a.default.isEmpty(e))&&Object.keys(e).some((function(t){return e[t]!==s.accept}))}function x(){return(x=n(t().mark((function e(){var r,n,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return r=e.sent,n=r.mainSwitch,a=r.itemSettings,c=n&&!y(a),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,r){var n="";return r?(r=(0,a.isArray)(r)?r:[r]).forEach((function(t){n&&(n+="&"),n+="".concat(t.label,"_").concat(e[g(t)])})):Object.keys(e).forEach((function(t){n&&(n+="&"),n+="".concat(p[t].label,"_").concat(e[t])})),(0,u.default)(t,{lable:n}),n}function M(){return(M=n(t().mark((function e(r,n,a){var u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(r);case 3:w(e.sent,n,a),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),(0,c.error)(e.t0),u={},Object.keys(r).forEach((function(e){"errMsg"!==e&&(u[g(e)]=f.微信报错)})),w(u,n,a);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/newSub.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/pay.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WECOM_USER_ACCOUNT_PRICE=void 0,exports.activeTransfer=function(t){return I.apply(this,arguments)},exports.createPayment=d,exports.fetchPayment=function(t){return l.apply(this,arguments)},exports.getGameByPaymentId=function(t){return m.apply(this,arguments)},exports.getProductList=function(){return v.apply(this,arguments)},exports.getTransfer=function(t){return w.apply(this,arguments)},exports.getUnusedVoucher=h,exports.incomeExpense=function(t,e){return y.apply(this,arguments)},exports.isAnnualPro=b,exports.isAnnualProAsync=function(){return S.apply(this,arguments)},exports.payWeComUserAccount=exports.payProduct=void 0,exports.reveiveTransfer=function(t){return x.apply(this,arguments)},exports.transferProduct=function(t){return P.apply(this,arguments)},exports.updateLottery2Pro=void 0,exports.updateLotteryToProWithAnnualMembership=function(t){return T.apply(this,arguments)},exports.valueAdded=function(){return A.apply(this,arguments)};var t=require("../@babel/runtime/helpers/regeneratorRuntime"),e=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=i(require("moment")),u=i(require("../config")),a=require("../libs/request"),c=require("@utils/tools"),o=require("@mina-modules/mina-sentry"),s=require("@/utils/dialog"),p=require("@/utils/wechatAPI");function i(t){return t&&t.__esModule?t:{default:t}}function d(t){return f.apply(this,arguments)}function f(){return(f=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("payData => ",r),t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/payment"),method:"POST",data:r}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/payment/").concat(r),method:"GET"}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function h(){return _.apply(this,arguments)}function _(){return(_=r(t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/voucher/unused"),method:"GET"});case 3:if(!(n=t.sent).data||!n.data.vouchers){t.next=8;break}return t.abrupt("return",e(e({},n),{},{data:n.data.vouchers}));case 8:return t.abrupt("return",n);case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{data:[]});case 14:case"end":return t.stop()}}),r,null,[[0,11]])})))).apply(this,arguments)}function m(){return(m=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/get_by_payment_id?payment_id=").concat(r),method:"GET"}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=r(t().mark((function e(r,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r?r="".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION).concat(r):(r="".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/income_expense?page=1&size=5"),n&&(r="".concat(r,"&filter=").concat(n))),t.abrupt("return",(0,a.superRequest)({url:r,method:"GET"}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=r(t().mark((function e(){var r,n=arguments;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/products_onsale?system=").concat(r.system||"android"),method:"GET"}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/product_transfer_apply"),method:"POST",data:{code:r}}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/product_transfer"),method:"POST",data:r}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/product_transfer_active"),method:"POST",data:{code:r}}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=r(t().mark((function e(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/product_transfer?code=").concat(r),method:"GET"}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=r(t().mark((function e(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/payment/value_added"),method:"GET"}));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}exports.payProduct=function(){var n=r(t().mark((function r(n,u){var a,c,o,s,p=arguments;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:null,c=p.length>3&&void 0!==p[3]?p[3]:{},o={product_id:n},a&&a>0&&(o.virtual_ticket_id=a),u&&(o.extra=u),t.next=7,d(o);case 7:return(s=t.sent).data.request_info.timeStamp=""+s.data.request_info.timeStamp,t.next=11,wx.requestPayment(e(e(e({},s.data.request_info),c),{},{complete:function(){console.log("payProduct -> complete")}}));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),r)})));return function(t,e){return n.apply(this,arguments)}}();function S(){return(S=r(t().mark((function e(){var r,n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return r=t.sent,n=r.meta,t.abrupt("return",b(n.rights_voucher_expired));case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function b(t){return!!t&&!!(0,n.default)(t).isAfter()}var O=exports.WECOM_USER_ACCOUNT_PRICE=990;exports.payWeComUserAccount=function(){var e=r(t().mark((function e(r){var n,u,a,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(n=getApp().globalData)||void 0===n||null===(u=n.wxWorkData)||void 0===u?void 0:u.corp_id,t.next=3,d({product_id:3003,price:O*r.length,extra:{corp_id:a,corp_user_ids:r}});case 3:return(o=t.sent).data.request_info.timeStamp=""+o.data.request_info.timeStamp,t.next=7,(0,c.promisify)(wx.requestPayment)(o.data.request_info);case 7:return t.abrupt("return",o.data.id);case 8:case"end":return t.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(){return(T=r(t().mark((function e(r){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(n=t.sent,!b(n.meta.rights_voucher_expired)||!r){t.next=17;break}return t.prev=5,t.next=8,q({lotteryId:r,voucherId:-1});case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(5),(0,o.error)(t.t0),(0,p.showToast)(t.t0.message||"开启失败"),t.abrupt("return",!0);case 15:return(0,s.showDialog)("#pro-success-dialog"),t.abrupt("return",!0);case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}var q=exports.updateLottery2Pro=function(){var e=r(t().mark((function e(r){var n,c,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.lotteryId,c=r.voucherId,o=r.virtualTicketId,s=c?{voucher_id:c}:{virtual_ticket_id:o},t.abrupt("return",(0,a.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/lottery/").concat(n,"/upgrade"),method:"POST",data:s}));case 3:case"end":return t.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/pay.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/points.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.changeAddress=function(t,e){return O.apply(this,arguments)},exports.completeAdTask=function(t){return h.apply(this,arguments)},exports.fetchTasks=function(){return f.apply(this,arguments)},exports.getAdTaskRewards=function(t){return _.apply(this,arguments)},exports.getDaily=function(t){return a.apply(this,arguments)},exports.getPointGoodsList=function(){return s.apply(this,arguments)},exports.getRecord=function(t){return o.apply(this,arguments)},exports.getRedeemDetail=function(t){return P.apply(this,arguments)},exports.getRedeemDetailByPaymentId=function(t){return y.apply(this,arguments)},exports.getShopDetail=function(t,e){return p.apply(this,arguments)},exports.getWuliuDetail=function(t){return S.apply(this,arguments)},exports.postAdVideoReceivePoints=function(t){return w.apply(this,arguments)},exports.postDaily=function(t){return c.apply(this,arguments)},exports.redeemHistory=function(t,e){return I.apply(this,arguments)},exports.redeeme=function(t){return i.apply(this,arguments)},exports.reminder=function(t){return m.apply(this,arguments)},exports.taskForward=function(t){return l.apply(this,arguments)},exports.taskReward=function(t,e){return d.apply(this,arguments)};var t,e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(t=require("../config"))&&t.__esModule?t:{default:t},u=require("../libs/request");function a(){return(a=r(e().mark((function t(r){var a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/daily_bonus"),r&&(a="".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/daily_bonus?from=").concat(r)),t.abrupt("return",(0,u.superRequest)({url:a,method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/daily_bonus"),method:"POST",data:r}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=r?"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION).concat(r):"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/record"),t.abrupt("return",(0,u.superRequest)({url:r,method:"GET"},{retry:1}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(){var r,a,c=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:20,a=c.length>1&&void 0!==c[1]?c[1]:"",t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/goods"),method:"GET",data:{type:"wish_bp",source:a,size:r}}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=r(e().mark((function t(r,a){var c;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="pdd"===a?"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/pdd_goods/").concat(r):"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/goods/").concat(r),t.abrupt("return",(0,u.superRequest)({url:c,method:"GET"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/redeem"),method:"POST",data:r}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=r(e().mark((function t(r,a){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/reward_tasks/").concat(r,"/rewards"),method:"POST",data:a}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=r(e().mark((function t(){var r,a,c=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(c.length>0&&void 0!==c[0])||c[0],a=r?"":"?no_video=true",t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/reward_tasks").concat(a),method:"GET"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=r(e().mark((function t(r){var a,c=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/reward_tasks/").concat(r,"/step_forward"),method:"POST",data:a}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/ads/wish_finish"),method:"POST",data:{ads_id:r}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return(_=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/ads/wish_reward"),method:"POST",data:{ads_id:r}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=r(e().mark((function t(r,a){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=a?"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION).concat(a):"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/redeem?type=").concat(r||""),t.abrupt("return",(0,u.superRequest)({url:a,method:"GET"},{retry:1}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/daily_bonus/reminder"),method:"POST",data:r}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/redeem/detail?redeem_id=").concat(r),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/redeem/detail?payment_id=").concat(r),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=r(e().mark((function t(r,a){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/bonus_point/redeem/").concat(r,"/contact"),method:"POST",data:{contact:a}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.DELIVERY_HOST,"/info/").concat(r,"?project=lottery"),method:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/gift_activity/random_video/receive"),method:"POST",data:r}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/points.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/questionnaire.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QUESTIONNAIRE_NAME=void 0,exports.fetchQrImageOfService=function(){return(0,r.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/user/qy_kefu_qrcode"),method:"GET"})},exports.isDisplayQuestionnaire=function(){var t=getApp();if(t.globalData.submitted)return!1;var r=e.default.get(t,"globalData.userProfile");return!!e.default.get(t,"globalData.appConfig.initiator_survey_online")&&e.default.includes(e.default.get(r,"user_tags"),"lott_b")&&!e.default.includes(e.default.get(r,"survey_list"),a)},exports.submitQuestionnaire=function(e,u){return(0,r.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/user/survey/submit"),method:"POST",data:{name:e,data:u}})},require("../@babel/runtime/helpers/Arrayincludes");var e=u(require("lodash")),t=u(require("@/config")),r=require("@/libs/request");function u(e){return e&&e.__esModule?e:{default:e}}var a=exports.QUESTIONNAIRE_NAME="minasurvey_20220331";
},{isPage:false,isComponent:false,currentFile:'services/questionnaire.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/shop.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.category=function(){return p.apply(this,arguments)},exports.getGoodsItem=function(t){return a.apply(this,arguments)},exports.getGoodsList=function(t,e,r){return c.apply(this,arguments)},exports.getHotQuery=function(){return i.apply(this,arguments)},exports.suggest=function(t){return s.apply(this,arguments)};var t,e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(t=require("../config"))&&t.__esModule?t:{default:t},o=require("../libs/request"),u=require("../utils/tools");function a(){return(a=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get goods item"),t.abrupt("return",(0,o.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/goods/").concat(r),method:"GET"},{retry:1}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=r(e().mark((function t(r,a,c){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get goods list"),r?r="".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION).concat(r):(r=a&&"bp_market"===a.type&&a.query?"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/pdd_goods"):"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/goods"),a&&(r+="?".concat((0,u.queryString)(a)))),t.abrupt("return",(0,o.superRequest)({url:r,method:"GET"},{retry:1,rid:c}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetch shop suggest"),t.abrupt("return",(0,o.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/goods/suggest"),method:"POST",data:{content:r}},{retry:1}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=r(e().mark((function t(){var r,u=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:"prize_market",console.log("fetch shop category"),t.abrupt("return",(0,o.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/category?type=").concat(r),method:"GET"},{retry:1}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=r(e().mark((function t(){var r,u=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:"bp_market",console.log("fetch hot query"),t.abrupt("return",(0,o.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/market/keywords?type=").concat(r),method:"GET"},{retry:1}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/shop.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/smartPromotion.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STATE=exports.PROMOTION_STATE=exports.PENDING_STATE=exports.END_STATE=exports.ACTIVE_STATE=void 0,exports.createPromotion=function(t){return h.apply(this,arguments)},exports.getPromotion=function(t){return m.apply(this,arguments)},exports.getPromotionConfig=function(){return H.apply(this,arguments)},exports.getPromotionPostions=function(){return T.apply(this,arguments)},exports.getPromotionSubscirbeMessages=L,exports.getPromotions=function(t){return d.apply(this,arguments)},exports.getWalletBill=function(t){return M.apply(this,arguments)},exports.getWalletCost=function(t){return q.apply(this,arguments)},exports.goToPromotionLottery=function(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return;var n="/pages/lucky/lottery/detail?id=".concat(t.id);(t.is_smart_promotion||null!==(r=t.promotion)&&void 0!==r&&r.display_id)&&(n+="&adt=".concat(t.id));wx.navigateTo({url:n}),v(t,e)},exports.reportPromotionLotteryVisit=v,exports.reportUserOpt=N,exports.subscribePromotion=function(t){return l.apply(this,arguments)},exports.updatePromotion=function(t,r){return _.apply(this,arguments)},exports.userCancelPromotion=function(t){return Y.apply(this,arguments)},exports.userCancelVerifyPromotion=function(t){return W.apply(this,arguments)},exports.userPausePromotion=function(t){return D.apply(this,arguments)},exports.userReviewPromotion=function(t,r){return C.apply(this,arguments)},exports.userShowPromotion=function(t,r){return G.apply(this,arguments)},exports.verifyPromotion=P,exports.walletRecharge=function(t){return k.apply(this,arguments)},exports.walletRefund=function(t){return V.apply(this,arguments)};var t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),e=c(require("moment")),n=c(require("lodash")),o=c(require("../config")),u=require("../libs/request"),a=require("../utils/subscribeMessage");function c(t){return t&&t.__esModule?t:{default:t}}var s=exports.PROMOTION_STATE={create:1,review:2,refusal:3,pending:4,running:5,pause:6,end:7,canceled:-1,expired:-2,baned:-3},p=exports.ACTIVE_STATE=[s.pending,s.running,s.pause],i=exports.PENDING_STATE=[s.create,s.review,s.refusal],f=exports.END_STATE=[s.end,s.canceled,s.expired,s.baned];exports.STATE={PROMOTION_STATE:s,ACTIVE_STATE:p,PENDING_STATE:i,END_STATE:f};function l(){return(l=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/subscribe"),method:"POST",data:{state:e}}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function d(){return(d=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e?"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION).concat(e):"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotions"),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 2:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function m(){return(m=r(t().mark((function r(a){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(a),method:"GET"}).then((function(t){return n.default.get(t,"data.effect_overview.charts",[]).forEach((function(t){var r=t.data||[];0===r.length&&(t._empty=!0),r.forEach((function(t){t.time=(0,e.default)(t.time).valueOf()})),t.data=r.map((function(t){return[(0,e.default)(t.time).valueOf(),t.count]}))})),t})));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function h(){return(h=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion"),method:"POST",data:e}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function T(){return(T=r(t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/positions"),method:"GET"}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function _(){return(_=r(t().mark((function r(e,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e),method:"POST",data:n}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function P(t,r){return E.apply(this,arguments)}function E(){return(E=r(t().mark((function r(e,n){var a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e,"/verify"),method:"POST",data:n});case 2:if(!1!==(a=t.sent).result){t.next=5;break}throw new Error("提交失败");case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function O(t){return I.apply(this,arguments)}function I(){return(I=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e,"/cancel"),method:"POST"}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function S(t,r){return x.apply(this,arguments)}function x(){return(x=r(t().mark((function r(e,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e,"/cancel_verify"),method:"POST",data:n}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function A(t,r){return y.apply(this,arguments)}function y(){return(y=r(t().mark((function r(e,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e,"/show"),method:"POST",data:n}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function w(t,r){return b.apply(this,arguments)}function b(){return(b=r(t().mark((function r(e,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/promotion/").concat(e,"/pause"),method:"POST",data:n}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function v(t){return R.apply(this,arguments)}function R(){return(R=r(t().mark((function r(e){var o,u,a=arguments;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.length>1&&void 0!==a[1]?a[1]:"",t.prev=1,u=n.default.get(e,"promotion.display_id")){t.next=5;break}return t.abrupt("return",!1);case 5:return console.log("reportPromotionLotteryVisit",u),t.next=8,N({type:"visit",display_id:u,from:o});case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),r,null,[[1,11]])})))).apply(this,arguments)}function N(t){return g.apply(this,arguments)}function g(){return(g=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/report"),method:"POST",data:e}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function k(){return(k=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/wallet/recharge"),method:"POST",data:e}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function V(){return(V=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/wallet/refund"),method:"POST",data:e}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function q(){return(q=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"date"===e?e="":"plan"===e&&(e="promotion"),t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/wallet/cost?type=").concat(e),method:"GET"}));case 2:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function H(){return(H=r(t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.superRequest)({url:"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/config"),method:"GET"}));case 1:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function M(){return(M=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e?"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION).concat(e):"".concat(o.default.API_HOST,"/").concat(o.default.API_VERSION,"/smart_promotion/wallet/bill"),t.abrupt("return",(0,u.superRequest)({url:e,method:"GET"}));case 2:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function L(t){var r=t,e=[],n=[a.TEMPLATE_TYPES.PROMOTION_ACTIVE,a.TEMPLATE_TYPES.PROMOTION_REVIEW_DONE,a.TEMPLATE_TYPES.PROMOTION_STATECHANGE];return r[0]&&console.error(r[0]),r[1]&&n.forEach((function(t){"accept"===r[1][a.TEMPLATE_IDS[t]]&&e.push(t)})),e}function C(){return(C=r(t().mark((function r(e,n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,P(e,{subscribe_message:L(n)});case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function G(){return(G=r(t().mark((function r(e,n){var o,u,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return o=n,u={subscribe_message:[]},c=[a.TEMPLATE_TYPES.PROMOTION_STATECHANGE,a.TEMPLATE_TYPES.BALANCE_MENTION,a.TEMPLATE_TYPES.COMPLAIN],o[0]&&console.error(o[0]),o[1]&&c.forEach((function(t){"accept"===o[1][a.TEMPLATE_IDS[t]]&&u.subscribe_message.push(t)})),t.next=9,A(e,u);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function D(){return(D=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,w(e,{});case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function Y(){return(Y=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,O(e);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),r)})))).apply(this,arguments)}function W(){return(W=r(t().mark((function r(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,S(e,{});case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/smartPromotion.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/square.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canclePromotion=function(e){return v.apply(this,arguments)},exports.display=function(e,t){return b.apply(this,arguments)},exports.getSquare=function(e){return m.apply(this,arguments)},exports.getSquareGames=h,exports.getUnusedSquareTickets=function(){return l.apply(this,arguments)},exports.refund=function(e,t){return S.apply(this,arguments)},exports.setSquareLottery=function(e,t){return P.apply(this,arguments)},exports.setSquareLotteryDisplayTime=function(e,t){return x.apply(this,arguments)},exports.squareExpireDate=function(e){return(0,o.default)(e).add(1,"months").format("YYYY-M-D H:mm")},exports.squareStatus=i,exports.verify=function(e){return q.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/defineProperty"),r=require("../@babel/runtime/helpers/toConsumableArray"),n=require("../@babel/runtime/helpers/objectSpread2"),u=require("../@babel/runtime/helpers/asyncToGenerator"),a=p(require("../config")),s=require("../libs/request"),o=p(require("moment")),c=p(require("lodash"));function p(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.lottery||-1===e.state?e.refund_state?8:1===e.display_state?7:2===e.display_state?5:-1===e.verify_state?4:e.verify_state?1===e.verify_state?2:2===e.verify_state?3:void 0:1:-1}function l(){return(l=u(e().mark((function t(){var r,n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:if(!((r=e.sent).totalCount>0&&r.unused.length>0)){e.next=7;break}return n=f(r.unused),e.abrupt("return",Object.keys(n).map((function(e){return{key:Number(e),items:n[e]}})));case 7:return e.abrupt("return",void 0);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function f(e){return e.reduce((function(e,u){var a=Number(u.purchase_data.days);return e[a]?n(n({},e),{},t({},a,[].concat(r(e[a]),[u]))):n(n({},e),{},t({},a,[u]))}),{})}function d(){return y.apply(this,arguments)}function y(){return(y=u(e().mark((function t(){var r,n,u,a,s,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=[],u=[],a=c.default.get(getApp(),"globalData.userProfile.info.unused_square_ids",[]).length,e.prev=4,e.next=7,h();case 7:if(s=e.sent,o=s.data){e.next=11;break}return e.abrupt("return",{unused:u,end:n,pending:r,totalCount:a});case 11:return o.forEach((function(e){var t=i(e);-1===t?u.push(e):5===t||6===t||8===t?n.push(e):r.push(e)})),e.abrupt("return",{unused:u,end:n,pending:r,totalCount:a});case 15:return e.prev=15,e.t0=e.catch(4),e.abrupt("return",{unused:u,end:n,pending:r,totalCount:a});case 18:case"end":return e.stop()}}),t,null,[[4,15]])})))).apply(this,arguments)}function h(e){return _.apply(this,arguments)}function _(){return(_=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r?"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION).concat(r):"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/square_lottery"),e.abrupt("return",(0,s.superRequest)({url:r,method:"GET"},{retry:1}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get square: ".concat(r)),e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r),method:"GET"},{retry:1}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function q(){return(q=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("verify square: ".concat(r)),e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r,"/verify"),method:"POST"}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=u(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("display square: ".concat(r)),e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r,"/display"),method:"POST",data:{display_start:n}}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=u(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("refund square: ".concat(r)),e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r,"/refund"),method:"POST",data:{reason:n||""}}));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r,"/unbind"),method:"POST"}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=u(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/lottery/").concat(r,"/square_request"),method:"POST",data:{square_id:n}}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=u(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.superRequest)({url:"".concat(a.default.API_HOST,"/").concat(a.default.API_VERSION,"/square_lottery/").concat(r,"/display_timing"),method:"POST",data:{time:n}}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/square.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/squareSubscribe.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/classCallCheck"),s=require("../@babel/runtime/helpers/createClass"),n=require("../@babel/runtime/helpers/regeneratorRuntime"),a=require("../@babel/runtime/helpers/asyncToGenerator"),u=require("@/libs/request"),i=(e=require("@/config"))&&e.__esModule?e:{default:e},c=require("@mina-modules/mina-sentry");var o=function(){var e=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(i.default.API_HOST,"/").concat(i.default.API_VERSION,"/subscribe_message/scene")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=a(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.superRequest)({url:"".concat(i.default.API_HOST,"/").concat(i.default.API_VERSION,"/subscribe_message/notify"),method:"POST",data:t});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),(0,c.error)("subscribe_message/notify",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();exports.default=function(){function e(){r(this,e),this.resultData={},this.scenes=[],this.tmpIds=[],this.tmps=[]}var u,i;return s(e,[{key:"subscribeScene",value:(i=a(n().mark((function e(t){var r,s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tmpIds=[],this.tmps=[],e.next=4,o();case 4:r=e.sent,this.scenes=r.data.scenes[t],"verify_square"===t&&this.scenes&&this.scenes.push("complain"),this.scenes.forEach((function(e){s.tmpIds.push(r.data[e]),s.tmps.push(r.data.subscribe_types[e].template_id),s.resultData[r.data.subscribe_types[e].template_id]={subscribe_type:e,data_id:null,notify:null},console.log(e,"subscribeScene",s.tmps)}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"saveSubscribeStatus",value:(u=a(n().mark((function e(r,s,a){var u,i,c=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete r.errorCode,delete r.errMsg,u=!1,i=Object.keys(this.resultData).map((function(e){var n=c.resultData[e],i=r[e];return"reject"!==i||u||(u=!0),t(t({},n),{},{data_id:"complain"===n.subscribe_type?a:s,notify:"accept"===i})})).filter((function(e){return!0===e.notify})),u&&wx.showModal({title:"警告",content:"已取消通知，小程序将无法为你发送审核结果通知。请自行登录小程序查看结果。",showCancel:!1}),!(i.length>0)){e.next=9;break}return e.next=8,l(i);case 8:console.log("saveSubscribeStatus",r,s);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})}]),e}();
},{isPage:false,isComponent:false,currentFile:'services/squareSubscribe.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/subscribeMessage.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addUserRecallMsg=function(e){return o.apply(this,arguments)},exports.postSubscribeMessage=void 0,exports.setLotterySubMsgChecked=function(e){return c.apply(this,arguments)},exports.setSubMsg=i;var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),s=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../libs/request"),a=require("../utils/subscribeMessage"),u=require("@mina-modules/mina-sentry");function c(){return(c=t(r().mark((function e(t){var a,c,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(s.default.API_HOST,"/").concat(s.default.API_VERSION,"/subscribe_message/notify"),c=[{subscribe_type:"join_lottery",data_id:t,notify:!0}],e.next=5,(0,n.superRequest)({url:a,method:"POST",data:c},{retry:1});case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(0),(0,u.error)("subscribe_message/notify",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function o(){return(o=t(r().mark((function e(t){var s,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i([{subscribe_type:a.TEMPLATE_TYPES.USER_RECALL,data_id:t,notify:!0}]);case 2:(s=getApp()).globalData.userProfile&&(n=s.globalData.userProfile.recall_msg_count||0,s.globalData.userProfile.recall_msg_count=n+1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return p.apply(this,arguments)}function p(){return(p=t(r().mark((function e(t){var a,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(s.default.API_HOST,"/").concat(s.default.API_VERSION,"/subscribe_message/notify"),e.next=4,(0,n.superRequest)({url:a,method:"POST",data:t},{retry:1});case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),(0,u.error)("subscribe_message/notify",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}exports.postSubscribeMessage=function(){var e=t(r().mark((function e(t){var a,c,o,i=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]&&i[1],e.prev=1,console.log("postSubscribeMessage => ",t),t.length){e.next=5;break}return e.abrupt("return");case 5:return c="".concat(s.default.API_HOST,"/").concat(s.default.API_VERSION,"/subscribe_message/notify"),e.next=8,(0,n.superRequest)({url:c,method:"POST",data:t});case 8:return o=e.sent,e.abrupt("return",o);case 12:if(e.prev=12,e.t0=e.catch(1),(0,u.error)("subscribe_message/notify",e.t0),!a){e.next=17;break}throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(r){return e.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'services/subscribeMessage.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/ticket.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVirtualTicket=function(e){return a.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),u=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../libs/request");function a(){return(a=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/virtual_tickets").concat(t?"?type=".concat(t):""),method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/ticket.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/upyun.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.upload=function(e,r){return i.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),a=require("../libs/request"),n=(e=require("../config"))&&e.__esModule?e:{default:e};function u(e,r){return o.apply(this,arguments)}function o(){return(o=t(r().mark((function e(t,u){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/thirdparty/upyun_upload"),method:"POST",data:{filepath:t,type:u?"avatar":null}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=t(r().mark((function e(t,a){var n,o,i,s,c,p,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],e.next=3,u(a,n);case 3:return o=e.sent,i=o.data,s=i.policy,c=i.bucket,p=i.authorization,e.abrupt("return",new Promise((function(e,r){return wx.uploadFile({url:"https://v0.api.upyun.com/".concat(c),filePath:t,name:"file",formData:{authorization:p,policy:s},success:function(r){var t=JSON.parse(r.data),a={statusCode:r.statusCode,remotePath:t.url,data:t,errMsg:r.errMsg};return e(a)},fail:function(e){var t=e.errMsg;return r(t)}})})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/upyun.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/visitedAdTags.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVisitedAdTags=function(){return u.apply(this,arguments)},exports.needSaveAdTag=function(e){return(null==e?void 0:e.ad_tag)&&(4===(null==e?void 0:e.charge_mode)||/^mark_/.test(null==e?void 0:e.ad_tag))},exports.saveVisitedAdTag=function(e){return s.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=null;function n(){return a.apply(this,arguments)}function a(){return(a=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=wx.getStorageSync("visitedAdTags")||{}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=t(e().mark((function t(){var r,a,u,s=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:1,e.next=3,n();case 3:return a=e.sent,u=Object.keys(a).filter((function(e){return a[e]>=r})),e.abrupt("return",u);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=t(e().mark((function t(a){var u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:(u=e.sent)[a]=u[a]?u[a]+1:1,r=u,wx.setStorage({key:"visitedAdTags",data:u});case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/visitedAdTags.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/weComGroup.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BtnText=void 0,exports.deleteQrImage=function(e,o){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/lottery/").concat(e,"/").concat(n?"groupchat":"qy_group_chat","/qrcode"),method:"DELETE",data:{image:o}})},exports.getPreviewImage=function(e){var t,r;return null==e||null===(t=e.lottery_feature)||void 0===t||null===(r=t.qy_group_chat)||void 0===r?void 0:r.qrcode},exports.getText=i,exports.getTips=function(e,t){if((0,n.isWxWork)())return"请在手机微信上进群参与抽奖";if(!(0,n.getShareTicket)()&&!(0,n.canUseGetGroupEnterInfo)())return"请更新微信至最新版本再试";var r=i(e);if(r===a.hasImage)return t?"点击上方按钮进群，在群内参与抽奖":"点击下方按钮进群，在群内参与抽奖";if(r===a.noImage)return"仅可在企业微信客户群内参与";return""},exports.getToast=function(e){var t,r;if((0,n.isWxWork)())return"请在手机微信上进群参与抽奖";if(!(0,n.getShareTicket)()&&!(0,n.canUseGetGroupEnterInfo)())return"请更新微信至最新版本再试";if(null===(t=e.lottery_feature)||void 0===t||!t.qy_group_chat)return"";if(i(null===(r=e.lottery_feature)||void 0===r?void 0:r.qy_group_chat)===a.noImage)return"请联系发起人进群后再试";return""},exports.uploadQrImage=function(e,o){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/lottery/").concat(e,"/").concat(n?"groupchat":"qy_group_chat","/qrcode"),method:"POST",data:{image:o}})};var e=u(require("lodash")),t=u(require("../config")),r=require("../libs/request"),o=u(require("../utils/analyse")),n=require("../utils/tools");function u(e){return e&&e.__esModule?e:{default:e}}var a=exports.BtnText=function(e){return e.hasImage="点击进群\n参与抽奖",e.noImage="暂无资格\n参与抽奖",e}({}),c=e.default.debounce((function(e,t){(0,o.default)(e,t)}),500);function i(e){return(0,n.isWxWork)()?(c("detail_qygroupchat_noauth",{label:"wecom"}),a.noImage):((0,n.getShareTicket)()||(0,n.canUseGetGroupEnterInfo)())&&null!=e&&e.qrcode?a.hasImage:a.noImage}
},{isPage:false,isComponent:false,currentFile:'services/weComGroup.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/wecom/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeUserIds=function(e,r){return s.apply(this,arguments)},exports.fetchCorpDetail=function(e){return c.apply(this,arguments)},exports.purchaseWecom=function(e){return p.apply(this,arguments)},exports.searchCorpIds=function(e){return o.apply(this,arguments)};var e,r=require("../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../../config"))&&e.__esModule?e:{default:e},u=require("@libs/request"),a=require("@utils/wecomAPI");function c(){return(c=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.checkAuth)();case 2:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/wechatqy/").concat(t),method:"GET"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=t(r().mark((function e(t,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/wechatqy/userid_convert"),method:"POST",data:{users:a,corp_id:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/admin/wechatqy/search"),method:"POST",data:{name:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.superRequest)({url:"".concat(n.default.API_HOST,"/").concat(n.default.API_VERSION,"/admin/wechatqy/open_order"),method:"POST",data:{corp_id:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/wecom/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/withdraw.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withdrawAll=function(e){return a.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),u=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../libs/request");function a(){return(a=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION,"/withdraw"),method:"POST",data:{amount:t}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/withdraw.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("services/wxwork.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QY_COMPANY_TYPE=void 0,exports.getUserCompanies=p,exports.getUserCompaniesInfo=function(e){return l.apply(this,arguments)},exports.getUserCorpId=function(e,r){return i.apply(this,arguments)},exports.login=function(e){return o.apply(this,arguments)},exports.updateProfile=function(e,r){return c.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=a(require("../config")),n=require("../libs/request"),u=a(require("lodash"));function a(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=r(e().mark((function r(u){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/wechatqy/login"),method:"POST",data:{code:u}}));case 1:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function c(){return(c=r(e().mark((function r(u,a){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/wechatqy/profile"),method:"POST",data:{encrypted_data:u,iv:a}}));case 1:case"end":return e.stop()}}),r)})))).apply(this,arguments)}exports.QY_COMPANY_TYPE=function(e){return e.NONE="",e.GROUPCHAT="?type=group_chat",e.ADDQYUSER="?type=add_qy_user",e.PARTY="?type=party_qy",e}({});function p(e){return s.apply(this,arguments)}function s(){return(s=r(e().mark((function r(u){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/wechatqy/company").concat(u||""),method:"GET"}));case 1:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function i(){return(i=r(e().mark((function r(u,a){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.superRequest)({url:"".concat(t.default.API_HOST,"/").concat(t.default.API_VERSION,"/wechatqy/convert_corpid"),method:"POST",data:{corp_id:u,corp_user_id:a}}));case 1:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function l(){return(l=r(e().mark((function r(t){var n,a,o,c,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t);case 3:return(n=e.sent)&&n.data&&(s=null===(o=getApp().globalData)||void 0===o||null===(c=o.wxWorkData)||void 0===c?void 0:c.corp_id,a=u.default.find(n.data,(function(e){return e.corp_id===s&&!e.error}))||{}),e.abrupt("return",{id:a.corp_id,name:a.corp_name});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{id:null,name:null});case 11:case"end":return e.stop()}}),r,null,[[0,8]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'services/wxwork.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/actions/create/create.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={GAMEDATA_SET:function(t,e){return{type:"GAMEDATA_SET",title:t,data:e}},CLOSE_PRO:function(){return{type:"CLOSE_PRO"}},SET_GAME_DATA:function(t){return{type:"SET_GAME_DATA",value:t}},INIT_CREATE_DATA:function(){return{type:"INIT_CREATE_DATA"}},SET_ERROR_POSITION:function(t,e){return{type:"SET_ERROR_POSITION",title:t,data:e}}};
},{isPage:false,isComponent:false,currentFile:'store/actions/create/create.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/actions/gallery/gallery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={SET_GALLERY_URL:function(e,t){return{type:"SET_GALLERY_URL",index:e,data:t}},INIT_GALLERY:function(){return{type:"INIT_GALLERY"}}};
},{isPage:false,isComponent:false,currentFile:'store/actions/gallery/gallery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/actions/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../@babel/runtime/helpers/objectSpread2"),r=u(require("./create/create")),t=u(require("./gallery/gallery"));function u(e){return e&&e.__esModule?e:{default:e}}exports.default=e(e({},r.default),t.default);
},{isPage:false,isComponent:false,currentFile:'store/actions/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/actions/lottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setmarketing=exports.setTestMode=exports.setTemplate=exports.setShowRequiredError=exports.setShareSetting=exports.setRecallUser=exports.setProSetting=exports.setPrize=exports.setLotteryTaskSetting=exports.setLotteryDesc=exports.setLimitSetting=exports.setInviteReward=exports.setInviteLeader=exports.setImageTextData=exports.setHomePage=exports.setHighRiskUsers=exports.setDrawSetting=exports.setCreated=exports.setContactSetting=exports.setAllowToPublic=exports.setAllowPrizeLock=exports.resetMarketing=exports.initLottery=exports.deletePrize=exports.addPrize=exports.ACTIONS=void 0;var t=exports.ACTIONS=function(t){return t.SET_ALLOW_PRIZE_LOCK="SET_ALLOW_PRIZE_LOCK",t.SET_ALLOW_TO_PUBLIC="SET_ALLOW_TO_PUBLIC",t.SET_HIGH_RISK_USERS="SET_HIGH_RISK_USERS",t.SET_INVITE_REWARD="SET_INVITE_REWARD",t.SET_INVITE_LEADER="SET_INVITE_LEADER",t.RESET_MARKETING="LOTTERY.RESET_MARKETING",t.SET_MARKETING="LOTTERY.SET_MARKETING",t.SET_PRIZE_LIST="LOTTERY.SET_PRIZE_LIST",t.SET_PRIZE="LOTTERY.SET_PRIZE",t.SET_DRAW_SETTING="LOTTERY.SET_DRAW_SETTING",t.SET_LOTTERY_DESC="LOTTERY.SET_LOTTERY_DESC",t.SET_SHARE_SETTING="LOTTERY.SET_SHARE_SETTING",t.SET_LOTTERY_TASK_SETTING="LOTTERY.SET_LOTTERY_TASK_SETTING",t.SET_CONTACT_SETTING="LOTTERY.SET_CONTACT_SETTING",t.SET_PRO_SETTING="LOTTERY.SET_PRO_SETTING",t.SET_IMAGE_TEXT_DATA="LOTTERY.SET_IMAGE_TEXT_DATA",t.SET_SHOW_REQUIRED_ERROR="LOTTERY.SET_SHOW_REQUIRED_ERROR",t.SET_SELF_HELP_TYPE="LOTTERY.SET_SELF_HELP_TYPE",t.SET_RECALL_USER="LOTTERY.SET_RECALL_USER",t.SET_TEMPLATE="LOTTERY.SET_TEMPLATE",t.SET_CREATED="LOTTERY.SET_CREATED",t.SET_TEST_MODE="LOTTERY.SET_TEST_MODE",t.SET_LIMIT_JOIN_COUNT="LOTTERY.SET_LIMIT_JOIN_COUNT",t.SET_HOMEPAGE="LOTTERY.SET_HOMEPAGE",t.ADD_PRIZE="LOTTERY.ADD_PRIZE",t.DELETE_PRIZE="LOTTERY.DELETE_PRIZE",t.INIT_LOTTERY="LOTTERY.INIT_LOTTERY",t}({});exports.setHomePage=function(e){return{type:t.SET_HOMEPAGE,payload:e}},exports.setAllowToPublic=function(e){return{type:t.SET_ALLOW_TO_PUBLIC,payload:e}},exports.setHighRiskUsers=function(e){return{type:t.SET_HIGH_RISK_USERS,payload:e}},exports.setInviteReward=function(e){return{type:t.SET_INVITE_REWARD,payload:e}},exports.setInviteLeader=function(e){return{type:t.SET_INVITE_LEADER,payload:e}},exports.resetMarketing=function(e){return{type:t.RESET_MARKETING,payload:e}},exports.setmarketing=function(e){return{type:t.SET_MARKETING,payload:e}},exports.setLimitSetting=function(e){return{type:t.SET_LIMIT_JOIN_COUNT,payload:e}},exports.setTestMode=function(e){return{type:t.SET_TEST_MODE,payload:e}},exports.setCreated=function(e){return{type:t.SET_CREATED,payload:e}},exports.setAllowPrizeLock=function(e){return{type:t.SET_ALLOW_PRIZE_LOCK,payload:e}},exports.setTemplate=function(e){return{type:t.SET_TEMPLATE,payload:e}},exports.setPrize=function(e,T){return{type:t.SET_PRIZE,payload:{index:e,prize:T}}},exports.deletePrize=function(e){return{type:t.DELETE_PRIZE,payload:e}},exports.addPrize=function(e){return{type:t.ADD_PRIZE,payload:e}},exports.setDrawSetting=function(e){return{type:t.SET_DRAW_SETTING,payload:e}},exports.setLotteryDesc=function(e){return{type:t.SET_LOTTERY_DESC,payload:e}},exports.setShareSetting=function(e){return{type:t.SET_SHARE_SETTING,payload:e}},exports.setLotteryTaskSetting=function(e){return{type:t.SET_LOTTERY_TASK_SETTING,payload:e}},exports.setContactSetting=function(e){return{type:t.SET_CONTACT_SETTING,payload:e}},exports.setProSetting=function(e){return{type:t.SET_PRO_SETTING,payload:e}},exports.setImageTextData=function(e){return{type:t.SET_IMAGE_TEXT_DATA,payload:e}},exports.setShowRequiredError=function(e){return{type:t.SET_SHOW_REQUIRED_ERROR,payload:e}},exports.setRecallUser=function(e){return{type:t.SET_RECALL_USER,payload:e}},exports.initLottery=function(e){return{type:t.INIT_LOTTERY,payload:e||{}}};
},{isPage:false,isComponent:false,currentFile:'store/actions/lottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/LotteryTaskSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLotteryTaskSettingErrors=function(t){return{friend:M(t),group:y(t),official:E(t),officialId:k(t),officialAuthId:k(t),signal:p(t),questionnaire:q(t),questionnaireData:S(t),vote:w(t),voteData:m(t),quiz:D(t),quizData:T(t),task:C(t),taskData:h(t),keyword:v(t),signalContent:_(t),game:d(t),companyEnable:c(t),companyData:f(t),weComGroupCompanyData:s(t),limitedArea:u(t),limitedAreaData:l(t),auditEnable:i(t),auditData:g(t)}};var t,r=require("../../models/create"),e=require("../../models/lottery"),n=require("./common"),o=(t=require("lodash"))&&t.__esModule?t:{default:t},a=require("./conflictHandler");function i(t){return(0,a.getConflictErrors)(t,a.conflictMap.先审核再参与)}function g(t){var r=t.lotteryTaskSetting,e=r.auditEnable,o=r.auditData;return!t.showRequiredError||!e||null!=o&&o.desc?(0,n.getDefaultErrorMsg)():{errMsg:"请设置审核内容",tag:""}}function u(t){return!t.lotteryTaskSetting.limitedArea&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.指定区域用户可参与)}function l(t){var r=t.lotteryTaskSetting,e=r.limitedArea,o=r.limitedAreaData;return!t.showRequiredError||!e||null!=o&&o.length?(0,n.getDefaultErrorMsg)():{errMsg:"请设置区域",tag:""}}function s(t){var e;if(!t.showRequiredError)return(0,n.getDefaultErrorMsg)();var o=t.lotteryTaskSetting;return!o.group||o.groupType!==r.GroupTypes.weCom||null!==(e=o.weComGroupCompanyData)&&void 0!==e&&e.corp_id?(0,n.getDefaultErrorMsg)():{errMsg:"请选择企业",tag:""}}function f(t){var r,e=t.showRequiredError,o=t.lotteryTaskSetting;if(e&&o.companyEnable&&!(null===(r=o.companyData)||void 0===r?void 0:r.corp_id))return{errMsg:"请设置所在企业",tag:"_ji"};return(0,n.getDefaultErrorMsg)()}function c(t){return!t.lotteryTaskSetting.companyEnable&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.加企业微信后参与)}function d(t){return(0,a.getConflictErrors)(t,a.conflictMap.玩游戏参与抽奖)}function M(t){return!t.lotteryTaskSetting.friend&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.核验资格后参与)}function y(t){return t.drawSetting.startTimeOfReal?{errMsg:"仅群聊可参与不支持设置开始时间",tag:(0,n.getConflictTag)(r.FeaturesMark.即抽即中开始时间按钮)}:!t.lotteryTaskSetting.group&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.仅群成员可参与)}function E(t){return!t.lotteryTaskSetting.official&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.公众号粉丝可参与)}function k(t){return t.lotteryTaskSetting.official?!t.showRequiredError||t.lotteryTaskSetting.officialId||t.lotteryTaskSetting.officialAuthId?(0,n.getDefaultErrorMsg)():{errMsg:"请授权公众号",tag:"_db"}:(0,n.getDefaultErrorMsg)()}function p(t){return t.prizeList.some((function(t){return t.type===e.PrizeTypes.MONEY||t.type===e.PrizeTypes.RANDOM}))?{errMsg:"奖品中存在「红包」奖项时，不能使用口令",tag:(0,n.getConflictTag)(r.FeaturesMark.红包奖项)}:!t.lotteryTaskSetting.signal&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.输入口令后参与)}function T(t){var r=t.lotteryTaskSetting;return t.showRequiredError&&r.quiz&&!o.default.get(r,"quizData.datas",[]).length?{errMsg:"请设置答题内容",tag:"_gn"}:(0,n.getDefaultErrorMsg)()}function D(t){return(0,a.getConflictErrors)(t,a.conflictMap.答题后参与)}function S(t){return t.showRequiredError&&t.lotteryTaskSetting.questionnaire&&!o.default.get(t.lotteryTaskSetting,"questionnaireData",[]).length?{errMsg:"请设置问卷内容",tag:"_di"}:(0,n.getDefaultErrorMsg)()}function q(t){return!t.lotteryTaskSetting.questionnaire&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.填写问卷后参与)}function m(t){return t.showRequiredError&&t.lotteryTaskSetting.vote&&!t.lotteryTaskSetting.voteData?{errMsg:"请设置投票内容",tag:"_dq"}:(0,n.getDefaultErrorMsg)()}function w(t){return(0,a.getConflictErrors)(t,a.conflictMap.投票后参与)}function C(t){return!t.lotteryTaskSetting.task&&R(t)?z():(0,a.getConflictErrors)(t,a.conflictMap.参与前完成指定任务)}function h(t){return t.showRequiredError&&t.lotteryTaskSetting.task&&!t.lotteryTaskSetting.taskData?{errMsg:"请设置任务",tag:"_dv"}:(0,n.getDefaultErrorMsg)()}function v(t){return t.lotteryTaskSetting.official?t.showRequiredError&&!t.lotteryTaskSetting.keyword?{errMsg:"请填写关键词",tag:"_dw"}:o.default.get(t,"lotteryTaskSetting.keyword.length",0)>24?{errMsg:"关键词不能超过 24 个字",tag:"_dx"}:(0,n.getDefaultErrorMsg)():(0,n.getDefaultErrorMsg)()}function _(t){return t.lotteryTaskSetting.signal?t.showRequiredError&&!t.lotteryTaskSetting.signalContent?{errMsg:"请填写口令内容",tag:"_dy"}:o.default.get(t,"lotteryTaskSetting.signalContent.length")>20?{errMsg:"口令内容不能超过 20 个字",tag:"_dz"}:(0,n.getDefaultErrorMsg)():(0,n.getDefaultErrorMsg)()}function R(t){return"ontime"===t.drawSetting.type&&t.drawSetting.allowMultiJoin}function z(){return{errMsg:"请将「单人参与次数限制」设为「每人限抽 1 次」后再开启此功能",tag:r.FeaturesMark.允许重复参与抽奖}}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/LotteryTaskSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/common.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.closeMesg=function(e){if(e.indexOf(n.OptionNames.ontime)>-1)return"不支持与「".concat(n.OptionNames.ontime,"」同时开启");if(e.indexOf(n.OptionNames.onUserCount)>-1)return"不支持与「".concat(n.OptionNames.onUserCount,"」同时开启");return e&&"关闭".concat(e,"后才能开启")},exports.getConflictTag=void 0,exports.getDefaultErrorMsg=function(){return{errMsg:"",tag:""}},exports.splicingOptionsName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return"「".concat(e,"」")})).join("、")};var e,t=(e=require("lodash"))&&e.__esModule?e:{default:e},n=require("@models/create");var r=function(e){return e["功能冲突"]="zz",e}(r||{});exports.getConflictTag=t.default.curry((function(e,t){return"_".concat(e).concat(t.slice(1))}))(r.功能冲突);
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/common.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/conflictHandler.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conflictMap=void 0,exports.getConflictErrors=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],u="",o=n.default.pick(i,e);return n.default.forEach(o,(function(e){e&&e.match(t)&&(u+=(0,a.getConflictTag)(e.tag),r.push(e.name))})),{errMsg:(0,a.closeMesg)((0,a.splicingOptionsName)(r)),tag:u}};var t,e=require("@/models/create"),a=require("./common"),n=(t=require("lodash"))&&t.__esModule?t:{default:t},r=require("@/models/lottery");exports.conflictMap={"答题后参与":["即抽即中","先审核再参与","参与后可助力增加助力值","设置打卡任务","邀请好友参与","参与者可邀请好友组队","加企业微信后参与","填写问卷后参与","输入口令后参与","参与前完成指定任务","投票后参与","玩游戏参与抽奖","从铁粉中抽取","指定区域用户可参与"],"先审核再参与":["即抽即中","仅群成员可参与","加企业微信后参与","投票后参与","答题后参与","玩游戏参与抽奖","参与前完成指定任务","公众号粉丝可参与","输入口令后参与","填写问卷后参与","核验资格后参与"],"指定区域用户可参与":["投票后参与","答题后参与","玩游戏参与抽奖","参与前完成指定任务"],"加企业微信后参与":["参与者可邀请好友组队","先审核再参与","仅群成员可参与","玩游戏参与抽奖","核验资格后参与","公众号粉丝可参与","输入口令后参与","参与前完成指定任务","填写问卷后参与","投票后参与","答题后参与"],"玩游戏参与抽奖":["即抽即中","先审核再参与","参与后可助力增加助力值","设置打卡任务","邀请好友参与","参与者可邀请好友组队","加企业微信后参与","仅群成员可参与","核验资格后参与","公众号粉丝可参与","输入口令后参与","参与前完成指定任务","填写问卷后参与","投票后参与","答题后参与","指定区域用户可参与"],"核验资格后参与":["先审核再参与","参与者可邀请好友组队","加企业微信后参与","仅群成员可参与","公众号粉丝可参与","参与前完成指定任务","投票后参与","玩游戏参与抽奖","从铁粉中抽取"],"仅群成员可参与":["参与者可邀请好友组队","参与前完成指定任务","先审核再参与","加企业微信后参与","玩游戏参与抽奖","核验资格后参与","公众号粉丝可参与","投票后参与"],"公众号粉丝可参与":["先审核再参与","参与者可邀请好友组队","加企业微信后参与","核验资格后参与","投票后参与","仅群成员可参与","参与前完成指定任务","玩游戏参与抽奖","从铁粉中抽取"],"输入口令后参与":["先审核再参与","加企业微信后参与","投票后参与","参与前完成指定任务","答题后参与","玩游戏参与抽奖","从铁粉中抽取"],"填写问卷后参与":["先审核再参与","加企业微信后参与","投票后参与","参与前完成指定任务","答题后参与","玩游戏参与抽奖","从铁粉中抽取"],"投票后参与":["即抽即中","先审核再参与","邀请好友参与","参与者可邀请好友组队","加企业微信后参与","核验资格后参与","仅群成员可参与","填写问卷后参与","公众号粉丝可参与","输入口令后参与","参与前完成指定任务","答题后参与","玩游戏参与抽奖","从铁粉中抽取","设置打卡任务","指定区域用户可参与"],"参与前完成指定任务":["先审核再参与","核验资格后参与","填写问卷后参与","加企业微信后参与","投票后参与","公众号粉丝可参与","输入口令后参与","答题后参与","玩游戏参与抽奖","从铁粉中抽取","指定区域用户可参与","仅群成员可参与"],"从铁粉中抽取":["即抽即中","参与者可邀请好友组队","核验资格后参与","公众号粉丝可参与","输入口令后参与","参与前完成指定任务","填写问卷后参与","投票后参与","答题后参与"],"设置打卡任务":["即抽即中","邀请好友参与","答题后参与","玩游戏参与抽奖","参与后可助力增加助力值","投票后参与"],"参与后可助力增加助力值":["即抽即中","邀请好友参与","答题后参与","玩游戏参与抽奖","设置打卡任务"],"邀请好友参与":["即抽即中","参与后可助力增加助力值","设置打卡任务","参与者可邀请好友组队","参与人页面隐藏分享按钮","投票后参与","答题后参与","玩游戏参与抽奖"],"参与者可邀请好友组队":["即抽即中","按人数开奖","邀请好友参与","加企业微信后参与","参与人页面隐藏分享按钮","核验资格后参与","投票后参与","仅群成员可参与","公众号粉丝可参与","答题后参与","玩游戏参与抽奖","从铁粉中抽取"],"参与人页面隐藏分享按钮":["邀请好友参与","参与者可邀请好友组队"],"即抽即中":["先审核再参与","从铁粉中抽取","玩游戏参与抽奖","答题后参与","投票后参与","设置打卡任务","邀请好友参与","参与者可邀请好友组队","参与后可助力增加助力值"],"按人数开奖":["参与者可邀请好友组队"]};var i={"先审核再参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.auditEnable")},tag:e.FeaturesMark.先审核再参与,name:e.OptionNames.auditEnable},"参与后可助力增加助力值":{match:function(t){return n.default.get(t,"shareSetting.assistInfo.open",!1)},tag:e.FeaturesMark.参与后可助力增加助力值,name:e.OptionNames.assist},"设置打卡任务":{match:function(t){return n.default.get(t,"shareSetting.assistInfo.activeOpen",!1)},tag:e.FeaturesMark.设置打卡任务,name:e.OptionNames.activeTask},"邀请好友参与":{match:function(t){return n.default.get(t,"shareSetting.invite_friend")},tag:e.FeaturesMark.邀请好友参与,name:e.OptionNames.inviteFriend},"参与者可邀请好友组队":{match:function(t){return n.default.get(t,"shareSetting.teamUp")},tag:e.FeaturesMark.组队按钮,name:e.OptionNames.teamUp},"加企业微信后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.companyEnable")},tag:e.FeaturesMark.加企业微信后参与,name:e.OptionNames.company},"填写问卷后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.questionnaire")},tag:e.FeaturesMark.问卷开关,name:e.OptionNames.questionnaire},"输入口令后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.signal")},tag:e.FeaturesMark.口令按钮,name:e.OptionNames.signal},"参与前完成指定任务":{match:function(t){return n.default.get(t,"lotteryTaskSetting.task")},tag:e.FeaturesMark.前置任务开关,name:e.OptionNames.task},"投票后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.vote")},tag:e.FeaturesMark.投票开关,name:e.OptionNames.vote},"玩游戏参与抽奖":{match:function(t){return n.default.get(t,"lotteryTaskSetting.game")},tag:e.FeaturesMark.玩游戏参与抽奖开关,name:e.OptionNames.game},"从铁粉中抽取":{match:function(t){return n.default.get(t,"limitSetting.open")},tag:e.FeaturesMark.从铁粉中抽取,name:e.OptionNames.limit},"指定区域用户可参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.limitedArea")},tag:e.FeaturesMark.指定区域用户可参与,name:e.OptionNames.limitedArea},"仅群成员可参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.group")},tag:e.FeaturesMark.群抽奖按钮,name:e.OptionNames.group},"答题后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.quiz")},tag:e.FeaturesMark.答题开关,name:e.OptionNames.quiz},"公众号粉丝可参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.official")},tag:e.FeaturesMark.公众号抽奖按钮,name:e.OptionNames.official},"核验资格后参与":{match:function(t){return n.default.get(t,"lotteryTaskSetting.friend")},tag:e.FeaturesMark.核验资格后参与,name:e.OptionNames.friend},"参与人页面隐藏分享按钮":{match:function(t){return n.default.get(t,"shareSetting.disableShare")},tag:e.FeaturesMark.分享按钮,name:e.OptionNames.share},"即抽即中":{match:function(t){var e;return(null===(e=t.drawSetting)||void 0===e?void 0:e.type)===r.DrawTypes.ONTIME},tag:e.FeaturesMark.即抽即中,name:e.OptionNames.ontime},"按人数开奖":{match:function(t){var e;return(null===(e=t.drawSetting)||void 0===e?void 0:e.type)===r.DrawTypes.USER},tag:e.FeaturesMark.按人数开奖,name:e.OptionNames.onUserCount}};
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/conflictHandler.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/contactSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContactSettingErrors=function(e){return{idList:n(e),fillInfo:s(e)}},require("../../@babel/runtime/helpers/Arrayincludes");var e,r=require("../../models/create"),t=require("../../models/lottery"),i=(e=require("lodash"))&&e.__esModule?e:{default:e},o=require("./common");function n(e){return!e.showRequiredError||!e.prizeList.some((function(e){return e.giveType===r.PrizeGiveTypes.CONTACT_ME&&[t.PrizeTypes.REAL,t.PrizeTypes.COUPON].includes(e.type)}))||e.contactSetting.idList&&e.contactSetting.idList.length?(0,o.getDefaultErrorMsg)():{errMsg:"请设置领奖联系方式",tag:"_ea"}}function s(e){var n,s;return e.showRequiredError&&e.prizeList.some((function(e){return e.giveType===r.PrizeGiveTypes.WINNER_INFO&&e.type===t.PrizeTypes.REAL}))&&i.default.isEmpty(null===(n=e.contactSetting)||void 0===n||null===(s=n.fillInfo)||void 0===s?void 0:s.form_data)?{errMsg:"请设置领奖说明",tag:"_eb"}:(0,o.getDefaultErrorMsg)()}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/contactSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/drawSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDrawSettingErrors=function(e){return{allowMultiJoin:u(e),drawTime:g(e),timeOfReal:s(e),startTimeOfReal:(0,n.getDefaultErrorMsg)(),userCount:l(e),timeOfUser:f(e),userCountOfReal:d(e),totalJoinCount:o(e)}};var e=require("../../models/create"),r=i(require("moment")),t=require("../../models/lottery"),a=i(require("lodash")),n=require("./common");function i(e){return e&&e.__esModule?e:{default:e}}function u(r){if("ontime"===r.drawSetting.type&&r.drawSetting.allowMultiJoin){var t=["limitedArea","group","official","friend","companyEnable","signal","questionnaire","task"].find((function(e){return!0===r.lotteryTaskSetting[e]}));if(t)return{errMsg:"不能与「".concat(e.OptionNames[t],"」同时开启"),tag:e.FeaturesMark[t]}}return(0,n.getDefaultErrorMsg)()}function o(e){var r=e.drawSetting,t=r.allowMultiJoin,i=r.totalJoinCount;if("ontime"!==e.drawSetting.type||!t)return(0,n.getDefaultErrorMsg)();if(e.showRequiredError&&!i)return{errMsg:"请输入抽奖总参与次数",tag:""};if(!e.drawSetting.totalJoinCount)return(0,n.getDefaultErrorMsg)();if(!a.default.isNumber(i))return{errMsg:"请输入数字",tag:""};var u=w(e.prizeList);return i<u?{errMsg:"最大抽奖次数不能小于奖品数量 ".concat(u),tag:""}:(0,n.getDefaultErrorMsg)()}function g(a){return a.drawSetting.type!==t.DrawTypes.TIME||a.type===e.LotteryTypes.SELF_HELP?(0,n.getDefaultErrorMsg)():a.showRequiredError&&!a.drawSetting.time?{errMsg:"请设置开奖时间",tag:"_ci"}:M(a.drawSetting.time)?{errMsg:"不能比当前时间早",tag:"_cj"}:a.type===e.LotteryTypes.SMART&&(0,r.default)(a.drawSetting.time).isBefore((0,r.default)().add(2,"hour"),"minute")?{errMsg:"智能推广抽奖需大于 2 小时",tag:"_ck"}:(0,n.getDefaultErrorMsg)()}function s(a){var i;if(a.drawSetting.type!==t.DrawTypes.ONTIME||a.type===e.LotteryTypes.SELF_HELP)return(0,n.getDefaultErrorMsg)();if(a.showRequiredError&&!a.drawSetting.timeOfReal)return{errMsg:"请设置截止时间",tag:"_cl"};if(M(a.drawSetting.timeOfReal))return{errMsg:"不能比当前时间早",tag:"_cm"};var u=null===(i=a.drawSetting)||void 0===i?void 0:i.startTimeOfReal;return u&&(0,r.default)(u).add(10,"minutes").isAfter((0,r.default)(a.drawSetting.timeOfReal))?{errMsg:"活动开始时间和截止时间需要间隔大于 10 分钟",tag:"_kc"}:(0,n.getDefaultErrorMsg)()}function l(r){var i;return r.drawSetting.type!==t.DrawTypes.USER||r.type===e.LotteryTypes.SELF_HELP?(0,n.getDefaultErrorMsg)():[r.showRequiredError,!r.drawSetting.userCount].every(Boolean)?{errMsg:"请填写开奖人数",tag:"_cn"}:a.default.isInteger(r.drawSetting.userCount)?r.drawSetting.userCount?r.drawSetting.userCount>99999?{errMsg:"人数不能多于 99999 人",tag:"_co"}:r.drawSetting.userCount<w(r.prizeList)?{errMsg:"不能少于奖品数量",tag:"_cp"}:[(0,e.isPrizeLockEnable)(r),r.drawSetting.userCount<Number((null===(i=r.prizeList[0])||void 0===i?void 0:i.unlockCount)||0)].every(Boolean)?{errMsg:"不能少于一等奖解锁人数",tag:"_lh"}:(0,n.getDefaultErrorMsg)():(0,n.getDefaultErrorMsg)():{errMsg:"开奖人数必须是整数",tag:"_ig"}}function f(a){return a.drawSetting.type!==t.DrawTypes.USER||a.type===e.LotteryTypes.SELF_HELP?(0,n.getDefaultErrorMsg)():M(a.drawSetting.timeOfUser)?{errMsg:"不能比当前时间早",tag:"_cu"}:a.type===e.LotteryTypes.SMART&&(0,r.default)(a.drawSetting.timeOfUser).isBefore((0,r.default)().add(2,"hour"),"minute")?{errMsg:"智能推广抽奖需大于 2 小时",tag:"_cv"}:(0,n.getDefaultErrorMsg)()}function d(r){return r.drawSetting.type!==t.DrawTypes.ONTIME||r.drawSetting.allowMultiJoin||r.type===e.LotteryTypes.SELF_HELP?(0,n.getDefaultErrorMsg)():r.showRequiredError&&!r.drawSetting.userCountOfReal?{errMsg:"请填写人数上限",tag:"_cq"}:a.default.isInteger(r.drawSetting.userCountOfReal)?r.drawSetting.userCountOfReal?r.drawSetting.userCountOfReal>99999?{errMsg:"人数不能多于 99999 人",tag:"_cr"}:r.drawSetting.userCountOfReal<w(r.prizeList)?{errMsg:"不能少于奖品数量",tag:"_cs"}:(0,n.getDefaultErrorMsg)():(0,n.getDefaultErrorMsg)():{errMsg:"人数上限必须是整数",tag:"_ih"}}function M(e){return!!e&&(0,r.default)(e).isBefore((0,r.default)())}function w(e){return e.reduce((function(e,r){return e+r.count}),0)}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/drawSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/imageText.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageTextErrors=function(e){var i=e.imageTextData||[];if(!t.default.isArray(i))return(0,a.info)("list：".concat(i,"，不是一个数组"),i),(0,o.getDefaultErrorMsg)();var l,s=r(i);try{for(s.s();!(l=s.n()).done;){var n=l.value;if(!(n.type!==u.ImgTextType.COPY||n.title&&n.value))return{errMsg:"你还有一键复制框未填写完整",tag:"_jg"}}}catch(e){s.e(e)}finally{s.f()}return(0,o.getDefaultErrorMsg)()};var e,r=require("../../@babel/runtime/helpers/createForOfIteratorHelper"),t=(e=require("lodash"))&&e.__esModule?e:{default:e},a=require("@mina-modules/mina-sentry"),u=require("../../models/create"),o=require("./common");
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/imageText.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.errors;o(t,e);try{return s(r)||l(r)||c(r)||g(r)||u(r)||d(r)||f(r)||p(r,e)||k(t)}catch(t){(0,a.error)("checkError",t)}return""},require("../../@babel/runtime/helpers/Arrayincludes");var t=require("../../@babel/runtime/helpers/createForOfIteratorHelper"),e=require("../../utils/tools"),r=require("../../models/create"),a=require("@mina-modules/mina-sentry"),n=require("../../utils/wechatAPI");function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=t.errors;return y(a),a.contactSetting.idList.errMsg&&(0,r.appendGaCreateLabel)(a.contactSetting.idList.tag),a.contactSetting.fillInfo.errMsg&&(0,r.appendGaCreateLabel)(a.contactSetting.fillInfo.tag),T(a),a.lotteryDesc.desc.errMsg&&(0,r.appendGaCreateLabel)(a.lotteryDesc.desc.tag),a.imageTextData.errMsg&&(0,r.appendGaCreateLabel)(a.imageTextData.tag),a.limitSetting.count.errMsg&&(0,r.appendGaCreateLabel)(a.limitSetting.count.tag),M(a),S(a,e),""}function i(){return new Promise((function(t){var r=(0,e.getCurrentPage)();if(!r.unfold)return r.setData({unfold:!0}),t();t()}))}function s(r){var a,n=-1,o=t(r.prizeList);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(n++,i.name.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-name",n),i.name.errMsg;if(i.codes.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-count",n),i.codes.errMsg;if(i.count.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-count",n),i.count.errMsg;if(i.money.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-money",n),i.money.errMsg;if(i.appid.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-appid",n),i.appid.errMsg;if(i.minaPath.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-minapath",n),i.minaPath.errMsg;if(i.unlockCount.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-unlock-count",n),i.unlockCount.errMsg;if(i.receiveInfoAppId.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-receive-info-app-id",n),i.receiveInfoAppId.errMsg;if(i.receiveInfoAppPath.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .prize-receive-info-app-path",n),i.receiveInfoAppPath.errMsg}}catch(t){o.e(t)}finally{o.f()}}function l(t){return t.contactSetting.idList.errMsg?((0,e.scrollToBy)(".contact-x"),t.contactSetting.idList.errMsg):t.contactSetting.fillInfo.errMsg?((0,e.scrollToBy)(".contact-x"),t.contactSetting.fillInfo.errMsg):void 0}function c(t){var r={allowMultiJoin:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-allow-multi-join")},totalJoinCount:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-total-join-count")},userCount:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-user-count")},userCountOfReal:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-real-count")},drawTime:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-time")},timeOfReal:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-real-time")},timeOfUser:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-user-count")},startTimeOfReal:function(){(0,e.scrollToBy)(".need-auto-scroll >>> .draw-setting-real-start-time")}};for(var a in r){var n,o,i=null===(n=t.drawSetting[a])||void 0===n?void 0:n.errMsg;if(i)return null===(o=r[a])||void 0===o||o.call(r,i),i}}function g(t){if(t.lotteryDesc.desc.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .desc-wrap"),t.lotteryDesc.desc.errMsg}function u(t){if(t.imageTextData.errMsg)return(0,e.scrollToBy)(".image-text"),t.imageTextData.errMsg}function d(t){if(t.limitSetting.count.errMsg)return(0,e.scrollToBy)(".need-auto-scroll >>> .limit-people-count"),t.limitSetting.count.errMsg}function f(t){return t.shareSetting.assistInfo.assistTypes.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .assist-option")})),t.shareSetting.assistInfo.assistTypes.errMsg):t.shareSetting.assistInfo.activeTask.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .active-task-option")})),t.shareSetting.assistInfo.activeTask.errMsg):void 0}function p(t,r){if(t.lotteryTaskSetting.weComGroupCompanyData.errMsg)return i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .wecom-groupchat-company")})),t.lotteryTaskSetting.weComGroupCompanyData.errMsg;if(t.lotteryTaskSetting.taskData.errMsg)return i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .task-setting")})),t.lotteryTaskSetting.taskData.errMsg;var a=function(t,r){if(!r.includes("lotteryTaskSetting.official")&&(t.lotteryTaskSetting.officialId.errMsg||t.lotteryTaskSetting.officialAuthId.errMsg))return i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .official-authorization")})),t.lotteryTaskSetting.officialId.errMsg;if(!r.includes("lotteryTaskSetting.official")&&t.lotteryTaskSetting.keyword.errMsg)return i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .official-keyword")})),t.lotteryTaskSetting.keyword.errMsg}(t,r);return a||(t.lotteryTaskSetting.signalContent.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .signal-content")})),t.lotteryTaskSetting.signalContent.errMsg):t.lotteryTaskSetting.questionnaireData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .questionnaire-data")})),t.lotteryTaskSetting.questionnaireData.errMsg):t.lotteryTaskSetting.voteData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .vote-data")})),t.lotteryTaskSetting.voteData.errMsg):t.lotteryTaskSetting.quizData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .quiz-data")})),t.lotteryTaskSetting.quizData.errMsg):t.lotteryTaskSetting.limitedAreaData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .limited-area-data")})),t.lotteryTaskSetting.limitedAreaData.errMsg):t.lotteryTaskSetting.companyData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .company-data")})),t.lotteryTaskSetting.companyData.errMsg):t.lotteryTaskSetting.auditData.errMsg?(i().then((function(){(0,e.scrollToBy)(".need-auto-scroll >>> .audit-option")})),t.lotteryTaskSetting.auditData.errMsg):void 0)}function y(e){var a,n=t(e.prizeList);try{for(n.s();!(a=n.n()).done;){var o=a.value;o.name.errMsg&&(0,r.appendGaCreateLabel)(o.name.tag),o.count.errMsg&&(0,r.appendGaCreateLabel)(o.count.tag),o.codes.errMsg&&(0,r.appendGaCreateLabel)(o.codes.tag),o.money.errMsg&&(0,r.appendGaCreateLabel)(o.money.tag),o.appid.errMsg&&(0,r.appendGaCreateLabel)(o.appid.tag),o.minaPath.errMsg&&(0,r.appendGaCreateLabel)(o.minaPath.tag),o.unlockCount.errMsg&&(0,r.appendGaCreateLabel)(o.minaPath.tag)}}catch(t){n.e(t)}finally{n.f()}}function T(t){t.drawSetting.userCount.errMsg&&(0,r.appendGaCreateLabel)(t.drawSetting.userCount.tag),t.drawSetting.userCountOfReal.errMsg&&(0,r.appendGaCreateLabel)(t.drawSetting.userCountOfReal.tag),t.drawSetting.drawTime.errMsg&&(0,r.appendGaCreateLabel)(t.drawSetting.drawTime.tag),t.drawSetting.timeOfReal.errMsg&&(0,r.appendGaCreateLabel)(t.drawSetting.timeOfReal.tag)}function M(t){t.shareSetting.assistInfo.open.errMsg&&(0,r.appendGaCreateLabel)(t.shareSetting.assistInfo.open.tag),t.shareSetting.assistInfo.activeTask.errMsg&&(0,r.appendGaCreateLabel)(t.shareSetting.assistInfo.activeTask.tag)}function S(t,e){t.lotteryTaskSetting.weComGroupCompanyData.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.weComGroupCompanyData.tag),t.lotteryTaskSetting.taskData.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.taskData.tag),function(t,e){e.includes("lotteryTaskSetting.official")||!t.lotteryTaskSetting.officialId.errMsg&&!t.lotteryTaskSetting.officialAuthId.errMsg||(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.officialId.tag);!e.includes("lotteryTaskSetting.official")&&t.lotteryTaskSetting.keyword.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.keyword.tag)}(t,e),t.lotteryTaskSetting.signalContent.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.signalContent.tag),t.lotteryTaskSetting.questionnaireData.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.questionnaireData.tag),t.lotteryTaskSetting.voteData.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.voteData.tag),t.lotteryTaskSetting.quizData.errMsg&&(0,r.appendGaCreateLabel)(t.lotteryTaskSetting.quizData.tag)}function k(t){var r;return!t.shareSetting.inviteReward||null!==(r=t.contactSetting.idList)&&void 0!==r&&r.length?"":((0,n.showToast)("邀请好友奖励的联系方式不能为空",{duration:3e3}),(0,e.scrollToBy)(".need-auto-scroll >>> .invite-friend"),"邀请好友奖励的联系方式不能为空")}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/limitSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLimitSettingErrors=function(e){return{open:o(e),count:i(e)}};var e,r=require("./common"),t=(e=require("lodash"))&&e.__esModule?e:{default:e},n=require("./conflictHandler");function o(e){return(0,n.getConflictErrors)(e,n.conflictMap.从铁粉中抽取)}function i(e){var n,o=null===(n=e.limitSetting)||void 0===n?void 0:n.count;return t.default.isInteger(o)?o?(0,r.getDefaultErrorMsg)():{errMsg:"不能为空",tag:""}:{errMsg:"请输入一个整数",tag:""}}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/limitSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/lotteryDesc.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_LENGTH_OF_DESC=void 0,exports.getLotteryDescErrors=function(e){return{desc:t(e)}};var e=require("./common"),r=exports.MAX_LENGTH_OF_DESC=500;function t(t){var o,s;return(null==t||null===(o=t.lotteryDesc)||void 0===o||null===(s=o.desc)||void 0===s?void 0:s.length)>r?{errMsg:"字数不能超过 ".concat(r," 个"),tag:"_ec"}:(0,e.getDefaultErrorMsg)()}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/lotteryDesc.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/prize.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrizeErrors=function(e,o,c,M){var T;return r(r(r(r(r(r(r(r(r(r(T={},i.PrizeTypes.REAL,function(e,r){if(r.editingType!==t.EditingTypes.EDITING)return(0,n.getDefaultErrorMsg)();if(e.type===i.PrizeTypes.MONEY||e.type===i.PrizeTypes.RANDOM)return{tag:"_fd",errMsg:"已发起的红包奖项不支持修改"};if(e.type===i.PrizeTypes.SHOP)return{tag:"_fc",errMsg:"已发起的商城奖品不支持修改"};return(0,n.getDefaultErrorMsg)()}(e,o)),i.PrizeTypes.COUPON,function(e,r){if(r.editingType!==t.EditingTypes.EDITING)return(0,n.getDefaultErrorMsg)();if(e.type===i.PrizeTypes.MONEY||e.type===i.PrizeTypes.RANDOM)return{tag:"_gi",errMsg:"已发起的红包奖项不支持修改"};if(e.type===i.PrizeTypes.SHOP)return{tag:"_gj",errMsg:"已发起的商城奖品不支持修改"};return(0,n.getDefaultErrorMsg)()}(e,o)),i.PrizeTypes.MONEY,f(e,o)),i.PrizeTypes.RANDOM,f(e,o)),i.PrizeTypes.VIRTUAL,l(e,o)),i.PrizeTypes.SHOP,function(e,r){if(e.type!==i.PrizeTypes.SHOP&&r.editingType===t.EditingTypes.EDITING)return{errMsg:"已发起的抽奖不支持修改为商城奖品",tag:"_ej"};if(r.prizeList.some((function(r){return(r.type===i.PrizeTypes.MONEY||r.type===i.PrizeTypes.RANDOM)&&r!==e})))return{errMsg:"已经存在「红包」奖品，不支持继续添加商城奖品",tag:(0,n.getConflictTag)(t.FeaturesMark.红包奖项)};var a=[],s="";r.shareSetting.teamUp&&(s+=(0,n.getConflictTag)(t.FeaturesMark.组队按钮),a.push(t.OptionNames.teamUp));return{errMsg:(0,n.closeMesg)((0,n.splicingOptionsName)(a)),tag:s}}(e,o)),i.PrizeTypes.COVER,function(e,r){return l(e,r)}(e,o)),"name",function(e,r){if(e.type===i.PrizeTypes.MONEY||e.type===i.PrizeTypes.RANDOM||e.type===i.PrizeTypes.SHOP)return(0,n.getDefaultErrorMsg)();if(r.showRequiredError&&!e.name)return{errMsg:"请填写奖品名称",tag:"_em"};if((0,a.getCnEnLength)(e.name||"")>48)return{errMsg:"奖品名称不能超过 24 个字",tag:"_en"};return(0,n.getDefaultErrorMsg)()}(e,o)),"count",function(e,t){var a=r(r(r(r(r(r({},i.PrizeTypes.REAL,"奖品份数"),i.PrizeTypes.COUPON,"优惠券数量"),i.PrizeTypes.MONEY,"红包数量"),i.PrizeTypes.RANDOM,"红包数量"),i.PrizeTypes.VIRTUAL,"奖品份数"),i.PrizeTypes.SHOP,"奖品份数"),s=(g=null===(o=getApp().globalData.userProfile)||void 0===o?void 0:o.max_prize_count,g||9999);var o,g;if(!e.type)return(0,n.getDefaultErrorMsg)();if(t.showRequiredError&&!e.count)return{errMsg:"请填写".concat(a[e.type]),tag:"_eo"};if(!e.count)return(0,n.getDefaultErrorMsg)();if(!u.default.isInteger(e.count))return{errMsg:"".concat(a[e.type],"必须是整数"),tag:"_if"};var p=function(){var e;return(null===(e=t.selfHelpData)||void 0===e?void 0:e.purchase_data.prize_count)||0};if(e.type===i.PrizeTypes.COUPON&&p()&&e.count>p())return{errMsg:"".concat(a[e.type],"不能超过 ").concat(p()," 个"),tag:"_ep"};if(e.count>s)return{errMsg:"".concat(a[e.type],"不能超过 ").concat(s," 个"),tag:"_eq"};return(0,n.getDefaultErrorMsg)()}(e,o)),"money",function(e,r){if(e.type&&![i.PrizeTypes.MONEY,i.PrizeTypes.RANDOM].includes(e.type))return(0,n.getDefaultErrorMsg)();if(r.showRequiredError&&!e.money)return{errMsg:"请填写红包金额",tag:"_er"};if(!e.money)return(0,n.getDefaultErrorMsg)();if(!+e.money)return{errMsg:"红包金额错误",tag:"_fe"};if(e.redPacketType===t.RedPacketTypes.NORMAL&&e.money<.3)return{errMsg:"单个红包金额不能少于 0.3 元",tag:"_es"};if(e.redPacketType===t.RedPacketTypes.RANDOM&&e.money/((null==e?void 0:e.count)||1)<.3)return{errMsg:"单个红包金额不能少于 0.3 元",tag:"_eu"};var a=(0,s.getUserMaxRedPacketAmount)();if(r.prizeList.reduce((function(e,r){return e+function(e){var r=0;if(e.type!==i.PrizeTypes.MONEY&&e.type!==i.PrizeTypes.RANDOM)return r;e.redPacketType===t.RedPacketTypes.NORMAL&&e.count&&e.money&&(r=e.count*e.money);e.redPacketType===t.RedPacketTypes.RANDOM&&e.money&&(r=e.money);return r}(r)}),0)>a)return{errMsg:"总金额不能超过 ".concat(a," 元，详询客服"),tag:"_ev"};return(0,n.getDefaultErrorMsg)()}(e,o)),r(r(r(r(r(r(T,"codes",function(e,r){if(e.type!==i.PrizeTypes.VIRTUAL)return(0,n.getDefaultErrorMsg)();if(r.showRequiredError&&!e.count)return{errMsg:"请添加兑换码",tag:"_ew"};return(0,n.getDefaultErrorMsg)()}(e,o)),"appid",function(e,r){if(r.showRequiredError&&(0,t.isMinaPathLottery)(e.type,e.giveType)&&!e.appid)return{errMsg:"请填写小程序 AppID",tag:"_ld"};return(0,n.getDefaultErrorMsg)()}(e,o)),"minaPath",function(e,r){if((0,t.isMinaPathLottery)(e.type,e.giveType)){var i=e.minaPath||"";try{(0,p.validateMinaPath)(i,{required:r.showRequiredError})}catch(e){var a;return{errMsg:e.message,tag:"_lk"+(null===(a=e.message)||void 0===a?void 0:a.length)}}}return(0,n.getDefaultErrorMsg)()}(e,o)),"unlockCount",function(e,r,i,a){var s=a.length,u="number"==typeof e.unlockCount,o=(0,t.isPrizeLockEnable)(r),p=e.unlockCount||0;if([1===s,o].every(Boolean))return{errMsg:"增加二等奖项，即可设置一等奖解锁人数",tag:"lj"};if(![o,i<s-1].every(Boolean))return(0,n.getDefaultErrorMsg)();if([!u,r.showRequiredError].every(Boolean))return{errMsg:"请填写奖品解锁人数",tag:"_lf"};if(u){if(p>9999)return{errMsg:"解锁人数不能超过 9999",tag:"_li"};if(i>0){var y=a[i-1];if(p>=((null==y?void 0:y.unlockCount)||0)){var f=(0,g.numberToChinese)(i);return{errMsg:"必须小于".concat(f,"等奖解锁人数"),tag:"_lg"}}}}return(0,n.getDefaultErrorMsg)()}(e,o,c,M)),"receiveInfoAppId",function(e,r){if(r.showRequiredError&&y(e))try{var t,i;(0,p.validateMinaAppId)(null===(t=e.virtualPrizeInfo)||void 0===t||null===(i=t.receive_info)||void 0===i?void 0:i.appid)}catch(e){return{errMsg:e.message,tag:"pm_id"+e.message.length}}return(0,n.getDefaultErrorMsg)()}(e,o)),"receiveInfoAppPath",function(e,r){if(r.showRequiredError&&y(e))try{var t,i;(0,p.validateMinaPath)(null===(t=e.virtualPrizeInfo)||void 0===t||null===(i=t.receive_info)||void 0===i?void 0:i.apppath)}catch(e){return{errMsg:e.message,tag:"pm_path"+e.message.length}}return(0,n.getDefaultErrorMsg)()}(e,o))},exports.getPrizeTotalCountError=function(e){if(e.prizeList.length>=o.MAX_PRIZE_COUNT_NORMAL)return{errMsg:"奖项数量不能超过 ".concat(o.MAX_PRIZE_COUNT_NORMAL," 个"),tag:"_eb"};return(0,n.getDefaultErrorMsg)()},require("../../@babel/runtime/helpers/Arrayincludes");var e,r=require("../../@babel/runtime/helpers/defineProperty"),t=require("../../models/create"),i=require("../../models/lottery"),n=require("./common"),a=require("../../utils/tools"),s=require("../../utils/user"),u=(e=require("lodash"))&&e.__esModule?e:{default:e},o=require("../../constant"),g=require("@utils/format"),p=require("@utils/validator");function y(e){var r,t;return"mina"===(null===(r=e.virtualPrizeInfo)||void 0===r||null===(t=r.receive_info)||void 0===t?void 0:t.type)}function f(e,r){if(r.editingType===t.EditingTypes.EDITING&&e.type===i.PrizeTypes.SHOP)return{tag:"_fh",errMsg:"已发起的商城奖品不支持修改"};if(e.type!==i.PrizeTypes.MONEY&&e.type!==i.PrizeTypes.RANDOM&&r.editingType===t.EditingTypes.EDITING)return{tag:"_ee",errMsg:"已发起的抽奖不支持修改为红包奖项"};if(r.prizeList.some((function(r){return r.type===i.PrizeTypes.SHOP&&r!==e})))return{tag:(0,n.getConflictTag)(t.FeaturesMark.商城奖品),errMsg:"已经存在「商城」奖品，不支持继续添加红包奖品"};var a=[],s="";return r.shareSetting.teamUp&&(s+=(0,n.getConflictTag)(t.FeaturesMark.组队按钮),a.push(t.OptionNames.teamUp)),r.lotteryTaskSetting.signal&&(s+=(0,n.getConflictTag)(t.FeaturesMark.口令按钮),a.push(t.OptionNames.signal)),{tag:s,errMsg:(0,n.closeMesg)((0,n.splicingOptionsName)(a))}}function l(e,r){if(r.editingType===t.EditingTypes.EDITING&&(e.type===i.PrizeTypes.MONEY||e.type===i.PrizeTypes.RANDOM))return{errMsg:"已发起的红包奖项不支持修改",tag:"_fg"};if(r.editingType===t.EditingTypes.EDITING&&e.type===i.PrizeTypes.SHOP)return{errMsg:"已发起的商城奖品不支持修改",tag:"_fi"};var a=[],s="";return r.shareSetting.teamUp&&(s+=(0,n.getConflictTag)(t.FeaturesMark.组队按钮),a.push(t.OptionNames.teamUp)),{errMsg:(0,n.closeMesg)((0,n.splicingOptionsName)(a)),tag:s}}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/prize.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/proSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getProSettingErrors=function(e){return{open:t(e)}};var e=require("../../models/create"),r=require("./common");function t(t){return t.editingType===e.EditingTypes.EDITING?{errMsg:"请点击保存修改，在抽奖底部开启高级功能",tag:"_ed"}:(0,r.getDefaultErrorMsg)()}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/proSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/errorsHandler/shareSetting.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShareSettingErrors=function(e){return{invite_friend:u(e),teamUp:l(e),disableShare:c(e),assistInfo:{open:o(e),assistTypes:a(e),activeOpen:i(e),activeTask:s(e)}}};var e=require("../../models/create"),r=require("../../models/lottery"),t=require("./common"),n=require("./conflictHandler");function i(r){return r.type===e.LotteryTypes.SELF_HELP?{errMsg:"不支持自助推广",tag:""}:(0,n.getConflictErrors)(r,n.conflictMap.设置打卡任务)}function s(e){var r,n,i,s,o=null===(r=e.shareSetting)||void 0===r||null===(n=r.assistInfo)||void 0===n?void 0:n.activeTask;return!e.showRequiredError||null===(i=e.shareSetting)||void 0===i||null===(s=i.assistInfo)||void 0===s||!s.activeOpen||null!=o&&o.type?(0,t.getDefaultErrorMsg)():{errMsg:"请设置打卡任务",tag:""}}function o(r){return r.type===e.LotteryTypes.SELF_HELP?{errMsg:"不支持自助推广",tag:""}:(0,n.getConflictErrors)(r,n.conflictMap.参与后可助力增加助力值)}function a(e){var n,i,s,o,a=(null===(n=e.shareSetting)||void 0===n||null===(i=n.assistInfo)||void 0===i?void 0:i.assistTypes)||[];return e.showRequiredError&&null!==(s=e.shareSetting)&&void 0!==s&&null!==(o=s.assistInfo)&&void 0!==o&&o.open&&!a.length?{errMsg:"请设置助力任务",tag:""}:function(e){var n=function(e,r){var t,n;return((null===(t=e.shareSetting)||void 0===t||null===(n=t.assistInfo)||void 0===n?void 0:n.assistTypes)||[]).find((function(e){return e.type===r}))}(e,r.AssistTypes.GZH);if(n)return n.official_id?n.reply_keyword?(0,t.getDefaultErrorMsg)():{errMsg:"请在助力任务中设置公众号回复关键词",tag:""}:{errMsg:"请在助力任务中关联公众号",tag:""}}(e)||(0,t.getDefaultErrorMsg)()}function u(e){return(0,n.getConflictErrors)(e,n.conflictMap.邀请好友参与)}function l(i){return i.prizeList.some((function(e){return e.type===r.PrizeTypes.MONEY||r.PrizeTypes.RANDOM}))?{errMsg:"奖品中存在「红包」奖项时，不能开启邀请好友组队",tag:(0,t.getConflictTag)(e.FeaturesMark.红包奖项)}:i.prizeList.some((function(e){return e.type===r.PrizeTypes.VIRTUAL}))?{errMsg:"奖品中存在「兑换码」奖项时，不能开启邀请好友组队",tag:(0,t.getConflictTag)(e.FeaturesMark.兑换码奖项)}:i.prizeList.some((function(e){return e.type===r.PrizeTypes.SHOP}))?{errMsg:"奖品中存在「商城奖品」奖项时，不能开启邀请好友组队",tag:(0,t.getConflictTag)(e.FeaturesMark.商城奖品)}:(0,n.getConflictErrors)(i,n.conflictMap.参与者可邀请好友组队)}function c(e){return(0,n.getConflictErrors)(e,n.conflictMap.参与人页面隐藏分享按钮)}
},{isPage:false,isComponent:false,currentFile:'store/errorsHandler/shareSetting.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=require("@libs/redux"),t=(e=require("./reducers/index"))&&e.__esModule?e:{default:e};var u=(0,r.legacy_createStore)(t.default);exports.default=u;
},{isPage:false,isComponent:false,currentFile:'store/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/reducers/gameData/gallery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={url:null,index:null};exports.default={cacheGallery:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GALLERY_URL":return e.url=t.data,e.index=t.index,e;case"INIT_GALLERY":return e.url=null,e.index=null,e;default:return l}}};
},{isPage:false,isComponent:false,currentFile:'store/reducers/gameData/gallery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/reducers/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../@babel/runtime/helpers/objectSpread2"),r=require("../../libs/redux"),t=l(require("./gameData/gallery")),u=l(require("../../store/reducers/lottery"));function l(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,r.combineReducers)(e(e({},t.default),{},{lottery:u.default}));
},{isPage:false,isComponent:false,currentFile:'store/reducers/index.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("store/reducers/lottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getInitPrize=function(){return g.default.cloneDeep(M)},exports.getInitState=I,exports.getInitStateMarketing=function(e){var t=e.drawType,r=e.type,i=I();return a(a({},i),{},{drawSetting:a(a({},i.drawSetting),{},{type:t}),marketing:r})};var e,t,r=require("../../@babel/runtime/helpers/toConsumableArray"),a=require("../../@babel/runtime/helpers/objectSpread2"),i=require("../../@babel/runtime/helpers/defineProperty"),n=require("../actions/lottery"),o=require("../../models/create"),s=require("../../models/lottery"),g=(e=require("lodash"))&&e.__esModule?e:{default:e},u=require("../errorsHandler/contactSetting"),l=require("../errorsHandler/drawSetting"),p=require("../errorsHandler/lotteryDesc"),S=require("../errorsHandler/LotteryTaskSetting"),T=require("../errorsHandler/prize"),d=require("../errorsHandler/proSetting"),c=require("../errorsHandler/shareSetting"),f=require("../../constant"),y=require("../errorsHandler/limitSetting"),E=require("../errorsHandler/imageText");var M={type:s.PrizeTypes.REAL,image:"",name:"",codes:[],count:0,giveType:o.PrizeGiveTypes.MAILING,redPacketType:o.RedPacketTypes.RANDOM,money:0,goodsId:""},m=(i(i(i(i(i(i(i(i(i(i(t={},s.PrizeTypes.MONEY,{errMsg:"",tag:""}),s.PrizeTypes.RANDOM,{errMsg:"",tag:""}),s.PrizeTypes.VIRTUAL,{errMsg:"",tag:""}),s.PrizeTypes.SHOP,{errMsg:"",tag:""}),s.PrizeTypes.REAL,{errMsg:"",tag:""}),s.PrizeTypes.COUPON,{errMsg:"",tag:""}),s.PrizeTypes.COVER,{errMsg:"",tag:""}),"name",{errMsg:"",tag:""}),"count",{errMsg:"",tag:""}),"money",{errMsg:"",tag:""}),i(i(i(i(i(i(t,"codes",{errMsg:"",tag:""}),"appid",{errMsg:"",tag:""}),"minaPath",{errMsg:"",tag:""}),"unlockCount",{errMsg:"",tag:""}),"receiveInfoAppId",{errMsg:"",tag:""}),"receiveInfoAppPath",{errMsg:"",tag:""})),_={allowToPublic:!1,allowDailyMultiJoin:!1,marketing:null,testMode:!1,created:!1,template:"",selfHelpType:null,selfHelpData:null,showRequiredError:!1,type:o.LotteryTypes.NORMAL,editingType:"",id:"",sid:"",prizeList:[M],hasOtherPeople:!1,homepageSetting:{isShow:!1,isRecommend:!1,isFansOnly:!1},limitSetting:{count:1,open:!1},drawSetting:{type:s.DrawTypes.TIME,time:"",userCount:0,userCountOfReal:0,timeOfUser:"",timeOfReal:"",startTimeOfReal:"",allowMultiJoin:!1,allowRepeatLucky:!1,totalJoinCount:0,multiJoinTasks:[]},lotteryDesc:{kefuData:{id:"",image:"",title:"",type:"",kefu_share_type:"",kefu_avatar:"",kefu_desc:"",kefu_feed_id:"",kefu_finder_user_name:"",kefu_id:"",kefu_image:"",kefu_mina_appid:"",kefu_mina_apppath:"",kefu_title:"",kefu_shortlink:""},desc:""},shareSetting:{assistInfo:{open:!1,assistTypes:[]},invite_friend:!1,inviteReward:!1,inviteRewardCondition:0,inviteRewardName:"",image:"",teamUp:!1,userCount:2,disableShare:!1,officialId:"",officialName:"",officialAuthId:"",replyKeyword:"",inviteLeader:!1,inviteLeaderStyle:"",inviteLeaderCondition:0,inviteLeaderContact:""},lotteryTaskSetting:{friend:!1,task:!1,taskData:null,group:!1,official:!1,officialId:"",officialAuthId:"",officialName:"",officialHeadImg:"",keyword:"",signal:!1,signalContent:"",questionnaire:!1,questionnaireDesc:"",questionnaireData:[],vote:!1,voteData:null,quiz:!1,quizData:null,game:!1,gameData:f.defaultGameData,companyEnable:!1,companyData:void 0,weComGroupCompanyData:void 0,groupType:o.GroupTypes.group,limitedArea:!1,limitedAreaData:[],subscribeJoin:!1,auditEnable:!1,auditData:null},contactSetting:{idList:[],contactLimitCount:0,fillInfo:{last_hours:72,form_data:[]},contactLastHour:""},proSetting:{annualFeeMemberDate:"",isAnnualPro:!1,open:!1,message:!1,voucherList:[],highRiskUsersSetting:{open:!1,type:s.DetectTypes.sheep}},imageTextData:[],recallUser:{open:!1},allowPrizeLock:!1,errors:{prizeTotalCount:{errMsg:"",tag:""},prizeList:[m],proSetting:{open:{errMsg:"",tag:""}},limitSetting:{open:{errMsg:"",tag:""},count:{errMsg:"",tag:""}},shareSetting:{assistInfo:{open:{errMsg:"",tag:""},assistTypes:{errMsg:"",tag:""},activeOpen:{errMsg:"",tag:""},activeTask:{errMsg:"",tag:""}},invite_friend:{errMsg:"",tag:""},teamUp:{errMsg:"",tag:""},disableShare:{errMsg:"",tag:""}},drawSetting:{allowMultiJoin:{errMsg:"",tag:""},drawTime:{errMsg:"",tag:""},timeOfReal:{errMsg:"",tag:""},timeOfUser:{errMsg:"",tag:""},userCount:{errMsg:"",tag:""},userCountOfReal:{errMsg:"",tag:""},startTimeOfReal:{errMsg:"",tag:""},totalJoinCount:{errMsg:"",tag:""}},lotteryDesc:{desc:{errMsg:"",tag:""}},lotteryTaskSetting:{friend:{errMsg:"",tag:""},group:{errMsg:"",tag:""},groupType:{errMsg:"",tag:""},official:{errMsg:"",tag:""},officialId:{errMsg:"",tag:""},officialAuthId:{errMsg:"",tag:""},signal:{errMsg:"",tag:""},questionnaire:{errMsg:"",tag:""},questionnaireData:{errMsg:"",tag:""},vote:{errMsg:"",tag:""},voteData:{errMsg:"",tag:""},quiz:{errMsg:"",tag:""},quizData:{errMsg:"",tag:""},task:{errMsg:"",tag:""},taskData:{errMsg:"",tag:""},keyword:{errMsg:"",tag:""},signalContent:{errMsg:"",tag:""},game:{errMsg:"",tag:""},companyEnable:{errMsg:"",tag:""},companyData:{errMsg:"",tag:""},weComGroupCompanyData:{errMsg:"",tag:""},limitedArea:{errMsg:"",tag:""},limitedAreaData:{errMsg:"",tag:""},auditEnable:{errMsg:"",tag:""},auditData:{errMsg:"",tag:""}},contactSetting:{idList:{errMsg:"",tag:""},fillInfo:{errMsg:"",tag:""}},imageTextData:{errMsg:"",tag:""}}};function I(){return g.default.cloneDeep(_)}function A(e){var t=e.errors;t.shareSetting=(0,c.getShareSettingErrors)(e),t.drawSetting=(0,l.getDrawSettingErrors)(e),t.lotteryTaskSetting=(0,S.getLotteryTaskSettingErrors)(e),t.contactSetting=(0,u.getContactSettingErrors)(e),t.prizeTotalCount=(0,T.getPrizeTotalCountError)(e),t.lotteryDesc=(0,p.getLotteryDescErrors)(e),t.proSetting=(0,d.getProSettingErrors)(e),t.prizeList=e.prizeList.map((function(t,r,a){return(0,T.getPrizeErrors)(t,e,r,a)})),t.limitSetting=(0,y.getLimitSettingErrors)(e),t.imageTextData=(0,E.getImageTextErrors)(e)}exports.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,u=arguments.length>1?arguments[1]:void 0,l=(i(i(i(i(i(i(i(i(i(i(e={},n.ACTIONS.SET_HOMEPAGE,(function(){return a(a({},t),{},{homepageSetting:a(a({},t.homepageSetting),u.payload)})})),n.ACTIONS.SET_ALLOW_TO_PUBLIC,(function(){return a(a({},t),{},{allowToPublic:u.payload})})),n.ACTIONS.SET_PRIZE_LIST,(function(){var e=a(a({},t),{},{prizeList:u.payload});return A(e),e})),n.ACTIONS.SET_PRIZE,(function(){var e=u.payload,r=e.index,i=e.prize,n=a(a({},t),{},{prizeList:g.default.map(t.prizeList,(function(e,t){return t!==+r?e:a(a({},e),i)}))});return n.prizeList.some((function(e){return e.type===s.PrizeTypes.SHOP}))&&(n.proSetting.open=!0),A(n),n})),n.ACTIONS.ADD_PRIZE,(function(){var e=a(a({},t),{},{prizeList:[].concat(r(t.prizeList),[u.payload]),errors:a(a({},t.errors),{},{prizeList:[].concat(r(t.errors.prizeList),[m])})});return A(e),e})),n.ACTIONS.DELETE_PRIZE,(function(){var e=a(a({},t),{},{prizeList:t.prizeList.filter((function(e,t){return t!==u.payload}))});if((0,o.isPrizeLockEnable)(e)){var r=e.prizeList.length;e.prizeList[r-1].unlockCount=null}return A(e),e})),n.ACTIONS.SET_DRAW_SETTING,(function(){var e=a(a({},t),{},{drawSetting:a(a({},t.drawSetting),u.payload)});return A(e),e})),n.ACTIONS.SET_LOTTERY_DESC,(function(){var e=a(a({},t),{},{lotteryDesc:a(a({},t.lotteryDesc),u.payload)});return A(e),e})),n.ACTIONS.SET_SHARE_SETTING,(function(){var e=a(a({},t),{},{shareSetting:a(a({},t.shareSetting),u.payload)});return A(e),e})),n.ACTIONS.SET_LOTTERY_TASK_SETTING,(function(){var e=a(a({},t),{},{lotteryTaskSetting:a(a({},t.lotteryTaskSetting),u.payload)});return A(e),e})),i(i(i(i(i(i(i(i(i(i(e,n.ACTIONS.SET_CONTACT_SETTING,(function(){var e=a(a({},t),{},{contactSetting:a(a({},t.contactSetting),u.payload)});return A(e),e})),n.ACTIONS.SET_PRO_SETTING,(function(){var e=a(a({},t),{},{proSetting:a(a({},t.proSetting),u.payload)});return A(e),e})),n.ACTIONS.SET_HIGH_RISK_USERS,(function(){var e=a(a({},t),{},{proSetting:a(a({},t.proSetting),{},{highRiskUsersSetting:a(a({},t.proSetting.highRiskUsersSetting),u.payload)})});return A(e),e})),n.ACTIONS.SET_IMAGE_TEXT_DATA,(function(){var e=a(a({},t),{},{imageTextData:u.payload});return A(e),e})),n.ACTIONS.SET_SHOW_REQUIRED_ERROR,(function(){var e=a(a({},t),{},{showRequiredError:u.payload});return A(e),e})),n.ACTIONS.SET_SELF_HELP_TYPE,(function(){var e=a(a({},t),{},{selfHelpType:u.payload});return A(e),e})),n.ACTIONS.SET_RECALL_USER,(function(){var e=a(a({},t),{},{recallUser:u.payload});return A(e),e})),n.ACTIONS.INIT_LOTTERY,(function(){var e=a(a(a({},_),u.payload),{},{proSetting:a(a(a({},_.proSetting),u.payload.proSetting?u.payload.proSetting:{}),{},{voucherList:t.proSetting.voucherList})});return A(e),e})),n.ACTIONS.SET_TEMPLATE,(function(){return a(a({},t),{},{template:u.payload})})),n.ACTIONS.SET_CREATED,(function(){return a(a({},t),{},{created:u.payload})})),i(i(i(i(i(i(i(e,n.ACTIONS.SET_ALLOW_PRIZE_LOCK,(function(){var e=a(a({},t),{},{allowPrizeLock:u.payload});return A(e),e})),n.ACTIONS.SET_TEST_MODE,(function(){return a(a({},t),{},{testMode:u.payload})})),n.ACTIONS.SET_LIMIT_JOIN_COUNT,(function(){var e=a(a({},t),{},{limitSetting:a(a({},t.limitSetting||{}),u.payload)});return A(e),e})),n.ACTIONS.SET_MARKETING,(function(){return a(a({},t),{},{marketing:a(a({},t.marketing),u.payload)})})),n.ACTIONS.RESET_MARKETING,(function(){return a(a({},t),{},{marketing:u.payload})})),n.ACTIONS.SET_INVITE_REWARD,(function(){return a(a({},t),{},{shareSetting:a(a({},t.shareSetting),u.payload)})})),n.ACTIONS.SET_INVITE_LEADER,(function(){return a(a({},t),{},{shareSetting:a(a({},t.shareSetting),u.payload)})}))),p=l[u.type];return p?p():t};
},{isPage:false,isComponent:false,currentFile:'store/reducers/lottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ab-test.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getABTestGroup3435=function(e){return{algo:1,price:2,ecpm:3,operate:-1}[e]||0},exports.getUserGroupIdx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.default.get(getApp(),"globalData.userInfo.user_id",0),p=u(n),b=-1,g=3;switch(e){case 0:b=a(n);break;case 1:b=o(p);break;case 2:b=s(p);break;case 3:b=i(p),g=1;break;case 4:b=c(p),g=2;break;case 5:b=l(p),g=-1;break;case 6:b=d(p,t),g=1;break;default:b=-1}return b=f(n,b,g),console.log("userGroupIdx:",b),b},exports.isReverseGroup=function(e){var r=(0,t.default)(e);return(0,t.default)().diff(r,"days")%2==1},require("../@babel/runtime/helpers/Arrayincludes");var e=require("../@babel/runtime/helpers/toConsumableArray"),r=n(require("lodash")),t=n(require("moment"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return e||(e=r.default.get(getApp(),"globalData.userInfo.user_id","")),parseInt(e)%10}function a(e){return parseInt(e)%4}function o(t){return r.default.chunk(e(Array(10).keys()),3).findIndex((function(e){return e.includes(t)}))}function s(e){return e<4?e:-1}function i(e){return e<5?0:1}function c(e){return e<9?e<3?0:e<6?1:2:-1}function l(e){return e<5?-2:-3}function d(e,r){var t=e%2;return r?0===t?1:0:t}function f(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return[11218049,27168941,382108796,314905319,4828127].includes(e)&&(r=1),[610475234,596594999].includes(e)&&(r=3),r>t&&(r=t),r}
},{isPage:false,isComponent:false,currentFile:'utils/ab-test.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/activityUtils.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MINIMAL_CASH=exports.LONG_TERM_ACTIVITY=exports.ACTIVITY_THEME_KEY=exports.ACTIVITY_TASK_COUNT=exports.ACTIVITY_INVITE_KEY=void 0,exports.checkDailyDataValid=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,a=c(e),i=a.find((function(e){return e.includes(t)})),s=(new Date).toISOString().slice(0,10);if(i){var o=i.split("_");n=2===o.length&&o[1]===s}else n=!1;r&&(p(e,i),l(e,["".concat(t,"_").concat(s)]));return n},exports.getActivityId=function(e){var t=(s.default.get(getApp(),"globalData.appConfig.online_activities",[])||[]).find((function(t){return t.type===e}));return t?t.id:void 0},exports.getActivitySubscribeSetting=function(){return f.apply(this,arguments)},exports.getDateNumber=void 0,exports.isFestivalOnWarm=function(e){return s.default.get(getApp(),"globalData.appConfig.enable_features",[]).includes(e)},exports.replaceFormat=void 0,exports.updateLocalActivityStep=function(){var e=!1;try{var t=wx.getStorageSync("lt_activity");if(t){var r=s.default.get(t,"round.current_task.current_step",0),n=s.default.get(t,"round.current_task.total_step",0),a=r+1>=n?1:0;s.default.set(t,"round.current_task.current_step",r+1),s.default.set(t,"round.current_task.state",a),wx.setStorageSync("lt_activity",t),e=!0}e=!1}catch(t){console.log("🚀 ~ file: activityUtils.ts ~ line 241 ~ updateLocalActivityStep ~ error",t),e=!1}return e};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator");require("../@babel/runtime/helpers/Arrayincludes");var r,n=require("../@babel/runtime/helpers/toConsumableArray"),a=require("../@babel/runtime/helpers/objectSpread2"),i=require("../@babel/runtime/helpers/defineProperty"),s=(r=require("lodash"))&&r.__esModule?r:{default:r},o=require("./subscribeMessage"),u=require("./tools");exports.LONG_TERM_ACTIVITY="collect_money",exports.ACTIVITY_THEME_KEY="chnewyear_twentyone",exports.ACTIVITY_INVITE_KEY="money_invite",exports.ACTIVITY_TASK_COUNT=6,exports.MINIMAL_CASH=20;function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t;try{var n=wx.getStorageSync("festivals");return n&&0!==Object.keys(n).length?r=n[e]||t:r}catch(e){return console.log("getFestivalTheme -> error",e),r}}function l(e,t){try{var r=wx.getStorageSync("festivals");if(r&&0!==Object.keys(r).length){var s=r[e]||{};wx.setStorageSync("festivals",a(a({},r),{},i({},e,[].concat(n(s),n(t)))))}else wx.setStorageSync("festivals",i({},e,t));return!0}catch(e){return console.log("🚀 ~ file: activityUtils.js ~ line 101 ~ setFestivalData ~ error",e),!1}}function p(e,t){try{var r=wx.getStorageSync("festivals");if(!r||0===Object.keys(r).length)return!1;var n=r[e]||{};return wx.setStorageSync("festivals",a(a({},r),{},i({},e,n.filter((function(e){return e!==t}))))),!0}catch(e){return console.log("🚀 ~ file: activityUtils.js ~ line 101 ~ setFestivalData ~ error",e),!1}}function f(){return(f=t(e().mark((function t(){var r,n,a,i,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.promisify)(wx.getSetting)({withSubscriptions:!0});case 2:if(!(r=e.sent).subscriptionsSetting){e.next=13;break}if(n=r.subscriptionsSetting,a=n.mainSwitch,i=n.itemSettings,s=void 0===i?{}:i,a){e.next=7;break}return e.abrupt("return",!1);case 7:if(c=o.TEMPLATE_IDS[o.TEMPLATE_TYPES.PRE_JOIN_RECALL],!Object.keys(s).includes(c)){e.next=10;break}return e.abrupt("return","accept"===s[c]);case 10:case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var g=function(e,t){return t&&"day"===t?"".concat(e):e<10?"0".concat(e):e.toFixed()};exports.getDateNumber=function(e){return{day:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/6e4%60),seconds:Math.floor(e/1e3%60)}},exports.replaceFormat=function(e,t){var r,n={day:/DD/g,hours:/hh/g,minutes:/mm/g,seconds:/ss/g},a={day:{number:24,preKey:void 0},hours:{number:60,preKey:"day"},minutes:{number:60,preKey:"hours"},seconds:{number:60,preKey:"minutes"}},i=e,s=!1;for(r in n){var o=n[r];if(o.test(e)){var u=t[r];if(s){var c=a[r];u=t[c.preKey]*c.number}i=i.replace(o,g(u,r)),"00"===g(u)&&"day"===r&&(i=i.replace(/ 00 天/g,"")),s=!1}}return i};
},{isPage:false,isComponent:false,currentFile:'utils/activityUtils.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ad.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adScreenView=function(e){var t=e.adId,a=e.location,n=e.isVideo,r=void 0===n||n,i=e.isReal,d=void 0!==i&&i,l="ad".concat(r?"_video":"");(0,o.screenView)("".concat(l,"_screen_view"),{ad_options:{adtype:d?"real_".concat(l,"_").concat(a):"".concat(l,"_").concat(a),adid:t}})},exports.click=function(e){console.log("click ad",e);var t=a.default.get(e,"app_id","");if(t){var n="clicks.".concat(t),r=a.default.get(f,n,0)+1;a.default.set(f,n,r)}var i=a.default.get(e,"ad_tag","");if(i){var o="clicktag.".concat(i),d=a.default.get(f,o,0)+1;a.default.set(f,o,d)}(t||i)&&g()},exports.clickBannerChannelAd=function(e,t,n){if(!e||!e.origin_data)return;var r=e.origin_data;a.default.get(r,"ads_data.live_info")?y(r):v(r,void 0,t,n)},exports.config=function(e){a.default.set(f,"config",e||[])},exports.getBannerChannelAdImage=function(e){if(a.default.get(e,"live_info"))return a.default.get(e,"live_image","");if(a.default.get(e,"notice_info"))return a.default.get(e,"notice_image","");return""},exports.getChannelAdTask=function(){var e=a.default.get(getApp(),"globalData.appConfig.channel_task",void 0);return d.compareVersion(i.default,"1.5.40")>=0&&e?e:void 0},exports.getChannelAds=p,exports.getCurrentAdLocation=function(){var e="unknow",t=getCurrentPages();if(t&&t.length>0){var a=t[t.length-1].route;"game"===(e=a.split("/").pop()||"")&&(e="detail")}return e},exports.getDisplayChannelAd=h,exports.getRandomInt=function(e){return Math.floor(Math.random()*Math.floor(e))},exports.handleChannelAdClick=function(e,t,n){var r=p();if(!r.length)return;var i=h(r,e);if(!i)return;a.default.get(i,"ads_data.live_info")?y(i,e):v(i,e,t,n)},exports.handleChannelAdSave=function(e){var t=wx.getStorageSync("local_channel_ads")||{},n=a.default.get(e,"ad_tag","");if(n){var r="clicktag.".concat(n),i=a.default.get(t,r,0)+1;a.default.set(t,r,i),wx.setStorage({key:"local_channel_ads",data:t})}},exports.handleChannelAdTask=function(e){var t=e.finderUserName,a=e.type;"getChannelsLiveInfo"===a&&wx.getChannelsLiveInfo&&wx.getChannelsLiveInfo({finderUserName:t,success:function(t){_("getChannelsLiveInfo",e,!0,t)},fail:function(t){_("getChannelsLiveInfo",e,!1,t)}});"getChannelsLiveNoticeInfo"===a&&wx.getChannelsLiveNoticeInfo&&wx.getChannelsLiveNoticeInfo({finderUserName:t,success:function(t){_("getChannelsLiveNoticeInfo",e,!0,t)},fail:function(t){_("getChannelsLiveNoticeInfo",e,!1,t)}})},exports.isChannelAd=m,exports.isChannelAdStreaming=function(e){return!!e.find((function(e){var t=e.ads_data,a=t.finder_user_name,n=t.live_info;return!!a&&!!n}))},exports.randomBanner=function(e){var n=function(e,n){try{var r=n.lotteryId?e.filter((function(e){return e.lottery_ids&&e.lottery_ids.length>0&&e.lottery_ids.includes(n.lotteryId)})):[],i=e.filter((function(e){return!e.lottery_ids||0===e.lottery_ids.length})),o=r.length>0?r:i,l={};o.forEach((function(e){a.default.get(e,"pages").forEach((function(n){var r=[];if(Array.isArray(a.default.get(e,"ads_data.data"))&&!a.default.isEmpty(a.default.get(e,"ads_data.data"))){var i,o=a.default.get(e,"ads_data.data")||[],d=t(o);try{for(d.s();!(i=d.n()).done;){var s=i.value;r.push({type:e.type,content_type:e.content_type,unique_id:e.unique_id,id:e.id,reply_text:a.default.get(e,"reply_text"),app_id:a.default.get(e,"ads_data.app_id"),app_name:a.default.get(e,"ads_data.app_name"),mina_embedded:a.default.get(e,"ads_data.mina_embedded"),app_path:a.default.get(s,"app_path"),image:a.default.get(s,"image"),ad_tag:a.default.get(s,"ad_tag"),weight:a.default.get(e,"weight"),show_rate:a.default.get(e,"ads_data.show_rate"),kefu_id:a.default.get(e,"ads_data.kefu_id")})}}catch(e){d.e(e)}finally{d.f()}}else{var c=JSON.parse(JSON.stringify(e.ads_data));a.default.set(c,"type",e.type),a.default.set(c,"content_type",e.content_type),a.default.set(c,"unique_id",e.unique_id),a.default.set(c,"id",e.id),a.default.set(c,"ad_tag",e.ad_tag),a.default.set(c,"weight",e.weight),a.default.set(c,"origin_data",e),r.push(c)}l[n]=n in l?l[n].concat(r):r}))}));var s=a.default.get(n,"page"),c=l[s]||[],u=c.map((function(e){if(4===e.type){var t="";if(e.ad_tag?t="clicktag.".concat(e.ad_tag):e.app_id&&(t="clicks.".concat(e.app_id)),t)if(a.default.get(f,t,0)>0)return 0}return 1})),g=d.getRandomIdxByProbility(u);return c[g]}catch(e){return console.error(e),null}}(a.default.get(f,"config",[]),e);if(n){var r=(null==n?void 0:n.show_rate)||100;n.showBanner=Math.floor(100*Math.random())<=r&&n.weight>0}return n},exports.reportAdError=function(e){var t=e.adId,a=e.location,n=e.isVideo,r=void 0===n||n,i=e.errCode,d=void 0===i?0:i,l="ad".concat(r?"_video":"");(0,o.default)("error_ads_show",{label:"".concat(l,"_").concat(a,"&").concat(t).concat(d?"&"+d:"")})},exports.save=g;var e=require("../@babel/runtime/helpers/defineProperty"),t=require("../@babel/runtime/helpers/createForOfIteratorHelper"),a=u(require("lodash")),n=require("../models/user"),r=require("../services/chou"),i=u(require("../version")),o=c(require("./analyse")),d=c(require("./tools")),l=require("@mina-modules/system-info");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}var f=wx.getStorageSync("ads_1")||{};function g(){try{wx.setStorageSync("ads_1",f)}catch(e){console.log("ads_1 storage save error")}}function _(e,t,a,n){(0,r.reportChannelAd)({finder_user_name:t.finderUserName,type:e,success:a,result:n,ad_id:t.adId}).then((function(){console.log("reportChannelAd success")})).catch((function(e){console.log("reportChannelAd fail",e)}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.default.get(getApp(),"globalData.appConfig.other_ads",[]),n=a.default.get(getApp(),"globalData.appConfig.banner_ads",[]),r=d.compareVersion((0,l.getSysInfo)().SDKVersion,"2.19.0")<0;return r?[]:(e?n:t).filter(m)}function h(e,t){return function(e){var t=wx.getStorageSync("local_channel_ads")||{},n=e.map((function(e){if(4===e.type){var n="";if(e.ad_tag&&(n="clicktag.".concat(e.ad_tag)),n){var r=a.default.get(t,n,0);if(r>2)return 0;if(r>1)return.25;if(r>0)return.5}}return 1}));if(0===n.filter((function(e){return e>=1})).length)return;var r=d.getRandomIdxByProbility(n);return e[r]}(e.filter((function(e){return e.pages.includes(t)})))}function v(e,t,r,i){var o=a.default.get(e,"ads_data.notice_info.noticeId","");o&&(r&&r(e),wx.reserveChannelsLive({noticeId:o,success:function(r){var o=function(e){switch(e){case n.ChannelState.CHANNEL_CANCEL:case n.ChannelState.STREAMING_END:case n.ChannelState.EXPIRED:return wx.showToast({title:"预约已结束，下次再来",icon:"none"}),!0;case n.ChannelState.STREAMING_CANCEL:case n.ChannelState.STREAMING_GO:return!0;case n.ChannelState.SCHEDULE_CONFIRM:case n.ChannelState.SCHEDULE_CANCEL:default:return!1}}(r.state);t&&C({ad:e,isStreaming:!1,state:r.state,position:t}),i&&i(e),o&&_("reserveChannelsLive",{adId:e.unique_id,finderUserName:a.default.get(e,"ads_data.finder_user_name","")},!0,r)},fail:function(n){i&&i(e),wx.showToast({title:"预约失败",icon:"none"}),t&&C({ad:e,isStreaming:!1,position:t,state:-999}),_("reserveChannelsLive",{adId:e.unique_id,finderUserName:a.default.get(e,"ads_data.finder_user_name","")},!1,n)}}))}function y(e,t){var n=a.default.get(e,"ads_data.finder_user_name",""),r=a.default.get(e,"ads_data.live_info.feedId",""),i=a.default.get(e,"ads_data.live_info.nonceId","");wx.openChannelsLive({finderUserName:n,feedId:r,nonceId:i,success:function(){t&&C({ad:e,isStreaming:!0,position:t,state:1})},fail:function(){t&&C({ad:e,isStreaming:!0,position:t,state:-999})}})}function C(t){var a=t.ad,r=t.position,i=t.isStreaming,d=t.state,l=e(e(e({},n.AdPosition.INDEX_HEADER,"index"),n.AdPosition.AFTER_JOIN,"joined"),n.AdPosition.RESULT_PANNEL,"drawed"),s="".concat(a.id,"_").concat(-999===d?"fail":d),c=l[r]||"banner";(0,o.default)(i?"channel_reserve_".concat(c):"channel_live_".concat(c),{label:s})}function m(e){return!!e&&(e.content_type===n.ADContentType.CHANNEL_LIVE||e.content_type===n.ADContentType.CHANNEL_NOTICE||e.content_type===n.ADContentType.CHANNEL_NOTICE_LIVE)}
},{isPage:false,isComponent:false,currentFile:'utils/ad.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/agreement.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.navigateToAgreement=function(t){(0,e.navigateToWebview)("https://lucky.nocode.com/official/agreement?type=".concat(t))};var e=require("./webview");
},{isPage:false,isComponent:false,currentFile:'utils/agreement.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/analyse.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MININAL_AD_REPORT_INTERVAL=void 0,exports.appLaunchScene=function(a){var t=getApp().tracker;if(l("scene",a.scene),l("c_page",d(a.path)),t&&g){var s=e.CampaignParams.buildFromWeappScene(a.scene).toUrl();t.setCampaignParamsOnNextHit(s)}},exports.default=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=getApp(),n=a&&a.ad_options,p=a.isAlgoAds,g=n?o.adTracker:o.tracker;console.log("report: ".concat(e),a);var l=1,u="";if(g&&a){var f=m();h(f,g),u=t.default.values(a).join("_"),console.log("setLabel: ".concat(t.default.values(a).join("_"))),l=1;var d=(new i.EventBuilder).setCategory(e).setAction("click").setValue(l).setLabel(u).build(),y=c();p&&(y.spm+="_401");var v=n?a.ad_options:{};t.default.assign(d,y,f.gaOptions||{},v),t.default.isEmpty(r)||t.default.set(d,"par",(0,s.queryString)(r)),console.log("report -> event",d),g.send(d)}console.log("wx report: ".concat(e)),wx.reportAnalytics&&wx.reportAnalytics(e,a||{})},exports.getReportLocation=function(){var e="unknow";try{var a=getCurrentPages();if(a&&a.length>0){var t=a[a.length-1].route;"game"===(e=t.split("/").pop())&&(e="detail")}}catch(e){console.log("attached -> e",e)}return e},exports.initAdTracker=function(t){var r=getApp();if(!r)return null;if(r.adTracker)return r.adTracker;var o=(0,s.getAppEnvVersion)(),n="trial"===o||"develop"===o,p=e.GoogleAnalytics.getInstance(t).setAppName(a.default.AD_GA.name).setAppVersion(n?"".concat(a.default.VERSION,"_0"):a.default.VERSION).newTracker(a.default.AD_GA.id);return p.setTrackerServer(a.default.AD_GA.proxy),r.adTracker=p,p},exports.initSessionId=function(e){if(!getApp())return null;var a=u("sessionId");if(a)return a;var t=(0,r.default)("".concat(e,"-").concat((new Date).valueOf()));return l("sessionId",t),t},exports.initTracker=function(r){var o=getApp();if(!o)return null;if(o.tracker)return o.tracker;var n=(0,s.getAppEnvVersion)(),p="trial"===n||"develop"===n,g=e.GoogleAnalytics.getInstance(r).setAppName(a.default.GA.name).setAppVersion(p?"".concat(a.default.VERSION,"_0"):a.default.VERSION).newTracker(a.default.GA.id);g.setTrackerServer(a.default.GA.proxy),o.tracker=g;try{wx.onAppRoute((function(e){console.log(" ### 路由事件监听 ### "),console.log(e);var a=u("c_page");a&&l("f_page",a),l("c_page",d(e.path));var s=t.default.get(e,"query.f_node","0000");console.log("### set query fnode ",s),l("f_node",s);var r=t.default.get(e,"query.tracker_tag");if(r){var o=u("tags")||[];t.default.indexOf(o,r)<0&&(o.push(r),l("tags",o))}}))}catch(e){console.error("监听路由事件出错 ",e)}return g},exports.pageLoadOptions=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=getApp(),o=r.launchOptions;function n(e){e=decodeURIComponent(e);var a={},t=e.split("&").filter((function(e){if(/[^=]+=[^=]+/.test(e)){var t=e.split("=");return a[t[0]]=t[1],!1}return!0})).join("&");return e&&(a.scene=t),a}if(g){console.log("pageLoadOptions",e,o);try{var p=getCurrentPages(),i=p[p.length-1]||{},c=p[p.length-2],l="",u={},f=!1;if(o&&(1===p.length||a)?(f=!0,l="external_channel"):l=c&&c.route?c.route:r.prevPageRoute||"unknow",r.prevPageRoute=i.route+"?"+(0,s.queryString)(i.options),u=null!=e&&e.scene?n(e.scene):e,f&&!u.f){var d=t.default.get(o,"referrerInfo.appid","");u.f=d||o.scene}if(i.gaOptions||(i.gaOptions={}),!i.gaOptions.referer){if(o&&"pages/index"===i.route){var m=t.default.keys(u),h=t.default.intersection(m,["id","q","path","f"]);h.length>0&&(u.redirect="y")}i.gaOptions.referer=l+"?"+(0,s.queryString)(u)}i.gaOptions.referer=i.gaOptions.referer.replace(/\?$/,""),r.launchOptions=null,console.log("gaOptions",i.gaOptions)}catch(e){console.error(e)}}},exports.reportCrash=function(e){var a=getApp(),s=a&&a.tracker;if("devtools"===(0,o.getSysInfo)().platform)return;if(console.warn("report crash: ",e),s&&e){var r=(new i.EventBuilder).setCategory("crash").setAction("click").build(),n=m(),p=c();t.default.assign(r,p,t.default.get(n,"gaOptions",{}),e),s.send(r)}console.log("wx report: ".concat("crash")),wx.reportAnalytics&&wx.reportAnalytics("crash",e||{})},exports.screenView=function(e,a){var s=getApp(),r=a&&a.ad_options,o=r?s.adTracker:s.tracker,n=null==a?void 0:a.isAlgoAds;if(o&&g){var p=m();h(p,o,e);var l=new i.ScreenViewBuilder;a&&a.dimensions&&a.dimensions.forEach((function(e,a){l=l.setCustomDimension(a+1,e)}));var u=l.build();console.log("screenView",p.gaOptions);var f=c();n&&(f.spm+="_401");var d=r?null==a?void 0:a.ad_options:{};t.default.assign(u,f,p.gaOptions||{},d),console.log("screenView -> event",u),o.send(u)}},exports.updateSpmTags=function(e){var a=u("tags")||[];null==e||e.forEach((function(e){a.includes(e)||a.push(e)})),l("tags",a)},exports.wxReportEvent=function(e,a){wx.reportEvent&&wx.reportEvent(e,a)},require("../@babel/runtime/helpers/Arrayincludes");var e=function(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(a);if(t&&t.has(e))return t.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var n=r?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(s,o,n):s[o]=e[o]}s.default=e,t&&t.set(e,s);return s}(require("@mina-modules/wxapp-ga")),a=n(require("../config")),t=n(require("lodash")),s=require("./tools"),r=n(require("md5")),o=require("@mina-modules/system-info");function n(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:a})(e)}var g=!0;"devtools"===(0,o.getSysInfo)().platform&&(g=!0),console.log("ga track: ".concat(g));var i=e.HitBuilders;function c(){var e={},a=u("sessionId");a&&(e.sid=a);var s=u("scene")||"0000",r=u("f_page")||"0000",o=u("f_node")||"0000",n=t.default.join(u("tags"),"_")||"000",p="".concat(s,".").concat(r,".").concat(o,".").concat(n);return e.spm=p,e}function l(e,a){var t=getApp();t.trackerData||(t.trackerData={}),a?t.trackerData[e]=a:delete t.trackerData[e]}function u(e){var a=getApp();return a.trackerData?a.trackerData[e]:null}exports.MININAL_AD_REPORT_INTERVAL=15e3;var f={"pages/index":"1001","pages/error":"1002","pages/game":"1003","pages/users":"1004","pages/crop/crop":"1005","pages/profile/profile":"1006","pages/share/officialshare/officialshare":"1008","pages/usergames":"1009","pages/groupgame":"1010","pages/groupgamefix/groupgamefix":"1015","pages/helpers/textarea/textarea":"1015","pages/squaregames":"1015","pages/helpers/redirectback/redirectback":"1016","pages/new/redemptioncodes/redemptioncodes":"1018","pages/helpers/webview/webview":"1019","pages/create/create":"1021","pages/new/create/create":"1021","pages/create/guides/timelineonly/index":"1022","pages/createSub/descriptionCase/descriptionCase":"1023","pages/new/caseShow/caseShow":"1024","pages/createSub/createVote/createVote":"1026","pages/createSub/votePreview/votePreview":"1027","pages/prize/prize":"1028","pages/createwithfun/createwithfun":"1029","pages/contact/contact":"1030","pages/shareimage/shareimage":"1031","pages/winnerusers/winnerusers":"1032","pages/besponsor/besponsor":"1033","pages/square/pages/selfsubmit":"1034","pages/square/pages/squaregame":"1035","pages/square/pages/createsquaregame":"1036","pages/square/refund/refund":"1037","pages/square/chooselottery/chooselottery":"1038","pages/square/pages/kefusharesetting":"1039","pages/uncommonly/pages/minasuggest/minasuggest":"1040","pages/uncommonly/pages/question/question":"1041","pages/uncommonly/pages/account/account":"1042","pages/uncommonly/pages/transactionrecord/transactionrecord":"1043","pages/uncommonly/pages/proguide/proguide":"1044","pages/uncommonly/squareguide/squareguide":"1045","pages/uncommonly/pages/business/business":"1047","pages/uncommonly/pages/analytics/analytics":"1048","pages/uncommonly/pages/shareorderrule/shareorderrule":"1049","pages/uncommonly/pages/transferhistory/transferhistory":"1050","pages/uncommonly/pages/agreements/agreements":"1051","pages/lottery/pages/pay/pay":"1052","pages/lottery/pages/promanager/promanager":"1053","pages/lottery/pages/ontimewishresult":"1057","pages/lottery/pages/assisttransit/assisttransit":"1058","pages/lottery/pages/joinform/joinform":"1059","pages/lottery/pages/formresult/formresult":"1060","pages/lottery/pages/writeoffauth":"1061","pages/lottery/pages/writeoffcheck":"1062","pages/lottery/pages/formchoicemanage/formchoicemanage":"1063","pages/lottery/pages/messages/messages":"1064","pages/lottery/pages/shareorder/shareorder":"1065","pages/lottery/pages/postmessage":"1066","pages/lottery/pages/luckyReviews/luckyReviews":"1067","pages/lotterymanage/pages/groupchat/groupchat":"1068","pages/feedback/evaluation/evaluation":"1069","pages/feedback/complaint/complaint":"1070","pages/feedback/complaintdetail/complaintdetail":"1071","pages/feedback/manager/manager":"1072","pages/feedback/usercomplaint/usercomplaint":"1073","pages/feedback/complaintreplay/complaintreplay":"1074","pages/shop/pages/list":"1075","pages/shop/pages/item":"1076","pages/shop/pages/suggest":"1077","pages/offlinelottery/pages/create/create":"1078","pages/offlinelottery/pages/control/control":"1079","pages/offlinelottery/pages/result/result":"1080","pages/offlinelottery/pages/room/room":"1081","pages/offlinelottery/pages/start/start":"1082","pages/offlinelottery/pages/users/users":"1083","pages/offlinelottery/pages/intro/intro":"1084","pages/offlinelottery/pages/guide/guide":"1085","pages/points/pages/points":"1086","pages/points/pages/history/history":"1087","pages/points/pages/exchange/exchange":"1088","pages/points/pages/rule/rule":"1089","pages/points/pages/redeemhistory/redeemhistory":"1090","pages/points/pages/market":"1091","pages/points/pages/list/list":"1092","pages/points/pages/pay/pay":"1093","pages/points/pages/payresult/payresult":"1094","pages/points/pages/redeemdetail/redeemdetail":"1095","pages/points/pages/wuliu/wuliu":"1096","pages/points/pages/level/level":"1097","pages/offcialaccount/auth/auth":"1098","pages/offcialaccount/authlist":"1099","pages/offcialaccount/authconfirm/authconfirm":"1101","pages/homepage/index":"1102","pages/homepage/pages/homePage/homePage":"1103","pages/homepage/guide/guide":"1104","pages/homepage/edit/edit":"1105","pages/homepage/pageEditor/pageEditor":"1106","pages/homepage/setLottery/setLottery":"1109","pages/homepage/pages/addTrend/addTrend":"1110","pages/homepage/pages/trendDetail":"1111","pages/homepage/fans/fans":"1112","pages/homepage/pages/lotteries/lotteries":"1113","pages/homepage/share/share":"1114","pages/form/setting/setting":"1115","pages/form/editor/editor":"1116","pages/ontimewish/result/result":"1117","pages/ontimewish/marquee/marquee":"1118","pages/wish/index":"1119","pages/wish/create":"1120","pages/wish/history":"1121","pages/wish/comments":"1122","pages/distribution/index":"1123","pages/kefushare/list/list":"1124","pages/kefushare/edit/edit":"1125","pages/contacts/edit":"1126","pages/contacts/select":"1127","pages/contacts/show/show":"1128","pages/contacts/writeoffcode":"1129","pages/me/more/more":"1130","pages/me/notification":"1131","pages/me/msgDetail":"1132","pages/gallery/gallery":"1133","pages/promotion/manage/index":"1137","pages/promotion/manage/list":"1138","pages/promotion/manage/intro":"1139","pages/promotion/create/index":"1140","pages/promotion/create/chooselottery":"1141","pages/promotion/detail/index":"1142","pages/promotion/stat/index":"1143","pages/promotion/account/index":"1144","pages/promotion/account/recharge":"1145","pages/promotion/account/refund":"1146","pages/promotion/account/bill":"1147","pages/lucky/lottery/detail":"1149","pages/lucky/faq/faq":"1150","pages/lucky/pages/valentine/valentine":"1151","pages/sale/pages/goodsDetail/goodsDetail":"1152","pages/coupon/couponList/CouponList":"1153","pages/share/generateimage/generateimage":"1154","pages/usergames/usergames":"1155","pages/users/users":"1156"};function d(e){var a=f[e];return a||"0000"}function m(){var e=getCurrentPages();return e[e.length-1]||{}}function h(e,a,t){if(a){var r=e.options;if(t){var o=/game_(-?\d+)_(\w+)/.exec(t);o&&(r.state=o[1],r.type=o[2]),/create/.test(t)&&(r.v="v2")}var n=(0,s.queryString)(r);t=e.route+(n?"?".concat(n):""),a.setScreenName(t)}}
},{isPage:false,isComponent:false,currentFile:'utils/analyse.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/app/check-system.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alertFor=r,exports.checkSystem=function(e){var n=r(e||(0,t.getSysInfo)());n&&wx.showModal(n.get(e))};var t=require("@/utils/system"),e=require("@utils/tools");function r(t){return[o,n].find((function(e){return e.match(t)}))}var n={match:function(t){if("ios"!==t.platform)return!1;var r=t.system.split(" ")[1];return(0,e.versionCompare)(r,"9.0.0")<0},get:function(){return{title:"iOS 版本过低",content:"升级 iOS 至最新版本，重新打开小程序，即可体验完整服务",confirmText:"好的",cancelText:"暂不升级"}}},o={match:function(t){return(0,e.versionCompare)(t.SDKVersion,"2.11.2")<0},get:function(t){var e="微信";return"wxwork"===t.environment&&(e="「企业微信」"),{title:"".concat(e,"版本过低"),content:"升级".concat(e,"至最新版本，重新打开小程序，即可体验完整服务"),confirmText:"好的",cancelText:"暂不升级"}}};
},{isPage:false,isComponent:false,currentFile:'utils/app/check-system.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/app/error.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reportOnErrorMessage=function(t){if(r.some((function(e){return e.test(t)})))return;(0,e.error)(t)};var e=require("@mina-modules/mina-sentry"),r=[/loadSubpackage: timeout/,/network exceed max task count/];
},{isPage:false,isComponent:false,currentFile:'utils/app/error.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/app/redirect.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPageNotFoundRedirectPath=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g={"pages/lottery/pages/game":"pages/lucky/lottery/detail","pages/gameroom/gameroom":"pages/lucky/lottery/detail","pages/game":"pages/lucky/lottery/detail","pages/selfsubmit":"pages/square/pages/selfsubmit","pages/points/pages/wuliu":"pages/points/pages/wuliu/wuliu","pages/points/pages/level":"pages/points/pages/level/level","pages/points/pages/list":"pages/points/pages/list/list","pages/shareimage":"pages/shareimage/shareimage","pages/generateimage":"pages/share/generateimage/generateimage","pages/generateimage/generateimage":"pages/share/generateimage/generateimage","pages/contact":"pages/contact/contact","pages/uncommonly/pages/question":"pages/uncommonly/pages/question/question","pages/uncommonly/pages/account":"pages/uncommonly/pages/account/account","pages/uncommonly/pages/homepage":"pages/homepage/pages/homePage","pages/usergames":"pages/usergames/usergames","pages/users":"pages/users/users","pages/kefushare/list":"pages/kefushare/list/list","pages/groupgamefix":"pages/groupgamefix/groupgamefix","pages/officialshare":"pages/share/officialshare/officialshare","pages/officialshare/officialshare":"pages/share/officialshare/officialshare","pages/offcialaccount/authlist":"pages/offcialaccount/authlist/authlist","pages/offcialaccount/authconfirm":"pages/offcialaccount/authconfirm/authconfirm","pages/create":"pages/new/create/create","pages/create/create":"pages/new/create/create","pages/redemptioncodes":"pages/new/redemptioncodes/redemptioncodes","pages/redemptioncodes/redemptioncodes":"pages/new/redemptioncodes/redemptioncodes","pages/redpacketcoverlinks/redpacketcoverlinks":"pages/new/redpacketcoverlinks/redpacketcoverlinks","pages/feedback/pages/usercomplaint":"pages/feedback/usercomplaint/usercomplaint","pages/feedback/pages/manager":"pages/feedback/manager/manager","pages/feedback/pages/evaluation":"pages/feedback/evaluation/evaluation","pages/feedback/pages/complaint":"pages/feedback/complaint/complaint","pages/feedback/pages/complaintdetail":"pages/feedback/complaintdetail/complaintdetail","pages/feedback/pages/complaintreplay":"pages/feedback/complaintreplay/complaintreplay","pages/lottery/pages/assisttransit":"pages/lottery/pages/assisttransit/assisttransit","pages/homepage/index":"pages/homepage/pages/homePage","pages/ontimewish/marquee":"pages/ontimewish/marquee/marquee","pages/offlinelottery/pages/intro":"pages/offlinelottery/pages/intro/intro","pages/offlinelottery/pages/room":"pages/offlinelottery/pages/room/room","pages/offlinelottery/pages/guide":"pages/offlinelottery/pages/guide/guide","pages/offlinelottery/pages/control":"pages/offlinelottery/pages/control/control","pages/offlinelottery/pages/result":"pages/offlinelottery/pages/result/result","pages/offlinelottery/pages/start":"pages/offlinelottery/pages/start/start","pages/kefushare/edit":"pages/kefushare/edit/edit","pages/lottery/pages/joinform":"pages/lottery/pages/joinform/joinform","pages/points/pages/exchange":"pages/points/pages/exchange/exchange","pages/lottery/pages/promanager":"pages/lottery/pages/promanager/promanager","pages/homepage/pages/addTrend":"pages/homepage/pages/addTrend/addTrend","pages/homepage/pages/homePage":"pages/homepage/pages/homePage/homePage","pages/homepage/pages/lotteries":"pages/homepage/pages/lotteries/lotteries","pages/lottery/pages/messages":"pages/lottery/pages/messages/messages","pages/lottery/pages/formchoicemanage":"pages/lottery/pages/formchoicemanage/formchoicemanage","pages/lottery/pages/formresult":"pages/lottery/pages/formresult/formresult","pages/lottery/pages/shareorder":"pages/lottery/pages/shareorder/shareorder","pages/offcialaccount/auth":"pages/offcialaccount/auth/auth","pages/uncommonly/pages/business":"pages/uncommonly/pages/business/business","pages/lottery/pages/pay":"pages/lottery/pages/pay/pay","pages/points/pages/pay":"pages/points/pages/pay/pay","pages/uncommonly/pages/analytics":"pages/uncommonly/pages/analytics/analytics","pages/serviceloading/serviceloading":"pages/customer/serviceloading/serviceloading","pages/qrcontact/qrcontact":"pages/customer/qrcontact/qrcontact","pages/webview":"pages/helpers/webview/webview","pages/lucky/subLottery/subLottery":"pages/subLottery/subLottery"};(0,a.default)("page_not_found_redirect",{path:t(e,s)});var o=g[e]||"/pages/index";return t(p(o),s)};var e=g(require("lodash")),a=g(require("../analyse")),s=require("../tools");function g(e){return e&&e.__esModule?e:{default:e}}function p(e){return e.startsWith("/")?e:"/".concat(e)}function t(a,g){return e.default.isEmpty(g)?a:a+"?"+(0,s.queryString)(g,{encode:!1})}
},{isPage:false,isComponent:false,currentFile:'utils/app/redirect.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/async-helper.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.callUnitAppInit=function(e){if(getApp().globalData.inited)return e();return new Promise((function(r){n.default.once("app:init_success",(function(){return r(e())}))}))},exports.withErrorCatch=function(e){return s.apply(this,arguments)},exports.withErrorToast=function(e){return a.apply(this,arguments)},exports.withLoading=function(e,r){return i.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("./event"))&&e.__esModule?e:{default:e},u=require("./tools"),o=require("./wechatAPI");function i(){return(i=t(r().mark((function e(t,n){var u,i,a,s,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=setTimeout((function(){return(0,o.showLoading)()}),null!==(u=null==n?void 0:n.delay)&&void 0!==u?u:0),e.prev=1,e.next=4,t;case 4:return s=e.sent,null==n||null===(a=n.onSuccess)||void 0===a||a.call(n,s),e.abrupt("return",s);case 9:throw e.prev=9,e.t0=e.catch(1),null==n||null===(l=n.onError)||void 0===l||l.call(n,e.t0),e.t0;case 13:return e.prev=13,clearTimeout(i),(0,o.hideLoading)(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,9,13,17]])})))).apply(this,arguments)}function a(){return(a=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),(0,u.showToast)((null===e.t0||void 0===e.t0?void 0:e.t0.message)||(null===e.t0||void 0===e.t0?void 0:e.t0.errMsg)||e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function s(){return(s=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[null,n]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[new Error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||(null===e.t0||void 0===e.t0?void 0:e.t0.errMsg)||e.t0),null]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/async-helper.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/canvasHelper.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawRoundImage=function(e,t,r,n,a){return x.apply(this,arguments)},exports.fillText=function(e,t,r,n,a){return o.apply(this,arguments)},exports.getLines=function(e,t,r,n){var a=t.split(""),i=[],s="",l=n.fontSize;e.setFontSize(l);for(var u=0;u<a.length;u++){var c=a[u];if("\n"!==c)e.measureText(s+c).width<r?s+=c:(i.push(s),s=c);else i.push(s),s=""}s&&i.push(s);return i};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("../@babel/runtime/helpers/createForOfIteratorHelper");require("../@babel/runtime/helpers/Arrayincludes");var n=/[.%@#]/,a=/[({\[<（【《「]/,i=/[^\w]*(\w+)$/,s=/[,，、.。?？!！;；:：>》」）】@#\$%~\^&\*\/]/,l=/([^,，、.。?？!！;；:：>》」）】@#\$%~\^&\*\/][,，、.。?？!！;；:：>》」）】@#\$%~\^&\*\/]*)$/;function u(e,t,r,a,i,l){r[t]="";for(var u=0;u<e.length;u++){var c=e[u];if(["\n","\r"].includes(c)){if(u>0){var h="".concat(e[u-1]).concat(e[u]);if(["\r\n","\n\r"].includes(h))continue}r[++t]=""}else{if(a.measureText(r[t]+c).width>=i){if(s.test(c)){if(!n.test(c)){r[t]+=c,r[++t]="",l=c;continue}r=g(r)}else/\w/.test(c)&&/\w/.test(l)&&(r=p(r));(r=v(r,t))[++t]=""}r[t]+=c,l=c}}}function c(e,t,n,a){if(e>0&&t.length>e){var i,s=(t=t.slice(0,e))[t.length-1],l="",u=r(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(n.measureText(l+c+"...").width>a)break;l+=c}}catch(e){u.e(e)}finally{u.f()}l+="...",t[t.length-1]=l}}function h(e,t,r,n,a,i,s,l,u){return f.apply(this,arguments)}function f(){return(f=t(e().mark((function t(n,a,i,s,l,u,c,h,f){var o,p,g,v,x,d,w;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.map((function(e){e=e.replace(/^\s+|\s+$/g,"");var t=a.measureText(e).width,r=i-t;if(r>s){var n=s/e.length;return n>.32&&(n=.32),{text:e,letterSpacing:n}}return r>=0?{text:e,letterSpacing:(i-t)/(e.length+1)}:(t=a.measureText(e.slice(0,-1)).width,{text:e.slice(0,-1),letterSpacing:(i-t)/e.length,hanging:e[e.length-1]})})),p=r(o),e.prev=2,p.s();case 4:if((g=p.n()).done){e.next=17;break}return v=g.value,x=l,d=v.text,w=a.measureText(d).width,u&&(x=(i-w)/2+l),e.next=12,a.fillText(d,x,c);case 12:x+=w+v.letterSpacing*d.length,c+=h,f=x;case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p.e(e.t0);case 22:return e.prev=22,p.f(),e.finish(22);case 25:return c-=h,e.abrupt("return",{x:f,y:c});case 27:case"end":return e.stop()}}),t,null,[[2,19,22,25]])})))).apply(this,arguments)}function o(){return(o=t(e().mark((function t(r,n,a,i,s){var l,f,o,p,g,v,x,d,w;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",{x:a,y:i});case 2:return l=s.middleText||!1,f=s.width||1e9,o=s.maxLines||-1,p=s.fontSize||"16",g=s.color||"#000",v=s.lineHeight||p,r.fillStyle=g,x=a,d=i,u(n,0,w=[],r,f,""),c(o,w,r,f),e.abrupt("return",h(w,r,f,p,a,l,d,v,x));case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function p(e){var t=e[e.length-1];if(t){var r=i.exec(t);r&&r[1].length<20&&((e=e.slice(0,e.length-1)).push(t.slice(0,t.length-r[1].length)),e.push(r[1]))}return e}function g(e){var t=e[e.length-1];if(t){var r=l.exec(t);if(r&&r[1].length<20&&(e=e.slice(0,e.length-1)).push(t.slice(0,t.length-r[1].length)),!r)return[];var n=e.length;if(/\w/.test(r[1][0]))n!==(e=p(e)).length?e[e.length-1]=e[e.length-1]+r[1]:e.push(r[1]);else e.push(r[1])}return e}function v(e,t){var r=e[t],n=r[r.length-1];return r&&a.test(n)&&(e[t]=r.slice(0,-1),e[t+1]=n+(e[t+1]||"")),e}function x(){return(x=t(e().mark((function t(r,n,a,i,s){var l,u=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=u.length>5&&void 0!==u[5]?u[5]:0,r.fillStyle="#fff",r.beginPath(),r.arc(i+a/2,s+a/2,a/2+l,0,2*Math.PI),r.fill(),r.closePath(),r.save(),r.beginPath(),r.arc(i+a/2,s+a/2,a/2+l,0,2*Math.PI),r.clip(),e.next=12,r.drawImage(n,i,s,a,a);case 12:r.closePath(),r.restore();case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/canvasHelper.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/crash.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=function(){e=null,wx.removeStorageSync("crash")},exports.init=function(r){r&&(t=r);(function(){var r={time:(new Date).toISOString()};t&&(r.uid=t.user_id);e=r,wx.setStorage({key:"crash",data:e})})(),console.log("start crash check")};var e,r=require("./analyse"),t=null;(e=wx.getStorageSync("crash"))&&(console.log("crashInfo",e),"1234568"!==e.uid&&(0,r.reportCrash)(e));var o=wx.getStorageSync("USER_1");o&&(t=o);
},{isPage:false,isComponent:false,currentFile:'utils/crash.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/createLottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultImageMap=function(){return t(t(t(t(t(t(t({},s.PrizeTypes.REAL,i()),s.PrizeTypes.MONEY,o()),s.PrizeTypes.RANDOM,o()),s.PrizeTypes.SHOP,i()),s.PrizeTypes.VIRTUAL,i()),s.PrizeTypes.COVER,i()),s.PrizeTypes.COUPON,i())},exports.getImageTypes=function(){return u},exports.getNormalDefaultImage=i,exports.getRedpacketDefaultImage=o,exports.getWeComFollowersInfo=function(e){return p.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("../@babel/runtime/helpers/defineProperty"),n=require("../constant"),s=require("../models/lottery"),a=require("../services/game"),u=function(e){return e.NORMAL="prize_images_square",e.REDPACKET="redpacket_images_square",e.MARKETING_WHEEL="marketing_wheel_images",e}(u||{});function i(){return n.DEFAULT_IMAGE_NORMAL}function o(){return n.DEFAULT_IMAGE_REDPACKET}function p(){return(p=r(e().mark((function r(t){var n,s,u,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getWecomCompanyUsers)(t);case 2:return n=e.sent,s=n.data,u=n.meta,i="",null!=u&&u.auth_expired?i="未知":null===s?(wx.showToast({title:"获取人员列表失败",icon:"none"}),i="获取失败"):i=s.length+" 位",e.abrupt("return",i);case 8:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/createLottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/dialog.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hideDialog=function(r){var o=(0,e.getCurrentPage)().selectComponent(r);if(!o)throw new ReferenceError("选择器：".concat(r," 找不到对应组件"));o.hide()},exports.showDialog=function(r,o){var t=(0,e.getCurrentPage)().selectComponent(r);if(!t)throw new ReferenceError("选择器：".concat(r," 找不到对应组件"));t.show(o)};var e=require("./tools");
},{isPage:false,isComponent:false,currentFile:'utils/dialog.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/env.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAppPlatform=function(){return r()?"wework":"wechat"},exports.isSupportPrivateMessage=exports.isLotteryUsePrivateMessageData=exports.isInPc=void 0,exports.isSupportTimeline=function(){if(t())return!1;return!0},exports.isWxWork=r,exports.setDesktopNavBarStyle=function(){t()&&wx.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"})},exports.shareableAboutPrivate=function(e){if(e.is_initiator&&n(e)&&!o())return!1;return!0};var e=require("@mina-modules/system-info");function r(){return"wxwork"===(0,e.getSysInfo)().environment}var t=exports.isInPc=function(){var r=(0,e.getSysInfo)();return["mac","windows"].indexOf(r.platform)>-1};var o=exports.isSupportPrivateMessage=function(){return!r()&&!t()},n=exports.isLotteryUsePrivateMessageData=function(e){var r;return e.groupchat_only||e.direct_share_only||!(null===(r=e.lottery_feature)||void 0===r||!r.qy_group_chat)};
},{isPage:false,isComponent:false,currentFile:'utils/env.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/event.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=(0,((e=require("mitt"))&&e.__esModule?e:{default:e}).default)(),o={on:function(e,o){return t.on(e,o)},off:function(e,o){return t.off(e,o)},emit:function(e,o){return t.emit(e,o)},once:function(e,o){t.on(e,(function n(u){o(u),t.off(e,n)}))}};exports.default=o;
},{isPage:false,isComponent:false,currentFile:'utils/event.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/format.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cleanHTMLSuffix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.match(/\.html$/))return e.replace(/\.html$/,"");if(e.match(".html?"))return e.replace(".html?","?");return e},exports.numberToChinese=function(e){var r=(e+"").split(""),t=[],n="零一二三四五六七八九",u="个十百千万@#%亿^&~",o=r.length-1;if(r.length>12)throw new Error("too big");for(var a=0;a<=o;a++)(1===o||5===o||9===o)&&0===a?"1"!==r[a]&&t.push(n.charAt(+r[a])):t.push(n.charAt(+r[a])),a!==o&&t.push(u.charAt(o-a));return t.join("").replace(new RegExp("零([十百千万亿@#%^&~])","g"),(function(e,t,n){if(-1!==(n=u.indexOf(t))){if("亿"===t)return t;if("万"===t)return t;if("0"===r[o-n])return"零"}return""})).replace(new RegExp("零+","g"),"零").replace(new RegExp("零([万亿])","g"),(function(e,r){return r})).replace(new RegExp("亿[万千百]","g"),"亿").replace(new RegExp("[零]$"),"").replace(new RegExp("[@#%^&~]","g"),(function(e){return{"@":"十","#":"百","%":"千","^":"十","&":"百","~":"千"}[e]||""})).replace(new RegExp("([亿万])([一-九])","g"),(function(e,t,n,a){return-1!==(a=u.indexOf(t))&&"0"===r[o-a]?t+"零"+n:e}))},exports.platformFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,t.formatText)(e.replace(n,(function(e){return r.default[e]||""})))};var e,r=(e=require("../constant"))&&e.__esModule?e:{default:e},t=require("./tools");var n=new RegExp(Object.keys(r.default).join("|"),"g");
},{isPage:false,isComponent:false,currentFile:'utils/format.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/functional.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.singleExec=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!1;return function(){var o=r(e().mark((function r(){var o,a,i,c,u=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:for(s=!0,e.prev=3,o=u.length,a=new Array(o),i=0;i<o;i++)a[i]=u[i];return e.next=7,t.apply(this,a);case 7:return c=e.sent,n.onSuccess&&n.onSuccess.call(this),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),wx.hideLoading(),n.ignoreErrorToast||wx.showToast({title:e.t0.message||e.t0.errMsg,icon:"none"}),n.onError&&n.onError.call(this);case 18:return e.prev=18,s=!1,n.onComplete&&n.onComplete.call(this),this.$apply&&this.$apply(),e.finish(18);case 23:case"end":return e.stop()}}),r,this,[[3,12,18,23]])})));return function(){return o.apply(this,arguments)}}()};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator");
},{isPage:false,isComponent:false,currentFile:'utils/functional.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/global.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getData=function(t){return e[t]},exports.rmKey=function(t){delete e[t]},exports.setData=function(t,r){e[t]=r};var e={};
},{isPage:false,isComponent:false,currentFile:'utils/global.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/homepage.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableHomepage=function(e){return o.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),a=require("@/services/homepage"),n=(e=require("./event"))&&e.__esModule?e:{default:e};function o(){return(o=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,wx.showLoading({title:""}),e.next=4,(0,a.postUserPage)("create");case 4:return n.default.emit("homepage:enable_homepage",!0),e.next=7,getApp().getUserProfile(!0);case 7:null==t||t(),wx.hideLoading(),wx.navigateTo({url:"/pages/homepage/pages/homePage/homePage"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),wx.showToast({title:e.t0.message,icon:"none"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/homepage.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/html.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toNewImageTextData=function(e){if(!e)return[];var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=[],n=/<\s*section[^>]*>(.*?)<\s*\/\s*section>|<\s*img[^>]*\/>|<\s*img[^>]*>/gi;t&&(n=/<\s*section[^>]*>(.*?)<\s*\/\s*section>/gi);for(var i=0,u=n.exec(e);u;)u.index>i&&r.push({type:"html",value:e.slice(i,u.index)}),i=u.index+u[0].length,r.push(a(u[0])),u=n.exec(e);return i<e.length&&r.push({type:"html",value:e.slice(i)}),s(r)}catch(e){return console.error(e),[]}}(e).map((function(e){switch(e.type){case"nc-copy":return{key:(0,n.generateKey)(),type:t.ImgTextType.COPY,title:e.data.title,value:e.data.value};case"nc-images":return e.images.map((function(e){return{key:(0,n.generateKey)(),type:t.ImgTextType.IMG,url:e.src}}));case"html":return{key:(0,n.generateKey)(),type:t.ImgTextType.TEXT,text:u(e.value)}}}));function u(e){for(var t=/<p[^>]*>(.*?)<\/p>/gi,r="",n=t.exec(e);n;)r+="\n".concat("<br>"===n[1]?"\n":n[1]),n=t.exec(e);return r.slice(1)}return r.default.flatten(i)},require("../@babel/runtime/helpers/Arrayincludes");var e,t=require("../models/create"),r=(e=require("lodash"))&&e.__esModule?e:{default:e},n=require("./tools");function a(e){try{var t=/<(\w+)\s+\w+.*?>/gi.exec(e),r="unknow";t&&(r=t[1]);for(var n={type:"unknow",data:{},tagName:r},a=/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi,s=a.exec(e);s;){var i=s[1],u=s[2];if(0===i.indexOf("data-"))n.data[i.slice(5)]=u;else if("class"===i){for(var c=u.split(/\s/),o=c.length,l=0;l<o;l++)if(0===c[l].indexOf("nc-")){n.type=c[l];break}}else["type","data","tagName"].includes(i)||(n[i]=u);s=a.exec(e)}return n}catch(t){return console.error("unknow component: ",e),{type:"unknow",data:{}}}}function s(e){for(var t=[],r=[],n=1,a=0,s=e.length;a<s;a++){var i=e[a];"img"===i.tagName?(i.showed=!0,i.index=n++,r.push(i)):(r.length>0&&(t.push({type:"nc-images",images:r}),r=[]),t.push(i))}return r.length>0&&(t.push({type:"nc-images",images:r}),r=[]),t}
},{isPage:false,isComponent:false,currentFile:'utils/html.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/image.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImgMainColor=function(e,r){return u.apply(this,arguments)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("../libs/ImgMainColor"))&&e.__esModule?e:{default:e};function u(){return(u=t(r().mark((function e(t,u){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.default)({src:t,canvasId:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/image.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/base.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Redirector=void 0;var e=require("../../../@babel/runtime/helpers/createClass"),r=require("../../../@babel/runtime/helpers/classCallCheck");exports.Redirector=e((function e(t){r(this,e),this.options=t}));
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/base.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirect.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRedirectPath=function(e){return p.apply(this,arguments)};var e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/createForOfIteratorHelper"),t=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=require("./redirector-for-path"),i=require("./redirector-for-q"),a=require("./redirector-for-id"),c=require("./redirector-for-shuffle"),o=require("./redirector-for-scene"),u=require("@mina-modules/mina-sentry"),s=[i.RedirectorForQ,a.RedirectorForId,c.RedirectorForShuffle,o.RedirectorForScene,n.RedirectorForPath];function p(){return(p=t(e().mark((function t(n){var i,a,c,o,p;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r(s),e.prev=1,i.s();case 3:if((a=i.n()).done){e.next=19;break}return c=a.value,e.prev=5,o=new c(n),e.next=9,o.getRedirectPath();case 9:if(!(p=e.sent)){e.next=12;break}return e.abrupt("return",p+"&redirect=Y");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),(0,u.error)(e.t0);case 17:e.next=3;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),i.e(e.t1);case 24:return e.prev=24,i.f(),e.finish(24);case 27:case"end":return e.stop()}}),t,null,[[1,21,24,27],[5,14]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirect.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirector-for-id.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedirectorForId=void 0;var e,r=require("../../../@babel/runtime/helpers/objectSpread2"),t=require("../../../@babel/runtime/helpers/regeneratorRuntime"),n=require("../../../@babel/runtime/helpers/asyncToGenerator"),i=require("../../../@babel/runtime/helpers/classCallCheck"),a=require("../../../@babel/runtime/helpers/createClass"),s=require("../../../@babel/runtime/helpers/inherits"),u=require("../../../@babel/runtime/helpers/createSuper"),o=(e=require("lodash"))&&e.__esModule?e:{default:e},c=require("@services/game"),l=require("@utils/tools"),p=require("./base");exports.RedirectorForId=function(e){s(h,e);var p,d,b=u(h);function h(e){return i(this,h),b.call(this,e)}return a(h,[{key:"getRandomLotteryId",value:(d=n(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.randomLotteries)(null,{type:"base",size:1,none_condition:!0});case 2:return r=e.sent,e.abrupt("return",o.default.get(r.data,"[0].id",null));case 4:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"getRedirectPath",value:(p=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.id){e.next=2;break}return e.abrupt("return",void 0);case 2:if("random"!==this.options.id){e.next=8;break}return e.next=5,this.getRandomLotteryId();case 5:n=e.sent,e.next=9;break;case 8:n=this.options.id;case 9:return e.abrupt("return","/pages/lucky/lottery/detail?".concat((0,l.queryString)(r(r({},this.options),{},{id:n}))));case 10:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})}]),h}(p.Redirector);
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirector-for-id.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirector-for-path.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedirectorForPath=void 0;var e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../@babel/runtime/helpers/classCallCheck"),i=require("../../../@babel/runtime/helpers/createClass"),n=require("../../../@babel/runtime/helpers/inherits"),a=require("../../../@babel/runtime/helpers/createSuper"),u=require("./base");exports.RedirectorForPath=function(u){n(c,u);var s,o=a(c);function c(e){return t(this,c),o.call(this,e)}return i(c,[{key:"getRedirectPath",value:(s=r(e().mark((function r(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.path){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",decodeURIComponent(this.options.path));case 3:case"end":return e.stop()}}),r,this)}))),function(){return s.apply(this,arguments)})}]),c}(u.Redirector);
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirector-for-path.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirector-for-q.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedirectorForQ=void 0;var e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../@babel/runtime/helpers/classCallCheck"),i=require("../../../@babel/runtime/helpers/createClass"),n=require("../../../@babel/runtime/helpers/inherits"),u=require("../../../@babel/runtime/helpers/createSuper"),a=require("./base");exports.RedirectorForQ=function(a){n(o,a);var s,c=u(o);function o(e){return t(this,o),c.call(this,e)}return i(o,[{key:"getRedirectPath",value:(s=r(e().mark((function r(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.q){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return","/pages/activities/LongtermActivity/LongtermActivity?f=a_p");case 3:case"end":return e.stop()}}),r,this)}))),function(){return s.apply(this,arguments)})}]),o}(a.Redirector);
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirector-for-q.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirector-for-scene.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedirectorForScene=void 0;var e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../@babel/runtime/helpers/classCallCheck"),i=require("../../../@babel/runtime/helpers/createClass"),n=require("../../../@babel/runtime/helpers/inherits"),u=require("../../../@babel/runtime/helpers/createSuper"),a=o(require("lodash")),l=o(require("@utils/analyse")),s=require("@utils/tools"),c=require("./base");function o(e){return e&&e.__esModule?e:{default:e}}exports.RedirectorForScene=function(c){n(p,c);var o,d=u(p);function p(e){return t(this,p),d.call(this,e)}return i(p,[{key:"getRedirectPath",value:(o=r(e().mark((function r(){var t;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options.scene){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.getRedirectUrlByJDScene(t)||this.getRedirectUrlByQueryParse(t));case 4:case"end":return e.stop()}}),r,this)}))),function(){return o.apply(this,arguments)})},{key:"getRedirectUrlByJDScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=e.split("_"),t=r[0],i=/^JD-[a-zA-Z\d]*$/g.test(t);if(i){(0,l.default)("jd_redirect, scene"),r[0]=r[0].replace("JD-","");var n=encodeURIComponent(r.join(""));return"/pages/lucky/lottery/detail?scene=".concat(n)}}},{key:"getRedirectUrlByQueryParse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=a.default.omitBy((0,s.decodeScene)(e),a.default.isEmpty);if(r.f&&(0,l.default)("redirect_offline",{from:r.f}),r.id)return"/pages/lucky/lottery/detail?".concat((0,s.queryString)(r))}}]),p}(c.Redirector);
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirector-for-scene.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/index/redirect/redirector-for-shuffle.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedirectorForShuffle=void 0;var e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../@babel/runtime/helpers/classCallCheck"),n=require("../../../@babel/runtime/helpers/createClass"),i=require("../../../@babel/runtime/helpers/inherits"),u=require("../../../@babel/runtime/helpers/createSuper"),a=require("@models/lottery"),s=require("@services/game"),c=require("./base");exports.RedirectorForShuffle=function(c){i(b,c);var l,o,p=u(b);function b(e){return t(this,b),p.call(this,e)}return n(b,[{key:"getRedirectPath",value:(o=r(e().mark((function r(){var t;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.shuffle){e.next=2;break}return e.abrupt("return");case 2:if(this.options.shuffle!==a.JumpFrom.QRCODE){e.next=8;break}return e.next=5,this.getPublicLotteryId();case 5:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return","/pages/lucky/lottery/detail?id=".concat(t));case 8:case"end":return e.stop()}}),r,this)}))),function(){return o.apply(this,arguments)})},{key:"getPublicLotteryId",value:(l=r(e().mark((function r(){var t,n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getDailyPublicLottery)();case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.data;case 11:return n=e.t2,e.abrupt("return",(null==n?void 0:n.id)||"");case 13:case"end":return e.stop()}}),r)}))),function(){return l.apply(this,arguments)})}]),b}(c.Redirector);
},{isPage:false,isComponent:false,currentFile:'utils/index/redirect/redirector-for-shuffle.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/join-lottery/join-condition-task-lottery.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JoinConditionTaskLottery=void 0;var e,t=require("../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../@babel/runtime/helpers/asyncToGenerator"),n=require("../../@babel/runtime/helpers/classCallCheck"),i=require("../../@babel/runtime/helpers/createClass"),a=require("../../@babel/runtime/helpers/inherits"),u=require("../../@babel/runtime/helpers/createSuper"),o=(e=require("lodash"))&&e.__esModule?e:{default:e},s=require("@utils/tips"),c=require("@utils/tools"),l=require("@utils/wechatAPI"),p=require("./type");exports.JoinConditionTaskLottery=function(e){a(f,e);var p,h,d=u(f);function f(e){var t;return n(this,f),(t=d.call(this,e)).task=o.default.get(t.lottery,"extra.join_condition.join_type"),t}return i(f,[{key:"type",get:function(){return"完成指定任务"}},{key:"isMatch",get:function(){return(0,c.isConditionTaskLottery)(this.lottery)}},{key:"isJoinable",get:function(){return!1}},{key:"beforeJoin",value:(h=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.task,e.next="mina"===e.t0?3:"article"===e.t0?6:"channel_video"===e.t0?9:12;break;case 3:return e.next=5,this.handleMinaTask();case 5:return e.abrupt("break",12);case 6:return e.next=8,this.handleUrlAd();case 8:return e.abrupt("break",12);case 9:return e.next=11,this.handleChannelVideo();case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"reset",value:function(){clearTimeout(this.timer)}},{key:"tooltip",get:function(){return(0,s.getConditionAdTip)(this.lottery).tip}},{key:"handleMinaTask",value:function(){var e=this;return new Promise((function(n){var i=o.default.get(e.lottery,"extra.join_condition")||{},a=function(){var i=r(t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:clearTimeout(e.timer),e.timer=setTimeout(n,15e3);case 2:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();return(0,c.isCurrentAppId)(i.app_id)?(0,c.isTabPage)(i.app_path)?wx.switchTab({url:i.app_path,success:function(){return a()}}):void wx.navigateTo({url:i.app_path,success:function(){return a()}}):(0,l.navigateToMiniProgram)({shortLink:i.shortlink,appId:i.app_id,path:i.app_path,success:function(){return a()}})}))}},{key:"handleUrlAd",value:function(){var e=this;return new Promise((function(t){var r=o.default.get(e.lottery,"extra.join_condition")||{};wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent(r.article_url)),success:function(){e.timer=setTimeout(t,15e3)}})}))}},{key:"handleChannelVideo",value:(p=r(t().mark((function e(){var r=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=o.default.get(r.lottery,"extra.join_condition")||{};(0,l.openChannelsActivity)({finderUserName:t.finder_user_name,feedId:t.feed_id}).then((function(){r.timer=setTimeout(e,15e3)}))})));case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})}]),f}(p.JoinLottery);
},{isPage:false,isComponent:false,currentFile:'utils/join-lottery/join-condition-task-lottery.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/join-lottery/type.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JoinLottery=void 0;var e=require("../../@babel/runtime/helpers/createClass"),r=require("../../@babel/runtime/helpers/classCallCheck");exports.JoinLottery=e((function e(t){r(this,e),this.lottery=t}));
},{isPage:false,isComponent:false,currentFile:'utils/join-lottery/type.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/login.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.appLogin=q,exports.checkNeedLogin=d,exports.checkSession=y,exports.clearToken=function(){h=""},exports.cloudLogin=g,exports.weComLogin=D;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(require("./global")),n=l(require("lodash")),a=require("@mina-modules/system-info"),o=require("./env"),u=require("@services/chou"),c=l(require("./event")),s=require("./user"),i=require("../services/wxwork"),p=require("@mina-modules/mina-sentry"),f=require("./tools");function l(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}var h="",w=!1,k=[];function g(){return b.apply(this,arguments)}function b(){return(b=t(e().mark((function r(){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!h){r.next=2;break}return r.abrupt("return",h);case 2:if(w){r.next=5;break}return w=!0,r.abrupt("return",new Promise((function(r){t(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:if(!e.sent){e.next=20;break}return e.prev=5,e.next=8,(0,u.getTokenFromCloud)();case 8:L(h=e.sent),e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(5),(0,p.error)("cloudLogin",e.t0),e.next=17,q(0);case 17:h=e.sent;case 18:e.next=22;break;case 20:n=wx.getStorageSync("SESSION_NEW_1"),h=n.token;case 22:for(r(h);k.length>0;)k.shift()();e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(0),(0,p.error)("cloudLogin",e.t1),e.t1;case 30:return e.prev=30,w=!1,e.finish(30);case 33:case"end":return e.stop()}}),t,null,[[0,26,30,33],[5,12]])})))()})));case 5:return r.abrupt("return",new Promise((function(e){k.push((function(){return g().then(e)}))})));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function d(){return v.apply(this,arguments)}function v(){return(v=t(e().mark((function t(){var a,o,u,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("check need login"),a=r.getData("auth"),!n.default.get(a,"data.token")){e.next=4;break}return e.abrupt("return",!1);case 4:if(e.prev=4,(o=wx.getStorageSync("SESSION_NEW_1")).token&&!((new Date).getTime()-o.time>1728e5)){e.next=8;break}return e.abrupt("return",!0);case 8:if(u=wx.getEnterOptionsSync(),c=u.path,(0,f.isLiteLotteryDetailPage)(c)){e.next=12;break}return e.next=12,y();case 12:return r.setData("auth",{data:{token:o.token}}),e.abrupt("return",!1);case 16:return e.prev=16,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),t,null,[[4,16]])})))).apply(this,arguments)}function y(){return m.apply(this,arguments)}function m(){return(m=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.isWxWork)()||"ios"!==(0,a.getSysInfo)().platform){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,wx.checkSession();case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var S=!1,_=[];function q(){return W.apply(this,arguments)}function W(){return(W=t(e().mark((function r(){var n,a=arguments;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:3,!h){r.next=3;break}return r.abrupt("return",h);case 3:if(S){r.next=6;break}return S=!0,r.abrupt("return",new Promise((function(r){t(e().mark((function t(){var a,s,i,p;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:if(!e.sent){e.next=17;break}return console.log("wechat login"),e.next=8,new Promise((function(e,t){var r=Date.now();wx.login({success:function(t){var n=Date.now();console.log("wechat login duration: ".concat((n-r)/1e3,"s")),c.default.emit("wx:login_success"),e(t)},fail:function(e){t(e)}})}));case 8:return a=e.sent,s=a.code,e.next=12,(0,u.UserLogin)(s,(0,o.isWxWork)());case 12:i=e.sent,L(h=i.access_token),e.next=19;break;case 17:p=wx.getStorageSync("SESSION_NEW_1"),h=p.token;case 19:for(D(),r(h);_.length>0;)_.shift()();S=!1,console.log("app login success"),e.next=36;break;case 26:if(e.prev=26,e.t0=e.catch(0),S=!1,!/已被封禁/.test(e.t0.message)){e.next=31;break}return e.abrupt("return",wx.showToast({title:e.t0.message,icon:"none",duration:3e3}));case 31:if(!(--n<0)){e.next=34;break}throw e.t0.errorType="network",e.t0;case 34:return e.next=36,q(n);case 36:case"end":return e.stop()}}),t,null,[[0,26]])})))()})));case 6:return r.abrupt("return",new Promise((function(e){_.push((function(){return q().then(e)}))})));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function D(){return O.apply(this,arguments)}function O(){return(O=t(e().mark((function r(){var n;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P();case 2:if(!r.sent){r.next=7;break}return console.log("qy login"),n=Date.now(),r.abrupt("return",new Promise((function(r,a){wx.qy.login({success:function(o){var u=Date.now();console.log("qy success",o),console.log("qy login duration: ".concat((u-n)/1e3,"s")),(0,i.login)(o.code).then(function(){var n=t(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return getApp().globalData.wxWorkData=n.data,e.next=3,(0,s.updateWxWork)();case 3:r(n),c.default.emit("wecom:load_auth_data_success");case 5:case"end":return e.stop()}}),t)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){a(e),c.default.emit("wecom:load_auth_data_fail",e)}))},fail:a})})));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function P(){return E.apply(this,arguments)}function E(){return(E=t(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.isWxWork)()){e.next=2;break}return e.abrupt("return",!1);case 2:if(null!==(r=getApp().globalData)&&void 0!==r&&r.wxWorkData){e.next=4;break}return e.abrupt("return",!0);case 4:return e.abrupt("return",new Promise((function(e,t){var r;null===(r=wx.qy)||void 0===r||r.checkSession({success:function(){e(!0)},fail:function(e){t(e)}})})));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function L(e){try{var t={time:(new Date).getTime(),token:e};r.setData("auth",{data:t}),wx.setStorageSync("SESSION_NEW_1",t)}catch(e){console.error(e)}}
},{isPage:false,isComponent:false,currentFile:'utils/login.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/lotteryUtils.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canContactCreator=function(e){var r=s.default.get(e,"kefu_share_data.type");return!(!r||r===u.KEFU_SHARE_TYPE.IMAGE_MINA)},exports.choiceTransform=function(e){var r=function(e){return"string"==typeof e?{text:e,images:[]}:e},t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==e?"（".concat(e,"）"):""},i="";!1===e.is_required&&(i="非必填");if("multi_choice"===e.type){"非必填"===i&&(i+="，"),i+="多选";var u=e.max_choice_count,o=void 0===u?1:u,a=e.min_choice_count,s=e.choice_data,l=void 0===s?[]:s;return 1!==o&&(i+="，至少选 ".concat(a," 个")),o<l.length&&1!==o&&(i+="，至多选 ".concat(o," 个")),i=t(i),n(n({},e),{},{tip:i,choice_data:l.map(r)})}return"single_choice"===e.type?("非必填"===i&&(i+="、"),i=t(i+="单选"),n(n({},e),{},{tip:i,choice_data:(e.choice_data||[]).map(r)})):(i=t(i),n(n({},e),{},{tip:i}))},exports.enableCommit=function(e){if(!e)return!1;return e.square_id&&!e.square_verified},exports.getCanNotifyWinnerDetail=function(e,r){if(function(e,r){var t;return!e||!r||A(e)||(null===(t=r.meta)||void 0===t?void 0:t.push_notification_result)||e.state!==u.LOTTERY_STATE_TYPE.DRAWED||!function(e){var r=e.finished_at||e.latest_draw_time;return(0,l.default)().isAfter((0,l.default)(r).add(30,"minutes"))}(e)}(e,r))return{canNotifyWinner:!1,userCount:0};var t=(a=r,f=a.data,p=a.meta,_=f.some((function(e){return(0,c.isFillAddressPrize)(e.prize)&&e.lucky_users.contact_set<e.lucky_users.count})),v=(0,l.default)().isSameOrBefore((0,l.default)((null===(s=p.lucky_user_receive)||void 0===s||null===(d=s.address)||void 0===d?void 0:d.set_deadline)||0)),_&&v),n=function(e){var r,t,n=e.data,i=e.meta,u=n.some((function(e){return(0,c.isFillWinnerInfoPrize)(e.prize)&&e.lucky_users.fill_info_set<e.lucky_users.count})),o=(0,l.default)().isSameOrBefore((0,l.default)((null===(r=i.lucky_user_receive)||void 0===r||null===(t=r.fill_info)||void 0===t?void 0:t.set_deadline)||0));return u&&o}(r),i=function(e,r){var t=r.data;return e?t.filter((function(e){return(0,c.isFillAddressPrize)(e.prize)&&e.lucky_users.contact_set<e.lucky_users.count})).reduce((function(e,r){return r.lucky_users.count-r.lucky_users.contact_set+e}),0):0}(t,r),o=function(e,r){var t=r.data;return e?t.filter((function(e){return(0,c.isFillWinnerInfoPrize)(e.prize)&&e.lucky_users.fill_info_set<e.lucky_users.count})).reduce((function(e,r){return r.lucky_users.count-r.lucky_users.fill_info_set+e}),0):0}(n,r);var a,s,d,f,p,_,v;return{canNotifyWinner:t||n,userCount:i+o}},exports.getJoinGroupImage=function(e){var r=s.default.get(e,"extra.groupchat_images",[]),t=r.length;return t>0?r[Math.floor(Math.random()*t)]:""},exports.goToLuckyUsersShareImage=function(e){return k.apply(this,arguments)},exports.handlePublicLottery=function(e){return g.apply(this,arguments)},exports.hasAddressPrize=function(e){if(!e)return!1;var r=e.prizes;return(void 0===r?{data:[]}:r).data.some((function(e){return(0,c.isFillAddressPrize)(e)}))},exports.hasShopPrize=function(e){for(var r,t=(null==e||null===(r=e.prizes)||void 0===r?void 0:r.data)||[],n=0,i=t.length;n<i;n++)if(t[n].type===u.PRIZE_TYPES.MARKET)return!0;return!1},exports.hasWinnerInfoPrize=function(e){var r,t;if(!e)return!1;return null===(r=e.prizes)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.some((function(e){return(0,c.isFillWinnerInfoPrize)(e)}))},exports.isAllowMultiJoin=function(e){var r;return s.default.isArray(null==e||null===(r=e.extra)||void 0===r?void 0:r.multi_join)},exports.isBigTurntable=function(e){var r;return(null==e||null===(r=e.marketing)||void 0===r?void 0:r.type)===_.marketingTypes.WHEEL},exports.isFriendLottery=function(e){return!!e.direct_share_only},exports.isFunny=T,exports.isGroupChatOnly=function(e){return!!e.groupchat_only},exports.isGroupLottery=R,exports.isJoinNeedShareInfo=function(e){if(!e)return!1;return e.direct_share_only||R(e)},exports.isLimitPeople=function(e){return!!s.default.get(e,"extra.limit_join_count")},exports.isLotteryBasicJoinable=function(e){var r=e||{},t=r.is_participator,n=r.state;return(n===u.LOTTERY_STATE_TYPE.CREATED||n===u.LOTTERY_STATE_TYPE.STARTED)&&!t},exports.isLotteryCanEdit=function(e){if([null==e?void 0:e.square_id,null==e?void 0:e.square_verified].every(Boolean))return!1;if((null==e?void 0:e.draw_type)===u.DRAW_TYPE.ONTIME&&((null==e?void 0:e.state)===u.LOTTERY_STATE_TYPE.STARTED||(null==e?void 0:e.user_count)>0))return!1;if(null!=e&&e.promotion_id)return!1;var r;return(null==e?void 0:e.draw_type)===u.DRAW_TYPE.PARTY?[null==e?void 0:e.is_initiator,null==e?void 0:e.editable,!(null!=e&&null!==(r=e.party)&&void 0!==r&&r.show_result)].every(Boolean):[null==e?void 0:e.is_initiator,null==e?void 0:e.editable].every(Boolean)},exports.isLotteryClosed=function(e){if(!e)return!1;return e.state===u.LOTTERY_STATE_TYPE.CLOSED},exports.isLotteryDrawOver72Hours=function(e){var r=s.default.get(e,"finished_at");if(!r)return!1;return(new Date).getTime()-new Date(r).getTime()>=2592e5},exports.isLotteryEnd=function(e){if(!e)return!1;return 0!==e.state&&1!==e.state},exports.isLotteryShareable=function(e){if(!e)return!1;if(e.is_initiator)return!0;return!(!e.is_official&&!e.square)||e.shareable},exports.isLotteryShowResult=function(e){if(!e)return!1;return e.party&&e.party.show_result},exports.isMarketing=function(e){return!(null==e||!e.marketing)},exports.isOnTime=A,exports.isOpenRecallUser=function(e){return!!s.default.get(e,"extra.enable_user_recall")},exports.isParty=y,exports.isPrivateLottery=function(e){return!(null!=e&&e.is_official||null!=e&&e.square_id)},exports.isPrizeLock=function(e){var r;return null==e||null===(r=e.extra)||void 0===r?void 0:r.prize_lock},exports.isProLottery=P,exports.isPublicLottery=function(e){return(null==e?void 0:e.is_official)||(null==e?void 0:e.square_id)},exports.isQuizLottery=function(e){var r,t;return(null==e||null===(r=e.form_template)||void 0===r?void 0:r.enable)&&"exam"===(null==e||null===(t=e.form_template)||void 0===t?void 0:t.type)},exports.isShowAd=function(e){return"party"!==e.draw_type&&(e.square_id||e.is_official&&e.show_ad||!e.is_payed)},exports.isSmart=function(e){return null==e?void 0:e.is_smart_promotion},exports.isSquare=function(e){return!!e&&(e.square&&e.square.verified&&e.square.displayed)},exports.isStraw=function(e){var r;return(null==e||null===(r=e.marketing)||void 0===r?void 0:r.type)===_.marketingTypes.STRAW},exports.isVerifyJoinLottery=function(e){var r;return!s.default.isEmpty(null==e||null===(r=e.lottery_feature)||void 0===r?void 0:r.verify_join)},exports.isWeComGroupChatOnly=function(e){var r;return!(null===(r=e.lottery_feature)||void 0===r||!r.qy_group_chat)},exports.isWeComGroupLottery=w,exports.showShaidanSetting=function(e){var r=null==e?void 0:e.state;return r===u.LOTTERY_STATE_TYPE.EXPIRED||r===u.LOTTERY_STATE_TYPE.CREATED||r===u.LOTTERY_STATE_TYPE.STARTED||r===u.LOTTERY_STATE_TYPE.DRAWED||r===u.LOTTERY_STATE_TYPE.CLOSED&&!y(e)&&!T(e)&&!A(e)},exports.updatePublicLotteryTask=function(r){e=r},exports.useCustomShareTemplate=function(e){var r,t;return e.is_initiator&&"custom"===(null===(r=e.wechat_share_image)||void 0===r?void 0:r.choose)||(null===(t=e.wechat_share_image)||void 0===t?void 0:t.use_custom)};var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=require("../@babel/runtime/helpers/objectSpread2"),i=require("@mina-modules/mina-sentry"),u=require("../models/lottery"),o=require("../models/task"),a=require("../services/points"),s=v(require("lodash")),l=v(require("moment")),c=require("./prize"),d=require("@services/lucky-users"),f=require("./tools"),p=require("@utils/async-helper"),_=require("@models/marketing");function v(e){return e&&e.__esModule?e:{default:e}}function y(e){return(null==e?void 0:e.draw_type)===u.DRAW_TYPE.PARTY}function T(e){return(null==e?void 0:e.theme)===u.DRAW_TYPE.FUNNY}function h(){return m.apply(this,arguments)}function m(){return(m=t(r().mark((function e(){var t,n,u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.fetchTasks)(!1);case 3:if(t=e.sent,n=t.data.find((function(e){return"日任务"===e.group})),u={id:-999,expired_at:(0,l.default)().endOf("day").format(),current_step:5,total_step:3,rewards:[{type:"bp",count:30}]},!n){e.next=11;break}if(!(s=n.data.find((function(e){return e.step_type===o.Task_Step_Type.JOIN_FRONTPAGE&&(0===e.state||1===e.state)})))){e.next=11;break}return c={id:s.id,expired_at:s.expired_at,current_step:s.current_step,total_step:s.total_step,rewards:s.rewards},e.abrupt("return",c);case 11:return e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(0),(0,i.error)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function x(){return E.apply(this,arguments)}function E(){return(E=t(r().mark((function t(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!e){r.next=3;break}return r.abrupt("return",e);case 3:return r.next=5,h();case 5:return e=r.sent,r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),(0,i.error)(r.t0);case 12:case"end":return r.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function g(){return(g=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1,n=P(t),!n&&!0!==t.is_new_user&&(t.draw_type!==u.DRAW_TYPE.PARTY&&t.draw_type!==u.DRAW_TYPE.CHATROOM)){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.next=9,x();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return(null==e?void 0:e.is_payed)||(null==e?void 0:e.message_enable)||s.default.get(e,"extra.virtual_ticket_id",-1)>0}function A(e){return!!e&&e.draw_type===u.DRAW_TYPE.ONTIME}function k(){return(k=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.withLoading)((0,d.fetchLuckyUsersShareImage)(t),{onError:function(e){(0,f.showToast)(e.message)}});case 2:n=e.sent,(0,f.goToGenerateImage)({urls:[n],label:"winnershare_".concat(t)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return e.groupchat_only||w(e)}function w(e){var r;return!(null===(r=e.lottery_feature)||void 0===r||!r.qy_group_chat)}
},{isPage:false,isComponent:false,currentFile:'utils/lotteryUtils.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/manager.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openManagerToolkit=function(){var i=this;if(!n.default.get(getApp(),"globalData.userProfile.is_manager",!1))return p=null===(l=getApp())||void 0===l||null===(c=l.globalData)||void 0===c||null===(b=c.userInfo)||void 0===b?void 0:b.user_id,d={options:(0,a.getCurrentPage)().options,userId:p},g=(0,s.default)(JSON.stringify(d)),f="".concat(g,"_").concat(p),(0,u.info)(e({},f,d)),void wx.setClipboardData({data:f,success:function(){wx.showToast({title:"已复制 ID，请联系客服处理",icon:"none"})}});var l,c,b,p,d,g,f;var m=getCurrentPages(),w=m[m.length-1],x=w.options,h=(0,a.queryString)(x,{encode:!1}),k=w.route+(h?"?"+h:""),v="开启调试";this.isEnableDebug&&(v="关闭调试");wx.showActionSheet({itemList:["版本号: ".concat(o.default.VERSION),"wx01bb1ef166cd3f4e","".concat(k),"页面 / 抽奖跳转","查看、设置 Token",v],success:(y=r(t().mark((function e(r){var n,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.tapIndex,e.next=0===e.t0?3:1===e.t0?5:2===e.t0?7:3===e.t0?9:4===e.t0?11:5===e.t0?16:19;break;case 3:return null===(n=i.selectComponent("#manager-toolkit"))||void 0===n||n.show({managerBoxType:"system"}),e.abrupt("break",19);case 5:return wx.setClipboardData({data:"wx01bb1ef166cd3f4e",success:function(){wx.showToast({title:"已复制",icon:"none"})}}),e.abrupt("break",19);case 7:return k&&wx.setClipboardData({data:k,success:function(){wx.showToast({title:"路径已复制",icon:"none"})}}),e.abrupt("break",19);case 9:return null===(o=i.selectComponent("#manager-toolkit"))||void 0===o||o.show({managerBoxType:"redirect"}),e.abrupt("break",19);case 11:return e.next=13,(0,a.getToken)();case 13:return u=e.sent,null===(s=i.selectComponent("#manager-toolkit"))||void 0===s||s.show({myToken:u,managerBoxType:"token"}),e.abrupt("break",19);case 16:return wx.setEnableDebug({enableDebug:!i.isEnableDebug}),i.isEnableDebug=!i.isEnableDebug,e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})});var y};var e=require("../@babel/runtime/helpers/defineProperty"),t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=i(require("lodash")),a=require("@utils/tools"),o=i(require("@/config")),s=i(require("md5")),u=require("@mina-modules/mina-sentry");function i(e){return e&&e.__esModule?e:{default:e}}
},{isPage:false,isComponent:false,currentFile:'utils/manager.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/marketing.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultPrizeList=void 0,exports.getInfoList=function(t){var e=t.description,r=t.latest_draw_time,i=t.finished_at,u=[],l=function(t){var e;if(((null===(e=t.prizes)||void 0===e?void 0:e.data)||t.prizes||[]).some((function(t){return t.count})))return{title:"活动奖品",lottery:t};return null}(t),a=function(t){if(!t)return null;return{title:"活动时间",text:"".concat((0,n.default)(t).format("Y.M.D H:mm")," 截止")}}(i||r),o=function(t){if(!t)return null;return{title:"活动说明",text:t}}(e);l&&u.push(l);a&&u.push(a);o&&u.push(o);return u},exports.getPrizeListOfBigTurntable=function(t,e){return function(t,e){return 1===function(t,e){var r=function(t){return t.reduce((function(t,e){return e.count?t+e.count:t}),0)}(t);if(!r||!e)return 0;return r/e}(t,e)}(t,e)?function(t){var e=i;switch(t.length){case 1:e=Array(6).fill(l(t[0],0,t.length));break;case 2:e=Array(6).fill(u).map((function(e,r){return r<3?l(t[0],0,t.length):l(t[1],1,t.length)}));break;case 3:e=Array(6).fill(u).map((function(e,r){return 0===r||1===r?l(t[0],0,t.length):2===r||3===r?l(t[1],1,t.length):4===r||5===r?l(t[2],2,t.length):void 0}));break;case 4:e=Array(4).fill(u).map((function(e,r){return l(t[r],r,t.length)}));break;case 5:e=Array(5).fill(u).map((function(e,r){return l(t[r],r,t.length)}));break;case 6:e=Array(6).fill(u).map((function(e,r){return l(t[r],r,t.length)}))}return e}(t):function(t){var e=i;switch(t.length){case 1:e=Array(6).fill(u).map((function(e,r){return r<5&&2!==r?l(t[0],0,t.length):e}));break;case 2:e=Array(6).fill(u).map((function(e,r){return 0===r||1===r?l(t[0],0,t.length):3===r||4===r?l(t[1],1,t.length):e}));break;case 3:e=Array(6).fill(u).map((function(e,r){return 0===r?l(t[0],0,t.length):2===r?l(t[1],1,t.length):4===r?l(t[2],2,t.length):e}));break;case 4:e=Array(6).fill(u).map((function(e,r){return r<2?l(t[r],r,t.length):3===r?l(t[2],2,t.length):4===r?l(t[3],3,t.length):e}));break;case 5:e=Array(6).fill(u).map((function(e,r){return r<5?l(t[r],r,t.length):e}));break;case 6:e=Array(7).fill(u).map((function(e,r){return r<6?l(t[r],r,t.length):e}))}return e}(t)},exports.thanks=void 0;var t,e=require("../constant"),r=require("../models/lottery"),n=(t=require("moment"))&&t.__esModule?t:{default:t};var i=exports.defaultPrizeList=Array(6).fill({title:"奖品",img:"https://lucky-cdn.nocode.com/mina/lottery/pic-empty.png"}),u=exports.thanks={title:"谢谢参与",img:"https://lucky-cdn.nocode.com/mina/lottery/pic-nothing.png"};function l(t,e,r){return{id:t.id,title:1===r?"奖品":"".concat(["一","二","三","四","五","六"][e],"等奖"),img:a(t)}}function a(t){return t.type===r.PrizeTypes.MONEY||t.type===r.PrizeTypes.RANDOM?t.image||e.MONEY_PRIZE_COVER:t.image||e.PRIZE_DEFAULT_IMAGE_MAP[t.type]}
},{isPage:false,isComponent:false,currentFile:'utils/marketing.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/multijoin-subscribe.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subscribe=function(e){return c.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("@services/newSub"),n=require("@services/subscribeMessage"),s=a(require("lodash")),u=a(require("./analyse")),i=require("./subscribeMessage");function a(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=r(e().mark((function r(t){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[i.TEMPLATE_TYPES.MULTI_JOIN_RECALL],e.prev=1,e.next=4,o(n,t,"sub_ontime_daily_view");case 4:return e.abrupt("return",[null]);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",[e.t0]);case 10:case"end":return e.stop()}}),r,null,[[1,7]])})))).apply(this,arguments)}var o=function(){var a=r(e().mark((function a(c,o,p){return e().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,f){if(!wx.requestSubscribeMessage)return f(Error("微信版本过低，无法使用订阅消息功能，请升级到最新微信版本后重试。"));var b,l;wx.requestSubscribeMessage({tmplIds:c.map((function(e){return i.TEMPLATE_IDS[e]})),success:(l=r(e().mark((function r(b){var l,w,d;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.getSubscriptionsSetting)();case 2:return l=e.sent,(0,u.default)(p,{label:new i.SubscribeMessageLabel({setting:l,result:b})}),w=s.default.pickBy(b,(function(e){return"accept"===e})),s.default.isEmpty(w)&&f(Error("请允许订阅消息通知")),d=c.map((function(e){return{subscribe_type:e,data_id:o,notify:!0}})),e.next=9,(0,n.postSubscribeMessage)(d);case 9:a();case 10:case"end":return e.stop()}}),r)}))),function(e){return l.apply(this,arguments)}),fail:(b=r(e().mark((function r(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(Error(n.errMsg)),e.next=3,(0,t.getSubscriptionsSetting)();case 3:e.sent.mainSwitch||wx.showModal({content:"请在设置中选择接收订阅消息",success:function(e){e.confirm&&wx.openSetting()}});case 5:case"end":return e.stop()}}),r)}))),function(e){return b.apply(this,arguments)})})})));case 1:case"end":return a.stop()}}),a)})));return function(e,r,t){return a.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'utils/multijoin-subscribe.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/multijoin-task.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTaskExtraInfo=void 0;exports.getTaskExtraInfo=function(o){return{mina:{label:"体验小程序 15 秒",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-mina-rounded@3x.png"},webview:{label:"浏览指定公众号文章 15 秒",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-web-rounded@3x.png"},channel_video:{label:"浏览视频号视频 15 秒",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-video-rounded@3x.png"},image:{label:"浏览图片 6 秒",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-image-rounded@3x.png"},qrcode:{label:"扫描参与二维码",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-scan-rounded@3x.png"},ad_video:{label:"观看完整视频 1 次",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-video-rounded@3x.png"},code:{label:"输入正确口令",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-locker-rounded@3x.png"},daily:{label:"每天访问抽奖页面",logo:"https://lucky-cdn.nocode.com/mina/lottery/icon-calendar-rounded@3x.png"}}[o]};
},{isPage:false,isComponent:false,currentFile:'utils/multijoin-task.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/nodesToHtml.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var r="",n=0,a=t.length;n<a;n++)r+=e(t[n]);return r};var t=require("../@babel/runtime/helpers/typeof");function e(r){if(r.name){var n="";if(r.attrs&&(n=function(e){var r="";if(e&&"object"===t(e))for(var n in e)e.hasOwnProperty(n)&&(r+="".concat(n,'="').concat(e[n],'" '));return r}(r.attrs)),r.children){var a="";a=n?"<".concat(r.name," ").concat(n,">"):"<".concat(r.name,">");for(var c="</".concat(r.name,">"),o=a,i=0,u=r.children.length;i<u;i++)o+=e(r.children[i]);return o+=c}return"<".concat(r.name," ").concat(n," />")}return"text"===r.type&&r.text||""}
},{isPage:false,isComponent:false,currentFile:'utils/nodesToHtml.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/button/create.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buttonFor=function(p,w){w&&console.log(JSON.stringify(p,null,"  "));var y=[q.default,h.default,j.default,o.default,t.default,c.default,a.default,d.default,f.default,l.default,b.default,i.default,s.default,u.default,r.default,n.default];try{var k,m=y.find((function(e){return e.match(p)})),v=null==m||null===(k=m.create)||void 0===k?void 0:k.call(m,p);if(!m||!v)throw new Error("即开即中:未知的抽奖类型_id: ".concat(p.lottery.id));return v}catch(t){return(0,e.error)(t),{type:"",text:"立即抽奖",onClick:function(e){e.onClickJoin()}}}};var e=require("@mina-modules/mina-sentry"),t=p(require("../buttons/before-join-check-login-button")),o=p(require("../buttons/before-join-end-button")),u=p(require("../buttons/before-join-public-button")),n=p(require("../buttons/before-join-directly-button")),r=p(require("../buttons/before-join-directly-lite-button")),i=p(require("../buttons/before-join-check-wecom-group-button")),b=p(require("../buttons/before-join-check-wechat-group-button")),f=p(require("../buttons/before-join-wechat-friend-button")),l=p(require("../buttons/before-join-wecome-friend-button")),c=p(require("../buttons/before-join-check-official-button")),a=p(require("../buttons/before-join-condition-task-button")),d=p(require("../buttons/before-join-input-code-button")),s=p(require("../buttons/before-join-zsxq-button")),q=p(require("../buttons/close-join-button")),j=p(require("../buttons/after-join-not-win-button")),h=p(require("../buttons/after-join-win-button"));function p(e){return e&&e.__esModule?e:{default:e}}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/button/create.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/button/data.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getButtonData=function(e){return i.apply(this,arguments)};var e,r=require("../../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("lodash"))&&e.__esModule?e:{default:e},a=require("@mina-modules/system-info"),u=require("@services/group"),s=require("@services/game");function i(){return(i=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.default.isEmpty(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.t0=t,e.t1=(0,a.getSysInfo)(),e.next=6,o(t);case 6:return e.t2=e.sent,e.next=9,p(t);case 9:return e.t3=e.sent,e.next=12,(0,s.canJoinForWeComGroupchat)(t);case 12:return e.t4=e.sent,e.next=15,l(t);case 15:return e.t5=e.sent,e.abrupt("return",{lottery:e.t0,sysInfo:e.t1,groupOnlyDisable:e.t2,fromCreatorShareCard:e.t3,canJoinForWeComGroupchat:e.t4,isOfficialCodeEffective:e.t5});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return(c=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.groupchat_only&&!t.is_participator,!e.t0){e.next=5;break}return e.next=4,(0,u.canJoinGroup)(t);case 4:e.t0=!e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=t(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.direct_share_only){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,u.authPrivateMessage)();case 4:return n=e.sent,a=n.valid,e.abrupt("return",a||!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=t(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.officialCode){e.next=5;break}return e.next=3,(0,s.isJoinCodeEffective)(t.id,t.officialCode);case 3:return a=e.sent,e.abrupt("return",n.default.get(a,"data.result",!1));case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/button/data.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/after-join-not-win-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e=require("../../../@babel/runtime/helpers/objectSpread2"),i=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),o=(t=require("lodash"))&&t.__esModule?t:{default:t},n=require("@models/lottery"),l=require("@utils/tools"),u=require("@utils/ontime-lottery/prize"),a=require("@services/multijoin"),s=require("@/utils/lotteryUtils");var c={type:"未中奖",match:function(t){var e=t.lottery;return e.is_participator&&(e.state===n.LOTTERY_STATE_TYPE.CREATED||e.state===n.LOTTERY_STATE_TYPE.STARTED||e.state===n.LOTTERY_STATE_TYPE.DRAWED)&&!(0,u.hasWinerPrize)(e)},create:function(t){return(0,s.isLotteryEnd)(t.lottery)?{type:"未中奖",tooltip:"未中奖，感谢参与",text:"抽奖已结束",disabled:!0,onClick:function(){}}:(0,s.isAllowMultiJoin)(t.lottery)?function(t){var n;if(t.left_join_count&&t.left_join_count>0)return{type:"未中奖",text:"立即抽奖",tooltip:"运气来了，都别拦我",disabled:!1,onClick:function(e){return r(i().mark((function r(){var o;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=(0,a.multiJoin)(t).then((function(t){return t.data})),e.onClickJoin(o);case 2:case"end":return i.stop()}}),r)})))()}};if((t.multi_join_tasks||[]).length)return{type:"未中奖",tooltip:"没有参与次数了",text:"点击获取参与次数",disabled:!1,onClick:function(e){var i;((null===(i=e.getMultiJoinTaskDialog)||void 0===i?void 0:i.call(e))||(0,l.getCurrentPage)().selectComponent("#MultiJoinTaskDialog")).show({lottery:t,onCompleteTask:function(){e.refreshLottery()}})}};var u=(null===(n=t.extra)||void 0===n?void 0:n.initiator_contact_img)||[];return e({type:"未中奖",tooltip:"没有参与次数了，问问发起人怎么获得额外参与次数？",text:"联系发起人"},u.length>0?{disabled:!1,onClick:function(){wx.previewImage({urls:o.default.shuffle(u)})}}:{disabled:!0,onClick:function(){}})}(t.lottery):{type:"未中奖",tooltip:"未中奖，感谢参与",text:"已抽",disabled:!0,onClick:function(){}}}};exports.default=c;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/after-join-not-win-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/after-join-win-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../../@babel/runtime/helpers/objectSpread2"),e=s(require("lodash")),i=s(require("@utils/analyse")),r=require("@utils/ontime-lottery/prize"),o=require("@utils/ontime-lottery/prize-action"),n=require("@models/lottery"),l=require("@utils/tools"),u=require("@services/multijoin"),a=require("@/utils/lotteryUtils");function s(t){return t&&t.__esModule?t:{default:t}}var c={type:"中奖",match:function(t){return(e=t.lottery).is_participator&&(e.state===n.LOTTERY_STATE_TYPE.CREATED||e.state===n.LOTTERY_STATE_TYPE.STARTED||e.state===n.LOTTERY_STATE_TYPE.DRAWED)&&(0,r.hasWinerPrize)(t.lottery);var e},create:function(n){var s,c=n.lottery;if(!(0,a.isAllowMultiJoin)(c)){var d=(0,r.getCurrentUserPrize)(c),f=d?(0,r.getPrizeName)(d):"",p=function(t,e){var i,r=(0,o.getPrizeAction)(t,e),n=r.name,l=r.handler;"复制兑换码"===n&&null!==(i=e.info)&&void 0!==i&&i.receive_info&&(n="复制兑换码及查看说明");return{text:n,onClick:l}}(c,d),v=p.text,_=p.onClick;return{type:"中奖",tooltip:f,text:v,disabled:!1,onClick:function(t){if((0,i.default)("detail_getprize",{label:v}),(0,l.isLotteryLite)()&&(!(null==(o=wx.getStorageSync("USER_1"))?void 0:o.nick_name)||!o.user_id)){var e,r=(null===(e=t.getLoginDialog)||void 0===e?void 0:e.call(t))||(0,l.getCurrentPage)().selectComponent("#login-dialog");return null==r?void 0:r.show({confirm:function(){_()}})}var o;_()}}}if(!function(t){return t.extra.repeat_lucky&&!(0,a.isLotteryEnd)(t)}(c))return{type:"中奖",tooltip:"恭喜你，中奖啦",text:"在下方查看领奖",disabled:!1,onClick:function(){}};if(function(t){return t.left_join_count&&t.left_join_count>0}(c))return{type:"中奖",tooltip:"运气来了，都别拦我",text:"立即抽奖",disabled:!1,onClick:function(t){var e=(0,u.multiJoin)(c).then((function(t){return t.data}));t.onClickJoin(e)}};if((c.multi_join_tasks||[]).length)return{type:"中奖",tooltip:"没有参与次数了",text:"点击获取参与次数",disabled:!1,onClick:function(t){var e;((null===(e=t.getMultiJoinTaskDialog)||void 0===e?void 0:e.call(t))||(0,l.getCurrentPage)().selectComponent("#MultiJoinTaskDialog")).show({lottery:c,onCompleteTask:function(){t.refreshLottery()}})}};var g=(null===(s=c.extra)||void 0===s?void 0:s.initiator_contact_img)||[];return t({type:"中奖",tooltip:"没有参与次数了，问问发起人怎么获得额外参与次数？",text:"联系发起人"},g.length>0?{disabled:!1,onClick:function(){wx.previewImage({urls:e.default.shuffle(g)})}}:{disabled:!0,onClick:function(){}})}};exports.default=c;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/after-join-win-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-check-login-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=(e=require("lodash"))&&e.__esModule?e:{default:e},o=require("@utils/tools");var r={type:"登录后参与",match:function(e){return!!l(e)},create:function(e){return l(e)}};function l(e){return e.lottery.is_participator||(r=t.default.get(getApp().globalData,"userInfo.nick_name",""),l=t.default.get(getApp().globalData,"userInfo.avatar",""),r&&l)?null:{type:"登录后参与",tooltip:"登录后参与抽奖",text:"立即登录",disabled:!1,onClick:function(e){var t,r=(null===(t=e.getLoginDialog)||void 0===t?void 0:t.call(e))||(0,o.getCurrentPage)().selectComponent("#login-dialog");null==r||r.show({confirm:function(){e.refreshLottery()}})}};var r,l}exports.default=r;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-check-login-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-check-official-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e=(t=require("lodash"))&&t.__esModule?t:{default:t},o=require("@utils/tools");var i="公众号粉丝参与",l={type:i,match:function(t){return!!a(t)},create:function(t){return a(t)}};function a(t){if(!(0,o.isOfficialFanseOnly)(t.lottery)||t.lottery.is_participator)return null;var l=e.default.get(t.lottery,"official_data.official_auth_id",""),a=e.default.get(t.lottery,"official_data.official_id","");return l&&!a?{type:i,text:"无法参与",tooltip:"公众号还未授权",disabled:!0,onClick:function(){}}:-1===e.default.get(t.lottery,"official_data.state")?{type:i,text:"无法参与",disabled:!0,tooltip:"公众号授权已失效",onClick:function(){}}:t.lottery.officialCode?t.isOfficialCodeEffective?null:{type:i,text:"查看详情",disabled:!1,tooltip:"本次抽奖资格已被他人使用",onClick:function(){wx.showModal({content:"本次抽奖资格已被他人使用",confirmText:"重新获取",showCancel:!1,success:function(e){e.confirm&&wx.redirectTo({url:"/pages/lucky/lottery/detail?id=".concat(t.lottery.id,"&redirect=Y")})}})}}:{type:i,tooltip:"关注公众号后可参与",text:"立即关注",disabled:!1,onClick:function(e){var i;((null===(i=e.getFollowOfficialDialog)||void 0===i?void 0:i.call(e))||(0,o.getCurrentPage)().selectComponent("#join-normal-official-dialog")).show({lottery:t.lottery})}}}exports.default=l;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-check-official-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-check-wechat-group-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@utils/lotteryUtils"),e=require("@utils/system"),r={type:"微信群聊",match:function(t){return!!i(t)},create:function(t){return i(t)}};function i(r){var i=r.lottery,o=r.groupOnlyDisable;if(i.is_participator||!i.groupchat_only||!o)return null;if(!(0,e.canUsePrivateMessage)(r.sysInfo))return{type:"微信群聊",tooltip:"请将微信升级至最新版本后参与",text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}};var n=(0,t.getJoinGroupImage)(i);return n?{type:"微信群聊",tooltip:"仅指定群聊成员可参与",text:"点击进群",disabled:!1,onClick:function(){wx.previewImage({urls:[n],current:n,showmenu:!0})}}:{type:"微信群聊",tooltip:"仅指定群聊成员可参与",text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}}}exports.default=r;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-check-wechat-group-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-check-wecom-group-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../@babel/runtime/helpers/objectSpread2"),t=require("@utils/system"),o=require("@/utils/lotteryUtils"),r="企业微信群聊",n={type:r,match:function(e){return!!i(e)},create:function(e){return i(e)}};function i(n){var i,u=n.lottery,l=n.canJoinForWeComGroupchat;if(u.is_participator||!(0,o.isWeComGroupLottery)(u)||!0===l)return null;var c=null==u||null===(i=u.lottery_feature)||void 0===i?void 0:i.qy_group_chat;return(0,t.isWxWork)(n.sysInfo)?{type:r,tooltip:"请在手机微信上进群参与抽奖",text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}}:(0,t.canUseGetGroupEnterInfo)(n.sysInfo)?{type:r,tooltip:"仅可在企业微信客户群内参与",text:"暂无资格参与抽奖",disabled:!1,onClick:function(){wx.showModal(e({title:"仅可在企业微信客户群内参与",content:"当前检测到你不在企业微信群内，请进群后点击相应的抽奖卡片再试。如你已进群，请联系发起人解决。"},null!=c&&c.qrcode?{confirmText:"去进群",success:function(e){e.confirm&&wx.previewImage({current:c.qrcode,urls:[c.qrcode]})}}:{confirmText:"我知道了",showCancel:!1}))}}:{type:r,tooltip:"请更新微信至最新版本再试",text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}}}exports.default=n;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-check-wecom-group-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-condition-task-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@utils/tools"),o=require("@utils/join-lottery/join-condition-task-lottery"),e={type:"完成指定任务",match:function(o){return(0,t.isConditionTaskLottery)(o.lottery)&&!o.lottery.is_participator},create:function(t){return{type:"完成指定任务",tooltip:new o.JoinConditionTaskLottery(t.lottery).tooltip,text:"参与抽奖",disabled:!1,onClick:function(t){t.onClickJoin()}}}};exports.default=e;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-condition-task-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-directly-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../../../@babel/runtime/helpers/Arrayincludes");var e=require("@models/lottery"),t={type:"普通抽奖",match:function(t){return[e.LOTTERY_STATE_TYPE.CREATED,e.LOTTERY_STATE_TYPE.STARTED].includes(t.lottery.state)&&!t.lottery.is_participator},create:function(){return{type:"普通抽奖",tooltip:"运气来了，都别拦我",text:"立即抽奖",disabled:!1,onClick:function(e){e.onClickJoin()}}}};exports.default=t;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-directly-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-directly-lite-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../../../@babel/runtime/helpers/Arrayincludes");var e,t=require("@models/lottery"),r=require("@utils/tools"),i=(e=require("@utils/analyse"))&&e.__esModule?e:{default:e},o=require("@services/lottery-lite");var l={type:"轻量抽奖",match:function(e){return!!(0,r.isLotteryLite)()&&([t.LOTTERY_STATE_TYPE.CREATED,t.LOTTERY_STATE_TYPE.STARTED].includes(e.lottery.state)&&!e.lottery.is_participator)},create:function(e){return{type:"轻量抽奖",tooltip:"运气来了，都别拦我",text:"立即抽奖",disabled:!1,onClick:function(t){(0,i.default)("detail_join",{id:e.lottery.id});var r=(0,o.joinLottery)(e.lottery.id).then((function(e){return e.data.data})).catch((function(e){throw t.refreshLottery(),e}));t.onClickJoin(r)}}}};exports.default=l;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-directly-lite-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-end-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@utils/lotteryUtils"),e={type:"已结束",match:function(e){return(0,t.isLotteryEnd)(e.lottery)&&!e.lottery.is_participator},create:function(){return{type:"已结束",tooltip:"来晚了，抽奖已结束",text:"已结束",disabled:!0,onClick:function(){}}}};exports.default=e;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-end-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-input-code-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={type:"输入口令后参与",match:function(t){var e=t.lottery;return!0===e.need_code&&!e.is_participator&&e.state>=0},create:function(){return{type:"输入口令后参与",tooltip:"输入口令后，可参与抽奖",text:"验证",disabled:!1,onClick:function(t){t.onClickJoin()}}}};exports.default=t;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-input-code-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-public-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),i=(e=require("moment"))&&e.__esModule?e:{default:e},n=require("@utils/multijoin-subscribe"),o=require("@/utils/lotteryUtils");var u={type:"公共抽奖",match:function(e){return(0,o.isPublicLottery)(e.lottery)&&(0,o.isAllowMultiJoin)(e.lottery)},create:function(e){return{type:"公共抽奖",tooltip:"运气来了，都别拦我",text:"立即抽奖",disabled:!1,onClick:function(i){return r(t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l(e.lottery)){t.next=3;break}return t.next=3,(0,n.subscribe)(e.lottery.id);case 3:i.onClickJoin();case 4:case"end":return t.stop()}}),r)})))()}}}};exports.default=u;function l(e){var t;if(!(null===(t=e.multi_join_tasks)||void 0===t?void 0:t.some((function(e){return"daily"===e.code_type}))))return!1;var r="subscribeMessage_multijoin_recall",n="".concat(e.id,"_").concat((0,i.default)().format("YYYY-MM-DD"));return wx.getStorageSync(r)!==n&&(wx.setStorageSync(r,n),!0)}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-public-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-wechat-friend-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e=(t=require("lodash"))&&t.__esModule?t:{default:t},o=require("@utils/lotteryUtils"),r=require("@utils/tools");var a="核验资格后参与",i={type:a,match:function(t){return t.lottery.direct_share_only&&!t.lottery.is_participator},create:function(t){return t.fromCreatorShareCard?{type:a,tooltip:"你已获得参与资格，点击按钮参与",text:"立即抽奖",disabled:!1,onClick:function(t){t.onClickJoin()}}:t.lottery.is_initiator?{type:a,tooltip:"分享抽奖卡片\n好友从卡片进入即可参与",text:"立即抽奖",disabled:!1,onClick:function(t){t.onClickJoin()}}:(0,o.canContactCreator)(t.lottery)?{type:a,tooltip:"私聊发起人获取链接，即可参与",text:"联系发起人参与抽奖",disabled:!1,onClick:function(o){var a,i=e.default.get(t.lottery,"kefu_share_data.image");if(!i||!(0,r.canIdentifyQR)())return((null===(a=o.getSponsorDialog)||void 0===a?void 0:a.call(o))||(0,r.getCurrentPage)().selectComponent("#kefu-sponsor-dialog")).show({data:{type:e.default.get(t,"lottery.kefu_share_data.type"),id:e.default.get(t,"lottery.id"),key:"contact_lottery_id"}});e.default.set(getApp(),"globalData.previewTimestamp",Date.now()),e.default.set(getApp(),"globalData.previewLocation","detail_qr_creator_preview"),wx.previewImage({urls:[i]})}}:{type:a,tooltip:"私聊发起人获取链接，即可参与",text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}}}};exports.default=i;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-wechat-friend-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-wecome-friend-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../@babel/runtime/helpers/objectSpread2"),t=require("../../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=require("@utils/tips"),o=require("@services/game"),i=require("@utils/tools"),a=require("@/utils/lotteryUtils"),u={type:"核验企微好友",match:function(e){return(0,n.isWeComLottery)(e.lottery)&&!e.lottery.is_participator},create:function(e){return{type:"核验企微好友",tooltip:"运气来了，都别拦我",text:"立即抽奖",disabled:!1,onClick:function(n){var o=function(e){return s.apply(this,arguments)}(e.lottery).catch(function(){var o=r(t().mark((function r(o){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.refreshLottery(),!o.message.match(/你不是发起人的企业微信好友/)){t.next=4;break}throw c(e.lottery),"";case 4:throw o;case 5:case"end":return t.stop()}}),r)})));return function(e){return o.apply(this,arguments)}}());n.onClickJoin(o)}}}};function s(){return(s=r(t().mark((function e(r){var n,u,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getUserLocationInfo)(r);case 2:return n=e.sent,e.next=5,(0,o.join)({id:r.id,officialCode:r.officialCode,timelineCode:r.timelineCode,joinKey:l(r),showToast:!1,needShareInfo:(0,a.isJoinNeedShareInfo)(r),location:n});case 5:return u=e.sent,s=u.data,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(t){var r,n=(null===(r=t.lottery_feature)||void 0===r?void 0:r.add_qy_user)||{},o=n.show_code,i=n.qrcode;wx.showModal(e({title:"添加企业微信可参与",content:"发起人要求添加企业微信后可参与，如你已添加，请联系发起人解决。"},o&&i?{confirmText:"去添加",success:function(e){e.confirm&&wx.previewImage({current:i,urls:[i]})}}:{confirmText:"知道了",showCancel:!1}))}function l(e){var t;return(null===(t=e.local_data)||void 0===t?void 0:t.from_join_key)||""}exports.default=u;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-wecome-friend-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/before-join-zsxq-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=e(r);if(o&&o.has(t))return o.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var a=i?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=t[u]}n.default=t,o&&o.set(t,n);return n}(require("@utils/third-party/zsxq"));function e(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,o=new WeakMap;return(e=function(t){return t?o:r})(t)}var r={type:"星球抽奖",match:function(e){return t.isZSXQLottery(e.lottery)},create:function(e){var r,o,n,i=(r=e.lottery,decodeURIComponent((null===(o=r.lottery_feature)||void 0===o||null===(n=o.zsxq)||void 0===n?void 0:n.name)||""));return t.isQualifiedByZSXQ(e.lottery)?{type:"星球抽奖",tooltip:e.lottery.is_initiator?"点击右下角，发布通知引导星友参与":"欢迎参与「".concat(i,"」星球专属抽奖\n祝你好运"),text:"立即抽奖",disabled:!1,onClick:function(t){t.onClickJoin()}}:{type:"星球抽奖",tooltip:e.lottery.is_initiator?"点击右下角，发布通知引导星友参与":"请打开知识星球 App\n在「".concat(i,"」星球内参与抽奖"),text:"暂无资格参与抽奖",disabled:!0,onClick:function(){}}}};exports.default=r;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/before-join-zsxq-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/buttons/close-join-button.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@/utils/lotteryUtils"),e={type:"已关闭",match:function(e){var r=e.lottery;return(0,t.isLotteryClosed)(r)},create:function(t){return{type:"已关闭",tooltip:t.lottery.extra.closed_message||"抽奖已关闭",text:"已关闭",disabled:!0,onClick:function(){}}}};exports.default=e;
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/buttons/close-join-button.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/join-form.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fillTable=function(e,r){return n.apply(this,arguments)};var e=require("../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../@babel/runtime/helpers/asyncToGenerator"),t=require("@services/game");function n(){return(n=r(e().mark((function r(n,a){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.need_code||!a){e.next=9;break}return e.prev=1,e.next=4,(0,t.detect)(n.id,a);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",wx.showToast({title:"口令不正确",icon:"none"}));case 9:return e.abrupt("return",wx.navigateTo({url:"/pages/lottery/pages/joinform/joinform?lottery_id=".concat(n.id,"&officialJoinCode=").concat(n.officialCode,"&password=").concat(a)}));case 10:case"end":return e.stop()}}),r,null,[[1,6]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/join-form.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize-action-handlers/handle-fill-address.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.goToFillAddress=function(e,i){var t=e.id,r=null==i?void 0:i.join_id;wx.navigateTo({url:"/pages/contacts/show/show?".concat((0,o.queryString)({id:t,join_id:r||""}))})};var o=require("@utils/tools");
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize-action-handlers/handle-fill-address.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize-action-handlers/handle-fill-user-info.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.goToFillUserInfo=function(n){var i=null==n?void 0:n.join_id;wx.navigateTo({url:"/pages/winnerInfo/winnerInfoPreview/winnerInfoPreview?".concat((0,e.queryString)({type:"update",join_id:i||""}))})};var e=require("@utils/tools");
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize-action-handlers/handle-fill-user-info.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize-action-handlers/handle-lucky-contact.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.goToLuckyContact=function(a,n){var r,l,u;if(!a)return;var c=wx.getLaunchOptionsSync().query,d=/^push_/.test(c.f)&&(0,o.get)(a,"lucky_contact.official_article_url");if((0,i.default)("detail_ontime_winner_contact",{id:a.id,label:d?"mp_link":""}),d)return wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent((0,o.get)(a,"lucky_contact.official_article_url","")))});var s=(0,o.get)(a,"lucky_contact.url",""),_=(0,o.getCurrentPage)(),v=(/^push_/.test((0,o.get)(_,"data.f"))||489903158===(null===(r=a.initiator)||void 0===r?void 0:r.id))&&(0,o.canIdentifyQR)(),p=null==a||null===(l=a.lucky_user_receive)||void 0===l||null===(u=l.contact)||void 0===u?void 0:u.set_deadline,f=!!p&&(0,e.default)(p).isBefore((0,e.default)());if([v,s,(0,o.get)(n,"type")===t.PRIZE_TYPES.OBJ,!f].every(Boolean))return(0,o.set)(getApp(),"globalData.previewTimestamp",Date.now()),(0,o.set)(getApp(),"globalData.previewLocation","detail_qr_winnercontact_ontime_preview"),void wx.previewImage({urls:[s]});wx.navigateTo({url:"/pages/contacts/show/show?id=".concat(a.id,"&join_id=").concat((null==n?void 0:n.join_id)||"")})};var e=a(require("moment")),t=require("@models/lottery"),i=a(require("@utils/analyse")),o=require("@utils/tools");function a(e){return e&&e.__esModule?e:{default:e}}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize-action-handlers/handle-lucky-contact.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize-action-handlers/handle-withdraw.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleWithdraw=function(e,r){return d.apply(this,arguments)};var e,r=require("../../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../../@babel/runtime/helpers/asyncToGenerator"),a=require("@utils/wechatAPI"),i=require("@mina-modules/mina-sentry"),n=require("../withdraw"),l=require("@utils/tools"),s=require("@/utils/withdraw"),u=require("@/utils/lotteryUtils"),o=(e=require("@/utils/event"))&&e.__esModule?e:{default:e},c=require("@/utils/rating");function d(){return(d=t(r().mark((function e(t,u){var o,c,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=new s.WithdrawManager(t,u)).isAllowWithdrawDirectly()){e.next=23;break}if(!o.isAllowWithdrawAll()){e.next=8;break}return e.next=5,o.handleWithdrawAll();case 5:h(t),e.next=21;break;case 8:return e.prev=8,(0,a.showLoading)(),e.next=12,(0,n.withdraw)(t,u);case 12:(0,l.showToast)("提现成功"),null===(c=(0,l.getCurrentPage)())||void 0===c||null===(d=c.refreshPage)||void 0===d||d.call(c),h(t),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),(0,i.error)(e.t0),(0,l.showToast)(e.t0.message||"提现失败");case 21:e.next=24;break;case 23:(0,s.goToBanlanceAccount)();case 24:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}function h(e){var r;(0,c.shouldHideRatingCard)()||!(0,u.isOnTime)(e)||(0,u.isAllowMultiJoin)(e)||null!==(r=e.marketing)&&void 0!==r&&r.type||o.default.emit("rating_card:show")}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize-action-handlers/handle-withdraw.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize-action.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrizeAction=function(n,e){return{name:I(n,e).btnText,handler:E(n,e)}},require("../../@babel/runtime/helpers/Arrayincludes");var n=require("../../@babel/runtime/helpers/defineProperty"),e=require("@models/lottery"),i=require("@models/misc"),t=require("@services/game"),o=require("./prize-action-handlers/handle-withdraw"),r=require("./prize-action-handlers/handle-fill-user-info"),T=require("./prize-action-handlers/handle-lucky-contact"),O=require("./prize-action-handlers/handle-fill-address"),l=require("@utils/receiveAward"),a=require("@utils/tools"),u=require("@services/chou"),_=require("../withdraw");function E(e,t){var _=I(e,t).btnAction;return n(n(n(n(n(n(n(n(n(n({},i.OnTimeJoinOperation.FILL_ADDRESS,(function(){(0,O.goToFillAddress)(e,t)})),i.OnTimeJoinOperation.FILL_INFO,(function(){(0,r.goToFillUserInfo)(t)})),i.OnTimeJoinOperation.LUCKY_CONTACT,(function(){(0,T.goToLuckyContact)(e,t)})),i.OnTimeJoinOperation.WITH_DRAW,(function(){(0,o.handleWithdraw)(e,t)})),i.OnTimeJoinOperation.COPY_CODE,(function(){(0,l.copyCode)(t,e)})),i.OnTimeJoinOperation.GET_COVER,(function(){var n,e,i;(0,a.showPacket)(null==t||null===(n=t.info)||void 0===n||null===(e=n.content)||void 0===e||null===(i=e[0])||void 0===i?void 0:i.value)})),i.OnTimeJoinOperation.PREVIEW_INITIAL_CONTACT,(function(){(0,l.previewContactQRCode)(e)})),i.OnTimeJoinOperation.GOTO_MINA,(function(){var n,e,i,o,r,T,O=null==t||null===(n=t.info)||void 0===n||null===(e=n.content)||void 0===e||null===(i=e[0])||void 0===i?void 0:i.appid,l=null==t||null===(o=t.info)||void 0===o||null===(r=o.content)||void 0===r||null===(T=r[0])||void 0===T?void 0:T.apppath;(0,u.goToMina)(l,O)})),i.OnTimeJoinOperation.GOTO_VOUCHER,(function(){wx.navigateTo({url:"/pages/lottery/pages/promanager/promanager"})})),i.OnTimeJoinOperation.GOTO_POINTS,(function(){wx.navigateTo({url:"/pages/points/pages/pointsp/points"})}))[_]}var I=function(t,o){if(!o)return{btnText:"",btnAction:i.OnTimeJoinOperation.NONE};var r=o.virtualType||o.virtual_type,T=o.type,O=(0,_.getWithdrawBtnText)(t,o,!1);return n(n(n(n(n(n(n({},e.PRIZE_TYPES.OBJ,{btnText:c(r,t),btnAction:P(r)}),e.PRIZE_TYPES.MARKET,{btnText:R(r,t),btnAction:p(r)}),e.PRIZE_TYPES.CASH,{btnText:O,btnAction:i.OnTimeJoinOperation.WITH_DRAW}),e.PRIZE_TYPES.LUCKY_CASH,{btnText:O,btnAction:i.OnTimeJoinOperation.WITH_DRAW}),e.PRIZE_TYPES.OFFICIAL_CASH,{btnText:O,btnAction:i.OnTimeJoinOperation.WITH_DRAW}),e.PRIZE_TYPES.VIRTUAL,{btnText:A(r),btnAction:d(r)}),e.PRIZE_TYPES.BONUS_POINT,{btnText:"点击查看",btnAction:i.OnTimeJoinOperation.GOTO_POINTS})[T]||{btnText:"中奖者领奖",btnAction:i.OnTimeJoinOperation.NONE}};function R(n,e){return c(n,e)}function c(n,i){var o,r;return[e.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER,e.VIRTUAL_PRIZE_TYPES.MINA_PATH].includes(n)?"联系发起人领奖":n===e.VIRTUAL_PRIZE_TYPES.FILL_WINNER_INFO?!(null==i||null===(r=i.lotteryResult)||void 0===r||!r.lucky_fill_info)?"已填写":(0,l.isFillInfoExpired)(i)?"奖品已过期":"填写信息领奖":null!=i&&null!==(o=i.lotteryResult)&&void 0!==o&&o.message?"查看发起人留言":!!(0,t.getUserContact)(i)?"地址已填写":(0,l.isFillAddressExpired)(i)?"奖品已过期":"填写地址领奖"}function p(n){return P(n)}function P(n){return[e.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER,e.VIRTUAL_PRIZE_TYPES.MINA_PATH].includes(n)?i.OnTimeJoinOperation.LUCKY_CONTACT:n===e.VIRTUAL_PRIZE_TYPES.FILL_WINNER_INFO?i.OnTimeJoinOperation.FILL_INFO:i.OnTimeJoinOperation.FILL_ADDRESS}function A(n){return[e.VIRTUAL_PRIZE_TYPES.MINA_PATH,e.VIRTUAL_PRIZE_TYPES.OTHER,e.VIRTUAL_PRIZE_TYPES.COVER].includes(n)?"点击领取":n===e.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER?"点击查看":"复制兑换码"}function d(n){return n===e.VIRTUAL_PRIZE_TYPES.MINA_PATH?i.OnTimeJoinOperation.GOTO_MINA:n===e.VIRTUAL_PRIZE_TYPES.OTHER?i.OnTimeJoinOperation.GOTO_KEFU:n===e.VIRTUAL_PRIZE_TYPES.COVER?i.OnTimeJoinOperation.GET_COVER:n===e.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER?i.OnTimeJoinOperation.GOTO_VOUCHER:i.OnTimeJoinOperation.COPY_CODE}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize-action.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/prize.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCurrentUserPrize=void 0,exports.getPrizeName=function(e){if(!e)return"";if(e.type===n.PRIZE_TYPES.LUCKY_CASH)return"".concat(e.amount/100," 元拼手气红包");if(e.type===n.PRIZE_TYPES.OFFICIAL_CASH)return 1===e.virtualType?"".concat(e.amount/100," 元拼手气红包"):"".concat(e.amount/100," 元现金红包");if(e.type===n.PRIZE_TYPES.CASH)return"".concat(e.amount/100," 元现金红包");if(e.type===n.PRIZE_TYPES.VIRTUAL)return[n.VIRTUAL_PRIZE_TYPES.MINA_PATH,n.VIRTUAL_PRIZE_TYPES.OTHER,n.VIRTUAL_PRIZE_TYPES.COVER].includes(e.virtualType)?"奖品： ".concat(e.name):function(e){var r=t.default.get(e,"info.content[0].key","兑换码"),n=t.default.get(e,"info.content[0].value",""),u=r.length>14?r.slice(0,14)+"...":r;return"".concat(u,"\n").concat(n)}(e);return"奖品： ".concat(e.name)},exports.hasWinerPrize=void 0,require("../../@babel/runtime/helpers/Arrayincludes");var e,t=(e=require("lodash"))&&e.__esModule?e:{default:e},r=require("@mina-modules/mina-sentry"),n=require("@models/lottery");exports.getCurrentUserPrize=function(e){var n=t.default.get(e,"lotteryResult.prize",{});return t.default.isEmpty(n)?function(e){try{var t,n,u,i=null===(t=e.lucky_users)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.my_prize_id;return((null===(u=e.prizes)||void 0===u?void 0:u.data)||[]).find((function(e){return e.id===i}))}catch(e){(0,r.error)(e)}}(e)||function(e){try{for(var n=t.default.get(e,"lucky_users.data",[]),u=null,i=0,a=n.length;i<a;i++)if((u=n[i]).id===t.default.get(getApp(),"globalData.userInfo.user_id","")){var o=t.default.get(e,"prizes.data",[]).filter((function(e){return e.id===u.prize_id}));if(o.length>0)return o[0]}}catch(e){(0,r.error)(e)}}(e)||null:n},exports.hasWinerPrize=function(e){var r=t.default.get(e,"lotteryResult.prize",{});if(!t.default.isEmpty(r))return!0;var n=t.default.get(e,"lotteryResult.prizes",[]);return!t.default.isEmpty(n)};
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/prize.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/ontime-lottery/withdraw.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withdraw=function(e,r){return n.apply(this,arguments)};var e=require("../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../@babel/runtime/helpers/asyncToGenerator"),t=require("@services/game");function n(){return(n=r(e().mark((function r(n,i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&i){e.next=2;break}throw Error("lottery or prize is not exist");case 2:return e.abrupt("return",(0,t.withdrawCashPrize)(n.id,(null==i?void 0:i.amount)||0,null==i?void 0:i.join_id));case 3:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/ontime-lottery/withdraw.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/pay.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.payProduct=function(e,r){return a.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("../services/pay"),n=require("./tools");function a(){return(a=r(e().mark((function r(a,i){var u,s,o,p=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=p.length>2&&void 0!==p[2]?p[2]:null,s={product_id:a},u&&u>0&&(s.virtual_ticket_id=u),i&&(s.extra=i),e.next=6,(0,t.createPayment)(s);case 6:return(o=e.sent).data.request_info.timeStamp=""+o.data.request_info.timeStamp,e.next=10,(0,n.promisify)(wx.requestPayment)(o.data.request_info);case 10:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/pay.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/prize.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatWinnerPrizeImage=l,exports.getDefaultPizeImage=function(e){if((null==e?void 0:e.theme)===o.LOTTERY_THEME.FUNNY)return a.PI_YI_XIA_IMAGE_DEFAULT;if("party"===(null==e?void 0:e.draw_type))return a.PARTY_PRIZE_DEFAULT;return o.DEFAULT_IMAGE_NORMAL},exports.getOntimePrizes=function(e){var r=e.extra,i=e.min_user_count,a=e.prizes.data.reduce((function(r,i){var a=r.prizeCount,o=r.prizeItems,c=u(i,e.prizes.data.length);return{prizeItems:[].concat(n(o),[t(t({},i),c)]),prizeCount:a+i.count}}),{prizeItems:[],prizeCount:0}),o=a.prizeItems;(a.prizeCount<i||r&&r.hide_winning_rate)&&o.unshift({displayName:"谢谢参与",displayImage:"https://lucky-cdn.nocode.com/mina/lottery/ontime-no-bill@3x.png",displayDesc:"",id:-99});if(o.length<20)for(var c=0;c<=20&&!((o=[].concat(n(o),n(o)).splice(0,20)).length>=20);c++);return o},exports.getPrizeDisplayInfo=u,exports.getPrizeOverviewCount=function(e){var t=i.default.get(e,"prizes.data",[]),n={count:0,cates:0};if(t&&t.length>0)return t.reduce((function(e,t){return{count:e.count+t.count,cates:e.cates+1}}),n);return n},exports.getPrizeOverviewName=function(e){var t=i.default.get(e,"prizes.data[0].name","");i.default.get(e,"prizes.data",[]).length>1&&(t+=" 等");return t},exports.getWinRate=function(e,t){try{var n=i.default.get(t,"probability",null);if(n)n*=100;else if("ontime"===e.draw_type){var r=0;i.default.get(e,"prizes.data",[]).forEach((function(e){r+=e.count})),n=100*r/e.min_user_count}else{var a=e.prizes.data.reduce((function(e,n){return n.id!==t.id?e+((null==n?void 0:n.lucky_count)||0):e}),0);n=100*t.count/(e.user_count-a),n=Math.min(n,100)}return function(e){if(e>=1)return Math.round(e);if(e<=0)return 0;var t=0,n=e;for(;n<1;)n*=10,t++;return e.toFixed(t).replace(/\.0+$/,"")}(n)}catch(e){return"未知"}},exports.getWinnerPrizeDisplayInfo=function(e){if(!e)return{displayName:"",displayDesc:"",displayImage:""};return{displayName:c(e),displayImage:l(e),displayDesc:""}},exports.getWinnerRate=function(e){return e<.01?e.toFixed(4):e<1?e.toFixed(2):Math.floor(e)},exports.handlePrizeName=function(e){if(!e)return null;var n=t({},e);n.displayAmount=e.amount/100,n.redemptionInfo=i.default.get(e,"info.content[0]",null),e.type===o.PRIZE_TYPES.LUCKY_CASH&&(n.cashName="".concat(e.amount/100," 元拼手气红包"));if(e.type===o.PRIZE_TYPES.VIRTUAL){var r,a,u;if(e.virtualType===o.VIRTUAL_PRIZE_TYPES.THIRD_PARTY_COUPON)n.name="兑换码: ".concat(null===(r=e.info)||void 0===r||null===(a=r.content)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.value)}return n},exports.handlePrizeNameForPrizeInfo=function(e){if(!e)return null;e.displayAmount=e.amount/100,e.type===o.PRIZE_TYPES.LUCKY_CASH?e.cashName="".concat(e.amount/100," 元拼手气红包"):e.type===o.PRIZE_TYPES.OFFICIAL_CASH&&(e.cashName="".concat(e.amount/100," 元现金红包"));return e.redemptionInfo=i.default.get(e,"info.content[0]",null),e},exports.isCashPrize=function(e){return[o.PRIZE_TYPES.LUCKY_CASH,o.PRIZE_TYPES.OFFICIAL_CASH].includes(null==e?void 0:e.type)},exports.isFillAddressPrize=function(e){var t=e.type,n=e.virtual_type;return t===o.PRIZE_TYPES.OBJ&&n===o.PRIZE_GIVE_TYPES.FILL_ADDRESS||t===o.PRIZE_TYPES.MARKET},exports.isFillWinnerInfoPrize=function(e){var t=e.type,n=e.virtual_type;return t===o.PRIZE_TYPES.OBJ&&n===o.VIRTUAL_PRIZE_TYPES.FILL_WINNER_INFO},exports.isPrizeCountShow=function(e){var t=!0;if(null!=e&&e.extra){var n,r=(null===(n=e.extra)||void 0===n?void 0:n.hide_data)||[];t=!r.includes("prize_count")}return t},exports.isVirtualPrize=function(e){return(null==e?void 0:e.type)===o.PRIZE_TYPES.VIRTUAL},exports.isWinner=function(e){var t,n,r,a;if(!e)return!1;return!(null===(t=e.lucky_users)||void 0===t||null===(n=t.meta)||void 0===n||!n.my_prize_id)||!i.default.isEmpty(null===(r=e.lucky_users)||void 0===r||null===(a=r.meta)||void 0===a?void 0:a.my_prize_ids)},require("../@babel/runtime/helpers/Arrayincludes");var e,t=require("../@babel/runtime/helpers/objectSpread2"),n=require("../@babel/runtime/helpers/toConsumableArray"),r=require("../@babel/runtime/helpers/defineProperty"),i=(e=require("lodash"))&&e.__esModule?e:{default:e},a=require("../constant"),o=require("../models/lottery");function u(e,t){var n=e.type,r=e.name,i=e.level,a=e.image,u=e.count,c=e.amount,l=1===t?"":"".concat(d(i),"等奖: "),s="";n===o.PRIZE_TYPES.CASH||n===o.PRIZE_TYPES.OFFICIAL_CASH?(l+="".concat(c/100," 元现金红包"),s="".concat(u," 个")):n===o.PRIZE_TYPES.LUCKY_CASH?(l+="".concat(c/100," 元拼手气红包"),s="".concat(u," 个")):(s="".concat(u," 份"),l+=r);var p=o.DEFAULT_IMAGE_NORMAL;a&&(p=a.split("!")[0]+"!webp90");return{displayName:l,displayImage:p,displayDesc:s}}function c(e){var t,n=e.level,i=e.name,a=e.type,u=e.virtualType,c=e.info,l=e.amount;return r(r(r(r(r(r({},o.PRIZE_TYPES.OBJ,u!==o.VIRTUAL_PRIZE_TYPES.MINA_PATH?"".concat(d(n),"等奖：").concat(i):"奖品：".concat(i)),o.PRIZE_TYPES.MARKET,u!==o.VIRTUAL_PRIZE_TYPES.MINA_PATH?"".concat(d(n),"等奖：").concat(i):"奖品：".concat(i)),o.PRIZE_TYPES.CASH,l?"金额：".concat(l/100," 元现金红包"):"金额：".concat(i)),o.PRIZE_TYPES.LUCKY_CASH,l?"金额：".concat(l/100," 元拼手气红包"):"金额：".concat(i)),o.PRIZE_TYPES.OFFICIAL_CASH,l?"金额：".concat(l/100," 元拼手气红包"):"金额：".concat(i)),o.PRIZE_TYPES.VIRTUAL,[o.VIRTUAL_PRIZE_TYPES.THIRD_PARTY_COUPON,o.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER].includes(u)&&null!=c&&null!==(t=c.content)&&void 0!==t&&t[0]?"兑换码：".concat(c.content[0].value):"")[a]||"奖品：".concat(i)}function l(e){var t=e.image;return t?t.split("!")[0]+"!webp90":o.DEFAULT_IMAGE_NORMAL}var s=["零","一","二","三","四","五","六","七","八","九"],p=["","万","亿","万亿","亿亿"],_=["","十","百","千"];function d(e){var t=0,n="",r="",i=!1;if(0===e)return s[0];for(;e>0;){var a=e%1e4;i&&(r=s[0]+r),n=P(a),r=(n+=0!==a?p[t]:p[0])+r,i=a<1e3&&a>0,e=Math.floor(e/1e4),t++}return r.replace(/^一十/,"十")}function P(e){for(var t="",n="",r=0,i=!0;e>0;){var a=e%10;0===a?i||(i=!0,n=s[a]+n):(i=!1,t=s[a],n=(t+=_[r])+n),r++,e=Math.floor(e/10)}return n}
},{isPage:false,isComponent:false,currentFile:'utils/prize.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/pro.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIPhoneUserWithoutPayingPro=function(e){return(0,i.isIOS)()&&s(e)},exports.isNeedProQualification=s,exports.isProOpen=function(e){var r;return null===(r=e.proSetting)||void 0===r?void 0:r.open};var e,r=require("@models/create"),t=require("@models/lottery"),i=require("./system"),o=require("./third-party/zsxq"),n=(e=require("lodash"))&&e.__esModule?e:{default:e};function s(e){var i,s;return e.editingType!==r.EditingTypes.EDITING&&(!(null===(i=e.proSetting)||void 0===i||!i.open||null!==(s=e.proSetting)&&void 0!==s&&s.isAnnualPro)&&(!(0,o.isZSXQLocalLottery)(e)&&(!e.prizeList.some((function(e){return e.type===t.PrizeTypes.SHOP}))&&!n.default.get(e.proSetting,"voucherList.length"))))}
},{isPage:false,isComponent:false,currentFile:'utils/pro.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/promiseFix.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.authorize=function(e){return new Promise((function(t,n){wx.authorize({scope:e,success:function(){t(!0)},fail:function(e){n(e)}})}))},exports.downLoadFile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){wx.downloadFile({url:e,header:t,success:function(e){n(e)},fail:function(e){r(e)}})}))},exports.getNetworkType=function(){return new Promise((function(e,t){wx.getNetworkType({success:function(t){e(t.networkType)},fail:function(e){t(e)}})}))},exports.getSetting=u,exports.saveImageToPhotosAlbum=function(e){return r.apply(this,arguments)},exports.setStorage=function(e){return n.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator");function n(){return(n=t(e().mark((function t(n){var r,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.key,o=n.data,e.prev=1,wx.setStorageSync(r,o),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),console.log("setStorage failed: ",e.t0),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),t,null,[[1,5]])})))).apply(this,arguments)}function r(){return(r=t(e().mark((function t(n){var r,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,!/^http/.test(n)){e.next=7;break}return e.next=4,new Promise((function(e,t){wx.getImageInfo({src:n,success:function(t){e(t)},fail:function(e){wx.showToast({content:"获取图片信息失败",icon:"none"}),t(e)}})}));case 4:s=e.sent,u=s.path,r=u;case 7:return e.abrupt("return",new Promise((function(e,t){wx.saveImageToPhotosAlbum({filePath:r,success:function(t){e(t),wx.showToast({title:"保存成功",icon:"success"})},fail:function(e){t(e),o()}})})));case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function o(){return s.apply(this,arguments)}function s(){return(s=t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:e.sent.authSetting["scope.writePhotosAlbum"]?wx.showToast({content:"图片保存失败",icon:"none"}):wx.showModal({title:"提示",content:"需要获取相册访问权限，请到小程序设置页面打开授权",success:function(e){e.confirm&&wx.openSetting()}});case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,n){wx.getSetting({withSubscriptions:e,success:function(e){t(e)},fail:function(e){n(e)}})}))}
},{isPage:false,isComponent:false,currentFile:'utils/promiseFix.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/promotion.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSuggestPromotion=function(t){if(!t||!t.is_initiator)return null;if(function(r){var t;return!!getApp().featureAvaliable("smart_promotion")&&(r.smart_promotion_enable||r.is_smart_promotion||(null===(t=r.smart_promotions)||void 0===t?void 0:t.length)>0)}(t))return"smart";if(function(t){return[(0,r.isPrivateLottery)(t),!(0,r.isLotteryEnd)(t),!(0,r.isParty)(t),!(0,r.isFunny)(t),!(0,r.isPrizeLock)(t)].every(Boolean)}(t))return"square";return"business"};var r=require("./lotteryUtils");
},{isPage:false,isComponent:false,currentFile:'utils/promotion.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/quiz.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptionType=void 0,exports.convertQuizListToLocal=function(r){return r.map((function(r){return e(e({},r),{},{optionType:r.choice_data.some((function(e){var r;return(null===(r=e.images)||void 0===r?void 0:r.length)>0}))?n.IMAGE:n.TEXT,choice_data:r.choice_data.map((function(t,n){return e(e({},t),{},{isAnswer:r.answer.includes(n)})}))})}))},exports.getQuizExamTypeDesc=function(e){return r(e?r(r({},t.ExamType.PARTIAL_MATCH,"至少答对 1 题才有机会中奖"),t.ExamType.EXACT_MATCH,"全部答对才有机会中奖"):r({},t.ExamType.EXACT_MATCH,"答对才有机会中奖"),t.ExamType.ALL,"参与回答就有机会中奖")};var e=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/defineProperty"),t=require("@models/lottery"),n=exports.OptionType=function(e){return e.TEXT="text",e.IMAGE="image",e}({});
},{isPage:false,isComponent:false,currentFile:'utils/quiz.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/rating.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shouldHideRatingCard=function(){var e=wx.getStorageSync("IS_APP_RATED"),r=wx.getStorageSync("RATING_CARD_CLICKED_TIME"),a=r&&(0,t.default)(r).isSame((0,t.default)(),"day");return e||a};var e,t=(e=require("moment"))&&e.__esModule?e:{default:e};
},{isPage:false,isComponent:false,currentFile:'utils/rating.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/receiveAward.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyCode=h,exports.handleWin=function(e,i){var n,r,a,v=(0,c.getCurrentUserPrize)(i);switch((0,c.getWinnerPrizeAction)(i,v,!1).btnAction){case l.OnTimeJoinOperation.FILL_INFO:(0,o.toFillWinnerInfo)();break;case l.OnTimeJoinOperation.FILL_ADDRESS:!function(e,i){if(!i)return;(0,d.default)("detail_fillin_info",{id:i.id}),wx.navigateTo({url:"/pages/contacts/show/show?id=".concat(i.id),events:{contact:function(n){e.triggerEvent("updateLottery",{id:i.id,lotteryResult:t(t({},i.lotteryResult||{}),{},{contact:n})},{bubbles:!0,composed:!0})}}})}(e,i);break;case l.OnTimeJoinOperation.LUCKY_CONTACT:g(i);break;case l.OnTimeJoinOperation.COPY_CODE:m(i);break;case l.OnTimeJoinOperation.GET_COVER:(0,s.showPacket)(null==v||null===(n=v.info)||void 0===n||null===(r=n.content)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.value);break;case l.OnTimeJoinOperation.WITH_DRAW:(0,p.toWithdraw)(e,i);break;case l.OnTimeJoinOperation.PREVIEW_INITIAL_CONTACT:_(i);break;case l.OnTimeJoinOperation.GOTO_MINA:var f,w,h,b,T,O,x=null==v||null===(f=v.info)||void 0===f||null===(w=f.content)||void 0===w||null===(h=w[0])||void 0===h?void 0:h.appid,y=null==v||null===(b=v.info)||void 0===b||null===(T=b.content)||void 0===T||null===(O=T[0])||void 0===O?void 0:O.apppath;(0,d.default)("detail_digiprize_get",{id:i.id}),(0,u.goToMina)(y,x)}},exports.isContactMeExpired=function(e){var t,i,n=null===(t=e.lucky_user_receive)||void 0===t||null===(i=t.contact)||void 0===i?void 0:i.set_deadline;return!!n&&(0,r.default)(n).isBefore((0,r.default)())},exports.isFillAddressExpired=function(e){var t,i,n=null===(t=e.lucky_user_receive)||void 0===t||null===(i=t.address)||void 0===i?void 0:i.set_deadline;return!!n&&(0,r.default)(n).isBefore((0,r.default)())},exports.isFillInfoExpired=function(e){var t,i,n=null===(t=e.lucky_user_receive)||void 0===t||null===(i=t.fill_info)||void 0===i?void 0:i.set_deadline;return!!n&&(0,r.default)(n).isBefore((0,r.default)())},exports.previewContactQRCode=_;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/objectSpread2"),i=require("../@babel/runtime/helpers/asyncToGenerator"),n=f(require("lodash")),r=f(require("moment")),o=require("../models/fillWinnerInfo"),a=require("../models/lottery"),l=require("../models/misc"),u=require("../services/chou"),c=require("../services/game"),d=f(require("../utils/analyse")),s=require("./tools"),p=require("./withdraw"),v=require("./wechatAPI");function f(e){return e&&e.__esModule?e:{default:e}}function _(e){return w.apply(this,arguments)}function w(){return(w=i(e().mark((function t(i){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=(0,s.get)(i,"lucky_contact.url"))){e.next=5;break}return(0,s.set)(getApp(),"globalData.previewTimestamp",Date.now()),(0,s.set)(getApp(),"globalData.previewLocation","detail_qr_winnercontact_ontime_preview"),e.abrupt("return",wx.previewImage({urls:[n],current:n}));case 5:g(i);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(e){var t,i;if(e){var n=(0,c.getCurrentUserPrize)(e),o=wx.getLaunchOptionsSync().query,l=/^push_/.test(o.f)&&(0,s.get)(e,"lucky_contact.official_article_url");if((0,d.default)("detail_ontime_winner_contact",{id:e.id,label:l?"mp_link":""}),l)return wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent((0,s.get)(e,"lucky_contact.official_article_url","")))});var u=(0,s.get)(e,"lucky_contact.url",""),p=(0,s.getCurrentPage)(),v=/^push_/.test((0,s.get)(p,"data.f"))&&(0,s.canIdentifyQR)(),f=null==e||null===(t=e.lucky_user_receive)||void 0===t||null===(i=t.contact)||void 0===i?void 0:i.set_deadline,_=!!f&&(0,r.default)(f).isBefore((0,r.default)());if([v,u,(0,s.get)(n,"type")===a.PRIZE_TYPES.OBJ,!_].every(Boolean))return(0,s.set)(getApp(),"globalData.previewTimestamp",Date.now()),(0,s.set)(getApp(),"globalData.previewLocation","detail_qr_winnercontact_ontime_preview"),void wx.previewImage({urls:[u]});wx.navigateTo({url:"/pages/contacts/show/show?id=".concat(e.id)})}}var m=function(e){if(!e)return;h((0,c.getCurrentUserPrize)(e),e)};function h(e,t){var i,r,o,a;if(e){null!=t&&t.id&&(0,d.default)("detail_copy_prize",{id:t.id});var l=null==e||null===(i=e.info)||void 0===i||null===(r=i.content)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.value;wx.setClipboardData({data:l,success:function(){wx.showToast({title:"已复制",icon:"none"})}});var u=null===(a=e.info)||void 0===a?void 0:a.receive_info;u&&function(e,t){var i=(null==t?void 0:t.appid)&&(null==t?void 0:t.apppath),r=function(e){return n.default.compact(e).join("\n")};i?wx.showModal({title:"兑换码已复制",content:r(["我的兑换码：".concat(e),(null==t?void 0:t.desc)&&"领奖说明：".concat(t.desc)||"请前往小程序使用兑换码领奖"]),confirmText:"前往领奖",cancelText:"暂不兑换",success:function(e){e.confirm&&(0,v.navigateToMiniProgram)({appId:t.appid,path:t.apppath})}}):wx.showModal({title:"兑换码已复制",content:r(["我的兑换码：".concat(e),(null==t?void 0:t.desc)&&"领奖说明：".concat(t.desc)]),showCancel:!1,confirmText:"我知道了"})}(l,u)}}
},{isPage:false,isComponent:false,currentFile:'utils/receiveAward.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/redCover.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkIfRedCoverEnable=p,exports.isRedCoverLottery=o,exports.navigateToRedCover=function(){wx.setStorageSync("RED_COVER_CLICKED",!0),wx.navigateTo({url:"/pages/cover/cover"})},exports.recordJoinedRedCoverLottery=function(e){o(e)&&wx.setStorageSync("JOINED_RED_COVER",new Date)},exports.showRecommendRedCover=u,exports.showRecommendRedCoverAfterJoin=function(e){return s.apply(this,arguments)};var e,t=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("moment"))&&e.__esModule?e:{default:e},a=require("./lotteryUtils");function o(e){return!!e&&e.prizes.data.some((function(e){return 3===e.type&&5===e.virtual_type}))}function u(){return i.apply(this,arguments)}function i(){return(i=r(t().mark((function e(){var r,a,o,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wx.getStorageSync("JOINED_RED_COVER"),a=wx.getStorageSync("RED_COVER_VIEWED"),o=wx.getStorageSync("RED_COVER_CLICKED"),e.next=5,p();case 5:return u=e.sent,e.abrupt("return",u&&!o&&(0,n.default)(r).isSame((0,n.default)(),"day")&&!(0,n.default)(a).isSame((0,n.default)(),"day"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(0,a.isProLottery)(r),!e.t0){e.next=5;break}return e.next=4,u();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return c.apply(this,arguments)}function c(){return(c=r(t().mark((function e(){var r,n,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,getApp().globalData.appConfigLoaded){e.next=4;break}return e.next=4,getApp().fetchConfig();case 4:return e.abrupt("return",null===(r=getApp().globalData)||void 0===r||null===(n=r.appConfig)||void 0===n||null===(a=n.red_envelope)||void 0===a?void 0:a.enable);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/redCover.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/screenView.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reportRecoDetailNoPrizePopClick=function(t){(0,e.default)("reco_detail_noprize_pop",{id:t,ad_options:{adtype:"reco_detail_noprize_pop",adid:t}})},exports.screenViewRecoDetailNoPrizePop=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=r?"real_reco_detail_noprize_pop":"reco_detail_noprize_pop";(0,e.screenView)(o,{ad_options:{adtype:o,adid:t}})};var e=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t(r);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var a=i?Object.getOwnPropertyDescriptor(e,p):null;a&&(a.get||a.set)?Object.defineProperty(n,p,a):n[p]=e[p]}n.default=e,o&&o.set(e,n);return n}(require("@utils/analyse"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,o=new WeakMap;return(t=function(e){return e?o:r})(e)}
},{isPage:false,isComponent:false,currentFile:'utils/screenView.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/selector.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.querySelector=function(r,t,n){var c=this;return new Promise((function(s){var i=wx.createSelectorQuery();i.in(r||c),i.select(t).fields(Object.assign({id:!0,dataset:!0,mark:!0,rect:!0,size:!0,scrollOffset:!0,context:!0,node:!0},n)),i.exec((function(r){var t=e(r,1)[0];return s(t)}))}))},exports.querySelectorAll=function(r,t,n){return new Promise((function(c){var s=wx.createSelectorQuery();s.in(r),s.selectAll(t).fields(Object.assign({id:!0,dataset:!0,mark:!0,rect:!0,size:!0,scrollOffset:!0,context:!0,node:!0},n)),s.exec((function(r){var t=e(r,1)[0];return c(t)}))}))};var e=require("../@babel/runtime/helpers/slicedToArray");
},{isPage:false,isComponent:false,currentFile:'utils/selector.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/serverConfig.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getServerConfig=a,exports.handleRedirectFromOfficialAccount=function(e){if(g())return l(e);!function(e){s=setInterval((function(){var n=g();v++,(n||v>4)&&(clearInterval(s),l(e))}),500)}(e)},exports.syncServerConfig=function(e){return p.apply(this,arguments)};var e,n=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("@/services/config"),i=require("@mina-modules/mina-sentry"),o=require("./wechatAPI");function a(){return e||(e=wx.getStorageSync("serverConfig")||{}),e||{}}function c(e){return u.apply(this,arguments)}function u(){return(u=r(n().mark((function r(o){var a,c,u,s,f,p;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,t.getConfigByType)("cloud_info");case 3:a=n.sent,console.log("cloud function: getServerConfig",a),c=a.data,u=c.entrance_config,s=c.docs_config,f=c.appid_config,p=c.template_msg_guide_config,e={entranceConfig:u,docsConfig:s,appIdConfig:f,templateMsgGuideConfig:p,timestamp:o},wx.setStorage({key:"serverConfig",data:e}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),(0,i.error)(n.t0);case 13:case"end":return n.stop()}}),r,null,[[0,10]])})))).apply(this,arguments)}var s,f=!1;function p(){return(p=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a().timestamp===r){e.next=4;break}return e.next=4,c(r);case 4:f=!0;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return f}function l(e){var n,r,t=null===(n=a())||void 0===n||null===(r=n.appIdConfig)||void 0===r?void 0:r[e];t&&(0,o.navigateTo)(t)}var v=0;
},{isPage:false,isComponent:false,currentFile:'utils/serverConfig.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/share.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LotteryShareType=void 0,exports.getShareItem=r,exports.handleShareAction=function(e,n,o){var c,m=(i(i(i(i(i(i(i(i(i(i(c={},l.team_image,(function(){s(n,o)})),l.image,(function(){s(n,o)})),l.article,(function(){(0,t.default)("detail_invite_mp"),wx.navigateTo({url:"/pages/share/officialshare/officialshare?id=".concat(n.id)})})),l.team,(function(){})),l.wechat,(function(){(0,t.default)("detail_invite_chat"),(0,t.default)("detail_invite",{source:a.default.get(n,"is_official",!1)?"公共抽奖":"私人抽奖",type:"邀请微信好友",page:"game_".concat(n.state,"_").concat(n.is_official?"pub":"pri")})})),l.wechat_key,(function(){(0,t.default)("detail_invite_joinkey")})),l.kefu,(function(){(0,t.default)("detail_invite_pathcopy")})),l.officail_image,(function(){var i=r(e,n);null!=i&&i.image?wx.navigateTo({url:"/pages/shareimage/official/official?image=".concat(i.image,"&type=official")}):wx.showToast({title:"没有获取到分享图",icon:"none"})})),l.company_image,(function(){(0,t.default)("detail_invite_wecom");var i=r(e,n);null!=i&&i.image?wx.navigateTo({url:"/pages/shareimage/official/official?image=".concat(i.image,"&type=company")}):wx.showToast({title:"没有获取到分享图",icon:"none"})})),l.timeline,(function(){(0,t.default)("detail_invite_moments")})),i(i(c,l.wecom,(function(){wx.navigateTo({url:"/pages/helpers/webview/webview?url=".concat(encodeURIComponent("https://mp.weixin.qq.com/s/P1j_w2Ra35hdWjptoEpuAQ"))})})),l.share_setting,(function(){wx.navigateTo({url:"/pages/share/sharesetting/sharesetting?id=".concat(n.id)})})));m[e]&&m[e]();o.executeCallBack(e)},exports.isDisabledShareBtn=m;var e=require("../@babel/runtime/helpers/objectSpread2"),i=require("../@babel/runtime/helpers/defineProperty"),a=c(require("lodash")),t=c(require("../utils/analyse")),n=require("../utils/tools"),o=require("./lotteryUtils");function c(e){return e&&e.__esModule?e:{default:e}}var l=exports.LotteryShareType=function(e){return e.timeline="timeline",e.company_image="company-image",e.officail_image="officail_image",e.wechat="wechat",e.image="image",e.article="article",e.kefu="kefu",e.wecom="wecom",e.group_chat="group_chat",e.team="team",e.team_invite="team_invite",e.team_image="team_image",e.wechat_key="wechat_key",e.share_setting="share_setting",e}({});function r(t,o,c){var r,s=(0,n.shareableAboutPrivate)(o)?"":(0,n.isWxWork)()?"请在手机个人微信上分享抽奖，企业微信分享无效":"请在手机个人微信上分享抽奖，电脑端分享无效",g=(i(i(i(i(i(i(i(i(i(i(r={},l.timeline,{label:"分享到朋友圈",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-timeline-share.png"}),l.company_image,{label:"保存分享图",icon:"https://lucky-cdn-resource.nocode.com/mina/lottery/icon-official-share-image.png",image:a.default.get(o,"lottery_feature.add_qy_user.share_image")}),l.officail_image,{label:"保存分享图",icon:"https://lucky-cdn-resource.nocode.com/mina/lottery/icon-official-share-image.png",image:(null==c?void 0:c.officialShareImg)||a.default.get(o,"share_image.official_account_url")}),l.wechat,{label:"发送给朋友",openType:"share",id:"wechat",disabled:s,hide:m(),icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-friends-new.png"}),l.wechat_key,{label:"发送给朋友",openType:"share",id:"wechat_key",disabled:s,hide:m(),icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-friends-new.png"}),l.image,{label:"保存分享图",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-pic%403x.png"}),l.kefu,{label:"复制链接",icon:"https://lucky-cdn.nocode.com/mina/lottery/share_icon_link@3x.png"}),l.wecom,{label:"企业微信分享",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon_share_wecom@3x.png"}),l.article,{label:"公众号传播",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon_mp1@3x.png"}),l.group_chat,{label:"分享到群聊",icon:"https://lucky-cdn.nocode.com/mina/lottery/share-icon-friends@3x.png",openType:"share",hide:m()}),i(i(i(i(r,l.team,{label:"查看队内好友",icon:"https://lucky-cdn.nocode.com/mina/lottery/icn-fellow@3x.png"}),l.team_invite,{label:"邀请好友组队",openType:"share",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-friends-new.png"}),l.team_image,{label:"保存分享图片组队",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-pic%403x.png"}),l.share_setting,{label:"更多设置",icon:"https://lucky-cdn.nocode.com/mina/lottery/icon-setting.png"}))[t];return g.hide?null:e(e({},g),{},{id:t})}function s(e,i){if((0,t.default)("detail_invite_pic"),(0,t.default)("detail_invite",{source:a.default.get(e,"is_official",!1)?"公共抽奖":"私人抽奖",type:"生成分享图",page:"game_".concat(e.state,"_").concat(e.is_official?"pub":"pri")}),i.isShareGroup)wx.navigateTo({url:"/pages/share/generateimage/generateimage?id=".concat(e.id,"&type=group_share_image")});else if(e.vote&&i.displayVoteShare)wx.navigateTo({url:"/pages/share/generateimage/generateimage?id=".concat(e.id,"&type=vote_share_image")});else{var n=e.share_image||{};n.is_initiator=e.is_initiator;var c=(0,o.isProLottery)(e);wx.navigateTo({url:"/pages/shareimage/shareimage?id=".concat(e.id,"&gt=").concat(c?"pro":"normal","&share_image=").concat(encodeURIComponent(JSON.stringify(n)))})}}function m(){return!!a.default.get(getApp(),"globalData.appConfig.wechat_share_disable")}
},{isPage:false,isComponent:false,currentFile:'utils/share.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/storage.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setStorage=exports.setExpired=exports.isExpired=exports.isExistOrCreate=exports.isExist=exports.getStorage=exports.checkCacheExpired=void 0;var e=require("../@babel/runtime/helpers/objectSpread2"),r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=u?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(require("../utils/tools"));function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}exports.isExistOrCreate=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:if(e.sent){e.next=6;break}throw new Error("not exist");case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,u(t,!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),exports.isExist=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:if(e.sent){e.next=6;break}throw new Error("not exist");case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),exports.isExpired=function(e){var r=wx.getStorageSync(e);return null==r||!r.expireAt||new Date(r.expireAt)<new Date};var u=exports.setStorage=function(){var e=t(r().mark((function e(t,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.promisify(wx.setStorage)({key:t,data:a}).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),s=(exports.setExpired=function(){var a=t(r().mark((function t(a,u){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=wx.getStorageSync(a)||{},r.abrupt("return",n.promisify(wx.setStorage)({key:a,data:e(e({},s),{},{expireAt:u})}).catch((function(){return null})));case 2:case"end":return r.stop()}}),t)})));return function(e,r){return a.apply(this,arguments)}}(),exports.getStorage=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.promisify(wx.getStorage)({key:t}).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());exports.checkCacheExpired=function(){var e=t(r().mark((function e(t,a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.promisify(wx.getStorage)({key:t});case 3:if(s=e.sent.data,!(new Date(s.expireAt)<new Date)){e.next=10;break}return e.next=7,u(t,{expireAt:new Date(a).getTime()});case 7:return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,u(t,{expireAt:new Date(a).getTime()});case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r,t){return e.apply(this,arguments)}}();
},{isPage:false,isComponent:false,currentFile:'utils/storage.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/subscribeMessage.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.authSubscribeMesssage=exports.TEMPLATE_TYPES=exports.TEMPLATE_IDS=exports.SubscribeMessageLabel=exports.SUBSCRIBE_MESSAGE_STATE=void 0,exports.commonSimpleSubscribe=function(e){return A.apply(this,arguments)},exports.getAuthed=function(e,t){var r=!0,n=e.some((function(e){var r=g[e];return"accept"===t[1][r]}));!t[0]&&n||(r=!1);return r},exports.getJoinLotterySubscribeMessages=void 0,exports.getSubList=function(){return(0,E.superRequest)({url:"".concat(p.default.API_HOST,"/").concat(p.default.API_VERSION,"/user/public_tag"),method:"GET"})},exports.getSubMsgGuideGif=function(){var e=(0,T.getSysInfo)().version;if((0,d.compareVersion)(e,"8.0.32")>=0)return j;return"https://lucky-cdn.nocode.com/mina/lottery/submsg-auto-check.gif"},exports.getSubscriptionsSetting=void 0,exports.isAcceptWithDrawLotteryNotice=function(e){return"accept"===e[I.JOIN_LOTTERY]||"accept"===e[I.JOIN_LOTTERY_V2]},exports.isInitiatorNeedAuthLotteryResult=void 0,exports.isInitiatorSubRejected=function(e){return!!(wx.getStorageSync("rejectedSubscribeMessage")||[]).find((function(t){return t.id===e}))},exports.isRequestV1orV2=h,exports.requestSubscribeMessage=function(e){return k.apply(this,arguments)},exports.storeRejectedSubscribeMessage=function(e){var t=(wx.getStorageSync("rejectedSubscribeMessage")||[]).filter((function(e){return new Date(e.date).getTime()>(new Date).getTime()-1296e6}));t.push({id:e,date:new Date}),wx.setStorageSync("rejectedSubscribeMessage",t)},exports.subscribeMsgOfGroupShare=void 0,exports.updateSubNotify=Y;var e=require("../@babel/runtime/helpers/createForOfIteratorHelper"),t=require("../@babel/runtime/helpers/classCallCheck"),r=require("../@babel/runtime/helpers/createClass"),n=require("../@babel/runtime/helpers/objectSpread2");require("../@babel/runtime/helpers/Arrayincludes");var a,i=require("../@babel/runtime/helpers/regeneratorRuntime"),s=require("../@babel/runtime/helpers/asyncToGenerator"),u=require("../@babel/runtime/helpers/toConsumableArray"),c=require("../@babel/runtime/helpers/defineProperty"),o=S(require("lodash")),l=S(require("./event")),_=S(require("./analyse")),f=require("../services/subscribeMessage"),E=require("../libs/request"),p=S(require("../config")),T=require("@mina-modules/system-info"),d=require("./tools"),b=S(require("@mina-modules/load-file"));function S(e){return e&&e.__esModule?e:{default:e}}var I=exports.TEMPLATE_TYPES={CREATE_LOTTERY:"create_lottery",JOIN_LOTTERY:"join_lottery",JOIN_LOTTERY_V2:"join_lottery_v2",MULTI_JOIN_RECALL:"multi_join_recall",REFUND:"refund",COMPLAIN:"complain",COMPLAIN_RESULT:"complain_result",COMPENSATION:"compensation",VIOLATE:"violate",CERTIFICATE:"certificate",SIGN_REMINDER:"sign_reminder",GOODS_DELIVERY:"goods_delivery",WISH_SELECT:"wish_select",WISH_COMMENT:"wish_comment",FIRST_MESSAGE:"first_message",ACTIVITY_START:"activity_recall",PROMOTION_STATECHANGE:"promotion_mention",PROMOTION_REVIEW_DONE:"promotion_verify",PROMOTION_ACTIVE:"promotion_show",BALANCE_MENTION:"balance_mention",PRIZE_SENT_NOTICE:"prize_sent_notice",PRIZE_SENT_NOTICE_V2:"prize_sent_notice_v2",NEXT_NOTICE:"next_notice",MESSAGE_REPLY:"message_reply",USER_RECALL:"user_recall",LOTTERY_EFFECTS:"lottery_effects",ACTIVITY_REPORT:"activity_report",ACTIVITY_REDEMPTION:"activity_redemption",SPONSOR_CONTACT:"sponsor_contact",PRE_JOIN_RECALL:"start_recall",UNFINISH_TASK:"unfinish_task",INVITE_RECALL:"invite_recall",RECALL_TOEXPIRE:"recall_toexpire",RECALL_REMIND:"recall_remind",DAILY_ASSIST:"daily_assist_recall",LOTTERY_START:"lottery_start",VOTE_ASSIST:"vote_assist",LACK_WISH_JOIN:"lackwish_join"},g=exports.TEMPLATE_IDS=(c(c(c(c(c(c(c(c(c(c(a={},I.CREATE_LOTTERY,"AF71z7RvTdeKh-zDqOwiAhqoYP9aOIhlMqGmlfTUtN0"),I.JOIN_LOTTERY,"AF71z7RvTdeKh-zDqOwiAhqoYP9aOIhlMqGmlfTUtN0"),I.JOIN_LOTTERY_V2,"nDxupFaNZCKSkTdvoIaRNdtVSP-hzGH_u1qjkZq9u2Q"),I.MULTI_JOIN_RECALL,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU"),I.REFUND,"Ed13aFnWIMPjfwQ5ZLQ38cAXbSbWZqBMguc14AQ4IxY"),I.COMPLAIN,"sBxPnQqaGokH2kD_gUjNLtxP-kIeoNoTOEvsIj_ILlk"),I.COMPLAIN_RESULT,"a9l8dKkD2_apKrL60MobHH2_Mrz8Ao5z3rAY_8a6GpI"),I.COMPENSATION,"0n2v7xxObigYAUUOjbOscL-N4UwNc_1jSowlsD_P2x4"),I.VIOLATE,"ottP7QQv0JRYPeZ-OCPx4cYQBGYb1qEFSAg7K6354H0"),I.CERTIFICATE,"8NE2G4B4dUR6mg50AuIg6GJLoiyTghO-d4J7mIcF70c"),c(c(c(c(c(c(c(c(c(c(a,I.SIGN_REMINDER,"g3MWto5oZlFFfFfgbizSEex2lYGgPcV_TrdL0MGB9Sc"),I.GOODS_DELIVERY,"GaCUjX9ypxOqiYF4dVtGwp-2hfRjoyPePHKWEMOX4wE"),I.WISH_SELECT,"X4kpcU5I_06xBA73gjK73OW5SKucqfkqXYmkheuUilU"),I.WISH_COMMENT,"FRtX4NkDjLAMujWvxzjReNkX70jaaKtA_Q2sgsscQPM"),I.FIRST_MESSAGE,"FRtX4NkDjLAMujWvxzjReNkX70jaaKtA_Q2sgsscQPM"),I.MESSAGE_REPLY,"FRtX4NkDjLAMujWvxzjReNkX70jaaKtA_Q2sgsscQPM"),I.ACTIVITY_START,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU"),I.PROMOTION_STATECHANGE,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.PROMOTION_REVIEW_DONE,"8NE2G4B4dUR6mg50AuIg6GJLoiyTghO-d4J7mIcF70c"),I.PROMOTION_ACTIVE,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU"),c(c(c(c(c(c(c(c(c(c(a,I.BALANCE_MENTION,"rIyjhCODqXJEZFgxWA-8Wrcn_TQJrxp8B3Qr0UPUgbI"),I.PRIZE_SENT_NOTICE,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.PRIZE_SENT_NOTICE_V2,"eHO8hSc3b03kzAaJCEQtH8ofjsmxDfeMJnXzeHQ5524"),I.NEXT_NOTICE,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.USER_RECALL,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU"),I.LOTTERY_EFFECTS,"YT8gJXVmf_L90j9kwaahLFmLDhKBPmE1oMKjWnD-l2k"),I.ACTIVITY_REPORT,"YT8gJXVmf_L90j9kwaahLFmLDhKBPmE1oMKjWnD-l2k"),I.ACTIVITY_REDEMPTION,"bBDcsyQM0q8SFvKo3CMvqcvHTbbvoIcw0UVucaGpp7k"),I.SPONSOR_CONTACT,"oTCxq_0cM2U6aEMIS0qsuBr05tvUDJq7wcAZSSUalmE"),I.PRE_JOIN_RECALL,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU"),c(c(c(c(c(c(c(c(a,I.UNFINISH_TASK,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.INVITE_RECALL,"BnpA7MQCD1XhTlNEfGIhZ9ZHcPyGq83UCFOtxKHp6Io"),I.RECALL_TOEXPIRE,"G776cxv5nvk8CsskiWBwpj6trs-ec-9HJvnb3XHlYgY"),I.RECALL_REMIND,"9vQqlvUDc6cvGEzKPuxv8Bw58WjTMCU9uIHQ5uT9dLI"),I.DAILY_ASSIST,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.LOTTERY_START,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.VOTE_ASSIST,"LNcDvvWaEAz1oItyKfg49doKciMg8EfcTde7godd4Q4"),I.LACK_WISH_JOIN,"bM_1rOZ-FP_PXs1FAb7uQwWQ1fSA_SPpNhR40XRXTzU")),O=exports.SUBSCRIBE_MESSAGE_STATE={accept:"accept",reject:"reject",ban:"ban",filter:"filter"};function R(e,t){if("requestSubscribeMessage:ok"===t.errMsg){var r=e.map((function(e){return{id:g[e],type:e}}));return o.default.keys(t).filter((function(e){return"errMsg"!==e})).reduce((function(e,n){if(t[n]===O.accept){var a=r.find((function(e){return e.id===n}));return a?[].concat(u(e),[{subscribe_type:a.type}]):e}return e}),[])}return[]}function A(){return(A=s(i().mark((function e(t){var r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.types,a=t.lotteryId,u=r.map((function(e){return g[e]})),e.abrupt("return",new Promise((function(e){var t;wx.requestSubscribeMessage?wx.requestSubscribeMessage({tmplIds:u,success:(t=s(i().mark((function t(s){var u,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((u=R(r,s)).length>0)){t.next=15;break}return t.prev=2,c=u.map((function(e){return n(n({},e),{},{data_id:a,notify:!0})})),t.next=6,(0,f.postSubscribeMessage)(c);case 6:e(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("🚀 ~ file: subscribeMessage.ts ~ line 127 ~ success: ~ error",t.t0),e(!1);case 13:t.next=16;break;case 15:e(!1);case 16:case"end":return t.stop()}}),t,null,[[2,9]])}))),function(e){return t.apply(this,arguments)}),fail:function(t){console.log("🚀 ~ file: subscribeMessage.ts ~ line 133 ~ error",t),e(!1)}}):e(!1)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=[{type:I.JOIN_LOTTERY,condition:function(e){return h(e.itemSettings,I.JOIN_LOTTERY)},label:{name:"R1",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.JOIN_LOTTERY_V2,condition:function(e){return h(e.itemSettings,I.JOIN_LOTTERY_V2)},label:{name:"R2",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.USER_RECALL,condition:function(e,t){return v(e.itemSettings,I.USER_RECALL)&&!(0,d.isLackOfWishPoints)(t)},label:{name:"N",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.NEXT_NOTICE,condition:function(){return o.default.get(getApp(),"globalData.userProfile.new_user_gift",!1)},label:{name:"A",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.ACTIVITY_REDEMPTION,condition:function(e,t){var r=e.itemSettings;return!(!t||0!==o.default.get(t,"f","").indexOf("push_"))&&(console.log("f => ",o.default.get(t,"f")),v(r,I.ACTIVITY_REDEMPTION))},label:{name:"C",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.VOTE_ASSIST,condition:function(e,t){var r,n,a=e.itemSettings;return!(null==t||!t.vote||null==t||null===(r=t.assist_info)||void 0===r||null===(n=r.assist_types)||void 0===n||!n.length)&&v(a,I.VOTE_ASSIST)},label:{name:"d",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.CREATE_LOTTERY,condition:function(){return!1},label:{name:"e",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.RECALL_TOEXPIRE,condition:function(){return!1},label:{name:"f",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.RECALL_REMIND,condition:function(){return!1},label:{name:"g",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.PROMOTION_STATECHANGE,condition:function(){return!1},label:{name:"h",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.LACK_WISH_JOIN,condition:function(e,t){return v(e.itemSettings,I.LACK_WISH_JOIN)&&(0,d.isLackOfWishPoints)(t)},label:{name:"h",auto:"a",manual:"h",accept:"1",reject:"0"}},{type:I.MULTI_JOIN_RECALL,condition:function(e){return v(e.itemSettings,I.MULTI_JOIN_RECALL)},label:{name:"i",auto:"a",manual:"h",accept:"1",reject:"0"}}];function v(e,t){var r=e[g[t]];return!r||r===O.accept}function h(e,t){var r=I.JOIN_LOTTERY,n=I.JOIN_LOTTERY_V2,a=O.accept,i=O.reject,s=e[g[r]],u=e[g[n]];return u===a?n===t:s===a?r===t:u===i?s===i?""===t:r===t:n===t}var N=exports.authSubscribeMesssage=function(){var e=s(i().mark((function e(t,r){var n,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",new Promise((function(e){if(!wx.requestSubscribeMessage)return e([new Error("暂不支持订阅消息"),{}]);if(!t.length)return C({}),e([new Error("参数不能为空数组"),{}]);var a=t.map((function(e){return g[e]}));console.log("authSubscribeMesssage -> ids",a),wx.requestSubscribeMessage({tmplIds:a,success:function(a){console.log("requestSubscribeMessage -> success -> result",a),C(a),null!=r&&r.id?((0,d.isLackOfWishPoints)(r)&&"accept"===a[g[I.LACK_WISH_JOIN]]&&(0,_.default)("detail_join_sub_wishlack"),(0,f.postSubscribeMessage)(L(t,a,r,n)).catch(console.error)):console.error("缺失 lotteryId 参数"),e([null,a||{}])},fail:function(t){console.log("requestSubscribeMessage -> fail -> e",t),C({}),e([new Error(t.errMsg),{}])}})})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function L(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=o.default.keys(t).map((function(a){if(t[a]!==O.accept)return!1;var i=y(a,e);if(!i)return!1;if(i===I.USER_RECALL){if(null!=r&&r.public_tag_id)return Y(r.public_tag_id,"add"),null;M()}return{subscribe_type:i,data_id:null==r?void 0:r.id,notify:!0,bind_allow:n}})).filter((function(e){return e}));return a}function M(){var e=o.default.get(getApp(),"globalData.userProfile.recall_msg_count",0);o.default.set(getApp(),"globalData.userProfile.recall_msg_count",e+1)}function y(e,t){var r=m.find((function(r){if(o.default.includes(t,r.type)&&g[r.type]===e)return!0}));return r&&r.type}var C=function(){var e=s(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return");case 9:if(void 0!==r.mainSwitch){e.next=12;break}return e.abrupt("return",(0,_.default)("detail_join_substate",{label:"undefined"}));case 12:(n=new D({setting:r,result:t}).toString())&&(0,_.default)("detail_join_substate",{label:n});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();function P(e){var t=m.find((function(t){if(g[t.type]===e)return!0}));return t&&t.label}var x=exports.getSubscriptionsSetting=function(){return new Promise((function(e,t){wx.getSetting({withSubscriptions:!0,success:function(t){var r=t.subscriptionsSetting;e(r?n({itemSettings:{}},r):{itemSettings:{}})},fail:function(e){t(e),console.error("getSetting => ",e)}})}))},w=!1;function k(){return(k=s(i().mark((function t(r){var n,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=2;break}throw new Error("请勿频繁操作");case 2:return w=!0,n=!!o.default.find(r,(function(e){return e===I.JOIN_LOTTERY||e===I.CREATE_LOTTERY})),a=o.default.compact(o.default.map(r,(function(e){return g[e]}))),t.prev=5,t.next=8,new Promise((function(t,i){var s=!0,u=setTimeout((function(){s=!1,n&&w&&l.default.emit("subscribe:state_change","start")}),600);if(!wx.requestSubscribeMessage)return w=!1,void i(new Error("小程序版本过低"));var c=!1,f=!1;setTimeout((function(){c||(0,_.default)("req_sub_msg_no_callback")}),1e4),setTimeout((function(){c||(f=!0,(0,_.default)("req_sub_msg_timeout"),i(new Error("消息通知授权超时")))}),1e4),wx.requestSubscribeMessage({tmplIds:a,success:function(a){if(C(a),u&&clearTimeout(u),c=!0,!f){w=!1,n&&l.default.emit("subscribe:state_change","end");var i,_={autoCheck:s},E=e(o.default.keys(a));try{var p=function(){var e=i.value,t=o.default.find(r,(function(t){return g[t]===e}));t&&(_[t]=a[e])};for(E.s();!(i=E.n()).done;)p()}catch(e){E.e(e)}finally{E.f()}t(_)}},fail:function(a){if(C({}),u&&clearTimeout(u),c=!0,!f)if(w=!1,n&&l.default.emit("subscribe:state_change","end"),a.errMsg&&"string"==typeof a.errMsg&&a.errMsg.indexOf("The main switch is switched off")>=0){var s,o={autoCheck:!0},_=e(r);try{for(_.s();!(s=_.n()).done;){o[s.value]="reject"}}catch(e){_.e(e)}finally{_.f()}t(o)}else i(new Error(a.errMsg))}})}));case 8:return s=t.sent,t.abrupt("return",s);case 12:throw t.prev=12,t.t0=t.catch(5),w=!1,l.default.emit("subscribe:state_change","end"),t.t0;case 17:case"end":return t.stop()}}),t,null,[[5,12]])})))).apply(this,arguments)}exports.getJoinLotterySubscribeMessages=function(){var e=s(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:if(!1!==r.mainSwitch){e.next=11;break}return e.abrupt("return",[]);case 11:return n=m.filter((function(e){return e.condition(r,t)})).map((function(e){return e.type})),console.log("need request =>",n),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();var j,q=exports.isInitiatorNeedAuthLotteryResult=function(e){var t="i_auth_lottery_result",r=wx.getStorageSync(t),n=[];r&&(n=r);var a=(n=n.slice(-10)).indexOf(e);return-1===a&&(n.push(e),wx.setStorage({key:t,data:n})),-1===a};exports.subscribeMsgOfGroupShare=function(){var e=s(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,q(r)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,N([I.CREATE_LOTTERY,I.PROMOTION_STATECHANGE],t);case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return");case 14:if(!(n[0]||"reject"===n[1][g[I.CREATE_LOTTERY]]&&"reject"===n[1][g[I.PROMOTION_STATECHANGE]])){e.next=16;break}return e.abrupt("return");case 16:try{(0,f.postSubscribeMessage)([{subscribe_type:I.CREATE_LOTTERY,data_id:r,notify:"accept"===n[1][g[I.CREATE_LOTTERY]]},{subscribe_type:I.PRIZE_SENT_NOTICE_V2,data_id:r,notify:"accept"===n[1][g[I.PRIZE_SENT_NOTICE_V2]]}])}catch(e){console.error(e)}case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();function Y(e,t){return(0,E.superRequest)({url:"".concat(p.default.API_HOST,"/").concat(p.default.API_VERSION,"/user/public_tag/subscribe"),method:"POST",data:{tag_id:e,type:t}})}s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.default)({url:"https://lucky-cdn.nocode.com/mina/lottery/submsg-auto-check2.gif"});case 2:j=e.sent;case 3:case"end":return e.stop()}}),e)})))();var D=exports.SubscribeMessageLabel=function(){function e(r){t(this,e),this.setting=r.setting,this.result=r.result,this.autoKeys=Object.keys(this.setting.itemSettings||{}),this.manualKeys=Object.keys(this.result)}return r(e,[{key:"toString",value:function(){var e=this;if(!this.setting.mainSwitch)return"R0";var t=[];return this.autoKeys.forEach((function(r){var n,a=(null===(n=P(r))||void 0===n?void 0:n.name)||"";if(a){var i,s="accept"===(null===(i=e.setting.itemSettings)||void 0===i?void 0:i[r])?"1":"0",u="".concat(a).concat("a").concat(s);t.push(u)}})),this.manualKeys.forEach((function(r){var n;if(!e.autoKeys.includes(r)){var a=(null===(n=P(r))||void 0===n?void 0:n.name)||"";if(a){var i="accept"===e.result[r]?"1":"0",s="".concat(a).concat("h").concat(i);t.push(s)}}})),t.join("&")}}]),e}();
},{isPage:false,isComponent:false,currentFile:'utils/subscribeMessage.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/system.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canUseGetGroupEnterInfo=function(r){var t=(r||n()).SDKVersion;return(0,e.compareVersion)(t,"2.17.3")>=0},exports.canUsePrivateMessage=void 0,exports.getSysInfo=n,exports.isIOS=function(e){return"ios"===(e||n()).platform},exports.isWxWork=function(e){return"wxwork"===(e||n()).environment};var e=require("./tools"),r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(require("@mina-modules/system-info"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(){return r.getSysInfo()}exports.canUsePrivateMessage=function(r){var t=(r||n()).SDKVersion;return(0,e.compareVersion)(t,"2.13.0")>=0};
},{isPage:false,isComponent:false,currentFile:'utils/system.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/third-party/zsxq.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLaunchAppUrl=function(e){var t,r,n,s;return"https://wx.zsxq.com/mweb/views/lottery/detail.html?".concat((0,o.queryString)({group_id:null===(t=e.lottery_feature)||void 0===t||null===(r=t.zsxq)||void 0===r?void 0:r.id,lottery_id:e.id,lottery_params:null===(n=e.lottery_feature)||void 0===n||null===(s=n.zsxq)||void 0===s?void 0:s.params},{encode:!1}))},exports.getZSXQParamsForCreating=function(e){var t=e.zsxq_gid,r=e.zsxq_gn,o=e.zsxq_params;return{id:t,name:r,params:o}},exports.isFromZSXQ=function(e){var t=e.template,o=e.zsxq_gid,n=e.zsxq_gn,s=e.zsxq_params;return[t===r.CREATE_TEMPLATE.ZSXQ,o,n,s].every(Boolean)},exports.isNotValidFromZSXQ=function(e){var t=e.template,o=e.zsxq_gid,n=e.zsxq_gn,s=e.zsxq_params;return[t===r.CREATE_TEMPLATE.ZSXQ,!o||!n||!s].every(Boolean)},exports.isOpenByApp=function(){var e;return 1069===(null===(e=(0,o.getOptionsSync)(!0))||void 0===e?void 0:e.scene)},exports.isQualifiedByZSXQ=function(e){var t,r,o=wx.getEnterOptionsSync(),n=o.query,s=o.scene;return n.zsxq_gid===(null===(t=e.lottery_feature)||void 0===t||null===(r=t.zsxq)||void 0===r?void 0:r.id)&&1069===s},exports.isZSXQLocalLottery=function(e){return e.template===r.CREATE_TEMPLATE.ZSXQ&&!t.default.isEmpty(e.zsxq)},exports.isZSXQLottery=function(e){var r;return!t.default.isEmpty(null==e||null===(r=e.lottery_feature)||void 0===r?void 0:r.zsxq)},exports.showSubscribeModal=function(e,r){if(r.showOnce&&(s=e.id,((null===(a=wx.getStorageSync("ZSXQ"))||void 0===a?void 0:a.SUBSCRIBE_MODAL_SHOWED_RECORD)||{})[s]))return;var s,a;!function(e){var r=wx.getStorageSync("ZSXQ")||{};t.default.set(r,"".concat("SUBSCRIBE_MODAL_SHOWED_RECORD",".").concat(e),!0),wx.setStorageSync("ZSXQ",r)}(e.id);var u=(0,o.getCurrentPage)();(0,o.showCustomModal)({title:"温馨提示",confirmText:"订阅开奖通知",cancelText:"暂不订阅",content:"1. 发起人以外的用户参与抽奖后，抽奖内容将无法修改。\n2.星球用户必须在对应的知识星球内点击链接，才能参与抽奖。\n3. 发布抽奖前，建议订阅抽奖开奖通知，不错过开奖时间。",success:function(t){if(t.confirm){var o=u.selectComponent("#join-lottery-subscribe-message");o&&(o.auth(!1,e),o.listen((function(t){var o;t.authed?((0,n.showToast)("开启通知成功"),null===(o=r.onSubscribe)||void 0===o||o.call(r)):i(e.id)})))}else i(e.id)}})};var e,t=(e=require("lodash"))&&e.__esModule?e:{default:e},r=require("@models/create"),o=require("@utils/tools"),n=require("@utils/wechatAPI"),s=require("@utils/subscribeMessage");function i(e){var t,r=(0,o.getCurrentPage)();(0,s.storeRejectedSubscribeMessage)(e),null==r||null===(t=r.refreshPage)||void 0===t||t.call(r)}
},{isPage:false,isComponent:false,currentFile:'utils/third-party/zsxq.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/timer.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSucceed=function(){var r=t;return t=!1,clearTimeout(e),r},exports.leaveFor=function(r){e=setTimeout((function(){return t=!0}),r)};var e,t=!1;
},{isPage:false,isComponent:false,currentFile:'utils/timer.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/tips.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getConditionAdTip=y,exports.getTipBeforeJoin=function(t){return d.apply(this,arguments)},exports.isWeComLottery=f,exports.isWeComLotteryInitiated=function(t){return!!(0,i.get)(t,"lottery_feature.add_qy_user.init_success")},exports.showRiskControlNotice=function(t){var e;if(!(null===(e=getApp().globalData.appConfig)||void 0===e?void 0:e.transfer_risk_enable)||!t||0===t.prizeList.length)return!1;return t.prizeList.every((function(t){return[r.PrizeTypes.MONEY,r.PrizeTypes.RANDOM].includes(t.type)}))},require("../@babel/runtime/helpers/Arrayincludes");var t=require("../@babel/runtime/helpers/regeneratorRuntime"),e=require("../@babel/runtime/helpers/asyncToGenerator"),r=require("../models/lottery"),n=require("../services/group"),i=require("lodash"),a=require("./tools"),o=require("../services/game"),s=require("../services/weComGroup"),u=require("./third-party/zsxq"),p=require("@models/join-task"),c=require("./lotteryUtils");function f(t){return!!(0,i.get)(t,"lottery_feature.add_qy_user")}function d(){return(d=e(t().mark((function e(r){var n,i,a,o,s=arguments;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"",r&&!r.is_participator&&!["interstitialAd","video","joinAd"].includes(r.join_type)){t.next=3;break}return t.abrupt("return","");case 3:return t.t0=l(r),t.t1=A(r),t.t2=v(r),t.t3=h(r),t.t4=m(r),t.next=10,x(r);case 10:return t.t5=t.sent,t.t6=q(r),t.t7=j(r),t.t8=y(r),t.t9=L(r),t.next=17,b(r);case 17:return t.t10=t.sent,t.t11=C(r,n),t.t12=_(r),i=[t.t0,t.t1,t.t2,t.t3,t.t4,t.t5,t.t6,t.t7,t.t8,t.t9,t.t10,t.t11,t.t12],a=i.filter((function(t){var e=t.passed,r=t.tip;return!e&&!!r})).map((function(t){return t.tip})).join("\n"),o=i.filter((function(t){var e=t.passed,r=t.tip;return e&&!!r})).map((function(t){return t.tip})).pop()||"",t.abrupt("return",a||o);case 24:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function l(t){var e=!0,r="";if((0,u.isZSXQLottery)(t)){var n,i,a=decodeURIComponent((null===(n=t.lottery_feature)||void 0===n||null===(i=n.zsxq)||void 0===i?void 0:i.name)||"");(0,u.isQualifiedByZSXQ)(t)?r=t.is_initiator?"点击右下角\n发布通知引导星友参与":"欢迎参与「".concat(a,"」星球专属抽奖\n祝你好运！"):(e=!1,r=t.is_initiator?"点击右下角\n发布通知引导星友参与":"请打开知识星球 App\n在「".concat(a,"」星球内参与抽奖"))}return{passed:e,tip:r}}function _(t){var e=!0,r="";return(0,c.isVerifyJoinLottery)(t)&&(e=!1,r=t.verify_has_submit&&!t.verify_submit?"你提交的内容已被驳回，请按发起人要求重新提交":"发起人通过审核后，抽奖自动参与成功"),{passed:e,tip:r}}function y(t){var e=!0,n="",a=(0,i.get)(t,"extra.join_condition.join_type","");return Object.keys(p.JoinTaskTypeEnum).includes(a)&&"joinAd"!==t.join_type&&(e=!1,n=(0,i.get)(t,"extra.join_condition.title",r.DefaultAdsText[a])),{passed:e,tip:n}}function v(t){var e=!0,r="";return(0,a.isLimitedAreaJoinLottery)(t)&&(e=!1,r="授权当前所在位置，参与抽奖"),{passed:e,tip:r}}function h(t){var e=!0,r="";f(t)&&((0,i.get)(t,"local_data.from_join_key")&&t.right_join_key?r="你已获得参与资格\n点击参与抽奖":(e=!1,r="按发起人要求添加企业微信，可参与抽奖"));return{passed:e,tip:r}}function m(t){var e=!0,r="",n=t.game_info;return n&&(e=!1,n.threshold&&(r="坚持飞 ".concat(n.threshold," 秒，即可参与成功")),n.assistable&&(r="飞得越久，中奖率越高")),{passed:e,tip:r}}function b(t){return g.apply(this,arguments)}function g(){return(g=e(t().mark((function e(r){var i,a,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,a="",!r.groupchat_only){t.next=13;break}return t.next=5,(0,n.canJoinGroup)(r);case 5:if(!t.sent){t.next=9;break}a=a="🥳\n欢迎参与本群专属抽奖\n祝你好运！",t.next=11;break;case 9:i=!1,a="请从发起人分享的链接进入";case 11:t.next=18;break;case 13:if(!(0,c.isWeComGroupLottery)(r)){t.next=18;break}return t.next=16,(0,o.canJoinForWeComGroupchat)(r);case 16:t.sent?a="欢迎参与本群专属抽奖\n祝你好运！":(i=!1,a=(0,s.getTips)(null===(u=r.lottery_feature)||void 0===u?void 0:u.qy_group_chat));case 18:return t.abrupt("return",{passed:i,tip:a});case 19:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function x(t){return k.apply(this,arguments)}function k(){return(k=e(t().mark((function e(r){var a,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!0,o="",!r.direct_share_only){t.next=9;break}return(0,n.canUsePrivateMessage)()||(a=!1,o="请将微信升级至最新版本后参与"),t.next=6,(0,n.authPrivateMessage)();case 6:s=t.sent,s.valid?o=(0,i.get)(r,"need_code")?"":"你已获得参与资格，点击按钮参与":(a=!1,o=r.is_initiator?"分享抽奖卡片，好友从卡片进入即可参与":"私聊发起人获取链接，即可参与");case 9:return t.abrupt("return",{passed:a,tip:o});case 10:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function q(t){var e=!0,r="",n=(t.conditions||[]).find((function(t){return"point"===t.type}));return(0,i.get)(n,"info.point_count")&&(e=!1,r="消耗 ".concat(n.info.point_count," 心愿，参与抽奖")),{passed:e,tip:r}}function j(t){var e=!0,r="";if(t.assist_info){var n=(0,i.get)(t,"assist_info.assist_types",[]).find((function(t){return"subscribe_gzh"===t.type}));if(n){var a=n.official_id;n.official_auth_id&&!a&&(e=!1,r="等待公众号管理员授权，授权后可参与")}}return{passed:e,tip:r}}function A(t){var e=!0,r="";return t.official_data&&(t.official_data.official_auth_id&&!t.official_data.official_id?(e=!1,r="等待公众号管理员授权，授权后可参与"):t.officialCode?r="你已获得抽奖资格\n点击参与抽奖":(e=!1,r="去公众号回复关键词，获取领奖资格")),{passed:e,tip:r}}function C(t,e){var r=!0,n="";return"phone"===t.join_type&&("authed"===e?(r=!1,n="发起人要求参与者授权手机号，参与抽奖即默认授权"):"manual"===e?n="授权成功，点击按钮参与抽奖":(r=!1,n="发起人要求参与者授权手机号后参与抽奖")),{passed:r,tip:n}}function L(t){var e=!0,r="",n=t.groupchat_only,i=t.form_template;return!t.is_participator&&null!=i&&i.enable&&(e=!1,r=n?"🥳 本群专属：填写问卷，参与抽奖":"填写问卷，参与抽奖"),{passed:e,tip:r}}
},{isPage:false,isComponent:false,currentFile:'utils/tips.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/tools.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOCAL_FIRST_TIME_KEY=exports.CLOSED_ABOUT_ADD_GUID=void 0,exports.animateTime=function(e){var t=Date.now();return function(){var r=Date.now()-t;return r>e?1:r/e}},exports.backToPage=function(e,t){console.log("back to page",e);try{var r=W().map((function(e){return e.route})),n=f.default.findIndex(r,(function(t){return t===e}));return console.log("current paths",r,n),-1===n||r.length-n<=0?void(t&&(B(t)?wx.switchTab({url:t}):wx.redirectTo({url:t}))):wx.navigateBack({delta:r.length-n-1})}catch(e){console.error(e)}},exports.canIdentifyQR=function(){var e=(0,h.getSysInfo)(),t=e.version,r=e.platform,n=!1;n="android"===r?$(t,"8.0.3")>=0:"ios"!==r||$(t,"8.0.6")>=0;return n},exports.canUseBenefitsCoupon=function(){return $((0,h.getSysInfo)().SDKVersion,"2.19.6")>=0},exports.canUseCopyUrl=function(){var e=(0,h.getSysInfo)(),t=e.SDKVersion,r=e.android;return $(t,"2.14.3")>=0&&r},exports.canUseGetGroupEnterInfo=fe,exports.canUseLimitPepole=function(){var e=f.default.get(getApp(),"globalData.userInfo.user_tags")||[];return f.default.includes(e,"lott_f")},exports.canUseNewVersionOfService=function(){return $((0,h.getSysInfo)().SDKVersion,"2.19.0")>=0},exports.canUseOffscreenCanvas=function(){return $((0,h.getSysInfo)().SDKVersion,"2.16.1")>=0},exports.canUsePreloadAd=function(){return $((0,h.getSysInfo)().SDKVersion,"2.14.1")>=0},exports.canUseUserProfile=function(){return $((0,h.getSysInfo)().SDKVersion,"2.27.1")<0},exports.cannotLoadWebp=function(){var e=(0,h.getSysInfo)();if(e){var t=e.system.split(" ").pop();return"ios"===e.platform&&$(t,"14.0.0")<0}return!0},exports.checkDateExpireData=function(e){var t=!1;try{var r=wx.getStorageSync("_EXPIRE_VALUES_0")||{};if(0===Object.keys(r).length)t="none";else{var n=r[e];if(n){var o=(0,u.default)(n).isBefore((0,u.default)());t=!!o}else t="none"}}catch(e){console.log("updateLocalObjData -> error",e),t="none"}return t},exports.checkOutName=function(e){var t=e.sponsor,r=e.initiator,n=e.kefu_share_data,o=e.kefu_share,a="";f.default.isEmpty(t)?!0===o&&n&&(a=n.title):a=t.name;a||(a=(null==r?void 0:r.certificate_name)||(null==r?void 0:r.nick_name));return a},exports.compact=function(e,t){if(t)return r({},e,t);return{}},exports.compareVersion=$,exports.composeText=function(e){return f.default.reduce(e,(function(e,t){return e+(t.text||"")}),"")},exports.compressImage=function(e){return ue.apply(this,arguments)},exports.copyDownloadLink=function(e,t){if(!e)return pe("获取下载链接失败");wx.showModal({title:"下载".concat(t),content:"".concat(t,"文件的下载链接已生成，30 分钟内有效。点击复制链接，前往浏览器打开，即可下载。"),showCancel:!1,confirmText:"复制链接",confirmColor:"#e2453a",success:function(t){t.confirm&&wx.setClipboardData({data:e,success:function(){pe("复制成功")}})}})},exports.couponDuration=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,u.default)(e).diff((0,u.default)(t),"days",!0),o=function(e){var t=Math.floor(e),r=24*(e-t),n=Math.floor(r),o=60*(r-n),a=Math.floor(o),i=60*(o-a);return{days:t,hours:n,minutes:a,seconds:Math.floor(i)}};if(n<0)return(0,u.default)(e).format("YYYY/M/D H:mm");var a=o(n),i=a.days,s=a.hours,c=a.seconds,l=a.minutes;return r?{days:i,hours:s,seconds:c,minutes:l}:n>=1?"".concat(i," 天后过期"):"".concat(s," 小时 ").concat(l," 分后过期")},exports.currentPageRoute=function(){var e=getCurrentPages();if(e&&e.length){var t=e[e.length-1];return t?t.route:"default"}return"default"},exports.currentPageUid=function(){var e=getCurrentPages(),t=e[e.length-1];if(!t)return"default";return t.route+JSON.stringify(t.options)+t.__wxExparserNodeId__},exports.currentPages=W,exports.dealCopyValue=function(e){var t=e;/＝/g.test(t)&&(t=t.replace(/＝/g,"="));return t},exports.decodeScene=function(e){if(!e)return{};try{var t=(e=decodeURIComponent(e)).split("&"),r={};return t.forEach((function(e){var t=e.split("=");2===t.length&&(r[t[0]]=t[1])})),r}catch(e){return{}}},exports.delay=function(e){return Te.apply(this,arguments)},exports.deleteDateExpireData=function(e){try{var t=wx.getStorageSync("_EXPIRE_VALUES_0")||{};return 0===Object.keys(t).length||(delete t[e],wx.setStorageSync("_EXPIRE_VALUES_0",t)),!0}catch(e){return!1}},exports.displayDatetime=function(e){var t=u.default.localeData(),r=(0,u.default)(),n=e.year(),o=e.month()+1,a=e.date(),i=r.year(),s=r.month()+1,c=r.date();if(n!==i)return e.format("".concat(t.longDateFormat("L")));if(o===s)return a===c?e.format("LT"):a-c==1?"明天":e.format("M/D");return e.format("M/D")},exports.displayInterstitialAdWithCondition=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};ve(e)||t.show().then((function(){(0,p.adScreenView)({adId:r,location:n,isVideo:!1})})).catch((function(e){o(),(0,p.reportAdError)({adId:r,location:n,isVideo:!1,errCode:e.errCode}),m.error.call(null,"displayInterstitialAdWithCondition",e)}))},exports.displaySimpleDatetime=function(e){return e.format("M月D日 H:mm")},exports.dontNeedRecord=ye,exports.doubleVibrate=function(){wx.vibrateShort({type:"medium"}),setTimeout((function(){wx.vibrateShort({type:"light"})}),380)},exports.downLoadImage=function(e){return Q.apply(this,arguments)},exports.fileName=G,exports.formatText=function(e){return M.formatText(e)},exports.generateKey=function(){return Math.floor(Date.now()*Math.random())},exports.get=void 0,exports.getAppEnvVersion=function(){var e=wx.getAccountInfoSync();return f.default.get(e,"miniProgram.envVersion","")},exports.getAppGlobalDataAsync=Ie,exports.getBoundingClientRect=function(e){return new Promise((function(t){Z().createSelectorQuery().selectViewport().scrollOffset().select(e).boundingClientRect().exec((function(e){try{t(e[1])}catch(e){t(null),console.error(e)}}))}))},exports.getCnEnLength=function(e){return f.default.reduce(e.split(""),(function(e,t){return e+=/[\u4e00-\u9fa5]/.test(t)?2:1}),0)},exports.getContactMeDeadlineText=function(e,t){var n=r(r(r(r(r(r({12:"开奖后 12 小时",24:"开奖后 1 天"},48,"开奖后 2 天"),72,"开奖后 3 天"),96,"开奖后 4 天"),120,"开奖后 5 天"),144,"开奖后 6 天"),168,"开奖后 7 天");return t?(0,u.default)(t).format("YYYY 年 M 月 D 日 HH:mm"):n[e]||""},exports.getContainerStyle=void 0,exports.getCreateLotteryCount=function(){return f.default.get(getApp(),"globalData.userInfo.info.create_count",-1)},exports.getCurrentPage=Z,exports.getCurrentRouteWithParam=function(){var e=Z();if(!e)return console.info("curPage: ".concat(e)),"";var t=null==e?void 0:e.options;if(!t)return e.route;var r=J(t);return e.route+(r?"?"+r:"")},exports.getDurationDate=function(e){var t=new Date,r=new Date(e).getTime()-t.getTime();if(r>0){var n=Math.floor(r/864e5),o=Math.floor(r/36e5%24),a=Math.floor(r/6e4%60),i=Math.floor(r/1e3%60);return{days:n,hours:o,minutes:a,seconds:i}}return{days:0,hours:0,minutes:0,seconds:0}},exports.getFullAddress=function(e){if(f.default.isEmpty(e))return"";return f.default.compact([e.userName,e.telNumber,f.default.compact([e.provinceName,e.cityName,e.countyName,e.detailInfo]).join("")]).join(", ")},exports.getGiveType=he,exports.getImgSize=function(e){return new Promise((function(t){wx.getImageInfo({src:e,success:function(e){var r=e.width,n=e.height;t({width:r,height:n})},fail:function(){console.log("获取图片尺寸信息失败")}})}))},exports.getInviteTip=function(e){var t,r,n=(null===(t=e.lottery_feature)||void 0===t||null===(r=t.invite_friend_info)||void 0===r?void 0:r.leader)||{},o=n.count,a=n.contact_id;return o?"邀请 ".concat(o," 个好友参与，获得铁杆参与者头像挂件").concat(a?"，开奖后可获取专属发起人联系方式":"","。"):""},exports.getLaunchShareTicket=ie,exports.getLocalArrayData=function(e){try{var t=wx.getStorageSync(e);return t&&0!==t.length?t:[]}catch(e){return console.log("getLocalSpecialData -> error",e),[]}},exports.getLocalObjData=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var n=wx.getStorageSync(e)||{},o=Object.keys(n).length;return r?o>0?n:void 0:0===o?void 0:n[t]}catch(e){return void console.log("getLocalObjData -> error",e)}},exports.getLocationInfo=function(){return we.apply(this,arguments)},exports.getLoginCode=function(){return new Promise((function(e){wx.login({success:function(t){var r=t.code;e(r)},fail:function(){e("")}})}))},exports.getOfficialData=function(e,t){if(U(e,"official_data"))return U(e,"official_data");var r=U(e,"assist_info.assist_types",[]).find((function(e){return"subscribe_gzh"===e.type}));r&&(null==t||t());return r},Object.defineProperty(exports,"getOntimePrizes",{enumerable:!0,get:function(){return C.getOntimePrizes}}),exports.getOptionsSync=oe,Object.defineProperty(exports,"getPrizeDisplayInfo",{enumerable:!0,get:function(){return C.getPrizeDisplayInfo}}),exports.getRandomIdxByProbility=function(e){var t,r=0,o=n(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r+=a}}catch(e){o.e(e)}finally{o.f()}var i,s=Math.random()*r,u=0,c=0,l=n(e);try{for(l.s();!(i=l.n()).done;){var f=i.value;if(c<=s&&c+f>s)break;u++,c+=f}}catch(e){l.e(e)}finally{l.f()}return u},exports.getRandomItemBy=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},exports.getRealPrice=function(e){return f.default.get(e,"coupon_info.extra_info.min_group_price",0)-f.default.get(e,"coupon_info.extra_info.coupon_discount",0)},exports.getReportType=function(e){var t;return(r(r(r(r(r(r(r(r(r(r(t={},v.KEFU_SHARE_TYPE.IMAGE_OFFICIAL,"MP"),v.KEFU_SHARE_TYPE.URL,"link"),v.KEFU_SHARE_TYPE.IMAGE_PERSONAL,"WeChat"),v.KEFU_SHARE_TYPE.IMAGE_WECHATGROUP,"Group"),v.KEFU_SHARE_TYPE.SHOW_IMAGE,"Image"),v.KEFU_SHARE_TYPE.OTHER,"other"),v.KEFU_SHARE_TYPE.IMAGE_MINA,"Minapic"),v.KEFU_SHARE_TYPE.MINA,"Minapath"),v.KEFU_SHARE_TYPE.OPEN_URL,"OfficailArticle"),v.KEFU_SHARE_TYPE.CHANNEL_VIDEO,"Video"),r(t,v.KEFU_SHARE_TYPE.PROMOTION,"SmartPromotion"))[e]||"other"},exports.getScene=function(){return oe().scene},exports.getSessionFrom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t="string"==typeof e?JSON.parse(e):e;var r=i({open_reply:"on",User_ID:f.default.get(getApp(),"globalData.userInfo.user_id",0)},t);return JSON.stringify(r)},exports.getShareInfo=function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(a){r||(n+=""===n?"showData":"useLaunchOptionsRetry",r=ae());var i="share",s=wx.getShareInfo;if(r)i="share",s=wx.getShareInfo;else{if(!fe())return n+="_lowversion",(0,y.default)("error_get_share_info",{label:n}),a({});n+="_getShareTicket",i="enter",s=wx.getGroupEnterInfo}s({shareTicket:r,timeout:2e3,success:function(e){a(e)},fail:function(){var s=o(e().mark((function o(s){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enter"!==i){e.next=10;break}if(n+="_getGroupEnterInfo",!(r=ie())){e.next=9;break}return e.next=6,t(r,n);case 6:return e.abrupt("return");case 9:n+="_getLaunchOptionsSync";case 10:n+="_TYPE:".concat(i,"_MESSAGE:").concat(s.errMsg),(0,y.default)("error_get_share_info",{label:n}),a({});case 13:case"end":return e.stop()}}),o)})));return function(e){return s.apply(this,arguments)}}()})}))},exports.getShareTicket=ae,exports.getTempStorage=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=wx.getStorageSync(e);t&&wx.removeStorageSync(e);return r},exports.getToken=function(){var e=wx.getStorageSync("SESSION_NEW_1");if(e)return e.token;return""},exports.getUserInfo=function(){return getApp().globalData.userProfile},exports.getUserLocationInfo=function(e){return Se.apply(this,arguments)},Object.defineProperty(exports,"getWinnerPrizeDisplayInfo",{enumerable:!0,get:function(){return C.getWinnerPrizeDisplayInfo}}),Object.defineProperty(exports,"getWinnerRate",{enumerable:!0,get:function(){return C.getWinnerRate}}),exports.goToGenerateImage=function(e){getApp().globalData.downImageUrls=e.urls,(0,A.navigateTo)("/pages/share/generateimage/generateimage?".concat(J({type:"download_image",count:e.urls.length,label:e.label})))},exports.goToUsersList=function(e){var t=f.default.get(e,"lottery_feature.invite_friend_info"),r=f.default.get(e,"lottery_feature.invite_friend_info.reward"),n=f.default.get(e,"lottery_feature.invite_friend_info.leader"),o=f.default.get(e,"lottery_feature.invite_friend_info.leader.count"),a=f.default.get(e,"lottery_feature.invite_friend_info.leader.contact_id");"party"===e.draw_type?wx.navigateTo({url:"/pages/offlinelottery/pages/users/users?id=".concat(e.id,"&state=").concat(e.state,"&initiator=").concat(e.is_initiator?"1":"")}):t&&r?wx.navigateTo({url:"/pages/users/invite_users?id=".concat(e.id,"&invite=true")}):n&&(0,k.isLotteryEnd)(e)&&e.is_initiator?wx.navigateTo({url:ge(e.id,o,a)}):wx.navigateTo({url:"/pages/users/users?id=".concat(e.id).concat(e.assist_info?"&assist=true":"").concat(e.game_info?"&game=true":"")})},exports.handleEditPromition=void 0,exports.handleLimitedAreaJoinError=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null===(r=e.readable_conditions)||void 0===r||null===(n=r.find((function(e){return"location"===e.type})))||void 0===n?void 0:n.data;wx.showModal({title:"你不在发起人要求的地区",content:"发起人要求仅部分地区可参与",cancelText:"知道了",confirmText:"哪些地区",success:function(e){var r;e.confirm&&(o?t.triggerEvent("showLocationList",{locationList:a},{bubbles:!0,composed:!0}):null===(r=t.selectComponent("#limited-area-list"))||void 0===r||r.show({locationList:a}))}})},Object.defineProperty(exports,"handlePrizeName",{enumerable:!0,get:function(){return C.handlePrizeName}}),Object.defineProperty(exports,"handlePrizeNameForPrizeInfo",{enumerable:!0,get:function(){return C.handlePrizeNameForPrizeInfo}}),exports.handleScanWriteOffCode=function(){wx.scanCode({success:function(e){var t=e.result,r=e.path;if(f.default.startsWith(t,"https://lucky.nocode.com/official/writeoff"))return(0,A.navigateTo)("/pages/helpers/webview/webview?url=".concat(encodeURIComponent(t)));if(f.default.startsWith(r,"pages/contacts/writeoffcode/writeoffcode")){var n=r.split("?scene=");return(0,A.navigateTo)("".concat(n[0],"?scene=").concat(encodeURIComponent(decodeURIComponent(n[1]))))}wx.showToast({title:"无效的二维码",icon:"none"})}})},exports.hasAward=function(e){return!!f.default.get(e,"lucky_review_status.review_reward")},exports.hasContactSetting=function(e){if(!e)return!1;return e.some((function(e){return e.type===v.PrizeTypes.REAL&&he(e)===w.PrizeGiveTypes.CONTACT_ME||e.type===v.PrizeTypes.COUPON}))},exports.hasNeverUsePromotionAndSquare=function(e){var t,r;return!(null!==(t=e.enable_features)&&void 0!==t&&t.includes("smart_promotion")||null!==(r=e.info)&&void 0!==r&&r.show_square)},exports.hideCustomModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#custom-modal";Z().selectComponent(e).hide()},exports.insertDateExpireData=function(e,t){try{var n=wx.getStorageSync("_EXPIRE_VALUES_0")||{};return wx.setStorageSync("_EXPIRE_VALUES_0",i(i({},n),{},r({},e,(0,u.default)().add(t,"s").format()))),!0}catch(e){return!1}},exports.interpolate=function(e,t){var r=t;return t-=e=+e,function(n){var o=e+t*n;return o>r?r:o}},exports.isActiveTaskLottery=function(e){var t,r,n,o;return!(null==e||null===(t=e.assist_info)||void 0===t||null===(r=t.active_task)||void 0===r||!r.type||(null==e||null===(n=e.assist_info)||void 0===n||null===(o=n.active_task)||void 0===o?void 0:o.type)===v.AssistTypes.EMPTY)},exports.isAssistTask=function(e){return!!e.assist_info},exports.isAssistTaskAllDone=function(e){return f.default.get(e,"assist_info.assist_types",[]).every((function(e){return e.state===T.AssistTaskState.FINISHED}))},exports.isAssistTaskLottery=function(e){var t,r;return!(null==e||null===(t=e.assist_info)||void 0===t||null===(r=t.assist_types)||void 0===r||!r.length)},exports.isCashGoods=function(e){var t=f.default.get(e,"price",0),r=f.default.get(e,"pay_mode","");return f.default.includes(r,"cash")&&t},exports.isCashLottery=function(e){var t=U(e,"prizes.data",[]);if(t.length>1)return!1;return(t=t.filter((function(e){return 2===e.type||7===e.type}))).length>0},exports.isConditionTaskLottery=function(e){return!f.default.isEmpty(f.default.get(e,"extra.join_condition"))},exports.isCpsGoods=function(e){return"obj"!==f.default.get(e,"type")},exports.isCurrentAppId=function(e){return"wx01bb1ef166cd3f4e"===e},exports.isEmptyActiveTaskLottery=function(e){var t,r;return(null==e||null===(t=e.assist_info)||void 0===t||null===(r=t.active_task)||void 0===r?void 0:r.type)===v.AssistTypes.EMPTY},exports.isFeatureEnable=function(e){return ce.apply(this,arguments)},exports.isFollowed=function(){return f.default.get(getApp(),"globalData.userProfile.square_subscribe_info.official_account_subscribed",!1)},exports.isFromTimeline=function(){return 1154===oe().scene},exports.isGamePro=H,exports.isGamePublic=K,exports.isHiddenAddGuid=function(){return te.apply(this,arguments)},Object.defineProperty(exports,"isInPc",{enumerable:!0,get:function(){return D.isInPc}}),exports.isInviteFriendLottery=function(e){return f.default.get(e,"lottery_feature.invite_friend")},exports.isLackOfWishPoints=function(e){var t=((null==e?void 0:e.conditions)||[]).filter((function(e){return"point"===e.type}))[0],r=f.default.get(t,"info.point_count",0);return(0,I.getUserPoints)()<r},exports.isLimitedAreaJoinLottery=be,exports.isLiteLotteryDetailPage=function(e){return new RegExp("pages/lucky/lottery-lite/detail").test(e)},exports.isLotteryAudited=function(e){if(!e)return!1;return e.state!==q},exports.isLotteryAvaliable=function(e){if(!e)return!1;return e.state!==F&&e.state!==j},exports.isLotteryDrawed=function(e){if(!e)return!1;return e.state===V},exports.isLotteryExpired=function(e){if(!e)return!1;return e.state===j},exports.isLotteryInTestMode=function(e){var t;return!0===(null==e||null===(t=e.extra)||void 0===t?void 0:t.test_mode)},exports.isLotteryLite=function(){var e,t=(null===(e=Z())||void 0===e?void 0:e.route)||"";return/lottery-lite\/detail/.test(t)},exports.isLotteryRecorded=function(e){if(ye(e))return!0;var t=e.id,r=wx.getStorageSync("USER_ADD_FANS_RECORD");return!(!r||!r[t])},exports.isNeedAuthViaAdmin=function(e,t){if(!e)return!1;var r=f.default.get(e,"official_data.owner_id"),n=t===r;return-1===f.default.get(e,"official_data.state")&&!n},exports.isNoAd=ve,exports.isOfficialFanseOnly=function(e){return!!f.default.get(e,"official_data.official_id",!1)||!!f.default.get(e,"official_data.official_auth_id",!1)},exports.isPublicQuestionnaireLottery=function(e){var t;return e.form_template&&(null===(t=e.form_template)||void 0===t?void 0:t.enable)&&e.join_type===v.LOTTERY_JOIN_TYPE.PUBLIC_QUESTIONNAIRE},exports.isQuestionEnabled=function(e){var t;return!(null===(t=e.form_template)||void 0===t||!t.enable)},exports.isSessionExpired=function(){return new Promise((function(e){wx.checkSession({success:function(){e(!1)},fail:function(){e(!0)}})}))},exports.isShowAssistInMenu=function(e){var t=f.default.get(e,"assist_info.assist_types",[]);if(t.length>1)return!0;if(1===t.length){var r;return[v.AssistTypes.FRIEND].includes(null===(r=t[0])||void 0===r?void 0:r.type)}},exports.isSupportCanvas2D=function(){return!0},Object.defineProperty(exports,"isSupportTimeline",{enumerable:!0,get:function(){return D.isSupportTimeline}}),exports.isTabPage=B,exports.isValidUrl=function(e){return/http(s?):\/\/([^ \\/]*\.)+[^ \\/]*(:[0-9]+)?\/?/.test(e)},exports.isWeComFriendLottery=function(e){var t,r;return!(null===(t=e.lottery_feature)||void 0===t||null===(r=t.add_qy_user)||void 0===r||!r.all_company)},Object.defineProperty(exports,"isWinner",{enumerable:!0,get:function(){return C.isWinner}}),exports.isWishGoods=function(e){return"points"===f.default.get(e,"pay_mode","")},Object.defineProperty(exports,"isWxWork",{enumerable:!0,get:function(){return D.isWxWork}}),exports.loginAndRedirectTo=function(e){wx.navigateTo({url:"/pages/helpers/loading/loading?url=".concat(encodeURIComponent(e))})},exports.navigateTencentDocMina=function(e){return xe.apply(this,arguments)},exports.needLogin=function(){return de.apply(this,arguments)},exports.objectKeys2LowerCase=function(e){return Object.keys(e).reduce((function(t,n){return i(i({},t),{},r({},n.toLowerCase(),e[n]))}),{})},exports.pageOffset=function(e){return e=e.replace(/^\//,""),W().map((function(e){return e.route.replace(/\?.+$/,"")})).lastIndexOf(e)},exports.promisify=X,exports.queryParse=function(e){var t={};e&&e.replace(/^[?#]/,"").split("&").forEach((function(e){var r=e.split("="),n=a(r,2),o=n[0],i=n[1];o&&(t[o]=decodeURIComponent(i||""))}));return t},exports.queryString=J,exports.replaceLocalArrayElement=function(e){var r=e.array_key,n=e.origin_el,o=e.target_el;try{var a=wx.getStorageSync(r);if(a&&0!==a.length)if(-1!==a.findIndex((function(e){return e===n}))){var i=a.map((function(e){return e===n?o:e}));wx.setStorageSync(r,i)}else wx.setStorageSync(r,[].concat(t(a),[o]));else wx.setStorageSync(r,[o])}catch(e){return console.log("🚀 ~ file: activityUtils.js ~ line 101 ~ setFestivalData ~ error",e),!1}},exports.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(Y+16,t);return setTimeout((function(){e(Y=r)}),r-t)},exports.resetJoinNumber=function(){wx.setStorage({key:"JOIN_NUMBER",data:0})},exports.resetKefuSetting=function(){var e={kefu_share_type:"",type:"",id:"",kefu_id:"",kefu_avatar:"",kefu_desc:"",kefu_title:"",title:"",kefu_image:"",image:"",kefu_mina_appid:"",kefu_mina_apppath:"",kefu_feed_id:"",kefu_finder_user_name:"",kefu_shortlink:""};f.default.set(getApp(),"globalData.kefuSetting",e),b.default.dispatch((0,S.setLotteryDesc)({kefuData:e}))},exports.scrollToBy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120;Z().createSelectorQuery().selectViewport().scrollOffset().selectAll(e).boundingClientRect().exec((function(e){var n=e[1];if(n[t])try{var o=e[0].scrollTop,a=n[t].top,i=(0,h.getSysInfo)().navBarHeight+43+r;wx.pageScrollTo({scrollTop:o+a-i})}catch(e){console.warn(e)}}))},exports.selectRootComponent=function(){var e=getCurrentPages();return e[e.length-1]},exports.set=void 0,exports.setTempStorage=function(e,t){wx.setStorageSync(e,t)},Object.defineProperty(exports,"shareableAboutPrivate",{enumerable:!0,get:function(){return D.shareableAboutPrivate}}),exports.showContactQRCode=function(e){var t,n,o;(0,y.default)("customerservice",{id:e});var a=null===(t=(0,O.getServerConfig)())||void 0===t||null===(n=t.entranceConfig)||void 0===n?void 0:n[e],i=r(r({},me.AddContactPic,(function(){wx.previewImage({urls:[null==a?void 0:a.url]})})),me.AddContactPath,(function(){wx.navigateTo({url:"/pages/customer/qrcontact/qrcontact",success:function(e){e.eventChannel.emit("pageItem",a)}})}));null===(o=i[null==a?void 0:a.type])||void 0===o||o.call(i)},exports.showCustomModal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#custom-modal";f.default.isString(t)&&Z().selectComponent(t).show(e);f.default.isFunction(t)&&t().show(e)},exports.showInviteFriendOption=function(){var e=f.default.get(getApp(),"globalData.appConfig.disable_feature");return!f.default.includes(e,"invite_friend")},exports.showInviteRewardSettingEntry=function(){return le.apply(this,arguments)},exports.showJoinNotification=function(e){if(!e)return!1;var t=0===e.state||1===e.state,r=!1;if(e.form_template){var n=e.form_template;n.enable&&"exam"===n.type&&(r=!0)}return!e.is_participator&&t&&e.extra&&e.extra.enable_user_recall&&!r},exports.showOfficialOption=function(){return!!f.default.get(getApp(),"globalData.appConfig.official_sub_enable")},exports.showPacket=function(e){return wx.showRedPackage({url:e});wx.setClipboardData({data:e,success:function(){wx.showToast({title:"已复制",icon:"none"})}})},exports.showTencentDocFromTemplateMsg=function(e,t){return _e.apply(this,arguments)},exports.showTimesLimit=function(e,t){var r=0;try{(r=wx.getStorageSync(e))?(r=parseInt(r,10),isNaN(r)&&(r=1)):r=0}catch(e){r=0}if(r>=t)return!1;var n=r+1;return wx.setStorageSync(e,n),!0},exports.showTimesLimitInOneDay=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=0;try{(n=wx.getStorageSync(e))?(n=parseInt(n,10),isNaN(n)&&(n=1)):n=0}catch(e){n=0}if(console.log(" ### showTimesLimitInOneDay t: ",n),n>0)try{var o=wx.getStorageSync("".concat(e,"_show_at"));if(o&&(0,u.default)(o).isValid()){var a=(0,u.default)(o);if(console.log(" ### showTimesLimitInOneDay showAtMoment: ",a),a<(0,u.default)().startOf("day")){console.log(" ### showTimesLimitInOneDay showAtMoment < moment().startOfday "),n=0;var i=(0,u.default)().format();wx.setStorageSync("".concat(e,"_show_at"),i)}}else{var s=(0,u.default)().format();wx.setStorageSync("".concat(e,"_show_at"),s)}}catch(t){console.log("### set time error: ",t);var c=(0,u.default)().format();wx.setStorageSync("".concat(e,"_show_at"),c),n=0}if(n>=t)return!1;var l=n+r;return wx.setStorageSync(e,l),!0},exports.showToast=pe,exports.singleExec=se,exports.supportVideoComponent=function(){return z((0,h.getSysInfo)().SDKVersion,"2.6.0")>=0},exports.throttle=void 0,exports.triggerBubbleEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.triggerEvent(t,r,{composed:!0,bubbles:!0})},exports.trim=function(e){try{return e.trim()}catch(t){return(0,m.error)(t),e}},exports.uid=function(){return G()},exports.updateLocalArrayData=function(e){var r=e.array_key,n=e.update_value;try{var o=wx.getStorageSync(r);return o&&0!==o.length?"string"==typeof n?wx.setStorageSync(r,[].concat(t(o),[n])):wx.setStorageSync(r,[].concat(t(o),t(n))):wx.setStorageSync(r,[n]),!0}catch(e){return console.log("🚀 ~ file: activityUtils.js ~ line 101 ~ setFestivalData ~ error",e),!1}},exports.updateLocalObjData=function(e,t,n){try{var o=wx.getStorageSync(e)||{},a=i(i({},o),{},r({},t,n));return wx.setStorageSync(e,a),!0}catch(e){return console.log("updateLocalObjData -> error",e),!1}},exports.versionCompare=z,exports.wxUrl=function(e){return"/"!==e[0]?"/"+e:e},require("../@babel/runtime/helpers/Arrayincludes");var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/toConsumableArray"),r=require("../@babel/runtime/helpers/defineProperty"),n=require("../@babel/runtime/helpers/createForOfIteratorHelper"),o=require("../@babel/runtime/helpers/asyncToGenerator"),a=require("../@babel/runtime/helpers/slicedToArray"),i=require("../@babel/runtime/helpers/objectSpread2"),s=R(require("../libs/nocode-format")),u=R(require("moment")),c=R(require("../libs/uuid")),l=R(require("../config")),f=R(require("lodash")),p=require("./ad"),d=require("./promiseFix"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=L(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(require("./global")),x=require("@mina-modules/sign"),v=require("../models/lottery"),h=require("@mina-modules/system-info"),y=R(require("./analyse")),m=require("@mina-modules/mina-sentry"),_=require("../services/smartPromotion"),w=require("../models/create"),b=R(require("../store/index")),S=require("../store/actions/lottery"),T=require("../constant"),I=require("../services/chou"),E=require("../services/config"),P=R(require("./event")),A=require("./wechatAPI"),O=require("./serverConfig"),k=require("./lotteryUtils"),C=require("./prize"),D=require("./env");function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(L=function(e){return e?r:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}var M=new s.default({nouns:[],disableNouns:!0,autoSync:!1});var U=exports.get=f.default.get,N=(exports.set=f.default.set,exports.CLOSED_ABOUT_ADD_GUID="CLOSED_ABOUT_ADD_GUID"),F=-4,q=-2,j=-1,V=2;function z(e,t){e=e.split("."),t=t.split(".");for(var r=0;r<Math.max(e.length,t.length);r++){e[r]||(e[r]="0"),t[r]||(t[r]="0");var n=parseInt(e[r]),o=parseInt(t[r]);if(n>o)return 1;if(n<o)return-1}return 0}function G(){return new c.default(1).toString()}var Y=0;function W(){return getCurrentPages()}function H(e){return e.is_payed||e.message_enable||f.default.get(e,"extra.virtual_ticket_id",-1)>0}function K(e){return e.is_official||e.square_id}function B(e){return-1!==["/pages/index","/pages/profile/profile"].indexOf(e)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encode:!0},r=[];for(var n in e)if(e.hasOwnProperty(n)){var o=t.encode?encodeURIComponent(e[n]):e[n];r.push("".concat(n,"=").concat(o))}return r.join("&")}function Q(){return(Q=o(e().mark((function t(r){var n,o,a,i,s,u=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],o=u.length>2&&void 0!==u[2]&&u[2],console.log("download image: ".concat(r)),a={},!n){e.next=12;break}if(i=g.getData("auth"),f.default.get(i,"data.token")){e.next=10;break}return e.next=9,wx.getStorage({key:"SESSION_NEW_1"});case 9:i=e.sent;case 10:a={header:{Authorization:"Bearer ".concat(i.data.token),version:l.default.VERSION},url:r},o&&(a=(0,x.withSign)(a));case 12:return e.next=14,(0,d.downLoadFile)(r,a.header);case 14:if(s=e.sent,console.log(s),s.tempFilePath&&404!==s.statusCode){e.next=18;break}throw new Error("图片下载失败");case 18:return console.log("download image success: ".concat(s.tempFilePath)),e.abrupt("return",s.tempFilePath);case 20:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function X(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(r,n){t.success=r,t.fail=n,e(t)}))}}exports.LOCAL_FIRST_TIME_KEY="FIRST_TIME_SET";function Z(){var e=getCurrentPages();return e[e.length-1]}function $(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;n<r;n++){var o=parseInt(e[n]),a=parseInt(t[n]);if(o>a)return 1;if(o<a)return-1}return 0}function ee(){var e=getApp();return U(e,"globalData.joinNumber",0)?U(e,"globalData.joinNumber",0):wx.getStorageSync("JOIN_NUMBER")||0}function te(){return(te=o(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:if(e.t1=!!e.sent,e.t1){e.next=5;break}e.t1=ee()<1;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}e.t0=!!wx.getStorageSync(N);case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function re(){return ne.apply(this,arguments)}function ne(){return(ne=o(e().mark((function t(){var r,n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wx.checkIsAddedToMyMiniProgram){e.next=8;break}return e.next=3,X(wx.checkIsAddedToMyMiniProgram)();case 3:return r=e.sent,n=r.added,e.abrupt("return",n);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function oe(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?wx.getEnterOptionsSync():wx.getLaunchOptionsSync()}function ae(){return oe().shareTicket}function ie(){return oe(!1).shareTicket}exports.getContainerStyle=function(){var e=(0,h.getSysInfo)(),t=e.screenHeight-44;return e.statusBarHeight?t-=e.statusBarHeight:t-=20,"height: ".concat(t,"px;")};function se(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return function(){var a=o(e().mark((function o(){var a,i,s,u,c=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:for(n=!0,e.prev=3,a=c.length,i=new Array(a),s=0;s<a;s++)i[s]=c[s];return e.next=7,t.apply(this,i);case 7:return u=e.sent,r.onSuccess&&r.onSuccess.call(this),e.abrupt("return",u);case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),r.onError&&r.onError.call(this,e.t0);case 16:return e.prev=16,n=!1,r.onComplete&&r.onComplete.call(this),e.finish(16);case 20:case"end":return e.stop()}}),o,this,[[3,12,16,20]])})));return function(){return a.apply(this,arguments)}}()}function ue(){return(ue=o(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){wx.compressImage(i(i({},r),{},{success:e,fail:t}))})));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ce(){return(ce=o(e().mark((function t(r){var n,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:if(o=e.sent,!((null===(n=o.appConfig)||void 0===n?void 0:n.disable_feature)||[]).includes(r)){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function le(){return(le=o(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.default.get(getApp(),"globalData.appConfig.disable_feature")){e.next=3;break}return e.next=3,getApp().fetchConfig();case 3:return r=f.default.get(getApp(),"globalData.appConfig.disable_feature"),e.abrupt("return",!f.default.includes(r,"invite_reward"));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function fe(){return $((0,h.getSysInfo)().SDKVersion,"2.17.3")>=0}function pe(e,t){return(0,A.showToast)(e,{duration:null==t?void 0:t.duration})}function de(){return(de=o(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getApp().needUpdateUserInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ge(e,t,r){return"/pages/users/users?id=".concat(e,"&leader=true").concat(t?"&count=".concat(t):"").concat(r?"&contact=true":"")}function xe(){return(xe=o(e().mark((function t(r){var n,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(n=(0,O.getServerConfig)())||void 0===n||null===(o=n.docsConfig)||void 0===o?void 0:o[r])){e.next=5;break}return(wx.openEmbeddedMiniProgram||wx.navigateToMiniProgram)({appId:"wxd45c635d754dbf59",path:"pages/detail/detail?url=".concat(encodeURIComponent(a)),allowFullScreen:!0}),e.abrupt("return",a);case 5:return(0,m.error)("找不到对应的腾讯文档编号：".concat(r)),e.abrupt("return",!!a);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ve(e){if(!e)return!1;var t=H(e),r=K(e);return t&&!r}exports.handleEditPromition=se(function(){var t=o(e().mark((function t(r){var n,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.state,a=r.id,n!==_.PROMOTION_STATE.running){t.next=3;break}return t.abrupt("return",wx.showModal({title:"温馨提醒",content:"编辑设置会暂停当前推广，你可以完成编辑后重新投放。",confirmText:"前往编辑",success:function(){var t=o(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.confirm){e.next=7;break}return(0,y.default)("dialog_promotion_promotingedit_confirm",{label:a}),e.next=4,(0,_.userPausePromotion)(a);case 4:wx.navigateTo({url:"/pages/promotion/create/index?edit_promotion_id=".concat(a)}),e.next=8;break;case 7:(0,y.default)("dialog_promotion_promotingedit_cancel",{label:a});case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}));case 3:wx.navigateTo({url:"/pages/promotion/create/index?edit_promotion_id=".concat(a)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.type===v.PrizeTypes.REAL){if(e.virtual_type===v.VIRTUAL_PRIZE_TYPES.LOTTERY_VOUCHER||e.virtual_type===v.VIRTUAL_PRIZE_TYPES.MINA_PATH)return w.PrizeGiveTypes.CONTACT_ME;if(e.virtual_type===v.VIRTUAL_PRIZE_TYPES.FILL_WINNER_INFO)return w.PrizeGiveTypes.WINNER_INFO}return e.type===v.PrizeTypes.VIRTUAL&&e.virtual_type===v.VIRTUAL_PRIZE_TYPES.MINA_PATH?w.PrizeGiveTypes.GO_TO_MINA:e.type!==v.PrizeTypes.VIRTUAL||[w.EditingTypes.CREATOR_COPY,w.EditingTypes.JOIN_COPY].includes(t)?w.PrizeGiveTypes.MAILING:e.virtual_type}function ye(e){return!(e.is_official||e.square_id||e.is_smart_promotion||H(e))||e.groupable||e.assist_info||e.need_code||e.official_data||"ontime"===e.draw_type}var me=function(e){return e[e.AddContactPic=1]="AddContactPic",e[e.AddContactPath=2]="AddContactPath",e}(me||{});function _e(){return(_e=o(e().mark((function t(r,n){var o,a,i,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&1038!==n){e.next=2;break}return e.abrupt("return");case 2:(i=null===(o=(0,O.getServerConfig)())||void 0===o||null===(a=o.templateMsgGuideConfig)||void 0===a?void 0:a[r])&&(s=i.text,u=i.url,wx.showModal({content:s,confirmText:"确定",showCancel:!1,success:function(e){e.confirm&&(wx.openEmbeddedMiniProgram||wx.navigateToMiniProgram)({appId:"wxd45c635d754dbf59",path:"pages/detail/detail?url=".concat(encodeURIComponent(u)),allowFullScreen:!0})}}));case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function we(){return(we=o(e().mark((function t(){var r,n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wx.getStorageSync("__LOCATION_INFO__")){e.next=13;break}return e.prev=2,e.next=5,(0,E.getConfigByType)("location_info");case 5:n=e.sent,r=n.data,wx.setStorageSync("__LOCATION_INFO__",r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),wx.showToast({title:e.t0.message,icon:"none"});case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}function be(e){return(e.conditions||[]).findIndex((function(e){return"location"===e.type}))>-1}function Se(){return(Se=o(e().mark((function t(r){var n,o,a,i,s,u=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(u.length>1&&void 0!==u[1])||u[1],be(r)){e.next=3;break}return e.abrupt("return",null);case 3:if(wx.getFuzzyLocation){e.next=6;break}throw wx.showToast({title:"微信版本过低，无法获取定位，请升级后再试",icon:"none",duration:3e3}),new Error("微信客户端版本过低，获取位置失败");case 6:return e.prev=6,e.next=9,X(wx.getFuzzyLocation)({type:"gcj02"});case 9:return o=e.sent,e.abrupt("return",{lat:o.latitude,lng:o.longitude});case 13:if(e.prev=13,e.t0=e.catch(6),"getFuzzyLocation:fail auth deny"!==e.t0.errMsg){e.next=19;break}wx.showModal({title:"提示",content:"发起人要求授权地理位置，你已拒绝小程序获取你的地理位置",confirmText:"开启授权",cancelText:"暂不参与",success:function(e){e.confirm&&wx.openSetting()}}),e.next=32;break;case 19:a=e.t0.errMsg||"获取位置出错",i=[{match:/NOCELL&WIFI_LOCA/.test(a),tip:"定位失败，请使用数据流量并开启 GPS 定位"},{match:/fail privacy permission is not authorized/.test(a),tip:"请同意隐私协议才能获取定位参与抽奖"},{match:/not supported/.test(a),tip:"无法定位，请升级微信到最新版再试"},{match:/system permission denied/.test(a),tip:"请打开系统设置允许微信使用定位服务后再试"}],s=0;case 22:if(!(s<i.length)){e.next=29;break}if(!i[s].match){e.next=26;break}return a=i[s].tip,e.abrupt("break",29);case 26:s++,e.next=22;break;case 29:throw n&&wx.showToast({title:a,icon:"none",duration:3e3}),(0,m.error)("getFuzzyLocation",e.t0),new Error(a);case 32:throw e.t0;case 33:case"end":return e.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function Te(){return(Te=o(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,r)})));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ie(){return Ee.apply(this,arguments)}function Ee(){return(Ee=o(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=getApp().globalData).inited){e.next=3;break}return e.abrupt("return",r);case 3:return e.abrupt("return",new Promise((function(e){P.default.once("app:init_success",(function(){return e(getApp().globalData)}))})));case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}exports.throttle=function(e,t){var r,n,o;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var u=this;r?(clearTimeout(n),n=setTimeout((function(){Date.now()-o>=t&&(e.apply(u,i),o=Date.now())}),Math.max(t-(Date.now()-o),0))):(e.apply(u,i),o=Date.now(),r=!0)}};
},{isPage:false,isComponent:false,currentFile:'utils/tools.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/upload.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chooseMedia=function(e){return s.apply(this,arguments)},exports.openAlbum=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:900;wx.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(n){var a=n.tempFilePaths;t?(getApp().globalData.openAlbumCallback=e,wx.navigateTo({url:"/pages/crop/crop?image=".concat(encodeURIComponent(a[0]),"&aspectRatio=").concat(o,"&maxWidth=").concat(r)})):e(a[0])}})},exports.uploadImage=function(e,t){var o=r.default.getUploadPath((0,a.fileName)());return wx.showLoading({title:"上传中"}),(0,n.upload)(e,o).then((function(e){var o=r.default.CDN+e.remotePath;return t&&t(o),wx.hideLoading(),o})).catch((function(e){console.error(e),wx.hideLoading(),wx.showModal({title:"提示",content:e.message||"上传失败，请重新选择",showCancel:!1})}))},exports.uploadUserAvatar=function(e,t){return console.log("localPath",e),(0,n.upload)(e,void 0,!0).then((function(e){var o=r.default.CDN+e.remotePath;return console.log("remotePath",o),t&&t(o),wx.hideLoading(),o})).catch((function(e){console.error(e),wx.hideLoading(),wx.showModal({title:"提示",content:e.message||"上传失败，请重新选择",showCancel:!1})}))};var e,t=require("../@babel/runtime/helpers/regeneratorRuntime"),o=require("../@babel/runtime/helpers/asyncToGenerator"),r=(e=require("../config"))&&e.__esModule?e:{default:e},n=require("../services/upyun"),a=require("./tools");function s(){return(s=o(t().mark((function e(o){var r,n,s,i,c,u,l,p,h,d,m,g,x,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.options,n=void 0===r?{count:1,mediaType:["image"]}:r,s=o.success,i=o.maxFileSize,c=void 0===i?10:i,u=o.maxWidth,l=void 0===u?1500:u,p=o.maxHeight,h=void 0===p?1e4:p,e.prev=1,e.next=4,wx.chooseMedia(n);case 4:if(d=e.sent,!((m=d.tempFiles[0]).size>1e6*c)){e.next=8;break}throw new Error("图片尺寸不能超过 ".concat(c,"MB"));case 8:return g=m.tempFilePath,e.next=11,wx.getImageInfo({src:g});case 11:if(x=e.sent,!(x.width>l)){e.next=17;break}return e.next=16,(0,a.compressImage)({src:g,compressedWidth:l});case 16:g=e.sent.tempFilePath;case 17:return e.next=19,wx.getImageInfo({src:g});case 19:if(f=e.sent,!(f.height>h)){e.next=25;break}return e.next=24,(0,a.compressImage)({src:g,compressedHeight:h});case 24:g=e.sent.tempFilePath;case 25:null==s||s(g),e.next=33;break;case 28:if(e.prev=28,e.t0=e.catch(1),!/chooseMedia:fail cancel/.test(e.t0.errMsg)&&104!==e.t0.errno){e.next=32;break}return e.abrupt("return");case 32:wx.showToast({title:e.t0.errMsg||e.t0.message||"上传图片失败",icon:"none"});case 33:case"end":return e.stop()}}),e,null,[[1,28]])})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/upload.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/user.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkAvatarIsOutdate=function(e){return c.apply(this,arguments)},exports.checkSessionExpired=p,exports.getRedpacketBalance=function(){return b.apply(this,arguments)},exports.getUserMaxRedPacketAmount=function(e){return(e?e.enable_features||[]:n.default.get(getApp(),"globalData.userInfo.enable_features",[])).includes("unlimited_redpacket")?1e5:188},exports.getWechatLoginInfo=f,exports.updateWechatInfo=function(e){return d.apply(this,arguments)},exports.updateWxWork=function(){return g.apply(this,arguments)},require("../@babel/runtime/helpers/Arrayincludes");var e,r=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/asyncToGenerator"),n=(e=require("lodash"))&&e.__esModule?e:{default:e},s=require("../services/chou"),o=require("./tools"),a=require("../services/wxwork"),u=require("./promiseFix"),i=require("../services/distribution");function c(){return(c=t(r().mark((function e(t){var s,a,u,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){wx.request({url:t,method:"GET",responseType:"arraybuffer",success:function(r){e(r||{})},fail:function(e){r(e)}})}));case 2:return s=e.sent,a=(0,o.objectKeys2LowerCase)(s.header||{}),u=n.default.get(a,"x-info",""),i=u.includes("notexist")||u.includes("forbidden:-5062"),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return l.apply(this,arguments)}function l(){return(l=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("check if session expired"),e.next=4,new Promise((function(e){(0,o.isWxWork)()?wx.qy.checkSession({success:function(){console.log("session not expired"),e(!1)},fail:function(r){console.log("session expired",r),e(!0)}}):wx.checkSession({success:function(){console.log("session not expired"),e(!1)},fail:function(r){console.log("session expired",r),e(!0)}})}));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function f(){return x.apply(this,arguments)}function x(){return(x=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){(0,o.isWxWork)()?wx.qy.login({success:function(r){e(r)},fail:function(r){console.log(r),e({code:""})}}):wx.login({success:function(r){e(r)},fail:function(r){console.log("🚀 ~ file: user.ts ~ line 42 ~ returnawaitnewPromise ~ e",r),e({code:""})}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=t(r().mark((function e(t){var n,a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n="",null!=t&&t.userInfo){e.next=11;break}return e.next=5,p();case 5:if(!e.sent){e.next=11;break}return e.next=9,f();case 9:a=e.sent,n=a.code;case 11:return i=(0,o.isWxWork)(),e.next=14,(0,s.UpdateUserInfo)(t.encryptedData,t.iv,i,n,t.userInfo);case 14:if((c=e.sent).data){e.next=17;break}throw new Error("update userInfo fail");case 17:return getApp().globalData.userInfo=c.data,e.next=20,(0,u.setStorage)({key:"USER_1",data:c.data});case 20:return console.log("save user info",c.data),e.abrupt("return",!0);case 24:return e.prev=24,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function g(){return(g=t(r().mark((function e(){var t,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.isWxWork)()){e.next=13;break}return console.log("update wxWork user info"),e.next=5,new Promise((function(e,r){wx.qy.getEnterpriseUserInfo({success:function(r){e(r)},fail:function(e){r(e)}})}));case 5:return t=e.sent,console.log("encypted data",t),e.next=9,(0,a.updateProfile)(t.encryptedData,t.iv);case 9:s=e.sent.data,console.log("update success",s),getApp().globalData.wxWorkData||(getApp().globalData.wxWorkData={}),n.default.assign(getApp().globalData.wxWorkData,s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=t(r().mark((function e(){var t,n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getApp().getUserProfile(!0);case 2:if(1!==getApp().globalData.userProfile.distribution_state){e.next=6;break}return e.next=5,(0,i.getUserDistributionInfo)();case 5:t=e.sent;case 6:return n=getApp().globalData.userProfile.info.balance,s=t&&t.current_amount?t.current_amount:0,e.abrupt("return",(n+s)/100);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/user.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/validator.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateMinaAppId=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{required:!0};if(r=r.trim(),e.required&&0===r.length)throw Error("小程序 AppID 不能为空")},exports.validateMinaPath=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{required:!0};if(r=r.trim(),e.required&&0===r.length)throw Error("小程序页面路径不能为空");if(r.length>512)throw Error("小程序页面路径不能超过 512 个字符");if(r.match(/\.html$/))throw Error("小程序页面路径不能以 .html 结尾")},exports.validateMinaShortLink=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{required:!0};if(r=r.trim(),e.required&&0===r.length)throw Error("小程序链接不能为空")};
},{isPage:false,isComponent:false,currentFile:'utils/validator.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/voteHandler.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExternalStyleVariables=function(e){var t=e.color,i=e.textAlign,r=e.borderColor,n=e.fontSize,o=e.padding,l=e.titleWidth,a=e.fontWeight;return"--title-color: ".concat(t,"; --title-align: ").concat(i,"; --border-color: ").concat(r,"; --title-size: ").concat(n,"px; --text-padding:").concat(o>0?o-4:0,"px ").concat(o,"px; --title-weight:").concat(a,"; --title-width: ").concat(l,";")},exports.lotteryToChoiceItems=function(e){var a=e.is_participator,d=e.state,c=e.vote,s=c.choices,g=c.state,u=c.my_choice,h=void 0===u?[]:u,f=c.choice_type,p=c.winner_choices,v={items:[],hasImages:!!s.find((function(e){return e.images.length>0})),isPK:2===s.length&&1===f};if(s.length<2)return v;var b=g;1===b&&(b=a?1:0);-1===d&&(b=2);var m=s.reduce((function(e,t){return e+=t.vote_count||0}),0),x=s.reduce((function(e,n,l){var a,d=e.isPK,c=e.items,s=e.hasImages,g=n.index,u=n.vote_count,v=void 0===u?0:u,x=n.describe,y=n.images,W=h.find((function(e){return e===g}));d&&(a=0===l?"left":"right");var S=n.images;s&&0===y.length&&(S=[].concat(i(n.images),["https://lucky-cdn.nocode.com/mina/lottery/vote_pic_empty_n@3x.jpg"]));var _=function(e){var t=e.text,i=e.images,n=e.isPK,l=e.itemIndex,a=o(n);if(!t&&!i)return;var d=t;t.length>a&&(d="".concat(t.slice(0,a),"..."));i.length>0&&(d=r.default.truncate(t,{length:18}));n||0!==i.length||(d="".concat(l,". ").concat(d));return d}({text:x,images:S,isPK:d,itemIndex:l+1}),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e/t,r=Number.isNaN(i)||!Number.isFinite(i)?.5:parseFloat(i.toFixed(2));r>.85?r=.85:r<.15&&(r=.15);var n=1;n=r>.5?.8:r<.5?1.5:1;return{ratio:r,winnerOffset:n}}(v,m).ratio,P=t(t({},n),{},{status:b,images:S,isUserSelect:!!W,ratio:z,isWinner:!(2!==b||!p)&&p.includes(g),displayText:_,choiceType:f,side:a});return t(t({},e),{},{items:[].concat(i(c),[P])})}),v),y=x.items.map((function(e){var i=n(e).isFolded,r=function(e,i){var r=e.describe,l=e.images,a=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="#e05656",l="left",a="#ee6767",d=500,c="calc((100vw - 44px) / 2)",s=!1;"left"===e&&(n="#e05656",l="left",a="#ee6767");"right"===e&&(n="#607ad5",l="right",a="#6f88df");var g=o(!!e),u=i.length>g||r.length>0||!e;u&&(n="rgba(0, 0, 0, 0.9)",l="left",d=400,a="#eeeeee");e||0!==r.length||(c="calc(100vw - 30px)");if(u)return t(t({},{color:"rgba(0, 0, 0, 0.9)",textAlign:"left",fontWeight:400,borderColor:"#eeeeee",bordered:!0}),{},{titleWidth:c});return{color:n,textAlign:l,borderColor:a,fontWeight:d,titleWidth:c,bordered:s}}(e.side,r,l),d=a.color,c=a.textAlign,s=a.borderColor,g=a.fontWeight,u=a.titleWidth,h=a.bordered,f=n(t(t({},e),{},{describe:r,isPK:i})).isFolded,p=function(e,t,i){if(!e&&!t)return;var r=22,n=0,l=o(i);e.length<8?r=22:e.length<16?r=20:(i&&e.length<l||(n=15),r=15);(t.length>0||!i)&&(r=15,n=15);return{size:r,padding:n}}(r,l,i)||{},v=p.size,b=p.padding;return{fontSize:v,padding:b,fontWeight:g,bordered:h,color:d,textAlign:c,borderColor:s,isFolded:f,titleWidth:u}}(e,x.isPK);return t(t({},e),{},{extStyles:r,isFolded:i})}));return x.isPK?t(t({},x),{},{items:l(y)}):t(t({},x),{},{items:y})},require("../@babel/runtime/helpers/Arrayincludes");var e,t=require("../@babel/runtime/helpers/objectSpread2"),i=require("../@babel/runtime/helpers/toConsumableArray"),r=(e=require("lodash"))&&e.__esModule?e:{default:e};function n(e){var t=e.describe,i=e.images,r=e.isPK,n=!1;return i&&i.length>0?t&&t.length>13&&(n=!0):t.length>o(r)&&(n=!0),{isFolded:n}}function o(e){return e?45:32}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2!==e.length)return e;var i=e[0].extStyles,r=i.fontSize,n=i.padding,o=i.fontWeight,l=i.bordered,a=e[1].extStyles,d=a.fontSize,c=a.padding,s=a.fontWeight,g=a.bordered,u=r>d?d:r,h=n>c?n:c,f=o>s?s:o,p=l||g?t(t({},{color:"rgba(0, 0, 0, 0.9)",textAlign:"left",fontWeight:400,borderColor:"#eeeeee",bordered:!0}),{},{fontSize:u,padding:h,fontWeight:f}):{fontSize:u,padding:h,fontWeight:f};return e.map((function(e){return t(t({},e),{},{extStyles:t(t({},e.extStyles),p)})}))}
},{isPage:false,isComponent:false,currentFile:'utils/voteHandler.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/webview.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.navigateToWebview=function(t){return(0,e.navigateTo)("/pages/helpers/webview/webview?url=".concat(encodeURIComponent(t)))};var e=require("./wechatAPI");
},{isPage:false,isComponent:false,currentFile:'utils/webview.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/wechatAPI.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canUseOpenChannelsActivity=b,exports.checkShowPrivacy=function(e){wx.canIUse("getPrivacySetting")&&wx.getPrivacySetting({success:function(t){t.needAuthorization&&e.setData({showPrivacy:!0})}})},exports.chooseAddress=function(e){var t=e.success,r=e.fail,n=void 0===r?function(e){"chooseAddress:cancel"!==e.errMsg&&wx.showToast({title:"获取地址失败，请重试",icon:"none"})}:r;wx.getSetting({success:function(e){e.authSetting["scope.address"]?wx.chooseAddress({success:t,fail:n}):wx.authorize({scope:"scope.address",success:function(){wx.chooseAddress({success:t,fail:n})},fail:function(){wx.showModal({title:"提示",content:"需要获取您的收货地址信息，请到小程序设置页面打开授权",success:function(e){e.confirm&&wx.openSetting({success:function(e){e.authSetting["scope.address"]&&wx.chooseAddress({success:t,fail:n})}})}})}})}})},exports.hideLoading=function(){wx.hideLoading()},exports.navigateTo=function(e,t){return y.apply(this,arguments)},exports.navigateToMiniProgram=function(e){return k.apply(this,arguments)},exports.openChannelsActivity=function(e){return new Promise((function(t,r){var n,i;return b()&&wx.openChannelsActivity?e.feedId&&e.finderUserName?void(null===(n=(i=wx).openChannelsActivity)||void 0===n||n.call(i,a(a({},e),{},{success:function(e){t(e)},fail:function(e){r(e.errMsg);var t=e.errMsg;/fail cancel/.test(e.errMsg)&&(t=""),/getChannelsLiveInfo:fail/.test(e.errMsg)&&(t="获取视频号信息失败"),t&&w(t)}}))):(r(),w("视频号 ID 或 视号 ID 缺失，跳转失败")):(r(),(0,l.default)("error_channel_activity",{label:"low_version"}),wx.showModal({content:"当前微信版本过低，请升级微信至最新版本再试",confirmText:"好的"}))}))},exports.openCustomerServiceChat=function(e){if(wx.canIUse("openCustomerServiceChat"))return wx.openCustomerServiceChat({extInfo:{url:e},corpId:"ww8aea3e8ca0e11e7e",fail:function(e){w("发起客服消息失败, ".concat(e.errMsg))}});w("微信版本过低，请升级到最新版本后再试")},exports.openEmbeddedMiniProgram=function(e){var t=e.path,r=e.appId,n=e.shortLink,i=e.success,s=void 0===i?function(){}:i;(wx.openEmbeddedMiniProgram||wx.navigateToMiniProgram)({appId:r,path:t,shortLink:n,fail:function(e){var t;if(t=e.errMsg,![/fail cancel/,/fail another navigation is in progress/].some((function(e){return e.test(t)})))return n&&!wx.canIUse("navigateToMiniProgram.object.shortLink")?w("当前微信版本过低，无法使用小程序链接功能，请升级到最新微信版本后重试。"):void w(e.errMsg)},success:s,allowFullScreen:!0})},exports.openLocation=function(e,t,r){wx.openLocation({latitude:e,longitude:t,scale:18,name:r,fail:function(e){wx.showToast({title:e.errMsg,icon:"none"})}})},exports.redirectTo=function(e){return m.apply(this,arguments)},exports.requestSubscribeMessage=function(e){return C.apply(this,arguments)},exports.showLoading=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";wx.showLoading({title:e})},exports.showRewardedVideoAd=function(e,t){return q.apply(this,arguments)},exports.showToast=w,exports.switchTab=function(e){return M.apply(this,arguments)};var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/createClass"),r=require("../@babel/runtime/helpers/classCallCheck"),n=require("../@babel/runtime/helpers/inherits"),i=require("../@babel/runtime/helpers/createSuper"),s=require("../@babel/runtime/helpers/wrapNativeSuper");require("../@babel/runtime/helpers/Objectvalues");var o=require("../@babel/runtime/helpers/slicedToArray");require("../@babel/runtime/helpers/Objectentries");var a=require("../@babel/runtime/helpers/objectSpread2"),u=require("../@babel/runtime/helpers/asyncToGenerator"),c=d(require("lodash")),l=d(require("./analyse")),p=require("@mina-modules/system-info"),f=require("./tools"),h=require("./dialog");function d(e){return e&&e.__esModule?e:{default:e}}function w(e,t){return v.apply(this,arguments)}function v(){return(v=u(e().mark((function t(r,n){var i,s,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=r)&&void 0!==i&&i.trim()){e.next=2;break}return e.abrupt("return");case 2:return r=g(r),o=null!==(s=null==n?void 0:n.duration)&&void 0!==s?s:1500,e.prev=4,e.abrupt("return",x({title:r,duration:o}));case 8:return e.prev=8,e.t0=e.catch(4),console.warn("@utils/wechatApi: showToastWithComponent 调用失败，使用 wx.showToast 作为降级处理。\n\n"+(null===e.t0||void 0===e.t0?void 0:e.t0.message)),e.abrupt("return",wx.showToast({title:r,duration:o,icon:"none"}));case 12:case"end":return e.stop()}}),t,null,[[4,8]])})))).apply(this,arguments)}function x(e){return(0,h.showDialog)("#WxToast",e)}function g(e){return/request:fail fail:time out/.test(e)?"请求超时，请切换网络后稍等 1 分钟再试":e}function b(){var e=(0,p.getSysInfo)().SDKVersion;return(0,f.compareVersion)(e,"2.21.4")>=0}function m(){return(m=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wx.redirectTo({url:S(r)}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=u(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wx.navigateTo(a(a({},n),{},{url:S(r)})));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=u(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wx.switchTab({url:S(r)}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function S(e){return e.startsWith("/")?e:"/".concat(e)}function k(){return(k=u(e().mark((function t(r){var n,i,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.success,i=r.fail,e.prev=1,!r.shortLink||wx.canIUse("navigateToMiniProgram.object.shortLink")){e.next=4;break}throw{errMsg:"cannot use"};case 4:return e.next=6,wx.navigateToMiniProgram(c.default.omit(r,["success","fail"]));case 6:s=e.sent,null==n||n(s),e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(1),null==i||i(e.t0),T(e.t0),e.t0;case 15:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function T(e){for(var t={"cannot use":function(){w("当前微信版本过低，无法使用小程序链接功能，请升级到最新微信版本后重试。")},"invalid appid":function(){w("小程序 AppID 无效")},"invalid short link":function(){w("小程序链接无效")}},r=0,n=Object.entries(t);r<n.length;r++){var i=o(n[r],2),s=i[0],a=i[1];if(e.errMsg.includes(s))return a()}}function q(){return(q=u(e().mark((function t(r,n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=wx.createRewardedVideoAd({adUnitId:r})).onClose((function(e){var t,r;(null==n||null===(t=n.onClose)||void 0===t||t.call(n,e),e.isEnded)&&(null==n||null===(r=n.onComplete)||void 0===r||r.call(n))})),i.onError((function(e){((null==n?void 0:n.onError)||function(e){w(e.errMsg)})(e)})),e.prev=3,e.next=6,i.show();case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,i.load();case 12:return e.next=14,i.show();case 14:case"end":return e.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function C(){return(C=u(e().mark((function t(r){var n,i,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wx.requestSubscribeMessage(r);case 3:return n=e.sent,e.next=6,wx.getSetting({withSubscriptions:!0});case 6:if(i=e.sent,!I((s={manual:c.default.pick(n,r.tmplIds),auto:c.default.pick(i.subscriptionsSetting.itemSettings,r.tmplIds)}).auto)){e.next=10;break}throw new A;case 10:if(!I(s.manual)){e.next=12;break}throw new P;case 12:return e.abrupt("return",n);case 15:throw e.prev=15,e.t0=e.catch(0),wx.requestSubscribeMessage||w("微信版本过低，无法使用订阅消息功能，请升级到最新微信版本后重试。"),(20004===e.t0.errCode||e.t0 instanceof A)&&L(),e.t0;case 20:case"end":return e.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function I(e){return Object.values(e).includes("reject")}var A=function(e){n(o,e);var s=i(o);function o(){return r(this,o),s.call(this,"reject")}return t(o)}(s(Error)),P=function(e){n(o,e);var s=i(o);function o(){return r(this,o),s.call(this,"reject")}return t(o)}(s(Error));function L(){wx.showModal({title:"通知订阅失败",content:"请前往「设置」页面打开「接受订阅消息」，并确保下方订阅消息都已接受。",confirmText:"去开启",success:function(e){e.confirm&&wx.openSetting({withSubscriptions:!0})}})}
},{isPage:false,isComponent:false,currentFile:'utils/wechatAPI.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/wecom/auth.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWeComAuthedData=function(){return h.apply(this,arguments)};var e=require("../../@babel/runtime/helpers/regeneratorRuntime"),r=require("../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../@babel/runtime/helpers/createClass"),n=require("../../@babel/runtime/helpers/classCallCheck"),u=require("../../@babel/runtime/helpers/inherits"),a=require("../../@babel/runtime/helpers/createSuper"),i=require("../../@babel/runtime/helpers/wrapNativeSuper"),l=c(require("lodash")),o=c(require("@utils/event")),s=require("@utils/login");function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){u(i,e);var r=a(i);function i(e){var t;return n(this,i),(t=r.call(this,"企业微信授权失败: "+((null==e?void 0:e.message)||(null==e?void 0:e.errMsg)||e))).name="WecomAuthError",t}return t(i)}(i(Error));function h(){return(h=r(e().mark((function r(){var t;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return getApp().globalData.wxWorkData},e.abrupt("return",new Promise((function(e,r){return getApp().globalData.inited?l.default.isEmpty(t())?(0,s.weComLogin)().then((function(){e(t())})).catch((function(e){r(new p(e))})):e(t()):(o.default.once("wecom:load_auth_data_success",(function(){e(t())})),void o.default.once("wecom:load_auth_data_fail",(function(e){r(new p(e))})))})));case 2:case"end":return e.stop()}}),r)})))).apply(this,arguments)}
},{isPage:false,isComponent:false,currentFile:'utils/wecom/auth.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/wecom/order-account.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GuideType=exports.AppStatus=void 0,exports.getAccounts=function(e){return(null==e?void 0:e.accounts)||[]},exports.getAppExpiredDate=function(e){var t;return o(null===(t=e.agent)||void 0===t?void 0:t.expired_time)},exports.getAppLeftDays=function(e){var t;return i(null===(t=e.agent)||void 0===t?void 0:t.expired_time)},exports.getAppStatus=function(e){var t;return null==e||null===(t=e.agent)||void 0===t?void 0:t.app_status},exports.getExpiredDate=o,exports.getGuidePath=function(e){return"pages/uncommonly/wecomIssuesGuideForSelfOrder/wecomIssuesGuideForSelfOrder?type=".concat(e)},exports.getStaffTrialExpiredDate=function(e){var t;return o(null===(t=e.trail_info)||void 0===t?void 0:t.end_time)},exports.getStaffTrialLeftDays=function(e){var t;return i(null===(t=e.trail_info)||void 0===t?void 0:t.end_time)},exports.getWillExpiredAccounts=function(t){var r;return(null==t||null===(r=t.accounts)||void 0===r?void 0:r.filter((function(t){return e.default.inRange(i(t.expire_time),0,21)})))||[]};var e=r(require("lodash")),t=r(require("moment"));function r(e){return e&&e.__esModule?e:{default:e}}var n=exports.GuideType=function(e){return e[e["购买应用"]=1]="购买应用",e[e["购买员工帐号"]=2]="购买员工帐号",e[e["异常情况"]=3]="异常情况",e}(n||{}),u=exports.AppStatus=function(e){return e[e["没有付费"]=0]="没有付费",e[e["限时试用"]=1]="限时试用",e[e["试用过期"]=2]="试用过期",e[e["购买期内"]=3]="购买期内",e[e["购买过期"]=4]="购买过期",e[e["不限时试用"]=5]="不限时试用",e[e["购买期内_人数超标_处于试用期"]=6]="购买期内_人数超标_处于试用期",e[e["购买期内_人数超标_超出试用期"]=7]="购买期内_人数超标_超出试用期",e}(u||{});function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M 月 D 日";if(!e)return"";var n=(0,t.default)(a(e));return n.format(r)}function i(e){return e?Math.max((0,t.default)(a(e)).diff(Date.now(),"days"),0):0}function a(e){return"number"==typeof e&&10===e.toString().length&&(e*=1e3),e}
},{isPage:false,isComponent:false,currentFile:'utils/wecom/order-account.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/wecomAPI.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkAuth=u,exports.checkQySession=i,exports.loginQy=c,exports.selectEnterpriseContact=function(e,r){return p.apply(this,arguments)},exports.showEnterPriseSelfCheckModal=f;var e=require("../@babel/runtime/helpers/regeneratorRuntime"),r=require("../@babel/runtime/helpers/asyncToGenerator"),t=require("@services/wecom/index"),n=require("@utils/tools"),s=require("./env"),o=(wx||{}).qy;function c(){return(0,n.promisify)(o.login)()}function i(){return(0,n.promisify)(o.checkSession)()}function u(){return a.apply(this,arguments)}function a(){return(a=r(e().mark((function r(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.isWxWork)()){e.next=2;break}throw new Error("请在企业微信中打开小程序");case 2:return e.prev=2,e.next=5,i();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),console.error(e.t0),e.next=12,c();case 12:case"end":return e.stop()}}),r,null,[[2,7]])})))).apply(this,arguments)}function p(){return(p=r(e().mark((function r(s,c){var i,a,p,x,h;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.next=4,(0,n.promisify)(o.selectEnterpriseContact)(c);case 4:if(i=e.sent,a=i.result,p=l(a),x=[],!(p.length>0)){e.next=13;break}return e.next=11,(0,t.encodeUserIds)(s,p);case 11:h=e.sent,x=h.data.map((function(e){return e.open_userid}));case 13:if(p.length===x.length){e.next=17;break}if(0!==x.length){e.next=17;break}throw f({title:"员工账号选取失败",content:"请检查企业是否购买应用，所选用户是否在应用可见范围内"}),new Error;case 17:return e.abrupt("return",{userIds:x});case 18:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function l(e){return e.userList.map((function(e){return e.id}))}function f(t){var n;wx.showModal({title:t.title,content:t.content,confirmText:"查看指引",success:(n=r(e().mark((function r(t){var n,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.confirm){e.next=10;break}return e.next=3,wx.showActionSheet({itemList:["如何购买应用？","如何修改应用可见范围？"]});case 3:n=e.sent,s=n.tapIndex,e.t0=s,e.next=0===e.t0?8:1===e.t0?9:10;break;case 8:return e.abrupt("return",wx.previewImage({urls:["https://lucky-cdn.nocode.com/mina/lottery/intro-buy-wecom-app.jpeg?v=3"]}));case 9:return e.abrupt("return",wx.previewImage({urls:["https://lucky-cdn.nocode.com/mina/lottery/intro-setting-app-visible-range.jpeg?v=2"]}));case 10:case"end":return e.stop()}}),r)}))),function(e){return n.apply(this,arguments)})})}
},{isPage:false,isComponent:false,currentFile:'utils/wecomAPI.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("utils/withdraw.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithdrawManager=void 0,exports.getWithdrawBtnText=function(e,t,r){var n,i,a=null===(n=getApp().globalData.userProfile)||void 0===n||null===(i=n.info)||void 0===i?void 0:i.balance;if(0===a)return"已提现";if(!(0,l.isLotteryDrawOver72Hours)(e)&&y(t.type)&&a>=30&&a<=2e4)return r?"点击\n提现":"点击提现";return r?"查看\n提现":"查看提现"},exports.goToBanlanceAccount=d,exports.isBalanceZero=function(){var e,t;return 0===(null===(e=getApp().globalData.userProfile)||void 0===e||null===(t=e.info)||void 0===t?void 0:t.balance)},exports.needCheckAccountBalance=function(e){if(!(0,u.isWinner)(e))return!1;if((0,l.isAllowMultiJoin)(e)){return(e.lotteryResult.prizes||[]).filter((function(e){return y(e.type)})).length>0}return y((0,a.getCurrentUserPrize)(e).type)},exports.toWithdraw=function(e,t){return p.apply(this,arguments)},exports.withdraw=f,require("../@babel/runtime/helpers/Arrayincludes");var e=require("../@babel/runtime/helpers/regeneratorRuntime"),t=require("../@babel/runtime/helpers/classCallCheck"),r=require("../@babel/runtime/helpers/createClass"),n=require("../@babel/runtime/helpers/asyncToGenerator"),i=require("../models/lottery"),a=require("../services/game"),u=require("./tools"),s=h(require("../utils/analyse")),l=require("./lotteryUtils"),o=h(require("currency.js")),c=require("@/services/withdraw");function h(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=n(e().mark((function t(r,n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!0!==r._withdrawing){e.next=4;break}return e.abrupt("return");case 4:(i=new v(n)).isAllowWithdrawDirectly()?i.isAllowWithdrawAll()?i.handleWithdrawAll():f(r,n):((0,s.default)("detail_moneyprize_toaccount"),d());case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function d(){wx.navigateTo({url:"/pages/uncommonly/pages/account/account"})}function f(e,t){return w.apply(this,arguments)}function w(){return(w=n(e().mark((function t(r,n){var i,s,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._withdrawing=!0,i=(0,a.getCurrentUserPrize)(n),e.prev=2,e.next=5,(0,a.withdrawCashPrize)(n.id,(null==i?void 0:i.amount)||0);case 5:return e.next=7,(0,u.delay)(500);case 7:null===(s=(0,u.getCurrentPage)())||void 0===s||null===(l=s.refreshPage)||void 0===l||l.call(s),wx.showToast({title:"提现成功",icon:"none"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),wx.showToast({title:e.t0.message||"提现失败",icon:"none"});case 14:return e.prev=14,r._withdrawing=!1,e.finish(14);case 17:case"end":return e.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}var v=exports.WithdrawManager=function(){function i(e,r){t(this,i),this.lottery=e,this.prize=r,this.init()}var s;return r(i,[{key:"init",value:function(){var e=this.prize||(0,a.getCurrentUserPrize)(this.lottery)||{},t=e.withdrawed,r=e.type,n=e.amount,i=void 0===n?0:n;this.withdrawed=t,this.type=r,this.amount=i,this.balance=getApp().globalData.userProfile.info.balance}},{key:"isAllowWithdrawDirectly",value:function(){return!(0,l.isLotteryDrawOver72Hours)(this.lottery)&&y(this.type)&&this.balance>=30&&this.balance<=2e4}},{key:"isAllowWithdrawAll",value:function(){return this.balance>this.amount}},{key:"getBalanceDiff",value:function(){return(0,o.default)(this.balance-this.amount).multiply(.01).format()}},{key:"handleWithdrawAll",value:(s=n(e().mark((function t(){var r,n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._withdrawing){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wx.showModal({title:"温馨提示",content:"你当前还有 ".concat(this.getBalanceDiff()," 元红包余额未提取，是否一并提现？"),confirmText:"全部提现",cancelText:"查看详情"});case 4:if(!(r=e.sent).confirm){e.next=22;break}return e.prev=6,this._withdrawing=!0,e.next=10,(0,c.withdrawAll)(this.balance);case 10:return(0,u.showToast)("提现成功"),e.next=13,(0,u.delay)(500);case 13:null===(n=(0,u.getCurrentPage)())||void 0===n||null===(i=n.refreshPage)||void 0===i||i.call(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),(0,u.showToast)(e.t0.message||"提现失败");case 19:return e.prev=19,this._withdrawing=!1,e.finish(19);case 22:r.cancel&&d();case 23:case"end":return e.stop()}}),t,this,[[6,16,19,22]])}))),function(){return s.apply(this,arguments)})}]),i}();function y(e){return[i.PRIZE_TYPES.CASH,i.PRIZE_TYPES.LUCKY_CASH].includes(e)}
},{isPage:false,isComponent:false,currentFile:'utils/withdraw.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("version.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";module.exports="2.5.29";
},{isPage:false,isComponent:false,currentFile:'version.js'});;__wxRoute = undefined;__wxRouteBegin = undefined;__wxAppCurrentFile__=undefined;define("app.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("@babel/runtime/helpers/regeneratorRuntime"),t=require("@babel/runtime/helpers/asyncToGenerator");require("./libs/lodash-inject"),require("./libs/i18n");var r=I(require("moment")),n=require("./services/chou"),a=require("./utils/tools"),o=require("./utils/user"),i=w(require("./utils/analyse")),u=I(require("./config")),s=require("./utils/promiseFix"),c=I(require("lodash")),l=w(require("./utils/ad")),f=w(require("./utils/crash")),p=I(require("./utils/event")),d=I(require("./store/index")),g=require("@mina-modules/upgrade-version"),h=require("@mina-modules/system-info"),b=require("@mina-modules/mina-sentry"),v=require("@mina-modules/sign"),m=require("@utils/app/check-system"),x=require("@utils/app/redirect"),_=require("@utils/app/error"),k=require("./utils/serverConfig");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function I(e){return e&&e.__esModule?e:{default:e}}function D(e){return C.apply(this,arguments)}function C(){return(C=t(e().mark((function t(r){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.setStorage)({key:"USER_1",data:r});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}App({reduxStore:d.default,globalData:{hasCustomFont:0,appConfigLoaded:!1,userInfo:{},error:null,pageInfo:{},inited:!1,appConfig:null,hasUpdate:!1,canUpdate:!1,updating:!1,userProfile:{phone_authorized:!1},profile:{balance:0,square_unused_count:0,unused_square_ids:[],all_count:0,create_count:0,lucky_count:0,show_square:!0},themeFunnyConfig:{prize_list:[{name:"一起吃饭",default_count:1},{name:"一起喝酒",default_count:2},{name:"一起上学",default_count:2},{name:"一起上班",default_count:1}],default_index:[0,1,2]},bannerAds:{},editorHtmlContent:null,textareaOpen:!1,lotterybindauth:null,homePageEditor:{autograph:"",location:{},cityCache:null},game:{isJoinLotteryGuideShowed:!1},isHomePageReload:!0,DailyTaskTip:{totalSteps:null,current_step:null},LocalFormCache:[],LocalFormCacheText:"",LocalFormPush:!1,UseCaseIntroduceCash:"",fromTimeAssistant:!1},userInfoQueue:[],needUpdateUserInfo:function(){var r=this;return t(e().mark((function t(){var n,o,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.globalData.appUserProfileloaded){e.next=19;break}if(n=!0,!1!==(o=(0,a.checkDateExpireData)("LOGIN_ERROR"))){e.next=7;break}n=!1,e.next=15;break;case 7:if(!0!==o){e.next=12;break}(0,a.deleteDateExpireData)("LOGIN_ERROR"),n=!0,e.next=15;break;case 12:return e.next=14,r.checkNeedUpdateUserInfo();case 14:n=e.sent;case 15:return i=r.userInfoQueue,r.userInfoQueue=[],i.forEach((function(e){return e()})),e.abrupt("return",n);case 19:return e.abrupt("return",new Promise((function(e){return r.userInfoQueue.push((function(){r.needUpdateUserInfo().then(e)}))})));case 20:case"end":return e.stop()}}),t)})))()},checkNeedUpdateUserInfo:function(){var r=this;return t(e().mark((function t(){var n,i,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,r.globalData.userInfo){e.next=5;break}n=!0,e.next=30;break;case 5:if(i=c.default.get(r.globalData,"userInfo.nick_name",""),u=c.default.get(r.globalData,"userInfo.avatar",""),i&&u){e.next=11;break}return e.abrupt("return",!0);case 11:if(!u){e.next=29;break}if(!(0,a.checkDateExpireData)("USER_AVATAR")){e.next=26;break}return e.prev=14,e.next=17,(0,o.checkAvatarIsOutdate)(u);case 17:e.sent?(0,a.showToast)("微信头像已失效，请重新授权头像昵称"):((0,a.insertDateExpireData)("USER_AVATAR",1209600),n=!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),n=!0;case 24:e.next=27;break;case 26:n=!1;case 27:e.next=30;break;case 29:n=!1;case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),t,null,[[14,21]])})))()},getUserInfo:function(){var r=this;return t(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("get user info"),!r.globalData.userInfo||!r.globalData.userInfo.user_id){e.next=3;break}return e.abrupt("return",r.globalData.userInfo);case 3:return e.prev=3,e.next=6,(0,a.promisify)(wx.getStorage)({key:"USER_1"});case 6:return n=e.sent,console.log("get userInfo from storage",n),e.abrupt("return",n.data);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",{});case 15:case"end":return e.stop()}}),t,null,[[3,11]])})))()},onShow:function(e){var t;console.log("########## app onShow ##########",e),(0,a.isLiteLotteryDetailPage)(e.path)||this.appInit(),f.init(),this.globalData.pageInfo=e,(0,a.showTencentDocFromTemplateMsg)(null===(t=e.query)||void 0===t?void 0:t.tdoc,e.scene)},onHide:function(){(0,a.resetJoinNumber)(),console.log("[mina]: onHide"),f.clear(),l.save()},onUnhandledRejection:function(e){var t=e.reason;(0,_.reportOnErrorMessage)(t)},onError:function(e){(0,_.reportOnErrorMessage)(e)},fetchConfigQueue:[],isFetchingConfig:!1,fetchConfig:function(){var r=this;return t(e().mark((function t(){var a,o,i,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.globalData.appConfigLoaded){e.next=2;break}return e.abrupt("return",!0);case 2:if(r.isFetchingConfig){e.next=34;break}return e.prev=3,r.isFetchingConfig=!0,console.log("fetch app config"),e.next=8,(0,n.getAppConfig)();case 8:for(o=e.sent,console.log("🚀 ~ file: app.ts ~ line 433 ~ fetchConfig ~ resp",o),(0,k.syncServerConfig)(null==o||null===(a=o.data)||void 0===a?void 0:a.server_config_version),r.globalData.appConfig=o.data,r.globalData.appConfig&&r.globalData.appConfig.pay_lottery_condition&&(r.globalData.appConfig.pay_lottery_condition.max_user_count=99999),i=c.default.get(o.data,"enable_features",[]),r.globalData.grayEnable=i.indexOf("grey_mode")>=0,u=r.globalData.grayEnable,p.default.emit("app:theme_set_gray",u),o.data.theme_funny_config&&(r.globalData.themeFunnyConfig=o.data.theme_funny_config),o.data.banner_ads&&c.default.isArray(o.data.banner_ads)&&l.config(o.data.banner_ads),r.loadChannelAdInfo(),console.log("fetch app config success",o.data),r.globalData.appConfigLoaded=!0;r.fetchConfigQueue.length>0;)r.fetchConfigQueue.shift()();return e.abrupt("return",o);case 26:throw e.prev=26,e.t0=e.catch(3),r.globalData.appConfigLoaded=!1,(0,b.error)("app fetchConfig",e.t0),e.t0;case 31:return e.prev=31,r.isFetchingConfig=!1,e.finish(31);case 34:return e.abrupt("return",new Promise((function(e){r.fetchConfigQueue.push((function(){return r.fetchConfig().then(e)}))})));case 35:case"end":return e.stop()}}),t,null,[[3,26,31,34]])})))()},forceUpgradeOnPage:function(){var e,t;(0,g.upgradeOnPage)(null===(e=this.globalData)||void 0===e||null===(t=e.appConfig)||void 0===t?void 0:t.min_support_version,u.default.VERSION)},shelve:function(e){return c.default.get(this,"globalData.appConfig.unshelve_funcs",[]).indexOf(e)>-1},avaliable:function(e){return-1===c.default.get(this,"globalData.appConfig.invisible_funcs",[]).indexOf(e)},activity:function(e){var t=c.default.get(this.globalData,"appConfig.activities",{})[e];return t&&(t._name=e),t},featureAvaliable:function(e,t){var r,n;t||(t=(null===(r=this.globalData)||void 0===r||null===(n=r.userInfo)||void 0===n?void 0:n.enable_features)||[]);return console.log(t,"this.isEnableVirtualPrize"),-1!==t.indexOf(e)},loadChannelAdInfo:function(){var e=l.getChannelAdTask();e&&l.handleChannelAdTask(e)},isNotificationShow:function(){return t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.promisify)(wx.getStorage)({key:"appNotification"});case 3:return e.abrupt("return",!1);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),t,null,[[0,6]])})))()},firstShow:function(r){return t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.promisify)(wx.getStorage)({key:r});case 3:return e.abrupt("return",!1);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,(0,s.setStorage)({key:r,data:!0});case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),t,null,[[0,6]])})))()},onPageNotFound:function(e){wx.reLaunch({url:(0,x.getPageNotFoundRedirectPath)(e.path,e.query)})},checkStorage:function(){try{wx.getStorageInfo({success:function(e){var t=["SESSION_NEW_1","USER_1","join_public_time","join-sub-redeem"];e.limitSize-e.currentSize<e.limitSize/6&&e.keys.forEach((function(e){-1===t.indexOf(e)&&wx.removeStorage({key:e})}))}})}catch(e){console.error(e)}},screenshotMonitor:function(){wx.onUserCaptureScreen((function(){(0,i.default)("screenshot",{label:(0,a.getCurrentRouteWithParam)()})}))},onLaunch:function(r){var n=this;return t(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("########## app onLaunch ##########",r),(0,v.initSign)(u.default.token,"".concat(u.default.API_HOST,"/").concat(u.default.API_VERSION)),n.launchOptions=r,(0,b.init)(u.default.dsn),n.screenshotMonitor(),!getCurrentPages().length&&(0,a.canUsePreloadAd)()&&wx.preloadAd&&wx.preloadAd([{unitId:"adunit-f2292bd318dc3677",type:"custom"},{unitId:"adunit-110f9fa0b90e2176",type:"banner"},{unitId:"adunit-b77637961f7ab3d3",type:"custom"},{unitId:"adunit-b756d7be0ae8eff2",type:"banner"},{unitId:"adunit-5fe99d203f78d804",type:"custom"},{unitId:"adunit-c29ae1a7c9d6ff56",type:"custom"},{unitId:"adunit-09ff67f32b87213c",type:"custom"},{unitId:"adunit-7c0b6669f084e65f",type:"custom"},{unitId:"adunit-35de4cf3bc7d073f",type:"banner"}]),console.log("[mina]: onLaunch"),f.init(),wx.removeStorage({key:"shareordertip"}),wx.removeStorageSync("__LOCATION_INFO__"),n.clearExpiredTime(),n.checkStorage(),setTimeout((function(){var e=(0,i.initTracker)(n);(0,i.initAdTracker)(n),e&&r&&r.scene&&(0,i.appLaunchScene)(r)}),100),wx.onLazyLoadError&&wx.onLazyLoadError((function(e){console.log("###### onLazyLoadError #######",e),(0,b.error)(e),(0,i.default)("on_lazy_load_error",{label:"".concat(e.subpackage,"_").concat(e.errMsg)})}),1e4),wx.createCacheManager&&wx.createCacheManager({maxAge:864e5,extra:{apiList:["wx.getSetting"]}});case 15:case"end":return e.stop()}}),t)})))()},clearExpiredTime:function(){try{var e=wx.getStorageSync("USER_ADD_FANS_RECORD"),t=(0,r.default)();if(e){for(var n in e){var a=e[n];t.isAfter(a.clearTime)&&delete e[n]}wx.setStorageSync("USER_ADD_FANS_RECORD",e)}}catch(e){console.error(e,"clearExpiredTime err")}},downLoadImage:function(r){return t(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("download image: ".concat(r)),e.next=3,(0,s.downLoadFile)(r);case 3:if((n=e.sent).tempFilePath&&404!==n.statusCode){e.next=6;break}throw new Error("download image ".concat(r," fail"));case 6:return console.log("download image success: ".concat(n.tempFilePath)),e.abrupt("return",n.tempFilePath);case 8:case"end":return e.stop()}}),t)})))()},getUserProfileQueue:[],isGettingUserProfile:!1,getUserProfile:function(){var r=arguments,a=this;return t(e().mark((function t(){var o,u,s,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.length>0&&void 0!==r[0]&&r[0],![a.globalData.appUserProfileloaded,!o].every(Boolean)){e.next=3;break}return e.abrupt("return");case 3:if(a.isGettingUserProfile&&!o){e.next=31;break}return e.prev=4,a.isGettingUserProfile=!0,e.next=8,(0,n.UserInfo)();case 8:if(s=e.sent,a.globalData.userProfile=s.data,-4===c.default.get(s,"data.state")&&(wx.navigateTo({url:"/pages/helpers/error/error?msg=页面加载失败"}),(0,i.default)("screenview_banuser")),!o&&null!==(u=a.globalData.userInfo)&&void 0!==u&&u.avatar){e.next=15;break}return a.globalData.userInfo=s.data,e.next=15,D(s.data);case 15:return s.data.info&&(a.globalData.userProfile.info=s.data.info),a.globalData.appUserProfileloaded=!0,e.next=19,a.needUpdateUserInfo();case 19:for(l=e.sent,p.default.emit("app:load_userinfo_success",l);a.getUserProfileQueue.length>0;)a.getUserProfileQueue.shift()();return e.abrupt("return");case 25:e.prev=25,e.t0=e.catch(4),a.globalData.appUserProfileloaded=!1;case 28:return e.prev=28,a.isGettingUserProfile=!1,e.finish(28);case 31:return e.abrupt("return",new Promise((function(e){a.getUserProfileQueue.push((function(){return a.getUserProfile(o).then(e)}))})));case 32:case"end":return e.stop()}}),t,null,[[4,25,28,31]])})))()},checkAppInitLoading:function(){if((0,a.isFromTimeline)())return!0;if(this._lastInitDate&&(0,r.default)().diff(this._lastInitDate,"seconds")<2)return!0;return this._lastInitDate=(0,r.default)(),!1},appInit:function(){var r=this;return t(e().mark((function t(){var n,a,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("######### app start init #########"),!r.globalData.inited){e.next=3;break}return e.abrupt("return",!0);case 3:if(!r.checkAppInitLoading()){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,(0,m.checkSystem)((0,h.getSysInfo)()),r.checkStorage(),e.prev=9,e.next=12,Promise.all([r.fetchConfig(),r.getUserProfile()]);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),(0,b.error)(e.t0,"init error");case 17:return e.next=19,r.getUserInfo();case 19:n=e.sent,console.log("userInfo",n),a=(0,i.initTracker)(r),console.log("tracker",a),o=(0,i.initAdTracker)(r),console.log("adTracker",o),n.user_id&&(a.set("&uid",n.user_id),o.set("&uid",n.user_id),f.init(n),(0,i.initSessionId)(n.user_id)),r.globalData.userInfo=n,r.globalData.inited=!0,p.default.emit("app:init_success"),console.log("Appinit -> end -> userInfo",r.globalData.userInfo),e.next=36;break;case 32:throw e.prev=32,e.t1=e.catch(6),r.globalData.error=e.t1,e.t1;case 36:case"end":return e.stop()}}),t,null,[[6,32],[9,14]])})))()}});
},{isPage:false,isComponent:false,currentFile:'app.js'});require("app.js");