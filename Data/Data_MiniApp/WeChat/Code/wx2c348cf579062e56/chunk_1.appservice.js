$gwx_XC_1=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_1 || [];
function gz$gwx_XC_1_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_1_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_1_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'guideTipFlag']])
Z([[7],[3,'layerFlag']])
Z([3,'closeLayer'])
Z([a,[3,'guide-modal '],[[2,'?:'],[[2,'==='],[[7],[3,'scene_type']],[1,2]],[1,'add-index1'],[1,'']]])
Z([a,[3,'top:'],[[7],[3,'top']],[3,'px;']])
Z([3,'preventBubble'])
Z([3,'guide-layer'])
Z([3,'guide-layer-title flex-center'])
Z([[7],[3,'testCommon']])
Z([[2,'&&'],[[2,'!'],[[7],[3,'testCommon']]],[[2,'!=='],[[7],[3,'scene_type']],[1,2]]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'testCommon']]],[[2,'==='],[[7],[3,'scene_type']],[1,2]]])
Z([[2,'>'],[[6],[[7],[3,'guideUrl']],[3,'length']],[1,0]])
Z([3,'changeSwiper'])
Z([3,'true'])
Z([3,'layer-content-image'])
Z([3,'500'])
Z([1,true])
Z([3,'2000'])
Z([3,'index'])
Z([3,'item'])
Z([[7],[3,'guideUrl']])
Z(z[18])
Z([[7],[3,'item']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_1_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_1
}
function gz$gwx_XC_1_2(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_1_2)return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_2
__WXML_GLOBAL__.ops_cached.$gwx_XC_1_2=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'onViewDataEntrance'])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'formatList']],[[2,'>'],[[6],[[7],[3,'formatList']],[3,'length']],[1,0]]],[[6],[[6],[[7],[3,'formatList']],[1,0]],[3,'view']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_1_2);return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_2
}
function gz$gwx_XC_1_3(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_1_3)return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_3
__WXML_GLOBAL__.ops_cached.$gwx_XC_1_3=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'isShow']])
Z([3,'navbar'])
Z([a,[3,'height:'],[[7],[3,'navHeight']],[3,'px;']])
Z([[2,'||'],[[2,'||'],[[2,'||'],[[7],[3,'mainfieldNav']],[[7],[3,'showHome']]],[[7],[3,'showBack']]],[[7],[3,'showClose']]])
Z([a,[3,'left-container '],[[2,'?:'],[[2,'&&'],[[2,'||'],[[2,'!'],[[7],[3,'showHome']]],[[2,'!'],[[7],[3,'showBack']]]],[[2,'!'],[[7],[3,'mainfieldNav']]]],[1,'single'],[1,'']],[3,' '],[[2,'?:'],[[2,'==='],[[7],[3,'navHeight']],[1,48]],[1,'android'],[1,'ios']]])
Z([[9],[[9],[[8],'isWhiteStyle',[[7],[3,'isWhiteStyle']]],[[8],'isBubbleShown',[[7],[3,'isBubbleShown']]]],[[8],'bubbleText',[[7],[3,'bubbleText']]]])
Z([[12],[[6],[[7],[3,'icon']],[3,'left']],[[5],[[5],[[5],[[5],[[7],[3,'mainfieldNav']]],[[7],[3,'showBack']]],[[7],[3,'showHome']]],[[7],[3,'showClose']]]])
Z([[12],[[6],[[7],[3,'icon']],[3,'showDivide']],[[5],[[5],[[5],[[7],[3,'mainfieldNav']]],[[7],[3,'showBack']]],[[7],[3,'showHome']]]])
Z(z[5])
Z([[12],[[6],[[7],[3,'icon']],[3,'right']],[[5],[[5],[[5],[[7],[3,'mainfieldNav']]],[[7],[3,'showBack']]],[[7],[3,'showHome']]]])
Z([[7],[3,'showTitle']])
Z([[7],[3,'showWechatIcon']])
Z(z[0])
Z([[2,'&&'],[[7],[3,'isShow']],[[7],[3,'isIpxSeries']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_1_3);return __WXML_GLOBAL__.ops_cached.$gwx_XC_1_3
}
__WXML_GLOBAL__.ops_set.$gwx_XC_1=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_1=true;
var x=['./components/add-to-favorite-tip/index.wxml','./components/home-banner/home-banner.wxml','./components/navBar/index.wxml','./templates/back.wxml','./templates/home.wxml','./templates/mainfield.wxml','./templates/close.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_1_1()
var xII=_v()
_(r,xII)
if(_oz(z,0,e,s,gg)){xII.wxVkey=1
}
var oJI=_v()
_(r,oJI)
if(_oz(z,1,e,s,gg)){oJI.wxVkey=1
var fKI=_mz(z,'view',['catchtap',2,'class',1,'style',2],[],e,s,gg)
var cLI=_mz(z,'view',['catchtap',5,'class',1],[],e,s,gg)
var oNI=_n('view')
_rz(z,oNI,'class',7,e,s,gg)
var cOI=_v()
_(oNI,cOI)
if(_oz(z,8,e,s,gg)){cOI.wxVkey=1
}
var oPI=_v()
_(oNI,oPI)
if(_oz(z,9,e,s,gg)){oPI.wxVkey=1
}
var lQI=_v()
_(oNI,lQI)
if(_oz(z,10,e,s,gg)){lQI.wxVkey=1
}
cOI.wxXCkey=1
oPI.wxXCkey=1
lQI.wxXCkey=1
_(cLI,oNI)
var hMI=_v()
_(cLI,hMI)
if(_oz(z,11,e,s,gg)){hMI.wxVkey=1
var aRI=_mz(z,'swiper',['autoplay',-1,'bindchange',12,'circular',1,'class',2,'duration',3,'indicatorDots',4,'interval',5],[],e,s,gg)
var tSI=_v()
_(aRI,tSI)
var eTI=function(oVI,bUI,xWI,gg){
var fYI=_v()
_(xWI,fYI)
if(_oz(z,22,oVI,bUI,gg)){fYI.wxVkey=1
}
fYI.wxXCkey=1
return xWI
}
tSI.wxXCkey=2
_2z(z,20,eTI,e,s,gg,tSI,'item','index','index')
_(hMI,aRI)
}
hMI.wxXCkey=1
_(fKI,cLI)
_(oJI,fKI)
}
xII.wxXCkey=1
oJI.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
d_[x[1]]={}
var m1=function(e,s,r,gg){
var z=gz$gwx_XC_1_2()
var h1I=_n('midas-simple')
_rz(z,h1I,'bind:impressionend',0,e,s,gg)
var o2I=_v()
_(h1I,o2I)
if(_oz(z,1,e,s,gg)){o2I.wxVkey=1
}
o2I.wxXCkey=1
_(r,h1I)
return r
}
e_[x[1]]={f:m1,j:[],i:[],ti:[],ic:[]}
d_[x[2]]={}
var m2=function(e,s,r,gg){
var z=gz$gwx_XC_1_3()
var o4I=e_[x[2]].i
_ai(o4I,x[3],e_,x[2],2,8)
_ai(o4I,x[4],e_,x[2],2,46)
_ai(o4I,x[5],e_,x[2],2,84)
_ai(o4I,x[6],e_,x[2],2,127)
var l5I=_v()
_(r,l5I)
if(_oz(z,0,e,s,gg)){l5I.wxVkey=1
var e8I=_mz(z,'view',['class',1,'style',1],[],e,s,gg)
var b9I=_v()
_(e8I,b9I)
if(_oz(z,3,e,s,gg)){b9I.wxVkey=1
var xAJ=_n('view')
_rz(z,xAJ,'class',4,e,s,gg)
var fCJ=_v()
_(xAJ,fCJ)
var cDJ=_oz(z,6,e,s,gg)
var hEJ=_gd(x[2],cDJ,e_,d_)
if(hEJ){
var oFJ=_1z(z,5,e,s,gg) || {}
var cur_globalf=gg.f
fCJ.wxXCkey=3
hEJ(oFJ,oFJ,fCJ,gg)
gg.f=cur_globalf
}
else _w(cDJ,x[2],2,646)
var oBJ=_v()
_(xAJ,oBJ)
if(_oz(z,7,e,s,gg)){oBJ.wxVkey=1
}
var cGJ=_v()
_(xAJ,cGJ)
var oHJ=_oz(z,9,e,s,gg)
var lIJ=_gd(x[2],oHJ,e_,d_)
if(lIJ){
var aJJ=_1z(z,8,e,s,gg) || {}
var cur_globalf=gg.f
cGJ.wxXCkey=3
lIJ(aJJ,aJJ,cGJ,gg)
gg.f=cur_globalf
}
else _w(oHJ,x[2],2,879)
oBJ.wxXCkey=1
_(b9I,xAJ)
}
var o0I=_v()
_(e8I,o0I)
if(_oz(z,10,e,s,gg)){o0I.wxVkey=1
}
else if(_oz(z,11,e,s,gg)){o0I.wxVkey=2
}
else{o0I.wxVkey=3
var tKJ=_n('slot')
_(o0I,tKJ)
}
b9I.wxXCkey=1
o0I.wxXCkey=1
_(l5I,e8I)
}
var a6I=_v()
_(r,a6I)
if(_oz(z,12,e,s,gg)){a6I.wxVkey=1
}
var t7I=_v()
_(r,t7I)
if(_oz(z,13,e,s,gg)){t7I.wxVkey=1
}
l5I.wxXCkey=1
a6I.wxXCkey=1
t7I.wxXCkey=1
o4I.pop()
o4I.pop()
o4I.pop()
o4I.pop()
return r
}
e_[x[2]]={f:m2,j:[],i:[],ti:[x[3],x[4],x[5],x[6]],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_1";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_1();	if (__vd_version_info__.delayedGwx) __wxAppCode__['components/add-to-favorite-tip/index.wxml'] = [$gwx_XC_1, './components/add-to-favorite-tip/index.wxml'];else __wxAppCode__['components/add-to-favorite-tip/index.wxml'] = $gwx_XC_1( './components/add-to-favorite-tip/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/home-banner/home-banner.wxml'] = [$gwx_XC_1, './components/home-banner/home-banner.wxml'];else __wxAppCode__['components/home-banner/home-banner.wxml'] = $gwx_XC_1( './components/home-banner/home-banner.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/navBar/index.wxml'] = [$gwx_XC_1, './components/navBar/index.wxml'];else __wxAppCode__['components/navBar/index.wxml'] = $gwx_XC_1( './components/navBar/index.wxml' );
	;__wxRoute = "components/add-to-favorite-tip/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/add-to-favorite-tip/index.js";define("components/add-to-favorite-tip/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../constants").GUIDE_URL,e=void 0===t?[]:t,a=require("../../api/analytics").event,i=function(t,e,i,s){a({event_type:t,val_lab:{custom:{type:i,fromPage:s}},val_bid:e})};require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{scene_type:{type:Number,value:0},top:{type:Number,value:0}},data:{guideUrl:e,testCommon:!0,layerFlag:!1,guideTipFlag:!1},ready:function(){var t=this;0===this.data.scene_type||1===this.data.scene_type?(this.setData({guideTipFlag:!0}),i("view","b_4kgwkt6e",0,this.data.scene_type),setTimeout((function(){t.setData({guideTipFlag:!1})}),1e4)):(this.setData({layerFlag:!0}),i("view","b_4kgwkt6e",1,this.data.scene_type))},methods:{changeSwiper:function(t){var e=t.detail,a=e.current,i=void 0===a?0:a,s=e.source,n=void 0===s?"":s;"autoplay"!==n||2!==i&&0!==i||this.setData({testCommon:!this.data.testCommon}),"touch"===n&&(!0!==this.data.testCommon||2!==i&&3!==i?!1!==this.data.testCommon||0!==i&&1!==i||this.setData({testCommon:!0}):this.setData({testCommon:!1}))},tipGuideLayer:function(){this.setData({layerFlag:!0,guideTipFlag:!1}),i("click","b_mx6s84jv",0,this.data.scene_type),i("view","b_4kgwkt6e",1,this.data.scene_type)},closeLayer:function(){this.setData({layerFlag:!1}),i("click","b_mx6s84jv",1,this.data.scene_type)},preventBubble:function(){}}});
},{isPage:false,isComponent:true,currentFile:'components/add-to-favorite-tip/index.js'});require("components/add-to-favorite-tip/index.js");;__wxRoute = "components/home-banner/home-banner";__wxRouteBegin = true;__wxAppCurrentFile__="components/home-banner/home-banner.js";define("components/home-banner/home-banner.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../@babel/runtime/helpers/Arrayincludes");var e=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../npm/babel/runtime7_2_0/helpers/extends")),r=e(require("../../npm/babel/runtime7_2_0/regenerator/index")),a=require("../../api/index"),n=require("../../api/analytics"),i=require("../../utils/warden.config"),s=e(require("../../utils/core-target-report")),u=require("../../api/getWlwcCommonParams").default,o=require("../../utils/rice-route").getRiceURL,c={"new-user-award":14,"coin-order2021_banner":13,"coin-order2021":1,"old-user-sign-in":11,"old-user-mealtime-clock-in":3,"old-user-purchase-return":15,default:0};require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{styles:{type:Object,value:{slide_time:3500,duration:800}},module_list:{type:Array,value:[],observer:function(e){var t=function(e){return e.reduce((function(t,r){var a=r.view;return a&&(a.main_title=function(e){void 0===e&&(e="");var t=e.match(/<[^>]+>[^<]+<\/[^>]+>/g);if(!t)return[{value:e,class:""}];var r=t.length?t.map((function(e){var t=(""+e).match(/>(.+)</);return t&&t.length?t[1]:""})):[];return e.split(/<\/?highlight>/).filter((function(e){return e})).map((function(e){return{value:e,class:r.includes(e)?(""+e).match(/^\d+$/)?"task-carousel-highlight":"task-carousel-highlight-txt":""}}))}(a.bannerText),a.txt=(""+a.bannerText).replace(/<\/?highlight>/g,""),a.task_id=c[r.bizCode],a.icon=a.icon||"https://p1.meituan.net/travelcube/f39b9c7528a67e6db9c79f4a9dfc1cb32969.png",a.button_text=a.buttonText||"查看",a.mode="coin-order2021"===r.bizCode&&a.taskStatus<3?"request":"nav"),(e.length>=2&&"default"!==r.bizCode||"default"===r.bizCode&&1===e.length)&&t.push(r),t}),[])}(e);this.current=t.length-1,this.setData({swiperCurrentIndex:t.length-1,formatList:t})}},page:{type:String,value:""},source:{type:Number,value:5}},data:{swiperCurrentIndex:0,formatList:[]},methods:{onCurrentChange:function(e){var t=e.detail.current;this.current=t,this.setData({swiperCurrentIndex:t})},onViewDataEntrance:function(){(0,s.default)("rice-banner-load",{type:"weixin"},.5),this.lxViewReport(this.data.formatList)},onClickEntrance:function(){var e,t;return r.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,e=this.data.formatList[this.current].view,t=this.data.formatList[this.current].bizCode,(0,s.default)("rice-banner-click",{type:"weixin",bizCode:t},.5),(0,n.click)("b_pxw66u9e",{activity_id:"mili",task_id:e.task_id||0,status:e.taskStatus||-1,button_name:e.buttonText,title:e.txt||"",entry_item_id:this.data.formatList[this.current].resourceId,tag:-1}),a.t0=this.getMode(e),a.next="request"===a.t0?8:(a.t0,11);break;case 8:return a.next=10,r.default.awrap(this.handleOrderTask(e,t));case 10:return a.abrupt("break",13);case 11:return this.navToRicePage(e),a.abrupt("break",13);case 13:return a.abrupt("return");case 16:a.prev=16,a.t1=a.catch(0),(0,i.customError)({level:"error",error_level_sub:"米粒横幅异常",content:JSON.stringify(a.t1),reportNow:!0});case 20:case"end":return a.stop()}}),null,this,[[0,16]])},getMode:function(e){return e.mode},navToRicePage:function(e){var t=e.link||"/sub_inner_pages/r2x/pages/task-home/task-home",r=o(t);wx.navigateTo({url:r||t})},lxViewReport:function(e){e&&e.length&&e.forEach((function(e){(0,s.default)("rice-banner-view",{type:"weixin",bizCode:e.bizCode},.5),(0,n.view)("b_xg1h9yaq",{activity_id:"mili",task_id:e.view.task_id||0,status:e.view.taskStatus||-1,button_name:e.view.buttonText,title:(""+e.view.bannerText).replace(/<\/?highlight>/g,"")||"",entry_item_id:e.resourceId,tag:-1})}))},requestOrderTask:function(e){var n,s,o;return r.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.taskViewId,c.prev=1,c.next=4,r.default.awrap(u());case 4:return s=c.sent,o=(0,a.takeOrderTask)((0,t.default)({},s,{mainTaskViewId:n,wxTemplateIds:[],isource:20071010,source:this.data.source,taskBizType:2007})),c.abrupt("return",o);case 9:return c.prev=9,c.t0=c.catch(1),(0,i.customError)({level:"error",tracer_type:"米粒项目异常",error_level_sub:"首页横幅领任务异常",content:JSON.stringify(c.t0),reportNow:!0}),c.abrupt("return",c.t0);case 13:case"end":return c.stop()}}),null,this,[[1,9]])},handleOrderTask:function(e,t){var a;return r.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.default.awrap(this.requestOrderTask(e));case 3:(a=n.sent)&&(wx.showToast({title:a.toast||"任务领取成功，快去下单吧",icon:"none",duration:1e3}),a.jsonString&&this.updateOrderJSON(JSON.parse(a.jsonString),t)),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(0),wx.showToast({title:n.t0.msg||"系统异常，请重试",icon:"none",duration:3e3}),n.t0;case 11:return n.abrupt("return",null);case 12:case"end":return n.stop()}}),null,this,[[0,7]])},updateOrderJSON:function(e,n){var s,o;return r.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,s=e){c.next=10;break}return c.next=5,r.default.awrap(u());case 5:return o=c.sent,c.next=8,r.default.awrap((0,a.queryorderstatus)((0,t.default)({source:this.data.source,isource:20071010},o)));case 8:(s=c.sent)&&s.extraIndexBanner&&this.triggerEvent("updateJSONData",{type:"wxapp_home_rice_grains_banner",bizCode:n,json_data:s.extraIndexBanner});case 10:return c.abrupt("return",this.triggerEvent("updateJSONData",{type:"wxapp_home_rice_grains_banner",bizCode:n,json_data:s.extraIndexBanner}));case 13:c.prev=13,c.t0=c.catch(0),(0,i.customError)({level:"error",tracer_type:"米粒项目异常",error_level_sub:"首页横幅更新横幅异常",content:JSON.stringify((0,t.default)({},c.t0,{},e,{bizCode:n})),reportNow:!0}),wx.showToast({title:c.t0.msg,icon:"none",duration:2e3});case 17:case"end":return c.stop()}}),null,this,[[0,13]])}}});
},{isPage:false,isComponent:true,currentFile:'components/home-banner/home-banner.js'});require("components/home-banner/home-banner.js");;__wxRoute = "components/navBar/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/navBar/index.js";define("components/navBar/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=require("../../utils/lx"),i=e(require("../../utils/ipx")),a=getApp();require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{styleType:{type:String,value:"black",observer:function(e){this.setData({isWhiteStyle:"white"===e})}},showWechatIcon:{type:Boolean,value:!1,observer:"showWechatIcon"},title:{type:String,value:"美团外卖",observer:function(e){this.setData({showClose:"拼单详情"===e})}},poiId:String,titleAlign:{type:String,value:"center"},background:{type:String,value:"#fff"},navStyle:{type:String,value:""},fontColor:{type:String,value:"#000"},mainfieldNav:{type:Boolean,value:!1},pageReady:{type:Boolean,value:!1,observer:"setNavShowParams"},isShowNavBubble:{type:Boolean,value:!1},isShowNavAppBubble:{type:Boolean,value:!1},showTitle:{type:Boolean,value:!0},forceShowBack:{type:Boolean,value:!1},customBack:Boolean,customHome:Boolean,teamIds:Array,grayConfig:{type:Boolean,value:!1},graystring:{type:String,value:"filter: grayscale(0.95);"}},attached:function(){this.setNavSize(),this.setNavShow(),this.bindShowBubbleEvent()},ready:function(){this.handleHideContent()},data:{navHeight:"",titleWidth:"",isIpxSeries:"",isWhiteStyle:!1,showHome:!1,showBack:!1,isShow:!0,bubbleText:"",isBubbleShown:!1,isPhone:-1!==a.globalData.system.phoneSystem.indexOf("iOS"),showClose:!1,isMtGroup:getApp().__isMtGroup__},methods:{setNavSize:function(){var e=this,t=a.globalData.system,i=t.statusBarHeight,n=t.navHeight,o=t.screenWidth,s=t.isShowNavBar;this.setData({status:i||20,navHeight:n||44,isShow:void 0===s||s,titleWidth:o-200},(function(){e.triggerEvent("onNavbarHeightConfirm",{height:(i||20)+(n||44)})}))},setNavShow:function(){var e=getCurrentPages();getApp().__isMtGroup__&&(e=getApp().getCurrentPagesOrigin());var t=1===e.length&&"pages/index/index"!==e[0].route&&"pages/mine/mine"!==e[0].route,i=this.data.forceShowBack||e.length>1;this.setData({showHome:t,showBack:i}),t&&this.triggerEvent("homeView")},setNavShowParams:function(e){var i=getCurrentPages(),a=1===i.length&&"pages/index/index"!==i[0].route&&"pages/mine/mine"!==i[0].route;if(!0===e&&a){var n=i[0].data,o="poi_1",s=0;n.isInSharing&&(o="poi_2",s=n.isCreator?1:2),n.isFromMyTreat&&(o="poi_3"),"poi_2"===o?t.lxMge.view({val_bid:"b_waimai_vbpy7cx9_mv",type:o,pindan_role:s}):t.lxMge.view({val_bid:"b_waimai_vbpy7cx9_mv",type:o})}},back:function(){var e=this,t=getCurrentPages();getApp().__isMtGroup__&&(t=getApp().getCurrentPagesOrigin());var i=function(){t.length>1&&wx.navigateBack({delta:1}),e.triggerEvent("back",{back:1})};this.data.customBack?this.triggerEvent("customBack",{nativeAction:i}):i()},home:function(){var e=this,i=getCurrentPages(),a=i[0].data,n="poi_1",o=0;a.isInSharing&&(n="poi_2",o=a.isCreator?1:2),i[0].isFromMyTreat&&(n="poi_3"),"poi_2"===n?t.lxMge.click({val_bid:"b_waimai_vbpy7cx9_mc",type:n,pindan_role:o}):t.lxMge.click({val_bid:"b_waimai_vbpy7cx9_mc",type:n});var s=function(){wx.switchTab({url:"/pages/index/index"}),e.triggerEvent("home",{})};this.data.customHome?this.triggerEvent("customHome",{nativeAction:s}):s()},close:function(){this.data.showClose&&t.lxMge.click({val_bid:"b_waimai_gxo37hrl_mc"})},mainfieldNavExpand:function(){t.lxMge.click({val_bid:"b_waimai_yiz15yx7_mc",tip_icon:this.data.isBubbleShown,is_fold:this.data.isShow?1:0}),this.data.isBubbleShown&&(this.setData({isBubbleShown:!1}),getApp().eventBus.fire("click_nav_bubble")),this.triggerEvent("mainfieldNavExpand")},bindShowBubbleEvent:function(){var e=this;this.data.mainfieldNav&&getApp().eventBus.on("show_nav_bubble",(function(t){e.setData({isBubbleShown:!0,bubbleText:t})}))},handleWechatClick:function(){var e={val_bid:"b_waimai_v34uwjjl_mc"};this.data.poiId&&(e.poi_id=this.data.poiId),t.lxMge.click(e)},showWechatIcon:function(e){if(!0===e){var i={val_bid:"b_waimai_v34uwjjl_mv"};this.data.poiId&&(i.poi_id=this.data.poiId),t.lxMge.view(i)}},handleHideContent:function(){var e=this;if(a.errorCode){var t=this.properties.teamIds;t&&t.length&&this.setData({isIpxSeries:(0,i.default)(),hideContent:t&&t.length&&a.errorCode.getSimpleCode({teamIds:t})||""})}else setTimeout((function(){e.handleHideContent()}),200)}}});
},{isPage:false,isComponent:true,currentFile:'components/navBar/index.js'});require("components/navBar/index.js");