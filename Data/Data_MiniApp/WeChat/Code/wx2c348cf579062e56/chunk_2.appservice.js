$gwx_XC_12=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_12 || [];
function gz$gwx_XC_12_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'horizonTypeShow']])
Z([[9],[[9],[[9],[[8],'scrollLeft',[[7],[3,'scrollLeft']]],[[8],'categoryFilterList',[[7],[3,'categoryFilterList']]]],[[8],'firstTypeIndex',[[7],[3,'firstTypeIndex']]]],[[8],'secondTypeIndex',[[7],[3,'secondTypeIndex']]]])
Z([3,'filter-type-horizon'])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'lite',[[7],[3,'lite']]],[[8],'scrollHeight',[[7],[3,'scrollHeight']]]],[[8],'activeSortCode',[[7],[3,'activeSortCode']]]],[[8],'activeTab',[[7],[3,'activeTab']]]],[[8],'horizonTypeShow',[[7],[3,'horizonTypeShow']]]],[[8],'sortTypeList',[[7],[3,'sortTypeList']]]],[[8],'sortTypeCode',[[7],[3,'sortTypeCode']]]],[[8],'activityFilterList',[[7],[3,'activityFilterList']]]],[[8],'selectedCodes',[[7],[3,'selectedCodes']]]],[[8],'selectCount',[[7],[3,'selectCount']]]],[[8],'selectedPriceRange',[[7],[3,'selectedPriceRange']]]],[[8],'priceRangeFilterList',[[7],[3,'priceRangeFilterList']]]],[[8],'newStyle',[[7],[3,'newStyle']]]],[[8],'isHomepage',[[7],[3,'isHomepage']]]])
Z([3,'filter-body'])
Z([[7],[3,'isHomepage']])
Z([[7],[3,'fastActivityFilterGroups']])
Z([3,'index'])
Z([1,'onQuickFilterSortItemTap'])
Z([a,[3,'filter-sort-complex '],[[2,'?:'],[[6],[[7],[3,'selectedCodes']],[[6],[[7],[3,'item']],[3,'code']]],[1,'filter-sort-complex-active'],[1,'']]])
Z([[6],[[7],[3,'item']],[3,'code']])
Z([[6],[[7],[3,'item']],[3,'bg_url']])
Z([[2,'&&'],[[2,'!'],[[6],[[7],[3,'item']],[3,'bg_url']]],[[6],[[7],[3,'item']],[3,'icon']]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'isHomepage']]],[[2,'>'],[[6],[[7],[3,'sortTypeList']],[3,'length']],[1,0]]])
Z([a,[3,'filter-header '],[[2,'?:'],[[7],[3,'lite']],[1,'no-border'],[1,'']],[3,' '],[[2,'?:'],[[7],[3,'newStyle']],[1,'filter-header-new'],[1,'']]])
Z([a,[3,'background: '],[[2,'?:'],[[2,'&&'],[[2,'!'],[[7],[3,'filterGroundSticky']]],[[7],[3,'newStyle']]],[1,'#f5f5f6'],[1,'#fff']],[3,';']])
Z([[7],[3,'sortItems']])
Z(z[7])
Z([[2,'?:'],[[2,'==='],[[7],[3,'index']],[1,0]],[1,'onMoreSortTap'],[1,'onSortItemTap']])
Z([a,[3,'filter-complex-sort '],[[2,'?:'],[[2,'&&'],[[2,'!'],[[7],[3,'lite']]],[[2,'==='],[[7],[3,'index']],[[2,'-'],[[6],[[7],[3,'sortItems']],[3,'length']],[1,1]]]],[1,'filter-br-light'],[1,'']],z[14][3],[[2,'?:'],[[2,'==='],[[7],[3,'activeSortCode']],[[6],[[7],[3,'item']],[3,'code']]],[1,'filter-complex-sort-active'],[1,'']]])
Z(z[10])
Z([[2,'==='],[[7],[3,'index']],[1,0]])
Z([[2,'&&'],[[7],[3,'lite']],[[7],[3,'quickFilterItem']]])
Z([3,'midasQuickFilterView'])
Z([3,'filter-complex-sort'])
Z([3,'quickFilter'])
Z([[2,'>'],[[6],[[7],[3,'activityFilterList']],[3,'length']],[1,0]])
Z([[2,'==='],[[7],[3,'activeTab']],[1,'filter']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_1
}
function gz$gwx_XC_12_2(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_2)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_2
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_2=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'onClick'])
Z([3,'midas-wraper'])
Z([[7],[3,'midasId']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_2);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_2
}
function gz$gwx_XC_12_3(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_3)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_3
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_3=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_3);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_3
}
function gz$gwx_XC_12_4(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_4)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_4
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_4=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'isHomepage']])
Z([3,'index-search-normal-wrapper'])
Z([[2,'==='],[[7],[3,'searchpageABtest']],[1,'A']])
Z([3,'onLxSearchClick'])
Z([[7],[3,'recommendedSearchRollKeyword']])
Z([a,[3,'/packages/search-business/search-guide/index?keyword\x3d'],[[2,'||'],[[6],[[7],[3,'recommendedSearchRollKeyword']],[3,'view_keyword']],[1,'']],[3,'\x26entranceId\x3d'],[[2,'||'],[[7],[3,'entranceId']],[1,0]],[3,'\x26cateType\x3d'],[[2,'||'],[[7],[3,'cateType']],[1,0]],[3,'\x26subCateType\x3d'],[[2,'||'],[[7],[3,'subCateType']],[1,0]],[3,'\x26isFromHome\x3dtrue']])
Z([3,'onLxSearchBtnClick'])
Z(z[4])
Z([a,z[5][1],z[5][2],z[5][3],z[5][4],z[5][5],z[5][6],z[5][7],z[5][8],z[5][9]])
Z(z[3])
Z(z[4])
Z([a,[3,'/packages/index/search/search?keyword\x3d'],z[5][2],z[5][3],z[5][4],z[5][5],z[5][6],z[5][7],z[5][8]])
Z(z[6])
Z(z[4])
Z([a,z[11][1],z[5][2],z[5][3],z[5][4],z[5][5],z[5][6],z[5][7],z[5][8]])
Z(z[3])
Z([[7],[3,'recommendedSearchKeyword']])
Z([a,[[2,'?:'],[[2,'==='],[[7],[3,'searchpageABtest']],[1,'A']],[1,'/packages/search-business/search-guide/index'],[1,'/packages/index/search/search']],[3,'?keyword\x3d'],[[2,'||'],[[6],[[7],[3,'recommendedSearchKeyword']],[3,'view_keyword']],[1,'']],z[5][3],z[5][4],z[5][5],z[5][6],z[5][7],z[5][8]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_4);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_4
}
function gz$gwx_XC_12_5(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_5)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_5
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_5=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'?:'],[[7],[3,'stopTouchMove']],[1,'onTouchMove'],[1,'']])
Z([3,'sticky-component-wrapper'])
Z([[2,'?:'],[[2,'>'],[[7],[3,'wrapperHeight']],[1,0]],[[2,'+'],[[2,'+'],[1,'height: '],[[7],[3,'wrapperHeight']]],[1,'px;']],[1,'']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_5);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_5
}
function gz$gwx_XC_12_6(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_6)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_6
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_6=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'btns'])
Z([[2,'&&'],[[7],[3,'error']],[[7],[3,'errorData']]])
Z([[2,'&&'],[[7],[3,'modal']],[[7],[3,'modalData']]])
Z([1,true])
Z([3,'geo-modal'])
Z([3,'geo'])
Z([[6],[[7],[3,'modalData']],[3,'title']])
Z([[9],[[8],'btns',[[6],[[7],[3,'modalData']],[3,'btns']]],[[8],'status',[[6],[[7],[3,'modalData']],[3,'status']]]])
Z(z[0])
Z([[2,'&&'],[[7],[3,'dialog']],[[7],[3,'dialogData']]])
Z(z[3])
Z([3,'geo-modal geo-dialog'])
Z(z[5])
Z([[6],[[7],[3,'dialogData']],[3,'title']])
Z([[9],[[8],'btns',[[6],[[7],[3,'dialogData']],[3,'btns']]],[[8],'status',[[6],[[7],[3,'dialogData']],[3,'status']]]])
Z(z[0])
Z([[2,'&&'],[[7],[3,'loading']],[[2,'!'],[[7],[3,'error']]]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_6);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_6
}
function gz$gwx_XC_12_7(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_7)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_7
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_7=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'onClick'])
Z([3,'navigator-class'])
Z([3,'onTab'])
Z([3,'view-class'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_7);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_7
}
function gz$gwx_XC_12_8(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_8)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_8
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_8=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showNotification']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_8);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_8
}
function gz$gwx_XC_12_9(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_9)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_9
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_9=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showAirDropLayer']])
Z([3,'bgClick'])
Z([3,'move'])
Z([a,[3,'airdrop-mask '],[[7],[3,'couponContainerClass']],[3,'-mask '],[[2,'?:'],[[7],[3,'showHideAnimate']],[1,'airdrop-animate-hide'],[1,'']]])
Z([a,[3,'airdrop-container '],[[2,'||'],[[7],[3,'couponContainerClass']],[1,'airdrop-animate-show']]])
Z([a,[3,'padding-top: '],[[7],[3,'paddingTop']],[3,'px; padding-bottom: '],[[7],[3,'paddingBottom']],[3,'rpx; height: calc(100vh - '],[[7],[3,'paddingTop']],[3,'px - '],[[7],[3,'paddingBottom']],[3,'rpx);']])
Z([[7],[3,'showTianjiangCoupon']])
Z([[7],[3,'airdropCouponData']])
Z([3,'onClickAirdropLogin'])
Z([3,'showCloseAnimation'])
Z([[7],[3,'containerHeight']])
Z([[7],[3,'env']])
Z([3,'coupon'])
Z([[7],[3,'lch']])
Z([[7],[3,'userId']])
Z([[7],[3,'uuid']])
Z([[7],[3,'showTianjiangLayer']])
Z([[7],[3,'airdropLayerData']])
Z(z[9])
Z(z[10])
Z([3,'layer'])
Z([[7],[3,'airdropPopupData']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_9);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_9
}
function gz$gwx_XC_12_10(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_10)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_10
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_10=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[2,'||'],[[7],[3,'showAirDropLayer']],[[7],[3,'useSuperMach']]],[[7],[3,'useNestMach']]])
Z([3,'closeLayer'])
Z([3,'airdrop-coupon-container'])
Z([3,'1'])
Z([[7],[3,'needLogin']])
Z([[2,'||'],[[2,'||'],[[2,'&&'],[[7],[3,'hasCoupon']],[[2,'!'],[[7],[3,'needLogin']]]],[[7],[3,'useSuperMach']]],[[7],[3,'useNestMach']]])
Z(z[1])
Z([3,'airdrop-layer'])
Z([3,'2'])
Z([[2,'?:'],[[7],[3,'useNestMach']],[1,'width:100%;'],[[2,'?:'],[[7],[3,'useSuperMach']],[1,'width:100%;margin-top: -120rpx;'],[1,'']]])
Z([[7],[3,'useSuperMach']])
Z([[6],[[6],[[7],[3,'templateData']],[1,0]],[3,'templateId']])
Z(z[1])
Z(z[1])
Z([3,'c_m84bv26'])
Z([[8],'list',[[4],[[5],[[6],[[7],[3,'templateData']],[1,0]]]]])
Z(z[8])
Z([[7],[3,'isTestEnv']])
Z([[7],[3,'moduleIdStr']])
Z(z[11])
Z([[7],[3,'useNestMach']])
Z([[7],[3,'templateId']])
Z(z[1])
Z(z[1])
Z(z[14])
Z([[8],'list',[[7],[3,'templateData']]])
Z(z[8])
Z(z[17])
Z(z[18])
Z(z[21])
Z([3,'item'])
Z([[7],[3,'coupons']])
Z([3,'index'])
Z([[2,'<'],[[7],[3,'index']],[1,3]])
Z([3,'onClickUseCoupon'])
Z([[7],[3,'index']])
Z([[6],[[7],[3,'item']],[3,'couponDirectLink']])
Z([[6],[[7],[3,'item']],[3,'useMach']])
Z([[2,'!'],[[6],[[7],[3,'item']],[3,'templateFiltered']]])
Z([[6],[[7],[3,'item']],[3,'templateId']])
Z(z[1])
Z([3,'onMachError'])
Z(z[14])
Z([3,'inner-mach-template'])
Z([[6],[[7],[3,'item']],[3,'feUseData']])
Z(z[35])
Z(z[8])
Z(z[17])
Z(z[18])
Z(z[39])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponSource']],[1,'ALLOWANCE']])
Z([1,15])
Z([a,[3,'api_pos\x3dP0_'],z[35],[3,'\x26event_id\x3db_am38wg1l']])
Z([[7],[3,'env']])
Z([[7],[3,'maiDianExtraIno']])
Z([[6],[[6],[[7],[3,'item']],[3,'maiDianInfo']],[3,'adPoiChargeInfo']])
Z([a,z[52][1],z[35],[3,'\x26event_id\x3db_8cv3w9au']])
Z([1,true])
Z([3,'meituan_waimai'])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponSource']],[1,'POI']],[[2,'!=='],[[6],[[6],[[7],[3,'item']],[3,'skuInfoList']],[3,'length']],[1,0]]])
Z([3,'coupon-item'])
Z([3,'money-area'])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponType']],[1,'MONEY']])
Z([[6],[[7],[3,'item']],[3,'pointMoney']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponType']],[1,'DISCOUNT']])
Z(z[63])
Z([[6],[[7],[3,'item']],[3,'orderAmountLimitDoc']])
Z([[6],[[7],[3,'item']],[3,'mutexType']])
Z([3,'coupon-type-tip'])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mutexType']],[1,1]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mutexType']],[1,2]])
Z([3,'left-content content-poi'])
Z([1,2])
Z([a,z[52][1],z[35],z[52][3]])
Z(z[53])
Z(z[54])
Z(z[55])
Z([a,z[52][1],z[35],z[56][3]])
Z(z[57])
Z(z[58])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponSource']],[1,'POI']],[[6],[[7],[3,'item']],[3,'brandCouponLogoUrl']]])
Z([[6],[[7],[3,'item']],[3,'skuInfoList']])
Z([3,'itemIndex'])
Z([3,'foodItem'])
Z(z[81])
Z(z[82])
Z([3,'gotoFood'])
Z(z[35])
Z([[7],[3,'foodItem']])
Z([[7],[3,'itemIndex']])
Z([[6],[[7],[3,'foodItem']],[3,'spuRedirectUrl']])
Z([[2,'<'],[[7],[3,'itemIndex']],[1,2]])
Z([a,z[52][1],z[35],[3,'\x26event_id\x3db_0w3urz8k\x26spu_id\x3d'],[[6],[[7],[3,'foodItem']],[3,'spuId']],[3,'\x26index\x3d'],z[89]])
Z(z[53])
Z(z[54])
Z(z[55])
Z([a,z[52][1],z[35],[3,'\x26event_id\x3db_3or27oso\x26spu_id\x3d'],z[92][4],z[92][5],z[89]])
Z(z[58])
Z([[2,'&&'],[[6],[[7],[3,'item']],[3,'advertType']],[[2,'==='],[[7],[3,'itemIndex']],[1,0]]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'couponStyleType']],[1,1]])
Z([3,'coupon-item-bottom'])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'couponType']],[1,2]],[[2,'==='],[[6],[[7],[3,'item']],[3,'couponAmountOrDiscount']],[1,0]]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'couponType']],[1,1]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'wmActCouponTemplateId']],[1,71]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'orderAmountLimit']],[1,0]])
Z(z[63])
Z([3,'coupon-item-discount'])
Z([[6],[[7],[3,'item']],[3,'pointLimit']])
Z(z[63])
Z(z[103])
Z(z[63])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'orderAmountLimit']],[1,0]])
Z(z[63])
Z(z[106])
Z(z[107])
Z(z[63])
Z(z[60])
Z(z[61])
Z(z[62])
Z(z[63])
Z(z[64])
Z(z[63])
Z(z[66])
Z(z[67])
Z(z[68])
Z(z[69])
Z(z[70])
Z([[2,'!=='],[[6],[[7],[3,'item']],[3,'wmCouponSource']],[1,'POI']])
Z([3,'item-right'])
Z(z[80])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'wmCouponLimitShippingType']],[1,'MEITUAN_SHIPPING']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_10);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_10
}
function gz$gwx_XC_12_11(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_11)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_11
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_11=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showAirdropLayer']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_11);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_11
}
function gz$gwx_XC_12_12(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_12)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_12
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_12=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showPopup']])
Z([3,'touchEnd'])
Z([3,'touchStart'])
Z([3,'touchMove'])
Z([3,'air-popup-container'])
Z([a,[3,'transform: translate3d(0, '],[[2,'?:'],[[7],[3,'translateDown']],[[7],[3,'top']],[1,0]],[3,'rpx, 0);'],[[2,'?:'],[[7],[3,'isGray']],[[7],[3,'grayString']],[1,'']],[3,';background: '],[[2,'||'],[[7],[3,'bjColor']],[1,'#FAFAFA']],[3,';padding: '],[[7],[3,'paddingTop']],[3,'rpx 0 0 0;top: -'],[[7],[3,'top']],[3,'rpx']])
Z([3,'item'])
Z([[7],[3,'machData']])
Z([3,'index'])
Z([[2,'<'],[[7],[3,'index']],[1,2]])
Z([3,'air-popup-content'])
Z([[7],[3,'index']])
Z([[6],[[7],[3,'item']],[3,'machTemplateId']])
Z([3,'closePopup'])
Z([3,'onMachError'])
Z([3,'jumpUrl'])
Z([3,'c_m84bv26'])
Z([3,'inner-mach-template'])
Z([[7],[3,'item']])
Z(z[11])
Z([[7],[3,'isTestEnv']])
Z(z[12])
Z([[6],[[7],[3,'item']],[3,'templateId']])
Z(z[13])
Z(z[14])
Z(z[16])
Z(z[17])
Z([[6],[[7],[3,'item']],[3,'feUseData']])
Z(z[11])
Z(z[20])
Z([[7],[3,'moduleIdStr']])
Z(z[22])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_12);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_12
}
function gz$gwx_XC_12_13(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_13)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_13
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_13=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'show'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_13);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_13
}
function gz$gwx_XC_12_14(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_14)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_14
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_14=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'&&'],[[7],[3,'picUrl']],[[2,'!=='],[[7],[3,'picUrl']],[1,'']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_14);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_14
}
function gz$gwx_XC_12_15(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_15)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_15
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_15=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showBack']])
Z([[7],[3,'showLogo']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_15);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_15
}
function gz$gwx_XC_12_16(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_16)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_16
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_16=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_16);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_16
}
function gz$gwx_XC_12_17(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_17)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_17
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_17=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_17);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_17
}
function gz$gwx_XC_12_18(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_18)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_18
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_18=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_18);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_18
}
function gz$gwx_XC_12_19(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_19)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_19
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_19=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'isShowWlwc']])
Z([[7],[3,'scrollAnimation']])
Z([3,'onClickWlwcEntrance'])
Z([a,[3,'container '],[[2,'?:'],[[7],[3,'isIpx']],[1,'container-iphoneX'],[1,'']]])
Z([[2,'?:'],[[7],[3,'gray']],[[7],[3,'grayString']],[1,'']])
Z([3,'onViewWlwcEntrance'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_19);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_19
}
function gz$gwx_XC_12_20(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_20)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_20
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_20=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'?:'],[[2,'==='],[[7],[3,'mode']],[1,'right']],[1,'img-container-right'],[1,'img-container']])
Z([[7],[3,'style']])
Z([[2,'!'],[[7],[3,'isRepeat']]])
Z([[7],[3,'isRepeat']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_20);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_20
}
function gz$gwx_XC_12_21(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_21)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_21
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_21=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_21);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_21
}
function gz$gwx_XC_12_22(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_22)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_22
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_22=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'&&'],[[7],[3,'locType']],[[7],[3,'locName']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_22);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_22
}
function gz$gwx_XC_12_23(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_23)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_23
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_23=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'touchend'])
Z([3,'touchmove'])
Z([3,'touchstart'])
Z([3,'swiper-container swiper-page'])
Z([[7],[3,'style']])
Z([[7],[3,'child']])
Z([3,'index'])
Z([[7],[3,'item']])
Z([3,'currentIndexChange'])
Z([3,'handleEvent'])
Z(z[7])
Z([[7],[3,'viewId']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_23);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_23
}
function gz$gwx_XC_12_24(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_12_24)return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_24
__WXML_GLOBAL__.ops_cached.$gwx_XC_12_24=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'page-root'])
Z([[2,'&&'],[[7],[3,'showPage']],[[2,'!'],[[7],[3,'isShowFirstInWeapp']]]])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'grayinfo',[[7],[3,'grayinfo']]],[[8],'navigationBarProtocol',[[7],[3,'navigationBarProtocol']]]],[[8],'moduleHeaderData',[[7],[3,'moduleHeaderData']]]],[[8],'moduleHeaderContext',[[7],[3,'moduleHeaderContext']]]],[[8],'pageCustomContext',[[7],[3,'pageCustomContext']]]],[[8],'pageGlobalContext',[[7],[3,'pageGlobalContext']]]],[[8],'locState',[[7],[3,'locState']]]],[[8],'locName',[[7],[3,'locName']]]],[[8],'locType',[[7],[3,'locType']]]],[[8],'locTempName',[[7],[3,'locTempName']]]],[[8],'defaultLocName',[[7],[3,'defaultLocName']]]],[[8],'isMT',[[7],[3,'isMT']]]],[[8],'pageLength',[[7],[3,'pageLength']]]])
Z([[6],[[7],[3,'navigationBarProtocol']],[3,'module_id']])
Z([3,'__fstBindCaptureTouchStart'])
Z([a,[3,'page-container fst-root '],[[2,'?:'],[[6],[[6],[[6],[[6],[[7],[3,'moduleHeaderContext']],[3,'home_rcmd_style']],[3,'home_atmosphere']],[3,'banner_bottom']],[3,'isShow']],[1,'page-container-banner-bottom'],[1,'']]])
Z([3,'idx'])
Z([[7],[3,'regionListProtocol']])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'grayinfo',[[7],[3,'grayinfo']]],[[8],'idx',[[7],[3,'idx']]]],[[8],'item',[[7],[3,'item']]]],[[8],'regionContentData',[[6],[[7],[3,'regionListContentData']],[[6],[[7],[3,'item']],[3,'module_id']]]]],[[8],'regionListContext',[[7],[3,'regionListContext']]]],[[8],'pageCustomContext',[[7],[3,'pageCustomContext']]]],[[8],'pageGlobalContext',[[7],[3,'pageGlobalContext']]]],[[8],'showContentPersonalizedTips',[[7],[3,'showContentPersonalizedTips']]]],[[8],'personalizedTipsText',[[7],[3,'personalizedTipsText']]]])
Z([[6],[[7],[3,'item']],[3,'module_id']])
Z([[7],[3,'popupListProtocol']])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'grayinfo',[[7],[3,'grayinfo']]],[[8],'indexContainer',[[7],[3,'indexContainer']]]],[[8],'NEWUSER_ENTRY',[[7],[3,'NEWUSER_ENTRY']]]],[[8],'PROFIT_TASKS',[[7],[3,'PROFIT_TASKS']]]],[[8],'ifOnPullDownRefresh',[[7],[3,'ifOnPullDownRefresh']]]],[[8],'moduleHeaderContext',[[7],[3,'moduleHeaderContext']]]],[[8],'userId',[[7],[3,'userId']]]],[[8],'uuid',[[7],[3,'uuid']]]],[[8],'promoENV',[[7],[3,'promoENV']]]],[[8],'airdropTipShow',[[7],[3,'airdropTipShow']]]],[[8],'airdropTipProps',[[7],[3,'airdropTipProps']]]],[[8],'touchmatrixCanIUse',[[7],[3,'touchmatrixCanIUse']]]],[[8],'geoModal',[[7],[3,'geoModal']]]],[[8],'geoDialog',[[7],[3,'geoDialog']]]],[[8],'geoLoading',[[7],[3,'geoLoading']]]],[[8],'geoError',[[7],[3,'geoError']]]],[[8],'geoConfig',[[7],[3,'geoConfig']]]])
Z(z[9])
Z([3,'notification'])
Z([[7],[3,'floatingListProtocol']])
Z([[9],[[9],[[9],[[9],[[9],[[8],'grayinfo',[[7],[3,'grayinfo']]],[[8],'moduleHeaderContext',[[7],[3,'moduleHeaderContext']]]],[[8],'showAddToFavoriteTip',[[7],[3,'showAddToFavoriteTip']]]],[[8],'scene_type',[[7],[3,'scene_type']]]],[[8],'touchmatrixCanIUse',[[7],[3,'touchmatrixCanIUse']]]],[[8],'miliGuideStatus',[[7],[3,'miliGuideStatus']]]])
Z(z[9])
Z([3,'newuser-coupon'])
Z([[6],[[7],[3,'indexContainer']],[3,'showNewUserCoupon']])
Z([3,'scrollToNearPoi'])
Z(z[17])
Z([[6],[[6],[[6],[[7],[3,'indexContainer']],[[7],[3,'NEWUSER_ENTRY']]],[3,'data']],[3,'newUserCoupon']])
Z([[6],[[7],[3,'indexContainer']],[3,'showNewUserGrowth']])
Z([[6],[[6],[[6],[[7],[3,'indexContainer']],[[7],[3,'NEWUSER_ENTRY']]],[3,'data']],[3,'newUserGrowth']])
Z([3,'airdrop'])
Z([3,'airdropLogin'])
Z([3,'showAirdropTips'])
Z([3,'showtoast'])
Z([[7],[3,'customTabBar']])
Z([[7],[3,'promoENV']])
Z(z[24])
Z([[7],[3,'ifOnPullDownRefresh']])
Z([[7],[3,'lch']])
Z([[6],[[7],[3,'customTabBar']],[3,'height']])
Z([[6],[[6],[[7],[3,'moduleHeaderContext']],[3,'customTitleBar']],[3,'height']])
Z([[7],[3,'userId']])
Z([[7],[3,'uuid']])
Z([[7],[3,'airdropTipShow']])
Z([[7],[3,'airdropTipProps']])
Z([3,'hideAirdropTips'])
Z([3,'airdroptips'])
Z(z[37])
Z([3,'geo-loading'])
Z([[2,'||'],[[2,'||'],[[7],[3,'geoModal']],[[7],[3,'geoDialog']]],[[7],[3,'geoLoading']]])
Z([3,'geoClose'])
Z([3,'geoConfirm'])
Z([3,'navLocSelect'])
Z([3,'geoOpenSettingCb'])
Z([3,'geoOpenSettingTap'])
Z([3,'geoPermission'])
Z([3,'geoReload'])
Z([[7],[3,'geoConfig']])
Z([[7],[3,'geoDialog']])
Z([[7],[3,'geoError']])
Z([[7],[3,'geoLoading']])
Z([1,true])
Z([[7],[3,'geoModal']])
Z(z[55])
Z([3,'add-to-favorite-tip'])
Z([[7],[3,'showAddToFavoriteTip']])
Z([[7],[3,'scene_type']])
Z(z[34])
Z([3,'wlwcEntrance'])
Z([3,'wlwc-bubble'])
Z([[2,'!'],[[7],[3,'miliGuideStatus']]])
Z([[6],[[6],[[7],[3,'grayinfo']],[3,'details']],[3,'stickyFilter']])
Z([[6],[[7],[3,'grayinfo']],[3,'graystring']])
Z([3,'gotoLocation'])
Z([[2,'&&'],[[2,'!'],[[7],[3,'showPage']]],[[7],[3,'isShowFirstInWeapp']]])
Z([3,'z-index: 99999999;'])
Z([[2,'&&'],[[7],[3,'templateId']],[[7],[3,'templateData']]])
Z(z[70])
Z([3,'onMachError'])
Z([3,'c_m84bv26'])
Z([[7],[3,'templateData']])
Z([[7],[3,'templateId']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_12_24);return __WXML_GLOBAL__.ops_cached.$gwx_XC_12_24
}
__WXML_GLOBAL__.ops_set.$gwx_XC_12=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_12=true;
var x=['./components/filter/filter.wxml','./filter-body.wxml','./filter-type-horizon.wxml','./components/midas/index.wxml','./components/wm-image/index.wxml','./components/wm-index-search/index.wxml','./components/wm-sticky/index.wxml','./npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml','./npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.wxml','./pages/index/components/airdrop-after-notification/airdrop-after-notification.wxml','./pages/index/components/airdrop-container/airdrop-container.wxml','./pages/index/components/airdrop-coupon/airdrop-coupon.wxml','./pages/index/components/airdrop-layer/airdrop-layer.wxml','./pages/index/components/airdrop-popup/airdrop-popup.wxml','./pages/index/components/airdrop-tips/airdrop-tips.wxml','./pages/index/components/home-header-background/index.wxml','./pages/index/components/mt-back/mt-back.wxml','./pages/index/components/newuser-coupon/index.wxml','./pages/index/components/newuser-growth/index.wxml','./pages/index/components/privacy-dialog/index.wxml','./pages/index/components/wlwcEntrance/index.wxml','./pages/index/components/wm-gif-image/index.wxml','./pages/index/components/wm-item-video/index.wxml','./pages/index/components/wm-loc/index.wxml','./pages/index/components/wm-tier-slide/index.wxml','./pages/index/index.wxml','./templates/poi-list-occupied/poi-list-occupied.wxml','../../components/reset-filter/reset-filter.wxml','../../components/load-more/load-more.wxml','../base.wxml','./templates/wm_mmp_home_navigation_bar/index.wxml','./templates/operation_module_sole_region/index.wxml','./templates/module_list_sole_region/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_12_1()
var x3J=e_[x[0]].i
_ai(x3J,x[1],e_,x[0],1,1)
_ai(x3J,x[2],e_,x[0],1,36)
var o4J=_v()
_(r,o4J)
if(_oz(z,0,e,s,gg)){o4J.wxVkey=1
var h7J=_v()
_(o4J,h7J)
var o8J=_oz(z,2,e,s,gg)
var c9J=_gd(x[0],o8J,e_,d_)
if(c9J){
var o0J=_1z(z,1,e,s,gg) || {}
var cur_globalf=gg.f
h7J.wxXCkey=3
c9J(o0J,o0J,h7J,gg)
gg.f=cur_globalf
}
else _w(o8J,x[0],1,119)
}
var lAK=_v()
_(r,lAK)
var aBK=_oz(z,4,e,s,gg)
var tCK=_gd(x[0],aBK,e_,d_)
if(tCK){
var eDK=_1z(z,3,e,s,gg) || {}
var cur_globalf=gg.f
lAK.wxXCkey=3
tCK(eDK,eDK,lAK,gg)
gg.f=cur_globalf
}
else _w(aBK,x[0],1,240)
var f5J=_v()
_(r,f5J)
if(_oz(z,5,e,s,gg)){f5J.wxVkey=1
var bEK=_v()
_(f5J,bEK)
var oFK=function(oHK,xGK,fIK,gg){
var hKK=_mz(z,'view',['bindtap',8,'class',1,'data-code',2],[],oHK,xGK,gg)
var oLK=_v()
_(hKK,oLK)
if(_oz(z,11,oHK,xGK,gg)){oLK.wxVkey=1
}
var cMK=_v()
_(hKK,cMK)
if(_oz(z,12,oHK,xGK,gg)){cMK.wxVkey=1
}
oLK.wxXCkey=1
cMK.wxXCkey=1
_(fIK,hKK)
return fIK
}
bEK.wxXCkey=2
_2z(z,6,oFK,e,s,gg,bEK,'item','index','index')
}
var c6J=_v()
_(r,c6J)
if(_oz(z,13,e,s,gg)){c6J.wxVkey=1
var oNK=_mz(z,'view',['class',14,'style',1],[],e,s,gg)
var eRK=_v()
_(oNK,eRK)
var bSK=function(xUK,oTK,oVK,gg){
var cXK=_mz(z,'view',['bindtap',18,'class',1,'data-code',2],[],xUK,oTK,gg)
var hYK=_v()
_(cXK,hYK)
if(_oz(z,21,xUK,oTK,gg)){hYK.wxVkey=1
}
hYK.wxXCkey=1
_(oVK,cXK)
return oVK
}
eRK.wxXCkey=2
_2z(z,16,bSK,e,s,gg,eRK,'item','index','index')
var lOK=_v()
_(oNK,lOK)
if(_oz(z,22,e,s,gg)){lOK.wxVkey=1
var oZK=_mz(z,'midas-simple',['bind:impressionend',23,'class',1,'groupName',2],[],e,s,gg)
_(lOK,oZK)
}
var aPK=_v()
_(oNK,aPK)
if(_oz(z,26,e,s,gg)){aPK.wxVkey=1
}
var tQK=_v()
_(oNK,tQK)
if(_oz(z,27,e,s,gg)){tQK.wxVkey=1
}
lOK.wxXCkey=1
lOK.wxXCkey=3
aPK.wxXCkey=1
tQK.wxXCkey=1
_(c6J,oNK)
}
o4J.wxXCkey=1
f5J.wxXCkey=1
c6J.wxXCkey=1
c6J.wxXCkey=3
x3J.pop()
x3J.pop()
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[x[1],x[2]],ic:[]}
d_[x[3]]={}
var m1=function(e,s,r,gg){
var z=gz$gwx_XC_12_2()
var o2K=_mz(z,'view',['bindtap',0,'class',1,'id',1],[],e,s,gg)
var l3K=_n('slot')
_(o2K,l3K)
_(r,o2K)
return r
}
e_[x[3]]={f:m1,j:[],i:[],ti:[],ic:[]}
d_[x[4]]={}
var m2=function(e,s,r,gg){
var z=gz$gwx_XC_12_3()
return r
}
e_[x[4]]={f:m2,j:[],i:[],ti:[],ic:[]}
d_[x[5]]={}
var m3=function(e,s,r,gg){
var z=gz$gwx_XC_12_4()
var e6K=_v()
_(r,e6K)
if(_oz(z,0,e,s,gg)){e6K.wxVkey=1
var b7K=_n('view')
_rz(z,b7K,'class',1,e,s,gg)
var o8K=_v()
_(b7K,o8K)
if(_oz(z,2,e,s,gg)){o8K.wxVkey=1
var x9K=_mz(z,'wm-navigator',['bind:navtap',3,'data-recommend',1,'url',2],[],e,s,gg)
_(o8K,x9K)
var o0K=_mz(z,'wm-navigator',['bind:navtap',6,'data-recommend',1,'url',2],[],e,s,gg)
_(o8K,o0K)
}
else{o8K.wxVkey=2
var fAL=_mz(z,'wm-navigator',['bind:navtap',9,'data-recommend',1,'url',2],[],e,s,gg)
_(o8K,fAL)
var cBL=_mz(z,'wm-navigator',['bind:navtap',12,'data-recommend',1,'url',2],[],e,s,gg)
_(o8K,cBL)
}
o8K.wxXCkey=1
o8K.wxXCkey=3
o8K.wxXCkey=3
_(e6K,b7K)
}
else{e6K.wxVkey=2
var hCL=_mz(z,'wm-navigator',['bind:navtap',15,'data-recommend',1,'url',2],[],e,s,gg)
_(e6K,hCL)
}
e6K.wxXCkey=1
e6K.wxXCkey=3
e6K.wxXCkey=3
return r
}
e_[x[5]]={f:m3,j:[],i:[],ti:[],ic:[]}
d_[x[6]]={}
var m4=function(e,s,r,gg){
var z=gz$gwx_XC_12_5()
var cEL=_mz(z,'view',['catchtouchmove',0,'class',1,'style',1],[],e,s,gg)
var oFL=_n('slot')
_(cEL,oFL)
_(r,cEL)
return r
}
e_[x[6]]={f:m4,j:[],i:[],ti:[],ic:[]}
d_[x[7]]={}
d_[x[7]]["btns"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_6()
var b=x[7]+':btns'
r.wxVkey=b
gg.f=$gdc(f_["./npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml"],"",1)
if(p_[b]){_wl(b,x[7]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m5=function(e,s,r,gg){
var z=gz$gwx_XC_12_6()
var aHL=_v()
_(r,aHL)
if(_oz(z,1,e,s,gg)){aHL.wxVkey=1
}
var tIL=_v()
_(r,tIL)
if(_oz(z,2,e,s,gg)){tIL.wxVkey=1
var oLL=_mz(z,'view',['catchtouchmove',3,'class',1],[],e,s,gg)
var xML=_n('view')
_rz(z,xML,'class',5,e,s,gg)
var oNL=_v()
_(xML,oNL)
if(_oz(z,6,e,s,gg)){oNL.wxVkey=1
}
var fOL=_v()
_(xML,fOL)
var cPL=_oz(z,8,e,s,gg)
var hQL=_gd(x[7],cPL,e_,d_)
if(hQL){
var oRL=_1z(z,7,e,s,gg) || {}
var cur_globalf=gg.f
fOL.wxXCkey=3
hQL(oRL,oRL,fOL,gg)
gg.f=cur_globalf
}
else _w(cPL,x[7],3,923)
oNL.wxXCkey=1
_(oLL,xML)
_(tIL,oLL)
}
var eJL=_v()
_(r,eJL)
if(_oz(z,9,e,s,gg)){eJL.wxVkey=1
var cSL=_mz(z,'view',['catchtouchmove',10,'class',1],[],e,s,gg)
var oTL=_n('view')
_rz(z,oTL,'class',12,e,s,gg)
var lUL=_v()
_(oTL,lUL)
if(_oz(z,13,e,s,gg)){lUL.wxVkey=1
}
var aVL=_v()
_(oTL,aVL)
var tWL=_oz(z,15,e,s,gg)
var eXL=_gd(x[7],tWL,e_,d_)
if(eXL){
var bYL=_1z(z,14,e,s,gg) || {}
var cur_globalf=gg.f
aVL.wxXCkey=3
eXL(bYL,bYL,aVL,gg)
gg.f=cur_globalf
}
else _w(tWL,x[7],4,471)
lUL.wxXCkey=1
_(cSL,oTL)
_(eJL,cSL)
}
var bKL=_v()
_(r,bKL)
if(_oz(z,16,e,s,gg)){bKL.wxVkey=1
}
aHL.wxXCkey=1
tIL.wxXCkey=1
eJL.wxXCkey=1
bKL.wxXCkey=1
return r
}
e_[x[7]]={f:m5,j:[],i:[],ti:[],ic:[]}
d_[x[8]]={}
var m6=function(e,s,r,gg){
var z=gz$gwx_XC_12_7()
var x1L=_mz(z,'view',['bindtap',0,'class',1],[],e,s,gg)
var o2L=_mz(z,'view',['bindtap',2,'class',1],[],e,s,gg)
var f3L=_n('slot')
_(o2L,f3L)
_(x1L,o2L)
_(r,x1L)
return r
}
e_[x[8]]={f:m6,j:[],i:[],ti:[],ic:[]}
d_[x[9]]={}
var m7=function(e,s,r,gg){
var z=gz$gwx_XC_12_8()
var h5L=_v()
_(r,h5L)
if(_oz(z,0,e,s,gg)){h5L.wxVkey=1
}
h5L.wxXCkey=1
return r
}
e_[x[9]]={f:m7,j:[],i:[],ti:[],ic:[]}
d_[x[10]]={}
var m8=function(e,s,r,gg){
var z=gz$gwx_XC_12_9()
var c7L=_v()
_(r,c7L)
if(_oz(z,0,e,s,gg)){c7L.wxVkey=1
var o8L=_mz(z,'view',['bind:tap',1,'catch:touchmove',1,'class',2],[],e,s,gg)
var l9L=_mz(z,'view',['class',4,'style',1],[],e,s,gg)
var a0L=_v()
_(l9L,a0L)
if(_oz(z,6,e,s,gg)){a0L.wxVkey=1
var eBM=_mz(z,'airdrop-coupon',['airdropCouponData',7,'bind:airdropLogin',1,'bind:closeLayer',2,'containerHeight',3,'env',4,'id',5,'lch',6,'userId',7,'uuid',8],[],e,s,gg)
_(a0L,eBM)
}
var tAM=_v()
_(l9L,tAM)
if(_oz(z,16,e,s,gg)){tAM.wxVkey=1
var bCM=_mz(z,'airdrop-layer',['airdropLayerData',17,'bind:closeLayer',1,'containerHeight',2,'id',3],[],e,s,gg)
_(tAM,bCM)
}
a0L.wxXCkey=1
a0L.wxXCkey=3
tAM.wxXCkey=1
tAM.wxXCkey=3
_(o8L,l9L)
_(c7L,o8L)
}
var oDM=_n('airdrop-popup')
_rz(z,oDM,'airdropPopupData',21,e,s,gg)
var xEM=_n('airdrop-popup')
_(oDM,xEM)
_(r,oDM)
c7L.wxXCkey=1
c7L.wxXCkey=3
return r
}
e_[x[10]]={f:m8,j:[],i:[],ti:[],ic:[]}
d_[x[11]]={}
var m9=function(e,s,r,gg){
var z=gz$gwx_XC_12_10()
var fGM=_v()
_(r,fGM)
if(_oz(z,0,e,s,gg)){fGM.wxVkey=1
var cHM=_mz(z,'view',['catchtap',1,'class',1,'data-mask',2],[],e,s,gg)
var hIM=_v()
_(cHM,hIM)
if(_oz(z,4,e,s,gg)){hIM.wxVkey=1
}
var oJM=_v()
_(cHM,oJM)
if(_oz(z,5,e,s,gg)){oJM.wxVkey=1
var cKM=_mz(z,'view',['catchtap',6,'class',1,'data-mask',2,'style',3],[],e,s,gg)
var oLM=_v()
_(cKM,oLM)
if(_oz(z,10,e,s,gg)){oLM.wxVkey=1
var lMM=_v()
_(oLM,lMM)
if(_oz(z,11,e,s,gg)){lMM.wxVkey=1
var aNM=_mz(z,'ad-mach-container',['catch:tap',-1,'bindclose',12,'binderror',1,'cid',2,'data',3,'data-mask',4,'debug',5,'moduleId',6,'templateId',7],[],e,s,gg)
_(lMM,aNM)
}
lMM.wxXCkey=1
lMM.wxXCkey=3
}
else if(_oz(z,20,e,s,gg)){oLM.wxVkey=2
var tOM=_v()
_(oLM,tOM)
if(_oz(z,21,e,s,gg)){tOM.wxVkey=1
var ePM=_mz(z,'ad-mach-container',['catch:tap',-1,'bindclose',22,'binderror',1,'cid',2,'data',3,'data-mask',4,'debug',5,'moduleId',6,'templateId',7],[],e,s,gg)
_(tOM,ePM)
}
tOM.wxXCkey=1
tOM.wxXCkey=3
}
else{oLM.wxVkey=3
var bQM=_v()
_(oLM,bQM)
var oRM=function(oTM,xSM,fUM,gg){
var hWM=_v()
_(fUM,hWM)
if(_oz(z,33,oTM,xSM,gg)){hWM.wxVkey=1
var oXM=_mz(z,'view',['bindtap',34,'data-index',1,'data-url',2],[],oTM,xSM,gg)
var cYM=_v()
_(oXM,cYM)
if(_oz(z,37,oTM,xSM,gg)){cYM.wxVkey=1
var oZM=_v()
_(cYM,oZM)
if(_oz(z,38,oTM,xSM,gg)){oZM.wxVkey=1
var l1M=_v()
_(oZM,l1M)
if(_oz(z,39,oTM,xSM,gg)){l1M.wxVkey=1
var a2M=_mz(z,'ad-mach-container',['bindclose',40,'binderror',1,'cid',2,'class',3,'data',4,'data-index',5,'data-mask',6,'debug',7,'moduleId',8,'templateId',9],[],oTM,xSM,gg)
_(l1M,a2M)
}
l1M.wxXCkey=1
l1M.wxXCkey=3
}
oZM.wxXCkey=1
oZM.wxXCkey=3
}
else if(_oz(z,50,oTM,xSM,gg)){cYM.wxVkey=2
var t3M=_mz(z,'midas',['adMonitorType',51,'clickExtra',1,'env',2,'extra',3,'feedback',4,'impressionExtra',5,'sendAdMonitor',6,'serverType',7],[],oTM,xSM,gg)
_(cYM,t3M)
}
else if(_oz(z,59,oTM,xSM,gg)){cYM.wxVkey=3
var e4M=_n('view')
_rz(z,e4M,'class',60,oTM,xSM,gg)
var b5M=_n('view')
_rz(z,b5M,'class',61,oTM,xSM,gg)
var o6M=_v()
_(b5M,o6M)
if(_oz(z,62,oTM,xSM,gg)){o6M.wxVkey=1
var c0M=_v()
_(o6M,c0M)
if(_oz(z,63,oTM,xSM,gg)){c0M.wxVkey=1
}
c0M.wxXCkey=1
}
var x7M=_v()
_(b5M,x7M)
if(_oz(z,64,oTM,xSM,gg)){x7M.wxVkey=1
var hAN=_v()
_(x7M,hAN)
if(_oz(z,65,oTM,xSM,gg)){hAN.wxVkey=1
}
hAN.wxXCkey=1
}
var o8M=_v()
_(b5M,o8M)
if(_oz(z,66,oTM,xSM,gg)){o8M.wxVkey=1
}
var f9M=_v()
_(b5M,f9M)
if(_oz(z,67,oTM,xSM,gg)){f9M.wxVkey=1
var oBN=_n('view')
_rz(z,oBN,'class',68,oTM,xSM,gg)
var cCN=_v()
_(oBN,cCN)
if(_oz(z,69,oTM,xSM,gg)){cCN.wxVkey=1
}
var oDN=_v()
_(oBN,oDN)
if(_oz(z,70,oTM,xSM,gg)){oDN.wxVkey=1
}
cCN.wxXCkey=1
oDN.wxXCkey=1
_(f9M,oBN)
}
o6M.wxXCkey=1
x7M.wxXCkey=1
o8M.wxXCkey=1
f9M.wxXCkey=1
_(e4M,b5M)
var lEN=_n('view')
_rz(z,lEN,'class',71,oTM,xSM,gg)
var tGN=_mz(z,'midas',['adMonitorType',72,'clickExtra',1,'env',2,'extra',3,'feedback',4,'impressionExtra',5,'sendAdMonitor',6,'serverType',7],[],oTM,xSM,gg)
var eHN=_v()
_(tGN,eHN)
if(_oz(z,80,oTM,xSM,gg)){eHN.wxVkey=1
}
eHN.wxXCkey=1
_(lEN,tGN)
var aFN=_v()
_(lEN,aFN)
if(_oz(z,81,oTM,xSM,gg)){aFN.wxVkey=1
var bIN=_v()
_(aFN,bIN)
var oJN=function(oLN,xKN,fMN,gg){
var hON=_mz(z,'view',['catchtap',86,'data-index',1,'data-item',2,'data-skuindex',3,'data-url',4],[],oLN,xKN,gg)
var oPN=_v()
_(hON,oPN)
if(_oz(z,91,oLN,xKN,gg)){oPN.wxVkey=1
var cQN=_mz(z,'midas',['clickExtra',92,'env',1,'extra',2,'feedback',3,'impressionExtra',4,'serverType',5],[],oLN,xKN,gg)
var oRN=_v()
_(cQN,oRN)
if(_oz(z,98,oLN,xKN,gg)){oRN.wxVkey=1
}
oRN.wxXCkey=1
_(oPN,cQN)
}
oPN.wxXCkey=1
oPN.wxXCkey=3
_(fMN,hON)
return fMN
}
bIN.wxXCkey=4
_2z(z,84,oJN,oTM,xSM,gg,bIN,'foodItem','itemIndex','itemIndex')
}
aFN.wxXCkey=1
aFN.wxXCkey=3
_(e4M,lEN)
_(cYM,e4M)
}
else{cYM.wxVkey=4
var lSN=_v()
_(cYM,lSN)
if(_oz(z,99,oTM,xSM,gg)){lSN.wxVkey=1
var aTN=_n('view')
_rz(z,aTN,'class',100,oTM,xSM,gg)
var tUN=_v()
_(aTN,tUN)
if(_oz(z,101,oTM,xSM,gg)){tUN.wxVkey=1
}
else{tUN.wxVkey=2
var eVN=_v()
_(tUN,eVN)
if(_oz(z,102,oTM,xSM,gg)){eVN.wxVkey=1
var bWN=_v()
_(eVN,bWN)
if(_oz(z,103,oTM,xSM,gg)){bWN.wxVkey=1
}
else if(_oz(z,104,oTM,xSM,gg)){bWN.wxVkey=2
var oXN=_v()
_(bWN,oXN)
if(_oz(z,105,oTM,xSM,gg)){oXN.wxVkey=1
}
oXN.wxXCkey=1
}
else{bWN.wxVkey=3
var xYN=_n('view')
_rz(z,xYN,'class',106,oTM,xSM,gg)
var oZN=_v()
_(xYN,oZN)
if(_oz(z,107,oTM,xSM,gg)){oZN.wxVkey=1
}
var f1N=_v()
_(xYN,f1N)
if(_oz(z,108,oTM,xSM,gg)){f1N.wxVkey=1
}
oZN.wxXCkey=1
f1N.wxXCkey=1
_(bWN,xYN)
}
bWN.wxXCkey=1
}
else{eVN.wxVkey=2
var c2N=_v()
_(eVN,c2N)
if(_oz(z,109,oTM,xSM,gg)){c2N.wxVkey=1
var h3N=_v()
_(c2N,h3N)
if(_oz(z,110,oTM,xSM,gg)){h3N.wxVkey=1
}
h3N.wxXCkey=1
}
else if(_oz(z,111,oTM,xSM,gg)){c2N.wxVkey=2
var o4N=_v()
_(c2N,o4N)
if(_oz(z,112,oTM,xSM,gg)){o4N.wxVkey=1
}
o4N.wxXCkey=1
}
else{c2N.wxVkey=3
var c5N=_n('view')
_rz(z,c5N,'class',113,oTM,xSM,gg)
var o6N=_v()
_(c5N,o6N)
if(_oz(z,114,oTM,xSM,gg)){o6N.wxVkey=1
}
var l7N=_v()
_(c5N,l7N)
if(_oz(z,115,oTM,xSM,gg)){l7N.wxVkey=1
}
o6N.wxXCkey=1
l7N.wxXCkey=1
_(c2N,c5N)
}
c2N.wxXCkey=1
}
eVN.wxXCkey=1
}
tUN.wxXCkey=1
_(lSN,aTN)
}
else{lSN.wxVkey=2
var a8N=_n('view')
_rz(z,a8N,'class',116,oTM,xSM,gg)
var e0N=_n('view')
_rz(z,e0N,'class',117,oTM,xSM,gg)
var bAO=_v()
_(e0N,bAO)
if(_oz(z,118,oTM,xSM,gg)){bAO.wxVkey=1
var fEO=_v()
_(bAO,fEO)
if(_oz(z,119,oTM,xSM,gg)){fEO.wxVkey=1
}
fEO.wxXCkey=1
}
var oBO=_v()
_(e0N,oBO)
if(_oz(z,120,oTM,xSM,gg)){oBO.wxVkey=1
var cFO=_v()
_(oBO,cFO)
if(_oz(z,121,oTM,xSM,gg)){cFO.wxVkey=1
}
cFO.wxXCkey=1
}
var xCO=_v()
_(e0N,xCO)
if(_oz(z,122,oTM,xSM,gg)){xCO.wxVkey=1
}
var oDO=_v()
_(e0N,oDO)
if(_oz(z,123,oTM,xSM,gg)){oDO.wxVkey=1
var hGO=_n('view')
_rz(z,hGO,'class',124,oTM,xSM,gg)
var oHO=_v()
_(hGO,oHO)
if(_oz(z,125,oTM,xSM,gg)){oHO.wxVkey=1
}
var cIO=_v()
_(hGO,cIO)
if(_oz(z,126,oTM,xSM,gg)){cIO.wxVkey=1
}
oHO.wxXCkey=1
cIO.wxXCkey=1
_(oDO,hGO)
}
bAO.wxXCkey=1
oBO.wxXCkey=1
xCO.wxXCkey=1
oDO.wxXCkey=1
_(a8N,e0N)
var t9N=_v()
_(a8N,t9N)
if(_oz(z,127,oTM,xSM,gg)){t9N.wxVkey=1
var oJO=_n('view')
_rz(z,oJO,'class',128,oTM,xSM,gg)
var lKO=_v()
_(oJO,lKO)
if(_oz(z,129,oTM,xSM,gg)){lKO.wxVkey=1
}
var aLO=_v()
_(oJO,aLO)
if(_oz(z,130,oTM,xSM,gg)){aLO.wxVkey=1
}
lKO.wxXCkey=1
aLO.wxXCkey=1
_(t9N,oJO)
}
t9N.wxXCkey=1
_(lSN,a8N)
}
lSN.wxXCkey=1
}
cYM.wxXCkey=1
cYM.wxXCkey=3
cYM.wxXCkey=3
cYM.wxXCkey=3
_(hWM,oXM)
}
hWM.wxXCkey=1
hWM.wxXCkey=3
return fUM
}
bQM.wxXCkey=4
_2z(z,31,oRM,e,s,gg,bQM,'item','index','index')
}
oLM.wxXCkey=1
oLM.wxXCkey=3
oLM.wxXCkey=3
oLM.wxXCkey=3
_(oJM,cKM)
}
hIM.wxXCkey=1
oJM.wxXCkey=1
oJM.wxXCkey=3
_(fGM,cHM)
}
fGM.wxXCkey=1
fGM.wxXCkey=3
return r
}
e_[x[11]]={f:m9,j:[],i:[],ti:[],ic:[]}
d_[x[12]]={}
var m10=function(e,s,r,gg){
var z=gz$gwx_XC_12_11()
var eNO=_v()
_(r,eNO)
if(_oz(z,0,e,s,gg)){eNO.wxVkey=1
}
eNO.wxXCkey=1
return r
}
e_[x[12]]={f:m10,j:[],i:[],ti:[],ic:[]}
d_[x[13]]={}
var m11=function(e,s,r,gg){
var z=gz$gwx_XC_12_12()
var oPO=_v()
_(r,oPO)
if(_oz(z,0,e,s,gg)){oPO.wxVkey=1
var xQO=_mz(z,'view',['bindtouchend',1,'bindtouchstart',1,'catchtouchmove',2,'class',3,'style',4],[],e,s,gg)
var oRO=_v()
_(xQO,oRO)
var fSO=function(hUO,cTO,oVO,gg){
var oXO=_v()
_(oVO,oXO)
if(_oz(z,9,hUO,cTO,gg)){oXO.wxVkey=1
var lYO=_mz(z,'view',['class',10,'data-index',1],[],hUO,cTO,gg)
var aZO=_v()
_(lYO,aZO)
if(_oz(z,12,hUO,cTO,gg)){aZO.wxVkey=1
var t1O=_mz(z,'mach-user-container',['bindclose',13,'binderror',1,'bindjumpUrl',2,'cid',3,'class',4,'data',5,'data-index',6,'debug',7,'templateId',8],[],hUO,cTO,gg)
_(aZO,t1O)
}
else if(_oz(z,22,hUO,cTO,gg)){aZO.wxVkey=2
var e2O=_mz(z,'ad-mach-container',['bindclose',23,'binderror',1,'cid',2,'class',3,'data',4,'data-index',5,'debug',6,'moduleId',7,'templateId',8],[],hUO,cTO,gg)
_(aZO,e2O)
}
aZO.wxXCkey=1
aZO.wxXCkey=3
aZO.wxXCkey=3
_(oXO,lYO)
}
oXO.wxXCkey=1
oXO.wxXCkey=3
return oVO
}
oRO.wxXCkey=4
_2z(z,7,fSO,e,s,gg,oRO,'item','index','index')
_(oPO,xQO)
}
oPO.wxXCkey=1
oPO.wxXCkey=3
return r
}
e_[x[13]]={f:m11,j:[],i:[],ti:[],ic:[]}
d_[x[14]]={}
var m12=function(e,s,r,gg){
var z=gz$gwx_XC_12_13()
var o4O=_v()
_(r,o4O)
if(_oz(z,0,e,s,gg)){o4O.wxVkey=1
}
o4O.wxXCkey=1
return r
}
e_[x[14]]={f:m12,j:[],i:[],ti:[],ic:[]}
d_[x[15]]={}
var m13=function(e,s,r,gg){
var z=gz$gwx_XC_12_14()
var o6O=_v()
_(r,o6O)
if(_oz(z,0,e,s,gg)){o6O.wxVkey=1
}
o6O.wxXCkey=1
return r
}
e_[x[15]]={f:m13,j:[],i:[],ti:[],ic:[]}
d_[x[16]]={}
var m14=function(e,s,r,gg){
var z=gz$gwx_XC_12_15()
var c8O=_v()
_(r,c8O)
if(_oz(z,0,e,s,gg)){c8O.wxVkey=1
}
var h9O=_v()
_(r,h9O)
if(_oz(z,1,e,s,gg)){h9O.wxVkey=1
}
c8O.wxXCkey=1
h9O.wxXCkey=1
return r
}
e_[x[16]]={f:m14,j:[],i:[],ti:[],ic:[]}
d_[x[17]]={}
var m15=function(e,s,r,gg){
var z=gz$gwx_XC_12_16()
return r
}
e_[x[17]]={f:m15,j:[],i:[],ti:[],ic:[]}
d_[x[18]]={}
var m16=function(e,s,r,gg){
var z=gz$gwx_XC_12_17()
return r
}
e_[x[18]]={f:m16,j:[],i:[],ti:[],ic:[]}
d_[x[19]]={}
var m17=function(e,s,r,gg){
var z=gz$gwx_XC_12_18()
return r
}
e_[x[19]]={f:m17,j:[],i:[],ti:[],ic:[]}
d_[x[20]]={}
var m18=function(e,s,r,gg){
var z=gz$gwx_XC_12_19()
var aDP=_v()
_(r,aDP)
if(_oz(z,0,e,s,gg)){aDP.wxVkey=1
var tEP=_mz(z,'view',['animation',1,'bindtap',1,'class',2,'style',3],[],e,s,gg)
var eFP=_n('midas-simple')
_rz(z,eFP,'bind:impressionend',5,e,s,gg)
_(tEP,eFP)
_(aDP,tEP)
}
aDP.wxXCkey=1
aDP.wxXCkey=3
return r
}
e_[x[20]]={f:m18,j:[],i:[],ti:[],ic:[]}
d_[x[21]]={}
var m19=function(e,s,r,gg){
var z=gz$gwx_XC_12_20()
var oHP=_mz(z,'view',['class',0,'style',1],[],e,s,gg)
var xIP=_v()
_(oHP,xIP)
if(_oz(z,2,e,s,gg)){xIP.wxVkey=1
}
var oJP=_v()
_(oHP,oJP)
if(_oz(z,3,e,s,gg)){oJP.wxVkey=1
}
xIP.wxXCkey=1
oJP.wxXCkey=1
_(r,oHP)
return r
}
e_[x[21]]={f:m19,j:[],i:[],ti:[],ic:[]}
d_[x[22]]={}
var m20=function(e,s,r,gg){
var z=gz$gwx_XC_12_21()
return r
}
e_[x[22]]={f:m20,j:[],i:[],ti:[],ic:[]}
d_[x[23]]={}
var m21=function(e,s,r,gg){
var z=gz$gwx_XC_12_22()
var hMP=_v()
_(r,hMP)
if(_oz(z,0,e,s,gg)){hMP.wxVkey=1
}
hMP.wxXCkey=1
return r
}
e_[x[23]]={f:m21,j:[],i:[],ti:[],ic:[]}
d_[x[24]]={}
var m22=function(e,s,r,gg){
var z=gz$gwx_XC_12_23()
var cOP=_mz(z,'view',['bindtouchend',0,'bindtouchmove',1,'bindtouchstart',1,'class',2,'style',3],[],e,s,gg)
var oPP=_v()
_(cOP,oPP)
var lQP=function(tSP,aRP,eTP,gg){
var oVP=_v()
_(eTP,oVP)
if(_oz(z,7,tSP,aRP,gg)){oVP.wxVkey=1
var xWP=_mz(z,'element-vhost',['bind:currentIndexChange',8,'bind:event',1,'nodes',2,'viewId',3],[],tSP,aRP,gg)
_(oVP,xWP)
}
oVP.wxXCkey=1
oVP.wxXCkey=3
return eTP
}
oPP.wxXCkey=4
_2z(z,5,lQP,e,s,gg,oPP,'item','index','index')
_(r,cOP)
return r
}
e_[x[24]]={f:m22,j:[],i:[],ti:[],ic:[]}
d_[x[25]]={}
d_[x[25]]["newuser-coupon"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':newuser-coupon'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,18,e,s,gg)){oB.wxVkey=1
var xC=_mz(z,'newuser-coupon',['bind:scrollToNearPoi',19,'class',1,'newUserCoupon',2],[],e,s,gg)
_(oB,xC)
}
else if(_oz(z,22,e,s,gg)){oB.wxVkey=2
var oD=_n('newuser-growth')
_rz(z,oD,'newUserGrowth',23,e,s,gg)
_(oB,oD)
}
oB.wxXCkey=1
oB.wxXCkey=3
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[25]]["airdrop"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':airdrop'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var xC=_mz(z,'airdrop-container',['bind:airdropLogin',25,'bind:airdropTips',1,'bind:toast',2,'customTabBar',3,'env',4,'id',5,'ifOnPullDownRefresh',6,'lch',7,'paddingBottom',8,'paddingTop',9,'userId',10,'uuid',11],[],e,s,gg)
_(r,xC)
var oB=_v()
_(r,oB)
if(_oz(z,37,e,s,gg)){oB.wxVkey=1
var oD=_mz(z,'airdrop-tips',['airdropTipProps',38,'bind:hide',1,'id',2,'show',3],[],e,s,gg)
_(oB,oD)
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[25]]["geo-loading"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':geo-loading'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,43,e,s,gg)){oB.wxVkey=1
var xC=_mz(z,'wm-geo',['bindclose',44,'bindconfirm',1,'bindnavloc',2,'bindopenlocsetting',3,'bindopensettingtap',4,'bindpermission',5,'bindreload',6,'config',7,'dialog',8,'error',9,'loading',10,'loadingpicfromprops',11,'modal',12,'muti',13],[],e,s,gg)
_(oB,xC)
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[25]]["add-to-favorite-tip"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':add-to-favorite-tip'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,59,e,s,gg)){oB.wxVkey=1
var xC=_mz(z,'add-to-favorite-tip',['scene_type',60,'top',1],[],e,s,gg)
_(oB,xC)
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[25]]["wlwc-bubble"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':wlwc-bubble'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,64,e,s,gg)){oB.wxVkey=1
var xC=_mz(z,'wlwcEntrance',['gray',65,'graystring',1],[],e,s,gg)
_(oB,xC)
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[25]]["gotoLocation"]=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var b=x[25]+':gotoLocation'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/index.wxml"],"",1)
if(p_[b]){_wl(b,x[25]);return}
p_[b]=true
try{
var oB=_n('tm')
_(r,oB)
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m23=function(e,s,r,gg){
var z=gz$gwx_XC_12_24()
var fYP=_n('view')
_rz(z,fYP,'id',0,e,s,gg)
var cZP=e_[x[25]].i
var h1P=e_[x[25]].j
_ai(cZP,x[26],e_,x[25],1,22)
_ai(cZP,x[27],e_,x[25],1,91)
_ai(cZP,x[28],e_,x[25],1,155)
_ic(x[29],e_,x[25],e,s,fYP,gg);
var o2P=_v()
_(fYP,o2P)
if(_oz(z,1,e,s,gg)){o2P.wxVkey=1
var l5P=e_[x[25]].i
_ai(l5P,x[30],e_,x[25],1,341)
_ai(l5P,x[31],e_,x[25],1,408)
_ai(l5P,x[32],e_,x[25],1,477)
var a6P=_v()
_(o2P,a6P)
var t7P=_oz(z,3,e,s,gg)
var e8P=_gd(x[25],t7P,e_,d_)
if(e8P){
var b9P=_1z(z,2,e,s,gg) || {}
var cur_globalf=gg.f
a6P.wxXCkey=3
e8P(b9P,b9P,a6P,gg)
gg.f=cur_globalf
}
else _w(t7P,x[25],1,554)
var o0P=_mz(z,'view',['capture-bind:touchstart',4,'class',1],[],e,s,gg)
var xAQ=_v()
_(o0P,xAQ)
var oBQ=function(cDQ,fCQ,hEQ,gg){
var cGQ=_v()
_(hEQ,cGQ)
var oHQ=_oz(z,9,cDQ,fCQ,gg)
var lIQ=_gd(x[25],oHQ,e_,d_)
if(lIQ){
var aJQ=_1z(z,8,cDQ,fCQ,gg) || {}
var cur_globalf=gg.f
cGQ.wxXCkey=3
lIQ(aJQ,aJQ,cGQ,gg)
gg.f=cur_globalf
}
else _w(oHQ,x[25],1,1095)
return hEQ
}
xAQ.wxXCkey=2
_2z(z,7,oBQ,e,s,gg,xAQ,'item','idx','')
_(o2P,o0P)
var tKQ=_v()
_(o2P,tKQ)
var eLQ=function(oNQ,bMQ,xOQ,gg){
var fQQ=_v()
_(xOQ,fQQ)
var cRQ=_oz(z,12,oNQ,bMQ,gg)
var hSQ=_gd(x[25],cRQ,e_,d_)
if(hSQ){
var oTQ=_1z(z,11,oNQ,bMQ,gg) || {}
var cur_globalf=gg.f
fQQ.wxXCkey=3
hSQ(oTQ,oTQ,fQQ,gg)
gg.f=cur_globalf
}
else _w(cRQ,x[25],1,1470)
return xOQ
}
tKQ.wxXCkey=2
_2z(z,10,eLQ,e,s,gg,tKQ,'item','index','')
var cUQ=_n('airdrop-after-notification')
_rz(z,cUQ,'id',13,e,s,gg)
_(o2P,cUQ)
var oVQ=_v()
_(o2P,oVQ)
var lWQ=function(tYQ,aXQ,eZQ,gg){
var o2Q=_v()
_(eZQ,o2Q)
var x3Q=_oz(z,16,tYQ,aXQ,gg)
var o4Q=_gd(x[25],x3Q,e_,d_)
if(o4Q){
var f5Q=_1z(z,15,tYQ,aXQ,gg) || {}
var cur_globalf=gg.f
o2Q.wxXCkey=3
o4Q(f5Q,f5Q,o2Q,gg)
gg.f=cur_globalf
}
else _w(x3Q,x[25],1,1880)
return eZQ
}
oVQ.wxXCkey=2
_2z(z,14,lWQ,e,s,gg,oVQ,'item','index','')
l5P.pop()
l5P.pop()
l5P.pop()
}
var c3P=_v()
_(fYP,c3P)
if(_oz(z,68,e,s,gg)){c3P.wxVkey=1
var c6Q=_n('privacy-dialog')
_rz(z,c6Q,'style',69,e,s,gg)
_(c3P,c6Q)
}
var o4P=_v()
_(fYP,o4P)
if(_oz(z,70,e,s,gg)){o4P.wxVkey=1
var h7Q=_v()
_(o4P,h7Q)
if(_oz(z,71,e,s,gg)){h7Q.wxVkey=1
var o8Q=_mz(z,'mach-user-container',['customLxExtra',-1,'binderror',72,'cid',1,'data',2,'templateId',3],[],e,s,gg)
_(h7Q,o8Q)
}
h7Q.wxXCkey=1
h7Q.wxXCkey=3
}
o2P.wxXCkey=1
o2P.wxXCkey=3
c3P.wxXCkey=1
c3P.wxXCkey=3
o4P.wxXCkey=1
o4P.wxXCkey=3
cZP.pop()
cZP.pop()
cZP.pop()
h1P.pop()
_(r,fYP)
return r
}
e_[x[25]]={f:m23,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_12";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_12();	if (__vd_version_info__.delayedGwx) __wxAppCode__['components/filter/filter.wxml'] = [$gwx_XC_12, './components/filter/filter.wxml'];else __wxAppCode__['components/filter/filter.wxml'] = $gwx_XC_12( './components/filter/filter.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/midas/index.wxml'] = [$gwx_XC_12, './components/midas/index.wxml'];else __wxAppCode__['components/midas/index.wxml'] = $gwx_XC_12( './components/midas/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/wm-image/index.wxml'] = [$gwx_XC_12, './components/wm-image/index.wxml'];else __wxAppCode__['components/wm-image/index.wxml'] = $gwx_XC_12( './components/wm-image/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/wm-index-search/index.wxml'] = [$gwx_XC_12, './components/wm-index-search/index.wxml'];else __wxAppCode__['components/wm-index-search/index.wxml'] = $gwx_XC_12( './components/wm-index-search/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/wm-sticky/index.wxml'] = [$gwx_XC_12, './components/wm-sticky/index.wxml'];else __wxAppCode__['components/wm-sticky/index.wxml'] = $gwx_XC_12( './components/wm-sticky/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml'] = [$gwx_XC_12, './npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml'];else __wxAppCode__['npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml'] = $gwx_XC_12( './npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.wxml'] = [$gwx_XC_12, './npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.wxml'];else __wxAppCode__['npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.wxml'] = $gwx_XC_12( './npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-after-notification/airdrop-after-notification.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-after-notification/airdrop-after-notification.wxml'];else __wxAppCode__['pages/index/components/airdrop-after-notification/airdrop-after-notification.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-after-notification/airdrop-after-notification.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-container/airdrop-container.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-container/airdrop-container.wxml'];else __wxAppCode__['pages/index/components/airdrop-container/airdrop-container.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-container/airdrop-container.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-coupon/airdrop-coupon.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-coupon/airdrop-coupon.wxml'];else __wxAppCode__['pages/index/components/airdrop-coupon/airdrop-coupon.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-coupon/airdrop-coupon.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-layer/airdrop-layer.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-layer/airdrop-layer.wxml'];else __wxAppCode__['pages/index/components/airdrop-layer/airdrop-layer.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-layer/airdrop-layer.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-popup/airdrop-popup.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-popup/airdrop-popup.wxml'];else __wxAppCode__['pages/index/components/airdrop-popup/airdrop-popup.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-popup/airdrop-popup.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/airdrop-tips/airdrop-tips.wxml'] = [$gwx_XC_12, './pages/index/components/airdrop-tips/airdrop-tips.wxml'];else __wxAppCode__['pages/index/components/airdrop-tips/airdrop-tips.wxml'] = $gwx_XC_12( './pages/index/components/airdrop-tips/airdrop-tips.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/home-header-background/index.wxml'] = [$gwx_XC_12, './pages/index/components/home-header-background/index.wxml'];else __wxAppCode__['pages/index/components/home-header-background/index.wxml'] = $gwx_XC_12( './pages/index/components/home-header-background/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/mt-back/mt-back.wxml'] = [$gwx_XC_12, './pages/index/components/mt-back/mt-back.wxml'];else __wxAppCode__['pages/index/components/mt-back/mt-back.wxml'] = $gwx_XC_12( './pages/index/components/mt-back/mt-back.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/newuser-coupon/index.wxml'] = [$gwx_XC_12, './pages/index/components/newuser-coupon/index.wxml'];else __wxAppCode__['pages/index/components/newuser-coupon/index.wxml'] = $gwx_XC_12( './pages/index/components/newuser-coupon/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/newuser-growth/index.wxml'] = [$gwx_XC_12, './pages/index/components/newuser-growth/index.wxml'];else __wxAppCode__['pages/index/components/newuser-growth/index.wxml'] = $gwx_XC_12( './pages/index/components/newuser-growth/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/privacy-dialog/index.wxml'] = [$gwx_XC_12, './pages/index/components/privacy-dialog/index.wxml'];else __wxAppCode__['pages/index/components/privacy-dialog/index.wxml'] = $gwx_XC_12( './pages/index/components/privacy-dialog/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/wlwcEntrance/index.wxml'] = [$gwx_XC_12, './pages/index/components/wlwcEntrance/index.wxml'];else __wxAppCode__['pages/index/components/wlwcEntrance/index.wxml'] = $gwx_XC_12( './pages/index/components/wlwcEntrance/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/wm-gif-image/index.wxml'] = [$gwx_XC_12, './pages/index/components/wm-gif-image/index.wxml'];else __wxAppCode__['pages/index/components/wm-gif-image/index.wxml'] = $gwx_XC_12( './pages/index/components/wm-gif-image/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/wm-item-video/index.wxml'] = [$gwx_XC_12, './pages/index/components/wm-item-video/index.wxml'];else __wxAppCode__['pages/index/components/wm-item-video/index.wxml'] = $gwx_XC_12( './pages/index/components/wm-item-video/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/wm-loc/index.wxml'] = [$gwx_XC_12, './pages/index/components/wm-loc/index.wxml'];else __wxAppCode__['pages/index/components/wm-loc/index.wxml'] = $gwx_XC_12( './pages/index/components/wm-loc/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/components/wm-tier-slide/index.wxml'] = [$gwx_XC_12, './pages/index/components/wm-tier-slide/index.wxml'];else __wxAppCode__['pages/index/components/wm-tier-slide/index.wxml'] = $gwx_XC_12( './pages/index/components/wm-tier-slide/index.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/index.wxml'] = [$gwx_XC_12, './pages/index/index.wxml'];else __wxAppCode__['pages/index/index.wxml'] = $gwx_XC_12( './pages/index/index.wxml' );
	;__wxRoute = "components/filter/filter";__wxRouteBegin = true;__wxAppCurrentFile__="components/filter/filter.js";define("components/filter/filter.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../npm/babel/runtime7_2_0/helpers/extends")),r=e(require("../../npm/babel/runtime7_2_0/regenerator/index")),i=require("../../npm/wmfe/wxapp-component-abtest0_4_4/src/components/abtest/index"),a=require("../../utils/lx"),s=require("./log"),o=require("../../npm/promise-polyfill6_0_2/promise.js"),c=require("../recycle-list/utils/transformRpx").transformRpx,n=require("../midas-simple/outlet"),l=require("../../utils/wait"),d=require("../../utils/quick-filter-manager").get,u=require("../../utils/filter-conditions-manager").get;require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{lite:{type:Boolean,value:!0},pageName:{type:String,value:"index"},horizonTypeShow:{type:Boolean,value:!1},top:{type:Number,value:80,observer:function(e){this.searchbarHeight=c(e+"rpx")}},height:{type:Number,value:133},scrollHeight:{type:String,value:"58vh"},newStyle:{type:Boolean,value:!1},filterGroundSticky:{type:Boolean,value:!1},isHomepage:{type:Boolean,value:!1},module:{type:Object,value:{}},moduleListHeader:{type:Object,value:{},observer:function(e){if(e&&e.string_data){var t=JSON.parse(e.string_data).fast_activity_filter_groups,r=t&&t.items?t.items:[],i=r.length>3?r:[],s={};i.forEach((function(e,t){s[e.code]=t,a.lxMge.view({cid:"c_m84bv26",val_bid:"b_waimai_6afw2cyj_mv",index:t,code:e.code})})),this.setData({fastActivityFilterGroups:i,filterCode:s})}}},isClearFilter:{type:Boolean,value:!1,observer:function(e){e&&this.clearFilter(!0)}}},data:{typeCode:0,categoryType:0,secondCategoryType:0,activeSortCode:0,selectedCodes:{},selectCount:0,categoryFilterList:[],sortTypeList:[],selectedPriceRange:[],sortItems:[{code:0,name:"综合排序"},{code:1,name:"销量高"},{code:2,name:"速度快"}],fastActivityFilterGroups:[],filterCode:{},tempSelectedCodes:{},curSelectedPriceRange:[],priceRangeFlag:!1},attached:function(){this.searchbarHeight=c(this.data.top+"rpx");var e=this.data,t=e.lite,r=e.pageName;t||(this.setData({"sortItems[1].name":"销量最高","sortItems[2].name":"速度最快"}),this.loadFilter(!0),(0,s.lxSortView)(r))},methods:{onTouchMove:function(){},initFilter:function(e,t){var r=void 0===t?{}:t,i=r.typeCode,a=void 0===i?0:i,o=r.subCode,c=void 0===o?0:o;this.setData({typeCode:+a,categoryType:+a,secondCategoryType:+c}),this.loadQuickFilter(),this.loadFilter(e),(0,s.lxSortView)(this.data.pageName,a)},filterGetTop:function(){var e=this;return o.race([new o((function(t){if(wx.canIUse&&wx.canIUse("createSelectorQuery")){var r=wx.createSelectorQuery();r.select(".filter-header-holder").boundingClientRect(),r.selectViewport().scrollOffset(),r.exec((function(r){if(r&&r[0]&&r[1]){var i=r[0].top,a=r[1].scrollTop;e.filterTop=Math.ceil(i+a),t(e.filterTop)}}))}})),new o((function(t){setTimeout((function(){return t(e.filterTop)}),300)}))])},filterIsDocked:function(){var e,t,i,a,s;return r.default.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.data,t=e.pageName,i=e.horizonTypeShow,o.next=3,r.default.awrap(this.filterGetTop());case 3:if(a=o.sent,"index"!==t){o.next=8;break}return o.abrupt("return",a-this.searchbarHeight<=this.__scrollTop);case 8:if("channel-page"!==t){o.next=11;break}return s=i?c("76rpx"):"0",o.abrupt("return",a<=this.__scrollTop+s);case 11:return o.abrupt("return",!0);case 12:case"end":return o.stop()}}),null,this)},loadQuickFilter:function(){var e,t,i,a,o,c,l,u,h;return r.default.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,e=this.data,t=e.categoryType,i=e.secondCategoryType,a=e.pageName,p.next=4,r.default.awrap(d(a,{first_category_type:t,second_category_type:i}));case 4:o=p.sent,c=o.activity_filter_list,l=c?this.quickFilterAB(c):[],u=(l||[])[0]||{},h=(u.items||[])[0]||null,this.setData({quickFilterItems:u,quickFilterItem:h}),(0,s.lxFilterFastestSpeedView)(),n.clearImpression("quickFilter"),n.triggerScroll(),p.next=18;break;case 15:p.prev=15,p.t0=p.catch(0);case 18:case"end":return p.stop()}}),null,this,[[0,15]])},clearFilter:function(e,t){var r=this;void 0===t&&(t=!1),this.setData({selectedCodes:{},tempSelectedCodes:{},selectedPriceRange:[],selectCount:0,curSelectedPriceRange:[],priceRangeFlag:!1},(function(){r.properties.isHomepage&&!t&&r.triggerFilterParams()}))},triggerFilterParams:function(){var e=this.properties.module,t=this.getFilterParam(),r=t.activity_filter_codes,i=t.slider_select_data;this.triggerEvent("FilterParamsChange",{activity_filter_codes:r,slider_select_data:i,module:e})},clearFilterSort:function(){this.setData({activeSortCode:0})},loadFilter:function(e){var t,i,a,o,n,l,d,h,p,f,g,m,y,v,_,T,x,C,F;return r.default.async((function(S){for(;;)switch(S.prev=S.next){case 0:if(t=this.data,i=t.typeCode,a=t.secondCategoryType,o=t.horizonTypeShow,S.prev=1,!e&&this.data.categoryFilterList.length){S.next=25;break}return S.next=5,r.default.awrap(u());case 5:n=S.sent,l=n.category_filter_list,d=n.sort_type_list,h=n.activity_filter_list,p=n.filter_prices,g=0,m=0,y=0,v=!1,(f=l||[]).forEach((function(e,t){var r=e.sub_category_list,s=e.code,o=r||[];if(o.forEach((function(e){e.icon_url||(e.icon_url="https://p1.meituan.net/scarlett/8a3bc63a6a361cfbc8b713f191f1b2902748.png")})),+s==+i){v=o.length>0,m=t;var n=o.findIndex((function(e){return e.code===a}));y=-1===n?0:n,g=n*c("160rpx")}})),_=this.insuranceAB(),T=_.showInsurance,x=_.showFoodInsurance,(C=h||[]).forEach((function(e){(e.items||[]).forEach((function(e){"美团专送"!==e.name||e.icon||(e._filterMeituan=!0),e.show=!0,("102"===e.code&&!x||"101"===e.code&&!T)&&(e.show=!1)}))})),o&&v&&"channel-page"===this.data.pageName&&(0,s.lxChannelTypeHorizonView)(i),this.showFilterDot(),F=d||[],this.setData({categoryFilterList:f,sortTypeList:F,priceRangeFilterList:p||[],activityFilterList:C,firstTypeIndex:m,firstTypeShowIndex:m,secondTypeIndex:y,scrollLeft:g,horizonTypeShow:o&&v}),this._metricsLoadComplete&&this._metricsLoadComplete(),this.triggerEvent("onload",{horizonTypeShow:o&&v,categoryFilterList:f,sortTypeList:F});case 25:S.next=31;break;case 27:S.prev=27,S.t0=S.catch(1),this.triggerEvent("onload",{horizonTypeShow:!1,categoryFilterList:[],sortTypeList:[]});case 31:case"end":return S.stop()}}),null,this,[[1,27]])},filterScrollTo:function(e){wx.canIUse&&wx.canIUse("pageScrollTo")&&wx.pageScrollTo({scrollTop:e,duration:0})},filterScrollToDock:function(e){var t,i,a,s,o,n,l,d,u;return r.default.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,r.default.awrap(this.filterGetTop());case 2:if(t=h.sent,i=this.data,a=i.pageName,s=i.horizonTypeShow,o=i.activeTab,"index"===a)e?this.filterScrollTo(t-this.searchbarHeight):this.filterScrollTo(Math.max(t-this.searchbarHeight,this.__scrollTop||0));else if("channel-page"===a){n=s?c("76rpx"):"0",l=this.searchbarHeight,d="";try{d=(wx.getSystemInfoSync()||{}).platform}catch(e){d=""}u=0,"ios"===d&&(u=this.properties.height,o||(u=0-u)),e?this.filterScrollTo(Math.min(t-n-l,this.__scrollTop||0)):this.filterScrollTo(Math.max(t-n-l,this.__scrollTop+u||0))}case 5:case"end":return h.stop()}}),null,this)},hideFilterDot:function(){try{wx.setStorageSync("KEY_SHOW_QUICK_FILTER_DOT",!1),this.setData({quickFilterDotShow:!1})}catch(e){}},showFilterDot:function(){try{var e=wx.getStorageSync("KEY_SHOW_QUICK_FILTER_DOT");""===e&&(e=!0),this.setData({quickFilterDotShow:e})}catch(e){}},onCategoryItemTap:function(e){var t=e.currentTarget.dataset,r=t.index,i=t.code,a=this.data,o=a.activeTab,c=a.secondCategoryType,n=a.typeCode;if(i!==c){o&&this.hideMore(),this.setData({secondTypeIndex:+r,activeTab:"",secondCategoryType:i});try{this.triggerEvent("reload")}catch(e){}(0,s.lxChannelTypeHorizonClick)(n)}},onSortItemTap:function(e){var t,r=e.currentTarget.dataset,i=r.code,a=r.name,o=this.data,c=o.activeTab,n=o.activeSortCode;this.filterScrollToDock(),c&&this.hideMore(),t=1===n||2===n?n!==Number(i)&&parseInt(i,10)||0:parseInt(i,10)||0,a?this.setData({activeSortCode:+i,"sortItems[0]":{code:i,name:a}}):this.setData({"sortItems[0]":{code:0,name:"综合排序"},activeSortCode:t}),this.triggerEvent("reload"),2==+i&&(0,s.lxFilterFastestSpeedClick)()},onQuickFilterSortItemTap:function(e){var r=this,i=e.currentTarget.dataset.code,s=this.data,o=s.selectedCodes,c=s.filterCode;this.filterScrollToDock(!0);var n=(0,t.default)({},o),l=n[i];n[i]=!l,this.setData({selectedCodes:n,selectCount:this.calcFilterSelectCount(n)},(function(){r.triggerFilterParams()})),a.lxMge.click({cid:"c_m84bv26",val_bid:"b_waimai_6afw2cyj_mc",index:c[i],code:i})},calcFilterSelectCount:function(e,t){void 0===t&&(t=this.data.selectedPriceRange);var r=0;return Object.keys(e).forEach((function(t){e[t]&&(r+=1)})),t.length>0&&(r+=1),r},onQuickFilterItemTap:function(e){var t,i,a,o,c,n,l,d,u,h,p;return r.default.async((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.currentTarget.dataset.code,i=""+t,a=this.data,o=a.quickFilterItems,c=a.selectedCodes,this.hideFilterDot(),this.filterScrollToDock(),n=o.support_multi_choice,l=o.items,d=c[i],1==+n?c[i]=!d:l.forEach((function(e){var t=""+e.code;c[t]=!d&&t===i})),this.setData({selectedCodes:c,selectCount:this.calcFilterSelectCount(c)}),this.triggerEvent("reload"),f.next=12,r.default.awrap(this.filterIsDocked());case 12:if(!f.sent){f.next=16;break}f.t0=1,f.next=17;break;case 16:f.t0=0;case 17:u=f.t0,h=this.getFilterParam(),p=h.activity_filter_codes,(0,s.lxQuickFilterClick)(t,u,p);case 20:case"end":return f.stop()}}),null,this)},midasQuickFilterView:function(){var e=this.getFilterParam().activity_filter_codes;(0,s.lxQuickFilterView)(e)},onFilterItemTap:function(e){var t=e.currentTarget.dataset,r=t.index,i=t.code,a=""+i,s=this.data,o=s.activityFilterList,c=s.selectedCodes,n=s.tempSelectedCodes,l=o[r],d=l.support_multi_choice,u=l.items,h=c[i];1===d?(c[i]=!h,n[i]=!h):u.forEach((function(e){var t=""+e.code;h?(c[t]=!1,n[t]=!1):t===a?(c[t]=!0,n[t]=!0):(c[t]=!1,n[t]=!1)})),this.setData({selectedCodes:c,tempSelectedCodes:n,selectCount:this.calcFilterSelectCount(c)})},onSubmitFilter:function(){var e=this;this.properties.isHomepage?(this.setData({tempSelectedCodes:{}},(function(){e.hideMore("submit")})),this.triggerFilterParams()):(this.hideMore(),this.triggerEvent("reload"))},onPriceRangeTap:function(e){var t=e.currentTarget.dataset,r=t.min,i=t.max,a=this.data,s=a.selectedCodes,o=a.selectedPriceRange;a.priceRangeFlag||this.setData({curSelectedPriceRange:Array.from(o),priceRangeFlag:!0});var c;c=o.length>0&&r===o[0]&&i===o[1]?[]:[r,i],this.setData({selectedPriceRange:c,selectCount:this.calcFilterSelectCount(s,c)})},hideMore:function(e){var t=this;if(this.properties.isHomepage){var r=this.data,i=r.selectedCodes,a=r.tempSelectedCodes,s=r.selectedPriceRange,o=r.curSelectedPriceRange,c=r.priceRangeFlag;Object.keys(a).forEach((function(e){i[e]=!a[e]})),this.setData({selectedCodes:i,tempSelectedCodes:{},selectedPriceRange:"submit"!==e&&c?o:s,curSelectedPriceRange:[],priceRangeFlag:!1},(function(){t.setData({selectCount:t.calcFilterSelectCount(i)})}))}this.setData({activeTab:"",filterTypeShow:!1}),this.triggerEvent("forceDock",!1)},onMoreFilterTap:function(){var e,t,i,a,o;return r.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.data,t=e.activeTab,i=e.pageName,a=e.selectedCodes,o=e.typeCode,!t){c.next=5;break}this.hideMore(),c.next=10;break;case 5:return this.filterScrollToDock(),c.next=8,r.default.awrap(l(400));case 8:this.setData({activeTab:"filter"}),this.triggerEvent("forceDock",!0);case 10:(0,s.lxFilterClick)(i,!0,a,o);case 11:case"end":return c.stop()}}),null,this)},onMoreSortTap:function(){var e,t,i,a,o;return r.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.data,t=e.activeTab,i=e.pageName,a=e.selectedCodes,o=e.typeCode,!t){c.next=5;break}this.hideMore(),c.next=10;break;case 5:return this.filterScrollToDock(),c.next=8,r.default.awrap(l(400));case 8:this.setData({activeTab:"sort"}),this.triggerEvent("forceDock",!0);case 10:(0,s.lxFilterClick)(i,!1,a,o);case 11:case"end":return c.stop()}}),null,this)},OnPageScroll:function(e){this.__scrollTop=e,this.filterFilterGetTopFlag||(this.filterFilterGetTopFlag=!0,this.filterGetTop())},getFilterParam:function(){var e=this.data,t=e.typeCode,r=e.selectedCodes,i=e.selectedPriceRange,a=e.activeSortCode,s=e.categoryType,o=e.secondCategoryType,c=Object.keys(r).filter((function(e){return r[e]})),n="";return i.length>0&&(n=[{code:"-100",slider_select_min:i[0],slider_select_max:i[1]}]),{navigate_type:t,category_type:s,second_category_type:o,sort_type:a,activity_filter_codes:c.join(","),slider_select_data:n?JSON.stringify(n):""}},insuranceAB:function(){var e=i.abtest.getCache("wm_zsb_fxc")||"";return{showInsurance:"A"===e||"C"===e,showFoodInsurance:"B"===e||"C"===e}},quickFilterAB:function(e){void 0===e&&(e=[]);var t=this.insuranceAB(),r=t.showInsurance,i=t.showFoodInsurance,a=[];return e[0]&&((e[0].items||[]).forEach((function(e){"101"===e.code&&!r||"102"===e.code&&!i||a.push(e)})),e[0].items=a),e}}});
},{isPage:false,isComponent:true,currentFile:'components/filter/filter.js'});require("components/filter/filter.js");;__wxRoute = "components/midas/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/midas/index.js";define("components/midas/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,t,a=require("../../common/ad/ad"),i=require("./event"),r=require("./emitter"),n=require("./emitter_waimai"),s=require("./enum"),d=require("./utils_waimai");require("./midas.outlet");function o(e){return e===s.SERVER_TYPE.MEITUAN_WAIMAI?n:r}var c=d.createMidasFactory("midas-id-");require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({externalClasses:["midas"],properties:{env:{type:String,value:s.ENV.PRODUCT},serverType:{type:String,value:s.SERVER_TYPE.MEITUAN_WAIMAI},ishttps:{type:Boolean,value:!0},sendLoadPoint:{type:Boolean,value:!1},sendReachPoint:{type:Boolean,value:!1},adidx:{type:String,value:""},feedback:{type:String,value:""},extra:{type:String,value:""},callbackParams:{type:String,value:""},jumpLink:{type:String,value:""},loadExtra:{type:String,value:""},impressionExtra:{type:String,value:""},clickExtra:{type:String,value:""},reachExtra:{type:String,value:""},groupName:{type:String,value:""},gapTime:{type:Number,value:0},sendAdMonitor:{type:Boolean,value:!1},adMonitorType:{type:Number,value:0}},data:{midasId:""},methods:{onClick:function(){var e=this;o(this.data.serverType).sendClickPoint(this.data.feedback,this.data.adidx,this.data.extra,e.data).then((function(t){try{e.triggerEvent("clickend",e.data.callbackParams)}catch(e){}e.data.jumpLink&&wx.navigateTo({url:e.data.jumpLink,success:function(){e.data.sendReachPoint&&o(e.data.serverType).sendReachPoint(e.data.feedback,e.data.adidx,e.data.extra,e.data);try{e.triggerEvent("reachend",e.data.callbackParams)}catch(e){}}})}))}},created:function(){this.isSendImpression=!1,this.data.groupName||(this.data.groupName=d.getCurrentPageName());var e=this;this._cleanSendImpressionHandle=function(t,a){(a||t===e.data.groupName)&&(e.isSendImpression=!1)},d.addCleanImpressionFn(this._cleanSendImpressionHandle)},attached:function(){},ready:function(){this.midasId=c(),this.setData({midasId:this.midasId});var r=this;this.data.sendAdMonitor&&(0,a.adMonitor)(2,{prod_type:this.data.adMonitorType,pos:this.data.adidx}),this.data.sendLoadPoint&&o(this.data.serverType).sendLoadPoint(this.data.feedback,this.data.adidx,this.data.extra,r.data);try{r.triggerEvent("loadend",r.data.callbackParams)}catch(r){}var n=r.createSelectorQuery();n.selectViewport().fields({size:!0});var s,d=n.select(".midas-wraper").boundingClientRect(),l=function(){r.isSendImpression||d.exec((function(a){if(!r.isSendImpression){var i=a[0]||function(){if(e&&t)return{width:e,height:t};var a=wx.getSystemInfoSync();return e=a.windowWidth,t=a.windowHeight,{width:e,height:t}}(),n=a[1];if(n&&i){var s=n.top<i.height-1&&n.bottom>1,d=n.left<i.width-1&&n.right>1;s&&d&&u()}}}))};function u(){if(!r.isSendImpression){r.isSendImpression=!0,o(r.data.serverType).sendImpressionPoint(r.data.feedback,r.data.adidx,r.data.extra,r.data);try{r.triggerEvent("impressionend",r.data.callbackParams)}catch(e){}}}var h=this.data.gapTime||100;this.__scroll=function(){clearTimeout(s),s=setTimeout(l,h)},wx.createIntersectionObserver&&(this.__intersectionScroll=u,this.intersectionObserver=wx.createIntersectionObserver(this).relativeToViewport(),this.intersectionObserver.observe("#"+this.midasId,r.__intersectionScroll)),i.onScroll(this.__scroll),setTimeout((function(){r.__scroll()}),10)},moved:function(){},detached:function(){i.offScroll(this.__scroll);try{this.intersectionObserver&&this.intersectionObserver.disconnect()}catch(e){}d.removeCleanImpressionFn(this._cleanSendImpressionHandle)}});
},{isPage:false,isComponent:true,currentFile:'components/midas/index.js'});require("components/midas/index.js");;__wxRoute = "components/wm-image/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/wm-image/index.js";define("components/wm-image/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({externalClasses:["custom-img"],properties:{src:{type:String,value:""},failClass:{type:String,value:""},defaultImgSrc:{type:String,value:""}},data:{loadFail:!1},methods:{onImgLoadError:function(){this.setData({loadFail:!0})}}});
},{isPage:false,isComponent:true,currentFile:'components/wm-image/index.js'});require("components/wm-image/index.js");;__wxRoute = "components/wm-index-search/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/wm-index-search/index.js";define("components/wm-index-search/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault")(require("./saveHomeRecommendKeywords")),r={pre:{indexSearchBg:"index-search-bg",searchIconUrl:"https://img.meituan.net/kangaroox/e88a0979a64047df2d794c502322281e515.png?t=1544072562753",indexSearchIcon:"index-search-icon",indexSearchPlaceholder:"index-search-placeholder"},semicircle:{indexSearchBg:"index-search-bg-semicircle",searchIconUrl:"https://p1.meituan.net/travelcube/3748438ca1ab1d8b7fbc41fec1b704fa849.png",indexSearchIcon:"index-search-icon-semicircle",indexSearchPlaceholder:"index-search-placeholder-semicircle"}};require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{recommendedSearchRollKeywords:{type:String,value:"",observer:function(e){e&&this.getSearchRollKeyword(e)}},headerShowSearch:{type:Boolean,value:!1},recommendedSearchKeyword:{type:Object,value:{}},entranceId:{type:Number,value:0},cateType:{type:Number,value:0},subCateType:{type:Number,value:0},customClass:{type:String,value:""},isHomepage:{type:Boolean,value:!1},searchpageABtest:{type:String,value:"B"},theme:{type:String,value:"pre",observer:function(e){void 0===e&&(e="pre"),this.setData({themeClasses:r[e]||r.pre})}},grayConfig:{type:Boolean,value:!1}},attached:function(){this.setData({themeClasses:r[this.properties.theme]||r.pre})},data:{themeClasses:{},recommendedSearchRollKeyword:{},search_keyword_info:{},isMt:getApp().__isMtGroup__},methods:{getSearchRollKeyword:function(e){var r=e?JSON.parse(e).search_keyword_info:"",a=r?JSON.parse(r):{},d=a&&a.roll_keywords?a.roll_keywords:[];this.setData({recommendedSearchRollKeyword:d&&d.length>0?d[0]:{},search_keyword_info:a},(function(){if((d[0]||{}).view_keyword){var e=d[0],r=e.type,o=void 0===r?"":r,t=e.word_type,i=void 0===t?"":t,c=e.search_keyword,s=void 0===c?"":c,l=e.view_keyword,n=void 0===l?"":l,_=a.tgt_stids,h=void 0===_?"":_,m=a.scene_type,p=void 0===m?"":m,y=a.rcmd_log_id,v=void 0===y?"":y;global.mmb.lx.view("b_dmKcT",{cid:"c_m84bv26",has_word:n?"1":"0",keyword:s,label_word:n,default_stid:h,is_travel:p,cat_id:0,index:0,rcmd_s_log_id:v,word_type:i}),global.mmb.lx.view("b_waimai_ocn7sgla_mv",{cid:"c_m84bv26",has_word:n?"1":"0",keyword:s,label_type:o,label_word:n,default_stid:h,is_travel:p,click_type:2,word_page_type:0,cat_id:0,location_page:1,index:0,word_type:i})}}))},onLxSearchClick:function(e){if(this.data.isHomepage){var r=this.data.recommendedSearchRollKeyword,a=r.word_type,d=void 0===a?"":a,o=r.search_keyword,t=void 0===o?"":o,i=r.view_keyword,c=void 0===i?"":i,s=this.data.search_keyword_info,l=s.tgt_stids,n=void 0===l?"":l,_=s.scene_type,h=void 0===_?"":_,m=s.rcmd_log_id,p=void 0===m?"":m,y=this.properties.headerShowSearch;global.mmb.lx.click("b_UDdde",{cid:"c_m84bv26",has_word:c?"1":"0",keyword:t,label_word:c,default_stid:n,is_travel:h,spread:y?1:0,index:0,rcmd_s_log_id:p,word_type:d,cat_id:0})}else this.triggerEvent("onSearchClick",{recommend:e.currentTarget.dataset.recommend});this.saveRecommendSearchKeyWord()},onLxSearchBtnClick:function(){var e=this.data.recommendedSearchRollKeyword,r=e.type,a=void 0===r?"":r,d=e.word_type,o=void 0===d?"":d,t=e.search_keyword,i=void 0===t?"":t,c=e.view_keyword,s=void 0===c?"":c,l=this.data.search_keyword_info,n=l.tgt_stids,_=void 0===n?"":n,h=l.scene_type,m=void 0===h?"":h,p=this.properties.headerShowSearch;global.mmb.lx.click("b_G73OZ",{cid:"c_m84bv26",has_word:s?"1":"0",keyword:i,label_type:a,label_word:s,default_stid:_,is_travel:m,click_type:2,word_page_type:0,cat_id:0,location_page:1,spread:p?1:0,index:0,word_type:o}),this.saveRecommendSearchKeyWord()},saveRecommendSearchKeyWord:function(){"A"===this.data.searchpageABtest&&(0,e.default)(this.data.recommendedSearchRollKeyword,this.data.search_keyword_info)}}});
},{isPage:false,isComponent:true,currentFile:'components/wm-index-search/index.js'});require("components/wm-index-search/index.js");;__wxRoute = "components/wm-sticky/index";__wxRouteBegin = true;__wxAppCurrentFile__="components/wm-sticky/index.js";define("components/wm-sticky/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault")(require("../../npm/babel/runtime7_2_0/regenerator/index")),e=require("./index.outlet"),i=e.onScroll,r=e.offScroll,a=require("./is-sticky-available"),n=require("../../utils/get-page-url"),s=require("../recycle-list/utils/transformRpx").transformRpx,c=require("../../utils/throttle");require("../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{top:{type:Number,value:0,observer:function(t){this.stickyTop=parseInt(s(t+"rpx"),10)+1}},forceDock:{type:Boolean,value:!1,observer:function(t){var e=this;if(t&&this.data.wrapperHeight<-1){var i=this.createSelectorQuery();i.select(".sticky-component-wrapper").boundingClientRect(),i.exec((function(t){t&&t[0]&&t[0].height&&e.setData({wrapperHeight:t[0].height})}))}}},stopTouchMove:{type:Boolean,default:!0},gray:{type:Boolean,value:!1},graystring:{type:String,value:"filter: grayscale(1);"},moduleListHeader:{type:Object,value:{},observer:function(t){if(t&&t.string_data){var e=JSON.parse(t.string_data).fast_activity_filter_groups;(e&&e.items?e.items:[])<=3&&this.setData({wrapperHeight:0,hideContent:!0})}}}},data:{wrapperHeight:-1,dock:!1,hideContent:!1},stickyTop:0,stickyStatus:0,attached:function(){this.pageName=n()},ready:function(){var e,r,n,s,o,u=this;return t.default.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.stickyTop,(r=this.createSelectorQuery()).select(".sticky-component-wrapper").boundingClientRect(),n=c((function(){r.exec((function(t){if(!u.hasHandleSticky&&u.handleSticky(),t[0]&&t[0].top){var i=t[0].top,r=t[0].height;if(void 0===i)return;var a=u.data,n=a.dock,s=a.hideContent;s&&(r=s?0:r),Date.now(),n&&i>e?(u.triggerEvent("setStickyStatus",!1),!u.stickyAvailable&&u.setData({dock:!1},(function(){}))):!n&&i<=e&&(u.triggerEvent("setStickyStatus",!0),!u.stickyAvailable&&u.setData({dock:!0,wrapperHeight:r},(function(){})))}}))}),10),s=c((function(){r.exec((function(t){if(t[0]&&t[0].top){var i=t[0].top;if(void 0===i)return;if(i>e&&!u.stickyStatus)return u.stickyStatus=1,void u.triggerEvent("setStickyStatus",!1);i<=e&&u.stickyStatus&&(u.stickyStatus=0,u.triggerEvent("setStickyStatus",!0))}}))}),10),l.next=7,t.default.awrap(a());case 7:o=l.sent,this.scrollListener=i(o?s:n,this.pageName);case 9:case"end":return l.stop()}}),null,this)},detached:function(){this.scrollListener&&r(this.scrollListener,this.pageName)},methods:{onTouchMove:function(){},handleSticky:function(){var t=this;try{top&&a().then((function(e){t.stickyAvailable=e,t.hasHandleSticky=!0}))}catch(t){}}}});
},{isPage:false,isComponent:true,currentFile:'components/wm-sticky/index.js'});require("components/wm-sticky/index.js");;__wxRoute = "npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index";__wxRouteBegin = true;__wxAppCurrentFile__="npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.js";define("npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../../../babel/runtime7_2_0/helpers/interopRequireDefault"),e=require("./config"),a=t(require("./version-compare"));Component({externalClasses:["loading-class"],properties:{modal:{type:Object,value:null,observer:function(t){t&&t.type&&this.initData("modal",t.type)}},error:{type:Object,value:null,observer:function(t){t&&t.type&&this.initData("error",t.type)}},dialog:{type:Object,value:null,observer:function(t){t&&t.type&&this.initData("dialog",t.type)}},loading:{type:Boolean},config:{type:Object,value:{img:e.LOADING_CONTENT.img,txt:e.LOADING_CONTENT.text,tips:e.PROGRESS_MODAL_TIPS}},loadingpicfromprops:{type:Boolean,value:!1}},data:{modalData:null,errorData:null,dialogData:null,loadingTip:""},lifetimes:{attached:function(){}},detached:function(){this.clearLoadingTip()},methods:{initData:function(t,e){var a=this;if(e)try{this.sysInfo=this.sysInfo||wx.getSystemInfoSync(),this.setGeoData(t,e)}catch(i){wx.getSystemInfo({success:function(i){a.sysInfo=i,a.setGeoData(t,e)},fail:function(){a.setGeoData(t,e)}})}},setGeoData:function(t,e){"modal"===t?this.setModalData(e):"error"===t?this.setErrorData(e):this.setDialogData(e),"modal"!==t&&this.clearLoadingTip()},onBtnTap:function(t){var e=this,a=t.currentTarget.dataset,i=a.key,s=a.status,n=this.data.modalData;switch(i){case"loc-select":this.triggerEvent("navloc",{status:s,modalExtra:n&&n.extra});break;case"reload":this.reload();break;case"permission":this.triggerEvent("permission");break;case"opensetting":wx.openSetting({success:function(t){return e.openSettingCb({detail:t})}}),this.openSettingTap();break;case"confirm":var o=this.data.modal;this.triggerEvent("confirm",o);break;case"dialog":this.close("dialog");break;default:this.close("btn")}},onMaskTap:function(){if("address"===(this.data.modalData||{}).status){var t=this.data.modal;this.triggerEvent("confirm",t)}},reload:function(t){void 0===t&&(t="reload"),this.triggerEvent("reload",{type:t})},close:function(t){void 0===t&&(t=""),this.triggerEvent("close",{type:t})},openSettingTap:function(){this.triggerEvent("opensettingtap",{status:this.data.error?"error":"loading"})},openSettingCb:function(t){var e=t.detail.authSetting["scope.userLocation"];e&&this.reload("opensetting"),this.triggerEvent("opensetting",{locationAuth:e})},setModalData:function(t){var e={title:"",status:t,content:"定位失败，请检查一下网络环境",btns:[{key:"loc-select",txt:"选择地址"}]},a=this.data.modal;switch("auth"!==t&&"auth"!==a.type||(e.status="loading",e.btns.push(this.getAuthBtn(a.extra))),e.status){case"fail":case"timeout":e.btns.push({key:"reload",txt:"重新定位"});break;case"loading":e.title="正在寻找您的位置","auth"!==a.type&&(e.btns=[{key:"loc-select",txt:"选择地址"}]);break;case"auth":e.title="定位服务未开启",e.content="检测到您没打开美团外卖的定位权限，请到设置启用：点击右上角按钮，进入小程序介绍页，再次点击右上角按钮，进入设置页面，打开定位权限";break;case"address":var i=a.extra||{},s=i.address,n=i.loctype;e.title="已找到您的位置",e.subtitle="storage"===n?"最近使用":"猜你位置",e.content=s||"",e.btns=[{key:"loc-select",txt:"换个地址"},{key:"confirm",txt:"确定使用",tap:this.confirm}];break;default:return void this.close()}e.btns.length>1&&(e.btns[0].color="#333333"),this.setData({modalData:e}),this.setLoadingTip(e.status)},setErrorData:function(t){var e={status:t,content:"找不到您的位置请开启定位或手动选择地址",img:"https://p0.meituan.net/travelcube/722439077b15e98c3095b9869500961222171.png",btns:[{key:"loc-select",txt:"手动选择地址"}]};"auth"===t?e.btns.unshift(this.getAuthBtn()):("permission"===t&&(e.content=this.getPermissionTxt()),e.btns.unshift({key:"reload",txt:"再来一次"})),this.setData({errorData:e})},getPermissionTxt:function(){var t=(this.sysInfo||{}).platform;return this.platform=t,"ios"===t?"请打开手机设置-隐私-定位服务,并允许微信访问位置，以查看附近优质商家。":"请打开手机系统设置中微信的定位权限，以查看附近优质商家。"},getAuthBtn:function(t){var e=(this.sysInfo||{}).SDKVersion;return this.SDKVersion=e,this.supportOpenSetting=e?(0,a.default)(e,"2.0.7"):!wx.openSetting,"permission"===t?{key:"permission",txt:"开启定位"}:{key:"opensetting",txt:"开启定位",openType:this.supportOpenSetting?"openSetting":""}},setDialogData:function(t){"permission"===t?this.setData({dialogData:{status:t,title:"定位服务未开启",content:this.getPermissionTxt(),btns:[{key:"dialog",txt:"知道了"}]}}):this.setData({dialogData:{status:t,title:"定位服务未开启",content:"找不到您的位置请开启定位或手动选择地址",btns:[{key:"loc-select",txt:"选择地址",color:"#333333"},this.getAuthBtn()]}})},setLoadingTip:function(t){var e=this;if("loading"===t){var a=this.data.config.tips,i=a.length-1;this.setData({loadingTip:a[0]}),i>0&&!this.loadingTimer&&(this.loadingTipIndex=1,this.loadingTimer=setInterval((function(){var t=e.data.modalData;t&&"loading"===t.status?(e.setData({loadingTip:a[e.loadingTipIndex]}),e.loadingTipIndex+=1,e.loadingTipIndex>i&&(e.loadingTipIndex=0)):e.clearLoadingTip()}),4e3))}else this.clearLoadingTip()},clearLoadingTip:function(){this.loadingTimer&&(clearInterval(this.loadingTimer),this.loadingTimer=null)}}});
},{isPage:false,isComponent:true,currentFile:'npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.js'});require("npm/wmfe/brandy-geo-wxapp1_0_1-beta1/src/geo/component/index.js");;__wxRoute = "npm/wmfe/wxapp-component-navigator0_1_8/src/components/index";__wxRouteBegin = true;__wxAppCurrentFile__="npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.js";define("npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("./nav-throttle");Component({externalClasses:["view-class","navigator-class"],properties:{url:{type:String,value:""}},methods:{onTab:function(){this.triggerEvent("navtap")},onClick:t((function(){wx.navigateTo({url:this.properties.url})}),500)}});
},{isPage:false,isComponent:true,currentFile:'npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.js'});require("npm/wmfe/wxapp-component-navigator0_1_8/src/components/index.js");;__wxRoute = "pages/index/components/airdrop-after-notification/airdrop-after-notification";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-after-notification/airdrop-after-notification.js";define("pages/index/components/airdrop-after-notification/airdrop-after-notification.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({data:{showNotification:!1},methods:{showNotification:function(i){this.setData({showNotification:i})}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-after-notification/airdrop-after-notification.js'});require("pages/index/components/airdrop-after-notification/airdrop-after-notification.js");;__wxRoute = "pages/index/components/airdrop-container/airdrop-container";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-container/airdrop-container.js";define("pages/index/components/airdrop-container/airdrop-container.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../npm/babel/runtime7_2_0/helpers/interopRequireDefault");exports.__esModule=!0,exports.tjJson=exports.getUserType=void 0;var a=e(require("../../../../npm/babel/runtime7_2_0/regenerator/index")),t=require("../../../../components/login-sdkV2/index"),n=require("../../../../common/ad/ad"),i=require("../../../../api/activity-api").request,o=require("../../../../utils/change-url-arg"),r=require("../../../../api/analytics").view;exports.getUserType=function(e){return e?"30_user"===e?2:"15_user"===e?1:e:-1};exports.tjJson=function(e){var a={group_name:-1,exp_id:-1};try{var t=JSON.parse(e),n=t.userPortraitExpId,i=void 0===n?-1:n,o=t.userPortraitTypeExpId;a={group_name:i,exp_id:void 0===o?-1:o}}catch(e){}return a},require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{paddingTop:{value:0,type:Number},paddingBottom:{value:0,type:Number},ifOnPullDownRefresh:{value:!1,type:Boolean},userId:String,uuid:String,lch:String,env:String,customTabBar:Object},data:{airdropCouponData:null,airdropPopupData:null,airdropLayerData:null,showAirDropLayer:!1,wlwcParams:null},attached:function(){},methods:{getType:function(){switch(!0){case!!this.data.airdropCouponData:return"coupon";case!!this.data.airdropLayerData:return"activity";case!!this.data.newUserDiscount:return"newuser";default:return""}},airdropLogin:function(){this.triggerEvent("airdropLogin",!0)},showCloseAnimation:function(e){var a=this;e&&e.detail?this.setData({showAirDropLayer:!1}):(this.setData({showHideAnimate:!0}),setTimeout((function(){a.setData({showAirDropLayer:!1},(function(){}))}),300))},bgClick:function(e){var a=this.data.showTianjiangLayer;this.showCloseAnimation(e),a&&getApp().eventBus.fire("airdrop:close")},onClickAirdropLogin:function(e){var a=this;t.loginPlugin.wxLogin().then((function(){a.loadAirDropCoupon(e).then((function(){var e=a.selectComponent("#coupon");e&&e.onInit()}))}))},move:function(){},navToRedpackPage:function(e){var a=global.mmb.getUserInfoSync()||{},t=a.nickName,n=a.avatarUrl;e=o.changeUrlArg(e,"nickName",t),e=o.changeUrlArg(e,"avatarUrl",n);var i=encodeURI(e);wx.navigateTo({url:"/pages/web-view/web-view?isHideShareMenu=1&type=REDIRECT&redirectUrl="+encodeURIComponent(i)})},loadAirDropCoupon:function(e){var t,o,s,u,p,c,d,g,h,l,w,m,v,D,y,f,T,_,L,x,b,C,k,j,A=this;return a.default.async((function(I){for(;;)switch(I.prev=I.next){case 0:if(t=global.mmb.getIdInfoSync()||{},o=t.openId,(e||!this._airdrop_loaded)&&o){I.next=3;break}return I.abrupt("return");case 3:if(I.prev=3,this.data.ifOnPullDownRefresh){I.next=28;break}return this._airdrop_loaded=!0,(0,n.adMonitor)(1),s=!0,I.next=10,a.default.awrap(wx.getSetting());case 10:return(u=I.sent)&&u.authSetting&&u.authSetting["scope.userLocation"]&&(s=!1),I.next=14,a.default.awrap(i({domain:"https://marketing.waimai.meituan.com/",url:"o/wxapp/resource/position/tianJiang",method:"POST",successCode:0,useRealAppVersion:!0,ignoreLocation:s,data:{isJustLogin:!!e,openId:o}}));case 14:p=I.sent,c=p.resourceType,d=p.couponInfo,g=void 0===d?{}:d,h=p.luckySkyInfo,l=p.commonJson,w=!1,l&&(l.code&&"entrance_wxxinketianjiang5_et_code"===l.code||(m=l.dataList,v=void 0===m?[]:m,D=l.firstDisCount,v&&v.length>=3&&D>0&&(w=!0,this.setData({"newUserDiscount.airdropData":l})))),e&&1==+c?(y=g.tianJiangUi||{},f=y.wxNewUserDirectLink,T=g.code,f?(this.navToRedpackPage(f),this.setData({showAirDropLayer:!1,showTianjiangCoupon:!1})):999==+T?(r("b_Trk2q",{channel_id:1,is_new:1===g.activityId?1:0,is_login:g.needLogin?0:1}),this.toast({message:"抱歉您不符合活动条件，无法参加活动"})):this.setData({airdropCouponData:g,showTianjiangCoupon:!w,showTianjiangLayer:!1})):c?1==+c?(_=Boolean(g.useTianJiangNewStyle),this.setData({airdropCouponData:g,airdropPopupData:g,showTianjiangCoupon:!w&&!_,showTianjiangLayer:!1}),r("b_ng3k2pgg",{is_suc:1})):2==+c&&this.setData({airdropLayerData:h,showTianjiangLayer:!w,showTianjiangCoupon:!1}):this.setData({showTianjiangCoupon:!1,showTianjiangLayer:!1}),(this.data.showTianjiangCoupon||this.data.showTianjiangLayer)&&this.setData({showAirDropLayer:!0}),L=(g||{}).popupView,b=(x=void 0===L?{}:L).couponContent,C=x.couponLinkText,k=x.couponLinkUrl,j=x.couponStatus,wx.nextTick((function(){1==+j?(r("b_waimai_0oqi4i20_mv",{coupons_status:1}),b&&A.triggerEvent("toast",{message:b||""})):0==+j&&b&&C&&A.triggerEvent("airdropTips",{title:b||"",banner:C||"",url:k||""})})),c||g||h||l||this.data.showTianjiangLayer||this.setData({showAirDropLayer:!1});case 28:I.next=34;break;case 30:I.prev=30,I.t0=I.catch(3),r("b_ng3k2pgg",{is_suc:0}),this.setData({showTianjiangCoupon:!1,showTianjiangLayer:!1});case 34:case"end":return I.stop()}}),null,this,[[3,30]])}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-container/airdrop-container.js'});require("pages/index/components/airdrop-container/airdrop-container.js");;__wxRoute = "pages/index/components/airdrop-coupon/airdrop-coupon";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-coupon/airdrop-coupon.js";define("pages/index/components/airdrop-coupon/airdrop-coupon.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../@babel/runtime/helpers/Arrayincludes");var e=require("../../../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../../../npm/babel/runtime7_2_0/helpers/extends")),a=e(require("../../../../npm/babel/runtime7_2_0/regenerator/index")),i=require("../../../../utils/webview-link-generator"),n=require("../../../../utils/openWxChannel"),o=require("../../../../constants"),r=require("../../../../utils/throttle"),u=require("../../../../api/analytics").event,s=require("../../../../utils/schema");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{airdropCouponData:Object,uuid:String,lch:String,env:String,userId:String,paddingTop:{type:Number,value:0},paddingBottom:{type:Number,value:0}},data:{hasCoupon:!1,showAirDropLayer:!1,templateData:[],useSuperMach:!1,useNestMach:!1,defaultPic:"https://p0.meituan.net/ingee/fa09b080d9eb2fc4b533f190f9d83c7611047.png",useNewMach:!0,isTestEnv:["qa"].includes(getApp().store.getState().dev.env),moduleIdStr:"wx_homepage_tianjiangA"},couponCount:0,attached:function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.awrap(this.onInit());case 2:case"end":return e.stop()}}),null,this)},created:function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},methods:{onInit:function(){var e,i,o,s,c,p,d,l,h,m,_,g,v,y,f,C,b,w,I,D,L,x,T,U,k,A,S,j,P,M,O,N,E,B,q,R=this;return a.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:try{if(e=this.data.airdropCouponData,i=e.needLogin,o=e.activityId,s=e.templateData,c=e.styleType,p=e.templateId,d=this.data.airdropCouponData.tianJiangUi||{},l=d.tjUnloginPicUrl,h=d.tjSuccessHeadPicUrl,m=d.tjBgColor,_=d.tjButtonText,g=d.tjButtonTextColor,v=d.tjButtonColor,y=d.tjButtonDirectLink,f=d.wxNewUserDirectLink,C=d.tjUseButtonColor,b=d.tjUseButtonTextColor,w=d.entry_item_id,I=d.activity_id,this.couponCount=0,D=this.data.airdropCouponData.coupons||[],this.jumpHandle=r((function(e){(0,n.openWxChannel)(e)}),500),s)try{L=JSON.parse(s),"Array"===this.getDataType(L)&&1===c?(x=D.filter((function(e){return"POI"!==e.wmCouponSource})),L.forEach((function(e,t){if(e.feUseData={ad_type:e.adType,extInfo:e.feUseData,index:t},e.feUseData.extInfo.ad_type=e.adType||e.ad_type,e.feUseData.extInfo.machTemplateIndex=e.feUseData.extInfo.machTemplateIndex||t,e.isForceDedencyCoupon){var a=D.find((function(t){return(t.wmPoiIdList||[])[0]==e.poiId}));if(a){var i={title:a.couponDisplayName,amount:a.couponAmountOrDiscount,price_limit:a.orderAmountLimitDoc,coupon_type:a.poiCouponType,logo_url:a.brandCouponLogoUrl,direct_link:a.couponDirectLink,mutex_type:a.mutexType,advert_type:a.advertType,poi_id:e.poiId,coupon_id:a.id,coupon_view_id:a.couponViewId};e.feUseData=Object.assign(e.feUseData,i)}else e.templateFiltered=!0}e.templateFiltered||x.push({useMach:!0,templateId:e.templateId,feUseData:e.feUseData,wmCouponSource:"POI"})})),D=x,this.couponCount=Math.min(3,D.length)):"Array"===this.getDataType(L)&&3===c?(this.setData({useSuperMach:!0,templateData:L}),this.couponCount=1):"Array"===this.getDataType(L)&&4===c&&p&&this.setData({templateId:p,styleType:c,useNestMach:!0,templateData:L}),T=L.allowance_style||{},U=T.adType,k=T.chargeInfo,A=T.price,S=T.schema_url,U&&D.unshift({couponAmountOrDiscount:A,couponDirectLink:S,wmCouponSource:"ALLOWANCE",maiDianInfo:{adType:U,adPoiChargeInfo:k}})}catch(e){}j=0!==D.length&&4!==c,1!==o||this.data.useSuperMach||u({event_type:"view",val_bid:"b_6SDBh",val_lab:this.getCusVal(o,i)}),P=0,M=[],O=[],N=[],E=D.map((function(e,t){var a={advertType:e.advertType,advertIcon:e.advertIcon,couponDisplayName:e.couponDisplayName,brandCouponLogoUrl:e.brandCouponLogoUrl,wmActCouponTemplateId:e.wmActCouponTemplateId,orderAmountLimitDoc:e.orderAmountLimitDoc,useAllLimitsDoc:e.useAllLimitsDoc,couponValidTimeDoc:e.couponValidTimeDoc,couponAmountOrDiscount:e.couponAmountOrDiscount,maiDianInfo:e.maiDianInfo,wmCouponSource:e.wmCouponSource,wmCouponType:e.wmCouponType,skuInfoList:e.skuInfoList||[],mutexType:e.mutexType,couponDirectLink:e.couponDirectLink,wmPoiIdList:e.wmPoiIdList,wmCouponLimitShippingType:e.wmCouponLimitShippingType,wmActCouponChannelConfigId:e.wmActCouponChannelConfigId,marketingActivityId:e.marketingActivityId,couponConfigId:e.couponConfigId,useMach:e.useMach,templateId:e.templateId,feUseData:e.feUseData,orderAmountLimit:e.orderAmountLimit,couponStyleType:e.couponStyleType,couponDetail:e.couponDetail,leftLogoUrl:e.leftLogoUrl,rightPicUrl:e.rightPicUrl,couponStyleTypeExpId:e.couponStyleTypeExpId,couponType:e.couponType};a.brandCouponLogoUrl=R.imgCrop(a.brandCouponLogoUrl,180,180),a.skuInfoList.forEach((function(e){e.spuPictureUrl=R.imgCrop(e.spuPictureUrl,180,180)}));var i=(""+a.couponAmountOrDiscount).split("."),n=i[0],o=0;i.length>1&&n<100&&(o="."+i[1]),a.intMoney=n,a.pointMoney=o;var r=(""+a.orderAmountLimit).split("."),s=r[0],c=0;if(r.length>1&&s<100&&(c="."+r[1]),a.intLimit=s,a.pointLimit=c,!("POI"!==a.wmCouponSource&&"ALLOWANCE"!==a.wmCouponSource||(P+=1,a.useMach||R.data.useSuperMach))){var p={ad:{adChargeInfo:{},adType:""}},d=a.maiDianInfo;if(d&&d.adPoiChargeInfo){p.ad.adType=d.adType,p.ad.adChargeInfo=R.getMaiDianInfoObj(d.adPoiChargeInfo),p.ad.adChargeInfo.api_pos="P0_"+t,p.poi_id=(a.wmPoiIdList||[])[0],a.val_lab=p,u({event_type:"view",val_bid:"b_8cv3w9au",val_lab:p}),u({event_type:"view",val_bid:"b_yazui6yd",val_lab:p});for(var l=0;l<a.skuInfoList.length;l++){var h=Object.assign({},p);h.spu_id=a.skuInfoList[l].spuId,h.index=l,h.poi_index=t,u({event_type:"view",val_bid:"b_3or27oso",val_lab:h})}}}return M.push(e.wmActCouponChannelConfigId||"null"),O.push(e.marketingActivityId||"null"),N.push(e.couponConfigId||"null"),a})),j&&!E[0].useMach&&"POI"===E[0].wmCouponSource&&0===E[0].skuInfoList.length&&(j=!1),1===o&&(j?B="background:"+C+";color:"+b:j=!!l),1===o&&(l?u({event_type:"view",val_bid:"b_ZZQPc",val_lab:(0,t.default)({ad_num:P},this.getCusVal(o,i))}):this.data.useSuperMach||u({event_type:"view",val_bid:"b_waimai_vc515bi2_mv",val_lab:(0,t.default)({ad_num:P},this.getCusVal(o,i))})),this.data.useSuperMach||this.data.useNestMach||u({event_type:"view",val_bid:"b_cTwkJ",val_lab:{ad_num:P,coupon_id:N.join(","),channel_id:1,is_login:this.data.needLogin?0:1,is_new:1===this.data.activityId?1:0,Redchannel_id:M.slice(0,3).join(","),entry_item_id:O.slice(0,3).join(","),page_style_tag:0}}),q=j||this.data.useSuperMach||this.data.useNestMach,4!==c||this.data.useNestMach||(q=!1),q||this.triggerEvent("closeLayer",!0),!j||i||this.data.useNestMach||this.data.useSuperMach||this.headerPicShowReport(h,y,o,I,w),this.setData({hasCoupon:j,showAirDropLayer:q,gotoUseBtnStyle:B,coupons:E,tianJiangUi:{tjUnloginPicUrl:l,tjSuccessHeadPicUrl:h,tjBgColor:m,tjButtonText:_,tjButtonColor:v,tjButtonDirectLink:y,tjButtonTextColor:g,wxNewUserDirectLink:f},needLogin:i,activityId:o,maiDianExtraIno:this.getMaiDianExtraInfo()})}catch(e){}case 1:case"end":return a.stop()}}),null,this)},onMachError:function(e){var t,a="coupons["+e.currentTarget.dataset.index+"].templateFiltered";this.setData(((t={})[a]=!0,t)),this.couponCount-=1,0===this.couponCount&&this.triggerEvent("closeLayer",!0)},getDataType:function(e){return e?e instanceof Array?"Array":e instanceof Object?"Object":"":""},imgCrop:function(e,t,a){return/(p0|p1|p2|img)/.test(e)&&-1===e.indexOf("@")?e+"@"+t+"w_"+a+"h_1e_1c":e||""},jumpUrl:function(e,t){var o;return a.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===t&&(t=!1),t||this.triggerEvent("closeLayer"),!(0,n.isWxChannel)(e)){r.next=6;break}this.jumpHandle(e),r.next=18;break;case 6:if(!s.isAppPage(e)){r.next=10;break}wx.navigateTo({url:s.getAppPageUrl(e)}),r.next=18;break;case 10:if(!(e.match("pages/index/index")||e.match("pages/orders/orders")||e.match("pages/mine/mine"))){r.next=14;break}wx.switchTab({url:e}),r.next=18;break;case 14:return r.next=16,a.default.awrap((0,i.linkGeneratorAsync)({url:e,useUUID:!0}));case 16:o=r.sent,wx.navigateTo({url:o});case 18:case"end":return r.stop()}}),null,this)},goToUse:function(){this.headerPicClickReport(),this.jumpUrl(this.data.tianJiangUi.tjButtonDirectLink)},gotoFood:function(e){var t=e.currentTarget.dataset.url,a=e.currentTarget.dataset.index,i=e.currentTarget.dataset.skuindex,n=e.currentTarget.dataset.item,o=this.data.coupons[a].val_lab||{};o.spu_id=n.spuId,o.index=i,o.poi_index=a,u({event_type:"click",val_bid:"b_0w3urz8k",val_lab:o}),this.jumpUrl(t)},onClickUseCoupon:function(e){var t=e.currentTarget.dataset.url,a=e.currentTarget.dataset.index,i=this.data.coupons[a]||{},n=i.val_lab||{},o=i.wmCouponSource;i.useMach||(u({event_type:"click",val_bid:"b_am38wg1l",val_lab:n}),"POI"!==o&&"ALLOWANCE"!==o&&u({event_type:"click",val_bid:"b_waimai_uefk9fqh_mc",val_lab:{coupon_id:i.couponConfigId,channel_id:1,is_login:this.data.needLogin?0:1,is_new:1===this.data.activityId?1:0,Redchannel_id:i.wmActCouponChannelConfigId,entry_item_id:i.marketingActivityId,page_style_tag:0}}),t?this.jumpUrl(t):(this.setData({showAirDropLayer:!1}),this.triggerEvent("closeLayer")))},goToMyCoupon:function(){this.jumpUrl("/pages/my-coupons/my-coupons",!0)},newCloseLayerReport:function(){var e=(0,t.default)({is_superstyle:this.data.useSuperMach?1:0},this.getCusVal());u({event_type:"click",val_bid:"b_lQR9G",val_lab:e})},reportClose:function(){u({event_type:"click",val_bid:"b_fbl7w69q"}),this.newCloseLayerReport()},closeLayer:function(e){var t=e.currentTarget.dataset.mask,a=this.data.activityId;1==+t&&this.reportClose(),3==+t&&(1===a||u({event_type:"click",val_bid:"b_0o5mwhu9"}),this.newCloseLayerReport()),this.triggerEvent("closeLayer"),1!=+t&&3!=+t||getApp().eventBus.fire("airdrop:close")},getMaiDianInfoObj:function(e){for(var t={},a=e.split("&"),i=0;i<a.length;i++){var n=a[i];if(n){var o=n.split("=");o.length>1&&o[0]&&o[1]&&(t[o[0]]=o[1])}}return this.data.adChargeInfo=t,t},getMaiDianExtraInfo:function(){var e=[],t=getApp().store.getState().wx.model;return e.push("wm_ctype="+o.NAME),e.push("lch="+(this.data.lch||"wx")),this.data.uuid&&e.push("wm_did="+this.data.uuid),t&&e.push("wm_dtype="+t),e.join("&")},onClickAirdropLogin:function(){u({event_type:"click",val_bid:"b_u8INK",val_lab:this.getCusVal()}),this.triggerEvent("airdropLogin",!0)},getCusVal:function(e,t){return void 0===e&&(e=this.data.activityId),void 0===t&&(t=this.data.needLogin),{channel_id:1,is_new:1===e?1:0,is_login:t?0:1}},headerPicShowReport:function(e,t,a,i,n){e&&t&&u({event_type:"view",cid:"c_m84bv26",val_bid:"b_waimai_wb16rgtx_mv",val_lab:this.getHeaderPicParams(a,i,n)})},headerPicClickReport:function(){var e=this.data.airdropCouponData.tianJiangUi||{},t=e.tjSuccessHeadPicUrl,a=e.tjButtonDirectLink,i=e.entry_item_id,n=e.activity_id,o=(this.data.airdropCouponData||{}).activityId;t&&a&&u({event_type:"click",cid:"c_m84bv26",val_bid:"b_waimai_wb16rgtx_mc",val_lab:this.getHeaderPicParams(o,n,i)})},getHeaderPicParams:function(e,t,a){return void 0===e&&(e=this.data.activityId),{is_new:1===e?1:0,activity_id:t,entry_item_id:a}}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-coupon/airdrop-coupon.js'});require("pages/index/components/airdrop-coupon/airdrop-coupon.js");;__wxRoute = "pages/index/components/airdrop-layer/airdrop-layer";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-layer/airdrop-layer.js";define("pages/index/components/airdrop-layer/airdrop-layer.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),r=e(require("../../../../npm/babel/runtime7_2_0/regenerator/index")),t=e(require("../../../../components/webp/webp")),a=require("../../../../components/login-sdkV2/index"),i=require("../../../../utils/lx"),n=require("../../../../utils/webview-link-generator"),o=require("../../../../utils/openWxChannel"),l=require("../../../../utils/throttle");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{container:{type:Number,value:0},paddingBottom:{type:Number,value:0},airdropLayerData:{type:Object,value:{}}},data:{showAirdropLayer:!1,airdropLayerBackground:""},ready:function(){var e=this;try{var r=this.data.airdropLayerData;this.jumpHandle=l((function(r){(0,o.isWxChannel)(r)?(0,o.openWxChannel)(r):wx.navigateTo({url:(0,n.linkGeneratorSync)({url:e.data.airdropLayerData.linkUrl}),fail:function(){}})}),500),r.picUrl&&r.linkUrl&&this.setData({showAirdropLayer:!0,airdropLayerBackground:(0,t.default)(r.picUrl)}),this.report(i.lxMge.view,"b_waimai_b95dnrjp_mv")}catch(e){}},methods:{report:function(e,t){var i,n;return r.default.async((function(o){for(;;)switch(o.prev=o.next){case 0:return i=this.data.airdropLayerData,o.next=3,r.default.awrap(a.loginPlugin.getToken());case 3:if(!o.sent){o.next=7;break}o.t0=1,o.next=8;break;case 7:o.t0=0;case 8:n=o.t0,e(t,{entry_item_id:i.resourceId,pop_type:i.popType||0,is_login:n,channel_id:0});case 10:case"end":return o.stop()}}),null,this)},closeLayer:function(){this.reportClose(),this.triggerEvent("closeLayer"),getApp().eventBus.fire("airdrop:close")},reportClose:function(){this.report(i.lxMge.click,"b_waimai_7x85f9qm_mc")},onClickLayer:function(){this.report(i.lxMge.click,"b_waimai_qk89hxg2_mc");var e=this.data.airdropLayerData.linkUrl;this.jumpHandle(e),this.setData({showAirdropLayer:!1}),this.triggerEvent("closeLayer")}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-layer/airdrop-layer.js'});require("pages/index/components/airdrop-layer/airdrop-layer.js");;__wxRoute = "pages/index/components/airdrop-popup/airdrop-popup";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-popup/airdrop-popup.js";define("pages/index/components/airdrop-popup/airdrop-popup.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../@babel/runtime/helpers/Arrayincludes");var e=require("../../../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../../../npm/babel/runtime7_2_0/regenerator/index")),a=e(require("../../../../npm/babel/runtime7_2_0/helpers/toConsumableArray")),n=require("../../../../utils/webview-link-generator"),i=require("../../../../api/analytics").event,o=require("../../../../utils/schema");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{airdropPopupData:{type:Object,value:{},observer:function(e){var t=this;if(e)try{var n=global.grayModeInfo||{},o=n.grayInfo,r=void 0===o?{}:o,s=n.homeConfig,u=void 0===s?{}:s;"0"!==r.grayness_type&&this.setData({isGray:!0,grayString:u.graystring});var c=Boolean(e.useTianJiangNewStyle),p=JSON.parse(e.templateData||"[]");p.forEach((function(e,t){e.feUseData={ad_type:e.adType,extInfo:e.feUseData,index:t},e.feUseData.extInfo.ad_type=e.adType||e.ad_type,e.feUseData.extInfo.machTemplateIndex=e.feUseData.extInfo.machTemplateIndex||t}));var h=e.coupons||[],l=[].concat((0,a.default)(h),(0,a.default)(p)),d=wx.getSystemInfoSync(),g=wx.getMenuButtonBoundingClientRect(),f=Number(d.statusBarHeight),m=f+g.height+(g.top-f)*d.pixelRatio+86,v=m+438;if(c&&l.length){this.setData({showPopup:!0,machData:l,bjColor:e.newStyleBackgroundColor,paddingTop:m,top:v},(function(){t.setData({translateDown:!0}),setTimeout((function(){t.closePopup(0)}),(e.newStyleDuration||4e3)+1e3)}));var y=[],_=[],D=[];h.forEach((function(e){y.push(e.wmActCouponChannelConfigId||"null"),_.push(e.marketingActivityId||"null"),D.push(e.couponConfigId||"null")})),i({event_type:"view",val_bid:"b_cTwkJ",val_lab:{position_count:e.positionCount,channel_id:1,is_login:e.needLogin?0:1,is_new:1===e.activityId?1:0,coupon_id:D.join(","),Redchannel_id:y.slice(0,3).join(","),entry_item_id:_.slice(0,3).join(","),page_style_tag:1}})}}catch(e){this.closePopup(0)}}}},data:{showPopup:!1,translateDown:!1,isGray:!1,grayString:"",machData:[],isTestEnv:["qa"].includes(getApp().store.getState().dev.env),bjColor:"",moduleIdStr:"wx_homepage_tianjiangA",paddingTop:174,top:526},attached:function(){this.touchData={trace:[],touching:!1}},methods:{touchStart:function(e){if(1!==e.touches.length)return this.touchData.touching=!1,void(this.touchData.trace=[]);var t=e.touches&&e.touches[0];t&&(this.touchData.touching=!0,this.touchData.trace=[{x:t.screenX||t.clientX||t.pageX,y:t.screenY||t.clientY||t.pageY}])},touchMove:function(e){if(this.touchData.touching){var t=e.touches&&e.touches[0];this.touchData.trace.push({x:t.screenX||t.clientX||t.pageX,y:t.screenY||t.clientY||t.pageY})}},touchEnd:function(){this.touchData.touching&&(this.touchData.touching=!1,1===this.isUpslide()&&this.closePopup(1),this.touchData.trace=[])},isUpslide:function(){var e=this.touchData.trace||[],t=e.length;if(t<2)return!1;var a=e[0],n=e[t-1];return!!(a&&n&&n.y&&a.y)&&(a.y>n.y+10?1:0)},closePopup:function(e){var t=this;void 0===e&&(e=0),this.data.showPopup&&(1===e&&i({event_type:"click",val_bid:"b_waimai_xvlr5qpi_mc",val_lab:{mode:e}}),this.setData({translateDown:!1},(function(){setTimeout((function(){t.setData({showPopup:!1})}),1e3)})))},jumpUrl:function(e){var a,i,r;return t.default.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=e.detail.url,i=void 0===a?"":a){s.next=3;break}return s.abrupt("return");case 3:if(!o.isAppPage(i)){s.next=7;break}wx.navigateTo({url:o.getAppPageUrl(i)}),s.next=15;break;case 7:if(!(i.match("pages/index/index")||i.match("pages/orders/orders")||i.match("pages/mine/mine"))){s.next=11;break}wx.switchTab({url:i}),s.next=15;break;case 11:return s.next=13,t.default.awrap((0,n.linkGeneratorAsync)({url:i,useUUID:!0}));case 13:r=s.sent,wx.navigateTo({url:r});case 15:case"end":return s.stop()}}))},onMachError:function(e){var t,a="coupons["+e.currentTarget.dataset.index+"].templateFiltered";this.setData(((t={})[a]=!0,t)),this.couponCount-=1,0===this.couponCount&&this.closePopup(0)}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-popup/airdrop-popup.js'});require("pages/index/components/airdrop-popup/airdrop-popup.js");;__wxRoute = "pages/index/components/airdrop-tips/airdrop-tips";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/airdrop-tips/airdrop-tips.js";define("pages/index/components/airdrop-tips/airdrop-tips.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var i=require("../../../../api/analytics"),t=i.view,e=i.click,a=0,o=1,n=0;require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{show:{type:Boolean,value:!1},airdropTipProps:Object},ready:function(){var i=this;this.data.show&&(t("b_waimai_0oqi4i20_mv",{coupons_status:0}),clearTimeout(a),this.setData({active:!0}),wx.nextTick((function(){a=setTimeout((function(){return i.hide()}),3e3)})))},data:{active:!1},methods:{hide:function(){var i=this;this.setData({active:!1}),clearTimeout(o),o=setTimeout((function(){wx.nextTick((function(){i.triggerEvent("hide")}))}),400)},goBannerLink:function(){e("b_waimai_0oqi4i20_mc",{coupons_status:0}),this.data.airdropTipProps.url&&wx.navigateTo({url:"/pages/web-view/web-view?type=DIRECT&webviewUrl="+encodeURIComponent(this.data.airdropTipProps.url)})},touchStart:function(i){n=i.touches[0].pageY},touchEnd:function(i){i.changedTouches[0].pageY-n<-10?this.hide():this.goBannerLink()}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/airdrop-tips/airdrop-tips.js'});require("pages/index/components/airdrop-tips/airdrop-tips.js");;__wxRoute = "pages/index/components/home-header-background/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/home-header-background/index.js";define("pages/index/components/home-header-background/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t={options:{multipleSlots:!0,pureDataPattern:/^_/},properties:{bannerBottom:{type:Object,value:null,observer:function(t){var e=t.pic_url;this.setData({picUrl:e})}}},data:{picUrl:""}};require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component(t);
},{isPage:false,isComponent:true,currentFile:'pages/index/components/home-header-background/index.js'});require("pages/index/components/home-header-background/index.js");;__wxRoute = "pages/index/components/mt-back/mt-back";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/mt-back/mt-back.js";define("pages/index/components/mt-back/mt-back.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../utils/mt-back");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{showLogo:{type:Boolean,value:!0},showBack:{type:Boolean,value:!0},isWhiteStyle:{type:Boolean,value:!1}},methods:{onClickBack:function(){(0,e.mtBack)()}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/mt-back/mt-back.js'});require("pages/index/components/mt-back/mt-back.js");;__wxRoute = "pages/index/components/newuser-coupon/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/newuser-coupon/index.js";define("pages/index/components/newuser-coupon/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,i=require("../../../../components/login-sdkV2/index"),n=require("../../../../utils/lx"),r=require("../../constants"),t=require("../../../../common/margarita/index"),a=require("../../../../utils/change-url-arg");(0,t.createModuleComponent)({properties:{newUserCoupon:{type:Object,value:null,observer:function(e){e&&this.reportMV()}}},data:{},attached:function(){var i=this;e=function(e){var n=i.properties.newUserCoupon.linkUrl;i.navToRedpackPage(e||n)},this.$on("navToRedpackPage",e)},detached:function(){this.$off("navToRedpackPage",e)},methods:{reportMV:function(){var e=this.properties.newUserCoupon.code;if(e!==r.NEWUSER_ACTION.HIDE_ENTRY)switch(e){case r.NEWUSER_ACTION.GET_COUPON:this.lxNewuserGetRedpackView();break;case r.NEWUSER_ACTION.SHOW_COUPON:this.lxRedpackUsingCouponView();break;case r.NEWUSER_ACTION.UNLOGIN:this.lxNewuserEntryView()}},navToRedpackPage:function(e){var i=global.mmb.getUserInfoSync()||{},n=i.nickName,r=i.avatarUrl;e=a.changeUrlArg(e,"nickName",n),e=a.changeUrlArg(e,"avatarUrl",r);var t=encodeURI(e);wx.navigateTo({url:"/pages/web-view/web-view?isHideShareMenu=1&type=REDIRECT&redirectUrl="+encodeURIComponent(t)})},setNewUserCouponScrollTop:function(){var e=this,i=wx.createSelectorQuery();i.select(".redpack-entry-container").boundingClientRect(),i.selectViewport().scrollOffset(),i.exec((function(i){if(i[0]&&i[1]){var n=24/i[0].left,r=e.cacheScrollTop||0,t=r+i[0].top+i[0].height-90/n;e.newUserRedpackScrollTop=t;var a=r>t;e.data.showNewUserGuideLayer!==a&&e.setData({showNewUserGuideLayer:a})}}))},onRedpackImgClick:function(e){var n=this.properties.newUserCoupon.linkUrl;e.currentTarget.dataset.islogin?(this.lxNewuserGetRedpackClick(),this.navToRedpackPage(n)):(this.lxNewuserEntryClick(),i.loginPlugin.wxLogin({afterLoginAction:"navToRedpackPage"}))},onUsingcoupon:function(){this.lxRedpackUsingCouponClick(),this.triggerEvent("scrollToNearPoi")},lxNewuserEntryClick:function(){n.lxMge.click({val_bid:"b_wat6k1nh"})},lxNewuserEntryView:function(){n.lxMge.view({val_bid:"b_aur5vx0l"})},lxNewuserGetRedpackClick:function(){n.lxMge.click({val_bid:"b_vcuacpkz"})},lxNewuserGetRedpackView:function(){n.lxMge.view({val_bid:"b_f1lbwgh4"})},lxRedpackUsingCouponClick:function(){n.lxMge.click({val_bid:"b_7co8mr24"})},lxRedpackUsingCouponView:function(){n.lxMge.view({val_bid:"b_4ogwbwv9"})}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/newuser-coupon/index.js'});require("pages/index/components/newuser-coupon/index.js");;__wxRoute = "pages/index/components/newuser-growth/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/newuser-growth/index.js";define("pages/index/components/newuser-growth/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../utils/lx"),r=require("../../../../utils/webview-link-generator");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{newUserGrowth:{type:Object,value:null,observer:function(e){e&&this.lxNewUserGrowthView()}}},methods:{onTapCouponBtn:function(){this.lxNewUserGrowthClick();var e=(0,r.linkGeneratorSync)({url:this.properties.newUserGrowth.clickUrl,webviewQuery:{onHideRemain:1}});wx.navigateTo({url:e})},lxNewUserGrowthView:function(){e.lxMge.view({val_bid:"b_xg1h9yaq"})},lxNewUserGrowthClick:function(){e.lxMge.click({val_bid:"b_pxw66u9e"})}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/newuser-growth/index.js'});require("pages/index/components/newuser-growth/index.js");;__wxRoute = "pages/index/components/privacy-dialog/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/privacy-dialog/index.js";define("pages/index/components/privacy-dialog/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../utils/redirParam"),t=require("../../../../utils/lx"),i=require("./utils").setIsFirstInWxapp;require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{},data:{},attached:function(){var e=getCurrentPages(),t=(e&&e.pop()||{}).getTabBar()||{};t.setData&&t.setData({show:!1})},ready:function(){t.lxMge.view("b_waimai_b4mvufh0_mv")},methods:{goPrivacyProtocol:function(){wx.navigateTo({url:"/pages/web-view/web-view?type=REDIRECT&webviewUrl="+encodeURIComponent("https://fe-config.meituan.com/bm/config/fjc4cb6ia0f5iad82j.html")})},goUserProtocol:function(){wx.navigateTo({url:"/pages/web-view/web-view?type=REDIRECT&webviewUrl="+encodeURIComponent("https://rules-center.meituan.com/m/detail/guize/58?activeRule=1")})},onPressAgreeButton:function(){t.lxMge.click("b_waimai_b4mvufh0_mc",{button_name:"同意并使用"}),i(!0);var a=getCurrentPages(),r=a&&a.pop();wx.reLaunch({url:"/pages/index/index?"+e((r||{}).options||{})})},touchstart:function(){}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/privacy-dialog/index.js'});require("pages/index/components/privacy-dialog/index.js");;__wxRoute = "pages/index/components/wlwcEntrance/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/wlwcEntrance/index.js";define("pages/index/components/wlwcEntrance/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../../../npm/babel/runtime7_2_0/helpers/extends")),r=e(require("../../../../npm/babel/runtime7_2_0/regenerator/index")),i=require("../../../../components/login-sdkV2/index"),a=e(require("./index.outlet")),n=require("../../utils"),s=require("../../../../utils/rice-route").getRiceURL,c=require("../../../../api/getWlwcCommonParams").getWlwcCommonParams,l=require("../../../../api/index").teamEntry,o=require("../../../../utils/lx"),u=require("../../../../utils/ipx");require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{gray:{type:Boolean,value:!1},graystring:{type:String,value:"filter: grayscale(0.95);"}},data:{picUrl:"",clickUrl:"",crowdId:"",resourceId:"",isShowWlwc:!1,isIpx:u()},attached:function(){this.scrollAnimation=wx.createAnimation({duration:480}),this.getTeamEntryRequest(),a.default.set(this.getTeamEntryRequest.bind(this))},detached:function(){a.default.restore()},methods:{onViewWlwcEntrance:function(){o.lxMge.view({val_bid:"b_waimai_j1d73hxc_mv",activity_id:"-1",receive_user_type:this.data.crowdId?this.data.crowdId:"-1",task_code:this.data.resourceId?this.data.resourceId:"-1"})},onClickWlwcEntrance:function(){var e,t;return r.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:return o.lxMge.click({val_bid:"b_waimai_36i6a1et_mc",activity_id:"-1",receive_user_type:this.data.crowdId?this.data.crowdId:"-1",task_code:this.data.resourceId?this.data.resourceId:"-1"}),e=(0,n.formatUrl)(this.data.clickUrl,{entryId:"b_waimai_36i6a1et_mc"}),t=s(e),a.next=6,r.default.awrap(i.loginPlugin.isLogin());case 6:if(!a.sent){a.next=10;break}return wx.navigateTo({url:t}),a.abrupt("return");case 10:return a.next=12,r.default.awrap(i.loginPlugin.wxLogin({waitBack:!0}));case 12:wx.navigateTo({url:e});case 13:case"end":return a.stop()}}),null,this)},scrollAnimation:{},scrollEntrance:function(e){e?this.scrollAnimation.translateX(49).opacity(.7).step():this.scrollAnimation.translateX(0).opacity(1).step(),this.setData({scrollAnimation:this.scrollAnimation.export()})},getTeamEntryRequest:function(){var e,i=this;return r.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.default.awrap(c());case 2:e=a.sent,l((0,t.default)({},e)).then((function(e){if(e)try{var t=(JSON.parse(e)||{}).module_list;if(!t||t&&0===t.length)i.setData({isShowWlwc:!1});else{var r=t[0]||{},a=r.resource_id,n=r.json_data||{},s=n.pic_url,c=n.click_url,l=n.crowd_id;i.setData({isShowWlwc:!0,picUrl:s,clickUrl:c,crowdId:l,resourceId:a})}}catch(e){i.setData({isShowWlwc:!1})}else i.setData({isShowWlwc:!1})})).catch((function(e){i.setData({isShowWlwc:!1})}));case 4:case"end":return a.stop()}}))}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/wlwcEntrance/index.js'});require("pages/index/components/wlwcEntrance/index.js");;__wxRoute = "pages/index/components/wm-gif-image/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/wm-gif-image/index.js";define("pages/index/components/wm-gif-image/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{resizeMode:{type:String,value:""},src:{type:String,value:""},placeholder:{type:String,value:""},error:{type:String,value:""},disableCdnOptimization:{type:null,value:!1},cdnOptimizationSize:{type:String,value:""},cdnOptimizationWebp:{type:null,value:!0},style:{type:String,value:""},retry:{type:null,value:!1}},data:{mode:"aspectFit",isLoading:!0,isRepeat:!1,webp:!0,isRetry:!1},observers:{src:function(t){this.setData({url:this.formatUrl(t)})}},lifetimes:{attached:function(){var t=this;if(this.setData({isRetry:"true"===this.properties.retry}),"true"===this.properties.disableCdnOptimization?this.setData({webp:!0}):this.setData({webp:"true"===this.properties.cdnOptimizationWebp}),this.properties.resizeMode){var e=[["cover","aspectFill"],["contain","aspectFit"],["stretch","scaleToFill"],["center","center"],["repeat",function(e){return t.setData({isRepeat:!0}),e}],["left","left"],["right","right"]],i=function(){var t=e,i=Array.isArray(t),r=0;for(t=i?t:t[Symbol.iterator]();;){var s;if(i){if(r>=t.length)break;s=t[r++]}else{if((r=t.next()).done)break;s=r.value}var a=s,n=a[0],p=a[1];if(n===attr)return"function"==typeof p?p&&p.ruleKey:p}}(this.properties.resizeMode);this.setData({mode:i})}}},methods:{formatUrl:function(t){if("true"===this.properties.disableCdnOptimization)return t;if(/s3plus\.meituan\.net/.test(t))return t;if((/\.png/.test(t)||/\.jpg/.test(t))&&"string"==typeof t){var e=t.split("meituan.net");return 2===e.length?this.properties.cdnOptimizationSize?e[0]+"meituan.net/"+this.properties.cdnOptimizationSize+e[1].split(".webp")[0]+".webp":e[0]+"meituan.net/150.1000.100"+e[1].split(".webp")[0]+".webp":t}return t},finishLoad:function(){this.setData({isLoading:!0})},onImageError:function(){if(this.data.isRetry)this.setData({src:this.properties.src+" ",isRetry:!1});else{var t=this.properties.error;this.setData({isLoading:!1,src:t})}}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/wm-gif-image/index.js'});require("pages/index/components/wm-gif-image/index.js");;__wxRoute = "pages/index/components/wm-item-video/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/wm-item-video/index.js";define("pages/index/components/wm-item-video/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{data:{type:Object},viewId:{type:String},style:{type:String}},observers:{},attached:function(){this.videoContext=wx.createVideoContext(this.properties.data["video-id"],this)},ready:function(){this.videoContext.play()},detached:function(){this.videoContext.stop()},methods:{handleEvent:function(t){this.triggerEvent("event",null==t?void 0:t.detail)},handleCustomEvent:function(t){}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/wm-item-video/index.js'});require("pages/index/components/wm-item-video/index.js");;__wxRoute = "pages/index/components/wm-loc/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/wm-loc/index.js";define("pages/index/components/wm-loc/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{locState:{type:String,value:"loading"},locName:{type:String,value:""},locTemp:{type:String,value:""},locType:{type:String,value:""},useWhiteTheme:{type:Boolean,value:!1}},data:{tip:!1},detached:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},methods:{onNavTap:function(){this.triggerEvent("navloc")}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/wm-loc/index.js'});require("pages/index/components/wm-loc/index.js");;__wxRoute = "pages/index/components/wm-tier-slide/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/components/wm-tier-slide/index.js";define("pages/index/components/wm-tier-slide/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../npm/wmfe/wm-img-watcher0_3_4/src/lib/index").component({properties:{a:Object,style:{type:String,value:""},visibleCount:{type:Number,value:3},autoPlay:{type:null,value:!1},aspectRatio:{type:Number,value:1.3},scaleOffset:{type:Number,value:.9},interactionEnable:{type:null,value:!0},borderRadius:{type:String,value:"6px"},videoInterval:{type:Number,value:5e3},gifInterval:{type:Number,value:2e3},defaultInterval:{type:Number,value:1500},scrollMode:{type:String,value:"singleLeft"},styleArr:{type:Array,value:[]},childAttr:{type:Array,value:[]},child:{type:Array,value:[]},onIndexChangeCb:{type:null}},data:{indexArray:[4,3,2],animation:[],left:0,currentIndex:0},observers:{child:function(){this.canClick=!0,this.isMove=!1,this.animation=[],this.timer&&clearTimeout(this.timer),this.handleSlide()}},created:function(){this.canClick=!0,this.isMove=!1,this.animation=[],this.timer=null},attached:function(){},ready:function(){},detached:function(){clearTimeout(this.timer)},error:function(t){},methods:{moduleError:function(t){},handleSlide:function(){var t,i=this;this.posArray=[0,"10%","20%"],this.scaArray=[1,.9,.8],this.opaArray=[1,1,1],this.indArray=[4,3,2],this.intervalArray=[];for(var e=this.properties.child.length,r=3;r<e;r++)this.posArray.push("20%"),this.scaArray.push(.8),this.opaArray.push(0),this.indArray.push(1);this.setData({indexArray:this.indArray});for(var a=0;a<e;a++){var n=wx.createAnimation({duration:500,timingFunction:"ease-out"});this.animation.push(n),JSON.stringify(this.properties.child[a]||"").indexOf("wm-gif-image")>=0?this.intervalArray.push(this.properties.gifInterval):JSON.stringify(this.properties.child[a]||"").indexOf("wm-item-video")>=0?this.intervalArray.push(this.properties.videoInterval):this.intervalArray.push(this.properties.defaultInterval)}this.timer&&clearTimeout(this.timer),!0!==this.properties.autoPlay&&"true"!==this.properties.autoPlay||(this.timer=(t=function(){i.tapLeft()},void(i.timer=setTimeout((function r(){t.call(null),i.timer=setTimeout(r,i.intervalArray[i.data.currentIndex%e])}),i.intervalArray[i.data.currentIndex%e]))))},handleEvent:function(t){this.triggerEvent("event",null==t?void 0:t.detail)},touchstart:function(t){this.setData({left:t.touches[0].pageX})},touchmove:function(t){if(!this.isMove){var i=1*(t.touches[0].pageX-this.data.left),e=(i=(i=i>60?60:i)<-60?-60:i)/60;1==e?(this.isMove=!0,this.tapRight()):-1==e&&(this.isMove=!0,this.tapLeft())}},touchend:function(t){var i=this;setTimeout((function(){i.isMove=!1}),500)},tapLeft:function(){!1!==this.properties.interactionEnable&&"false"!==this.properties.interactionEnable&&this.tapFunc("left")},tapFunc:function(t){var i=this;if(this.canClick){this.canClick=!1,setTimeout((function(){i.canClick=!0}),500);for(var e="right"===t?this.rollLeft(this.posArray,1):this.rollRight(this.posArray,1),r="right"===t?this.rollLeft(this.scaArray,1):this.rollRight(this.scaArray,1),a="right"===t?this.rollLeft(this.opaArray,1):this.rollRight(this.opaArray,1),n="right"===t?this.rollLeft(this.indArray,1):this.rollRight(this.indArray,1),s=this.data.animation,h=0;h<this.properties.child.length;h++)this.animation[h].scale(r[h],r[h]).left(e[h]).opacity(a[h]).step(),s[h]=this.animation[h].export();var o="right"===t?--this.data.currentIndex:++this.data.currentIndex;this.setData({animation:s,currentIndex:o,indexArray:n})}},tapRight:function(){0!=this.properties.interactionEnable&&"false"!=this.properties.interactionEnable&&"horizontal"===this.properties.scrollMode&&this.tapFunc("right")},rollLeft:function(t,i){for(var e=0;e<i;e++){for(var r=t.length-1,a=t[0],n=0;n<r;n++)t[n]=t[n+1];t[r]=a}return t.concat()},rollRight:function(t,i){for(var e=0;e<i;e++){for(var r=t.length-1,a=t[r],n=r;n>0;n--)t[n]=t[n-1];t[0]=a}return t.concat()},currentIndexChange:function(){}}});
},{isPage:false,isComponent:true,currentFile:'pages/index/components/wm-tier-slide/index.js'});require("pages/index/components/wm-tier-slide/index.js");;__wxRoute = "pages/index/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/index.js";define("pages/index/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../npm/babel/runtime7_2_0/helpers/interopRequireDefault"),t=e(require("../../npm/babel/runtime7_2_0/helpers/extends")),a=e(require("../../npm/babel/runtime7_2_0/regenerator/index")),i=require("../../npm/wmfe/mp-perf1_0_7/index"),o=e(require("../../npm/wmfe/portm-wxapp0_2_11/dist/portm-wxapp")),n=require("../../npm/wmfe/waimai_perf1_0_15/index"),r=require("../../npm/wmfe/wxapp-component-abtest0_4_4/src/components/abtest/index"),s=e(require("./indexContainer")),l=require("../../utils/cart-state-funcs"),c=require("../../constants"),u=require("../../components/login-sdkV2/index"),d=require("./store"),p=require("../../utils/subscribeAfterAirDrop"),h=require("./constants"),g=require("./ab"),_=e(require("../../utils/rpxTranslate")),m=require("./utils"),f=e(require("../../utils/ipx")),w=(require("../../components/guide/utils"),require("../../custom-tab-bar/constant"),require("../../utils/waimai-version")),x=e(require("../../common/logger")),v=require("../../utils/lx"),C=e(require("./components/wlwcEntrance/index.outlet")),T=require("../../common/ad/ad"),b=require("../../utils/warden.config"),y=require("./page-config-protocol"),P=e(require("../../components/owl-watcher/owl-watcher")),L=require("./components/privacy-dialog/utils"),D=require("../../privacy-config/personalized"),A=require("../../npm/promise-polyfill6_0_2/promise.js"),I=require("../../utils/bargainNavigate").bargainNavigate,S=require("../base"),N=require("../../components/rohr/rohr"),E=require("../../components/open-setting/open-setting"),k=require("./log"),O=require("./gray-config"),R=require("../../components/geo/geo"),B=require("../../components/midas/midas.outlet"),F=require("../../api/analytics"),M=F.view,q=F.click,U=F.manual_pv,V=require("../../utils/quicknav-scene"),G=require("../../utils/encodeJSON").parse,H=require("../../utils/deduplication"),j=require("../../components/wm-sticky/index.outlet"),W=require("../../utils/version-compare"),z=require("../../utils/mix"),K=require("../../api/wx").navigateTo,J=require("../../components/midas-simple/outlet"),Y=require("../../utils/url-append-param"),X=require("../../utils/schema"),$=require("../../utils/add-to-favorite-tip"),Q=$.closeAddToFavoriteTip,Z=$.collectTip,ee=require("../../api/analytics").event,te=require("../../npm/dp/owl-wxapp2_0_0/build/owl-wxapp").OWL,ae=require("../../npm/wmfe/wxapp-component-abtest0_4_4/src/components/abtest/index").abtest,ie=require("../../constants"),oe=ie.P_POI,ne=ie.P_HOMEPAGE,re=ie.P_OUTER,se=ie.B_OUTER,le=ie.B_POILIST,ce=ie.B_PULL_DOWN,ue=ie.ACTION_PULL_DOWN,de=ie.ACTION_CLICK,pe=ie.CODE_GOTO_LOGIN,he=ie.CODE_PRELOGIN,ge=ie.ANTI_SPIDER_FORCE_LOGIN,_e=ie.ANTI_SPIDER_PRELOGIN,me=ie.CODE_GEO_FENCE,fe=ie.CODE_NO_SHOP,we=ie.CODE_NO_GEO,xe=require("../../api/index"),ve=xe.poiFilter,Ce=xe.getLeagueEntry,Te=xe.saveBoundRelationship,be=xe.ready,ye=xe.aggregateInfo,Pe=(0,x.default)("index"),Le=H((function(e){return e.id})),De=null,Ae=new te({project:"com.sankuai.miniprogrammach.r2xmodule",devMode:"qa"===getApp().store.getState().dev.env}).newMetric();getApp().R2XModuleMetric=Ae;require("../../npm/r2x/module-container1_1_4/lib/index").default;var Ie=require("../../api/index"),Se={pageName:"index",disableBaseLocation:!0,data:{navigationBarProtocol:((y.pageProtocolJson||{}).page_component||{}).navigation_bar_module||{},regionListProtocol:(y.pageProtocolJson||{}).module_list||[],popupListProtocol:(y.pageProtocolJson||{}).popup_module_list||[],floatingListProtocol:(y.pageProtocolJson||{}).floating_module_list||[],loadMoreProtocol:((y.pageProtocolJson||{}).page_component||{}).load_more_module||{},loadingProtocol:((y.pageProtocolJson||{}).page_component||{}).loading_module||{},errorProtocol:((y.pageProtocolJson||{}).page_component||{}).error_module||{},emptyProtocol:((y.pageProtocolJson||{}).page_component||{}).empty_module||{},moduleHeaderData:{},regionListContentData:{},popupListContentData:{},floatingListContentData:{},loadMoreData:{},loadingData:{},errorData:{},emptyData:{},geoConfig:{img:"http://p0.meituan.net/scarlett/4096439c6189c60c5428a8b67e3266cf39507.gif",text:"正在搜索附近商家",tips:["“饭后一小时后吃水果更有营养”","“高峰期点餐配送时间比较长，记得错峰下单”","“折扣和满减不能叠加哦，记得算一下哪种更优惠”"]},moduleHeaderContext:{customTitleBar:{show:!1,showSearch:!1,height:0},home_rcmd_style_open:"close",home_rcmd_style:{}},regionListContext:{regionParamsContainer:{module_list_sole_region:{activity_filter_codes:"",slider_select_data:"",offset:0,seq_num:0,load_type:h.LOAD_TYPE[1],net_stat:-1},operation_module_sole_region:{normal_homepage_directly:!0}},showClearFilter:!1,filterGroundSticky:!1,requestCondition:{module_list_sole_region:{requestNow:!1},operation_module_sole_region:{requestNow:!1}}},popupListContext:{},floatingListContext:{},loadMoreContext:{},loadingContext:{},errorContext:{},emptyContext:{},pageCustomContext:{homepageABtest:"A",filterTop:80,isClearFilter:!1,searchpageABtest:"B",regionApiContainer:{api_common_dynamic:{request:Ie.apiDynamic}}},pageGlobalContext:{hasNextPage:!1,moduleListEmpty:!1,hasMoreData:!1},locState:"loading",dataIds:[],contextId:null,customLxExtra:{},fromIndex:!1,indexContainer:{},isiphonexup:!1,poiItemStyle:"background: #FFFFFF; margin-bottom: 12rpx; border-radius: 24rpx; padding: 0 24rpx;",poiListLabelsWrapperWidths:{},poiListStyle:"margin-left: 24rpx; margin-right: 24rpx;",recommended_search_keyword:{},pageVisible:!0,showPage:!1,hasMore:!1,filterPages:null,loadingLogo:!1,empty:!1,mtTopShow:!1,showResetFilter:!1,minaVersion:"release",lch:wx.getStorageSync("wx_scene"),uuid:"",env:"",promoENV:"product",mtTabsExtraData:{from:"waimai"},templateId:"",templateData:"",showTianjiangCoupon:!1,showTianjiangLayer:!1,showAddToFavoriteTip:!1,scene_type:0,loading:{show:!1},openId:"",isNewUserGuideLayerClosed:!1,customTabBar:{show:!1,height:0},bargainPopupInfo:{show:!1,data:null,clickOutsideHide:!0,showCloseBtn:!1,type:"",popupTypeFromApi:""},showBargainHomePage:!1,showBackToNormal:!1,showNewUserGuideLayer:!1,poilistDebounce:0,poilistBlocking:!1,sortType:0,filterGroundColor:"#f5f5f6",showVersionSwitch:!0,pindanInfoLoading:!0,showBargainCollectPopup:!1,bargainCollectPopup:null,showCollectTips:!1,collectGuidanceBar:null,inWaimai:!0,airdropTipShow:!1,airdropTipProps:{},userLocation:!1,defaultLocation:wx.getStorageSync("defaultLocation"),isDefaultLocation:!1,mprnBottomToast:{title:"定位服务未开启",detail:"开启后才能看到附近的外卖商家哦～",btnText:"去开启"},useNewMach:null,reportImpression:!1,isShowFirstInWeapp:!1,showContentPersonalizedTips:!1,personalizedTipsText:"",abnormalText:"",miliGuideStatus:!1},poiListTop:0,entree_from:null,page_index:0,cacheScrollTop:0,canIUseTabAnchor:!0,tipFlag:!1,shareUrlUnWork:!1,isFromMyTreat:!1,hasCallOnLoad:!1,hasGuideLocation:!1,showGoToTop:!1,isMyTreatStatusChecked:!1,onLoadOptions:{},wlwc:{scrolling:!1,timer:null},hasRequestedCEndApi:!1,onContainerReady:function(){},onReady:function(){},onHide:function(){this.hasRedirect=!1,this.setData({pageVisible:!1}),Q(this),clearTimeout(De)},onUnload:function(){clearTimeout(De)},ifSDKVersionSatisfied:function(){var e=getApp()&&getApp().globalData&&getApp().globalData.system||{},t=e.SDKVersion;return e.platform,W(t,"2.11.2")},miliGuide:function(){var e=this;getApp&&getApp().eventBus&&getApp().eventBus.on(c.EVENT.MILI_GUIDE,(function(t){e.setData({miliGuideStatus:t})}))},onLoad:function(e){var t,i,n,s,l,c,d,p,h,m,x,v,C,T,b,y,P,L,D,A,I,S,N,E=this;return a.default.async((function(k){for(;;)switch(k.prev=k.next){case 0:try{global.mmb.logInfo&&global.mmb.logInfo("首页启动",e),this.miliGuide()}catch(e){}return this.setData({isMT:!!getApp().__isMtGroup__,pageLength:getApp().__isMtGroup__?getApp().getCurrentPagesOrigin().length:getCurrentPages().length}),k.next=4,a.default.awrap(this.getFirstInWxappInfo());case 4:if(!k.sent){k.next=7;break}return k.abrupt("return");case 7:return this.seqNumber=0,this.load_type=1,this.timeStart=(new Date).getTime(),t=this.ifSDKVersionSatisfied(),this.setData({"moduleHeaderContext.home_rcmd_style_open":t?r.abtest.getCache("waimai-home-page-rcmd-style"):""}),this.getMachAb(),i=getApp(),this.navigateToLocSelect(),this.currentVersion=i&&i.globalData&&i.globalData.currentVersion,1===this.currentVersion&&wx.setNavigationBarColor({backgroundColor:"#F4581E",frontColor:"#ffffff",success:function(){},fail:function(){},complete:function(){}}),Pe.info("onLoad",e),e[w.KEY_WXAPP_VERSION]&&(n=Number(e[w.KEY_WXAPP_VERSION]),s=Number(e[w.KEY_CHANNEL]),n&&(0,w.switchAppVersion)(n,{shouldRedirect:!1,from:s})),this.setPhfEventBus(),l=getApp().globalData.system,c=l.statusBarHeight,d=l.navHeight,p=l.isShowNavBar,this.handleTreatToast(e),this.setOnLoadOptions(e),this.handleYaoxin(e),this.hasRedirect=!1,this.tipFlag=e.tipFlag,this.shareUrlUnWork=e.shareUrlUnWork,e.redirectUrl&&(this.hasRedirect=!0,V()&&(getApp().globalData.showQuickNav=!0),this.perfAddExcludePV(),wx.navigateTo({url:decodeURIComponent(e.redirectUrl)})),this.pageMetricsHandler=this.startMetricsPoint("page_load_speed",{num:3}),u.loginPlugin.getOpenId().then((function(e){E.setData({openId:e}),getApp().globalData.openId=e})),h=this.store.getState(),m=h.dev,x=m.env,v=m.uuid,C=h.wx.SDKVersion,T=global.mmb.getLoginInfoSync()||{},b=T.userId,x&&this.toast({message:"当前环境"+x}),y=!(W(C,"2.5.0")<0),P=c+d,L=p?(0,_.default)(P,"rpx")-1:0,L=p?L:L+78,D=o.default.getData(),A=D.poi_list_lite_labels_wrapper_widths,I=void 0===A?{}:A,S=(0,w.getCurrentAppVersion)()===w.CODE_BARGAIN,N=(0,w.getVersionChannelCode)()===w.CHANNEL_KINGKONG,Pe.info("getCurrentAppVersion",(0,w.getCurrentAppVersion)()),Pe.info("getVersionChannelCode",(0,w.getVersionChannelCode)()),this.setData({poiListLabelsWrapperWidths:I,env:x,promoENV:"qa"===x?"beta":"product",uuid:v,userId:b,showBargainHomePage:S,showBackToNormal:S&&N,showPage:!this.hasRedirect,isNewUserGuideLayerClosed:(0,g.showNewUserGuideLayer)(),"customTabBar.show":y,isiphonexup:(0,f.default)(),"customTabBar.height":(0,f.default)()?96+(0,_.default)(34,"rpx"):96,"moduleHeaderContext.customTitleBar.show":p,"moduleHeaderContext.customTitleBar.height":p?P:0,"pageCustomContext.filterTop":L,"moduleHeaderContext.customTitleBar.background":"linear-gradient(45deg, #FFE74D 0%, #FFDD19 100%);"}),k.next=47,a.default.awrap(this.setGrayConfig());case 47:getApp&&getApp().eventBus&&getApp().eventBus.on("location:changed",this.setGrayConfig);case 48:case"end":return k.stop()}}),null,this)},handlePHFIndex:function(e){var a=e&&e.detail&&e.detail.data&&e.detail.data.json_data&&e.detail.data.json_data.special_homepage_info||"";return getApp().globalData.useSpecialFriendlyHomepage=a&&a.use_special_friendly_homepage,getApp().globalData.useSpecialGuideHomepage=a&&a.use_special_guide_homepage,!(!a||!a.use_special_homepage||((0,w.setAppVersion)(w.CODE_BARGAIN),this._readyPromise_&&this._readyPromise_.resolve(),this.setData({showBargainHomePage:!0}),this.loadBargainContainer(!1,(0,t.default)({},a.popup_info,{use_special_homepage:a.use_special_homepage})),0))},getRenderData:function(e){var t,a=this;if(!this.toPHFPAGE){var i=e.detail.data,o=e.detail.module,n=(o||{}).module_id;if("operation_module_sole_region"!==n||!this.handlePHFIndex(e)){var r=this.data.regionListContentData,s={operation_module_sole_region:this.handeleOperationModuleSoleRegion,module_list_sole_region:this.handleModuleListSoleRegion,handelRegionNativeModule:this.handelRegionNativeModule,handleRegionError:this.handleRegionError};s[n](r,i,o,s.handleRegionError(i,o)),s.handelRegionNativeModule(r,o);var l="regionListContentData."+n;this.setData(((t={})[l]=r[n],t),(function(){"operation_module_sole_region"===n&&(a.homePageReportRaptor||a.addWatcherSpeedPoint(25,a.timeStart),a.homePageReportRaptor=!0)}))}}},onMachError:function(e){},getSearchPageABTest:function(){var e=getApp().eventBus,t="B";if(!getApp().__isMtGroup__){try{t=r.abtest.getCache("waimai_x_search_wx_mp")}catch(e){t="B"}this.setData({"pageCustomContext.searchpageABtest":t}),e.fire("homeGetSearchPageABTest",t)}},removeDuplicates:function(e,t){var a=t?[]:this.data.dataIds,i=[],o=e.module_list;if(e&&o){for(var n=0;n<o.length;n++)-1===a.indexOf(o[n].data_id)&&(a.push(o[n].data_id),o[n].string_data=o[n].string_data&&JSON.parse(o[n].string_data),i.push(o[n]));e.module_list=i,this.setData({dataIds:a})}},reloadHomepagePoilist:function(e){return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.setLoadListRegionData(e);case 1:case"end":return t.stop()}}),null,this)},getLoadListRegionData:function(e,i,o,n,r,s){var l,c,u,d,p;return a.default.async((function(g){for(;;)switch(g.prev=g.next){case 0:return void 0===r&&(r=""),void 0===s&&(s=""),l=getApp().store.getState(),c=l.wx.networkType,u=this.data.regionListProtocol[this.data.regionListProtocol.length-1].api_sublist_container.urlPath||this.data.regionListProtocol[this.data.regionListProtocol.length-1].api_container.urlPath,d=(0,t.default)({},this.data.regionListContext.regionParamsContainer[e],{activity_filter_codes:r,slider_select_data:s,offset:i,seq_num:o,load_type:n,net_stat:h.NET_STATE[c]}),g.next=7,a.default.awrap(this.data.pageCustomContext.regionApiContainer.api_common_dynamic.request(u)(d));case 7:return p=g.sent,g.abrupt("return",p);case 9:case"end":return g.stop()}}),null,this)},setLoadListRegionData:function(e,t,i){var o,n,r,s,l,c,u,d,p;return a.default.async((function(g){for(;;)switch(g.prev=g.next){case 0:return wx.showLoading({title:"加载中..."}),g.prev=1,n="regionListContext.regionParamsContainer."+e+".activity_filter_codes",r="regionListContext.regionParamsContainer."+e+".slider_select_data",s="regionListContext.regionParamsContainer."+e+".offset",l="regionListContext.regionParamsContainer."+e+".seq_num",c="regionListContentData."+e+".module_list",this.load_type=h.LOAD_TYPE[8],g.next=10,a.default.awrap(this.getLoadListRegionData(e,0,0,this.load_type,t,i));case 10:u=g.sent,d=u.module_list&&u.module_list.length||0,p=0===d&&(t||i),this.removeDuplicates(u,!0),this.setData({"regionListContext.requestCondition.module_list_sole_region.clearstore":!0}),this.setData(((o={})[n]=t||"",o[r]=i||"",o[s]=d,o[l]=1,o[c]=u.module_list,o["regionListContext.showClearFilter"]=!!t&&p,o["pageGlobalContext.moduleListEmpty"]=u&&0===u.module_list.length,o["pageGlobalContext.hasNextPage"]=u.json_data.page.has_next_page,o)),g.next=21;break;case 18:g.prev=18,g.t0=g.catch(1);case 21:wx.hideLoading();case 22:case"end":return g.stop()}}),null,this,[[1,18]])},handeleOperationModuleSoleRegion:function(e,t,a,i){e[a.module_id]=t;var o="open"===this.data.moduleHeaderContext.home_rcmd_style_open&&t.module_header&&t.module_header.string_data?t.module_header.string_data:null,n={};if(o)try{var r=JSON.parse(o),s=(n=r&&r.home_rcmd_style?r.home_rcmd_style:{})&&n.home_atmosphere?JSON.parse(n.home_atmosphere):{},l=s.banner_bottom;l&&(l.isShow=!!l.pic_url||!!l.video_url),s.banner_bottom=l,n.home_atmosphere=s}catch(e){n={}}this.setData({moduleHeaderData:t.module_header,"moduleHeaderContext.home_rcmd_style":n})},handleModuleListSoleRegion:function(e,t,a,i){var o,n=this;this.getFilter().initFilter(!0),this.hasNextPage=t.json_data&&t.json_data.page&&t.json_data.page.has_next_page||!1;var r=t.module_list&&t.module_list.length||0;this.setData(((o={})["regionListContext.regionParamsContainer.module_list_sole_region.offset"]=r,o["regionListContext.regionParamsContainer.module_list_sole_region.seq_num"]=1,o["regionListContext.regionParamsContainer.module_list_sole_region.rank_trace_id"]=t.json_data&&t.json_data.page&&t.json_data.page.rank_trace_id||"",o["pageGlobalContext.hasNextPage"]=this.hasNextPage,o["pageGlobalContext.moduleListEmpty"]=t&&t.module_list&&0===t.module_list.length||!1,o),(function(){n.dealAfterPoilist(!1)})),this.removeDuplicates(t,!0),e[a.module_id]=t},handelRegionNativeModule:function(e,t){e[t.module_id].native_item_list=[];var a=e[t.module_id].module_list;a&&Array.isArray(a)&&a.forEach((function(a){"native"===a.render_mode&&e[t.module_id].native_item_list.push(a)}))},handleRegionError:function(e){var t=this,a=e.code,i=e.message,o=e.stack,n=e.type,r=e.msg;if(!a&&!i)return a;var s="E1076";switch("requestError"===n?s="N10":a&&(s="B1076"),a){case we:case fe:case me:this.error({message:"附近暂无商家, 请确认您的地址~",messageAdd:i+"-"+a||"",img:"no-poi-normal",textOK:"设置地址",isHomepage:!0,errorCode:getApp().errorCode.getCode({code:s})+"_"+a+"_"+(r||i),stack:o,ok:function(){K({url:"/packages/loc/loc-select/loc-select?source=home"})}});break;case pe:this[ge]=function(){t.loadNewHomePage(!0,!1)};break;case he:this[_e]=function(){t.loadNewHomePage(!0,!1)};break;default:this.showFallBackErrorPage(e,s)}return a},showFallBackErrorPage:function(e,t){var i,o,n,r,s,l=this;return a.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(i=e.code,o=e.message,n=e.stack,r=e.msg,s=this.data.abnormalText,this.hasRequestedCEndApi){c.next=9;break}return this.hasRequestedCEndApi=!0,clearTimeout(De),c.next=7,a.default.awrap(A.race([new A((function(e){De=setTimeout((function(){return e(h.ABNORMALTEXT)}),2e3)})),(0,m.getAbnormalText)()]));case 7:s=c.sent,this.setData({abnormalText:s});case 9:this.error({message:s||"",messageAdd:o||"",img:"no-net-normal",textOK:"重新加载",isHomepage:!0,errorCode:getApp().errorCode.getCode({code:t})+"_"+i+"_"+(r||o),stack:n,ok:function(){l.loadNewHomePage(!0,!1)}});case 10:case"end":return c.stop()}}),null,this)},loadMoreTemplate:function(){var e,i,o,n,r,s,l,c,u,d,p,g,_,m,f,w,x,v,C,T,b,y=this;return a.default.async((function(P){for(;;)switch(P.prev=P.next){case 0:if(!this.loadingNextPage){P.next=2;break}return P.abrupt("return");case 2:if(P.prev=2,this.loadingNextPage=!0,this.setData({"pageGlobalContext.hasNextPage":this.hasNextPage}),this.data.pageGlobalContext.hasNextPage){P.next=8;break}return this.loadingNextPage=!1,P.abrupt("return");case 8:return this.poiLoading(!0),i=this.data.regionListContext.regionParamsContainer.module_list_sole_region,o=i.offset,n=i.seq_num,r=i.activity_filter_codes,s=i.slider_select_data,this.seqNumber=n,l="regionListContext.regionParamsContainer.module_list_sole_region.offset",c="regionListContext.regionParamsContainer.module_list_sole_region.seq_num",this.load_type=h.LOAD_TYPE[3],P.next=16,a.default.awrap(this.getLoadListRegionData("module_list_sole_region",o,n,this.load_type,r,s));case 16:for(u=P.sent,d=u&&u.module_list&&u.module_list.length||0,p=this.data.regionListContentData.module_list_sole_region.module_list.length,this.removeDuplicates(u,!1),g=u&&u.module_list&&u.module_list.length||0,_={},m=0;m<g;m++)f="regionListContentData.module_list_sole_region.module_list["+Number(p+m)+"]",_[f]=u.module_list[m];this.setData((0,t.default)(((e={})[l]=o+d,e[c]=n+1,e),_),(function(){y.poiLoading(!1),y.loadingNextPage=!1})),this.seqNumber=n,this.hasNextPage=u.json_data.page.has_next_page,P.next=36;break;case 28:P.prev=28,P.t0=P.catch(2),this.poiLoading(!1),this.loadingNextPage=!1,w=P.t0.code,x=P.t0.msg,v=P.t0.stack,C=P.t0.type,T=P.t0.message,b="E1077","requestError"===C?b="N10":w&&(b="B1077"),this.toast({message:(x||T||"")+"-"+w,errorCode:getApp().errorCode.getCode({code:b})+"_"+w+"_"+(x||T),stack:v});case 36:case"end":return P.stop()}}),null,this,[[2,28]])},filterParamsChange:function(e){var t,i,o,n;return a.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.ifOnPullDownRefresh){r.next=2;break}return r.abrupt("return",this.ifOnPullDownRefresh=!1);case 2:return r.prev=2,t=e.detail,i=t.module,o=t.activity_filter_codes,n=t.slider_select_data,r.next=6,a.default.awrap(this.setLoadListRegionData(i.module_id,o,n));case 6:this.data.pageCustomContext.isClearFilter&&this.setData({"pageCustomContext.isClearFilter":!1}),r.next=11;break;case 9:r.prev=9,r.t0=r.catch(2);case 11:return r.prev=11,this.ifOnPullDownRefresh=!1,r.finish(11);case 14:case"end":return r.stop()}}),null,this,[[2,9,11,14]])},getMachAb:function(){var e,t,i,o,n;return a.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:return Ae.setTags({module_id:"wx_homepage_platinum"}),r.prev=1,e=!1,t=!1,r.next=6,a.default.awrap(ae.getLatest("waimai-homepage-engage-mach-new",!0));case 6:(i=r.sent).param&&("true"===i.param.newMach&&(e=!0),"true"===i.param.reportImpression&&(t=!0)),o=this.store.getState(),n=o.wx.SDKVersion,(e=e&&W(n,"2.11.2"))?Ae.setMetric("useNewMach",1):Ae.setMetric("useNewMach",0),this.setData({useNewMach:e,reportImpression:t}),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(1),this.setData({useNewMach:!1}),Ae.setMetric("useNewMach",0);case 18:return r.prev=18,Ae.report(),r.finish(18);case 21:case"end":return r.stop()}}),null,this,[[1,14,18,21]])},onPageScroll:function(e){var t=e.scrollTop;this.scrollTop=t,this.data.showBargainHomePage||(this.handleTabBarOnScroll(t),this.getFilter().OnPageScroll(t),this.setNewUserGuideVisible(t),this.onScrollEntrance(),j.triggerScroll(this.route,t),J.triggerScroll(),B.triggerScroll()),this.setTitleBar(t)},onScrollEntrance:function(){var e=this;if(clearTimeout(this.wlwc.timer),this.wlwc.timer=setTimeout((function(){var t=e.selectComponent("#wlwcEntrance");t&&(t.scrollEntrance(!1),e.wlwc.scrolling=!1)}),800),!1===this.wlwc.scrolling){var t=this.selectComponent("#wlwcEntrance");t&&t.scrollEntrance(!0)}this.wlwc.scrolling=!0},onShareAppMessage:function(){var e=this.onShareAppDesc(),t=getApp().globalData.shareOptions||{},a=t.imageUrl||"https://p0.meituan.net/travelcube/f722637dc1686b4cdc27a9614d84863c52486.png";a=a.split("@")[0]+"@420w_340h_1e_1c_1l";var i=t.path||"/pages/index/index";return i+=(i.indexOf("?")>-1?"&":"?")+"from=from_share_"+this.pageName+"&"+(0,w.getBargainShareMark)(),{title:t.title||"美团外卖，送啥都快",desc:e,path:i,imageUrl:a}},onPullDownRefresh:function(){if(this.geoIsGeoAvailable()){getApp().eventBus.fire("pagePullDownRefresh"),this.poilistCancelLoading(),this.loading(!0),this.traceTagStart({action:ue,src_page:ne,src_block:ce,tgt_page:ne}),this.ifOnPullDownRefresh=!0,this.setData({ifOnPullDownRefresh:!0});try{try{Ae.setTags({module_id:"wx_homepage_platinum",page:"onPullDown"}),Ae.setMetric("loginPage",1),Ae.report()}catch(e){}this.loadHomePageData(!1,!0,!0),C.default.update()}catch(t){var e=t.message;this.toast({message:e})}wx.stopPullDownRefresh(),this.loading(!1)}else wx.stopPullDownRefresh()},handleTabBar:function(e){e.setCustomTabBar("index")},getFirstInWxappInfo:function(){var e=this;return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new A((function(t){var i;return a.default.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!getApp().__isMtGroup__){o.next=4;break}return t(!1),o.abrupt("return");case 4:return o.next=6,a.default.awrap((0,L.getIsFirstInWxapp)());case 6:(i=o.sent)&&e.setData({showPage:!1,isShowFirstInWeapp:i}),t(i),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),t(!1);case 14:case"end":return o.stop()}}),null,null,[[0,11]])})));case 1:case"end":return t.stop()}}))},onPressPersonalizedButton:function(){var e="",t=wx;if(getApp().__isMtGroup__)e="/mt/pages/privacy/privacy",t=wx._wx;else{var a=(0,D.personalizedConfigURL)();e="/pages/web-view/web-view?type=REDIRECT&webviewUrl="+encodeURIComponent(a)}t.navigateTo({url:e}),v.lxMge.click("b_waimai_8gxx8hsr_mc",{})},onClosePersonalizedButton:function(){(0,D.contentPersonalizedClick)(),this.setData({showContentPersonalizedTips:!1}),v.lxMge.click("b_waimai_5axp6a6s_mc",{})},onShow:function(){var e,t,i,o,n,r,s,l,c,d,p=this;return a.default.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.data.isShowFirstInWeapp){h.next=3;break}return h.abrupt("return");case 3:return h.next=5,a.default.awrap(this.getFirstInWxappInfo());case 5:if(!h.sent){h.next=8;break}return h.abrupt("return");case 8:return h.prev=8,e=getApp(),wx.getStorageSync("indexLocationRefresh")&&(wx.setStorageSync("indexLocationRefresh",!1),wx.reLaunch({url:"/pages/index/index"})),t=e.store.getState(),i=t.extradata.from,this.isDefaultLoc()?this.setData({isDefaultLocation:!0}):this.setData({isDefaultLocation:!1}),this.onShowIsCalled=!0,this.handleTabBar(e),h.next=17,a.default.awrap(this.setTreatInfo());case 17:if(!this.hasRedirect){h.next=19;break}return h.abrupt("return");case 19:return be((function(){return p.manualPVReport()})),this.setData({pageVisible:!0,showPage:!0}),this.setIndexTop(i),this.pageShow(),this.getSearchPageABTest(),e.globalData.isHeaderShare=!1,o=this.data.showContentPersonalizedTips,h.next=28,a.default.awrap((0,D.getPrivacySwitchDict)());case 28:return n=h.sent,r=1===(n[1]||0),h.next=32,a.default.awrap(u.loginPlugin.isLogin());case 32:return s=h.sent,h.next=35,a.default.awrap((0,D.homePageContentPersonalizedTipsCanShow)());case 35:l=h.sent,c=(0,D.personalizedTipsText)(),d=s&&r&&l&&c,this.setData({showContentPersonalizedTips:d,personalizedTipsText:c}),!o&&d&&v.lxMge.view("b_waimai_zc5gnlmu_mv",{}),h.next=45;break;case 42:h.prev=42,h.t0=h.catch(8),(0,b.customError)({level:b.LEVEL.INFO,tracer_type:"埋点排查",error_level_sub:"首页pv埋点缺失-onshow",sampleAll:!0,content:{msg:h.t0}});case 45:case"end":return h.stop()}}),null,this,[[8,42]])},onTabItemTap:function(){if(!this.data.showBargainHomePage&&this.canIUseTabAnchor){var e=getApp();if(e.isFromOtherTab)return e.isFromOtherTab=null,void this.handleTabBarOnScroll();this.lxIndexTabClick();var t=this.cacheScrollTop;0===t&&this.geoIsGeoAvailable()?this.scrollToNearPoi():t>=this.getPoiListAnchor()&&wx.pageScrollTo({scrollTop:0})}},poiLoading:function(e){this.setData({"pageGlobalContext.hasMoreData":e})},onReachBottom:function(){this.loadMoreTemplate()},handleAttach:function(e){var t=((e||{}).detail||{}).tpId;Ae.setTags({module_id:"wx_homepage_platinum",tpId:t,version:"8.1.4"}),Ae.setMetric("mpdAttach",1),Ae.report()},onPageTap:function(){},versionSwitch:function(){this.setData({showVersionSwitch:!1})},onClickBanner:function(e){var t=e.detail.link;if(t){ee({event_type:"click",val_bid:"b_waimai_54ib6urf_mc",val_lab:{layout_type:(0,w.getDefaultAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),wm_client:1,index:Number(e.detail.index)+1||"",activity_id:e.detail.actid||""}});var a;a=X.isAppPage(t)?X.getAppPageUrl(t):"/pages/web-view/web-view?type=REDIRECT&webviewUrl="+encodeURIComponent(t),I(a)}},goToNormal:function(){(0,w.switchAppVersion)(w.CODE_NORMAL)},setOnLoadOptions:function(e){try{e.treatInfo&&(this.onLoadOptions=G(e.treatInfo),this.onLoadOptions.sceneCase=e.sceneCase)}catch(e){Pe.error(e)}},handleTreatToast:function(e){e.toastMsg&&this.toast({message:e.toastMsg})},setTreatInfo:function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{!this.isMyTreatStatusChecked&&this.onLoadOptions&&(this.onLoadOptions.treatId||this.onLoadOptions.sceneCase||this.onLoadOptions.pageLocateType,this.isMyTreatStatusChecked=!0)}catch(e){}case 1:case"end":return e.stop()}}),null,this)},setTabAnchorStatus:function(e){void 0===e&&(e=!0),this.canIUseTabAnchor=e},triggerForceDock:function(e){var t=e.detail;this.setData({"regionListContext.forceDock":t})},scrollToNearPoi:function(){var e=this,t=this.data.moduleHeaderContext.customTitleBar,a=t.support,i=t.height;(0,m.getElementOffsetTop)(".poi-list-header").then((function(t){var o=t[0],n=t[1],r=t[2];n=o-(a?i:r),e.poiListTop=n,wx.pageScrollTo({scrollTop:n})})).catch((function(e){}))},getPoiListAnchor:function(){return this.data.isiphonexup&&this.poiListTop?this.poiListTop:(0,m.getScreenHeight)()},handleTabBarOnScroll:function(e){this.canIUseTabAnchor&&!this.data.showBargainHomePage&&(void 0!==e&&(this.cacheScrollTop=e),this.setTabBarItem(this.cacheScrollTop>=this.getPoiListAnchor()))},setTabBarItem:function(e){if(void 0===e&&(e=!1),this.showGoToTop!==e){this.showGoToTop=e;var t=e?h.TOP_TAB_TEXT:h.INDEX_TAB_TEXT,a=e?h.TOP_TAB_ICON:h.INDEX_TAB_ICON;wx.setTabBarItem&&!this.getTabBar&&wx.setTabBarItem({text:t,selectedIconPath:a,index:0}),this.setCustomTabBar(t,a)}},setCustomTabBar:function(e,t){if(this.getTabBar&&this.getTabBar()){var a=this.getTabBar();if(a&&a.data.list){var i=a.data.list;i[0].selectedIconPath=t,i[0].text=e,a.setData({list:i})}}},setTitleBar:function(e){var t=this.data.moduleHeaderContext.customTitleBar,a=t.showSearch;t.show&&(e>50&&!a?this.setData({"moduleHeaderContext.customTitleBar.showSearch":!0}):e<50&&a&&this.setData({"moduleHeaderContext.customTitleBar.showSearch":!1}))},setNewUserGuideVisible:function(e){if(this.data.indexContainer&&this.data.indexContainer.hasNewUserGuide&&!this.data.isNewUserGuideLayerClosed){var t=this.newUserRedpackScrollTop||0;e>t&&!this.data.showNewUserGuideLayer?(this.isNewUserGuideLayerReport||(M("b_waimai_1dked984_mv",{channel_id:1}),this.isNewUserGuideLayerReport=!0),this.setData({showNewUserGuideLayer:!0})):e<t&&this.data.showNewUserGuideLayer&&this.setData({showNewUserGuideLayer:!1})}},onClickPoilistItem:function(e){var t=e.detail.currentTarget.dataset,a=t.id,i=t.index,o=t.poi,n=o.poi_id_str||a;try{this.traceTagStart({src_page:ne,src_block:le,src_item_index:i,src_item_id:n,src_item_type:"poi",tgt_page:oe,extra:{poi_id:n},action:de}),o.index=i,this.lxPoilistClick(o)}catch(e){(0,b.customError)({level:b.LEVEL.INFO,tracer_type:"埋点排查",error_level_sub:"首页点击排查",sampleAll:!0,content:{msg:e}})}},fullKingKongNav:function(e){for(var t=e.detail,a=this.getFilter().data.categoryFilterList||[],i=0,o=0;o<a.length;o+=1){var n=a[o];if(n.sub_category_list&&(i+=n.sub_category_list.length?n.sub_category_list.length:0)>0)break}0===i?wx.navigateTo({url:"/packages/index/channel-page/channel-page?typeCode=0&typeName=全部商家"}):wx.navigateTo({url:X.getAppPageUrl(t.skip_protocol)})},poilistCancelLoading:function(){this.poilistBlocking=!1,this.poilistDebounce+=1},_poilistLoad:function(e){var i,o,n,r,s,c,u,d,p,h,g,_=this;return a.default.async((function(m){for(;;)switch(m.prev=m.next){case 0:return i=this.page_index,this.filterParam=this.getFilter().getFilterParam(),o=this.judasParams&&!e?this.judasParams.rank_trace_id:"",n=(0,t.default)({page_index:e?0:i,page_size:20,load_type:1,rank_trace_id:o||""},this.filterParam),(0,l.startCheckPoiID)(this.replaceCartKey).catch((function(e){Pe.error("更新poiId出现问题问题",e)})),(0,T.adMonitor)(1,{prod_type:1}),m.next=8,a.default.awrap(ve(n));case 8:return r=m.sent,s=r.poi_has_next_page,c=r.poilist,u=r.judas_field,d=r.share_cart_title,p=r.share_cart_picture,h=r.share_cart_url,getApp().globalData.shareOptions={title:d,path:h,imageUrl:p},this.judasParams=u||{},this.judasParams.rank_trace_id||(this.judasParams.rank_trace_id=""),g=e?0:(this.data.poilist||[]).length||0,(c||[]).forEach((function(e,t){e.index=g+t,e._chargeInfoWithFeExtra=e.charge_info?"sort="+(_.filterParam.sort_type||0)+"&filter="+(_.filterParam.activity_filter_codes||"")+"&"+e.charge_info:"",e.recommendAB="show"})),m.abrupt("return",{poi_has_next_page:s,page_index:e?1:i+1,poilist:c});case 22:case"end":return m.stop()}}),null,this)},reloadPoilist:function(){return this.poilistCancelLoading(),this.loadPoilist(!0,!1)},reloadPoilistByFilter:function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:return wx.showLoading({title:"加载中..."}),e.next=3,a.default.awrap(this.reloadPoilist());case 3:this.getFilter().filterScrollToDock(!0),wx.hideLoading();case 5:case"end":return e.stop()}}),null,this)},reportPoiView:function(e){var t=e.detail.currentTarget.dataset.poi;this.judasParams&&this.lxPoilistView(t)},loadAddToFavoriteTipStatus:function(){var e=this;return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(global.mmb.getLoginInfo());case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:t.t0.token&&Z(this,"pages/index/index").then((function(t){t>0&&e.setData({showAddToFavoriteTip:!0})}));case 8:case"end":return t.stop()}}),null,this)},postFetchPoilist:function(e,t){var a=this,o=e.poi_has_next_page,n=e.page_index,r=e.valid,s=e.poilist;if(this.pageMetricsHandler&&this.pageMetricsHandler.add(),r){this.page_index=n;var l=this.getFilter().getFilterParam(),c=l.activity_filter_codes,u=l.slider_select_data,d=0===s.length&&(c||u);this.metricsSetData({loadingLogo:!1,hasMore:o,empty:0===s.length,showResetFilter:d,poilist:s},{key:"poilist_render",fmp:!0,needSize:!1,fmpParams:{key:"poilist_complete",ignore:n>1}},(function(){try{i.metrics.add("wxapp.page.fmp.time",{key:"fst",pageName:a.route}),i.metrics.appFmp(),!a.data.touchmatrixCanIUse&&a.setData({touchmatrixCanIUse:!0})}catch(e){Pe.log("home metrics err",e)}a.pageMetricsHandler&&a.pageMetricsHandler.add().end(),t&&(B.clearImpression(),B.triggerScroll(),J.clearImpression("poi-list"),J.triggerScroll()),a.setTabAnchorStatus()})),d&&this.lxResetFilterView()}},poilistLoad:function(e,t){var i,o,n,r,s,l,c;return a.default.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this.data,o=i.poilistDebounce,!i.poilistBlocking){u.next=3;break}return u.abrupt("return",{valid:!1});case 3:return n=this.getFilter().getFilterParam(),r=n.sort_type,this.setData({sortType:Number(r)||0,poilistBlocking:!0}),u.prev=5,u.next=8,a.default.awrap(this._poilistLoad(e));case 8:s=u.sent,u.next=16;break;case 11:if(u.prev=11,u.t0=u.catch(5),o!==this.data.poilistDebounce){u.next=16;break}throw this.setData({poilistBlocking:!1}),u.t0;case 16:if(o!==this.data.poilistDebounce){u.next=24;break}return this.setData({poilistBlocking:!1}),l=s.poilist,c=e?l:Le(this.data.poilist.concat(l)),s.poilist=c,s.valid=!0,t&&this.isFunction(t)&&t.call(this,s,e),u.abrupt("return",s);case 24:return u.abrupt("return",{valid:!1});case 25:case"end":return u.stop()}}),null,this,[[5,11]])},dealAfterPoilist:function(e){return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:try{e||this.loadAirDropCoupon()}catch(e){(0,b.customError)({level:b.LEVEL.WARN,tracer_type:"js error",error_level_sub:"拉取规则列表异常",content:{msg:e}})}case 1:case"end":return t.stop()}}),null,this)},loadPoilist:function(e,t,i){var o,n,r,s,l,c,u,d,p=this;return a.default.async((function(h){for(;;)switch(h.prev=h.next){case 0:return void 0===t&&(t=!1),void 0===i&&(i=!1),h.prev=2,this.setData({loadingLogo:!e}),e&&this.loading(!0,!0),this.pageMetricsHandler&&this.pageMetricsHandler.add(),h.next=8,a.default.awrap(this.poilistLoad(e,this.postFetchPoilist));case 8:return h.next=10,a.default.awrap(this.loadAddToFavoriteTipStatus());case 10:this.error(),this.dealAfterPoilist(i),this.perfAddFmpPoint(),h.next=30;break;case 15:h.prev=15,h.t0=h.catch(2),o=h.t0.code,n=h.t0.message,r=h.t0.data,s=h.t0.stack,l=h.t0.type,c=h.t0.msg,this.pageMetricsHandler&&this.pageMetricsHandler.end(),h.t1=o,h.next=h.t1===we||h.t1===fe||h.t1===me?22:h.t1===pe?25:h.t1===he?27:29;break;case 22:return this.error({message:o===me?r.tip_content:"附近暂无商家, 请确认您的地址~",img:"no-poi",textOK:"设置地址",errorCode:getApp().errorCode.getCode({code:"E"+o})+"_"+o+"_"+(c||n),ok:function(){K({url:"/packages/loc/loc-select/loc-select?source=home"})}}),this.setData({poilist:[]}),h.abrupt("break",30);case 25:return this[ge]=function(){p.loadPoilist(e,t)},h.abrupt("break",30);case 27:return this[_e]=function(){p.loadPoilist(e,t)},h.abrupt("break",30);case 29:if(e&&!t){this.setTabAnchorStatus(!1),u="F1034","requestError"===l?u="N10":o&&(u="B1001"),d="";try{d=JSON.stringify(h.t0)}catch(e){d=h.t0}this.error({message:"您的手机网络好像不太流畅哦~",messageAdd:"code:"+o+";message:"+n+";errmsg:"+d,img:"no-net",textOK:"重新加载",errorCode:getApp().errorCode.getCode({code:u,stack:s})+"_"+o+"_"+(c||n),stack:s,ok:function(){p.loadPoilist(!0)}}),this.setData({poilist:[]})}else this.toast({message:"网络异常, 请重试",errorCode:getApp().errorCode.getCode({code:"N10"})+"_"+o+"_"+(c||n)});case 30:e&&this.loading(!1);case 31:case"end":return h.stop()}}),null,this,[[2,15]])},loadContainerAndPoi:function(e,t,i){return a.default.async((function(o){for(;;)switch(o.prev=o.next){case 0:return void 0===t&&(t=!1),void 0===i&&(i=!1),this.getFilter().initFilter(e),o.next=5,a.default.awrap(this.loadIndexContainer());case 5:if(!this.data.showBargainHomePage){o.next=7;break}return o.abrupt("return");case 7:return this.tipFlag&&(this.scrollToNearPoi(),this.shareUrlUnWork&&this.toast({message:"查看的链接已过期，为你找到更多商家"}),this.tipFlag=!1,this.shareUrlUnWork=!1),o.next=10,a.default.awrap(this.loadPoilist(e,t,i));case 10:case"end":return o.stop()}}),null,this)},loadAirDropCoupon:function(e){this.selectComponent("#airdrop").loadAirDropCoupon(e)},loadHomePageData:function(e,t,i){var o,n=this;return a.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),this.loading(!0),o=function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:n.loadNewHomePage(t,i);case 1:case"end":return e.stop()}}))},!this.data.showBargainHomePage){r.next=10;break}return r.next=8,a.default.awrap(this.loadBargainContainer(e));case 8:r.next=11;break;case 10:o();case 11:this.loading(!1);case 12:case"end":return r.stop()}}),null,this)},setIndexTop:function(e){e&&"dianping-wxapp"!==e?(wx.setNavigationBarTitle({title:"美团生活"}),this.setData({mtTopShow:!0})):wx.setNavigationBarTitle({title:"美团外卖"})},handleWmNewCustomerExposure:function(e){var t=e.detail;this.lxWmNewCustomerView({entryId:t.entryId,entryItemId:t.entryItemId,entryIndex:t.entryIndex,skuId:t.hotFoodItem.sku_id,activityId:t.activityId})},handleWmNewCustomerClick:function(e){var t=e.detail,a=getApp().store.getState(),i=a.wx,o=i.longitude,n=i.latitude,r=a.recipient,s=r.longitude,l=r.latitude,c=Y(t.clickUrl,{longitude:s||o,latitude:l||n});wx.navigateTo({url:"/pages/web-view/web-view?type=REDIRECT&redirectUrl="+encodeURIComponent(c)}),this.lxWmNewCustomerClick({entryId:t.entryId,entryItemId:t.entryItemId,entryIndex:t.entryIndex||"",skuId:t.hotFoodItem&&t.hotFoodItem.sku_id||"",activityId:t.activityId})},loadNewHomePage:function(e,t){var a;this.hasRequestedCEndApi=!1;try{getApp().cityIDSDK.updateActualCityId()}catch(e){}var i=getApp().store.getState().wx.networkType;this.error(),this.load_type=e?h.LOAD_TYPE[2]:h.LOAD_TYPE[1],this.setData(((a={})["regionListContext.regionParamsContainer.module_list_sole_region.net_stat"]=h.NET_STATE[i],a["regionListContext.regionParamsContainer.module_list_sole_region.load_type"]=this.load_type,a["regionListContext.regionParamsContainer.module_list_sole_region.offset"]=0,a["regionListContext.regionParamsContainer.module_list_sole_region.seq_num"]=0,a)),e?this.setData({"regionListContext.requestCondition.operation_module_sole_region.reload":!0,"regionListContext.requestCondition.module_list_sole_region.reload":!0,"pageCustomContext.isClearFilter":t}):this.setData({"regionListContext.requestCondition.operation_module_sole_region.requestNow":!0,"regionListContext.requestCondition.module_list_sole_region.requestNow":!0})},pageShow:function(){var e;return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,w.getCurrentAppVersion)()===w.CODE_NORMAL,this.setData({"regionListContext.regionParamsContainer.operation_module_sole_region.normal_homepage_directly":e}),this.needReload){try{Ae.setTags({module_id:"wx_homepage_platinum",page:"onPageShow1"}),Ae.setMetric("loginPage",1),Ae.report()}catch(e){}this.loadHomePageData(!1,!0),this.needReload=!1}return t.next=5,a.default.awrap(this.geoRelocate(!1,{_mt:{sceneToken:"dj-532f102426ff31ef"}}));case 5:if(this.geoIsGeoAvailable()){t.next=7;break}return t.abrupt("return",this.pageMetricsHandler&&this.pageMetricsHandler.end());case 7:if(this.hasCallOnLoad)C.default.update();else{try{Ae.setTags({module_id:"wx_homepage_platinum",page:"onPageShow2"}),Ae.setMetric("loginPage",1),Ae.report()}catch(e){}this.loadHomePageData(),this.loadAggregateInfo(),this.forceReload=!1,this.addEventBus(),this.traceTagStart({src_page:re,src_block:se,tgt_page:ne,action:de})}this.data.showBargainHomePage||this.getLeagueEntry(),this.hasCallOnLoad=!0,this.afterLoginAction(),this.antiSpiderReset(),this.handleTabBarOnScroll(),B.clearImpression(),B.triggerScroll(),J.clearImpression("poi-list"),J.triggerScroll(),this.setData({a:1});case 18:case"end":return t.stop()}}),null,this)},afterLoginAction:function(){var e=getApp(),t=e.afterLoginAction;if("navToRedpackPage"===t)this.navToRedpackPage(),e.afterLoginAction="";else if((t===ge||t===_e)&&(e.afterLoginAction="","function"==typeof this[t])){if(this.cacheScrollTop>h.REACH_BOTTOM_SCROLL_TOP){var a=this.cacheScrollTop-h.REACH_BOTTOM_SCROLL_TOP;wx.pageScrollTo({scrollTop:a,duration:0})}this[t](),this[t]=""}},getLeagueEntry:function(){u.loginPlugin.isLogin().then((function(e){e&&Ce().catch((function(e){}))})).catch((function(e){}))},loadIndexContainer:function(){return a.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading(!0),this.$indexContainer=this.$indexContainer||new s.default(this),e.next=4,a.default.awrap(this.$indexContainer.$reload());case 4:this.loading(!1);case 5:case"end":return e.stop()}}),null,this)},loadBargainContainer:function(e,t){var i,o;return a.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:t&&(getApp().globalData.pinhaofanAutoSwitchPopup_Info=t),e||(i="","",o=0,"wmwx",t?o=1:(o=1,i=1),wx.redirectTo({url:"/waimai-bargain-sub1/pages/transfer/guide/index?path="+encodeURIComponent("/waimai-bargain-sub1/pages/index/index?isSwitch="+o)+"&channel_id="+i+"&app_from=wmwx"}),this.loading(!1));case 2:case"end":return a.stop()}}),null,this)},navToRedpackPage:function(e){this.$indexContainer&&this.$indexContainer.$emit("navToRedpackPage",e)},addEventBus:function(){var e=this;if(!this.addedEventBus){this.addedEventBus=!0;var t=getApp().eventBus,a=function(){e.needReload=!0};t.on(c.EVENT.LOGOUT,a),t.on(c.EVENT.ORDER_SUBMIT,a),t.on(c.EVENT.ORDER_REFUND,a),t.on(c.EVENT.LOGIN,(function(){try{var t=getCurrentPages(),a=t[t.length-1]||{};Ae.setTags({module_id:"wx_homepage_platinum",page:a.route}),Ae.setMetric("loginPage",1),Ae.report()}catch(e){}e.loadHomePageData(!0,!0),e.setData({showTianjiangCoupon:!1,showTianjiangLayer:!1})})),t.on(c.EVENT.LOCATION_CHANGE,(function(){e.getFilter().clearFilter(),e.needReload=!0})),t.on(c.EVENT.UUID,(function(t){e.setData({uuid:t})})),t.on(c.EVENT.RESET_TAB,(function(){return setTimeout(e.setTabBarItem.bind(e),100)})),t.on("show:noti",(function(t){e.selectComponent("#notification").showNotification(t)})),t.on("airdrop:close",(function(){e.idList&&e.idList instanceof Array&&e.idList.length>0&&((0,p.subscribeMessage)(e.idList),e.idList=null)}))}},loadAggregateInfo:function(){var e;return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.default.awrap(ye());case 3:(e=t.sent).templateInfo&&(this.idList=JSON.parse(e.templateInfo).templateIdList),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,b.customError)({level:b.LEVEL.WARN,tracer_type:"js error",error_level_sub:"拉取订阅模板异常",content:{msg:t.t0}});case 10:case"end":return t.stop()}}),null,this,[[0,7]])},getFilter:function(){return this.selectComponent("#filter")||{data:{},clearFilter:function(){},OnPageScroll:function(){},getFilterParam:function(){return{sort_type:0,navigate_type:0,category_type:0,second_category_type:0,activity_filter_codes:"",slider_select_data:""}},filterScrollToDock:function(){},initFilter:function(){}}},antiSpiderReset:function(){if(this[_e]){if(this.cacheScrollTop>h.REACH_BOTTOM_SCROLL_TOP){var e=this.cacheScrollTop-h.REACH_BOTTOM_SCROLL_TOP;wx.pageScrollTo({scrollTop:e,duration:0})}this.toast({message:"发现异常，请登录后再试"})}this[_e]="",this[ge]=""},manualPVReport:function(){var e=this,t=(0,w.getCurrentAppVersion)(),a=function(){(0,w.getCurrentAppVersion)()!==w.CODE_BARGAIN?e.manualPVNormal():e.manualPVBargain()};this._readyPromise_=this._readyPromise_||{_resolved:!1,resolve:function(e){void 0===e&&(e=!0),this._resolved||(this._resolved=!0,e&&a())},report:function(){this._resolved&&a()}},t!==w.CODE_BARGAIN&&t!==w.CODE_NORMAL||this._readyPromise_.resolve(!1),this._readyPromise_&&!this._readyPromise_._resolved?this._readyPromise_.resolve():this._readyPromise_.report()},getReportData:function(){return{manual_pv:!0}},manualPVNormal:function(){U({c_id:"c_m84bv26",val_lab:{mp_social:"",custom:{mp_social:""}}})},manualPVBargain:function(){var e={c_id:"c_waimai_4doz7gra",val_lab:{custom:{layout_type:(0,w.getDefaultAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),wm_client:1}}};U(e)},onClickResetFilter:function(e){this.getFilter().clearFilter(),this.reloadHomepagePoilist(e.currentTarget.dataset.module.module_id)},onOpenSettingCancel:function(){q("b_b4ztz",{custom:{reason:"",type:0}}),this.openSettingHide()},onOpenSettingOk:function(){q("b_b4ztz",{custom:{reason:"",type:1}})},onOpenSettingSucc:function(e){var t=e.detail.authSetting["scope.userLocation"];M("b_Ed4Im",{custom:{auth:t?1:0}}),this.setData({locState:"loading"}),t&&this.openSettingHide()},closeNewUserGuideLayer:function(e){void 0===e&&(e=!0),this.setData({showNewUserGuideLayer:!1,isNewUserGuideLayerClosed:e})},newUserGuideLogin:function(){var e=this;q("b_waimai_1dked984_mc",{channel_id:1}),u.loginPlugin.wxLogin().then((function(){e.closeNewUserGuideLayer(!1),e.navToRedpackPage()}))},dealIdType:function(){var e=h.INDEX_CONTAINER_NATIVE_MODULES.HOME_BANNER,t=this.data.indexContainer[e].data.positionDataList[0].resourceDataList;return void 0===t?[]:t},handleEntranceUpdate:function(e){var t,a=e.detail,i=this.dealIdType();i.forEach((function(e){e&&e.bizCode===a.bizCode&&(e.view=a.json_data)}));var o=this.data.useNewMach;Ae.setTags({module_id:"wx_homepage_platinum"}),Ae.setMetric("useNewMach",o),Ae.report(),this.setData(((t={})["indexContainer."+h.INDEX_CONTAINER_NATIVE_MODULES.HOME_BANNER+".data.positionDataList[0].resourceDataList"]=i,t))},setFilterBackGround:function(e){this.setData({"regionListContext.filterGroundSticky":e.detail})},switchVersionPopupClickok:function(){v.lxMge.click("b_waimai_gm3okjem_mc",{layout_type:(0,w.getCurrentAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),escene_type:0})},newUserPindanClickok:function(){v.lxMge.click("b_waimai_8dbf699z_mc",{layout_type:(0,w.getDefaultAppVersion)(),wm_client:1,channel_id:(0,w.getVersionChannelCode)(),activity_id:this.data.bargainPopupInfo.popupTypeFromApi});var e=this.data.bargainPopupInfo.data.click_url;e&&(X.isAppPage(e)?wx.navigateTo({url:X.getAppPageUrl(e)}):"http"===e.slice(0,4)?wx.navigateTo({url:"/pages/web-view/web-view?type=DIRECT&webviewUrl="+encodeURIComponent(e)}):wx.navigateTo({url:e}))},switchVersionPopupAttached:function(){v.lxMge.view("b_waimai_gm3okjem_mv",{layout_type:(0,w.getCurrentAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),escene_type:0})},newUserPindanAttached:function(){v.lxMge.view("b_waimai_8dbf699z_mv",{layout_type:(0,w.getDefaultAppVersion)(),wm_client:1,channel_id:(0,w.getVersionChannelCode)(),activity_id:this.data.bargainPopupInfo.popupTypeFromApi})},saveBoundRelationship:function(){var e;return a.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.inviteCode,t.next=3,a.default.awrap(Te({bizType:1,inviteCode:e,inviteSource:2}));case 3:case"end":return t.stop()}}),null,this)},handleYaoxin:function(e){this.fromYaoxin=this.checkFromYaoxin(e),this.inviteCode=e.inviteCode||""},handleYanxinAttached:function(){v.lxMge.view("b_waimai_2g181sy0_mv",{layout_type:(0,w.getDefaultAppVersion)(),channel_id:(0,w.getVersionChannelCode)()})},handleInviteLotteryClickok:function(){var e,t,i,o,n,r,s,l,c,u,d,p,h,g,_,m,f,x;return a.default.async((function(C){for(;;)switch(C.prev=C.next){case 0:return v.lxMge.click("b_waimai_kx1gvqdm_mc",{layout_type:(0,w.getDefaultAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),wm_client:1}),e=this.data.bargainPopupInfo.data?this.data.bargainPopupInfo.data.jumpUrl:"",t=getApp().store,i=t.getState(),o=i.dev.uuid,n=i.wx,r=n.longitude,s=n.latitude,l=i.recipient,c=l.longitude,u=l.latitude,C.next=6,a.default.awrap(global.mmb.getLoginInfo());case 6:if(C.t0=C.sent,C.t0){C.next=9;break}C.t0={};case 9:return d=C.t0,p=d.token,h=d.userId,C.next=14,a.default.awrap(global.mmb.getIdInfo());case 14:if(C.t1=C.sent,C.t1){C.next=17;break}C.t1={};case 17:if(g=C.t1,_=g.openId,!e){C.next=34;break}return e=(e=/\?/.test(e)?e+"&wm_actual_latitude="+s+"&wm_actual_longitude="+r:e+"?wm_actual_latitude="+s+"&wm_actual_longitude="+r)+"&wm_latitude="+(u||s)+"&wm_longitude="+(c||r)+"&open_id="+_+"&userid="+h+"&wm_logintoken="+p+"&token="+p,C.next=24,a.default.awrap(global.mmb.getUserInfo());case 24:if(C.t2=C.sent,C.t2){C.next=27;break}C.t2={};case 27:m=C.t2,f=m.avatarUrl,x=m.nickName,e=e+"&uuid="+o+"&avatarUrl="+f+"&nickName="+x+"&phone=",e=(e+="&scenceType=3")+"&channel_id="+(0,w.getVersionChannelCode)(),wx.navigateTo({url:"/pages/web-view/web-view?type=DIRECT&webviewUrl="+encodeURIComponent(e)});case 34:case"end":return C.stop()}}),null,this)},handleInviteLotteryAttached:function(){v.lxMge.view("b_waimai_kx1gvqdm_mv",{layout_type:(0,w.getDefaultAppVersion)(),channel_id:(0,w.getVersionChannelCode)(),wm_client:1})},checkFromYaoxin:function(e){var t=e.from;return e.hasOwnProperty("inviteCode")&&"bargain-invite"===t},showAirdropTips:function(e){this.setData({airdropTipShow:!0,airdropTipProps:e.detail||{}})},showtoast:function(e){this.toast(e.detail||{})},hideAirdropTips:function(){this.setData({airdropTipShow:!1})},isDefaultLoc:function(){try{var e=getApp().store.getState().recipient,t=JSON.parse(wx.getStorageSync("wxloc-waimai"));return!(t.latitude&&t.latitude!=c.DEFAULT_LOCATION.latitude&&t.longitude&&t.longitude!=c.DEFAULT_LOCATION.longitude||e.latitude&&e.latitude!=c.DEFAULT_LOCATION.latitude&&e.longitude&&e.longitude!=c.DEFAULT_LOCATION.longitude)}catch(e){return!1}},checkUserLocation:function(e){var t;return a.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=this,wx.getSetting({success:function(a){var i=a.authSetting["scope.userLocation"];t.setData({userLocation:i}),e&&e(i)}});case 2:case"end":return a.stop()}}),null,this)},authLocClose:function(){this.setData({isDefaultLocation:!1})},authLocClick:function(){var e=this;wx.setStorageSync("indexLocationRefresh",!0),wx.setStorageSync("userLocationAuthorAccept",!1),wx.canIUse&&wx.canIUse("openSetting")&&wx.openSetting({success:function(){wx.getSetting({success:function(t){var a=t.authSetting["scope.userLocation"];e.setData({userLocation:a,geoLoading:!1,geoDialog:null,geoModal:null,geoError:null}),e.setPartialRecipient({}),wx.setStorageSync("wxloc-waimai",""),e.hasCallOnLoad=!1,e.geoRelocate(!0,{_mt:{sceneToken:"dj-532f102426ff31ef"}})}})}})},setPhfEventBus:function(){}},Ne=(0,P.default)(Se);(0,i.page)(z(Ne,R,d.pageConnect,E,S,k,N,n.Page,O));
},{isPage:true,isComponent:true,currentFile:'pages/index/index.js'});require("pages/index/index.js");