$gwx_XC_68=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_68 || [];
function gz$gwx_XC_68_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_68_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_68_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_68_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[9],[[9],[[9],[[9],[[9],[[9],[[8],'g',[[2,'!'],[[7],[3,'$primaryNoDone']]]],[[8],'l',[[2,'&&'],[[2,'!'],[[7],[3,'disableCMSMarketingModal']]],[[2,'!'],[[7],[3,'$cmsMarketingModalDisabled']]]]]],[[8],'m',[[7],[3,'$marketingModalNoBelongToPage']]]],[[8],'e',[[2,'!'],[1,0]]]],[[8],'f',[[2,'!'],[1,0]]]],[[8],'t',[[2,'!'],[1,0]]]],[[8],'u',[[2,'!'],[1,0]]]])
Z([3,'titan-one-component'])
Z([3,'1'])
Z([[7],[3,'url']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_68_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_68_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_68=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_68=true;
var x=['./cms_webview/RAW/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_68_1()
var fC5=_mz(z,'titan-one-component',['d',0,'id',1,'s',1],[],e,s,gg)
var cD5=_v()
_(fC5,cD5)
if(_oz(z,3,e,s,gg)){cD5.wxVkey=1
}
cD5.wxXCkey=1
_(r,fC5)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_68";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_68();	if (__vd_version_info__.delayedGwx) __wxAppCode__['cms_webview/RAW/index.wxml'] = [$gwx_XC_68, './cms_webview/RAW/index.wxml'];else __wxAppCode__['cms_webview/RAW/index.wxml'] = $gwx_XC_68( './cms_webview/RAW/index.wxml' );
	;__wxRoute = "cms_webview/RAW/index";__wxRouteBegin = true;__wxAppCurrentFile__="cms_webview/RAW/index.js";define("cms_webview/RAW/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../@babel/runtime/helpers/typeof");require("../../@babel/runtime/helpers/Arrayincludes");var t=require("../../@babel/runtime/helpers/slicedToArray"),r=require("../../@babel/runtime/helpers/createForOfIteratorHelper"),n=require("../../@babel/runtime/helpers/regeneratorRuntime"),a=require("../../@babel/runtime/helpers/objectSpread2");require("./titan.bootstrap.js"),global.beginDefinePage=!0;var i=global.bc("package","cms_webview"),o=require("./titan-scoped-env.js"),u=require("../../@titan/env.js"),s=require("./utils"),c=o.requirePlatform("cms").main,l=c.CMS,p=c.auth,b=c.webviewHandler,d=c.changeRouteUrl,g=void 0!==l?l:{},f="cmsWebview_",m="WOS_WXAPP_SESSION";o.Page({$cmsNotRecommendVid:!0,data:{url:"",isPageHide:!1},debugTags:{key2:"",key3:"",key4:"",key5:"",key6:"",key7:"",key8:"",key9:""},urlInfo:{originUrl:"",decodeUrl:"",setUrl:"",isOemLink:!1,isMaybeOemLink:!1,oemHost:{}},shareData:{},onLoad:function(e){var t=this;return(0,u.babel_coroutine)(n().mark((function r(){var i,u,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.url,t.urlInfo.originUrl=i,t.setDebugTags("key2"),t.setDebugTags("key3",i),i=t.getDefaultUrlByExt(i),t.setDebugTags("key4",i),i){r.next=11;break}return l.showErrorModal({code:"goHome",tip:"2-105100",actions:["reload"],reportLevel:"INFO",detail:{list:["参数为:".concat((0,s.getUrlParamsStr)(e))]}}),t.setDebugTags("key5","emptyUrl"),t.fireDebug(),r.abrupt("return");case 11:return i=(0,s.getDecodeUrl)(i),t.urlInfo.decodeUrl=i,r.next=15,t.validateUrl(i);case 15:if(r.sent){r.next=20;break}return l.showErrorModal({code:"goHome",tip:"2-105101",actions:["reload"],reportLevel:"WARN",detail:{list:["当前url校验不通过"],url:i}}),t.setDebugTags("key5","blackUrl"),r.abrupt("return",t.fireDebug());case 20:return t.setDefaultShareData(e.url),r.next=23,(0,s.checkOemLink)(i,g);case 23:if(u=r.sent,t.urlInfo=a(a({},t.urlInfo),u),t.urlInfo.isMaybeOemLink){r.next=27;break}return r.abrupt("return",t.setUrl(i,"direct"));case 27:if(!["MP-ALIPAY","MP-KS","MP-XHS","MP-DOUYIN"].includes("MP-WEIXIN")){r.next=35;break}return r.next=30,d("redirectTo",{url:"/".concat(o.wx.rprm.currentRoute,"?url=").concat(encodeURIComponent(e.url))},null,!0);case 30:if(!(c=r.sent)||c.includes("cms_webview/index")){r.next=35;break}return t.setDebugTags("key5","toMiniPrograms"),t.fireDebug(),r.abrupt("return",o.wx.redirectTo({url:c}));case 35:t.fireOemLink(i,e);case 36:case"end":return r.stop()}}),r)})))()},fireOemLink:function(e,t){var r=this;return(0,u.babel_coroutine)(n().mark((function i(){var u,c,p,d,g,f,m,h,v,k,w,x;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.titan.stamp("weimobOpenid-webview-onload"),b.onWebviewLoad(r,t),u=(0,s.getUrlParams)(e),c=u.jumpUrl,p=void 0===c?"":c,d=u.appid,!(e&&p&&d)){n.next=8;break}return g=(0,s.getDecodeUrl)(p),r.setDebugTags("key5","toOtherMiniProgram"),r.fireDebug(),n.abrupt("return",l.navigator({url:(0,s.fillSlashToPath)(g),appId:d}));case 8:return r.setDebugTags("key6",r.urlInfo),f=e.split("?")[0],n.next=12,r.authPopup(u);case 12:return m=(0,s.getFormatValueParams)(u),n.next=15,r.getPublicParams(e);case 15:if(h=n.sent,v=a(a({},h),m),k=(0,s.getUrlParamsStr)(v),w=[f,k].join("?"),n.t0=!0!==t.passpmcparams&&"true"!==t.passpmcparams,!n.t0){n.next=24;break}return n.next=23,r.addGlobalPmc(w);case 23:w=n.sent;case 24:x=(0,s.hostToFusion)(w,v,r.urlInfo.oemHost),r.setUrl(x,"normal");case 26:case"end":return n.stop()}}),i)})))()},onHide:function(){this.data.isPageHide=!0},onShow:function(){},validateUrl:function(e){return(0,u.babel_coroutine)(n().mark((function t(){var r,a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.getCurrentWOSSettingInfo("webviewURL");case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return",!0);case 6:if(null===(r=i.white)||void 0===r||!r.length){t.next=8;break}return t.abrupt("return",(0,s.listItemInUrl)(i.white,e));case 8:if(null===(a=i.black)||void 0===a||!a.length){t.next=10;break}return t.abrupt("return",!(0,s.listItemInUrl)(i.black,e));case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},freshenPage:function(){o.wx.redirectTo({url:"/cms_webview/index?url=".concat(encodeURIComponent(this.urlInfo.originUrl))})},addGlobalPmc:function(e){return(0,u.babel_coroutine)(n().mark((function t(){var r,a,i,o,u,c,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.getPMCMap(2);case 3:if(r=t.sent,a=e.split("?")[0]||"",i=e.substring(a.length),!(o=(0,s.getUrlParams)(i)).vid||0===o.vid){t.next=11;break}r.vid&&(r.vid.value=o.vid),t.next=16;break;case 11:if(!r.vid){t.next=16;break}return t.next=14,l.getVidInfo().catch((function(e){return e}));case 14:(u=t.sent).vid?r.vid.value=u.vid:delete r.vid;case 16:return c="",Object.keys(r).forEach((function(e){var t=r[e];c&&(c+="-"),c+=t.type.join("|")+"."+e+"."+(t.ttl||0),void 0!==t.value&&(o[e]=t.value)})),o.pmc?(o.pmc=decodeURIComponent(o.pmc),o.pmc+="-"+c,o.pmc=encodeURIComponent(o.pmc)):(o.pmc=c,o.pmc=encodeURIComponent(o.pmc)),p=a+"?"+(0,s.getUrlParamsStr)(o),t.abrupt("return",p);case 23:return t.prev=23,t.t0=t.catch(0),t.abrupt("return",e);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},getDefaultUrlByExt:function(e){var t=e;if(-1!==["MP-BAIDU","MP-DOUYIN"].indexOf("MP-WEIXIN")&&(!e||"undefined"===e)){var r,n,a,i=null===(r=(0,s.getExtConfig)())||void 0===r||null===(n=r.form)||void 0===n?void 0:n.webviewUrl;if(i)return i;var o=(null===(a=(0,s.getExtConfig)())||void 0===a?void 0:a.form)||{},u=o.basicInfo,c=o.cmspiid,l=(u||{}).cid;if(l&&c)return"https://".concat(l,".cms.n.saas.weimob").concat("qa"===(0,s.envByExt)()?"qa":"",".com/bos/cms/").concat(l,"/").concat("0","/").concat(c,"/design/index")}return t},setUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.setDebugTags("key7",e),this.setDebugTags("key8",t),this.urlInfo.setUrl=e,this.setData({url:e},(function(){o.titan.stamp("weimobOpenid-webview-setData")})),this.fireDebug()},setDebugTags:function(e,t){var r=this,n=function(t){r.debugTags[e]="".concat(f).concat(t)};if("key2"===e)return n("MP-WEIXIN");if("key3"===e||"key4"===e||"key7"===e)return n(function(e){if(!e)return"empty";var t=(e=(0,s.getDecodeUrl)(e)).split("?")[0];return t.includes("payment/weixinpay")?"pay":t.includes("fusion.")?"fusion":t.includes("show.")?"show":"other"}(t));if("key5"===e||"key8"===e||"key9"===e)return n(t);if("key6"===e){var a=t.isOemLink,i=t.isMaybeOemLink;return n(a?"is":i?"may":"no")}},getDebugTags:function(){var e=this,t={};return Object.keys(this.debugTags).forEach((function(r){e.debugTags[r]&&(t[r]=e.debugTags[r])})),t},fireDebug:function(){try{var e=this.getDebugTags();o.wx.hound.debug(a({method:"".concat(f,"main"),data:this.urlInfo},e))}catch(e){}},onUnload:function(){o.titan.stamp("weimobOpenid-webview-onUnload"),b.onWebviewUnload(this)},authPopup:function(e){var a=this;return(0,u.babel_coroutine)(n().mark((function i(){var u,s,c,l,p,b,d,g,f;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=((null==e?void 0:e.authMode)||"").split(";"),s=a.selectComponent("#cms:registLogin"),c=r(u),n.prev=3,c.s();case 5:if((l=c.n()).done){n.next=24;break}if(p=l.value,b=p.split(","),d=t(b,2),g=d[0],f=d[1],!["1","2","3"].includes(g)){n.next=22;break}if(a.setDebugTags("key9","authType"),"true"!==f){n.next=18;break}if(s){n.next=14;break}return o.wx.showModal({title:"",showCancel:!1,content:"获取授权组件失败"}),n.abrupt("return",o.Promise.reject(new Error("获取授权组件失败")));case 14:return n.next=16,s.loginCheck({customLoginType:Number(g)}).catch((function(){return o.wx.showModal({title:"",showCancel:!1,content:"登录失败，退出重新登录"}),o.Promise.reject(new Error("登录失败，退出重新登录"))}));case 16:n.next=22;break;case 18:if(n.t0=s,!n.t0){n.next=22;break}return n.next=22,s.loginCheck({customLoginType:Number(g)}).catch((function(){}));case 22:n.next=5;break;case 24:n.next=29;break;case 26:n.prev=26,n.t1=n.catch(3),c.e(n.t1);case 29:return n.prev=29,c.f(),n.finish(29);case 32:return n.abrupt("return",o.Promise.resolve(!0));case 33:case"end":return n.stop()}}),i,null,[[3,26,29,32]])})))()},getPublicParams:function(e){return(0,u.babel_coroutine)(n().mark((function t(){var r,i,u,c,l,b,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},i=o.wx.getStorageSync(m)){t.next=6;break}return t.next=5,p.login().catch((function(e){}));case 5:i=o.wx.getStorageSync(m);case 6:return c=(u=i).appid,l=u.openid,b=u.token,r={ec_appid:c,ec_openid:l,xapptoken:b},e.split("?")[0].includes("show.n")&&e.split("?")[0].includes("/saas/zhan/")&&delete r.xapptoken,"qa"===(0,s.envByExt)()&&(r.log=!0),d={pageStackLength:o.getCurrentPages().length,websource:(0,s.channelInfo)().source,xappwebsource:(0,s.channelInfo)().PLATFORM+"_WEIMOB",notSkipMerchantAppid:!0,miniProgramChannel:"cms",miniProgramWebviewPath:encodeURIComponent(o.wx.rprm.currentRoute),miniProgramPayPath:encodeURIComponent("/cms_webview/webview_payment")},t.abrupt("return",a(a({},r),d));case 12:case"end":return t.stop()}}),t)})))()},setDefaultShareData:function(e){this.shareData={path:(0,s.fillSlashToPath)(o.wx.rprm.currentRoute+"?url=".concat(encodeURIComponent(e)))}},bindMessage:function(t){var r=this;try{o.wx.hound.debug({method:"".concat(f,"postMessage"),data:t})}catch(e){}var n=t.detail.data;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return}var a={};if(a=Array.isArray(n)&&n.length?n[n.length-1]:n,"object"==e(a)&&null!==a){a.data&&!a.action&&"object"==e(a.data)&&(a=a.data);"share"==a.action?(a.path=o.wx.rprm.currentRoute+"?url=".concat(encodeURIComponent(a.url)),a.imageUrl=a.imageUrl||a.imgUrl,r.shareData=a):"setTitle"==a.action||"openAlipayApp"===a.action&&a.appCode}},onShareAppMessage:function(){return this.shareData}}),global.ec(i),global.beginDefinePage=!1;
},{isPage:false,isComponent:true,currentFile:'cms_webview/RAW/index.js'});require("cms_webview/RAW/index.js");