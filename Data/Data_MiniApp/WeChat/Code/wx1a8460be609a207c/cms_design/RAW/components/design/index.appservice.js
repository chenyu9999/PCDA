$gwx_XC_27=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_27 || [];
function gz$gwx_XC_27_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_27_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_27_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_27_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'design-platform-page'])
Z(z[0])
Z([a,[3,'min-height: calc(100vh - '],[[2,'||'],[[7],[3,'tabBarHeight']],[1,0]],[3,'rpx);']])
Z([[7],[3,'pageLoaded']])
Z([3,'callFun'])
Z([3,'pageLoadMore'])
Z([3,'pageReady'])
Z([3,'refreshPage'])
Z([3,'shareMessage'])
Z([3,'showDebug'])
Z([3,'startPlayVideo'])
Z([3,'design-platform-container'])
Z([1,true])
Z([[7],[3,'exData']])
Z([[7],[3,'hooks']])
Z([3,'design_sdk'])
Z([[7],[3,'lastPage']])
Z([[7],[3,'pageModules']])
Z([[7],[3,'weimobCloudInfo']])
Z([[7],[3,'errorPlaceHolderOptions']])
Z(z[19])
Z([3,'dsnidx_5'])
Z([3,'position: relative;z-index: 1'])
Z([[7],[3,'isUserCenterPage']])
Z([1,1])
Z([3,'banner-ad'])
Z([3,'dsnidx_6'])
Z([[2,'&&'],[[7],[3,'pageLoaded']],[[7],[3,'showPoweredBy']]])
Z([a,[3,'powered-by '],[[2,'?:'],[[7],[3,'grayEnabled']],[1,'grey'],[1,'']]])
Z([3,'dsnidx_8'])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'pageLoaded']],[[7],[3,'quickerItems']]],[[2,'>'],[[6],[[7],[3,'quickerItems']],[3,'length']],[1,0]]])
Z([3,'tapQuicker'])
Z([[7],[3,'quickerNavFixsOfPage']])
Z([1,false])
Z([3,'dsnidx_b'])
Z([[7],[3,'quickerItems']])
Z([[7],[3,'navbarHeight']])
Z([[7],[3,'showNavTitle']])
Z(z[3])
Z([3,'onShareCancel'])
Z([3,'dsnidx_c'])
Z([[6],[[7],[3,'shareMessage']],[3,'posterInfo']])
Z([[7],[3,'showShare']])
Z(z[12])
Z(z[12])
Z(z[3])
Z([3,'onClose'])
Z([3,'dsnidx_d'])
Z([[2,'&&'],[[7],[3,'isOpenOfficialAccount']],[[7],[3,'showFocusOfficialAccount']]])
Z([[7],[3,'isHomePage']])
Z([3,'dsnidx_e'])
Z(z[3])
Z([3,'hideModal'])
Z([3,'dsnidx_g'])
Z([[7],[3,'modal']])
Z([[7],[3,'skuData']])
Z([3,'dsnidx_h'])
Z(z[55])
Z([[2,'&&'],[[7],[3,'pageLoaded']],[[6],[[7],[3,'deliveryData']],[3,'displayDelivery']]])
Z([3,'goToBuySplitly'])
Z([3,'hideCartDeliveryWay'])
Z(z[60])
Z([[6],[[7],[3,'deliveryData']],[3,'deliveryList']])
Z([[6],[[7],[3,'deliveryData']],[3,'displayDelivery']])
Z([3,'dsnidx_i'])
Z([[2,'&&'],[[7],[3,'pageLoaded']],[[6],[[7],[3,'bulletChatInfo']],[3,'show']]])
Z([[6],[[7],[3,'bulletChatInfo']],[3,'bizId']])
Z([3,'design-bullet-chat'])
Z([3,'dsnidx_k'])
Z([1,2])
Z([[7],[3,'bgMusicUrl']])
Z([3,'onPlay'])
Z([3,'design-platform-bgmusic'])
Z([[7],[3,'moveMaxY']])
Z(z[36])
Z([[7],[3,'bgMusicIcon']])
Z(z[70])
Z([[2,'&&'],[[7],[3,'pageLoaded']],[[6],[[7],[3,'debugInfo']],[3,'show']]])
Z([3,'hideDebug'])
Z([3,'debugToggleModule'])
Z([3,'debugToggleModuleDebug'])
Z([[7],[3,'debugInfo']])
Z([3,'dsnidx_n'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_27_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_27_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_27=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_27=true;
var x=['./cms_design/RAW/components/design/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_27_1()
var fSH=_mz(z,'view',['class',0,'id',1,'style',1],[],e,s,gg)
var cTH=_v()
_(fSH,cTH)
if(_oz(z,3,e,s,gg)){cTH.wxVkey=1
var c8H=_mz(z,'design-sdk',['bind:callFun',4,'bind:pageLoadMore',1,'bind:pageReady',2,'bind:refreshPage',3,'bind:shareMessage',4,'bind:showDebug',5,'bind:startPlayVideo',6,'class',7,'enablePagination',8,'exData',9,'hooks',10,'id',11,'lastPage',12,'pageModules',13,'weimobCloudInfo',14],[],e,s,gg)
_(cTH,c8H)
}
var hUH=_v()
_(fSH,hUH)
if(_oz(z,19,e,s,gg)){hUH.wxVkey=1
var h9H=_mz(z,'error-placeholder',['errorOptions',20,'id',1,'style',2],[],e,s,gg)
_(hUH,h9H)
}
var oVH=_v()
_(fSH,oVH)
if(_oz(z,23,e,s,gg)){oVH.wxVkey=1
var o0H=_mz(z,'ad',['adScene',24,'extClass',1,'id',2],[],e,s,gg)
_(oVH,o0H)
}
var cWH=_v()
_(fSH,cWH)
if(_oz(z,27,e,s,gg)){cWH.wxVkey=1
var cAI=_mz(z,'powered-by',['class',28,'id',1],[],e,s,gg)
_(cWH,cAI)
}
var oXH=_v()
_(fSH,oXH)
if(_oz(z,30,e,s,gg)){oXH.wxVkey=1
var oBI=_mz(z,'quicker',['bind:tapQuicker',31,'fixNavs',1,'fixed',2,'id',3,'idList',4,'moveMinY',5,'showNavTitle',6],[],e,s,gg)
_(oXH,oBI)
}
var lYH=_v()
_(fSH,lYH)
if(_oz(z,38,e,s,gg)){lYH.wxVkey=1
var lCI=_mz(z,'share-modal',['bind:cancelEvent',39,'id',1,'model',2,'shareVisible',3,'showDownloadPoster',4,'showShareToCircle',5],[],e,s,gg)
_(lYH,lCI)
}
var aZH=_v()
_(fSH,aZH)
if(_oz(z,45,e,s,gg)){aZH.wxVkey=1
var aDI=_mz(z,'official-account',['bind:onClose',46,'id',1,'visible',2],[],e,s,gg)
_(aZH,aDI)
}
var t1H=_v()
_(fSH,t1H)
if(_oz(z,49,e,s,gg)){t1H.wxVkey=1
var tEI=_n('start-page')
_rz(z,tEI,'id',50,e,s,gg)
_(t1H,tEI)
}
var e2H=_v()
_(fSH,e2H)
if(_oz(z,51,e,s,gg)){e2H.wxVkey=1
var eFI=_mz(z,'design-modal',['bind:hide',52,'id',1,'modal',2],[],e,s,gg)
_(e2H,eFI)
}
var b3H=_v()
_(fSH,b3H)
if(_oz(z,55,e,s,gg)){b3H.wxVkey=1
var bGI=_mz(z,'sku-component',['id',56,'skuData',1],[],e,s,gg)
_(b3H,bGI)
}
var o4H=_v()
_(fSH,o4H)
if(_oz(z,58,e,s,gg)){o4H.wxVkey=1
var oHI=_mz(z,'delivery-popup',['bind:goToBuySplitly',59,'bind:onPopupClickMask',1,'bind:onPopupClose',2,'deliveryList',3,'displayDelivery',4,'id',5],[],e,s,gg)
_(o4H,oHI)
}
var x5H=_v()
_(fSH,x5H)
if(_oz(z,65,e,s,gg)){x5H.wxVkey=1
var xII=_mz(z,'bullet-chat',['bizId',66,'bulletChatClass',1,'id',2,'sceneType',3],[],e,s,gg)
_(x5H,xII)
}
var o6H=_v()
_(fSH,o6H)
if(_oz(z,70,e,s,gg)){o6H.wxVkey=1
var oJI=_mz(z,'background-music',['bind:onPlay',71,'id',1,'moveMaxY',2,'moveMinY',3,'musicIcon',4,'url',5],[],e,s,gg)
_(o6H,oJI)
}
var f7H=_v()
_(fSH,f7H)
if(_oz(z,77,e,s,gg)){f7H.wxVkey=1
var fKI=_mz(z,'debug-modal',['bind:hideDebug',78,'bind:toggleModule',1,'bind:toggleModuleDebug',2,'debugInfo',3,'id',4],[],e,s,gg)
_(f7H,fKI)
}
cTH.wxXCkey=1
cTH.wxXCkey=3
hUH.wxXCkey=1
hUH.wxXCkey=3
oVH.wxXCkey=1
oVH.wxXCkey=3
cWH.wxXCkey=1
cWH.wxXCkey=3
oXH.wxXCkey=1
oXH.wxXCkey=3
lYH.wxXCkey=1
lYH.wxXCkey=3
aZH.wxXCkey=1
aZH.wxXCkey=3
t1H.wxXCkey=1
t1H.wxXCkey=3
e2H.wxXCkey=1
e2H.wxXCkey=3
b3H.wxXCkey=1
b3H.wxXCkey=3
o4H.wxXCkey=1
o4H.wxXCkey=3
x5H.wxXCkey=1
x5H.wxXCkey=3
o6H.wxXCkey=1
o6H.wxXCkey=3
f7H.wxXCkey=1
f7H.wxXCkey=3
_(r,fSH)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_27";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_27();	if (__vd_version_info__.delayedGwx) __wxAppCode__['cms_design/RAW/components/design/index.wxml'] = [$gwx_XC_27, './cms_design/RAW/components/design/index.wxml'];else __wxAppCode__['cms_design/RAW/components/design/index.wxml'] = $gwx_XC_27( './cms_design/RAW/components/design/index.wxml' );
	;__wxRoute = "cms_design/RAW/components/design/index";__wxRouteBegin = true;__wxAppCurrentFile__="cms_design/RAW/components/design/index.js";define("cms_design/RAW/components/design/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../@babel/runtime/helpers/defineProperty"),a=require("../../../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../../../@babel/runtime/helpers/objectSpread2");require("../../titan.bootstrap.js");var r=global.bc("package","cms_design"),o=require("../../titan-scoped-env.js"),i=require("../../../../@titan/env.js"),n=require("../../miniprogram_npm/@design-platform/wx-utils/global.js"),s=g(require("../../miniprogram_npm/@design-platform/wx-sdk/addCartHooks.js")),u=g(require("../../miniprogram_npm/@design-platform/wx-sdk/deliveryHooks.js")),d=require("./dealPageData"),l=require("./util");function g(e){return e&&e.__esModule?e:{default:e}}var c=o.requirePlatform("cms").main,h=c.CMS,p=c.auth,f=(c.getH5Path,c.session),m=(0,n.getMenuButtonBoundingClientRect)(),v=(0,n.getPlatFormChannel)();o.Component({behaviors:[s.default,u.default],properties:{isHomePage:Boolean,isUserCenterPage:Boolean},options:{addGlobalClass:!0},data:{hasPageLoaded:!1,pageLoaded:!1,needPagination:!0,pageModules:[],lastPage:!1,quickerItems:[],quickerNavFixsOfPage:"",showShare:!1,shareMessage:{shareTitle:"",shareDescription:"",shareImage:""},usePoweredBy:!1,quickerStyle:"",firstPaginationNeedReadyNum:0,firstPaginationAllReady:!1,tabBarHeight:0,showPoweredBy:!0,firstPageLoaded:!1,modal:{name:"",show:!1,params:null},bulletChatInfo:{show:!1,bizId:""},showFocusOfficialAccount:!1,isOpenOfficialAccount:!0,weimobCloudInfo:{isWOS:!0,tabBarHeight:0,fixButtonInfo:{}},debugInfo:{show:!1,pageTickets:[],pages:[[]],showModuleDebug:!1},navbarHeight:v===n.WeiXin?(m.bottom||0)+4:0,grayEnabled:!1,moveMaxY:o.wx.rprm.systemInfo.windowHeight,errorPlaceHolderOptions:""},lifetimes:{attached:function(){var e;null===(e=o.titan)||void 0===e||e.stamp("CMS_DESIGN:装修页:attached"),this.init()},ready:function(){},detached:function(){this.isDetached=!0}},methods:{init:function(){o.wx.hideShareMenu({fail:function(e){console.warn(e)}});var e=this.data,a=e.isHomePage,t=e.isUserCenterPage,r=this.getCurrentPage();this.pagename=r.pagename;var i=r&&r.options&&(r.options.pageid||r.options.pageId);if(a||t)a?this.pageCode="home":t&&(this.pageCode="userCenter"),this.initReady();else if(i)this.pageId=i,this.initReady();else{var n;this.showPageIdNullError({list:["pageId为空"],path:(0,l.getPageUrl)()}),null===(n=o.wx.hound)||void 0===n||n.reportError({msg:"pageId为空"})}},initReady:function(){var e=this;h.getMerchantStyleInfo().then((function(a){var r=(null==a?void 0:a.grayEnabled)&&e.data.isHomePage;e.exData=t(t(t({},e.exData),a),{},{grayEnabled:r}),r&&e.setData({grayEnabled:r})}));var a=h.getCacheLocation();if(a){var r=a.latitude,i=a.longitude;this.latitude=r,this.longitude=i}this.exData={pagename:this.pagename,pageId:this.pageId,isHomePage:this.data.isHomePage,isUserCenterPage:this.data.isUserCenterPage,showModal:function(a,t){return e.showModal(a,t)},hideModal:function(){return e.hideModal()},refreshPage:function(){return e.loadData(!0)},addCart:function(a){return e.addCart(a)},delivery:function(a){return e.delivery(a)}},this.hooks={base:{addCart:function(a){return e.addCart(a)},delivery:function(a){return e.delivery(a)}}},this.loadData(),h.getVidInfo().then((function(a){if(a){var t=a.productId,r=a.productInstanceId,o=a.vidName,i=a.vid;e.productId=t,e.productInstanceId=r,e.rprmInfo={pagename:e.pagename,product_id:t,product_instance_id:r},e.vidName=o,e.triggerEvent("pageReady",{pageId:e.pageId,productId:t,productInstanceId:r,vid:i})}}));var n=this;h.checkNavMenu(n).then((function(a){var r=a||{},i=r.hasNav,s=r.tabBarHeight,u=o.wx.rprm.systemInfo,d=u.windowHeight,g=(u.screenHeight,u.statusBarHeight,u.titleBarHeight,i?s:0);n.tabBarHeight=g;var c=n.getQuickerPosition(),h=c.fixButtonInfo,p=c.quickerStyle,f=t(t({},n.data.weimobCloudInfo),{},{tabBarHeight:s,fixButtonInfo:h}),m=t(t(t({},e.exData),e.data.exData),{},{weimobCloudInfo:f});e.exData=m,n.setData({tabBarHeight:s,quickerStyle:p,weimobCloudInfo:f,exData:m,moveMaxY:d-(0,l.rpxToPx)(g)})}));var s=f.get("WOS_WXAPP_SESSION");s&&s.wid&&this.setData({"weimobCloudInfo.wid":s.wid})},callFun:function(e){var a=e.detail||{},t=a.type,r=a.options;"showModal"===t?this.showModal(r.name,r.params):"hideModal"===t?this.hideModal():"refreshPage"===t?this.loadData(!0):"addCart"===t?this.addCart(r):"delivery"===t?this.delivery(r):"hidePoweredBy"===t?this.hidePoweredBy():"startPlayVideo"===t&&this.startPlayVideo()},loadData:function(){var e,a=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o.titan.hidePageLoading(),h.showLoading(),this.pageIndex=1,r?this.setData({firstPaginationNeedReadyNum:0,firstPaginationAllReady:!1,errorPlaceHolderOptions:""}):this.setData({pageLoaded:!1}),null===(e=o.titan)||void 0===e||e.stamp("CMS_DESIGN:装修页:beforeRequest"),this.loadDataRequest({pageNum:this.pageIndex}).then((function(e){var i;if(null===(i=o.titan)||void 0===i||i.stamp("CMS_DESIGN:装修页:afterRequest"),a.triggerEvent("loadDataReady",{pageId:null==e?void 0:e.pageId}),r&&a.stopRefresh(),e){var n=e.pageModules,s=e.lastPage,u=e.exData,d=e.pageAttr,l=e.pageId,g=e.hasLocationMenu;a.pageId=l,a.pageSize=n.length;var c=a.getBulletChatInfo(d);a.setData({pageModules:n,pageLoaded:!0,lastPage:!!s,exData:t(t(t({},a.exData),u),{},{hasLocationMenu:g}),hooks:a.hooks,pageStyle:a.getPageStyle(d),quickerItems:a.getQuickerItems(d),quickerNavFixsOfPage:d.fixNavs,showNavTitle:d.showNavTitle,bulletChatInfo:c,showFocusOfficialAccount:d.showFocusOfficialAccount,bgMusicUrl:a.getBgMusicUrl(d),bgMusicIcon:a.getBgMusicIcon(d)},(function(){var e;null===(e=o.titan)||void 0===e||e.stamp("CMS_DESIGN:装修页:afterSetData")})),a.checkOpenShare(d),a.getPosterShareUrl().then((function(e){var t=a.getShareMessage(d,e);a.setData({shareMessage:t}),a.triggerShareMessage(t)})),s||(a.data.firstPaginationNeedReadyNum=a.pageSize,a.data.firstPaginationAllReady=!a.pageSize)}else h.hideLoading()})).catch((function(e){console.error("error:",e),h.hideLoading(),a.setData({pageLoaded:!0})}))},loadDataByPage:function(e,t){var r=this;return(0,i.babel_coroutine)(a().mark((function o(){var i,n,s,u,d;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.pageIndex=e,a.next=3,r.loadDataRequest({pageNum:e});case 3:if(i=a.sent){a.next=7;break}return t(),a.abrupt("return");case 7:n=i.pageModules,s=i.resData,i.exData,u=i.hasLocationMenu,d=(s||{}).lastPage,r.setData({lastPage:!1!==d}),t({pageModules:n,lastPage:d,hasLocationMenu:u});case 10:case"end":return a.stop()}}),o)})))()},pageLoadMore:function(e){var a=e.detail||{},t=a.pageNum,r=a.callback;t&&this.loadDataByPage(t,r)},getPosterShareUrl:function(){return(0,i.babel_coroutine)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.appendPMCToURL({baseUrl:(0,l.getPageUrl)(),types:[3,4],kinds:[3,4]}));case 1:case"end":return e.stop()}}),e)})))()},loadDataRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.pageNum,o=this;return(0,i.babel_coroutine)(a().mark((function e(){var i,n,s,u,l,g,c,p,f,m,v,b,I,P,w,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.pageCode&&1===r,o.pageId||i){e.next=3;break}return e.abrupt("return");case 3:return n=h.getBusinessData(),s={bosId:null==n?void 0:n.bosId,requestType:h.getCurrentChannel(),pageSize:10,pageNum:r,exParams:{pageId:o.pageId,longitude:o.longitude,latitude:o.latitude},jsonSwitch:!0},i?s.pageCode=o.pageCode:s.pageId=o.pageId,e.prev=5,e.next=8,h.post("/mp-decoration/web/page/queryPageInfo",s,{weimobOS:!0,level:1,ignoreErrCode:!0});case 8:l=e.sent,u=l.data,o.data.debugInfo.pageTickets[r-1]=u.globalTicket,e.next=19;break;case 13:if(e.prev=13,e.t0=e.catch(5),"vidFail"!==e.t0.$sdkErrorSource){e.next=17;break}return e.abrupt("return");case 17:return e.t0&&o.isUnpublishErrorCode(e.t0.errcode)?(o.isHomePage&&o.reportQueryPageInfoError(e.t0,s,{isUnPublishError:!0}),o.showUnPublishError(e.t0)):(o.reportQueryPageInfoError(e.t0,s),o.showCommonError(e.t0)),e.abrupt("return");case 19:if(!u||0!==u.errcode){e.next=23;break}return g=u.data,p=(c=g||{}).lastPage,f=c.hasLocationModule,m=(0,d.getPageInfoFromServerData)(g,1===r,{isHomePage:o.data.isHomePage,pageIndex:r-1,grayEnabled:o.data.grayEnabled}),v=m.pageModules,b=m.exData,I=m.pageAttr,P=m.showNavTitle,w=m.pageId,1!==r||v.filter((function(e){return"@design-platform/top-custom-navbar"!==e.moduleName})).length||(delete(y=t({},u)).data,o.setData({errorPlaceHolderOptions:{code:"pageEmpty",tip:"2-105003",reportLevel:"INFO",detail:y}})),e.abrupt("return",{resData:g,pageModules:v,lastPage:p,exData:b,pageAttr:I,showNavTitle:P,pageId:w,hasLocationMenu:f});case 23:u&&o.isUnpublishErrorCode(u.errcode)?(o.isHomePage&&o.reportQueryPageInfoError({msg:u},s,{isUnPublishError:!0}),o.showUnPublishError(u)):(o.reportQueryPageInfoError({msg:u},s),o.showCommonError(u));case 24:case"end":return e.stop()}}),e,null,[[5,13]])})))()},isUnpublishErrorCode:function(e){return 900210031000020===e||900210031000019===e||900210021000027===e},getCurrentPage:function(){var e=o.getCurrentPages();return e.length>0?e[e.length-1]:null},showUnPublishError:function(e){var a;this.isDetached||null===(a=h.showErrorModal)||void 0===a||a.call(h,{code:"pageUnPublish",tip:"2-105001",actions:["goHome"],pageId:this.getPageId(),detail:e,reportLevel:"INFO"})},showPageIdNullError:function(e){this.isDetached||h.getVidInfo().then((function(a){var t;a&&(null===(t=h.showErrorModal)||void 0===t||t.call(h,{code:"pageNotFound",tip:"2-105000",reportLevel:"WARN",detail:e}))}))},showCommonError:function(e){var a;this.isDetached||null===(a=h.showErrorModal)||void 0===a||a.call(h,{code:"error",tip:"2-105002",reportLevel:"WARN",detail:e})},reportQueryPageInfoError:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.isUnPublishError;h.catchFatalError({name:"DesignQueryPageInfo",error:e,data:{params:a,errcode:null==e?void 0:e.errcode,globalTicket:null==e?void 0:e.globalTicket},tags:{unPublish:r}})},stopRefresh:function(){this.setData({pageLoaded:!1}),o.wx.hideNavigationBarLoading(),o.wx.stopPullDownRefresh()},getPageStyle:function(e){if(e){var a=e.bgType,t=e.bgColor,r=e.bgImage;return 2==+a?"background:url(".concat(r,") rgb(255, 255, 255)"):"background:".concat(t)}},getQuickerItems:function(e){var a,t;if(!e||!e.fixNavs||!e.hasFixNav)return[];var r=e.fixNavs,o=[];try{o=JSON.parse(r)}catch(e){console.error("fixNavs Error!",e)}return(null===(a=o)||void 0===a||null===(t=a.map)||void 0===t?void 0:t.call(a,(function(e){return e.id})))||[]},getBulletChatInfo:function(e){var a=e.marketingAtmosphere;return{show:!!a,bizId:a}},getShareMessage:function(e,a){if(!e)return{};var t=e.shareTitle,r=e.shareDescription,o=e.sharePoster,i=e.supportShare,s=e.shareImage,u=e.sharePosterPic,d=p.getUserBasicInfo();return{shareTitle:t,shareDescription:r,shareImage:s,shareBigPic:o,supportShare:i,posterInfo:{queryParameter:{source:(0,n.getPlatFormSource)(),url:a,posterText:d&&d.nickName?"来自：".concat(d.nickName," 的推荐"):"",title:t,description:r,imageUrl:u||o}}}},triggerShareMessage:function(e){this.triggerEvent("shareMessage",t(t({},e),{},{shareImage:null==e?void 0:e.shareImage}))},checkOpenShare:function(e){if(!e)return{};!e.supportShare||this.data.isUserCenterPage?o.wx.hideShareMenu({fail:function(e){console.warn(e)}}):o.wx.showShareMenu({menus:["shareAppMessage","shareTimeline"],fail:function(e){console.warn(e)}})},tapQuicker:function(e){var a=e.detail;a&&"CMS_QUICKER_SHARE"===a.moduleId&&this.onQuickerShare()},onQuickerShare:function(){var e=this;if((this.data.shareMessage||{}).supportShare){var a=function(){var a=p.getUserBasicInfo();e.data.shareMessage.posterInfo.queryParameter.posterText=a&&a.nickName?"来自：".concat(a.nickName," 的推荐"):"来自好友的推荐",e.setData({shareMessage:e.data.shareMessage},(function(){e.setData({showShare:!0})}))};p.isAuthRejectByType("share")?a():p.isVerifyAuth().then((function(e){a()})).catch((function(e){a()}))}else o.wx.showToast({title:"抱歉，当前页面暂不支持转发",icon:"none"})},onShareCancel:function(){this.setData({showShare:!1})},getQuickerPosition:function(){var e={bottom:136+(this.tabBarHeight||0),right:28,space:20,width:96,height:96};return{fixButtonInfo:e,quickerStyle:"bottom: ".concat(e.bottom,"rpx")}},showModal:function(e,a){this.setData({modal:{show:!0,name:e,params:a}})},hideModal:function(){this.setData({modal:{show:!1,name:""}})},onClose:function(){this.setData({isOpenOfficialAccount:!1})},hideCartDeliveryWay:function(){var e;(e=this.data.deliveryData).hideCartDeliveryWay.apply(e,arguments)},goToBuySplitly:function(){var e;(e=this.data.deliveryData).goToBuySplitly.apply(e,arguments)},hidePoweredBy:function(){this.setData({showPoweredBy:!1})},startPlayVideo:function(){var e=this.selectComponent("#design-platform-bgmusic");null==e||e.stopBackgroundMusic()},onPlay:function(){var e,a=this.getCurrentPage();(null==a||null===(e=a.curPlayingVideo)||void 0===e?void 0:e.context)&&a.curPlayingVideo.context.pause()},showDebug:function(e){var a=e.detail.localPages;if(a){var r=a.map((function(e,a){return{show:0===a,modules:e.map((function(e){return{moduleName:e.moduleName,id:e.id,moduleVersion:e.moduleVersion,isEmpty:e.isEmpty,globalTicket:e.globalTicket,show:e.show}}))}}));this.setData({debugInfo:t(t({},this.data.debugInfo),{},{show:!0,pages:r})})}},hideDebug:function(){this.setData({debugInfo:t(t({},this.data.debugInfo),{},{show:!1,pages:[]})})},debugToggleModule:function(a){var t=a.detail,r=t.index,o=t.pageIndex,i=this.selectComponent("#design_sdk");if(i&&i.debugToggleModule){var n=this.data.debugInfo.pages[o].modules[r].show;this.setData(e({},"debugInfo.pages[".concat(o,"].modules[").concat(r,"].show"),!n)),i.debugToggleModule({index:r,pageIndex:o,show:!n})}},debugToggleModuleDebug:function(){var e=this.selectComponent("#design_sdk");if(e&&e.debugToggleModule){var a=this.data.debugInfo.showModuleDebug;this.setData({"debugInfo.showModuleDebug":!a}),e.debugToggleModuleDebug({show:!a})}},getBgMusicUrl:function(e){var a,t;if(!e.bgMusic)return"";try{t=JSON.parse(e.bgMusic)}catch(e){}return null===(a=t)||void 0===a?void 0:a.url},getBgMusicIcon:function(e){if(!e.musicIcon)return null;var a;try{a=JSON.parse(e.musicIcon)}catch(e){}return a},sureBtnFn:function(e){this.data.skuData&&this.data.skuData.sureBtnFn&&e.detail&&this.data.skuData.sureBtnFn(e.detail)}}}),global.ec(r);
},{isPage:false,isComponent:true,currentFile:'cms_design/RAW/components/design/index.js'});require("cms_design/RAW/components/design/index.js");