$gwx_XC_67=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_67 || [];
function gz$gwx_XC_67_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_67_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_67_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_67_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'visible']])
Z([3,'disabledScroll'])
Z([a,[3,'wmsdk-start-page '],[[2,'?:'],[[7],[3,'__styleGrayEnabled']],[1,'big-event-gray'],[1,'']],[3,' '],[[2,'?:'],[[7],[3,'playOver']],[1,'fade-out'],[1,'']]])
Z([3,'stec_1'])
Z([a,[3,'background-color: '],[[7],[3,'blankAreaColor']]])
Z([[2,'&&'],[[2,'==='],[[7],[3,'showSkipButton']],[1,1]],[[7],[3,'skipButtonImage']]])
Z([[2,'==='],[[7],[3,'showLinkType']],[1,1]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_67_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_67_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_67=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_67=true;
var x=['./cms_sdk/RAW/mats/start-page/c.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_67_1()
var e84=_v()
_(r,e84)
if(_oz(z,0,e,s,gg)){e84.wxVkey=1
var b94=_mz(z,'view',['catch:touchmove',1,'class',1,'id',2,'style',3],[],e,s,gg)
var o04=_v()
_(b94,o04)
if(_oz(z,5,e,s,gg)){o04.wxVkey=1
}
var xA5=_v()
_(b94,xA5)
if(_oz(z,6,e,s,gg)){xA5.wxVkey=1
}
o04.wxXCkey=1
xA5.wxXCkey=1
_(e84,b94)
}
e84.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_67";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_67();	if (__vd_version_info__.delayedGwx) __wxAppCode__['cms_sdk/RAW/mats/start-page/c.wxml'] = [$gwx_XC_67, './cms_sdk/RAW/mats/start-page/c.wxml'];else __wxAppCode__['cms_sdk/RAW/mats/start-page/c.wxml'] = $gwx_XC_67( './cms_sdk/RAW/mats/start-page/c.wxml' );
	;__wxRoute = "cms_sdk/RAW/mats/start-page/c";__wxRouteBegin = true;__wxAppCurrentFile__="cms_sdk/RAW/mats/start-page/c.js";define("cms_sdk/RAW/mats/start-page/c.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../../../@babel/runtime/helpers/Arrayincludes");var e=require("../../../../@babel/runtime/helpers/toConsumableArray"),t=require("../../../../@babel/runtime/helpers/objectSpread2"),i=require("../../../../@babel/runtime/helpers/classCallCheck"),n=require("../../../../@babel/runtime/helpers/createClass"),a=require("../../../../@babel/runtime/helpers/inherits"),o=require("../../../../@babel/runtime/helpers/createSuper");require("../../titan.bootstrap.js");var r=global.bc("platform","cms_sdk"),s=require("../../titan-scoped-env.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.StartPageMaterial=void 0;var l=require("../../mod.js");s.global.wmsdk_start_ts=s.global.wmsdk_start_ts||Date.now();var u=(0,l.I)("StartPageShow",!0),c=function(r){a(d,r);var c=o(d);function d(){var e;return i(this,d),(e=c.call(this)).linkInfo=void 0,e.showLinkUrl=void 0,e.onWOSCoreAccident=void 0,e.accident=void 0,e.componentStatus=void 0,e.currentPage=void 0,e.currentPageName=void 0,e.initData={visible:!1,status:0,startType:1,imageContent:{},videoContent:{},showSkipButton:0,skipButtonImage:"",skipPosStyle:"",showLinkType:1,linkImageUrl:"",blankAreaColor:"",playTime:0,cutType:1},e}return n(d,[{key:"created",value:function(){var e=this;this.currentPage=this.$getPageSync(),u.value?(this.onWOSCoreAccident=function(t){t.pageInstanceId===(0,l.O)(e)&&(e.accident=t,"pause"===e.componentStatus&&t.pause("展示启动页，需要暂停重定向"),"continue"===e.componentStatus&&t.continue("跳过启动页，需要恢复重定向"),"over"===e.componentStatus&&t.over("跳过启动页，需要恢复重定向"))},(0,l.aP)("start-page",this.onWOSCoreAccident)):this.close()}},{key:"detached",value:function(){(0,l.aQ)(this.onWOSCoreAccident)}},{key:"attached",value:function(){var e=this;u.value?s.Promise.race([(0,l.G)(),(0,l.e)("startPage")]).then((function(t){t&&1===t.status&&(u.value=!1,e.initResponse(t),e.accident?e.accident.pause("展示启动页，需要暂停重定向"):e.componentStatus="pause")})).catch((function(e){console.warn("getCurrentWOSSettingInfo-startPage:fail",e)})):this.close()}},{key:"reportEvent",value:function(e){var i=this;this.$getPage().then((function(n){var a,o=null!==(a=null==n?void 0:n.pagename)&&void 0!==a?a:"cms-index";(0,l.aA)(t({pagename:o,pageid:(0,l.O)(i),eventtype:"tap"},e))}))}},{key:"initResponse",value:function(e){var t,i;if(1===e.status){var n=e||{},a=n.blankAreaColor,o=void 0===a?"#fff":a,r=n.showSkipButton,s=n.skipButtonImage,l=n.showLinkType,u=n.linkImageUrl,c=n.cutType,d=n.startType,v=n.linkUrl,p=e.imageContent,h=e.videoContent,m=1===d?p.imageItems:h.videoItems,y=this.getSuitableItem(m);this.setData({visible:!0,showSkipButton:r,skipButtonImage:s,showLinkType:l,linkImageUrl:u,cutType:c,blankAreaColor:o,startType:d,suitableItem:y,playTime:null!==(t=null==p?void 0:p.playTime)&&void 0!==t?t:0}),1===r&&this.computedSkipPosStyle(null!==(i=null==e?void 0:e.skipButtonPosition)&&void 0!==i?i:1),this.linkInfo=v,this.reportEvent({en:"launch_exposure",elementid:"launch",eventtype:"exposure",launch_type:["picture","video"][d-1]})}}},{key:"computedSkipPosStyle",value:function(e){var t={1:"leftTop",2:"leftBottom",3:"rightTop",4:"rightBottom"}[e],i="";if(t.includes("Top"))if(1!==(0,l.aH)())i+="top: 20px;";else{var n=(0,l.H)("getMenuButtonBoundingClientRect"),a=n.top,o=void 0===a?48:a,r=n.height,s=o+(void 0===r?32:r)+(0,l.Z)(40);i+="top: ".concat(s,"px;")}if(t.includes("right")&&(i+="right: 28rpx;"),t.includes("left")&&(i+="left: 28rpx;"),t.includes("Bottom")){var u=(0,l.ad)()?308:240;i+="bottom: ".concat(u,"rpx;")}this.setData({skipPosStyle:i})}},{key:"getSuitableItem",value:function(e){var t,i,n=e.filter((function(e){return e.width&&e.height})),a=(0,l.aR)(),o=a.screenWidth,r=a.screenHeight;return n.forEach((function(e,n){var a=e.width/o,s=e.height/r;if(a===s)return i=0,void(t=n);var l=Math.abs(a/s-1);(void 0===i||l<i)&&(i=l,t=n)})),n[t||0]}},{key:"skip",value:function(){var e;null===(e=this.accident)||void 0===e||e.continue("跳过启动页，需要恢复重定向"),this.close(),this.reportEvent({en:"launch_tap",elementid:"skip",launch_type:["picture","video"][this.data.startType-1]})}},{key:"tapBtn",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0!==this.showLinkUrl){var n,a,o=this.linkInfo||{},r=o.linkType,u=o.customType,c=o.miniUrl,d=o.url,v=o.h5Url,p=o.redPacketUrl,h=o.appId,m=o.phoneType,y=o.phones,f=void 0===y?[]:y,g=0;if(1===r&&(n=c||d||v,g=1),2===r&&(1===u&&(n=c||d||v,h?g=4:n&&(g=n.startsWith("http")?3:1)),2===u&&(n=p||c||d||v,g=2),3===u&&(this.handleLive(this.linkInfo),n=""),4===u&&(1===m?(0,l.aB)():l.aC.apply(void 0,e(f)),n="")),n&&g&&2!==g&&(n=this.mergeParams(n,this.getCurrentPagePath())),n&&!n.includes("cms_design/index"))null===(a=this.accident)||void 0===a||a.over("跳出当前页，无需再继续重定向了"),s.setTimeout((function(){t.close()}),500);else if(g){var k;null===(k=this.accident)||void 0===k||k.continue("跳过启动页，需要恢复重定向"),this.close()}this.reportEvent({en:"launch_tap",elementid:"tapImage"===i?"picture":"go",launch_type:["picture","video"][this.data.startType-1],nextpage:n}),this.navigatorToUrl(n,g,h,this.linkInfo),(0,l.aQ)(this.onWOSCoreAccident)}}},{key:"getCurrentPagePath",value:function(){var e,t=(0,l.c)();if(t)e=(0,l.L)(t);else{var i=(0,l.$)();e="".concat(i.path,"?").concat((0,l.ac)(i.query||{}))}return e}},{key:"mergeParams",value:function(e,t){var i=(0,l.y)(t).query,n=(0,l.y)(e),a=n.query;return n.query=(0,l.au)(i,a),(0,l.C)(n)}},{key:"handleLive",value:function(e){var t=e.videoType,i=e.videoChannelsId,n=e.videoId,a=e.videoActivityId;(0,l.K)({linkType:{1:5,2:10,3:11,4:12}[t],finderUserName:i,feedId:n,eventId:a})}},{key:"navigatorToUrl",value:function(e,t,i,n){var a=this.accident?"redirect":"navigate";1===t?(0,l.K)({url:e,appId:i,mode:a}):2===t?1===(0,l.aH)()&&(0,l.H)("showRedPackage")({url:e}):3===t?(0,l.K)({url:"/cms_webview/index?url="+encodeURIComponent(e),mode:a}):4===t?(0,l.K)({url:e,appId:i,mode:a}):console.warn("非跳转方式跳转",n)}},{key:"tapImgLink",value:function(){2===this.data.showLinkType&&this.tapBtn("tapImage")}},{key:"imgLoaded",value:function(){var e=this;s.setTimeout((function(){e.setFadeOut()}),1e3*this.data.playTime)}},{key:"imgLoadError",value:function(){var e;null===(e=this.accident)||void 0===e||e.continue("跳过启动页，需要恢复重定向"),this.close()}},{key:"tapKf",value:function(){this.close()}},{key:"close",value:function(){this.data.visible&&(this.setData({visible:!1}),(0,l.aQ)(this.onWOSCoreAccident))}},{key:"videoPlayEnd",value:function(){this.setFadeOut()}},{key:"videoError",value:function(){this.close(),(0,l.ab)("视频加载失败")}},{key:"setFadeOut",value:function(){var e=this;this.setData({playOver:!0}),s.setTimeout((function(){var t;null===(t=e.accident)||void 0===t||t.continue("跳过启动页，需要恢复重定向"),e.close()}),500)}},{key:"disabledScroll",value:function(){return!1}}]),d}(l.X);exports.StartPageMaterial=c,(0,l.W)(c,l.a2),global.ec(r);
},{isPage:false,isComponent:true,currentFile:'cms_sdk/RAW/mats/start-page/c.js'});require("cms_sdk/RAW/mats/start-page/c.js");