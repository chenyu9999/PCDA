$gwx_XC_65=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_65 || [];
function gz$gwx_XC_65_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_65_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_65_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_65_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'&&'],[[7],[3,'list']],[[6],[[7],[3,'list']],[3,'length']]])
Z([a,[3,'wmsdk-nav-menu navtype-'],[[7],[3,'innerType']],[3,' '],[[2,'?:'],[[2,'!'],[[7],[3,'visible']]],[1,'nav-is-hide'],[1,'']],[3,' '],[[2,'?:'],[[7],[3,'greatIPhoneX']],[1,'great-x'],[1,'']],[3,' '],[[2,'?:'],[[7],[3,'__styleGrayEnabled']],[1,'big-event-gray'],[1,'']],[3,' '],[[2,'?:'],[[7],[3,'insideEasyHalfScreen']],[1,'easy-half-screen'],[1,'']]])
Z([3,'n-uc_4'])
Z([[2,'==='],[[7],[3,'innerType']],[1,1]])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'list',[[7],[3,'list']]],[[8],'active',[[7],[3,'activeNav']]]],[[8],'itemWidth',[[7],[3,'itemWidth']]]],[[8],'mode',[[7],[3,'appMode']]]],[[8],'bgRadius',[[7],[3,'appBgRadius']]]],[[8],'bgColor',[[7],[3,'appBgColor']]]],[[8],'safeArea',[[7],[3,'greatIPhoneX']]]],[[8],'innerType',[[7],[3,'innerType']]]],[[8],'imConfig',[[7],[3,'imConfig']]]],[[8],'imEntryStyle',[[7],[3,'imEntryStyle']]]])
Z([3,'app'])
Z([[2,'==='],[[7],[3,'innerType']],[1,2]])
Z([[9],[[9],[[9],[[9],[[9],[[8],'list',[[7],[3,'list']]],[[8],'active',[[7],[3,'activeNav']]]],[[8],'isOpen',[[7],[3,'isOpen']]]],[[8],'mode',[1,2]]],[[8],'imConfig',[[7],[3,'imConfig']]]],[[8],'imEntryStyle',[[7],[3,'imEntryStyle']]]])
Z([3,'collapse'])
Z([[2,'==='],[[7],[3,'innerType']],[1,3]])
Z([[9],[[9],[[9],[[9],[[9],[[8],'list',[[7],[3,'list']]],[[8],'active',[[7],[3,'activeNav']]]],[[8],'isOpen',[[7],[3,'isOpen']]]],[[8],'mode',[1,1]]],[[8],'imConfig',[[7],[3,'imConfig']]]],[[8],'imEntryStyle',[[7],[3,'imEntryStyle']]]])
Z(z[8])
Z([[2,'==='],[[7],[3,'innerType']],[1,4]])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'list',[[7],[3,'list']]],[[8],'active',[[7],[3,'activeNav']]]],[[8],'activeSub',[[7],[3,'activeSubNav']]]],[[8],'itemWidth',[[7],[3,'itemWidth']]]],[[8],'popoverVisible',[[7],[3,'popoverVisible']]]],[[8],'safeArea',[[7],[3,'greatIPhoneX']]]],[[8],'imConfig',[[7],[3,'imConfig']]]],[[8],'imEntryStyle',[[7],[3,'imEntryStyle']]]])
Z([3,'submenu'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_65_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_65_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_65=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_65=true;
var x=['./cms_sdk/RAW/mats/nav-menu/c.wxml','./tpls/app.wxml','./tpls/collapse.wxml','./tpls/submenu.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_65_1()
var aD4=e_[x[0]].i
_ai(aD4,x[1],e_,x[0],1,1)
_ai(aD4,x[2],e_,x[0],1,32)
_ai(aD4,x[3],e_,x[0],1,68)
var tE4=_v()
_(r,tE4)
if(_oz(z,0,e,s,gg)){tE4.wxVkey=1
var eF4=_mz(z,'view',['class',1,'id',1],[],e,s,gg)
var bG4=_v()
_(eF4,bG4)
if(_oz(z,3,e,s,gg)){bG4.wxVkey=1
var fK4=_v()
_(bG4,fK4)
var cL4=_oz(z,5,e,s,gg)
var hM4=_gd(x[0],cL4,e_,d_)
if(hM4){
var oN4=_1z(z,4,e,s,gg) || {}
var cur_globalf=gg.f
fK4.wxXCkey=3
hM4(oN4,oN4,fK4,gg)
gg.f=cur_globalf
}
else _w(cL4,x[0],1,386)
}
var oH4=_v()
_(eF4,oH4)
if(_oz(z,6,e,s,gg)){oH4.wxVkey=1
var cO4=_v()
_(oH4,cO4)
var oP4=_oz(z,8,e,s,gg)
var lQ4=_gd(x[0],oP4,e_,d_)
if(lQ4){
var aR4=_1z(z,7,e,s,gg) || {}
var cur_globalf=gg.f
cO4.wxXCkey=3
lQ4(aR4,aR4,cO4,gg)
gg.f=cur_globalf
}
else _w(oP4,x[0],1,593)
}
var xI4=_v()
_(eF4,xI4)
if(_oz(z,9,e,s,gg)){xI4.wxVkey=1
var tS4=_v()
_(xI4,tS4)
var eT4=_oz(z,11,e,s,gg)
var bU4=_gd(x[0],eT4,e_,d_)
if(bU4){
var oV4=_1z(z,10,e,s,gg) || {}
var cur_globalf=gg.f
tS4.wxXCkey=3
bU4(oV4,oV4,tS4,gg)
gg.f=cur_globalf
}
else _w(eT4,x[0],1,718)
}
var oJ4=_v()
_(eF4,oJ4)
if(_oz(z,12,e,s,gg)){oJ4.wxVkey=1
var xW4=_v()
_(oJ4,xW4)
var oX4=_oz(z,14,e,s,gg)
var fY4=_gd(x[0],oX4,e_,d_)
if(fY4){
var cZ4=_1z(z,13,e,s,gg) || {}
var cur_globalf=gg.f
xW4.wxXCkey=3
fY4(cZ4,cZ4,xW4,gg)
gg.f=cur_globalf
}
else _w(oX4,x[0],1,843)
}
bG4.wxXCkey=1
oH4.wxXCkey=1
xI4.wxXCkey=1
oJ4.wxXCkey=1
_(tE4,eF4)
}
tE4.wxXCkey=1
aD4.pop()
aD4.pop()
aD4.pop()
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[x[1],x[2],x[3]],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_65";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_65();	if (__vd_version_info__.delayedGwx) __wxAppCode__['cms_sdk/RAW/mats/nav-menu/c.wxml'] = [$gwx_XC_65, './cms_sdk/RAW/mats/nav-menu/c.wxml'];else __wxAppCode__['cms_sdk/RAW/mats/nav-menu/c.wxml'] = $gwx_XC_65( './cms_sdk/RAW/mats/nav-menu/c.wxml' );
	;__wxRoute = "cms_sdk/RAW/mats/nav-menu/c";__wxRouteBegin = true;__wxAppCurrentFile__="cms_sdk/RAW/mats/nav-menu/c.js";define("cms_sdk/RAW/mats/nav-menu/c.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../@babel/runtime/helpers/toConsumableArray"),t=require("../../../../@babel/runtime/helpers/objectSpread2"),a=require("../../../../@babel/runtime/helpers/slicedToArray"),i=require("../../../../@babel/runtime/helpers/defineProperty"),n=require("../../../../@babel/runtime/helpers/classCallCheck"),r=require("../../../../@babel/runtime/helpers/createClass"),o=require("../../../../@babel/runtime/helpers/inherits"),s=require("../../../../@babel/runtime/helpers/createSuper");require("../../titan.bootstrap.js");var l=global.bc("platform","cms_sdk"),d=require("../../titan-scoped-env.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavMenuMaterial=void 0;var u=require("../../mod.js");d.global.wmsdk_start_ts=d.global.wmsdk_start_ts||Date.now();var v=function(l){o(c,l);var v=s(c);function c(){var e;return n(this,c),(e=v.call(this)).navMenuResponse=void 0,e.lastRequestFrom=void 0,e.requestModelMergeTimer=void 0,e.badgeGetting=void 0,e.loading=void 0,e.belongVid=void 0,e.properties={fetchBadge:{type:Boolean,observer:function(e){e&&this.getBadgeData()}},model:{type:Object,observer:function(){this.addRequestModelMerge("selfModelProp")}},data:{type:Object,observer:function(){!(0,u.m)(this.data.data)||(0,u.f)(this.data.data)||(0,u.f)(this.data.data.jsonDTO)||this.setItems()}},visible:{type:Boolean,value:!0},customNavigator:{type:Boolean},badge:{type:Array,observer:function(e){e&&this.setBadgeContent(e)}}},e.initData={isOpen:!1,list:[],innerType:0,itemWidth:[],popoverVisible:{},greatIPhoneX:(0,u.ad)(),imConfig:{useChannelIntegration:!0},imEntryStyle:4===(0,u.w)()?"position: absolute;inset:0;":""},e}return r(c,[{key:"attached",value:function(){this.setData({insideEasyHalfScreen:"easyHalfScreen"===(0,u.H)("getContainerType",[this])}),this.addRequestModelMerge("selfAttached"),this.getBadgeData(),this.onGlobalNavMenuBadgeChange=this.onGlobalNavMenuBadgeChange.bind(this),(0,u.ae)("$NevMenuBadge",this.onGlobalNavMenuBadgeChange)}},{key:"detached",value:function(){(0,u.af)("$NevMenuBadge",this.onGlobalNavMenuBadgeChange)}},{key:"onPageShow",value:function(){this&&(0,u.ag)(this.setActiveNavByCurrentPage)&&this.setActiveNavByCurrentPage()}},{key:"onGlobalNavMenuBadgeChange",value:function(e){var t,a,i=this;if(3!==this.$wmStatus&&e&&e.source!==this.$wmKey&&e.vid===this.belongVid){var n=null===(t=this.getValidResponseData())||void 0===t||null===(a=t.jsonDTO)||void 0===a?void 0:a.items;if(n){var r={};n.forEach((function(t,a){var n,o=4===i.data.innerType?a+1:a;t.refer===e.refer&&(r["list[".concat(o,"].badgeType")]=e.content?"text":"",r["list[".concat(o,"].badgeValue")]=e.content||""),4===i.data.innerType&&(null===(n=t.subNavigationList)||void 0===n?void 0:n.length)&&t.subNavigationList.forEach((function(t,a){t.refer===e.refer&&(r["list[".concat(o,"].children[").concat(a,"].badgeType")]=e.content?"text":"",r["list[".concat(o,"].children[").concat(a,"].badgeValue")]=e.content||"")}))})),(0,u.f)(r)||this.setData(r)}}}},{key:"syncPopoverVisible",value:function(e){var t={};this.data.list.slice(1).forEach((function(e){t["popoverVisible.".concat(e.id)]=!1})),void 0!==e&&(t["popoverVisible.".concat(e)]=!0),this.setData(t)}},{key:"togglePopover",value:function(e){var t=e.currentTarget.dataset.id,a=!!e.detail;this.syncPopoverVisible(a?t:void 0),this.tapItem(e)}},{key:"setBadgeContent",value:function(e){var t;if(Array.isArray(e)&&e.length){var a=null===(t=this.getValidResponseData())||void 0===t?void 0:t.jsonDTO.items;if(a){var n=(null==a?void 0:a.length)||0;if(4===this.data.innerType&&n++,!(parseInt(e[1])>=n))if(e[2]){var r,o,s;this.setData(i(i({},"list[".concat(e[2],"].children[").concat(e[1],"].badgeType"),e[0]?"text":""),"list[".concat(e[2],"].children[").concat(e[1],"].badgeValue"),e[0]||"")),(0,u.ah)("$NevMenuBadge",{source:this.$wmKey,vid:this.belongVid,refer:null===(r=a[4===this.data.innerType?parseInt(e[1])-1:e[1]])||void 0===r||null===(o=r.subNavigationList)||void 0===o||null===(s=o[e[2]])||void 0===s?void 0:s.refer,content:e[0]||""})}else this.setData(i(i({},"list[".concat(e[1],"].badgeType"),e[0]?"text":""),"list[".concat(e[1],"].badgeValue"),e[0]||"")),(0,u.ah)("$NevMenuBadge",{source:this.$wmKey,vid:this.belongVid,refer:a[4===this.data.innerType?parseInt(e[1])-1:e[1]].refer,content:e[0]||""})}}}},{key:"setActiveNavByCurrentPage",value:function(){var e=this;d.Promise.all([this.$getPage(),(0,u.ai)()]).then((function(t){var i,n=a(t,2),r=n[0],o=n[1],s=null===(i=e.getValidResponseData())||void 0===i?void 0:i.jsonDTO;if(s&&r&&3!==e.$wmStatus){if(4===e.data.innerType&&"/cms_design/index"===(0,u.a5)(r))return void e.setData({activeNav:String(0),activeSubNav:""});var l;l=(0,u.ag)(r.$cmsNavMenuComparer)?function(e,t){return r.$cmsNavMenuComparer(e,t)}:(0,u.L)(r);var d=(0,u.aj)(l,s.items,"miniUrl",{appid:(0,u.x)(),recommendVid:null==o?void 0:o.pvid}),v=d.activeIndex,c=d.activeSubIndex;-1!==v&&4===e.data.innerType&&v++,e.setData({activeNav:String(-1===v?"":v),activeSubNav:String(c&&-1!==c?c:"")})}})).catch((function(e){u.M.warn("setActiveNavByCurrentPage失败","NavMenu",e)}))}},{key:"getValidResponseData",value:function(){return(0,u.m)(this.data.data)&&(0,u.m)(this.data.data.jsonDTO)&&!(0,u.f)(this.data.data.jsonDTO)?this.data.data:(0,u.m)(this.navMenuResponse)&&(0,u.m)(this.navMenuResponse.jsonDTO)&&!(0,u.f)(this.navMenuResponse.jsonDTO)?this.navMenuResponse:void 0}},{key:"setItems",value:function(){var e=this;(0,u.a1)().then((function(t){var a=e.getValidResponseData();new d.Promise((function(i){var n,r;a?((0,u.ak)()&&(null===(n=a.jsonDTO)||void 0===n||null===(r=n.items)||void 0===r||r.forEach((function(e){var t,a,i,n=((null===(t=e.decorationUrl)||void 0===t?void 0:t.miniUrl)||"").split("?")[0];n&&(u.M.log("尝试调用titan能力预加载".concat(n,"对应分包"),"NavMenu"),null===(a=(i=d.titan).preloadModuleByPath)||void 0===a||a.call(i,n))}))),e.setData((0,u.al)(a,t,"easyHalfScreen"===(0,u.H)("getContainerType",[e])),i)):e.setData({innerType:0,list:[],activeNav:"",activeSubNav:"",itemWidth:[]},i);e.setActiveNavByCurrentPage()})).then((function(){var t,i=0;if(1===e.data.innerType||4===e.data.innerType){var n=null==a?void 0:a.navigateIconStyle;i=2===n?130:3===n?140:100}e.triggerEvent("render",{pageUrl:(0,u.L)(e.$getPageSync()),hasNav:!!e.data.list&&!(null===(t=e.data.list)||void 0===t||!t.length),data:(0,u.am)(a),navType:e.data.innerType,tabBarHeight:i})}))}))}},{key:"addRequestModelMerge",value:function(e){var t=this;("pageOnShow"!==e&&"selfAttached"!==e||"pageOnShow"!==this.lastRequestFrom&&"selfAttached"!==this.lastRequestFrom)&&(this.lastRequestFrom=e,this.requestModelMergeTimer&&d.clearTimeout(this.requestModelMergeTimer),delete this.requestModelMergeTimer,this.requestModelMergeTimer=d.setTimeout((function(){t.fireRequest()})))}},{key:"tapNavHead",value:function(){var e={open:!this.data.isOpen};this.setData({isOpen:!this.data.isOpen}),this.$firePageMethod("$cmsOnNavMenuTapHead",(0,u.am)(e))}},{key:"fireRequestedEvent",value:function(e){e.pageUrl=(0,u.L)(this.$getPageSync()),this.triggerEvent("requested",e),this.$firePageMethod("$cmsOnNavMenuTapItem",(0,u.am)(e))}},{key:"getRequestModel",value:function(e){var t=this;return d.Promise.all([this.$getPage(),(0,u.ai)()]).then((function(i){var n,r,o,s,l=a(i,2),v=l[0],c=l[1];if(null!=v&&v.$cmsNavMenuDisabled)return(0,u.a)({type:11,label:7,code:(0,u.O)(v),val:(0,u.a5)(v)}),d.Promise.reject(new Error(u.an));t.belongVid=null==c?void 0:c.pvid;var g,p,h=(0,u.ao)(),f={sourceType:1,wxTemplateId:(null==h||null===(n=h.form)||void 0===n||null===(r=n.extendInfo)||void 0===r?void 0:r.wxTemplateId)||void 0,templateId:(null==h||null===(o=h.form)||void 0===o||null===(s=o.extendInfo)||void 0===s?void 0:s.templateId)||void 0};return f.pageId=(0,u.ap)(v),f.pageId||delete f.pageId,e&&(f.id=e),f.refer=(0,u.aq)(v),f.refer||delete f.refer,null!=v&&v.$cmsGetNavRequestData?(g=v.$cmsGetNavRequestData(),(0,u.ar)(g)||(g=d.Promise.resolve(g))):g=d.Promise.resolve(),null!=v&&v.$cmsGetPageId?(p=v.$cmsGetPageId(),(0,u.ar)(p)||(p=d.Promise.resolve(p))):p=d.Promise.resolve(),(0,u.as)(g,p,(0,u.at)()).then((function(e){var i,n,r,o,s=a(e,3),l=s[0],g=s[1],p=s[2];f.pageId=g||f.pageId,p&&(f.indexPageId=p.pageId||"",f.usercentPageId=p.userCenterPageId||"");var h=(0,u.au)({},{queryParameter:f},l||{},t.data.model||{});return((0,u.av)(v.route)||(0,u.aw)(v.route))&&(h.queryParameter||(h.queryParameter={}),(null==c?void 0:c.bizUserCenterPageId)&&(h.queryParameter.bizUserCenterPageId=c.bizUserCenterPageId),(null==c?void 0:c.bizVidPageId)&&(h.queryParameter.bizVidPageId=c.bizVidPageId)),null!==(i=h.queryParameter)&&void 0!==i&&i.id||null!==(n=h.queryParameter)&&void 0!==n&&n.pageId&&null!==(r=h.queryParameter)&&void 0!==r&&r.bizVidPageId||null!==(o=h.queryParameter)&&void 0!==o&&o.refer?(t.loading=!0,h):d.Promise.reject(new Error("无必要参数，无法调用接口"))}))}))}},{key:"getBadgeData",value:function(){var e=this;if(this.data.fetchBadge){var t=this.navMenuResponse,a=(0,u.m)(t)&&(0,u.m)(t.jsonDTO)&&(0,u.m)(t.jsonDTO.items)&&t.jsonDTO.items.length;!this.badgeGetting&&a&&(this.badgeGetting=!0,this.getRequestModel(t.id).then((function(t){return e.$aliveRequest({url:u.ax,data:t,belongToPage:!0,waitBelongPagePrimaryDone:!0,belongPageDestroyStrategy:"reject"})})).then((function(t){e.badgeGetting=!1,4===e.data.innerType&&t.splice(0,0,{});var a=e.getValidResponseData();(0,u.R)(t,(function(t,i){var n;if(t&&(t.refer||null!==(n=t.subList)&&void 0!==n&&n.length)){var r=a.jsonDTO.items[4===e.data.innerType?i-1:i];r&&(t.refer===r.refer&&e.setBadgeContent([t.angleContent,String(i)]),(null==t?void 0:t.subList)&&(0,u.R)(t.subList,(function(t,a){var n,o;t.refer===(null===(n=r.subNavigationList)||void 0===n||null===(o=n[a])||void 0===o?void 0:o.refer)&&e.setBadgeContent([t.angleContent,String(a),String(i)])})))}}))})).catch((function(){e.badgeGetting=!1})))}}},{key:"fireRequest",value:function(){var e=this;if(!this.loading){if(!(0,u.m)(this.data.data)||(0,u.f)(this.data.data)||(0,u.f)(this.data.data.jsonDTO)){var t=this.lastRequestFrom;return this.getRequestModel().then((function(t){return e.$aliveRequest({url:u.ay,data:t,belongToPage:!0,belongPageDestroyStrategy:"reject"})})).then((function(a){delete e.lastRequestFrom;var i=(0,u.m)(a)&&(0,u.m)(a.jsonDTO)&&(0,u.m)(a.jsonDTO.items)&&a.jsonDTO.items.length;u.M.log("来自【".concat(t,"】触发的导航接口请求已成功").concat(i?"":"，但无有效数据","！"),"NavMenu",a),i&&d.setTimeout((function(){e.getBadgeData()})),e.fireRequestedEvent({success:!!i,oldData:(0,u.am)(e.navMenuResponse),data:(0,u.am)(a),navType:i?(0,u.az)(a.jsonDTO.style,a.jsonDTO.showStyle):0}),e.navMenuResponse=a,delete e.loading,e.setItems()})).catch((function(a){delete e.lastRequestFrom,a.fromRequestData||a.message.includes("销毁")||-1!==String(a.message).indexOf("abort")||-1!==String(a.message).indexOf("请求已经取消")||(u.M.warn("来自【".concat(t,"】触发的导航接口请求已失败！"),"NavMenu",a),delete e.loading,e.fireRequestedEvent({success:!1,error:a,oldData:(0,u.am)(e.navMenuResponse)}),delete e.navMenuResponse,e.setItems())}))}this.setItems()}}},{key:"reportEvent",value:function(e){d.Promise.all([(0,u.ai)(),this.$getPage()]).then((function(i){var n=a(i,2),r=n[0],o=n[1],s=(null==r?void 0:r.pvidInfo)||(null==r?void 0:r.gvidInfo);s&&o&&(0,u.aA)(t({pagename:o.pagename,vid:s.vid,vid_type:s.vidType,bos_id:s.bosId,cid:s.cid,product_id:s.productId,product_instance_id:s.productInstanceId,product_version_id:s.productVersionId},e))})).catch((function(e){u.M.warn("尝试BI打点失败","NavMenu",e)}))}},{key:"imEntryTap",value:function(e){this.tapItem(e)}},{key:"tapItem",value:function(t){var a,i,n=String(t.currentTarget.dataset.id||""),r=String(t.currentTarget.dataset.parent||"");4===this.data.innerType&&("toggle"!==t.type||r&&n)&&this.syncPopoverVisible();var o=null===(a=this.getValidResponseData())||void 0===a?void 0:a.jsonDTO.items;if(null!==(i=o)&&void 0!==i&&i.length){4===this.data.innerType&&(o=[null].concat(o));var s,l=o[n],d=this.data.activeNav;if(r){var v,c=this.data.activeNav;if(d=this.data.activeSubNav,l=((null===(v=s=o[r])||void 0===v?void 0:v.subNavigationList)||[])[n],n===d&&c===r)return}else if(n===d)return;if("0"!==n||4!==this.data.innerType||r){if(l){var g,p,h,f,m,y,b=4!==this.data.innerType?String(parseInt(n)+1):"";4===this.data.innerType&&(b=r?"".concat(parseInt(r)+1,"-").concat(parseInt(n)+1):String(parseInt(n)+1)),this.reportEvent({en:"tabbar",elementid:"tabbar",eventtype:"tap",position:b,title:l.title,nextpage:null===(g=l.decorationUrl)||void 0===g?void 0:g.miniUrl,code:l.refer,id:null===(p=this.getValidResponseData())||void 0===p?void 0:p.id});var T=l.decorationUrl||{},I=T.liveId,M=T.linkType,P=T.videoChannelsId,D=T.selectedData,q=void 0===D?[]:D,N=I||P||(null!=q&&q.length?null===(h=q[0].linkList)||void 0===h||null===(f=h[0])||void 0===f||null===(m=f.live)||void 0===m?void 0:m.liveId:"");if((5===M||10===M)&&N)return(0,u.K)({linkType:M,finderUserName:N});if(11===M&&N&&null!=q&&q.length&&q[0].linkList[0].live.videoId)return(0,u.K)({linkType:M,finderUserName:N,feedId:q[0].linkList[0].live.videoId});if(12===M&&N&&null!=q&&q.length&&q[0].linkList[0].live.activityId)return(0,u.K)({linkType:M,finderUserName:N,eventId:q[0].linkList[0].live.activityId});if(6===M){var R,k,S,C=(l.decorationUrl||{}).selectedData,O=((void 0===C?[]:C)[0]||{}).linkList,V=void 0===O?[]:O,j=V.map((function(e){var t;return null==e||null===(t=e.phoneInfo)||void 0===t?void 0:t.phone})).filter((function(e){return!!e}));"system"===(null!==(R=null===(k=V[0])||void 0===k||null===(S=k.phoneInfo)||void 0===S?void 0:S.type)&&void 0!==R?R:"")?(0,u.aB)():u.aC.apply(void 0,e(j))}if("notSup"===t.currentTarget.dataset.customerServiceStatus&&(0,u.ab)("抱歉，当前未开启客服功能"),9===M){var B,U,$,w,x=(null!==(B=null===(U=l)||void 0===U?void 0:U.decorationUrl)&&void 0!==B?B:{}).selectedData,L=((void 0===x?[]:x)[0]||{}).linkList,E=void 0===L?[]:L,_=null!==($=null==E||null===(w=E[0])||void 0===w?void 0:w.copy)&&void 0!==$?$:{},A=_.content,G=void 0===A?"":A,z=_.tipList,H=void 0===z?[]:z,K=_.delayMsg;u.a9.apply(void 0,[G].concat(e(H),[K]))}if(4===this.data.innerType&&l&&!s&&(null===(y=l.decorationUrl)||void 0===y||!y.miniUrl))return;this.fireNavigator(l,s)}}else this.gotoHome()}}},{key:"gotoHome",value:function(){var e=this,t=function(t){var a,i={navItem:{title:"首页",decorationUrl:{linkType:1,miniUrl:t}},response:e.getValidResponseData(),navType:e.data.innerType};e.reportEvent({en:"tabbar",elementid:"tabbar",eventtype:"tap",position:"1",title:"首页",nextpage:t,code:"cms-index",id:null===(a=e.getValidResponseData())||void 0===a?void 0:a.id}),e.triggerEvent("tapItem",i),e.$firePageMethod("$cmsOnNavMenuTapItem",(0,u.am)(i)),e.data.customNavigator||(0,u.L)((0,u.c)())!==t&&(0,u.K)({url:t})},a="/cms_design/index",i=(0,u.y)(a);return i.query={},(0,u.ai)().then((function(e){e?(e.bizVid?i.query.bizVid=e.bizVid:i.query.vid=(e.pvidInfo||e.gvidInfo||{}).vid||"0",t((0,u.C)(i))):t(a)})).catch((function(){t(a)}))}},{key:"fireJump",value:function(e,t,a,i){if(t){var n=function(){return(0,u.K)({mode:e,url:t,ignoreCheckTabBarRoutes:i})};return"switchTab"!==e?n():this.$getPage().then((function(){if((0,u.ak)()&&Array.isArray(a)&&a.length){var e=(0,u.y)(t);e.query||(e.query={}),e.query.__uniqueKeys=a.join(","),t=(0,u.C)(e)}return n()}))}}},{key:"fireNavigator",value:function(e,t){var a=this.getValidResponseData(),i={navItem:e,parentNavItem:t,response:a,navType:this.data.innerType};if(this.triggerEvent("tapItem",i),this.$firePageMethod("$cmsOnNavMenuTapItem",(0,u.am)(i)),!this.data.customNavigator){var n=e.decorationUrl||{},r=n.liveId,o=n.linkType,s=n.videoChannelsId,l=r||s;if(!("wos-cs-chat"===e.refer||5===o&&l||6===o||9===o))if(e.decorationUrl&&(e.decorationUrl.miniUrl||e.decorationUrl.appId)){var d=e.sameNav&&!a.noSwitchTab?"switchTab":"navigate",v=(0,u.x)();if(!!(2===e.decorationUrl.linkType&&e.decorationUrl.appId&&e.decorationUrl.appId!==v))return(0,u.K)({appId:e.decorationUrl.appId,url:e.decorationUrl.miniUrl||""});this.fireJump(d,e.decorationUrl.miniUrl,e.uniqueParams,!!a.noSwitchTab)}else{u.M.warn("导航接口没有返回小程序链接地址，暂时无法进行跳转！","NavMenu",a,e)}}}},{key:"imCallback",value:function(e){if(!e.detail.open){var t=e.currentTarget.dataset,a=t.index,n=t.parentIndex;void 0!==n?this.setData(i({},"list[".concat(n,"].children[").concat(a,"].customerServiceStatus"),"notSup")):this.setData(i({},"list[".concat(a,"].customerServiceStatus"),"notSup"))}}}]),c}(u.X);exports.NavMenuMaterial=v,(0,u.W)(v,u.a2),global.ec(l);
},{isPage:false,isComponent:true,currentFile:'cms_sdk/RAW/mats/nav-menu/c.js'});require("cms_sdk/RAW/mats/nav-menu/c.js");