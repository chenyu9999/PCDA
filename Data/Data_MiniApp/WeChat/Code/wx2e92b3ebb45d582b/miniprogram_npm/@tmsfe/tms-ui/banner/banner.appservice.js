$gwx_XC_6=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_6 || [];
function gz$gwx_XC_6_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_6_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'!'],[[7],[3,'rendered']]])
Z([[2,'>'],[[6],[[7],[3,'banners']],[3,'length']],[1,0]])
Z([a,[3,'bannerwrap '],[[7],[3,'deviceClass']]])
Z([a,[3,'margin-top: '],[[7],[3,'marginTop']],[3,'rpx; margin-bottom: '],[[7],[3,'marginBottom']],[3,'rpx; width: '],[[2,'?:'],[[2,'=='],[[7],[3,'display']],[1,'inline']],[[2,'+'],[[7],[3,'width']],[1,'rpx']],[1,'100%']],[3,'; height: '],[[7],[3,'height']],[3,'rpx;']])
Z([[2,'=='],[[6],[[7],[3,'banners']],[3,'length']],[1,1]])
Z([[2,'>'],[[6],[[7],[3,'banners']],[3,'length']],[1,1]])
Z([[2,'&&'],[[2,'=='],[[7],[3,'display']],[1,'inline']],[[2,'>'],[[7],[3,'borderRadius']],[1,0]]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_6_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_6=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_6=true;
var x=['./miniprogram_npm/@tmsfe/tms-ui/banner/banner.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_6_1()
var fWD=_v()
_(r,fWD)
if(_oz(z,0,e,s,gg)){fWD.wxVkey=1
}
else if(_oz(z,1,e,s,gg)){fWD.wxVkey=2
var cXD=_mz(z,'view',['class',2,'style',1],[],e,s,gg)
var hYD=_v()
_(cXD,hYD)
if(_oz(z,4,e,s,gg)){hYD.wxVkey=1
}
else if(_oz(z,5,e,s,gg)){hYD.wxVkey=2
var oZD=_v()
_(hYD,oZD)
if(_oz(z,6,e,s,gg)){oZD.wxVkey=1
}
oZD.wxXCkey=1
}
hYD.wxXCkey=1
_(fWD,cXD)
}
fWD.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_6";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_6();	if (__vd_version_info__.delayedGwx) __wxAppCode__['miniprogram_npm/@tmsfe/tms-ui/banner/banner.wxml'] = [$gwx_XC_6, './miniprogram_npm/@tmsfe/tms-ui/banner/banner.wxml'];else __wxAppCode__['miniprogram_npm/@tmsfe/tms-ui/banner/banner.wxml'] = $gwx_XC_6( './miniprogram_npm/@tmsfe/tms-ui/banner/banner.wxml' );
	;__wxRoute = "miniprogram_npm/@tmsfe/tms-ui/banner/banner";__wxRouteBegin = true;__wxAppCurrentFile__="miniprogram_npm/@tmsfe/tms-ui/banner/banner.js";define("miniprogram_npm/@tmsfe/tms-ui/banner/banner.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../@babel/runtime/helpers/objectSpread2"),t=require("../../../../@babel/runtime/helpers/toConsumableArray"),n=require("../../../../@babel/runtime/helpers/defineProperty");require("../../../../@babel/runtime/helpers/Arrayincludes");var a=s(require("../../../../@babel/runtime/regenerator")),r=require("../../../../@babel/runtime/helpers/asyncToGenerator"),i=s(require("@tmsfe/tms-core")),o=require("./utils");function s(e){return e&&e.__esModule?e:{default:e}}var d=i.default.getLocationManager,l=(0,i.default.getReporter)().report,c=null;Component({properties:{channelIds:{type:String,value:""},bannerId:{type:String,value:""},display:{type:String,value:"block"},width:{type:Number,value:670},height:{type:Number,value:168},borderRadius:{type:Number,value:8},borderRadiusImg:{type:String,value:"https://static.img.tai.qq.com/mp/components/banner/radius.png"},indicatorPos:{type:String,value:"center"},indicatorPosHor:{type:Number,value:28},indicatorPosVer:{type:Number,value:10},marginTop:{type:Number,value:0},marginBottom:{type:Number,value:0},backgroundColor:{type:String,value:"#eee"},cityInfo:{type:Object},customCity:{type:Boolean,value:!1},extraParam:{type:Object,value:{}},pause:{value:!1,type:Boolean}},observers:{"bannerId, channelIds, cityInfo":function(e){e&&this.renderBanner(e)}},data:{deviceClass:"",currentIndex:0,duration:600,autoplay:!0,circular:!0,interval:3e3,banners:[],rendered:!1},loading:!1,lastParam:{},validChannel:[],displayReported:{},displayedBannerItemIds:[],displayBannerIndexAcquired:!1,lifetimes:{created:function(){this.displayReported={},this.validChannel=[],this.renderBanner(this.data.bannerId),wx.onAppHide(o.clearAppShowScene)},ready:function(){this.setData({deviceClass:(0,o.getDeviceClass)()})}},pageLifetimes:{show:function(){this.setData({autoplay:!0}),this.displayReported={};var e=this.data,t=e.rendered,n=e.banners,a=e.bannerId;t&&(0===n.length?this.renderBanner(a):1===n.length&&this.onBannerDisplay(n[0],0))},hide:function(){this.setData({autoplay:!1})}},methods:{renderBanner:function(e){var t=this;return r(a.default.mark((function n(){var r;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&(!t.loading||t.data.customCity)){n.next=2;break}return n.abrupt("return");case 2:return r=t.data.channelIds,n.next=5,new Promise((function(e){t.validChannel=r.split(",").filter((function(e){return e})),t.setData({autoplay:!1},e)}));case 5:t.loading=!0,t.getLocation().then((function(n){var a=n.province,i=n.cityName,o=t.lastParam||{},s=o.province,d=o.cityName,l=o.channelIds,c=o.holderCode;t.setData({autoplay:!0}),a!==s||i!==d||e!==c||r!==l?(t.lastParam={province:a,cityName:i,holderCode:e,channelIds:r},t.loadBannerWithLoc(n,e)):t.loading=!1})).catch((function(){t.lastParam={},t.updateData([]),t.data.customCity||d().onLocStatusChange((function(){return t.renderBanner(e)}))}));case 7:case"end":return n.stop()}}),n)})))()},loadBannerWithLoc:function(e,t){var n=this,a={holderCode:t,province:e.province,city:e.cityName,channelIds:this.validChannel};return(0,o.getBannerListData)(a,this.data.extraParam).catch((function(){return n.lastParam={},[]})).then((function(t){var a=n.lastParam||{},r=a.province,i=a.cityName;e.province===r&&e.cityName===i&&(n.getDisplayBannerIndex(t),n.updateData(t))}))},updateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.banners;this.loading=!1,this.setData({banners:e,rendered:!0,autoplay:!0}),this.triggerEvent("updated",{state:e.length>0?1:0})},onBannerClick:function(e){var t=e.currentTarget.dataset.id,n=this.data.banners,a=n.findIndex((function(e){return(null==e?void 0:e.ID)===t})),r=n[a];if(r){var i=r.ID,s=r.activityName,d=r.redirectType,l=r.mpPath,c=r.toURL;if(this.triggerEvent("tap-item",{index:a,id:i,name:s,linkType:d,link:0===d?l:c}),this.report({27:"I017",35:this.data.bannerId,36:r.ID,37:"".concat(a),38:"".concat(r.redirectType),39:encodeURIComponent(r.mpPath||r.toURL)}),0===r.redirectType&&r.mpPath)r.mpAppID&&r.mpAppID!==(0,o.getAppId)()?wx.navigateToMiniProgram({appId:r.mpAppID,path:r.mpPath}):wx.navigateTo({url:r.mpPath});else if(r.toURL){var u=encodeURIComponent(r.toURL),p=encodeURIComponent(r.shareTitle),h=encodeURIComponent(r.shareImgURL);wx.navigateTo({url:"".concat("/modules/x/webcontainer/webcontainer","?url=").concat(u,"&title=").concat(p,"&image=").concat(h)})}else;}},change:function(e){var t=e.detail,n=t.current;if(t.source){var a=this.data.banners[n];this.setData({currentIndex:n}),this.onBannerDisplay(a,n)}},getDisplayBannerIndex:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.displayBannerIndexAcquired){var n=-1,a=function(){var t,n,a;return(null===(t=e.getBannerDisplayData())||void 0===t||null===(n=t[e.data.bannerId])||void 0===n||null===(a=n.items)||void 0===a?void 0:a.ids)||[]},r=a();if(r.length){var i=r[r.length-1],o=t.findIndex((function(e){return e.ID===i}));if(o>-1)n=(o+1)%t.length;else{var s=t.filter((function(e){return!r.includes(e.ID)}));n=s.length?t.findIndex((function(e){return e.ID===s[0].ID})):0}this.displayedBannerItemIds=r}else t.length>0?(n=0,this.displayedBannerItemIds=[]):(n=-1,this.displayedBannerItemIds=[]);this.setData({currentIndex:n}),this.displayBannerIndexAcquired=!0,t.length&&this.onBannerDisplay(t[n],n)}},getBannerDisplayData:function(){return c||(c=wx.getStorageSync("ComponentBannerItemDisplay")||{})},getStorageData:function(){var e=n({},"".concat(this.data.bannerId),{items:{ids:this.displayedBannerItemIds}}),t=this.getBannerDisplayData();return Object.assign({},t,e)},recordDisplayedBannerItemIds:function(e){var n=e.id;this.displayedBannerItemIds.push(n),this.displayedBannerItemIds=t(new Set(this.displayedBannerItemIds.reverse())).reverse().slice(-10);var a=this.getStorageData();c=a,wx.setStorage({key:"ComponentBannerItemDisplay",data:a})},onBannerDisplay:function(e,t){if(e&&e.ID){this.recordDisplayedBannerItemIds({id:e.ID});var n=e.ID,a=e.activityName,r=e.redirectType,i=e.mpPath,o=e.toURL;this.triggerEvent("change",{index:t,id:n,name:a,linkType:r,link:0===r?i:o,doReport:!this.displayReported[e.ID]}),this.displayReported[e.ID]||(this.displayReported[e.ID]=!0,this.report({27:"I016",35:this.data.bannerId,36:e.ID,37:"".concat(t),38:"".concat(e.redirectType),39:encodeURIComponent(e.mpPath||e.toURL)}))}},report:function(t){l(e(e({},t),{},{14:t[14]||"5",26:t[26]||(t[27]||[])[0]||"I"}))},getLocation:function(){var e=this.data,t=e.customCity,n=e.cityInfo;return t?null!=n&&n.cityName||null!=n&&n.city?Promise.resolve(n):Promise.reject(n):d().getLocationDetailSilent()}}});
},{isPage:false,isComponent:true,currentFile:'miniprogram_npm/@tmsfe/tms-ui/banner/banner.js'});require("miniprogram_npm/@tmsfe/tms-ui/banner/banner.js");