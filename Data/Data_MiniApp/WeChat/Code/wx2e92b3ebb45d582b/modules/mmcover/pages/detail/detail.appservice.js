$gwx_XC_129=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_129 || [];
function gz$gwx_XC_129_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_129_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_129_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_129_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'!'],[[7],[3,'loading']]])
Z([3,'navbar'])
Z([3,'background-color: #f5f8fa; z-index: 200;'])
Z([1,true])
Z([3,'#000'])
Z(z[3])
Z([[6],[[7],[3,'currentRedenv']],[3,'brandName']])
Z([[7],[3,'homeBtn']])
Z([3,'handleIconTap'])
Z([3,'wap-home-o'])
Z([3,'40rpx'])
Z([3,'left'])
Z(z[8])
Z([3,'arrow-left'])
Z(z[10])
Z(z[11])
Z([3,'wrap'])
Z([3,'head-wrap'])
Z([[2,'&&'],[[2,'||'],[[6],[[7],[3,'currentRedenv']],[3,'subscribed']],[[6],[[7],[3,'currentRedenv']],[3,'ifGetRedBg']]],[1,'width: 750rpx']])
Z([[2,'!'],[[6],[[7],[3,'currentRedenv']],[3,'subscribed']]])
Z([[2,'!'],[[6],[[7],[3,'currentRedenv']],[3,'ifGetRedBg']]])
Z([3,'content'])
Z([[2,'<'],[[6],[[7],[3,'currentRedenv']],[3,'type']],[1,2]])
Z([[2,'||'],[[6],[[7],[3,'currentRedenv']],[3,'subscribed']],[[6],[[7],[3,'currentRedenv']],[3,'ifGetRedBg']]])
Z([[7],[3,'article']])
Z([[8],'wxParseData',[[6],[[7],[3,'article']],[3,'nodes']]])
Z([3,'wxParse'])
Z([[7],[3,'currentRedenv']])
Z([[7],[3,'showShareMask']])
Z([[7],[3,'reviewImg']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_129_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_129_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_129=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_129=true;
var x=['./modules/mmcover/pages/detail/detail.wxml','/miniprogram_npm/@tencent/wx-parse/wxParse.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_129_1()
var eD6=e_[x[0]].i
_ai(eD6,x[1],e_,x[0],1,1)
var bE6=_v()
_(r,bE6)
if(_oz(z,0,e,s,gg)){bE6.wxVkey=1
var xG6=_mz(z,'navbar',['class',1,'customStyle',1,'fixed',2,'frontColor',3,'placeholder',4,'title',5],[],e,s,gg)
var oH6=_v()
_(xG6,oH6)
if(_oz(z,7,e,s,gg)){oH6.wxVkey=1
var fI6=_mz(z,'vant-icon',['catchtap',8,'name',1,'size',2,'slot',3],[],e,s,gg)
_(oH6,fI6)
}
else{oH6.wxVkey=2
var cJ6=_mz(z,'vant-icon',['catchtap',12,'name',1,'size',2,'slot',3],[],e,s,gg)
_(oH6,cJ6)
}
oH6.wxXCkey=1
oH6.wxXCkey=3
oH6.wxXCkey=3
_(bE6,xG6)
var hK6=_n('view')
_rz(z,hK6,'class',16,e,s,gg)
var oL6=_mz(z,'view',['class',17,'style',1],[],e,s,gg)
var cM6=_v()
_(oL6,cM6)
if(_oz(z,19,e,s,gg)){cM6.wxVkey=1
}
var oN6=_v()
_(oL6,oN6)
if(_oz(z,20,e,s,gg)){oN6.wxVkey=1
}
cM6.wxXCkey=1
oN6.wxXCkey=1
_(hK6,oL6)
var lO6=_n('view')
_rz(z,lO6,'class',21,e,s,gg)
var aP6=_v()
_(lO6,aP6)
if(_oz(z,22,e,s,gg)){aP6.wxVkey=1
var tQ6=_v()
_(aP6,tQ6)
if(_oz(z,23,e,s,gg)){tQ6.wxVkey=1
}
tQ6.wxXCkey=1
}
else{aP6.wxVkey=2
var eR6=_v()
_(aP6,eR6)
if(_oz(z,24,e,s,gg)){eR6.wxVkey=1
var bS6=_v()
_(eR6,bS6)
var oT6=_oz(z,26,e,s,gg)
var xU6=_gd(x[0],oT6,e_,d_)
if(xU6){
var oV6=_1z(z,25,e,s,gg) || {}
var cur_globalf=gg.f
bS6.wxXCkey=3
xU6(oV6,oV6,bS6,gg)
gg.f=cur_globalf
}
else _w(oT6,x[0],64,24)
}
eR6.wxXCkey=1
}
aP6.wxXCkey=1
_(hK6,lO6)
_(bE6,hK6)
var fW6=_mz(z,'share-mask',['getShareParam',27,'show',1],[],e,s,gg)
_(bE6,fW6)
}
var oF6=_v()
_(r,oF6)
if(_oz(z,29,e,s,gg)){oF6.wxVkey=1
}
bE6.wxXCkey=1
bE6.wxXCkey=3
oF6.wxXCkey=1
eD6.pop()
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[x[1]],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_129";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_129();	if (__vd_version_info__.delayedGwx) __wxAppCode__['modules/mmcover/pages/detail/detail.wxml'] = [$gwx_XC_129, './modules/mmcover/pages/detail/detail.wxml'];else __wxAppCode__['modules/mmcover/pages/detail/detail.wxml'] = $gwx_XC_129( './modules/mmcover/pages/detail/detail.wxml' );
	;__wxRoute = "modules/mmcover/pages/detail/detail";__wxRouteBegin = true;__wxAppCurrentFile__="modules/mmcover/pages/detail/detail.js";define("modules/mmcover/pages/detail/detail.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,t=require("../../../../@babel/runtime/helpers/objectSpread2"),a=o(require("../../../../@babel/runtime/regenerator")),n=require("../../../../@babel/runtime/helpers/asyncToGenerator"),r=o(require("../../logic/Controller")),i=o(require("@tencent/wx-parse/wxParse"));function o(e){return e&&e.__esModule?e:{default:e}}Page({data:{navFixedHeight:0,currentRedenv:{},homeBtn:!1,showCountDown:!1,minute:"00",seconds:"00",loading:!0,showShareMask:!1,reviewImg:!1,article:""},onLoadOptions:{},onLoad:function(e){this.onLoadOptions=e,wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage"]});var t=getCurrentPages().length<2;this.setData({homeBtn:t});var a=e.id,n=void 0===a?"":a;r.default.report({26:"BB",27:"BB002",39:n,40:e.from||""})},onShow:function(){var e=this;return n(a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return wx.showLoading({title:"加载中"}),t.next=3,e.getDetail();case 3:if(n=e.data.currentRedenv.article,e.setData({loading:!1,article:n}),wx.hideLoading(),n){t.next=8;break}return t.abrupt("return");case 8:i.default.wxParse("article","html",n,e,30);case 9:case"end":return t.stop()}}),t)})))()},getDetail:function(){var e=this;return n(a.default.mark((function n(){var i,o,c,s,u,d,l,h,v,f,g,w,p,m;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.onLoadOptions.id,o=void 0===i?"":i,a.next=3,r.default.getDetail({mmcoverId:o});case 3:c=a.sent,s=c.distributionTime,u=void 0===s?0:s,d=(new Date).getTime(),(l=u-d)<3e5&&l>0&&(e.countDown(l),e.setData({showCountDown:!0})),h=new Date(u),v=h.getMonth()+1,f=h.getDate(),g=(g=h.getHours())<10?"0".concat(g):g,w=(w=h.getMinutes())<10?"0".concat(w):w,p=d>u?"":"".concat(v,"月").concat(f,"日").concat(g,":").concat(w),m=!1,u&&d>u&&(m=!0),e.setData({currentRedenv:t(t({},c),{},{ifGetRedBg:m,time:p})});case 20:case"end":return a.stop()}}),n)})))()},navBarAttached:function(e){var t=e.detail,a=t.statusBarHeight,n=void 0===a?0:a,r=t.navBarHeight,i=n+(void 0===r?0:r);this.setData({navFixedHeight:i})},copyCard:function(){var e=this.data.currentRedenv.searchKeyWord,t=void 0===e?"":e;wx.setClipboardData({data:"#".concat(t)})},handleSubscriptionTap:function(){var e=this;return n(a.default.mark((function t(){var n,i,o,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.data.currentRedenv,i=n.subscribed,o=void 0!==i&&i,c=n._id,!o){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,r.default.subscribe();case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:return t.prev=8,t.next=11,r.default.syncSubscribe({mmcoverId:c});case 11:e.updateAllPageStatus(c),wx.showToast({title:"订阅成功"}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),wx.showToast({icon:"none",title:"订阅失败"});case 18:return t.next=21,e.getDetail();case 21:case"end":return t.stop()}}),t,null,[[8,15]])})))()},onShareAppMessage:function(){var e=this.data.currentRedenv.coverImage,t=void 0===e?"":e,a=this.data.currentRedenv,n=a.brandName,r=void 0===n?"":n,i=a._id,o=void 0===i?"":i;return{title:"“".concat(r,"”微信红包封面派发中，快来和我一起领"),imageUrl:t,path:"modules/mmcover/pages/detail/detail?id=".concat(o)}},handleIconTap:function(){var e=this.data.homeBtn;void 0!==e&&e?wx.redirectTo({url:"/modules/mmcover/pages/index/index?from=detail"}):wx.navigateBack()},countDown:function(t){var r=this,i=(new Date).getTime(),o=Math.ceil(i/1e3),c=new Date(i+t),s=Math.ceil(c.getTime()/1e3)-o;e=setInterval((function(){var t=Math.floor(s/60);t=t<10?"0".concat(t):t;var i=s-60*t;i=i<10?"0".concat(i):i,r.setData({minute:t,seconds:i}),--s<1&&(clearInterval(e),r.setData({showCountDown:!1}),n(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getDetail();case 2:case"end":return e.stop()}}),e)})))())}),1e3)},showShareMaskTap:function(){this.setData({showShareMask:!0})},updateAllPageStatus:function(e){var t=getCurrentPages();t.length<2||t.forEach((function(a,n){n<t.length-1&&a.updateSubscribe(e)}))},reviewImg:function(){this.setData({reviewImg:!this.data.reviewImg})}});
},{isPage:true,isComponent:true,currentFile:'modules/mmcover/pages/detail/detail.js'});require("modules/mmcover/pages/detail/detail.js");