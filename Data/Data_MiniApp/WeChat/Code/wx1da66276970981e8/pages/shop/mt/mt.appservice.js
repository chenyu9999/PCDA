$gwx_XC_225=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_225 || [];
function gz$gwx_XC_225_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_225_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_225_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_225_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'w']])
Z([3,'__l'])
Z([3,'r'])
Z([3,'11f9353e-0'])
Z(z[0])
Z([3,'pageRef'])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'a']])
Z([[7],[3,'c']])
Z([3,'margin-left:12px;margin-right:12px;background:white;margin-top:-12px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;padding:12px;display:flex;flex-direction:column'])
Z([3,'display:flex;flex-direction:row;align-items:center;margin-top:6px'])
Z([[7],[3,'f']])
Z(z[1])
Z([3,'11f9353e-1,11f9353e-0'])
Z(z[11])
Z([[7],[3,'h']])
Z([[7],[3,'o']])
Z([3,'display:flex;flex-direction:row;align-items:center'])
Z([[7],[3,'m']])
Z([[7],[3,'p']])
Z([3,'item'])
Z([[7],[3,'q']])
Z([3,'j'])
Z([3,'display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:12px;margin-left:12px;margin-right:12px;position:relative'])
Z([[6],[[7],[3,'item']],[3,'d']])
Z([[6],[[7],[3,'item']],[3,'f']])
Z([[7],[3,'r']])
Z(z[20])
Z([[7],[3,'t']])
Z([3,'p'])
Z([[6],[[7],[3,'item']],[3,'o']])
Z([3,'display:flex;width:50%;overflow:hidden;margin-top:12px'])
Z([[2,'+'],[[2,'+'],[[2,'+'],[[2,'+'],[[2,'+'],[1,'margin-left:'],[[6],[[7],[3,'item']],[3,'m']]],[1,';']],[[2,'+'],[1,'margin-right:'],[[6],[[7],[3,'item']],[3,'n']]]],[1,';']],[1,'background-color:white;display:flex;flex:1;overflow:hidden;border-radius:12px;flex-direction:column']])
Z(z[1])
Z([3,'display:flex;height:120px;position:relative'])
Z([[6],[[7],[3,'item']],[3,'c']])
Z(z[6])
Z([[6],[[7],[3,'item']],[3,'b']])
Z([[6],[[7],[3,'item']],[3,'e']])
Z([[6],[[7],[3,'item']],[3,'h']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_225_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_225_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_225=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_225=true;
var x=['./pages/shop/mt/mt.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_225_1()
var o8WB=_v()
_(r,o8WB)
if(_oz(z,0,e,s,gg)){o8WB.wxVkey=1
var c9WB=_mz(z,'c-page',['bind:__l',1,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var o0WB=_v()
_(c9WB,o0WB)
if(_oz(z,7,e,s,gg)){o0WB.wxVkey=1
}
var lAXB=_v()
_(c9WB,lAXB)
if(_oz(z,8,e,s,gg)){lAXB.wxVkey=1
var eDXB=_n('view')
_rz(z,eDXB,'style',9,e,s,gg)
var bEXB=_n('view')
_rz(z,bEXB,'style',10,e,s,gg)
var oFXB=_v()
_(bEXB,oFXB)
if(_oz(z,11,e,s,gg)){oFXB.wxVkey=1
var oHXB=_mz(z,'u-rate',['bind:__l',12,'uI',1,'uP',2],[],e,s,gg)
_(oFXB,oHXB)
}
var xGXB=_v()
_(bEXB,xGXB)
if(_oz(z,15,e,s,gg)){xGXB.wxVkey=1
}
oFXB.wxXCkey=1
oFXB.wxXCkey=3
xGXB.wxXCkey=1
_(eDXB,bEXB)
var fIXB=_mz(z,'view',['bindtap',16,'style',1],[],e,s,gg)
var cJXB=_v()
_(fIXB,cJXB)
if(_oz(z,18,e,s,gg)){cJXB.wxVkey=1
}
cJXB.wxXCkey=1
_(eDXB,fIXB)
_(lAXB,eDXB)
}
var aBXB=_v()
_(c9WB,aBXB)
if(_oz(z,19,e,s,gg)){aBXB.wxVkey=1
}
var hKXB=_v()
_(c9WB,hKXB)
var oLXB=function(oNXB,cMXB,lOXB,gg){
var tQXB=_n('view')
_rz(z,tQXB,'style',23,oNXB,cMXB,gg)
var eRXB=_v()
_(tQXB,eRXB)
if(_oz(z,24,oNXB,cMXB,gg)){eRXB.wxVkey=1
}
var bSXB=_v()
_(tQXB,bSXB)
if(_oz(z,25,oNXB,cMXB,gg)){bSXB.wxVkey=1
}
eRXB.wxXCkey=1
bSXB.wxXCkey=1
_(lOXB,tQXB)
return lOXB
}
hKXB.wxXCkey=2
_2z(z,21,oLXB,e,s,gg,hKXB,'item','index','j')
var tCXB=_v()
_(c9WB,tCXB)
if(_oz(z,26,e,s,gg)){tCXB.wxVkey=1
}
var oTXB=_v()
_(c9WB,oTXB)
var xUXB=function(fWXB,oVXB,cXXB,gg){
var oZXB=_mz(z,'view',['bindtap',30,'style',1],[],fWXB,oVXB,gg)
var c1XB=_n('view')
_rz(z,c1XB,'style',32,fWXB,oVXB,gg)
var a4XB=_mz(z,'viwe',['bind:__l',33,'style',1,'uI',2,'uS',3],[],fWXB,oVXB,gg)
var t5XB=_v()
_(a4XB,t5XB)
if(_oz(z,37,fWXB,oVXB,gg)){t5XB.wxVkey=1
}
t5XB.wxXCkey=1
_(c1XB,a4XB)
var o2XB=_v()
_(c1XB,o2XB)
if(_oz(z,38,fWXB,oVXB,gg)){o2XB.wxVkey=1
}
var l3XB=_v()
_(c1XB,l3XB)
if(_oz(z,39,fWXB,oVXB,gg)){l3XB.wxVkey=1
}
o2XB.wxXCkey=1
l3XB.wxXCkey=1
_(oZXB,c1XB)
_(cXXB,oZXB)
return cXXB
}
oTXB.wxXCkey=2
_2z(z,28,xUXB,e,s,gg,oTXB,'item','index','p')
o0WB.wxXCkey=1
lAXB.wxXCkey=1
lAXB.wxXCkey=3
aBXB.wxXCkey=1
tCXB.wxXCkey=1
_(o8WB,c9WB)
}
o8WB.wxXCkey=1
o8WB.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_225";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_225();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/shop/mt/mt.wxml'] = [$gwx_XC_225, './pages/shop/mt/mt.wxml'];else __wxAppCode__['pages/shop/mt/mt.wxml'] = $gwx_XC_225( './pages/shop/mt/mt.wxml' );
	;__wxRoute = "pages/shop/mt/mt";__wxRouteBegin = true;__wxAppCurrentFile__="pages/shop/mt/mt.js";define("pages/shop/mt/mt.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../@babel/runtime/helpers/interopRequireDefault"),r=e(require("../../../@babel/runtime/regenerator")),t=e(require("../../../@babel/runtime/helpers/asyncToGenerator")),n=require("../../../common/vendor.js"),o=require("../../../config/enums.js");require("../../../config/options.js"),require("../../../config/theme.js");var u=require("../../../hooks/app/useApp.js"),a=require("../../../hooks/app/useLocation.js");require("../../../hooks/order/useOrder.js");var s=require("../../../hooks/products/useProducts.js");require("../../../hooks/products/useProductsSearch.js"),require("../../../consts.js"),require("../../../config/routes.js"),require("../../../utils/upgrade.js"),require("../../../hooks/app/useConfig.js"),require("../../../hooks/app/useSubscribeMsg.js"),require("../../../hooks/products/useFilm.js"),require("../../../utils/num-util.js"),require("../../../hooks/app/useAreas.js"),require("../../../hooks/products/useDistricts.js"),require("../../../hooks/products/useCategories.js"),require("../../../hooks/products/usePromotion.js"),require("../../../hooks/products/useShopCoupons.js"),require("../../../hooks/products/useDefaultRegionInfo.js"),Array||(n.resolveComponent("u-rate")+n.resolveComponent("viwe")+n.resolveComponent("c-page"))(),Math||(function(){return"../../../node-modules/uview-plus/components/u-rate/u-rate.js"}+function(){return"../../../components/c-page/c-page.js"})();var i=n.defineComponent({__name:"mt",setup:function(e){var i=a.useLocation().ensureCurrentLocation,c=u.useApp(),l=c.app,p=c.commonOptions,d=c.onShareAppMessage,f=c.onShareAppMessageHook,m=a.useLocation().isAccurateLocation,h=s.useProducts(),v=h.openMiniProgram,g=h.getProductCurrentLocation,I=n.ref(),P=n.ref(),q=n.ref(),x=n.ref();d(f((function(){var e;return{title:"你的好友向你推荐了".concat(P.value.shopName,"，快来看看吧"),query:"shopId=".concat(P.value.shopId,"&cat0Id=").concat((null==(e=I.value)?void 0:e.cat0Id)||"","&shopName=").concat(P.value.shopName).concat(P.value.branchName?P.value.branchName:""),image:P.value.defaultPic}})));var j=n.computed((function(){var e;return g(null==(e=I.value)?void 0:e.cat0Id)}));function y(e){return k.apply(this,arguments)}function k(){return(k=(0,t.default)(r.default.mark((function e(t){var n,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.currentTarget.dataset.item,u=p.platformInfo.find((function(e){return e.value===o.PubPlatform.MEITUAN})),v({miniProgramAppId:null==u?void 0:u.miniAppId,miniProgramPath:n.miniProgramPath});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return A.apply(this,arguments)}function A(){return(A=(0,t.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.request({url:"tuxi.txsh.config.gisConvert",params:{type:"1",latitude:P.value.lat,longitude:P.value.lng}});case 2:t=e.sent,n.index.openLocation({latitude:t.latitude,longitude:t.longitude,scale:18,name:P.value.shopName,address:P.value.address});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=["217","209"],N=n.computed((function(){return-1!==w.indexOf(I.value.cat0Id)}));function C(e){return L.apply(this,arguments)}function L(){return(L=(0,t.default)(r.default.mark((function e(o){var u,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.options,console.log("options>>>",u),I.value={shopId:u.shopId,shopName:u.shopName,cat0Id:u.cat0Id},e.next=5,i();case 5:return(0,t.default)(r.default.mark((function e(){var t,o,u,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={cityId:j.value.cityId,lng:j.value.lng,lat:j.value.lat,shopId:I.value.shopId,cat0Id:I.value.cat0Id,queryKeywords:I.value.shopName},e.next=3,n.tryExec(l.request,{api:"tuxi.txsh.goods.mt.shopDetailInfo",params:t});case 3:o=e.sent,u=o.success,a=o.result,u&&a&&(P.value=a);case 7:case"end":return e.stop()}}),e)})))(),S(1).then((function(e){q.value=null==e?void 0:e.goodsList})),-1===w.indexOf(u.cat0Id)&&S(2).then((function(e){x.value=null==e?void 0:e.goodsList})),a={shopId:I.value.shopId},e.next=11,n.tryExec(l.request,{api:"tuxi.txsh.goods.mt.editShopEnterCount",params:a});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return(_=(0,t.default)(r.default.mark((function e(t){var o,u,a,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.value&&(t=void 0),o={cityId:j.value.cityId,lng:j.value.lng,lat:j.value.lat,shopId:I.value.shopId,cat0Id:I.value.cat0Id?I.value.cat0Id:null,dealType:t,traceType:l.tracer.getTraceType(),pageIndex:1,pageSize:200},e.next=4,n.tryExec(l.request,{api:"tuxi.txsh.goods.mt.goodsListPageInfoShop",params:o});case 4:return u=e.sent,a=u.success,s=u.result,e.abrupt("return",a?s:null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,r){var t;return n.e({a:n.unref(P)},n.unref(P)?{b:n.unref(P).defaultPic}:{},{c:n.unref(P)},n.unref(P)?n.e({d:n.t(n.unref(P).shopName),e:n.t(""+(n.unref(P).branchName?"(".concat(n.unref(P).branchName,")"):"")),f:n.p({"active-color":"#FD3E53",count:"5","model-value":n.unref(P).shopStar/100,gutter:1,allowHalf:!0,readonly:!0,size:15}),g:n.t(n.unref(P).shopStar/100),h:n.unref(P).pricePerson},n.unref(P).pricePerson?{i:n.t(n.unref(P).pricePerson)}:{},{j:n.t(n.unref(P).cateName),k:n.t(null==(t=n.unref(P).bizHourDesc)?void 0:t.replace(/\n/g,"\t")),l:n.t(n.unref(P).address),m:n.unref(m)},n.unref(m)?{n:n.t(n.unref(P).distance)}:{},{o:n.o(b)}):{},{p:n.unref(x)&&n.unref(x).length>0},(n.unref(x)&&n.unref(x).length,{}),{q:n.f(n.unref(x),(function(e,r,t){return n.e({a:n.t(e.title),b:n.t(e.description),c:n.t(e.finalPrice?e.finalPrice:e.realPrice),d:1!==e.discount},1!==e.discount?{e:n.t((10*e.discount).toFixed(2))}:{},{f:e.commissionAmount&&e.commissionAmount>.03},e.commissionAmount&&e.commissionAmount>.03?{g:n.t(e.commissionAmount)}:{},{h:n.o(y,r),i:e,j:r})})),r:n.unref(q)&&n.unref(q).length>0},n.unref(q)&&n.unref(q).length>0?{s:n.t(n.unref(N)?"超值团购":"特惠套餐")}:{},{t:n.f(n.unref(q),(function(e,r,t){return n.e({a:e.picture,b:e.finalPrice<e.realPrice},(e.finalPrice,e.realPrice,{}),{c:"11f9353e-2-"+t+",11f9353e-0",d:n.t(e.title),e:e.finalPrice<e.realPrice},(e.finalPrice,e.realPrice,{}),{f:n.t(e.finalPrice?e.finalPrice:e.realPrice),g:n.t(e.marketPrice),h:1!==e.discount},1!==e.discount?{i:n.t((10*e.discount).toFixed(2))}:{},{j:n.t(!e.commissionAmount||e.commissionAmount<.03?"下单":"下单返".concat(e.commissionAmount,"元")),k:n.o(y,r),l:e,m:(r%2?6:12)+"px",n:(r%2?12:6)+"px",o:n.o((function(r){return function(e){var r="/pages/goods1/detail?cityId=".concat(j.value.cityId,"&platformId=").concat(e.platformId,"&catId=").concat(P.value.cat0Id,"&goodsId=").concat(e.goodsId,"&shopId=").concat(P.value.shopId,"&__op=products:go_goods_detail");l.router.goto({url:r})}(e)}),r),p:r})})),v:n.sr("pageRef","11f9353e-0"),w:n.p({"no-padding":!0,"on-load":C})})}}});i.__runtimeHooks=2,wx.createPage(i);
},{isPage:true,isComponent:true,currentFile:'pages/shop/mt/mt.js'});require("pages/shop/mt/mt.js");