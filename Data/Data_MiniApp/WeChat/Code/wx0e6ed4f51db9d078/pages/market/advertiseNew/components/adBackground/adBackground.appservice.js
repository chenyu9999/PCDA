__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'pages/market/advertiseNew/components/adBackground/adBackground':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c;var M=R.m;var O=R.r;var A={"swiperStyle":new Array(1),"backgroundStyle":new Array(1),"wraperStyle":new Array(1)};var K=U===true;return {C:(C,T,E)=>{E("view",{},(N,C)=>{if(C||K||U.wraperStyle)R.y(N,D.wraperStyle);A["wraperStyle"][0]=(D,E,T)=>{R.y(N,D.wraperStyle)}},(C,T,E)=>{E("view",{},(N,C)=>{if(C||K||!!(U.backgroundStyle||U.swiperStyle)||undefined)R.y(N,Y(D.backgroundStyle)+Y(D.swiperStyle));A["backgroundStyle"][0]=A["swiperStyle"][0]=(D,E,T)=>{R.y(N,Y(D.backgroundStyle)+Y(D.swiperStyle))};if(C)O(N,"bindtap","adItemClick")},(C,T,E,B,F)=>{F(X(X(D.adData).creativeMaterial).images,"index",U?Z(Z(U.adData,"creativeMaterial"),"images"):undefined,[0,"adData","creativeMaterial","images"],(C,a,b,c,d,e,T,E,B)=>{var f=X(X(D.adData).creativeMaterial).images?1:0;B(f,(C,T,E)=>{if(f===1){E("image",{},(N,C)=>{if(C||K||Z(c,"imageUrl"))O(N,"src",X(a).imageUrl);if(C||K||!!(Z(c,"width")||U.scaleRadio||Z(c,"height")||U.scaleRadio||Z(c,"leftMargin")||U.scaleRadio||Z(c,"topMargin")||U.scaleRadio||Z(c,"index"))||undefined)R.y(N,"position:absolute;width:"+Y(X(a).width*D.scaleRadio)+"px;height:"+Y(X(a).height*D.scaleRadio)+"px;left:"+Y(X(a).leftMargin*D.scaleRadio)+"px;top:"+Y(X(a).topMargin*D.scaleRadio)+"px;z-index:"+Y(X(a).index))},(C)=>{})}})});var f=X(X(D.adData).creativeMaterial).video&&X(X(X(D.adData).creativeMaterial).video).videoUrl?1:0;B(f,(C,T,E)=>{if(f===1){E("video",{},(N,C)=>{if(C||K||!!Z(Z(U.adData,"creativeMaterial"),"creativeid")||undefined)R.i(N,"video-"+Y(X(X(D.adData).creativeMaterial).creativeid));if(C||K||Z(Z(Z(U.adData,"creativeMaterial"),"video"),"videoUrl"))O(N,"src",X(X(X(D.adData).creativeMaterial).video).videoUrl);if(C||K||Z(Z(Z(U.adData,"creativeMaterial"),"video"),"duration"))O(N,"duration",X(X(X(D.adData).creativeMaterial).video).duration);if(C||K||U.videoStyle)R.y(N,D.videoStyle);if(C||K||undefined)O(N,"show-mute-btn",false);if(C||K||undefined)O(N,"show-progress",false);if(C||K||!!Z(Z(Z(U.adData,"creativeMaterial"),"video"),"isAutoPlay")||undefined)O(N,"controls",!X(X(X(D.adData).creativeMaterial).video).isAutoPlay);if(C||K||U.videoMuted)O(N,"muted",D.videoMuted);if(C||K||undefined)O(N,"show-fullscreen-btn",false);if(C||K||undefined)O(N,"show-center-play-btn",false);if(C||K||undefined)O(N,"show-bottom-progress",false);if(C||K||undefined)O(N,"enable-progress-gesture",false);if(C)O(N,"bindplay","videoPlay");if(C)O(N,"bindpause","videoPause");if(C)O(N,"binderror","videoError");if(C)O(N,"bindended","videoEnd")},(C)=>{})}});var g=X(X(D.adData).creativeMaterial).video&&!X(X(X(D.adData).creativeMaterial).video).isAutoPlay?1:0;B(g,(C,T,E)=>{if(g===1){E("view",{},(N,C)=>{if(C)R.y(N,"opcity:0;position:absolute;width:30px;height:30px;left:10px;bottom:10px");if(C)R.i(N,"videoPlayBtn")},(C)=>{})}});var h=X(X(D.adData).creativeMaterial).video&&X(X(X(D.adData).creativeMaterial).video).showSoundControl?1:0;B(h,(C,T,E)=>{if(h===1){E("image",{},(N,C)=>{if(C||K||U.videoVoiceStyle)R.y(N,D.videoVoiceStyle);if(C)R.i(N,"videoVoiceBtn");if(C||K||!!U.videoMuted||undefined)O(N,"src","//images3.c-ctrip.com/marketing/adsdk/img/"+Y(D.videoMuted?"voice_close":"voice_open")+".png");if(C)O(N,"mode","scaleToFill")},(C)=>{})}});var i=X(X(D.adData).creativeMaterial).title?1:0;B(i,(C,T,E)=>{if(i===1){E("view",{},(N,C)=>{if(C||K||U.titleStyleWrap)R.y(N,D.titleStyleWrap)},(C,T,E)=>{E("text",{},(N,C)=>{if(C||K||U.titleStyle)R.y(N,D.titleStyle)},(C,T)=>{C||K||Z(Z(Z(U.adData,"creativeMaterial"),"title"),"content")?T(Y(X(X(X(D.adData).creativeMaterial).title).content)):T()})})}});F(X(X(D.adData).creativeMaterial).subTitles,"index",U?Z(Z(U.adData,"creativeMaterial"),"subTitles"):undefined,[0,"adData","creativeMaterial","subTitles"],(C,j,k,l,m,n,T,E,B)=>{var o=X(X(D.adData).creativeMaterial).subTitles&&X(X(X(D.adData).creativeMaterial).subTitles).length>0?1:0;B(o,(C,T,E)=>{if(o===1){E("view",{},(N,C)=>{var p=k;if(C||K||!!m||Z(U.subheadsStyleWrap,p))R.y(N,X(D.subheadsStyleWrap)[p])},(C,T,E)=>{E("text",{},(N,C)=>{var p=k;if(C||K||!!m||Z(U.subheadsStyle,p))R.y(N,X(D.subheadsStyle)[p])},(C,T)=>{C||K||Z(l,"content")?T(Y(X(j).content)):T()})})}})});F(X(X(D.adData).creativeMaterial).tags,"index",U?Z(Z(U.adData,"creativeMaterial"),"tags"):undefined,[0,"adData","creativeMaterial","tags"],(C,o,p,q,r,s,T,E,B)=>{var t=X(X(D.adData).creativeMaterial).tags&&X(X(X(D.adData).creativeMaterial).tags).length>0?1:0;B(t,(C,T,E)=>{if(t===1){E("text",{},(N,C)=>{var u=p;if(C||K||!!r||Z(U.tagStyle,u))R.y(N,X(D.tagStyle)[u])},(C,T)=>{C||K||!!(q||Z(q,"content"))||undefined?T(Y(o&&X(o).content)):T()})}})});var t=X(X(D.adData).creativeMaterial).button?1:0;B(t,(C,T,E)=>{if(t===1){E("button",{},(N,C)=>{if(C||K||U.buttonStyle)R.y(N,D.buttonStyle);if(C)O(N,"bindtap","adButtonClick")},(C,T)=>{C||K||Z(Z(Z(U.adData,"creativeMaterial"),"button"),"content")?T(Y(X(X(X(D.adData).creativeMaterial).button).content)):T()})}});var u=X(X(D.adData).creativeMaterial).showCorner?1:0;B(u,(C,T,E)=>{if(u===1){E("view",{},(N,C)=>{if(C||K||U.showSignStyleWrap)R.y(N,D.showSignStyleWrap)},(C,T,E)=>{E("text",{},(N,C)=>{if(C||K||U.showSignStyle)R.y(N,D.showSignStyle)},(C,T)=>{C?T("广告"):T()})})}})})})},B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "pages/market/advertiseNew/components/adBackground/adBackground";__wxRouteBegin = true;__wxAppCurrentFile__="pages/market/advertiseNew/components/adBackground/adBackground.js";define("pages/market/advertiseNew/components/adBackground/adBackground.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../ad-utils.js"),e=require("../../../../../cwx/cwx.js"),a=e.cwx.canIUse("web-view");Component({properties:{adData:{type:Object,observer:function(){wx.j("a04"),this.setBackgtoundStyle(),this.setVideoStyle(),this.getTitleStyle(),this.getSubheadsStyle(),this.getTagStyle(),this.getButtontyle(),this.setbannerStyle()}},whObj:Object,showSign:Object,adType:String,screenRatio:Number,borderRadius:String,header:Object,trackingid:String,adIndex:Number,adsNum:{type:Number,value:null},currentSwiper:{type:Number,observer:function(){wx.j("Z11"),this.setVideoPlay()}}},data:{backgroundStyle:"",videoStyle:"",videoBtnStyle:"",videoVoiceStyle:"",titleStyle:"",titleStyleWrap:"",tagStyle:[],subheadsStyle:[],subheadsStyleWrap:[],swiperStyle:"",wraperStyle:"",buttonStyle:"",transformX:0,transformY:0,scaleRadio:1,showSignStyleWrap:"",showSignStyle:"",showSignObj:{},posterUrl:"",videoStatus:!1,videoMuted:!0},lifetimes:{attached:function(){this.setbannerStyle(),this.setVideoPlay(),this.data.adData&&this.data.adData.creativeMaterial&&this.data.adData.creativeMaterial.video&&(this.videoContext=wx.createVideoContext("video-".concat(this.data.adData.creativeMaterial.creativeid),this))}},methods:{cssBackGimg:function(t){return wx.j("NfG"),t?"url(".concat(t,")"):""},setVideoPlay:function(){var t=this;wx.j("fgU");var e=this.data.currentSwiper===this.data.adIndex,a=this.data.adData.creativeMaterial,i=a&&a.video;i&&setTimeout((function(){wx.j("Blo"),e&&i.isAutoPlay?t.videoContext&&t.videoContext.play():t.videoContext&&t.videoContext.pause()}),0)},setBackgtoundStyle:function(){wx.j("u3r");var t=this.data.adData.creativeMaterial.layout,e=this.data.scaleRadio;if(t){var a="width:".concat(t.width*e,"px;height:").concat(t.height*e,"px;background:").concat(t.backgroundColor," ").concat(this.cssBackGimg(t.backgroundImage)," no-repeat 0 0;background-size:100% 100%;border-radius:").concat(t.borderRadius,"px;overflow:hidden;position:relative;");this.setData({backgroundStyle:a})}},setVideoStyle:function(){wx.j("Ook");var t=this.data.adData.creativeMaterial,e=t.video,a=t.images,i=this.data.scaleRadio;if(e){var o="position:absolute;left:".concat(e.leftMargin*i,"px;top:").concat(e.topMargin*i,";width:").concat(e.width*i,"px;height:").concat(e.height*i,"px;"),n="";a&&a.length&&(n=a[0].imageUrl);var r="position:absolute;top:".concat(e.height*i/4,"px;left:").concat((e.width*i-e.height*i/2)/2,"px;width:").concat(e.height*i/2,"px;height:").concat(e.height*i/2,"px;");this.setData({videoStyle:o,posterUrl:n,videoBtnStyle:r,videoVoiceStyle:"position:absolute;right:5px;top:5px;width:30px;height:30px;"})}},getCommonStyleWrap:function(t){wx.j("SxL");var e=this.data.scaleRadio;return"position:absolute;width:".concat(t.width*e,"px;height:").concat(t.height*e,"px;left:").concat(t.leftMargin*e,"px;top:").concat(t.topMargin*e,"px;z-index:990;display:flex;text-align:").concat(t.horizontalAlign,";align-items:").concat({LEFT:"flex-start",RIGHT:"flex-end",CENTER:"center"}[t.horizontalAlign],";justify-content:").concat({TOP:"flex-start",BOTTOM:"flex-end",CENTER:"center"}[t.verticalAlign])},getInnerStyle:function(t){wx.j("qnN");var e=this.data.scaleRadio;return"font-size:".concat(t.fontSize*e,"px;font-weight:").concat(1==t.isBold?"bold":"normal",";color:").concat(t.color,";line-height:").concat(t.lineHeight?t.lineHeight:1.2,";width:").concat(t.width*e,"px; overflow:hidden;text-overflow: ellipsis;display: -webkit-box; -webkit-line-clamp: ").concat(t.maxLine?t.maxLine:1,";-webkit-box-orient: vertical;word-break: break-all;")},getTitleStyle:function(){wx.j("0cp");var t=this.data.adData.creativeMaterial.title;if(t){var e=this.getInnerStyle(t),a=this.getCommonStyleWrap(t);this.setData({titleStyle:e,titleStyleWrap:a})}},getButtontyle:function(){wx.j("9Hv");var t=this.data.adData.creativeMaterial.button,e=this.data.scaleRadio;if(t){var a=t.height*e,i="position:absolute;width:".concat(t.width*e,"px;height:").concat(t.height*e,"px;font-size:").concat(t.fontSize*e,"px;left:").concat(t.leftMargin*e,"px;top:").concat(t.topMargin*e,"px;color:").concat(t.fontColor,";text-align:center;line-height:").concat(a,"px;background:").concat(t.backgroundColor,";border:").concat(t.borderColor?"1px solid ".concat(t.borderColor):"none",";border-radius:").concat(t.borderRadius?t.borderRadius*e:0,"px;z-index:900;overflow:hidden;");this.setData({buttonStyle:i})}},getSubheadsStyle:function(){var t=this;wx.j("GTl");var e=this.data.adData.creativeMaterial.subTitles,a=[],i=[];e&&e.length>0&&(e.forEach((function(e){wx.j("CBi");var o=t.getCommonStyleWrap(e),n=t.getInnerStyle(e);a.push(n),i.push(o)})),this.setData({subheadsStyle:a,subheadsStyleWrap:i}))},getTagStyle:function(){wx.j("zIB");var t=this.data.adData.creativeMaterial.tags,e=[],a=this.data.scaleRadio;t&&t.length>0&&(t.forEach((function(t){wx.j("4Cl");var i=t.height*a;"TOP"==t.verticalAlign?i=t.fontSize*a:"BOTTOM"==t.verticalAlign&&(i=2*Number(t.height*a)-Number(t.fontSize*a));var o="position:absolute;width:".concat(t.width*a,"px;height:").concat(t.height*a,"px;font-size:").concat(t.fontSize*a,"px;font-weight:").concat(1==t.isBold?"bold":"normal",";left:").concat(t.leftMargin*a,"px;top:").concat(t.topMargin*a,"px;color:").concat(t.color,";text-align:").concat(t.horizontalAlign,";line-height:").concat(i,"px;background:").concat(t.backgroundColor,";border:").concat(1==t.hasBorder?"2px solid ".concat(t.borderColor):"",";opacity: ").concat(t.opacity,";border-radius:").concat(t.borderRadius?t.borderRadius*a:0,"px;z-index:700;overflow:hidden;");e.push(o)})),this.setData({tagStyle:e}))},setbannerStyle:function(){wx.j("FfI");var e={fwWidth:this.data.adData&&this.data.adData.width,fwHeight:this.data.adData&&this.data.adData.height},a=(0,t.mainClipfn)(this.data.whObj,e,this.data.screenRatio);if("BANNER"==this.data.adType){var i=a.wraperStyle;this.data.borderRadius&&(i+="border-radius:".concat(this.data.borderRadius,";")),this.setData({swiperStyle:a.swiperStyle,wraperStyle:i,transformX:a._transformX,transformY:a._transformY,scaleRadio:a.scaleRadio})}else this.setData({transformX:a._transformX,transformY:a._transformY,scaleRadio:a.scaleRadio});this.getShowSignStyle(),this.setBackgtoundStyle(),this.setVideoStyle(),this.getTitleStyle(),this.getSubheadsStyle(),this.getButtontyle(),this.getTagStyle()},adItemJump:function(i,o){if(wx.j("qMj"),o.metricLogs.forEach((function(t){wx.j("4tU"),"102840"==t.key&&e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace(t.key,t.value)})),(0,t.sendExposefn)(i,"click"),o.appId)e.cwx.cwx_navigateToMiniProgram({appId:o.appId,path:o.linkUrl,openEmbedded:!0,envVersion:"release",success:function(t){wx.j("yAJ"),console.log("jump other success")},fail:function(t){wx.j("kVl"),console.log("jump other fail")}});else if(a&&/^(https?):\/\//i.test(o.linkUrl)){var n={url:encodeURIComponent(o.linkUrl)};o.linkUrl&&o.linkUrl.toLowerCase().indexOf("needlogin")>-1&&(n.needLogin=!0),o.linkUrl&&o.linkUrl.toLowerCase().indexOf("isshareweburl")>-1&&(n.isShareWebUrl=!0),e.cwx.component.cwebview({data:n})}else o.linkUrl&&e.cwx.navigateTo({url:o.linkUrl,success:function(t){wx.j("DMd"),console.log("success")}})},adItemClick:function(a,i){wx.j("GwE");var o=a.target.id,n=this.data.adData,r=n.creativeMaterial,d=r.layout,c=d&&d.clickabled;if("videoPlayBtn"===o)return this.data.videoStatus?this.videoContext.pause():this.videoContext.play(),!1;if("videoVoiceBtn"===o){var s=this.data.videoMuted;return this.setData({videoMuted:!s}),e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace("mkt_adsdk_openVideoVoice",{value:s?0:1}),!1}if(o.indexOf("video")&&r.video){var l={data:JSON.stringify({impId:n.impId,url:r.video.videoUrl||"",type:"click"})};e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace("o_mkt_banner_video_exptime",l)}if("2"==n.impType&&!c&&!i)return!1;if(r.componentType&&1==r.componentType&&r.promoted){var h={head:this.data.header,trackingId:this.data.trackingid,impId:n.impId,frame:n.index,componentType:r.componentType,componentValue:r.promoted.productId};e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace("mkt_adsdk_interaction_params",{data:JSON.stringify(h)});var p=this;e.cwx.request({url:"/restapi/soa2/13916/interaction.json",data:h,success:function(a){wx.j("376");var i="",o=a.data.code;i=1000015==o?"invalid":200==o?"success":"fail",(0,t.sendComponentClick)(r.trackingExtras,"componentClick",i),p.adItemJump(n,r),e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace("o_mkt_ticker_response",{code:i,reason:JSON.stringify(a.data),impid:n.impId})},fail:function(a){wx.j("HJI"),(0,t.sendComponentClick)(r.trackingExtras,"componentClick","fail"),p.adItemJump(n,r),e.cwx.sendUbtByPage&&e.cwx.sendUbtByPage.ubtTrace&&e.cwx.sendUbtByPage.ubtTrace("mkt_adsdk_interaction_fail",{code:"fail",reason:JSON.stringify(a),impid:n.impId})}})}else this.adItemJump(n,r)},adButtonClick:function(t){wx.j("v4O"),this.adItemClick(t,"button")},getShowSignStyle:function(){wx.j("AbZ");var t=Object.assign({},{show:!0,position:"left",left:0,right:0,bottom:0},this.data.showSign),e="opacity: 0.3;background:#000;width:26px;height:14px;border-radius:4px;position:absolute;".concat(t.position,":").concat(t[t.position],"px;bottom:").concat(t.bottom,"px;z-index:99");"left"==t.position&&0==t.left&&(e=e.concat("border-top-left-radius:0;border-bottom-left-radius:0;")),"right"==t.position&&0==t.right&&(e=e.concat("border-top-right-radius:0;border-bottom-right-radius:0;")),0==t.bottom&&(e=e.concat("border-bottom-left-radius:0;border-bottom-right-radius:0;")),t.borderTopLeftRadius&&(e=e.concat("border-top-left-radius:".concat(t.borderTopLeftRadius,"px;"))),t.borderTopRightRadius&&(e=e.concat("border-top-right-radius:".concat(t.borderTopRightRadius,"px;"))),t.borderBottomRightRadius&&(e=e.concat("border-bottom-right-radius:".concat(t.borderBottomRightRadius,"px;"))),t.borderBottomLeftRadius&&(e=e.concat("border-bottom-left-radius:".concat(t.borderBottomLeftRadius,"px;")));"2"==this.data.adData.impType&&(e=e.concat("bottom:auto;top:0px;border-top-right-radius:0px;border-bottom-right-radius:7px;")),this.setData({showSignStyleWrap:e,showSignStyle:"opacity: 0.9;color:#fff;font-size:9px;width:26px;height:14px;letter-spacing: 0;line-height:14px;display:block;text-align:center;",showSignObj:t})},videoPlay:function(){wx.j("w73"),this.setData({videoStatus:!0}),this.triggerEvent("videoChange",{isPlay:!0,type:"play"})},videoPause:function(){wx.j("yMb"),this.setData({videoStatus:!1}),this.triggerEvent("videoChange",{isPlay:!1,type:"play"})},videoError:function(){wx.j("gqS"),this.setData({videoStatus:!1}),this.triggerEvent("videoChange",{type:"error"})},videoEnd:function(){wx.j("pNQ"),this.setData({videoStatus:!1}),this.triggerEvent("videoChange",{type:"end"})}}});
},{isPage:false,isComponent:true,currentFile:'pages/market/advertiseNew/components/adBackground/adBackground.js'});require("pages/market/advertiseNew/components/adBackground/adBackground.js");