$gwx_XC_90=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_90 || [];
function gz$gwx_XC_90_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_90_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_90_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_90_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'案例库详情'])
Z([a,[3,'c-page '],[[2,'?:'],[[7],[3,'isShowTopMsg']],[1,'top-msg-page'],[1,'']]])
Z([[2,'&&'],[[7],[3,'info']],[[2,'=='],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]])
Z([3,'page-inner container'])
Z([3,'case-info'])
Z([[6],[[7],[3,'info']],[3,'logo']])
Z([[6],[[6],[[7],[3,'info']],[3,'tag']],[3,'length']])
Z([3,'tag'])
Z([[6],[[7],[3,'info']],[3,'tag']])
Z([3,'index'])
Z([[2,'<'],[[2,'+'],[[7],[3,'index']],[1,1]],[[6],[[6],[[7],[3,'info']],[3,'tag']],[3,'length']]])
Z([[6],[[7],[3,'item']],[3,'length']])
Z([[6],[[7],[3,'info']],[3,'detail']])
Z([[2,'&&'],[[2,'>'],[[6],[[7],[3,'info']],[3,'link_type']],[1,1]],[[6],[[7],[3,'info']],[3,'link_text']]])
Z([[6],[[7],[3,'info']],[3,'industry_banner']])
Z([[2,'?:'],[[2,'=='],[[6],[[7],[3,'info']],[3,'ib_status']],[1,1]],[[6],[[7],[3,'info']],[3,'industry_id']],[1,'']])
Z([[7],[3,'rec']])
Z([[2,'||'],[[6],[[7],[3,'info']],[3,'rec_title']],[1,'更多推荐']])
Z([[2,'&&'],[[6],[[7],[3,'info']],[3,'download_form']],[[2,'>'],[[6],[[7],[3,'info']],[3,'file_id']],[1,0]]])
Z([[6],[[7],[3,'consultDetail']],[3,'CampaignID']])
Z([[7],[3,'consultDetail']])
Z([[6],[[7],[3,'consultDetail']],[3,'tplId']])
Z([[6],[[7],[3,'consultDetail']],[3,'icon']])
Z([[6],[[7],[3,'consultDetail']],[3,'title']])
Z([[6],[[7],[3,'consultDetail']],[3,'enable_status']])
Z([[6],[[7],[3,'consultDetail']],[3,'consultType']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatQrCode']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatTitle']])
Z([1,110])
Z([[2,'&&'],[[7],[3,'info']],[[2,'>'],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]])
Z([3,'mp-view'])
Z([3,'onMpReady'])
Z([3,'handleTrack'])
Z([3,'handleTap'])
Z([[7],[3,'loading']])
Z([[6],[[7],[3,'info']],[3,'contentH5']])
Z([3,'mpHtml'])
Z([[7],[3,'dataInfo']])
Z(z[19])
Z(z[20])
Z(z[21])
Z(z[22])
Z(z[23])
Z(z[24])
Z(z[25])
Z(z[26])
Z(z[27])
Z([[2,'!'],[[7],[3,'info']]])
Z([[7],[3,'loadError']])
Z([[6],[[7],[3,'info']],[3,'id']])
Z([3,'shareMemberPick'])
Z([3,'hideSharePanel'])
Z([3,'shareInfoUpdate'])
Z([3,'showTopMsgHandler'])
Z([3,'switchSharePick'])
Z([[7],[3,'info']])
Z([[7],[3,'shareActiveInfo']])
Z([[7],[3,'shareCardId']])
Z([[7],[3,'showPanel']])
Z([[7],[3,'isShowOtherField']])
Z([3,'closeFormDialog'])
Z([3,'downloadUpdateInfoCallBack'])
Z([[7],[3,'otherFieldList']])
Z([[7],[3,'otherFieldInfo']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_90_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_90_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_90=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_90=true;
var x=['./pages/case/case_detail/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_90_1()
var o86=_n('header')
_rz(z,o86,'title',0,e,s,gg)
_(r,o86)
var x96=_n('view')
_rz(z,x96,'class',1,e,s,gg)
var o06=_v()
_(x96,o06)
if(_oz(z,2,e,s,gg)){o06.wxVkey=1
var oD7=_n('view')
_rz(z,oD7,'class',3,e,s,gg)
var aH7=_n('view')
_rz(z,aH7,'class',4,e,s,gg)
var tI7=_v()
_(aH7,tI7)
if(_oz(z,5,e,s,gg)){tI7.wxVkey=1
}
var eJ7=_v()
_(aH7,eJ7)
if(_oz(z,6,e,s,gg)){eJ7.wxVkey=1
var bK7=_v()
_(eJ7,bK7)
var oL7=function(oN7,xM7,fO7,gg){
var hQ7=_v()
_(fO7,hQ7)
if(_oz(z,10,oN7,xM7,gg)){hQ7.wxVkey=1
}
hQ7.wxXCkey=1
return fO7
}
bK7.wxXCkey=2
_2z(z,8,oL7,e,s,gg,bK7,'tag','index','index')
}
tI7.wxXCkey=1
eJ7.wxXCkey=1
_(oD7,aH7)
var cE7=_v()
_(oD7,cE7)
if(_oz(z,11,e,s,gg)){cE7.wxVkey=1
}
var oR7=_n('rich-view')
_rz(z,oR7,'content',12,e,s,gg)
_(oD7,oR7)
var oF7=_v()
_(oD7,oF7)
if(_oz(z,13,e,s,gg)){oF7.wxVkey=1
}
var cS7=_mz(z,'rec-box',['industryBanner',14,'industryId',1,'recList',2,'title',3],[],e,s,gg)
_(oD7,cS7)
var lG7=_v()
_(oD7,lG7)
if(_oz(z,18,e,s,gg)){lG7.wxVkey=1
}
var oT7=_mz(z,'consult-btn',['CampaignID',19,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(oD7,oT7)
var lU7=_n('home-tips')
_rz(z,lU7,'bottom',28,e,s,gg)
_(oD7,lU7)
cE7.wxXCkey=1
oF7.wxXCkey=1
lG7.wxXCkey=1
_(o06,oD7)
}
var fA7=_v()
_(x96,fA7)
if(_oz(z,29,e,s,gg)){fA7.wxVkey=1
var aV7=_n('view')
_rz(z,aV7,'class',30,e,s,gg)
var tW7=_mz(z,'mp-weixin',['lazyLoad',-1,'bind:ready',31,'bind:track',1,'bindtapEvent',2,'containerStyle',3,'content',4,'id',5,'info',6],[],e,s,gg)
_(aV7,tW7)
var eX7=_mz(z,'consult-btn',['CampaignID',38,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(aV7,eX7)
_(fA7,aV7)
}
var cB7=_v()
_(x96,cB7)
if(_oz(z,47,e,s,gg)){cB7.wxVkey=1
var bY7=_n('loading')
_(cB7,bY7)
}
var hC7=_v()
_(x96,hC7)
if(_oz(z,48,e,s,gg)){hC7.wxVkey=1
}
o06.wxXCkey=1
o06.wxXCkey=3
fA7.wxXCkey=1
fA7.wxXCkey=3
cB7.wxXCkey=1
cB7.wxXCkey=3
hC7.wxXCkey=1
_(r,x96)
var e66=_v()
_(r,e66)
if(_oz(z,49,e,s,gg)){e66.wxVkey=1
var oZ7=_mz(z,'share-pannel',['bind:shareMemberPick',50,'bindhideSharePanel',1,'bindshareInfo',2,'bindshowTopMsg',3,'bindswitchSharePick',4,'info',5,'shareActiveInfo',6,'shareCardId',7,'showPanel',8],[],e,s,gg)
_(e66,oZ7)
}
var b76=_v()
_(r,b76)
if(_oz(z,59,e,s,gg)){b76.wxVkey=1
var x17=_mz(z,'other-form',['bind:closeFormDialog',60,'bind:submitSuccess',1,'formList',2,'info',3],[],e,s,gg)
_(b76,x17)
}
e66.wxXCkey=1
e66.wxXCkey=3
b76.wxXCkey=1
b76.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_90";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_90();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/case/case_detail/index.wxml'] = [$gwx_XC_90, './pages/case/case_detail/index.wxml'];else __wxAppCode__['pages/case/case_detail/index.wxml'] = $gwx_XC_90( './pages/case/case_detail/index.wxml' );
	;__wxRoute = "pages/case/case_detail/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/case/case_detail/index.js";define("pages/case/case_detail/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/interopRequireDefault").default,a=require("../../../@babel/runtime/helpers/regeneratorRuntime"),e=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=require("../../../@babel/runtime/helpers/defineProperty"),o=require("../../../@babel/runtime/helpers/typeof"),i=t(require("../../../utils/tool")),s=require("../../../utils/phoneLogin.js"),d=getApp();Page({data:{getDownList:{},pageId:"",posterTitle:"",loadError:!1,loadOver:!1,contentID:"",consultDetail:{},vsTime:void 0,vpTime:void 0,veTime:void 0,vEnd:!1,shareCardId:"",shareCardInfo:{},isShareCard:!0,isShowTopMsg:!1,isShareMyInfo:!0,otherFieldList:[],isShowOtherField:!1,otherFieldInfo:{},useUin:wx.getStorageSync("useUin"),actionType:"",handleTapType:"",subscribeId:0,paramObj:{},dataInfo:{},submitRes:{},isAccount:!1,loading:"display:none",isCheckFormSubmitLoading:!1},onLoad:function(t){var a=this;if(t.isAccount&&this.setData({isAccount:t.isAccount}),t.id){this.data.contentID=t.id;var e=t.employeePosition,n=t.wechatId,o=t.wechatworkId,i=t.employeePhone;d.QD.setSalesShareCardParams(t),this.setData({pageId:t.id,shareCardId:t.shareCardId,shareActiveInfo:{employeePosition:e,wechatId:n,wechatworkId:o,employeePhone:i}}),d.loginCallback().then((function(e){a.getData(t.id)}))}else if(t.scene){var s=decodeURIComponent(t.scene);d.loginCallback().then((function(){d.API.uuidToParams(s,"case").then((function(t){if(console.log("uuidToParams res",t),0==t.code&&t.content.params){a.data.contentID=t.content.paramsObj.id;var e=t.content.paramsObj,n=e.employeePosition,o=e.wechatId,i=e.wechatworkId,s=e.employeePhone;d.QD.setSalesShareCardParams(t.content.paramsObj),a.setData({pageId:t.content.paramsObj.id,shareCardId:t.content.paramsObj.shareCardId,shareActiveInfo:{employeePosition:n,wechatId:o,wechatworkId:i,employeePhone:s}}),t.content.paramsObj.shareId&&(a.data.shareId=t.content.paramsObj.shareId),a.getData(t.content.paramsObj.id)}})).catch((function(t){console.log("uuidToParams err",t)}))}))}else this.setData({loadError:!0,info:{}})},onReady:function(){},onShow:function(){if(this.setData({isCheckFormSubmitLoading:!1}),this.data.loadOver){var t={ContentID:this.data.info.source_id>0?this.data.contentID.toString():"case".concat(this.data.contentID),menu:d.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||"",content_type:2};this.data.shareId&&(t.mp_shareID=this.data.shareId),this.data.actionType&&(this[this.data.actionType](),this.setData({actionType:""})),d.QD.track("contentView",t),this.data.isAccount&&d.QD.track("official_account_template_message_clickthroughs",{ContentTheme:this.data.info.title,ChannelType:d.QD.getChannelType()})}},onHide:function(){},onUnload:function(){this.data.vsTime&&(this.data.vEnd?d.QD.track("WatchingVideo",{ContentID:d.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!0,menu:d.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}):d.QD.track("WatchingVideo",{ContentID:d.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!1,menu:d.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}))},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return d.QD.action("shareContent",{ContentID:this.data.info.source_id>0?this.data.contentID.toString():"case".concat(this.data.contentID),menu:d.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||"",content_type:2}),d.tool.onShareAppMessage({path:"/pages/case/case_detail/index",title:this.data.info.title,imageUrl:this.data.info.share_img,shareCardInfo:this.shareCardInfo,id:this.data.info.id,isShareCard:this.isShareCard,isShareMyInfo:this.data.isShareMyInfo})},catchtouchmove:function(){},consultDetail:function(t,a){var e=this;d.API.consultDetail(t,a).then((function(t){0==t.code&&e.setData({consultDetail:t.content})}))},getData:function(t){var a=this,e=d.globalData.userInfo;this.setData({userInfo:e}),d.API.getCaseDetail(t).then((function(t){if(0==t.code&&"object"==o(t.content)&&0==Object.keys(t.content).length)a.setData({loadError:!0,info:{}});else if(0==t.code){a.consultDetail("content",t.content.info.data_id),a.data.loadOver=!0,a.setData(t.content),a.setData({getDownList:t.content.download,subscribeId:t.content.info.Subgroupname||0});var e=t.content.info.source_id?t.content.info.source_id:a.data.pageId;a.data.contentID=e;var n={ContentID:a.data.info.source_id>0?e.toString():"case".concat(e),menu:d.globalData.currentTab,name_of_page:t.content.info.title,CampaignID:a.data.info.CampaignID||"",NameOfCampaign:a.data.info.NameOfCampaign||"",content_type:2};a.data.shareId&&(n.mp_shareID=a.data.shareId),d.QD.track("contentView",n);var i=t.content.info;a.setData({dataInfo:{isReserve:0,isApply:2===i.form_is_submit?1:0,isCollection:i.collectStatus,isPraise:i.likeStatus}})}})),d.API.clickRecord({id:t,contentType:"case"}).then((function(t){0==t.code&&console.log("浏览+1")}))},bindCollect:function(){var t=this;d.sp.subscribePick(this.data.subscribeId,"collection");var a=this;d.QD.track("official_button_click",{button_name:"收藏",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:d.QD.getChannelType()}),(0,s.goLogin)("bindCollect").then((function(e){e&&(1==a.data.info.collectStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的收藏？",success:function(t){t.confirm?d.API.addCollect({id:a.data.pageId,tag:3}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消收藏成功",icon:"none"}),a.setData({"info.collectStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):d.API.addCollect({id:a.data.pageId,tag:3}).then((function(e){0==e.code?e.content&&1==e.content.status&&(d.QD.action("contentCollect",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"case".concat(t.data.contentID),menu:d.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"收藏成功，可至“我的收藏”中查看",icon:"none"}),a.setData({"info.collectStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},bindLike:function(){var t=this;d.sp.subscribePick(this.data.subscribeId,"praise"),d.QD.track("official_button_click",{button_name:"点赞",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:d.QD.getChannelType()});var a=this;(0,s.goLogin)("bindLike").then((function(e){e&&(1==a.data.info.likeStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的点赞？",success:function(t){t.confirm?d.API.likeRecord({id:a.data.pageId,contentType:"case"}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消点赞成功",icon:"none"}),a.setData({"info.likeStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):d.API.likeRecord({id:t.data.pageId,contentType:"case"}).then((function(e){0==e.code?e.content&&1==e.content.status&&(d.QD.action("contentLike",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"case".concat(t.data.contentID),menu:d.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"点赞成功",icon:"none"}),a.setData({"info.likeStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},showSharePanel:function(){var t=this;d.QD.track("official_button_click",{button_name:"分享",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:d.QD.getChannelType()}),(0,s.goLogin)("showSharePanel").then((function(a){a&&(d.sp.subscribePick(t.data.subscribeId,"share"),t.setData({showPanel:!0}))}))},hideSharePanel:function(){this.setData({showPanel:!1})},shareFriend:function(){},getSharePoster:function(){var t=this.data,a=t.pageId,e=t.info,n=e.banner,o=e.title,i=e.data_id;return d.jumpSharePoster({pageId:a,cover_img:n,title:o,data_id:i})},getUserInfo:function(t){var a=this;wx.getUserProfile({desc:"用于完善用户信息",success:function(t){var e;console.log("获取用户信息 wx.getUserProfile",t);var o=t.userInfo;t.iv,t.encryptedData;wx.setStorageSync("userInfoNickname",o.nickName),wx.setStorageSync("userInfoAvatarUrl",o.avatarUrl),a.setData((n(e={},"userInfo.avatar",o.avatarUrl),n(e,"userInfo.nickname",o.nickName),e)),a.data.drawerPoster||a.getSharePoster()}})},handleDownload:function(){var t=this;return e(a().mark((function e(){return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(0,s.goLogin)("handleDownload").then((function(a){if(a){var e=t.data.info.download_form,n=t.data.info.file_id;t.downLink="/pages/download/index?id=".concat(n),t.downloadCommonhandler(e,"download","",(function(){t._goForm(e,"download",encodeURIComponent(t.downLink))}))}}));case 1:case"end":return a.stop()}}),e)})))()},_goForm:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";wx.navigateTo({url:"/pages/form/index/index?op_type=".concat(a,"&f_id=").concat(this.data.file_id,"&data_id=").concat(this.data.info.id,"&data_type=1&tplId=").concat(t,"&type=download&r_url=").concat(e)})},handleTrack:function(t){var a=this;console.log("handleTrack",t),"videoPlay"==t.detail.type?(this.setData({vsTime:new Date,vEnd:!1}),d.QD.track("start_play_video",{ContentID:d.QD.getLastContentId(),menu:d.globalData.currentTab,name_of_page:this.data.info.title})):"videoPause"==t.detail.type?(this.setData({vpTime:new Date}),setTimeout((function(){a.data.vEnd?d.QD.track("WatchingVideo",{ContentID:d.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!0,menu:d.globalData.currentTab,name_of_page:a.data.info.title}):d.QD.track("WatchingVideo",{ContentID:d.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!1,menu:d.globalData.currentTab,name_of_page:a.data.info.title})}),1e3)):"videoEnded"==t.detail.type&&this.setData({veTime:new Date,vEnd:!0})},handleTap:function(t){var n=this;return e(a().mark((function e(){var o;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("handleTap",t),(o=n).data.paramObj.type?!t&&o.data.paramObj.type&&(t=o.data.paramObj,o.data.paramObj={}):o.setData({paramObj:t}),(0,s.goLogin)("handleTap",t.detail.dataset.type).then((function(a){if(a){var e=t.detail.dataset,s=e.type,c=e.param;o.data.handleTapType&&(s=o.data.handleTapType,o.data.handleTapType="");var r=null;try{r=JSON.parse(c)}catch(t){console.log("handleTap json parse error",t)}if(!r)return;switch(console.log("handleTap param",s,r),s){default:break;case"share":n.showSharePanel();break;case"consultation":r.consultCode&&wx.navigateTo({url:"/pages/form/index/index?tplId=".concat(r.consultCode,"&type=consult")});break;case"download":case"apply":case"enroll":d.sp.subscribePick(n.data.subscribeId,s);var l=n.data.info.download_form;if(5==r.bottomStyle||16==r.bottomStyle?r.enrollCode&&(l=r.enrollCode):r.downloadCode&&(l=r.downloadCode),!l)return void console.log("no downloadCode");n.downLink="/pages/download/index?id=0&name=".concat(r.downloadLinkName,"&url=").concat(r.downloadLink,"&source_id=").concat(n.data.info.source_id),n.downloadCommonhandler(l,s,r,(function(){n._goForm(l,s,encodeURIComponent(n.downLink))}));break;case"recommend":var h=i.default.getDetailUrl(r.templateTypesId,r.dataId);h&&wx.navigateTo({url:"/"+h});break;case"collection":n.bindCollect();break;case"praise":n.bindLike()}}else;}));case 4:case"end":return a.stop()}}),e)})))()},downloadCommonhandler:function(t,n,o,i){var s=this;return e(a().mark((function e(){var n,c;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!s.data.isCheckFormSubmitLoading){a.next=4;break}return a.abrupt("return");case 4:s.setData({isCheckFormSubmitLoading:!0});case 5:return d.QD.track("official_button_click",{button_name:"下载资料",button_position:"移动端底部",ContentTheme:s.data.info.title,ChannelType:d.QD.getChannelType()}),d.sp.subscribePick(s.data.subscribeId,"download"),a.next=9,d.API.checkFormSubmitDownload(1,s.data.pageId,3,t,wx.getStorageSync("qdVisitId"));case 9:if(n=a.sent,console.log("page case detail handleDownload submitRes",n),0!=n.code||1!=n.content){a.next=25;break}if(!(o&&5==o.bottomStyle||16==o.bottomStyle)){a.next=16;break}wx.showToast({title:"您已完成表单的提交",icon:"none"}),a.next=23;break;case 16:if(wx.setStorageSync("_download_tpl_",t),!((c=n.otherFieldList||[])&&c.length>0)){a.next=22;break}return a.abrupt("return",s.setData({otherFieldList:c,isShowOtherField:!0,otherFieldInfo:{f_id:s.data.file_id,data_id:s.data.info.id,data_type:1,tplId:t,type:"download"}}));case 22:s.downloadUpdateInfoCallBack();case 23:a.next=27;break;case 25:d.setDownloadParams({contentDonwload:{ContentID:s.data.info.source_id>0?s.data.contentID.toString():"case".concat(s.data.contentID),menu:d.globalData.currentTab,name_of_page:s.data.info.title},record:{id:s.data.pageId,contentType:"case"}}),i();case 27:case"end":return a.stop()}}),e)})))()},downloadUpdateInfoCallBack:function(){this.closeFormDialog(),d.QD.action("contentDownload",{ContentID:this.data.info.source_id>0?this.data.contentID.toString():"case".concat(this.data.contentID),menu:d.globalData.currentTab,name_of_page:this.data.info.title}),d.API.downloadRecord({id:this.data.pageId,contentType:"case"}),this.closeFormDialog(),wx.navigateTo({url:this.downLink})},closeFormDialog:function(){this.setData({isShowOtherField:!1})},shareInfoUpdate:function(t){this.shareCardInfo=t.detail,this.isShareCard=!0,this.setData({shareCardInfo:t.detail,isShareCard:!0})},switchSharePick:function(t){var a=t.detail,e=a.activeInfo,n=a.isShareCard;this.shareCardInfo=e,this.isShareCard=n,this.setData({shareCardInfo:e,isShareCard:n})},showTopMsgHandler:function(t){this.setData({isShowTopMsg:t.detail})},shareMemberPick:function(t){console.log("🚀 ~ file: index.js ~ line 654 ~ shareMemberPick ~ e",t),this.setData({isShareMyInfo:t.detail})},onMpReady:function(){console.log("onMpReady",this.data.info);var t=this.data.info,a=t.collectStatus,e=t.likeStatus,n=t.bottomStyle,o=t.status,i=this.data.dataInfo.isApply;if(null!=a){var s=this.selectComponent("#mpHtml");s&&(s.updateBottomBtn(n||6,o||1,0,i||0,a||0,e||0),console.log("updateBottomBtn","".concat(n||6,", 1, 0, 0, ").concat(a||0,", ").concat(e||0))),this.setData({loading:""})}},getPhoneNumber:function(t){var a=this;(0,s.phoneLogin)(t,(function(e){a.setData({useUin:e}),a[t.target.id]&&a[t.target.id]()}))}});
},{isPage:true,isComponent:true,currentFile:'pages/case/case_detail/index.js'});require("pages/case/case_detail/index.js");