$gwx_XC_85=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_85 || [];
function gz$gwx_XC_85_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_85_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_85_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_85_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[2,'||'],[[2,'!'],[[7],[3,'info']]],[[2,'>'],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]],[[2,'!='],[[6],[[7],[3,'info']],[3,'type']],[1,1]]])
Z([3,'新闻详情'])
Z([a,[3,'c-page '],[[2,'?:'],[[7],[3,'isShowTopMsg']],[1,'top-msg-page'],[1,'']]])
Z([[2,'&&'],[[7],[3,'info']],[[2,'!'],[[6],[[7],[3,'info']],[3,'source_id']]]])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,2]])
Z([3,'page-inner container'])
Z([3,'tarVideoPlay'])
Z([[6],[[7],[3,'info']],[3,'banner']])
Z([[6],[[7],[3,'info']],[3,'tencent_vid']])
Z([[6],[[7],[3,'info']],[3,'detail']])
Z([[2,'&&'],[[6],[[7],[3,'info']],[3,'activity_id']],[[2,'>'],[[6],[[7],[3,'info']],[3,'activity_id']],[1,0]]])
Z([[6],[[7],[3,'info']],[3,'activity_banner']])
Z([[6],[[7],[3,'info']],[3,'industry_banner']])
Z([[2,'?:'],[[2,'=='],[[6],[[7],[3,'info']],[3,'ib_status']],[1,1]],[[6],[[7],[3,'info']],[3,'industry_id']],[1,'']])
Z([[7],[3,'recList']])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'is_consult']],[1,1]])
Z([[6],[[7],[3,'consultDetail']],[3,'CampaignID']])
Z([3,'tarConsult'])
Z([[7],[3,'consultDetail']])
Z([[6],[[7],[3,'consultDetail']],[3,'tplId']])
Z([[6],[[7],[3,'consultDetail']],[3,'icon']])
Z([[6],[[7],[3,'info']],[3,'industry_id']])
Z([[6],[[7],[3,'consultDetail']],[3,'title']])
Z([[6],[[7],[3,'consultDetail']],[3,'enable_status']])
Z([[6],[[7],[3,'consultDetail']],[3,'consultType']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatQrCode']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatTitle']])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,1]])
Z(z[16])
Z(z[18])
Z(z[19])
Z(z[20])
Z(z[22])
Z(z[23])
Z(z[24])
Z(z[25])
Z(z[26])
Z([[2,'&&'],[[2,'!'],[[7],[3,'info']]],[[2,'!'],[[6],[[7],[3,'info']],[3,'source_id']]]])
Z([[2,'&&'],[[7],[3,'info']],[[2,'>'],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]])
Z([3,'onMpReady'])
Z([3,'handleTrack'])
Z([3,'handleTap'])
Z([[6],[[7],[3,'info']],[3,'contentH5']])
Z([3,'mpHtml'])
Z([[7],[3,'dataInfo']])
Z(z[16])
Z(z[18])
Z(z[19])
Z(z[20])
Z(z[22])
Z(z[23])
Z(z[24])
Z(z[25])
Z(z[26])
Z([[6],[[7],[3,'info']],[3,'id']])
Z([3,'shareMemberPick'])
Z([3,'hideSharePanel'])
Z([3,'shareInfoUpdate'])
Z([3,'showTopMsgHandler'])
Z([3,'switchSharePick'])
Z([[7],[3,'info']])
Z([[7],[3,'shareActiveInfo']])
Z([[7],[3,'shareCardId']])
Z([[7],[3,'showPanel']])
Z([[7],[3,'isShowOtherField']])
Z([3,'closeFormDialog'])
Z([3,'downloadUpdateInfoCallBack'])
Z([[7],[3,'otherFieldList']])
Z([[7],[3,'otherFieldInfo']])
Z([3,'dianyanBtnTpl'])
Z([3,'liveBtnTpl'])
Z(z[27])
Z([3,'signUpBtnTpl'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_85_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_85_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_85=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_85=true;
var x=['./pages/activity/news_detail/index.wxml'];d_[x[0]]={}
d_[x[0]]["dianyanBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_85_1()
var b=x[0]+':dianyanBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/news_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["liveBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_85_1()
var b=x[0]+':liveBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/news_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,71,e,s,gg)){oB.wxVkey=1
}
oB.wxXCkey=1
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["signUpBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_85_1()
var b=x[0]+':signUpBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/news_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_85_1()
var oJ4=_v()
_(r,oJ4)
if(_oz(z,0,e,s,gg)){oJ4.wxVkey=1
var hM4=_n('header')
_rz(z,hM4,'title',1,e,s,gg)
_(oJ4,hM4)
}
var oN4=_n('view')
_rz(z,oN4,'class',2,e,s,gg)
var cO4=_v()
_(oN4,cO4)
if(_oz(z,3,e,s,gg)){cO4.wxVkey=1
var aR4=_v()
_(cO4,aR4)
if(_oz(z,4,e,s,gg)){aR4.wxVkey=1
var tS4=_n('view')
_rz(z,tS4,'class',5,e,s,gg)
var oV4=_mz(z,'video-box',['bindvideoplay',6,'poster',1,'vid',2],[],e,s,gg)
_(tS4,oV4)
var xW4=_n('rich-view')
_rz(z,xW4,'content',9,e,s,gg)
_(tS4,xW4)
var eT4=_v()
_(tS4,eT4)
if(_oz(z,10,e,s,gg)){eT4.wxVkey=1
var oX4=_n('video-box')
_rz(z,oX4,'poster',11,e,s,gg)
_(eT4,oX4)
}
var fY4=_mz(z,'rec-box',['industryBanner',12,'industryId',1,'recList',2],[],e,s,gg)
_(tS4,fY4)
var bU4=_v()
_(tS4,bU4)
if(_oz(z,15,e,s,gg)){bU4.wxVkey=1
var cZ4=_mz(z,'consult-btn',['CampaignID',16,'bindtap',1,'consultDetail',2,'formId',3,'icon',4,'industryId',5,'label',6,'showConsult',7,'type',8,'wechatQrCode',9,'wechatTitle',10],[],e,s,gg)
_(bU4,cZ4)
}
eT4.wxXCkey=1
eT4.wxXCkey=3
bU4.wxXCkey=1
bU4.wxXCkey=3
_(aR4,tS4)
}
else if(_oz(z,27,e,s,gg)){aR4.wxVkey=2
}
var h14=_mz(z,'consult-btn',['CampaignID',28,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(cO4,h14)
var o24=_n('home-tips')
_(cO4,o24)
aR4.wxXCkey=1
aR4.wxXCkey=3
}
var oP4=_v()
_(oN4,oP4)
if(_oz(z,37,e,s,gg)){oP4.wxVkey=1
var c34=_n('loading')
_(oP4,c34)
}
var lQ4=_v()
_(oN4,lQ4)
if(_oz(z,38,e,s,gg)){lQ4.wxVkey=1
var o44=_n('view')
var l54=_mz(z,'mp-weixin',['lazyLoad',-1,'bind:ready',39,'bind:track',1,'bindtapEvent',2,'content',3,'id',4,'info',5],[],e,s,gg)
_(o44,l54)
var a64=_mz(z,'consult-btn',['CampaignID',45,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(o44,a64)
_(lQ4,o44)
}
cO4.wxXCkey=1
cO4.wxXCkey=3
oP4.wxXCkey=1
oP4.wxXCkey=3
lQ4.wxXCkey=1
lQ4.wxXCkey=3
_(r,oN4)
var fK4=_v()
_(r,fK4)
if(_oz(z,54,e,s,gg)){fK4.wxVkey=1
var t74=_mz(z,'share-pannel',['bind:shareMemberPick',55,'bindhideSharePanel',1,'bindshareInfo',2,'bindshowTopMsg',3,'bindswitchSharePick',4,'info',5,'shareActiveInfo',6,'shareCardId',7,'showPanel',8],[],e,s,gg)
_(fK4,t74)
}
var cL4=_v()
_(r,cL4)
if(_oz(z,64,e,s,gg)){cL4.wxVkey=1
var e84=_mz(z,'other-form',['bind:closeFormDialog',65,'bind:submitSuccess',1,'formList',2,'info',3],[],e,s,gg)
_(cL4,e84)
}
oJ4.wxXCkey=1
oJ4.wxXCkey=3
fK4.wxXCkey=1
fK4.wxXCkey=3
cL4.wxXCkey=1
cL4.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_85";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_85();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/activity/news_detail/index.wxml'] = [$gwx_XC_85, './pages/activity/news_detail/index.wxml'];else __wxAppCode__['pages/activity/news_detail/index.wxml'] = $gwx_XC_85( './pages/activity/news_detail/index.wxml' );
	;__wxRoute = "pages/activity/news_detail/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/activity/news_detail/index.js";define("pages/activity/news_detail/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/interopRequireDefault").default,a=require("../../../@babel/runtime/helpers/regeneratorRuntime"),e=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=require("../../../@babel/runtime/helpers/defineProperty"),o=t(require("../../../utils/tool")),i=require("../../../utils/phoneLogin"),s=getApp();Page({data:{contentID:"",shareImg:"",showPanel:!1,posterTitle:"",info:{},loadOver:!1,pageId:"",consultDetail:{},vsTime:void 0,vpTime:void 0,veTime:void 0,vEnd:!1,shareCardId:"",shareCardInfo:{},isShareCard:!0,isShareMyInfo:!0,otherFieldList:[],isShowOtherField:!1,otherFieldInfo:{},actionType:"",handleTapType:"",paramObj:{},subscribeId:0,dataInfo:{},submitRes:{},isAccount:!1},onLoad:function(t){var a=this;if(t.isAccount&&this.setData({isAccount:t.isAccount}),t.id){this.data.contentID=t.id;var e=t.employeePosition,n=t.wechatId,o=t.wechatworkId,i=t.employeePhone;s.QD.setSalesShareCardParams(t),this.setData({pageId:t.id,shareCardId:t.shareCardId,shareActiveInfo:{employeePosition:e,wechatId:n,wechatworkId:o,employeePhone:i}}),s.loginCallback().then((function(e){a.getData(t.id);var n=s.globalData.userInfo;a.setData({userInfo:n})}))}else if(t.scene){var d=decodeURIComponent(t.scene);s.loginCallback().then((function(t){s.API.uuidToParams(d,"news").then((function(t){if(console.log("uuidToParams res",t),0==t.code&&t.content.params){a.data.contentID=t.content.paramsObj.id;var e=t.content.paramsObj,n=e.employeePosition,o=e.wechatId,i=e.wechatworkId,d=e.employeePhone;s.QD.setSalesShareCardParams(t.content.paramsObj),a.setData({pageId:t.content.paramsObj.id,shareCardId:t.content.paramsObj.shareCardId,shareActiveInfo:{employeePosition:n,wechatId:o,wechatworkId:i,employeePhone:d}}),t.content.paramsObj.shareId&&(a.data.shareId=t.content.paramsObj.shareId),a.getData(t.content.paramsObj.id);var c=s.globalData.userInfo;a.setData({userInfo:c})}})).catch((function(t){console.log("uuidToParams err",t)}))}))}else wx.showToast({title:"数据加载失败",icon:"none"})},onReady:function(){},onShow:function(){this.data.actionType&&(this[this.data.actionType](),this.setData({actionType:""})),s.sa.pageShow({content_id:"news".concat(this.data.pageId),menu:"新闻详情页"})},onHide:function(){},onUnload:function(){this.data.vsTime&&(this.data.vEnd?s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!0,menu:s.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}):s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!1,menu:s.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}))},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return s.QD.action("shareContent",{ContentID:this.data.info.source_id>0?this.data.contentID.toString():"news".concat(this.data.contentID),menu:s.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||"",content_type:10}),s.tool.onShareAppMessage({path:"/pages/activity/news_detail/index",title:this.data.info.title,imageUrl:this.data.info.share_img,shareCardInfo:this.shareCardInfo,id:this.data.info.id,isShareCard:this.isShareCard,isShareMyInfo:this.data.isShareMyInfo})},getData:function(t){var a=this;s.API.getNewsDetail(t).then((function(t){if(0==t.code){a.setData(t.content);var e=t.content.info.source_id?t.content.info.source_id:a.data.pageId;a.data.contentID=e,a.consultDetail("content",t.content.info.data_id),s.QD.track("contentView",{ContentID:a.data.info.source_id>0?e.toString():"news".concat(e),menu:s.globalData.currentTab,name_of_page:t.content.info.title,CampaignID:a.data.info.CampaignID||"",NameOfCampaign:a.data.info.NameOfCampaign||"",content_type:10}),a.data.isAccount&&s.QD.track("official_account_template_message_clickthroughs",{ContentTheme:a.data.info.title,ChannelType:s.QD.getChannelType()}),a.setData({subscribeId:t.content.info.Subgroupname||0});var n=t.content.info;a.setData({dataInfo:{isReserve:0,isApply:0,isCollection:n.collectStatus,isPraise:n.likeStatus}}),a.onMpReady()}})),s.API.clickRecord({id:t,contentType:"news"}).then((function(t){0==t.code&&console.log("浏览+1")}))},catchtouchmove:function(){},consultDetail:function(t,a){var e=this;s.API.consultDetail(t,a).then((function(t){0==t.code&&e.setData({consultDetail:t.content})}))},bindCollect:function(){var t=this;s.sp.subscribePick(this.data.subscribeId,"collection");var a=this;1==a.data.info.collectStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的收藏？",success:function(t){t.confirm?s.API.addCollect({id:a.data.pageId,tag:8}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消收藏成功",icon:"none"}),a.setData({"info.collectStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):s.API.addCollect({id:a.data.pageId,tag:3}).then((function(e){0==e.code?e.content&&1==e.content.status&&(s.QD.action("contentCollect",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"news".concat(t.data.contentID),menu:s.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"收藏成功，可至“我的收藏”中查看",icon:"none"}),a.setData({"info.collectStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})}))},bindLike:function(){var t=this;s.sp.subscribePick(this.data.subscribeId,"praise");var a=this;1==a.data.info.likeStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的点赞？",success:function(t){t.confirm?s.API.likeRecord({id:a.data.pageId,contentType:"news"}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消点赞成功",icon:"none"}),a.setData({"info.likeStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):s.API.likeRecord({id:this.data.pageId,contentType:"news"}).then((function(e){0==e.code?e.content&&1==e.content.status&&(s.QD.action("contentLike",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"news".concat(t.data.contentID),menu:s.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"点赞成功",icon:"none"}),a.setData({"info.likeStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})}))},showSharePanel:function(){s.sp.subscribePick(this.data.subscribeId,"share"),this.setData({showPanel:!0})},hideSharePanel:function(){this.setData({showPanel:!1})},shareFriend:function(){},getSharePoster:function(){var t=this.data,a=t.pageId,e=t.info,n=e.banner,o=e.title,i=e.data_id;return s.jumpSharePoster({pageId:a,cover_img:n,type:"case",title:o,data_id:i})},getUserInfo:function(t){var a=this;wx.getUserProfile({desc:"用于完善用户信息",success:function(t){var e;console.log("获取用户信息 wx.getUserProfile",t);var o=t.userInfo;t.iv,t.encryptedData;wx.setStorageSync("userInfoNickname",o.nickName),wx.setStorageSync("userInfoAvatarUrl",o.avatarUrl),a.setData((n(e={},"userInfo.avatar",o.avatarUrl),n(e,"userInfo.nickname",o.nickName),e)),a.data.drawerPoster||a.getSharePoster()}})},handleDownload:function(){var t=this;return e(a().mark((function e(){var n,o;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s.sp.subscribePick(t.data.subscribeId,"download"),n=t.data.info.download_form,o=t.data.info.file_id,t.downLink="/pages/download/index?id=".concat(o),t.downloadCommonhandler(n,type,"",(function(){t._goForm(n,"download",encodeURIComponent(t.downLink))}));case 5:case"end":return a.stop()}}),e)})))()},_goForm:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";wx.navigateTo({url:"/pages/form/index/index?op_type=".concat(a,"&f_id=").concat(this.data.file_id,"&data_id=").concat(this.data.info.id,"&data_type=5&tplId=").concat(t,"&type=download&r_url=").concat(e)})},handleTrack:function(t){var a=this;console.log("handleTrack",t),"videoPlay"==t.detail.type?(this.setData({vsTime:new Date,vEnd:!1}),s.QD.track("start_play_video",{ContentID:s.QD.getLastContentId(),menu:s.globalData.currentTab,name_of_page:this.data.info.title})):"videoPause"==t.detail.type?(this.setData({vpTime:new Date}),setTimeout((function(){a.data.vEnd?s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!0,menu:s.globalData.currentTab,name_of_page:a.data.info.title}):s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!1,menu:s.globalData.currentTab,name_of_page:a.data.info.title})}),1e3)):"videoEnded"==t.detail.type&&this.setData({veTime:new Date,vEnd:!0})},handleTap:function(t){var n=this;return e(a().mark((function e(){var s;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(s=n).data.paramObj.type?!t&&s.data.paramObj.type&&(t=s.data.paramObj,s.data.paramObj={}):s.setData({paramObj:t}),(0,i.goLogin)("handleTap",t.detail.dataset.type).then((function(a){if(a){console.log("handleTap",t);var e=t.detail.dataset,i=e.type,d=e.param;s.data.handleTapType&&(i=s.data.handleTapType,s.data.handleTapType="");var c=null;try{c=JSON.parse(d)}catch(t){console.log("handleTap json parse error",t)}if(!c)return;switch(console.log("handleTap param",i,c),i){default:break;case"share":n.showSharePanel();break;case"consultation":c.consultCode&&wx.navigateTo({url:"/pages/form/index/index?tplId=".concat(c.consultCode,"&type=consult")});break;case"download":case"enroll":var r=n.data.info.download_form;if(5==c.bottomStyle?c.enrollCode&&(r=c.enrollCode):c.downloadCode&&(r=c.downloadCode),!r)return void console.log("no downloadCode");n.downLink="/pages/download/index?id=0&name=".concat(c.downloadLinkName,"&url=").concat(c.downloadLink,"&source_id=").concat(n.data.info.source_id),n.downloadCommonhandler(r,i,c,(function(){n._goForm(r,i,encodeURIComponent(n.downLink))}));break;case"recommend":var l=o.default.getDetailUrl(c.templateTypesId,c.dataId);l&&wx.navigateTo({url:"/"+l});break;case"collection":n.bindCollect();break;case"praise":n.bindLike()}}else;}));case 3:case"end":return a.stop()}}),e)})))()},downloadCommonhandler:function(t,n,o,i){var d=this;return e(a().mark((function e(){var c,r;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.API.checkFormSubmitDownload(5,d.data.pageId,3,t,wx.getStorageSync("qdVisitId"));case 2:if(c=a.sent,console.log("page case detail handleDownload submitRes",c),0!=c.code||1!=c.content){a.next=18;break}if(!o||5!=o.bottomStyle){a.next=9;break}wx.showToast({title:"您已完成表单的提交",icon:"none"}),a.next=16;break;case 9:if(wx.setStorageSync("_download_tpl_",t),!((r=c.otherFieldList||[])&&r.length>0)){a.next=15;break}return a.abrupt("return",d.setData({otherFieldList:r,isShowOtherField:!0,otherFieldInfo:{f_id:d.data.file_id,data_id:d.data.info.id,data_type:5,tplId:t,type:"download"}}));case 15:d.downloadUpdateInfoCallBack();case 16:a.next=20;break;case 18:s.setDownloadParams({contentDonwload:{ContentID:d.data.info.source_id>0?d.data.contentID.toString():"news".concat(d.data.contentID),menu:s.globalData.currentTab,name_of_page:d.data.info.title},record:{id:d.data.pageId,contentType:"news"}}),i(t,n);case 20:case"end":return a.stop()}}),e)})))()},downloadUpdateInfoCallBack:function(){this.closeFormDialog(),s.QD.action("contentDownload",{ContentID:this.data.info.source_id>0?this.data.contentID.toString():"news".concat(this.data.contentID),menu:s.globalData.currentTab,name_of_page:this.data.info.title}),s.API.downloadRecord({id:this.data.pageId,contentType:"news"}),this.closeFormDialog(),wx.navigateTo({url:this.downLink})},closeFormDialog:function(){this.setData({isShowOtherField:!1})},shareInfoUpdate:function(t){this.shareCardInfo=t.detail,this.isShareCard=!0,this.setData({shareCardInfo:t.detail,isShareCard:!0})},switchSharePick:function(t){var a=t.detail,e=a.activeInfo,n=a.isShareCard;this.shareCardInfo=e,this.isShareCard=n,this.setData({shareCardInfo:e,isShareCard:n})},showTopMsgHandler:function(t){this.setData({isShowTopMsg:t.detail})},shareMemberPick:function(t){this.setData({isShareMyInfo:t.detail})},onMpReady:function(){console.log("onMpReady",this.data.info);var t=this.data.info,a=t.collectStatus,e=t.likeStatus,n=t.bottomStyle;if(null!=a){var o=this.selectComponent("#mpHtml");o&&o.updateBottomBtn(n||6,1,0,0,a||0,e||0)}}});
},{isPage:true,isComponent:true,currentFile:'pages/activity/news_detail/index.js'});require("pages/activity/news_detail/index.js");