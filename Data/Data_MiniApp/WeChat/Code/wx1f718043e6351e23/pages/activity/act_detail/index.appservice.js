$gwx_XC_83=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_83 || [];
function gz$gwx_XC_83_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_83_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_83_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_83_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'活动详情'])
Z([a,[3,'c-page '],[[2,'?:'],[[7],[3,'isShowTopMsg']],[1,'top-msg-page'],[1,'']],[3,' '],[[2,'?:'],[[2,'&&'],[[7],[3,'info']],[[2,'>'],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]],[1,'pagemp'],[1,'']]])
Z([[2,'&&'],[[7],[3,'info']],[[2,'!'],[[6],[[7],[3,'info']],[3,'source_id']]]])
Z([3,'page-inner'])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'detail_type']],[1,1]])
Z([3,'container'])
Z([[6],[[7],[3,'info']],[3,'banner']])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'act_type']],[1,1]])
Z([3,'act-info-list'])
Z([[2,'||'],[[2,'||'],[[2,'||'],[[6],[[7],[3,'info']],[3,'date']],[[6],[[7],[3,'info']],[3,'start']]],[[6],[[7],[3,'info']],[3,'end']]],[[6],[[7],[3,'info']],[3,'week']]])
Z([3,'act-info act-info-date'])
Z([[6],[[7],[3,'info']],[3,'date']])
Z([[2,'||'],[[2,'&&'],[[6],[[7],[3,'info']],[3,'start']],[[6],[[7],[3,'info']],[3,'end']]],[[6],[[7],[3,'info']],[3,'week']]])
Z([[2,'&&'],[[2,'>'],[[6],[[7],[3,'info']],[3,'liveId']],[1,0]],[[2,'=='],[[6],[[7],[3,'info']],[3,'live_status']],[1,2]]])
Z([[2,'||'],[[6],[[7],[3,'info']],[3,'city']],[[6],[[7],[3,'info']],[3,'address']]])
Z([3,'act-info act-info-addr'])
Z([[6],[[7],[3,'info']],[3,'city']])
Z([[6],[[7],[3,'info']],[3,'address']])
Z([[6],[[7],[3,'info']],[3,'context']])
Z([[2,'||'],[[6],[[7],[3,'agenda']],[3,'length']],[[6],[[7],[3,'guest']],[3,'length']]])
Z([3,'section section-guest-agenda'])
Z([[6],[[7],[3,'guest']],[3,'length']])
Z([[6],[[7],[3,'agenda']],[3,'length']])
Z([[7],[3,'agenda']])
Z([[6],[[7],[3,'coop']],[3,'length']])
Z(z[18])
Z([[6],[[7],[3,'info']],[3,'industry_banner']])
Z([[2,'?:'],[[2,'=='],[[6],[[7],[3,'info']],[3,'ib_status']],[1,1]],[[6],[[7],[3,'info']],[3,'industry_id']],[1,'']])
Z([[7],[3,'rec']])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'status']],[1,1]])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'status']],[1,2]])
Z([[8],'info',[[7],[3,'info']]])
Z([3,'signUpBtnTpl'])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'status']],[1,3]])
Z(z[31])
Z([3,'dianyanBtnTpl'])
Z([[6],[[7],[3,'consultDetail']],[3,'CampaignID']])
Z([[7],[3,'consultDetail']])
Z([[6],[[7],[3,'consultDetail']],[3,'tplId']])
Z([[6],[[7],[3,'consultDetail']],[3,'icon']])
Z([[6],[[7],[3,'consultDetail']],[3,'title']])
Z([[6],[[7],[3,'consultDetail']],[3,'enable_status']])
Z([[6],[[7],[3,'consultDetail']],[3,'consultType']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatQrCode']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatTitle']])
Z([1,110])
Z([3,'detail-page-button'])
Z([[2,'||'],[[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,1]],[[2,'||'],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,1]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,2]]]],[[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,2]],[[2,'||'],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,1]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,2]]]]])
Z([[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,1]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,1]]])
Z([[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,1]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,2]]])
Z([[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,2]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,1]]])
Z([[2,'&&'],[[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,2]],[[2,'=='],[[6],[[7],[3,'info']],[3,'registStatus']],[1,2]]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'info']]],[[2,'!'],[[6],[[7],[3,'info']],[3,'source_id']]]])
Z([[2,'&&'],[[7],[3,'info']],[[2,'>'],[[6],[[7],[3,'info']],[3,'source_id']],[1,0]]])
Z([[7],[3,'liveurl']])
Z([3,'handleHtmlOnLoad'])
Z([3,'onMpReady'])
Z([3,'handleTrack'])
Z([3,'handleTap'])
Z([[6],[[7],[3,'info']],[3,'contentH5']])
Z([3,'mpHtml'])
Z([[7],[3,'dataInfo']])
Z(z[36])
Z(z[37])
Z(z[38])
Z(z[39])
Z(z[40])
Z(z[41])
Z(z[42])
Z(z[43])
Z(z[44])
Z([[6],[[7],[3,'info']],[3,'id']])
Z([3,'shareMemberPick'])
Z([3,'hideSharePanel'])
Z([3,'shareInfoUpdate'])
Z([3,'showTopMsgHandler'])
Z([3,'switchSharePick'])
Z([[7],[3,'info']])
Z([[7],[3,'shareActiveInfo']])
Z([[7],[3,'shareCardId']])
Z([[7],[3,'showPanel']])
Z([[7],[3,'isShowOtherField']])
Z([3,'closeFormDialog'])
Z([3,'downloadUpdateInfoCallBack'])
Z([[7],[3,'otherFieldList']])
Z([[7],[3,'otherFieldInfo']])
Z(z[35])
Z([3,'liveBtnTpl'])
Z([[2,'=='],[[6],[[7],[3,'info']],[3,'type']],[1,1]])
Z(z[32])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_83_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_83_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_83=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_83=true;
var x=['./pages/activity/act_detail/index.wxml'];d_[x[0]]={}
d_[x[0]]["dianyanBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_83_1()
var b=x[0]+':dianyanBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/act_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["liveBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_83_1()
var b=x[0]+':liveBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/act_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,88,e,s,gg)){oB.wxVkey=1
}
oB.wxXCkey=1
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["signUpBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_83_1()
var b=x[0]+':signUpBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/activity/act_detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_83_1()
var oR1=_n('header')
_rz(z,oR1,'title',0,e,s,gg)
_(r,oR1)
var xS1=_n('view')
_rz(z,xS1,'class',1,e,s,gg)
var oT1=_v()
_(xS1,oT1)
if(_oz(z,2,e,s,gg)){oT1.wxVkey=1
var hW1=_n('view')
_rz(z,hW1,'class',3,e,s,gg)
var oX1=_v()
_(hW1,oX1)
if(_oz(z,4,e,s,gg)){oX1.wxVkey=1
var l11=_n('view')
_rz(z,l11,'class',5,e,s,gg)
var t31=_n('video-box')
_rz(z,t31,'poster',6,e,s,gg)
_(l11,t31)
var a21=_v()
_(l11,a21)
if(_oz(z,7,e,s,gg)){a21.wxVkey=1
var e41=_n('view')
_rz(z,e41,'class',8,e,s,gg)
var b51=_v()
_(e41,b51)
if(_oz(z,9,e,s,gg)){b51.wxVkey=1
var x71=_n('view')
_rz(z,x71,'class',10,e,s,gg)
var o81=_v()
_(x71,o81)
if(_oz(z,11,e,s,gg)){o81.wxVkey=1
}
var f91=_v()
_(x71,f91)
if(_oz(z,12,e,s,gg)){f91.wxVkey=1
}
var c01=_v()
_(x71,c01)
if(_oz(z,13,e,s,gg)){c01.wxVkey=1
}
o81.wxXCkey=1
f91.wxXCkey=1
c01.wxXCkey=1
_(b51,x71)
}
var o61=_v()
_(e41,o61)
if(_oz(z,14,e,s,gg)){o61.wxVkey=1
var hA2=_n('view')
_rz(z,hA2,'class',15,e,s,gg)
var oB2=_v()
_(hA2,oB2)
if(_oz(z,16,e,s,gg)){oB2.wxVkey=1
}
var cC2=_v()
_(hA2,cC2)
if(_oz(z,17,e,s,gg)){cC2.wxVkey=1
}
oB2.wxXCkey=1
cC2.wxXCkey=1
_(o61,hA2)
}
b51.wxXCkey=1
o61.wxXCkey=1
_(a21,e41)
}
var oD2=_n('rich-view')
_rz(z,oD2,'content',18,e,s,gg)
_(l11,oD2)
a21.wxXCkey=1
_(oX1,l11)
var cY1=_v()
_(oX1,cY1)
if(_oz(z,19,e,s,gg)){cY1.wxVkey=1
var lE2=_n('view')
_rz(z,lE2,'class',20,e,s,gg)
var aF2=_v()
_(lE2,aF2)
if(_oz(z,21,e,s,gg)){aF2.wxVkey=1
}
var tG2=_v()
_(lE2,tG2)
if(_oz(z,22,e,s,gg)){tG2.wxVkey=1
var eH2=_n('agenda-list')
_rz(z,eH2,'agenda',23,e,s,gg)
_(tG2,eH2)
}
aF2.wxXCkey=1
tG2.wxXCkey=1
tG2.wxXCkey=3
_(cY1,lE2)
}
var oZ1=_v()
_(oX1,oZ1)
if(_oz(z,24,e,s,gg)){oZ1.wxVkey=1
}
cY1.wxXCkey=1
cY1.wxXCkey=3
oZ1.wxXCkey=1
}
else{oX1.wxVkey=2
var bI2=_n('rich-view')
_rz(z,bI2,'content',25,e,s,gg)
_(oX1,bI2)
}
var oJ2=_mz(z,'rec-box',['industryBanner',26,'industryId',1,'recList',2],[],e,s,gg)
_(hW1,oJ2)
var xK2=_n('bottom-bar')
var oL2=_v()
_(xK2,oL2)
if(_oz(z,29,e,s,gg)){oL2.wxVkey=1
}
else if(_oz(z,30,e,s,gg)){oL2.wxVkey=2
var fM2=_v()
_(oL2,fM2)
var cN2=_oz(z,32,e,s,gg)
var hO2=_gd(x[0],cN2,e_,d_)
if(hO2){
var oP2=_1z(z,31,e,s,gg) || {}
var cur_globalf=gg.f
fM2.wxXCkey=3
hO2(oP2,oP2,fM2,gg)
gg.f=cur_globalf
}
else _w(cN2,x[0],2,2621)
}
else if(_oz(z,33,e,s,gg)){oL2.wxVkey=3
var cQ2=_v()
_(oL2,cQ2)
var oR2=_oz(z,35,e,s,gg)
var lS2=_gd(x[0],oR2,e_,d_)
if(lS2){
var aT2=_1z(z,34,e,s,gg) || {}
var cur_globalf=gg.f
cQ2.wxXCkey=3
lS2(aT2,aT2,cQ2,gg)
gg.f=cur_globalf
}
else _w(oR2,x[0],2,2713)
}
oL2.wxXCkey=1
_(hW1,xK2)
var tU2=_mz(z,'consult-btn',['CampaignID',36,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(hW1,tU2)
var eV2=_n('home-tips')
_rz(z,eV2,'bottom',45,e,s,gg)
_(hW1,eV2)
var bW2=_n('view')
_rz(z,bW2,'class',46,e,s,gg)
var oX2=_v()
_(bW2,oX2)
if(_oz(z,47,e,s,gg)){oX2.wxVkey=1
}
var xY2=_v()
_(bW2,xY2)
if(_oz(z,48,e,s,gg)){xY2.wxVkey=1
}
var oZ2=_v()
_(bW2,oZ2)
if(_oz(z,49,e,s,gg)){oZ2.wxVkey=1
}
var f12=_v()
_(bW2,f12)
if(_oz(z,50,e,s,gg)){f12.wxVkey=1
}
var c22=_v()
_(bW2,c22)
if(_oz(z,51,e,s,gg)){c22.wxVkey=1
}
oX2.wxXCkey=1
xY2.wxXCkey=1
oZ2.wxXCkey=1
f12.wxXCkey=1
c22.wxXCkey=1
_(hW1,bW2)
oX1.wxXCkey=1
oX1.wxXCkey=3
oX1.wxXCkey=3
_(oT1,hW1)
}
var fU1=_v()
_(xS1,fU1)
if(_oz(z,52,e,s,gg)){fU1.wxVkey=1
var h32=_n('loading')
_(fU1,h32)
}
var cV1=_v()
_(xS1,cV1)
if(_oz(z,53,e,s,gg)){cV1.wxVkey=1
var o42=_n('view')
var c52=_v()
_(o42,c52)
if(_oz(z,54,e,s,gg)){c52.wxVkey=1
}
var o62=_mz(z,'mp-weixin',['lazyLoad',-1,'bind:htmlOnLoad',55,'bind:ready',1,'bind:track',2,'bindtapEvent',3,'content',4,'id',5,'info',6],[],e,s,gg)
_(o42,o62)
var l72=_mz(z,'consult-btn',['CampaignID',62,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(o42,l72)
c52.wxXCkey=1
_(cV1,o42)
}
oT1.wxXCkey=1
oT1.wxXCkey=3
fU1.wxXCkey=1
fU1.wxXCkey=3
cV1.wxXCkey=1
cV1.wxXCkey=3
_(r,xS1)
var eP1=_v()
_(r,eP1)
if(_oz(z,71,e,s,gg)){eP1.wxVkey=1
var a82=_mz(z,'share-pannel',['bind:shareMemberPick',72,'bindhideSharePanel',1,'bindshareInfo',2,'bindshowTopMsg',3,'bindswitchSharePick',4,'info',5,'shareActiveInfo',6,'shareCardId',7,'showPanel',8],[],e,s,gg)
_(eP1,a82)
}
var bQ1=_v()
_(r,bQ1)
if(_oz(z,81,e,s,gg)){bQ1.wxVkey=1
var t92=_mz(z,'other-form',['bind:closeFormDialog',82,'bind:submitSuccess',1,'formList',2,'info',3],[],e,s,gg)
_(bQ1,t92)
}
eP1.wxXCkey=1
eP1.wxXCkey=3
bQ1.wxXCkey=1
bQ1.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_83";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_83();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/activity/act_detail/index.wxml'] = [$gwx_XC_83, './pages/activity/act_detail/index.wxml'];else __wxAppCode__['pages/activity/act_detail/index.wxml'] = $gwx_XC_83( './pages/activity/act_detail/index.wxml' );
	;__wxRoute = "pages/activity/act_detail/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/activity/act_detail/index.js";define("pages/activity/act_detail/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/interopRequireDefault").default,a=require("../../../@babel/runtime/helpers/defineProperty"),e=require("../../../@babel/runtime/helpers/objectSpread2"),n=require("../../../@babel/runtime/helpers/regeneratorRuntime"),o=require("../../../@babel/runtime/helpers/asyncToGenerator"),i=require("../../../utils/phoneLogin"),s=t(require("../../../utils/tool")),r=getApp();Page({data:{contentID:"",getDownList:{},pageId:"",posterTitle:"",showPanel:!1,info:{},loadOver:!1,shareImg:"",consultDetail:{},vsTime:void 0,vpTime:void 0,veTime:void 0,vEnd:!1,shareCardId:"",shareCardInfo:{},isShareCard:!0,isShareMyInfo:!0,otherFieldList:[],isShowOtherField:!1,otherFieldInfo:{},liveurl:"",cover:"",dataInfo:{},actionType:"",handleTapType:"",paramObj:{},isAccount:!1},onLoad:function(t){var a=this;if(console.log("options",t),t.isAccount&&this.setData({isAccount:t.isAccount}),t.id){this.data.contentID=t.id;var e=t.employeePosition,n=t.wechatId,o=t.wechatworkId,i=t.employeePhone;r.QD.setSalesShareCardParams(t),this.setData({pageId:t.id,shareCardId:t.shareCardId,shareActiveInfo:{employeePosition:e,wechatId:n,wechatworkId:o,employeePhone:i}}),r.loginCallback().then((function(e){a.getData(t.id)}))}else if(t.scene){var s=decodeURIComponent(t.scene);r.loginCallback().then((function(){r.API.uuidToParams(s,"activity").then((function(t){if(console.log("uuidToParams res",t),0==t.code&&t.content.params){var e=t.content.paramsObj,n=e.employeePosition,o=e.wechatId,i=e.wechatworkId,s=e.employeePhone;a.data.contentID=t.content.paramsObj.id,r.QD.setSalesShareCardParams(t.content.paramsObj),a.setData({pageId:t.content.paramsObj.id,shareCardId:t.content.paramsObj.shareCardId,shareActiveInfo:{employeePosition:n,wechatId:o,wechatworkId:i,employeePhone:s}}),t.content.paramsObj.shareId&&(a.data.shareId=t.content.paramsObj.shareId),a.getData(t.content.paramsObj.id)}})).catch((function(t){console.log("uuidToParams err",t)}))}))}else wx.showToast({title:"数据加载失败",icon:"none"})},onReady:function(){},onShow:function(){this.data.loadOver&&(this.data.actionType&&(this[this.data.actionType](),this.setData({actionType:""})),this.getData(this.data.pageId))},onHide:function(){},onUnload:function(){this.data.vsTime&&(this.data.vEnd?r.QD.track("WatchingVideo",{ContentID:r.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!0,menu:r.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}):r.QD.track("WatchingVideo",{ContentID:r.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!1,menu:r.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}))},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){var t={ContentID:this.data.info.source_id>0?this.data.contentID.toString():"activity".concat(this.data.contentID),menu:r.globalData.currentTab,name_of_page:this.data.info.title,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||"",content_type:7};return this.data.shareId&&(t.mp_shareID=this.data.shareId),r.QD.action("shareContent",t),r.tool.onShareAppMessage({path:"/pages/activity/act_detail/index",title:this.data.info.title,imageUrl:this.data.info.share_img,shareCardInfo:this.shareCardInfo,id:this.data.info.id,isShareCard:this.isShareCard,isShareMyInfo:this.data.isShareMyInfo})},catchtouchmove:function(){},consultDetail:function(t,a){var e=this;r.API.consultDetail(t,a).then((function(t){0==t.code&&e.setData({consultDetail:t.content})}))},onMpReady:function(){console.log("加载完成");var t=this.selectComponent("#mpHtml");console.log(this.data.info),console.log(this.data.info.bottomStyle+"----"+this.data.info.liveStatus+"----"+(2===this.data.info.reserve_status?1:0)+"---"+(2===this.data.info.signup_status?1:0)),t.updateBottomBtn(this.data.info.bottomStyle,4===this.data.info.liveStatus?3:this.data.info.liveStatus,2===this.data.info.reserve_status?1:0,2===this.data.info.form_is_submit?1:0)},handleHtmlOnLoad:function(t){console.log(t),this.setData({liveurl:t.detail.url,cover:t.detail.cover}),console.log(1111111111)},getData:function(t){var a=this,e=r.globalData.userInfo;this.setData({userInfo:e}),r.API.getActivityDetail(t).then(function(){var t=o(n().mark((function t(e){var o,i,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.code){t.next=18;break}return t.next=3,r.API.getServeTime();case 3:(o=t.sent)>e.content.info.endTime?e.content.info.liveStatus=3:o<e.content.info.startTime?e.content.info.liveStatus=1:e.content.info.liveStatus=2,a.setData(e.content),a.consultDetail("content",e.content.info.data_id),a.data.loadOver&&setTimeout((function(){console.log("update");var t=a.selectComponent("#mpHtml");t.updateBottomBtn(a.data.info.bottomStyle,a.data.info.liveStatus,2===a.data.info.reserve_status?1:0,2===a.data.info.form_is_submit?1:0),t.resetCreated({isReserve:2===e.content.info.reserve_status?1:0,isApply:2===e.content.info.form_is_submit?1:0,isCollection:e.content.info.collectStatus,isPraise:e.content.info.likeStatus})}),500),a.setData({dataInfo:{isReserve:2===e.content.info.reserve_status?1:0,isApply:2===e.content.info.form_is_submit?1:0,isCollection:e.content.info.collectStatus,isPraise:e.content.info.likeStatus}}),a.data.loadOver=!0,i=e.content.info.source_id?e.content.info.source_id:a.data.pageId,a.data.contentID=i,s={ContentID:a.data.info.source_id>0?i.toString():"activity".concat(i),menu:r.globalData.currentTab,name_of_page:a.data.info.title,CampaignID:a.data.info.CampaignID||"",NameOfCampaign:a.data.info.NameOfCampaign||"",content_type:7},a.data.shareId&&(s.mp_shareID=a.data.shareId),r.QD.track("contentView",s),a.data.isAccount&&r.QD.track("official_account_template_message_clickthroughs",{ContentTheme:a.data.info.title,ChannelType:r.QD.getChannelType()}),t.next=19;break;case 18:a.setData(e.content);case 19:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()),r.API.clickRecord({id:t,contentType:"activity"}).then((function(t){0==t.code&&console.log("浏览+1")}))},goToMiniProgram:function(t,a){var e=this,n=this,o=this.data.info;o.appid,o.path,o.live_url;a||(a=this.data.info.liveType),this.livePlayControl({detail:function(o){if(o){if(e.onVideo({type:"play",detail:{type:""}}),1===a)return wx.showModal({title:"复制到腾讯APP观看",content:t,confirmText:"复制",success:function(t){t.confirm&&n.copyMeetingId()}});2===a&&wx.navigateTo({url:"/pages/common/webview/index?url=".concat(encodeURIComponent(t))}),3===a&&wx.navigateTo({url:"/pages/common/webview/index?url=".concat(encodeURIComponent(t))})}},target:{dataset:{type:2}}},!1)},livePlayControl:function(t){var a=arguments,i=this;return o(n().mark((function o(){var s,d,c,l,u,f,h,p;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=!(a.length>1&&void 0!==a[1])||a[1],d=t.detail,c=t.target.dataset.type,l=i.data,u=l.info,f=l.liveStatus,h=l.liveType,1!=+f||4!=+h){n.next=6;break}return n.abrupt("return",d(!1));case 6:if(!i.livePlayControlStatusHanlder(d)){n.next=9;break}return n.abrupt("return",i.statisticsHandler(c,s));case 9:return u.tpl_id||d(!0),n.next=12,r.API.checkFormSubmitDownload(5,i.data.info.id,6,u.tpl_id,wx.getStorageSync("qdVisitId"));case 12:if(p=n.sent,console.log("submitRes",p),0===p.code&&1==p.content){n.next=16;break}return n.abrupt("return",i.goForm());case 16:2==+f&&i.setData({info:e({zhibo_status:2},u)}),3!=+f&&4!=+f||i.setData({info:e({huikan_status:2},u)}),i.setData({dataInfo:{isReserve:2===i.data.info.reserve_status?1:0,isApply:2===i.data.info.form_is_submit?1:0,isCollection:i.data.info.collectStatus,isPraise:i.data.info.likeStatus}}),d(!0),i.statisticsHandler(c,s);case 21:case"end":return n.stop()}}),o)})))()},statisticsHandler:function(t,a){},livePlayControlStatusHanlder:function(t){var a=this.data.info,e=a.zhibo_status,n=a.huikan_status,o=a.liveStatus;return console.log("🚀 ~ file: index.js ~ line 350 ~ livePlayControlStatusHanlder ~ zhibo_status",e),(2==+o&&2==+e||(3==+o||4==+o)&&2==+n)&&(t(!0),!0)},tarLivePlay:function(){},bindCollect:function(){var t=this,a=this;r.QD.track("official_button_click",{button_name:"收藏",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:r.QD.getChannelType()}),(0,i.goLogin)("bindCollect").then((function(e){e&&(1==a.data.info.collectStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的收藏？",success:function(t){t.confirm&&r.API.addCollect({id:a.data.pageId,tag:1}).then((function(t){0==t.code?(wx.showToast({title:"取消收藏成功",icon:"none"}),a.setData({"info.collectStatus":0})):wx.showToast({title:"操作失败请重试",icon:"none"})}))}}):r.API.addCollect({id:a.data.pageId,tag:1}).then((function(e){0==e.code?(r.QD.action("contentCollect",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"activity".concat(t.data.contentID),menu:r.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"收藏成功，可至“我的收藏”中查看",icon:"none"}),a.setData({"info.collectStatus":1})):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},bindLike:function(){var t=this,a=this;r.QD.track("official_button_click",{button_name:"点赞",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:r.QD.getChannelType()}),(0,i.goLogin)("bindLike").then((function(e){e&&(1==a.data.info.likeStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的点赞？",success:function(t){t.confirm&&r.API.likeRecord({id:a.data.pageId,contentType:"activity"}).then((function(t){0==t.code?(wx.showToast({title:"取消点赞成功",icon:"none"}),a.setData({"info.likeStatus":0})):wx.showToast({title:"操作失败请重试",icon:"none"})}))}}):r.API.likeRecord({id:t.data.pageId,contentType:"activity"}).then((function(e){0==e.code?(r.QD.action("contentLike",{ContentID:t.data.info.source_id>0?t.data.contentID.toString():"activity".concat(t.data.contentID),menu:r.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"点赞成功",icon:"none"}),a.setData({"info.likeStatus":1})):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},showSharePanel:function(){var t=this;r.QD.track("official_button_click",{button_name:"分享",button_position:"移动端底部",ContentTheme:this.data.info.title,ChannelType:r.QD.getChannelType()}),(0,i.goLogin)("showSharePanel").then((function(a){a&&t.setData({showPanel:!0})}))},hideSharePanel:function(){this.setData({showPanel:!1})},shareFriend:function(){},getSharePoster:function(){var t=this.data,a=t.pageId,e=t.info,n=e.banner,o=e.title,i=e.data_id;return r.jumpSharePoster({pageId:a,cover_img:n,type:"case",title:o,data_id:i})},getUserInfo:function(t){var e=this;wx.getUserProfile({desc:"用于完善用户信息",success:function(t){var n;console.log("获取用户信息 wx.getUserProfile",t);var o=t.userInfo;t.iv,t.encryptedData;wx.setStorageSync("userInfoNickname",o.nickName),wx.setStorageSync("userInfoAvatarUrl",o.avatarUrl),e.setData((a(n={},"userInfo.avatar",o.avatarUrl),a(n,"userInfo.nickname",o.nickName),n)),e.data.drawerPoster||e.getSharePoster()}})},_checkCanhui:function(){return 2==this.data.info.canhui_status},_changeActStatus:function(t){var a=this,e=this.data.info.campaignId;wx.showLoading({title:""}),r.API.refreshOrderStatus({campaignId:e,tag:t,actId:this.data.pageId}).then((function(e){wx.hideLoading(),console.log("_changeActStatus res",e),0==e.code&&(1==t?(a.setData({"info.signup_status":2}),wx.showToast({title:"报名成功",icon:"none"}),setTimeout((function(){console.log("update");var t=a.selectComponent("#mpHtml");t.updateBottomBtn(a.data.info.bottomStyle,a.data.info.liveStatus,2===a.data.info.reserve_status?1:0,1),a.setData({dataInfo:{isReserve:2===a.data.info.reserve_status?1:0,isApply:1,isCollection:a.data.info.collectStatus,isPraise:a.data.info.likeStatus}}),t.resetCreated({isReserve:2===a.data.info.reserve_status?1:0,isApply:1,isCollection:a.data.info.collectStatus,isPraise:a.data.info.likeStatus})}),200)):2==t&&(a.setData({"info.reserve_status":2}),wx.showToast({title:"预约成功",icon:"none"})))}))},_goActForm:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.data.info.siteId;t||(t=r.globalData.config.formTpl.reg),this._goForm(t,a,n,e)},_goForm:function(t,a,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0;console.log("mark 111",this.data.id),wx.navigateTo({url:"/pages/form/index/index?op_id=".concat(this.data.info.data_id,"&op_type=").concat(o,"&type=act&data_type=").concat(a,"&f_id=").concat(this.data.f_id,"&actId=").concat(this.data.pageId,"&data_id=").concat(e,"&tplId=").concat(t,"&r_url=").concat(n)})},handleSignUp:function(){var t=this;return o(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.QD.track("official_button_click",{button_name:"立即预约",button_position:"移动端底部",ContentTheme:t.data.info.title,ChannelType:r.QD.getChannelType()}),(0,i.goLogin)("handleSignUp").then(function(){var a=o(n().mark((function a(e){var o,i,s,d;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=11;break}return o=t.data.info,i=o.id,s=o.tpl_id,a.next=4,r.API.checkFormSubmitDownload(5,i,6,s,wx.getStorageSync("qdVisitId"));case 4:if(!(d=a.sent)||1!=d.content){a.next=10;break}return t.setData({"info.signup_status":2}),wx.showToast({title:"报名成功",icon:"none"}),setTimeout((function(){console.log("update");var a=t.selectComponent("#mpHtml");a.updateBottomBtn(t.data.info.bottomStyle,t.data.info.liveStatus,2===t.data.info.reserve_status?1:0,1),t.setData({dataInfo:{isReserve:2===t.data.info.reserve_status?1:0,isApply:1,isCollection:t.data.info.collectStatus,isPraise:t.data.info.likeStatus}}),a.resetCreated({isReserve:2===t.data.info.reserve_status?1:0,isApply:1,isCollection:t.data.info.collectStatus,isPraise:t.data.info.likeStatus})}),200),a.abrupt("return");case 10:t.waitStatusRefresh=function(){t.setData({"info.canhui_status":2,"info.signup_status":2})},t._goActForm(t.data.info.tpl_id,1);case 11:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})))()},handleSiteReserve:function(t){var a=this;(0,i.goLogin)("handleSiteReserve").then((function(t){if(t){var e=a;if(2===a.data.info.reserve_status)return;wx.requestSubscribeMessage({tmplIds:r.globalData.activityTemplateIds,complete:function(t){var a=+("accept"===t[r.globalData.activityTemplateIds[0]]);e.reserveHandler(a)}})}}))},reserveHandler:function(t){var a=this;return o(n().mark((function o(){var i,s,d,c;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.data.info,s=i.id,d=i.tpl_id,n.next=3,r.API.checkFormSubmitDownload(5,s,6,d,wx.getStorageSync("qdVisitId"),t);case 3:if(!(c=n.sent)||!c.content){n.next=8;break}return a.setData({info:e(e({},a.data.info),{},{reserve_status:2})}),setTimeout((function(){wx.showToast({title:"预约成功",icon:"none"}),console.log("update"),a.selectComponent("#mpHtml").updateBottomBtn(a.data.info.bottomStyle,a.data.info.liveStatus,1,2===a.data.info.signup_status?1:0),a.setData({dataInfo:{isReserve:1,isApply:2===a.data.info.form_is_submit?1:0,isCollection:a.data.info.collectStatus,isPraise:a.data.info.likeStatus}})}),200),n.abrupt("return");case 8:a.goForm(t);case 9:case"end":return n.stop()}}),o)})))()},goForm:function(t){var a=this,e=this.data,n=(e.id,e.info),o=n.status;this.waitStatusRefresh=function(){a.setData({"info.form_status":2})},wx.navigateTo({url:"/pages/form/index/index?sendMsg=".concat(t,"&op_id=").concat(n.data_id,"&f_id=").concat(this.data.f_id,"&data_id=").concat(this.data.pageId,"&tplId=").concat(n.tpl_id,"&type=meet_reserve&data_type=").concat(o,"&actId=").concat(this.data.pageId)})},handleDownload:function(){var t=this;return o(n().mark((function a(){var e,o;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=t.data.info.download_form,o=t.data.info.download_id,t.downLink="/pages/download/index?id=".concat(o),"",t.downloadCommonhandler(e,"","",(function(){t._goDownloadForm(e,encodeURIComponent(t.downLink))}));case 5:case"end":return a.stop()}}),a)})))()},_goDownloadForm:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";wx.navigateTo({url:"/pages/form/index/index?op_type=download&f_id=".concat(this.data.info.download_id,"&data_id=").concat(this.data.pageId,"&data_type=1&tplId=").concat(t,"&type=download&r_url=").concat(a)})},onVideo:function(t){var a=this;return o(n().mark((function e(){var o,i,s,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.data.info,i=o.id,s=o.tpl_id,e.t0=t.type,e.next="play"===e.t0?4:"pause"===e.t0?11:"ended"===e.t0?13:15;break;case 4:if(a.data.vsTime){e.next=9;break}return e.next=7,r.API.checkFormSubmitDownload(5,i,6,s,wx.getStorageSync("qdVisitId"));case 7:(d=e.sent)&&d.content;case 9:return t.detail.type="videoPlay",e.abrupt("break",15);case 11:return t.detail.type="videoPause",e.abrupt("break",15);case 13:return t.detail.type="videoEnded",e.abrupt("break",15);case 15:a.handleTrack(t);case 16:case"end":return e.stop()}}),e)})))()},handleTrack:function(t){var a=this;console.log("handleTrack",t),"videoPlay"==t.detail.type?(this.setData({vsTime:new Date,vEnd:!1}),r.QD.track("start_play_video",{ContentID:r.QD.getLastContentId(),menu:r.globalData.currentTab,name_of_page:this.data.info.title})):"videoPause"==t.detail.type?(this.setData({vpTime:new Date}),setTimeout((function(){a.data.vEnd?r.QD.track("WatchingVideo",{ContentID:r.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!0,menu:r.globalData.currentTab,name_of_page:a.data.info.title}):r.QD.track("WatchingVideo",{ContentID:r.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!1,menu:r.globalData.currentTab,name_of_page:a.data.info.title})}),1e3)):"videoEnded"==t.detail.type&&this.setData({veTime:new Date,vEnd:!0})},handleTap:function(t){var a=this;return o(n().mark((function e(){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleTap",t),(o=a).data.paramObj.type?!t&&o.data.paramObj.type&&(t=o.data.paramObj,o.data.paramObj={}):o.setData({paramObj:t}),(0,i.goLogin)("handleTap",t.detail.dataset.type).then((function(e){if(e){var n=t.detail.dataset,i=n.type,d=n.param;o.data.handleTapType&&(i=o.data.handleTapType,o.data.handleTapType="");var c=null;try{c=JSON.parse(d)}catch(t){console.log("handleTap json parse error",t)}if(!c)return;switch(console.log("handleTap param",i,c),i){default:break;case"share":a.showSharePanel();break;case"consultation":c.consultCode&&wx.navigateTo({url:"/pages/form/index/index?tplId=".concat(c.consultCode,"&type=consult")});break;case"download":case"enroll":var l=a.data.info.download_form;if(5==c.bottomStyle?c.enrollCode&&(l=c.enrollCode):c.downloadCode&&(l=c.downloadCode),!l)return void console.log("no downloadCode");a.downLink="/pages/download/index?id=0&name=".concat(c.downloadLinkName,"&url=").concat(c.downloadLink,"&source_id=").concat(a.data.info.source_id),a.downloadCommonhandler(l,i,c,(function(){a._goForm(l,i,encodeURIComponent(a.downLink))}));break;case"collection":a.bindCollect();break;case"praise":a.bindLike();break;case"reserve":a.handleSiteReserve();break;case"downloadContent":if(r.QD.track("official_button_click",{button_name:"下载资料",button_position:"移动端底部",ContentTheme:a.data.info.title,ChannelType:r.QD.getChannelType()}),c.contentArray.length>1)return void wx.navigateTo({url:"/pages/online/downlist/index?id="+a.data.contentID});r.API.downidtoid(c.contentArray[0].id).then((function(t){var a=s.default.getDetailUrl(c.contentArray[0].typeId,t.content);a&&wx.navigateTo({url:"/"+a})})),console.log(c.contentArray);break;case"apply":a.handleSignUp();break;case"recommend":var u=s.default.getDetailUrl(c.templateTypesId,c.dataId);u&&wx.navigateTo({url:"/"+u});break;case"thirdPlay":a.goToMiniProgram(c.playUrl,c.playType)}}else;}));case 4:case"end":return e.stop()}}),e)})))()},downloadCommonhandler:function(t,a,e,i){var s=this;return o(n().mark((function o(){var d,c;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.API.checkFormSubmitDownload(1,s.data.pageId,6,t,wx.getStorageSync("qdVisitId"));case 2:if(d=n.sent,console.log("page case detail handleDownload submitRes",d),0!=d.code||1!=d.content){n.next=18;break}if(!e||5!=e.bottomStyle){n.next=9;break}wx.showToast({title:"您已完成表单的提交",icon:"none"}),n.next=16;break;case 9:if(wx.setStorageSync("_download_tpl_",t),!((c=d.otherFieldList||[])&&c.length>0)){n.next=15;break}return n.abrupt("return",s.setData({otherFieldList:c,isShowOtherField:!0,otherFieldInfo:{f_id:s.data.file_id,data_id:s.data.info.id,data_type:1,tplId:t,type:"download"}}));case 15:s.downloadUpdateInfoCallBack();case 16:n.next=20;break;case 18:r.setDownloadParams({contentDonwload:{ContentID:s.data.info.source_id>0?s.data.contentID.toString():"activity".concat(s.data.contentID),menu:r.globalData.currentTab,name_of_page:s.data.info.title},record:{id:s.data.pageId,contentType:"activity"}}),i(t,a);case 20:case"end":return n.stop()}}),o)})))()},downloadUpdateInfoCallBack:function(){this.closeFormDialog(),r.QD.action("contentDownload",{ContentID:this.data.info.source_id>0?this.data.contentID.toString():"activity".concat(this.data.contentID),menu:r.globalData.currentTab,name_of_page:this.data.info.title}),r.API.downloadRecord({id:this.data.pageId,contentType:"activity"}),this.closeFormDialog(),wx.navigateTo({url:this.downLink})},closeFormDialog:function(){this.setData({isShowOtherField:!1})},shareInfoUpdate:function(t){this.shareCardInfo=t.detail,this.isShareCard=!0,this.setData({shareCardInfo:t.detail,isShareCard:!0})},switchSharePick:function(t){var a=t.detail,e=a.activeInfo,n=a.isShareCard;this.shareCardInfo=e,this.isShareCard=n,this.setData({shareCardInfo:e,isShareCard:n})},showTopMsgHandler:function(t){this.setData({isShowTopMsg:t.detail})},shareMemberPick:function(t){this.setData({isShareMyInfo:t.detail})}});
},{isPage:true,isComponent:true,currentFile:'pages/activity/act_detail/index.js'});require("pages/activity/act_detail/index.js");