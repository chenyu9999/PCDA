$gwx_XC_88=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_88 || [];
function gz$gwx_XC_88_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_88_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_88_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_88_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'c-page'])
Z([1,false])
Z(z[1])
Z([[2,'?:'],[[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'title']],[[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'title']],[[6],[[7],[3,'info']],[3,'title']]])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'ready']],[[2,'!'],[[6],[[7],[3,'info']],[3,'source_id']]]],[[2,'!'],[[7],[3,'loadError']]]])
Z([3,'brand'])
Z([[2,'>'],[[6],[[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'thumbnail']],[3,'length']],[1,0]])
Z([[2,'>'],[[6],[[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'video']],[3,'length']],[1,0]])
Z([3,'tapVideo'])
Z([3,'bindUploadVideoData'])
Z([[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'cover']])
Z([[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'videoType']])
Z([[6],[[6],[[7],[3,'brandData']],[3,'info']],[3,'video']])
Z([[6],[[7],[3,'brandData']],[3,'column']])
Z([3,'index'])
Z([[2,'=='],[[7],[3,'currentTab']],[[7],[3,'index']]])
Z([3,'brand-list'])
Z([[6],[[7],[3,'list']],[[7],[3,'currentTab']]])
Z(z[14])
Z([3,'bindTarBrandItem'])
Z([[7],[3,'item']])
Z(z[20])
Z([[2,'!='],[[7],[3,'pageStatus']],[1,2]])
Z([[7],[3,'pageLoad']])
Z([[2,'<'],[[6],[[7],[3,'list']],[3,'length']],[1,1]])
Z([[2,'&&'],[[7],[3,'ready']],[[6],[[7],[3,'info']],[3,'source_id']]])
Z([3,'onMpReady'])
Z([3,'handleTrack'])
Z([3,'handleTap'])
Z([[6],[[7],[3,'info']],[3,'contentH5']])
Z([3,'mpHtml'])
Z([[7],[3,'dataInfo']])
Z([[2,'!'],[[7],[3,'ready']]])
Z([[7],[3,'loadError']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_88_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_88_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_88=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_88=true;
var x=['./pages/brand/index/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_88_1()
var x35=_n('view')
_rz(z,x35,'class',0,e,s,gg)
var o85=_mz(z,'header',['iconbar',1,'showSearch',1,'title',2],[],e,s,gg)
_(x35,o85)
var o45=_v()
_(x35,o45)
if(_oz(z,4,e,s,gg)){o45.wxVkey=1
var c95=_n('view')
_rz(z,c95,'class',5,e,s,gg)
var o05=_v()
_(c95,o05)
if(_oz(z,6,e,s,gg)){o05.wxVkey=1
}
var lA6=_v()
_(c95,lA6)
if(_oz(z,7,e,s,gg)){lA6.wxVkey=1
var aB6=_mz(z,'video-player',['bindclickplay',8,'binduploadData',1,'poster',2,'type',3,'vid',4],[],e,s,gg)
_(lA6,aB6)
}
var tC6=_v()
_(c95,tC6)
var eD6=function(oF6,bE6,xG6,gg){
var fI6=_v()
_(xG6,fI6)
if(_oz(z,15,oF6,bE6,gg)){fI6.wxVkey=1
}
fI6.wxXCkey=1
return xG6
}
tC6.wxXCkey=2
_2z(z,13,eD6,e,s,gg,tC6,'item','index','index')
var cJ6=_n('view')
_rz(z,cJ6,'class',16,e,s,gg)
var oL6=_v()
_(cJ6,oL6)
var cM6=function(lO6,oN6,aP6,gg){
var eR6=_mz(z,'brand-item',['bindtap',19,'data-item',1,'info',2],[],lO6,oN6,gg)
_(aP6,eR6)
return aP6
}
oL6.wxXCkey=4
_2z(z,17,cM6,e,s,gg,oL6,'item','index','index')
var hK6=_v()
_(cJ6,hK6)
if(_oz(z,22,e,s,gg)){hK6.wxVkey=1
var bS6=_v()
_(hK6,bS6)
if(_oz(z,23,e,s,gg)){bS6.wxVkey=1
}
bS6.wxXCkey=1
}
else if(_oz(z,24,e,s,gg)){hK6.wxVkey=2
}
hK6.wxXCkey=1
_(c95,cJ6)
o05.wxXCkey=1
lA6.wxXCkey=1
lA6.wxXCkey=3
_(o45,c95)
}
var f55=_v()
_(x35,f55)
if(_oz(z,25,e,s,gg)){f55.wxVkey=1
var oT6=_mz(z,'mp-weixin',['lazyLoad',-1,'bind:ready',26,'bind:track',1,'bindtapEvent',2,'content',3,'id',4,'info',5],[],e,s,gg)
_(f55,oT6)
}
var c65=_v()
_(x35,c65)
if(_oz(z,32,e,s,gg)){c65.wxVkey=1
var xU6=_n('loading')
_(c65,xU6)
}
var h75=_v()
_(x35,h75)
if(_oz(z,33,e,s,gg)){h75.wxVkey=1
}
o45.wxXCkey=1
o45.wxXCkey=3
f55.wxXCkey=1
f55.wxXCkey=3
c65.wxXCkey=1
c65.wxXCkey=3
h75.wxXCkey=1
_(r,x35)
var oV6=_n('no-card-tip')
_(r,oV6)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_88";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_88();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/brand/index/index.wxml'] = [$gwx_XC_88, './pages/brand/index/index.wxml'];else __wxAppCode__['pages/brand/index/index.wxml'] = $gwx_XC_88( './pages/brand/index/index.wxml' );
	;__wxRoute = "pages/brand/index/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/brand/index/index.js";define("pages/brand/index/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../@babel/runtime/helpers/defineProperty"),a=require("../../../@babel/runtime/helpers/regeneratorRuntime"),e=require("../../../@babel/runtime/helpers/asyncToGenerator"),n=require("../../../@babel/runtime/helpers/typeof"),o=getApp();Page({data:{ready:!1,loadError:!1,pageLoad:!1,brandData:{},currentTab:0,contentID:"",pageTitle:"",list:[],pageStatus:1,pageNum:1,timer:"",id:1,pageId:0,showPanel:!1,drawerPoster:!1,brandType:0,shareImg:"",vsTime:void 0,vpTime:void 0,veTime:void 0,vEnd:!1,dataInfo:{}},column_id:1,onLoad:function(t){var a=this;if(t.id)this.data.contentID=t.id,o.loginCallback().then((function(){a.initData(t)}));else if(t.scene){var e=decodeURIComponent(t.scene);o.loginCallback().then((function(){o.API.uuidToParams(e,"brand").then((function(t){console.log("uuidToParams res",t),0==t.code&&t.content.params&&(a.data.contentID=t.content.paramsObj.id,t.content.paramsObj.shareId&&(a.data.shareId=t.content.paramsObj.shareId),a.initData(t.content.paramsObj))})).catch((function(t){console.log("uuidToParams err",t)}))}))}},onShow:function(){this.data.ready&&o.QD.track("contentView",{ContentID:"brand".concat(this.data.contentID),menu:o.globalData.currentTab,name_of_page:this.data.pageTitle})},onUnload:function(){this.data.vsTime&&(this.data.vEnd?o.QD.track("WatchingVideo",{ContentID:o.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!0,menu:o.globalData.currentTab,name_of_page:this.data.pageTitle,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}):o.QD.track("WatchingVideo",{ContentID:o.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!1,menu:o.globalData.currentTab,name_of_page:this.data.pageTitle,CampaignID:this.data.info.CampaignID||"",NameOfCampaign:this.data.info.NameOfCampaign||""}))},initData:function(t){var a=this,e=o.globalData.userInfo;this.setData({userInfo:e,pageId:t.id}),o.API.getBrandDetail(t.id).then((function(t){if(console.log("getBrandDetail",t),0==t.code&&"object"==n(t.content)&&0==Object.keys(t.content).length)a.setData({loadError:!0,ready:!0});else if(0==t.code)if(t.content.info.source_id){a.setData(t.content),a.setData({ready:!0,brandType:2,getDownList:t.content.download,pageTitle:t.content.info.title}),a.data.contentID=t.content.info.source_id;var e={ContentID:"brand".concat(t.content.info.source_id),menu:o.globalData.currentTab,name_of_page:t.content.info.title};a.data.shareId&&(e.mp_shareID=a.data.shareId),o.QD.track("contentView",e);var i=t.content.info;a.setData({dataInfo:{isReserve:0,isApply:0,isCollection:i.collectStatus,isPraise:i.likeStatus}}),a.onMpReady()}else a.setData({brandType:1}),a.getData(a.data.id)}))},onShareAppMessage:function(){var t={ContentID:"brand".concat(this.data.contentID),menu:o.globalData.currentTab,name_of_page:this.data.pageTitle};return this.data.shareId&&(t.mp_shareID=this.data.shareId),o.QD.action("shareContent",t),{title:this.data.pageTitle,imageUrl:this.data.shareImg}},getData:function(t){var n=this;return e(a().mark((function e(){var i,r,c;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.API.getBrandHomeJson(t).catch((function(t){}));case 2:if(i=a.sent,console.log("page brand index getData",i),i){for(n.setData({brandData:i.content,ready:!0,pageTitle:i.content.info.title,shareImg:i.content.info.share_img}),r={ContentID:"brand".concat(t),menu:o.globalData.currentTab,name_of_page:i.content.info.title},n.data.shareId&&(r.mp_shareID=n.data.shareId),o.QD.track("contentView",r),i.content.column,c=0;c<3;c++)n.getListData(i.content.column[c].id,c);n.saveTarInfo()}case 5:case"end":return a.stop()}}),e)})))()},clickImg:function(t){var a=this.data.brandData.info.detailImg;wx.previewImage({urls:[a]}),o.polarisEvent("BrandFormClickImg",o.getTarInfo("limei_zhuanti_".concat(this.data.id)))},tapVideo:function(t){(0,t.detail)(!0)},bindUploadVideoData:function(t){},bindColumnTap:function(t){},tabColumnTap:function(t,a){var e=t.currentTarget.dataset.index;this.setData({currentTab:e})},bindTarBrandItem:function(t){},saveTarInfo:function(){},getListData:function(t,a){var e=this;console.log("page brand index getListData",t),o.API.getBrandListJson(t).then((function(t){console.log("page brand index getListData 请求成功",t),e.data.list[a]=t.content.list,e.setData({list:e.data.list})}))},handleTrack:function(t){var a=this;console.log("handleTrack",t),"videoPlay"==t.detail.type?(this.setData({vsTime:new Date,vEnd:!1}),o.QD.track("start_play_video",{ContentID:o.QD.getLastContentId(),menu:o.globalData.currentTab,name_of_page:this.data.pageTitle})):"videoPause"==t.detail.type?(this.setData({vpTime:new Date}),setTimeout((function(){a.data.vEnd?o.QD.track("WatchingVideo",{ContentID:o.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!0,menu:o.globalData.currentTab,name_of_page:a.data.pageTitle}):o.QD.track("WatchingVideo",{ContentID:o.QD.getLastContentId(),TimeOfWatch:(a.data.vpTime-a.data.vsTime)/1e3,is_finished:!1,menu:o.globalData.currentTab,name_of_page:a.data.pageTitle})}),1e3)):"videoEnded"==t.detail.type&&this.setData({veTime:new Date,vEnd:!0})},handleTap:function(t){var n=this;return e(a().mark((function e(){var i,r,c,d,s,l,u;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("handleTap",t),i=t.detail.dataset,r=i.type,c=i.param,d=null;try{d=JSON.parse(c)}catch(t){console.log("handleTap json parse error",t)}if(d){a.next=6;break}return a.abrupt("return");case 6:console.log("handleTap param",r,d),a.t0=r,a.next="share"===a.t0?11:"consultation"===a.t0?13:"download"===a.t0||"enroll"===a.t0?15:"collection"===a.t0?27:"praise"===a.t0?29:10;break;case 10:return a.abrupt("break",31);case 11:return n.showSharePanel(),a.abrupt("break",31);case 13:return d.consultCode&&wx.navigateTo({url:"/pages/form/index/index?tplId=".concat(d.consultCode,"&type=consult")}),a.abrupt("break",31);case 15:if(s=n.data.info.download_form,5==d.bottomStyle?d.enrollCode&&(s=d.enrollCode):d.downloadCode&&(s=d.downloadCode),s){a.next=20;break}return console.log("no downloadCode"),a.abrupt("return");case 20:return l="/pages/download/index?id=0&name=".concat(d.downloadLinkName,"&url=").concat(d.downloadLink,"&source_id=").concat(n.data.info.source_id),a.next=23,o.API.checkFormSubmitDownload(1,n.data.pageId,3,s,wx.getStorageSync("qdVisitId"));case 23:return u=a.sent,console.log("page case detail handleDownload submitRes",u),0==u.code&&1==u.content?5==d.bottomStyle?wx.showToast({title:"您已完成表单的提交",icon:"none"}):(o.QD.action("contentDownload",{menu:o.globalData.currentTab,name_of_page:n.data.info.title}),o.API.downloadRecord({id:n.data.pageId,contentType:"brand"}),wx.navigateTo({url:l})):(o.setDownloadParams({contentDonwload:{menu:o.globalData.currentTab,name_of_page:n.data.info.title},record:{id:n.data.pageId,contentType:"brand"}}),n._goForm(s,r,encodeURIComponent(l))),a.abrupt("break",31);case 27:return n.bindCollect(),a.abrupt("break",31);case 29:return n.bindLike(),a.abrupt("break",31);case 31:return a.abrupt("return");case 32:case"end":return a.stop()}}),e)})))()},_goForm:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";wx.navigateTo({url:"/pages/form/index/index?op_type=".concat(a,"&f_id=").concat(this.data.file_id,"&data_id=").concat(this.data.info.id,"&data_type=1&tplId=").concat(t,"&type=").concat(a,"&r_url=").concat(e)})},bindCollect:function(){var t=this,a=this;1==a.data.info.collectStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的收藏？",success:function(t){t.confirm?o.API.addCollect({id:a.data.pageId,tag:7}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消收藏成功",icon:"none"}),a.setData({"info.collectStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):o.API.addCollect({id:a.data.pageId,tag:7}).then((function(e){0==e.code?e.content&&1==e.content.status&&(o.QD.action("contentCollect",{menu:o.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"收藏成功，可至“我的收藏”中查看",icon:"none"}),a.setData({"info.collectStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})}))},bindLike:function(){var t=this,a=this;1==a.data.info.likeStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的点赞？",success:function(t){t.confirm?o.API.likeRecord({id:a.data.pageId,contentType:"brand"}).then((function(t){0==t.code?t.content&&2==t.content.status&&(wx.showToast({title:"取消点赞成功",icon:"none"}),a.setData({"info.likeStatus":0}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):t.cancel}}):o.API.likeRecord({id:this.data.pageId,contentType:"brand"}).then((function(e){0==e.code?e.content&&1==e.content.status&&(o.QD.action("contentLike",{menu:o.globalData.currentTab,name_of_page:t.data.info.title}),wx.showToast({title:"点赞成功",icon:"none"}),a.setData({"info.likeStatus":1}),a.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})}))},showSharePanel:function(){this.setData({showPanel:!0})},hideSharePanel:function(){this.setData({showPanel:!1})},shareFriend:function(){},getSharePoster:function(){var t=this.data,a=t.pageId,e=t.info,n=e.banner,i=e.title,r=e.data_id;return o.jumpSharePoster({pageId:a,cover_img:n,title:i,data_id:r})},getUserInfo:function(a){var e=this;wx.getUserProfile({desc:"用于完善用户信息",success:function(a){var n;console.log("获取用户信息 wx.getUserProfile",a);var o=a.userInfo;a.iv,a.encryptedData;wx.setStorageSync("userInfoNickname",o.nickName),wx.setStorageSync("userInfoAvatarUrl",o.avatarUrl),e.setData((t(n={},"userInfo.avatar",o.avatarUrl),t(n,"userInfo.nickname",o.nickName),n)),e.data.drawerPoster||e.getSharePoster()}})},onMpReady:function(){console.log("onMpReady",this.data.info);var t=this.data.info,a=t.collectStatus,e=t.likeStatus,n=t.bottomStyle;if(null!=a){var o=this.selectComponent("#mpHtml");o&&o.updateBottomBtn(n||6,1,0,0,a||0,e||0)}}});
},{isPage:true,isComponent:true,currentFile:'pages/brand/index/index.js'});require("pages/brand/index/index.js");