$gwx_XC_118=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_118 || [];
function gz$gwx_XC_118_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_118_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_118_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_118_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'场景应用详情'])
Z([a,[3,'c-page '],[[2,'?:'],[[7],[3,'isShowTopMsg']],[1,'top-msg-page'],[1,'']]])
Z([[2,'&&'],[[7],[3,'ready']],[[2,'!'],[[6],[[7],[3,'detailData']],[3,'source_id']]]])
Z([3,'page-inner'])
Z([a,[3,'section-list '],[[2,'?:'],[[2,'=='],[[6],[[7],[3,'detailData']],[3,'theme_style']],[1,2]],[1,'section-list-dark'],[1,'']]])
Z([a,[3,'background-color: '],[[6],[[7],[3,'detailData']],[3,'background_color']]])
Z([[6],[[7],[3,'detailData']],[3,'top_img']])
Z([[2,'>'],[[6],[[6],[[7],[3,'detailData']],[3,'push']],[3,'length']],[1,0]])
Z([3,'section-item section-personage'])
Z([[6],[[7],[3,'detailData']],[3,'push_model_title']])
Z([[9],[[9],[[8],'title',[[6],[[7],[3,'detailData']],[3,'push_model_title']]],[[8],'personage',[1,true]]],[[8],'theme_style',[[6],[[7],[3,'detailData']],[3,'theme_style']]]])
Z([3,'sectionTitle'])
Z([[6],[[7],[3,'detailData']],[3,'push']])
Z([3,'index'])
Z(z[12])
Z([[6],[[7],[3,'detailData']],[3,'model']])
Z([3,'listIndex'])
Z([3,'section-item section-detail'])
Z([[8],'title',[[6],[[7],[3,'item']],[3,'title']]])
Z(z[11])
Z([3,'items'])
Z([[6],[[7],[3,'item']],[3,'two']])
Z(z[13])
Z([3,'section-detail-item'])
Z([[6],[[7],[3,'items']],[3,'title']])
Z([[8],'subhead',[[6],[[7],[3,'items']],[3,'title']]])
Z([3,'sectionSubhead'])
Z([[6],[[7],[3,'items']],[3,'video_li']])
Z([3,'tapVideo'])
Z([3,'bindUploadVideoData'])
Z([3,'bindVideoPlay'])
Z([a,[3,'videoPlayer-'],[[6],[[7],[3,'items']],[3,'id']]])
Z(z[31][2])
Z([3,'1'])
Z(z[27])
Z(z[24])
Z([[6],[[7],[3,'items']],[3,'video_img']])
Z([[6],[[7],[3,'items']],[3,'video_type']])
Z(z[27])
Z([[6],[[7],[3,'items']],[3,'text']])
Z(z[39])
Z([[6],[[7],[3,'consultDetail']],[3,'CampaignID']])
Z([[7],[3,'consultDetail']])
Z([[6],[[7],[3,'consultDetail']],[3,'tplId']])
Z([[6],[[7],[3,'consultDetail']],[3,'icon']])
Z([[6],[[7],[3,'consultDetail']],[3,'title']])
Z([[6],[[7],[3,'consultDetail']],[3,'enable_status']])
Z([[6],[[7],[3,'consultDetail']],[3,'consultType']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatQrCode']])
Z([[6],[[7],[3,'consultDetail']],[3,'wechatTitle']])
Z([1,110])
Z([[9],[[8],'detailData',[[7],[3,'detailData']]],[[8],'useUin',[[7],[3,'useUin']]]])
Z([3,'bottomBtnTpl'])
Z([[2,'&&'],[[2,'!'],[[7],[3,'ready']]],[[2,'!'],[[6],[[7],[3,'detailData']],[3,'source_id']]]])
Z([[6],[[7],[3,'detailData']],[3,'source_id']])
Z([3,'onMpReady'])
Z([3,'handleTrack'])
Z([3,'handleTap'])
Z([[6],[[7],[3,'detailData']],[3,'contentH5']])
Z([3,'mpHtml'])
Z([[7],[3,'dataInfo']])
Z(z[41])
Z(z[42])
Z(z[43])
Z(z[44])
Z(z[45])
Z(z[46])
Z(z[47])
Z(z[48])
Z(z[49])
Z([[7],[3,'loadError']])
Z([[6],[[7],[3,'detailData']],[3,'id']])
Z([3,'shareMemberPick'])
Z([3,'hideSharePanel'])
Z([3,'shareInfoUpdate'])
Z([3,'showTopMsgHandler'])
Z([3,'switchSharePick'])
Z([[7],[3,'detailData']])
Z([[7],[3,'shareActiveInfo']])
Z([[7],[3,'shareCardId']])
Z([[7],[3,'showPanel']])
Z([[7],[3,'isShowOtherField']])
Z([3,'closeFormDialog'])
Z([3,'downloadUpdateInfoCallBack'])
Z([[7],[3,'otherFieldList']])
Z([[7],[3,'otherFieldInfo']])
Z(z[11])
Z(z[26])
Z([3,'dianyanBtnTpl'])
Z([[2,'=='],[[6],[[7],[3,'detailData']],[3,'isHavaData']],[1,1]])
Z(z[52])
Z(z[89])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_118_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_118_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_118=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_118=true;
var x=['./pages/scene/detail/index.wxml'];d_[x[0]]={}
d_[x[0]]["sectionTitle"]=function(e,s,r,gg){
var z=gz$gwx_XC_118_1()
var b=x[0]+':sectionTitle'
r.wxVkey=b
gg.f=$gdc(f_["./pages/scene/detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["sectionSubhead"]=function(e,s,r,gg){
var z=gz$gwx_XC_118_1()
var b=x[0]+':sectionSubhead'
r.wxVkey=b
gg.f=$gdc(f_["./pages/scene/detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["dianyanBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_118_1()
var b=x[0]+':dianyanBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/scene/detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,89,e,s,gg)){oB.wxVkey=1
}
oB.wxXCkey=1
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["bottomBtnTpl"]=function(e,s,r,gg){
var z=gz$gwx_XC_118_1()
var b=x[0]+':bottomBtnTpl'
r.wxVkey=b
gg.f=$gdc(f_["./pages/scene/detail/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,91,e,s,gg)){oB.wxVkey=1
}
oB.wxXCkey=1
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_118_1()
var o8IB=_n('header')
_rz(z,o8IB,'title',0,e,s,gg)
_(r,o8IB)
var c9IB=_n('view')
_rz(z,c9IB,'class',1,e,s,gg)
var o0IB=_v()
_(c9IB,o0IB)
if(_oz(z,2,e,s,gg)){o0IB.wxVkey=1
var eDJB=_n('view')
_rz(z,eDJB,'class',3,e,s,gg)
var bEJB=_mz(z,'view',['class',4,'style',1],[],e,s,gg)
var oFJB=_v()
_(bEJB,oFJB)
if(_oz(z,6,e,s,gg)){oFJB.wxVkey=1
}
var xGJB=_v()
_(bEJB,xGJB)
if(_oz(z,7,e,s,gg)){xGJB.wxVkey=1
var oHJB=_n('view')
_rz(z,oHJB,'class',8,e,s,gg)
var fIJB=_v()
_(oHJB,fIJB)
if(_oz(z,9,e,s,gg)){fIJB.wxVkey=1
var cJJB=_v()
_(fIJB,cJJB)
var hKJB=_oz(z,11,e,s,gg)
var oLJB=_gd(x[0],hKJB,e_,d_)
if(oLJB){
var cMJB=_1z(z,10,e,s,gg) || {}
var cur_globalf=gg.f
cJJB.wxXCkey=3
oLJB(cMJB,cMJB,cJJB,gg)
gg.f=cur_globalf
}
else _w(hKJB,x[0],2,656)
}
var oNJB=_v()
_(oHJB,oNJB)
var lOJB=function(tQJB,aPJB,eRJB,gg){
var oTJB=_v()
_(eRJB,oTJB)
if(_oz(z,14,tQJB,aPJB,gg)){oTJB.wxVkey=1
}
oTJB.wxXCkey=1
return eRJB
}
oNJB.wxXCkey=2
_2z(z,12,lOJB,e,s,gg,oNJB,'item','index','index')
fIJB.wxXCkey=1
_(xGJB,oHJB)
}
var xUJB=_v()
_(bEJB,xUJB)
var oVJB=function(cXJB,fWJB,hYJB,gg){
var c1JB=_n('view')
_rz(z,c1JB,'class',17,cXJB,fWJB,gg)
var o2JB=_v()
_(c1JB,o2JB)
var l3JB=_oz(z,19,cXJB,fWJB,gg)
var a4JB=_gd(x[0],l3JB,e_,d_)
if(a4JB){
var t5JB=_1z(z,18,cXJB,fWJB,gg) || {}
var cur_globalf=gg.f
o2JB.wxXCkey=3
a4JB(t5JB,t5JB,o2JB,gg)
gg.f=cur_globalf
}
else _w(l3JB,x[0],2,1434)
var e6JB=_v()
_(c1JB,e6JB)
var b7JB=function(x9JB,o8JB,o0JB,gg){
var cBKB=_n('view')
_rz(z,cBKB,'class',23,x9JB,o8JB,gg)
var hCKB=_v()
_(cBKB,hCKB)
if(_oz(z,24,x9JB,o8JB,gg)){hCKB.wxVkey=1
var oFKB=_v()
_(hCKB,oFKB)
var lGKB=_oz(z,26,x9JB,o8JB,gg)
var aHKB=_gd(x[0],lGKB,e_,d_)
if(aHKB){
var tIKB=_1z(z,25,x9JB,o8JB,gg) || {}
var cur_globalf=gg.f
oFKB.wxXCkey=3
aHKB(tIKB,tIKB,oFKB,gg)
gg.f=cur_globalf
}
else _w(lGKB,x[0],2,1595)
}
var oDKB=_v()
_(cBKB,oDKB)
if(_oz(z,27,x9JB,o8JB,gg)){oDKB.wxVkey=1
var eJKB=_mz(z,'video-player',['bindclickplay',28,'binduploadData',1,'bindvideoPlay',2,'class',3,'data-did',4,'data-type',5,'data-vid',6,'data-vtitle',7,'poster',8,'type',9,'vid',10],[],x9JB,o8JB,gg)
_(oDKB,eJKB)
}
var cEKB=_v()
_(cBKB,cEKB)
if(_oz(z,39,x9JB,o8JB,gg)){cEKB.wxVkey=1
var bKKB=_n('rich-view')
_rz(z,bKKB,'content',40,x9JB,o8JB,gg)
_(cEKB,bKKB)
}
hCKB.wxXCkey=1
oDKB.wxXCkey=1
oDKB.wxXCkey=3
cEKB.wxXCkey=1
cEKB.wxXCkey=3
_(o0JB,cBKB)
return o0JB
}
e6JB.wxXCkey=4
_2z(z,21,b7JB,cXJB,fWJB,gg,e6JB,'items','index','index')
_(hYJB,c1JB)
return hYJB
}
xUJB.wxXCkey=4
_2z(z,15,oVJB,e,s,gg,xUJB,'item','index','listIndex')
oFJB.wxXCkey=1
xGJB.wxXCkey=1
_(eDJB,bEJB)
var oLKB=_mz(z,'consult-btn',['CampaignID',41,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(eDJB,oLKB)
var xMKB=_n('home-tips')
_rz(z,xMKB,'bottom',50,e,s,gg)
_(eDJB,xMKB)
var oNKB=_v()
_(eDJB,oNKB)
var fOKB=_oz(z,52,e,s,gg)
var cPKB=_gd(x[0],fOKB,e_,d_)
if(cPKB){
var hQKB=_1z(z,51,e,s,gg) || {}
var cur_globalf=gg.f
oNKB.wxXCkey=3
cPKB(hQKB,hQKB,oNKB,gg)
gg.f=cur_globalf
}
else _w(fOKB,x[0],2,2583)
_(o0IB,eDJB)
}
var lAJB=_v()
_(c9IB,lAJB)
if(_oz(z,53,e,s,gg)){lAJB.wxVkey=1
var oRKB=_n('loading')
_(lAJB,oRKB)
}
var aBJB=_v()
_(c9IB,aBJB)
if(_oz(z,54,e,s,gg)){aBJB.wxVkey=1
var cSKB=_n('view')
var oTKB=_mz(z,'mp-weixin',['lazyLoad',-1,'bind:ready',55,'bind:track',1,'bindtapEvent',2,'content',3,'id',4,'info',5],[],e,s,gg)
_(cSKB,oTKB)
var lUKB=_mz(z,'consult-btn',['CampaignID',61,'consultDetail',1,'formId',2,'icon',3,'label',4,'showConsult',5,'type',6,'wechatQrCode',7,'wechatTitle',8],[],e,s,gg)
_(cSKB,lUKB)
_(aBJB,cSKB)
}
var tCJB=_v()
_(c9IB,tCJB)
if(_oz(z,70,e,s,gg)){tCJB.wxVkey=1
}
o0IB.wxXCkey=1
o0IB.wxXCkey=3
lAJB.wxXCkey=1
lAJB.wxXCkey=3
aBJB.wxXCkey=1
aBJB.wxXCkey=3
tCJB.wxXCkey=1
_(r,c9IB)
var c6IB=_v()
_(r,c6IB)
if(_oz(z,71,e,s,gg)){c6IB.wxVkey=1
var aVKB=_mz(z,'share-pannel',['bind:shareMemberPick',72,'bindhideSharePanel',1,'bindshareInfo',2,'bindshowTopMsg',3,'bindswitchSharePick',4,'info',5,'shareActiveInfo',6,'shareCardId',7,'showPanel',8],[],e,s,gg)
_(c6IB,aVKB)
}
var h7IB=_v()
_(r,h7IB)
if(_oz(z,81,e,s,gg)){h7IB.wxVkey=1
var tWKB=_mz(z,'other-form',['bind:closeFormDialog',82,'bind:submitSuccess',1,'formList',2,'info',3],[],e,s,gg)
_(h7IB,tWKB)
}
c6IB.wxXCkey=1
c6IB.wxXCkey=3
h7IB.wxXCkey=1
h7IB.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_118";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_118();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/scene/detail/index.wxml'] = [$gwx_XC_118, './pages/scene/detail/index.wxml'];else __wxAppCode__['pages/scene/detail/index.wxml'] = $gwx_XC_118( './pages/scene/detail/index.wxml' );
	;__wxRoute = "pages/scene/detail/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/scene/detail/index.js";define("pages/scene/detail/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var a=require("../../../@babel/runtime/helpers/interopRequireDefault").default,t=require("../../../@babel/runtime/helpers/defineProperty"),e=require("../../../@babel/runtime/helpers/regeneratorRuntime"),n=require("../../../@babel/runtime/helpers/asyncToGenerator"),o=require("../../../@babel/runtime/helpers/typeof"),i=a(require("../../../utils/tool")),d=require("../../../utils/phoneLogin.js"),s=getApp();Page({data:{ready:!1,detailData:{},contentID:"",loadError:!1,consultDetail:{},vsTime:void 0,vpTime:void 0,veTime:void 0,vEnd:!1,shareCardId:"",shareCardInfo:{},isShareCard:!0,isShareMyInfo:!0,otherFieldList:[],isShowOtherField:!1,otherFieldInfo:{},useUin:wx.getStorageSync("useUin"),actionType:"",handleTapType:"",paramObj:{},subscribeId:0,dataInfo:{},submitRes:{},isAccount:!1},onLoad:function(a){var t=this;if(a.isAccount&&this.setData({isAccount:a.isAccount}),a.id){this.data.contentID=a.id;var e=a.employeePosition,n=a.wechatId,o=a.wechatworkId,i=a.employeePhone;s.QD.setSalesShareCardParams(a),this.setData({pageId:a.id,shareCardId:a.shareCardId,shareActiveInfo:{employeePosition:e,wechatId:n,wechatworkId:o,employeePhone:i}}),s.loginCallback().then((function(e){t.getData(a.id)}))}else if(a.scene){var d=decodeURIComponent(a.scene);s.loginCallback().then((function(){s.API.uuidToParams(d,"scene").then((function(a){if(console.log("uuidToParams res",a),0==a.code&&a.content.params){t.data.contentID=a.content.paramsObj.id;var e=a.content.paramsObj,n=e.employeePosition,o=e.wechatId,i=e.wechatworkId,d=e.employeePhone;s.QD.setSalesShareCardParams(a.content.paramsObj),t.setData({pageId:a.content.paramsObj.id,shareCardId:a.content.paramsObj.shareCardId,shareActiveInfo:{employeePosition:n,wechatId:o,wechatworkId:i,employeePhone:d}}),a.content.paramsObj.shareId&&(t.data.shareId=a.content.paramsObj.shareId),t.getData(a.content.paramsObj.id)}})).catch((function(a){console.log("uuidToParams err",a)}))}))}else this.setData({loadError:!0,ready:!0,detailData:{background_color:"#fff"}})},onReady:function(){},onShow:function(){if(this.data.ready){var a={ContentID:this.data.detailData.source_id>0?this.data.contentID.toString():"scene".concat(this.data.contentID),menu:s.globalData.currentTab,name_of_page:this.data.detailData.title,CampaignID:this.data.detailData.CampaignID||"",NameOfCampaign:this.data.detailData.NameOfCampaign||"",content_type:8};this.data.shareId&&(a.mp_shareID=this.data.shareId),this.data.actionType&&(this[this.data.actionType](),this.setData({actionType:""})),s.QD.track("contentView",a),this.data.isAccount&&s.QD.track("official_account_template_message_clickthroughs",{ContentTheme:this.data.info.title,ChannelType:s.QD.getChannelType()})}},onHide:function(){},onUnload:function(){this.data.vsTime&&(this.data.vEnd?s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!0,menu:s.globalData.currentTab,name_of_page:this.data.detailData.title,CampaignID:this.data.detailData.CampaignID||"",NameOfCampaign:this.data.detailData.NameOfCampaign||""}):s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(new Date-this.data.vsTime)/1e3,is_finished:!1,menu:s.globalData.currentTab,name_of_page:this.data.detailData.title,CampaignID:this.data.detailData.CampaignID||"",NameOfCampaign:this.data.detailData.NameOfCampaign||""}))},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return s.QD.action("shareContent",{ContentID:this.data.detailData.source_id>0?this.data.contentID.toString():"scene".concat(this.data.contentID),menu:s.globalData.currentTab,name_of_page:this.data.detailData.title,CampaignID:this.data.detailData.CampaignID||"",NameOfCampaign:this.data.detailData.NameOfCampaign||"",content_type:8}),s.tool.onShareAppMessage({path:"/pages/scene/detail/index",title:this.data.detailData.title,imageUrl:this.data.detailData.share_img,shareCardInfo:this.shareCardInfo,id:this.data.detailData.id,isShareCard:this.isShareCard,isShareMyInfo:this.data.isShareMyInfo})},catchtouchmove:function(){},consultDetail:function(a,t){var e=this;s.API.consultDetail(a,t).then((function(a){0==a.code&&e.setData({consultDetail:a.content})}))},getData:function(a){var t=this,e=s.globalData.userInfo;this.setData({userInfo:e}),s.API.getSceneDetail(a).then((function(e){if(console.log("page scene detail app.API.getSceneDetail res",e),0==e.code&&"object"==o(e.content)&&0==Object.keys(e.content).length)t.setData({loadError:!0,ready:!0,detailData:{background_color:"#fff"}});else if(0==e.code){t.consultDetail("content",e.content.data_id),t.setData({ready:!0,detailData:e.content,subscribeId:e.content.Subgroupname||0});var n=e.content.source_id?e.content.source_id:a;t.data.contentID=n;var i={ContentID:t.data.detailData.source_id>0?n.toString():"scene".concat(n),menu:s.globalData.currentTab,name_of_page:e.content.title,CampaignID:t.data.detailData.CampaignID||"",NameOfCampaign:t.data.detailData.NameOfCampaign||"",content_type:8};t.data.shareId&&(i.mp_shareID=t.data.shareId),s.QD.track("contentView",i),t.data.isAccount&&s.QD.track("official_account_template_message_clickthroughs",{ContentTheme:t.data.info.title,ChannelType:s.QD.getChannelType()});var d=e.content.info;t.setData({dataInfo:{isReserve:0,isApply:2===d.form_is_submit?1:0,isCollection:d.collectStatus,isPraise:d.likeStatus}}),t.onMpReady()}})).catch((function(a){console.log("page scene detail app.API.getSceneDetail err",a)})),s.API.clickRecord({id:a,contentType:"scene"}).then((function(a){0==a.code&&console.log("浏览+1")}))},_goForm:function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;wx.navigateTo({url:"/pages/form/index/index?op_type=".concat(n,"&refer=3&tplId=").concat(a,"&data_type=3&data_id=").concat(t,"&type=scene&r_url=").concat(encodeURIComponent(e))})},tapVideo:function(a){var t=this;return n(e().mark((function n(){var o,i,d,c,r,l,h,u,p;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("scene tapVideo",a),o=a.detail,i=a.target.dataset,d=i.vid,c=i.vtitle,r=t.data.detailData,l=r.isStay,h=r.id,u=r.form_name,1===l){e.next=8;break}o(!0),e.next=13;break;case 8:return e.next=10,s.API.checkFormSubmitDownload(3,t.data.pageId,3,u,wx.getStorageSync("qdVisitId"));case 10:p=e.sent,console.log("page scene detail tapVideo submitRes",p),0==p.code&&1==p.content?o(!0):t._goForm(u,h);case 13:t.tarVideoPlay(d,c);case 14:case"end":return e.stop()}}),n)})))()},bindVideoPlay:function(a){var t=a.target.dataset.did;if(this.playingId){var e=this.selectComponent(".videoPlayer-"+this.playingId);this.playingId="",e.videoPlayer.pause()}this.playingId=t},bindUploadVideoData:function(a){},tarVideoPlay:function(a,t){var e=this.data.detailData;e.id,e.title},tarVideoWatchTime:function(a,t,e){this.data.detailData.id},collectChange:function(a){var t=this,e=this;s.QD.track("official_button_click",{button_name:"收藏",button_position:"移动端底部",ContentTheme:this.data.detailData.title,ChannelType:s.QD.getChannelType()}),(0,d.goLogin)("collectChange").then((function(n){n&&(console.log("page scene detail collect",a),1==e.data.detailData.collectStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的收藏？",success:function(a){a.confirm&&s.API.addCollect({id:e.data.pageId,tag:5}).then((function(a){0==a.code?a.content&&2==a.content.status&&(wx.showToast({title:"取消收藏成功",icon:"none"}),e.setData({"detailData.collectStatus":0}),e.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})}))}}):s.API.addCollect({id:e.data.pageId,tag:5}).then((function(a){0==a.code?(s.QD.action("contentCollect",{ContentID:t.data.detailData.source_id>0?t.data.contentID.toString():"scene".concat(t.data.contentID),menu:s.globalData.currentTab,name_of_page:t.data.detailData.title}),wx.showToast({title:"收藏成功，可至“我的收藏”中查看",icon:"none"}),e.setData({"detailData.collectStatus":1}),e.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},handleDownload:function(){var a=this;return n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,d.goLogin)("handleDownload").then((function(t){if(t){var e=a.data.detailData,n=(e.isStay,e.id),o=e.form_name,i=a.data.detailData.source_id?a.data.detailData.source_id:a.data.pageId;a.downLink="/pages/scene/download_list/index?id=".concat(n,"&cid=").concat(i),a.downloadCommonhandler(o,"download","",(function(){a._goForm(o,n,a.downLink,"download")}))}}));case 1:case"end":return t.stop()}}),t)})))()},bindLike:function(){var a=this,t=this;(0,d.goLogin)("bindLike").then((function(e){e&&(s.QD.track("official_button_click",{button_name:"点赞",button_position:"移动端底部",ContentTheme:a.data.detailData.title,ChannelType:s.QD.getChannelType()}),1==t.data.detailData.likeStatus?wx.showModal({title:"温馨提示",content:"确认要取消该内容的点赞？",success:function(a){a.confirm?s.API.likeRecord({id:t.data.pageId,contentType:"scene"}).then((function(a){0==a.code?a.content&&2==a.content.status&&(wx.showToast({title:"取消点赞成功",icon:"none"}),t.setData({"detailData.likeStatus":0}),t.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})):a.cancel}}):s.API.likeRecord({id:a.data.pageId,contentType:"scene"}).then((function(e){0==e.code?(s.QD.action("contentLike",{ContentID:a.data.detailData.source_id>0?a.data.contentID.toString():"scene".concat(a.data.contentID),menu:s.globalData.currentTab,name_of_page:a.data.detailData.title}),wx.showToast({title:"点赞成功",icon:"none"}),t.setData({"detailData.likeStatus":1}),t.onMpReady()):wx.showToast({title:"操作失败请重试",icon:"none"})})))}))},showSharePanel:function(){var a=this;(0,d.goLogin)("bindLike").then((function(t){t&&(s.QD.track("official_button_click",{button_name:"分享",button_position:"移动端底部",ContentTheme:a.data.detailData.title,ChannelType:s.QD.getChannelType()}),a.setData({showPanel:!0}))}))},hideSharePanel:function(){this.setData({showPanel:!1})},hideSharePoster:function(){this.setData({showPoster:!1})},shareFriend:function(){},getSharePoster:function(){var a=this.data,t=a.pageId,e=a.detailData,n=e.banner,o=e.title,i=e.data_id;return s.jumpSharePoster({pageId:t,cover_img:n,title:o,data_id:i})},getUserInfo:function(a){var e=this;wx.getUserProfile({desc:"用于完善用户信息",success:function(a){var n;console.log("获取用户信息 wx.getUserProfile",a);var o=a.userInfo;a.iv,a.encryptedData;wx.setStorageSync("userInfoNickname",o.nickName),wx.setStorageSync("userInfoAvatarUrl",o.avatarUrl),e.setData((t(n={},"userInfo.avatar",o.avatarUrl),t(n,"userInfo.nickname",o.nickName),n)),e.data.drawerPoster||e.getSharePoster()}})},handleTrack:function(a){var t=this;console.log("handleTrack",a),"videoPlay"==a.detail.type?(this.setData({vsTime:new Date,vEnd:!1}),s.QD.track("start_play_video",{ContentID:s.QD.getLastContentId(),menu:s.globalData.currentTab,name_of_page:this.data.detailData.title})):"videoPause"==a.detail.type?(this.setData({vpTime:new Date}),setTimeout((function(){t.data.vEnd?s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(t.data.vpTime-t.data.vsTime)/1e3,is_finished:!0,menu:s.globalData.currentTab,name_of_page:t.data.detailData.title}):s.QD.track("WatchingVideo",{ContentID:s.QD.getLastContentId(),TimeOfWatch:(t.data.vpTime-t.data.vsTime)/1e3,is_finished:!1,menu:s.globalData.currentTab,name_of_page:t.data.detailData.title})}),1e3)):"videoEnded"==a.detail.type&&this.setData({veTime:new Date,vEnd:!0})},handleTap:function(a){var t=this;return n(e().mark((function n(){var o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleTap",a),(o=t).data.paramObj.type?!a&&o.data.paramObj.type&&(a=o.data.paramObj,o.data.paramObj={}):o.setData({paramObj:a}),(0,d.goLogin)("handleTap",a.detail.dataset.type).then((function(e){if(e){var n=a.detail.dataset,d=n.type,c=n.param;o.data.handleTapType&&(d=o.data.handleTapType,o.data.handleTapType="");var r=null;try{r=JSON.parse(c)}catch(a){console.log("handleTap json parse error",a)}if(!r)return;switch(console.log("handleTap param",d,r),d){default:break;case"share":t.showSharePanel();break;case"consultation":r.consultCode&&wx.navigateTo({url:"/pages/form/index/index?tplId=".concat(r.consultCode,"&type=consult")});break;case"download":case"apply":case"enroll":var l=t.data.detailData.download_form;if(5==r.bottomStyle||16==r.bottomStyle?r.enrollCode&&(l=r.enrollCode):r.downloadCode&&(l=r.downloadCode),!l)return void console.log("no downloadCode");t.downLink="/pages/download/index?id=0&name=".concat(r.downloadLinkName,"&url=").concat(r.downloadLink,"&source_id=").concat(t.data.detailData.source_id),t.downloadCommonhandler(l,d,r,(function(){t._goForm(l,t.data.detailData.id,t.downLink,d)}));break;case"recommend":var h=i.default.getDetailUrl(r.templateTypesId,r.dataId);h&&wx.navigateTo({url:"/"+h});break;case"collection":t.collectChange();break;case"praise":t.bindLike()}s.sp.subscribePick(t.data.subscribeId,d)}else;}));case 4:case"end":return e.stop()}}),n)})))()},downloadCommonhandler:function(a,t,o,i){var d=this;return n(e().mark((function t(){var n,c;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.API.checkFormSubmitDownload(3,d.data.pageId,3,a,wx.getStorageSync("qdVisitId"));case 2:if(n=t.sent,s.QD.track("official_button_click",{button_name:"资料下载",button_position:"移动端底部",ContentTheme:d.data.detailData.title,ChannelType:s.QD.getChannelType()}),console.log("page case detail handleDownload submitRes",n),0!=n.code||1!=n.content){t.next=19;break}if(!(o&&5==o.bottomStyle||16==o.bottomStyle)){t.next=10;break}wx.showToast({title:"您已完成表单的提交",icon:"none"}),t.next=17;break;case 10:if(wx.setStorageSync("_download_tpl_",a),!((c=n.otherFieldList||[])&&c.length>0)){t.next=16;break}return t.abrupt("return",d.setData({otherFieldList:c,isShowOtherField:!0,otherFieldInfo:{f_id:d.data.file_id,data_id:d.data.detailData.id,data_type:3,tplId:a,type:"download"}}));case 16:d.downloadUpdateInfoCallBack();case 17:t.next=21;break;case 19:s.setDownloadParams({contentDonwload:{ContentID:d.data.detailData.source_id>0?d.data.contentID.toString():"scene".concat(d.data.contentID),menu:s.globalData.currentTab,name_of_page:d.data.detailData.title},record:{id:d.data.pageId,contentType:"scene"}}),i();case 21:case"end":return t.stop()}}),t)})))()},downloadUpdateInfoCallBack:function(){this.closeFormDialog(),s.QD.action("contentDownload",{ContentID:this.data.detailData.source_id>0?this.data.contentID.toString():"scene".concat(this.data.contentID),menu:s.globalData.currentTab,name_of_page:this.data.detailData.title}),s.API.downloadRecord({id:this.data.pageId,contentType:"scene"}),this.closeFormDialog(),wx.navigateTo({url:this.downLink})},closeFormDialog:function(){this.setData({isShowOtherField:!1})},shareInfoUpdate:function(a){this.shareCardInfo=a.detail,this.isShareCard=!0,this.setData({shareCardInfo:a.detail,isShareCard:!0})},switchSharePick:function(a){var t=a.detail,e=t.activeInfo,n=t.isShareCard;this.shareCardInfo=e,this.isShareCard=n,this.setData({shareCardInfo:e,isShareCard:n})},showTopMsgHandler:function(a){this.setData({isShowTopMsg:a.detail})},shareMemberPick:function(a){this.setData({isShareMyInfo:a.detail})},onMpReady:function(){console.log("onMpReady",this.data.info);var a=this.data.detailData,t=a.collectStatus,e=a.likeStatus,n=a.bottomStyle,o=a.status,i=this.data.dataInfo.isApply;null!=t&&this.selectComponent("#mpHtml").updateBottomBtn(n||6,o||1,0,i||0,t||0,e||0)},getPhoneNumber:function(a){var t=this;(0,d.phoneLogin)(a,(function(e){t.setData({useUin:e}),t[a.target.id]&&t[a.target.id]()}))}});
},{isPage:true,isComponent:true,currentFile:'pages/scene/detail/index.js'});require("pages/scene/detail/index.js");