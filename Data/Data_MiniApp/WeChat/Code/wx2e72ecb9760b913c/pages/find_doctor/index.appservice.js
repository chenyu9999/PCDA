$gwx_XC_86=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_86 || [];
function gz$gwx_XC_86_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_86_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_86_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_86_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'find-doc-wrap'])
Z([[7],[3,'isEmpty']])
Z([3,'scroll'])
Z([[7],[3,'isShowScrollBar']])
Z([a,[3,'height:'],[[2,'?:'],[[7],[3,'clientHeight']],[[2,'+'],[[7],[3,'clientHeight']],[1,'px']],[1,'724px']]])
Z([3,'jumpOtherUrl'])
Z([3,'一键找医生'])
Z([3,'findDoctor'])
Z([1,128])
Z([[7],[3,'isShowClinic']])
Z([[2,'>'],[[7],[3,'secondItemNumber']],[1,0]])
Z([[7],[3,'secondItemNumber']])
Z([3,'index'])
Z([[6],[[7],[3,'secondClinicList']],[3,'length']])
Z([[6],[[7],[3,'diseaseList']],[3,'length']])
Z([[6],[[7],[3,'hospitalList']],[3,'length']])
Z([[7],[3,'hospitalList']])
Z(z[12])
Z(z[5])
Z([3,'hospital-item'])
Z([3,'常见医院'])
Z([[6],[[7],[3,'item']],[3,'name']])
Z(z[21])
Z([3,'hospital'])
Z([3,'hospital-tags'])
Z([[6],[[7],[3,'item']],[3,'rank_tag']])
Z([[2,'||'],[[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_count']],[1,0]],[[6],[[7],[3,'item']],[3,'doctor_count']]])
Z([[2,'?:'],[[7],[3,'fixTop']],[1,'fix-top-wrap'],[1,'']])
Z([3,'doctors-list'])
Z([[6],[[7],[3,'navClinicList']],[3,'length']])
Z([3,'idx'])
Z([3,'navItem'])
Z([[7],[3,'navClinicList']])
Z(z[30])
Z([3,'switchTab'])
Z([a,[3,'nav-bar-name '],[[2,'&&'],[[2,'==='],[[7],[3,'currentTab']],[[7],[3,'idx']]],[1,'nav-bar-cur']]])
Z([[6],[[7],[3,'navItem']],[3,'clinic_name']])
Z([[6],[[7],[3,'navItem']],[3,'clinic_no']])
Z([[7],[3,'idx']])
Z([[2,'&&'],[[2,'==='],[[7],[3,'currentTab']],[[7],[3,'idx']]],[1,'item-cur']])
Z([3,'swiperSwitchTab'])
Z([[7],[3,'currentTab']])
Z([a,z[4][1],[[7],[3,'swiperHeight']],[3,'px']])
Z(z[30])
Z([3,'item'])
Z(z[32])
Z(z[30])
Z([a,[3,'swiperItem'],z[38]])
Z([[6],[[6],[[7],[3,'item']],[3,'doctorList']],[3,'length']])
Z([3,'onDoctorCardClick'])
Z([[7],[3,'currentTabName']])
Z([[6],[[7],[3,'item']],[3,'doctorList']])
Z([[7],[3,'intention']])
Z([[7],[3,'server_params']])
Z([[7],[3,'synonym_query']])
Z([[7],[3,'loading']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_86_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_86_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_86=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_86=true;
var x=['./pages/find_doctor/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_86_1()
var c3W=_n('view')
_rz(z,c3W,'class',0,e,s,gg)
var o4W=_v()
_(c3W,o4W)
if(_oz(z,1,e,s,gg)){o4W.wxVkey=1
var l5W=_n('empty')
_(o4W,l5W)
}
else{o4W.wxVkey=2
var a6W=_mz(z,'scroll-view',['enableBackToTop',-1,'enhanced',-1,'scrollWithAnimation',-1,'scrollY',-1,'bindscroll',2,'showScrollbar',1,'style',2],[],e,s,gg)
var o0W=_mz(z,'intellect-diagnose',['bindtap',5,'data-click_position',1,'data-type',2,'marginTop',3],[],e,s,gg)
_(a6W,o0W)
var t7W=_v()
_(a6W,t7W)
if(_oz(z,9,e,s,gg)){t7W.wxVkey=1
var xAX=_v()
_(t7W,xAX)
if(_oz(z,10,e,s,gg)){xAX.wxVkey=1
var oBX=_v()
_(xAX,oBX)
var fCX=function(hEX,cDX,oFX,gg){
var oHX=_v()
_(oFX,oHX)
if(_oz(z,13,hEX,cDX,gg)){oHX.wxVkey=1
}
oHX.wxXCkey=1
return oFX
}
oBX.wxXCkey=2
_2z(z,11,fCX,e,s,gg,oBX,'item','index','index')
}
xAX.wxXCkey=1
}
var e8W=_v()
_(a6W,e8W)
if(_oz(z,14,e,s,gg)){e8W.wxVkey=1
}
var b9W=_v()
_(a6W,b9W)
if(_oz(z,15,e,s,gg)){b9W.wxVkey=1
var lIX=_v()
_(b9W,lIX)
var aJX=function(eLX,tKX,bMX,gg){
var xOX=_mz(z,'view',['bindtap',18,'class',1,'data-click_position',2,'data-data',3,'data-name',4,'data-type',5],[],eLX,tKX,gg)
var oPX=_n('view')
_rz(z,oPX,'class',24,eLX,tKX,gg)
var fQX=_v()
_(oPX,fQX)
if(_oz(z,25,eLX,tKX,gg)){fQX.wxVkey=1
}
var cRX=_v()
_(oPX,cRX)
if(_oz(z,26,eLX,tKX,gg)){cRX.wxVkey=1
}
fQX.wxXCkey=1
cRX.wxXCkey=1
_(xOX,oPX)
_(bMX,xOX)
return bMX
}
lIX.wxXCkey=2
_2z(z,16,aJX,e,s,gg,lIX,'item','index','index')
}
var hSX=_mz(z,'view',['class',27,'id',1],[],e,s,gg)
var oTX=_v()
_(hSX,oTX)
if(_oz(z,29,e,s,gg)){oTX.wxVkey=1
var cUX=_v()
_(oTX,cUX)
var oVX=function(aXX,lWX,tYX,gg){
var b1X=_mz(z,'view',['bindtap',34,'class',1,'data-clinic-name',2,'data-clinic-no',3,'data-current',4],[],aXX,lWX,gg)
var o2X=_v()
_(b1X,o2X)
if(_oz(z,39,aXX,lWX,gg)){o2X.wxVkey=1
}
o2X.wxXCkey=1
_(tYX,b1X)
return tYX
}
cUX.wxXCkey=2
_2z(z,32,oVX,e,s,gg,cUX,'navItem','idx','idx')
}
var x3X=_mz(z,'swiper',['bindchange',40,'current',1,'style',2],[],e,s,gg)
var o4X=_v()
_(x3X,o4X)
var f5X=function(h7X,c6X,o8X,gg){
var o0X=_n('view')
_rz(z,o0X,'id',47,h7X,c6X,gg)
var lAY=_v()
_(o0X,lAY)
if(_oz(z,48,h7X,c6X,gg)){lAY.wxVkey=1
var aBY=_mz(z,'doctor-list',['bindonDoctorCardClick',49,'currentTabName',1,'doctorList',2,'intention',3,'serverParams',4,'synonymQuery',5],[],h7X,c6X,gg)
_(lAY,aBY)
}
else{lAY.wxVkey=2
var tCY=_v()
_(lAY,tCY)
if(_oz(z,55,h7X,c6X,gg)){tCY.wxVkey=1
}
tCY.wxXCkey=1
}
lAY.wxXCkey=1
lAY.wxXCkey=3
_(o8X,o0X)
return o8X
}
o4X.wxXCkey=4
_2z(z,45,f5X,e,s,gg,o4X,'item','idx','idx')
_(hSX,x3X)
oTX.wxXCkey=1
_(a6W,hSX)
t7W.wxXCkey=1
e8W.wxXCkey=1
b9W.wxXCkey=1
_(o4W,a6W)
}
o4W.wxXCkey=1
o4W.wxXCkey=3
o4W.wxXCkey=3
_(r,c3W)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_86";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_86();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/find_doctor/index.wxml'] = [$gwx_XC_86, './pages/find_doctor/index.wxml'];else __wxAppCode__['pages/find_doctor/index.wxml'] = $gwx_XC_86( './pages/find_doctor/index.wxml' );
	;__wxRoute = "pages/find_doctor/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/find_doctor/index.js";define("pages/find_doctor/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/interopRequireDefault"),i=require("../../@babel/runtime/helpers/defineProperty"),e=t(require("../../7B9C8496829A079C1DFAEC91795C7B70.js")),a=t(require("../../3B123513829A079C5D745D1477BC7B70.js")),n=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js").baseUrl,o="".concat(n,"/api/search/clinic/list/"),s="".concat(n,"/api/search/doctor/list/"),c="".concat(n,"/api/search/doctor/conf/"),r=getApp();Page({data:{isShowScrollBar:!1,loading:!1,showText:"",navClinicList:[],clinicList:[],isShowClinic:!1,firstClinicList:[],secondClinicList:[],secondItemNumber:0,diseaseList:[],hospitalList:[],doctorInfoList:[],alreadyGetClinicList:[],isEmpty:!1,navScrollLeft:0,clientHeight:0,fixTop:!1,shouldTopicComponentFixed:!1,swiperHeight:500,currentTab:0,currentTabName:"",paganition:{page:1,countPerPage:20,has_more:!0},currentClinc:{},intention:"",synonym_query:"",server_params:"",visitPageName:"找医生首页",fromVisitPage:"",visitReportFilter:{}},onLoad:function(t){var i=this;wx.getSystemInfo({success:function(t){i.setData({clientHeight:t.windowHeight})}}),this.getConfData(),this.getNavbarClinicList(),this.setData({fromVisitPage:t.from_visit_page||""})},onShow:function(){r.sensors.track("PageView",{app:"weixin_mini",page_readable_name:"找医生首页"}),this.pageVisitReport().then((function(t){console.log("visit error::",t)}))},onShareAppMessage:function(){return{title:this.data.title,path:"/pages/find_doctor/index"}},getNavbarClinicList:function(){var t=this,i=this.data.alreadyGetClinicList;wx.request({url:o,method:"GET",header:{Cookie:r.globalData.sessionid},success:function(e){var a=e.data,n=void 0===a?{}:a;if(0===n.error_code){var o=n.data||[];t.setData({navClinicList:o}),t.getDoctorsList(0),console.log("所有的一级科室",i)}else wx.showToast({icon:"none",title:"科室请求出错，请重试"})},fail:function(){wx.showToast({icon:"none",title:"网络出错，请重试"})}})},getConfData:function(){var t=this,i={conf_type_list:JSON.stringify([1,2,3]),from_type:1,platform:"weixin_mini"};wx.request({url:c,data:i,method:"GET",header:{Cookie:r.globalData.sessionid},success:function(i){var e=i.data,a=void 0===e?{}:e;if(0===a.error_code){var n=a.data.clinic_list;t.setData({clinicList:n,isShowClinic:!!n.length});var o=n.slice(0,8),s=Math.ceil((n.length-8)/2),c=n.slice(8);t.setData({firstClinicList:o,secondClinicList:c,secondItemNumber:s,diseaseList:a.data.disease_list,hospitalList:a.data.hospital_list})}else wx.showToast({icon:"none",title:"数据请求出错，请重试"})},fail:function(){wx.showToast({icon:"none",title:"网络出错，请重试"}),t.setData({isEmpty:!0})}})},jumpOtherUrl:function(t){var i=this,e=(t.currentTarget||{}).dataset,a=void 0===e?{}:e,n=a.type,o=a.name,s=a.click_position,c=void 0===s?"":s,l=a.data;c&&(o?r.sensors.track("AppClick",{app:"weixin_mini",click_position:c,page_readable_name:"找医生首页",click_position_value:o}):r.sensors.track("AppClick",{app:"weixin_mini",click_position:c,page_readable_name:"找医生首页"})),this.pageVisitReport({clickPosition:c,clickOrder:0}).then((function(){var t=i.getJumpUrl(n,l);console.log("跳转到其他页面",t),wx.navigateTo({url:t})}))},getJumpUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(t){case"findDoctor":return"/pages/inquery/inquery?from_page=find_doc_fast";case"vipDoctor":return"/pages/h5_webview/index?url=".concat(encodeURIComponent("".concat(n,"/v-m-general/authoritative-expert?from_type=1&from_visit_page=").concat(this.data.visitPageName)));case"freeDiagnose":return"/pages/h5_webview/index?url=".concat(encodeURIComponent("".concat(n,"/v-m-general/free-clinic?from_visit_page=").concat(this.data.visitPageName)));case"clinic":return"".concat(i,"&show_item_type_id=2&input_type=常见科室");case"moreClinic":return"/pages/find_doctor_list/index?show_item_type_id=2&show_clinic_window=1&from_visit_page=".concat(this.data.visitPageName);case"moreClinicDoctor":return"/pages/find_doctor_list/index?from_visit_page=".concat(this.data.visitPageName);case"disease":return"/pages/find_doctor_list/index?query=".concat(i,"&input_type=常见疾病&from_visit_page=").concat(this.data.visitPageName);case"moreDisease":return"/pages/find_doctor_list/index?show_item_type_id=3&show_clinic_window=1&from_visit_page=".concat(this.data.visitPageName);case"hospitalList":return"/pages/h5_webview/index?url=".concat(encodeURIComponent("".concat(n,"/v-m-general/hospital-list?from_type=1&from_visit_page=").concat(this.data.visitPageName)));case"hospital":return"/pages/find_doctor_list/index?query=".concat(i,"&from_visit_page=").concat(this.data.visitPageName);case"bottomMoreList":return"/pages/find_doctor_list/index?clinic_name=".concat(this.data.currentClinc.clinicName||"","&first_clinic_no=").concat(this.data.currentClinc.clinicNo||"","&show_clinic_window=0&show_item_type_id=2&from_visit_page=").concat(this.data.visitPageName);default:return""}},focus:function(){var t=this;console.log("focus"),r.sensors.track("AppClick",{app:"weixin_mini",click_position:"顶部搜索框",page_readable_name:"找医生首页"}),this.pageVisitReport({clickPosition:"顶部搜索框",clickOrder:0}).then((function(){wx.navigateTo({url:"/pages/find_doctor_list/index?visible=1&from=main&from_visit_page=".concat(t.data.visitPageName)})}))},scroll:function(t){var i=this,e=wx.createSelectorQuery();e.select("#doctors-list")&&(e.select("#doctors-list").boundingClientRect(),e.selectViewport().scrollOffset(),e.exec((function(t){t[0]&&(t[0].top<=55?i.setData({fixTop:!0}):i.data.fixTop&&i.setData({fixTop:!1}))})))},switchTab:function(t){if(!this.data.loading){var i=(t.currentTarget||{}).dataset,e=void 0===i?{}:i;this.setData({currentClinc:e}),this.swiperChange(e.current),this.getNavBarScrollPosition(e.current)}},swiperSwitchTab:function(t){if(!this.data.loading){var i=t.detail.current;console.log("滑动切换",i),this.swiperChange(i),this.getNavBarScrollPosition(i)}},swiperChange:function(t){this.clearDoctorInfoList(),this.getDoctorsList(t)},getNavBarScrollPosition:function(t){var i=t,e=Math.floor(400/7);if(this.setData({navScrollLeft:(i-2)*e*2}),this.data.currentTab==i)return!1;this.setData({currentTab:i,currentTabName:this.data.navClinicList[i].clinic_name})},getSwiperContentHeight:function(t){var e=this,a=wx.createSelectorQuery().select("#swiperItem".concat(t));a&&a.boundingClientRect((function(a){e.data.navClinicList[t]&&a&&(e.setData(i({},"navClinicList[".concat(t,"].height"),a.height+15)),e.setSwiperContentHeight(t))})).exec()},setSwiperContentHeight:function(t){this.data.navClinicList[t].height<150&&(this.data.navClinicList[t].height=150),this.setData({swiperHeight:this.data.navClinicList[t].height})},clearDoctorInfoList:function(){this.setData({"paganition.page":1,"paganition.has_more":!0,doctorInfoList:[]})},getDoctorsList:function(t){var a=this,n=this.data,o=n.loading,c=n.navClinicList,r=void 0===c?[]:c,l="navClinicList[".concat(t,"].doctorList");if(!(r[t].doctorList&&r[t].doctorList.length||o)){var d=this.getSearchParams(t);this.data.visitReportFilter=d,this.setData({loading:!0}),(0,e.default)({url:s,data:d,method:"GET",success:function(e){var n,o=e.data,s=void 0===o?{}:o;0===s.error_code?(a.setData((n={server_params:s.data.server_params,doctorInfoList:s.data.item_list,"paganition.has_more":s.data.has_more,loading:!1},i(n,l,s.data.item_list||[]),i(n,"currentTabName",a.data.navClinicList[t].clinic_name),i(n,"intention",s.data.intention||""),i(n,"synonym_query",s.data.synonym_query||""),n)),a.getSwiperContentHeight(a.data.currentTab)):(wx.showToast({icon:"none",title:"数据请求出错，请重试"}),a.setData({loading:!1}))},fail:function(){wx.showToast({icon:"none",title:"网络出错，请重试"}),a.setData({isEmpty:!0,loading:!1})}})}},getSearchParams:function(t){var i=this.data,e=i.paganition,a=void 0===e?{}:e,n=i.navClinicList,o=void 0===n?[]:n;return{from_type:1,platform:"weixin_mini",clinic_no:o[t]&&o[t].clinic_no,page:a.page,count_per_page:a.countPerPage,secureId:wx.getStorageSync("open_id")||wx.getStorageSync("device_id")}},onDoctorCardClick:function(t){var i=this,e=t.detail,a=e.doctorId,n=e.serverParams,o=e.intention,s=e.hasOnlineServices,c=e.synonymQuery,r=e.isExpert,l=e.index,d=e.cyRedirect,p={};if(d)try{p=JSON.parse(d)}catch(t){console.log("json.parse error>>",d)}this.pageVisitReport({clickPosition:"医生卡片",clickOrder:l,cyRedirect:p}).then((function(){r?wx.navigateTo({url:"/pages/doc_mainpage/index?doc_id=".concat(a,"&server_params=").concat(n,"&source=vip&has_online_services=").concat(s,"&intention=").concat(o,"&synonym_query=").concat(c,"&from_visit_page=").concat(i.data.visitPageName)}):wx.navigateTo({url:"/pages/doc_mainpage/index?doc_id=".concat(a,"&server_params=").concat(n,"&intention=").concat(o,"&synonym_query=").concat(c,"&from_visit_page=").concat(i.data.visitPageName)})}))},pageVisitReport:function(t){var i=t||{},e=i.cyRedirect,n=i.clickPosition,o=i.clickOrder;return(0,a.default)({fromName:this.data.fromVisitPage,name:this.data.visitPageName,extraInfo:{filter:this.data.visitReportFilter||{},cy_redirect:e||{},click_position:n||"",click_order:o||0}})}});
},{isPage:true,isComponent:true,currentFile:'pages/find_doctor/index.js'});require("pages/find_doctor/index.js");