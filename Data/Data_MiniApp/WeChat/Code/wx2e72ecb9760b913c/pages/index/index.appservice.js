$gwx_XC_138=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_138 || [];
function gz$gwx_XC_138_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_138_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_138_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_138_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'main-page-main-container'])
Z([3,'updatePlaceholderSwiper'])
Z([3,'placeholder-list'])
Z([1,0])
Z([1,300])
Z([1,2000])
Z([[6],[[7],[3,'placeholderConfig']],[3,'list']])
Z([3,'text'])
Z([[6],[[7],[3,'item']],[3,'icon']])
Z([[7],[3,'isNewPageStyle']])
Z([[6],[[7],[3,'qa_guide_info']],[3,'prompt_msg']])
Z([[7],[3,'serviceOrderLayoutList']])
Z([3,'type'])
Z([[2,'&&'],[[2,'&&'],[[6],[[7],[3,'item']],[3,'value']],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'length']]],[[2,'==='],[[6],[[7],[3,'item']],[3,'type']],[1,'swiper']]])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'type']],[1,'firmSection']],[[6],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_first_page']],[3,'length']]])
Z([a,[3,'firm-area-section '],[[2,'?:'],[[2,'<='],[[6],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_second_page']],[3,'length']],[1,0]],[1,'add-padding'],[1,'']]])
Z([3,'handleScroll'])
Z([3,'firm-area-scroll-view'])
Z([1,true])
Z(z[17])
Z([1,false])
Z([a,[3,'height: '],[[2,'?:'],[[2,'>'],[[6],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_first_page']],[3,'length']],[1,5]],[1,'298rpx'],[1,'149rpx']]])
Z([[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_first_page']])
Z([3,'icon'])
Z([3,'clickOnFirmItem'])
Z([a,[3,'firm-items '],[[2,'?:'],[[2,'>='],[[7],[3,'index']],[1,5]],[1,'bottom-line'],[1,'']]])
Z([[6],[[7],[3,'item']],[3,'h5_title']])
Z([[7],[3,'index']])
Z([3,'first'])
Z([[6],[[7],[3,'item']],[3,'text']])
Z([3,'firm-area'])
Z([[6],[[7],[3,'item']],[3,'navigateUrl']])
Z([[6],[[7],[3,'item']],[3,'tag_url']])
Z([[6],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_second_page']],[3,'length']])
Z([[2,'>'],[[6],[[6],[[6],[[7],[3,'item']],[3,'value']],[3,'important_position_second_page']],[3,'length']],[1,0]])
Z([[2,'&&'],[[6],[[7],[3,'operate_info']],[3,'full_width_list']],[[6],[[6],[[7],[3,'operate_info']],[3,'full_width_list']],[3,'length']]])
Z([[6],[[7],[3,'operate_info']],[3,'full_width_list']])
Z([3,'image'])
Z([3,'tapOnMarketingItem'])
Z([a,[3,'marketing-container one-row '],[[2,'?:'],[[6],[[7],[3,'item']],[3,'show_title']],[1,''],[1,'no-padding']]])
Z(z[27])
Z([3,'row'])
Z([[7],[3,'item']])
Z([[6],[[7],[3,'item']],[3,'show_title']])
Z([[6],[[7],[3,'item']],[3,'left_icon']])
Z([[6],[[7],[3,'item']],[3,'image']])
Z([[6],[[7],[3,'item']],[3,'bottom_icon']])
Z([[2,'&&'],[[6],[[7],[3,'operate_info']],[3,'half_width_list']],[[6],[[6],[[7],[3,'operate_info']],[3,'half_width_list']],[3,'length']]])
Z([[6],[[7],[3,'operate_info']],[3,'half_width_list']])
Z(z[37])
Z([[2,'<'],[[7],[3,'index']],[1,2]])
Z(z[38])
Z([a,[3,'marketing-column '],[[2,'?:'],[[2,'==='],[[7],[3,'index']],[1,0]],[1,'first'],[1,'']],[3,' '],z[39][2]])
Z(z[27])
Z([3,'column'])
Z(z[42])
Z(z[43])
Z(z[44])
Z(z[45])
Z(z[46])
Z([[6],[[7],[3,'newUserWelfare']],[3,'image']])
Z([[6],[[6],[[7],[3,'strictlySelectedDoctor']],[3,'doctors']],[3,'length']])
Z([[6],[[7],[3,'strictlySelectedDoctor']],[3,'doctors']])
Z([3,'name'])
Z([3,'jumpToDoctorMain'])
Z([a,[3,'single-doctor '],[[2,'?:'],[[2,'<='],[[7],[3,'index']],[1,1]],[1,'first-row'],[1,'']]])
Z([[6],[[7],[3,'item']],[3,'doctor_info']])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'image']])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'is_active']])
Z([3,'68rpx'])
Z([3,'doctor-tags'])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'is_3a_hospital']])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'is_top_100_hospital']])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'special_service']],[[6],[[7],[3,'special_service']],[3,'specialServiceFirstLine']]],[[6],[[6],[[7],[3,'special_service']],[3,'specialServiceFirstLine']],[3,'length']]])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'healthy_mall_info']],[[6],[[7],[3,'healthy_mall_info']],[3,'item_list']]],[[6],[[6],[[7],[3,'healthy_mall_info']],[3,'item_list']],[3,'length']]])
Z([3,'topic-list'])
Z([[7],[3,'scrolling_info']])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'hover_icon_ad']],[[6],[[7],[3,'hover_icon_ad']],[3,'image']]],[[6],[[7],[3,'hover_icon_ad']],[3,'shouldShow']]])
Z([[2,'==='],[[6],[[7],[3,'hover_icon_ad']],[3,'is_can_close']],[1,'yes']])
Z([[7],[3,'hideTabbarCard']])
Z([[6],[[7],[3,'toast_ads']],[3,'cy_redirect']])
Z([[6],[[7],[3,'toast_ads']],[3,'ad_id']])
Z([[6],[[7],[3,'toast_ads']],[3,'ad_title']])
Z([[6],[[7],[3,'toast_ads']],[3,'ad_type']])
Z([[6],[[7],[3,'toast_ads']],[3,'jump_third']])
Z([[6],[[7],[3,'toast_ads']],[3,'mini_app_id']])
Z([[6],[[7],[3,'toast_ads']],[3,'target_type']])
Z([[6],[[7],[3,'toast_ads']],[3,'wx_mini_page']])
Z([3,'jumpToNewUserWelfare'])
Z([[6],[[7],[3,'toast_ads']],[3,'image']])
Z([[6],[[7],[3,'toast_ads']],[3,'url']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_138_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_138_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_138=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_138=true;
var x=['./pages/index/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_138_1()
var l18=_n('view')
_rz(z,l18,'class',0,e,s,gg)
var hA9=_mz(z,'swiper',['autoplay',-1,'circular',-1,'vertical',-1,'bindchange',1,'class',1,'current',2,'duration',3,'interval',4],[],e,s,gg)
var oB9=_v()
_(hA9,oB9)
var cC9=function(lE9,oD9,aF9,gg){
var eH9=_v()
_(aF9,eH9)
if(_oz(z,8,lE9,oD9,gg)){eH9.wxVkey=1
}
eH9.wxXCkey=1
return aF9
}
oB9.wxXCkey=2
_2z(z,6,cC9,e,s,gg,oB9,'item','index','text')
_(l18,hA9)
var a28=_v()
_(l18,a28)
if(_oz(z,9,e,s,gg)){a28.wxVkey=1
}
var t38=_v()
_(l18,t38)
if(_oz(z,10,e,s,gg)){t38.wxVkey=1
}
var bI9=_v()
_(l18,bI9)
var oJ9=function(oL9,xK9,fM9,gg){
var hO9=_n('view')
var oP9=_v()
_(hO9,oP9)
if(_oz(z,13,oL9,xK9,gg)){oP9.wxVkey=1
}
var cQ9=_v()
_(hO9,cQ9)
if(_oz(z,14,oL9,xK9,gg)){cQ9.wxVkey=1
var oR9=_n('view')
_rz(z,oR9,'class',15,oL9,xK9,gg)
var aT9=_mz(z,'scroll-view',['scrollX',-1,'bind:scroll',16,'class',1,'enhanced',2,'id',3,'showScrollbar',4,'style',5],[],oL9,xK9,gg)
var eV9=_v()
_(aT9,eV9)
var bW9=function(xY9,oX9,oZ9,gg){
var c29=_mz(z,'view',['bind:tap',24,'class',1,'data-h5-title',2,'data-index',3,'data-section',4,'data-text',5,'data-track',6,'url',7],[],xY9,oX9,gg)
var h39=_v()
_(c29,h39)
if(_oz(z,32,xY9,oX9,gg)){h39.wxVkey=1
}
h39.wxXCkey=1
_(oZ9,c29)
return oZ9
}
eV9.wxXCkey=2
_2z(z,22,bW9,oL9,xK9,gg,eV9,'item','index','icon')
var tU9=_v()
_(aT9,tU9)
if(_oz(z,33,oL9,xK9,gg)){tU9.wxVkey=1
}
tU9.wxXCkey=1
_(oR9,aT9)
var lS9=_v()
_(oR9,lS9)
if(_oz(z,34,oL9,xK9,gg)){lS9.wxVkey=1
}
lS9.wxXCkey=1
_(cQ9,oR9)
}
oP9.wxXCkey=1
cQ9.wxXCkey=1
_(fM9,hO9)
return fM9
}
bI9.wxXCkey=2
_2z(z,11,oJ9,e,s,gg,bI9,'item','index','type')
var e48=_v()
_(l18,e48)
if(_oz(z,35,e,s,gg)){e48.wxVkey=1
var o49=_v()
_(e48,o49)
var c59=function(l79,o69,a89,gg){
var e09=_mz(z,'view',['bind:tap',38,'class',1,'data-index',2,'data-marketing-type',3,'data-target',4],[],l79,o69,gg)
var bA0=_v()
_(e09,bA0)
if(_oz(z,43,l79,o69,gg)){bA0.wxVkey=1
}
else{bA0.wxVkey=2
var oB0=_v()
_(bA0,oB0)
if(_oz(z,44,l79,o69,gg)){oB0.wxVkey=1
}
var xC0=_v()
_(bA0,xC0)
if(_oz(z,45,l79,o69,gg)){xC0.wxVkey=1
}
var oD0=_v()
_(bA0,oD0)
if(_oz(z,46,l79,o69,gg)){oD0.wxVkey=1
}
oB0.wxXCkey=1
xC0.wxXCkey=1
oD0.wxXCkey=1
}
bA0.wxXCkey=1
_(a89,e09)
return a89
}
o49.wxXCkey=2
_2z(z,36,c59,e,s,gg,o49,'item','index','image')
}
var b58=_v()
_(l18,b58)
if(_oz(z,47,e,s,gg)){b58.wxVkey=1
var fE0=_v()
_(b58,fE0)
var cF0=function(oH0,hG0,cI0,gg){
var lK0=_v()
_(cI0,lK0)
if(_oz(z,50,oH0,hG0,gg)){lK0.wxVkey=1
var aL0=_mz(z,'view',['bind:tap',51,'class',1,'data-index',2,'data-marketing-type',3,'data-target',4],[],oH0,hG0,gg)
var tM0=_v()
_(aL0,tM0)
if(_oz(z,56,oH0,hG0,gg)){tM0.wxVkey=1
}
else{tM0.wxVkey=2
var eN0=_v()
_(tM0,eN0)
if(_oz(z,57,oH0,hG0,gg)){eN0.wxVkey=1
}
var bO0=_v()
_(tM0,bO0)
if(_oz(z,58,oH0,hG0,gg)){bO0.wxVkey=1
}
var oP0=_v()
_(tM0,oP0)
if(_oz(z,59,oH0,hG0,gg)){oP0.wxVkey=1
}
eN0.wxXCkey=1
bO0.wxXCkey=1
oP0.wxXCkey=1
}
tM0.wxXCkey=1
_(lK0,aL0)
}
lK0.wxXCkey=1
return cI0
}
fE0.wxXCkey=2
_2z(z,48,cF0,e,s,gg,fE0,'item','index','image')
}
var o68=_v()
_(l18,o68)
if(_oz(z,60,e,s,gg)){o68.wxVkey=1
}
var x78=_v()
_(l18,x78)
if(_oz(z,61,e,s,gg)){x78.wxVkey=1
var xQ0=_v()
_(x78,xQ0)
var oR0=function(cT0,fS0,hU0,gg){
var cW0=_mz(z,'view',['bind:tap',64,'class',1,'data-doctor-info',2],[],cT0,fS0,gg)
var oX0=_mz(z,'doctor-avatar',['avatarUrl',67,'isActive',1,'size',2],[],cT0,fS0,gg)
_(cW0,oX0)
var lY0=_n('view')
_rz(z,lY0,'class',70,cT0,fS0,gg)
var aZ0=_v()
_(lY0,aZ0)
if(_oz(z,71,cT0,fS0,gg)){aZ0.wxVkey=1
}
var t10=_v()
_(lY0,t10)
if(_oz(z,72,cT0,fS0,gg)){t10.wxVkey=1
}
aZ0.wxXCkey=1
t10.wxXCkey=1
_(cW0,lY0)
_(hU0,cW0)
return hU0
}
xQ0.wxXCkey=4
_2z(z,62,oR0,e,s,gg,xQ0,'item','index','name')
}
var o88=_v()
_(l18,o88)
if(_oz(z,73,e,s,gg)){o88.wxVkey=1
}
var f98=_v()
_(l18,f98)
if(_oz(z,74,e,s,gg)){f98.wxVkey=1
}
var e20=_n('news-list')
_rz(z,e20,'class',75,e,s,gg)
_(l18,e20)
var b30=_n('toast-bubble')
_rz(z,b30,'textList',76,e,s,gg)
_(l18,b30)
var o40=_n('cy-user-phone')
_(l18,o40)
var c08=_v()
_(l18,c08)
if(_oz(z,77,e,s,gg)){c08.wxVkey=1
var x50=_v()
_(c08,x50)
if(_oz(z,78,e,s,gg)){x50.wxVkey=1
}
x50.wxXCkey=1
}
var o60=_n('tabbar-bubble')
_rz(z,o60,'hideTabbarCard',79,e,s,gg)
_(l18,o60)
var f70=_mz(z,'image-mask',['adCyRedirect',80,'adId',1,'adTitle',2,'adType',3,'adJumpThird',4,'adMiniAppId',5,'adTargetType',6,'adWxMiniPage',7,'bind:jumpPageEvent',8,'imgUrl',9,'url',10],[],e,s,gg)
_(l18,f70)
a28.wxXCkey=1
t38.wxXCkey=1
e48.wxXCkey=1
b58.wxXCkey=1
o68.wxXCkey=1
x78.wxXCkey=1
x78.wxXCkey=3
o88.wxXCkey=1
f98.wxXCkey=1
c08.wxXCkey=1
_(r,l18)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_138";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_138();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/index.wxml'] = [$gwx_XC_138, './pages/index/index.wxml'];else __wxAppCode__['pages/index/index.wxml'] = $gwx_XC_138( './pages/index/index.wxml' );
	;__wxRoute = "pages/index/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/index.js";define("pages/index/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../@babel/runtime/helpers/interopRequireDefault");require("../../@babel/runtime/helpers/Arrayincludes");var t=require("../../@babel/runtime/helpers/objectSpread2"),a=e(require("../../@babel/runtime/regenerator")),i=require("../../@babel/runtime/helpers/asyncToGenerator"),n=require("../../92BC1755829A079CF4DA7F52C55D7B70.js"),o=e(require("../../7B9C8496829A079C1DFAEC91795C7B70.js")),r=e(require("../../3B123513829A079C5D745D1477BC7B70.js")),c=require("../../43A2F676829A079C25C49E711B4C7B70.js"),s=require("../../1D735BD7829A079C7B1533D0C5CC7B70.js"),l=getApp(),d=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js").baseUrl,_=require("../../FE1120A4829A079C987748A30A3D7B70.js"),u=_.subscribeBtnShow,g=_.changeIsSubscribeConsultMessageValue,p=_.saveSubscribeMessage,h=_.subscribeMessage,f=_.jumpToTargetPage,v=d+"/cooperation/wap/homepage_info/?from_wx_mini=1&need_ab_test=1",m=d+"/api/v8/user_home_page/hot_sales_v2/?from_wx_mini=1",w=d+"/api/front_screen/ws_data/?from_wx_mini=1",x=d+"/ad/get_homepage_ad/?from_wx_mini=1",S=d+"/events/new_user_welfare/entrance_info/?from_wx_mini=1",y=["4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4"];Page({data:{isLogin:!1,options:{},inviter_id:"",scrollProgressBarLeft:0,believe_info:{},scrolling_info:[],buy_drug_info:{},find_doc_info:{},healthy_mall_info:{},quick_ask_info:{},second_endpoint:{},toast_ads:[],newUserWelfare:{},special_service:{},scrollViewWidth:0,scrollProgressBarWidth:0,shouldIndocatorShow:!1,hideTabbarCard:l.globalData.hide_tabbar_card,qa_guide_info:{},hover_icon_ad:{},operate_info:{},onLoadCheck:!1,signInImgUrl:"",shouldFloatingAdHide:!1,isGetAdDetailSuccess:!1,isGetNewUserWelfareSuccess:!1,strictlySelectedDoctor:{},isNewPageStyle:!1,serviceOrderLayoutList:[],placeholderConfig:{icon:"https://staff.chunyu.mobi/@/media/images/2023/12/08/325c/86b618a0a5d3_w42_h42_.png",list:[],hasDefaultPlaceholder:!1},currentPlaceholderIndex:0},scrollDebounce:{},onLoad:function(e){var t=this;getApp().setWatcher(this,l.globalData,this.watch),this.legacyMainPageLogic(e),(0,c.manualLogin)().then((function(){t.getMainInfo()})),this.getSpecialService(),u(y,g),this.getScrollingInfo(),setInterval(this.getScrollingInfo,6e4),this.homePageRedirect(e),this.scrollDebounce=(0,n.debounce)((function(){t.setData({shouldFloatingAdHide:!1})}),3e3)},onPullDownRefresh:function(){this.getMainInfo(),this.getSpecialService()},onShow:function(){var e=this;this.loginCheck().then((function(){e.afterLoginAjax(),e.data.onLoadCheck&&e.hotRefresh(),e.data.onLoadCheck=!0}))},onReady:function(){var e=this;(0,n.getElementRec)("#firm-area-scroll-view").then((function(t){e.data.scrollViewWidth=t.width}))},updatePlaceholderSwiper:function(e){this.setData({currentPlaceholderIndex:e.detail.current})},afterLoginAjax:function(){var e=this;return i(a.default.mark((function t(){var i,n,o,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.data,n=i.isLogin,o=i.isGetAdDetailSuccess,s=i.isGetNewUserWelfareSuccess,n){t.next=4;break}return t.next=4,(0,c.autoLogin)();case 4:o||e.getAdDetail(),s||e.getNewUserWelfare(),(0,r.default)({fromName:"",name:"首页-小程序",extraInfo:{}});case 7:case"end":return t.stop()}}),t)})))()},getAdDetail:function(){var e=this;(0,o.default)({url:x,data:{from_wx_mini:1,device_id:wx.getStorageSync("open_id")||wx.getStorageSync("device_id")},success:function(t){if(200===t.statusCode&&t.data){var a=t.data||{};e.processToastAdsInfo(a.toast_ads),e.setData({isGetAdDetailSuccess:!0,hover_icon_ad:a.hover_icon_ad||{}}),wx.getStorageSync("CLOSED_HOMEPAGE_FLOATING_ADS_ID")!==e.data.hover_icon_ad.ad_id&&e.setData({"hover_icon_ad.shouldShow":!0})}}})},getNewUserWelfare:function(){var e=this;(0,o.default)({url:S,data:{from_wx_mini:1,device_id:wx.getStorageSync("open_id")||wx.getStorageSync("device_id"),scene:"homepage_feed"},success:function(t){200===t.statusCode&&t.data&&e.setData({isGetNewUserWelfareSuccess:!0,newUserWelfare:t.data})}})},onReachBottom:function(){this.triggerLoadTopic()},onPageScroll:function(){this.setData({shouldFloatingAdHide:!0}),this.scrollDebounce()},watch:{hide_tabbar_card:function(e){this.setData({hideTabbarCard:e})}},legacyMainPageLogic:function(e){var t=this;"pc_nav"==e.enter_from&&wx.reportAnalytics("pc_nav",{source_entrence:"miniProScan"}),function(e){var a=e.inviter_id,i=e.source||"";a&&"user_home"==i&&(wx.setStorage({key:"app_inviter_id",data:a}),wx.setStorage({key:"source_from",data:"user_home"}),t.setData({appInviterId:a}))}(e),e.user_id&&wx.setStorage({key:"user_id",data:e.user_id});var a=e.adcopy;null!=a&&l.sensors.track("wx_ad_home_nologin",{adcopy:a}),function(e){var t=e.source||"",a=Number(e.inviter_id||""),i=null;e.is_invitation_task?i={from_type:"邀请好友得红包",activity_id:84,source_type:"smm-fxdhb"}:"good_assess"==t||"reward_doctor"==t?i={from_type:"评价和送心意后分享",activity_id:87,source_type:"smm-pjsxyhfx"}:"user_home"==e.source?i={from_type:"邀请好友得金币",activity_id:89,source_type:"smm-fxdjb"}:a&&(i={from_type:"首页默认分享",activity_id:88,source_type:"smm-homedefaultshare"}),i&&(i.inviter_user_id=a,wx.setStorageSync("authorizationPointData",i))}(e)},triggerLoadTopic:function(){this.selectComponent(".topic-list").getNewsList()},loginCheck:function(){var e=this;return new Promise((function(t){l.globalData.appIsLogin.then((function(){e.data.isLogin?(console.log("login check","true1"),t()):(e.setData({isLogin:!0}),console.log("login check",!0),t())}),(function(){e.setData({isLogin:!1}),console.log("login check",!1),t()}))}))},tapLogin:function(){l.sensors.track("AppClick",{page_readable_name:"登录授权按钮",click_position:"首页登录提示条"})},loginEvent:function(){this.setData({isLogin:!0})},handleScroll:function(e){var t=e.detail,a=t.scrollLeft/(t.scrollWidth-this.data.scrollViewWidth),i=Math.floor((20-this.data.scrollProgressBarWidth)*a);this.setData({scrollProgressBarLeft:i})},onInputConfirm:function(e){var t=e.detail.value;console.log(t),t&&(wx.navigateTo({url:"../home_search/index?query="+t+"&from_visit_page=首页-小程序"}),l.sensors.track("AppClick",{platform_source:l.globalData.partner,click_position:"大搜输入框搜索"}))},goSearchMiddle:function(){if(l.sensors.track("AppClick",{app:"weixin_mini",click_position:"大搜",page_readable_name:"春雨首页"}),0===this.data.currentPlaceholderIndex&&this.data.placeholderConfig.hasDefaultPlaceholder)wx.navigateTo({url:"/pages/home_search/index?from_visit_page=首页-小程序"});else{var e=this.data.placeholderConfig.list[this.data.currentPlaceholderIndex].text;wx.navigateTo({url:"/pages/home_search/index?from_visit_page=首页-小程序&placeholder=".concat(e)})}},startSearch:function(){l.sensors.track("AppClick",{app:"weixin_mini",click_position:"大搜搜索",page_readable_name:"春雨首页"});var e=this.data.placeholderConfig.list[this.data.currentPlaceholderIndex].icon?1:0;if(0===this.data.currentPlaceholderIndex&&this.data.placeholderConfig.hasDefaultPlaceholder)wx.navigateTo({url:"/pages/home_search/index?from_visit_page=首页-小程序&from_type=广告词"});else{var t=this.data.placeholderConfig.list[this.data.currentPlaceholderIndex].text;wx.navigateTo({url:"/pages/home_search/index?from_visit_page=首页-小程序&query=".concat(t,"&from_type=广告词&has_icon=").concat(e)})}},getMainInfo:function(){var e=this;wx.request({url:v,header:{Cookie:l.globalData.sessionid},data:{abtest_v2:1,from_wx_mini:1,version:s.productionVersion,device_id:wx.getStorageSync("open_id")||wx.getStorageSync("device_id")},success:function(t){var a=t.data;a.test_group_new_style&&e.setData({isNewPageStyle:!0}),a.believe_info.url=encodeURIComponent(a.believe_info.url),e.processServiceOrderLayoutList(a.important_position,a.banners,a.test_group_new_style),e.processHealthyMallInfo(a.healthy_mall_info),e.processPlaceholderList(a.search_config),e.setData({believe_info:a.believe_info,buy_drug_info:a.buy_drug_info,find_doc_info:a.find_doc_info,banners:a.banners,quick_ask_info:a.quick_ask_info,second_endpoint:a.second_endpoint,qa_guide_info:a.qa_guide_info||{},operate_info:a.operate_info||{},hover_icon_ad:a.hover_icon_ad||{},signInImgUrl:a.sign_in_image,newUserWelfare:a.new_user_welfare||{},strictlySelectedDoctor:a.strictly_selected_doctor||{}}),wx.getStorageSync("CLOSED_HOMEPAGE_FLOATING_ADS_ID")!==e.data.hover_icon_ad.ad_id&&e.setData({"hover_icon_ad.shouldShow":!0})}})},processPlaceholderList:function(e){if(e){var t=(e.ad_keywords.length?e.ad_keywords:[e.placeholder].concat(e.default_keywords)).map((function(t,a){return t!==e.placeholder?{text:t,icon:a<=(e.ad_keywords.length?1:2)?e.keyword_icon:""}:{text:t}}));this.setData({"placeholderConfig.list":t,"placeholderConfig.hasDefaultPlaceholder":!e.ad_keywords.length})}},processToastAdsInfo:function(e){var t=e&&e.length;if(t){var a=Math.floor(Math.random()*t+0);this.setData({toast_ads:e[a]})}},processServiceOrderLayoutList:function(e,a,i){e.forEach((function(e){e.navigateUrl="/pages/h5_webview/index?url=".concat(encodeURIComponent(e.jump_url))}));var n,o=e.slice(0,10);if(e.length>10){var r=(n=e.slice(10,20)).length,c=5/(5+(r+r%2)/2);this.setData({shouldIndocatorShow:!0,importantPositionSecondPageWidth:71*Math.ceil(e.slice(10,20).length/2),scrollProgressBarWidth:Math.floor(20*c)})}var s={type:"swiper",value:a},l={type:"firmSection",value:t({important_position_first_page:o},n&&n.length&&{important_position_second_page:n})};this.setData({serviceOrderLayoutList:[s,l]})},onShareAppMessage:function(){var e=wx.getStorageSync("sessionUserId");return{title:"春雨医生-汇聚全国三甲名医，随时咨询",path:"/pages/index/index?inviter_id=".concat(e)}},processSpecialServiceInfo:function(e){var t=e.item_list;t.forEach((function(e){e.navigateUrl="/pages/h5_webview/index?url=".concat(encodeURIComponent(e.param.url))})),e.navigateUrl="/pages/h5_webview/index?url=".concat(encodeURIComponent(e.more_url)),e.specialServiceFirstLine=t.slice(0,2),e.specialServiceSecondLine=t.slice(2,4),e.specialServiceThirdLine=t.slice(4),this.setData({special_service:e}),wx.stopPullDownRefresh()},processHealthyMallInfo:function(e){e.item_list&&e.item_list.length&&(e.navigateUrl="/pages/h5_webview/index?url=".concat(encodeURIComponent(e.show_more_url)),e.item_list.forEach((function(e){e.navigateUrl="/pages/h5_webview/index?url=".concat(encodeURIComponent(e.jump_url))})),this.setData({healthy_mall_info:e}))},getSpecialService:function(){var e=this;wx.request({url:m,header:{Cookie:l.globalData.sessionid},success:function(t){var a=t.data;e.processSpecialServiceInfo(a)}})},jumpToH5:function(e){wx.navigateTo({url:"/pages/h5_webview?url=".concat(encodeURIComponent(e))})},clickSpecialService:function(e){this.trackEvent(e);var t=Number(e.currentTarget.dataset.index);wx.navigateTo({url:this.data.special_service.item_list[t].navigateUrl})},clickOnBanner:function(e){this.trackEvent(e);var t=Number(e.currentTarget.dataset.index),a=this.data.serviceOrderLayoutList.filter((function(e){return"swiper"===e.type}))[0].value[t];a.target_type&&"wx_mini"===a.target_type?a.jump_third?wx.navigateToMiniProgram({appId:a.mini_app_id,path:a.wx_mini_page}):wx.navigateTo({url:a.wx_mini_page}):wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(a.url))})},getScrollingInfo:function(){var e=this;wx.request({url:w,header:{Cookie:l.globalData.sessionid},success:function(t){var a=t.data;e.setData({scrolling_info:a.accept_dynamic})}})},toSearch:function(){wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(d+"/v-m-general/search-polymerization"))})},clickOnFirmItem:function(e){var t=this;this.trackEvent(e);var a=function(e){var a=e.currentTarget.dataset.section,i=e.currentTarget.dataset.index,n={};return"first"===a?n=t.data.serviceOrderLayoutList.filter((function(e){return"firmSection"===e.type}))[0].value.important_position_first_page[i]:"second"===a&&(n=t.data.serviceOrderLayoutList.filter((function(e){return"firmSection"===e.type}))[0].value.important_position_second_page[i]),n}(e);"h5"===a.jump_type?l.globalData.appIsLogin.then((function(){var e=(0,n.addParameterToURL)(a.jump_url,"is_login=1");wx.navigateTo({url:"/pages/h5_webview/index?h5_title=".concat(a.h5_title||"","&url=").concat(encodeURIComponent(e))})})).catch((function(){wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(a.jump_url))})})):"self_mini"===a.jump_type?wx.navigateTo({url:a.jump_url}):"other_mini"===a.jump_type&&wx.navigateToMiniProgram({appId:a.mini_app_id,path:a.jump_url})},trackEvent:function(e){try{var t=e.currentTarget.dataset.track,a={app:"weixin_mini",page_readable_name:"春雨首页"};"certificate"===t&&(a.click_position="服务保障"),"fast_qa"===t&&(a.click_position="快速问诊"),"find_doc"===t&&(a.click_position="找医生"),"online_mall"===t&&(a.click_position="在家购药"),"banner_click"===t&&(a.ad_position="AD首页轮播banner点击",a.ad_id=e.currentTarget.dataset.adid,a.ad_title=e.currentTarget.dataset.adtitle),"firm-area"===t&&(a.click_position=e.currentTarget.dataset.text),"more_special_service"===t&&(a.click_position="特色服务-查看更多"),"special_service"===t&&(a.click_position="特色服务-".concat(e.currentTarget.dataset.index+1,"号位置")),"more_healthy_mall"===t&&(a.click_position="健康商城-查看更多"),"healthy_mall"===t&&(a.click_position="健康商城-".concat(e.currentTarget.dataset.index+1,"号位置"));var i=e.currentTarget.dataset.tracktype||"AppClick";console.log(a),l.sensors.track(i,a)}catch(e){console.log(e)}},homePageRedirect:function(e){console.log(e);var t={g:"/pages/doc_mainpage/index",q:"/pages/inquery/inquery",e:"/pages/emergency/index",f:"/pages/fast_phone/index",d:"/pages/find_doctor/index",dsl:"/pages/find_doctor_list/index",s:"/pages/home_search/index",h:"/pages/h5_webview/index",n:"/pages/new_user_welfare/index",ch:"/pages/h5_webview/index",i:""};if(e.scene){var a=(0,n.getSceneQueryStr)("p",e.scene);if("g"===a){var i=(0,n.getSceneQueryStr)("id",e.scene);wx.navigateTo({url:t[a]+"?scene=".concat(i)})}else if("h"===a)wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(d+"/v-m-general/hospital-list"))});else if("ch"===a){var o=(0,n.getSceneQueryStr)("h5",e.scene);o&&wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(o)})}else if("s"===a){var r=(0,n.getSceneQueryStr)("query",e.scene);wx.navigateTo({url:t[a]+"?query=".concat(r)})}else wx.navigateTo({url:t[a]})}else{var c=e.p,s=e.q;if(s&&(s=decodeURIComponent(s)),console.log("query",s),!c)return;if("g"===c){var l=e.id,_="".concat(t[c],"?scene=").concat(l);wx.navigateTo({url:_})}else if("s"===c){var u="".concat(t[c],"?query=").concat(s);wx.navigateTo({url:u})}else if("h"===c)wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(d+"/v-m-general/hospital-list"))});else if("dsl"===c){var g="".concat(t[c],"?query=").concat(s);wx.navigateTo({url:g})}else if("ch"===c){var p=e.h5;p&&wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(p)})}else wx.navigateTo({url:t[c]})}},hotRefresh:function(){var e=this;this.setData({signInImgUrl:""}),(0,o.default)({url:v,data:{from_wx_mini:1,device_id:wx.getStorageSync("open_id")||wx.getStorageSync("device_id")},success:function(t){(console.log(t),200===t.statusCode&&t.data)&&(e.setData({hover_icon_ad:t.data.hover_icon_ad||{},qa_guide_info:t.data.qa_guide_info||{},signInImgUrl:t.data.sign_in_image}),wx.getStorageSync("CLOSED_HOMEPAGE_FLOATING_ADS_ID")!==e.data.hover_icon_ad.ad_id&&e.setData({"hover_icon_ad.shouldShow":!0}))}})},tapOnQaInfo:function(){var e=this.data.qa_guide_info.cy_redirect.target_scheme;e.includes("pages/all_service/index")?wx.switchTab({url:e}):wx.navigateTo({url:e})},toGold:function(){var e=d+"/api/gold/homepage/?need_sign_for_gold=1&version=10.2.2&from_wxmini_home_page=1";wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(e))})},tapOnFloatingAd:function(){l.sensors.track("AppClick",{app:0,click_position:"悬浮图标",page_readable_name:"春雨首页"}),this.redirectForOperateSction(this.data.hover_icon_ad.cy_redirect)},closeFloatingAd:function(){wx.setStorageSync("CLOSED_HOMEPAGE_FLOATING_ADS_ID",this.data.hover_icon_ad.ad_id),this.setData({"hover_icon_ad.shouldShow":!1})},tapOnMarketingItem:function(e){var t=e.currentTarget.dataset.target;l.sensors.track("AppClick",{app:"weixin_mini",click_position:t.title,page_readable_name:"春雨首页"}),this.redirectForOperateSction(t.target_redirect)},redirectForOperateSction:function(e){"html"===(null==e?void 0:e.target_type)?wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(e.target_scheme))}):"wx_mini"===(null==e?void 0:e.target_type)&&(null!=e&&e.jump_third?wx.navigateToMiniProgram({appId:e.mini_app_id,path:e.target_scheme}):wx.navigateTo({url:e.target_scheme}))},tapOnMarketingBadge:function(e){var t,a=e.currentTarget.dataset.target;console.log(a),null!==(t=a.see_more_redirect)&&void 0!==t&&t.target_scheme?this.redirectForOperateSction(a.see_more_redirect):this.redirectForOperateSction(a.target_redirect)},jumpToNewUserWelfare:function(e){var t=this;return i(a.default.mark((function i(){var n,o,r;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("adDetail",e),n=null,"tap"===e.type?(n=(null===(o=t.data.newUserWelfare)||void 0===o?void 0:o.cy_redirect)||{},l.sensors.track("AppClick",{page_readable_name:"春雨首页",app:"weixin_mini",click_position:"新用户礼包常驻入口"})):n=e.detail,!l.globalData.isSubscribeConsultMessage){a.next=7;break}f(n),a.next=19;break;case 7:return a.prev=7,a.next=10,h(y);case 10:r=a.sent,p(y,r),f(n),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(7),f(n),console.log("error",a.t0);case 19:case"end":return a.stop()}}),i,null,[[7,15]])})))()},pageVisitReport:function(e){return(0,r.default)({fromName:"",name:"首页-小程序",extraInfo:e})},jumpToDoctorMain:function(e){var t,a,i=(e.currentTarget||{}).dataset,n=void 0===i?{}:i,o=null===(t=n.doctorInfo)||void 0===t||null===(a=t.cy_redirect)||void 0===a?void 0:a.click_info,r=n.doctorInfo;this.pageVisitReport(JSON.parse(o)).then((function(){r.is_expert,wx.navigateTo({url:"/pages/doc_mainpage/index?doc_id=".concat(r.doctor_id,"&from_visit_page=首页-小程序")})}))},goToMoreSelectedDoctors:function(){var e=this;l.sensors.track("AppClick",{app:"weixin_mini",click_position:"精选医生更多",page_readable_name:"春雨首页"}),this.pageVisitReport(JSON.parse(this.data.strictlySelectedDoctor.see_more_redirect.click_info)).then((function(){wx.navigateTo({url:e.data.strictlySelectedDoctor.see_more_redirect.target_scheme})}))}});
},{isPage:true,isComponent:true,currentFile:'pages/index/index.js'});require("pages/index/index.js");