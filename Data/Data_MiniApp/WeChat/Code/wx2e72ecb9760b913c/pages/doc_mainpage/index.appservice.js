$gwx_XC_74=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_74 || [];
function gz$gwx_XC_74_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_74_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_74_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_74_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'hasRepetitionConsult']])
Z([3,'continueAsk'])
Z([3,'reBuy'])
Z([3,'touchCancel'])
Z([3,'bindscroll'])
Z([a,[3,'container '],[[2,'?:'],[[7],[3,'vip_doctor']],[1,'vip-doctor-style'],[1,'']],[3,' '],[[2,'?:'],[[2,'&&'],[[7],[3,'vip_doctor']],[[2,'||'],[[7],[3,'isWhichBtnShow']],[[2,'!='],[[7],[3,'whichBtn']],[1,0]]]],[1,'paddingBottom'],[1,'']],[3,' '],[[2,'?:'],[[2,'&&'],[[2,'&&'],[[2,'&&'],[[2,'==='],[[7],[3,'service_type']],[1,'graph']],[[7],[3,'is_doc_coupon_active']]],[[7],[3,'discount_price']]],[[2,'||'],[[2,'&&'],[[7],[3,'isLogin']],[[7],[3,'to_doc_user']]],[[2,'&&'],[[2,'!'],[[7],[3,'isLogin']]],[[7],[3,'dayFristVisit']]]]],[1,'add-padding-bottom'],[1,'']]])
Z([[6],[[7],[3,'doctor_detail']],[3,'identify_info']])
Z([3,'onIdentify'])
Z([[7],[3,'doctor_id']])
Z([[6],[[7],[3,'doctor_detail']],[3,'name']])
Z(z[6])
Z([[7],[3,'vip_doctor']])
Z([[2,'!'],[[7],[3,'vip_doctor']]])
Z([a,[3,'doctor-info-container '],[[2,'&&'],[[6],[[7],[3,'doctor_detail']],[3,'identify_info']],[1,'has-dentify-info']],z[5][3],[[2,'?:'],[[2,'!'],[[6],[[7],[3,'doctor_detail']],[3,'special_good_at']]],[1,'no-special-good-at'],[1,'']]])
Z([3,'doctor-detail'])
Z([3,'doctor-detail-right'])
Z([[6],[[7],[3,'doctor_detail']],[3,'is_recommend']])
Z([3,'jumpToHosDetail'])
Z([3,'lines line-three'])
Z([[6],[[7],[3,'doctor_detail']],[3,'hospital_tag']])
Z([3,'doctor-detail-left'])
Z([[6],[[7],[3,'doctor_detail']],[3,'image']])
Z([[6],[[7],[3,'doctor_detail']],[3,'is_active']])
Z([3,'130rpx'])
Z([3,'followDoctor'])
Z([[6],[[7],[3,'doctor_detail']],[3,'service_data_list']])
Z([3,'id'])
Z([[6],[[7],[3,'item']],[3,'icon']])
Z([[6],[[7],[3,'doctor_detail']],[3,'new_tags']])
Z([3,'name'])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'tag_type']],[1,2]])
Z(z[27])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'tag_type']],[1,3]])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'tag_type']],[1,4]])
Z(z[27])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'doctor_detail']],[3,'special_good_at']]])
Z([[6],[[7],[3,'doctor_detail']],[3,'special_good_at']])
Z(z[11])
Z([3,'commod-mk'])
Z([3,'doctor__info-wrap'])
Z([3,'doctor__info'])
Z(z[16])
Z(z[17])
Z([3,'doctor__title margin-b-8 lines line-three'])
Z(z[19])
Z(z[28])
Z([3,'*this'])
Z(z[33])
Z([3,'avatar-vip-class'])
Z(z[21])
Z(z[22])
Z([1,true])
Z(z[24])
Z(z[36])
Z(z[36])
Z(z[12])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'service_list']],[3,'length']]])
Z([[7],[3,'service_list']])
Z([3,'service_type'])
Z([[2,'?:'],[[6],[[7],[3,'item']],[3,'is_service_open']],[1,'switchService'],[1,'']])
Z([a,[3,'single-service '],[[2,'?:'],[[6],[[7],[3,'item']],[3,'isActive']],[1,'selected'],[1,'']],z[5][3],[[2,'?:'],[[2,'==='],[[7],[3,'index']],[1,3]],[1,'last'],[1,'']]])
Z([[7],[3,'index']])
Z([3,'check-indicator'])
Z([[2,'&&'],[[6],[[7],[3,'item']],[3,'isActive']],[[6],[[7],[3,'item']],[3,'is_service_open']]])
Z([[2,'&&'],[[2,'!'],[[6],[[7],[3,'item']],[3,'isActive']]],[[6],[[7],[3,'item']],[3,'is_service_open']]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[7],[3,'hasOpenService']]])
Z([[7],[3,'isIntroDescriptionOpen']])
Z([[6],[[6],[[7],[3,'service_list']],[[7],[3,'currentServiceTypeIndex']]],[3,'service_desc_url']])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'doctor_detail']],[3,'good_at_intro_a']]])
Z([[2,'&&'],[[2,'&&'],[[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'doctor_detail']],[3,'is_recommend']]],[[6],[[7],[3,'doctor_detail']],[3,'famous_recommend_reason']]],[[6],[[6],[[7],[3,'doctor_detail']],[3,'famous_recommend_reason']],[3,'length']]])
Z(z[11])
Z([[6],[[7],[3,'vip_doctor_info']],[3,'service_info']])
Z([[2,'||'],[[2,'!=='],[[7],[3,'whichBtn']],[1,0]],[[6],[[7],[3,'item']],[3,'is_service_on']]])
Z([3,'service-item'])
Z([[2,'!=='],[[7],[3,'whichBtn']],[1,0]])
Z([3,'reserveConsult'])
Z([[6],[[7],[3,'item']],[3,'service_type']])
Z([[7],[3,'item']])
Z([[2,'&&'],[[2,'&&'],[[2,'&&'],[[7],[3,'vip_doctor']],[[6],[[7],[3,'doctor_detail']],[3,'is_recommend']]],[[6],[[7],[3,'doctor_detail']],[3,'famous_recommend_reason']]],[[6],[[6],[[7],[3,'doctor_detail']],[3,'famous_recommend_reason']],[3,'length']]])
Z(z[11])
Z([3,'card card--pb commod-mk card-sc-bc'])
Z([[6],[[7],[3,'doctor_detail']],[3,'good_at']])
Z(z[81])
Z(z[11])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'doctor_detail']],[3,'good_at_intro_b']]])
Z([[2,'&&'],[[7],[3,'doctor_image_list']],[[6],[[7],[3,'doctor_image_list']],[3,'length']]])
Z([[2,'&&'],[[2,'&&'],[[2,'&&'],[[6],[[7],[3,'liveSubscribeInfo']],[3,'is_top']],[[2,'!'],[[7],[3,'vip_doctor']]]],[[6],[[7],[3,'liveSubscribeInfo']],[3,'live_info_list']]],[[6],[[6],[[7],[3,'liveSubscribeInfo']],[3,'live_info_list']],[3,'length']]])
Z([3,'toSubscribe'])
Z([3,'unSubscribe'])
Z([[7],[3,'liveSubscribeInfo']])
Z(z[12])
Z([[7],[3,'assess_thank_list']])
Z(z[26])
Z([3,'card__list-child'])
Z([3,'clickOnAssessQa'])
Z([a,[3,'card__list '],[[2,'?:'],[[2,'==='],[[2,'+'],[[7],[3,'index']],[1,1]],[[6],[[7],[3,'assess_thank_list']],[3,'length']]],[1,'last-card'],[1,'']]])
Z([[6],[[7],[3,'item']],[3,'id']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'show_type']],[1,'assess']])
Z([3,'assess-holder'])
Z([[6],[[7],[3,'item']],[3,'service_type_text']])
Z([[2,'!='],[[6],[[6],[[7],[3,'item']],[3,'assess_info']],[3,'tags']],[1,'']])
Z([[6],[[7],[3,'item']],[3,'assess_remark']])
Z([[6],[[7],[3,'item']],[3,'ask']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'show_type']],[1,'thank']])
Z([[2,'&&'],[[2,'&&'],[[2,'&&'],[[2,'!'],[[6],[[7],[3,'liveSubscribeInfo']],[3,'is_top']]],[[2,'!'],[[7],[3,'vip_doctor']]]],[[6],[[7],[3,'liveSubscribeInfo']],[3,'live_info_list']]],[[6],[[6],[[7],[3,'liveSubscribeInfo']],[3,'live_info_list']],[3,'length']]])
Z(z[87])
Z(z[88])
Z(z[89])
Z([[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[6],[[7],[3,'doctor_detail']],[3,'good_at']]])
Z(z[12])
Z(z[8])
Z([3,'margin-bottom: 10px;'])
Z([[7],[3,'visitPageName']])
Z(z[11])
Z([3,'card--mb'])
Z([[7],[3,'show_tips']])
Z([[6],[[7],[3,'vip_doctor_info']],[3,'out_call_info']])
Z(z[76])
Z([[2,'&&'],[[2,'>'],[[6],[[6],[[7],[3,'vip_doctor_info']],[3,'out_call_info']],[3,'length']],[1,3]],[[2,'!'],[[7],[3,'show_all_list']]]])
Z([[7],[3,'isRegisterApply']])
Z([3,'onReg'])
Z([[6],[[7],[3,'regInfo']],[3,'service_type']])
Z([[7],[3,'regInfo']])
Z([[2,'!'],[[7],[3,'show_tips']]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'show_tips']]],[[2,'!'],[[7],[3,'isRegisterApply']]]])
Z(z[11])
Z([3,'fixed-bottom'])
Z([[2,'&&'],[[2,'&&'],[[2,'&&'],[[2,'&&'],[[2,'!'],[[7],[3,'vip_doctor']]],[[2,'==='],[[7],[3,'service_type']],[1,'graph']]],[[7],[3,'is_doc_coupon_active']]],[[7],[3,'discount_price']]],[[2,'||'],[[2,'&&'],[[7],[3,'isLogin']],[[7],[3,'to_doc_user']]],[[2,'&&'],[[2,'!'],[[7],[3,'isLogin']]],[[7],[3,'dayFristVisit']]]]])
Z(z[11])
Z([3,'section vip_section'])
Z([[2,'&&'],[[2,'=='],[[7],[3,'whichBtn']],[1,0]],[[7],[3,'isWhichBtnShow']]])
Z(z[75])
Z([3,'submit-btn'])
Z(z[74])
Z([3,'bottom-button-group'])
Z([3,'sendmind'])
Z([3,'flex: 1 1 0px;'])
Z([a,[3,'/pages/send_heart/index?id\x3d'],[[6],[[7],[3,'doctor_detail']],[3,'id']],[3,'\x26name\x3d'],z[9],[3,'\x26img\x3d'],z[21]])
Z([[7],[3,'is_open_service']])
Z([3,'beforeJumpService'])
Z([3,'redirectTo'])
Z([3,'margin-left: auto;'])
Z([[2,'||'],[[2,'&&'],[[7],[3,'old_price']],[[7],[3,'is_old_price']]],[[7],[3,'discount_price_text']]])
Z([3,''])
Z([[7],[3,'recommdAlert']])
Z([3,'确定'])
Z([[7],[3,'show_mask']])
Z(z[143])
Z([[7],[3,'show_userinfo']])
Z([3,'custom-button'])
Z([3,'loginedActions'])
Z([3,'loginfail'])
Z([3,'hideUserinfo'])
Z(z[143])
Z([[7],[3,'modal_show']])
Z([[7],[3,'modal_title']])
Z(z[149])
Z([3,'hideModal'])
Z(z[143])
Z([[7],[3,'have_active_Qa']])
Z([3,'active-qa-model-button'])
Z(z[149])
Z(z[138])
Z(z[2])
Z([3,'continueQa'])
Z(z[143])
Z([[7],[3,'modalShow']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_74_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_74_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_74=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_74=true;
var x=['./pages/doc_mainpage/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_74_1()
var cJR=_v()
_(r,cJR)
if(_oz(z,0,e,s,gg)){cJR.wxVkey=1
var hKR=_mz(z,'tip-dialog',['bindonContinueAsk',1,'bindonReBuy',1,'bindonTouchCancel',2],[],e,s,gg)
_(cJR,hKR)
}
var oLR=_mz(z,'scroll-view',['scrollY',-1,'bindscroll',4,'class',1],[],e,s,gg)
var cMR=_v()
_(oLR,cMR)
if(_oz(z,6,e,s,gg)){cMR.wxVkey=1
var o8R=_mz(z,'identify-info-tip',['bindtap',7,'doctorId',1,'doctorName',2,'identifyInfo',3,'isVip',4],[],e,s,gg)
_(cMR,o8R)
}
var oNR=_v()
_(oLR,oNR)
if(_oz(z,12,e,s,gg)){oNR.wxVkey=1
var x9R=_n('view')
_rz(z,x9R,'class',13,e,s,gg)
var o0R=_n('view')
_rz(z,o0R,'class',14,e,s,gg)
var fAS=_n('view')
_rz(z,fAS,'class',15,e,s,gg)
var cBS=_v()
_(fAS,cBS)
if(_oz(z,16,e,s,gg)){cBS.wxVkey=1
}
var hCS=_mz(z,'view',['bindtap',17,'class',1],[],e,s,gg)
var oDS=_v()
_(hCS,oDS)
if(_oz(z,19,e,s,gg)){oDS.wxVkey=1
}
oDS.wxXCkey=1
_(fAS,hCS)
cBS.wxXCkey=1
_(o0R,fAS)
var cES=_n('view')
_rz(z,cES,'class',20,e,s,gg)
var oFS=_mz(z,'doctor-avatar',['avatarUrl',21,'isActive',1,'size',2],[],e,s,gg)
_(cES,oFS)
var lGS=_n('cy-userinfo')
_rz(z,lGS,'bindloginevent',24,e,s,gg)
_(cES,lGS)
_(o0R,cES)
_(x9R,o0R)
var aHS=_v()
_(x9R,aHS)
var tIS=function(bKS,eJS,oLS,gg){
var oNS=_v()
_(oLS,oNS)
if(_oz(z,27,bKS,eJS,gg)){oNS.wxVkey=1
}
oNS.wxXCkey=1
return oLS
}
aHS.wxXCkey=2
_2z(z,25,tIS,e,s,gg,aHS,'item','index','id')
var fOS=_v()
_(x9R,fOS)
var cPS=function(oRS,hQS,cSS,gg){
var lUS=_v()
_(cSS,lUS)
if(_oz(z,30,oRS,hQS,gg)){lUS.wxVkey=1
var aVS=_v()
_(lUS,aVS)
if(_oz(z,31,oRS,hQS,gg)){aVS.wxVkey=1
}
aVS.wxXCkey=1
}
else if(_oz(z,32,oRS,hQS,gg)){lUS.wxVkey=2
}
else if(_oz(z,33,oRS,hQS,gg)){lUS.wxVkey=3
var tWS=_v()
_(lUS,tWS)
if(_oz(z,34,oRS,hQS,gg)){tWS.wxVkey=1
}
tWS.wxXCkey=1
}
else{lUS.wxVkey=4
}
lUS.wxXCkey=1
return cSS
}
fOS.wxXCkey=2
_2z(z,28,cPS,e,s,gg,fOS,'item','index','name')
_(oNR,x9R)
}
var lOR=_v()
_(oLR,lOR)
if(_oz(z,35,e,s,gg)){lOR.wxVkey=1
var eXS=_v()
_(lOR,eXS)
if(_oz(z,36,e,s,gg)){eXS.wxVkey=1
}
eXS.wxXCkey=1
}
var aPR=_v()
_(oLR,aPR)
if(_oz(z,37,e,s,gg)){aPR.wxVkey=1
var bYS=_n('view')
_rz(z,bYS,'class',38,e,s,gg)
var o2S=_n('view')
_rz(z,o2S,'class',39,e,s,gg)
var f3S=_n('view')
_rz(z,f3S,'class',40,e,s,gg)
var c4S=_v()
_(f3S,c4S)
if(_oz(z,41,e,s,gg)){c4S.wxVkey=1
}
var h5S=_mz(z,'view',['bindtap',42,'class',1],[],e,s,gg)
var o6S=_v()
_(h5S,o6S)
if(_oz(z,44,e,s,gg)){o6S.wxVkey=1
}
o6S.wxXCkey=1
_(f3S,h5S)
var c7S=_v()
_(f3S,c7S)
var o8S=function(a0S,l9S,tAT,gg){
var bCT=_v()
_(tAT,bCT)
if(_oz(z,47,a0S,l9S,gg)){bCT.wxVkey=1
}
bCT.wxXCkey=1
return tAT
}
c7S.wxXCkey=2
_2z(z,45,o8S,e,s,gg,c7S,'item','index','*this')
c4S.wxXCkey=1
_(o2S,f3S)
var oDT=_n('view')
_rz(z,oDT,'class',48,e,s,gg)
var xET=_mz(z,'doctor-avatar',['avatarUrl',49,'isActive',1,'isVip',2],[],e,s,gg)
_(oDT,xET)
var oFT=_n('cy-userinfo')
_rz(z,oFT,'bindloginevent',52,e,s,gg)
_(oDT,oFT)
_(o2S,oDT)
_(bYS,o2S)
var oZS=_v()
_(bYS,oZS)
if(_oz(z,53,e,s,gg)){oZS.wxVkey=1
}
var x1S=_v()
_(bYS,x1S)
if(_oz(z,54,e,s,gg)){x1S.wxVkey=1
}
oZS.wxXCkey=1
x1S.wxXCkey=1
_(aPR,bYS)
}
var tQR=_v()
_(oLR,tQR)
if(_oz(z,55,e,s,gg)){tQR.wxVkey=1
}
var eRR=_v()
_(oLR,eRR)
if(_oz(z,56,e,s,gg)){eRR.wxVkey=1
var fGT=_v()
_(eRR,fGT)
var cHT=function(oJT,hIT,cKT,gg){
var lMT=_mz(z,'view',['bindtap',59,'class',1,'data-index',2],[],oJT,hIT,gg)
var aNT=_n('view')
_rz(z,aNT,'class',62,oJT,hIT,gg)
var tOT=_v()
_(aNT,tOT)
if(_oz(z,63,oJT,hIT,gg)){tOT.wxVkey=1
}
var ePT=_v()
_(aNT,ePT)
if(_oz(z,64,oJT,hIT,gg)){ePT.wxVkey=1
}
tOT.wxXCkey=1
ePT.wxXCkey=1
_(lMT,aNT)
_(cKT,lMT)
return cKT
}
fGT.wxXCkey=2
_2z(z,57,cHT,e,s,gg,fGT,'item','index','service_type')
}
var bSR=_v()
_(oLR,bSR)
if(_oz(z,65,e,s,gg)){bSR.wxVkey=1
var bQT=_v()
_(bSR,bQT)
if(_oz(z,66,e,s,gg)){bQT.wxVkey=1
var oRT=_v()
_(bQT,oRT)
if(_oz(z,67,e,s,gg)){oRT.wxVkey=1
}
oRT.wxXCkey=1
}
bQT.wxXCkey=1
}
var oTR=_v()
_(oLR,oTR)
if(_oz(z,68,e,s,gg)){oTR.wxVkey=1
}
var xUR=_v()
_(oLR,xUR)
if(_oz(z,69,e,s,gg)){xUR.wxVkey=1
}
var oVR=_v()
_(oLR,oVR)
if(_oz(z,70,e,s,gg)){oVR.wxVkey=1
var xST=_v()
_(oVR,xST)
var oTT=function(cVT,fUT,hWT,gg){
var cYT=_v()
_(hWT,cYT)
if(_oz(z,72,cVT,fUT,gg)){cYT.wxVkey=1
var oZT=_n('view')
_rz(z,oZT,'class',73,cVT,fUT,gg)
var l1T=_v()
_(oZT,l1T)
if(_oz(z,74,cVT,fUT,gg)){l1T.wxVkey=1
}
else{l1T.wxVkey=2
var a2T=_mz(z,'cy-userinfo',['bindloginevent',75,'data-consult-type',1,'data-service-info',2],[],cVT,fUT,gg)
_(l1T,a2T)
}
l1T.wxXCkey=1
l1T.wxXCkey=3
_(cYT,oZT)
}
cYT.wxXCkey=1
cYT.wxXCkey=3
return hWT
}
xST.wxXCkey=4
_2z(z,71,oTT,e,s,gg,xST,'item','index','')
}
var fWR=_v()
_(oLR,fWR)
if(_oz(z,78,e,s,gg)){fWR.wxVkey=1
}
var cXR=_v()
_(oLR,cXR)
if(_oz(z,79,e,s,gg)){cXR.wxVkey=1
var t3T=_n('view')
_rz(z,t3T,'class',80,e,s,gg)
var e4T=_v()
_(t3T,e4T)
if(_oz(z,81,e,s,gg)){e4T.wxVkey=1
}
var b5T=_v()
_(t3T,b5T)
if(_oz(z,82,e,s,gg)){b5T.wxVkey=1
}
var o6T=_v()
_(t3T,o6T)
if(_oz(z,83,e,s,gg)){o6T.wxVkey=1
}
e4T.wxXCkey=1
b5T.wxXCkey=1
o6T.wxXCkey=1
_(cXR,t3T)
}
var hYR=_v()
_(oLR,hYR)
if(_oz(z,84,e,s,gg)){hYR.wxVkey=1
}
var oZR=_v()
_(oLR,oZR)
if(_oz(z,85,e,s,gg)){oZR.wxVkey=1
}
var c1R=_v()
_(oLR,c1R)
if(_oz(z,86,e,s,gg)){c1R.wxVkey=1
var x7T=_mz(z,'live-info',['bind:subscribe',87,'bind:unsubscribe',1,'liveSubscribeInfo',2],[],e,s,gg)
_(c1R,x7T)
}
var o2R=_v()
_(oLR,o2R)
if(_oz(z,90,e,s,gg)){o2R.wxVkey=1
var o8T=_v()
_(o2R,o8T)
var f9T=function(hAU,c0T,oBU,gg){
var oDU=_n('view')
_rz(z,oDU,'class',93,hAU,c0T,gg)
var aFU=_mz(z,'view',['bind:tap',94,'class',1,'data-problem-id',2],[],hAU,c0T,gg)
var tGU=_v()
_(aFU,tGU)
if(_oz(z,97,hAU,c0T,gg)){tGU.wxVkey=1
var eHU=_n('view')
_rz(z,eHU,'class',98,hAU,c0T,gg)
var bIU=_v()
_(eHU,bIU)
if(_oz(z,99,hAU,c0T,gg)){bIU.wxVkey=1
}
var oJU=_v()
_(eHU,oJU)
if(_oz(z,100,hAU,c0T,gg)){oJU.wxVkey=1
}
var xKU=_v()
_(eHU,xKU)
if(_oz(z,101,hAU,c0T,gg)){xKU.wxVkey=1
}
var oLU=_v()
_(eHU,oLU)
if(_oz(z,102,hAU,c0T,gg)){oLU.wxVkey=1
}
bIU.wxXCkey=1
oJU.wxXCkey=1
xKU.wxXCkey=1
oLU.wxXCkey=1
_(tGU,eHU)
}
tGU.wxXCkey=1
_(oDU,aFU)
var lEU=_v()
_(oDU,lEU)
if(_oz(z,103,hAU,c0T,gg)){lEU.wxVkey=1
}
lEU.wxXCkey=1
_(oBU,oDU)
return oBU
}
o8T.wxXCkey=2
_2z(z,91,f9T,e,s,gg,o8T,'item','index','id')
}
var l3R=_v()
_(oLR,l3R)
if(_oz(z,104,e,s,gg)){l3R.wxVkey=1
var fMU=_mz(z,'live-info',['bind:subscribe',105,'bind:unsubscribe',1,'liveSubscribeInfo',2],[],e,s,gg)
_(l3R,fMU)
}
var a4R=_v()
_(oLR,a4R)
if(_oz(z,108,e,s,gg)){a4R.wxVkey=1
}
var t5R=_v()
_(oLR,t5R)
if(_oz(z,109,e,s,gg)){t5R.wxVkey=1
var cNU=_mz(z,'doctor-topic',['doctorId',110,'style',1,'visitPageName',2],[],e,s,gg)
_(t5R,cNU)
}
var e6R=_v()
_(oLR,e6R)
if(_oz(z,113,e,s,gg)){e6R.wxVkey=1
var hOU=_n('view')
_rz(z,hOU,'class',114,e,s,gg)
var oPU=_v()
_(hOU,oPU)
if(_oz(z,115,e,s,gg)){oPU.wxVkey=1
}
var aTU=_v()
_(hOU,aTU)
var tUU=function(bWU,eVU,oXU,gg){
var oZU=_v()
_(oXU,oZU)
if(_oz(z,117,bWU,eVU,gg)){oZU.wxVkey=1
}
oZU.wxXCkey=1
return oXU
}
aTU.wxXCkey=2
_2z(z,116,tUU,e,s,gg,aTU,'item','index','')
var cQU=_v()
_(hOU,cQU)
if(_oz(z,118,e,s,gg)){cQU.wxVkey=1
}
var oRU=_v()
_(hOU,oRU)
if(_oz(z,119,e,s,gg)){oRU.wxVkey=1
var f1U=_mz(z,'cy-userinfo',['bindloginevent',120,'data-consult-type',1,'data-service-info',2],[],e,s,gg)
var c2U=_v()
_(f1U,c2U)
if(_oz(z,123,e,s,gg)){c2U.wxVkey=1
}
c2U.wxXCkey=1
_(oRU,f1U)
}
var lSU=_v()
_(hOU,lSU)
if(_oz(z,124,e,s,gg)){lSU.wxVkey=1
}
oPU.wxXCkey=1
cQU.wxXCkey=1
oRU.wxXCkey=1
oRU.wxXCkey=3
lSU.wxXCkey=1
_(e6R,hOU)
}
var b7R=_v()
_(oLR,b7R)
if(_oz(z,125,e,s,gg)){b7R.wxVkey=1
}
cMR.wxXCkey=1
cMR.wxXCkey=3
oNR.wxXCkey=1
oNR.wxXCkey=3
lOR.wxXCkey=1
aPR.wxXCkey=1
aPR.wxXCkey=3
tQR.wxXCkey=1
eRR.wxXCkey=1
bSR.wxXCkey=1
oTR.wxXCkey=1
xUR.wxXCkey=1
oVR.wxXCkey=1
oVR.wxXCkey=3
fWR.wxXCkey=1
cXR.wxXCkey=1
hYR.wxXCkey=1
oZR.wxXCkey=1
c1R.wxXCkey=1
c1R.wxXCkey=3
o2R.wxXCkey=1
l3R.wxXCkey=1
l3R.wxXCkey=3
a4R.wxXCkey=1
t5R.wxXCkey=1
t5R.wxXCkey=3
e6R.wxXCkey=1
e6R.wxXCkey=3
b7R.wxXCkey=1
_(r,oLR)
var h3U=_n('view')
_rz(z,h3U,'class',126,e,s,gg)
var o4U=_v()
_(h3U,o4U)
if(_oz(z,127,e,s,gg)){o4U.wxVkey=1
}
var c5U=_v()
_(h3U,c5U)
if(_oz(z,128,e,s,gg)){c5U.wxVkey=1
var o6U=_n('view')
_rz(z,o6U,'class',129,e,s,gg)
var l7U=_v()
_(o6U,l7U)
if(_oz(z,130,e,s,gg)){l7U.wxVkey=1
var t9U=_mz(z,'cy-userinfo',['bindloginevent',131,'class',1],[],e,s,gg)
_(l7U,t9U)
}
var a8U=_v()
_(o6U,a8U)
if(_oz(z,133,e,s,gg)){a8U.wxVkey=1
}
l7U.wxXCkey=1
l7U.wxXCkey=3
a8U.wxXCkey=1
_(c5U,o6U)
}
else{c5U.wxVkey=2
var e0U=_n('view')
_rz(z,e0U,'class',134,e,s,gg)
var oBV=_mz(z,'cy-userinfo',['bindloginevent',135,'style',1,'url',2],[],e,s,gg)
_(e0U,oBV)
var bAV=_v()
_(e0U,bAV)
if(_oz(z,138,e,s,gg)){bAV.wxVkey=1
var xCV=_mz(z,'cy-userinfo',['bindloginevent',139,'openType',1,'style',2],[],e,s,gg)
var oDV=_v()
_(xCV,oDV)
if(_oz(z,142,e,s,gg)){oDV.wxVkey=1
}
oDV.wxXCkey=1
_(bAV,xCV)
}
else{bAV.wxVkey=2
}
bAV.wxXCkey=1
bAV.wxXCkey=3
_(c5U,e0U)
}
o4U.wxXCkey=1
c5U.wxXCkey=1
c5U.wxXCkey=3
c5U.wxXCkey=3
_(r,h3U)
var fEV=_mz(z,'cy-modal',['btnText',143,'show',1],[],e,s,gg)
_(r,fEV)
var cFV=_mz(z,'cy-modal',['btnText',145,'show',1],[],e,s,gg)
_(r,cFV)
var hGV=_mz(z,'cy-modal',['btnText',147,'show',1],[],e,s,gg)
var oHV=_n('view')
_rz(z,oHV,'slot',149,e,s,gg)
var cIV=_mz(z,'cy-userinfo',['bindloginevent',150,'bindloginfail',1,'bindtap',2],[],e,s,gg)
_(oHV,cIV)
_(hGV,oHV)
_(r,hGV)
var oJV=_mz(z,'cy-modal',['btnText',153,'show',1,'title',2],[],e,s,gg)
var lKV=_n('view')
_rz(z,lKV,'slot',156,e,s,gg)
var aLV=_mz(z,'cy-navigator',['isSend',-1,'bindtap',157],[],e,s,gg)
_(lKV,aLV)
_(oJV,lKV)
_(r,oJV)
var tMV=_mz(z,'cy-modal',['btnText',158,'show',1],[],e,s,gg)
var eNV=_mz(z,'view',['class',160,'slot',1],[],e,s,gg)
var bOV=_v()
_(eNV,bOV)
if(_oz(z,162,e,s,gg)){bOV.wxVkey=1
var oPV=_n('cy-userinfo')
_rz(z,oPV,'bindtap',163,e,s,gg)
_(bOV,oPV)
}
var xQV=_n('cy-navigator')
_rz(z,xQV,'bindtap',164,e,s,gg)
_(eNV,xQV)
bOV.wxXCkey=1
bOV.wxXCkey=3
_(tMV,eNV)
_(r,tMV)
var oRV=_mz(z,'cy-modal',['btnText',165,'show',1],[],e,s,gg)
_(r,oRV)
cJR.wxXCkey=1
cJR.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_74";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_74();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/doc_mainpage/index.wxml'] = [$gwx_XC_74, './pages/doc_mainpage/index.wxml'];else __wxAppCode__['pages/doc_mainpage/index.wxml'] = $gwx_XC_74( './pages/doc_mainpage/index.wxml' );
	;__wxRoute = "pages/doc_mainpage/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/doc_mainpage/index.js";define("pages/doc_mainpage/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t,e=require("../../@babel/runtime/helpers/interopRequireDefault"),i=require("../../@babel/runtime/helpers/typeof"),a=e(require("../../@babel/runtime/regenerator")),o=require("../../@babel/runtime/helpers/asyncToGenerator"),r=e(require("../../7B9C8496829A079C1DFAEC91795C7B70.js")),s=e(require("../../3B123513829A079C5D745D1477BC7B70.js")),c=require("../../43A2F676829A079C25C49E711B4C7B70.js"),n=getApp(),d=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js").baseUrl,_=require("../../92BC1755829A079CF4DA7F52C55D7B70.js").syncSubscribeMessage,l=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js"),p=require("../../92BC1755829A079CF4DA7F52C55D7B70.js").param,u=require("../../92BC1755829A079CF4DA7F52C55D7B70.js").dateFormat,h=require("../../A9EAB7C2829A079CCF8CDFC58A3C7B70.js").appIsLogin,m=require("../../840A1D64829A079CE26C7563276C7B70.js").doPoint,v=l.baseUrl+"/cooperation/wap/doctor_detail_info/",g=l.baseUrl+"/cooperation/wap/xr/my_doctor/",f=l.baseUrl+"/api/v5/doctor/",w=l.baseUrl+"/api/v8/get_active_qa/",b=l.baseUrl+"/api/third_party/get_username/",x="".concat(d,"/api/v7/new_user/get_doc_dis_coupon/"),y="".concat(d,"/api/v7/new_user/to_doc/"),D="".concat(d,"/api/live/speaker/activity_card/"),S="".concat(d,"/api/live/live_activity/doctor_sub/");Page({data:{doctor_id:"",doctorInfo:"",doctor_detail:{},has_followed:!1,follow_text:"关注",modal_show:!1,have_active_Qa:!1,have_active_Qa_status:"",have_active_Qa_id:null,hasRepetitionConsult:!1,modal_title:"",model_desc:"",show_userinfo:!1,coupon_content:"",show_mask:!1,vip_doctor:!1,old_price:"",is_old_price:!0,service_list:[],btn_text:"",is_open_service:!0,open_service_type:"",vip_doctor_info:{},show_tips:!1,show_all_list:!1,showMoreBtn:[!1,!1],whichBtn:1,isWhichBtmShow:!1,problem_id:"",rebuyTip:!1,serviceType:null,serviceName:"",hadAsk:!0,is_vip_doc:0,isNewUser:!0,isShowMoreDesc:!0,doctor_image_list:[],image_list:[],dialogIndex:0,shouldFollowedDialogShow:!1,invitate_id:"",shareClicked:!1,hospital_id:"",serviceIconMap:{graph:{avaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/98ba/e96fb173610f_w58_h58_.png",unavaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/ae46/df148df60212_w58_h58_.png"},inquiry:{avaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/bf1b/6f9b4eff1561_w58_h58_.png",unavaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/a1e1/4c87ca687513_w58_h58_.png"},register_apply:{avaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/f605/0a76661b11fa_w58_h58_.png",unavaliable:"https://resource.chunyu.mobi/@/media/images/2021/09/13/7ff2/ee3dfca53b8a_w58_h58_.png"},video_inquiry_saas:{avaliable:"https://resource.chunyu.mobi/@/media/images/2024/01/09/0828/fb834e6daf63_w87_h87_.png",unavaliable:"https://resource.chunyu.mobi/@/media/images/2024/01/09/3302/c34226483773_w87_h87_.png"}},raiList:[],currentServiceTypeIndex:0,introIconMap:{graph:"https://staff.chunyu.mobi/@/media/images/2021/09/13/4862/27012c4b931d_w36_h36_.png",inquiry:"https://staff.chunyu.mobi/@/media/images/2021/09/13/0b0d/cb659408aac9_w36_h36_.png",register_apply:"https://staff.chunyu.mobi/@/media/images/2021/09/13/2e72/95bb93e38ac6_w38_h36_.png",video_inquiry_saas:"https://resource.chunyu.mobi/@/media/images/2024/01/09/2721/0fa9b3a16c2d_w84_h84_.png"},isIntroDescriptionOpen:!1,hasOpenService:!1,has_online_services:!1,isRegisterApply:!1,doctorDetailModalShow:!1,modalShow:!1,problemId:"",discount_price:0,discount_price_text:0,isLogin:!1,dayFristVisit:!1,is_doc_coupon_active:!1,to_doc_user:!1,hasNewCoupon:!1,liveSubscribeInfo:{},verticalLive:!0,shouldShowFollowDialog:!1,visitPageName:"医生主页",fromVisitPage:"",urlDataForGpt:{recommend_id:"",from_type:""}},onLoad:function(t){this.data.urlDataForGpt.recommend_id=t.recommend_id,this.data.urlDataForGpt.from_type=t.from_type;var e=this,i=t.scene||"",a=t.source||"";if(e.source=a,e.scene=i,e.options=t,e.activityPartner=t.activity_partner||"",e.query=t.query||"",e.intention=t.intention||"",e.synonym_query=t.synonym_query||"",this.setData({has_online_services:t.has_online_services,serverParams:t.server_params||"",doctor_id:t.doc_id,shouldShowFollowDialog:t.show_follow_doc_dialog,fromVisitPage:t.scene?"扫码":t.from_visit_page||""}),"xr_follow_doc"===t.action)return e.getFollowDoc(),!1;t.url_source&&this.h5ServicePoint(t.url_source,t.url_from),n.globalData.appIsLogin.then((function(){e.requestDoctor(t),e.getUserInfo()}),(function(){e.requestDoctor(t)})),this.data.problemId=t.problem_id},onShow:function(t){this.data.doctor_id&&this.getLiveInfo();var e=this;n.globalData.appIsLogin.then(o(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getNewUserToDoc();case 2:0===e.data.currentServiceTypeIndex&&e.serviceListTap(),e.setData({dayFristVisit:!1}),e.pageVisitReport();case 5:case"end":return t.stop()}}),t)}))),(function(){var t,i=function(){var t=new Date,e=String(t.getDate()).padStart(2,"0");return String(t.getMonth()+1).padStart(2,"0")+"/"+e+"/"+t.getFullYear()},a=wx.getStorageSync("OPENED_MINI_APP_IN_HISTORY_FOR_COUPON");a?i()===a?t=!0:i()!==a&&(t=!1):(wx.setStorageSync("OPENED_MINI_APP_IN_HISTORY_FOR_COUPON",i()),t=!0),e.setData({dayFristVisit:t}),(0,c.autoLogin)().then((function(){e.pageVisitReport()})).catch((function(){e.pageVisitReport()}))}))},bindscroll:function(t){var e=t.detail.scrollTop;e>=210&&!this.data.isWhichBtnShow?this.setData({isWhichBtnShow:!0}):e<210&&this.data.isWhichBtnShow&&this.setData({isWhichBtnShow:!1})},onShareAppMessage:function(){var t=this.data.doctor_detail,e=this.data.has_online_services,i="".concat(t.name,"-").concat(t.department).concat(t.doc_title,"-").concat(t.doc_hospital),a=t.id,o=this.source,r=t.image,s=r.indexOf("?"),c=wx.getStorageSync("sessionUserId"),d=new Date;Date.prototype.dateFormat=u;var _=d.dateFormat("yyyy-MM-dd h:m");return s>=0&&(r=r.slice(0,s)+"?imageMogr2/thumbnail/450x"),n.sensors.track("Share",{source:"wx_mini",share_channel:"微信好友",page_title:t.doc_name+"医生",invitate_id:c,page_type:this.data.vip_doctor?"名院专家":"医生主页",doctor_id:a,share_time:_}),o?{title:i,path:"/pages/doc_mainpage/index?doc_id=".concat(a,"&source=").concat(o,"&inviter_id=").concat(c,"&from=chunyu_wap_mini&has_online_services=").concat(e)}:{title:i,path:"/pages/doc_mainpage/index?doc_id=".concat(a,"&inviter_id=").concat(c,"&from=chunyu_wap_mini&has_online_services=").concat(e)}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},requestDoctor:function(t){var e=this,s=t.scene||"",c=t.doc_id||s.trim(),d=t.inviter_id||"",_=s?1:0,l=_?"chunyu_m":void 0,p=e.source;this.setData({doctor_id:c,invitate_id:d}),this.getLiveInfo();var u,h={from_wx_mini:1,is_wx_mini_scan:_,doctor_id:c,partner:l||n.globalData.partner,is_json:0,query:this.query,intention:this.intention,synonym_query:this.synonym_query,platfrom:"weixin_mini",problem_id:this.data.problemId,need_ab_test:1,secureId:wx.getStorageSync("open_id")||wx.getStorageSync("device_id"),server_params:this.data.serverParams};t.from_type&&(h.from_type=t.from_type),p&&(h.from_type="vip_doctor"),wx.showLoading({title:"加载中"}),(0,r.default)({url:v,method:"GET",data:h,success:(u=o(a.default.mark((function t(o){var r,s,d,_,l,p;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(wx.hideLoading(),r=o.data,"object"===i(r)&&1!==Number(r.error)){t.next=6;break}return wx.showToast({icon:"none",title:"获取数据失败～"}),wx.navigateBack(),t.abrupt("return");case 6:if(r.doctor_detail.show_expert&&m("AppClick",{app:"weixin_mini",page_readable_name:"权威专家医生主页",doctor_id:c,doctor_name:r.doctor_detail.name}),r.doctor_detail.special_good_at&&(r.doctor_detail.goodAtNode='<img class="experience-class-ord" src="'.concat(r.doctor_detail.show_expert?"https://staff.chunyu.mobi/@/media/images/2022/05/30/d01d/40cb317beac7_w168_h39_.png":"https://staff.chunyu.mobi/@/media/images/2022/07/13/aa6d/ee96087e9fa3_w168_h39_.png",'" />')+r.doctor_detail.special_good_at.replace("擅长:","")),"1"===e.data.shouldShowFollowDialog&&e.followDocAndSubscribe(),e.setData({vip_doctor:r.doctor_detail.show_expert,showTips:!0,doctor_detail:r.doctor_detail,assess_list:r.assess_list,assess_thank_list:r.assess_thank_list,isNewUser:r.is_new_user,isShowMoreDesc:r.is_new_user,urls:r.h5_urls,page_info:r.page_info,thank_list:r.thank_list,has_followed:!!r.doctor_detail&&r.doctor_detail.has_followed,follow_text:r.doctor_detail&&r.doctor_detail.has_followed?"已关注":"关注",service_list:r.doctor_detail&&r.doctor_detail.service_list||[],hasOpenService:r.doctor_detail.service_list.filter((function(t){return t.is_service_open})).length>0,vip_doctor_info:r.vip_doctor_info||{},old_price:r.doctor_detail.graph.volunteer_info?r.doctor_detail.graph.volunteer_info.old_price:"",problem_id:r.doctor_detail.unclosed_problem?r.doctor_detail.unclosed_problem.id:"",problem_status:r.doctor_detail.unclosed_problem?r.doctor_detail.unclosed_problem.problem_status:"",doctor_image_list:r.doctor_style_list,raiList:r.doctor_detail.service_tip||[],discount_price:Number(r.doctor_detail.graph&&r.doctor_detail.graph.discount_price)||0,hot_consults:r.hot_consults}),e.data.doctor_image_list&&e.data.doctor_image_list.length&&e.setData({image_list:e.data.doctor_image_list.map((function(t){return{url:2===t.type?t.video:t.image,type:2===t.type?"video":"image",poster:t.image,desc:t.desc.trim("")}}))}),r.doctor_detail.unclosed_problem&&e.setData({rebuyTip:!0,btn_text:"继续咨询"}),r.vip_doctor_info&&(s=r.vip_doctor_info).service_info.length)for(s.service_info[0].is_service_on&&e.setData({serviceType:s.service_info[0].service_type,serviceName:s.service_info[0].name}),d=0;d<s.service_info.length;d++)"register_apply"===s.service_info[d].service_type&&s.service_info[d].is_service_on&&e.setData({isRegisterApply:!0,regInfo:s.service_info[d]}),1==s.service_info[d].is_service_on&&(e.setData({whichBtn:0}),e.data.firstSever||e.setData({firstSever:s.service_info[d]}));return e.data.vip_doctor?wx.setNavigationBarTitle({title:"权威专家"}):r.doctor_detail&&r.doctor_detail.name&&wx.setNavigationBarTitle({title:r.doctor_detail.name+"医生"}),r.tips_info&&e.setData({modal_show:r.tips_info.show_tips,modal_title:r.tips_info.title||"",modal_desc:r.tips_info.desc||""}),t.next=18,e.getNewUserToDoc();case 18:e.serviceListTap(),"vip"==e.source&&(_=e.data.vip_doctor_info,l=e.data.showMoreBtn,p=e.data.show_tips,wx.createSelectorQuery().selectAll(".card__body--overflow--text").boundingClientRect().exec((function(t){for(var i=0;i<t[0].length;i++)t[0][i].height>60&&(l[i]=!0);e.setData({showMoreBtn:l})})),_.out_call_info.length>=1&&_.out_call_info[0].time_str&&(p=!0),e.setData({show_tips:p})),e.pageView(),n.globalData.appIsLogin.then((function(){e.shareClickPoint()}),(function(){console.log("未登录")}));case 22:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})});var g=wx.getLaunchOptionsSync().scene;1008!==g&&1036!==g||this.getActiveQa(t.doc_id)},lookSameClinicDoctors:function(t){m("AppClick",{app:"weixin_mini",click_position:"确认button",page_readable_name:"权威专家医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.name});var e=(t.currentTarget||{}).dataset,i=void 0===e?{}:e,a="".concat(d,"/v-m-general/authoritative-expert?is_result=1&clinic_no=").concat(i.clinic_no,"&second_class_clinic_no=").concat(i.second_class_clinic_no,"&input_type=科室筛选");this.pageVisitReport("查看同科室医生",0).then((function(){wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(a))})}))},shareClickPoint:function(){if(console.log("this.data.shareClicked",this.data.shareClicked),!this.data.shareClicked&&(this.data.shareClicked=!0,this.data.invitate_id)){var t;if("vip"===this.source){var e=this.data.vip_doctor_info.service_info.find((function(t){return"inquiry"===t.service_type}));t=e&&e.price_str.split("/")[0].split("￥")[1]||-1}n.sensors.track("ShareClick",{page_title:this.data.doctor_detail.name+"医生",invitate_id:Number(this.data.invitate_id),page_type:"vip"===this.source?"名院专家主页":"医生主页",doctor_id:this.data.doctor_id,goods_id_list:[],department:this.data.doctor_detail.clinic_name,graph_price:"vip"===this.source?Number(t):Number(this.data.doctor_detail.graph&&this.data.doctor_detail.graph.price)})}},doFollowDoctor:function(){var t=this;if(t.data.doctor_detail&&t.data.doctor_detail.doc_id){var e=t.data.doctor_detail.doc_id,i=t.data.has_followed,a={from_wx_mini:1,partner:n.globalData.partner,follow:i?0:1};i||wx.requestSubscribeMessage({tmplIds:["4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4"],success:function(t){"requestSubscribeMessage:ok"===t.errMsg&&_("4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4")}}),m("AppClick",{app:"weixin_mini",click_position:i?"取消关注":"关注",page_readable_name:t.data.vip_doctor?"权威专家医生主页":"医生主页",doctor_id:e,doctor_name:t.data.doctor_detail.name}),wx.request({url:f+e+"/follow",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:n.globalData.sessionid},data:p(a),success:function(){t.setData({has_followed:!i,follow_text:t.data.has_followed?"关注":"已关注"}),i?wx.showToast({icon:"success",title:"取消关注"}):wx.showToast({icon:"none",title:"关注成功，医生直播、发布话题时将会通知您"}),t.getLiveInfo()},fail:function(){}})}else wx.showToast({title:"医生信息获取失败"})},followDocAndSubscribe:function(){var t=this;(0,r.default)({url:f+this.data.doctor_id+"/follow",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{from_wx_mini:1,partner:n.globalData.partner,follow:1},success:function(){wx.showModal({title:"关注成功",content:"微信打开春雨医生小程序，点击个人中心-我的医生可查看关注过的医生",showCancel:!1,confirmText:"我知道啦",success:function(t){t.confirm&&wx.requestSubscribeMessage({tmplIds:["4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4"],success:function(t){"requestSubscribeMessage:ok"===t.errMsg&&_("4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4")}})}}),t.setData({has_followed:!0,follow_text:"已关注"})}})},followDoctor:function(){this.pageView(),this.shareClickPoint(),this.doFollowDoctor()},hideModal:function(){this.setData({modal_show:!1}),wx.requestSubscribeMessage({tmplIds:["4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4"],success:function(t){"requestSubscribeMessage:ok"===t.errMsg&&_("4ztYTNvm4EoxrjJDNY5z395PKDiNoB9zQGRHUrUKIr4")}})},hideUserinfo:function(){this.setData({show_userinfo:!1}),this.pointLogin()},showCollectDetail:function(){this.setData({show_mask:!0})},hideMask:function(t){t.target.id===t.currentTarget.id&&this.setData({show_mask:!1})},getUserInfo:function(){n.globalData.sessionid&&wx.request({url:b,header:{Cookie:n.globalData.sessionid},success:function(t){wx.setStorageSync("userName",t.data.username)}})},getActiveQa:function(t,e){var i=this,a=n.globalData.sessionid;n.globalData.appIsLogin.then((function(){wx.request({url:w,method:"GET",header:{"Content-Type":"application/json",Cookie:a},data:{doctor_id:t,partner:n.globalData.partner},success:function(t){console.log("发请求",t);var a=t.data;0===a.error_code?(e?i.setData({hasRepetitionConsult:!0}):i.setData({have_active_Qa:!0}),i.setData({have_active_Qa_status:a.problem_status,have_active_Qa_id:a.e_id})):1===a.error_code&&e&&i.jumpService()}})}),(function(){}))},h5ServicePoint:function(t,e){var i={source_type:t,from_type:e};wx.setStorage({key:"authorizationPointData",data:i})},getFollowDoc:function(){var t=this,e=n.globalData.sessionid;n.globalData.appIsLogin.then((function(){wx.request({url:g,method:"GET",header:{"Content-Type":"application/json",Cookie:e},data:{partner:n.globalData.partner},success:function(e){var i=e.data;0===i.error_code?t.requestDoctor({doc_id:i.doctor_detail.doc_id}):t.goHome()}})}),(function(){wx.hideLoading(),t.setData({show_userinfo:!0})}))},pageView:function(){var t=this,e=t.options,i=this.data.doctor_detail||{},a=e.inviter_id;t.pageViewHasRun||h({success:function(){t.pageViewHasRun=!0,m("PageView",{platform_source:"chunyu_wap_mini",source_type:e.from||"weixin_mini",inviter_user_id:Number(a||""),doctor_id:i.id,doctor_name:i.name,first_login:n.globalData.first_login?"是":"否",page_title:"小程序医生主页"})}})},loginedActions:function(){var t=this.options;if("xr_follow_doc"===t.action)return this.getFollowDoc(),!1;this.requestDoctor(t)},loginfail:function(){this.setData({show_userinfo:!0})},serviceListTap:function(){var t=this,e=t.data.service_list,i="未开通服务",a=!1,o="",r=0,s=t.data.is_doc_coupon_active&&t.data.discount_price&&(t.data.isLogin&&t.data.to_doc_user||!t.data.isLogin&&t.data.dayFristVisit)?t.data.discount_price:0;e.forEach((function(e,c){console.log(e.more_desc),/^\n/.test(e.more_desc)&&(e.more_desc=e.more_desc.replace("\n","")),0==c&&e.is_service_open?(o=e.service_type,e.price_str=t.data.doctor_detail.graph.volunteer_info?"￥".concat(t.accSub(t.data.doctor_detail.graph.volunteer_info.old_price,"graph"===o?s:0),"元/次"):e.price_str,e.isActive=!0,a=!0,"graph"==e.service_type&&s&&(r=e.price),i=t.data.doctor_detail.graph.volunteer_info?"graph"==o&&t.data.rebuyTip?"继续咨询":e.name+"(义诊价￥"+t.accSub(e.price,"graph"===o?s:0)+")":"graph"==o&&t.data.rebuyTip?"继续咨询":e.name+"(￥"+t.accSub(e.price,"graph"===o?s:0)+"元/次)"):e.isActive=!1})),t.setData({service_list:e,btn_text:i,is_open_service:a,service_type:o,discount_price_text:r})},switchService:function(t){var e=this,i="",a=e.data.service_list,o=e.data.service_type,r=t.currentTarget.dataset.index,s=0;this.setData({currentServiceTypeIndex:r});var c=e.data.is_doc_coupon_active&&e.data.discount_price&&(e.data.isLogin&&e.data.to_doc_user||!e.data.isLogin&&e.data.dayFristVisit)?e.data.discount_price:0;a.forEach((function(t,a){if(a==r){"graph"==t.service_type?(s=c?t.price:0,e.setData({is_old_price:!0})):e.setData({is_old_price:!1}),t.isActive=!0,o=t.service_type;var n=e.accSub(t.price,"graph"===o?c:0);i=e.data.doctor_detail.graph.volunteer_info&&"graph"==t.service_type?"graph"==o&&e.data.rebuyTip?"继续咨询":t.name+"(义诊价￥"+n+")":"register_apply"===o?"".concat(t.name,"(").concat(t.price_str,")"):"graph"==o&&e.data.rebuyTip?"继续咨询":t.name+"(￥"+n+"元/次)"}else t.isActive=!1}));var n=this.data.isNewUser;e.setData({service_list:a,service_type:o,btn_text:i,isShowMoreDesc:n,discount_price_text:s})},beforeJumpService:function(){if(this.shareClickPoint(),"graph"==this.data.service_type)this.getActiveQa(this.data.doctor_id,"doctorHomePage");else if("register_apply"===this.data.service_type){var t=this.data.doctor_detail.doc_id,e=this.data.doctor_detail.name;wx.navigateTo({url:"/pages/out_call_message/index?doctorId=".concat(t,"&doctorName=").concat(e,"&isFirstComeIn=true")})}else this.jumpService()},getDocDisCoupon:function(){var t=this;return new Promise((function(e,i){wx.request({url:x,method:"POST",header:{"Content-Type":"application/json",Cookie:n.globalData.sessionid},data:{doctor_id:t.data.doctor_id,is_wx_mini_scan:t.scene?1:0},success:function(i){var a=i.data,o=a.error_code,r=a.error_msg;0!==o||r?t.setData({hasNewCoupon:!1}):t.setData({hasNewCoupon:!0}),e(i.data)},fail:function(t){console.log(t),i(t)}})}))},getNewUserToDoc:function(){var t=this;return new Promise((function(e,i){wx.request({url:y,method:"GET",header:{"Content-Type":"application/json",Cookie:n.globalData.sessionid},data:{doctor_id:t.data.doctor_id,is_wx_mini_scan:t.scene?1:0},success:function(i){var a;if(console.log("res",i),0===(null===(a=i.data)||void 0===a?void 0:a.error_code)&&i.data.data){var o=i.data.data,r=o.is_login,s=void 0!==r&&r,c=o.is_doc_coupon_active,n=o.to_doc_user;console.log("is_doc_coupon_active",c),t.setData({isLogin:s,is_doc_coupon_active:c,to_doc_user:n})}e(i)},fail:function(t){i(t)}})}))},jumpService:(t=o(a.default.mark((function t(){var e,i,o,r,s,c,_,l;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,!(this.data.is_doc_coupon_active&&this.data.to_doc_user||e.data.hasNewCoupon)){t.next=4;break}return t.next=4,this.getDocDisCoupon();case 4:i=e.data.service_type,o=e.data.doctor_detail,r=e.data.doctor_detail&&e.data.doctor_detail.is_famous_doctor?1:0,e.pageView(),"graph"===i?(s={finish_success_url:"",finish_fail_url:"",order_desc:"",order_name:"",order_type:i,recommend_id:this.data.urlDataForGpt.recommend_id,partner:n.globalData.partner,info_dict:{partner:n.globalData.partner,doctor_id:o.doc_id,cy_page_from:this.data.urlDataForGpt.from_type}},n.globalData.order_data=s,c="/pages/payment/index?name=".concat(o.doc_name,"&price=").concat(o.pro_price,"&hospital=").concat(o.doc_hospital,"&title=").concat(o.doc_title,"&mark=finddoc&from=doc_mainpage&is_vip_doc=").concat(r,"&activity_partner=").concat(e.activityPartner,"&has_new_coupon=").concat(e.data.hasNewCoupon?1:0),wx.navigateTo({url:c})):"video_inquiry_saas"===i?(_="".concat(d,"/v-m-general/video-appointment?doctor_id=").concat(o.doc_id),l="/pages/h5_webview/index?url=".concat(encodeURIComponent(_)),wx.navigateTo({url:l})):wx.navigateTo({url:"/pages/tel_inquiry/index?doctor_id=".concat(o.doc_id,"&from_page=doc_mainpage&from_visit_page=").concat(this.data.visitPageName)});case 9:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)}),reBuy:function(){this.shareClickPoint(),this.jumpService(),this.setData({have_active_Qa:!1,hasRepetitionConsult:!1})},continueQa:function(){this.setData({have_active_Qa:!1});var t=this.data.have_active_Qa_id;"bl"===this.data.have_active_Qa_status?wx.navigateTo({url:"/pages/inquery/inquery?problem_id="+t}):"wr"===this.data.have_active_Qa_status&&wx.navigateTo({url:"../qa_im/index?problem_id=".concat(t,"&entrancy_type=from_doc_mainpage")})},continueAsk:function(){this.setData({hasRepetitionConsult:!1});var t=this.data.have_active_Qa_id;"bl"===this.data.have_active_Qa_status?wx.navigateTo({url:"/pages/inquery/inquery?problem_id="+t}):"wr"===this.data.have_active_Qa_status&&wx.navigateTo({url:"../qa_im/index?problem_id=".concat(t,"&entrancy_type=from_doc_mainpage")})},touchCancel:function(){this.setData({hasRepetitionConsult:!1})},onService:function(t){t.currentTarget.dataset.serviceInfo.is_service_on&&this.reserveConsult(t)},selectService:function(t){var e=t.currentTarget.dataset.serviceInfo;e.is_service_on&&(console.log(e),this.setData({serviceType:e.service_type,serviceName:e.name}))},reserveConsult:function(t){var e=this.data.doctor_detail.doc_id,i=this.data.doctor_detail.name,a=t.currentTarget.dataset.consultType||this.data.serviceType;this.shareClickPoint(),m("AppClick",{app:"weixin_mini",click_position:t.currentTarget.dataset.serviceInfo?t.currentTarget.dataset.serviceInfo.name:this.data.firstSever.name,page_readable_name:"权威专家医生主页",doctor_name:i,doctor_id:e});var o=this.getVipInfoPrice(a);this.data.vip_doctor_info.is_service_open?wx.navigateTo({url:"../reserve_consult/index?doctor_id="+e+"&consult_type="+a+"&doctor_name="+i+"&service_price="+o}):wx.showToast({icon:"none",title:this.data.vip_doctor_info.service_close_text||"当前时段不可申请"})},sendmind:function(){this.pageView(),this.shareClickPoint()},getVipInfoPrice:function(t){var e=0;return this.data.vip_doctor_info.service_info.some((function(i){if(t===i.service_type)return e=(e=i.price_str.match(/\d+/))?e[0]:0,!0})),e},showMore:function(){this.setData({show_all_list:!0})},pointLogin:function(){m("AppClick",{page_readable_name:"医生主页",click_position:"弹窗上去授权按钮点击次数"})},goHome:function(){wx.switchTab({url:"/pages/index/index"})},showMoreDesc:function(){var t=!this.data.isShowMoreDesc;this.setData({isShowMoreDesc:t})},showDoctorStyleDialog:function(t){console.log(this.data.image_list);var e=t.currentTarget.dataset.index;wx.previewMedia({sources:this.data.image_list,current:e})},showIntroDesc:function(){var t=this.data.isIntroDescriptionOpen;this.setData({isIntroDescriptionOpen:!t})},jumpToDocDetail:function(t){var e=t.currentTarget.dataset.docId;m("AppClick",{app:"weixin_mini",click_position:"执业经历",page_readable_name:"权威专家医生主页",doctor_id:e,doctor_name:this.data.doctor_detail.name});var i="".concat(l.baseUrl,"/vip_doctor/template/?view_key=doctor_detail&doc_id=").concat(e,"&from_type=vip_doctor");wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(i))})},jumpToHosDetail:function(){var t;if(null!==(t=this.data.doctor_detail)&&void 0!==t&&t.hospital_id){var e="".concat(l.baseUrl,"/api/search/hospital/hospital_detail/?hospital_id=").concat(this.data.doctor_detail.hospital_id,"&from_type=5&from_visit_page=").concat(this.data.visitPageName);wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(e))})}},onRecommdDoctor:function(){m("AppClick",{app:"weixin_mini",click_position:"推荐专家",page_readable_name:this.data.vip_doctor?"权威专家医生主页":"医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.name}),this.setData({recommdAlert:!0})},recommdAlertConfirm:function(){this.setData({recommdAlert:!1})},onReg:function(t){this.data.isRegisterApply&&this.reserveConsult(t)},onDoctorDetailModal:function(t){var e=t.currentTarget.dataset.click;m("AppClick",{app:"weixin_mini",click_position:e,page_readable_name:this.data.vip_doctor?"权威专家医生主页":"医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.name}),this.setData({doctorDetailModalShow:!this.data.doctorDetailModalShow})},detailAfterLeave:function(){this.setData({doctorDetailModalShow:!1})},onIdentify:function(){this.setData({modalShow:!0})},modalShowConfirm:function(){this.setData({modalShow:!1})},showDoctorDetailModal:function(){n.sensors.track("AppClick",{app:"weixin_mini",click_position:"医生简介",page_readable_name:"权威专家医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.doc_name}),this.setData({doctorDetailModalShow:!0})},accSub:function(t,e){var i,a;try{i=t.toString().split(".")[1].length}catch(t){i=0}try{a=e.toString().split(".")[1].length}catch(t){a=0}var o=Math.pow(10,Math.max(i,a));return((t*o-e*o)/o).toFixed(i>=a?i:a)},toAssessList:function(t){if(this.data.doctor_detail){var e=t.currentTarget.dataset.url,i=t.currentTarget.dataset.clickType,a=t.currentTarget.dataset.keywords,o={app:"weixin_mini",page_readable_name:"医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.doc_name};"查看全部"===i?o.click_position="患者评价查看全部":(o.click_position="患者评价疾病词",o.click_position_value=a),console.log(o),n.sensors.track("AppClick",o),wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(d+e))})}},clickOnAssessQa:function(t){var e=t.currentTarget.dataset.problemId,i={app:"weixin_mini",page_readable_name:"医生主页",doctor_id:this.data.doctor_id,doctor_name:this.data.doctor_detail.doc_name,click_position:"患者评价QA",problem_id_str:e};n.sensors.track("AppClick",i),e&&wx.navigateTo({url:"/pages/qa_im/index?problem_id=".concat(e,"&id=").concat(this.data.doctor_detail.clinic_no,"&from=doctor_home&entrance_type=from_doc_mainpage")})},toSubscribe:function(){var t=this;(0,r.default)({url:S,method:"POST",data:{doctor_id:this.data.doctor_id,is_subscribe:!0},success:function(e){console.log(e),0===e.data.error_code&&(wx.showToast({icon:"none",title:"关注成功，医生直播、发布话题时将会通知您"}),t.setData({"liveSubscribeInfo.is_subscribe":!0,has_followed:!0,follow_text:"已关注"}))}})},unSubscribe:function(){var t=this;wx.showModal({content:"您可能错过医生的直播，确定取消订阅吗？",cancelText:"再想想",confirmText:"确定",success:function(e){console.log(e),e.confirm&&(0,r.default)({url:S,method:"POST",data:{doctor_id:t.data.doctor_id,is_subscribe:!1},success:function(e){console.log(e),0===e.data.error_code&&(wx.showToast({icon:"none",title:"已成功取消订阅"}),t.getLiveInfo())}})}})},getLiveInfo:function(){var t=this;(0,r.default)({url:D,data:{doctor_id:this.data.doctor_id},success:function(e){console.log(e),0===e.data.error_code&&t.setData({liveSubscribeInfo:e.data.data})}})},pageVisitReport:function(t,e){return(0,s.default)({fromName:this.data.fromVisitPage,name:this.data.visitPageName,extraInfo:{filter:{doctor_id:this.data.doctor_id},click_position:t||"",click_order:e||0}})},toServiceDescLink:function(t){var e=t.currentTarget.dataset.url,i=d+e;wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(i))})}});
},{isPage:true,isComponent:true,currentFile:'pages/doc_mainpage/index.js'});require("pages/doc_mainpage/index.js");