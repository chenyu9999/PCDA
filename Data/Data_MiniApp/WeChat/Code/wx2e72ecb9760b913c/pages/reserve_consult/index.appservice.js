$gwx_XC_198=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_198 || [];
function gz$gwx_XC_198_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_198_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_198_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_198_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'container'])
Z([[2,'?:'],[[7],[3,'show_mask']],[1,'position:fixed'],[1,'']])
Z([3,'progress-bar'])
Z([3,'reserve-progress reserve-progress-item-second'])
Z([[2,'=='],[[7],[3,'service_type']],[1,'register_apply']])
Z([[2,'=='],[[7],[3,'service_type']],[1,'inquiry']])
Z([3,'reserve-progress reserve-progress-item-third'])
Z(z[4])
Z(z[5])
Z([[7],[3,'is_first']])
Z([3,'step1'])
Z([3,'middle'])
Z([[2,'&&'],[[2,'!'],[[7],[3,'show_mask']]],[[2,'!'],[[7],[3,'showSubmitMask']]]])
Z([3,'form-column-group'])
Z([[2,'=='],[[7],[3,'show_price_mask']],[1,true]])
Z([[2,'=='],[[7],[3,'show_price_mask']],[1,false]])
Z(z[12])
Z(z[13])
Z(z[14])
Z(z[15])
Z([[7],[3,'price_desc']])
Z([[7],[3,'show_mask']])
Z([3,'hideMask'])
Z([3,'mask'])
Z(z[23])
Z([[7],[3,'text']])
Z([[7],[3,'show_price_mask']])
Z([[7],[3,'showSubmitMask']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_198_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_198_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_198=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_198=true;
var x=['./pages/reserve_consult/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_198_1()
var f7UB=_mz(z,'view',['class',0,'style',1],[],e,s,gg)
var oBVB=_n('view')
_rz(z,oBVB,'class',2,e,s,gg)
var lCVB=_n('view')
_rz(z,lCVB,'class',3,e,s,gg)
var aDVB=_v()
_(lCVB,aDVB)
if(_oz(z,4,e,s,gg)){aDVB.wxVkey=1
}
var tEVB=_v()
_(lCVB,tEVB)
if(_oz(z,5,e,s,gg)){tEVB.wxVkey=1
}
aDVB.wxXCkey=1
tEVB.wxXCkey=1
_(oBVB,lCVB)
var eFVB=_n('view')
_rz(z,eFVB,'class',6,e,s,gg)
var bGVB=_v()
_(eFVB,bGVB)
if(_oz(z,7,e,s,gg)){bGVB.wxVkey=1
}
var oHVB=_v()
_(eFVB,oHVB)
if(_oz(z,8,e,s,gg)){oHVB.wxVkey=1
}
bGVB.wxXCkey=1
oHVB.wxXCkey=1
_(oBVB,eFVB)
_(f7UB,oBVB)
var c8UB=_v()
_(f7UB,c8UB)
if(_oz(z,9,e,s,gg)){c8UB.wxVkey=1
var xIVB=_n('view')
_rz(z,xIVB,'class',10,e,s,gg)
var oJVB=_n('view')
_rz(z,oJVB,'class',11,e,s,gg)
var fKVB=_v()
_(oJVB,fKVB)
if(_oz(z,12,e,s,gg)){fKVB.wxVkey=1
var hMVB=_n('view')
_rz(z,hMVB,'class',13,e,s,gg)
var oNVB=_v()
_(hMVB,oNVB)
if(_oz(z,14,e,s,gg)){oNVB.wxVkey=1
}
var cOVB=_v()
_(hMVB,cOVB)
if(_oz(z,15,e,s,gg)){cOVB.wxVkey=1
}
oNVB.wxXCkey=1
cOVB.wxXCkey=1
_(fKVB,hMVB)
}
var cLVB=_v()
_(oJVB,cLVB)
if(_oz(z,16,e,s,gg)){cLVB.wxVkey=1
var oPVB=_n('view')
_rz(z,oPVB,'class',17,e,s,gg)
var lQVB=_v()
_(oPVB,lQVB)
if(_oz(z,18,e,s,gg)){lQVB.wxVkey=1
}
var aRVB=_v()
_(oPVB,aRVB)
if(_oz(z,19,e,s,gg)){aRVB.wxVkey=1
}
lQVB.wxXCkey=1
aRVB.wxXCkey=1
_(cLVB,oPVB)
}
fKVB.wxXCkey=1
cLVB.wxXCkey=1
_(xIVB,oJVB)
var tSVB=_n('mp-html')
_rz(z,tSVB,'content',20,e,s,gg)
_(xIVB,tSVB)
_(c8UB,xIVB)
}
else{c8UB.wxVkey=2
}
var h9UB=_v()
_(f7UB,h9UB)
if(_oz(z,21,e,s,gg)){h9UB.wxVkey=1
var eTVB=_mz(z,'view',['bindtap',22,'class',1,'id',2],[],e,s,gg)
var bUVB=_n('mp-html')
_rz(z,bUVB,'content',25,e,s,gg)
_(eTVB,bUVB)
_(h9UB,eTVB)
}
var o0UB=_v()
_(f7UB,o0UB)
if(_oz(z,26,e,s,gg)){o0UB.wxVkey=1
}
var cAVB=_v()
_(f7UB,cAVB)
if(_oz(z,27,e,s,gg)){cAVB.wxVkey=1
}
c8UB.wxXCkey=1
c8UB.wxXCkey=3
h9UB.wxXCkey=1
h9UB.wxXCkey=3
o0UB.wxXCkey=1
cAVB.wxXCkey=1
_(r,f7UB)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_198";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_198();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/reserve_consult/index.wxml'] = [$gwx_XC_198, './pages/reserve_consult/index.wxml'];else __wxAppCode__['pages/reserve_consult/index.wxml'] = $gwx_XC_198( './pages/reserve_consult/index.wxml' );
	;__wxRoute = "pages/reserve_consult/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/reserve_consult/index.js";define("pages/reserve_consult/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=getApp(),t=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js"),i=t.baseUrl+"/files/upload_multi_image/",a=t.baseUrl+"/api/v8/photo_help_page/",s=t.baseUrl+"/vip_doctor/subscribe_text/";Page({data:{is_wx_vip:!1,apply_price:"",vip_price:0,service_price:"",service_type:"",vip_btn_text:"",is_first:!0,phone:"",age:"",desc:"",problem_desc:"",doctor_id:"",doctor_name:"",show_mask:!0,show_price_mask:!1,showSubmitMask:!1,choose_service:[],img_list:[],service_list:[{service_name:"图文咨询",service_type:"graph",isActive:!1},{service_name:"电话咨询",service_type:"inquiry",isActive:!1},{service_name:"门诊挂号",service_type:"register_apply",isActive:!1},{service_name:"住院手术",service_type:"operation",isActive:!1}],treatArr:[{name:"就诊过",value:0},{name:"未就诊",value:1}],treatIndex:"",checkArr:[{name:"检查过",value:0},{name:"未检查",value:1}],checkIndex:"",sexArr:[{name:"男",value:"m"},{name:"女",value:"f"}],sexIndex:""},onLoad:function(e){var t=!e.done,i=!e.done,a=e.doctor_id,s=e.doctor_name,o=e.consult_type,n=e.service_price,c=this.data.choose_service,r=this.data.service_list;r.forEach((function(e){e.service_type==o&&(e.isActive=!0,c.push(o))})),this.setData({doctor_id:a,is_first:t,show_mask:i,doctor_name:s,service_list:r,choose_service:c,service_type:o,service_price:n}),this.getDialogText(a)},getDialogText:function(t){var i=this;wx.request({url:s,method:"GET",data:{doctor_id:t,partner:"chunyu_wap_mini",service_type:this.data.service_type},header:{"Content-Type":"application/json",Cookie:e.globalData.sessionid},success:function(e){0==e.data.error_code?i.setData({is_wx_vip:e.data.is_wx_vip,apply_price:e.data.apply_price,vip_price:e.data.vip_price,vip_btn_text:"立即预约（".concat(i.data.service_price,"元）"),price_desc:e.data.price_desc,text:e.data.text}):wx.showToast({title:e.error_msg||"加载失败",icon:"none"})},fail:function(e){wx.showToast({title:e.data.error_msg||"加载失败",icon:"none"})}})},updatePhone:function(e){var t=e.detail.value;this.setData({phone:t})},updateAge:function(e){var t=e.detail.value;this.setData({age:t})},updataDesc:function(e){var t=e.detail.value;this.setData({desc:t})},updataProblemDesc:function(e){var t=e.detail.value;this.setData({problem_desc:t})},checkParams:function(){var e=this.data.phone,t=this.data.treatIndex,i=this.data.checkIndex,a=this.data.problem_desc,s=this.data.age,o=this.data.sex,n=this.data.desc;return e&&/^\d{11}$/.test(e)?(a||wx.showToast({title:"请填写想咨询的问题",icon:"none"}),s||wx.showToast({title:"请填写年龄",icon:"none"}),o||wx.showToast({title:"请填写性别",icon:"none"}),t?i?n.length<30||n.length>500?(wx.showToast({title:"请详细描述病情（30~500字）",icon:"none"}),!1):a.length<10||a.length>500?(wx.showToast({title:"请详细描述您想向专家咨询的问题（10~500字）",icon:"none"}),!1):!(s.indexOf(".")>-1)||(wx.showToast({title:"年龄仅允许输入整数",icon:"none"}),!1):(wx.showToast({title:"请选择是否检查过",icon:"none"}),!1):(wx.showToast({title:"请选择是否到医院就诊过",icon:"none"}),!1)):(wx.showToast({title:"请输入正确的手机号",icon:"none"}),!1)},serviceApply:function(){var e=this.data.img_list.length,t=this.data.service_type,i=this.data.checkIndex;if(this.checkParams())return"graph"!=t&&"inquiry"!=t&&"operation"!=t||e&&"1"!=i?this.doServiceApply():void this.setData({showSubmitMask:!0})},doServiceApply:function(){var t=this.data.phone,i=this.data.desc,a=this.data.doctor_id,s=this.data.doctor_name,o=this.data.choose_service,n=this.data.is_wx_vip,c={from_wx_mini:1,partner:"chunyu_wap_mini",order_name:"权威专家咨询费",order_type:"expert_consultation",order_desc:s+"医生-名院医生预约",info_dict:{problem_desc:this.data.problem_desc,age:this.data.age,sex:this.data.sex,phone:t,desc:i,doctor_id:a,service_list:o,has_visit_doctor:0==this.data.treatIndex,has_checkup:0==this.data.checkIndex,image_list:this.data.img_list.map((function(e){return e.file})),is_from_user:!0}},r=this.data.vip_price;e.globalData.vip_reserve_param=JSON.stringify(c),e.globalData.order_data=c,wx.navigateTo({url:"/pages/payment/index?name="+s+"&vip_price="+r+"&is_wx_vip="+n})},hideMask:function(e){e.target.id===e.currentTarget.id&&this.setData({show_mask:!1})},hidePriceMask:function(){this.setData({show_price_mask:!1})},hideSubmitMask:function(){this.setData({showSubmitMask:!1})},changeReverseType:function(e){var t=this.data.service_list,i=this.data.choose_service,a=e.currentTarget.dataset.serviceType;t.forEach((function(e,t){if(e.service_type==a)if(e.isActive){e.isActive=!1;var s=i.indexOf(e.service_type);i.splice(s,1)}else e.isActive=!0,i.push(e.service_type)})),this.setData({service_list:t,choose_service:i})},treatArrChange:function(e){this.setData({treatIndex:e.detail.value})},checkArrChange:function(e){this.setData({checkIndex:e.detail.value})},sexArrChange:function(e){this.setData({sex:e.detail.value})},deleteImage:function(e){var t=this.data.img_list,i=e.currentTarget.dataset.index;t.splice(i,1),this.setData({img_list:t})},sel_img:function(){var t=this,a=t.data.img_list;a.length>=9?wx.showToast({title:"最多选择9张",icon:"none"}):wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(s){var o=s.tempFilePaths;wx.uploadFile({url:i,filePath:o[0],name:"images",formData:{return_full:"true"},header:{Cookie:e.globalData.sessionid},success:function(e){console.log("上传图片回调"),console.log(e);var i={type:"image",file:JSON.parse(e.data).files[0]};a.push(i),t.setData({img_list:a})},fail:function(){wx.showToast({title:"上传失败",icon:"none"})}})},fail:function(){wx.showToast({title:"选取失败",icon:"none"})}})},openPhone:function(){wx.navigateTo({url:"/pages/h5_webview/index?url="+a})},showReserveing:function(){this.data.is_wx_vip||wx.showModal({title:"提示",content:"预约阶段需支付预约费，因个人原因取消预约概不接受退款。",showCancel:!1,success:function(e){e.confirm&&console.log("用户点击确定")}})},showReserveFinish:function(){this.setData({show_price_mask:!0})}});
},{isPage:true,isComponent:true,currentFile:'pages/reserve_consult/index.js'});require("pages/reserve_consult/index.js");