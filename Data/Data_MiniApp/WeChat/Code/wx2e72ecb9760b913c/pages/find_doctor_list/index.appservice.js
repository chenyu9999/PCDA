$gwx_XC_92=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_92 || [];
function gz$gwx_XC_92_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_92_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_92_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_92_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'isEmpty']])
Z([3,'find-doctor-list-wrap'])
Z([3,'confirmSearch'])
Z([3,'focus'])
Z([3,'input'])
Z([3,'cy-search'])
Z([[7],[3,'visible']])
Z([3,'default'])
Z([3,'content-top'])
Z([[7],[3,'paddingLeft']])
Z([3,'输入症状、疾病、医院、科室、医生'])
Z([[7],[3,'searchQuery']])
Z(z[6])
Z([[2,'!'],[[7],[3,'visible']]])
Z([[2,'?:'],[[7],[3,'visible']],[1,650],[1,740]])
Z([[2,'&&'],[[7],[3,'isShowLoading']],[[2,'!'],[[7],[3,'visible']]]])
Z([3,'changeFlag'])
Z([3,'changePageScroll'])
Z([3,'confirmSearchEvent'])
Z([[7],[3,'clinicList']])
Z([[7],[3,'coreValue']])
Z([[7],[3,'diseaseList']])
Z([3,'filter'])
Z([[7],[3,'locationList']])
Z([[7],[3,'normalSearchList']])
Z([[7],[3,'options']])
Z([[7],[3,'showFirstOption']])
Z([[7],[3,'sortList']])
Z([3,'bindScroll'])
Z([3,'loadMoreDoctor'])
Z([a,[3,'find-doctor-list-wrap '],[[2,'&&'],[[2,'!'],[[7],[3,'visible']]],[1,'add-filter-margin']]])
Z([[7],[3,'scrollTopNum']])
Z([a,[3,'height:calc(100vh - '],[[2,'+'],[[2,'?:'],[[7],[3,'visible']],[1,54],[1,104]],[1,'px']],[3,');']])
Z(z[6])
Z([[7],[3,'associateList']])
Z([3,'search'])
Z(z[35])
Z([3,'deleteHistoryEvent'])
Z([3,'getHistoryList'])
Z([3,'inputQuery'])
Z([[7],[3,'historyList']])
Z([[7],[3,'hotSearchList']])
Z([[7],[3,'isInputing']])
Z(z[11])
Z([1,false])
Z([3,'jumpToDoctorMain'])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'doctor_id']])
Z([[6],[[7],[3,'item']],[3,'doctor_info']])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'has_online_services']])
Z([[2,'+'],[[7],[3,'index']],[1,1]])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'is_expert']])
Z([[6],[[6],[[7],[3,'item']],[3,'doctor_info']],[3,'name']])
Z(z[47])
Z(z[15])
Z([3,'doctor-recommend-list'])
Z([[2,'&&'],[[7],[3,'isShowLoading']],[[7],[3,'topTip']]])
Z([[6],[[7],[3,'recommedDoctorList']],[3,'length']])
Z([[7],[3,'recommedDoctorList']])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,4]],[[6],[[7],[3,'item']],[3,'banner_info']]])
Z([3,'handlePCB'])
Z([[6],[[6],[[6],[[7],[3,'item']],[3,'banner_info']],[3,'cy_redirect']],[3,'click_info']])
Z([[6],[[6],[[6],[[7],[3,'item']],[3,'banner_info']],[3,'cy_redirect']],[3,'target_scheme']])
Z([[6],[[6],[[7],[3,'item']],[3,'banner_info']],[3,'image_url']])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,1]],[[6],[[7],[3,'item']],[3,'doctor_info']]])
Z(z[45])
Z(z[46])
Z(z[47])
Z(z[48])
Z(z[49])
Z(z[50])
Z(z[51])
Z(z[47])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,6]])
Z([3,'onFocus'])
Z([3,'onNpsOpen'])
Z([[7],[3,'paramsObj']])
Z([1,'doctor_list'])
Z([3,'nps-card'])
Z([[6],[[6],[[7],[3,'item']],[3,'nps_info']],[3,'nps_list']])
Z(z[11])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,2]])
Z([3,'onCollectionCardClick'])
Z(z[81])
Z([[6],[[7],[3,'item']],[3,'doctor_list']])
Z(z[75])
Z([[6],[[7],[3,'item']],[3,'profile_info']])
Z([[7],[3,'visitPageName']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,3]])
Z(z[81])
Z(z[81])
Z(z[83])
Z(z[85])
Z(z[86])
Z([[2,'&&'],[[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,5]],[[7],[3,'isFirstClick']]])
Z([3,'trySearchList'])
Z([[6],[[7],[3,'item']],[3,'try_search_list']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'doctor_type']],[1,8]])
Z([3,'quicklyFindDoctor'])
Z([3,''])
Z([3,'一键找医生'])
Z([1,20])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'moreRecommendDoctor']],[[6],[[7],[3,'moreRecommendDoctor']],[3,'length']]],[[2,'!'],[[7],[3,'hasMore']]]])
Z([[7],[3,'moreRecommendDoctor']])
Z(z[45])
Z(z[46])
Z(z[47])
Z(z[48])
Z(z[49])
Z(z[50])
Z([3,'1'])
Z(z[51])
Z(z[47])
Z([[2,'&&'],[[2,'!'],[[6],[[7],[3,'recommedDoctorList']],[3,'length']]],[[2,'!'],[[7],[3,'isLoading']]]])
Z(z[97])
Z(z[99])
Z(z[100])
Z([[2,'&&'],[[7],[3,'moreRecommendDoctor']],[[6],[[7],[3,'moreRecommendDoctor']],[3,'length']]])
Z(z[102])
Z(z[45])
Z(z[46])
Z(z[47])
Z(z[48])
Z(z[49])
Z(z[50])
Z(z[109])
Z(z[51])
Z(z[47])
Z([[2,'&&'],[[7],[3,'isLoading']],[[7],[3,'hasMore']]])
Z([[7],[3,'hasMore']])
Z([[2,'!'],[[7],[3,'hasMore']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_92_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_92_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_92=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_92=true;
var x=['./pages/find_doctor_list/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_92_1()
var bC1=_n('view')
var oD1=_v()
_(bC1,oD1)
if(_oz(z,0,e,s,gg)){oD1.wxVkey=1
var xE1=_n('empty')
_(oD1,xE1)
}
else{oD1.wxVkey=2
var oF1=_n('view')
_rz(z,oF1,'class',1,e,s,gg)
var cH1=_mz(z,'cy-search',['bind:confirmEvent',2,'bind:focusEvent',1,'bind:inputEvent',2,'class',3,'focus',4,'from',5,'id',6,'paddingLeft',7,'placeholder',8,'query',9,'showClear',10,'showIcon',11,'width',12],[],e,s,gg)
_(oF1,cH1)
var fG1=_v()
_(oF1,fG1)
if(_oz(z,15,e,s,gg)){fG1.wxVkey=1
var hI1=_mz(z,'doctor-filter',['bind:changeFlag',16,'bind:changePageScroll',1,'bind:confirmSearchEvent',2,'clinicList',3,'coreValue',4,'diseaseList',5,'id',6,'locationList',7,'normalSearchList',8,'options',9,'showFirstOption',10,'sortList',11],[],e,s,gg)
_(fG1,hI1)
}
var oJ1=_mz(z,'scroll-view',['scrollY',-1,'bindscroll',28,'bindscrolltolower',1,'class',2,'scrollTop',3,'style',4],[],e,s,gg)
var cK1=_v()
_(oJ1,cK1)
if(_oz(z,33,e,s,gg)){cK1.wxVkey=1
var aN1=_mz(z,'doctor-search',['associateList',34,'bind:associationalEvent',1,'bind:confirmEvent',2,'bind:deleteHistoryEvent',3,'bind:getHistoryListEvent',4,'bind:inputEvent',5,'historyList',6,'hotSearchList',7,'isInputing',8,'searchQuery',9],[],e,s,gg)
_(cK1,aN1)
}
var oL1=_v()
_(oJ1,oL1)
if(_oz(z,44,e,s,gg)){oL1.wxVkey=1
var tO1=_mz(z,'doctor-card',['bindtap',45,'data-doctor-id',1,'data-doctor-info',2,'data-has_online_services',3,'data-index',4,'data-is_expert',5,'data-name',6,'doctorInfo',7],[],e,s,gg)
_(oL1,tO1)
}
var lM1=_v()
_(oJ1,lM1)
if(_oz(z,53,e,s,gg)){lM1.wxVkey=1
var eP1=_n('view')
_rz(z,eP1,'class',54,e,s,gg)
var bQ1=_v()
_(eP1,bQ1)
if(_oz(z,55,e,s,gg)){bQ1.wxVkey=1
}
var oR1=_v()
_(eP1,oR1)
if(_oz(z,56,e,s,gg)){oR1.wxVkey=1
var hW1=_v()
_(oR1,hW1)
var oX1=function(oZ1,cY1,l11,gg){
var t31=_v()
_(l11,t31)
if(_oz(z,58,oZ1,cY1,gg)){t31.wxVkey=1
var c01=_mz(z,'psychological-counseling-banner',['bindtap',59,'data-click-info',1,'data-redirect',2,'imgUrl',3],[],oZ1,cY1,gg)
_(t31,c01)
}
var e41=_v()
_(l11,e41)
if(_oz(z,63,oZ1,cY1,gg)){e41.wxVkey=1
var hA2=_mz(z,'doctor-card',['bindtap',64,'data-doctor-id',1,'data-doctor-info',2,'data-has_online_services',3,'data-index',4,'data-is_expert',5,'data-name',6,'doctorInfo',7],[],oZ1,cY1,gg)
_(e41,hA2)
}
var b51=_v()
_(l11,b51)
if(_oz(z,72,oZ1,cY1,gg)){b51.wxVkey=1
var oB2=_mz(z,'nps-card',['bind:onfocus',73,'bind:onopen',1,'filterOption',2,'from',3,'id',4,'npsInfo',5,'query',6],[],oZ1,cY1,gg)
_(b51,oB2)
}
var o61=_v()
_(l11,o61)
if(_oz(z,80,oZ1,cY1,gg)){o61.wxVkey=1
var cC2=_mz(z,'polymerization-card',['bindonDoctorCardClick',81,'bindonMoreClick',1,'doctorList',2,'paramsObj',3,'profileInfo',4,'visitPageName',5],[],oZ1,cY1,gg)
_(o61,cC2)
}
var x71=_v()
_(l11,x71)
if(_oz(z,87,oZ1,cY1,gg)){x71.wxVkey=1
var oD2=_mz(z,'ranking-list-card',['bindonDoctorCardClick',88,'bindonMoreClick',1,'doctorList',2,'profileInfo',3,'visitPageName',4],[],oZ1,cY1,gg)
_(x71,oD2)
}
var o81=_v()
_(l11,o81)
if(_oz(z,93,oZ1,cY1,gg)){o81.wxVkey=1
var lE2=_mz(z,'try-search',['bind:confirmSearchEvent',94,'trySearchList',1],[],oZ1,cY1,gg)
_(o81,lE2)
}
var f91=_v()
_(l11,f91)
if(_oz(z,96,oZ1,cY1,gg)){f91.wxVkey=1
var aF2=_mz(z,'intellect-diagnose',['bindtap',97,'data-click-info',1,'data-click_position',2,'marginTop',3],[],oZ1,cY1,gg)
_(f91,aF2)
}
t31.wxXCkey=1
t31.wxXCkey=3
e41.wxXCkey=1
e41.wxXCkey=3
b51.wxXCkey=1
b51.wxXCkey=3
o61.wxXCkey=1
o61.wxXCkey=3
x71.wxXCkey=1
x71.wxXCkey=3
o81.wxXCkey=1
o81.wxXCkey=3
f91.wxXCkey=1
f91.wxXCkey=3
return l11
}
hW1.wxXCkey=4
_2z(z,57,oX1,e,s,gg,hW1,'item','index','')
var cV1=_v()
_(oR1,cV1)
if(_oz(z,101,e,s,gg)){cV1.wxVkey=1
var tG2=_v()
_(cV1,tG2)
var eH2=function(oJ2,bI2,xK2,gg){
var fM2=_mz(z,'doctor-card',['bindtap',103,'data-doctor-id',1,'data-doctor-info',2,'data-has_online_services',3,'data-index',4,'data-is_expert',5,'data-more-doctor',6,'data-name',7,'doctorInfo',8],[],oJ2,bI2,gg)
_(xK2,fM2)
return xK2
}
tG2.wxXCkey=4
_2z(z,102,eH2,e,s,gg,tG2,'item','index','')
}
cV1.wxXCkey=1
cV1.wxXCkey=3
}
var xS1=_v()
_(eP1,xS1)
if(_oz(z,112,e,s,gg)){xS1.wxVkey=1
var hO2=_mz(z,'intellect-diagnose',['bindtap',113,'data-click_position',1,'marginTop',2],[],e,s,gg)
_(xS1,hO2)
var cN2=_v()
_(xS1,cN2)
if(_oz(z,116,e,s,gg)){cN2.wxVkey=1
var oP2=_v()
_(cN2,oP2)
var cQ2=function(lS2,oR2,aT2,gg){
var eV2=_mz(z,'doctor-card',['bindtap',118,'data-doctor-id',1,'data-doctor-info',2,'data-has_online_services',3,'data-index',4,'data-is_expert',5,'data-more-doctor',6,'data-name',7,'doctorInfo',8],[],lS2,oR2,gg)
_(aT2,eV2)
return aT2
}
oP2.wxXCkey=4
_2z(z,117,cQ2,e,s,gg,oP2,'item','index','')
}
cN2.wxXCkey=1
cN2.wxXCkey=3
}
var oT1=_v()
_(eP1,oT1)
if(_oz(z,127,e,s,gg)){oT1.wxVkey=1
var bW2=_v()
_(oT1,bW2)
if(_oz(z,128,e,s,gg)){bW2.wxVkey=1
}
bW2.wxXCkey=1
}
var fU1=_v()
_(eP1,fU1)
if(_oz(z,129,e,s,gg)){fU1.wxVkey=1
}
bQ1.wxXCkey=1
oR1.wxXCkey=1
oR1.wxXCkey=3
xS1.wxXCkey=1
xS1.wxXCkey=3
oT1.wxXCkey=1
fU1.wxXCkey=1
_(lM1,eP1)
}
cK1.wxXCkey=1
cK1.wxXCkey=3
oL1.wxXCkey=1
oL1.wxXCkey=3
lM1.wxXCkey=1
lM1.wxXCkey=3
_(oF1,oJ1)
fG1.wxXCkey=1
fG1.wxXCkey=3
_(oD1,oF1)
}
oD1.wxXCkey=1
oD1.wxXCkey=3
oD1.wxXCkey=3
_(r,bC1)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_92";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_92();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/find_doctor_list/index.wxml'] = [$gwx_XC_92, './pages/find_doctor_list/index.wxml'];else __wxAppCode__['pages/find_doctor_list/index.wxml'] = $gwx_XC_92( './pages/find_doctor_list/index.wxml' );
	;__wxRoute = "pages/find_doctor_list/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/find_doctor_list/index.js";define("pages/find_doctor_list/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/interopRequireDefault"),i=require("../../@babel/runtime/helpers/toConsumableArray"),e=require("../../@babel/runtime/helpers/defineProperty"),a=require("../../@babel/runtime/helpers/objectSpread2"),o=t(require("../../7C7490B0829A079C1A12F8B759DC7B70.js")),r=t(require("../../7B9C8496829A079C1DFAEC91795C7B70.js")),s=t(require("../../425B7011829A079C243D1816847D7B70.js")),n=t(require("../../3B123513829A079C5D745D1477BC7B70.js")),c=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js").baseUrl,l=require("../../92BC1755829A079CF4DA7F52C55D7B70.js").debounce,d="".concat(c,"/api/v8/search/new_suggestion/"),u=getApp(),h=0,p=0;Page({data:{paddingLeft:30,visible:!0,isInputing:!1,searchQuery:"",lastSearchQuery:"",historyList:[],hotSearchList:[],locationList:[],clinicList:[],diseaseList:[],sortList:[],normalSearchList:[],trySearchList:[],associateList:[],recommedDoctorList:[],isCanScrollPage:!0,isEmpty:!1,options:{},isShowLoading:!1,isLoading:!1,hasMore:!0,paramsObj:{from_wx_mini:1,from_type:6,platform:"weixin_mini",version:"10.3.2",page:1,count_per_page:20,filter_list:[],query:"",input_type:""},isFirstClick:!0,isClearTrySearch:!1,scrollTopNum:0,topTip:"",isFromIndexSearchDoctor:!0,npsFilterOption:{},currentClinicFirst:"",currentClinicSecond:"",currentClinicName:"",intention:"",synonym_query:"",quicklyFindDoctorInfo:{},moreRecommendDoctor:[],serverParams:"",coreValue:{location:["",""],clinic:["",""],sort:"",searchFilter:[],diseaseName:""},trySearchFilterList:[],visitPageName:"找医生列表页",fromVisitPage:""},globalDebounce:{},onLoad:function(t){wx.getSystemInfo({success:function(t){p=t.windowHeight}}),this.globalDebounce=l(this.getAssociationWord,400),this.setData({visible:"1"===t.visible,options:t,searchQuery:t.query,lastSearchQuery:t.query||"","paramsObj.query":t.query||"","paramsObj.clinic_no":t.second_clinic_no||t.first_clinic_no||"","paramsObj.city":t.city||"","paramsObj.province":t.province||"","paramsObj.sort_type":t.sort_type||"default",currentClinicFirst:t.first_clinic_no||"",currentClinicSecond:t.second_clinic_no||"",currentClinicName:t.clinic_name||"科室",coreValue:{location:[t.province||"",t.city||""],clinic:[t.first_clinic_no||"",t.second_clinic_no||""],sort:t.sort_type||"default",searchFilter:[],diseaseName:""},fromVisitPage:t.from_visit_page||""}),t.input_type&&this.setData({"paramsObj.input_type":t.input_type||""}),this.main=t.from||"",this.getHotHistoryList(),this.initData()},onShow:function(){u.sensors.track("PageView",{app:"weixin_mini",page_readable_name:"找医生列表页"}),this.pageVisitReport()},onShareAppMessage:function(){var t=this.data.paramsObj,i=t.currentF||t.currentS?t.currentF:this.data.currentClinicFirst,e=t.currentF||t.currentS?t.currentS:this.data.currentClinicSecond;return{title:this.data.title,path:"/pages/find_doctor_list/index?query=".concat(t.query,"&clinic_name=").concat(t.clinic_name||this.data.currentClinicName,"&first_clinic_no=").concat(i,"&second_clinic_no=").concat(e,"&show_clinic_window=0&show_item_type_id=2&province=").concat(t.province,"&city=").concat(t.city,"&sort_type=").concat(t.sort_type)}},initData:function(){var t=this;this.data.visible||wx.showLoading({title:"加载中..."}),Promise.all([this.getDoctorList(this.data.paramsObj,"first"),this.getFilterConf()]).then((function(){t.setData({isShowLoading:!0}),wx.hideLoading()})).catch((function(){t.setData({isShowLoading:!0,isEmpty:!0}),wx.hideLoading()}))},getHotHistoryList:function(){var t=this;(0,o.default)("/api/search/recommend_tag/",{from_type:this.data.isFromIndexSearchDoctor?"find_doc_home":"find_doc_list"}).then((function(i){console.log(i),0===i.error_code?t.setData({hotSearchList:i.data.hot_search_words}):wx.showToast({icon:"none",title:i.error_msg||"搜索热词获取失败"})})).catch((function(t){wx.showToast({icon:"none",title:t.error_msg||"搜索热词获取失败"})}))},getFilterConf:function(){var t=this;return console.log("发请求获取配置执行了"),Promise.all([(0,o.default)("/api/search/doctor/conf/",{conf_type_list:JSON.stringify([5,6,7]),from_type:1}),(0,o.default)("/api/locations/",{from_type:1,contains_all:!0}),(0,o.default)("/api/search/clinic/list/"),(0,o.default)("/api/search/disease/")]).then((function(i){console.log("res",i),t.setData({locationList:i[1].data,clinicList:i[2].data,diseaseList:i[3].data,sortList:i[0].data.sort_list,normalSearchList:i[0].data.normal_search_list})})).catch((function(t){console.log(t)}))},getDoctorListDisposalData:function(t){console.log("整理数据");var i,e=a(a({},this.data.paramsObj),t.detail);"普通筛选"===this.data.paramsObj.input_type&&(i="normal"),this.getDoctorList(e,i)},confirmSearchEvent:function(t){var i=t.detail.coreValue,e=t.detail.inputType;this.setData({coreValue:i,trySearchFilterList:[],"paramsObj.input_type":e}),i.diseaseName&&this.setData({query:i.diseaseName,searchQuery:i.diseaseName,lastSearchQuery:i.diseaseName,"paramsObj.query":i.diseaseName});var o=a(a({},this.data.paramsObj),{},{page:1,filter_list:i.searchFilter,sort_type:i.sort,province:i.location[0],city:i.location[1],clinic_no:i.clinic[1]?i.clinic[1]:i.clinic[0]||""});console.log(o),this.getDoctorList(o)},modifyCoreValue:function(t,i){var a="coreValue.".concat(t);this.setData(e({},a,i))},getDoctorList:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;console.log("发请求获取医生",a);var n=this.data,l=n.isLoading,d=n.recommedDoctorList;if(!l){var u;if(console.log("请求的type",o),"more"!==o&&this.setData({scrollTopNum:0}),this.setData({isLoading:"first"!==o,paramsObj:a,isFirstClick:"trySearch"!==o,hasMore:!0}),console.log("scrollTopNum",this.data.scrollTopNum),a.secureId=wx.getStorageSync("open_id")||wx.getStorageSync("device_id"),1===a.page&&d.length&&this.setData({recommedDoctorList:[]}),console.log(a),0===Number(a.clinic_no)&&(a.clinic_no=""),this.data.trySearchFilterList.length&&-1===(t=a.filter_list).indexOf.apply(t,i(this.data.trySearchFilterList)))(u=a.filter_list).unshift.apply(u,i(this.data.trySearchFilterList));return new Promise((function(t,n){(0,r.default)({url:c+"/api/search/doctor/list/",data:a,success:function(r){if(0===(r=r.data).error_code&&r.data){var c,l;g={validateInfo:!0,messageFilter:"find_doc_list",validateDetail:{id:"find_doc_list",message:"找医生列表页，搜索结果为空",level:3},content:{query:a.query,clinic_no:a.clinic_no,city:a.city,province:a.province,page:a.page}},(0,s.default)({attributes:r,constraints:{"data.item_list":{presence:{allowEmpty:!1}}},options:{format:"flat"}},g);var d=null===(c=r.data)||void 0===c?void 0:c.reset_filter_list;d&&d.indexOf("clinic")>-1&&e.modifyCoreValue("clinic",["",""]),e.setData({intention:r.data.intention||"",synonym_query:r.data.synonym_query||"",quicklyFindDoctorInfo:(null===(l=r.data.quick_ask)||void 0===l?void 0:l.cy_redirect)||{},moreRecommendDoctor:r.data.more_items||[],serverParams:r.data.server_params});var u=null;r.data.item_list[0]&&r.data.item_list[0].tip&&(u=r.data.item_list.splice(0,1)[0]);var h,p,m=r.data.item_list||[];if(1===a.page)e.originRecommedDoctorList=i(m),2===(null===(h=e.originRecommedDoctorList[1])||void 0===h?void 0:h.doctor_type)&&e.originRecommedDoctorList.splice(1,1),2===(null===(p=e.originRecommedDoctorList[3])||void 0===p?void 0:p.doctor_type)&&e.originRecommedDoctorList.splice(3,1);return e.setData({topTip:u}),"more"===o?(e.originRecommedDoctorList=[].concat(i(e.originRecommedDoctorList),i(r.data.item_list)),e.setData({recommedDoctorList:[].concat(i(e.data.recommedDoctorList),i(m)),isLoading:!1,hasMore:r.data.has_more})):e.setData({recommedDoctorList:m,isLoading:!1,hasMore:r.data.has_more}),t()}return e.setData({recommedDoctorList:[],isLoading:!1}),wx.showToast({icon:"none",title:"加载出错，请重试"}),n();var g},fail:function(t){return console.log(t),wx.showToast({icon:"none",title:t.error_msg||"获取数据失败"}),e.setData({isLoading:!1}),n()}})}))}},getHistoryList:function(){var t=JSON.parse(wx.getStorageSync("HISTORYLIST")||"[]");console.log("getHistory",t),this.setData({historyList:t}),console.log("historyList",t)},input:function(t){this.setData({searchQuery:t.detail,isInputing:!0,visible:!0}),this.globalDebounce(t.detail)},search:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.data.historyList,o=void 0===e?[]:e,r=t.detail||{},s=r.type,n=void 0===s?"":s,c=r.query,l=void 0===c?"":c,d=r.jump,u=void 0===d?"":d,h=r.url,p=void 0===h?"":h;"search"!==u&&u&&p?"h5"==u?wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(p))}):wx.navigateTo({url:p}):(l&&o.unshift(l),(o=i(new Set(o))).length>15&&o.pop(),this.setData({historyList:o,isInputing:!1,searchQuery:l,visible:!1,isCanScrollPage:!0,lastSearchQuery:l,"options.show_clinic_window":0,"paramsObj.query":l,"paramsObj.input_type":n}),wx.setStorageSync("HISTORYLIST",JSON.stringify(o)),console.log("获取paramsObj",this.data.paramsObj),this.getDoctorListDisposalData({detail:a(a({},this.data.paramsObj),{},{page:1})}))},focus:function(){this.setData({visible:!0,isFromIndexSearchDoctor:!1}),u.sensors.track("AppClick",{app:"weixin_mini",click_position:"顶部搜索框",page_readable_name:"找医生列表页"}),this.data.searchQuery&&this.getAssociationWord(this.data.searchQuery)},deleteHistoryEvent:function(){console.log("删除历史记录了"),this.setData({historyList:[]}),wx.setStorageSync("HISTORYLIST",JSON.stringify([]))},changePageScroll:function(t){var i=this.selectComponent("#nps-card");i&&i.setTextAreaValue(t.detail),this.setData({isCanScrollPage:t.detail})},changeFlag:function(){this.main=""},cancelSearch:function(){this.data.visible&&this.main?wx.navigateBack({delta:1}):this.setData({visible:!1,searchQuery:this.data.lastSearchQuery||this.data.searchQuery})},getAssociationWord:function(t){var i=this;this.data.searchQuery?wx.request({url:d,method:"GET",data:{type:"big_search",query:t},success:function(t){var e=t.data,a=void 0===e?{}:e;0===a.error_no?i.setData({associateList:a.data}):(i.setData({associateList:[]}),wx.showToast({icon:"none",title:"加载出错，请重试"}))},fail:function(){wx.showToast({icon:"none",title:"网络出错，请重试"})}}):this.associateList=[]},changeInputValue:function(t){this.setData({searchQuery:t.detail})},loadMoreDoctor:function(){console.log("我滑到底了");var t=this.data.paramsObj,i=void 0===t?{}:t;this.data.hasMore&&(this.setData({"paramsObj.page":i.page+1}),this.getDoctorList(this.data.paramsObj,"more"))},quicklyFindDoctor:function(t){var i,e,a=this;this.trackWithServer(null===(i=this.data.quicklyFindDoctorInfo)||void 0===i?void 0:i.click_info),this.pageVisitReport({clickPosition:"一键找医生",clickOrder:0,cyRedirect:(null===(e=this.data.quicklyFindDoctorInfo)||void 0===e?void 0:e.click_info)||{}}).then((function(){if(a.data.quicklyFindDoctorInfo.param){var t=a.data.quicklyFindDoctorInfo.param,i=t.from_page,e=void 0===i?"":i,o=t.init_content,r=void 0===o?"":o;wx.navigateTo({url:"/pages/inquery/inquery?initial_content=".concat(r,"&from_page=").concat(e,"&from_visit_page=").concat(a.data.visitPageName)})}else wx.navigateTo({url:"/pages/inquery/inquery?from_visit_page=".concat(a.data.visitPageName)})}))},handlePCB:function(t){var i=t.target.dataset.redirect||"";try{this.trackWithServer(t.target.dataset.clickInfo),this.pageVisitReport({clickPosition:"心理咨询卡片",clickOrder:0,cyRedirect:t.target.dataset.clickInfo||{}}).then((function(){wx.navigateTo({url:"/pages/h5_webview/index?url=".concat(encodeURIComponent(c+i))})}))}catch(t){console.log("错误")}},confirmSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search({detail:{query:t.detail,type:"query"}})},trySearchList:function(t){if(console.log("试试这样找",t.detail),t.detail){var i=JSON.parse(t.detail);i.query&&this.setData({searchQuery:i.query,"paramsObj.query":i.query}),this.setData({"paramsObj.input_type":"试试这样找","paramsObj.page":1,trySearchFilterList:[t.detail]}),this.getDoctorList(this.data.paramsObj,"trySearch")}},onCollectionCardClick:function(t){var i=(null==t?void 0:t.detail)||{},e=i.clickInfo,a=i.targetUrl,o=i.clickOrder,r=i.clickPosition;this.trackWithServer(e),a&&this.pageVisitReport({clickPosition:r,clickOrder:o,cyRedirect:e||{}}).then((function(){wx.navigateTo({url:a})}))},jumpToDoctorMain:function(t){var i,e,a=this,o=(t.currentTarget||{}).dataset,r=void 0===o?{}:o;console.log(this.originRecommedDoctorList),console.log("dataset",r);var s=null===(i=r.doctorInfo)||void 0===i||null===(e=i.cy_redirect)||void 0===e?void 0:e.click_info;this.trackWithServer(s);var n=this.originRecommedDoctorList.findIndex((function(t){var i;return(null===(i=t.doctor_info)||void 0===i?void 0:i.doctor_id)===r.doctorId}));console.log("跳转医生主页",n+1),this.setData({visible:!1});var c="",l=0;if(r.moreDoctor&&"1"===String(r.moreDoctor))c="医生卡片_更多推荐",l=r.index;else{var d=this.data.recommedDoctorList.filter((function(t){return 1===t.doctor_type||2===t.doctor_type}));d&&d.length&&(l=d.findIndex((function(t){var i;return(null===(i=t.doctor_info)||void 0===i?void 0:i.doctor_id)===r.doctorId}))),l>-1&&(l+=1),c="医生卡片"}this.pageVisitReport({clickPosition:c,clickOrder:l,cyRedirect:s||{}}).then((function(){r.is_expert?wx.navigateTo({url:"/pages/doc_mainpage/index?doc_id=".concat(r.doctorId,"&server_params=").concat(a.data.serverParams,"&source=vip&has_online_services=").concat(r.has_online_services,"&intention=").concat(a.data.intention,"&synonym_query=").concat(a.data.synonym_query,"&query=").concat(a.data.searchQuery,"&from_visit_page=").concat(a.data.visitPageName)}):wx.navigateTo({url:"/pages/doc_mainpage/index?doc_id=".concat(r.doctorId,"&server_params=").concat(a.data.serverParams,"&intention=").concat(a.data.intention,"&synonym_query=").concat(a.data.synonym_query,"&query=").concat(a.data.searchQuery,"&from_visit_page=").concat(a.data.visitPageName)})}))},bindScroll:function(t){h=t.detail.scrollTop},onNpsOpen:function(t){t.detail[0]<=95&&this.setData({scrollTopNum:h-(95-t.detail[0])}),t.detail[1]+248>p&&this.setData({scrollTopNum:h+t.detail[1]+248-p})},onFocus:function(t){this.setData({scrollTopNum:h-p+t.detail})},trackWithServer:function(t){if(t)try{var i=JSON.parse(t);console.log(i),u.sensors.track(i.click_event,i)}catch(t){console.error(t)}},pageVisitReport:function(t){var i=t||{},e=i.cyRedirect,a=i.clickPosition,o=i.clickOrder,r=e;if(e&&"string"==typeof e)try{r=JSON.parse(e)}catch(t){console.log("json.parse error>>>",e)}return(0,n.default)({fromName:this.data.fromVisitPage,name:this.data.visitPageName,extraInfo:{filter:this.data.paramsObj||{},cy_redirect:r,click_position:a||"",click_order:o||0}})}});
},{isPage:true,isComponent:true,currentFile:'pages/find_doctor_list/index.js'});require("pages/find_doctor_list/index.js");