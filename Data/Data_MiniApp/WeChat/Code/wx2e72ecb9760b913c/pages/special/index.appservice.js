$gwx_XC_210=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_210 || [];
function gz$gwx_XC_210_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_210_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_210_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_210_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'i'])
Z([3,'item'])
Z([[7],[3,'mould_data']])
Z([3,'index'])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mould']],[1,'link']])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mould']],[1,'add_group_chat_v2']])
Z([[6],[[6],[[7],[3,'item']],[3,'add_group_chat_v2']],[3,'group_chat_id']])
Z([3,'AppClick'])
Z([a,[3,'inner-group-warp '],[[2,'?:'],[[2,'==='],[[6],[[6],[[7],[3,'item']],[3,'add_group_chat_v2']],[3,'btn_position']],[1,'embedded']],[1,''],[1,'embedded-group-warp']]])
Z([3,'completemessage'])
Z([3,'startmessage'])
Z(z[6])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mould']],[1,'coupon']])
Z([3,'loginSuccess'])
Z([3,'loginFail'])
Z([3,'getCoupon'])
Z([3,'/pages/my_coupon/index'])
Z([3,'jumpHome'])
Z([[2,'==='],[[6],[[7],[3,'item']],[3,'mould']],[1,'customer_service']])
Z([[2,'!'],[[7],[3,'isLogin']]])
Z([3,'loginActions'])
Z(z[13])
Z(z[14])
Z([[2,'&&'],[[7],[3,'isLogin']],[[7],[3,'user_id']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_210_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_210_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_210=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_210=true;
var x=['./pages/special/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_210_1()
var eDXB=_v()
_(r,eDXB)
var bEXB=function(xGXB,oFXB,oHXB,gg){
var cJXB=_v()
_(oHXB,cJXB)
if(_oz(z,4,xGXB,oFXB,gg)){cJXB.wxVkey=1
}
var hKXB=_v()
_(oHXB,hKXB)
if(_oz(z,5,xGXB,oFXB,gg)){hKXB.wxVkey=1
var oNXB=_v()
_(hKXB,oNXB)
if(_oz(z,6,xGXB,oFXB,gg)){oNXB.wxVkey=1
var lOXB=_mz(z,'view',['bindtap',7,'class',1],[],xGXB,oFXB,gg)
var aPXB=_mz(z,'cell',['bind:completemessage',9,'bind:startmessage',1,'plugid',2],[],xGXB,oFXB,gg)
_(lOXB,aPXB)
_(oNXB,lOXB)
}
oNXB.wxXCkey=1
oNXB.wxXCkey=3
}
var oLXB=_v()
_(oHXB,oLXB)
if(_oz(z,12,xGXB,oFXB,gg)){oLXB.wxVkey=1
var tQXB=_mz(z,'cy-userinfo',['bindloginevent',13,'bindloginfail',1,'bindtap',2],[],xGXB,oFXB,gg)
_(oLXB,tQXB)
var eRXB=_n('cy-userinfo')
_rz(z,eRXB,'url',16,xGXB,oFXB,gg)
_(oLXB,eRXB)
var bSXB=_n('cy-userinfo')
_rz(z,bSXB,'bindloginevent',17,xGXB,oFXB,gg)
_(oLXB,bSXB)
}
var cMXB=_v()
_(oHXB,cMXB)
if(_oz(z,18,xGXB,oFXB,gg)){cMXB.wxVkey=1
var oTXB=_v()
_(cMXB,oTXB)
if(_oz(z,19,xGXB,oFXB,gg)){oTXB.wxVkey=1
var oVXB=_mz(z,'cy-userinfo',['bindisloginevent',20,'bindloginevent',1,'bindloginfail',2],[],xGXB,oFXB,gg)
_(oTXB,oVXB)
}
var xUXB=_v()
_(cMXB,xUXB)
if(_oz(z,23,xGXB,oFXB,gg)){xUXB.wxVkey=1
}
oTXB.wxXCkey=1
oTXB.wxXCkey=3
xUXB.wxXCkey=1
}
cJXB.wxXCkey=1
hKXB.wxXCkey=1
hKXB.wxXCkey=3
oLXB.wxXCkey=1
oLXB.wxXCkey=3
cMXB.wxXCkey=1
cMXB.wxXCkey=3
return oHXB
}
eDXB.wxXCkey=4
_2z(z,2,bEXB,e,s,gg,eDXB,'item','i','index')
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_210";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_210();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/special/index.wxml'] = [$gwx_XC_210, './pages/special/index.wxml'];else __wxAppCode__['pages/special/index.wxml'] = $gwx_XC_210( './pages/special/index.wxml' );
	;__wxRoute = "pages/special/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/special/index.js";define("pages/special/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var i=require("../../@babel/runtime/helpers/interopRequireDefault")(require("../../3B123513829A079C5D745D1477BC7B70.js")),t=getApp(),a=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js"),e=require("../../840A1D64829A079CE26C7563276C7B70.js").doPoint,o=a.baseUrl+"/events/special/",n=a.baseUrl+"/events/coupon/get_coupon/",s=a.baseUrl+"/api/third_party/get_username/";Page({data:{activity_id:"",pageTitle:"",shareTitle:"",shareDescription:"",sharePhoto:"",user_id:"",avatarUrl:"https://static.chunyuyisheng.com/@/media/images/2018/02/07/7aec/3fb12af7c391_w120_h120_.png",mould_data:[],isLogin:!0,isCoupon:!1,couponInfo:{}},onLoad:function(i){var t=decodeURIComponent(i.scene),e=this.getQueryStr("activity_id",t||""),o=i.is_show_cms_h5_page;if(i.activity_id||e)this.setData({activity_id:i.activity_id||e});else for(var n in i)if(i.hasOwnProperty(n)&&-1!==n.indexOf("activity_id")){var s=unescape(n).split("=");this.setData({activity_id:s[1]})}if(o){var c=encodeURIComponent("".concat(a.baseUrl,"/events/special/?config_id=").concat(this.data.activity_id));wx.redirectTo({url:"/pages/h5_webview/index?url=".concat(c)})}else this.getActivityInfo(),this.data.isLogin&&this.getUserId()},getQueryStr:function(i,t){var a=t.match(new RegExp(i+"=([^&]*)(&?)","i")),e=a&&a.length>1&&a[1]||"";return decodeURIComponent(e)},getActivityInfo:function(){var a=this;a.data.activity_id?wx.request({url:o,header:{"Content-Type":"application/json",Cookie:t.globalData.sessionid},data:{config_id:a.data.activity_id,is_json:1},method:"GET",success:function(t){if((t=t.data).basic_info){var o=t.mould_data.find((function(i){return"coupon"===i.mould}));a.setData({pageTitle:t.basic_info.name,shareTitle:t.basic_info.share_title,shareDescription:t.basic_info.share_desc,sharePhoto:t.basic_info.share_img,mould_data:t.mould_data,banner_img:t.basic_info.banner,banner_link:t.basic_info.banner_link,isCoupon:t.basic_info.is_coupon||!1,isLogin:t.is_login,bg_color:"background: ".concat(t.basic_info.bg_color,";"),couponInfo:o&&o.coupon||{}}),wx.setNavigationBarTitle({title:a.data.pageTitle}),e("ActivityPageView",{app:"weixin_mini",activity_name:a.data.pageTitle,page_title:a.data.pageTitle}),t.basic_info.name&&t.basic_info.name.indexOf("榜单")>-1&&(0,i.default)({fromName:"",name:"排行榜H5",extraInfo:{}})}else a.showToast("数据请求出错，请稍后再试")},fail:function(i){a.showToast("数据请求出错，请稍后再试")}}):a.showToast("未获取到页面参数~")},showToast:function(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;wx.showToast({title:i,icon:"none",duration:t})},loginActions:function(){var i=t.getUserProfileGlobal();i.isSuccess&&this.setData({avatarUrl:i.avatarUrl}),this.getUserId()},jumpHome:function(){wx.switchTab({url:"/pages/index/index"})},loginSuccess:function(){this.data.isLogin||this.getActivityInfo(),this.getUserId(),this.data.isCoupon&&this.getCoupon()},loginFail:function(){this.setData({isLogin:!1})},getCoupon:function(){var i=this,a=i.data.mould_data,e=i.data.couponInfo.couponID,o=i.data.couponInfo.has_inventory,s=i.data.couponInfo.is_get_coupon,c=i.data.couponInfo.doctorID;if(i.data.isLogin){if(!o&&!s)return void i.showToast("您来晚了，库存已不足~");if(s)return void i.showToast("您已领取此优惠卷！");wx.request({url:n,header:{"Content-Type":"application/json",Cookie:t.globalData.sessionid},data:{coupon_id:e,config_id:i.data.activity_id,doctor_ids:c},method:"post",success:function(t){0==t.data.error_code?(a.forEach((function(t,o){"coupon"===t.mould&&(t.coupon.couponID!=e||s||(a[o].coupon.is_get_coupon=!0,i.setData({mould_data:a})))})),i.showToast("领取成功！")):i.showToast(t.data.error_msg||"已领取此优惠卷！")},fail:function(t){i.showToast("数据请求出错，请稍后再试")}})}},getUserId:function(){var i=this;t.globalData.sessionid&&wx.request({url:s,header:{Cookie:t.globalData.sessionid},success:function(t){i.setData({user_id:t.data.user_id})},fail:function(){i.setData({user_id:"user_id_fail"})}})},jumppage:function(i){var t=i.currentTarget.dataset.url;""!=t&&wx.redirectTo({url:"/pages/h5_webview/index?url=".concat(t)})},onShareAppMessage:function(){var i=this.data.activity_id;return{title:this.data.shareTitle,desc:this.data.shareDescription,imageUrl:this.data.sharePhoto,path:"/pages/special/index?activity_id=".concat(i)}},startmessage:function(i){console.log("点击按钮",i)},completemessage:function(i){console.log("群聊失败",i.errcode)},AppClick:function(){e("ActivityClick",{app:"weixin_mini",activity_name:this.data.pageTitle,click_position:"小程序加入群聊"})},serviceAppClick:function(){e("ActivityClick",{app:"weixin_mini",activity_name:this.data.pageTitle,click_position:"小程序客服组件"})}});
},{isPage:true,isComponent:true,currentFile:'pages/special/index.js'});require("pages/special/index.js");