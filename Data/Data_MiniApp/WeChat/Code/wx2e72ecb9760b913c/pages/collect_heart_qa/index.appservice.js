$gwx_XC_59=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_59 || [];
function gz$gwx_XC_59_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_59_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_59_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_59_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showPage']])
Z([3,'container'])
Z([3,'collect-wrap'])
Z([[6],[[7],[3,'page_info']],[3,'len']])
Z([3,'index'])
Z([[6],[[6],[[7],[3,'page_info']],[3,'collects']],[3,'users']])
Z([[2,'||'],[[2,'<'],[[7],[3,'index']],[1,6]],[[2,'&&'],[[2,'>'],[[7],[3,'index']],[1,5]],[[7],[3,'showMore']]]])
Z([[2,'&&'],[[2,'>'],[[6],[[7],[3,'page_info']],[3,'len']],[1,6]],[[2,'!'],[[7],[3,'showMore']]]])
Z([3,'hideMask'])
Z([3,'mask'])
Z([[2,'!'],[[7],[3,'showCanvas']]])
Z(z[9])
Z([[2,'=='],[[7],[3,'showAfterSave']],[1,0]])
Z([[2,'=='],[[7],[3,'showAfterSave']],[1,3]])
Z([[2,'=='],[[7],[3,'showAfterSave']],[1,1]])
Z(z[14])
Z([[2,'=='],[[7],[3,'showAfterSave']],[1,2]])
Z([3,'confirm'])
Z([3,''])
Z([[2,'&&'],[[2,'<='],[[7],[3,'sareTimes']],[1,2]],[[7],[3,'sharePopShow']]])
Z([3,'分享成功'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_59_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_59_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_59=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_59=true;
var x=['./pages/collect_heart_qa/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_59_1()
var oXM=_v()
_(r,oXM)
if(_oz(z,0,e,s,gg)){oXM.wxVkey=1
var cYM=_n('view')
_rz(z,cYM,'class',1,e,s,gg)
var oZM=_n('view')
_rz(z,oZM,'class',2,e,s,gg)
var l1M=_v()
_(oZM,l1M)
if(_oz(z,3,e,s,gg)){l1M.wxVkey=1
var t3M=_v()
_(l1M,t3M)
var e4M=function(o6M,b5M,x7M,gg){
var f9M=_v()
_(x7M,f9M)
if(_oz(z,6,o6M,b5M,gg)){f9M.wxVkey=1
}
f9M.wxXCkey=1
return x7M
}
t3M.wxXCkey=2
_2z(z,5,e4M,e,s,gg,t3M,'item','index','')
}
var a2M=_v()
_(oZM,a2M)
if(_oz(z,7,e,s,gg)){a2M.wxVkey=1
}
l1M.wxXCkey=1
a2M.wxXCkey=1
_(cYM,oZM)
var c0M=_mz(z,'view',['bindtap',8,'class',1,'hidden',2,'id',3],[],e,s,gg)
var hAN=_v()
_(c0M,hAN)
if(_oz(z,12,e,s,gg)){hAN.wxVkey=1
}
var oBN=_v()
_(c0M,oBN)
if(_oz(z,13,e,s,gg)){oBN.wxVkey=1
}
var cCN=_v()
_(c0M,cCN)
if(_oz(z,14,e,s,gg)){cCN.wxVkey=1
}
var oDN=_v()
_(c0M,oDN)
if(_oz(z,15,e,s,gg)){oDN.wxVkey=1
}
var lEN=_v()
_(c0M,lEN)
if(_oz(z,16,e,s,gg)){lEN.wxVkey=1
}
hAN.wxXCkey=1
oBN.wxXCkey=1
cCN.wxXCkey=1
oDN.wxXCkey=1
lEN.wxXCkey=1
_(cYM,c0M)
var aFN=_mz(z,'cy-modal',['bind:confirmEvent',17,'btnText',1,'show',2,'title',3],[],e,s,gg)
_(cYM,aFN)
_(oXM,cYM)
}
oXM.wxXCkey=1
oXM.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_59";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_59();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/collect_heart_qa/index.wxml'] = [$gwx_XC_59, './pages/collect_heart_qa/index.wxml'];else __wxAppCode__['pages/collect_heart_qa/index.wxml'] = $gwx_XC_59( './pages/collect_heart_qa/index.wxml' );
	;__wxRoute = "pages/collect_heart_qa/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/collect_heart_qa/index.js";define("pages/collect_heart_qa/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=getApp(),e=require("../../BC983DD1829A079CDAFE55D6E84D7B70.js"),a=require("../../92BC1755829A079CF4DA7F52C55D7B70.js").param,s=e.baseUrl+"/events/activity/heart/collect/page/",i=e.baseUrl+"/events/activity/send/to/friend/",c=require("../../840A1D64829A079CE26C7563276C7B70.js").doPoint;Page({data:{savePath:"",screenWH:[],showCanvas:!1,showAfterSave:0,shareQrUrl:"",page_info:{},width:0,rule:"",showRule:!1,showCashBack:!1,showMore:!1,showPage:!1,showShare:!1,hasNewPic:!1,sareTimes:0,headPicList:["https://static.chunyuyisheng.com/@/media/images/2018/06/12/f8d1/78ed6e48924b_w220_h220_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/3852/73e437f47362_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/5233/1919abeff81a_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/6c89/b65bfa4d722a_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/68c5/c513bc568437_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/1035/30dd39c5b51f_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/edf7/23de46c48567_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/2f58/5f228cdbff67_w200_h201_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/5483/380d6413fe23_w180_h180_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/61db/bc82d730a9a6_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/1240/720d4f718c5b_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/80e7/13743945bb98_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/ed7b/e48145fb72b0_w220_h220_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/4f01/1a97566d1edc_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/8ec1/0ec6e5377aa0_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/a788/af2408b8a9d3_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/ee8f/84bc6b05db2f_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/0d19/50ced56aeda4_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/f644/a084a3c9d759_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/c368/632f778ba099_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/d1dc/c0f1a13159ed_w500_h500_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/a7ed/f2cb62010ab7_w250_h250_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/2df0/7000bbb51697_w304_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/39fb/be06ce404c1d_w200_h200_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/5b10/a081c0042fa2_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/8690/9987efd11389_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/306c/0590d112bb05_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/10a2/d1eb712fd7cd_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/53f2/a80b7956e1f0_w241_h240_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/131e/f1041dac2bb5_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/9bfd/2dabb07d24c2_w300_h300_.jpg","https://static.chunyuyisheng.com/@/media/images/2018/06/12/5b41/569acc61a86d_w300_h300_.jpg"],txtPicList:["https://staff.chunyu.mobi/@/media/images/2018/11/20/fe84/65a9166121c7_w98_h43_.png","https://staff.chunyu.mobi/@/media/images/2018/11/20/fd02/83567b1f675e_w98_h43_.png","https://staff.chunyu.mobi/@/media/images/2018/11/20/dda3/67b1b6e2bad3_w98_h43_.png"],headPic:"https://static.chunyuyisheng.com/@/media/images/2018/06/12/5b41/569acc61a86d_w300_h300_.jpg",txtPic:"https://static.chunyuyisheng.com/@/media/images/2018/08/21/7b7b/268771fb0d4e_w100_h43_.png",hour:"00",minute:"00",second:"00",end:!1,userList:[],cityList:["北京","天津","河北","山西","内蒙","辽宁","吉林","黑龙江","上海","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","广西","海南","重庆","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","新疆","台湾"],nameList:["红***て","人***年","2B***擦","阳***里","我***流","黑***妹","叼***下","魔***族","菊***手","訞***柒","沧***神","nb***队","傲***◇","∫***問","ˇ至***渝","马***钱","含***颠","完***1゜","ー***感","给***球","拈***笑","丶***圈","缺***ゝ","以***心。","爱***区","弯***諨","女***上","玩***猪","针***芒","所***人","有***得","老***王","狗***衷","若***Ω","一***i","心***热","闲***人","平***下","徹***醉"],price:0,activity_info:{},re_collect_rule:"",collect:0},onLoad:function(t){var e=decodeURIComponent(t.scene)||"";this.setData({problem_id:t.problem_id||e}),this.getInfo(),this.switchPic(),this.switchName(),c("ActivityPageView",{activity_name:"jax_1",platform_source:"weixin_mini"})},onShow:function(){},getInfo:function(){var e=this,a=t.globalData.partner,i=e.data.problem_id;wx.request({url:s,method:"GET",data:{partner:a,problem_id:i,from_wx_mini:1},success:function(t){var a=t.data;a.error_code?wx.showToast({title:a.error_msg||"接口请求出错，请重试！",icon:"none"}):(a.len=a.collects?a.collects.count:0,e.setData({page_info:a,shareQrUrl:a.qr_code_url,showPage:!0,rule:a.rule,price:a.price,activity_info:a.activity_info,width:Math.floor(.5*a.len/a.price*100)+"%",re_collect_rule:a.re_collect_rule||"",collect:a.len}),e.countTime(a.left_timestamp))}})},onShareAppMessage:function(){var e=this,a=t.globalData.partner,s=e.data.problem_id,i={problem_id:s,partner:a,from_wx_mini:1};return{title:"集爱心，求帮助",path:"/pages/collect_heart_help/index?collect_problem_id="+s+"&link=1",imageUrl:"https://staff.chunyu.mobi/@/media/images/2018/09/07/340f/34550169a0e2_w420_h336_.png",success:function(t){e.shareSendMsg(i),e.setData({sareTimes:++e.data.sareTimes,sharePopShow:!0})}}},shareSendMsg:function(e){wx.request({url:i,header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:t.globalData.sessionid},method:"POST",data:a(e),success:function(t){console.log(t)},fail:function(t){console.log(t.data.error_msg)}})},sendFriends:function(){c("ActivityClick",{activity_name:"jax_2",click_position:"jax_friends"})},getScreenWH:function(t){try{var e=wx.getSystemInfoSync(),a=this.data.screenWH;a.push(e.windowWidth),a.push(e.windowHeight),t&&t()}catch(t){}},countTime:function(t){var e=t||0,a=0,s=0,i=0,c=this;if(0!=e){(new Date).getTime(),e-=1e3,Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),s=Math.floor(e%864e5%36e5/6e4),i=Math.floor(e%864e5%36e5%6e4/1e3),e<=0?(c.setData({end:!0}),console.log("已结束"),clearInterval(h)):c.setData({hour:a>9?a:"0"+a,minute:s>9?s:"0"+s,second:i>9?i:"0"+i});var h=setInterval((function(){(new Date).getTime(),e-=1e3,Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),s=Math.floor(e%864e5%36e5/6e4),i=Math.floor(e%864e5%36e5%6e4/1e3),e<=0?(c.setData({end:!0}),console.log("已结束"),clearInterval(h)):c.setData({hour:a>9?a:"0"+a,minute:s>9?s:"0"+s,second:i>9?i:"0"+i})}),1e3)}else c.setData({end:!0})},switchPic:function(){var t=0,e=0,a=this;setInterval((function(){t=Math.floor(20*Math.random()),e>1?e=0:e++,a.setData({headPic:a.data.headPicList[t],txtPic:a.data.txtPicList[e]})}),2e3)},switchName:function(){for(var t=0,e=0,a=this,s=this.data.cityList.length,i=this.data.nameList.length,c=[],h=0;h<3;h++)t=Math.floor(Math.random()*s),e=Math.floor(Math.random()*i),c.push({city:a.data.cityList[t],name:a.data.nameList[e]}),a.setData({userList:c});setInterval((function(){c=[];for(var h=0;h<3;h++)t=Math.floor(Math.random()*s),e=Math.floor(Math.random()*i),c.push({city:a.data.cityList[t],name:a.data.nameList[e]}),a.setData({userList:c})}),3e3)},createPic:function(){var t=this;if(c("ActivityClick",{activity_name:"jax_2",click_position:"jax_wechat"}),function(t,e){t=t.split("."),e=e.split(".");var a=Math.max(t.length,e.length);for(;t.length<a;)t.push("0");for(;e.length<a;)e.push("0");for(var s=0;s<a;s++){var i=parseInt(t[s]),c=parseInt(e[s]);if(i>c)return 1;if(i<c)return-1}return 0}(wx.getSystemInfoSync().SDKVersion,"1.9.0")<0)wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"});else if(t.setData({showCanvas:!0}),t.data.savePath)t.setData({showImg:!0});else{t.getScreenWH();var e=t.data.screenWH[0]-40,a=738*e/670,s=80*e/670,i=75+150*e/670,h=a-34*e/670-2*s-20,n=wx.createCanvasContext("share_friend");wx.getImageInfo({src:"https://resourced.chunyu.mobi/rBYAAABFzLeGPY0W-fb0bf73b-0403-4351-a3de-c9c4fed4b6ce_w670_h738_.png",success:function(c){var o=c.path;n.drawImage(o,0,0,670,738,20,0,e,a),n.draw(),t.data.shareQrUrl?wx.downloadFile({url:t.data.shareQrUrl,success:function(c){200===c.statusCode?(n.arc(i+s,h+s,s,0,2*Math.PI),n.clip(),n.drawImage(c.tempFilePath,i,h,2*s,2*s),n.draw(!0,(function(){wx.canvasToTempFilePath({x:20,y:0,width:e,height:a,destWidth:670,destHeight:738,canvasId:"share_friend",success:function(e){n.save(),t.setData({savePath:e.tempFilePath}),t.shareSendMsg()}})}))):t.setData({showAfterSave:2})},fail:function(t){console.log(JSON.stringify(t))}}):t.setData({showAfterSave:2})},fail:function(){wx.showToast({title:"网络请求失败",icon:"error",success:function(){setTimeout((function(){wx.hideToast()}),1500)}})}})}},savePic:function(){var t=this;t.setData({showAfterSave:3}),wx.saveImageToPhotosAlbum({filePath:t.data.savePath,success:function(e){t.setData({showAfterSave:1})},fail:function(e){t.setData({showAfterSave:0})}})},hideMask:function(t){t.target.id===t.currentTarget.id&&this.setData({showCanvas:!1})},showRuleLayer:function(){this.setData({showRule:!0})},hideRuleLayer:function(){this.setData({showRule:!1})},showCashLayer:function(){this.setData({showCashBack:!0})},hideCashLayer:function(){this.setData({showCashBack:!1})},showMoreList:function(){this.setData({showMore:!0})},popShare:function(){this.setData({sharePopShow:!1})}});
},{isPage:true,isComponent:true,currentFile:'pages/collect_heart_qa/index.js'});require("pages/collect_heart_qa/index.js");