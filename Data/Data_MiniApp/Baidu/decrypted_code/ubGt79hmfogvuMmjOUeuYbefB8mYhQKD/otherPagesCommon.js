var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(e){e.global,e.Function;var t=e.setTimeout,a=e.setInterval;e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis;window.define("125",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(17);t.exports={formid:function(e){var t=e.detail.formId,a=n.getStorageSync("custNo"),o=n.getStorageSync("SN_OPENID");if(""!=t&&"undefined"!=t){var i={appid:"mainApp",customerno:a,formid:t,openid:o,formtype:"0"};return console.log(i),console.log("上面是formid入参"),new Promise((function(e,t){n.request({url:T.formid,method:"POST",data:i,dataType:"JSON",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){console.log(e),console.log("上面是formid返回结果")}})}))}console.log("formId获取失败")}}})),window.define("135",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(136);t.exports={showToast:T}})),window.define("136",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.exports=function(e){var a,o=r(),n=getCurrentPages(),i=n[n.length-1],s=e.duration&&/^\d+$/.test(e.duration)?e.duration:1200;i.setData((I(a={},"__sn_toast_show_flag",!0),I(a,"__sn_toast_title",e.title),a)),clearTimeout(o._sn_toast_timer),o._sn_toast_timer=t((function(){i.setData(I({},"__sn_toast_show_flag",!1))}),s)}})),window.define("170",(function(e,t,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var I,P=e(17),D=(I=P)&&I.__esModule?I:{default:I},x=e(25);function _(e,t){e.setData({"sms.errorInfo":t})}function k(e){e.data.sms&&(clearInterval(e.data.sms.timer),e.setData({"sms.show":!1}))}o.default={init:function(e){e.setData?e.setData({sms:{}}):e.data.msm={},e.smsInput=function(e){this.data.sms.phoneCode=e.detail.value},e.smsCancel=function(){this.data.sms.callback({success:!1}),k(this)},e.smsConfirm=function(){this.data.sms.callback({success:!0,code:this.data.sms.phoneCode})},e.smsGetCode=function(){var e=this;(0,x.requestPromise)({url:D.default.sms.getCode}).then((function(t){"1001"==t.errcode?(_(e,"手机验证码已经成功发送"),e.setData({"sms.sent":!0,"sms.count":60,"sms.countStr":"重新获取(60)","sms.timer":a((function(){var t=e.data.sms.count-1,a=!!t;a||clearInterval(e.data.sms.timer),e.setData({"sms.sent":a,"sms.count":t,"sms.countStr":"重新获取("+t+")"})}),1e3)})):"1104"==t.errcode||"1106"==t.errcode?_(e,"短信验证码发送失败！"):"01001"==t.errcode?(_(e,"当日短信发送次数已用完！"),e.setData({"sms.sent":!0,"sms.countStr":"今日次数用完"})):"01002"==t.errcode&&_(e,"两次发送短信需要间隔一分钟以上！")})).catch((function(){_(e,"短信验证码发送失败！")}))}},show:function(e){var t=e.page,a=e.callback;t.setData({"sms.show":!0,"sms.errorInfo":"","sms.phone":e.phone,"sms.sent":!1,"sms.callback":a})},hide:k,setError:_}})),window.define("229",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({data:{show:!0},methods:{onClose:function(){this.setData({show:!1})}}})})),window.define("231",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(232),I=e(77).saSendLog;Component({properties:{noGoods:{type:Array,value:[]},titleText:{type:String,value:""},hasMoveItems:{type:Array,value:[]},goodsRemoveShow:{type:Boolean,value:!1,observer:function(){this.init()}}},data:{list:[],cmmdtyInfoItems:[],itemNos:[]},ready:function(){},methods:{init:function(){console.log("++++++++++++++",this.properties.hasMoveItems);var e=this.properties.noGoods,t=[],a=[],o={},n=(0,T.getStore)("cart2Data",{cmmdtyInfoItems:[]}).cmmdtyInfoItems;e=e.reduce((function(e,t){return!o[t.itemNo]&&(o[t.itemNo]=e.push(t)),e}),[]),n&&n.length&&(n.forEach((function(o){var n=o.mainCmmdtyHeadInfo,i=o.subCmmdtyItems;e.forEach((function(e){var o=e.itemNo,r=e.errorMessage;o==n.itemNo&&(i.length>0?i.forEach((function(e){var a=e.subCmmdtyHeadInfo;t.push({errorMessage:r,cmmdtyName:a.cmmdtyName,cmmdtyCode:a.cmmdtyCode,cmmdtyQty:a.cmmdtyQty,pictureUrl:a.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")})})):t.push({errorMessage:r,cmmdtyName:n.cmmdtyName,cmmdtyCode:n.cmmdtyCode,cmmdtyQty:n.cmmdtyQty,pictureUrl:n.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")}),a.push(o))}))})),this.setData({list:t,cmmdtyInfoItems:n,itemNos:a}))},onCancel:function(){var e=this.properties.titleText;I("manuclick","以下商品暂不支持购买"==e?{modid:"73",eleid:"772073003"}:{modid:"24",eleid:"772024006"}),this.triggerEvent("onChange",{type:"cancel"})},onConfirm:function(){var e=this.data.itemNos,t=this.properties.titleText;I("manuclick","以下商品暂不支持购买"==t?{modid:"73",eleid:"772073001"}:{modid:"24",eleid:"772024004"}),this.triggerEvent("onChange",{type:"confirm",itemNos:e})},onClose:function(){var e=this.properties.titleText;I("manuclick","以下商品暂不支持购买"==e?{modid:"73",eleid:"772073002"}:{modid:"24",eleid:"772024005"}),this.triggerEvent("onChange",{type:"close"})}}})})),window.define("232",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getStore=function(e,t){return e?T[e]?(console.log("===========>Store get",e),T[e]||t):(console.warn("没有注册Store"),null):T},a.setStore=function(e,t){"string"==typeof e&&(console.log("===========>Store set",e),T[e]=t)},a.clearStore=function(e){return function(){console.log("===========>清空Store",e),T={cart2Data:null}}};var T={cart2Data:null}})),window.define("234",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(232),I=e(77).saSendLog;Component({properties:{hasChangeGoods:{type:Array,value:[]},priceChangeShow:{type:Boolean,value:!1,observer:function(){this.init()}}},data:{list:[]},ready:function(){I("autoexpo",this)},methods:{init:function(){var e=this.properties.hasChangeGoods,t=[],a=(0,T.getStore)("cart2Data",{cmmdtyInfoItems:[]}).cmmdtyInfoItems;console.log(e),a&&a.length&&(a.forEach((function(a){var o=a.mainCmmdtyHeadInfo,n=a.subCmmdtyItems;e.forEach((function(e){var a=e.itemNo,i=e.earlyPrice,r=e.cmmdtyPrice;a==o.itemNo?t.push({earlyPrice:i,cmmdtyPrice:r,cmmdtyName:o.cmmdtyName,pictureUrl:o.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")}):n.forEach((function(e){var o=e.subCmmdtyHeadInfo;a==o.itemNo&&t.push({earlyPrice:i,cmmdtyPrice:r,cmmdtyName:o.cmmdtyName,pictureUrl:o.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")})}))}))})),console.log(t),this.setData({list:t}))},onCancel:function(){I("manuclick",{modid:"68",eleid:"772068001"}),this.triggerEvent("onChange",{type:"cancel"})},onConfirm:function(){I("manuclick",{modid:"68",eleid:"772068002"}),this.triggerEvent("onChange",{type:"confirm"})},onClose:function(){this.triggerEvent("onChange",{type:"close"})}}})})),window.define("236",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(237);Component({externalClasses:["custom-class"],behaviors:[(0,T.transition)(!0)],properties:{name:{type:String,value:"fade"}}})})),window.define("237",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.transition=function(e){return Behavior({properties:{customStyle:String,show:{type:Boolean,value:e,observer:"observeShow"},duration:{type:Number,value:300}},data:{type:"",inited:!1,display:!1},attached:function(){this.data.show&&this.show()},methods:{observeShow:function(e){e?this.show():this.setData({type:"leave"})},show:function(){this.setData({inited:!0,display:!0,type:"enter"})},onAnimationEnd:function(){this.data.show||this.setData({display:!1})}}})}})),window.define("239",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{show:Boolean,mask:Boolean,customStyle:String,zIndex:{type:Number,value:1}},methods:{onClick:function(){this.triggerEvent("click")},noop:function(){}}})})),window.define("241",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(237);Component({externalClasses:["custom-class"],behaviors:[(0,T.transition)(!1)],properties:{title:String,transition:String,customStyle:String,overlayStyle:String,bodyStyle:String,zIndex:{type:Number,value:100},overlay:{type:Boolean,value:!0},closeOnClickOverlay:{type:Boolean,value:!0},position:{type:String,value:"center"},showCancelButton:{type:Boolean,value:!1},showConfirmButton:{type:Boolean,value:!1},cancelButtonText:{type:String,value:"取消"},confirmButtonText:{type:String,value:"确定"},hasTitleClose:{type:Boolean,value:!1}},methods:{onClickOverlay:function(){this.triggerEvent("click-overlay"),this.properties.closeOnClickOverlay&&this.triggerEvent("close")},onCancel:function(){this.triggerEvent("close")},onConfirm:function(){this.triggerEvent("confirm")}}})})),window.define("243",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(244);Component({properties:{cart2No:{type:String,value:""}},data:{messageCode:"",userBindPhone:"",isInit:!1,isTime:!1,timeCount:60,btnText:"获取验证码",show:!1,confirmText:"确定",placeholder:"请输入短信验证码"},ready:function(){var e=this,t=void 0;(0,I.queryUserBindPhone)().then((function(a){var o=a.userBindPhone;a.userBindFlag;t=o?"确定":"去绑定",e.setData({userBindPhone:o,isInit:!0,show:!0,confirmText:t})})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},methods:{getMessageCode:function(e){this.setData({messageCode:e.detail.value})},inputFocus:function(){this.setData({placeholder:""})},inputBlur:function(e){e.detail.value||this.setData({placeholder:"请输入短信验证码"})},onClose:function(){this.triggerEvent("close")},onConfirm:function(){var e=this.data,t=e.messageCode,a=e.userBindPhone;console.log(a),a?t?this.triggerEvent("success",t):i.showToast({title:"请输入验证码",icon:"none",duration:2e3}):this.triggerEvent("toBind")},sendMessage:function(){var e=this,a=this.properties.cart2No,o=this.data.timeCount,n=function a(){o>0?(o--,e.setData({timeCount:o},(function(){t(a,1e3)}))):e.setData({timeCount:60,isTime:!1,btnText:"重新获取"})};(0,I.sendVerificationCode)({cart2No:a,sceneType:1}).then((function(t){(t=t||{}).errorInfo?"000"==t.errorInfo.errorCode?(i.showToast({title:"验证码已发送",icon:"none",duration:2e3}),e.setData({isTime:!0},n)):i.showToast({title:t.errorInfo.errorDesc,icon:"none",duration:2e3}):i.showToast({title:"获取失败",icon:"none",duration:2e3})})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("244",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorCode=void 0,a.recPayType=function(e){var t=e.payType,a=e.childPayType,o=e.cart2No;return P.axios.post(T.default.shopping+"/app/cart2/private/recPayType.do",{terminalVersion:I.default.OPERATION_TERMINAL,operationChannel:I.default.OPERATION_CHANNEL,payType:t,childPayType:a,cart2No:o}).then((function(e){var a=e.cmmdtyPayInfos,o=(0,P.getEntry)(a,[0],{});return t!=o.payType?Promise.reject({msg:"部分商品不支持"}):o}))},a.submitOrderForWap=function(e){var t=e.cart2No,a=e.dfpToken,o=void 0===a?"":a,n=e.detect,i=void 0===n?"":n,r=e.signature,s=void 0===r?"":r,c=e.authCode,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u={channelType:I.default.CHANNEL_TYPE,terminalVersion:I.default.TERMINAL_VERSION.MINA,showGift:1,supportMobileCheck:1,authCode:c,dfpToken:o,detect:i,cart2No:t,signature:s};return Object.assign(u,d),P.axios.post(T.default.shopping+"/wap/cart2/private/submitOrderForWap.do",u).then((function(e){if(e.errorInfos&&e.errorInfos.length){var t=e.errorInfos[0],a=t.errorCode,o=t.errorMessage;return Promise.reject({code:a,msg:o})}return e}))},a.queryUserBindPhone=function(){return P.axios.Jsonp(T.default.shopping+"/wap/cart2/private/findUserPhone.do?callback=jsonp2&channelType="+I.default.CHANNEL_TYPE).then((function(e){var t=e.code,a=e.msg,o=e.data;return"1"==t?o:Promise.reject({msg:a})}))},a.sendVerificationCode=function(e){return P.axios.post(T.default.shopping+"/app/cardcoupon/private/sendVerificationCode.do",Object.assign(e,{channelType:I.default.CHANNEL_TYPE}))},a.modifySettleCart=function(e){var t=e.itemNos,a={cart2NO:e.cart2No,itemNos:t.join(",")};return P.axios.get(T.default.shopping+"/v2/wap/cart2/modifySettleCart.do",{params:a})};var T=D(e(245)),I=D(e(246)),P=e(247);function D(e){return e&&e.__esModule?e:{default:e}}a.ErrorCode={noGoodsDeliveryErrorCodes:["CSC-22-0002","CSC-22-0001","CSC-22-0004","CSC-22-0004","CSC-22-0005","CSC-22-0005","CSC-22-0010","CSC-40-0011","SYS-01-0008","SYS-01-0009","CSC-35-0003","CSC-35-0004","CSC-21-0001","CSC-32-0001","CSC-32-0002","CSC-32-0003","CSC-31-0001","CSC-33-0001","CSC-33-0003","CSC-20-0003","CSC-20-0002","CSC-35-0005","CSC-35-0006","CSC-40-0003","CSC-40-0002","CSC-21-0005","CSC-36-0001","CSC-21-0001","CSC-32-0017","CSC-32-0018","CSC-34-0012","CSC-01-0004","CSC-32-0023","CSC-21-0004","CSC-21-0005","CSC-22-0007","CSC-21-0006","CSC-31-0001","CSC-20-0005","CSC-20-0002","CSC-40-0002","CSC-40-0003","CSC-40-0019","CSC-40-0021","CSC-40-0007","CSC-40-0008","CSC-40-0009","CSC-40-0010","CSC-40-0011","CSC-40-0012","CSC-40-0013","CSC-40-0014","CSC-40-0015","CSC-33-0001","CSC-56-0008"],noGoodsSubmitErrorCode:["CSC-22-0002","CSC-22-0001","CSC-22-0010","CSC-22-0007","CSC-34-0001","CSC-34-0002","CSC-21-0001","CSC-32-0001","CSC-32-0002","CSC-32-0003","CSC-31-0001","CSC-33-0001","CSC-33-0003","CSC-20-0003","CSC-20-0002","CSC-35-0005","CSC-35-0006","CSC-40-0002","CSC-30-0013","CSC-22-0004","CSC-22-0005","CSC-21-0005","CSC-34-0010","CSC-10-0012","CSC-21-0006","CSC-21-0016","CSC-36-0001","CSC-60-0010","CSC-53-0001","CSC-34-0007","CSC-34-0009","CSC-52-0007","CSC-32-0017","CSC-32-0018","CSC-34-0012","CSC-01-0004","CSC-21-0004","CSC-20-0012","CSC-60-0046","CSC-60-0049","CSC-56-0008","CSC-33-0001"],noSupportDistributeErrorCodes:["CSC-40-0036","CSC-40-0047","CSC-40-0046","CSC-40-0044","CSC-40-0034","CSC-40-0042","CSC-40-0040","CSC-40-0029","CSC-40-0030","CSC-40-0031","CSC-40-0032","CSC-40-0033","CSC-40-0035","CSC-40-0037","CSC-40-0038","CSC-40-0039","CSC-40-0041","CSC-40-0043","CSC-40-0045","CSC-40-0048","CSC-40-0049","CSC-40-0050","CSC-40-0051","CSC-40-0052","CSC-40-0057","SYS-01-0017"]}})),window.define("245",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Host=void 0;var T,I=e(8),P=(T=I)&&T.__esModule?T:{default:T};var D=e(9),x={img:"https://image.suning.cn",shopping:"https://shopping.suning.com",rec:"https://rec.suning.com",aq:"https://aq.suning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDiRZgfyHuLVm3cxTUkbuoS2YgSyFeZlJEwhZ8vplGZoFIJo8qrrdtozx/i9kE1b76PJ4nSm+d+CIRqAG3lONIsjzMx0IVLrcAauzF7VNjJ3tcgYeOdfpKW3A4Qmv1jafO0H81xJEdJ0Gc0u7oIIOnIAURcgzksKr/4nGaMTsMDpQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCquSzTv8w+zsaHjdMUUeBuak1ZTlUiTwDreEuW8fHMW/W2wpJPXZDtNxX3tZ+JIfWnQ4yO2W27aiQcCLNdJTiz2Vd2IgCL3+j9CIKPDt3Gwl+luiXQMvVfnOeyIxcbJJkmPVF5bXXL1igUvpr1ESXLEF9zYABIIGdNJWC4cOJe1wIDAQAB"};var _={sit:{img:"https://uimgsit.cnsuning.com",shopping:"https://shoppingsit.cnsuning.com",rec:"https://recsit.cnsuning.com",aq:"https://aqsit.cnsuning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAjqk9hU/RYqGp0HgcaX1fiYetipsXlsloSb4p0G7sqpOoaQlyx4IcL+zUai7CerJeAXBWWC1CiAXP4VeSy0qrleG8rMOAiCLHMboAmf2VJFZhhleLs3RQuEFiRftqBX1mck3YhygKqIihZmI8grFCcLdPFPCkelr3ouStYAv+FQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCquSzTv8w+zsaHjdMUUeBuak1ZTlUiTwDreEuW8fHMW/W2wpJPXZDtNxX3tZ+JIfWnQ4yO2W27aiQcCLNdJTiz2Vd2IgCL3+j9CIKPDt3Gwl+luiXQMvVfnOeyIxcbJJkmPVF5bXXL1igUvpr1ESXLEF9zYABIIGdNJWC4cOJe1wIDAQAB"},pre:{img:"https://uimgpre.cnsuning.com",shopping:"https://shoppingpre.cnsuning.com",rec:"https://recpre.cnsuning.com",aq:"https://aqpre.cnsuning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsd6gnhd1htzeYpozsya/f07jAG3CcMb27sV3i0PBiI+EnWuXQmupMDuGucnetSb8m/ELYOc03ira/I7upioaxSubnuGzAX+zZNQCNhAGKJjiG15w2HzPW4LUtLskUYQ6+2j0Uf/qAmh71hkKNvCOJAmuZvw5Hsd/CAWutN2FlSwIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPjK29RXWvPqpfOGFNj4YG8EJLM5/phCaaHjXkXkslRVbeoY9oS11dDWhrjEu4F/EOmjSCBO3kmlWmMuQNyWcGNZqzIoAuzv5clNjKRJAMFqPwC6Rqxdel/7uW3TQVyavcH3jeS0SwlXwCrYjG08JFtp4LJxKhESWSntSuWpc2eQIDAQAB"},prod:x,xgpre:{img:"https://uimgxgpre.cnsuning.com",shopping:"https://shoppingprexg.cnsuning.com",rec:"https://recprexg.cnsuning.com",aq:"https://aqprexg.cnsuning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCq+iyJd8UHVLELegvDtnnhoLs7FTQ+VJxkGLRc5UcHSo7m5jhivbX+q0Vfp8endPcE0ZrFCxn0JZ11w0G46o87kPdeUU7ULI+WVLU8aN8PtP0YLOpWiT0TFUY8eUhL3nsnprO9TC5AailndAxOE94ivx56psPS9EOFCL/zXc3nZQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPjK29RXWvPqpfOGFNj4YG8EJLM5/phCaaHjXkXkslRVbeoY9oS11dDWhrjEu4F/EOmjSCBO3kmlWmMuQNyWcGNZqzIoAuzv5clNjKRJAMFqPwC6Rqxdel/7uW3TQVyavcH3jeS0SwlXwCrYjG08JFtp4LJxKhESWSntSuWpc2eQIDAQAB"}}[D]||x;a.Host=_,a.default=P.default})),window.define("246",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={USER_FLAG:0,OP_TYPE:1,DIRECT_FLAG:0,OPERATION_CHANNEL:50,OPERATION_TERMINAL:"01",OPERATION_EQUIPMENT:"06",DISTRICT_CODE:"02510",CITY_CODE:"025",PROVINCE_CODE:"100",supportYB:"1",POP_LABEL_SCENE:"07",PUBLISH_DATE:"20190422",NET_CONNECT_ERROR:"网络连接失败，请检测您的网络环境稍后重试",TERMINAL_VERSION:{WAP:"wap",MINA:"WAP|08"},CHANNEL_TYPE:"06"}})),window.define("247",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getCmmdtyInfoByShop=o.encryption=o.getOrderType=o.ObjectToArray=o.getEntry=o.axios=o.debounce=o.getShopTypes=o.Toast=void 0;var I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=e(248),D=e(245),x=e(26),_=e(25).requestPromise,k={loading:function(e){try{i.showLoading({title:e||"加载中",mask:!0})}catch(e){}},hide:function(){i.hideLoading()},tip:function(e){i.showToast({title:e,icon:"none",duration:2e3})}};function L(e,t,a){var o,n=t.serviceProperties,i=t.cmmdtyHeadInfo,r=a||{},s=r.isUnion,c=void 0!==s&&s,d=r.isFresh,u=void 0!==d&&d,l=r.isO2O,p=void 0!==l&&l,f=r.isJW,h=void 0!==f&&f,g=r.isFS,m=void 0!==g&&g,v=r.isHWG,y=void 0!==v&&v,w=r.isSN,b=void 0!==w&&w,C=r.isMJX,S=void 0!==C&&C,T=r.isXN,I=void 0!==T&&T,P=(i.activityType,i.activityXNType,i.subActivityType,"1"==e.tmFlag),D=!!~["927HWG1","927HWG"].indexOf(e.overSeasFlag),x=!0;return e.swlFlag&&"1"==e.swlFlag||"0000000000"!=e.shopCode&&(x=!1),{isUnion:c||!!n.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length,isFresh:u||!!n.filter((function(e){var t=e.serviceFlag;return e.serviceType,"13"==t})).length,isO2O:p||!!n.filter((function(e){var t=e.serviceFlag;return e.serviceType,!!~["21","22","23"].indexOf(t)})).length,isJW:h||!!n.filter((function(e){var t=e.serviceFlag;return e.serviceType,"18"==t})).length,isMJX:S||(o=n.filter((function(e){var t=e.serviceFlag;return e.serviceType,e.serviceText,"10"==t})),!!o.length&&o[0].serviceText),isXN:I||!!n.filter((function(e){var t=e.serviceFlag;return e.serviceType,e.serviceText,"16"==t})).length,isFS:m||P,isHWG:y||D,isSN:b||x}}var N={post:function(e,t,a){return this._request("POST",e,t,a)},get:function(e,t){return this._request("GET",e,t&&t.params?t.params:{})},Jsonp:function(e){return _({url:e,dataType:"jsonp"})},_request:function(e,t,a,o){var n=t.split("?")[0].split("/").slice(-3).join("_"),i=a;return _({url:t,method:e,data:a,_header:o}).then((function(e){var t=e.api,o=e.code,r=e.data,s=e.msg,c=e.v;if("1"==o){if(!Object.keys(e).length)return s=s||"网络连接失败，请检测您的网络环境稍后重试",(0,P.onUomError)({name:n,code:"nodata",msg:"接口无数据",type:"1",rres:e,inputParams:i}),Promise.reject({msg:s,api:t,v:c,data:a});if(!r)return r;var d=r.cartHeadInfo||r.cartHeadBasicInfo;if(!d)return r;if("Y"!=d.isSuccess&&!~["ccf.cart1.showTempCartInfo","ccf.cart1.updateTempCartInfo"].indexOf(t)){var u=r.errorInfos,l="",p=null;if(u&&Object.keys(u).length){var f=u instanceof Array?u[0]:u;p=f.errorCode,l=f.errorMessage}return p=p||d.errorCode,l=l||d.errorMessage,(0,P.onUomError)({name:n,code:p,msg:l,type:"2",rres:e,inputParams:i}),Promise.reject({msg:l,api:t,v:c,code:p,errors:u,data:r})}return r}return"Y"==o?e:((0,P.onUomError)({name:n,code:0,msg:s||"接口异常，请重试",type:"1",rres:e,inputParams:i}),Promise.reject(Object.assign({msg:s||"接口异常，请重试"},e)))}))},request:_,mock:function(e){return Promise.resolve(e).then((function(e){var t=e.code,a=e.data,o=e.msg;return"1"==t?a:Promise.reject({msg:o})}))}};o.Toast=k,o.getShopTypes=L,o.debounce=function(e,a){var o=null;return function(){var n=this,i=arguments;clearTimeout(o),o=t((function(){e.apply(n,i)}),a)}},o.axios=N,o.getEntry=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"object"===(void 0===e?"undefined":I(e))?t.reduce((function(e,t){return e&&e[t]?e[t]:a}),e):a},o.ObjectToArray=function(e){var t=[];for(var a in e)t.push(e[a]);return t},o.getOrderType=function(e){var t={normalCount:0,hwgCount:0,internalCount:0,ticketCount:0,donationCount:0,o2oCount:0,serviceCount:0,ybkCount:0,xnCount:0,onCount:0,kmCount:0,myCount:0,totalCount:e.length};return t=e.reduce((function(e,t){t.cmmdtyHeadInfo;var a=t.mainCmmdtyHeadInfo,o=t.serviceProperties,n=void 0===o?[]:o,i=a.overSeasFlag,r=1;i&&(~["927HWG1","927HWG"].indexOf(i)?(e.hwgCount++,"927HWG"==i&&e.internalCount++,r=0):"JSFC"==i&&(e.ticketCount++,r=0));var s=n.map((function(e){return e.serviceFlag}));return~s.indexOf("2")&&(e.donationCount++,r=0),(~s.indexOf("21")||~s.indexOf("22")||~s.indexOf("23"))&&(e.o2oCount++,e["o2oCount_"+s]++),~s.indexOf("8")&&e.serviceCount++,~s.indexOf("14")&&(e.ybkCount++,r=0),~s.indexOf("16")&&(e.xnCount++,r=0),~s.indexOf("19")&&(e.kmCount++,r=0),~s.indexOf("34")&&(e.onCount++,r=0),~s.indexOf("38")&&e.myCount++,e.normalCount+=r,e}),t)},o.encryption=function(e){var t=e;try{var a=new x.JSEncrypt;a.setPublicKey(D.Host.publickKey2),t=a.encrypt(e)}catch(a){t=e}return t},o.getCmmdtyInfoByShop=function(e){var t=e.STORAGE_MESSAGES,a=e.shopInfos,o=e.cmmdtyInfoItems.reduce((function(e,o,n){var i=o.mainCmmdtyHeadInfo,r=o.serviceProperties,s=o.cmmdtyHeadInfo,c=i.shopCode,d=i.overSeaCommonlyFlag,u=L(i,{serviceProperties:r,cmmdtyHeadInfo:s},{}),l=a.filter((function(e){return e.shopCode==c})),p="",f="",h="",g=[];l.length&&(p=l[0].shopName,f=l[0].shopDeliveryFee,h=l[0].shopTaxFare,g=l[0].shopInsurance);var m="",v="",y=p,w=f,b=h,C=g;if(u.isHWG){if(v="HWG",m=u.isSN?"SN_HWG_"+c:"C_HWG_"+c,u.isSN){y="苏宁国际官方直营";var S=l.find((function(e){return"04"==e.shopServiceType}));w=S.shopDeliveryFee,b=S.shopTaxFare,C=S._shopInsurance}}else if(u.isFS){v="FS",m="FS",y="苏宁Outlets";var T=l.find((function(e){return"01"==e.shopServiceType}));w=T.shopDeliveryFee,b=T.shopTaxFare,C=T._shopInsurance}else if(v=u.isSN?"SN":"cShop",m=u.isSN?"SN_"+c:"C_"+c,u.isSN&&"1"==d){m="HWG_YBMY";var I=l.find((function(e){return"05"==e.shopServiceType}));y=I.shopName,w=I.shopDeliveryFee,b=I.shopTaxFare,C=I._shopInsurance}return Object.assign(o,{config:u}),e[m]||(e[m]={key:m,type:v,shopCode:c,shopName:y,config:{shopDeliveryFee:w,shopTaxFare:b,shopInsurance:C},guideText:t[c]||"",cmmdtyInfoItems:[]}),e[m].cmmdtyInfoItems.push(o),e[m].config.isMJX=e[m].config.isMJX||u.isMJX,e[m].config.isHWG=e[m].config.isHWG||u.isHWG,e}),{});return Object.keys(o).map((function(e){return o[e]}))}})),window.define("248",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T;function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(a,"__esModule",{value:!0}),a.onUomError=function(e){var t=e.code,a=e.msg,o=e.type,i=void 0===o?"1":o,r=e.region,s=e.name,c=e.rres,d=e.inputParams;try{if(!D[s])return void console.warn("no-uom----\x3e"+s,"注意uom没有统计此接口");var u=D[s],l=u.code,p=(u.tip,u.bid);if("function"==typeof l){var f=getCurrentPages(),h=f[f.length-1].route;l=l(h)}l=l.replace(/\{\{(\w+)\}\}/g,(function(e,a){return t}));var g=n.getStorageSync("custNo")||"",m=n.getStorageSync("cookieObj")&&n.getStorageSync("cookieObj").custLevel||"";console.log("uom-------------------\x3e"+l,c),P.bizExcp({bid:p,error_code:l,error_detail:JSON.stringify({errorDesc:a,result:c,inputParams:d}),error_type:i,member_id:g,member_level:m,region:r,type_name:s})}catch(e){console.log("err-snBusError",e)}};var P=e(16)._snBusError,D=(I(T={"cart1_private_receiveFreeCouponForWap.do":{code:"ccf-gwc1-20088_{{code}}",tip:"领券失败报错",bid:"wxxcxCart1"},"cart1_gateway_showTempCartInfo.do":{code:"ccf-gwc1-20009_{{code}}",tip:"车1展示接口失败",bid:"wxxcxCart1"},"app_private_wapSettlement.do":{code:"ccf-gwc1-20131_{{code}}",tip:"去结算接口请求失败",bid:"wxxcxCart1"},"pcss-web_label_.do":{code:"ccf-gwc1-20023_{{code}}",tip:"爆炸贴接口请求失败",bid:"wxxcxCart1"},"getProductDetails.do":{code:"ccf-gwc1-20034_{{code}}",tip:"簇/通子码信息修改点击确定报错",bid:"wxxcxCart1"},"app_gateway_updateWarranty.do":{code:"ccf-gwc1-20053_{{code}}",tip:"可选服务加购物车失败",bid:"wxxcxCart1"},"app_private_queryAddPriceCmmdty.do":{code:"ccf-gwc1-20061_{{code}}",tip:"优惠换购去换购接口请求失败",bid:"wxxcxCart1"},"app_private_queryUsableCoupon.do":{code:"ccf-gwc1-20113_{{code}}",tip:"券前置接口请求失败",bid:"wxxcxCart1"},"cart1_gateway_updateTempCartInfo.do":{code:"ccf-gwc1-20134_{{code}}",tip:"数量修改请求失败",bid:"wxxcxCart1"},"minipro_private_miniProOrder.do":{code:"ccf-gwc2-20000_{{code}}",tip:"车2展示接口失败",bid:"wxxcxCart2"},"address_private_queryContacts.do":{code:"ccf-gwc2-20145_{{code}}",tip:"会员地址查询",bid:"wxxcxCart2"},"address_private_modifyContact.do":{code:"ccf-gwc2-20140_{{code}}",tip:"地址操作",bid:"wxxcxCart2"},"cart2_private_recDeliveryForHide.do":{code:"ccf-gwc2-20140_{{code}}",tip:"提交配送信息到订单",bid:"wxxcxCart2"},"cardcoupon_private_queryCouponListInfo.do":{code:"ccf-gwc2-20146_{{code}}",tip:"请求优惠券列表",bid:"wxxcxCart2"},"cardcoupon_private_recCouponInfo.do":{code:"ccf-gwc2-20072_{{code}}",tip:"保存优惠券/直降",bid:"wxxcxCart2"},"cart2_private_saveCloudDiamondAmount.do":{code:"ccf-gwc2-20122_{{code}}",tip:"使用云钻",bid:"wxxcxCart2"},"cart2_private_setOverseaCertInfo.do":{code:"ccf-gwc2-20026_{{code}}",tip:"海外购实名认证",bid:"wxxcxCart2"},"cart2_private_recInvoiceInfo.do":{code:"ccf-gwc2-2fpbc_{{code}}",tip:"发票保存报错",bid:"wxxcxCart2"},"cart2_private_queryInvoiceTitle.do":{code:"ccf-gwc2-20066_{{code}}",tip:"发票信息查询",bid:"wxxcxCart2"},"cart2_private_submitOrderForWap.do":{code:function(e){return~e.indexOf("cart-gift")?"ccf-gwc2-2wxsltjdd_{{code}}":"ccf-gwc2-20129_{{code}}"},tip:"提交订单接口请求失败",bid:"wxxcxCart2"},"cart2_private_recPayType.do":{code:"ccf-gwc2-20157_{{code}}",tip:"支付方式保存失败",bid:"wxxcxCart2"},"cart2_private_balancePaymentSubmitWap.do":{code:"ccf-gwc2-20137_{{code}}",tip:"尾款提交",bid:"wxxcxCart2"},"cart2_private_sendVerificationCode.do":{code:"ccf-gwc2-20078_{{code}}",tip:"苏宁卡使用获取验证码失败",bid:"wxxcxCart2"},"cart2_private_recCardInfo.do":{code:"ccf-gwc2-20079_{{code}}",tip:"苏宁卡保存失败",bid:"wxxcxCart2"},"cart2_private_bandGiftCard.do":{code:"ccf-gwc2-20080_{{code}}",tip:"苏宁卡绑定失败",bid:"wxxcxCart2"},"cart2_private_operateEnergySubsidies.do":{code:"ccf-gwc2-20141_{{code}}",tip:"操作节能补贴开关",bid:"wxxcxCart2"},"cart2_private_balancePayOrderWap.do":{code:"ccf-gwc2-20143_{{code}}",tip:"预定尾款展示",bid:"wxxcxCart2"},"cart2_private_queryGiftCardList.do":{code:"ccf-gwc2-20144_{{code}}",tip:"查询卡",bid:"wxxcxCart2"},"cart2_private_recBPCardInfo.do":{code:"ccf-gwc2-20150_{{code}}",tip:"保存尾款用卡",bid:"wxxcxCart2"},"cart2_private_saveBalancePaymentCouponWap.do":{code:"ccf-gwc2-20151_{{code}}",tip:"保存尾款用券",bid:"wxxcxCart2"}},"cart2_private_recDeliveryForHide.do",{code:"ccf-gwc2-20156_{{code}}",tip:"配送信息保存",bid:"wxxcxCart2"}),I(T,"wechat_private_sendQuickBuy.do",{code:"ccf-gwc1-2wxslsghy_{{code}}",tip:"微信送礼_送给好友(立即购+提交订单)",bid:"wxxcxCart2"}),I(T,"wechat_private_receviceGift.do",{code:"ccf-gwc1-2wxslljgm_{{code}}",tip:"微信送礼_填写收礼地址",bid:"wxxcxCart2"}),T);a.default=D})),window.define("250",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(244),D=e(54),x=(I=D)&&I.__esModule?I:{default:I},_=e(16),k=e(23),L=e(245),N=e(251);var E=e(77).saSendLog,O=(e(246),e(252)),A=e(25),R=A.wxPay,M=(A.wxH5pay,A.aliPay,A.saSendPageViewLog,A.getDfpToken);var U=function(e,a){var o=null;return function(){var n=this,i=arguments;clearTimeout(o),o=t((function(){e.apply(n,i)}),a)}}((function(e){var t=this;e?this.onPayChange().then((function(){return i.hideLoading(),t.onSubmitHandler("")})).catch((function(e){i.hideLoading(),console.log("errr",e),i.showToast({title:e.msg,icon:"none",duration:3e3})})):i.hideLoading()}),1e3);Component({properties:{cart2No:{type:String,value:""},childPayType:{type:String,value:"02"},params:{type:Object,value:{}},cmmdtyInfoItems:{type:Array,value:[]},timestemp:{type:String,value:"",observer:function(){this.init()}},enable:{type:Boolean,value:!0},payType:{type:String,value:""},cartHeadBasicInfo:{type:Object,value:{}}},data:{currentPayType:"08",detects:"",dfpToken:"",vericodeShow:!1,cart2No:"",isBack:!1,priceChangeShow:!1,hasChangeGoods:[],goodsRemoveShow:!1,noGoods:[],HWGtip:"",HWGshow:!1},ready:function(){var e=this,t=x.default.getTrack(),a=this.properties.cart2No;this.setData({detects:t,cart2No:a}),M().then((function(t){e.setData({dfpToken:t})}))},pageLifetimes:{show:function(){this.data.isBack&&(this.triggerEvent("checkBtnEnable"),this.setData({isBack:!1}))}},methods:{onClick:function(){this.triggerEvent("checkBtnEnable")},init:function(){var e=this.properties.enable;U.call(this,e)},onPayChange:function(){var e=this.properties,t=e.cart2No,a=e.childPayType,o=e.payType;return console.log(a),(0,P.recPayType)({payType:o||"08",childPayType:a,cart2No:t})},onSubmitHandler:function(e){var t=this,a=this.properties,o=a.cart2No,n=a.params,r=a.cmmdtyInfoItems,s=(a.cartHeadBasicInfo,this.data),c=s.dfpToken,d=s.detects;i.hideLoading(),(0,P.submitOrderForWap)({cart2No:o,dfpToken:c,detect:d,signature:"",authCode:e},n).then((function(e){var a=e.cartHeadInfo,o=e.orderItems;t.setData({vericodeShow:!1}),i.hideLoading();var n=a.payStatus,s=a.miniCartRouteSwitch,c=o[0].orderInfo,d=c.payCode,u=c.orderId;if(console.log(a,o[0]),~["05","03","02"].indexOf(n))if(~O.indexOf(d)){if(!u)return void i.showModal({title:"提交订单失败,获取不到订单id",icon:"none",duration:3e3});var l="01"==t.properties.childPayType?"2":"1";t.$goWXPay(u,l,l,s,d);try{if(r.length){var p=r.map((function(e){var t=e.mainCmmdtyHeadInfo;return t.cmmdtyCode+"_"+t.cmmdtyQty+"_"+t.salesPrice})).join(",");E("order",{order_id:u,item_info:p})}}catch(e){console.log(e.message)}}else i.showModal({title:"该订单商品暂不支持小程序购买",icon:"none",duration:3e3});else"01"==n&&t.$goCart4(u,s)})).catch((function(e){n&&n.gameAccount&&_._snBusError.bizExcp({error_code:"cpf-czzx-20002_"+e.code}),"CCF-00-0004"!=e.code&&"CCF-00-0005"!=e.code?(t.setData({vericodeShow:!1}),"CSC-00-0010"!=e.code?"CSC-21-0002"!=e.code?~P.ErrorCode.noGoodsSubmitErrorCode.indexOf(e.code)?t.setData({goodsRemoveShow:!0,noGoods:e.errors,titleText:"以下商品在此地无货或暂不销售"}):~P.ErrorCode.noSupportDistributeErrorCodes.indexOf(e.code)?t.setData({goodsRemoveShow:!0,noGoods:e.errors,titleText:"以下商品暂不支持购买"}):i.showToast({title:e.msg||"网络异常，请重试！",icon:"none",duration:3e3}):t.setData({priceChangeShow:!0,hasChangeGoods:e.errors}):t.setData({HWGshow:!0,HWGtip:e.msg})):t.setData({vericodeShow:!0})}))},$goWXPay:function(e,t,a,o,n){var r=this;if(e)if("wx"===(0,k.getPlatformType)())R(e,t,a).then((function(t){console.log(t),r.$goCart4(e,o)})).catch((function(e){E("manuclick",{modid:"35",eleid:"772035010"}),i.showModal({title:"提示",content:"订单超过一定时间未支付将被取消，请尽快完成支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",success:function(e){e.confirm&&(r.$goOrderList(),E("manuclick",{modid:"35",eleid:"772035011"}))}})}));else switch(n){case"08":(0,N.wxPay)({orderId:e,payFlag:a}).then((function(t){console.log("wxPay2 success",t),t&&i.redirectTo({url:"/pages/wxpay-confirm/wxpay-confirm?orderIds="+e+"&newCart4Switch="+o+"&wxGetGiftFlag="})})).catch((function(e){console.error("wxPay2 fail",e),r.$goOrderList()}));break;case"13":(0,N.aliPay)({orderId:e,payFlag:a}).then((function(t){console.log("aliPay2 success",t),r.$goCart4(e,o)})).catch((function(e){console.error("aliPay2 fail",e),r.$goOrderList()}))}},$goCart4:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="1"==t?"/packageA/pages/order/cart4/cart4?id=":"/packageA/pages/cart4/cart4?id=";i.redirectTo({url:a+e})},$goOrderList:function(){i.redirectTo({url:"/packageA/pages/order/orderList/orderList?index=0"})},onClose:function(){this.setData({vericodeShow:!1}),E("manuclick",{modid:"69",eleid:"772069002"})},onSuccess:function(e){var t=e.detail;t&&this.onSubmitHandler(t),E("manuclick",{modid:"69",eleid:"772069003"})},onBind:function(){var e="/pages/webView/index?webViewSrc="+("wx"===(0,k.getPlatformType)()?L.Host.aq+"/asc/wap/mobile/check_1.do":encodeURIComponent(L.Host.aq+"/asc/wap/mobile/check_1.do"));i.navigateTo({url:e}),this.setData({vericodeShow:!1,isBack:!0}),E("manuclick",{modid:"69",eleid:"772069001"})},onPriceChange:function(e){var t=e.detail.type;"cancel"==t?i.navigateBack():"confirm"==t&&this.onSubmitHandler(""),this.setData({priceChangeShow:!1})},onNoGoods:function(e){var t=this,a=e.detail.type,o=this.data.cart2No;if("cancel"==a)i.navigateBack();else if("confirm"==a){var n=e.detail.itemNos;(0,P.modifySettleCart)({itemNos:n,cart2No:o}).then((function(e){t.onSubmitHandler("")})).catch((function(e){}))}this.setData({goodsRemoveShow:!1})},goFourthPage:function(){var e=this.properties.cmmdtyInfoItems[0],t=e.mainCmmdtyHeadInfo,a=e.cmmdtyHeadInfo,o=e.serviceProperties,n=t.swlFlag,r=t.shopCode,s=t.cmmdtyCode,c=t.supplierCode,d=t.tmFlag,u=t.cmmdtyName,l=a.subActivityType,p=r,f=o.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length?1:0;p="1"==n||"1"==f&&"0000000000"!=r?c:"6"==l?"mp":d&&f&&"1"==f?c:r,i.navigateTo({url:"/pages/fourth/fourth?productId="+s+"&shop="+p+"&title="+u})},onConfirm:function(){var e=this.properties.cartHeadBasicInfo;this.setData({HWGshow:!1}),"0"==e.directFlag?i.switchTab({url:"/pages/cart/cart1/cart1"}):this.goFourthPage()}}})})),window.define("251",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.aliPay=a.wxPay=void 0;var T=_(e(17)),I=_(e(54)),P=e(42),D=_(e(36)),x=e(38);function _(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var L,N=e(246).TERMINAL_VERSION,E=(N=void 0===N?{}:N).MINA,O=void 0===E?"WAP|08":E,A=(0,D.default)(n.requestThirdPayment),R=(0,D.default)(n.request),M=function(){return n.getStorageSync("cookieStr")||n.getStorageSync("quick_cookieStr")};a.wxPay=function(){var e=k(regeneratorRuntime.mark((function e(t){var a,o,n,i,r,s,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.checkLogin)({toLogin:!1});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),"wxPay2 checkLogin fail";case 8:return a=t.orderId,t.payFlag,e.t1=R,e.t2=T.default.order.toH5Wxpay2,e.t3={cookie:M(),"content-type":"application/x-www-form-urlencoded"},e.t4=a,e.next=15,(0,P.getDfpToken)();case 15:return e.t5=e.sent,e.next=18,I.default.getTrack({});case 18:return e.t6=e.sent,e.t7=O,e.t8={orderIds:e.t4,payEnvironment:"browser",payFlag:"1",businessNo:"",dfpToken:e.t5,detect:e.t6,channelType:"6",dataInfo:"{}",newChannelType:e.t7,clientChannel:"bdxcx"},e.t9={url:e.t2,method:"POST",dataType:"json",header:e.t3,data:e.t8},e.next=24,(0,e.t1)(e.t9);case 24:if(o=e.sent,n=o.data,i=n.orderInfo,n.payUrl,n.bdPayFlag,r=n.retCode,s=n.errMsg,c=void 0===s?"":s,"0"===r){e.next=34;break}return e.abrupt("return",{errMsg:c});case 34:return e.next=36,A({orderInfo:i});case 36:return d=e.sent,e.abrupt("return",d);case 38:case"end":return e.stop()}}),e,void 0,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.aliPay=(L=k(regeneratorRuntime.mark((function e(t){var a,o,i,r,s,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.checkLogin)({toLogin:!1});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),"aliPay2 checkLogin fail";case 8:return a=t.orderId,t.payFlag,e.t1=R,e.t2=T.default.order.toAlipay2,e.t3={cookie:M(),"content-type":"application/x-www-form-urlencoded"},e.t4=a,e.next=15,(0,P.getDfpToken)();case 15:return e.t5=e.sent,e.next=18,I.default.getTrack({});case 18:return e.t6=e.sent,e.t7=O,e.t8={orderId:e.t4,clientInfo:"",channelType:"6",payFlag:"1",version:"",clientType:"ios",enablePayChannels:"pcredit",periodNum:"",dfpToken:e.t5,detect:e.t6,freeInterestFlag:"",dataInfo:"{}",appId:"",sellerId:"",unionAggregatePayFlag:"",newChannelType:e.t7,clientChannel:"bdxcx"},e.t9={url:e.t2,method:"POST",dataType:"json",header:e.t3,data:e.t8},e.next=24,(0,e.t1)(e.t9);case 24:if(o=e.sent,i=o.data,r=i.orderInfo,i.payUrl,i.bdPayFlag,s=i.retCode,c=i.errMsg,d=void 0===c?"":c,"0"===s){e.next=34;break}return e.abrupt("return",{errMsg:d});case 34:return e.next=36,A({orderInfo:r});case 36:if(u=e.sent,"devtools"!==n.getSystemInfoSync().platform){e.next=40;break}throw u.message;case 40:return e.abrupt("return",u);case 41:case"end":return e.stop()}}),e,void 0,[[0,5]])}))),function(e){return L.apply(this,arguments)})})),window.define("252",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports=["08","13"]})),window.define("256",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({options:{multipleSlots:!0},properties:{test:{type:Boolean,observer:function(){this.init()}},elTest0:{type:Boolean,observer:function(){this.init()}},elTest1:{type:Boolean,observer:function(){this.init()}},elTest2:{type:Boolean,observer:function(){this.init()}},elTest3:{type:Boolean,observer:function(){this.init()}},elTest4:{type:Boolean,observer:function(){this.init()}}},data:{isValue:!1,elifValue0:!1,elifValue1:!1,elifValue2:!1,elifValue3:!1,elifValue4:!1},methods:{init:function(){var e=this.properties,t=e.test,a=e.elTest0,o=e.elTest1,n=e.elTest2,i=e.elTest3,r=e.elTest4;this.setData({isValue:t,elifValue0:a,elifValue1:o,elifValue2:n,elifValue3:i,elifValue4:r})}}})})),window.define("260",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.CARD_TYPES=void 0;var I=e(261);var P=function(e,a){var o=null;return function(){var n=this,i=arguments;clearTimeout(o),o=t((function(){e.apply(n,i)}),a)}}((function(){var e=this,t=[],a=this.properties,o=a.cartHeadBasicInfo,n=o.cardAmount,r=o.cart2No,s=a.cardUseInfos,c=a.cmmdtyInfoItems,d=a.isCardFlag,u=a.isSupport;a.shopInfos;try{var l=i.getStorageSync("vips");l&&(t=l)}catch(e){}(0,I.queryCardList)(t,r,c).then((function(t){var a=t.cardInfos,o=void 0===a?[]:a,i=t.unUseCardInfos,r=void 0===i?[]:i;o=o.map((function(e){var t=e.cardType;return~[D.CARD_DISPLAY_TYPE_VIP,D.CARD_DISPLAY_TYPE_LAOX].indexOf(t)?e.giftCardType="":t==D.CARD_DISPLAY_TYPE_BOOK?e.giftCardType=D.GIFT_CARD_TYPE_BOOK:e.giftCardType=D.GIFT_CARD_TYPE_NORMAL,e}));var c="",l="";u?+n?(c="已用"+s.length+"张",l="抵用"+n+"元"):o.length&&d?c=o.length+"张可用":o.length&&d||(l="无可用"):l="商品暂不支持使用苏宁卡支付",e.setData({cardInfos:o,unUseCardInfos:r,htmlTip:c,htmlTip2:l,isSupport:u})})).catch((function(e){return console.log(e.msg)}))}),50),D=o.CARD_TYPES={CARD_DISPLAY_TYPE_NORMAL:"0",CARD_DISPLAY_TYPE_BOOK:"1",CARD_DISPLAY_TYPE_VIP:"2",CARD_DISPLAY_TYPE_LAOX:"3",CARD_TYPE_NORMAL:"9031",CARD_TYPE_VIP:"9038",CARD_TYPE_LAOX:"9051",GIFT_CARD_TYPE_NORMAL:"2",GIFT_CARD_TYPE_BOOK:"1"};Component({properties:{cartHeadBasicInfo:{type:Object,value:{},observer:function(e,t){this.init()}},cmmdtyInfoItems:{type:Object,value:[]},cardUseInfos:{type:Object,value:[],observer:function(e,t){this.init()}},isSupport:{type:Boolean,value:!1},isCardFlag:{type:Boolean,value:!1},shopInfos:{type:Object,value:[]},cardFlag:{type:String,value:""}},data:{htmlTip:"",htmlTip1:"",cardInfos:[],unUseCardInfos:[]},methods:{init:function(){P.call(this)},onClickHandler:function(){var e=this.properties,t=e.cartHeadBasicInfo.cart2No,a=e.cmmdtyInfoItems,o=e.isSupport,n=e.cardUseInfos,r=e.isCardFlag,s=e.cardFlag;o&&i.setStorage({key:t,data:{cmmdtyInfoItems:a,cardUseInfos:n},success:function(){i.navigateTo({url:"/pages/cart/_Components/Card/page/page?cart2No="+t+"&isCardFlag="+r+"&cardFlag="+s})}})}}})})),window.define("261",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryGiftCardList=k,a.bandGiftCard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I.axios.post(D.default.shopping+"/app/cardcoupon/private/bandGiftCard.do",Object.assign(e,{operationEquipment:_.OPERATION_EQUIPMENT})).then((function(e){var t=e.isSuccess,a=e.errorDesc;return"1"==t?e:Promise.reject({msg:a})}))},a.queryCardList=function(e,t,a){return k(t,a).then((function(t){var a=t.cardInfos,o=t.unUseCardInfos;return e.length&&e.forEach((function(e){"1"==e.useAble?a.push(e):o.push(e)})),Object.assign({},t,{cardInfos:a,unUseCardInfos:o})}))},a.queryUserBindPhone=function(){return I.axios.Jsonp(D.default.shopping+"/wap/cart2/private/findUserPhone.do?callback=jsonp2&channelType="+_.CHANNEL_TYPE).then((function(e){var t=e.code,a=e.msg,o=e.data;return"1"==t?o:Promise.reject({msg:a})}))},a.sendVerificationCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I.axios.post(D.default.shopping+"/app/cardcoupon/private/sendVerificationCode.do",Object.assign(e,{channelType:_.CHANNEL_TYPE}))},a.saveCardInfo=function(e){var t=e.usedCardList,a=e.verificationCode,o=void 0===a?"":a,n=e.needValidateCode,i=e.dfpToken,r=e.cart2No,s=e.detect;t=t.map((function(e){var t="",a="";return"2"==a?(a="9038",""):"3"==a?a="9051":"1"==a?(t="1",a="9031"):(t="2",a="9031"),Object.assign({},e,{cardType:a,giftCardType:t})}));var c={};n&&(c={verificationCode:o,usedCardList:JSON.stringify(t)});return Object.assign(c,{operationEquipment:"wx"===(0,x.getPlatformType)()?"05":"06",operationTerminal:_.OPERATION_TERMINAL,publishDate:_.PUBLISH_DATE,cart2No:r,dfpToken:i,c2dt:s}),I.axios.post(D.default.shopping+"/card/recCardInfo.do",c)},a.savewkCardInfo=function(e){var t=e.usedCardList,a=e.verificationCode,o=void 0===a?"":a,n=e.needValidateCode,i=e.dfpToken,r=e.cart2No,s=e.detect;t=t.map((function(e){var t="",a="";return"2"==a?(a="9038",""):"3"==a?a="9051":"1"==a?(t="1",a="9031"):(t="2",a="9031"),Object.assign({},e,{cardType:a,giftCardType:t})}));var c={};n&&(c={verificationCode:o,cardList:t});return Object.assign(c,{operationEquipment:"wx"===(0,x.getPlatformType)()?"05":"06",operationTerminal:_.OPERATION_TERMINAL,publishDate:_.PUBLISH_DATE,cart2No:r,dfpToken:i,c2dt:s}),console.log(JSON.stringify(c)),I.axios.post(D.default.shopping+"/card/recBPCardInfo.do",JSON.stringify(c),{"content-type":"application/json;charset=UTF-8"}).then((function(e){var t=e.bpCardSaveOutHeader,a=e.bpCardSaveError,o=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["bpCardSaveOutHeader","bpCardSaveError"]);return"N"==t.isSuccess?Promise.reject({msg:a[0].errorMessage,code:a[0].errorCode}):o}))};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T},x=e(23);var _=e(246);function k(e,t){var a=[];return t.filter((function(e){return"24"!=e.cmmdtyHeadInfo.activityType})).forEach((function(e){var t,o=e.mainCmmdtyHeadInfo,n=e.subCmmdtyItems,i=void 0===n?[]:n,r=o.shopCode,s=o.merchantType,c=o.purchaseFlag;if(t="5"==c?"02":"01",i.length)i.forEach((function(e){var o=e.subCmmdtyHeadInfo,n=o.cmmdtyCode,i=o.cmmdtyGroup;a.push({cmmdtyCode:n,catalogCode:i,merchantType:t,shopCode:r})}));else{var d=o.cmmdtyCode,u=o.cmmdtyGroup;a.push({cmmdtyCode:d,catalogCode:u,merchantType:t,shopCode:r})}})),I.axios.post(D.default.shopping+"/app/cardcoupon/private/queryGiftCardList.do",{paramData:JSON.stringify({cartId:e,cmmdtyList:a,operationTerminal:_.OPERATION_TERMINAL})})}})),window.define("263",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T={refund:"tui",refundoverseas:"tui",norefund:"tui-no",snNorefundoverseas:"tui-no",snRefundoverseas:"tui",norefundoverseas:"tui-no",norefundfic:"tui-t",overseasfreetax:"tax"};Component({properties:{labelBaseInfos:{type:Array,value:[]}},data:{show:!1,labels:[]},ready:function(){var e=this.properties.labelBaseInfos;console.log("_labelBaseInfos---\x3eS",e);var t=e.map((function(e){return e.icon||T[e.labelCode]&&(e.css=T[e.labelCode]),e}));t=(t=t.filter((function(e){return(e.logo||e.css)&&e.labelDesc&&e.labelName}))).map((function(e){return e.logo=e.logo.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://"),e})),console.log("_labelBaseInfos---\x3eE",t),this.setData({labels:t})},methods:{onOpen:function(){this.setData({show:!0})},onClose:function(){this.setData({show:!1})}}})})),window.define("271",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Component({externalClasses:["sn-class"],properties:{isShowIcon:{type:Boolean,value:!1},iconUrl:String,bottom:Number,top:Number,showTime:{type:Number,value:"2000"}},data:{text:String,isShow:!1},methods:{showToast:function(e){var a=-1,o=0;do{-1!=(a=e.indexOf("\n",a+1))&&o++}while(-1!=a);var n=this;!e.match("\n")&&!this.data.isShowIcon&&e.length>15?console.log("无图标时单行字符不得超过15个,请在恰当位置使用'\\n'换行符"):this.data.isShowIcon&&e.length>10?console.log("有图标时字符不得超过十个"):o>2&&!this.data.isShowIcon?console.log("无图标时文字不要超过三行，请注意排列匀称"):(this.setData({text:e,isShow:!0}),t((function(){n.setData({isShow:!1})}),n.properties.showTime))}}})})),window.define("276",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(54),P=(T=I)&&T.__esModule?T:{default:T};function D(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}var x=e(17),_=e(20),k=e(25),L=k.requestPromise,N=k.getDfpToken,E=k.checkLogin;t.exports={addCart:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=[],n="";if("string"==typeof t[0])n=t[0],o=t[1];else{var i=t[0],r=i.detect,s=D(i,["detect"]);o=[s],n=r||""}return new Promise((function(e,t){Promise.all([N(),_.getCityCodeByIp()]).then((function(t){var a=t[1],i=a.provinceMDMId,r=a.cityLESId,s=a.districtLESId,c=0,d={cmmdtyInfos:o.map((function(e){var t=e.shopCode,a=e.activityId,o=e.activityType,n=e.bonusId,i=e.cmmdtyCode,r=e.cmmdtyQty,s=D(e,["shopCode","activityId","activityType","bonusId","cmmdtyCode","cmmdtyQty"]);return{cmmdtyHeadBasicInfo:{activityId:a||"",activityType:o||"01",bonusId:n||"",itemNo:c++},mainCmmdtyInfo:{mainCmmdtyBasicInfo:Object.assign({itemNo:c++,cmmdtyQty:r||"1",tickStatus:"1",shopName:"",overSeasFlag:"",shopCode:t,cmmdtyCode:i},s)}}})),cartHeadInfo:{provinceCode:i||"100",cityCode:r||"025",districtCode:s||"02501",operationTerminal:"01",operationChannel:"50",townCode:"",userFlag:"0",operationEquipment:"06",token:"wx_mini",detect:n}};E().then((function(){L({method:"POST",url:x.quan.addCart,data:{data:JSON.stringify(d)}}).then((function(t){e(t)}))})).catch((function(){e(d)}))}))}))},addCart2:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,o){Promise.all([N(),_.getCityCodeByIp()]).then((function(o){var n=o[1],i=n.provinceMDMId,r=n.cityLESId,s=n.districtLESId,c=0;t=Object.assign({provinceCode:i||"100",cityCode:r||"025",districtCode:s||"02501"},t);var d={cmmdtyInfos:e.map((function(e){return e.cmmdtyHeadBasicInfo.itemNo=c++,e.mainCmmdtyInfo.mainCmmdtyBasicInfo.itemNo=c++,e})),cartHeadInfo:Object.assign({},t,{operationTerminal:"01",operationChannel:"50",townCode:"",userFlag:"0",operationEquipment:"06",token:"wx_mini",detect:P.default.getTrack()})};E().then((function(){L({method:"POST",url:x.quan.addCart,data:{data:JSON.stringify(d)}}).then((function(e){a(e)}))})).catch((function(){a(d)}))}))}))}}})),window.define("280",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{data:{type:Array,observer:function(e){(!Array.isArray(e)||e.length<1)&&this.setData({isShow:!1})}}},data:{isShow:!0},methods:{}})})),window.define("293",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){if(e.highRisk)n.showToast({title:e.highRisk.msg,icon:"none"}),n.hideLoading();else{var t=e.sys?"/pages/unionLogin/first/first":"/pages/login/login";n.navigateTo({url:t}),n.hideLoading()}}})),window.define("387",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var a=Object.prototype,o=a.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(e,t,a,o){var n=t&&t.prototype instanceof l?t:l,i=Object.create(n.prototype),r=new T(o||[]);return i._invoke=function(e,t,a){var o="suspendedStart";return function(n,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw i;return P()}for(a.method=n,a.arg=i;;){var r=a.delegate;if(r){var s=b(r,a);if(s){if(s===u)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var c=d(e,t,a);if("normal"===c.type){if(o=a.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(o="completed",a.method="throw",a.arg=c.arg)}}}(e,a,r),i}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function l(){}function p(){}function f(){}var h={};h[i]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(I([])));m&&m!==a&&o.call(m,i)&&(h=m);var v=f.prototype=l.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var a;this._invoke=function(n,i){function r(){return new Promise((function(a,r){!function a(n,i,r,s){var c=d(e[n],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===(void 0===l?"undefined":t(l))&&o.call(l,"__await")?Promise.resolve(l.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):Promise.resolve(l).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(c.arg)}(n,i,a,r)}))}return a=a?a.then(r,r):r()}}function b(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=d(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var n=o.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}p.prototype=v.constructor=f,f.constructor=p,f[s]=p.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(w.prototype),w.prototype[r]=function(){return this},e.AsyncIterator=w,e.async=function(t,a,o,n){var i=new w(c(t,a,o,n));return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(v),v[s]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var o=t.pop();if(o in e)return a.value=o,a.done=!1,a}return a.done=!0,a}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,o){return r.type="throw",r.arg=e,t.next=a,o&&(t.method="next",t.arg=void 0),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var o=a.completion;if("throw"===o.type){var n=o.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:I(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}}}("object"===t(e)?e.exports:{})}).call(this,e(44)(t))})),window.define("449",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(450);Component({properties:{channelId:{type:String,value:"",observer:function(e){this.getPrivacyContent(e)}}},data:{paragraph:[],title:""},attached:function(){n.getSystemInfo({success:function(e){var t=!1;"2.4.4"==e.SDKVersion&&e.model.indexOf("iPhone 6")>-1&&(t=!0),this.setData({platform:e.platform,navH:"ios"==e.platform||"devtools"==e.platform?e.statusBarHeight+44:e.statusBarHeight+54,newTitle:t,menuTop:n.getMenuButtonBoundingClientRect().top,menuHeight:n.getMenuButtonBoundingClientRect().height}),this.topNavH=e.statusBarHeight}.bind(this)})},methods:{getPrivacyContent:function(e){var t=this,a=(0,T.makeDataUrl)(e);n.request({url:a,method:"GET",success:function(e){var a=e.data;console.log("data:",a,a.paragraph);var o=a.paragraph.map((function(e,t){var o=e.title,n=e.context;return n=(n=n.replace(/px/g,"rpx")).replace(/1\.33rpx/g,"1px"),{title:t<1?a.title:o,context:n}}));t.setData({paragraph:o},(function(){console.log("paragraph:",t.data.paragraph)}))},fail:function(e){reject(e)}})},navigateBack:function(){this.triggerEvent("closePop")}}})})),window.define("452",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(453);e(455).zipPoints;Component({behaviors:[T],data:{imgTop:0,imgLeft:"0PX",sliderLeft:"-10PX",beforeWidth:"0PX",bgColor:"",bgColor1:"",bgWidth:"",bgHeight:"",fragPath:"",fragWidth:"",fragHeight:"",sliderTip:"请按住滑块拖动完成拼图",sliderIcon:"",sliderBorderColor:"#dbdbdd",sliderX:0,sliderY:0,xStart:0,unSlideArr:[],slideArr:[],slideType:1,antiFrauDistance:0,initPosition:[0,0,0],fragX:0,isFresh:!1},ready:function(){var e=this,t=this.data.sliderImg;this.setData({sliderIcon:t.icon}),I(e,".tobe-obfuscate-slider",(function(t){e.setData({sliderX:parseInt(t.left||0),sliderY:parseInt(t.top||0)})}))},attached:function(){var e=this.init().gParams,t=e.oss,a=e.bp,o=e.bg1,i=e.bg2,r="https://"+t+a,s="https://"+t+e.sp,c=n.createCanvasContext("slide-canvas");this.loadImg(this,r,s,c,e),this.setData({bgColor:o,bgColor1:i})},methods:{resetImg:function(){if(!this.data.isFresh){this.resetImage({imgLeft:"0PX",sliderLeft:"-10PX",sliderTip:"加载中",isFresh:!0})}},decryptParams:function(e,t){var a=this.decrypt(e,t),o=a.gParams,i=a.bgUrl,r="https://"+o.oss+o.sp,s=n.createCanvasContext("slide-canvas");this.loadImg(this,i,r,s,o)},loadImg:function(e,t,a,o,i){o.setFillStyle("white"),o.fillRect(0,0,300,180),o.draw(),e.setData({loadingDisplay:"block",imageDisplay:"none",sliderTip:"加载中",loadingTip:"加载中",fragPath:""}),n.downloadFile({url:t,success:function(t){if(200==t.statusCode){var n=t.tempFilePath;e.canvasCreated(e,o,n,i,a)}}}),e.setData({loadingDisplay:"none",imageDisplay:"block",sliderTip:"请按住滑块拖动完成拼图",isFresh:!1})},canvasCreated:function(e,t,a,o,n){for(var i=o.cy,r=o.cx,s=o.w/r,c=o.h/i,d=o.w/r+4,u=o.h/i+2,l=o.o1,p=0,f=0;f<i;f++)for(var h=0;h<r;h++){var g,m,v=l[p],y=l[p+1];0==f?(0==h?(g=v*d,m=y*u):h==r-1?(g=v*d+4,m=y*u):(g=v*d+2,m=y*u),t.drawImage(a,s*h,c*f,s,c,g,m,s,c)):(0==h?(g=v*d,m=y*u+2):h==r-1?(g=v*d+4,m=y*u+2):(g=v*d+2,m=y*u+2),t.drawImage(a,s*h,c*f,s,c,g,m,s,c)),p+=2}t.draw(!0),e.setData({fragPath:n,imgTop:o.sy+"PX"})},showError:function(){this.setData({sliderTip:"请点击右上角刷新按钮重试",loadingTip:"请点击右上角刷新按钮重试",isFresh:!1})},successCb:function(e){var t=this.data.sliderImg;this.setData({sliderIcon:t.success,sliderTip:"",tips:"恭喜您通过验证！",sliderBorderColor:"rgba(0, 133, 236, 0.59)",status:1}),this.success(e)},retryCb:function(){var e={sliderIcon:this.data.sliderImg.fail,sliderTip:"",tips:"请拖动滑块，确保正确拼合图片！",sliderBorderColor:"#ff5151",status:2,bgColor1:""};this.retry(e)},refreshCb:function(e){var t=this.data.sliderImg;this.setData({sliderIcon:t.fail,sliderTip:"",sliderBorderColor:"#ff5151"});this.refresh(e,"请拖动滑块，确保正确拼合图片！")},touchStart:function(e){var t=this.data,a=t.imageDisplay,o=t.initPosition,n=t.initTime;if("none"!==a){var i=e.touches;e.changedTouches&&e.changedTouches.length&&(i=e.changedTouches);var r=i[0].clientX,s=i[0].clientY,c=[parseInt(r),parseInt(s),+new Date-n];o.push(c),this.setData({sliderTip:"",isBtnHolding:!0,xStart:i[0].clientX,initPosition:o})}},touchMove:function(e){var t=this.data,a=t.xStart,o=t.isBtnHolding,n=t.initTime,i=t.slideArr,r=e.touches;e.changedTouches&&e.changedTouches.length&&(r=e.changedTouches);var s=r[0].clientX,c=r[0].clientY,d=parseInt(s-a),u=parseInt(s-a);d<0&&(d=0),d>250&&(d=250),u<0&&(u=0),u>240&&(u=240);var l=[parseInt(s),parseInt(c),+new Date-n];o&&(i.push(l),this.setData({sliderLeft:d-10+"PX",beforeWidth:d+"PX",fragX:d,slideArr:i,imgLeft:u+"PX"}))},touchEnd:function(){this.submit(this.data,"jigsaw")},limitMax:function(e){return function(t,a){return e<t?0:e>a?a-t:e-t}},clearAllData:function(){var e={slideArr:[],unSlideArr:[],initPosition:[0,0,0],imgLeft:"0PX",sliderLeft:"-10PX",beforeWidth:"0PX",bgColor1:"",sliderTip:"请按住滑块拖动完成拼图",sliderBorderColor:"#dbdbdd",sliderIcon:this.data.sliderImg.icon};this.clear(e)}}});var I=function(e,t,a){n.createSelectorQuery().in(e).select(t).boundingClientRect((function(e){a(e)})).exec()}})),window.define("453",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(454),P=e(455),D=P.SnCaptcha,x=P.reqData,_=P.dPm,k=P.clickSub,L={click:k,noise:k,geometric:k,jigsaw:P.jigsawSub};a.exports=Behavior({data:{bgPath:"",loadingDisplay:"block",imageDisplay:"none",loadingTip:"加载中",tips:"",close:"",refresh:"",sliderImg:{icon:"",success:"",fail:""},imgWidth:0,imgHeight:0,initTime:+new Date,isBtnHolding:!1,status:0},methods:{init:function(){var e=D.gParams,t=D.env,a=e.oss?e.oss:"sdosspre.cnsuning.com",o=e.oss?e.oss:"ossprexg.cnsuning.com",n="https://"+a+e.bp;return"sit"==t||"pre"==t?this.setData({close:"https://ossprexg.cnsuning.com/iar/iar-web/img/close.png",refresh:"https://ossprexg.cnsuning.com/iar/iar-web/img/fresh.png",sliderImg:{icon:"https://ossprexg.cnsuning.com/iar/iar-web/img/slidericon.png",success:"https://ossprexg.cnsuning.com/iar/iar-web/img/success.png",fail:"https://ossprexg.cnsuning.com/iar/iar-web/img/fail.png"}}):this.setData({close:"https://"+o+"/iar/iar-web/img/close.png",refresh:"https://"+o+"/iar/iar-web/img/fresh.png",sliderImg:{icon:"https://"+o+"/iar/iar-web/img/slidericon.png",success:"https://"+o+"/iar/iar-web/img/success.png",fail:"https://"+o+"/iar/iar-web/img/fail.png"}}),{gParams:e,bgPath:n}},cancel:function(e){this.triggerEvent("cancelEvent",{openCaptcha:!1,success:0})},resetImage:function(e){var t={loadingDisplay:"block",imageDisplay:"none",loadingTip:"加载中",bgPath:""};Object.assign(t,e),this.setData(t);var a=D.ticket,o=D.env,n=this,i={ticket:a,client:"BAIDU"};x(I.hosts[o]+"/iar-web/refresh.json",i,(function(e){n.decryptParams(e,"reset")}),n.showError)},submit:function(e,t,a){var o=this,n=this.data,i=n.isBtnHolding,r=n.initTime,s={isBtnHolding:!1};if(a&&Object.assign(s,a),i){this.setData(s);var c="";"click"!=t&&"geometric"!=t||(c="/"),L[t](e,r,c,(function(e){switch(e.data.resp_code){case"0":var t=e.data;o.successCb(t);break;case"1":o.retryCb();break;case"2":case"11":case"12":case"FRESH_IMG":o.refreshCb(e);break;default:o.showError()}}))}},reInit:function(){var e=D.env,t=D.ticket,a=D.tInfo,o=D.v,n=this,i={ticket:t,client:"BAIDU",tInfo:a,v:o};x(I.hosts[e]+"/iar-web/init.json",i,(function(e){n.decryptParams(e,"reinit")}),n.showError)},decrypt:function(e,t){var a=e.data,o=_(t,a,this.reInit);return{gParams:o,bgUrl:"https://"+o.oss+o.bp}},loadImg:function(){this.setData({loadingDisplay:"none",imageDisplay:"block",loadingTip:""})},error:function(e){var t={loadingDisplay:"block",imageDisplay:"none",bgPath:""};Object.assign(t,e),this.setData(t)},successCb:function(e){this.setData({status:1,tips:"恭喜您通过验证！"}),this.success(e)},success:function(e){var a=this;t((function(){a.triggerEvent("cancelEvent",{openCaptcha:!1,success:1}),D.callback&&D.callback(e.token)}),1e3)},retry:function(e){var a=this;this.setData(e),t((function(){a.clearAllData()}),1500)},refresh:function(e,a){var o=this;e.data&&"12"===e.data.resp_code&&e.data.ticket&&(D.ticket=e.data.ticket),this.setData({status:2,tips:a}),t((function(){o.clearAllData(),o.resetImg()}),1500)},clear:function(e){var t={initTime:+new Date,status:0,isBtnHolding:!1,tips:""};Object.assign(t,e),this.setData(t)},getRect:function(e,t){i.createSelectorQuery().select(e).boundingClientRect((function(e){t(e)})).exec()}}})})),window.define("454",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.hosts={sit:"https://iar-websit.cnsuning.com",pre:"https://iar-websit.cnsuning.com",prd:"https://iar-web.suning.com",xgpre:"https://iar-webxg.cnsuning.com"},a.client="BAIDU",a.version="v1",a.initUrl="/iar-web/init.json"})),window.define("455",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function r(e){return(r="function"==typeof Symbol&&"symbol"==D(Symbol.iterator)?function(e){return void 0===e?"undefined":D(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":D(e)})(e)}n="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},function(t){"object"===n(o)&&void 0!==a||!e(456)?t():void 0===(P="function"==typeof(I=t)?I.call(o,e,o,a):I)||(a.exports=P)}((function(e,o,n,r,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,I,P,D,x,_,k,L,N,E,O,A,R,M,U,j,B,F,V,H,q,G,Y,z,W,J,Q,X,K,$,Z,ee,te,ae,oe,ne,ie,re,se,ce,de,ue,le,pe,fe,he,ge,me,ve,ye,we,be,Ce,Se,Te,Ie,Pe,De,xe,_e,ke,Le,Ne,Ee,Oe,Ae,Re,Me,Ue,je,Be,Fe,Ve,He,qe,Ge,Ye,ze,We,Je,Qe,Xe,Ke,$e,Ze){function et(e,t){return t=e.length,e.slice(t-1)+e.substr(0,t-1)}function tt(e){return[e]}function at(e,t,a,o,n){for(void 0===t&&(t=88),a="",o=0;o<e.length;o++)a+=(n=e.charCodeAt(o),String.fromCharCode(n^t));return a}function ot(e,t,a,o,n,i,r,s,c,d,u,l,p){for(t=[pt,et,Dt],a=e,o=0;o<t.length;o++)a=(0,t[o])(a);for(i=[0,1,2],r=[dt,ct,ut],s=a,o=0;o<i.length;o++)s=(0,r[i[o]])(s);for(d=[yt,at,ht],u=s,o=0;o<d.length;o++)u=(0,d[o])(u);return function(e,t,a,o,n,i,r){for(a="",o=0;o<e.length;o++){if(n=0==(i=e.charCodeAt(o),o%2)?0<=(r=i-10)?r:r+128:o%3==0?(r=i+20)<128?r:r-128:o%7==0?0<=(r=i-30)?r:r+128:o%11==0?(r=i+25)<128?r:r-128:i,"DYKEY_encrypt6"===(t=t||"hRXpwUlkC4bn0Mz0"))throw new Error("A5CDV");a+=(n^=t.charCodeAt(o%t.length),String.fromCharCode(n))}return a}(function(e){return e.split("").reverse().join("")}(u))}function nt(e){return e}function it(e,a){return function(e,a){var o;return o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},function(){var n;try{return e&&e.apply(s,arguments)}catch(i){return n="",n=i.stack?i.stack+"/f: "+e.toString():"/f: "+e.toString(),c?(c=!1,a(i.description+"/"+i.message+"/"+i.name+"/"+n)):clearTimeout(d),d=t((function(){c=!0}),o.throttle||1e3),(o.exCallback&&o.exCallback(),o).defaultReturn||""}}}(e,rt,a)}function rt(t,a){(a=(a=Je.env)||"prd",Tt)(e[a]+"/iar-web/log.json",{l:JSON.stringify(t),a:"bd"},(function(){}))}function st(e){this.map=e}function ct(e,t){return(t=e.length/2|0,e).slice(t)+e.substr(0,t)}function dt(e,t,a,o,n,i){if("DYKEY_encrypt11"===(t=t||"P`fuJi1Gq7:9/L_\b\nCyrB\"@ hA{?TVg',t!|>apjF;*.UkEbz\\\0WHKo[2wQ\v$lX(6%RxD)Z0#Yn\r~e^+ds<S\f}]NI-53=8\tc&Om4vM"))throw new Error("a137O");for(o=(a=Dt(e),yt)(ct(a)),n=2;n--;)o=yt(ct(o));return(i=at(o),pt)(i,t,3)}function ut(e,t,a,o,n,i,r,s,c,d,u,l,p,f){for(o=(a=(t=Dt(e,9),t).split("")).length/9,n=[],i=0;i<o;i++){for(r=a.slice(9*i,9*(i+1)),s=[],c=3;0<c--;){for(l=(u=[(d=[],[2,0,1]),[1,2,0],[0,1,2]],u)[c],p=0;p<l.length;p++)(f=l[p],d).push(r[3*c+f]);s.push(d.join(""))}n.push(s.join(""))}return n.join("")}function lt(e){return function(t){return function(a){if(a instanceof ie)return e;if(a instanceof re)return t(a.value0);throw new Error("9Uv4a"+[e.constructor.name,t.constructor.name,a.constructor.name])}}}function pt(e,t,a,o,n,i){if(0===("DYInt_decrypt7"===("number"!=typeof a&&(a=3),a)&&(a=3),a))return e;if("DYKEY_encrypt7"===(t=t||"ye)\v7*dm-/@KoX9{]'WGQ0rT+\\bsf\raxkPv\n:(6Vz,[nA$h\0_ %`ZBFH3D!}j\"2iUluS.&p>L#N5wg^\fMI\bcq;CR~O=t4Y|18?\tEJ<"))throw new Error("q6rXw");for(o="",n=0;n<e.length;n++)o+=127<(i=e.charCodeAt(n))?e.charAt(n):t.charAt(i);return pt(o,t,--a)}function ft(e,t){if((t=He(e)(Ye))instanceof ce)return"0";if(t instanceof de)return qe(t.value0);throw new Error("ML1Ci"+[t.constructor.name])}function ht(e,t,a,o){for(o=("DYInt_encrypt12"===("number"!=typeof t&&(t="4"),t)&&(t=3),Dt)(e,4);t--;)o=n(o);function n(e,t,a,o,n){for(t="",a=e.length/4,o=0;o<4;o++)for(n=0;n<a;)t+=e.charAt(4*n+o),n++;return t}return o}function gt(e){return function(t,a){if((a=Te(t)(e))instanceof ce)return 0;if(a instanceof de)return a.value0;throw new Error("ICr1x"+[a.constructor.name])}}function mt(e){this.append=e}function vt(e,t){(this.Functor0=e,this).alt=t}function yt(e){return e.slice(1)+e.substr(0,1)}function wt(e,t){return(t=parseInt(e.slice(-1),10),e).slice(0,e.length-t)}function bt(e,t,a){for(t="",a=0;a<e.length;a++)t+=o(e[a]),a!=e.length-1&&(t+="n");return t;function o(e){return function(e,t,a,o){for(t="",a=e;a>=p.length;)t+=(a=Math[(o=a%p.length,"floor")](a/p.length),p[o]);return t+=p[a]}(e)}}function Ct(e,t,a,o,n){for(void 0===t&&(t=88),a="",o=0;o<e.length;o++)a+=(n=e.charCodeAt(o),String).fromCharCode(n^t);return a}function St(e,t,a,o,n,i,r){if(0===("DYInt_decrypt7"===("number"!=typeof a&&(a=6),a)&&(a=3),a))return e;if("DYKEY_decrypt7"===(t=t||"(k=R;u4-\\$LBo|@<MY~U}Dl3Zvrfp>q.1#8%\v&yeX\bEOI]*z\n2QJ Cb\t)/TNVjS'+5xw\0mH:{6PKcF9\"ia?Gt_\r^0d[7Wg!hsA,`n\f"))throw new Error("kT92E");for(o="",n=0;n<e.length;n++)o+=127<e.charCodeAt(n)?e.charAt(n):(r=e.charAt(n),String.fromCharCode(t.indexOf(r)));return St(o,t,--a)}function Tt(e,t,a,o){i.request({url:e,data:t,header:{"content-type":"application/json"},success:function(e){a(e)},fail:function(e){o&&o(e)}})}function It(e){this.eq=e}function Pt(e){return function(t){return function(e){return function(t,a,o,n){function i(e,o){return Ie(o)<e?(a=e,void(t=S(T)(o)([0]))):(n=!0,o)}for(a=e,n=!1;!n;)o=i(a,t);return o}}(e)(function e(t){return function(a){return a<ze?[a]:S(T)([je(Le(Be(a))(Be(ze)))])(e(t)(je(Be(a)/Be(ze))))}}(e)(t))}}function Dt(e,t,a,o,n){for(void 0===t&&(t=8),o=a=t-e.length%t,n="";o--;)n+=a;return e+n}e={sit:"https://iar-websit.cnsuning.com",pre:"https://iar-websit.cnsuning.com",prd:"https://iar-web.suning.com",xgpre:"https://iar-webxg.cnsuning.com"},o="version_1",n="1_1_0",r="/iar-web/init.json",c=!0,d=0,u=function(e){function t(e,t,a,n,r,s,c){for(n=(t=[],e)[(a=0,"length")];a<n;++a)if(s=(r=e.charCodeAt(a),i)(r),r<128){for(c=8-s.length;0<=--c;)s.unshift(0);t=t.concat(s)}else 128<=r&&r<=2047?t=t.concat(o(2,s)):2048<=r&&r<=65535?t=t.concat(o(3,s)):65536<=r&&r<=2097151?t=t.concat(o(4,s)):2097152<=r&&r<=67108863?t=t.concat(o(5,s)):4e6<=r&&r<=2147483647&&(t=t.concat(o(6,s)));return t}function a(e,t,a,o,i,r,s){for(a=[],o="",i=0,r=e.length;i<r;)if(0==e[i])i+=(o+=(t=n(e.slice(i,i+8)),String).fromCharCode(t),8);else{for(s=0;i<r&&1==e[i];)++s,++i;for(a=a.concat(e.slice(i+1,i+8-s)),i+=8-s;1<s;)i+=(a=a.concat(e.slice(i+2,i+8)),8),--s;o+=(t=n(a),String).fromCharCode(t),a=[]}return o}function o(e,t,a,o,n,i,r,s,c,d,u){for(n=8-(e+1)+6*(e-1)-t.length;0<=--n;)t.unshift(0);for(i=[],r=e;0<=--r;)i.push(1);for(i.push(0),s=0,c=8-(e+1);s<c;++s)i.push(t[s]);for(d=0;d<e-1;++d)for((i.push(1),i).push(0),u=6;0<=--u;)i.push(t[s++]);return i}function n(e,t,a,o,n){for(t=0,o=(a=0,e).length-1;0<=o;--o)1==e[o]&&(t+=Math.pow(2,a)),++a;return t}return{a:function(e,a){return function(e,a,o,i,r,s,c,d,u,l,p){for(d=(r=a,s=0,c=0,i=(o=[],t)(e)).length;c<d;c+=6){for(2==(u=c+6-d)?s=2:4==u&&(s=4),l=s;0<=--l;)i.push(0);o.push(n(i.slice(c,c+6)))}for(p="",c=0,d=o.length;c<d;++c)p+=r[o[c]];for(c=0,d=s/2;c<d;++c)p+="=";return p}(e,a)},b:function(e,t){return function(e,t,o,n,r,s,c,d,u,l,p,f,h,g,m){for(d=(o=e.length,"="==(n=0,(r=t,e).charAt(o-1))&&(e="="==e.charAt(o-2)?(n=4,e.substring(0,o-2)):(n=2,e.substring(0,o-1))),s=[],e)[(c=0,"length")];c<d;++c)for(p=(u=e.charAt(c),r)[(l=0,"length")];l<p;++l)if(u==r[l]){if(0<6-(h=(f=i(l),f).length))for(g=6-h;0<g;--g)f.unshift(0);s=s.concat(f);break}return(0<n&&(s=s.slice(0,s.length-n)),a)(s)}(e,t)}};function i(e,t,a){for(t=[];0<e;)(e=Math[(a=e%2,"floor")](e/2),t).push(a);return t.reverse(),t}}(),l={h47alExaZbw0Vmd:{BASE64_MAPPING_DECRYPT:"67P9Kx~DeiIv2JpXFQGtuRTYUELcWMH1A8jd3bVrkzmoOSwBgZf4q0ls5ChyNn_a".split(""),BASE64_MAPPING_ENCRYPT:"P6_M8XtR5cakeW1IHSJ3Bm7UOErgvbdf~Cyqw9o4ulnVhD0ZYxApsKGLzjiQ2FTN".split("")},f6g3YmOleANXl3p:{BASE64_MAPPING_DECRYPT:"tKRQ7Gk6ZgYNlnI3AvHfmosOu~FJBhxU2bWd4wXDViaPLE_0eqTzy18M9Cjc5rpS".split(""),BASE64_MAPPING_ENCRYPT:"vMYULdGfyiFCtn1ha~67qklO3REb0rcwzPS_ZVoH89Q4TW5ImNxKAsBep2guXDJj".split("")},bz4A0sgm0vI7zoF:{BASE64_MAPPING_DECRYPT:"kJDMiXnVeZEzS4I~OT3KpxR7tGFHmCj05bL9W2PqrUscBwfu1Ydyvago6AQh_N8l".split(""),BASE64_MAPPING_ENCRYPT:"SZIoFa1_HApnsqzNYLEPixWTgyv82UM~9f7RGOlb6hmuerBXJ0kCQdKwc3Dj4t5V".split("")},jtWhRU14MhVCuvn:{BASE64_MAPPING_DECRYPT:"u7oTQ4bBpVMnfq61YtXLazsdRHWUFy_Ei208ZxrNK5jkS9CA~3eGIlhvgPJOwcDm".split(""),BASE64_MAPPING_ENCRYPT:"vzbifcUe7Pq6nT108yIFB9DErjMktmpYWSahORZXdwgCo5VlJGN4xLQHsK~u23A_".split("")},BMFVVlqOFeOpVTm:{BASE64_MAPPING_DECRYPT:"IzVdhsXnDiPoMK7cGLYWrt429UH35eOBJuA~kNg8xwvC6_pQ0fFmSjRbElTqZya1".split(""),BASE64_MAPPING_ENCRYPT:"HX51aRyWriNpcjm49DgCTqOZobuhSV672n~fUlLBMzkEG8AKQw_vt0JsFxIe3dPY".split("")},yQ1lk51DWNg1sst:{BASE64_MAPPING_DECRYPT:"WrTsKz12BFkICRhfiADpVNeuO0co583HY9tLXvnmMjQGbPJlwZ_qd6~4Ug7SyaEx".split(""),BASE64_MAPPING_ENCRYPT:"lo_Myw6EqarHhtpPkgvzWXVbeTSG3J5sm0UZL1B~RC9Qiuxnfj2FDONAKd784cIY".split("")},QIkvU8awpFncyUZ:{BASE64_MAPPING_DECRYPT:"box6Lc1dmP7THX20_RqjpkgzYhC4M9VIOWZf3E8uDlrayU~BJiwvsFKnGAN5eStQ".split(""),BASE64_MAPPING_ENCRYPT:"kz5XxDgefK_v1rp4In2WPbYu7hERCAMiqmacL0UQHFdBsTZyGO~6VSNlj9w83oJt".split("")},Js4asLbZUxgl9Y0:{BASE64_MAPPING_DECRYPT:"vrscXmOtLPSF~DTIpC5aB_qgRUHuoW1MnlKZkzY3wG6J2x0eh7bN9Q8d4fAyEijV".split(""),BASE64_MAPPING_ENCRYPT:"lQ6waFgt2dzEoDcY4imv5jP9qf~nMVuU7kZKWHGAsThRpOJ0B3XyNCxbSeI1r_8L".split("")},KICdCIJw5CeP6Uc:{BASE64_MAPPING_DECRYPT:"Excmqe1BwLsTlrWAvQtFpiO5jN8a43V~zKoM7Y9Pg0bCSGHkIuJhfnDRX62UdyZ_".split(""),BASE64_MAPPING_ENCRYPT:"qkzVS73vDsA1EaJxBGb6PQWRpKFO_8~ZuMwoerldHXTi0g4YUn9LfCctmI52yhNj".split("")},cEkpvWsfk82Jn1s:{BASE64_MAPPING_DECRYPT:"8olKcvwPqQ3WVm9O_utp1REX7UaTHhDn0ANfs46LeYC2gjG~IFMyBdSi5brxzkZJ".split(""),BASE64_MAPPING_ENCRYPT:"U4YaQNM7gmIAb30E2SV_BZO6rjluiC~zRLtdDH1GXWxfewcoPp5Tkns8K9hyFqvJ".split("")},kiHFp6qZehZ042M:{BASE64_MAPPING_DECRYPT:"QDU4w3o2BtxPj0yO9GmK8HpA_ikuaZ~EYzJFLRCXIhveN176bslVnrcdWgfS5MTq".split(""),BASE64_MAPPING_ENCRYPT:"4XKwB2QzUemyJlTaV7hDci9oYIxEW~C0PZrbsjp5ftq8MFGS_6HvuRNdgLAO13nk".split("")},LTkWug0WIpegcaO:{BASE64_MAPPING_DECRYPT:"RpZrPNFOqH2Vj4TiEDeofGYB0hsW8tLn9wcSIJ1Kd3yvgX_7xUk56mAzQulCba~M".split(""),BASE64_MAPPING_ENCRYPT:"4AOZVMSHbQPusW9XexzonvmCgh78krGi6wL_fI03YyTdEqJRN~15pBatKcU2jlDF".split("")},COXsVYGBpt7762Z:{BASE64_MAPPING_DECRYPT:"2Kj54rhEFkoRUfXy1qWpu6HnxwZBmGV_dvM0JT8Ql7eCLiAS3sbYaIz~9cNOtgPD".split(""),BASE64_MAPPING_ENCRYPT:"hjQ4dip8mCUvOxMZLseBt7fHVzW0bNAoYXEqGgRKJIc19uwk~Pa2Dy3F6Sr5Tnl_".split("")},wNlkYVxmvEKHuRU:{BASE64_MAPPING_DECRYPT:"F_oKmdfP8CDO5ehpnBAT42sc6JSlQ~g1UZEqL0aHvui7GywIrxjb9z3YNMkVtXWR".split(""),BASE64_MAPPING_ENCRYPT:"oz58GYUFCt_mfEyTx4dAPs3XDJk9WOSn1igI620BuKNqQV7vcMaHhprwLRelZjb~".split("")},VtMGCD5KdHUROyW:{BASE64_MAPPING_DECRYPT:"RTaBh7Vq45C3PLbXDY6ZevQfWyuxGIso2~cJO9kpK1zijEtH0gnSmdrAMU_FwNl8".split(""),BASE64_MAPPING_ENCRYPT:"2V1vOGRF6MUBrXIJsiKW_pLkHqYflTw3uZtQcge0ox9P8SCba5mEyAN4jdDnz7h~".split("")},JttbKj2BQ4RYA3q:{BASE64_MAPPING_DECRYPT:"_k3BOaudXJRF4lYx5GoWHcQPUZsTKg1Vn6mwbh2~jfE9CDv8ipSqe0zN7LrAIyMt".split(""),BASE64_MAPPING_ENCRYPT:"EXOPTwAd5ugSvJjI~q1bDfcz7t9Q8hsGM0VknxRBioZU6FNWHep2lLmrC4a3KYy_".split("")},icA1lPRMTOOj859:{BASE64_MAPPING_DECRYPT:"mxaD7fjvqRcE0_XnY4sFQwBdhr2PgAO6ip~NU19VkG5JMby3ZHluItzCS8LWoeTK".split(""),BASE64_MAPPING_ENCRYPT:"VrISfu3JFM2bHQWeTsAKlUL4Gzwd9vi~ZmtknC_pjcDN1qyXOg8h7P6aBExRo5Y0".split("")},FTTAVCtW07xU8Ej:{BASE64_MAPPING_DECRYPT:"b91YXZk~tjSfTxEDsQF_uBvMyPWVp47hndG8m0cO3IlU6ACzwR5gNaLKirqHoe2J".split(""),BASE64_MAPPING_ENCRYPT:"lUoaSfCB9sWcRibYnwzAQu7PJhrytqZFH~OIGE2_jM4x6VT1KXDpvke8mN5dgL30".split("")},UOFoxK7cj0C7ok2:{BASE64_MAPPING_DECRYPT:"O6QxsRuI~K9mBz2AcS7Mk_faW14qtPV8LXnDlb0ChHJrwZUYvT3e5gpdGjEiFoyN".split(""),BASE64_MAPPING_ENCRYPT:"iXdDmskYPqetxHScGZp7NVfBTr0ynQ95zMFR~wUb_v62LEJW3Io4Chaglj8AKO1u".split("")},j94Xg1zWdHz5xrk:{BASE64_MAPPING_DECRYPT:"jUCOS148ZlP3cHuziw2gthyKf690MJxsEYmvNpnWFI75TqRQdXeLGArokaD~bV_B".split(""),BASE64_MAPPING_ENCRYPT:"3zp1iaqktwKLTryCgOcFDo0ZYsGWmXln5fb7h6uU94NPHExS2e_JV8Mj~vIdBAQR".split("")}},f=new(p=" !\"#$%&'()*+-.0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]_`abcdefghijklmopqrstuvwxyz{|}".split(""),function(e){this.compose=e})((function(e){return function(t){return function(a){return e(t(a))}}})),m=function(e){return function(t){return function(a){return e(a)(t)}}},new st(function(e){return e.compose}(g=f)),v=new st((function(e){return function(t,a,o,n){for(a=t.length,o=new Array(a),n=0;n<a;n++)o[n]=e(t[n]);return o}})),y=st,w=v,b=new mt((function(e){return function(t){return 0===e.length?t:0===t.length?e:e.concat(t)}})),C=mt,new vt((function(){return w}),(S=function(e){return e.append})(T=b)),I=vt,P=new function(e,t){(this.Semigroupoid0=e,this).identity=t}((function(){return g}),(function(e){return e})),D=function(e){return e.identity},x=P,_=new function(e,t){(this.Functor0=e,this).apply=t}((function(){return w}),(function(e){return function(t,a,o,n,i,r,s,c){for(o=(a=e.length,t).length,n=new Array(a*o),i=0,r=0;r<a;r++)for(s=e[r],c=0;c<o;c++)n[i++]=s(t[c]);return n}})),k=_,N=function(e){return e.bind},E=new function(e,t){(this.Apply0=e,this).bind=t}((function(){return k}),(function(e){return function(t,a,o,n){for(n=(a=[],o=0,e).length;o<n;o++)Array.prototype.push.apply(a,t(e[o]));return a}})),O=function(e,t){(this.Alt0=e,this).empty=t},A=new It((function(e){return function(t){return e===t}})),R=It,M=function(e){return e.eq},U=A,j=2147483647,H=(-2147483648,V=(F=function(){function e(){}return e.value=new e,e}(),function(){return e.value=new e,e;function e(){}})(),function(){function e(){}return e.value=new e,e})(),G=V,Y=H,J=function(e,t,a,o){(((this.add=e,this).mul=t,this).one=a,this).zero=o},Q=function(e){return e.add},X=function(e,t){(this.Semiring0=e,this).sub=t},K=new function(e,t){(this.Eq0=e,this).compare=t}((function(){return U}),function(e){return function(t){return function(a){return function(o){return function(n){return o<n?e:o===n?t:a}}}}}(F.value)(Y.value)(G.value)),$=K,Z=new function(e,t,a){((this.Ord0=e,this).bottom=t,this).top=a}((function(){return $}),-2147483648,j),ee=function(e){return e.bottom},te=function(e){return e.top},ae=Z,oe=function(e,t){(this.Semigroup0=e,this).mempty=t},ne=function(e){return e.mempty},ie=function(){function e(){}return e.value=new e,e}(),re=function(){return e.create=function(t){return new e(t)},e;function e(e){this.value0=e}}(),se=new y((function(e){return function(t){return t instanceof re?new re(e(t.value0)):ie.value}})),ce=ie,de=re,ue=lt,le=function(e){return lt(e)(D(x))},pe=se,he=new(fe=new C((function(e){return function(t){return e instanceof de?e:t}})),oe)((function(){return fe}),ce.value),ge=pe,new(me=new I((function(){return ge}),S(fe)),O)((function(){return me}),ne(he)),ye=new(ve=new C((function(e){return function(t){if(t instanceof de)return t;if(t instanceof ce)return e;throw new Error("Kg0AL"+[e.constructor.name,t.constructor.name])}})),oe)((function(){return ve}),ce.value),we=pe,be=new I((function(){return we}),S(ve)),new O((function(){return be}),ne(ye)),Ce=function(e){return function(t){return function(a){return function(o){return o<0||o>=a.length?t:e(a[o])}}}}(de.create)(ce.value),(Se=m(N(E)),function(e){return Se((function(t){return ue([])(tt)(e(t))}))})(D(x)),Te=Ce,Ie=function(e){return e.length},Pe=function(e,t){(this.Ring0=e,this).recip=t},xe=1/0,_e=Math.floor,Math[(Math[(Math.E,"LN2")],"LN10")],(Math.LOG2E,Math).LOG10E,Math.PI,Math.PI,(Math.SQRT1_2,Math).SQRT2,ke=_e,Le=function(e){return function(t){return e%t}},Ne=function(){function e(){}return e.value=new e,e}(),Ee=function(){function e(){}return e.value=new e,e}(),function(e){return function(t){return function(a,o,n){return o=a<11?"[0-"+(a-1).toString()+"]":11===a?"[0-9a]":"[0-9a-"+String.fromCharCode(86+a)+"]",n=new RegExp("^[\\+\\-]?"+o+"+$","i"),function(o,i){return n.test(o)&&(0|(i=parseInt(o,a)))===i?e(i):t}}}}(de.create)(ce.value)(10),Ae=function(e){return function(t){return function(a){return(0|a)===a?e(a):t}}}(de.create)(ce.value),Re=new R((function(e){return function(t){return e instanceof Ne&&t instanceof Ne||e instanceof Ee&&t instanceof Ee}})),Ue=new(Me=new J((function(e){return function(t,a){return M(Re)(e)(t)?Ne.value:Ee.value}}),(function(e){return function(t){return e instanceof Ee&&t instanceof Ee?Ee.value:Ne.value}}),Ee.value,Ne.value),X)((function(){return Me}),Q(Me)),new Pe((function(){return Ue}),D(x)),je=function(e){return function(e){return e===xe||e===-xe?0:e>=te(ae)?te(ae):e<=ee(ae)?ee(ae):le(0)(Ae(e))}(ke(e))},Be=nt,Fe=function(e){return function(t){return 0|Math.pow(e,t)}},Ve=function(e){return function(t){return function(a){return function(o){return 0<=a&&a<o.length?e(o.charAt(a)):t}}}}(de.create)(ce.value),He=Ve,qe=function(e){return e},ze=function(e){return e.length}(Ye="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_"),We=function(e){return function(t){return t<Fe(ze)(e)?function(e){return function(t){return function e(t){return function(a){return function(o){return 0===a?ft(gt(0)(Pt(t)(o))):e(t)(a-1|0)(o)+ft(gt(a)(Pt(t)(o)))}}}(e)(e-1|0)(t)}}(e)(t):function e(t){return 1===t?ft(ze-1|0):e(t-1|0)+ft(ze-1|0)}(e)}},Je={_inited:!1,initTime:+new Date,url_salf1:"gn5uvca81qtZyTiVUDHL3pzjoOENdWF0~J9YQ4kM6efRAmXGSxh7bIPrls2Bw_CK".split(""),url_salf2:"gn5uvca81qtZyTiVUDHL3pzjoOENdWF0~J9YQ4kM6efRAmXGSxh7bIPrls2Bw_CK".split(""),codes:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_",encoder1:function(e){return ot(e)},encoder2:function(e){return function(e,t,a,o,n,i){for(t=function(e){return e.split("").reverse().join("")}(function(e,t,a){return e.slice((t=e.length)-(a=e.length/2|0))+e.substr(0,t-a)}(function(e,t){return(t=e.length,e).slice(t-1)+e.substr(0,t-1)}(e))),a=[wt,St,Ct],o=t,n=0;n<a.length;n++)o=(0,a[n])(o);return o}(e)},hashCode:function(e,t,a,o){if(o=0,0===e.length)return o;for(t=0;t<e.length;t++)o=(o<<5)-o+e.charCodeAt(t),o|=0;return o},hashCode64:function(e,t,a){for(t="",a=0;a<6;a++)e>>>=(t+=Je.codes.charAt(63&e),6);return t}},Qe=(Je.init=it((function(a,o,s,c){if(!(a.initTime-Je.initTime<1e3))if(Je.initTime=a.initTime,a.env)if(a.ticket){try{(o=i.getSystemInfoSync(),Je).sysInfo=[encodeURIComponent(a.appName||""),a.dfpToken,"BAIDU",o.platform,o.screenWidth,o.screenHeight,o.windowWidth,o.windowHeight].join("~")}catch(e){}(s=void 0,Je).v=(c="BAIDU",Qe(n+""));try{s=i.getStorageSync("capversion")||""}catch(e){}!function o(n,d,u,p,f){function h(e,n){"12"!=(n=e.data,n).resp_code?n.param?(n.dyjs||(n.dyjs=1),1==n.dyjs&&n.js&&((i.setStorage({key:"capversion",data:n.js}),Je)[(Je.url_salf1=l[n.js].BASE64_MAPPING_DECRYPT,"url_salf2")]=l[n.js].BASE64_MAPPING_ENCRYPT),t)(it((function(e,t){(e=JSON.parse(decodeURIComponent(Xe(n.param))),e).type?(t=["jigsaw","click","clickImg","geometric","noise"],e.type&&t.indexOf(e.type)<0?a.error&&a.error("captcha type error, please call developer"):(Object.assign(Je,{gParams:e,type:e.type,_inited:!0}),a.success&&a.success())):a.error&&a.error("params decrypt fail, do not find sncapycha type")})),100):a.error&&a.error("get init params fail, please reinit"):o()}d=(Object.keys(a).forEach((function(e){Je[e]=a[e]})),a)[(n=a.env,"ticket")],u=e[n]+r,p={ticket:d,js:s,client:c,v:Je.v},f=function(e){a.error&&a.error("init fail, "+e.errMsg)},Tt(u,p,h,f)}()}else t((function(e){throw new Error(("sncaptcha error: no ticket provided","sncaptcha error: no ticket provided"))}),0);else t((function(e){throw new Error(("sncaptcha error: no env provided","sncaptcha error: no env provided"))}),0)})),it)((function(e,t,a){return(t=Je.encoder1(e),u).a(t,Je.url_salf2)})),Ke=(Xe=it((function(e,t,a){return(t=Je.encoder2,a=u.b(e,Je.url_salf1),t)(a)})),it)((function(t,a,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y){(c=Je[(s=Je.sysInfo,"env")],u=(d=Je.ticket,Je).hashCode,h=(p=(l=Je.hashCode64,t).join(n),f=[s,1,a].join("~"),[o,f,p]).join("^"),v=(m=(g=Qe(h),u)(g),l)(m),Tt)(e[c]+"/iar-web/validate.json",{ticket:d,data:v+g},i,r)})),$e=it((function(t,a){var n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T;if(n=arguments[3],i=arguments[4],r=t.slideArr,c=(s=t.unSlideArr,t).sliderX,d=t.sliderY,a=t.initTime,u=t.fragX,g=(l=t.initPosition,p=t.slideType,Je)[(f=Je.sysInfo,h=Je.env,"ticket")],0===(v=(m=Je.hashCode,Je).hashCode64,s.length)&&s.push(bt([0,0,0])),0===r.length)r.push(bt([0,0,0]));else{for(;100<r.length;)r.shift();r=r.map((function(e){return bt(e)}))}(y=[f,1,a].join("~"),S=v((w=[c,d,l[0],l[1],p,We(2)(u),s.join("/"),r.join("/")].join("~"),b=[o,y,w].join("^"),C=Qe(b),m)(C)),Tt)((T={ticket:g,data:S+C},e[h]+"/iar-web/validate.json"),T,n,i)})),Ze=it((function(e,t,a,o){return"reinit"===e&&t.ticket&&(Je.ticket=t.ticket),"reset"===e&&"2"===t.resp_code?(Je.tInfo=t.tInfo,void(a&&a())):((o=JSON.parse(decodeURIComponent(Xe(t.param))),Je).gParams=o,o)})),a.exports={SnCaptcha:Je,sendException:rt,reqData:Tt,clickSub:Ke,jigsawSub:$e,dPm:Ze,zipPoints:bt}}))}()})),window.define("456",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";(function(e){t.exports=e}).call(this,{})})),window.define("458",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(453);Component({behaviors:[T],data:{option:[],submitColor:"#b3b8bd",btnColor:[["","#333"],["","#333"],["","#333"],["","#333"]],choiceMsg:[]},attached:function(){var e=this.init(),t=e.gParams,a=e.bgPath;this.setData({choiceMsg:[],bgPath:a,option:t.option?t.option.split("~"):[]})},methods:{resetImg:function(){var e,t,a,o=(a="#b3b8bd",(t="submitColor")in(e={choiceMsg:[],submitColor:"#b3b8bd",btnColor:[["","#333"],["","#333"],["","#333"],["","#333"]],isBtnHolding:!1})?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e);this.resetImage(o)},chooseValue:function(e){var t=this.data,a=t.imageDisplay,o=t.choiceMsg,n=t.btnColor;if("block"===a){var i=e.currentTarget.dataset.choiceidx;if(o.includes(e.currentTarget.dataset.choicevalue)){var r=o.indexOf(e.currentTarget.dataset.choicevalue);o.splice(r,1),n[i][0]="",n[i][1]="#333"}else o.push(e.currentTarget.dataset.choicevalue),n[i][0]="#539fff",n[i][1]="#fff";this.setData({choiceMsg:o,btnColor:n}),o.length>0&&this.setData({isBtnHolding:!0,submitColor:"#539fff"}),0===o.length&&this.setData({isBtnHolding:!1,submitColor:"#b3b8bd"})}},submitCb:function(e){var t=this.data.choiceMsg;this.submit(t,"noise")},decryptParams:function(e,t){var a=this.decrypt(e,t),o=a.gParams,n=a.bgUrl;this.setData({bgPath:n,option:o.option?o.option.split("~"):[]})},showError:function(){this.error({loadingTip:"请点击右上角刷新按钮重试",choiceMsg:[],submitColor:"#b3b8bd",btnColor:[["","#333"],["","#333"],["","#333"],["","#333"]]})},retryCb:function(){this.retry({status:2,tips:"验证失败，请重新选择！",submitColor:"#b3b8bd",btnColor:[["","#333"],["","#333"],["","#333"],["","#333"]]})},refreshCb:function(e){this.refresh(e,"验证失败，请重新选择！")},clearAllData:function(){this.clear({choiceMsg:[]})}}})})),window.define("460",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(453),I=e(461);Component({behaviors:[T,I],data:{title:""},attached:function(){var e=this.init(),t=e.gParams,a=e.bgPath;this.setData({pointMsg:[],bgPath:a,title:t.q?t.q:"",btnColor:"#b3b8bd"})},methods:{submitCb:function(e){var t=this.data.pointMsg;this.submit(t,"geometric",{btnColor:"#b3b8bd"})},decryptParams:function(e,t){var a=this.decrypt(e,t),o=a.gParams,n=a.bgUrl;this.setData({bgPath:n,title:o.q})}}})})),window.define("461",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(455).sendException;t.exports=Behavior({data:{btnColor:"#b3b8bd",pointMsg:[],imgLocation:{x:0,y:0}},ready:function(){var e=this;try{!function(e,t,a){n.createSelectorQuery().in(e).select(t).boundingClientRect((function(e){a(e)})).exec()}(e,".tobe-obfuscate-image-wrap",(function(t){e.setData({imgLocation:{x:parseInt(t.left),y:parseInt(t.top)}})}))}catch(e){T(e.message)}},methods:{resetImg:function(){this.resetImage({pointMsg:[],isBtnHolding:!1,btnColor:"#b3b8bd"})},pointLocation:function(e){try{var t=e.touches;e.changedTouches&&e.changedTouches.length&&(t=e.changedTouches);var a=this.data,o=a.pointMsg,n=a.imageDisplay,i=a.imgLocation,r=o;"block"==n&&r.length<8&&(r.push([parseInt(t[0].clientX)-i.x,parseInt(t[0].clientY)-i.y]),this.setData({pointMsg:r,isBtnHolding:!0,btnColor:"#539fff"}))}catch(e){T(e.message)}},cancelPoint:function(e){var t=this.data.pointMsg,a=e.currentTarget.dataset.id;t.splice(a,1),this.setData({pointMsg:t}),0===t.length&&this.setData({isBtnHolding:!1,btnColor:"#b3b8bd"})},submitCb:function(e){var t=this.data.pointMsg,a=e.currentTarget.dataset.type;this.submit(t,a,{btnColor:"#b3b8bd"})},showError:function(){this.error({loadingTip:"请点击左下角刷新按钮重试",pointMsg:[]})},retryCb:function(){this.setData({pointMsg:[]}),this.retry({status:2,tips:"请依次点击图片的提示的内容！"})},refreshCb:function(e){this.setData({pointMsg:[]});this.refresh(e,"请依次点击图片的提示的内容！")},clearAllData:function(){this.clear({pointMsg:[]})}}})})),window.define("463",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(453),I=e(461);Component({behaviors:[T,I],attached:function(){var e=this.init(),t=e.bgPath;e.oss1;this.setData({pointMsg:[],bgPath:t,btnColor:"#b3b8bd"})},methods:{decryptParams:function(e,t){var a=this.decrypt(e,t).bgUrl;this.setData({bgPath:a})}}})})),window.define("465",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(455);Component({data:{type:"",inited:!1},attached:function(){var e=T.SnCaptcha.gParams;e.type&&this.setData({type:e.type,inited:!0})},methods:{cancelEvent:function(e){this.triggerEvent("changeStateEvent",{openCaptcha:e.detail.openCaptcha,success:e.detail.success})}}})})),window.define("467",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({options:{multipleSlots:!0},properties:{isShow:{type:Boolean,value:!1},showYFBDialog:{type:Boolean,value:!1},showSNDialog:{type:Boolean,value:!1},slideAnimate:{type:String,value:""}},data:{isShow:!0},methods:{closeRegDialog:function(){this.triggerEvent("closeRegDialog")}}})})),window.define("469",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{propName:{type:String,value:"val",observer:function(e,t){}}},data:{},attached:function(){},detached:function(){},methods:{onTap:function(){this.setData({})},cancel:function(e){this.triggerEvent("cancel",e)},agree:function(e){this.triggerEvent("agree",e)}}})})),window.define("471",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{title:{type:[String,Number],value:""},iconPosition:{type:String,value:"right"},iconSrc:{type:[String],value:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/fourth/cover-close.png"},coverHeight:{type:String,value:"80%"},maskShow:{type:[String,Boolean,Number],value:!1}},data:{},methods:{closeMask:function(){this.setData({maskShow:!1})}}})})),window.define("473",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(474);Component({properties:{attacheRes:{type:Object,value:{},observer:function(e,t,a){}},isHwg:Boolean,isJW:Boolean,shop:Object},externalClasses:["flex","flexcenter"],data:{recomData:[],showSeeAndSee:!1},lifetimes:{attached:function(){this._initData()},detached:function(){}},methods:{_initData:function(){var e=this.properties,t=this.properties.isJW,a=this._parseRecomAttach(e),o=a.seeAndSee&&0!==Object.keys(a.seeAndSee[0].skus).length?a.seeAndSee[0].skus:[],n=!!a.seeAndSee&&this.isShowRecomtabs(a.seeAndSee);this.setData({isJWs:t,recomAttach:a,recomData:o,showSeeAndSee:n})},_parseRecomAttach:function(e){var t=e.attacheRes.data.data.seeAndSee;return console.log(t),{seeAndSee:t}},isShowRecomtabs:function(e){return!!e&&("[object Array]"===Object.prototype.toString.call(e[0].skus)&&0!==e[0].skus.length||"[object Object]"===Object.prototype.toString.call(e[0].skus)&&0!==Object.keys(e[0].skus).length)},navTo:function(e){var t=this.properties.shop.main,a=e.currentTarget.dataset.productid,o=e.currentTarget.dataset.vendorid,i=e.currentTarget.dataset.index,r=e.currentTarget.dataset.handwork,s=void 0;switch(i){case 0:s="140001090";break;case 1:s="140001100";break;case 2:s="140001110";break;case 3:s="140001120";break;case 4:s="140001130";break;case 5:s="140001140";break;case 6:s="140001150";break;case 7:s="140001160";break;case 8:s="140001170";break;case 9:s="140001180";break;case 10:s="140001190";break;case 11:s="140001200";break;case 12:s="140001210";break;case 13:s="140001220";break;case 14:s="140001230";break;case 15:s="140001240";break;case 16:s="140001250";break;case 17:s="140001260";break;case 18:s="140001270";break;case 19:s="140001280";break;default:s=""}T.autoClick(t,{pageid:140,modid:20,eleid:s,eletp:"prd",recvalue:r}),"0"===o&&(o="0000000000"),n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&title="})}}})})),window.define("474",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=P(e(78)),I=e(77);P(e(387));function P(e){return e&&e.__esModule?e:{default:e}}var D=e(16)._snBusError;t.exports={getProps:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];try{return a.reduce((function(e,t){return e[t]}),e)}catch(e){return!1}},prefixShopCode:function(e){return("0000000000"+e).substr(-10)},prefixPartNumber:function(e){return("000000000000000000"+e).substr(-18)},verifyCode:function(e){},snBusError:function(e,t){try{t=t||{};var a=e.data.position.cityLESId||"",o=t.errorType||2,i=t.typeName||"",r="";r=e.fourth.isJW?"极物自营":e.fourth.isCSSWL?"特卖自营":e.fourth.isLYTM?"特卖联营":e.fourth.isHwg&&e.fourth.isCshop?"海外购c店":e.fourth.isHwg&&!e.fourth.isCshop?"海外购自营":e.fourth.isCShop?"c店":"自营";var s="";e.fourth.activityType&&(s="");var c=t.errorCode||e.data&&e.data.result&&e.data.result.data.data&&e.data.result.data.data.yjmdErrorCode||"";if(!c)return;var d={errorDesc:t.errorDesc||{"pds-spxq-2wcs":"商品无规格参数","pds-spxq-2wzt":"商品无主图","pds-spxq-2wxq":"商品无详情","pds-spxq-2lqrkdjsb":"四级页领券入口点击接口失败","pds-spxq-2211":"211","pds-spxq-2cxyc":"促销接口调用失败（服务端异常）","pds-spxq-2pjrkyc":"评价入口点击，调用信息接口失败（服务端异常）","pds-spxq-2jgdg":"价格倒挂异常","pds-spxq-2ljyyyc":"四级页立即预约失败","pds-spxq-2yzgq_4":"刮券开关关闭"}[c]||e.data.result.data.data.logMsg,productClass:e.data.result&&e.data.result.data.data.businessId,magemode:r,saleactivity:e.fourth.priceType,activityNo:s,furl:e.fourth.initParm,brand:e.fourth.brandCode,busunit:e.fourth.brandId,shop:e.fourth.shopParam,shopName:e.fourth.cShopName,prodNo:e.fourth.passPartNumber,sku:e.fourth.passPartNumber,productGroup:e.data.result&&e.data.result.data.data.data1.datacategoryCode,issuper:"",pageSource:e.data.pageSource},u=n.getStorageSync("custNo")||"",l=(0,T.default)()&&(0,T.default)().custLevel||"",p={bid:"fourpage",error_code:c,error_detail:JSON.stringify(d),error_type:o,member_id:u,member_level:l,region:a,type_name:i};D.bizExcp(p)}catch(e){console.error("fourth:snBusError",e)}},iosVirtualGoodsFlag:function(e){var t=n.getStorageSync("wxMiniConfigToVirtualProduct"),a=(t&&t.disabledCategory?t.disabledCategory:["R9014170","R9014162","R9014148","R9014149","R9014150","R9014151","R9014152","R9014153","R9014154","R9014155","R9014156","R9014157","R9014158","R9014159","R9014160","R9014161","R9014163","R9014164","R9014165","R9014167","R9014168","R9014169","R9014171","R9014172","R9014173","R9014174","R9014175","R9014177","R9014178","R9014179","R9014181","R9014182","R9014183","R9014184","R9010501","R9014107","R9015086","R9015257","R9015258","R9015259","R9014169","R9000056","R9006030","R9011143","R9011338","R9011339","R9011515"]).join("");return"ios"===n.getSystemInfoSync().platform&&a.indexOf(e.data.data.data1.data.itemInfoVo.categoryCode)>-1},autoClick:function(e,t){if(!e||!t)throw new Error("fourth || params is missing");t.pageid=140,t.evdl={};var a=["addtocart","buynow"].join(""),o=["shop","addtocart","buynow"].join("");t.eletp&&a.indexOf(t.eletp)&&(t.evdl.prdid=e.partNumber,t.evdl.eletp=t.eletp),t.eletp&&o.indexOf(t.eletp)&&(t.evdl.shopid=e.shop||e.shopParam),"coupon"===t.eletp&&(t.activityid=""),t.recvalue&&(t.evdl.recvalue=t.recvalue||"rec"),"prd"===t.eletp&&(t.evdl.salestatus="1"),"{}"!==JSON.stringify(t.evdl)&&(t.evdl=JSON.stringify(t.evdl)),console.log("snpm:",t),(0,I.saSendLog)("click",{event:{target:{dataset:t}}})},getSnma:function(){var e=n.getStorageSync("_snma")||"";if(e=encodeURIComponent(e)){var t=e.indexOf("%7C");t>-1&&(e=e.substring(t+3,e.length));var a=e.indexOf("%7C");a>-1&&(e=e.substring(0,a))}return e||"139841943622658873"}}})),window.define("476",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(474);Component({properties:{attacheRes:{type:Object,value:{},observer:function(e,t,a){}},dressFlag:Boolean,shop:Object},externalClasses:["flex"],data:{currentTab:0,currentTabswiper:0,recomData:[],recomDataPage:[],showSellerRecommendation:!1,showSugGood:!1,showSugGoodf:!1},lifetimes:{attached:function(){this.getHeight(),this._initData()},detached:function(){}},methods:{_initData:function(){var e=this.properties,t=this._parseRecomAttach(e),a=t.sellerRecommendation&&0!==Object.keys(t.sellerRecommendation[0].skus).length?t.sellerRecommendation[0].skus:t.sugGood&&0!==Object.keys(t.sugGood[0].skus).length?t.sugGood[0].skus:t.sugGoodf&&0!==Object.keys(t.sugGoodf[0].skus).length?t.sugGoodf[0].skus:[],o=t.sellerRecommendation&&0!==Object.keys(t.sellerRecommendation[0].skus).length?0:t.sugGood&&0!==Object.keys(t.sugGood[0].skus).length?1:t.sugGoodf&&0!==Object.keys(t.sugGoodf[0].skus).length?2:"",n=!!t.sellerRecommendation&&this.isShowRecomtabs(t.sellerRecommendation),i=!!t.sugGood&&this.isShowRecomtabs(t.sugGood),r=!!t.sugGoodf&&this.isShowRecomtabs(t.sugGoodf),s=[];0!==a.length&&(s=this.properties.dressFlag?this.spliceArr(a,9):this.spliceArr(a,6)),this.setData({recomAttach:t,recomDataPage:s,currentTab:o,showSellerRecommendation:n,showSugGood:i,showSugGoodf:r})},isShowRecomtabs:function(e){return!!e&&("[object Array]"===Object.prototype.toString.call(e[0].skus)&&0!==e[0].skus.length||"[object Object]"===Object.prototype.toString.call(e[0].skus)&&0!==Object.keys(e[0].skus).length)},_parseRecomAttach:function(e){var t=e.attacheRes.data.data.sellerRecommendation,a=e.attacheRes.data.data.sugGood,o=e.attacheRes.data.data.sugGoodf;return console.log(a),a&&(a[0].skus[0]&&(a[0].skus[0].numFlag="1"),a[0].skus[1]&&(a[0].skus[1].numFlag="2"),a[0].skus[2]&&(a[0].skus[2].numFlag="3")),{sellerRecommendation:t,sugGood:a,sugGoodf:o}},switchTab:function(e){this.setData({currentTabswiper:e.detail.current})},swichNav:function(e){var t=e.target.dataset.current,a="0"==t?this.data.recomAttach.sellerRecommendation[0].skus:"1"==t?this.data.recomAttach.sugGood[0].skus:"2"==t?this.data.recomAttach.sugGoodf[0].skus:[];console.log(this.properties.dressFlag);var o=[];if(0!==a.length&&(o=this.properties.dressFlag?this.spliceArr(a,9):this.spliceArr(a,6)),this.data.currentTab==t)return!1;this.setData({currentTab:t,recomDataPage:o,currentTabswiper:0})},spliceArr:function(e,t){var a=[];return e.forEach((function(e,o){var n=Math.floor(o/t);a[n]||(a[n]=[]),a[n].push(e)})),console.log(a),a},getHeight:function(){this.setData({swiperHeight:708})},navTo:function(e){var t=this.properties.shop.main,a=e.currentTarget.dataset.vendorid,o=e.currentTarget.dataset.suggoodscode,i=e.currentTarget.dataset.index,r=e.currentTarget.dataset.handwork,s=void 0;if(0==this.data.currentTab)switch(i){case 0:s="140000850";break;case 1:s="140000860";break;case 2:s="140000870";break;case 3:s="140000880";break;case 4:s="140000890";break;case 5:s="140000900";break;default:s=""}else if(1==this.data.currentTab)switch(i){case 0:s="140000910";break;case 1:s="140000920";break;case 2:s="140000930";break;case 3:s="140000940";break;case 4:s="140000950";break;case 5:s="140000960";break;case 6:s="140000970";break;case 7:s="140000980";break;case 8:s="140000990";break;default:s=""}else if(2==this.data.currentTab)switch(i){case 0:s="140001000";break;case 1:s="140001010";break;case 2:s="140001020";break;case 3:s="140001030";break;case 4:s="140001040";break;case 5:s="140001050";break;case 6:s="140001060";break;case 7:s="140001070";break;case 8:s="140001080";break;default:s=""}T.autoClick(t,{pageid:140,modid:20,eleid:s,eletp:"prd",recvalue:r}),n.navigateTo({url:"/pages/fourth/fourth?productId="+o+"&shop="+a})}}})})),window.define("478",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(25),P=e(8),D=(T=P)&&T.__esModule?T:{default:T},x=e(77),_=e(23);var k=e(16)._snBusError,L={sit:"https://productsit.suning.com/",pre:"https://productpre.cnsuning.com/",prod:"https://product.suning.com/",xgpre:"https://productxgpre.suning.com/"}[e(9)];Component({properties:{couponinit:Object},data:{init:{isLogin:!1,yunzuaninfo:{}},showscrap:!1,normalscrap:!1,willscrap:!0,willloadbg:"",scraping:!0,twocoupons:!0,couponItems:[],scrapped:!0,successMsg:"",scraptips:!0,donescroll:!1,ifinit:!1},ready:function(){this.initShow()},methods:{initShow:function(e){var t=this.properties.couponinit;console.info(t),t.isLogin?this.initPage(e):this.setData({init:this.properties.couponinit})},totips:function(){(0,x.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000690"}}}}),n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(L+"pds-web/scrapeCouponRulesApp.html")})},loginscrap:function(){var e=this;n.showLoading();try{(0,I.checkLogin)({toLogin:!0}).then((function(t){console.info(t),e.initPage(),n.hideLoading(),e.triggerEvent("loginchange")}),(function(e){console.log(e)}))}catch(e){console.info(e)}},initPage:function(e){var t=this;console.info("已经登录走这里");try{(0,I.requestPromise)({url:D.default.yunzhuan+"/yzdh-web/voucher/scrape/ajax/external/getUserQualificationInfo.do"}).then((function(a){if(1!==a.result)throw a;t.setData({normalscrap:!1,willscrap:!0,willloadbg:"",scraping:!0,twocoupons:!0,scrapped:!0,successMsg:"",donescrap:"",scraptips:!0,"init.isLogin":!0,"init.yunzuaninfo":a,ifinit:!0},(function(){e&&0!==a.memberRemain&&t.initScrapWrap()}))}))}catch(e){t.setData({normalscrap:!1})}},quickscrap:function(){(0,x.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000700"}}}});var e=this.data.init.yunzuaninfo;console.log(e),!e.isEnoughPoint&&e.memberRemain>=1?(n.showToast({icon:"none",title:"云钻余额不足，先去赚赚云钻吧~",mask:!0}),this.snBusError(this,{errorCode:"pds-spxq-2yzgq_3"})):e.isEnoughPoint&&e.memberRemain<1?this.setData({normalscrap:!0,scraptips:!1,ifinit:!1}):!e.isEnoughPoint&&e.memberRemain<1?n.showToast({icon:"none",title:"云钻余额不足",mask:!0}):e.isEnoughPoint&&e.memberRemain>=1&&this.initScrapWrap()},initScrapWrap:function(){var e=this;if(e.ctx=null,"wx"==(0,_.getPlatformType)())var t=this.createSelectorQuery();else if("swan"==(0,_.getPlatformType)())t=n.createSelectorQuery().in(e);t.select(".scrapbox").boundingClientRect((function(t){"wx"==(0,_.getPlatformType)()?n.getStorageSync("tempFilePath")?e.setCanvas(n.getStorageSync("tempFilePath"),t):n.downloadFile({url:"https://oss.suning.com/vss/activity/wximg/fourth/initscrap.png?v=0416",success:function(a){console.log(a),console.info(a.tempFilePath),n.setStorageSync("tempFilePath",a.tempFilePath),e.setCanvas(a.tempFilePath,t)}}):"swan"==(0,_.getPlatformType)()&&n.downloadFile({url:"https://oss.suning.com/vss/activity/wximg/fourth/initscrap.png?v=0416",success:function(a){console.log(a),console.info(a.tempFilePath),n.setStorageSync("tempFilePath",a.tempFilePath),e.setCanvas(a.tempFilePath,t)}})})).exec()},setCanvas:function(e,t){var a=this;a.setData({normalscrap:!0,willscrap:!1,ifinit:!1},(function(){var o=this;if("wx"==(0,_.getPlatformType)())var i=this.createSelectorQuery();else if("swan"==(0,_.getPlatformType)())i=n.createSelectorQuery().in(a);i.select(".backscrap").boundingClientRect((function(i){a.ctx=n.createCanvasContext("scrapCoupon",o),a.ctx.drawImage(e,0,0,t.width-i.width,t.height),a.ctx.draw(),a.clearPoints=[],a.width=t.width-i.width,a.height=t.height,a.size=10,a.r=16,a.area=a.r*a.r,a.scale=.3,a.totalArea=a.width*a.height})).exec()}))},backToInit:function(){this.setData({normalscrap:!1,willscrap:!0}),this.ctx=null},scrapAgain:function(){(0,x.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000750"}}}});this.ctx=null,this.initShow(1)},downBack:function(){var e=this;e.setData({normalscrap:!1,scraptips:!0,ifinit:!1},(function(){e.initShow()}))},earsestart:function(e){this.scrap=!0,this.eraser(e,!0),this.setData({willloadbg:"willloadbg"})},earsemove:function(e){this.eraser(e)},earseend:function(e){"wx"==(0,_.getPlatformType)()&&(this.scrap=!1)},eraser:function(e,t){var a=this,o=this.clearPoints.length,n=0,i=e.touches[0].x,r=e.touches[0].y,s=i-this.size,c=r-this.size;t&&this.clearPoints.push({x1:s,y1:c,x2:s+this.r,y2:c+this.r});var d=!0,u=!1,l=void 0;try{for(var p,f=this.clearPoints[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;if(!(h.x1>i||h.y1>r||h.x2<i||h.y2<r))break;n++}}catch(e){u=!0,l=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw l}}o===n&&this.clearPoints.push({x1:s,y1:c,x2:s+this.r,y2:c+this.r}),this.clearPoints.length&&this.r*this.r*this.clearPoints.length>this.scale*this.totalArea&&((0,x.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:140000710}}}}),this.setData({willscrap:!0,scraping:!1},(function(){a.scrap&&a.getCoupons(),a.scrap=!1}))),this.ctx&&this.ctx.clearRect(s,c,this.r,this.r),this.ctx&&this.ctx.draw(!0)},getCoupons:function(){var e=this;if(!e.getting){e.getting=!0;var t=e.properties.couponinit,a={storeId:t.storeId,productId:t.productId,channelId:32,cityId:t.cityId,showDistrict:1,marketingActivityType:t.marketingActivityType,detect:t.detect,deviceId:"",terminalType:"",dfpToken:t.dfpToken};(0,I.requestPromise)({url:D.default.yunzhuan+"/yzdh-web/voucher/scrape/ajax/executeScrape.do",data:a}).then((function(t){0===t.result?(n.showToast({title:t.failedReson,icon:"none",mask:!0,duration:3e3,success:function(t){e.setData({scraping:!0,willscrap:!1},(function(){e.getting=!1,this.initScrapWrap()}))}}),e.snBusError(e,{errorCode:"pds-spxq-2yzgq_1",errorDesc:"云钻刮券：刮券接口返回失败"})):1===t.result&&("0"===t.resultType?e.setData({scrapped:!1,scraping:!0,willscrap:!0,successMsg:t.successMsg},(function(){console.log(e.data),e.getting=!1})):"1"===t.resultType&&e.setData({couponItems:t.couponList,twocoupons:!1,scraping:!0,willscrap:!0},(function(){e.couponIndex=0,e.getting=!1})))}))}},changeCoupon:function(e){this.couponIndex=e.detail.value},getcoupon:function(){var e=this,t=e.data.couponItems[e.couponIndex],a="";"0"===t.couponType?a="140000730":"1"===t.couponType&&(a="140000720"),(0,x.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:a}}}}),(0,I.checkLogin)().then((function(a){(0,I.requestPromise)({url:D.default.yunzhuan+"/yzdh-web/voucher/scrape/ajax/sendScrapeCoupon.do",data:{orderId:t.orderId,memberId:a.principal,couponType:t.couponType}}).then((function(t){0===t.result?n.showToast({title:t.failedReson,duration:3e3},(function(){e.initShow(1)})):1===t.result&&e.setData({scrapped:!1,twocoupons:!0,couponItems:[],successMsg:t.successMsg})}))}))},snBusError:function(e,t){var a=e.properties.couponinit.subError;try{t=t||{};var o=a.cityLESId||"",n=t.errorType||2,i=t.typeName||"",r="";r=a.isJW?"极物自营":a.isCSSWL?"特卖自营":a.isLYTM?"特卖联营":a.isHwg&&a.isCshop?"海外购c店":a.isHwg&&!a.isCshop?"海外购自营":a.isCShop?"c店":"自营";var s="";"wx"==(0,_.getPlatformType)()&&a.fourth.activityType&&(s="");var c=t.errorCode;if(!c)return;var d={errorDesc:t.errorDesc||{"pds-spxq-2yzgq_1":"云钻刮券：后台配置的用户每天次数用完","pds-spxq-2yzgq_2":"云钻刮券：自身系统异常","pds-spxq-2yzgq_3":"云钻刮券：云钻余额不足","pds-spxq-2yzgq_4":"云钻刮券：开关关闭","pds-spxq-2yzgq_5":"云钻刮券：活动总次数用完","pds-spxq-2yzgq_6":"云钻刮券：接口参数遗漏或错误","pds-spxq-2yzgq_7":"云钻刮券：同一用户请求发起过于频繁"}[c],productClass:a.businessId,magemode:r,saleactivity:a.priceType,activityNo:s,furl:a.initParm,brand:a.brandCode,busunit:a.brandId,shop:a.shopParam,shopName:a.cShopName,prodNo:a.passPartNumber,sku:a.passPartNumber,productGroup:a.datacategoryCode,issuper:"",pageSource:a.pageSource},u=a.memberId,l=a.memberLevel,p={bid:"fourpage",error_code:c,error_detail:JSON.stringify(d),error_type:n,member_id:u,member_level:l,region:o,type_name:i};k.bizExcp(p)}catch(e){console.error("scrapCoupon:snBusError",e)}}}})})),window.define("480",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({options:{multipleSlots:!0},properties:{answerData:{type:Object,value:{questionCnt:0,questionList:[]}},isHwg:{type:Boolean,value:!1},isJW:{type:Boolean,value:!1}},data:{},methods:{toAnswerH5:function(){this.triggerEvent("answerEvent")}}})})),window.define("482",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(25),P=e(54),D=(T=P)&&T.__esModule?T:{default:T},x=e(483),_=e(245),k=e(23);var L=e(247);L.Toast,L.debounce;Component({properties:{params:{type:Array,value:[]},timestemp:{type:String,value:"",observer:function(e,t){if(t!==e&&e&&this.data.canBuy){try{n.setStorageSync("itemInfo",this.properties.params)}catch(e){}this.quickBuyToSubmit("")}}},giftObj:{type:Array,value:[]}},data:{token:"",detects:"",cart2No:"",canBuy:!0,isBack:!1,params:[]},ready:function(){var e=this;(0,I.getDfpToken)().then((function(t){e.setData({token:t})}));var t=D.default.getTrack();this.setData({detects:t})},pageLifetimes:{show:function(){this.data.isBack&&(this.triggerEvent("getParams"),this.setData({isBack:!1}))}},methods:{quickBuyToSubmit:function(e){var t=this;try{var a=this.data.giftObj,o=n.getStorageSync("itemInfo");if(o){var i=this.data,r=i.token,s=i.detects;this.setData({canBuy:!1}),n.showLoading(),(0,x.sendQuickBuy)(a,o,{token:r,detects:s,messageCode:e}).then((function(e){var a=e.cartHeadInfo,o=e.orderItems;t.setData({vericodeShow:!1,cart2No:a.cart2No}),n.hideLoading();var i=a.payStatus,r=o[0].orderInfo,s=r.payCode,c=r.orderId;if(~["05","03","02"].indexOf(i))if("08"==s)if(c){var d="01"==t.properties.childPayType?"2":"1";t.$goWXPay(c,d,d)}else t.setData({canBuy:!0}),n.showModal({title:"提交订单失败,获取不到订单id",icon:"none",duration:3e3});else t.setData({canBuy:!0}),n.showModal({title:"该订单商品暂不支持小程序购买",icon:"none",duration:3e3});else"01"==i&&t.$goCart4(c)})).catch((function(e){return console.log(e),t.setData({canBuy:!0}),t.setData({cart2No:e.data&&e.data.cartHeadInfo&&e.data.cartHeadInfo.cart2No}),"CCF-00-0004"==e.code||"CCF-00-0005"==e.code?(t.setData({vericodeShow:!0}),void n.hideLoading()):void n.showToast({title:e.msg||"网络异常，请重试！",icon:"none",duration:3e3})}))}}catch(e){}},$goWXPay:function(e,t,a){var o=this;e&&(0,I.wxPay)(e,t,a).then((function(t){console.log(t),o.$goCart4(e)})).catch((function(e){o.setData({canBuy:!0}),n.showModal({title:"提示",content:"订单超过一定时间未支付将被取消，请尽快完成支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",success:function(e){e.confirm&&o.$goOrderList()}})}))},$goCart4:function(e){n.redirectTo({url:"/packageA/pages/order/cart4Gift/cart4Gift?id="+e})},$goOrderList:function(){n.redirectTo({url:"/packageA/pages/order/orderList?index=0"})},onClick:function(){this.triggerEvent("getParams")},onSuccess:function(e){var t=e.detail;t&&this.quickBuyToSubmit(t)},onBind:function(){var e="/pages/webView/index?webViewSrc="+("wx"===(0,k.getPlatformType)()?_.Host.aq+"/asc/wap/mobile/check_1.do":encodeURIComponent(_.Host.aq+"/asc/wap/mobile/check_1.do"));n.navigateTo({url:e}),this.setData({vericodeShow:!1,isBack:!0})},onClose:function(){this.setData({vericodeShow:!1})}}})})),window.define("483",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.sendQuickBuy=function(e,t,a){var o=a.token,n=a.detects,i={callback:"",publishDate:"20190320",headInfoInVO:{terminalVersion:"WAP|03",terminalModel:"",authCode:a.messageCode,token:"wx_mini",splitFlag:"01",dfpToken:o||"",smsFlag:"",detect:n,imageCode:"",dareType:"",directFlag:"1",operationChannel:x.OPERATION_CHANNEL,operationTerminal:x.OPERATION_TERMINAL,operationEquipment:x.OPERATION_EQUIPMENT,operationUser:"",districtCode:x.DISTRICT_CODE,cityCode:x.CITY_CODE,provinceCode:x.PROVINCE_CODE,businessFlag:"7",wapTerminal:"01"},immediateBuyItems:t};if(e){var r=void 0,s=!0,c=!1,d=void 0;try{for(var u,l=e[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var p=u.value;p.picked&&(r=p.index+1)}}catch(e){c=!0,d=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw d}}i.headInfoInVO.playNo=String(r)}return I.axios.post(D.default.shopping+"/wap/wechat/private/sendQuickBuy.do",{data:JSON.stringify(i)}).then((function(e){if(e.errorInfos&&e.errorInfos.length){var t=e.errorInfos[0],a=t.errorCode,o=t.errorMessage;return Promise.reject({code:a,msg:o})}return e}))};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("485",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77),I=e(474),P=e(9),D={productUrl:{sit:"https://productsit.suning.com/",pre:"https://productpre.cnsuning.com/",prod:"https://product.suning.com/",xgpre:"https://productxgpre.suning.com/"}[P],channelId:{JW:{pre:"58752",prod:"471422"}[P],LYTM:{pre:"3139",prod:"14266"}[P],HwgZy:{pre:"300112",prod:"80366"}[P]}};Component({properties:{attacheRes:{type:Object,value:{},observer:function(e,t,a){}},isgray:{type:Boolean,value:!1},shop:Object,brandCode:{type:[String,Number]}},data:{evalDetail:[{title:"商品",number:"",level:""},{title:"服务",number:"",level:""},{title:"物流",number:"",level:""}]},lifetimes:{attached:function(){this._initData()},detached:function(){}},pageLifetimes:{show:function(){},hide:function(){},resize:function(e){}},methods:{_initData:function(){var e=this.properties,t=e.shop,a=e.attacheRes;this.setData({"shop.shopLogo":t.shopLogo&&t.shopLogo.indexOf("http")>-1?t.shopLogo:"https:"+t.shopLogo});var o=this._parseShopAttach(a);this.computeEvalList(o),this.setData({shop:t,shopAttach:o},(function(){(0,T.saSendLog)("autoexpo",this)}))},_parseShopAttach:function(e){var t=e.data.data.shopCollect,a=e.data.data.cShopScore&&e.data.data.cShopScore.dataList?e.data.data.cShopScore.dataList[0]:"",o="",n=3;if(a)switch(o=(a="string"==typeof a?JSON.parse(a):a).bigcatelist,parseInt(a.serVendorGrade)||0){case 1:n="90%";break;case 2:n="80%";break;case 3:n="70%";break;case 4:n="60%";break;default:n="0%"}t>1e4&&(t=(t=Math.floor(t/1e3))/10+"万+");var i=(e.data.data.shopReviewScoreList||[])[0]||{};return i.attitudeStar=i.attitudeStar?i.attitudeStar.toFixed(2):0,i.deliverySpeedStar=i.deliverySpeedStar?i.deliverySpeedStar.toFixed(2):0,i.qualityStar=i.qualityStar?i.qualityStar.toFixed(2):0,i.shopStar=i.shopStar?i.shopStar.toFixed(2):0,{shopCollect:t,shopEval:i,cShopScoreList:o,serVendorGrade:n}},burialPoint:function(e){switch(e.currentTarget.dataset.point){case"main":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000380"}}}});break;case"note":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000390"}}}});break;case"all":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000400"}}}});break;case"score":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000410"}}}});break;case"service":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000470"}}}});break;case"inshop":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000480"}}}});break;case"btmservice":(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140000490"}}}})}},toContactService:function(e){(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140003130"}}}});var t=this.data,a=e.currentTarget.dataset.tag,o=t.shop.main,i="",r=getCurrentPages()[getCurrentPages().length-1],s="/"+r.route+"?"+r.fourth.initParm,c="",d="";o.isLYTM?(i="sntm",c=D.channelId.LYTM,d="2001"):o.isHwgZy?(i="hwg",c=D.channelId.HwgZy,d="2002"):o.isCShop&&(i="dp",o.panSelf&&"0"===o.factorySendFlag&&(i=""));var u={productPosition:"SNYG",businessCode:i,terminalType:4,pageSource:"01",enterCode:void 0!==a?"02":"01",prodUrl:t.shop.bigPage.imgUrls.length>0?t.shop.bigPage.imgUrls[0].bigUrl:"",prodName:t.shop.price.name,prodPrice:t.shop.price.promotionPrice,prdWebUrl:""+D.productUrl+o.shopParam+"/"+o.partNumber+".html"},l={};o.isCShop||o.isCShop&&o.isHwg||o.panSelf&&!o.isHwg&&!o.isLYTM?o.isCShop||o.isCShop&&o.isHwg?(console.log("C店商品（包括海外购C店）"),o.panSelf&&"0"===o.factorySendFlag?(console.log("联营非厂送"),l=Object.assign({},u,{biz:"4000010101",channelId:"",prodNo:I.prefixPartNumber(o.partNumber),brandId:o.brandId,groupId:t.shop.result.threeCategoryId,groupMember:o.priceVendor,classCode:t.shop.result.categoryCode,prdurl:s})):l=Object.assign({},u,{biz:"400010201",sc:o.shopParam,prodNo:I.prefixPartNumber(o.partNumber),prdurl:s})):(console.log("普通自营商品"),console.info(t),l=Object.assign({},u,{biz:"4000010101",channelId:"",selfShopCode:t.brandCode,prodNo:I.prefixPartNumber(o.partNumber),brandId:o.brandId,groupId:t.shop.result.threeCategoryId,groupMember:o.priceVendor,classCode:t.shop.result.categoryCode,prdurl:s})):l=Object.assign({},u,{channelId:c,biz:d});var p=Object.keys(l).map((function(e){return e+"="+l[e]})).join("&");console.log(l),n.navigateTo({url:"/packageB/pages/yunxin/chat/chat?"+p}),console.log(t)},goShop:function(){var e=this.properties.shop.main;(0,T.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140001980"}}}}),I.autoClick(e,{pageid:140,modid:22,eleid:"140000140",eletp:"shop"});var t="/packageE/pages/shop/index/index?shopId="+this.data.shop.targetShop,a=0;try{a=getCurrentPages().length}catch(e){}a>7?n.redirectTo({url:t}):n.navigateTo({url:t})},computeEvalList:function(e){try{if(!e||!e.shopEval)return;var t=this.data.evalDetail,a=!0,o=!1,n=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value;switch(s.title){case"商品":s.number=e.shopEval.qualityStar,e.shopEval.qualityStar>=0&&(s.level=1);break;case"物流":s.number=e.shopEval.deliverySpeedStar,e.shopEval.deliverySpeedStar>=0&&(s.level=1);break;case"服务":s.number=e.shopEval.attitudeStar,e.shopEval.attitudeStar>=0&&(s.level=1)}}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}this.setData({evalDetail:t})}catch(e){console.log(e,"店铺评价信息解析错误")}}}})})),window.define("487",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77),I=e(8);Component({properties:{tabgoodslist:{type:Object,value:"",observer:function(e,t){if(e){var a=2*~~(e.tag.length/2);this.setData({getnum:a,flag:!0})}}},propA:{type:String,value:""},counts:{value:1,type:Number,observer:function(e,t){(0,T.saSendLog)("autoexpo",this)}}},data:{imgurl:I.cuxiao.images+":",getData:[],getnum:"",flag:!1},ready:function(){for(var e=this.properties.tabgoodslist.tag,t=e.length,a=0;a<t;a++)e[a].elementDesc.length>5&&(e[a].elementDesc=e[a].elementDesc.substring(0,3));t%2!=0&&e.pop(),this.setData({getData:e}),(0,T.saSendLog)("autoexpo",this)},methods:{tapjump:function(e){var t=e.currentTarget.dataset.jumpurl;(0,T.saSendLog)("manuclick",{pageid:this.properties.propA,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),n.navigateTo({url:t})}}})})),window.define("489",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77),I=e(8);Component({properties:{tabtitle:{type:Object,observer:function(e,t){this.setData({chooseIndex:0,flag:!0}),e&&this.countNun()}},propA:{type:String},counts:{value:1,type:Number,observer:function(e,t){(0,T.saSendLog)("autoexpo",this)}},scrollLeft:{type:String}},data:{imgurl:I.cuxiao.images+":",getData:[],autoplay:!1,chooseIndex:0,tabtextlen:"",tabimglen:"",toTab:"",flag:!1},ready:function(){this.properties.tabtitle.tabtitleimg.tag&&this.setData({tabimglen:750/this.properties.tabtitle.tabtitleimg.tag.length+"rpx"}),this.properties.tabtitle.tabtitleword.tag&&this.setData({tabtextlen:750/this.properties.tabtitle.tabtitleword.tag.length+"rpx"}),(0,T.saSendLog)("autoexpo",this)},methods:{tapbtn:function(e){(0,T.saSendLog)("manuclick",{pageid:this.properties.propA,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid}),this.triggerEvent("numberchange",{data:e.currentTarget.dataset.choosenum}),this.setData({chooseIndex:e.currentTarget.dataset.choosenum}),this.scrollTab(e.currentTarget.id)},countNun:function(){this.properties.tabtitle.tabtitleimg.tag&&this.setData({tabimglen:750/this.properties.tabtitle.tabtitleimg.tag.length+"rpx"}),this.properties.tabtitle.tabtitleword.tag&&this.setData({tabtextlen:750/this.properties.tabtitle.tabtitleword.tag.length+"rpx"})},scroll:function(e){this.triggerEvent("moveLeft",{moveLeft:e.detail.scrollLeft})},baseJump:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.currentTarget.dataset.jumpurl;baseJump(t)})),scrollTab:function(e){this.setData({toTab:e})}}})})),window.define("491",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I=e(77),P=e(8);Component({properties:{floorshops:{type:Object,observer:function(e,t){e&&this.setData({rkTtag:e.rkt.tag,showif:!0})}},propA:{type:String},counts:{value:1,type:Number,observer:function(e,t){(0,I.saSendLog)("autoexpo",this)}}},data:{imgurl:P.cuxiao.images+":",getData:4,twoimg:2,fourlists:[],getDatabdt:[],headimg:!0,rkTtag:[],showif:!1},ready:function(){if(this.properties.floorshops.rkt.tag)var e=this.properties.floorshops.rkt.tag[0].picUrl;else e=!1;var t=function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=this.properties.floorshops.bdt.tag,o=this.properties.floorshops.hct.tag,n=0,i=0;if(t(a)){i=o.length,n=a.length;for(var r=0;r<n;r++)a[r].productSpecialFlag=a[r].productSpecialFlag.replace(/ /g,""),a[r].elementName.length>7&&(a[r].elementName=a[r].elementName.substring(0,7)),a[r].elementDesc.length>8&&(a[r].elementDesc=a[r].elementDesc.substring(0,8))}if(t(o))for(var s=0;s<i;s++)o[s].elementName.length>6&&(o[s].elementName=o[s].elementName.substring(0,6)),o[s].elementDesc.length>8&&(o[s].elementDesc=o[s].elementDesc.substring(0,8));this.setData({getData:i,twoimg:n,getDatabdt:a,fourlists:o,headimg:e}),(0,I.saSendLog)("autoexpo",this)},methods:{jumpbtn:function(e){var t=e.currentTarget.dataset.jumpurl;(0,I.saSendLog)("manuclick",{pageid:this.properties.propA.value,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,tar:t}),(0,T.baseJump)(t)}}})})),window.define("493",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I=e(77);Component({properties:{goods:{type:Object,observer:function(e,t){if(e.yhesp.tag.length>0){var a=~~(e.yhesp.tag.length/(e.yhesp.showThreeCols?3:2))*(e.yhesp.showThreeCols?3:2);this.setData({rowsCount:a,flag:!0})}}},propA:{type:String},counts:{value:1,type:Number,observer:function(e,t){(0,I.saSendLog)("autoexpo",this)}}},data:{tabLists:[],rowsCount:99,flag:!1},ready:function(){(0,I.saSendLog)("autoexpo",this)},methods:{baseJump:function(e){var t=e.currentTarget.dataset.jumpurl;(0,I.saSendLog)("manuclick",{pageid:this.properties.propA.value,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),(0,T.baseJump)(t)}}})})),window.define("495",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I=e(77),P=e(8);Component({properties:{headimgs:{type:Object,observer:function(e,t){e&&this.setData({flag:!0})}},propA:{type:String},counts:{value:1,type:Number,observer:function(e,t){(0,I.saSendLog)("autoexpo",this)}}},data:{indicatorDots:!1,vertical:!0,autoplay:!0,interval:3e3,duration:500,circular:!0,imgurl:P.cuxiao.images+":",flag:!1},ready:function(){(0,I.saSendLog)("autoexpo",this)},methods:{gobaseJump:function(e){if("1"===e.currentTarget.dataset.id)var t=e.currentTarget.dataset.jumpUrl;else if("2"===e.currentTarget.dataset.id)t=e.currentTarget.dataset.jumpurl;(0,I.saSendLog)("manuclick",{pageid:this.properties.propA.value,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,tar:t}),(0,T.baseJump)(t)}}})})),window.define("497",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I=e(77);Component({properties:{moreheadsimgs:{type:Object,observer:function(e,t){e.tyimgtp.tag.length>0&&this.setData({flag:!0})}},propA:{type:String},counts:{value:1,observer:function(e,t){(0,I.saSendLog)("autoexpo",this)}}},data:{seTtag:[],flag:!1},ready:function(){(0,I.saSendLog)("autoexpo",this)},attached:function(){},methods:{baseJump:function(e){var t=e.currentTarget.dataset.jumpurl;(0,I.saSendLog)("manuclick",{pageid:this.properties.propA.value,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,tar:t}),(0,T.baseJump)(t)}}})})),window.define("499",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{},data:{currentTab:2,tabBar:[{title:"首页",index:0,normalClass:"normal-index",activeClass:"active-index"},{title:"分类",index:1,normalClass:"normal-category",activeClass:"active-category"},{title:"购物车",index:2,normalClass:"normal-cart",activeClass:"active-cart"},{title:"我的",index:3,normalClass:"normal-my",activeClass:"active-my"}]},methods:{clickTab:function(e){switch(this.setData({currentTab:e.currentTarget.dataset.current}),+e.currentTarget.dataset.current){case 0:n.switchTab({url:"/pages/index/index"});break;case 1:n.switchTab({url:"/pages/list/list"});break;case 2:n.switchTab({url:"/pages/cart/cart1/cart1"});break;case 3:n.switchTab({url:"/pages/my/v2/myv2"})}}}})})),window.define("501",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I={};Component({properties:{icon:Boolean,title:String,fixed:Boolean,mdSymbol:String},data:{show:"1"!=I.__cart1_CartHeader_tip},ready:function(){this.setData({show:"1"!=I.__cart1_CartHeader_tip})},methods:{onClose:function(){this.setData({show:!1}),I.__cart1_CartHeader_tip="1";var e=this.properties.mdSymbol;1==e?(0,T.saSendLog)("manuclick",{modid:"2",eleid:"771002055"}):0==e&&(0,T.saSendLog)("manuclick",{modid:"27",eleid:"771027002"})},onClickHandler:function(){this.triggerEvent("onClick")}}})})),window.define("503",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(504),P=e(276),D=e(54),x=(T=D)&&T.__esModule?T:{default:T},_=e(25);Component({properties:{cmmdtyInfos:{type:Array,value:[]},host:{type:Object,value:{}}},data:{skus:[]},ready:function(){console.log("-===========================》开始执行推荐"),this.initialize()},methods:{autoclick:function(e){(0,_.saSendLog)("click",{event:e})},initialize:function(){var e=this;console.log(this.properties);var t=this.properties.cmmdtyInfos.map((function(e){return e.mainCmmdtyInfo.mainCmmdtyDetailInfo.cmmdtyCode}));console.log("推荐参数",t),(0,I.recommendParamsBiz)(t).then((function(t){console.log("推荐结果",t),t.sugGoods&&t.sugGoods.length&&t.sugGoods[0].skus&&t.sugGoods[0].skus.length&&(e.setData({skus:t.sugGoods[0].skus}),(0,_.saSendLog)("autoexpo",e))})).catch((function(e){return console.log("推荐错误结果",e)}))},onAddCart:function(e){var t=this,a=e.currentTarget.dataset,o=a.shopCode,i=a.sugGoodsCode;(0,P.addCart)({shopCode:o,cmmdtyCode:i,detect:x.default.getTrack()}).then((function(e){var a=e.code,o=e.msg,i=e.data;if("1"!=a)n.showToast({title:o||"网络异常，请稍后再试",icon:"none",duration:2e3});else{var r=i.cartHeadInfo.isSuccess,s=i.errorInfos;if("Y"==r)t.triggerEvent("onChange",{type:"reload",onClose:function(){n.showToast({title:"添加成功",icon:"none",duration:2e3})}});else{var c="网络异常，请稍后再试";s.length&&(c=s[0].errorMessage),n.showToast({title:c,icon:"none",duration:2e3})}}}))},goFourth:function(e){var t=e.currentTarget.dataset,a=t.shopCode,o=t.sugGoodsCode,i=t.sugGoodsName;n.navigateTo({url:"/pages/fourth/fourth?productId="+o+"&shop="+a+"&title="+i})}}})})),window.define("504",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.recommendParamsBiz=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";try{u=n.getStorageSync("fourthLocation")}catch(e){}u&&u.cityLESId&&(t=u.cityLESId);var a={getSnma:function(){var e=n.getStorageSync("_snma")||"";if(e=encodeURIComponent(e)){var t=e.indexOf("%7C");t>-1&&(e=e.substring(t+3,e.length));var a=e.indexOf("%7C");a>-1&&(e=e.substring(0,a))}return e||"139841943622658873"}},o={sceneIds:"18-1",c:a.getSnma(),u:(0,T.default)().custno||"",cityId:t,count:16,flag:"",parameters:e.join(",")};return I.axios.Jsonp(P.default.tuijian+"/recommend-portal/recommend/paramsBiz.jsonp?"+Object.keys(o).map((function(e){return e+"="+o[e]})).join("&"))};var T=D(e(78)),I=e(247),P=D(e(245));function D(e){return e&&e.__esModule?e:{default:e}}})),window.define("506",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{},data:{},methods:{}})})),window.define("508",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(276),P=e(25),D=e(54),x=(T=D)&&T.__esModule?T:{default:T},_=e(509);Component({properties:{discountDetailInfo:Object,cartHeadInfo:Object,promotionCmmdtyInfos:{type:Array,value:[]},host:{type:Object,value:{}}},data:{show:!1,orderGiftListInfos:null,Selected:[],_Selected:[]},ready:function(){(0,P.saSendLog)("autoexpo",this)},methods:{onChangeByGifts:function(e){var t=this.properties.Selected,a=void 0===t?[]:t,o=e.currentTarget.dataset.cmmdtyCode;~a.indexOf(o)?a.splice(a.indexOf(o),1):a.push(o),this.setData({Selected:a})},getGifts:function(){var e=this,t=this.properties,a=t.discountDetailInfo,o=void 0===a?{}:a,i=t.promotionCmmdtyInfos,r=void 0===i?[]:i,s=o.promotionId,c=[],d=[],u=[];r.length&&(r.filter((function(e){return"1"==e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus})).forEach((function(t){var a=t.mainCmmdtyInfo.mainCmmdtyDetailInfo,o=t.cmmdtyHeadInfo.activityType,n=a.itemNo,i=a.cmmdtyCode,r=a.shopCode,s=a.cmmdtyQty,l=a.salesPrice;a.tickStatus;24!=o?(c.push({itemId:n,partNumber:i,sellerNo:r,productQty:s,productListPrice:l}),e.setData({Selected:d,_Selected:u})):(d.push(i),u.push(i),e.setData({Selected:d,_Selected:u}))})),(0,_.FullOrder)(s,c).then((function(t){var a=t.isSuccess,o=t.orderGiftListInfos;if("1"==a){var n=void 0;o.sort((function(e,t){return+e.bonusLimit-+t.bonusLimit})).filter((function(e){var t=e.giftsModelNumber;return"1"==e.isfloorId&&(n=t,!0)})),e.setData({orderGiftListInfos:o,_giftNum:n,show:!0})}})).catch((function(e){var t=e.msg;n.showToast({title:t,icon:"none",duration:2e3})})))},onSubmit:function(){var e=this.properties,t=e.Selected,a=e._Selected;0==a.length?this.addCartSybol():t.sort().join("")==a.sort().join("")?this.onCloseSubmit():(this.deleteCartSybol(),t.length>0&&this.addCartSybol()),this.setData({show:!1})},addCartSybol:function(){var e=this,t=this.properties.cartHeadInfo,a=t.provinceCode,o=t.cityCode,i=t.districtCode,r=this.properties,s=r.Selected,c=r.orderGiftListInfos,d=r.discountDetailInfo,u=void 0===d?{}:d,l=(r.promotionCmmdtyInfos,u.promotionId),p=[];x.default.getTrack();s.map((function(e){c.filter((function(e){return"1"==e.isfloorId})).forEach((function(t){var a=t.giftInfoList,o=t.bonusId;a.forEach((function(t){var a=t.partNumber,n=t.sellerNo,i=t.giftProductType,r=t.remainingQty,s=t.giftNumberOnetime;if(e==a){var c=Math.min(+r,+s);p.push({cmmdtyHeadBasicInfo:{activityId:l,activityType:"01",bonusId:o},mainCmmdtyInfo:{mainCmmdtyBasicInfo:{cmmdtyQty:c,tickStatus:"1",shopCode:n,cmmdtyCode:a,giftProductType:i}}})}}))}))})),(0,I.addCart2)(p,{provinceCode:a,cityCode:o,districtCode:i}).then((function(t){var a=t.code,o=t.msg,i=t.data;if("1"!=a)n.showToast({title:o||"网络异常，请稍后再试",icon:"none",duration:2e3});else{var r=i.result,s=void 0===r?{}:r,c=i.errorInfos,d=void 0===c?[]:c;if("N"==s.isSuccess){var u=d[0].errorMessage;n.showToast({title:u,icon:"none",duration:2e3})}else{var l=i.cartHeadInfo.isSuccess,p=i.errorInfos,f=void 0===p?[]:p;if("Y"==l)e.triggerEvent("onChange",{type:"reload",onClose:function(){n.showToast({title:"添加成功",icon:"none",duration:2e3})}});else{var h="网络异常，请稍后再试";f.length&&(h=f[0].errorMessage),n.showToast({title:h,icon:"none",duration:2e3})}}}}))},deleteCartSybol:function(){var e=this.properties.promotionCmmdtyInfos,t=void 0===e?[]:e;if(t.length){var a=t.filter((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus,a=e.cmmdtyHeadInfo.activityType;return"1"==t&&"24"==a})).map((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo;e.cmmdtyHeadInfo.activityType;return{itemNo:t.itemNo,deleteFlag:"Y"}}));this.triggerEvent("onChange",{type:"delete",playload:a})}},onCloseSubmit:function(){this.setData({show:!1})},onCancelZP:function(){this.setData({show:!1})},goFourthPage:function(e){var t=e.currentTarget.dataset,a=t.cmmdtyCode,o=t.shopCode,i=t.cmmdtyName;n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&title="+i})},toHref:function(e){var t=e.currentTarget.dataset,a=t.id,o=t.desc;a&&n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+a+"&type=1&label="+o})},autoclick:function(e){(0,P.saSendLog)("click",{event:e})}}})})),window.define("509",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryFreeCouponAct=function(e){var t=e.cartHeadInfo,a=e.cmmdtyInfos,o=t.cityCode,n=[];return a.forEach((function(e){var t=e.cmmdtyHeadInfo,a=e.mainCmmdtyInfo,o=(e.subCmmdtyInfos,e.config),i=a.mainCmmdtyDetailInfo,r=a.serviceProperties,s=[];r.length&&r.forEach((function(e){var t=e.serviceFlag,a=e.serviceType;s.push({serviceFlag:t,serviceType:a})}));var c={serviceFlagList:s,supplierCmmdtyCode:o.isFS?i.supplierCode:"",storeId:o.isFS?"0000000000":i.shopCode,productId:i.cmmdtyCode,marketingActivityType:_(t),businessSign:k(o)};n.push(c)})),I.axios.post(D.default.shopping+"/app/cart1/private/queryFreeCouponAct.do",{channelId:"36",cityId:o,productList:JSON.stringify(n)}).then((function(e){var t=e.couponList;return t&&t.length?t:[]})).catch((function(){return[]}))},a.FullOrder=function(e,t){var a={},o="",i="";try{a=n.getStorageSync("fourthLocation")}catch(e){}a&&a.cityLESId&&a.districtLESId&&(o=2==a.districtLESId.length?a.cityLESId+a.districtLESId:a.districtLESId,a.provinceMDMId,i=a.cityLESId);return I.axios.request({url:D.default.quan+"/queryOrderFreeGift.do",method:"post",data:{activityId:e,cityCode:i||x.CITY_CODE,channel:5,deliverRegionCode:o||x.DISTRICT_CODE,operaType:t.length?2:x.OP_TYPE,cmmdtyListStr:JSON.stringify(t)}}).then((function(e){var t=e.isSuccess,a=e.errorCode,o=void 0===a?"":a,n=e.errorDesc,i=void 0===n?"":n;return"1"==t?e:Promise.reject({code:o,msg:i})}))};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246);function _(e){var t=e.activityType,a=e.subActivityType,o="0";if("07"==t&&(o="7-2"),"02"==t)switch(a){case"1":o="4-1";break;case"2":o="4-2";break;case"3":o="4-3";break;case"4":o="4-4";break;case"5":o="4-5";break;case"6":o="4-6";break;case"7":o="4-7";break;case"8":o="4-8";break;case"9":o="4-9";break;case"10":o="4-10";break;case"12":o="4-12";break;case"13":o="21"}return"26"==t&&(o="s4"),"27"==t&&(o="s5"),"12"==t&&("20"==a&&(o="s7"),"21"==a&&(o="s6")),o}function k(e){return e.isHWG?"1":e.isFS?"5":"0"}})),window.define("511",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25);Component({properties:{discountDetailInfo:Object,cartHeadInfo:Object,promotionCmmdtyInfos:{type:Array,value:[]},host:{type:Object,value:{}}},ready:function(){(0,T.saSendLog)("autoexpo",this)},methods:{onChangeCmmdtyInfo:function(e){var t=e.detail,a=t.type,o=t.playload;"delete"==a?this.triggerEvent("onChange",{type:"delete",playload:o}):"reload"==a&&this.triggerEvent("onChange",{type:"reload",onClose:function(){n.showToast({title:"添加成功",icon:"none",duration:2e3})}})},toHref:function(e){var t=e.currentTarget.dataset,a=t.id,o=t.desc;a&&n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+a+"&type=1&label="+o})},autoclick:function(e){(0,T.saSendLog)("click",{event:e})}}})})),window.define("513",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({externalClasses:["scroll-class","title-class"],options:{multipleSlots:!0},properties:{unavailableCommdty:{type:Array,value:[]}},data:{show:!0},methods:{setState:function(e){var t=e.currentTarget.dataset,a=t.key,o=t.value;this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},""+a,o))}}})})),window.define("515",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25).saSendLog;Component({externalClasses:["out-class"],properties:{usebleCoupon:{type:Object,value:{},observer:function(){this.init()}},cartHeadInfo:{type:Object,value:{}},cmmdtyInfos:{type:Array,value:[],observer:function(e){if(e.length){var t={};e.forEach((function(e){var a=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,o=a.itemNo,n=a.pictureUrl;t[o]={pictureUrl:"https:"+n}})),this.setData({commdtys:t})}}},host:{type:Object,value:{}}},data:{title:"",show:!1,superShow:1,unused:0,commdtys:null},ready:function(){T("autoexpo",this)},pageLifetimes:{show:function(){T("autoexpo",this)},hide:function(){},resize:function(e){}},methods:{init:function(){var e=this.properties,t=e.usebleCoupon,a=e.cmmdtyInfos,o=e.cartHeadInfo,n={};a.length&&(a.forEach((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,a=t.cmmdtyCode,o=t.pictureUrl;n[a]={pictureUrl:"https:"+o}})),this.setData({commdtysCmdyCode:n}));var i="",r=0;if(t){var s=t.shopCoponList,c=t.shoppingGoldInfo,d=t.couponNum,u=t.couponSum,l=t.tipType,p=t.distanceValue,f=t.tipMsg,h=c&&c.bonusUseAmount?+c.bonusUseAmount:0;(s.length||c)&&(d&&h?i="已抵扣"+c.labelName+"¥"+h+"，"+d+"张优惠券¥"+u+"，共减¥ "+(+h+ +u).toFixed(2):d&&0==h?i="已抵扣"+d+"张优惠券，减¥"+u:0==d&&h?i="已抵扣"+c.labelName+"¥"+h:0==d&&0==h&&p&&"1"==l&&(i="还差¥"+p+"元可用"+c.labelName)),c&&"2"!==c.unUsedReasonCode&&(r=1),!s.length&&0==d&&0==h&&p&&2==l&&"1"==o.cartOneCouponMeetCutSwitch&&(i='您有一张"'+f+'"券还差'+p+"元可用"),this.setData({title:i,unused:r})}else this.setData({title:"",unused:0})},toHrefGoldCoupon2:function(){var e=this.properties.usebleCoupon.shoppingGoldInfo;0==e.goldUrl.indexOf("//")&&(e.goldUrl="https:"+e.goldUrl);var t="/pages/webView/index?webViewSrc="+e.goldUrl;n.navigateTo({url:t})},toHrefUsableGoods:function(e){var t=e.currentTarget.dataset,a=t.id,o=t.desc;a&&n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+a+"&type=1&label="+o})},onOpen:function(){T("manuclick",{modid:"9",eleid:"771009001"}),this.setData({show:!0})},onClose:function(){this.setData({show:!1})},setState:function(e){var t=e.currentTarget.dataset,a=t.key,o=t.value;this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},""+a,+o))},toRedireact:function(e){T("manuclick",{modid:"2",eleid:"771009003",evdl:'{"eletp":"coupon"}'});var t=e.currentTarget.dataset,a=t.ruleid,o=t.bountyruleid;n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+a+"_"+o})},goCoudan:function(e){var t=e.currentTarget.dataset.couponRuleId;n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+t})},autoclick:function(e){T("click",{event:e})}}})})),window.define("517",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(245),P=((T=I)&&T.__esModule,e(25));Component({options:{multipleSlots:!0},properties:{cmmdtyInfo:{type:Object,value:{},observer:function(e,t){this.initMainData()}},type:String,host:{type:Object,value:{}},errorInfos:Array},data:{errMsg:"",preStatus:["","预热","预约","预定","预售"]},lifetimes:{ready:function(){console.log("---\x3e",this.properties.cmmdtyInfo)}},methods:{initMainData:function(){var e=this.properties,t=e.errorInfos,a=e.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo,o="无货";if(t&&t.length){var n=t.filter((function(e){return e.itemNo===a}));if(n&&n.length){var i=n[0];i.errorCode;o=i.errorMessage}this.setData({errMsg:o})}},onDeleteButton:function(e){var t=this;(0,P.saSendLog)("click",{event:e});var a=this.properties.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo;n.showModal({title:"提示",content:"是否确认删除？",success:function(e){e.confirm?t.triggerEvent("onChange",{type:"delete",playload:[{itemNo:a,deleteFlag:"Y"}]}):e.cancel&&console.log("取消")}})},goFourthPage:function(){var e=this.properties.cmmdtyInfo,t=e.mainCmmdtyInfo,a=e.cmmdtyHeadInfo,o=t.mainCmmdtyDetailInfo,i=o.swlFlag,r=o.shopCode,s=o.cmmdtyCode,c=o.supplierCode,d=o.tmFlag,u=o.cmmdtyName,l=a.subActivityType,p=r,f=t.serviceProperties.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length?1:0;p="1"==i||"1"==f&&"0000000000"!=r?c:"6"==l?"mp":d&&f&&"1"==f?c:r,n.navigateTo({url:"/pages/fourth/fourth?productId="+s+"&shop="+p+"&title="+u})},goSimilar:function(){var e=this.properties.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo,t=(e.shopCode,e.cmmdtyCode),a=e.supplierCode,o="/pages/webView/index?webViewSrc="+I.Host.rec+"/show/mfind/"+a+"/"+t+".html";n.navigateTo({url:o}),(0,P.saSendLog)("manuclick",{modid:"2",eleid:"771002023"})}}})})),window.define("519",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(520);Component({options:{multipleSlots:!0},properties:{disabled:Boolean,leftWidth:{type:Number,value:0},rightWidth:{type:Number,value:0},asyncClose:{type:Boolean,value:!1,observer:function(e,t){e||this.swipeMove(0)}}},behaviors:[T.touch],data:{offset:0,draging:!1,wrapperStyle:"",asyncClose:!0},methods:{wrapperStyle:function(e,t){var a="translate3d("+e+"px, 0, 0)",o=t?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";return"\n        -webkit-transform: "+a+";\n        -webkit-transition: "+o+";\n        transform: "+a+";\n        transition: "+o+";\n      "},onTransitionend:function(){this.swipe=!1},open:function(e){var t=this.properties,a=t.leftWidth,o=t.rightWidth,n="left"===e?a:-o;this.swipeMove(n),this.resetSwipeStatus(),this.triggerEvent("changeOpen")},close:function(){var e=this.data.draging;this.setData({offset:0,wrapperStyle:this.wrapperStyle(0,e)})},resetSwipeStatus:function(){this.swiping=!1,this.opened=!0},swipeMove:function(e){var t=this.data.draging;void 0===e&&(e=0),this.setData({offset:e,wrapperStyle:this.wrapperStyle(e,t)}),e&&(this.swiping=!0),!e&&(this.opened=!1)},swipeLeaveTransition:function(e){var t=this.properties,a=t.leftWidth,o=t.rightWidth,n=this.data.offset,i=this.opened?.85:.15;e>0&&-n>o*i&&o>0?this.open("right"):e<0&&n>a*i&&a>0?this.open("left"):this.swipeMove()},startDrag:function(e){this.properties.disabled||(this.setData({draging:!0,wrapperStyle:this.wrapperStyle(this.data.offset,!0)}),this.touchStart(e),this.opened&&(this.startX-=this.data.offset))},onDrag:function(e){if(!this.properties.disabled){this.touchMove(e);var t=this.deltaX,a=this.properties,o=a.leftWidth,n=a.rightWidth;t<0&&(-t>n||!n)||t>0&&(t>o||t>0&&!o)||"horizontal"===this.direction&&this.swipeMove(t)}},endDrag:function(){this.properties.disabled||(this.setData({draging:!1,wrapperStyle:this.wrapperStyle(this.data.offset,!1)}),this.swiping&&this.swipeLeaveTransition(this.data.offset>0?-1:1))},onClick:function(e){var t=e.currentTarget.dataset.key,a=void 0===t?"outside":t;this.triggerEvent("click",a),this.data.offset&&(this.properties.asyncClose?this.triggerEvent("close",{position:a,instance:this}):this.swipeMove(0))}}})})),window.define("520",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.touch=Behavior({methods:{touchStart:function(e){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY},touchMove:function(e){var t=e.touches[0];this.deltaX=t.clientX-this.startX,this.deltaY=t.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.offsetX>this.offsetY?"horizontal":this.offsetX<this.offsetY?"vertical":""}}})})),window.define("522",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=e(25).saSendLog,P=e(523);Component({behaviors:[P],properties:{min:{type:Number,value:1},max:{type:Number,value:99},value:{type:Number,value:0,observer:function(e,t){this.setData({currentValue:e})}},disabled:{type:Boolean,value:!1},ct:{type:String,observer:function(e,t){e&&this.setData({currentValue:this.properties.value})}},sa:String},data:{currentValue:0},ready:function(){},timeid:null,methods:{sendSa:function(e){var t=this.properties.sa;if(t)try{var a=JSON.parse(t)[e].split("-"),o=T(a,2),n=o[0],i=o[1];I("manuclick",{modid:n,eleid:i})}catch(e){}},clickHandler:function(e){var t=this,a=e.currentTarget.dataset,o=a.syn,n=a.disabled,i=this.properties,r=i.min,s=i.max,c=(i.sa,this.data.currentValue);n||("reduce"==o?c--:"add"==o&&c++,this.sendSa(o),+c>=+s?c=s:+c<=+r&&(c=r),this.setData({currentValue:c},(function(){t.debounce((function(){t.triggerEvent("onChange",c)}),400)})))},changeHandler:function(e){var t=this,a=this.properties,o=a.min,n=a.max,i=a.value,r=e.detail.value;if(r){if(r==i)return;+r>=+n?r=n:+r<=+o&&(r=o)}this.sendSa("edit"),this.setData({currentValue:r},(function(){t.debounce((function(){t.triggerEvent("onChange",r)}),400)}))}}})})),window.define("523",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";a.exports=Behavior({_timeid_:null,methods:{debounce:function(e,a){this._timeid_&&clearTimeout(this._timeid_),this._timeid_=t((function(){e()}),a)}}})})),window.define("525",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(247),I=e(526),P=e(25);Component({options:{multipleSlots:!0},properties:{cartHeadInfo:{type:Object,value:{}},cmmdtyInfo:{type:Object,value:{},observer:function(e,t){this.initMainData()}},errorInfos:{type:Array,value:[]},type:String,host:{type:Object,value:{}},propertys:{type:Object,value:{},observer:function(e,t){this.initPropertys()}},discountInfos:{type:Array,value:[]},goldApps:{type:Object,value:{}}},data:{ishow:!1,iClose:!1,parityPrice:"",errMsg:"",eigenvalueVOList:[],labelPath:"",resultUrl:"",checkedsByExtendInfos:[],checkedsByServeCodeItems:[],show:!1,serveType:{ZSRW:"维修服务",ZSRV:"安装服务"},extendInfosEd:[],min:1,max:99,isJN:!1},ready:function(){(0,P.saSendLog)("autoexpo",this)},pageLifetimes:{show:function(){},hide:function(){},resize:function(e){}},methods:{initMainData:function(){var e=this.properties,t=e.errorInfos,a=e.cmmdtyInfo,o=a.cmmdtyHeadInfo.activityType,n=a.mainCmmdtyInfo,i=n.mainCmmdtyDetailInfo,r=i.firstSalesPrice,s=i.salesPrice,c=i.itemNo,d=i.startCount,u=i.availableQty,l=i.remanentQty,p=i.arrivalQty,f=n.serviceProperties,h=a.extendInfos,g=a.serveCodeItems,m=r&&s&&+r>+s?(+r-+s).toFixed(2):"",v=h.filter((function(e){return e.extendDetailInfo.itemNo})),y=g.filter((function(e){return e.itemNo})),w=y.map((function(e){return e.serveCode})),b={},C=[];h.forEach((function(e){var t=e.extendDetailInfo,a=t.warrantyType,o=t.typeName,n=t.itemNo,i=t.cmmdtyCode;b.hasOwnProperty(a)?b[a].childrens.push(t):b[a]={name:o,value:a,childrens:[t]},n&&C.push(i)}));var S=this.data,T=S.min,I=S.max;T=d||T,u=""==u?"99":u,I=Math.min(u,I);var P="",D=t.filter((function(e){return e.itemNo===c}));if(D&&D.length){var x=D[0];x.errorCode;P=x.errorMessage}if(t.find((function(e){var t=e.errorCode,a=e.itemNo;return"CSC-22-0003"==t&&a==c})))P="仅剩"+p+"件";else if(~["02","06","12"].indexOf(o))if(Number(l)>99&&Number(u)>99)P="最多可买99"+("12"==o?"套":"件");else{var _=Math.min.apply(null,[Number(l),Number(u)]);_&&(P="最多可买"+_+("12"==o?"套":"件"),I=_)}else+d&&(P=d+"件起售");var k=!1;f.find((function(e){return"7"==e.serviceFlag}))&&(k=!0),this.setData({min:T,max:I,isJN:k,parityPrice:m,errMsg:P,checkedsByExtendInfos:v,checkedsByServeCodeItems:y,serveCodeItemsEd:w,extendInfosEd:C,extendInfosWap:Object.keys(b).map((function(e){return b[e]}))})},initPropertys:function(){var e=this,t=this.properties,a=t.propertys,o=a.details,n=void 0===o?[]:o,i=a.labels,r=void 0===i?[]:i,s=t.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo,c=s.cmmdtyCode,d=s.shopCode;s.supplierCode,s.itemNo;n.forEach((function(t){var a=t.cmmdtyCode,o=t.shopCode,n=t.eigenvalueVOList;a==c&&o==d&&e.setData({eigenvalueVOList:n})})),r.filter((function(e){return e.cmmdtyCode==c})).forEach((function(t){t.labelList.sort((function(e,t){return e.labelSort>t.labelSort})).forEach((function(t,a){var o=t.labelPath;!a&&o&&e.setData({labelPath:o.replace("http:","https:")})}))}))},updateButtonQty:(0,T.debounce)((function(e){var t=this.properties.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo,a=t.itemNo,o=(t.cmmdtyQty,e.detail);this.triggerEvent("onChange",{type:"update",playload:[{itemNo:a,requestQty:o}]})}),300),updateCheckedStatus:function(e){var t=this.properties.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo,a=t.itemNo,o=t.tickStatus,n=e.detail;n!=+o&&this.triggerEvent("onChange",{type:"checked",playload:[{itemNo:a,tickStatus:n?"1":"0"}]})},onDeleteButton:function(e){var t=this;(0,P.saSendLog)("click",{event:e});var a=this.properties.cmmdtyInfo.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo;n.showModal({title:"提示",content:"是否确认删除？",success:function(e){e.confirm?(t.triggerEvent("onChange",{type:"delete",playload:[{itemNo:a,deleteFlag:"Y"}]}),t.setData({iClose:!0})):e.cancel&&console.log("取消")}})},toHref:function(e){var t=e.currentTarget.dataset,a=t.id,o=t.desc;a&&n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+a+"&type=1&label="+o})},onChangeServer:function(){this.setData({show:!0})},onClose:function(){this.setData({show:!1})},onSuccess:function(){var e=this,t=this.properties.cmmdtyInfo,a=t.mainCmmdtyInfo.mainCmmdtyDetailInfo,o=a.itemNo,n=a.cmmdtyQty,i=t.extendInfos,r=t.serveCodeItems,s=this.data,c=s.extendInfosEd,d=s.serveCodeItemsEd,u=0,l={mainCmmdtyBasicInfo:{itemNo:o},extendCmmdtyItemList:[],serveCodeItems:[]};if(c.length+d.length)l.extendCmmdtyItemList=i.filter((function(e){var t=e.extendDetailInfo;return!!~c.indexOf(t.cmmdtyCode)})).map((function(e){var t=e.extendDetailInfo,a=t.supplierCode,o=t.cmmdtyCode;return{itemNo:u++,supplierCode:a,cmmdtyCode:o,cmmdtyQty:n}})),l.serveCodeItems=r.filter((function(e){var t=e.serveCode;return!!~d.indexOf(t)})).map((function(e){var t=e.serveCode,a=e.cmmdtyQty;return{itemNo:u++,serveCode:t,cmmdtyQty:a}})),(0,I.updateWarranty)(l).then((function(){e.onClose()})).then((function(){console.log("执行完毕"),e.triggerEvent("onChange",{type:"reload",playload:[]})}));else{var p=[];i.filter((function(e){return e.extendDetailInfo.itemNo})).forEach((function(e){var t=e.extendDetailInfo.itemNo;p.push({itemNo:t,deleteFlag:"Y"})})),r.filter((function(e){return e.itemNo})).forEach((function(e){var t=e.itemNo;p.push({itemNo:t,deleteFlag:"Y"})})),p.length&&this.triggerEvent("onChange",{type:"delete",playload:p}),this.onClose()}},onChangeByExtends:function(e){var t=this.properties.cmmdtyInfo.extendInfos,a=this.data.extendInfosEd,o={};t.forEach((function(e){var t=e.extendDetailInfo,n=t.warrantyType,i=(t.typeName,t.itemNo,t.cmmdtyCode);~a.indexOf(i)&&(o[n]=i)}));var n=e.currentTarget.dataset,i=n.code,r=n.type;e.detail?o[r]=i:delete o[r],this.setData({extendInfosEd:Object.keys(o).map((function(e){return o[e]}))})},onChangeByServer:function(e){var t=this.properties.serveCodeItemsEd,a=e.currentTarget.dataset.code;~t.indexOf(a)?t.splice(t.indexOf(a),1):t.push(a),this.setData({serveCodeItemsEd:t})},goFourthPage:function(){var e=this.properties.cmmdtyInfo,t=e.mainCmmdtyInfo,a=e.cmmdtyHeadInfo,o=t.mainCmmdtyDetailInfo,i=o.swlFlag,r=o.shopCode,s=o.cmmdtyCode,c=o.supplierCode,d=o.tmFlag,u=o.cmmdtyName,l=a.subActivityType,p=r,f=t.serviceProperties.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length?1:0;p="1"==i||"1"==f&&"0000000000"!=r?c:"6"==l?"mp":d&&f&&"1"==f?c:r,n.navigateTo({url:"/pages/fourth/fourth?productId="+s+"&shop="+p+"&title="+u})},goSubFourthPage:function(e){var t=e.currentTarget.dataset.index,a=this.properties.cmmdtyInfo.subCmmdtyInfos[t],o=a.subCmmdtyHeadInfo,i=a.serviceProperties,r=o.swlFlag,s=o.shopCode,c=o.cmmdtyCode,d=o.supplierCode,u=o.cmmdtyName,l=(i.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length,s);l="1"==r?d:s,n.navigateTo({url:"/pages/fourth/fourth?productId="+c+"&shop="+l+"&title="+u})},autoclick:function(e){(0,P.saSendLog)("click",{event:e})}}})})),window.define("526",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.updateWarranty=function(e){var t=e.mainCmmdtyBasicInfo,a=e.extendCmmdtyItemList,o=e.serveCodeItems,n=JSON.stringify({warrantyAddHeader:{operationChannel:x.OPERATION_CHANNEL,operationTerminal:x.OPERATION_TERMINAL,operationEquipment:x.OPERATION_EQUIPMENT,operationUser:"",operationStoreCode:"",provinceCode:x.PROVINCE_CODE,cityCode:x.CITY_CODE,districtCode:x.DISTRICT_CODE,townCode:"",sourcePageType:"01"},mainCmmdtyBasicInfo:t,extendCmmdtyItemList:a,serveCodeItems:o});return I.axios.post(D.default.shopping+"/app/gateway/updateWarranty.do",{data:n})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("528",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(247),I=x(e(54)),P=e(25),D=x(e(245));function x(e){return e&&e.__esModule?e:{default:e}}e(246);var _=e(25),k=_.getDfpToken;_.checkLogin;function L(e,t){e.shopCode;var a=e.activityId,o=e.activityKey,n=e.cityCode,i=(e.imageCode,e.uuid),r=void 0===i?"":i;e.sceneId;return T.axios.get(D.default.quan+"/lqzx_rsf.do",{params:{actId:a,actKey:o,channel:"11",cityId:n||"",detect:I.default.getTrack(),sourceId:1734,dfpToken:t||"",callerCode:"1023",uuid:r}}).then((function(e){return"0"==e.resultCode?e:Promise.reject({msg:e.resultMsg})})).catch((function(e){var t=e.resultMsg;return Promise.reject({msg:t})}))}Component({properties:{coupon:{type:Object,value:{},observer:function(e,t){e&&this.init()}},shop:Object,cartHeadInfo:Object},data:{state:0,imgShow:!1,sceneId:"",show:!0},methods:{init:function(){var e=this.properties,t=e.shop,a=e.coupon,o={};t.promotions.forEach((function(e){e.cmmdtyInfos.forEach((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,a=e.subCmmdtyInfos,n=t.cmmdtyCode;o[n]=t,a.forEach((function(e){var t=e.subCmmdtyHeadInfo,a=t.cmmdtyCode;o[a]=t}))}))}));var n=a.cmmdtyCodes.filter((function(e){var t=e.cmmdtyCode;return o[t]})).map((function(e){var t=e.cmmdtyCode,a=o[t],n=a.cmmdtyQty,i=a.salesPrice,r=a.pictureUrl;return{pictureUrl:r=r.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://"),cmmdtyQty:n,salesPrice:i,cmmdtyCode:t}}));this.setData({cmmdtyCodes:n})},getCoupons:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.properties,o=a.coupon,i=o.activityId,r=o.activityKey,s=a.shop.shopCode,c=a.cartHeadInfo.cityCode;k().then((function(e){return e})).catch((function(e){return""})).then((function(a){L(Object.assign({activityId:i,activityKey:r,shopCode:s,cityCode:c},t),a).then((function(t){e.setData({state:1,imgShow:!1}),n.showToast({title:"领取成功",icon:"none",duration:2e3})})).catch((function(e){e.msg&&n.showToast({title:e.msg,icon:"none",duration:2e3})}))}))},onSecurities:function(){this.getCoupons(),this.setData({show:!0}),(0,P.saSendLog)("manuclick",{modid:"2",eleid:"771017001"})},onClose:function(){this.setData({imgShow:!1})},onSuccess:function(e){this.getCoupons(e.detail)},showUsableGoodsDetail:function(){this.setData({show:!this.data.show}),this.data.show?(0,P.saSendLog)("manuclick",{modid:"17",eleid:"771017003"}):(0,P.saSendLog)("manuclick",{modid:"17",eleid:"771017004"})},goCouDan:function(){var e="/packageA/pages/quanSearch/search/search?id="+this.properties.coupon.activityId;n.navigateTo({url:e})},autoclick:function(e){(0,P.saSendLog)("click",{event:e})}}})})),window.define("530",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=(e(247),e(25)),D=e(509),x=e(245),_=((T=x)&&T.__esModule,e(23));Component({properties:{shop:{type:Object,value:{},observer:function(e,t){console.log("发生变化"),this.init()}},usableCouponShop:{type:Array,value:[],observer:function(e,t){this.initCoupons()}},cartHeadInfo:Object,fareRules:Array},data:{platform:(0,_.getPlatformType)(),checked:!1,disabled:!1,coupons:[],show:!1,freightAmount:0,couponShow:!1},lifetimes:{ready:function(){}},methods:{init:function(){var e=this.properties,t=e.shop,a=t.promotions,o=(t.disableds,e.fareRules,a.reduce((function(e,t){return e.concat(t.cmmdtyInfos)}),[])),n=!!o.length&&o.every((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,a=t.tickStatus;t.freightAmount;return"1"==a})),i=0==o.length,r=o.length?o.reduce((function(e,t){return e+ +t.mainCmmdtyInfo.mainCmmdtyDetailInfo.freightAmount}),0):0;this.setData({checked:n,disabled:i,freightAmount:r})},initCoupons:function(){var e=this,t=this.properties,a=t.shop,o=a.shopCode,n=a.type,i=t.usableCouponShop;(i=i||[]).filter((function(e){return 1==e.storeCouponResult})).forEach((function(t){var a=t.storeId,i=t.storeType;a||"0000000000"!=o?a==o&&e.setData({couponShow:!0}):"2"==i&&"FS"==n||"3"==i&&"HWG"==n?e.setData({couponShow:!0}):"1"!=i||"SN"!=n&&"HWG_YBMY"!=n||e.setData({couponShow:!0})}))},onCheckAll:function(e){var t=e.detail,a=this.properties.shop.promotions.reduce((function(e,t){return e.concat(t.cmmdtyInfos)}),[]).map((function(e){return{itemNo:e.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo,tickStatus:t?"1":"0"}}));this.triggerEvent("onChange",{type:"checked",playload:a})},onShowCoupons:function(){var e=this,t=this.properties,a=t.cartHeadInfo,o=t.shop.promotions.reduce((function(e,t){return e.concat(t.cmmdtyInfos)}),[]);Promise.all([(0,D.queryFreeCouponAct)({cartHeadInfo:a,cmmdtyInfos:o})]).then((function(t){var a=I(t,1)[0].reduce((function(e,t){return e.concat(t.coupons)}),[]);e.setData({coupons:a,show:!0})}))},onCloseCoupons:function(){this.setData({show:!1})},closeEmptyCoupon:function(){this.setData({show:!1})},goYFCD:function(){var e=this.properties,t=e.shop.promotions,a=e.cartHeadInfo,o=e.fareRules,i=[],r=[],s=0,c=0;t.forEach((function(e){var t=e.cmmdtyInfos,a=e.discountDetailInfo;t.forEach((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,o=t.tickStatus,n=t.cmmdtyCode,r=t.salesPrice,d=t.cmmdtyQty,u=(t.allocatedAmount,t.grossWeight);+o&&(i.push(n),+r&&(s+=+r*+d+(a?+a.promotionAmount:0)),+u&&(c+=+u*+d))}))})),i.length&&r.push("parameters="+i.join(",")),a.orderMoney&&r.push("priceSpread="+ +a.orderMoney),a.orderWeight&&r.push("orderWeight="+ +a.orderWeight),r.push("isWeight=1"),r.push("snSumPrice="+s.toFixed(2)),r.push("curWeight="+ +c),o[0]&&o[0].weightLimit&&r.push("weightLimit="+ +o[0].weightLimit);var d=x.Host.shopping+"/project/cart/mergeOrder.html?"+r.join("&");n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(d)})},autoclick:function(e){(0,P.saSendLog)("click",{event:e})}}})})),window.define("532",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(245),D=(I=P)&&I.__esModule?I:{default:I},x=e(247);Component({properties:{sceneId:{type:String,observer:function(){this.getImageCode()}},show:Boolean},data:{uuid:"",imageCodeUrl:"",imageCode:""},ready:function(){},methods:{getImageCode:function(){var e=this.properties.sceneId,t=function(e){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,o="",n=0;n<e;n++)o+=t.charAt(Math.floor(Math.random()*a));return o}(32),a=(new Date).getTime(),o=D.default.vcs+"/vcs/imageCode.htm?uuid="+t+"&yys="+a+"&sceneId="+e;console.log("imageCodeUrl",o),this.setData({uuid:t,imageCodeUrl:o})},onClose:function(){this.triggerEvent("onClose")},onSuccess:function(){var e=this,a=this.data,o=a.imageCode,n=a.uuid,r=this.properties.sceneId;o?function(e){var a=e.code,o=e.uuid;return Promise.race([x.axios.Jsonp(D.default.vcs+"/vcs/validate_jsonp.htm?code="+a+"&uuid="+o+"&delFlag=0"),new Promise((function(e,a){t((function(){return a()}),3e3)}))])}({code:o,uuid:n}).then((function(t){t=t.replace(/'/g,'"');try{t=JSON.parse(t)}catch(e){console.error(e)}"true"===(t=t&&t[0]||{}).result||!0===t.result?e.triggerEvent("onSuccess",{imageCode:o,uuid:n,sceneId:r}):i.showToast({title:"验证码不正确，请重新输入！",icon:"none",duration:2e3})})):(this.getImageCode(),i.showToast({title:"请输入验证码！",icon:"none",duration:2e3}))},onChangeImageCode:function(e){this.setData({imageCode:e.detail.value})}}})})),window.define("534",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(523);Component({behaviors:[T],properties:{checked:{type:Boolean,value:!1,observer:function(e,t){this.setData({selected:e})}},disabled:Boolean,customClass:String},data:{selected:!1},timeid:null,methods:{toggle:function(){var e=this,t=this.data.selected;if(!this.properties.disabled){var a=!t;this.setData({selected:a},(function(){e.debounce((function(){a!=e.properties.checked&&e.triggerEvent("onChange",a)}),400)}))}}}})})),window.define("536",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(247),I=e(537),P=e(25),D=(P.getLocation,P.getDfpToken),x=P.saSendLog,_="";Component({externalClasses:["out-class"],properties:{cartHeadInfo:Object,cmmdtyInfos:{type:Array,value:[],observer:function(e,t){this.init()}},usebleCoupon:{type:Object,value:{couponSum:0},observer:function(e,t){this.init()}}},data:{checked:!1,disabled:!1,count:0,famousCount:0,hwgCount:0,normalCount:0,iShow:!1,imgShow:!1,sceneId:"",token:"",editflag:!1},lifetimes:{ready:function(){var e=this;D().then((function(t){e.setData({token:t})}))}},methods:{init:function(){var e=this.properties.cmmdtyInfos,t=!!e.length&&e.every((function(e){return"1"==e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus})),a=0==e.length,o=0,n=0,i=0,r=0;e.filter((function(e){return"1"==e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus})).forEach((function(e){var t=e.mainCmmdtyInfo,a=e.subCmmdtyInfos,s=e.config,c=0,d=t.mainCmmdtyDetailInfo.cmmdtyQty;a.length?a.forEach((function(e){var t=e.subCmmdtyHeadInfo.cmmdtyQty;c+=+t})):c=+d,s.isHWG?n+=c:s.isFS?i+=c:r+=c,o+=c})),this.setData({checked:t,disabled:a,count:o,famousCount:i,hwgCount:n,normalCount:r})},onCheckAll:function(e){var t=e.detail,a=this.properties.cmmdtyInfos.map((function(e){return{itemNo:e.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo,tickStatus:t?"1":"0"}}));this.triggerEvent("onChange",{type:"checkedAll",playload:a})},onSubmit:(0,T.debounce)((function(e){_=e.currentTarget.dataset.type||"",this.onSettlement()}),1e3),onSettlement:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.data.token,o=this.properties.cartHeadInfo,i=o.provinceCode,r=o.cityCode,s=o.districtCode;(0,I.wapSettlement)(_,{provinceCode:i,cityCode:r,districtCode:s},a,t).then((function(e){n.navigateTo({url:"/pages/cart/cart2/cart2?no="+e})})).catch((function(t){~["CSC-56-0001","CSC-82-0001"].indexOf(t.code)?e.setData({iShow:!0}):t.needImageCode?e.setData({imgShow:!0,sceneId:t.sceneId}):n.showToast({title:t.msg,icon:"none",duration:2e3})}))},onClose:function(){this.setData({imgShow:!0})},onSuccess:function(e){this.onSettlement(e.detail)},onCloseSettlement:function(){this.setData({iShow:!1})},setEditFlag:function(e){var t=e.currentTarget.dataset.value;this.setData({editflag:"1"==t})},onDelete:function(){var e=this,t=this.properties.cmmdtyInfos.filter((function(e){return"1"==e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus})).map((function(e){return{itemNo:e.mainCmmdtyInfo.mainCmmdtyDetailInfo.itemNo,deleteFlag:"Y"}}));t.length&&n.showModal({title:"提示",content:"是否确认删除？",success:function(a){a.confirm?e.triggerEvent("onChange",{type:"delete",playload:t}):a.cancel&&console.log("取消")}})},autoclick:function(e){x("click",{event:e})}}})})),window.define("537",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.wapSettlement=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=t.districtCode,o=void 0===a?_.DISTRICT_CODE:a,n=t.cityCode,i=void 0===n?_.CITY_CODE:n,r=t.provinceCode,s=void 0===r?_.PROVINCE_CODE:r,c=arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=d.imageCode,l=d.uuid,p=d.sceneId,f={cartHeadInfo:{userFlag:_.USER_FLAG,directFlag:_.DIRECT_FLAG,operationChannel:_.OPERATION_CHANNEL,operationTerminal:_.OPERATION_TERMINAL,operationEquipment:_.OPERATION_EQUIPMENT,districtCode:o,cityCode:i,provinceCode:s,dfpToken:c||"",token:"wx_mini",imageCode:u,uuid:l,sceneId:p,detect:D.default.getTrack()},recSetFlag:e,supportYB:_.supportYB,publishDate:_.PUBLISH_DATE,wapTerminal:"01"};return T.axios.post(P.default.shopping+"/app/private/wapSettlement.do",{data:JSON.stringify(f)}).then((function(e){var t=e.result,a=e.errorInfos;if("Y"==t.isSuccess)return t.cart2No;if(a.length){var o=a[0],n=o.errorCode,i=o.errorMessage;return(0,I.onUomError)({name:"app_private_wapSettlement.do",code:n,msg:i,type:"2",rres:e,inputParams:f}),Promise.reject({code:n,msg:i,errorInfos:a})}}))};var T=e(247),I=e(248),P=x(e(245)),D=x(e(54));function x(e){return e&&e.__esModule?e:{default:e}}var _=e(246)})),window.define("539",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{shop:{type:Object,value:{}}},data:{textareaShow:!1},ready:function(){var e=this.properties.shop.guideText;this.setData({guideText:e})},methods:{changeGuideText:function(e){var t=e.detail.value,a=e.currentTarget.dataset.shopCode;this.setData({textareaShow:!1,guideText:t});var o={shopCode:a,guideText:t};this.triggerEvent("changeGuideText",o)},toShowTextarea:function(){this.setData({textareaShow:!0})}}})})),window.define("541",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(542);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Component({properties:{cmmdtyInfoItems:{type:Object,value:[],observer:function(e,t){this.init()}},subsidyLink:{type:String,value:""}},data:{visible:!1,checked:!1,itemNo:"",subsidyShow:!1,cmmtys:[],itemNos:[],items:[]},methods:{init:function(){var e=this.properties.cmmdtyInfoItems,t=[],a=[],o=e.filter((function(e){return e.serviceProperties.some((function(e){return"7"==e.serviceFlag}))}));o.map((function(e){var o=e.mainCmmdtyHeadInfo,n=e.serviceProperties,i=o.itemNo,r=o.energySubsidiesTickStatus,s=o.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://");Object.assign(o,{pictureUrl:s});var c=n.filter((function(e){return"7"==e.serviceFlag}))[0].serviceType;1==r&&(t.push(I({},c,i)),a.push(i))})),console.log("QAAAAAAA",o,t,a),this.setData({cmmtys:o,itemNos:t,items:a,isUpdate:!0})},onChange:function(){var e=this,t=this.data,a=t.itemNos,o=t.cmmtys,n=t.items;if(n.length)if(o&&1==o.length){var i=o[0].mainCmmdtyHeadInfo.itemNo;(0,T.operateEnergySubsidies)(i,0).then((function(t){e.setData({itemNos:[],items:[]}),e.triggerEvent("showCart2Info")}))}else this.setData({visible:!0,items:n});else if(o&&1==o.length){var r=o[0],s=r.mainCmmdtyHeadInfo.itemNo,c=r.serviceProperties.filter((function(e){return"7"==e.serviceFlag}))[0].serviceType;(0,T.operateEnergySubsidies)(s,1).then((function(t){a.push(I({},c,s)),n.push(s),e.setData({itemNos:a,items:n,visible:!0})}))}else this.setData({visible:!0,items:n})},checkboxChange:function(e){var t=this;console.log("radio发生change事件，携带value值为：",e.currentTarget.dataset.itemNo);var a=this.data,o=a.itemNos,n=a.items,i=e.currentTarget.dataset.itemNo,r=e.currentTarget.dataset.serviceType;~n.indexOf(i)?(0,T.operateEnergySubsidies)(i,0).then((function(e){n.splice(n.indexOf(i),1),o.forEach((function(e,t){Object.values(e)==i&&o.splice(t,1)})),t.setData({items:n,itemNos:o})})):(0,T.operateEnergySubsidies)(i,1).then((function(e){o&&o.length?(o.forEach((function(e,t){Object.keys(e)==r&&o.splice(t,1)})),o.push(I({},r,i))):o.push(I({},r,i));var a=[];o.forEach((function(e){a.push(Object.values(e)[0])})),t.setData({itemNos:o,items:a})}))},saveSubsidy:function(){this.triggerEvent("showCart2Info"),this.setData({visible:!1})},onCancel:function(){this.triggerEvent("showCart2Info"),this.setData({visible:!1})},toSubsidyExplain:function(){var e=this.properties.subsidyLink;n.navigateTo({url:"/pages/webView/index?webViewSrc=https://"+encodeURIComponent(e)})}}})})),window.define("542",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryEnergySubsidies=function(){return I.axios.post(D.default.shopping+"/app/cart2/private/queryEnergySubsidies.do")},a.operateEnergySubsidies=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return I.axios.post(D.default.shopping+"/app/cart2/private/operateEnergySubsidies.do",{itemNo:e,tickStatus:t})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T}})),window.define("544",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{projectInfo:{type:Array,value:[]}},data:{show:!1},methods:{onOpen:function(){this.setData({show:!0})},onClose:function(){this.setData({show:!1})}}})})),window.define("546",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(547),I=e(77).saSendLog;function P(e){return"周"+["日","一","二","三","四","五","六"][new Date(e).getDay()]}function D(e,t){var a=new Date(e),o=a.getFullYear(),n=("00"+(a.getMonth()+1)).slice(-2),i=a.getDate()<10?"0"+a.getDate():a.getDate();return t.replace(/YYYY/,o).replace(/MM/,n).replace(/DD/,i)}var x=[{value:"1",label:"09:00-14:00",tip:"（上午）"},{value:"2",label:"14:00-18:00",tip:"（下午）"},{value:"3",label:"09:00-18:00",tip:"（白天）"}];Component({properties:{cartHeadBasicInfo:{type:Object,value:{}},cmmdtyInfoItem:{type:Object,value:{},observer:function(e){Object.keys(e).length&&this.init()}},orderType:Object},data:{installSelectedTime:[],availableInstallTimes:[],isShow:!1,name:"",text:""},methods:{init:function(){var e=this.properties,t=e.cmmdtyInfoItem,a=t.mainCmmdtyHeadInfo;t.installTime,t.serviceProperties,e.orderType;a&&~["1","2","3"].indexOf(a.needInstall)&&this.onUpdate()},autoclick:function(e){I("click",{event:e})},onUpdate:function(){var e=this.properties.cmmdtyInfoItem,t=e.installTime,a=e.mainCmmdtyHeadInfo,o=e.cmmdtyHeadInfo,n=a.selectedInstallTime,i=a.selectedInstallInterval,r=a.needInstall,s=a.providerFlag,c=[],d="",u="",l=!0;if("1"==r)d="苏宁安装";else if("2"==r){if(d="厂家安装","01"==s);else if("02"==s){l=!1;var p=o.supplierTel;u=p?"收货后联系"+p+"安装":"收货后请联系客服预约安装"}}else d="苏宁安装";l&&(t.availableServiceDates.forEach((function(e){var t=e.availableServiceDate,a=e.availableServiceTimes,o={value:t,label:D(t,"MM-DD")+" "+P(t)};o.children=a.map((function(e){var t=e.availableServiceTime;return x.find((function(e){return e.value==t}))})),o.children.length&&c.push(o)})),u=D(n,"MM-DD")+"("+P(n)+") "+x.find((function(e){return e.value==i})).label),this.setData({isInstall:l,name:d,text:u,availableInstallTimes:c,installSelectedTime:[n,i],isShow:!0})},onSuccess:function(e){var t=this,a=[e.detail[0].value,e.detail[1].value],o=this.properties,i=o.cartHeadBasicInfo.cart2No,r=o.cmmdtyInfoItem,s=r.mainCmmdtyHeadInfo,c=(r.serviceProperties,[{itemNo:s.itemNo,selectedInstallTime:a[0],selectedInstallInterval:a[1]}]);return I("manuclick",{modid:"3",eleid:"772003002"}),(0,T.recdeliAndInstallInfo)(0,JSON.stringify(c),i).then((function(e){e.deliveryAndInstallInfos.map((function(e){var a=e.savedInfo,o=a.itemNo,i=a.selectedInstallTime,r=a.selectedInstallInterval;if(o===s.itemNo){n.showToast({title:"安装时间修改成功",icon:"none",duration:2e3});var c=D(i,"MM-DD")+"("+P(i)+") "+x.find((function(e){return e.value==r})).label;t.setData({selectedInstallTime:i,selectedInstallInterval:r,text:c})}}))})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("547",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.recdeliAndInstallInfo=function(e,t,a){var o={combineDeliveryType:e,deliveryAndInstallInfos:t,cart2No:a};return I.axios.post(D.default.shopping+"/app/cart2/private/recdeliAndInstallInfo.do",o)},a.modifyQuantity=function(e){var t=e.cart2No,a=e.itemNo,o=e.quantity;return I.axios.post(D.default.shopping+"/app/V2/private/modifyQuantity.do",{cart2No:t,itemNo:a,quantity:o,opEq:"06",channelType:x.CHANNEL_TYPE,supportFixedCollocation:"1",publishDate:x.PUBLISH_DATE})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("549",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function I(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}Component({properties:{multi:{type:Number,value:2},columns:{type:Array,value:[]},values:{type:Array,value:[],observer:function(e,t){this.initialize()}}},data:{multiArray:[[],[]],multiIndex:[0,0]},ready:function(){console.log("ready");this.properties.multi},methods:{initialize:function(){var e=[[],[]],t=[0,0],a=this.properties,o=a.columns,n=a.values;o.forEach((function(a,o){var i=a.value,r=a.label,s=I(a,["value","label"]),c=s.children;e[0].push(Object.assign({value:i,label:r},s)),i==n[0]&&(c.forEach((function(a){var i=a.value,r=a.label,s=I(a,["value","label"]);e[1].push(Object.assign({value:i,label:r},s)),i==n[1]&&(t[1]=o)})),t[0]=o)})),console.log("columns",e),console.log("value",t),this.setData({multiIndex:t,multiArray:e})},bindMultiPickerChange:function(e){var t=this.properties,a=t.columns,o=(t.values,T(e.detail.value,2)),n=o[0],i=o[1],r=a[n],s=r.children,c=I(r,["children"]),d=s[i];this.triggerEvent("onSuccess",[c,d])},bindMultiPickerColumnChange:function(e){var t=e.detail,a=t.column,o=t.value,n=this.data,i=n.multiArray,r=n.multiIndex,s=this.properties,c=s.columns;s.values;r[a]=o,0==a&&(i[1]=[],r[1]=0,c[o].children.forEach((function(e){var t=e.value,a=e.label,o=I(e,["value","label"]);i[1].push(Object.assign({value:t,label:a},o))}))),this.setData({multiArray:i,multiIndex:r})}}})})),window.define("551",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=e(547),P=e(77).saSendLog;function D(e){return"周"+["日","一","二","三","四","五","六"][new Date(e).getDay()]}function x(e,t){var a=new Date(e),o=a.getFullYear(),n=("00"+(a.getMonth()+1)).slice(-2),i=a.getDate()<10?"0"+a.getDate():a.getDate();return t.replace(/YYYY/,o).replace(/MM/,n).replace(/DD/,i)}var _=[{value:"1",label:"09:00-21:00",tip:"（白天）"},{value:"2",label:"09:00-14:00",tip:"（上午）"},{value:"3",label:"14:00-21:00",tip:"（下午）"},{value:"4",label:"18:00-22:00",tip:"（晚上）"}];Component({properties:{cartHeadBasicInfo:{type:Object,value:{}},cmmdtyInfoItem:{type:Object,value:{},observer:function(e){Object.keys(e).length&&this.init()}},orderType:Object,deliveryInfo:Object},data:{arrivalSelectedTime:[],availableArrivalTimes:[],text:"",name:"",fsTxt:"",isCShop:!1,isFS:!1,isShow:!1},methods:{init:function(){var e=this.properties,t=e.cmmdtyInfoItem,a=t.mainCmmdtyHeadInfo,o=t.arrivalTime,n=t.serviceProperties,i=t.cmmdtyHeadInfo.activityType,r=e.orderType,s=e.deliveryInfo,c=a.shopCode,d=!(!r||!Object.keys(r).length),u=!!~["15","21"].indexOf(i);if(s&&s.hasSavedInfo&&(d=d&&"Y"==s.hasSavedInfo),d){var l="0000000000"!=c&&!n.some((function(e){return"30"==e.serviceFlag}));o&&o.earliestServiceDate&&r&&this.onUpdate(),this.setData({isCShop:l,isShow:!0})}this.setData({isYuDing:u})},autoclick:function(e){P("click",{event:e})},onUpdate:function(){var e=this.data.arrivalSelectedTime,t=this.properties,a=(t.orderType,t.cartHeadBasicInfo,t.cmmdtyInfoItem),o=a.mainCmmdtyHeadInfo,n=a.distributionStrategys,i=a.arrivalTime,r=(a.serviceProperties,o.selectedArrivalTime);if(r){var s=r.split("-"),c=T(s,4),d=c[0],u=c[1],l=c[2],p=c[3];e=[[d,u,l].join("-"),p]}var f=o.selectStrategy,h=(o.supplierDeliveryFlag,o.shopCode,o.intervalFlag||"11");n.forEach((function(e){var t=e.intervalFlag,a=e.strategy;f==a&&(h=t)}));var g=_;switch(h){case"11":g=_.filter((function(e){var t=e.value;return!!~["1"].indexOf(t)}));break;case"12":g=_.filter((function(e){var t=e.value;return!!~["2","3"].indexOf(t)}));break;case"13":g=_.filter((function(e){var t=e.value;return!!~["2","3","4"].indexOf(t)}))}for(var m=i.earliestServiceDate,v=i.unArrivalTimes,y=void 0===v?[]:v,w=m.split("-"),b=T(w,4),C=b[0],S=b[1],I=b[2],P=(b[3],y.map((function(e){return e.unavailableServiceTime}))),k=Date.parse(new Date([C,S,I].join("-"))),L=[],N=function(e){var t=k+24*e*60*60*1e3,a={value:x(t,"YYYY-MM-DD"),label:x(t,"MM-DD")+" "+D(t)};a.children=g.filter((function(e){var t=e.value;return+[a.value,t].join("-").replace(/-/g,"")>=+m.replace(/-/g,"")&&!~P.indexOf([a.value,t].join("-"))})),a.children.length&&L.push(a)},E=0;E<7;E++)N(E);var O=m?"预计"+[C,S,I].join("-")+"为您送货":"支付完成后尽快为您发货";this.setData({availableArrivalTimes:L,fsTxt:O}),this.parseArrivalSelectedTime(e)},parseArrivalSelectedTime:function(e){var t="";if(e.length&&2==e.length){var a=Date.parse(new Date(e[0])),o=_.filter((function(t){var a=t.value;return e[1]==a}));t=" "+x(a,"MM-DD")+"("+D(a)+") "+(o.length?o[0].label:"")}console.log("arrivalSelectedTime",e),this.setData({name:"苏宁配送",text:t,arrivalSelectedTime:e})},onSuccess:function(e){var t=this,a=[e.detail[0].value,e.detail[1].value],o=this.properties,i=o.cartHeadBasicInfo.cart2No,r=o.cmmdtyInfoItem,s=r.mainCmmdtyHeadInfo,c=r.serviceProperties,d=s.itemNo,u=s.combinedRelation,l=s.selectStrategy;~["60","61","62"].indexOf(l)&&(l=10),P("manuclick",{modid:"3",eleid:"772003005"});var p=[{itemNo:d,agingCmmdtyType:c.some((function(e){return"13"==e.serviceFlag}))?"1":"",selectStrategy:l,selectedArrivalTime:a.join("-"),selectedInstallTime:"",combinedRelation:u}];return(0,I.recdeliAndInstallInfo)(0,JSON.stringify(p),i).then((function(e){e.deliveryAndInstallInfos.map((function(e){var a=e.savedInfo,o=e.installTime,i=e.distributionStrategys,r=a.itemNo,c=a.selectedArrivalTime;if(r===s.itemNo){var d=c.split("-"),u=T(d,4),l=u[0],p=u[1],f=u[2],h=u[3];n.showToast({title:"配送时间修改成功",icon:"none",duration:2e3}),t.parseArrivalSelectedTime([[l,p,f].join("-"),h]),t.triggerEvent("onPSChange",{mainCmmdtyHeadInfo:a,installTime:o,distributionStrategys:i,itemNo:a.itemNo})}}))})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("553",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(547),P=e(23),D=e(25).saSendLog;function x(e){var t=e.errorInfos,a=void 0===t?[]:t,o=e.activityType,n=e.startCount,i=e.arrivalQty,r=e.remanentQty,s=e.availableQty,c=e.itemNo,d=n||1,u=s||99,l="",p=a.filter((function(e){return e.itemNo===c}));if(p&&p.length){var f=p[0];f.errorCode;l=f.errorMessage}if(a.find((function(e){var t=e.errorCode,a=e.itemNo;return"CSC-22-0003"==t&&a==c})))l="仅剩"+i+"件";else if(~["02","06","12"].indexOf(o))if(Number(r)>99&&Number(s)>99)l="最多可买99"+("12"==o?"套":"件");else{var h=Math.min.apply(null,[Number(r),Number(s)]);h&&(l="最多可买"+h+("12"==o?"套":"件"),u=h)}else+n&&(l=n+"件起售");return{errMsg:l,min:d,max:u}}function _(e){if(e.mainCmmdtyHeadInfo){var t=e.cmmdtyHeadInfo.activityType,a=e.mainCmmdtyHeadInfo,o=x({activityType:t,itemNo:a.itemNo,startCount:a.startCount,availableQty:a.availableQty,remanentQty:a.remanentQty,arrivalQty:a.arrivalQty}),n=(o.errMsg,o.min),i=o.max;this.setData({min:n,max:i})}}Component({options:{multipleSlots:!0},properties:{renderPrice:Boolean,orderType:Object,cartHeadBasicInfo:Object,cmmdtyInfoItem:{type:Object,value:null,observer:function(e,a){var o=this;clearTimeout(this.timeid),this.timeid=t((function(){e&&!o.isdebouce&&(_.call(o,e),o.setData({_cmmdtyInfoItem:e},(function(){o.isdebouce=!1})))}),300)}},time:{type:String,value:"",observer:function(e,a){var o=this;if(e&&!this.isdebouce){this.isdebouce=!0;var n=this.properties.cmmdtyInfoItem;_.call(this,n),this.setData({_cmmdtyInfoItem:n},(function(){clearTimeout(o.timeid),o.timeid=t((function(){o.isdebouce=!1}),400)}))}}},deliveryInfo:{type:Object,value:{}},host:{type:Object,value:{}},isArrow:{type:Boolean,value:!1},isShow:{type:Boolean,value:!0},cartSourceFlag:{type:Boolean,value:!0}},timeid:null,isdebouce:!1,data:{platform:(0,P.getPlatformType)(),_cmmdtyInfoItem:{},min:"",max:""},pageLifetimes:{show:function(){D("autoexpo",this)}},ready:function(){D("autoexpo",this)},methods:{toGood:function(){this.triggerEvent("onClick")},onPSChange:function(e){var t=e.detail,a=this.data._cmmdtyInfoItem;a.mainCmmdtyHeadInfo=Object.assign({},a.mainCmmdtyHeadInfo,t.mainCmmdtyHeadInfo);var o=Object.assign({},a,{installTime:t.installTime,distributionStrategys:t.distributionStrategys});this.setData({_cmmdtyInfoItem:o})},updateButtonQty:function(e){var a=this,o=e.detail,n=this.properties,r=n.cmmdtyInfoItem,s=n.cartHeadBasicInfo.cart2No,c=r.mainCmmdtyHeadInfo.itemNo;(0,I.modifyQuantity)({cart2No:s,itemNo:c,quantity:o}).then((function(e){var o=e.errorInfos,n=e.cmmdtyInfoItems;if(o&&o.length)return n.forEach((function(e){var t=e.cmmdtyHeadInfo.activityType,n=e.mainCmmdtyHeadInfo,r=n.itemNo,s=n.startCount,c=n.availableQty,d=n.remanentQty,u=n.arrivalQty,l=x({errorInfos:o,activityType:t,itemNo:r,startCount:s,availableQty:c,remanentQty:d,arrivalQty:u}),p=l.errMsg,f=l.min,h=l.max;a.setData({min:f,max:h}),i.showToast({title:p,icon:"none",duration:2e3})})),void t((function(){a.triggerEvent("onChange",e)}),2e3);a.triggerEvent("onChange",e)})).catch((function(e){console.log(e),i.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("555",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";e(247);var T=e(556),I=function(e,t){return"prov"==e||t?(0,T.queryAddress)(t,e).then((function(e){return e})).catch((function(){return[]})):[]};Component({properties:{show:{type:Boolean,value:!1},provinceCode:String,provinceName:String,cityName:String,cityCode:String,districtCode:String,districtName:String,townCode:String,townName:String},data:{provinces:[],citys:[],areas:[],towns:[],selected:[],initialPage:0,tabs:[{title:"省"},{title:"市"},{title:"区"},{title:"县"}]},ready:function(){var e=this,t=this.properties,a=t.provinceCode,o=(t.provinceName,t.cityName,t.cityCode),n=t.districtCode,i=(t.districtName,t.townCode);t.townName;I("prov",0).then((function(e){var t={provinces:e,selected:[]},o=e[0];return e.filter((function(e){return e.code==a})).forEach((function(e){o=e})),t.selected.push(o),a?I("city",o.code).then((function(e){return t.citys=e,t})):Promise.reject({dto:t,initialPage:0})})).then((function(e){var t=e.citys,a=t[0];return t.filter((function(e){return e.code==o})).forEach((function(e){a=e})),e.selected.push(a),o?I("area",a.code).then((function(t){return e.areas=t,e})):Promise.reject({dto:e,initialPage:1})})).then((function(e){var t=e.areas,a=t[0];return t.filter((function(e){return e.code==n})).forEach((function(e){a=e})),e.selected.push(a),n?I("town",a.code).then((function(t){return e.towns=t,e})):Promise.reject({dto:e,initialPage:2})})).then((function(e){var t=e.towns,a=t[0];return t.filter((function(e){return e.code==i})).forEach((function(e){a=e})),e.selected.push(a),e})).then((function(t){e.setData(Object.assign({},t,{initialPage:3}),(function(){e.setTab()}))})).catch((function(t){"number"==typeof t.initialPage&&e.setData(Object.assign({},t.dto,{initialPage:t.initialPage}),(function(){e.setTab()}))}))},methods:{setTab:function(){var e=this.data,t=e.selected,a=e.tabs;t.length&&(a=a.map((function(e,a){return{title:t[a]?t[a].name:"请选择"}}))),this.setData({tabs:a})},onTabClickHandler:function(e){var t=this,a=e.currentTarget.dataset.index,o=this.data,n=[o.provinces,o.citys,o.areas,o.towns];n[a]&&n[a].length&&this.setData({initialPage:a},(function(){t.setTab()}))},provinceClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(1,a),I("city",a.code).then((function(e){t.setData({citys:e,initialPage:1,areas:[],towns:[]},(function(){t.setTab()}))}))},cityClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(2,a),I("area",a.code).then((function(e){t.setData({areas:e,initialPage:2,towns:[]},(function(){t.setTab()}))}))},areaClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(3,a),I("town",a.code).then((function(e){t.setData({towns:e,initialPage:3},(function(){t.setTab()}))}))},townClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(4,a,(function(e){t.triggerEvent("close",e)}))},fillSelectedCode:function(e,t,a){var o=this,n=this.data.selected;(n=n.slice(0,e))[e-1]=t,this.setData({selected:n},(function(){o.setTab()})),a&&a(n)},onClose:function(){this.triggerEvent("close")}}})})),window.define("556",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryContacts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return I.axios.get(D.default.shopping+"/app/address/private/queryContacts.do?opType="+e)},a.recDeliveryForHide=function(e){var t=e.deliveryType,a=e.deliverRegionCode,o=e.postalCode,i=e.provinceCode,r=e.provinceName,s=e.cityCode,c=e.cityName,d=e.districtCode,u=e.districtName,l=e.townCode,p=e.townName,f=e.receiverName,h=e.receiverMobile,g=e.detailAddress,m=e.aId,v=e.addrTag,y=e.selfTakeShopCode,w=e.selfPickupCode,b=e.cart2No,C=Object.assign({deliveryType:t,deliverRegionCode:a,postalCode:o,provinceCode:i,provinceName:r,cityCode:s,cityName:c,districtCode:d,districtName:u,townCode:l,townName:p,receiverName:f,receiverMobile:h,detailAddress:g,aId:m,addrTag:v,selfTakeShopCode:y,selfPickupCode:w,cart2No:b},{terminalVersion:x.OPERATION_TERMINAL,operationChannel:x.OPERATION_CHANNEL,publishDate:x.PUBLISH_DATE,aId:e.addressID,showGift:1,pickupType:"01"==e.deliveryType?"":"6"==e.selfPickupType?"02":"01",deliverRegionCode:l,addrTag:""==v?"clear":v}),S={aId:e.addressID,provinceCode:i,provinceName:r,cityCode:s,cityName:c,districtCode:d,districtName:u,townCode:l,townName:p,detailAddress:g};if("01"==t)try{n.setStorageSync("userSelectedLocation",S)}catch(e){}return I.axios.post(D.default.shopping+"/app/cart2/private/recDeliveryForHide.do",C).then((function(e){var t=e.cmmdtyInfos.filter((function(e){var t=e.cmmdtyPrice,a=e.earlyPrice;return t&&a&&t!=a}));return t.length?Promise.reject({code:"jgbd",msg:"很抱歉，您订单中存在的商品价格发生变动，请问您是否需要按原价购买？",data:t}):C}))},a.modifyContact=function(e){var t=e.opType,a=e.addressID,o=void 0===a?"":a,n=e.cityCode,i=e.cityName,r=e.defaultAddress,s=e.detailAddress,c=e.districtCode,d=e.districtName,u=e.idNumber,l=void 0===u?"":u,p=e.pickupAddress,f=e.postalCode,h=e.provinceCode,g=e.provinceName,m=e.receiverBakMobile,v=void 0===m?"":m,y=e.receiverMobile,w=e.receiverName,b=e.townCode,C=(e.jurstCode,e.townName),S=e.addrTag,T=e.selfPickupCode,P=e.selfPickupType,x=void 0===P?"":P,_=e.selfTakeShopCode,k=b;return S=S||("1"==t?"":"clear"),I.axios.post(D.default.shopping+"/app/address/private/modifyContact.do",{opType:t,addressID:o,cityCode:n,cityName:i,defaultAddress:r,deliveryRegionCode:k,detailAddress:s,districtCode:c,districtName:d,idNumber:l,pickupAddress:p,postalCode:f,provinceCode:h,provinceName:g,receiverBakMobile:v,receiverMobile:y,receiverName:w,townCode:b,townName:C,addrTag:S,selfPickupCode:T,selfPickupType:x,selfTakeShopCode:_}).then((function(e){var t=e.address,a=e.errorCode,o=e.errorMessage;return a?Promise.reject({msg:o,code:a}):t}))},a.queryAddress=function(e,t){return I.axios.get(D.default.shopping+"/app/address/queryAddress_"+e+"_"+t+".html")},a.queryPickSites=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return I.axios.get(D.default.shopping+"/app/address/private/queryPickSites.do",{params:{provCode:e,cityCode:t,chkCode:a,isCPickUp:o}})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("558",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(559);Component({properties:{invoiceInfo:{type:Object,value:{},observer:function(){this.init()}},orderType:{type:Object,value:{}},hasDeliveryInfo:{type:Boolean,value:!0},cartHeadBasicInfo:{type:Object,value:{}}},data:{},methods:{init:function(){var e=this.properties,t=e.invoiceInfo,a=e.orderType,o=e.cartHeadBasicInfo,n=t.invoiceType,i=t.invoiceTitle,r=t.invoiceContent,s=o.needReviseInvoiceName,c=a.totalCount,d=a.normalCount,u=a.hwgCount,l=a.ybkCount,p=a.donationCount,f=a.ticketCount,h=a.serviceCount,g=null,m=!1,v="";if("02"==n&&""!=r&&(v="("+r+")"),console.log("--------------------\x3e>>>",a),d&&d+l==c||!c)g=n?("纸质"==T.InvoiceTypes[n].simple?"1"==s?"普票":"纸质":T.InvoiceTypes[n].simple)+v+" - "+i:"请选择",m=!0;else{var y="商品不提供发票";u?y="商品不提供发票":p?y="捐赠商品不提供发票":f?y="球票商品不提供发票":(h||l==c)&&(y="由服务商上门服务后开具"),g=y}console.log("+=========",g),this.setData({_html_:g,isUsed:m,hwgCount:u})},redirectToInvoice:function(){this.properties.hasDeliveryInfo?n.showToast({title:"请您先选择地址",icon:"none",duration:2e3}):n.navigateTo({url:"/pages/cart/cart2/Components/Invoice/page/index"})}}})})),window.define("559",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.InvoiceTypes=void 0,a.Model=function(){return{invoiceContent:"",invoiceProperty:"",invoiceSpecialFlag:"",invoiceTitle:"",invoiceType:"",accntBank:"",bankAccntNum:"",regAddr:"",regPhone:"",shopSpecialFlag:"",taxPayerAddr:"",taxPayerName:"",taxPayerNo:"",taxPayerPhone:""}},a.queryMemberVATInfo=function(){return D.axios.get(P.default.shopping+"/app/cart2/private/queryMemberVATInfo.do")},a.queryInvoiceTitle=function(e){var t=e.queryEmailFalg;return D.axios.get(P.default.shopping+"/app/cart2/private/queryInvoiceTitle.do",{params:{queryEmailFalg:t}})},a.updateInvoiceTitle=function(e){var t=e.ID,a=e.operationType,o=e.invoiceTitle,n=e.taxPayerNo,i=e.isDefault;return D.axios.post(P.default.shopping+"/app/cart2/private/updateInvoiceTitle.do",{ID:t,operationType:a,invoiceTitle:o,taxPayerNo:n,isDefault:i}).then((function(e){return"Y"==e.invoiceHeadInfo.isSuccess?e:Promise.reject({msg:"常用发票修改失败"})}))},a.updateVATQualificationInfo=function(e){var t=e.regPhone,a=e.regAddr,o=e.consigneeName,n=e.certNo,i=e.orgPartyName,r=e.bankName,s=e.bankDepositAcnt,c=(e.cntctMobileNum,e.consigneeMobileNum),d=e.state,u=e.stateCode,l=e.city,p=e.cityCode,f=e.town,h=e.townCode,g=e.street,m=e.streetCode,v=e.address;return D.axios.post(P.default.shopping+"/app/cart2/private/updateVATQualificationInfo.do",{data:JSON.stringify({orgPartyName:i,certNo:n,orgAddr:a,orgTeleNum:t,bankName:r,bankDepositAcnt:s,cntctPartyName:o,cntctMobileNum:c,state:d,stateCode:u,city:l,cityCode:p,town:f,townCode:h,street:g,streetCode:m,address:v})})},a.recInvoiceInfo=function(e,t,a){var o=e.invoiceType,n=e.invoiceTitle,i=e.taxPayerNo,r=e.invoiceContent,s=e.invoiceSpecialFlag,c=e._taxPayerEmail_,d=void 0,u="01"==o;u?(n=t.orgPartyName,d=[t.state,t.city,t.street,t.town,t.address].join(""),i=t.certNo,r=""):i||(r="02"==o?"明细":"");return D.axios.post(P.default.shopping+"/app/cart2/private/recInvoiceInfo.do",{invoiceType:o,invoiceTitle:n,invoiceContent:r,taxPayerNo:i,regAddr:u?t.regAddr:"",regPhone:u?t.regPhone:"",accntBank:u?t.bankName:"",bankAccntNum:u?t.bankDepositAcnt:"",taxPayerAddr:u?d:"",taxPayerName:u?t.consigneeName:"",taxPayerPhone:u?t.consigneeMobileNum:"",invoiceSpecialFlag:s,cart2No:a,taxPayerEmail:c})},a.saveInvoiceEmail=function(e){return D.axios.post(P.default.shopping+"/app/cart2/private/saveInvoiceEmail.do",{taxPayerEmail:e})},a.autoCompleteInvoice=function(e){var t=e.param,a=e.type;return D.axios.post(P.default.shopping+"/autoCompleteInvoice.do",{param:t,type:a}).then((function(e){var t=e.creditNo,a=e.entName,o=e.responseCode,n=e.responseMsg,i=e.isSuccess;return"00000"==o&&t&&a?e:Promise.reject({msg:n,isSuccess:i})}))};var T,I=e(245),P=(T=I)&&T.__esModule?T:{default:T},D=e(247);a.InvoiceTypes={"02":{value:"02",name:"纸质普通发票",simple:"纸质",sa:"772002002"},"04":{value:"04",name:"电子普通发票",simple:"电子",sa:"772002006"},"01":{value:"01",name:"增值税专用发票",simple:"增值税发票",sa:"772002003"},"05":{value:"05",name:"不开发票",simple:"不开发票",sa:"772002001"},"03":{value:"03",name:"纸质电子发票",simple:"纸质电子发票"},"00":{value:"00",name:"无发票",simple:"无发票"},"02-1":{value:"02-1",name:"纸质普通发票",simple:"纸质"},"02-2":{value:"02-2",name:"纸质普通发票(单独邮寄)",simple:"纸质(单独邮寄)"}}})),window.define("561",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77).saSendLog;Component({options:{multipleSlots:!0},properties:{title:{type:String,value:"温馨提示"},customStyle:String,hasIcon:{type:Boolean,value:!0},modid:String,eleid:String},data:{show:!1},methods:{autoclick:function(e){T("click",{event:e})},onOpen:function(){var e=this;this.setData({show:!0},(function(){T("autoexpo",e)}))},onConfirm:function(){this.setData({show:!1})}}})})),window.define("563",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77).saSendLog;Component({properties:{cmmdtyInfoItems:{type:Object,value:[]},needMoveItems:{type:Object,value:[]},noStockItems:{type:Object,value:[]}},data:{cmmdtyInfoItems:[],list:[],needMoveItems:[],uniqueItems:[]},ready:function(){var e=this.properties,t=e.noStockItems,a=e.needMoveItems,o=e.cmmdtyInfoItems,n=[];if(t&&t.length){var i=[];t.forEach((function(e){-1==i.indexOf(e)&&i.push(e)})),o.forEach((function(e){var t=e.mainCmmdtyHeadInfo,a=e.subCmmdtyItems;i.forEach((function(e){e==t.itemNo&&(a.length>0?a.forEach((function(e){var t=e.subCmmdtyHeadInfo;n.push({cmmdtyName:t.cmmdtyName,pictureUrl:t.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")})})):n.push({cmmdtyName:t.cmmdtyName,pictureUrl:t.pictureUrl.replace(/^\/\//,"https://").replace(/^http:\/\//,"https://")}))}))})),this.setData({list:n,cmmdtyInfoItems:o,needMoveItems:a,uniqueItems:i})}},methods:{onCancel:function(){T("manuclick",{modid:"70",eleid:"772070003"}),this.triggerEvent("onChange",{type:"cancel"})},onConfirm:function(){var e=this.data.needMoveItems;T("manuclick",{modid:"70",eleid:"772070002"}),this.triggerEvent("onChange",{type:"confirm",itemNos:e})},onChange:function(){T("manuclick",{modid:"70",eleid:"772070001"}),this.triggerEvent("onChange",{type:"change"})}}})})),window.define("565",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{value:{type:Boolean,value:!0},hwgTitle:{type:String,value:""}},data:{},ready:function(){console.log("bbbbbbbbbbbb",this.properties.value)},methods:{onShow:function(){n.setStorageSync("isFirstHWG",!0),n.navigateTo({url:"/pages/webView/index?webViewSrc=https://cuxiao.m.suning.com/scms/kjfxgzs.html"})},onChange:function(e){n.setStorageSync("isFirstHWG",!0),this.triggerEvent("onChange",e.detail.value||e.detail.checked)}}})})),window.define("567",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(556),I=e(16);function P(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}var D=e(77).saSendLog;Component({properties:{deliveryInfo:{type:Object,value:{},observer:function(e,t){this.initialize()}},cart2No:{type:String,value:""},cartHeadBasicInfo:{type:Object,value:{}},supportZt:{type:Boolean,value:!0},containsCShop:{type:Boolean,value:!0},cmmdtyInfoItems:{type:Array,value:[]}},data:{target:null,tip:"",message:"",hasSavedInfo:"",addressID:"",recDeliveryLimit:20,pickUpLimit:5,redirectTo:"psEdit",show:!1,NoAddressTip:"",confirmText:""},methods:{initialize:function(){var e=this,t=this.properties,a=t.deliveryInfo,o=t.cartHeadBasicInfo,n=(o.transportFee,o.mobileEndFreeShippingCopy),i=(o.mobileEndFreeShippingCopydownSwitch,t.cart2No),r=t.cmmdtyInfoItems;console.log("_________________________",i),(0,T.queryContacts)().then((function(t){var o=a.addrNum,i=a.hasSavedInfo,r=(a.pickupAddress,a.deliveryType,a.recDeliveryLimit),s=a.pickUpLimit,c=(P(a,["addrNum","hasSavedInfo","pickupAddress","deliveryType","recDeliveryLimit","pickUpLimit"]),void 0);if("Y"==a.hasSavedInfo&&(c=a,e.setData({addressID:a.addrNum,target:c})),o){var d=t.filter((function(e){return e.addressID==o}));d.length&&((c=d[0]).deliveryType="0"==c.pickupAddress?"01":"02",e.setData({addressID:d[0].addressID,target:c}))}var u=[],l=[];if(t.forEach((function(e){var t=e.pickupAddress,a=P(e,["pickupAddress"]);1==t?u.push(a):l.push(a)})),e.setData({hasSavedInfo:i,recDeliveryLimit:r,pickUpLimit:s}),!c){var p=void 0,f=void 0,h=void 0,g=void 0,m=e.properties.supportZt,v=n;m||(l.length?(f="请选择收货地址",p="list"):(f="您的收货地址为空，点此添加收货地址",p="psEdit")),m&&(l.length||u.length?(f="请选择收货地址",p="list"):(f="您的收货地址为空，点此添加收货地址",p="psEdit")),v=m?v:"",l.length||u.length?(h="去选择",g="您还未选择收货地址，快去选择一个吧"):(h="去新增",g="您还没有收货地址，快去新增一个吧"),I._snBusError.bizExcp({error_code:"ccf-gwc2-2dzwk"}),D("autoexpo",e),e.setData({message:f,tip:v,redirectTo:p,show:!0,NoAddressTip:g,confirmText:h})}})).catch((function(e){console.log("err",e)})),this.setData({cmmdtyInfoItem:r[0]})},toAddHandler:function(){"list"==this.data.redirectTo?this.toHandler():this.toPsEdit()},toHandler:function(){var e=this.data,t=e.addressID,a=e.recDeliveryLimit,o=e.pickUpLimit,i=this.properties,r=i.supportZt,s=i.containsCShop,c=i.cart2No,d=i.cartHeadBasicInfo.miniCartImportAddressFlag;n.navigateTo({url:"../_Components/Delivery/list/list?addressID="+t+"&SupportZt="+r+"&containsCShop="+s+"&recDeliveryLimit="+a+"&pickUpLimit="+o+"&cart2No="+c+"&miniCartImportAddressFlag="+d})},toPsEdit:function(){var e=this.properties,t=e.cart2No,a=e.cartHeadBasicInfo.miniCartImportAddressFlag;n.navigateTo({url:"../_Components/Delivery/psEdit/psEdit?cart2No="+t+"&miniCartImportAddressFlag="+a})},onClose:function(){var e=this.data.confirmText;D("manuclick","去选择"==e?{modid:"38",eleid:"772038001"}:{modid:"38",eleid:"772038003"}),this.setData({show:!1})},onConfirm:function(){"去选择"==this.data.confirmText?(D("manuclick",{modid:"38",eleid:"772038002"}),this.toHandler()):(D("manuclick",{modid:"38",eleid:"772038004"}),this.toPsEdit()),this.setData({show:!1})}}})})),window.define("569",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(570),P=e(571),D=(T=P)&&T.__esModule?T:{default:T};Component({properties:{overseaCertInfoVO:{type:Object,value:{},observer:function(e,t){this.setData({_partyName:e.partyName,_certNo:e.certNo})}}},data:{show:!1,_partyName:"",_certNo:""},methods:{onOpen:function(){this.setData({show:!0})},onClose:function(){this.setData({show:!1})},onUpdate:function(e){var t=e.currentTarget.dataset.name,a=e.detail.value;this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},""+t,a))},onConfirm:function(){var e=this,t=this.data,a=t._partyName,o=t._certNo,i=this.properties.overseaCertInfoVO,r=i.overseaNum,s=i.certValidStat,c=i.partyName,d=i.certNo;a&&o&&a==c&&o==d?this.setData({show:!1}):[{fn:D.default.Required("请填写有效的姓名！"),value:a},{fn:D.default.Illegal("姓名",{min:2,max:11}),value:a},{fn:D.default.Required("请填写有效的身份证！"),value:o},{fn:D.default.Certificate(d),value:o}].reduce((function(e,t){return e.then((function(){return new Promise((function(e,a){var o=t.fn(t.value);o.succ?e():a(o)}))}))}),Promise.resolve()).then((function(){return(0,I.setOverseaCertInfo)({partyName:a,certNo:o,overseaNum:r},"1"==s?2:1).then((function(t){e.setData({show:!1}),e.triggerEvent("oversea",t.data)}))})).catch((function(e){return n.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("570",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.setOverseaCertInfo=function(e,t){var a=e.partyName,o=e.certNo,n=e.overseaNum;return I.axios.post(D.default.shopping+"/app/v2/cart2/private/setOverseaCertInfo.do",{partyName:a,certNo:(0,I.encryption)(o),overseaNum:n,optType:t,publishDate:x.PUBLISH_DATE})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("571",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={Required:function(e){return function(t){return t?{succ:!0}:{succ:!1,msg:e}}},Illegal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];return function(o){if(o){if(a&&o==a)return{succ:!0};if(t.max)if(t.min=t.min||0,!new RegExp("^.{"+t.min+","+t.max+"}$").test(o))return{succ:!1,msg:e+"应为"+t.min+"-"+t.max+"个字符，请重新输入"};if(!/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(o))return{succ:!1,msg:e+"中含有非法字符"}}return{succ:!0}}},Mobile:function(e){return function(t){return t&&!/^1\d{10}$/.test(t)&&t!=e?{succ:!1,msg:"手机号码必须是以1开头的11位数字"}:{succ:!0}}},Certificate:function(e){return function(t){return t&&!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)&&t!=e?{succ:!1,msg:"请填写有效的身份证号"}:{succ:!0}}},Email:function(e){return function(t){return t&&!/^[a-zA-Z0-9|\_|\-\.]+@([a-zA-Z0-9|\-]+\.)+[a-zA-Z0-9]{2,6}$/.test(t)&&t!=e?{succ:!1,msg:"请输入正确的邮箱地址"}:{succ:!0}}}}})),window.define("573",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";e(247);var T=e(556),I=function(e,t){return"prov"==e||t?(0,T.queryAddress)(t,e).then((function(e){return e})).catch((function(){return[]})):[]};Component({properties:{show:{type:Boolean,value:!1},provinceCode:String,provinceName:String,cityName:String,cityCode:String,districtCode:String,districtName:String,townCode:String,townName:String,SupportZt:String,containsCShop:String},data:{provinces:[],citys:[],areas:[],points:[],selected:[],initialPage:0,tabs:[{title:"省"},{title:"市"},{title:"区"},{title:"自提点"}]},ready:function(){var e=this,t=this.properties,a=t.provinceCode,o=(t.provinceName,t.cityName,t.cityCode),n=t.districtCode,i=(t.districtName,t.townCode),r=(t.townName,t.SupportZt),s=t.containsCShop;console.log(this.properties),I("prov",0).then((function(e){var t={provinces:e,selected:[]},o=e[0];return e.filter((function(e){return e.code==a})).forEach((function(e){o=e})),t.selected.push(o),I("city",o.code).then((function(e){return t.citys=e,t}))})).then((function(e){var t=e.citys,a=t[0];return t.filter((function(e){return e.code==o})).forEach((function(e){a=e})),e.selected.push(a),I("area",a.code).then((function(t){return e.areas=t,e}))})).then((function(e){var t=e.areas,a=t[0];return t.filter((function(e){return e.code==n})).forEach((function(e){a=e})),e.selected.push(a),(0,T.queryPickSites)(e.selected[0].code,e.selected[1].code,a.code,"true"==r&&"true"==s?"1":"0").then((function(t){return e.points=t,e}))})).then((function(e){var t=e.points,a=t[0];return t.filter((function(e){return e.code==i})).forEach((function(e){a=e})),e.selected.push(a),e})).then((function(t){e.setData(Object.assign({},t,{initialPage:3}),(function(){e.setTab()}))}))},methods:{setTab:function(){var e=this.data,t=e.selected,a=e.tabs;t.length&&(a=a.map((function(e,a){return{title:t[a]?t[a].name:"请选择"}}))),this.setData({tabs:a})},onTabClickHandler:function(e){var t=this,a=e.currentTarget.dataset.index,o=this.data,n=o.provinces,i=o.citys,r=o.areas,s=o.points;console.log(n,i,r,s);var c=[n,i,r,s];c[a]&&c[a].length&&this.setData({initialPage:a},(function(){t.setTab()}))},provinceClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(1,a),I("city",a.code).then((function(e){t.setData({citys:e,initialPage:1,areas:[],points:[]},(function(){t.setTab()}))}))},cityClickHandler:function(e){var t=this,a=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(2,a),I("area",a.code).then((function(e){t.setData({areas:e,initialPage:2,points:[]},(function(){t.setTab()}))}))},areaClickHandler:function(e){var t=this,a=this.data.selected,o=JSON.parse(e.currentTarget.dataset.item);this.fillSelectedCode(3,o),(0,T.queryPickSites)(a[0].code,a[1].code,o.code).then((function(e){t.setData({points:e,initialPage:3})}))},townClickHandler:function(e){var t=this,a=(this.data.selected,JSON.parse(e.currentTarget.dataset.item));this.fillSelectedCode(4,a,(function(e){t.triggerEvent("close",e)}))},fillSelectedCode:function(e,t,a){var o=this,n=this.data.selected;(n=n.slice(0,e))[e-1]=t,this.setData({selected:n},(function(){e<4&&o.setTab()})),a&&a(n)},onClose:function(){this.triggerEvent("close")}}})})),window.define("575",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(261);Component({properties:{cart2No:{type:String,value:""}},data:{messageCode:"",userBindPhone:"",isInit:!1,isTime:!1,timeCount:60,btnText:"获取验证码",show:!1,confirmText:"确定",placeholder:"请输入短信验证码"},ready:function(){var e=this,t=void 0;(0,I.queryUserBindPhone)().then((function(a){var o=a.userBindPhone;a.userBindFlag;t=o?"确定":"去绑定",e.setData({userBindPhone:o,isInit:!0,show:!0,confirmText:t})})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},methods:{getMessageCode:function(e){this.setData({messageCode:e.detail.value})},deletePlaceholder:function(){this.setData({placeholder:""})},addPlaceholder:function(){this.setData({placeholder:"请输入短信验证码"})},onClose:function(){this.triggerEvent("close")},onConfirm:function(){var e=this.data,t=e.messageCode,a=e.userBindPhone;console.log(a),a?t?this.triggerEvent("success",t):i.showToast({title:"请输入验证码",icon:"none",duration:2e3}):this.triggerEvent("toBind")},sendMessage:function(){var e=this,a=this.properties.cart2No,o=this.data.timeCount,n=function a(){o>0?(o--,e.setData({timeCount:o},(function(){t(a,1e3)}))):e.setData({timeCount:60,isTime:!1,btnText:"重新获取"})};(0,I.sendVerificationCode)({cart2No:a}).then((function(t){(t=t||{}).errorInfo?"000"==t.errorInfo.errorCode?(i.showToast({title:"验证码已发送",icon:"none",duration:2e3}),e.setData({isTime:!0},n)):i.showToast({title:t.errorInfo.errorDesc,icon:"none",duration:2e3}):i.showToast({title:"获取失败",icon:"none",duration:2e3})})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("577",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{},data:{visible:!1,screenHeight:n.getSystemInfoSync().screenHeight,arrow_height:"",text1_height:"",view1_height:"",text2_height:"",view2_height:"",iknow_height:"",key:""},ready:function(){var e=this.data.screenHeight;this.setData({arrow_height:.1409*e,text1_height:.1004*e,view1_height:.3538*e,text2_height:.1004*e,view2_height:.3838*e,iknow_height:.1199*e});var t=this;n.getStorage({key:"homeguide",success:function(e){console.log(e.data)},fail:function(e){console.log(e),n.setStorage({key:"homeguide",data:"首页引导已被调用",success:function(e){console.log(e),t.setData({visible:!0})}})}})},methods:{close:function(e){this.setData({visible:!1})}}})})),window.define("578",(function(e,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,I){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=M(e(8)),x=e(20),_=M(e(22)),k=e(25),L=(e(125),e(77)),N=e(61),E=e(16),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(e(39)),A=M(e(579)),R=e(581);function M(e){return e&&e.__esModule?e:{default:e}}var U=s();Page({data:{saPgnm:R.index.saPgnm,pageid:R.index.pageId,saPvId:"xcx",isDacu:!1,cmsData:[],cityCode:"",host:{img:D.default.img,baidurecImg:D.default.baidurecImg},palamLists:[],pingouList:[],haodianList:[],guessLikeList:[],promiseList:[],guessFail:!1,hdLoadFail:!1,zsqLoadFail:!1,countDown:{text:"距结束",showTime:!0,isShowWelcome:!0,gbEnddate:"",hour:"",minute:"",second:""},isShowBaiduYindao:!1,isShowXuanFu:!0,isShowNewDialog:!0,isShowDacuDialog:!0,isNew:!0,isNewFloor:!0,isDacuDialog:"",isNewPeopleDialog:"",dialogMessage:{newPeopleDialogImage:!1,daCuDialogImage:!1},flag:{newP:"",dacuDia:""},isOld:!1,isStudent:!1,topFloat:{},cmsguessData:[],cmsguessDataStore:[],specialFloor:{qgglFloor:!1,newFLoor:!1,schoolFloor:!1},isLoginFlag:!1,isFirst:!0,tjPdList:{phb:{sceneId:"6-64",errorCode:"sy-xcx-phb-2sjbz",errorDesc:"排行榜数据不足"},hh:{sceneId:"13-82",errorCode:"sy-xcx-hh-2sjbz",errorDesc:"好货数据不足"},qd:{sceneId:"13-83",errorCode:"sy-xcx-qd-2sjbz",errorDesc:"清单数据不足"},dnbg:{sceneId:"13-84",errorCode:"sy-xcx-dnbg-2sjbz",errorDesc:"电脑办公数据不足"},jw:{sceneId:"13-85",errorCode:"sy-xcx-jw-2sjbz",errorDesc:"苏宁极物数据不足"},jd:{sceneId:"13-86",errorCode:"sy-xcx-snjd-2sjbz",errorDesc:"苏宁家电数据不足"},shjd:{sceneId:"13-87",errorCode:"sy-xcx-shjd-2sjbz",errorDesc:"生活家电数据不足"},my:{sceneId:"13-88",errorCode:"sy-xcx-snbb-2sjbz",errorDesc:"苏宁宝宝数据不足"},tm:{sceneId:"13-81",errorCode:"sy-xcx-dnbg-2sjbz",errorDesc:"苏宁Outlets数据不足"}},collegeName:"",hdSnpmData:[],zsqSnpmData:[],pgSnpmData:[],guessSnpmData:[],homeguideKg:!1,tjLxData:[],cmsLxData:[],lxBannerLink:"",lxBannerLinkItem:"",lxBannerTjLink:"",cmsLxDescBg:{left:"",top:"",color:""},cmsLxImg:{left:"",top:""},lxCmsDataFlag:!1,cmsLxDataMd:{modid:"",eleid:""},tjLxDataMd:{modid:"",eleid:"",imgEvdl:"",textEvdl:""}},onLoad:function(e){var t=this;console.log("index-onLoad",e),e&&"object"===(void 0===e?"undefined":P(e))?this.params=Object.assign({},e):this.params={};var a=this;a.hideDialog(),a.xuanfuDialog(),a.queryUserGoods(),a.initPage().then((function(){(0,N.checkAuth)().then((function(){a.data.isLoginFlag=!0,a.isOld(),a.isStudent()})).catch((function(){a.dealDialogShow()})),a.initHaoDian(),a.initLxbanner(),a.initGuessLike(),t.setData({baseOptions:e}),r.canIUse("showFavoriteGuide")&&t.data.isShowBaiduYindao&&r.showFavoriteGuide({type:"bar",content:"一键添加到我的小程序",success:function(e){console.log("添加成功：",e)},fail:function(e){console.log("添加失败：",e)}})}))},onPullDownRefresh:function(){this.setData({palamLists:[],haodianList:[],guessLikeList:[],promiseList:[],tjLxData:[],lxCmsDataFlag:!1,guessFail:!1,hdLoadFail:!1,zsqLoadFail:!1,lockpage:!1}),this.onLoad()},formatNewPeopleCMSData:function(){var e=this,t=e.data.cmsData;t&&t.length&&t.forEach((function(t){t.hasOwnProperty("newPeopleDia_v2")&&(t.newPeopleDia_v2.tag&&t.newPeopleDia_v2.tag[0].picUrl&&(e.data.dialogMessage.newPeopleDialogImage=!0));t.hasOwnProperty("dialog_v2")&&(t.dialog_v2.tag&&t.dialog_v2.tag[0].picUrl&&(e.data.dialogMessage.daCuDialogImage=!0))}))},isStudent:function(){var e=this;(0,k.requestPromise)({url:D.default.school+"wap/relatedStudent/getCollageName/"+r.getStorageSync("custNo")+"-callback.do",dataType:"jsonp"}).then((function(t){try{var a=t;a&&a.source&&"1"==a.source&&(e.setData({isStudent:!0}),a.collegeName&&e.setData({collegeName:a.collegeName}))}catch(e){console.log(e)}}))},isOld:function(){var e=this,a=D.default.act+"/act-wap-web/tokenRed/gateway/mainPage.do";(0,k.requestPromise)({url:a}).then((function(a){try{a&&a.data&&a.data.status&&"0"==a.data.status?(e.setData({isOld:!0,isNewFloor:!1}),t((function(){e.dealDialogShow()}),0)):e.isNewPeople()}catch(t){e.isNewPeople()}})).catch((function(){e.isNewPeople()}))},isNewPeople:function(){var e=this,a=D.default.xinren+"/json/getQualificationData.do?callback=jsonp&channelType=9&deptIds=ALL";(0,k.requestPromise)({url:a}).then((function(a){try{var o=(0,_.default)(a),n=o.onlineNewmember;o.channelAndDeptNewmember;0==n?e.setData({isNew:!0}):e.setData({isNew:!1,isNewFloor:!1}),t((function(){e.dealDialogShow()}),0)}catch(e){console.log("9999")}}))},initPage:function(){var e=this,t=new Promise((function(t,a){e.initCMS().then((function(){t()}))}));return e.getSystemInfo(),t},initZSQ:function(){this.getZsqData()},getZsqData:function(){var e=this;(0,k.requestPromise)({url:D.default.rec+"/recommend-portal/dyBase.jsonp",dataType:"jsonp",data:{u:r.getStorageSync("custNo"),c:"",cityId:e.data.cityCode||"025",sceneIds:"13-80",count:"5",timelog:(new Date).getTime()}}).then((function(t){try{var a=t;if(a&&a.sugGoods&&a.sugGoods.length&&a.sugGoods[0].skus&&a.sugGoods[0].skus.length>2){var o=a.sugGoods[0].skus.slice(0,3),n=e.data.zsqSnpmData[0];o.forEach((function(e,t){n?(e.modid=n.templateFullId+""+n.modelFullId,e.eleid=t+1):(e.modid="",e.eleid=""),e.realSugGoodsCode=e.sugGoodsCode.replace(/\b(0+)/gi,""),e.picUrl="https://image.suning.cn/uimg/nmps/MBLSPZT/"+e.activityId+e.realSugGoodsCode+"picH_1_370x370.jpg",e.refPrice&&parseFloat(e.refPrice)>parseFloat(e.price)&&(e.priceDg=!0)})),e.setData({palamLists:o,zsqCurrentDesc:a.sugGoods[0].currentTime,zsqLoadFail:!1}),e.getSeverTime().then((function(t){e.timeLeft(t,a.sugGoods[0].nextTime,e,(function(){e.getZsqData()}))}))}else e.setData({zsqLoadFail:!0}),E._snBusError.bizExcp({bid:"sy",error_code:"sy-xcx-zsq-2sjbz",error_type:"2",error_detail:JSON.stringify({errorDesc:"掌上抢数据不足"}),member_id:r.getStorageSync("custNo"),region:e.data.cityCode||"025",type_name:"13-80"})}catch(t){console.log(t),e.setData({zsqLoadFail:!0}),E._snBusError.bizExcp({bid:"sy",error_code:"sy-xcx-zsq-2sjyc",error_detail:JSON.stringify({errorDesc:"掌上抢数据异常"}),error_type:"2",member_id:r.getStorageSync("custNo"),region:e.data.cityCode||"025",type_name:"13-80"})}}),(function(){e.setData({zsqLoadFail:!0}),E._snBusError.bizExcp({bid:"sy",error_code:"sy-xcx-zsq-2sjyc",error_detail:JSON.stringify({errorDesc:"掌上抢数据异常"}),error_type:"2",member_id:r.getStorageSync("custNo"),region:e.data.cityCode||"025",type_name:"13-80"})}))},getSeverTime:function(){return new Promise((function(e,t){(0,k.requestPromise)({url:D.default.fmDomain+"/api/ct.do",dataType:"json"}).then((function(t){var a=void 0;try{a=parseInt(t.currentTime),e(a)}catch(t){a=(new Date).getTime(),e(a)}}))}))},timeLeft:function(e,t,o,n){var i=e,r=parseInt(t),s=o.data.timer;function c(e){var t=e-i,a=parseInt(t/1e3),r=Math.floor(a/86400),c=Math.floor((a-24*r*60*60)/3600),d=Math.floor((a-24*r*60*60-3600*c)/60),u=Math.floor(a-24*r*60*60-3600*c-60*d);1==c.toString().length&&(c="0"+c),1==d.toString().length&&(d="0"+d),1==u.toString().length&&(u="0"+u),t<0?(n&&n(),clearInterval(s)):(o.setData({"countDown.hour":c,"countDown.minute":d,"countDown.second":u}),i+=1e3)}c(r),s&&clearInterval(s),s=a((function(){c(r)}),1e3),o.setData({timer:s})},goToZsq:function(e){(0,L.saSendLog)("click",{event:e});var t=e.currentTarget.dataset.list,a=(void 0===t?[]:t).slice(0,3).map((function(e,t){return t<1?"id="+e.promotionId:"id"+(t+1)+"="+e.promotionId})).join("&");console.log(a),r.navigateTo({url:"/packageC/pages/zsq/index?"+a})},getSystemInfo:function(){var e=this;r.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)}),"ios"!=t.platform&&"devtools"!=t.platform||e.setData({isIos:!0})}})},initCMS:function(){var e=this;return new Promise((function(t,a){(0,k.requestPromise)({method:"GET",url:D.default.cms+R.index.contentPath,dataType:"json"}).then((function(a){try{var o=a,n=e.formatCmsData(o);console.log("cmsdata",n),e.setData({cmsData:n},(function(){e.initFunction(),e.setData({cmsguessData:e.data.cmsguessDataStore},(function(){var t=[];e.data.cmsguessData.forEach((function(a,o){o==e.data.cmsguessData.length-1?(t.push(a),e.getCurrentShopPrice(t,e.data.cityCode||"025")):t.push(a)}))}))})),e.formatNewPeopleCMSData(),t(),r.stopPullDownRefresh()}catch(e){t(),console.log(e),r.stopPullDownRefresh()}}))}))},cmsDataGetTj:function(){if(Array.isArray(this.data.cmsData)){var e=this;e.data.cmsData.forEach((function(t,a){for(var o in t){var n=t[o];n&&n.tag&&n.tag.length&&n.tag.forEach((function(t,a){if(t.extMap&&t.extMap.pdbz&&e.data.tjPdList[t.extMap.pdbz]&&e.data.tjPdList[t.extMap.pdbz].sceneId){var o=new Promise((function(a,o){e.getTjData(t,t.extMap.pdbz,a,o)}));e.data.promiseList.push(o)}}))}})),e.data.promiseList.length&&e.promiseAll(e.data.promiseList).then((function(){e.setData({cmsData:e.data.cmsData})}))}},formatCmsData:function(e){var t=this;return e&&e.length&&e.forEach((function(e){if(e.hasOwnProperty("icon_v2_detail")&&e.hasOwnProperty("icon_v2_bg")&&e.icon_v2_bg.tag){var a=e.icon_v2_bg.tag[0].picUrl;e.icon_v2_detail.bgImage=a}if(e.hasOwnProperty("search1_text")){if(e.search1_text.tag&&e.search1_text.tag.length){var o=e.search1_text.tag[0];t.data.topFloat.searchMod=o.templateFullId+""+o.modelFullId,t.data.topFloat.searchele=o.sequence,t.data.topFloat.searchWord=o.elementName}if(e.right1_url.tag&&e.right1_url.tag.length){var n=e.right1_url.tag[0];t.data.topFloat.rightMod=n.templateFullId+""+n.modelFullId,t.data.topFloat.rightele=n.sequence,t.data.topFloat.rightPic=n.picUrl,t.data.topFloat.rightLink=n.elementDesc}if(e.sys1_text&&e.sys1_text.tag&&e.sys1_text.tag.length){var i=e.sys1_text.tag[0];t.data.topFloat.sysMod=i.templateFullId+""+i.modelFullId,t.data.topFloat.sysele=i.sequence}t.setData({topFloat:t.data.topFloat})}if(e.hasOwnProperty("channel_v2")&&e.channel_v2.tag&&(e.channel_v2.tag.length<3?e.channel_v2.tag.length=0:e.channel_v2.tag.length<6?e.channel_v2.tag.length=3:e.channel_v2.tag.length<9&&(e.channel_v2.tag.length=6)),e.hasOwnProperty("pageBg_v2")&&e.pageBg_v2.tag){var r=e.pageBg_v2.tag[0].elementName;r&&t.setData({dacuColor:r})}if(e.hasOwnProperty("allCountry_v3")&&e.allCountry_v3.tag&&t.setData({"specialFloor.qgglFloor":!0}),(e.hasOwnProperty("school_img")&&e.school_img.tag||e.hasOwnProperty("school_image")&&e.school_image.tag)&&t.setData({"specialFloor.schoolFloor":!0}),(e.hasOwnProperty("newPeople_v2")&&e.newPeople_v2.tag||e.hasOwnProperty("newFloor_v3")&&e.newFloor_v3.tag||e.hasOwnProperty("newPeopleDia_v2")&&e.newPeopleDia_v2.tag)&&t.setData({"specialFloor.newFLoor":!0}),e.hasOwnProperty("guess_pro")&&e.guess_pro.tag&&e.guess_pro.tag.length&&(e.guess_pro.tag.forEach((function(e,a){e.sugGoodsCode=t.formatProductnumber(e.partnumber)})),t.data.cmsguessDataStore=e.guess_pro.tag,t.data.guessSnpmData=e.guess_pro.tag),e.hasOwnProperty("hd_img")&&e.hd_img.tag&&e.hd_img.tag.length&&(t.data.hdSnpmData=e.hd_img.tag),e.hasOwnProperty("zsq_snpm_list")&&e.zsq_snpm_list.tag&&e.zsq_snpm_list.tag.length&&(t.data.zsqSnpmData=e.zsq_snpm_list.tag),e.hasOwnProperty("pg_snpm_list")&&e.pg_snpm_list.tag&&e.pg_snpm_list.tag.length&&(t.data.pgSnpmData=e.pg_snpm_list.tag),e.hasOwnProperty("homeguide_kg")&&e.homeguide_kg.tag&&e.homeguide_kg.tag.length&&t.setData({homeguideKg:!0}),e.hasOwnProperty("lxbanner_bg")){if(e.lxbanner_bg.tag&&e.lxbanner_bg.tag.length&&e.lxbanner_bg.tag[0].productSpecialFlag){var s=e.lxbanner_bg.tag[0].productSpecialFlag;s.indexOf(",")>-1&&t.setData({lxBannerLink:e.lxbanner_bg.tag[0].elementDesc,"cmsLxImg.left":s.split(",")[0],"cmsLxImg.top":s.split(",")[1]})}if(e.lx_image.tag&&e.lx_image.tag.length&&t.setData({cmsLxData:e.lx_image.tag}),e.lxdesc_bg.tag&&e.lxdesc_bg.tag.length&&e.lxdesc_bg.tag[0].productSpecialFlag){var c=e.lxdesc_bg.tag[0].productSpecialFlag;c.indexOf(",")>-1&&t.setData({"cmsLxDescBg.left":c.split(",")[0],"cmsLxDescBg.top":c.split(",")[1],"cmsLxDescBg.color":e.lxdesc_bg.tag[0].color})}}e.hasOwnProperty("zdy_image")&&e.zdy_image.tag&&e.zdy_image.tag.length&&(e.zdy_image.tag[0].width=Math.ceil(750/e.zdy_image.tag.length),e.zdy_image.tag[0].width=e.zdy_image.tag[0].width%2==0?e.zdy_image.tag[0].width:e.zdy_image.tag[0].width+1),e.hasOwnProperty("baiduguide")&&e.baiduguide.modelFullCode&&t.setData({isShowBaiduYindao:!0})})),e},formatProductnumber:function(e){var t="";if(e.length<18)for(var a=18-e.length,o=0;o<a;o++)t+="0";return t+e},dealDialogShow:function(){var e=this.data.isNew,t=this.data.dialogMessage.newPeopleDialogImage,a=this.data.dialogMessage.daCuDialogImage;1==e&&1==t&&this.setData({"flag.newP":!0,"flag.dacuDia":!1}),1==e&&0==t&&1==a&&this.setData({"flag.newP":!1,"flag.dacuDia":!0}),1==e&&0==t&&0==a&&this.setData({"flag.newP":!1,"flag.dacuDia":!1}),0==e&&1==a&&this.setData({"flag.newP":!1,"flag.dacuDia":!0}),0==e&&0==a&&this.setData({"flag.newP":!1,"flag.dacuDia":!1})},initLePinGou:function(){this.getPingouList()},goTobargin:function(){r.navigateToSmartProgram({appId:"wxe964260af9330942",path:"/packageA/pages/bargainGroup/bargainGroup",success:function(e){console.log("success")},fail:function(e){console.log("fail")}})},goToLottery:function(){r.navigateToSmartProgram({appId:"wxe964260af9330942",path:"/packageA/pages/lotteryGroup/lotteryGroup",success:function(e){console.log("success")},fail:function(e){console.log("fail")}})},goToPinGou:function(){r.navigateToSmartProgram({appId:"wxe964260af9330942",success:function(e){console.log("success")},fail:function(e){console.log(e)}})},goToPinGouDetail:function(e){var t=e.currentTarget.dataset.id;(0,L.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),r.navigateToSmartProgram({appId:"wxe964260af9330942",path:"/pages/fourth/fourth/fourth?actId="+t,success:function(e){console.log("success")},fail:function(e){console.log("fail")}})},initHaoDian:function(){this.getHaoDianList()},initGuessLike:function(){this.guessLike()},initFunction:function(){var e=this;(0,x.getCityCode)().then((function(t){e.data.cityCode=t.cityLESId||"025",e.cmsDataGetTj()})).catch((function(){e.data.cityCode="025",e.cmsDataGetTj()}))},xuanfuDialog:function(){r.getStorageSync("endTime2");var e=(new Date).getTime();r.getStorageSync("endTime2")?e-parseInt(r.getStorageSync("endTime2"))>864e5?this.setData({isShowXuanFu:!0}):this.setData({isShowXuanFu:!1}):this.setData({isShowXuanFu:!0})},hideXuanFu:function(){this.setData({isShowXuanFu:!1}),r.setStorageSync("endTime2",(new Date).getTime())},hideDialog:function(){var e=(new Date).getTime();r.getStorageSync("endTime")?e-parseInt(r.getStorageSync("endTime"))>864e5?this.setData({isShowNewDialog:!0}):this.setData({isShowNewDialog:!1}):this.setData({isShowNewDialog:!0});r.getStorageSync("endTime3")?e-parseInt(r.getStorageSync("endTime3"))>864e5?this.setData({isShowDacuDialog:!0}):this.setData({isShowDacuDialog:!1}):this.setData({isShowDacuDialog:!0})},newBaseJump:function(e){this.hideNewDialog(),this.baseJump(e)},dacuBaseJump:function(e){this.hideDacuDialog(),this.baseJump(e)},hideNewDialog:function(){this.setData({isShowNewDialog:!1}),r.setStorageSync("endTime",(new Date).getTime())},hideDacuDialog:function(){this.setData({isShowDacuDialog:!1}),r.setStorageSync("endTime3",(new Date).getTime())},jump2Search:function(e){(0,L.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),r.navigateTo({url:"/pages/search/searchResult/result"})},preventTouchMove:function(e){},baseJump:function(e){var t=e.currentTarget.dataset.jumpUrl||e.currentTarget.dataset.jumpurl;if(console.log("baseJump tail",t,e),"scan"==t)return(0,L.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),void this.jump2Fourth();(0,L.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),(0,k.baseJump)(t)},viewMore:function(e){(0,L.saSendLog)("manuclick",{pageid:R.index.pageId,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid}),r.navigateTo({url:"/pages/hotrec/hotrecResult?hotrecid="+e.currentTarget.dataset.hotrecid})},copyObj:function(e){if("object"!==(void 0===e?"undefined":P(e)))return e;if(e instanceof Array)var t=[];else t={};for(var a in e)"object"!==P(e[a])?t[a]=e[a]:t[a]=this.copyObj(e[a]);return t},queryUserGoods:function(){console.log("aaaaaaaaaaaaaaa 1"),this.queryRecGoods()},queryRecGoods:function(){console.log("aaaaaaaaaaaaaaa 2");var e=r.getStorageSync("cookieObj").custno||"",t="",a="",o=this;(0,x.getCityCodeByIp)().then((function(n){t=n.cityLESId||"025",a=D.default.rec+"/recommend-portal/sndatawash.jsonp?u="+e+"&c=&sceneIds=1-98&cityId="+t+"&count=10";var i=o.getData("baiduRecGoods");o.getData("baiduRec");r.request({url:a,method:"POST",dataType:"json",data:i,header:{"content-type":"application/json"},success:function(e){if(e.data){var t=o.copyObj(e.data).sugGoods[0].skus;if(t.length>0){console.log("aaaaaaaaaaaaaaa 2",t);for(var a=[],n=0,i=t.length;n<i;n++)t[n].goodsType=o.num2type(Number(t[n].productType)),t[n].eleid=n+1,t[n].price.length<9&&t[n].refPrice.length<9&&a.push(t[n]);console.log("aaaaaaaaaaaaaaa 3",a),o.setData({snRecGoods:a.slice(0,10)}),r.setStorageSync("recGoods",a)}}},fail:function(e){o.setData({snRecGoods:[]}),r.setStorageSync("recGoods",[])}})}))},num2type:function(e){var t="";switch(e){case 1:t="自营";break;case 2:t="";break;case 3:case 4:case 5:t="自营";break;case 6:t="海外购";break;case 7:t="自营"}return t},onShow:function(){var e=this;if((0,k.saSendPageViewLog)(),this.params&&"target"in this.params&&this.params.target&&"string"==typeof this.params.target){var a=this.params.target;return this.params.target=null,void(0,k.baseJump)(a)}var o=this;O.checkLogin().then((function(t){o.data.isLoginFlag=t.app,U.globalData.isLogin=!!t.app&&t.app,o.data.isFirst||(o.setData({"flag.newP":"","flag.dacuDia":"",isOld:!1,isNew:!0,isNewFloor:!0,isStudent:!1,isShowNewDialog:!0,isShowDacuDialog:!0,palamLists:[],haodianList:[],guessLikeList:[],promiseList:[],lxCmsDataFlag:!1,guessFail:!1,hdLoadFail:!1,zsqLoadFail:!1}),o.onLoad()),o.data.isFirst=!0;var a=r.createAnimation({duration:100,timingFunction:"ease-in-out"});e.animation=a})),t((function(){r.setNavigationBarColor({backgroundColor:"#ffffff",frontColor:"#000000"})}),2e3)},onReady:function(){},getTjData:function(e,t,a,o){var n=this,i="jw"==t?D.default.tuijian+"/recommend-portal/recommend/paramsBiz.jsonp":D.default.tuijian+"/recommend-portal/dyBase.jsonp",s={u:r.getStorageSync("custNo"),c:"",cityId:n.data.cityCode||"025",sceneIds:n.data.tjPdList[t].sceneId,count:"3"};"jw"!=t&&"qd"!=t||(s.num=2),(0,k.requestPromise)({url:i,dataType:"JSON",data:s}).then((function(o){try{var i=JSON.parse(o);if(i&&i.sugGoods&&i.sugGoods.length&&i.sugGoods[0].skus&&i.sugGoods[0].skus.length){"jw"!=t||i.sugGoods[0].skus[0].list&&0!=i.sugGoods[0].skus[0].list.length||a();var s=void 0;"jw"==t?s=i.sugGoods[0].skus[0].list:"qd"==t?((s=i.sugGoods[0].skus[0].gds)[0].contentId=i.sugGoods[0].skus[0].contentId,s[0].labelName=i.sugGoods[0].skus[0].title):s=i.sugGoods[0].skus;var c=s[0],d=c.pictureUrl,u=3==c.productType||5==c.productType?c.supplierCode:c.shopCode;c.picVersion?e.tjPicurl="https://image.suning.cn/uimg/b2c/qrqm/"+u+c.sugGoodsCode+".jpg?ver="+c.picVersion+"&format=200w_200h_4e":(e.tjPicurl=0==d.indexOf("http")?d:"https:"+d,e.tjPicurl=e.tjPicurl+"?format=200w_200h_4e");var l={productCode:c.sugGoodsCode||"",vendorId:c.vendorId||"",shopCode:c.shopCode||"",supplierCode:c.supplierCode||"",productType:c.productType||"",productName:encodeURIComponent(c.sugGoodsName)||"",handwork:c.handwork||"",contentId:c.contentId||"",promotionInfo:c.promotionInfo||"",price:c.price||"",picVersion:c.picVersion||"",pictureUrl:c.pictureUrl||"",conferenceCode:c.conferenceCode||"",categoryName:c.categoryName||"",labelCode:c.labelCode||"",labelName:c.labelName||""};if(1==e.extMap.sjjsd&&(e.linkU=e.elementDesc.split("=")[1],e.linkU=e.linkU+"?"+n.serialize(l),e.elementDesc="/pages/webView/index?webViewSrc="+encodeURIComponent(e.linkU)),e.evdl={eletp:"",recvalue:c.handwork},e.evdl1=JSON.stringify(e.evdl),e.evdl1={eletp:"",prdid:c.sugGoodsCode,shopid:c.vendorId,recvalue:c.handwork},e.evdl1=JSON.stringify(e.evdl1),"jw"!=t&&"qd"!=t&&s.length>1||"jw"==t&&i.sugGoods[0].skus[1]&&i.sugGoods[0].skus[1].list&&i.sugGoods[0].skus[1].list.length||"qd"==t&&i.sugGoods[0].skus[1]&&i.sugGoods[0].skus[1].gds&&i.sugGoods[0].skus[1].gds.length){var p=void 0;"jw"==t?p=i.sugGoods[0].skus[1].list[0]:"qd"==t?((p=i.sugGoods[0].skus[1].gds[0]).contentId=i.sugGoods[0].skus[1].contentId,p.labelName=i.sugGoods[0].skus[1].title):p=s[1];var f=p,h=p.pictureUrl,g=3==f.productType||5==f.productType?f.supplierCode:f.shopCode;f.picVersion?e.tjPicurl2="https://image.suning.cn/uimg/b2c/qrqm/"+g+f.sugGoodsCode+".jpg?ver="+f.picVersion+"&format=200w_200h_4e":(e.tjPicurl2=0==h.indexOf("http")?h:"https:"+h,e.tjPicurl2=e.tjPicurl2+"?format=200w_200h_4e"),e.evdl2={eletp:"",prdid:f.sugGoodsCode,shopid:f.vendorId,recvalue:f.handwork},e.evdl2=JSON.stringify(e.evdl2);var m={productCode2:f.sugGoodsCode||"",vendorId2:f.vendorId||"",shopCode2:f.shopCode||"",supplierCode2:f.supplierCode||"",productType2:f.productType||"",productName2:encodeURIComponent(f.sugGoodsName)||"",handwork2:f.handwork||"",contentId2:f.contentId||"",promotionInfo2:f.promotionInfo||"",price2:f.price||"",picVersion2:f.picVersion||"",pictureUrl2:f.pictureUrl||"",conferenceCode2:f.conferenceCode||"",categoryName2:f.categoryName||"",labelCode2:f.labelCode||"",labelName2:f.labelName||""};1==e.extMap.sjjsd&&(e.linkU=e.linkU+"&"+n.serialize(m),e.elementDesc="/pages/webView/index?webViewSrc="+encodeURIComponent(e.linkU)),e.isTwo=!0}a()}else a(),E._snBusError.bizExcp({bid:"sy",error_code:n.data.tjPdList[t].errorCode,error_detail:JSON.stringify({errorDesc:n.data.tjPdList[t].errorDesc}),error_type:"2",member_id:r.getStorageSync("custNo"),region:n.data.cityCode||"025",type_name:n.data.tjPdList[t].sceneId})}catch(e){a(),console.log(e)}}))},jump2Fourth:function(){r.scanCode({success:function(e){var t=e.result,a=encodeURI(t);if(console.log(a.indexOf("/"),"/////////"),a=a.substring(a.indexOf("/")),console.log(t,"resultCode"),console.log(a,"result"),/^\/pages\/webView\/index\?(.+)/i.test(a))(0,k.baseJump)(a);else{if(/^\/pages\/.*$/.test(a))return r.navigateTo({url:a}),!1;if(/^\/package\w*\/pages\/.*/.test(a))return r.navigateTo({url:a}),!1;var o=t.match(/\/[^/]+$/gi);if(null!=o){-1!=o.indexOf("/")&&(o=o[0].split("/")[1]);var n=D.default.code+o;(0,k.requestPromise)({url:n}).then((function(e){var t=e.match(/&adId=[0-9]+_[0-9]+/gi),a=void 0,o=void 0;null!=t&&-1!=(t=t[0]).indexOf("_")&&(a=t.split("_")[0],o=t.split("_")[1],-1!=a.indexOf("=")&&(a=t.split("_")[0].split("=")[1]),r.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&title="}))}))}}}})},jump2FourthPage:function(e){var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop;0==a&&(a="0000000000"),e.currentTarget.dataset.baidurec?(0,L.saSendLog)("manuclick",{pageid:R.index.pageId,modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:{eletp:"prd",prdid:e.currentTarget.dataset.prdid,shopid:e.currentTarget.dataset.shopid,recvalue:e.currentTarget.dataset.recvalue||"rec"}}):(0,L.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid,evdl:e.currentTarget.dataset.evdl}),r.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})},getPingouList:function(){var e=this;(0,k.requestPromise)({url:D.default.pingou+"/pgs/wx/pgs/channel/api/enrolls_11_1_2001_1_12.json",dataType:"JSON"}).then((function(t){try{var a=JSON.parse(t);e.data.pingouList=a.data.list;var o=e.data.pgSnpmData[0];e.data.pingouList.forEach((function(e,t){o?(e.modid=o.templateFullId+""+o.modelFullId,e.eleid=t+1):(e.modid="",e.eleid=""),e.imgUrl=D.default.img+"/uimg/b2c/qrqm/"+("0000000000"+e.venderCode).substr(-10)+e.productCode+".jpg?format=400w_400h_2e"})),e.setData({pingouList:e.data.pingouList})}catch(e){console.log(e)}}))},errImg_enrolls_1:function(e){var t=(0,k.goodImageUrl)(e.currentTarget.dataset.productcode,e.currentTarget.dataset.vendercode,"",e.currentTarget.dataset.vendercode,200),a={};a["pingouList["+e.target.dataset.errorimg+"].imgUrl"]=(0,k.protocol)(t),this.setData(a)},tjErrorPic:function(e){var t=e.target.dataset.errorimg,a=t+".tjPicurl2",o=t+".evdl",n={};n[t+".tjPicurl"]="",n[a]="",n[o]="",this.setData(n)},lxErrorPic:function(e){var t={};t[e.target.dataset.errorimg+".picUrl"]="",this.setData(t)},getHaoDianList:function(){var e=this;(0,k.requestPromise)({url:D.default.tuijian+"/recommend-portal/recommend/paramsBiz.jsonp",dataType:"JSON",data:{u:r.getStorageSync("custNo"),c:"",cityId:e.data.cityCode||"025",sceneIds:"13-31",count:4,mark:"A"}}).then((function(t){var a;if("string"==typeof t)try{a=JSON.parse(t)}catch(e){a=t}else a=t;console.log(a,"resData");var o=a.sugGoods[0].shops,n=!0,i=e.data.hdSnpmData[0];o&&o.length>3?(o.forEach((function(e,t){if(!(e&&e.skus&&e.skus.length>1))return n=!1,!1;0;var a=[];i?(e.modid=i.templateFullId+""+i.modelFullId,e.eleid=t+1):(e.modid="",e.eleid=""),e.skus.forEach((function(e,t){t<3&&a.push(e.sugGoodsCode),e.pictureUrl&&(e.pictureUrl=(0,k.protocol)(e.pictureUrl))}));var o=D.default.shopDomain+"/goodshop_"+e.themeCode+"_"+e.themeName+"_"+e.shopId+"_"+a.join(",")+".html";e.linkUrl="/pages/webView/index?webViewSrc="+encodeURIComponent(o)})),n?e.setData({haodianList:o,hdLoadFail:!1}):e.setData({hdLoadFail:!0})):e.setData({hdLoadFail:!0})}),(function(){e.setData({hdLoadFail:!0})}))},guessLike:function(){var e=this,t=this,a=D.default.rec+"/recommend-portal/dyBase.jsonp";(0,k.requestPromise)({url:a,dataType:"JSON",data:{c:"",cityId:t.data.cityCode||"025",u:r.getStorageSync("custNo"),count:"50",flag:"1",sceneIds:"13-30"}}).then((function(a){var o;if("string"==typeof a)try{o=JSON.parse(a)}catch(e){o=a}else o=a;var n=o.sugGoods[0].skus;if(n.length<2)t.setData({guessFail:!0});else{var i=t.data.guessSnpmData[0];n.forEach((function(e,t){i?(e.modid=i.templateFullId+""+i.modelFullId,e.eleid=t+1):(e.modid="",e.eleid=""),"1"!=e.productType&&"3"!=e.productType||(e.icon="自营"),"4"!=e.productType&&"5"!=e.productType||(e.icon="海外购自营"),"6"==e.productType&&(e.icon="海外购"),e.refPrice&&parseFloat(e.refPrice)>parseFloat(e.price)&&(e.priceDg=!0)})),n=n.filter((function(e){return"501"!=e.promotionType}));var r=void 0;r=e.data&&Array.isArray(e.data.cmsData)?e.data.cmsData.filter((function(e){return e.title_v2&&e.title_v2.tag&&n&&n.length<6&&1086023==e.title_v2.tag[0].templateFullId?"":e})):[],t.setData({guessLikeList:n,guessFail:!1,cmsData:r})}}),(function(){t.setData({guessFail:!0}),console.log(err)}))},initLxbanner:function(){var e=this,t=D.default.rec+"/recommend-portal/recommend/paramsBiz.jsonp";(0,k.requestPromise)({url:t,dataType:"JSON",data:{c:"",cityId:e.data.cityCode||"025",u:r.getStorageSync("custNo"),count:4,parameter:"P0002",sceneIds:"16-73"}}).then((function(t){try{if((t=JSON.parse(t))&&t.sugGoods&&t.sugGoods[0]&&t.sugGoods[0].skus&&t.sugGoods[0].skus.length>2){var a=t.sugGoods[0].skus,o=[];if(a.forEach((function(e,t){if(e.list&&e.list.length>0){var a=e.list[0];a.labelCode=e.labelCode,a.labelName=e.labelName,o.push(a)}})),o.length>2){(o=o.slice(0,3)).forEach((function(e,t){var a=e.pictureUrl,o=3==e.productType||5==e.productType?e.supplierCode:e.shopId;e.picVersion?e.picUrl="https://image.suning.cn/uimg/b2c/qrqm/"+o+e.sugGoodsCode+".jpg?ver="+e.picVersion+"&format=200w_200h_4e":(e.picUrl=0==a.indexOf("http")?a:"https:"+a,e.picUrl=e.picUrl+"?format=200w_200h_4e")})),e.setData({tjLxData:o});var n={productCode:o[0].sugGoodsCode||"",vendorId:o[0].vendorId||"",shopCode:o[0].shopId||"",productName:o[0].productName||"",supplierCode:o[0].supplierCode||"",productType:o[0].productType||"",handwork:o[0].handwork||"",promotionId:o[0].promotionId||"",pictureUrl:o[0].pictureUrl||"",labelCode:o[0].labelCode||"",picVersion:o[0].picVersion||"",productCode2:o[1].sugGoodsCode||"",vendorId2:o[1].vendorId||"",shopCode2:o[1].shopId||"",productName2:o[1].productName||"",supplierCode2:o[1].supplierCode||"",productType2:o[1].productType||"",handwork2:o[1].handwork||"",promotionId2:o[1].promotionId||"",pictureUrl2:o[1].pictureUrl||"",labelCode2:o[1].labelCode||"",picVersion2:o[1].picVersion||"",productCode3:o[2].sugGoodsCode||"",vendorId3:o[2].vendorId||"",shopCode3:o[2].shopId||"",productName3:o[2].productName||"",supplierCode3:o[2].supplierCode||"",productType3:o[2].productType||"",handwork3:o[2].handwork||"",promotionId3:o[2].promotionId||"",pictureUrl3:o[2].pictureUrl||"",labelCode3:o[2].labelCode||"",picVersion3:o[2].picVersion||""},i=e.data.lxBannerLink;i.indexOf("webViewSrc=")>-1&&(i=i.split("webViewSrc=")[1]+"?"+e.serialize(n),i="/pages/webView/index?webViewSrc="+encodeURIComponent(i),e.setData({lxBannerLink:i})),e.lxbannerMdFunc(0)}}else e.setData({lxCmsDataFlag:!0})}catch(t){e.setData({lxCmsDataFlag:!0})}}))},lxbannerMdFunc:function(e){var t=this.data.cmsLxData[0];if(this.data.lxCmsDataFlag)this.setData({"cmsLxDataMd.modid":t.templateFullId+""+t.modelFullId,"cmsLxDataMd.eleid":e+1,lxBannerLinkItem:this.data.cmsLxData[e].elementDesc});else{var a=this.data.tjLxData[e],o={prdid:a.sugGoodsCode,shopid:a.shopId,recvalue:a.handwork},n={recvalue:a.handwork},i=this.data.lxBannerLink;i.indexOf("webViewSrc=")>-1&&(i=decodeURIComponent(i.split("webViewSrc=")[1])+"&position="+(e+1),i="/pages/webView/index?webViewSrc="+encodeURIComponent(i)),this.setData({"tjLxDataMd.modid":t.templateFullId+""+t.modelFullId,"tjLxDataMd.eleid":e+1,"tjLxDataMd.imgEvdl":JSON.stringify(o),"tjLxDataMd.textEvdl":JSON.stringify(n),lxBannerTjLink:i})}},lxSwiperChange:function(e){var t=e.detail.current;this.lxbannerMdFunc(t)},getCurrentShopPrice:function(e,t){var a=this,o=[],n=[];e.forEach((function(e){o.push(e.sugGoodsCode),n.push(e.vendorCode)}));var i=D.default.icps+"/icps-web/getVarnishAllPrice014/"+o.join(",")+"_"+t+"__"+n.join(",")+"_5_getAllPrice1111.vhtm?callback=getAllPrice1";(0,k.requestPromise)({url:i,dataType:"jsonp"}).then((function(e){var t=e,o=a.data.cmsguessData;o.forEach((function(e){t.forEach((function(t){if(t.cmmdtyCode==e.sugGoodsCode){var a=0,o=0;t.refPrice&&(a=t.refPrice),t.snPrice&&(o=t.snPrice),0==parseFloat(a)&&0==parseFloat(o)||(parseFloat(o)<parseFloat(a)&&(o=a),parseFloat(o)<=parseFloat(0)?e.snPrice="":e.snPrice=o),t.price?e.price="￥"+t.price:e.price="售罄"}}))})),a.setData({cmsguessData:o})}))},onTapMove:function(){r.pageScrollTo&&r.pageScrollTo({scrollTop:0})},onPageScroll:function(e){var t=e.scrollTop;this.showTop(t)},showTop:function(e){e>2*this.data.screenH?this.setData({showToTop:!0}):this.setData({showToTop:!1})},promiseAll:function(e){return new Promise((function(t,a){for(var o=0,n=e.length,i=new Array(n),r=0;r<n;r++)!function(r){Promise.resolve(e[r]).then((function(e){if(o++,i[r]=e,o==n)return t(i)}),(function(e){return a(e)}))}(r)}))},serialize:function(e){var t="",a=!1;for(var o in e)a&&(t+="&"),t+=o+"="+e[o],a=!0;return t},onShareAppMessage:function(){},toQrPage:function(e){O.checkLogin().then((function(e){e.app?r.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(A.default.personQr)}):r.showToast({title:"请先登录",icon:"none"})})).catch((function(){r.showToast({title:"请先登录",icon:"none"})}))}})})),window.define("579",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(9),I=e(580);t.exports=I[T]})),window.define("580",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={pre:{favorite:"https://revnode-pre.cnsuning.com/favorite/wap/product",exchange:"https://snassxzpre.cnsuning.com/snass-web/wap/servicefusion/goReturnChangeList_1.do",person:"https://msinode-pre.cnsuning.com/m/person.do?from=minip",personQr:"https://mypre.cnsuning.com/wap/qr/visit.do",friend_card:"https://salepre.cnsuning.com/pre_first/friend1111/",friend_game:"https://salepre.cnsuning.com/pre_first/friend/",orderRed:"http://cpre.m.cnsuning.com/channel/",greenChannel:"http://salepre.cnsuning.com/page/",yun:"https://signpre.cnsuning.com/sign-web/m/sign/welcome.do?channelType=5",lqb:"http://passportpre.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=http://lcmpweixinpre.suning.com/weixin-portal/app/lcdcs/directToLcdcs.htm?merchantNo=70058762",yfbsm:"http://passportpre.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=https://mpaypre.cnsuning.com/epwm/identity/toIdentityVerification.htm?source=1602",upUser:"https://aqpre.cnsuning.com/asc/wap/mobile/check_1.do",rxf:"http://passportpre.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=https%3A%2F%2Fplportalpre.cnsuning.com%2Fplpps%2FentryJudgeNew%2FentryNew.html",flashSale:"http://nmnode-pre.cnsuning.com"},prod:{favorite:"https://revnode.suning.com/favorite/wap/product",exchange:"https://snasss.suning.com/snass-web/wap/servicefusion/goReturnChangeList_1.do",person:"https://msinode.suning.com/m/person.do?from=minip",personQr:"https://my.suning.com/wap/qr/visit.do",friend_card:"https://sale.suning.com/all/friend1111/",friend_game:"https://sale.suning.com/all/friend/",orderRed:"https://c.m.suning.com/channel/",greenChannel:"https://sale.suning.com/all/",yun:"https://sign.suning.com/sign-web/m/sign/welcome.do?channelType=5",lqb:"https://passport.suning.com/ids/trustLogin?sysCode=epp&targetUrl=https://lcmpweixin.suning.com/weixin-portal/app/lcdcs/directToLcdcs.htm?merchantNo=QD010067",yfbsm:"https://passport.suning.com/ids/trustLogin?sysCode=epp&targetUrl=https://mpay.suning.com/epwm/identity/toIdentityVerification.htm",upUser:"https://aq.suning.com/asc/wap/mobile/check_1.do",rxf:"https://passport.suning.com/ids/trustLogin?sysCode=epp&targetUrl=https%3A%2F%2Fplportal.suning.com%2Fplpps%2FentryJudgeNew%2FentryNew.html",flashSale:"https://nmnode.suning.com"},xgpre:{favorite:"https://revnode-prexg.cnsuning.com/favorite/wap/product",exchange:"https://snassxgpre.cnsuning.com/snass-web/wap/servicefusion/goReturnChangeList_1.do",person:"https://msinode-xgpre.cnsuning.com/m/person.do?from=minip",personQr:"https://myprexg.cnsuning.com/wap/qr/visit.do",friend_card:"https://saleprexg.cnsuning.com/pre_first/friend1111/",friend_game:"https://saleprexg.cnsuning.com/pre_first/friend/",orderRed:"http://cprexg.m.cnsuning.com/channel/",greenChannel:"http://saleprexg.cnsuning.com/page/",yun:"https://signprexg.cnsuning.com/sign-web/m/sign/welcome.do?channelType=5",lqb:"http://passportprexg.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=https://lcmpweixinxgpre.cnsuning.com/weixin-portal/app/lcdcs/directToLcdcs.htm?merchantNo=QD010128",yfbsm:"http://passportprexg.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=https://mpayprexg.cnsuning.com/epwm/identity/toIdentityVerification.htm",upUser:"https://aqprexg.cnsuning.com/asc/wap/mobile/check_1.do",rxf:"http://passportprexg.cnsuning.com/ids/trustLogin?sysCode=epp&targetUrl=https%3A%2F%2Fplportalprexg.cnsuning.com%2Fplpps%2FentryJudgeNew%2FentryNew.html",flashSale:"http://nmnode-xgpre.cnsuning.com"}}})),window.define("581",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={index:{pageId:"baidusy130",saPvId:"baidusy130",saPgnm:"pageid=baidusy130;pgcate=10001;pgtitle=易购首页;",contentPath:"/api/json/baidusy130.json?v=2018121601"}}})),window.define("584",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{items:[{name:"sit",value:"SIT"},{name:"pre",value:"PRE",checked:"true"},{name:"xgpre",value:"XGPRE"},{name:"prod",value:"PRD"}],selectEnv:"pre"},radioChange:function(e){this.setData({selectEnv:e.detail.value}),console.log("radio发生change事件，携带value值为：",""+e.detail.value)},onLoad:function(e){},saveEnv:function(){console.log(this.data.selectEnv),n.setStorage({key:"debugEnv",data:this.data.selectEnv,success:function(){n.showModal({title:"",content:"您选择的环境变量是: 【"+n.getStorageSync("debugEnv")+"】 请退出微信,后台杀死微信进程,重启微信,重新进入小程序",showCancel:!1,confirmColor:"#F60"})},fail:function(){n.showToast({title:"抱歉失败了,请重试,或者联系小程序管理员",icon:"none"})}})}})})),window.define("587",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77).saSendLog,I=i();Page({data:{pageid:"J9A",saPgnm:"pgtitle=微信小程序授权页;pageid=J9A;pgcate=10009;",newUser:""},autoclick:function(e){T("click",{event:e})},onLoad:function(e){e&&e.auth&&this.setData({newUser:e.auth})},onShow:function(){T("pageview",{ext:{}})},checkUserAuth:function(e){var t=e.detail,a=t.errMsg,o=t.userInfo;t.encryptedData,t.iv;"getUserInfo:ok"===a?(I.globalData.hasAuth=!0,console.log(1111,o,n.setStorageSync),n.setStorageSync("userInfo",o),"newUser"==this.data.newUser&&(console.log("走到新人授权"),I.globalData.newUserAuth=!0),n.navigateBack()):(I.globalData.hasAuth=!1,n.navigateBack()),console.log("checkUserAuth done",e)},protocolYfb:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbxy.html")})},protocolHyzc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/snyghyzc.html")})},protocolYszc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yssm.html")})},protocolYfbYszc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbyszc.html")})}})})),window.define("590",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(571),P=(T=I)&&T.__esModule?T:{default:T},D=e(261),x=e(260),_=e(25);Page({data:{vips:[],cardNum:"",password:"",errValidates:{},pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2"},onLoad:function(){(0,_.saSendPageViewLog)()},autoclick:function(e){(0,_.saSendLog)("click",{event:e})},getCardInfo:function(e){var t=e.detail.value.replace(/\s+/g,""),a=e.currentTarget.dataset.name;this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},a,t))},onSave:function(){var e=this.data,t=e.cardNum,a=e.password,o=[P.default.Required("请输入有效的苏宁卡卡号")(t),P.default.Illegal("苏宁卡卡号",{min:3,max:16})(t),P.default.Required("请输入密码")(a)].filter((function(e){var t=e.succ;e.msg;return 0==t}));if(console.log(o),o.length)n.showToast({title:o[0].msg,icon:"none",duration:2e3});else{var i=this.data,r=i.cardNum,s=i.password,c=i.vips;if(c.some((function(e){return e.cardNum==r})))return void n.showToast({title:"您已经绑定过此卡了",icon:"none",duration:2e3});(0,D.bandGiftCard)({cardNum:r,password:s}).then((function(e){e.cardType==x.CARD_TYPES.CARD_DISPLAY_TYPE_VIP&&(c.push(e),n.setStorage({key:"vips",data:c})),n.showToast({title:"添加苏宁卡成功",icon:"none",duration:2e3}),n.navigateBack()})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})}))}}})})),window.define("593",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(261),D=e(260),x=e(25),_=e(54),k=(I=_)&&I.__esModule?I:{default:I},L=e(245),N=e(23);Page({data:{showUseful:!0,cardInfos:[],unUseCardInfos:[],cart2No:"",isCardFlag:!0,isUsed:null,cmmdtyInfoItems:[],defaultTabIndex:0,hasShowConponTip:!0,selected:[],vericodeShow:!1,hasChecked:!1,cardUseInfos:[],vips:[],tip:"",usedCardList:[],dfpToken:"",detect:"",pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2",cardFlag:"bc",backFrombind:!1},autoclick:function(e){(0,x.saSendLog)("click",{event:e})},onLoad:function(e){var t=this;(0,x.saSendPageViewLog)();var a=e.cart2No,o=e.isCardFlag,n=e.cardFlag,i="true"==o,r=k.default.getTrack();this.setData({cart2No:a,isCardFlag:o,isUsed:i,detect:r,cardFlag:n}),(0,x.getDfpToken)().then((function(e){t.setData({dfpToken:e})})).catch((function(e){console.error(e)}))},toQueryCardList:function(e){var t=this,a=[],o=[],n=[],r=[];try{var s=i.getStorageSync(e),c=i.getStorageSync("vips");s&&(r=s.cmmdtyInfoItems||[],n=s.cardUseInfos||[]),c&&(o=c),this.setData({cmmdtyInfoItems:r,cardUseInfos:n,vips:o}),n.forEach((function(e){a.push(e.cardNo)}))}catch(e){}(0,P.queryCardList)(o,e,r).then((function(e){var o=e.cardInfos,n=void 0===o?[]:o,i=e.unUseCardInfos,r=void 0===i?[]:i;n=n.map((function(e){var t=e.cardType;return~[D.CARD_TYPES.CARD_DISPLAY_TYPE_VIP,D.CARD_TYPES.CARD_DISPLAY_TYPE_LAOX].indexOf(t)?e.giftCardType="":t==D.CARD_TYPES.CARD_DISPLAY_TYPE_BOOK?e.giftCardType=D.CARD_TYPES.GIFT_CARD_TYPE_BOOK:e.giftCardType=D.CARD_TYPES.GIFT_CARD_TYPE_NORMAL,e})),t.setData({cardInfos:n,unUseCardInfos:r}),a&&t.setData({selected:n.filter((function(e){var t=e.cardNum;return!!~a.indexOf(t)})).map((function(e){return e.cardNum}))})})).catch((function(e){return console.log(e)}))},onShow:function(){var e=this.data,t=e.cart2No,a=e.backFrombind;this.toQueryCardList(t),a&&(this.setData({backFrombind:!1}),this.onSaveHandler())},toAddCard:function(){i.navigateTo({url:"../add/add"})},showUseCard:function(){this.setData({showUseful:!0})},showUnuseCard:function(){this.setData({showUseful:!1})},onChange:function(e){var t=e.detail.value;this.setData({selected:t})},onSaveHandler:function(){var e=this.data,t=e.selected,a=e.cardInfos,o=e.cart2No,n=e.dfpToken,i=e.detect,r=0,s=[];a.forEach((function(e){var a=e.cardType,o=e.cardNum,n=e.giftCardType,i=e.password,c=e.balance;~t.indexOf(o)&&(a!==D.CARD_TYPES.CARD_DISPLAY_TYPE_VIP?(r++,s.push({cardType:a,cardNo:o,giftCardType:n,usedAmount:c})):s.push({cardType:a,cardNo:o,password:i,usedAmount:c}))})),r?(this.setData({usedCardList:s}),this._saveCardInfo({usedCardList:s,needValidateCode:!0,cart2No:o,dfpToken:n,detect:i})):this._saveCardInfo({usedCardList:[],needValidateCode:!1,cart2No:o,dfpToken:n,detect:i})},_saveCardInfo:function(e){var a=this;"bc"==this.data.cardFlag?(0,P.saveCardInfo)(e).then((function(e){i.showToast({title:"保存成功",icon:"none",duration:2e3}),t((function(){i.navigateBack()}),1e3)})).catch((function(e){console.log(e.code),"CCF-00-0022"!=e.code&&"CCF-00-0005"!=e.code?i.showToast({title:e.msg,icon:"none",duration:2e3}):a.setData({vericodeShow:!0})})):(0,P.savewkCardInfo)(e).then((function(e){i.showToast({title:"保存成功",icon:"none",duration:2e3}),t((function(){i.navigateBack()}),1e3)})).catch((function(e){console.log(e.code),"CCF-00-0022"!=e.code&&"CCF-00-0005"!=e.code?i.showToast({title:e.msg,icon:"none",duration:2e3}):a.setData({vericodeShow:!0})}))},onClose:function(){this.setData({vericodeShow:!1}),(0,x.saSendLog)("manuclick",{modid:"69",eleid:"772069002"})},onSuccess:function(e){var t=e.detail,a=this.data,o=a.cart2No,n=a.usedCardList,i=a.dfpToken,r=a.detect;t?this._saveCardInfo(Object.assign({usedCardList:n},{verificationCode:t,needValidateCode:!0,cart2No:o,dfpToken:i,detect:r})):this._saveCardInfo(Object.assign({usedCardList:n},{needValidateCode:!1,cart2No:o,dfpToken:i,detect:r})),(0,x.saSendLog)("manuclick",{modid:"69",eleid:"772069003"})},onBind:function(){var e="/pages/webView/index?webViewSrc="+("wx"===(0,N.getPlatformType)()?L.Host.aq+"/asc/wap/mobile/check_1.do":encodeURIComponent(L.Host.aq+"/asc/wap/mobile/check_1.do"));i.navigateTo({url:e}),this.setData({vericodeShow:!1,backFrombind:!0}),(0,x.saSendLog)("manuclick",{modid:"69",eleid:"772069001"})}})})),window.define("596",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=D(e(597)),I=D(e(598)),P=e(599);function D(e){return e&&e.__esModule?e:{default:e}}var x=(0,I.default)();x.methods.onSaveApi=function(e,t,a){var o=e.cart2No,n=e.useCouponList,i=e.shopGoldCheck;(0,P.recCouponInfo)({cart2No:o,useCouponList:n,operationType:1,shopGoldCheck:i}).then((function(e){t(e)})).catch((function(e){return a(e)}))},Page((0,T.default)({pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2"},x))})),window.define("597",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){for(var e=arguments.length,a=Array(e>2?e-2:0),o=2;o<e;o++)a[o-2]=arguments[o];var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],s={},c=null,d=n.pageid,u=n.saPgnm,l=n.isLogin,p=n.storageKey;function f(e,t){var a={};return[e].concat(N(t)).filter((function(e){return e.data})).forEach((function(e){var t=e.data,o=e.onRender,n=e.namespace,i=o?o(!0):{};o&&(s[(n?n+".":"")+"onRender"]=o);var r=Object.assign({},t,i);n?a[n]=r||{}:Object.assign(a,r)})),a}return n.data={host:P.Host,pageid:d,saPgnm:u},n.$Toast=B,n.$dfpToken="",Object.assign(n.data,f(r,a)),n.store=JSON.parse(JSON.stringify(n.data)),[r].concat(a).filter((function(e){return e.methods})).forEach((function(e){var t=e.methods,a=e.namespace,o=function(e){t.hasOwnProperty(e)&&(a?n[a+"."+e]=function(){for(var a=arguments.length,o=Array(a),n=0;n<a;n++)o[n]=arguments[n];return t[e].apply(this,o)}:n[""+e]=function(){for(var a=arguments.length,o=Array(a),n=0;n<a;n++)o[n]=arguments[n];return t[e].apply(this,o)})};for(var i in t)o(i)})),n.onLoad=function(e){var t=this;this.qs=e,[r].concat(a).forEach((function(e){var a=e.onLoad;a&&a.call(t)})),A()},n.onShow=function(){var e=this;V.call(this,this.qs,l,r,a),t((function(){U("autoexpo",e)}),1e3)},n.onReady=function(){var e=this;p&&i.removeStorageSync(p),R().then((function(t){e.$dfpToken=t})).catch((function(e){console.error(e)})),[r].concat(a).forEach((function(t){var a=t.onReady;a&&a.call(e)})),this.initDetect()},n.onHide=function(){[r].concat(a).forEach((function(e){var t=e.onHide;t&&t()}))},n.onUnload=function(){[r].concat(a).forEach((function(e){var t=e.onUnload;t&&t()}))},n.$goCart4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="1"==t?"/packageA/pages/order/cart4/cart4?id=":"/packageA/pages/cart4/cart4?id=";i.redirectTo({url:a+e})},n.$goOrderList=function(){i.redirectTo({url:"/packageA/pages/order/orderList/orderList?index=0"})},n.$goWXPay=function(e,t,a,o,n){var r=this;if(e)if("wx"===(0,_.getPlatformType)())O(e,t,a).then((function(t){r.$goCart4(e,o)})).catch((function(e){U("manuclick",{modid:"35",eleid:"772035010"}),i.showModal({title:"提示",content:"订单超过一定时间未支付将被取消，请尽快完成支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",success:function(e){e.confirm&&(r.$goOrderList(),U("manuclick",{modid:"35",eleid:"772035011"}))}})}));else switch(n){case"08":(0,k.wxPay)({orderId:e,payFlag:a}).then((function(t){console.log("wxPay2 success",t),t&&i.redirectTo({url:"/pages/wxpay-confirm/wxpay-confirm?orderIds="+e+"&newCart4Switch="+o+"&wxGetGiftFlag="+wxGetGiftFlag})})).catch((function(e){console.log("wxPay2 fail",e)}));break;case"13":(0,k.aliPay)({orderId:e,payFlag:a}).then((function(t){console.log("aliPay2 success",t),r.$goCart4(e,o)})).catch((function(e){console.log("aliPay2 fail",e)}))}},n.autoclick=function(e){U("click",{event:e})},n.getStorage=function(e){if(p){var t=i.getStorageSync(p,this.store)||{};return e?t[e]:{}}return null},n.detectTouchStart=x.default.detectTouchStart,n.detectTouchMove=x.default.detectTouchMove,n.detectTouchEnd=x.default.detectTouchEnd,n.detectTap=x.default.detectTap,n.detectLongPress=x.default.detectLongPress,n.initDetect=function(){x.default.init("mainApp")},n.setState=function(e,t,a){var o=this.store;"function"==typeof t&&(a=t,t=""),o=t?Object.assign({},o,L({},""+t,Object.assign(o[t]||{},e))):Object.assign({},o,Object.assign(o,e)),this.store=o,this.update(t,a)},n.update=function(e,a){var o=this,n=this.store;!0,clearTimeout(c),c=t((function(){Object.keys(s).forEach((function(e){var t,a=e.split("."),i=s[e];t=2==a.length?a[0]:"";var r=i?i.call(o):{};t?Object.assign(n[t]||{},r):Object.assign(n,r)}));var e=G(n,o.data);o.store=n,console.log("diff算法-result",e),Object.keys(e).length>0&&o.setData(e,(function(){p&&i.setStorageSync(p,o.store),a&&a()}))}),400)},n.snBusError=F,n};var I,P=e(245),D=e(54),x=(I=D)&&I.__esModule?I:{default:I},_=e(23),k=e(251);function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var E=e(25),O=E.wxPay,A=(E.aliPay,E.saSendPageViewLog),R=E.getDfpToken,M=e(38).checkLogin,U=e(77).saSendLog,j=e(247),B=j.Toast,F=j.snBusError;function V(e,t,a,o){var n=this,i=function(e){return Promise.resolve(a.onInit.call(n,e)).then((function(t){return o.map((function(a){return a.onInit.apply(n,[e,t||{}])}))}))};return t?M().then((function(){return i(e)})).catch((function(e){console.log("登录失败",e)})):i(e)}var H="[object Array]",q="[object Object]";function G(e,t){var a={};return function e(t,a){if(t===a)return;var o=z(t),n=z(a);if(o==q&&n==q)for(var i in a){var r=t[i];void 0===r?t[i]=null:e(r,a[i])}else o==H&&n==H&&t.length>=a.length&&a.forEach((function(a,o){e(t[o],a)}))}(e,t),function e(t,a,o,n){if(t===a)return;var i=z(t),r=z(a);if(i==q)if(r!=q)Y(n,o,t);else{var s=function(i){var r=t[i],s=a[i],c=z(r),d=z(s);if(c!=H&&c!=q)r!=a[i]&&Y(n,(""==o?"":o+".")+i,r);else if(c==H)d!=H||r.length<s.length?Y(n,(""==o?"":o+".")+i,r):r.forEach((function(t,a){e(t,s[a],(""==o?"":o+".")+i+"["+a+"]",n)}));else if(c==q)if(d!=q)Y(n,(""==o?"":o+".")+i,r);else for(var u in r)e(r[u],s[u],(""==o?"":o+".")+i+"."+u,n)};for(var c in t)s(c)}else i==H?r!=H||t.length<a.length?Y(n,o,t):t.forEach((function(t,i){e(t,a[i],o+"["+i+"]",n)})):Y(n,o,t)}(e,t,"",a),a}function Y(e,t,a){var o=z(a);"[object Function]"!=o&&(e[t]=o!=q&&o!=H?a:JSON.parse(JSON.stringify(a)))}function z(e){return Object.prototype.toString.call(e)}})),window.define("598",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};o.default=function(){return{data:{showUseful:!0,couponList:[],autoUseCouponList:[],couponUseInfos:[],shoppingGoldInfo:{},isUseSuper:!1,selected:[],EnableList:[],UnEnableList:[],cart2No:"",cartHeadBasicInfo:{},limitCouponTypeCount:""},onInit:function(e){var t=e.cart2No,a=e.scene;try{t=t||a;var o=i.getStorageSync("couponList"),n=i.getStorageSync("autoUseCouponList"),r=i.getStorageSync("couponUseInfos"),s=i.getStorageSync("shoppingGoldInfo"),c=i.getStorageSync("cartHeadBasicInfo"),d=i.getStorageSync("limitCouponTypeCount"),u=r.map((function(e){return e.cardNo})),l=o.filter((function(e){var t=e.couponNum;return!!~u.indexOf(t)})).map((function(e){return e.couponNum}));c&&c.bonusUseAmount&&s&&"1"==s.isBonusUse&&this.setState({isUseSuper:!!+c.bonusUseAmount,cartHeadBasicInfo:c});var p=(o=o.map((function(e,t){var a=e.couponKind,o=e.amount,n=e.couponNum,i=(e.couponName,function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["couponKind","amount","couponNum","couponName"])),r={0:{name:"云券",css:"coupon-yun"},1:{name:"易券",css:"coupon-yi"},5:{name:"运费券",css:"coupon-freight"},6:{name:"无敌券",css:"coupon-wudi"},7:{name:"税费券",css:"coupon-shuifei"}},s=r[a]||r[0],c=o.split("."),d=I(c,2),u=d[0],p=d[1],f=void 0===p?"00":p;return Object.assign({couponNum:n,couponName:s.name,couponCss:s.css,amount:o,price:u,fiexd:f,checked:!!~l.indexOf(n),couponKind:a},i)}))).filter((function(e){return"1"===e.usefulFlag})),f=o.filter((function(e){return"1"!==e.usefulFlag}));console.log("+++++++++++",d),this.setState({couponList:o,autoUseCouponList:n,couponUseInfos:r,shoppingGoldInfo:s,selected:l,EnableList:p,UnEnableList:f,cart2No:t,limitCouponTypeCount:d})}catch(e){}},methods:{showUseful:function(){this.setState({showUseful:!0})},showUnUseful:function(){this.setState({showUseful:!1})},onSelect:function(e){var t=e.currentTarget.dataset,a=t.couponNum,o=t.couponKind,n=t.checked;console.log("checked",n);var i=this.store,r=i.selected,s=i.EnableList,c={},d=[];if(r.forEach((function(e){c[e]=!0})),n)c[a]=!1;else{var u=[],l=0;s.forEach((function(e){if(~r.indexOf(e.couponNum)){var t=e.fusionCouponList.map((function(e){return e.couponNumber}));t.push(e.couponNum),u=0==l?u.concat(t):function(e,t){if("[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(t))return e.filter((function(e){return-1!==t.indexOf(e)}))}(u,t),l++}})),r.length&&!~u.indexOf(a)&&"0"!=o||(c[a]=!0)}for(var p in c)c[p]&&d.push(p);s=s.map((function(e){return Object.assign(e,{checked:!!~d.indexOf(e.couponNum)})})),this.setState({EnableList:s,selected:d})},onSuperGoldSelect:function(e){var t=e.currentTarget.dataset.checked;this.setState({isUseSuper:!t})},onSaveHandler:function(){var e=this.store,a=e.selected,o=e.EnableList,n=e.isUseSuper,r=e.cart2No,s=o.filter((function(e){return!!~a.indexOf(e.couponNum)})).map((function(e){return{couponType:e.couponType,oldCouponType:e.oldCouponType,couponNo:e.couponNum,usedAmount:e.amount,shopCode:e.shopCode}}));console.log("useCouponList",s),this.onSaveApi?this.onSaveApi({cart2No:r,useCouponList:s,shopGoldCheck:n?1:0},(function(e){i.setStorageSync("hasAutoUseCoupon",!0);var a=e.errorInfos;a&&a.length?i.showToast({title:a[0].errorMessage,icon:"none",duration:2e3}):i.showToast({title:"保存成功",icon:"none",duration:2e3}),t((function(){i.navigateBack()}),1e3)}),(function(e){console.log(e),i.showToast({title:e.msg,icon:"none",duration:2e3})})):console.log("缺少onSaveApi 方法")}}}};e(247)})),window.define("599",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryCouponListInfo=function(e,t){var a=t.deliveryInfo,o=void 0===a?{}:a,n=(t.payInfos,t.shopInfos),i=void 0===n?[]:n,r=t.cmmdtyInfoItems,s=void 0===r?[]:r,c=t.discountInfos,d=void 0===c?[]:c,u=t.cartHeadBasicInfo,l=void 0===u?{}:u,p={operationTerminal:"xcx",cityCode:o.cityCode,payment:1,deliveryMode:+o.deliveryType,cart2No:e,shopInfos:JSON.stringify(i.map((function(e){var t=e.shopCode,a=e.shopDeliveryFee,o=e.shopServiceType,n="0";return"01"==o?n="5":"04"==o&&(n="1"),"0000000000"==t&&"0"==n&&(a=l.basicFare),{shopCode:t,shopDeliveryFee:a,businessSign:n}}))),productList:JSON.stringify(s.filter((function(e){return"24"!=e.cmmdtyHeadInfo.activityType})).map((function(e){var t=e.cmmdtyHeadInfo,a=e.mainCmmdtyHeadInfo,o=e.extendCmmdtyItems,n=void 0===o?[]:o,i=e.subCmmdtyItems,r=void 0===i?[]:i,s=e.serviceProperties,c=void 0===s?[]:s,d=a.itemNo,u=a.cmmdtyCode,l=a.shopCode,p=a.cmmdtyQty,f=a.salesPrice,h=a.salesAmount,g=a.locatCode,m=a.saleOrg,v=a.supplierCode,y=a.overSeasFlag,w=a.serviceFlag,b=a.serviceType,C=a.priceType,S=a.disPrice,T=a.tmFlag,I=a.itemTaxFare;console.log(r);var P=[];return c.length&&c.forEach((function(e){var t=e.serviceFlag,a=e.serviceType;P.push({serviceFlag:t,serviceType:a})})),{serviceFlagList:P,productHeader:t,mainProduct:{itemNo:d,cmmdtyCode:u,shopCode:l,cmmdtyQty:p,salesPrice:f,salesAmount:h,locatCode:g,saleOrg:m,supplierCode:v,overSeasFlag:y,serviceFlag:w,serviceType:b,priceType:C,disPrice:S,tmFlag:T,itemtaxfare:I},warrantyList:n,subProductList:r.map((function(e){return{subProductHeader:{},warrantyList:[]}}))}}))),discountInfos:JSON.stringify(d.map((function(e){return{cmmdtyLineInfoList:e.cmmdtyLineInfos,discountDetailInfo:e.discountDetailInfo}}))),publishDate:x.PUBLISH_DATE};return I.axios.post(D.default.shopping+"/app/cardcoupon/private/queryCouponListInfo.do",p)},a.recCouponInfo=function(e){var t=e.cart2No,a=e.useCouponList,o=e.operationType,n=e.shopGoldCheck;return I.axios.post(D.default.shopping+"/app/cardcoupon/private/recCouponInfo.do",{cart2No:t,useCouponList:JSON.stringify(a),operationType:o||"0",publishDate:x.PUBLISH_DATE,shopGoldCheck:n})};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};var x=e(246)})),window.define("602",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(556),I=e(244),P=e(25),D=e(246);Page({data:{zt:[],ps:[],addressID:"",isOpen:!0,listlength:3,ztStyle:"",recDeliveryLimit:20,pickUpLimit:5,ztTag:"+增加自提地址",SupportZt:!0,containsCShop:!0,cart2No:"",pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2",asyncClose:!0,miniCartImportAddressFlag:"",priceChangeShow:!1,hasChangeGoods:[],goodsRemoveShow:!1,noGoods:[],titleText:"",hasMoveItems:[]},autoclick:function(e){(0,P.saSendLog)("click",{event:e})},onLoad:function(e){(0,P.saSendPageViewLog)();var t=e.SupportZt,a=e.containsCShop,o=e.cart2No,n=e.miniCartImportAddressFlag;if(e.addressID){var i=e.addressID,r=e.recDeliveryLimit,s=e.pickUpLimit;this.setData({addressID:i,recDeliveryLimit:r,pickUpLimit:s})}a="false"!=a,(t="false"!=t)?this.setData({ztStyle:""}):this.setData({ztStyle:"disabled",ztTag:"订单中存在商品不支持自提"}),this.setData({SupportZt:t,containsCShop:a,cart2No:o,miniCartImportAddressFlag:n})},onShow:function(){this.data.isBack&&n.navigateBack(),this.getList()},getList:function(){var e=this,t=[],a=[];(0,T.queryContacts)().then((function(o){o.forEach((function(e,o){e.deliveryType=1==e.pickupAddress?"02":"01",1==e.pickupAddress?a.push(e):t.push(e)})),e.setData({ps:t,zt:a})}))},doChioseHandler:function(e){(0,P.saSendLog)("click",{event:e});var t=e.currentTarget.dataset.item;this.setData({deliveryInfo:t}),this.recDelivery()},recDelivery:function(){var e=this,t=this.data,a=t.cart2No,o=t.deliveryInfo,i=o.addressID;(0,T.recDeliveryForHide)(Object.assign(o,{cart2No:a})).then((function(t){e.setData({addressID:i}),n.navigateBack()})).catch((function(t){if("jgbd"!=t.code)return~I.ErrorCode.noGoodsDeliveryErrorCodes.indexOf(t.code)?(console.info(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品在此地无货或暂不销售"})):~I.ErrorCode.noSupportDistributeErrorCodes.indexOf(t.code)?(console.info(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品暂不支持购买"})):void n.showToast({title:t.msg,icon:"none",duration:2e3});e.setData({priceChangeShow:!0,hasChangeGoods:t.data})}))},deleteHandler:function(e){var t=this;(0,P.saSendLog)("click",{event:e});var a=e.currentTarget.dataset.item;n.showModal({title:"提示",content:"确定删除收货地址？",success:function(e){e.confirm?(t.setData({asyncClose:!1}),t.doDeleteHandler(a)):e.cancel&&(console.log("取消"),t.setData({asyncClose:!1}))}})},changeOpen:function(){this.setData({asyncClose:!0})},doDeleteHandler:function(e){var t=this;(0,T.modifyContact)(Object.assign({opType:3},e)).then((function(){t.getList()})).catch((function(e){n.showModal({title:"提示",content:e.msg||D.NET_CONNECT_ERROR,success:function(e){e.confirm?console.log("知道了"):e.cancel&&console.log("取消")}})}))},defaultHandler:function(e){var t=this,a=e.currentTarget.dataset.item;this.setData({asyncClose:!1}),(0,T.modifyContact)(Object.assign(a,{opType:2,defaultAddress:"1"==a.defaultAddress?"0":"1"})).then((function(e){return t.getList()}))},listMore:function(){var e=this.data.isOpen;this.setData({isOpen:!e,listlength:100}),this.getList()},toAddHandler:function(e){var t=this.data,a=t.ps,o=t.zt,i=t.recDeliveryLimit,r=t.pickUpLimit,s=t.SupportZt,c=t.containsCShop,d=t.cart2No,u=t.miniCartImportAddressFlag,l=e.currentTarget.dataset.deliveryType;if(a.length+o.length<i){if("ps"==l)return void n.navigateTo({url:"../psEdit/psEdit?cart2No="+d+"&miniCartImportAddressFlag="+u});s&&("zt"==l&&o.length>=r?n.showToast({title:"自提地址已满"+r+"条，请删除后新增",icon:"none",duration:2e3}):n.navigateTo({url:"../ztEdit/ztEdit?SupportZt="+s+"&containsCShop="+c+"&cart2No="+d}))}else n.showToast({title:"地址已满"+i+"条，请删除后新增",icon:"none",duration:2e3})},toEditHandler:function(e){(0,P.saSendLog)("click",{event:e});var t=this.data,a=t.SupportZt,o=t.containsCShop,i=t.cart2No,r=e.currentTarget.dataset,s=r.deliveryType,c=r.item,d="ps"==s?"../psEdit/psEdit?item="+JSON.stringify(c)+"&opType=2&cart2No="+i:"../ztEdit/ztEdit?item="+JSON.stringify(c)+"&opType=2&SupportZt="+a+"&containsCShop="+o+"&cart2No="+i;n.navigateTo({url:d})},onPriceChange:function(e){var t=e.detail.type;"cancel"==t?n.navigateBack({delta:2}):"confirm"==t&&n.navigateBack(),this.setData({priceChangeShow:!1})},onNoGoods:function(e){var t=this,a=e.detail.type,o=this.data.cart2No;if("cancel"==a)n.navigateBack({delta:2});else if("confirm"==a){var i=e.detail.itemNos;this.setData({hasMoveItems:i}),(0,I.modifySettleCart)({itemNos:i,cart2No:o}).then((function(e){t.recDelivery()})).catch((function(){}))}this.setData({goodsRemoveShow:!1})}})})),window.define("605",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.model=E;var T,I=e(556),P=e(244),D=e(571),x=(T=D)&&T.__esModule?T:{default:T},_=e(25),k=e(19),L=e(23);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e(246);function E(){return{provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",townCode:"",townName:"",detailAddress:"",receiverName:"",receiverMobile:"",receiverTel:"",deliveryType:"",selfTakeShopCode:"",selfPickupCode:"",deliveryToVillageFlag:"",deliverRegionCode:"",defaultAddress:"0",addrTag:""}}Page({data:Object.assign({btnClass:"ui-com-sn-btn1",isOpenADSelect:!1,_receiverMobile:"",opType:"1",isLoad:!1,focus:!0,addorEdit:"0",cart2No:"",pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2",deleteBtnShow:!1,getAddressShow:!0,currentAddress:{},miniCartImportAddressFlag:"",adShow:!1,priceChangeShow:!1,hasChangeGoods:[],goodsRemoveShow:!1,noGoods:[],titleText:"",hasMoveItems:[],platform:(0,L.getPlatformType)()},{provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",townCode:"",townName:"",detailAddress:"",receiverName:"",receiverMobile:"",receiverTel:"",deliveryType:"",selfTakeShopCode:"",selfPickupCode:"",deliveryToVillageFlag:"",deliverRegionCode:"",defaultAddress:"0",addrTag:""}),autoclick:function(e){(0,_.saSendLog)("click",{event:e})},onLoad:function(e){var t=this;(0,_.saSendPageViewLog)(),console.log(e);var a=e.cart2No;if(e.item){var o=e.item,i=e.opType,r=JSON.parse(o);this.setData(Object.assign(r,{currentAddress:o,opType:i,btnClass:"ui-com-sn-btn",_receiverMobile:r.receiverMobile,isLoad:!0,addorEdit:"0",cart2No:a,deleteBtnShow:!0,getAddressShow:!1})),n.setNavigationBarTitle({title:"编辑配送地址"})}else{var s=e.miniCartImportAddressFlag;n.setNavigationBarTitle({title:"增加配送地址"}),(0,k.getUnionLocation)().then((function(e){var a=2==e.districtLESId.length?e.cityLESId+e.districtLESId:e.districtLESId,o=2==e.provinceMDMId.length?"0"+e.provinceMDMId:e.provinceMDMId,n=e.cityLESId;console.log(o,n,a),t.setData({isLoad:!1},(function(){t.setData({isLoad:!0,provinceCode:o,cityCode:n,districtCode:a})}))})),this.setData({btnClass:"ui-com-sn-btn",isLoad:!0,addorEdit:"1",cart2No:a,deleteBtnShow:!1,getAddressShow:!0,miniCartImportAddressFlag:s})}},setState:function(e){var t=e.currentTarget.dataset,a=t.key,o=t.value;this.setData(N({},a,o))},modelSave:function(e){var t=e.detail;if(t){var a=t[0]||{},o=a.code,n=a.name,i=t[1]||{},r=i.code,s=i.name,c=t[2]||{},d=c.code,u=c.name,l=t[3]||{},p=l.code,f=l.name,h=(l.smTownCode,l.smTownCode);this.setData({provinceCode:o,provinceName:n,cityName:s,cityCode:r,districtCode:d,districtName:u,townCode:p,townName:f,isOpenADSelect:!1,smTownCode:h})}else this.setData({isOpenADSelect:!1})},getReceiverInfo:function(e){var t=e.detail.value.replace(/\s+/g,""),a=e.currentTarget.dataset.name;this.setData(N({},a,t))},switchChange:function(e){var t=e.detail.value||e.detail.checked?"1":"0";this.setData({defaultAddress:t})},saveAddress:function(e){var t=this,a=this.data,o=(a.btnClass,a.isOpenADSelect,a.cart2No,function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(a,["btnClass","isOpenADSelect","cart2No"])),i=(o.opType,o.receiverName),r=o.receiverMobile,s=o.detailAddress,c=o.provinceName,d=o.cityName,u=o.districtName,l=o.townName,p=o._receiverMobile;o.pickupAddress||(o.pickupAddress="0");var f=[x.default.Required("收货人信息应为1-20个字符，请重新输入")(i),x.default.Illegal("收货人姓名",{min:1,max:20})(i),x.default.Required("手机号码必须是以1开头的11位数字")(r),x.default.Mobile(p)(r),x.default.Required("请输入详细地址")(s),x.default.Required("请选择所在区域")(c+d+u+l)].filter((function(e){var t=e.succ;e.msg;return 0==t}));f.length?n.showToast({title:f[0].msg,icon:"none",duration:2e3}):(0,I.modifyContact)(o).then((function(e){e.deliveryType="01",t.setData({address:e}),t.recDelivery()})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})}))},recDelivery:function(){var e=this,t=this.data,a=t.cart2No,o=t.address,i=getCurrentPages(),r=i[i.length-2];(0,I.recDeliveryForHide)(Object.assign(o,{cart2No:a})).then((function(e){getCurrentPages().length>2?(n.navigateBack(),r.setData({isBack:!0})):n.navigateBack()})).catch((function(t){if("jgbd"!=t.code)return~P.ErrorCode.noGoodsDeliveryErrorCodes.indexOf(t.code)?(console.log(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品在此地无货或暂不销售"})):~P.ErrorCode.noSupportDistributeErrorCodes.indexOf(t.code)?(console.log(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品暂不支持购买"})):void n.showToast({title:t.msg,icon:"none",duration:2e3});e.setData({priceChangeShow:!0,hasChangeGoods:t.data})}))},deleteAddress:function(e){var t=this,a=this.data.currentAddress;console.log(a),n.showModal({title:"提示",content:"确定删除收货地址？",success:function(e){e.confirm?t.doDeleteHandler(JSON.parse(a)):e.cancel&&console.log("取消")}})},doDeleteHandler:function(e){console.log(e),(0,I.modifyContact)(Object.assign({opType:3},e)).then((function(){n.navigateBack()})).catch((function(e){n.showModal({title:"提示",content:e.msg,success:function(e){e.confirm?console.log("知道了"):e.cancel&&console.log("取消")}})}))},getwxAddress:function(){var e=this,t={detailAddress:"",receiverMobile:"",receiverName:"",provinceName:"",provinceCode:"",cityName:"",cityCode:"",districtName:"",districtCode:"",townCode:"",townName:""};new Promise((function(e,t){n.getSetting({success:function(t){t.authSetting["scope.address"]?n.chooseAddress({success:function(t){e(t)}}):0==t.authSetting["scope.address"]?n.openSetting({success:function(e){console.log(e.authSetting)}}):n.chooseAddress({success:function(t){e(t)}})}})})).then((function(e){var a=e.provinceName,o=e.detailInfo,n=e.userName,i=e.telNumber;return t.detailAddress=o,t.receiverMobile=i,t.receiverName=n,(0,I.queryAddress)(0,"prov").then((function(o){return o.forEach((function(e){var o=e.code,n=e.name;n==a&&(t.provinceName=n,t.provinceCode=o)})),{importAddress:t,wxAddress:e}}))})).then((function(e){var t=e.importAddress,a=e.wxAddress;return t.provinceCode?(0,I.queryAddress)(t.provinceCode,"city").then((function(e){return e.forEach((function(e){var o=e.code,n=e.name;n==a.cityName&&(t.cityName=n,t.cityCode=o)})),{importAddress:t,wxAddress:a}})):{importAddress:t,wxAddress:a}})).then((function(e){var t=e.importAddress,a=e.wxAddress;return t.cityCode?(0,I.queryAddress)(t.cityCode,"area").then((function(e){return e.forEach((function(e){var o=e.code,n=e.name;n==a.countyName&&(t.districtName=n,t.districtCode=o)})),{importAddress:t}})):{importAddress:t}})).then((function(e){var t=e.importAddress;return console.log(t),t.districtCode?(t.townCode=t.districtCode+"99",t.townName="全区",{importAddress:t}):{importAddress:t}})).then((function(t){var a=t.importAddress;a.townCode||((0,_.saSendLog)("autoexpo",e),e.setData({adShow:!0}),a.provinceName="",a.cityName="",a.townName=""),e.setData({isLoad:!1},(function(){e.setData(Object.assign({},a,{isLoad:!0}))}))})).catch((function(e){n.showToast({title:e.msg||e.errMsg,icon:"none",duration:2e3})}))},onConfirm:function(){var e=this.data.districtCode;(0,_.saSendLog)("manuclick",{modid:"14",eleid:"772014017"}),this.setData({isOpenADSelect:!e,adShow:!1})},onPriceChange:function(e){var t=e.detail.type,a=getCurrentPages(),o=a[a.length-2];"cancel"==t?n.navigateBack({delta:3}):"confirm"==t&&getCurrentPages().length>2&&(n.navigateBack(),o.setData({isBack:!0})),this.setData({priceChangeShow:!1})},onNoGoods:function(e){var t=this,a=e.detail.type,o=this.data.cart2No,i=getCurrentPages();i[i.length-2];if("cancel"==a)n.navigateBack({delta:3});else if("confirm"==a){var r=e.detail.itemNos;this.setData({hasMoveItems:r}),(0,P.modifySettleCart)({itemNos:r,cart2No:o}).then((function(e){t.recDelivery()})).catch((function(){}))}this.setData({goodsRemoveShow:!1})}})})),window.define("608",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.model=N;var T,I=e(556),P=e(244),D=e(571),x=(T=D)&&T.__esModule?T:{default:T},_=e(25),k=e(19);function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e(246);function N(){return{provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",townCode:"",townName:"",detailAddress:"",receiverName:"",receiverMobile:"",receiverTel:"",deliveryType:"",selfTakeShopCode:"",selfPickupCode:"",deliveryToVillageFlag:"",deliverRegionCode:"",defaultAddress:"0",addrTag:""}}Page({data:Object.assign({provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",townCode:"",townName:"",detailAddress:"",receiverName:"",receiverMobile:"",receiverTel:"",deliveryType:"",selfTakeShopCode:"",selfPickupCode:"",deliveryToVillageFlag:"",deliverRegionCode:"",defaultAddress:"0",addrTag:""},{btnClass:"ui-com-sn-btn1",isOpenADSelect:!1,_receiverMobile:"",opType:"1",isLoad:!1,addorEdit:"0",SupportZt:!0,containsCShop:!0,focus:!0,cart2No:"",pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2",deleteBtnShow:!1,currentAddress:{},priceChangeShow:!1,hasChangeGoods:[],goodsRemoveShow:!1,noGoods:[],titleText:"",hasMoveItems:[]}),autoclick:function(e){(0,_.saSendLog)("click",{event:e})},onLoad:function(e){var t=this;(0,_.saSendPageViewLog)();var a=e.SupportZt,o=e.containsCShop,i=e.cart2No;if(e.item){var r=e.item,s=e.opType,c=JSON.parse(r);this.setData(Object.assign(c,{currentAddress:r,opType:s,btnClass:"ui-com-sn-btn",_receiverMobile:c.receiverMobile,isLoad:!0,addorEdit:"0",deleteBtnShow:!0})),n.setNavigationBarTitle({title:"编辑自提地址"})}else n.setNavigationBarTitle({title:"增加自提地址"}),(0,k.getUnionLocation)().then((function(e){var a=2==e.districtLESId.length?e.cityLESId+e.districtLESId:e.districtLESId,o=2==e.provinceMDMId.length?"0"+e.provinceMDMId:e.provinceMDMId,n=e.cityLESId;t.setData({isLoad:!1},(function(){t.setData({isLoad:!0,provinceCode:o,cityCode:n,districtCode:a})}))})),this.setData({btnClass:"ui-com-sn-btn",isLoad:!0,addorEdit:"1",deleteBtnShow:!1});this.setData({SupportZt:a,containsCShop:o,cart2No:i})},setState:function(e){var t=e.currentTarget.dataset,a=t.key,o=t.value;this.setData(L({},a,o))},modelSave:function(e){var t=e.detail;if(t){var a=t[0]||{},o=a.code,n=a.name,i=t[1]||{},r=i.code,s=i.name,c=t[2]||{},d=c.code,u=c.name,l=t[3]||{},p=l.pickupSiteCode,f=l.jurstCode,h=l.siteAddress,g=l.siteName,m=l.storeCode,v=l.type;this.setData({provinceCode:o,provinceName:n,cityName:s,cityCode:r,districtCode:d,districtName:u,pickupAddress:1,selfPickupCode:p,selfPickupType:v,selfTakeShopCode:m,townName:g,townCode:f,detailAddress:h,isOpenADSelect:!1})}else this.setData({isOpenADSelect:!1})},getReceiverInfo:function(e){var t=e.detail.value.replace(/\s+/g,""),a=e.currentTarget.dataset.name;this.setData(L({},a,t))},saveAddress:function(){var e=this,t=this.data,a=(t.btnClass,t.isOpenADSelect,t.cart2No,function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(t,["btnClass","isOpenADSelect","cart2No"])),o=(a.opType,a.receiverName),i=a.receiverMobile,r=(a.detailAddress,a.provinceName),s=a.cityName,c=a.districtName,d=a.townName,u=a._receiverMobile;a.pickupAddress||(a.pickupAddress="1");var l=[x.default.Required("收货人信息应为1-20个字符，请重新输入！")(o),x.default.Illegal("收货人姓名",{min:1,max:20})(o),x.default.Required("手机号码必须是以1开头的11位数字！")(i),x.default.Mobile(u)(i),x.default.Required("请选择所在区域！")(r+s+c+d)].filter((function(e){var t=e.succ;e.msg;return 0==t}));l.length?n.showToast({title:l[0].msg,icon:"none",duration:2e3}):(0,I.modifyContact)(a).then((function(t){t.deliveryType="02",e.setData({address:t}),e.recDelivery()})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})}))},recDelivery:function(){var e=this,t=this.data,a=t.cart2No,o=t.address,i=getCurrentPages(),r=i[i.length-2];(0,I.recDeliveryForHide)(Object.assign(o,{cart2No:a})).then((function(e){getCurrentPages().length>2?(n.navigateBack(),r.setData({isBack:!0})):n.navigateBack()})).catch((function(t){if("jgbd"!=t.code)return~P.ErrorCode.noGoodsDeliveryErrorCodes.indexOf(t.code)?(console.log(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品在此地无货或暂不销售"})):~P.ErrorCode.noSupportDistributeErrorCodes.indexOf(t.code)?(console.log(t),void e.setData({goodsRemoveShow:!0,noGoods:t.errors,titleText:"以下商品暂不支持购买"})):void n.showToast({title:t.msg,icon:"none",duration:2e3});e.setData({priceChangeShow:!0,hasChangeGoods:t.data})}))},deleteAddress:function(e){var t=this,a=this.data.currentAddress;n.showModal({title:"提示",content:"确定删除收货地址？",success:function(e){e.confirm?t.doDeleteHandler(JSON.parse(a)):e.cancel&&console.log("取消")}})},doDeleteHandler:function(e){(0,I.modifyContact)(Object.assign({opType:3},e)).then((function(){n.navigateBack()})).catch((function(e){n.showModal({title:"提示",content:e.msg,success:function(e){e.confirm?console.log("知道了"):e.cancel&&console.log("取消")}})}))},onPriceChange:function(e){var t=e.detail.type,a=getCurrentPages(),o=a[a.length-2];"cancel"==t?n.navigateBack({delta:3}):"confirm"==t&&getCurrentPages().length>2&&(n.navigateBack(),o.setData({isBack:!0})),this.setData({priceChangeShow:!1})},onNoGoods:function(e){var t=this,a=e.detail.type,o=this.data.cart2No;if("cancel"==a)n.navigateBack({delta:3});else if("confirm"==a){var i=e.detail.itemNos;this.setData({hasMoveItems:i}),(0,P.modifySettleCart)({itemNos:i,cart2No:o}).then((function(e){t.recDelivery()})).catch((function(){}))}this.setData({goodsRemoveShow:!1})}})})),window.define("611",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=E(e(54)),D=e(247),x=E(e(612)),_=e(25),k=e(613),L=e(23),N=e(245);function E(e){return e&&e.__esModule?e:{default:e}}var O=function(e){return!!e.filter((function(e){var t=e.serviceFlag;e.serviceType;return!!~["21","22","23"].indexOf(t)})).length},A=function(e){return!!e.filter((function(e){var t=e.serviceFlag;e.serviceType;return!!~["14"].indexOf(t)})).length},R=function(e){return!!e.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length},M=!1,U={detectTouchStart:P.default.detectTouchStart,detectTouchMove:P.default.detectTouchMove,detectTouchEnd:P.default.detectTouchEnd,detectTap:P.default.detectTap,detectLongPress:P.default.detectLongPress,data:{platform:(0,L.getPlatformType)(),pageid:"771",saPgnm:"pgcate=10009;tag=100081;pgtitle=购物车1/B",cartHeadInfo:{},cmmdtyInfos:[],discountInfos:[],errorInfos:[],fareRules:[],unsatisfiedList:[],shops:[],propertys:{},dynamicPropertys:null,usebleCoupon:null,goldApps:null,usableCouponShop:null,host:N.Host,screenHeight:0,JianJiaItems:[],jjIndex:0,scrollTop:0},onLoad:function(){var e=this;console.log("开始",Date.now()),(0,_.checkLogin)().then((function(){e.initialize()})).catch((function(){console.log("未登录的场景")})),P.default.init("mainApp"),i.getSystemInfo({success:function(t){var a=t.windowHeight;t.windowWidth;e.setData({winHeight:a})}})},onShow:function(){var e=this;(0,_.checkLogin)().then((function(){e.initializeDiff(),e.initialize(),e.setData({notLogin:!1})})).catch((function(){e.setData({notLogin:!0})})),(0,_.saSendPageViewLog)()},initializeDiff:function(){var e;this._diff=(e=!1,function(t,a){if(!e)return e=!0,console.log("第一次"),a;console.log("第二次");var o={cartHeadInfo:t.cartHeadInfo,cmmdtyInfos:t.cmmdtyInfos,disabledWX:t.disabledWX,discountInfos:t.discountInfos,errorInfos:t.errorInfos,fareRules:t.fareRules,shops:t.shops,unsatisfiedList:t.unsatisfiedList},n=(0,x.default)(a,o);return console.log("diff--\x3e",n),n})},initialize:function(){var e=this;M||(console.log("首页加载..."),M=!0,(0,k.showTempCartInfo)().then((function(t){return e.parseResult(t)})).then((function(a){return a.disabledWX.length?e.onDisSupportWX(a):t((function(){e.getStaticAPIS(a),e.getDynamicAPIS(a)}),1800),"loadComplete"})).catch((function(e){return console.log(e),"loadComplete"})).then((function(){M=!1})))},onPullDownRefresh:function(){var e=this;this.initializeDiff(),Promise.resolve(i.showLoading({title:"加载中",mask:!0})).then((function(){return(0,k.showTempCartInfo)()})).then((function(t){return e.parseResult(t)})).then((function(t){e.getDynamicAPIS(t),i.hideLoading(),i.stopPullDownRefresh()})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},onReachBottom:function(){},autoclick:function(e){(0,_.saSendLog)("click",{event:e})},goLogin:function(){i.showLoading({title:"请稍候",mask:!0}),(0,_.checkLogin)({toLogin:!0}).then((function(e){i.hideLoading()})).catch((function(e){i.hideLoading()}))},parseResult:function(e){var a=this,o=e.cmmdtyInfos,n=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["cmmdtyInfos"]),i=n.errorInfos,r=n.discountInfos,s=[],c=[],d=o.reduce((function(e,t,a){var o=t.mainCmmdtyInfo,n=o.mainCmmdtyDetailInfo,d=n.shopCode,u=n.shopName,l=n.cmmdtyCode,p=n.tmFlag,f=n.overSeasFlag,h=n.cmmdtyStatus,g=n.tickStatus,m=n.itemNo,v=(n.cmmdtyName,n.firstSalesPrice),y=n.salesPrice,w=n.overSeaCommonlyFlag,b=o.serviceProperties,C=t.cmmdtyHeadInfo.activityType,S="0000000000"==d,T=!(!f||!~["927HWG1","927HWG"].indexOf(f)),I="1"==p,P="",D="",x=u;T?(D="HWG",P=S?"SN_HWG_"+d:"C_HWG_"+d,S&&(x="苏宁国际官方直营")):I?(D="FS",P="FS",x="苏宁Outlets"):(D=S?"SN":"cShop",P=S?"SN_"+d:"C_"+d,S&&"1"==w&&(P="HWG_YBMY",D="HWG_YBMY"));var _=i.filter((function(e){return e.itemNo===m})),k=0;if(_&&_.length){var L=_[0],N=L.errorCode;L.errorMessage;"07"==C?k=2:"15"==C?k=3:"CSC-36-0004"==N?k="20"==C?2:"21"==C?3:4:"CSC-32-0010"==N&&(k=1)}var E=a,M=null,U=r.filter((function(e){var t=e.cmmdtyLineInfos;e.discountDetailInfo;return t.some((function(e){return e.itemNo==m}))})).map((function(e){return e.discountDetailInfo}))||[];if(U.length&&(E=(M=U[0]).promotionId),Object.assign(t,{config:{isSN:S,isHWG:T,isFS:I,isYBK:A(b),isO2O:O(b),isUnion:R(b),_key_:d+"-"+l,shopTypeKey:P,promotionId:E,order:a,disUseded:"16"==C||"24"==C,itemNo:m}}),e[P]||(e[P]={key:P,type:D,shopCode:d,shopName:x,promotions:{},invalids:[],disableds:[]}),e[P].promotions[E]||(e[P].promotions[E]={promotionId:E,order:a,discountDetailInfo:M,cmmdtyInfos:[]}),+h)if(k>0)e[P].disableds.push(Object.assign(t,{preState:k}));else if(t.config.isO2O||t.config.isYBK||"23"==C)+g&&c.push(m),e[P].disableds.push(Object.assign(t,{preState:0}));else{var j=v&&y&&+v>+y?(+v-+y).toFixed(2):"";j&&(t.config.parityPrice=j),s.push(t),e[P].promotions[E].cmmdtyInfos.push(t)}else e[P].invalids.push(t);return e}),{}),u=Object.assign({shops:Object.keys(d).map((function(e){var t=d[e].promotions;return t=Object.keys(t).map((function(e){return t[e]})).sort((function(e,t){return e.order-t.order})),Object.assign({},d[e],{promotions:t})})),cmmdtyInfos:s,disabledWX:c},n);return console.log("车1展示接口数据",u),this.setData(Object.assign({},this._diff(this.data,JSON.parse(JSON.stringify(u)))),(function(){t((function(){a.calculation()}),800)})),u},onDisSupportWX:function(e){if(e.disabledWX.length){var t=e.disabledWX.map((function(e){return{itemNo:e,tickStatus:"0"}}));this.onChangeCmmdtyInfo({detail:{type:"checked",playload:t}})}},getStaticAPIS:function(e){var t=this,a=(e.cartHeadInfo,e.cmmdtyInfos),o=(e.discountInfos,[]);a.forEach((function(e){var t=e.mainCmmdtyInfo,a=e.subCmmdtyInfos,n=t.mainCmmdtyDetailInfo,i=n.cmmdtyCode,r=n.shopCode;"1"==n.cmmdtyStatus&&(a.length?a.forEach((function(e){var t=e.subCmmdtyHeadInfo;o.push(t.cmmdtyCode+"-"+r)})):o.push(i+"-"+r))})),Promise.all([(0,k.getProductDetails)(o),(0,k.getPoplabels)(a)]).then((function(e){var a=I(e,2),o=a[0],n=a[1];t.setData({propertys:{details:o,labels:n}},(function(){}))}))},getDynamicAPIS:function(e){var t=this,a=e.cartHeadInfo,o=e.cmmdtyInfos,n=e.discountInfos;Promise.all([(0,k.getActUrl)({cmmdtyInfos:o,discountInfos:n}),(0,k.queryUsableCoupon)(a,o,n),(0,k.queryShoppingGoldApp)(a.cityCode,o),(0,k.queryFreeCouponStatusApp)({cartHeadInfo:a,cmmdtyInfos:o})]).then((function(e){var a=I(e,4),o=a[0],n=a[1],i=a[2],r=a[3];t.setData({dynamicPropertys:{acts:o},usebleCoupon:n,goldApps:i,usableCouponShop:r})}))},toHrefGold:function(){var e=this.data.goldApps;0==e.goldUrl.indexOf("//")&&(e.goldUrl="https:"+e.goldUrl);var t="/pages/webView/index?webViewSrc="+e.goldUrl;i.navigateTo({url:t})},onChangeCmmdtyInfo:function(e){var t=this;"checkedAll"==e.detail.type&&this.initializeDiff(),"reload"==e.detail.type?Promise.resolve(i.showLoading({title:"加载中",mask:!0})).then((function(){return(0,k.showTempCartInfo)()})).then((function(e){return t.parseResult(e)})).then((function(e){return t.getDynamicAPIS(e)})).then((function(){i.hideLoading(),e.detail.onClose&&e.detail.onClose()})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})})):e.detail.playload.length&&Promise.resolve().then((function(){return(0,k.updateTempCartInfo)(e.detail.playload)})).then((function(e){return t.parseResult(e)})).then((function(e){return t.getDynamicAPIS(e)})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},goHome:function(){i.switchTab({url:"/pages/index/index"})},calculation:function(){var e=this;i.createSelectorQuery().selectAll(".npl-intro").boundingClientRect((function(t){e.setData({JianJiaItems:t})})).exec()},toFixedPosition:function(){var e=this,t=this.data,a=t.jjIndex,o=t.scrollTop;i.createSelectorQuery().selectAll(".npl-intro").boundingClientRect((function(t){t[a]?(i.pageScrollTo({scrollTop:t[a].top+o-60}),a++,e.setData({jjIndex:a})):e.setData({jjIndex:0})})).exec(),(0,_.saSendLog)("manuclick",{modid:"2",eleid:"771002054"})},onPageScroll:(0,D.debounce)((function(e){e.scrollTop<50&&this.setData({jjIndex:0}),this.setData({scrollTop:e.scrollTop})}),300)};Page(U)})),window.define("612",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T="[object Array]",I="[object Object]";function P(e,t,a){var o=D(a);"[object Function]"!=o&&(e[t]=o!=I&&o!=T?a:JSON.parse(JSON.stringify(a)))}function D(e){return Object.prototype.toString.call(e)}a.default=function(e,t){var a={};return function e(t,a){if(t===a)return;var o=D(t),n=D(a);if(o==I&&n==I)for(var i in a){var r=t[i];void 0===r?t[i]=null:e(r,a[i])}else o==T&&n==T&&t.length>=a.length&&a.forEach((function(a,o){e(t[o],a)}))}(e,t),function e(t,a,o,n){if(t===a)return;var i=D(t),r=D(a);if(i==I)if(r!=I)P(n,o,t);else{var s=function(i){var r=t[i],s=a[i],c=D(r),d=D(s);if(c!=T&&c!=I)r!=a[i]&&P(n,(""==o?"":o+".")+i,r);else if(c==T)d!=T||r.length<s.length?P(n,(""==o?"":o+".")+i,r):r.forEach((function(t,a){e(t,s[a],(""==o?"":o+".")+i+"["+a+"]",n)}));else if(c==I)if(d!=I)P(n,(""==o?"":o+".")+i,r);else for(var u in r)e(r[u],s[u],(""==o?"":o+".")+i+"."+u,n)};for(var c in t)s(c)}else i==T?r!=T||t.length<a.length?P(n,o,t):t.forEach((function(t,i){e(t,a[i],o+"["+i+"]",n)})):P(n,o,t)}(e,t,"",a),a}})),window.define("613",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.showTempCartInfo=function(){var e={},t="",a="",o="";try{e=i.getStorageSync("fourthLocation")}catch(e){}e&&e.cityLESId&&e.districtLESId&&(t=2==e.districtLESId.length?e.cityLESId+e.districtLESId:e.districtLESId,a=e.provinceMDMId,o=e.cityLESId);var n={params:{userFlag:k.USER_FLAG,opType:k.OP_TYPE,operationChannel:k.OPERATION_CHANNEL,operationTerminal:k.OPERATION_TERMINAL,operationEquipment:k.OPERATION_EQUIPMENT,supportYB:k.supportYB,publishDate:k.PUBLISH_DATE,provinceCode:a||k.PROVINCE_CODE,cityCode:o||k.CITY_CODE,districtCode:t||k.DISTRICT_CODE,wapTerminal:"01"}};return I.axios.get(D.default.shopping+"/app/cart1/gateway/showTempCartInfo.do",n).then((function(e){var t=e.errorInfos;if(t.length){var a=t[0],o=a.errorCode,i=a.errorMessage;(0,P.onUomError)({name:"cart1_gateway_showTempCartInfo.do",code:o,msg:i,type:"2",rres:e,inputParams:n})}return e}))},o.updateTempCartInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=JSON.stringify({cartHeadInfo:{userFlag:k.USER_FLAG,opType:k.OP_TYPE,operationChannel:k.OPERATION_CHANNEL,operationTerminal:k.OPERATION_TERMINAL,operationEquipment:k.OPERATION_EQUIPMENT,publishDate:k.PUBLISH_DATE,wapTerminal:"01"},operationInfos:e,supportYB:k.supportYB});return I.axios.post(D.default.shopping+"/app/cart1/gateway/updateTempCartInfo.do",{data:t}).then((function(e){var a=e.errorInfos;if(a.length){var o=a[0],n=o.errorCode,i=o.errorMessage;(0,P.onUomError)({name:"cart1_gateway_updateTempCartInfo.do",code:n,msg:i,type:"2",rres:e,inputParams:{data:t}})}return e}))},o.getProductDetails=function(e){return I.axios.post(D.default.shopping+"/getProductDetails.do",{cmmdtyCodes:e.join(",")})},o.getPoplabels=function(e){var a=[];e.forEach((function(e){e.cmmdtyHeadInfo;var t=e.mainCmmdtyInfo,o=e.subCmmdtyInfos,n=e.config,i=t.mainCmmdtyDetailInfo;t.serviceProperties;1==i.cmmdtyStatus&&(o.length?o.forEach((function(e){var t=e.subCmmdtyHeadInfo;a.push({cmmdtyCode:t.cmmdtyCode,supplierCode:n.isSN?t.shopCode:t.supplierCode})})):a.push({cmmdtyCode:i.cmmdtyCode,supplierCode:n.isSN?i.shopCode:i.supplierCode}))})),a=a.map((function(e){return Object.assign(e,{channel:"WAP",labelScene:"07"})}));var o=[];for(;a.length>0;)o.push(JSON.stringify(a.splice(0,50)));return(n=o.reduce((function(e,t,a){return e.then((function(e){return I.axios.Jsonp(D.default.pcsslabe+"/pcss-web/label/poplabels.do?params="+encodeURIComponent(t),{name:"jsonp"+a}).then((function(t){return[].concat.apply(e,t)})).catch((function(t){return[].concat.apply(e,[])}))}))}),Promise.resolve([])),new Promise((function(e,a){var o=!1,i=void 0;n.then((function(t){clearTimeout(i),o||e(t)}),(function(e){clearTimeout(i),o||a(e)})),i=t((function(){o=!0,console.log("jsonp 超时啦"),a(new Error("request timeout"))}),3e3)}))).then((function(e){return e})).catch((function(e){return[]}));var n},o.getActUrl=function(e){var t=e.cmmdtyInfos,a=e.discountInfos,o={};t.forEach((function(e){var t=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,n=(E(a,t.itemNo)||{}).discountDetailInfo;1==t.cmmdtyStatus&&n&&11!=n.promotionType&&(o[n.promotionId]=!0)}));var n=Object.keys(o);if(n.length)return I.axios.Jsonp(D.default.quan+"/search/getActUrl/"+Array(n.length).fill(4).join(",")+"_"+n.join(",")+"_5_callback.htm",{name:"callback"}).then((function(e){var t=e.errorCode,a=(e.errorMsg,e.actUrlList);return"00"==t?a:Promise.resolve([])}));return Promise.resolve([])},o.queryFreeCouponStatusApp=function(e){var t=e.cartHeadInfo,a=e.cmmdtyInfos,o=t.cityCode,n=[];a.forEach((function(e){var t=e.cmmdtyHeadInfo,a=e.mainCmmdtyInfo,o=(e.subCmmdtyInfos,e.config),i=e.extendInfos,r=[];i.length&&i.forEach((function(e){var t=e.extendDetailInfo;t.itemNo&&r.push({aftersaleCommdtyCode:t.cmmdtyCode})}));var s=a.mainCmmdtyDetailInfo,c=a.serviceProperties,d=void 0===c?[]:c,u=[];d.length&&d.forEach((function(e){var t=e.serviceFlag,a=e.serviceType;u.push({serviceFlag:t,serviceType:a})}));var l={serviceFlagList:u,storeId:o.isSN?"":s.shopCode,productId:s.cmmdtyCode,marketingActivityType:L(t),businessSign:N(o),storeType:O(o),aftersaleProductList:i.length?r:[]};n.push(l)}));var i=JSON.stringify({channelType:k.CHANNEL_TYPE,channelId:"36",cityId:o,productList:n});return I.axios.post(D.default.shopping+"/app/cart1/gateway/private/queryFreeCouponStatusApp.do",{data:i}).then((function(e){var t=e.storecouponlist;return t&&t.length?t:[]})).catch((function(){return[]}))},o.queryUsableCoupon=function(e,t,a){var o=e.cityCode,n=(e.basicFare,[]),i=[],r=[],s={};t.filter((function(e){var t=e.cmmdtyHeadInfo.activityType,a=e.mainCmmdtyInfo.mainCmmdtyDetailInfo.tickStatus;return"24"!=t&&"1"==a})).forEach((function(t){var o=t.cmmdtyHeadInfo,r=t.mainCmmdtyInfo,c=r.mainCmmdtyDetailInfo,d=r.addPurchase,u=r.serviceProperties,l=void 0===u?[]:u,p=t.extendInfos,f=void 0===p?[]:p,h=t.config,g=[];l.length&&l.forEach((function(e){var t=e.serviceFlag,a=e.serviceType;g.push({serviceFlag:t,serviceType:a})}));var m=E(a,c.itemNo),v=[];m&&(v=[{discount:m.cmmdtyLineInfo.allocatedAmount||"0.00",activityType:m.discountDetailInfo.promotionType}]);var y=h.isSN?c.shopCode:c.supplierCode,w=N(h);n.push({serviceFlagList:g,itemId:c.itemNo,commdtyCode:c.cmmdtyCode,disPrice:d?d.disPrice:"",supplierCmmdtyCode:h.isFS||h.isUnion?c.supplierCode:"",storeId:y,businessSign:w,activeType:o.activityType,subActiveType:o.subActivityType,productListPrice:c.salesPrice,priceType:c.priceType,productQty:c.cmmdtyQty,discountList:v}),f&&f.forEach((function(e){var t=e.extendDetailInfo;t.itemNo&&i.push({warrantyItemNo:t.itemNo,warrantyCode:t.cmmdtyCode,warrantyQty:t.cmmdtyQty,warrantyPrice:t.warrantyPrice})})),s[h.shopTypeKey]||(s[h.shopTypeKey]={businessSign:w,storeId:y,freightAmount:c.freightAmount}),s.SN_0000000000&&(s.SN_0000000000.freightAmount=+e.basicFare)})),Object.keys(s).forEach((function(e){r.push(Object.assign({},s[e]))}));var c=JSON.stringify({channelId:"xcx",cityId:o,mainProductList:n,warrantyProductList:i,storeFreightList:r,publishDate:k.PUBLISH_DATE});return I.axios.post(D.default.shopping+"/app/private/queryUsableCoupon.do",{data:c}).then((function(e){var t=e.isSuccess,a=_(e,["isSuccess"]);return"Y"==t||a.goldAmount||a.distanceValue?Promise.resolve(a):Promise.resolve(null)}))},o.queryShoppingGoldApp=function(e,t){var a=[];t.forEach((function(e){var t=e.cmmdtyHeadInfo,o=e.mainCmmdtyInfo.mainCmmdtyDetailInfo,n=o.itemNo,i=o.cmmdtyCode,r=o.shopCode,s=e.config;a.push({itemId:n,commdtyCode:i,storeId:s.isSN?"":r,marketingActivityType:L(t),businessSign:N(s)})}));var o=JSON.stringify({channelId:"xcx",cityId:e,productList:a});return I.axios.post(D.default.shopping+"/app/private/queryShoppingGoldApp.do",{data:o}).then((function(e){var t=e.isSuccess,a=_(e,["isSuccess"]);return"1"==t?Promise.resolve(a):Promise.resolve(null)}))};var I=e(247),P=e(248),D=(x(e(54)),x(e(245)));function x(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}var k=e(246);function L(e){var t=e.activityType,a=e.subActivityType,o="0";if("07"==t&&(o="7-2"),"02"==t)switch(a){case"1":o="4-1";break;case"2":o="4-2";break;case"3":o="4-3";break;case"4":o="4-4";break;case"5":o="4-5";break;case"6":o="4-6";break;case"7":o="4-7";break;case"8":o="4-8";break;case"9":o="4-9";break;case"10":o="4-10";break;case"12":o="4-12";break;case"13":o="21"}return"26"==t&&(o="s4"),"27"==t&&(o="s5"),"12"==t&&("20"==a&&(o="s7"),"21"==a&&(o="s6")),o}function N(e){return e.isHWG?"1":e.isFS?"5":"0"}function E(e,t){var a=e.filter((function(e){var a=e.cmmdtyLineInfos;e.discountDetailInfo;return!!~a.map((function(e){return e.itemNo})).indexOf(t)}));if(a.length){var o=a[0].cmmdtyLineInfos.filter((function(e){return e.itemNo==t}));return o.length&&(a[0].cmmdtyLineInfo=o[0]),a[0]}return null}function O(e){return e.isSN&&e.isFS?"2":e.isSN&&e.isHWG?"3":e.isSN?"1":void 0}})),window.define("616",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a._queryYscService=Q;var T=e(247),I=R(e(597)),P=e(232),D=R(e(617)),x=R(e(618)),_=e(244),k=R(e(245)),L=e(247),N=e(613),E=e(620),O=e(59),A=e(23);function R(e){return e&&e.__esModule?e:{default:e}}var M=(0,D.default)(),U=(0,x.default)(),j=e(25),B=j.isNotEmpty,F=j.isEmpty,V=e(246),H=e(621).requestPromise,q=e(622),G=e(623),Y=e(624),z=e(77).saSendLog,W=(e(625),!0);function J(e,t,a){return H({url:k.default.shopping+"/app/cart2/private/recPayType.do",method:"post",data:{operationTerminal:q.OPERATION_TERMINAL.ONLINE,operationChannel:q.OPERATION_CHANNEL.ONLINE,payType:a,childPayType:t,cart2No:e}})}function Q(e){return(0,N.getProductDetails)(e.map((function(e){e.itemNo,e.pictureLink;return e.cmmdtyCode+"-"+e.shopCode})))}Page((0,I.default)({isLogin:!0,pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2"},{data:{platform:(0,A.getPlatformType)(),loading:!0,hasError:!1,errorMsg:"",promoTips:"",SupportZt:!0,containsCShop:!1,isHWGGoods:!1,isSupportAddress:!0,isCardFlag:!1,orderType:{},couponUseInfos:[],cartHeadBasicInfo:{},cardUseInfos:[],shopInfos:[],shopInfoList:[],guideText:"",headerInfo:{},deliveryInfo:{},cart2No:"",hwgAgreeSwitch:!1,isYuDing:!1,yDswitch:!1,paysInfos:[{name:"先付定金，再付尾款",value:"01",checked:!1,enabled:!1},{name:"全款支付",value:"02",checked:!1,enabled:!1}],chiosePayInfo:"请选择",currentPay:{childPayType:"02"},showPayDialog:!1,alliancePhone:"",myAlliancePhone:"",depositExpansionAmountTxt:"",voucherTotalAmountTxt:"",balanceStartTimeTxt:"",panic:{isShow:!1,hour:"00",minute:"00",second:"00",tip:""},isSubsidy:!1,cmmdtyInfoItems:[],gameId:"",specDesc:[],submitTimestemp:"",submitEnable:!0,submitParam:{},textareaShow:!1,goodsPromptShow:!1,cartSourceFlag:!0,cmmdtyInfoItemsList:[],cmmdtyInfoItemsCount:0,cmmdtyInfoItemsList1:[],cmmdtyInfoItemsList3:[],supportAliPay:!1,supportWxPay:!1,supportCard:!0},onReady:function(){W=!0;try{n.removeStorageSync("cart2CmmdtyInfoItems"),n.removeStorageSync("cart2ShopInfos"),n.removeStorageSync("cart2GuideList"),n.removeStorageSync("hasAutoUseCoupon"),n.getStorageSync("isFirstHWG")&&this.setState({hwgAgreeSwitch:!0})}catch(e){}},onHide:function(){E.Panic.destory()},onUnload:function(){E.Panic.destory()},onInit:function(e){(0,P.clearStore)("onReady 清空操作")();var t=(e=e||{}).no||this.store.cart2No;if(e.cartSource){var a="smcpFarm"!=e.cartSource;this.setState({cartSourceFlag:a})}return console.log("cart2No",t),console.log("___________",this),this.showLoading(),(0,O.updateCookieStorage)({mtisCart2No:t}),this.setState({textareaShow:!1}),this.getOrderInfo(t)},methods:{updateoversea:function(e){this.setState({overseaCertInfoVO:e.detail})},toShowTextarea:function(){this.setState({textareaShow:!0})},showCart2Info:function(){this.onShow()},getOrderInfo:function(e){var t=this;return function(e,t){return H({url:k.default.shopping+"/minipro/private/miniProOrder.do",method:"get",data:{miniChannel:t,operationTerminal:q.OPERATION_TERMINAL.ONLINE,supportFixedCollocation:"1",publishDate:q.PUBLISHDATE,versionNo:"1",cart2No:e,_:(new Date).getTime()}})}(e,"wx"!==this.data.platform?1:"").then((function(e){t.setState({loading:!1}),t.hideLoading();var a=e.data,o=!1;if(e.code===q.SUCCESS&&B(e)){var i=a.cartHeadInfo||a.cartHeadBasicInfo;if(i&&i.isSuccess!=q.IS_SUCCESS.YES){var r=a.errorInfos,s=(g="",null);if(B(r)){var c=r[0];s=c.errorCode,g=c.errorMessage}g={code:s=s||i.errorCode,message:(g=g||i.errorMessage)||"订单失效"};t.handleOrderError(g)}else{o=a.cmmdtyInfoItems.every((function(e){var t=e.cmmdtyHeadInfo.activityType;return!!~["15","21"].indexOf(t)}));var d=a.cmmdtyInfoItems;if(d.length){var u=d[0],l=u.serviceProperties,p=u.mainCmmdtyHeadInfo.gameId;if(l.some((function(e){return 16==e.serviceFlag}))&&W){n.showModal({content:["1、苏宁不存在刷信誉行为，请谨防刷单、兼职等名义的诈骗手段。","2、如果商品充值不成功，请联系客服人员，切不可将卡号、密码交给其他人。","3、您购买的是卡密类商品，如果不清楚商品用途，请务必在购买前与客服沟通确认"].join("\r\n"),showCancel:!1,confirmText:"知道了"}),W=!1}t.setState({gameId:p})}t.parsePackage(a);var f=t.store.specDesc;console.log(f),Q(f).then((function(e){var a={};f.map((function(e){var t=e.cmmdtyCode,o=(e.shopCode,function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["cmmdtyCode","shopCode"]));a[t]=o})),e.forEach((function(e){var t=e.cmmdtyCode,o=e.eigenvalueVOList;a[t]&&(a[t].specInfos=o.map((function(e){return{specTypeName:e.eigenvalue,specContent:e.eigenvalueDisplay}})))})),f=Object.keys(a).map((function(e){return a[e]})),console.info("specDesc",f),t.setState({specDesc:f})}));var h=(0,T.ObjectToArray)(n.getStorageSync("cart2GuideList")||{});h.length&&t.setState({guideText:h[0]})}}else{var g={code:null,message:q.ERROR_MSG};t.handleOrderError(g)}return{cart2:a,couponConfig:{visible:!o&&!~["1","2","4"].indexOf(a.cartHeadBasicInfo.cardCommdtyType)}}})).catch((function(e){return console.log("error",e),t.setState({loading:!1}),Promise.reject({msg:"购物车加载失败"})}))},parsePackage:function(e,t){var a=this,o=e.cartHeadInfo||e.cartHeadBasicInfo||{},i=o.promotionMsg,r=e.deliveryInfo,s=e.cmmdtyInfoItems||e.cmmdtyItems||[],c=e.shopInfos,d=e.noStockItems;d&&d.length&&this.setState({goodsPromptShow:!0}),this.data.platform&&this.setPayFlag(s);var u=o.cart2No;s.filter((function(e){return e.serviceProperties.some((function(e){return"7"==e.serviceFlag}))})).length?this.setState({isSubsidy:!0}):this.setState({isSubsidy:!1});var l=e.cmmdtyInfoItems.every((function(e){var t=e.cmmdtyHeadInfo.activityType;return!!~["15","21"].indexOf(t)}));if(l){var p=e.cmmdtyInfoItems[0].cmmdtyHeadInfo,f=p.activityType,h=p.subActivityType,g="15"==f&&"14"==h,m=this.store.paysInfos;this.setState(function(e,t,a){var o=a[0].availPayTypes,n=[];a.forEach((function(e){var t=e.mainCmmdtyHeadInfo,a=e.subCmmdtyItems;n.push(t.itemNo),a.forEach((function(e){var t=e.subCmmdtyHeadInfo;n.push(t.itemNo)}))}));var i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(new Set(o.map((function(e){return e.availableChildPayType}))))),r={childPayType:"",childPayName:"请选择",childPayLength:i.length},s="01";return t.forEach((function(e){~n.indexOf(e.itemNo)&&(s=e.childPayType)})),{paysInfos:e=e.map((function(e){var t=e.value,a=e.name;return e.checked=!(s!=t),e.checked&&(r.childPayType=t,r.childPayName=a),e.enabled=!!~i.indexOf(e.value),e})),currentPay:r}}(m,e.payInfos,e.cmmdtyInfoItems)),function(e){return H({url:k.default.shopping+"/app/cart2/private/recDefaultPayTailPhone.do",method:"get",data:{cart2No:e,channelType:V.CHANNEL_TYPE}}).then((function(e){var t=e.code,a=e.data,o=e.msg;if("1"==t){var n=a.cartHeadInfo,i=a.errorList;return"N"==n.isSuccess?Promise.reject({msg:i[0].errorMessage}):a}return Promise.reject({msg:o})}))}(u).then((function(e){var t=e.cartHeadInfo;a.setState({alliancePhone:t.phoneNo,myAlliancePhone:t.phoneNo})})).catch((function(){var e=r.receiverMobile;e&&a.setState({alliancePhone:e,myAlliancePhone:e})}));var v=s[0].mainCmmdtyHeadInfo,y=v.depositExpansionAmount,w=v.voucherTotalAmount,b=v.balanceStartTime,C=v.lastPayment,S=v.cmmdtyQty,T=y?"(抵￥"+(+y*S).toFixed()+") ":"",I=+w?"（满减已优惠"+w+"元）":"",D=b||"";this.setState({lastPayment:C,depositExpansionAmountTxt:T,voucherTotalAmountTxt:I,balanceStartTimeTxt:D,isMD:g,isYuDing:l})}s&&1==s.length&&E.Panic.ready(s[0].mainCmmdtyHeadInfo.gbCountDown,(function(e){a.setState({panic:Object.assign({},e,{tip:s[0].mainCmmdtyHeadInfo.panicBuyType,isShow:!0})})}));var x=Y(s),_=s.every((function(e){return e.serviceProperties.some((function(e){return"16"==e.serviceFlag}))})),N=!(x||_),O=!s.some((function(e){return 1==e.availDeliveryTypes.length})),A=G(c,s),R="1"!=o.cardCommdtyType,M=!1;s=s.map((function(e){var t=(0,L.getShopTypes)(e.mainCmmdtyHeadInfo,e,t);return t.isSN||(M=!0),e.config=t,e}));var U=(0,L.getOrderType)(s);c[0].orderMemo&&(M=!0);var j=s.reduce((function(e,t,a){var o=t.mainCmmdtyHeadInfo,n=t.availPayTypes,i=!!Number(o.needInstall),r=n.some((function(e){return"08"==e.availablePayType}));return a?{needInstall:e.needInstall&&i,supportWXPay:e.supportWXPay&&r}:{needInstall:i,supportWXPay:r}}),{supportWXPay:!1,needInstall:!1}),B=[];s.forEach((function(e){var t=e.mainCmmdtyHeadInfo,a=e.subCmmdtyItems;if(a.length)a.forEach((function(e){var t=e.subCmmdtyHeadInfo,a=t.itemNo,o=t.pictureUrl,n=t.cmmdtyCode,i=t.shopCode;B.push({itemNo:a,pictureLink:o,cmmdtyCode:n,shopCode:i})}));else{var o=t.itemNo,n=t.pictureUrl,i=t.cmmdtyCode,r=t.shopCode;B.push({itemNo:o,pictureLink:n,cmmdtyCode:i,shopCode:r})}}));var F,q=e.shopInfos.some((function(e){return"1"==e.isCardFlag})),W=[];s.forEach((function(e){var t=e.mainCmmdtyHeadInfo,a=t.cmmdtyCode,o=t.shopCode,n=e.labelBaseInfos,i=e.subCmmdtyItems;if(i.length)i.forEach((function(e){var t=e.subCmmdtyHeadInfo,a=t.cmmdtyCode,o=t.shopCode,n=e.labelBaseInfos,i=[];i.push(a,o),n.forEach((function(e){var t=e.labelCode;i.push(t)})),W.push(i.join("_"))}));else{var r=[];r.push(a,o),n.forEach((function(e){var t=e.labelCode;r.push(t)})),W.push(r.join("_"))}})),F=W.join(","),z("custom",{evtp:"solplabel",evdl:{bizid:"wxxcxCart2",labelinfo:F}}),(0,P.clearStore)("数据解析时清空操作")(),(0,P.setStore)("cart2Data",e);try{n.setStorageSync("cart2CmmdtyInfoItems",s),n.setStorageSync("cart2ShopInfos",e.shopInfos)}catch(e){}this.getCmmdtyInfoBylimit(s),this.setState({triggerTime:Date.now(),cartHeadBasicInfo:e.cartHeadBasicInfo,cmmdtyInfoItems:s,needMoveItems:e.needMoveItems,noStockItems:e.noStockItems,shopInfos:e.shopInfos,couponUseInfos:e.couponUseInfos,orderType:U,overseaCertInfoVO:e.overseaCertInfoVO,cardUseInfos:e.cardUseInfos,isCardFlag:q,extendConfig:j,SupportZt:O,isSupportAddress:R,containsCShop:A,headerInfo:o,promoTips:i,isHWGGoods:x,deliveryInfo:r,invoiceInfo:e.invoiceInfo,shopInfoList:c,cart2No:u,specDesc:B,moreGoodsMessageShow:M,supportCard:N},t)},handleOrderError:function(e){this.setState({hasError:!0,errorMsg:e.message})},getCmmdtyInfoBylimit:function(e){var t=[],a=0;e.forEach((function(e){e.subCmmdtyItems.length?e.subCmmdtyItems.forEach((function(e){a+=1*+e.subCmmdtyHeadInfo.cmmdtyQty,t.push(e.subCmmdtyHeadInfo)})):(a+=1*+e.mainCmmdtyHeadInfo.cmmdtyQty,t.push(e.mainCmmdtyHeadInfo))})),this.setState({cmmdtyInfoItemsList:t,cmmdtyInfoItemsCount:a,cmmdtyInfoItemsList1:t.slice(0,1),cmmdtyInfoItemsList3:t.slice(0,3)})},checkEnable:function(e){var t=!0,a=Date.now(),o=this.store,i=o.cartHeadBasicInfo,r=o.cmmdtyInfoItems,s=o.isYuDing,c=o.yDswitch,d=o.alliancePhone,u=o.myAlliancePhone,l=o.currentPay,p=o.deliveryInfo,f=o.hwgAgreeSwitch,h=o.isHWGGoods,g=o.overseaCertInfoVO,m=o.extendConfig,v=o.specDesc,y=void 0===v?[]:v,w=o.gameId,b=o.isSupportAddress;if(!p.addrNum&&b)return this.showTips("请先保存收货地址"),void(t=!1);if(t&&s){if(t&&!l.childPayType)return this.showTips("请选择支付方式"),void(t=!1);if(t&&!c&&"01"==l.childPayType)return this.showTips("您需要先同意《苏宁预定协议》再进行下一步操作哦"),void(t=!1);if(t&&!u)return this.showTips("您还未填写尾款支付通知号码哦"),void(t=!1);if(t&&u&&u!=d&&!/^1\d{10}$/.test(u))return this.showTips("请输入正确的尾款支付通知号码"),void(t=!1)}if(t){if(h&&g.overSeaIdentitySwitch&&(F(g.certNo)||F(g.partyName)))return this.showTips("由于海关清关需要,购买苏宁国际商品须填写付款人真实姓名和身份证信息"),void(t=!1);if(i.overseaAgreementDesc&&h&&!f)return this.showTips("请选择同意《"+i.overseaAgreementDesc+"》"),void(t=!1)}if(!t||m.supportWXPay||"wx"!==this.data.platform){var C={gameId:w},S=[],T=this.data.shopInfoList,I=n.getStorageSync("cart2GuideList")||{};T.forEach((function(e){S.push({shopCode:e.shopCode,orderMemo:e.orderMemo||I[e.shopCode]||""})})),C.orderMemoJson=JSON.stringify(S),C.specDesc=JSON.stringify(y),n.showLoading({title:"加载中",mask:!0});var P=[],D=[];r.map((function(e){e.extendCmmdtyItems.length&&e.extendCmmdtyItems.map((function(t){D.push(t.cmmdtyCode),P.push(e.mainCmmdtyHeadInfo.cmmdtyGroup)}))})),z("manuclick",{modid:"24",eleid:"772024003",evdl:'{"cate":"'+P.join(",")+'","ybprdid":"'+D.join(",")+'"}'}),this.setState({submitTimestemp:a,submitEnable:t,submitParam:C})}else this.showTips("该订单商品暂不支持小程序购买")},savePaymentMethod:function(){return J(this.store.cart2No,this.store.currentPay.childPayType,this.data.cpaycode||"08")},onGoodsPrompt:function(e){var t=this,a=e.detail.type,o=this.data,i=o.cart2No,r=o.SupportZt,s=o.containsCShop,c=o.cartHeadBasicInfo.miniCartImportAddressFlag,d=o.deliveryInfo,u=d.addrNum,l=d.recDeliveryLimit,p=d.pickUpLimit;if("cancel"==a)n.navigateBack();else if("confirm"==a){var f=e.detail.itemNos;(0,_.modifySettleCart)({itemNos:f,cart2No:i}).then((function(e){t.onShow()})).catch((function(e){}))}else"change"==a&&n.navigateTo({url:"/pages/cart/_Components/Delivery/list/list?addressID="+u+"&SupportZt="+r+"&containsCShop="+s+"&recDeliveryLimit="+l+"&pickUpLimit="+p+"&cart2No="+i+"&miniCartImportAddressFlag="+c});this.setState({goodsPromptShow:!1})},changePayCode:function(e){this.setState({cpaycode:e.currentTarget.dataset.paycode})},toGoods:function(){var e=this.store,t=e.cart2No,a=e.isYuDing,o=e.isMD;n.navigateTo({url:"/pages/cart/cart2/goods/goods?cart2No="+t+"&isYuDing="+a+"&isMD="+o})},changeTextarea:function(e){var t=e.currentTarget.dataset.shopCode,a=e.detail.value,o={};o[t]=a,n.setStorageSync("cart2GuideList",o),this.setState({textareaShow:!1,guideText:a})},goCart1:function(){n.navigateBack()},showTips:function(e){n.showToast({title:e||"网络异常",icon:"none",duration:2e3})},showLoading:function(e){n.showLoading({title:e||"加载中",mask:!0})},hideLoading:function(){n.hideLoading()},getHwgAgreeSwitch:function(e){this.setState({hwgAgreeSwitch:e.detail})},yDswitchChange:function(){var e=this.store.yDswitch;this.setState({yDswitch:!e})},radioChange:function(e){var t=this.store.paysInfos;t=t.map((function(t){t.name;var a=t.value;return t.checked=!(e.detail.value!=a),t})),this.setState({paysInfos:t})},doSubmitPay:function(){var e=this,t=this.store,a=t.paysInfos,o=t.currentPay;a.forEach((function(e){var t=e.checked,a=e.name,n=e.value;t&&(o.childPayType=n,o.childPayName=a)})),this.setState({currentPay:o,showPayDialog:!1},(function(){e.savePaymentMethod().then((function(){e.getOrderInfo(e.store.cart2No)}))}))},showPay:function(){this.store.currentPay.childPayLength>1&&this.setState({showPayDialog:!0})},doBindPhone:function(e){var t=e.detail.value,a=this.store;a.alliancePhone,a.cart2No;this.setState({myAlliancePhone:t})},doSubimitPhone:function(e){var t=this,a=e.detail.value,o=this.store,i=o.alliancePhone,r=o.cart2No;a!=i?/^1\d{10}$/.test(a)?function(e,t){return H({url:k.default.shopping+"/app/cart2/private/recPayTailPhone.do",method:"post",data:{phoneNo:t,cart2No:e}}).then((function(e){var t=e.code,a=e.data,o=e.msg;if("1"==t){var n=a.cartHeadInfo,i=a.errorList;return"N"==n.isSuccess?Promise.reject({msg:i[0].errorMessage}):a}return Promise.reject({msg:o})}))}(r,a).then((function(e){t.setState({myAlliancePhone:a})})).catch((function(e){n.showToast({title:e.msg,icon:"none",duration:2e3})})):n.showToast({title:"请填写正确的手机号码",icon:"none",duration:2e3}):console.log("尾款手机不做验证")},setPayFlag:function(e){var t,a,o=0,n=0,i=void 0,r=this.store.currentPay,s=(r=void 0===r?{}:r).childPayType;e.forEach((function(e){var t=e.availPayTypes;i=!(t.filter((function(e){return"08"===e.availablePayType})).length>=2||t.filter((function(e){return"13"===e.availablePayType})).length>=2),t.forEach((function(e){var t=e.availablePayType,a=e.availableChildPayType,r=void 0===a?"":a;i?("08"===t&&(n+=1),"13"===t&&(o+=1)):""!==r&&r!==s||("08"===t&&(n+=1),"13"===t&&(o+=1))}))})),t=!(o!==e.length),a=!(n!==e.length),this.setState({supportAliPay:t,supportWxPay:a})}}},M,U))})),window.define("617",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return{namespace:"Coupon",data:{autoUseCouponList:[],couponList:[],shoppingGoldInfo:{},bonusUseAmount:0,isSpecialDelete:"0",Config:{visible:!0,message:""}},onReady:function(){console.log("onReady","hasAutoUseCoupon"),n.removeStorageSync("hasAutoUseCoupon"),n.removeStorageSync("couponList"),n.removeStorageSync("autoUseCouponList"),n.removeStorageSync("couponUseInfos"),n.removeStorageSync("cartHeadBasicInfo")},onInit:function(e,t){var a=this,o=e.cart2No,i=e.no,r=t.cart2,s=t.couponConfig;o=o||i;var c=this.store.Coupon.Config,d=this.store.cartSourceFlag;if(Object.assign(c,s),c.visible){console.log("+++++++++++++++++++++++++cartSourceFlag",this.store.cartSourceFlag);var u=this.store,l=u.couponUseInfos,p=u.cartHeadBasicInfo,f=p.bonusUseAmount;n.setStorageSync("cartHeadBasicInfo",p),(0,T.queryCouponListInfo)(o,r).then((function(e){var t=e.autoUseCouponList,i=e.couponList,r=e.shoppingGoldInfo,s=void 0===r?{}:r,c=e.isSpecialDelete,u=e.limitCouponTypeCount,p=[];if(t.length&&!l.length||s&&"1"==s.isBonusUse){var h=t.map((function(e){return e.couponNum}));p=i.filter((function(e){return!!~h.indexOf(e.couponNum)})).map((function(e){return{couponType:e.couponType,oldCouponType:e.oldCouponType,couponNo:e.couponNum,usedAmount:e.amount,shopCode:e.shopCode}}));var g=n.getStorageSync("hasAutoUseCoupon");console.log("判断自动用卷",g),g||a["Coupon.doAutoSaveCoupon"](o,p,s)}a.setState({couponList:i,autoUseCouponList:t,shoppingGoldInfo:s,bonusUseAmount:f,isSpecialDelete:c,limitCouponTypeCount:u,cartSourceFlag:d},"Coupon"),n.removeStorageSync("couponList"),n.removeStorageSync("autoUseCouponList"),n.removeStorageSync("couponUseInfos"),n.setStorageSync("couponList",i),n.setStorageSync("autoUseCouponList",t),n.setStorageSync("couponUseInfos",l),n.setStorageSync("shoppingGoldInfo",s),n.setStorageSync("limitCouponTypeCount",u)}))}},onRender:function(e){var t=!1;if(e)return{$couponUseInfos:[],$autoUseCouponList:[],$usedUseCoupon:t,$EnableList:[]};if(!this.store.Coupon)return{};var a=this.store.Coupon,o=a.shoppingGoldInfo,n=a.autoUseCouponList,i=a.couponList,r=(this.qs,this.store),s=r.couponUseInfos,c=r.cartHeadBasicInfo,d=c.bonusUseAmount,u=(c.couponAmount,i.filter((function(e){return"1"===e.usefulFlag})));return o&&"1"==o.isBonusUse&&((n=n.concat()).push({couponNum:"_super_"}),+d&&((s=s.concat()).push({cardNo:"_super_"}),t=!0),u.push({})),{$couponUseInfos:s,$autoUseCouponList:n,$usedUseCoupon:t,$EnableList:u}},methods:{doAutoSaveCoupon:function(e,t,a){var o=this;console.log("自动用卷");var i=this.store,r=i.cartHeadBasicInfo,s=i.cmmdtyInfoItems,c=a?"1"==a.isBonusUse?1:0:"";(0,T.recCouponInfo)({cart2No:e,useCouponList:t,operationType:0,shopGoldCheck:c}).then((function(e){var t=e.usedCouponInfos,a=e.cartAmountInfo,i=e.energySubsidiesProInfos;t=t.map((function(e){return{cardName:e.couponName,cardNo:e.couponNo,cardType:e.couponType,effectiveTime:e.effectiveTime,expireTime:e.expireTime,payAmount:e.usedAmount,useMode:e.useMode,useRuleDesc:e.useRuleDesc}})),i.map((function(e){var t=e.itemNo,a=e.energySubsidiesAmount;s.map((function(e){var o=e.mainCmmdtyHeadInfo;t==o.itemNo&&Object.assign(o,{energySubsidiesAmount:a})}))}));var c=Object.assign(r,a);o.setState({couponUseInfos:t||[],cartHeadBasicInfo:c,cmmdtyInfoItems:s}),console.log("更新----》",c),n.setStorageSync("couponUseInfos",t),n.setStorageSync("cartHeadBasicInfo",c)}))},toCoupon:function(){var e=this.store.cart2No;n.navigateTo({url:"/pages/cart/_Components/Coupon/page/list?cart2No="+e})}}}};var T=e(599)})),window.define("618",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};a.default=function(){return{namespace:D,data:{isTip:!1,isShow:!1,selectAmount:0,selectIndex:0},methods:{toUseCloud:function(e){var t=this.store.Clound.$availValue,a=e.detail.value||e.detail.checked?t:0;this[D+".saveCloudDiamondAmount"](a)},saveCloudDiamondAmount:function(e){var t=this,a=this.store.cartHeadBasicInfo;(0,I.saveCloudDiamondAmount)({cart2No:a.cart2No,usedAmount:e}).then((function(e){t.setState({isShow:!1,$availValue:+e.integralQuantity||+e.payValue},D),t.setState({cartHeadBasicInfo:Object.assign(a,e)})})).catch((function(e){"CSC-95-0001"!=e.code?t.$Toast.tip(e.msg||e.message):n.showModal({content:"母婴服务类商品不能使用云钻",showCancel:!1,confirmText:"知道了"})}))},toShowCloud:function(){var e=this.store.Clound,t=e.$availValue,a=e.$cloudDiamondRange,o=0;a.forEach((function(e,a){e.label==t&&(o=a)})),P("manuclick",{modid:"29",eleid:"772029004"}),this.setState({isShow:!0,selectIndex:o},D)},onChangeByDiamondRange:function(e){var t=T(e.detail.value,1)[0];console.log("$cloudSelected",t),this.setState({selectIndex:t},D)},onSuccessByDiamondRange:function(){var e=this.store.Clound,t=e.selectIndex,a=e.$cloudDiamondRange[t].label;this[D+".saveCloudDiamondAmount"](a)},onHideByDiamondRange:function(){this.setState({isShow:!1},D)}},onInit:function(){if(this.store&&this.store.cartHeadBasicInfo){var e=this.store.cartHeadBasicInfo,t=e.integralQuantity,a=e.availValue;this.setState({$availValue:+t||+a},D)}},onRender:function(e){if(e)return{$supportCloud:!1,$isCloudDiamondSillSwitch:!1,$totalValue:0,$tip:"",$hasUsed:!1,$cloudDiamondRange:[],$visible:!0,$availValue:0,$cloudDiamondSillCount:0,$cloudDiamondSillMoney:0};if(!this.store.cartHeadBasicInfo)return{};var t=this.store,a=t.orderType,o=(t.Clound,this.store.cartHeadBasicInfo),n=o.availValue,i=o.sumValue,r=o.totalValue,s=o.integralQuantity,c=o.integralAmount,d=o.cloudDiamondSillCount,u=o.cloudDiamondSillMoney,l=o.cloudDiamondSillSwitch,p=o.diamondSwitch,f=!(!l||!+l),h=!1,g=[],m="";n=+n,i=+i,r=+r,s=+s,c=+c,d=+d,u=+u;var v=!0,y=this.store.cmmdtyInfoItems;if(a&&Object.keys(a)){h=!!(a.normalCount||a.ybkCount||a.ticketCount||a.serviceCount);var w=y.every((function(e){var t=e.mainCmmdtyHeadInfo;return"07"==t.serviceMode||"05"==t.serviceMode||"06"==t.serviceMode}));w&&(h=!w),"1"==p&&a.myCount==a.totalCount&&(h=!1)}if(f)if(n>0||s>0){for(var b=n||s,C=0,S=d;b>S&&S<1e3;S=100*++C+d)g.push(S);for(var T=1,I=1e3;b>1e3&&I<b;I=1e3*++T)g.push(I);g.push(b),n=s||n}else+n||(m=r<d?"共"+r+"云钻，满"+d+"云钻可用":"共"+r+"云钻，订单金额满"+u+"元可用（不含运费）");else v=n>0||s>0;h=h;var P=+s>0;return console.log("$visible",v),{$supportCloud:h,$isCloudDiamondSillSwitch:f,$tip:m,$hasUsed:P,$totalValue:r,$cloudDiamondRange:g.map((function(e){return{label:e}})),$visible:v,$availValue:n,$cloudDiamondSillCount:d,$cloudDiamondSillMoney:u}}}};var I=e(619),P=e(77).saSendLog,D="Clound"})),window.define("619",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.saveCloudDiamondAmount=function(e){var t=e.cart2No,a=e.usedAmount;return I.axios.post(D.default.shopping+"/app/cart2/private/saveCloudDiamondAmount.do",{cart2No:t,usedAmount:a}).then((function(e){var t=e.amountInfo,a=e.cartHeadInfo;if("Y"!==a.isSuccess){var o=a.errorCode,n=a.errorMessage;return Promise.reject({code:o,msg:n})}return Object.assign({},t,{cart2No:a.cart2No,customerNo:a.customerNo,payValue:a.payValue,totalValue:a.totalValue})}))};var T,I=e(247),P=e(245),D=(T=P)&&T.__esModule?T:{default:T};e(246)})),window.define("620",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.Panic={time:0,id:"",computeTime:function(e){var a=this;return e(this.format(this.time)),t((function(){a.time<0&&clearTimeout(a.id),a.time-=1,a.id=a.computeTime(e)}),1e3)},format:function(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),o=e%3600%60;return{hour:("00"+t).slice(-2),minute:("00"+a).slice(-2),second:("00"+o).slice(-2)}},ready:function(e,t){var a,o,n,i;e&&(this.time=(o=(a=e).split(":")[0],n=a.split(":")[1],i=a.split(":")[2],+(Number(3600*o)+Number(60*n)+Number(i))),console.log("clear",this.id),clearTimeout(this.id),this.id=this.computeTime(t))},destory:function(){console.log("clear this.id",this.id),this.id&&clearTimeout(this.id)}}})),window.define("621",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.requestPromise=function(e){var t=e.url.split("?")[0].split("/").slice(-3).join("_");return I(e).then((function(e){try{var a=e.api,o=e.code,n=e.data,i=e.msg;e.v;if("1"==o){if(!Object.keys(e).length)return i=i||NETWORK_ERROR,(0,T.onUomError)({name:t,code:o,msg:i,type:"1"}),e;if(!n)return e;var r=n.cartHeadInfo||n.cartHeadBasicInfo;if(!r)return e;if("Y"!=r.isSuccess&&!~["ccf.cart1.showTempCartInfo","ccf.cart1.updateTempCartInfo"].indexOf(a)){var s=n.errorInfos,c="",d=null;if(s&&Object.keys(s).length){var u=s instanceof Array?s[0]:s;d=u.errorCode,c=u.errorMessage}return d=d||r.errorCode,c=c||r.errorMessage,(0,T.onUomError)({name:t,code:d,msg:c,type:"2"}),e}return e}return"Y"==o||(0,T.onUomError)({name:t,code:0,msg:i||"接口异常，请重试",type:"1"}),e}catch(t){return console.error(t),e}return e}))};var T=e(248),I=e(25).requestPromise})),window.define("622",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={PUBLISHDATE:"20190422",STORE_ID:"10052",CATALOG_ID:"10051",CHANNEL_WAP:"5",MPS_CHANNEL_WAP:"5",SHOP_CODE:{SUNING:"0000000000",FS:"0000000000_fs"},SERVICE_TYPE:{CCF:"ccf",COMMERCE:"commerce"},SERVICE_FLAG:{DONATION:"2",SUBSIDY:"7",WUYOUTUI:"9",SERVICE:"8",SELLERRISK:"10",FRESH:"13",SEVENRETURN:"15",YBK:"14",VIRTUAL:"16"},SELECT_WAY:{NEW:"new",UPDATE:"update",KEEP:"keep"},PREFER_FLAG:{DEF:"100000000010",UNDEF:"100000000020"},OPERATION_CHANNEL:{ONLINE:"50"},OPERATION_TERMINAL:{ONLINE:"01"},INVOICE_TYPE:{NULLINVOICE:"00",VAT:"01",NORMAL:"02",PAGERELEC:"03",ELEC:"04",NOINVOICE:"05",NORMALSPLIT:"02-1",SPLIT:"02-2"},INVOICE_NAME:{"00":"无发票","01":"增值税专用发票","02":"纸质普通发票","03":"纸质电子发票","04":"电子普通发票","05":"不开发票","02-1":"纸质普通发票(随商品寄)","02-2":"纸质普通发票(单独邮寄)"},INVOICE_NAME_SIMPLE:{"00":"无发票","01":"增值税发票","02":"纸质","03":"纸质电子发票","04":"电子","05":"不开发票","02-1":"纸质","02-2":"纸质(单独邮寄)"},INVOICE_OPERATION_TYPE:{ADD:"1",DEL:"2",UPDATE:"3",SETCOMMON:"4"},INVOICE_TIPS:{INVOICE_TIP_01:"注：第三方商家的商品由商家开具发票，若想开具品类发票请自行联系商家。",INVOICE_TIP_02:"注:第三方商家的商品由商家开具发票，若想开具品类发票请自行联系商家；家电医保卡商品的发票由服务商上门服务后开具。",INVOICE_TIP_03:"注：家电医保卡商品的发票由服务商上门服务后开具。"},TERMINAL_VERSION:{WAP:"wap",MINA:"WAP|08"},DELIVERY_RENDER_TYPE:{HAS_PS:0,HAS_ZT:1,CHOOSE:2,CHOOSE_NO_SUPPORT_ZT:3,CREATE:4,CREATE_NO_SUPPORT_ZT:5},PAYMENT_METHOD_TIPS:{NORMAL:"提交订单成功",STORE_PAY:"门店支付订单提交成功"},PAYMENT_METHOD_ATTENTION:{NORMAL:"注：订单提交成功，我们将尽快为您发货。",STORE_PAY:"注：您可在24小时内前往附近任意门店收银台处支付，支付完成后将尽快为您发货。"},PAYMENT_METHOD_ARRRY:["01","02","03","04","08","10","12","13"],PAYMENT_METHOD_NAME:{"01":"苏宁支付","02":"苏宁门店支付","03":"货到付款-现金","04":"货到付款-刷卡","08":"微信支付",10:"货到付款-扫码支付",12:"货到付款-苏宁金融扫码",13:"支付宝","001":"在线支付",9001:"券全额支付","11613,":"在线支付","11701,05":"苏宁门店支付","11601,04":"苏宁门店支付","11601,03":"货到付款-现金","11601,02":"货到付款-刷卡","11802,":"微信支付","11601,08":"货到付款-扫码支付","???":"券全额支付"},PAYMENT_METHOD_ANNOTATION:{"01":"注：订单提交成功，我们将尽快为您发货。","02":"注：订单提交成功，您可以去任意一家苏宁门店进行支付。","03":"注：订单提交成功，商品送达时，您可通过现金支付。","04":"注：订单提交成功，商品送达时，您可通过刷卡支付。","08":"注：请在24小时内完成支付，过时订单将被自动取消。",10:"注：订单提交成功，我们将尽快为您发货。",9001:"注：订单提交成功，我们将尽快为您发货。","11613,":"注：订单提交成功，我们将尽快为您发货。","11701,05":"注：订单提交成功，您可以去任意一家苏宁门店进行支付。","11601,04":"注：订单提交成功，您可以去任意一家苏宁门店进行支付。","11601,03":"注：订单提交成功，商品送达时，您可通过现金支付。","11601,02":"注：订单提交成功，商品送达时，您可通过刷卡支付。","11802,":"注：请在24小时内完成支付，过时订单将被自动取消。","11601,08":"注：订单提交成功，我们将尽快为您发货。","???":"注：订单提交成功，我们将尽快为您发货。"},PAYMENT_NOT_SUPPORT:"此商品在当前环境下暂不支持购买，建议下载苏宁易购客户端进行购买！",PAYMENT_NOT_CONFIRM_TEXT:"去下载",OVER_SEA_TYPE:{INTERNAL:"927HWG1",EXTERNAL:"927HWG"},ORDER_TYPE:{NORMAL:"normal",OVERSEAS:"overseas",INTERNAL_OVERSEAS:"internal_overseas",DONATION:"donation",FOOTBALL_TICKETS:"football_tickets",SERVICE:"service",HASYBK:"has_ybk",ALLYBK:"all_ybk",NOINVOICE:"no_invoice"},DELIVERY_CHANNEL:{SUNING:"suning",SUNING_LJ:"suning_lj",CSHOP:"cshop",VENDER:"vender",SC:"sc",SV:"sv",VC:"vc",ALL:"svc",NONE:"none",ALLYBK:"allybk"},PAY_STATUS:{FREE:"01",NON_FULL_PAYOUT:"02",FULL_PAYOUT:"03"},UA_TYPE:{WEIXIN:"weixin",YFB:"yfb",EBUY:"ebuy",EBUY_PAD:"ebuy_pad",BROWSER:"browser",SIMPLE_APP:"snlite-wap",ALIPAY:"alipayclient",LMB:"lmbang"},PLATFORM:{IOS:"IOS",ANDROID:"Android"},SUCCESS:"1",IS_SUCCESS:{YES:"Y",NO:"N"},ERROR_CODE:{NO_ERROR:"",NOT_LOGGED_IN:"5015",SAVE_FAULT:"0",ZT_ADDR_MAX_LIMIT:"E4700314",NO_GIFT:"noGift",NOT_ENOUGH_GIFT:"notEnoughGift",ACTIVITY_EXPIRE:"activityExpire",PRICE_CHANGE:"priceChange",IMAGE_CODE_ERROR:"imageCodeError",NEED_IMAGE_CODE:"needImageCode",NEED_SECOND_CHECK:"CSC-62-0001",NEED_EPAY_CHECK:"CCF-00-0003",NEED_MESSAGE_CHECK:"CCF-00-0004",NEED_MOBILE_BIND:"CCF-00-0005"},NO_STORE_CODE:{"CSC-20-0002":!0,"CSC-22-0002":!0,"CSC-33-0001":!0,"CSC-33-0005":!0,"CSC-33-0006":!0,"CSC-33-0007":!0,"CSC-33-0008":!0,"CSC-33-0009":!0,"CSC-33-0010":!0},ERROR_MSG:"服务器好像出错了，正在玩命处理中",VIEW_NAMES:{ERROR:"error",PAYER_INFO:"payer",MAIN:"main",GOODS:"goods",DELIVERY_EMPTY_LIST:"addrnone",DELIVERY_LIST:"addrlst",PS_DEFINE:"ps",ZT_DEFINE:"zt",SAVE_COUPON:"saveCoupon",ADD_COUPON:"addCoupon",SAVE_CARD:"saveCard",ADD_CARD:"addCard",PS_ADDRESS:"psaddr",ZT_ADDRESS:"ztaddr",FREE:"free",SPLIT:"split",SELECT_INVOICE:"selectInvoice",VAT_ADDRESS:"vataddr"},REQUEST_TYPE:{NATIVE:"native"},PAGE_CART_1:"cart1.html",PAGE_CART_2:"cart2.html",PAGE_CART_4_PAY_CONFIRM:"weixinPayConfirm.html",CARD_PASSWORD_REG:/^[0-9]{6}$/,NET_CONNECT_ERROR:"网络连接失败，请检测您的网络环境稍后重试",BIND_SUCCESS:"添加成功",SAVE_SUCCESS:"使用成功",SAVE_VOUCHER_CODE_WRONG_NUM_ERROR:"券号输入不正确",SAVE_VOUCHER_CODE_ALREADY_EXISTENCE_ERROR:"您输入的券号已被使用过，不能再次使用",BIND_PHONE_TIPS:"已绑定手机",UNBIND_PHONE_TIPS:"您的账户未绑定手机，请进入我的易购绑定",SEND_CODE_SUCCESS:"验证码已发送",SEND_CODE_FAIL:"发送验证码失败，请重试",SEND_CODE_FAIL_MAX_TIMES:"发送校验码已超过5次",SEND_CODE:"获取验证码",SEND_CODE_RESEND:"重新获取",LACK_CODE_TIPS:"您已选择了苏宁卡，请填写验证码",CARD_USABLE_TIPS:"仅限购买苏宁自营商品，一次最多可使用90张卡",CARD_UNUSABLE_TIPS:"您所选择的店铺商品暂不可使用苏宁卡",EMPTY_INPUT_NUMBER_TIPS:"请您输入券号",WRONG_INPUT_NUMBER_TIPS:"请核对您的号码位数，重新输入",WRONG_INPUT_PASSWORD_TIPS:"请输入正确的卡密码",NO_STORE_TIPS:"以下商品无货或暂不销售",NO_STORE_ON_ADDRESS:"以下商品在此地无货或暂不销售",NO_STORE_TIPS_BTN:"返回",NO_STORE_REMOVE_TIPS_BTN:"移除并继续购买",NO_STORE_CONFIRM_TIPS_BTN:"确定",UPDATE_TEL_TIP:"如需修改卡密接收手机，您可以到配送地址中修改您的手机号码",UPDATE_TEL_TIP_BTN:"知道了",UPDATE_TEL_TIP_TITLE:"温馨提示",AJAX_TIME_OUT_DELAY:1e4,SET_TIME_OUT_DELAY:2e3,SET_TIME_OUT_LITTLE_DELAY:100,SEND_CODE_SECOND_INTERVAL:120,SEND_CODE_REFRESH_INTERVAL:1e3,SEND_CODE_REFRESH_SECOND_INTERVAL:1,DEFAULT_CITY_CODE:"025",PAYMENT_ONLINE:"1",DELIVERY_MODE_PS:"1",DELIVERY_MODE_ZT:"2",OPERATION_TERMINAL_WAP:"06",CARD_DISPLAY_TYPE_NORMAL:"0",CARD_DISPLAY_TYPE_BOOK:"1",CARD_DISPLAY_TYPE_VIP:"2",CARD_DISPLAY_TYPE_LAOX:"3",CARD_TYPE_NORMAL:"9031",CARD_TYPE_VIP:"9038",CARD_TYPE_LAOX:"9051",GIFT_CARD_TYPE_NORMAL:"2",GIFT_CARD_TYPE_BOOK:"1",NEEDINSTALL:{NONEED:"0",SNNEED:"1",CJNEED:"2",AIWHOLE:"3",SJNEED:"4"},NEEDINSTALLTEXT:{0:"不安装",1:"苏宁安装",2:"厂家安装",3:"苏宁安装",4:"商家安装"},PROVIDER_FLAG:{YES:"01",NO:"02"},SUPPLIER_DELIVERY_FLAG:{SN_DELIVERY:"0",CJ_DELIVERY:"1",LAN_JIAN:"2"},TIMEARRAY:{1:"09:00-18:00",2:"09:00-14:00",3:"14:00-18:00",4:"18:00-23:00"},STRATEGY_TEXT:{60:"半日达",61:"次日达",62:"承诺达",40:"急速达"}}})),window.define("623",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25).find,I=e(622);t.exports=function(e,t){var a=!1,o=T(e,(function(e){return e.shopCode!==I.SHOP_CODE.SUNING}));return(a=!!o)&&1==e.length&&t.forEach((function(e){e.mainCmmdtyHeadInfo&&"1"==e.mainCmmdtyHeadInfo.swlFlag&&(a=!1)})),a}})),window.define("624",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(622);t.exports=function(e){for(var t=!1,a=0,o=e.length;a<o;a++){var n=e[a].mainCmmdtyHeadInfo;if(n.overSeasFlag==T.OVER_SEA_TYPE.EXTERNAL||n.overSeasFlag==T.OVER_SEA_TYPE.INTERNAL){t=!0;break}}return t}})),window.define("625",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={getImageUrl:function(e,t){return e.pictureUrl?(0==e.pictureUrl.indexOf("//")&&(e.pictureUrl="https:"+e.pictureUrl),e.pictureUrl+"_200w_200h_4e"):t.img+"/uimg/b2c/newcatentries/"+e.supplierCode+"-"+e.cmmdtyCode+"_1_200x200.jpg?"},parseNumber:function(e){return+e},getShopsIcons:function(e){return e.isFS?"FS":e.isFresh?"fresh":e.isHWG?"HWG":e.isSN?"SN":"cShop"},getCmmdtyInfoBylimit:function(e,t){var a=[],o=0;return e.forEach((function(e){e.subCmmdtyItems.length?e.subCmmdtyItems.forEach((function(e){o+=1*+e.subCmmdtyHeadInfo.cmmdtyQty,a.push(e.subCmmdtyHeadInfo)})):(o+=1*+e.mainCmmdtyHeadInfo.cmmdtyQty,a.push(e.mainCmmdtyHeadInfo))})),t&&(a=a.slice(0,t)),{list:a,count:o}},getPrice:function(e){return{z:e.substr(0,e.indexOf(".")),f:e.substr(e.indexOf("."))}},calculation:function(e,t){console.log("-----\x3e-------------\x3e>>",t),t=t||[];var a=(e=e||[]).reduce((function(e,t){return(+e||0)+(+t||0)}),0);return a=t.reduce((function(e,t){return(+e||0)-(+t||0)}),a),console.log("XXXXXXXXXXXXXXX",a),0==Number(a.toFixed(2))?"0.00":a.toFixed(2)},IndexOf:function(e,t){return!!~e.indexOf(t)}}})),window.define("628",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(232),D=e(559),x=e(571),_=(I=x)&&I.__esModule?I:{default:I};var k=e(77).saSendLog;Page({data:{eleInvoiceTips:"",needReviseInvoiceName:"",InvoiceList:[],isLoad:!1,vatInfo:{},preInvoiceListShow:!1,isOpenADSelect:!1,smTownCode:"",valueAddedInvoiceSwitch:"",thinkListShow:!1,thinkListShow1:!1,creditNo:"",entName:""},autoclick:function(e){k("click",{event:e}),this.hidePreList(),this.setData({thinkListShow:!1,thinkListShow1:!1})},onLoad:function(){var e=this,t=(0,P.getStore)("cart2Data",{cartHeadBasicInfo:{},cmmdtyInfoItems:[],invoiceInfo:{},invoiceCtgrys:[]}),a=t.cartHeadBasicInfo,o=t.cmmdtyInfoItems,n=t.invoiceInfo,r=t.invoiceCtgrys,s=a.eleInvoiceTips,c=a.needReviseInvoiceName,d=a.showInvoiceEmailFlag,u=a.cart2No,l=a.valueAddedInvoiceSwitch,p=a.invoiceAutoCompleteSwitch,f=o.filter((function(e){return!e.serviceProperties.filter((function(e){return"14"==e.serviceFlag})).length})).reduce((function(e,t,a){var o=t.availInvoiceTypes.map((function(e){return e.availableInvoiceType}));return a?e.filter((function(e){return o.indexOf(e)>-1})):o}),[]),h=Object.keys(D.InvoiceTypes).map((function(e){return D.InvoiceTypes[e]})).filter((function(e){var t=e.value;return!!~["02","04","01","05"].indexOf(t)&&!!~f.indexOf(t)})),g=Object.assign(n,{taxType:n.taxPayerNo?1:0,_taxPayerEmail_:n.taxPayerEmail});r.map((function(e,t){e.checked=!1,(g.invoiceContent==e.cmmdtyCtgryName||""==g.invoiceContent&&0==t)&&(e.checked=!0)})),(0,D.queryInvoiceTitle)({queryEmailFalg:n.taxPayerEmail?"0":"1"}).then((function(t){var a=t.invoiceHeadInfo,o=t.invoiceTitleDetailInfos;if(a&&"Y"==a.isSuccess){var i=o||[],r=[],s=[],c={},d={};n.taxPayerEmail||(g.taxPayerEmail=a.taxPayerEmail,g._taxPayerEmail_=a.taxPayerEmail),i.forEach((function(e){e.taxPayerNo?s.push(e):r.push(e)})),g.taxPayerNo?(d={invoiceTitle:g.invoiceTitle,taxPayerNo:g.taxPayerNo,iD:""},c=r.length?{invoiceTitle:r[0].invoiceTitle,taxPayerNo:r[0].taxPayerNo,iD:""}:{invoiceTitle:"",taxPayerNo:"",iD:""}):(c={invoiceTitle:g.invoiceTitle,taxPayerNo:"",iD:""},d=s.length?{invoiceTitle:s[0].invoiceTitle,taxPayerNo:s[0].taxPayerNo,iD:""}:{invoiceTitle:"",taxPayerNo:"",iD:""}),e.setData({preInvoiceList:i,companyList:s,personalList:r,currentPersonalInvoice:c,currentCompanyInvoice:d,selected:g})}})).catch((function(){})),(0,D.queryMemberVATInfo)().then((function(t){e.setData({vatInfo:t},(function(){e.setData({isLoad:!0})}))})).catch((function(e){i.showToast({title:e.msg,icon:"none",duration:2e3})})),this.setData({InvoiceList:h,selected:g,eleInvoiceTips:s,needReviseInvoiceName:c,showInvoiceEmailFlag:d,invoiceCtgrys:r,cart2No:u,valueAddedInvoiceSwitch:l,invoiceAutoCompleteSwitch:p})},showPreList:function(){this.setData({preInvoiceListShow:!0,thinkListShow:!1,thinkListShow1:!1})},hidePreList:function(){this.setData({preInvoiceListShow:!1})},selectPreInvoice:function(e){var t=e.currentTarget.dataset.id,a=this.data,o=a.preInvoiceList,n=a.currentCompanyInvoice,i=a.currentPersonalInvoice;if(t){var r=o.find((function(e){return e.iD==t}));r&&(r.taxPayerNo?n={invoiceTitle:r.invoiceTitle,taxPayerNo:r.taxPayerNo,iD:t}:i={invoiceTitle:r.invoiceTitle,taxPayerNo:r.taxPayerNo,iD:t},this.setData({"selected.invoiceTitle":r.invoiceTitle,"selected.id":t,"selected.taxPayerNo":r.taxPayerNo,currentCompanyInvoice:n,currentPersonalInvoice:i}))}console.log(this.data.selected),this.hidePreList()},removePreInvoice:function(e){var t=this,a=e.currentTarget.dataset.id,o={ID:a,operationType:"2",invoiceTitle:"",taxPayerNo:"",isDelete:""};(0,D.updateInvoiceTitle)(o).then((function(e){if(e.invoiceHeadInfo&&"Y"==e.invoiceHeadInfo.isSuccess){var o=t.data,n=o.companyList,i=o.personalList,r=n.concat(i).find((function(e){return e.iD==a}));r&&(r.isDelete=!0),t.setData({companyList:n,personalList:i})}})).catch((function(e){console.log(e)}))},onChangeInvoiceType:function(e){var t=this,a=e.currentTarget.dataset.type,o=this.data,n=o.selected,r=o.valueAddedInvoiceSwitch;"01"==a?1==r?(0,D.queryMemberVATInfo)().then((function(e){n.invoiceType=a,t.setData({selected:n,vatInfo:e})})).catch((function(e){i.showToast({title:e.msg,icon:"none",duration:2e3})})):i.showToast({title:"小程序暂不支持开具增值税发票，如有需要请前往苏宁易购APP下单",icon:"none",duration:2e3}):(n.invoiceType=a,this.setData({selected:n}))},onChangeByInvoiceInfo:function(e){var t=e.currentTarget.dataset.taxType,a=this.data,o=a.selected,n=a.currentCompanyInvoice,i=a.currentPersonalInvoice;0==t?(o.invoiceTitle=i.invoiceTitle,o.taxPayerNo=i.taxPayerNo,o.iD=i.iD):(o.invoiceTitle=n.invoiceTitle,o.taxPayerNo=n.taxPayerNo,o.iD=n.iD),Object.assign(o,{taxType:t}),this.setData({selected:o}),console.log(o)},selectInvoiceCnt:function(e){var t=e.currentTarget.dataset.type,a=this.data.invoiceCtgrys;a.forEach((function(e){e.checked=!1,e.cmmdtyCtgryType==t&&(e.checked=!0)})),this.setData({invoiceCtgrys:a})},updateData:function(e){var t=this,a=e.detail.value,o=this.data,n=o.selected,i=o.invoiceAutoCompleteSwitch,r=e.currentTarget.id;if("taxPayerEmail"==r?n["_"+r+"_"]=a:n[r]=a,"1"==i&&"1"==n.taxType&&("invoiceTitle"==r||"taxPayerNo"==r)){var s="01",c=!1,d=!1;s="invoiceTitle"==r?"03":"01","invoiceTitle"==r?c=!0:d=!0,(0,D.autoCompleteInvoice)({param:a,type:s}).then((function(e){var a=e.creditNo,o=e.entName;t.hidePreList(),t.setData({thinkListShow:c,thinkListShow1:d,creditNo:a,entName:o},(function(){k("autoexpo",t)}))})).catch((function(e){console.log(e),"N"==e.isSuccess&&t.setData({thinkListShow:!1,thinkListShow1:!1})}))}this.setData({selected:n})},selectSearchInvoice:function(){var e=this.data,t=e.creditNo,a=e.entName,o=e.selected;o.invoiceTitle=a,o.taxPayerNo=t,this.hidePreList(),k("manuclick",{modid:"16",eleid:"772016001"}),this.setData({selected:o,thinkListShow:!1,thinkListShow1:!1})},updateVatInfo:function(e){var t=this,a=e.detail.value,o=this.data,n=o.vatInfo,i=o.invoiceAutoCompleteSwitch,r=e.currentTarget.id;if(n[r]=a,"1"==i&&("orgPartyName"==r||"certNo"==r)){var s="01",c=!1,d=!1;s="orgPartyName"==r?"03":"01","orgPartyName"==r?c=!0:d=!0,(0,D.autoCompleteInvoice)({param:a,type:s}).then((function(e){var a=e.creditNo,o=e.entName;t.hidePreList(),t.setData({thinkListShow:c,thinkListShow1:d,creditNo:a,entName:o},(function(){k("autoexpo",t)}))})).catch((function(e){console.log(e),"N"==e.isSuccess&&t.setData({thinkListShow:!1,thinkListShow1:!1})}))}this.setData({vatInfo:n})},selectSearchVatInfo:function(){var e=this.data,t=e.creditNo,a=e.entName,o=e.vatInfo;o.orgPartyName=a,o.certNo=t,k("manuclick",{modid:"16",eleid:"772016001"}),this.setData({vatInfo:o,thinkListShow:!1,thinkListShow1:!1})},onSubmit:function(){var e,a=this.data,o=a.selected,n=a.vatInfo,r=a.cart2No,s=a.preInvoiceList,c=a.companyList,d=a.personalList,u=o.invoiceType,l=o.invoiceTitle,p=o.taxPayerNo,f=o.taxType,h=o._taxPayerEmail_,g=o.taxPayerEmail;if(~["01","05"].indexOf(u))l="";else{var m=/^.{2,32}$/.test(e=l)?/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(e)?/[\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]+/.test(e)?{result:!0}:{message:"发票抬头不允许为空",result:!1}:{message:"发票抬头中含有非法字符",result:!1}:{message:"发票抬头应为2-32个字符，请重新输入！",result:!1};if(!m.result)return void i.showToast({title:m.message,icon:"none",duration:2e3});if(1==f){var v=function(e){return 0==e.length?{message:"请填写纳税人识别号！",result:!1}:e.length<6||e.length>30?{message:"纳税人识别号位数有误！",result:!1}:/^[0-9a-zA-Z]{6,30}$/.test(e)?{result:!0}:{message:"纳税人识别号只能是数字或字母！",result:!1}}(p);if(!v.result)return void i.showToast({title:v.message,icon:"none",duration:2e3})}else o.taxPayerNo=""}if(~["01"].indexOf(u)){var y=n.orgPartyName,w=n.certNo,b=n.regPhone,C=n.regAddr,S=n.bankName,T=n.bankDepositAcnt,I=n.consigneeName,P=n.consigneeMobileNum,x=n.address,k=n.townCode;if(!this.trimStr(y))return void i.showToast({title:"请填写公司名称",icon:"none",duration:2e3});if(!this.trimStr(w))return void i.showToast({title:"请填写纳税人识别号",icon:"none",duration:2e3});if(!this.trimStr(b))return void i.showToast({title:"请填写注册电话",icon:"none",duration:2e3});if(!this.trimStr(C))return void i.showToast({title:"请填写注册地址",icon:"none",duration:2e3});if(!this.trimStr(S))return void i.showToast({title:"请填写开户银行",icon:"none",duration:2e3});if(!this.trimStr(T))return void i.showToast({title:"请填写开户账号",icon:"none",duration:2e3});if(!this.trimStr(I))return void i.showToast({title:"请填写收件人姓名",icon:"none",duration:2e3});if(!this.trimStr(P))return void i.showToast({title:"请填写正确的发票收件人手机号",icon:"none",duration:2e3});if(!this.trimStr(k))return void i.showToast({title:"请选择所在地区",icon:"none",duration:2e3});if(!this.trimStr(x))return void i.showToast({title:"请填写详细地址",icon:"none",duration:2e3});(0,D.updateVATQualificationInfo)(n).catch((function(e){i.showToast({title:e.msg,icon:"none",duration:2e3})}))}if(~["04"].indexOf(u)){var L=_.default.Email(g)(h);if(!L.succ)return void i.showToast({title:L.msg,icon:"none",duration:2e3})}(0,D.recInvoiceInfo)(o,n,r).then((function(e){e.energySubsidiesProInfos.filter((function(e){return"1"==e.isEnergySubsidies}));if(!~["01"].indexOf(u)){var a=s.find((function(e){return e.iD==o.id})),n=s.find((function(e){return e.invoiceTitle==l}));if(a&&a.iD)console.log("修改",a),(0,D.updateInvoiceTitle)({ID:a.iD,operationType:"3",invoiceTitle:l,taxPayerNo:a.taxPayerNo,isDefault:a.isDefault});else if(n&&n.iD)(0,D.updateInvoiceTitle)({ID:n.iD,operationType:"3",invoiceTitle:l,taxPayerNo:n.taxPayerNo,isDefault:n.isDefault});else{if(o.taxPayerNo&&c>=10)return;if(!o.taxPayerNo&&d>=10)return;(0,D.updateInvoiceTitle)({ID:"",operationType:"1",invoiceTitle:l,taxPayerNo:p,isDefault:"0"})}}"04"==u&&h&&(0,D.saveInvoiceEmail)(h),i.showToast({title:"发票保存成功!",icon:"none",duration:2e3}),t((function(){i.navigateBack()}),600),i.na})).catch((function(e){console.log(e),i.showToast({title:e.msg,icon:"none",duration:2e3})}))},setState:function(e){var t=e.currentTarget.dataset,a=t.key,o=t.value;this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},a,o))},modelSave:function(e){var t=e.detail,a=this.data.vatInfo;if(t){var o=t[0]||{},n=o.code,i=o.name,r=t[1]||{},s=r.code,c=r.name,d=t[2]||{},u=d.code,l=d.name,p=t[3]||{},f=p.code,h=p.name,g=p.smTownCode;a.state=i,a.stateCode=n,a.city=c,a.cityCode=s,a.streetCode=f,a.street=h,a.townCode=u,a.town=l,this.setData({vatInfo:a,isOpenADSelect:!1,smTownCode:g})}else this.setData({isOpenADSelect:!1})},clear:function(e){var t=this.data.selected,a=e.currentTarget.dataset.name;"taxPayerEmail"==a?t["_"+a+"_"]="":t[a]="",this.setData({selected:t})},clearVatInfo:function(e){var t=this.data.vatInfo;t[e.currentTarget.dataset.name]="",this.setData({vatInfo:t})},trimStr:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}})})),window.define("631",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(232),I=e(247),P=(I.Toast,I.getCmmdtyInfoByShop),D=(I.debounce,e(77).saSendLog);Page({data:{shopList:[],pageid:"772",saPgnm:"pgcate=10009;tag=100082;pgtitle=购物车2",subsidies:{},STORAGE_MESSAGES:{}},autoclick:function(e){D("click",{event:e})},onLoad:function(e){this.initialize(e)},onReady:function(){},onShow:function(){D("autoexpo",this)},initialize:function(e){e.cart2No;var t=e.isYuDing,a=e.isMD,o=[];try{o=n.getStorageSync("cart2GuideList")||{}}catch(e){}var i=(0,T.getStore)("cart2Data",{cmmdtyInfoItems:[],shopInfos:[]}),r=i.cmmdtyInfoItems,s=i.shopInfos,c=P({shopInfos:s,cmmdtyInfoItems:r,STORAGE_MESSAGES:o});console.log(c),this.setData({shopList:c,shopInfos:s,isYuDing:"true"==t,isMD:"true"==a,STORAGE_MESSAGES:o})},changeGuideText:function(e){var t=e.detail,a=t.shopCode,o=t.guideText,i=this.data.STORAGE_MESSAGES;i[a]=o,n.setStorageSync("cart2GuideList",i)},onChangeSubsidy:function(e){var t=this.data.subsidies;this.setData({subsidies:Object.assign({},t,e.detail)})}})})),window.define("634",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(635);Page({onLoad:function(e){this.option=e||{}},onShow:function(){n.redirectTo({url:(0,T.buildUrl)("/packageA/pages/order/cart4/cart4",this.option)})}})})),window.define("635",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.buildUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];for(var o in t)a.push(o+"="+encodeURIComponent(t[o]));var n=~e.indexOf("?")?"&":"?";return""+e+n+a.join("&")}})),window.define("638",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25),I=T.requestPromise,P=T.checkLogin,D=e(245),x="https://oss.suning.com/smcp/smcpgameplatform/fanxian/back.jpg";Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,shareUrl:"",redOrderId:"",activityId:"",packageUrl:""},onLoad:function(e){function t(e){for(var t,a=[],o=e.slice(e.indexOf("?")+1).split("&"),n=0;n<o.length;n++)t=o[n].split("="),a.push(t[0]),a[t[0]]=t[1];return a}var a=decodeURIComponent(e.shareUrl),o=(a.split("?")[1].split("&"),a.split("?")[0]);o=o.replace(/^\//,"");var i=t(a).orderRedId,r=t(a).activityCode;this.setData({shareUrl:decodeURIComponent(e.shareUrl),redOrderId:i,activityId:r,packageUrl:o});var s=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),s.setData({ratio:e.pixelRatio})}}),this.init()},onReady:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a=(D.cms,{src:x,x:0,y:0,width:600,height:901});function o(){var a={src:x+"card"+e.data.cardId+".png",x:225,y:460,width:150,height:150};e.drawImage(t,a,i)}function i(){var a={content:(e.data.isMain,""),size:30,color:"#fff",position:{x:28,y:688}};e.fillText(t,a);var o={content:(e.data.isMain,""),size:30,color:"#fff",position:{x:28,y:727}};e.fillText(t,o),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){e.data.isMain?i():o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},setCardState:function(){},init:function(){P().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a=this;console.log("二维码图片地址：：",a.data.shareUrl);var o=D.act+"/act-wap-web/wechat/program/geturl.do";console.log("scene参数值：",a.data.token+(a.data.isMain?"":"?"+a.data.type));var n;n={page:a.data.packageUrl,scene:a.data.redOrderId+"?"+a.data.activityId},console.log("_data",n),console.log("_url",o),I({method:"GET",url:o,dataType:"json",data:n}).then((function(o){console.log("二维码图片地址：：",o.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),o&&o.data&&o.data.imageUrl){var n={src:o.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};a.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("641",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=E(e(54)),D=e(247),x=E(e(612)),_=e(25),k=e(613),L=e(23),N=e(245);function E(e){return e&&e.__esModule?e:{default:e}}var O=function(e){return!!e.filter((function(e){var t=e.serviceFlag;e.serviceType;return!!~["21","22","23"].indexOf(t)})).length},A=function(e){return!!e.filter((function(e){var t=e.serviceFlag;e.serviceType;return!!~["14"].indexOf(t)})).length},R=function(e){return!!e.filter((function(e){var t=e.serviceFlag,a=e.serviceType;return"17"==t&&"Y"==a})).length},M=!1,U={detectTouchStart:P.default.detectTouchStart,detectTouchMove:P.default.detectTouchMove,detectTouchEnd:P.default.detectTouchEnd,detectTap:P.default.detectTap,detectLongPress:P.default.detectLongPress,data:{platform:(0,L.getPlatformType)(),pageid:"771",saPgnm:"pgcate=10009;tag=100081;pgtitle=购物车1/B",cartHeadInfo:{},cmmdtyInfos:[],discountInfos:[],errorInfos:[],fareRules:[],unsatisfiedList:[],shops:[],propertys:{},dynamicPropertys:null,usebleCoupon:null,goldApps:null,usableCouponShop:null,host:N.Host,screenHeight:0,JianJiaItems:[],jjIndex:0,scrollTop:0},onLoad:function(){var e=this;console.log("开始",Date.now()),(0,_.checkLogin)().then((function(){e.initialize()})).catch((function(){console.log("未登录的场景")})),P.default.init("mainApp"),i.getSystemInfo({success:function(t){var a=t.windowHeight;t.windowWidth;e.setData({winHeight:a})}})},onShow:function(){var e=this;(0,_.checkLogin)().then((function(){e.initializeDiff(),e.initialize(),e.setData({notLogin:!1})})).catch((function(){e.setData({notLogin:!0})})),(0,_.saSendPageViewLog)()},initializeDiff:function(){var e;this._diff=(e=!1,function(t,a){if(!e)return e=!0,console.log("第一次"),a;console.log("第二次");var o={cartHeadInfo:t.cartHeadInfo,cmmdtyInfos:t.cmmdtyInfos,disabledWX:t.disabledWX,discountInfos:t.discountInfos,errorInfos:t.errorInfos,fareRules:t.fareRules,shops:t.shops,unsatisfiedList:t.unsatisfiedList},n=(0,x.default)(a,o);return console.log("diff--\x3e",n),n})},initialize:function(){var e=this;M||(console.log("首页加载..."),M=!0,(0,k.showTempCartInfo)().then((function(t){return e.parseResult(t)})).then((function(a){return a.disabledWX.length?e.onDisSupportWX(a):t((function(){e.getStaticAPIS(a),e.getDynamicAPIS(a)}),1800),"loadComplete"})).catch((function(e){return console.log(e),"loadComplete"})).then((function(){M=!1})))},onPullDownRefresh:function(){var e=this;this.initializeDiff(),Promise.resolve(i.showLoading({title:"加载中",mask:!0})).then((function(){return(0,k.showTempCartInfo)()})).then((function(t){return e.parseResult(t)})).then((function(t){e.getDynamicAPIS(t),i.hideLoading(),i.stopPullDownRefresh()})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},onReachBottom:function(){},autoclick:function(e){(0,_.saSendLog)("click",{event:e})},goLogin:function(){i.showLoading({title:"请稍候",mask:!0}),(0,_.checkLogin)({toLogin:!0}).then((function(e){i.hideLoading()})).catch((function(e){i.hideLoading()}))},parseResult:function(e){var a=this,o=e.cmmdtyInfos,n=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["cmmdtyInfos"]),i=n.errorInfos,r=n.discountInfos,s=[],c=[],d=o.reduce((function(e,t,a){var o=t.mainCmmdtyInfo,n=o.mainCmmdtyDetailInfo,d=n.shopCode,u=n.shopName,l=n.cmmdtyCode,p=n.tmFlag,f=n.overSeasFlag,h=n.cmmdtyStatus,g=n.tickStatus,m=n.itemNo,v=(n.cmmdtyName,n.firstSalesPrice),y=n.salesPrice,w=n.overSeaCommonlyFlag,b=o.serviceProperties,C=t.cmmdtyHeadInfo.activityType,S="0000000000"==d,T=!(!f||!~["927HWG1","927HWG"].indexOf(f)),I="1"==p,P="",D="",x=u;T?(D="HWG",P=S?"SN_HWG_"+d:"C_HWG_"+d,S&&(x="苏宁国际官方直营")):I?(D="FS",P="FS",x="苏宁Outlets"):(D=S?"SN":"cShop",P=S?"SN_"+d:"C_"+d,S&&"1"==w&&(P="HWG_YBMY",D="HWG_YBMY"));var _=i.filter((function(e){return e.itemNo===m})),k=0;if(_&&_.length){var L=_[0],N=L.errorCode;L.errorMessage;"07"==C?k=2:"15"==C?k=3:"CSC-36-0004"==N?k="20"==C?2:"21"==C?3:4:"CSC-32-0010"==N&&(k=1)}var E=a,M=null,U=r.filter((function(e){var t=e.cmmdtyLineInfos;e.discountDetailInfo;return t.some((function(e){return e.itemNo==m}))})).map((function(e){return e.discountDetailInfo}))||[];if(U.length&&(E=(M=U[0]).promotionId),Object.assign(t,{config:{isSN:S,isHWG:T,isFS:I,isYBK:A(b),isO2O:O(b),isUnion:R(b),_key_:d+"-"+l,shopTypeKey:P,promotionId:E,order:a,disUseded:"16"==C||"24"==C,itemNo:m}}),e[P]||(e[P]={key:P,type:D,shopCode:d,shopName:x,promotions:{},invalids:[],disableds:[]}),e[P].promotions[E]||(e[P].promotions[E]={promotionId:E,order:a,discountDetailInfo:M,cmmdtyInfos:[]}),+h)if(k>0)e[P].disableds.push(Object.assign(t,{preState:k}));else if(t.config.isO2O||t.config.isYBK||"23"==C)+g&&c.push(m),e[P].disableds.push(Object.assign(t,{preState:0}));else{var j=v&&y&&+v>+y?(+v-+y).toFixed(2):"";j&&(t.config.parityPrice=j),s.push(t),e[P].promotions[E].cmmdtyInfos.push(t)}else e[P].invalids.push(t);return e}),{}),u=Object.assign({shops:Object.keys(d).map((function(e){var t=d[e].promotions;return t=Object.keys(t).map((function(e){return t[e]})).sort((function(e,t){return e.order-t.order})),Object.assign({},d[e],{promotions:t})})),cmmdtyInfos:s,disabledWX:c},n);return console.log("车1展示接口数据",u),this.setData(Object.assign({},this._diff(this.data,JSON.parse(JSON.stringify(u)))),(function(){t((function(){a.calculation()}),800)})),u},onDisSupportWX:function(e){if(e.disabledWX.length){var t=e.disabledWX.map((function(e){return{itemNo:e,tickStatus:"0"}}));this.onChangeCmmdtyInfo({detail:{type:"checked",playload:t}})}},getStaticAPIS:function(e){var t=this,a=(e.cartHeadInfo,e.cmmdtyInfos),o=(e.discountInfos,[]);a.forEach((function(e){var t=e.mainCmmdtyInfo,a=e.subCmmdtyInfos,n=t.mainCmmdtyDetailInfo,i=n.cmmdtyCode,r=n.shopCode;"1"==n.cmmdtyStatus&&(a.length?a.forEach((function(e){var t=e.subCmmdtyHeadInfo;o.push(t.cmmdtyCode+"-"+r)})):o.push(i+"-"+r))})),Promise.all([(0,k.getProductDetails)(o),(0,k.getPoplabels)(a)]).then((function(e){var a=I(e,2),o=a[0],n=a[1];t.setData({propertys:{details:o,labels:n}},(function(){}))}))},getDynamicAPIS:function(e){var t=this,a=e.cartHeadInfo,o=e.cmmdtyInfos,n=e.discountInfos;Promise.all([(0,k.getActUrl)({cmmdtyInfos:o,discountInfos:n}),(0,k.queryUsableCoupon)(a,o,n),(0,k.queryShoppingGoldApp)(a.cityCode,o),(0,k.queryFreeCouponStatusApp)({cartHeadInfo:a,cmmdtyInfos:o})]).then((function(e){var a=I(e,4),o=a[0],n=a[1],i=a[2],r=a[3];t.setData({dynamicPropertys:{acts:o},usebleCoupon:n,goldApps:i,usableCouponShop:r})}))},toHrefGold:function(){var e=this.data.goldApps;0==e.goldUrl.indexOf("//")&&(e.goldUrl="https:"+e.goldUrl);var t="/pages/webView/index?webViewSrc="+e.goldUrl;i.navigateTo({url:t})},onChangeCmmdtyInfo:function(e){var t=this;"checkedAll"==e.detail.type&&this.initializeDiff(),"reload"==e.detail.type?Promise.resolve(i.showLoading({title:"加载中",mask:!0})).then((function(){return(0,k.showTempCartInfo)()})).then((function(e){return t.parseResult(e)})).then((function(e){return t.getDynamicAPIS(e)})).then((function(){i.hideLoading(),e.detail.onClose&&e.detail.onClose()})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})})):e.detail.playload.length&&Promise.resolve().then((function(){return(0,k.updateTempCartInfo)(e.detail.playload)})).then((function(e){return t.parseResult(e)})).then((function(e){return t.getDynamicAPIS(e)})).catch((function(e){return i.showToast({title:e.msg,icon:"none",duration:2e3})}))},goHome:function(){i.switchTab({url:"/pages/index/index"})},calculation:function(){var e=this;i.createSelectorQuery().selectAll(".npl-intro").boundingClientRect((function(t){e.setData({JianJiaItems:t})})).exec()},toFixedPosition:function(){var e=this,t=this.data,a=t.jjIndex,o=t.scrollTop;i.createSelectorQuery().selectAll(".npl-intro").boundingClientRect((function(t){t[a]?(i.pageScrollTo({scrollTop:t[a].top+o-60}),a++,e.setData({jjIndex:a})):e.setData({jjIndex:0})})).exec(),(0,_.saSendLog)("manuclick",{modid:"2",eleid:"771002054"})},onPageScroll:(0,D.debounce)((function(e){e.scrollTop<50&&this.setData({jjIndex:0}),this.setData({scrollTop:e.scrollTop})}),300)};Page(U)})),window.define("644",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(78),P=(T=I)&&T.__esModule?T:{default:T};var D=e(25).requestPromise,x=e(20).getCityCode,_=e(8),k=e(22);Page({data:{itemList:[],currentIndex:0,categoryList:[],isLoading:!1,screenH:0,screenW:0,scrollLeft:0,scrollTop:"",offsetTop:"",showToTop:!1,cityCode:""},onLoad:function(){this.initRankPage()},initRankPage:function(){this.getSystemInfo(),this.initRankData(this)},initRankData:function(e){this.initRankCategory(e)},initRankCategory:function(e){var t=this,a=(0,P.default)().custno||"",o="",n="";x().then((function(i){o=i.cityLESId||"025",e.data.cityCode=o,n=_.rec+"/recommend-portal/dyBase.jsonp?u="+a+"&c=&cityId="+o+"&count=15&date=1&sceneIds=6-53&callback=cate_6_53",D({url:n}).then((function(a){var o=k(a).sugGoods[0].skus;o.length&&e.setData({categoryList:o}),t.queryRankList(e)})).catch((function(t){e.setData({})}))}))},queryRankList:function(e,t){t=null==t||null==t?this.data.categoryList[0].categoryId:t;var a=(0,P.default)().custno||"",o=this.data.cityCode||"025",i="";t||(n.showLoading({title:"加载中",mask:!0}),e.setData({isLoading:!0}),i=_.rec+"/recommend-portal/dyBase.jsonp?u="+a+"&c=&cityId="+o+"&count=70&date=1&catalogueId="+catalogueId+"&sceneIds=6-60&callback=sale_6_60__1531103518002",D({url:i}).then((function(t){var a=k(t);if("01"===a.sugGoods[0].resCode){var o=a.sugGoods[0].skus;o.length?(o.forEach((function(e){e.pictureUrl=0==e.pictureUrl.indexOf("http")?e.pictureUrl:"https:"+e.pictureUrl})),e.setData({itemList:o,hasLoad:!0})):e.setData({itemList:[],hasLoad:!0})}n.hideLoading()})).catch((function(t){console.log(t),e.setData({itemList:[],hasLoad:!0})})));var r=_.rec+"/recommend-portal/dyBase.jsonp?u="+a+"&c=&cityId="+o+"&count=70&date=1&catalogueId="+t+"&sceneIds=6-60&callback=6-60";n.showLoading({title:"加载中",mask:!0}),e.setData({isLoading:!0}),D({url:r}).then((function(t){var a=k(t).sugGoods[0].skus;a.map((function(e){e.saleIndex=parseInt(e.saleIndex)})),a.length?(a.forEach((function(e){e.pictureUrl=0==e.pictureUrl.indexOf("http")?e.pictureUrl:"https:"+e.pictureUrl})),e.setData({itemList:a})):e.setData({itemList:[]}),n.hideLoading()})).catch((function(e){console.log(e)}))},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},getCurRankCategory:function(e){var t=(e-2)*(this.data.screenW/375*75);this.setData({currentIndex:e,scrollLeft:t})},switchClick:function(e){var t=e.currentTarget.dataset.index,a=(e.currentTarget.dataset.categoryName,e.currentTarget.dataset.categoryId);this.setData({currentIndex:t}),this.getCurRankCategory(t),this.queryRankList(this,a)},onTapMove:function(){this.setData({scrollTop:0})},sticky:function(e){try{var t=this;n.createSelectorQuery().select("#category-bar").boundingClientRect((function(e){null!=e&&(e.top<0!=t.data.tabFix&&t.setData({tabFix:!t.data.tabFix}))})).exec()}catch(e){}},scroll:function(e){var t=e.detail.scrollTop;this.showTop(t)},showTop:function(e){e>2*this.data.screenH?this.setData({showToTop:!0}):this.setData({showToTop:!1})},jump2FourthPage:function(e){var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop;0==a&&(a="0000000000"),n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})}})})),window.define("647",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{},onLoad:function(e){n.navigateTo({url:"/packageA/pages/couponList/single/index?id="+e.id+"&key="+e.key})},onReady:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("650",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=P(e(54)),I=(P(e(651)),e(652));function P(e){return e&&e.__esModule?e:{default:e}}var D=e(8),x=e(20).getCityCode,_=e(25),k=_.requestPromise,L=_.baseJump,N=_.saSendPageViewLog,E=_.checkLogin,O=e(276).addCart;Page({data:{saPgnm:"pgcate=10003;prdtp=00027;tag=100010;pgtitle=通用促销页",tdk:{},models:[],host:D,tipsUrl:[],isTips:!1,noMore:!1},onLoad:function(e){var t=this,a=e.pageid||"";this.setData({pageid:a}),t.getSystemInfo(),console.log("22",D.cms+"/api/json/"+a+".json"),n.request({url:D.cms+"/api/json/"+a+".json",success:function(e){var a=function(e){var t,a=e&&e.data;t=a,"[object Array]"!=Object.prototype.toString.call(t)&&(a=[]);var o={tdk:{},models:[]};return a.forEach((function(e,t){if(e.hasOwnProperty("s2_title")){if(e.s2_title.tag&&e.s2_title.tag.length>0){var a=e.s2_title.tag[0],n={title:a.elementName,description:a.elementDesc};o.tdk=n}}else{var i={_firstModelCode:!1};for(var r in e)if(/^s2_flag/.test(r)){if(e[r].tag&&e[r].tag.length>0){var s=e[r].tag[0].elementName,c=s&&s.split("_").shift(),d=s&&s.split("_").pop();i._flag=s,i._tabGroup=c,/^\d+$/.test(d)&&(i._tabIndex=d)}}else e[r].tag&&(/^s2_tab/.test(r)&&e[r].tag.forEach((function(e,t){var a=e.elementDesc,o=a&&a.split("_").shift(),n=a&&a.split("_").pop();e._flag=a,e._tabGroup=o,/^\d+$/.test(n)&&(e._tabIndex=n)})),i[r]=e[r].tag,i.firstModelCode||(i._firstModelCode=r));o.models.push(i)}})),o}(e);t.setData(a),t.dealproductInfo(),t.getTips(),t.parseTab(),a.tdk.title&&t.setNavigationBarTitle(a.tdk),console.log("44",t.data.models)}})},onShow:function(){N()},onReady:function(){this.cxToast=this.selectComponent("#cx-toast")},setNavigationBarTitle:function(e){n.setNavigationBarTitle({title:e.title})},imgSplicing:function(e){e.forEach((function(e){e.picUrl?(console.log("2222222"),e.picUrl=0==e.picUrl.indexOf("https")?e.picUrl:""+D.img+e.picUrl):(console.log("333333333"),e.picUrl=""+D.img+e.shopPicUrl+"1_400x400.jpg")}))},dealTips:function(e){var t=this;e.forEach((function(e){if(e.wpelementDesc&&e.wpelementDesc.length>0){var a=e.wpelementDesc;t.setData({isTips:!0}),t.data.tipsUrl.forEach((function(t){t.elementName==a&&(e.goodTipUrl=t.picUrl)}))}}))},getTips:function(){var e=this,t=[],a=e.data.models;a.forEach((function(o){"s2_good_tip"==o._firstModelCode&&o.s2_good_tip&&o.s2_good_tip.length&&(e.imgSplicing(o.s2_good_tip),t=o.s2_good_tip),e.setData({models:a,tipsUrl:t})}))},parseTab:function(){var e=this,t=e.data.models,a=0;t.forEach((function(t){"s2_goods1"==t._firstModelCode&&t.s2_goods1&&t.s2_goods1.length&&(elem.price&&(elem.integerPrice=(0,I.integerFilter)(elem.price),elem.decimalPrice=(0,I.decimalFilter)(elem.price)),e.imgSplicing(t.s2_goods1),e.dealTips(t.s2_goods1),a=1),"s2_goods2"==t._firstModelCode&&t.s2_goods2&&t.s2_goods2.length&&(t.s2_goods2.forEach((function(e){e.price&&(e.integerPrice=(0,I.integerFilter)(e.price),e.decimalPrice=(0,I.decimalFilter)(e.price))})),e.imgSplicing(t.s2_goods2),e.dealTips(t.s2_goods2),a=1),"s2_goods3"==t._firstModelCode&&t.s2_goods3&&t.s2_goods3.length&&(t.s2_goods3.forEach((function(e){e.price&&(e.integerPrice=(0,I.integerFilter)(e.price),e.decimalPrice=(0,I.decimalFilter)(e.price))})),e.imgSplicing(t.s2_goods3),e.dealTips(t.s2_goods3),a=1),"s2_tab_pic"==t._firstModelCode&&t.s2_tab_pic&&t.s2_tab_pic.length&&t.s2_tab_pic.forEach((function(e){1==e._tabIndex&&(e.isSelected=!0)})),"s2_tab_text"==t._firstModelCode&&t.s2_tab_text&&t.s2_tab_text.length&&t.s2_tab_text.forEach((function(e){1==e._tabIndex&&(e.isSelected=!0)})),t._flag&&t._tabGroup&&t._tabIndex&&1!=t._tabIndex&&(t._tabHide=!0)})),e.setData({models:t,count:a})},baseJump:function(e){var t=e.currentTarget.dataset.jumpurl;L(t)},jump2Fourth:function(e){console.log("正常",e);var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop,o=e.currentTarget.dataset.shoptype,i=e.currentTarget.dataset.shopcode;switch(o){case"5":n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+i+"&title="}),console.log("跳转特卖商品");break;default:n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})}},changeTab:function(e){var t=e.currentTarget.dataset.tabgroup,a=e.currentTarget.dataset.tabindex,o=this.data.models;o.forEach((function(e){"s2_tab_pic"==e._firstModelCode&&e.s2_tab_pic&&e.s2_tab_pic.length&&e.s2_tab_pic.forEach((function(e){e._tabGroup==t&&(e._tabIndex==a?e.isSelected=!0:e.isSelected=!1)})),"s2_tab_text"==e._firstModelCode&&e.s2_tab_text&&e.s2_tab_text.length&&e.s2_tab_text.forEach((function(e){e._tabGroup==t&&(e._tabIndex==a?e.isSelected=!0:e.isSelected=!1)})),e._tabGroup==t&&(e._tabIndex==a?e._tabHide=!1:e._tabHide=!0)})),this.setData({models:o}),this.getCurrentTabLeft(a)},dealproductInfo:function(){var e=this.data.models,t=this;e.forEach((function(e){"s2_goods1"==e._firstModelCode&&e.s2_goods1.length&&t.getIdsArr(e.s2_goods1),"s2_goods2"==e._firstModelCode&&e.s2_goods2.length&&t.getIdsArr(e.s2_goods2),"s2_goods3"==e._firstModelCode&&e.s2_goods3.length&&t.getIdsArr(e.s2_goods3)}))},getIdsArr:function(e){if(e.length>20){for(var t=Math.ceil(e.length/20),a=[],o=0;o<t;o++){var n=e.slice(20*o,20*(o+1));a.push(n)}for(o=0;o<a.length;o++)this.loadPriceData(a[o])}else this.loadPriceData(e)},loadPriceData:function(e){var t=this;if(e.length<=0)return!1;for(var a=[],o=[],n=0;n<e.length;n++)a.push(("000000000000000000"+e[n].partnumber).slice(-18)),"0"==e[n].vendorCode?o.push("0000000000"):o.push(e[n].vendorCode);x().then((function(e){var n=e.cityLESId||"025",i=D.icps+"/icps-web/getVarnishAllPrice014/"+a.join(",")+"_"+n+"__"+o.join(",")+"_5_CPFCallback1504150510242.vhtm";k({url:i,dataType:"jsonp"}).then((function(e){var a=t.data.models,o=t;e.forEach((function(e){a.forEach((function(t){"s2_goods1"==t._firstModelCode&&t.s2_goods1.length&&o.processInfo(t.s2_goods1,e,o),"s2_goods2"==t._firstModelCode&&t.s2_goods2.length&&o.processInfo(t.s2_goods2,e,o),"s2_goods3"==t._firstModelCode&&t.s2_goods3.length&&o.processInfo(t.s2_goods3,e,o)}))})),o.setData({models:a,noMore:!0})}))}))},processInfo:function(e,t,a){e.forEach((function(e){var o=e.partnumber;if((o=("000000000000000000"+o).slice(-18))==t.cmmdtyCode){var n=t.price,i=t.snPrice,r=t.refPrice,s=t.status,c=t.invStatus;e.gbPrice=t.price,""!=n&&2!=c&&3!=c&&2!=s||(e.soldout=!0),3!=c&&2!=s||(e.txt="暂不销售"),2==c&&(e.txt="无货"),e.gbPrice=n,i?(Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(r)>Number(i)&&(e.result=a.formatPrice(r)),r&&Number(r)<Number(i)&&(e.result=a.formatPrice(i)),!r&&Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(n)<Number(i)&&Number(n)<Number(r)&&(e.result=a.formatPrice(r)),r||Number(n)!=Number(i)||(e.result=""),r&&Number(n)==Number(i)&&Number(n==Number(r))&&(e.result=""),r&&Number(n)<Number(i)&&Number(n>=Number(r))&&(e.result="")):e.result=""}}))},formatPrice:function(e){if(e){var t=e.split("."),a=void 0;if(2==t.length){for(var o=t[1],n=!0,i=0;i<o.length;i++)if(0==o.charAt(o.length-1)&&(t[1]=t[1].substring(0,t[1].length-1)),0!=o.charAt(i)){n=!1;break}a=n?t[0]:t[0]+"."+t[1]}else a=e;return a}},onShareAppMessage:function(){var e=this.data.pageid;return{title:this.data.tdk.description||"苏宁易购",path:"/pages/cuxiao/cx0103/index?pageid="+e}},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},getCurrentTabLeft:function(e){var t=(e-2)*(this.data.screenW/375*75);this.setData({scrollLeft:t})},addCart:function(e){var t=this;E().then((function(){var a=t;n.showLoading({title:"请稍候",mask:!0});var o=e.currentTarget.dataset.productid;if(o=("000000000000000000"+o).slice(-18),console.log("2",e.currentTarget.dataset.soldout),e.currentTarget.dataset.soldout)return n.hideLoading(),void a.jump2Fourth(e);var i={};i.cmmdtyCode=o,""===e.currentTarget.dataset.shop||0===e.currentTarget.dataset.shop?i.shopCode="0000000000"+e.currentTarget.dataset.shop:i.shopCode=e.currentTarget.dataset.shop,i.detect=T.default.getTrack()||"",O(i).then((function(t){n.hideLoading(),!!(t&&t.data&&t.data.cartHeadInfo&&"Y"===t.data.cartHeadInfo.isSuccess)?a.cxToast.showToast("加入购物车成功"):a.jump2Fourth(e)}))}))}})})),window.define("651",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=function(e){this.init(e),this.send()};T.prototype={init:function(e){this.url=e},makeUniqKey:function(){var e=Math.round(1e5*Math.random());return this.getTime()+e},getTime:function(){return(new Date).getTime()+""},getUtmParams:function(e){for(var t=(e=e||"").split("&"),a={},o=0,n=t.length;o<n;o++){var i=t[o].split("=");a[i[0]]=i[1]}return{sr:a.utm_source||"",md:a.utm_medium||"",con:a.utm_content||"",ac:a.utm_campaign||"",th:a.utm_term||""}},getVisitorId:function(){var e;if(e=n.getStorageSync("visitor_id"))return e;var t=this.makeUniqKey();return n.setStorage({key:"visitor_id",data:t}),t},buildParams:function(){var e={i:"a65ae48e",ct:this.getTime(),id:this.makeUniqKey(),furl:"",t:1,uid:"",pvid:this.makeUniqKey(),sid:"",curl:this.url,vid:this.getVisitorId()};return e=Object.assign(e,this.getUtmParams(this.url.split("?")[1]))},send:function(){var e="https://ssac.suning.com/js.gif?",t=[],a=this.buildParams();for(var o in a)t.push(o+"="+encodeURIComponent(a[o]));e+=t.join("&"),n.request({url:e,success:function(e){console.log("bi send complete!")}})}},a.default=T})),window.define("652",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={integerFilter:function(e){return e.split(".")[1]?e.split(".")[0]+".":e.split(".")[0]},decimalFilter:function(e){return e.split(".")[1]?e.split(".")[1]:""}}})),window.define("655",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=x(e(54)),P=(x(e(651)),e(652)),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(e(39));function x(e){return e&&e.__esModule?e:{default:e}}var _=e(8),k=e(20).getCityCode,L=e(25),N=L.requestPromise,E=L.baseJump,O=L.saSendPageViewLog,A=(L.checkLogin,e(276).addCart);Page({data:{saPgnm:"pgcate=10003;prdtp=00027;tag=100010;pgtitle=通用促销页",tdk:{},models:[],host:_,tipsUrl:[],isTips:!1,noMore:!1},onLoad:function(e){var t=this,a=e.pageid||"";this.setData({pageid:a,baseOptions:e}),t.getSystemInfo(),console.log("22",_.cms+"/api/json/"+a+".json"),i.request({url:_.cms+"/api/json/"+a+".json",success:function(e){var a=function(e){var t,a=e&&e.data;t=a,"[object Array]"!=Object.prototype.toString.call(t)&&(a=[]);var o={tdk:{},models:[]};return a.forEach((function(e,t){if(e.hasOwnProperty("s2_title")){if(e.s2_title.tag&&e.s2_title.tag.length>0){var a=e.s2_title.tag[0],n={title:a.elementName,description:a.elementDesc};o.tdk=n}}else{var i={_firstModelCode:!1};for(var r in e)if(/^s2_flag/.test(r)){if(e[r].tag&&e[r].tag.length>0){var s=e[r].tag[0].elementName,c=s&&s.split("_").shift(),d=s&&s.split("_").pop();i._flag=s,i._tabGroup=c,/^\d+$/.test(d)&&(i._tabIndex=d)}}else e[r].tag&&(/^s2_tab/.test(r)&&e[r].tag.forEach((function(e,t){var a=e.elementDesc,o=a&&a.split("_").shift(),n=a&&a.split("_").pop();e._flag=a,e._tabGroup=o,/^\d+$/.test(n)&&(e._tabIndex=n)})),i[r]=e[r].tag,i.firstModelCode||(i._firstModelCode=r));o.models.push(i)}})),o}(e);t.setData(a),t.dealproductInfo(),t.getTips(),t.parseTab(),a.tdk.title&&t.setNavigationBarTitle(a.tdk),console.log("44",t.data.models)}})},onShow:function(){O()},onReady:function(){this.cxToast=this.selectComponent("#cx-toast")},setNavigationBarTitle:function(e){i.setNavigationBarTitle({title:e.title})},imgSplicing:function(e){e.forEach((function(e){e.picUrl?(console.log("2222222"),e.picUrl=0==e.picUrl.indexOf("https")?e.picUrl:""+_.img+e.picUrl):(console.log("333333333"),e.picUrl=""+_.img+e.shopPicUrl+"1_400x400.jpg")}))},dealTips:function(e){var t=this;e.forEach((function(e){if(e.wpelementDesc&&e.wpelementDesc.length>0){var a=e.wpelementDesc;t.setData({isTips:!0}),t.data.tipsUrl.forEach((function(t){t.elementName==a&&(e.goodTipUrl=t.picUrl)}))}}))},getTips:function(){var e=this,t=[],a=e.data.models;a.forEach((function(o){"s2_good_tip"==o._firstModelCode&&o.s2_good_tip&&o.s2_good_tip.length&&(e.imgSplicing(o.s2_good_tip),t=o.s2_good_tip),e.setData({models:a,tipsUrl:t})}))},parseTab:function(){var e=this,t=e.data.models,a=0;t.forEach((function(t){"s2_goods1"==t._firstModelCode&&t.s2_goods1&&t.s2_goods1.length&&(e.imgSplicing(t.s2_goods1),e.dealTips(t.s2_goods1),a=1),"s2_goods2"==t._firstModelCode&&t.s2_goods2&&t.s2_goods2.length&&(e.imgSplicing(t.s2_goods2),e.dealTips(t.s2_goods2),a=1),"s2_goods3"==t._firstModelCode&&t.s2_goods3&&t.s2_goods3.length&&(e.imgSplicing(t.s2_goods3),e.dealTips(t.s2_goods3),a=1),"s2_tab_pic"==t._firstModelCode&&t.s2_tab_pic&&t.s2_tab_pic.length&&t.s2_tab_pic.forEach((function(e){1==e._tabIndex&&(e.isSelected=!0)})),"s2_tab_text"==t._firstModelCode&&t.s2_tab_text&&t.s2_tab_text.length&&t.s2_tab_text.forEach((function(e){1==e._tabIndex&&(e.isSelected=!0)})),t._flag&&t._tabGroup&&t._tabIndex&&1!=t._tabIndex&&(t._tabHide=!0)})),e.setData({models:t,count:a}),console.log(this.data.models,"curry")},baseJump:function(e){var t=e.currentTarget.dataset.jumpurl||e.currentTarget.dataset.jumpUrl;E(t)},jump2Fourth:function(e){console.log("正常",e);var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop,o=e.currentTarget.dataset.shoptype,n=e.currentTarget.dataset.shopcode;switch(o){case"5":i.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+n+"&title="}),console.log("跳转特卖商品");break;default:i.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})}},changeTab:function(e){var t=e.currentTarget.dataset.tabgroup,a=e.currentTarget.dataset.tabindex,o=this.data.models;o.forEach((function(e){"s2_tab_pic"==e._firstModelCode&&e.s2_tab_pic&&e.s2_tab_pic.length&&e.s2_tab_pic.forEach((function(e){e._tabGroup==t&&(e._tabIndex==a?e.isSelected=!0:e.isSelected=!1)})),"s2_tab_text"==e._firstModelCode&&e.s2_tab_text&&e.s2_tab_text.length&&e.s2_tab_text.forEach((function(e){e._tabGroup==t&&(e._tabIndex==a?e.isSelected=!0:e.isSelected=!1)})),e._tabGroup==t&&(e._tabIndex==a?e._tabHide=!1:e._tabHide=!0)})),this.setData({models:o}),this.getCurrentTabLeft(a)},dealproductInfo:function(){var e=this.data.models,t=this;e.forEach((function(e){"s2_goods1"==e._firstModelCode&&e.s2_goods1.length&&t.getIdsArr(e.s2_goods1),"s2_goods2"==e._firstModelCode&&e.s2_goods2.length&&t.getIdsArr(e.s2_goods2),"s2_goods3"==e._firstModelCode&&e.s2_goods3.length&&t.getIdsArr(e.s2_goods3)}))},getIdsArr:function(e){if(e.length>20){for(var t=Math.ceil(e.length/20),a=[],o=0;o<t;o++){var n=e.slice(20*o,20*(o+1));a.push(n)}for(o=0;o<a.length;o++)this.loadPriceData(a[o])}else this.loadPriceData(e)},loadPriceData:function(e){var t=this;if(e.length<=0)return!1;for(var a=[],o=[],n=0;n<e.length;n++)a.push(("000000000000000000"+e[n].partnumber).slice(-18)),"0"==e[n].vendorCode?o.push("0000000000"):o.push(e[n].vendorCode);k().then((function(e){var n=e.cityLESId||"025",i=_.icps+"/icps-web/getVarnishAllPrice014/"+a.join(",")+"_"+n+"__"+o.join(",")+"_5_CPFCallback1504150510242.vhtm";N({url:i,dataType:"jsonp"}).then((function(e){var a=t.data.models,o=t;e.forEach((function(e){a.forEach((function(t){"s2_goods1"==t._firstModelCode&&t.s2_goods1.length&&o.processInfo(t.s2_goods1,e,o),"s2_goods2"==t._firstModelCode&&t.s2_goods2.length&&o.processInfo(t.s2_goods2,e,o),"s2_goods3"==t._firstModelCode&&t.s2_goods3.length&&o.processInfo(t.s2_goods3,e,o)}))})),o.setData({models:a,noMore:!0})}))}))},processInfo:function(e,t,a){e.forEach((function(e){var o=e.partnumber;if((o=("000000000000000000"+o).slice(-18))==t.cmmdtyCode){var n=t.price,i=t.snPrice,r=t.refPrice,s=t.status,c=t.invStatus;e.gbPrice=t.price,""!=n&&2!=c&&3!=c&&2!=s||(e.soldout=!0),3!=c&&2!=s||(e.txt="暂不销售"),2==c&&(e.txt="无货"),e.gbPrice=n,e.integerPrice=(0,P.integerFilter)(n),e.decimalPrice=(0,P.decimalFilter)(n),i?(Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(r)>Number(i)&&(e.result=a.formatPrice(r)),r&&Number(r)<Number(i)&&(e.result=a.formatPrice(i)),!r&&Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(n)<Number(i)&&Number(n)<Number(r)&&(e.result=a.formatPrice(r)),r||Number(n)!=Number(i)||(e.result=""),r&&Number(n)==Number(i)&&Number(n==Number(r))&&(e.result=""),r&&Number(n)<Number(i)&&Number(n>=Number(r))&&(e.result="")):e.result=""}}))},formatPrice:function(e){if(e){var t=e.split("."),a=void 0;if(2==t.length){for(var o=t[1],n=!0,i=0;i<o.length;i++)if(0==o.charAt(o.length-1)&&(t[1]=t[1].substring(0,t[1].length-1)),0!=o.charAt(i)){n=!1;break}a=n?t[0]:t[0]+"."+t[1]}else a=e;return a}},onShareAppMessage:function(){var e=this.data.pageid;return{title:this.data.tdk.description||"苏宁易购",path:"/pages/cuxiao/cx0103/index?pageid="+e}},getSystemInfo:function(){var e=this;i.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},getCurrentTabLeft:function(e){var t=(e-2)*(this.data.screenW/375*75);this.setData({scrollLeft:t})},addCart:function(e){var a=this;i.showLoading({title:"请稍候",mask:!0}),D.checkLogin().then((function(o){if(o.app){i.hideLoading();var n=a;i.showLoading({title:"请稍候",mask:!0});var r=e.currentTarget.dataset.productid;if(r=("000000000000000000"+r).slice(-18),console.log("2",e.currentTarget.dataset.soldout),e.currentTarget.dataset.soldout)return i.hideLoading(),void n.jump2Fourth(e);var s={};s.cmmdtyCode=r,""===e.currentTarget.dataset.shop||0===e.currentTarget.dataset.shop?s.shopCode="0000000000"+e.currentTarget.dataset.shop:s.shopCode=e.currentTarget.dataset.shop,s.detect=I.default.getTrack()||"",A(s).then((function(t){i.hideLoading(),!!(t&&t.data&&t.data.cartHeadInfo&&"Y"===t.data.cartHeadInfo.isSuccess)?n.cxToast.showToast("加入购物车成功"):n.jump2Fourth(e)}))}else{var c=o.sys?"/pages/unionLogin/first/first":"/pages/login/login";t((function(){i.hideLoading(),i.navigateTo({url:c})}),1500)}})).catch((function(){i.hideLoading()}))}})})),window.define("658",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=e(77),D=e(659),x=e(8),_=e(20).getCityCode,k=e(25),L=k.requestPromise,N=(k.baseJump,function(e){var t,a=e&&e.data;t=a,"[object Array]"!=Object.prototype.toString.call(t)&&(a=[]);var o={models:[],cacheData:[]};return a.forEach((function(e,t){var a=function(e){return"[object Array]"==Object.prototype.toString.call(e)};for(var n in e){if(/^tabtitleimg/.test(n)){if(e.name="tabimg",a(e[n].tag)&&e[n].tag.length>0){for(var i=e[n].nodes,r=i.length,s=e[n].tag,c=0;c<r;c++)I("undefined"!=i[c].tag)&&a(i[c].tag)?i[c].tag.length<2&&(delete i[c],delete s[c]):(delete i[c],delete s[c]);e[n].nodes=e[n].nodes.filter((function(e){return e.tag})),e[n].tag=e[n].tag.filter((function(e){return e})),e.tabtitleimglen=e[n].tag.length}else{if(!e.tabtitleword.tag)return!1;for(var d=e.tabtitleword.tag,u=e[n].nodes,l=u.length,p=0;p<l;p++)I("undefined"!=u[p].tag)&&a(u[p].tag)?u[p].tag.length<2&&(delete u[p],delete d[p]):(delete u[p],delete d[p]);if(e[n].nodes=e[n].nodes.filter((function(e){return e.tag})),e.tabtitleword.tag=e.tabtitleword.tag.filter((function(e){return e})),e.tabtitlelen=e.tabtitleword.tag.length,e.tabtitleword.tag)for(var f=(P=e.tabtitleword.tag).length,h=0;h<f;h++)P[h].elementName.length>6&&(e.tabtitleword.tag[h].elementName=P[h].elementName.substring(0,6))}if(!a(e[n].nodes))return!1;e[n].nodes=e[n].nodes.map((function(e){return e.tag&&(e.tag=e.tag.map((function(e){var t,a=JSON.stringify({eletp:"prd",prdid:e.partnumber,shopid:e.vendorCode});e.picUrl?t=x.cuxiao.images+e.picUrl:e.productPic&&(t="http:"+e.productPic),t=(0,D.addIsFormat)(t);var o=e.productUrl.split("/")[1],n="/pages/fourth/fourth?productId=0000000"+e.productUrl.split("/")[2].split(".")[0]+"&shop="+o+"&title=";return Object.assign({},e,{evdl:a,realproductUrl:n,realPicUrl:t})}))),Object.assign({},e)}));for(var g=(P=e.tabtitleimg.nodes).length,m=0;m<g;m++)if(P[m].tag)for(var v=P[m].tag,y=0,w=v.length;y<w;y++)P[m].tag&&v[y].elementName.length>20&&(P[m].tag[y].elementName=v[y].elementName.substring(0,20)+"...");else delete P[m]}if(/^tabtitletxt/.test(n)&&(e.name="tabtxt"),/^tyimgtp/.test(n)){if(e.name="tongyong",!a(e[n].tag))return!1;e[n].tag=e[n].tag.map((function(e){return Object.assign({},e,{realPicUrl:x.cuxiao.images+(0,D.addIsFormat)(e.picUrl)})}))}if(/^tt/.test(n)&&!/^ttxcxbjs/.test(n)){if(e.name="toutu",!a(e[n].tag))return!1;e[n].tag=e[n].tag.map((function(e){return e.picUrl?Object.assign({},e,{realPicUrl:x.cuxiao.images+(0,D.addIsFormat)(e.picUrl)}):e.productPic?Object.assign({},e,{realPicUrl:x.cuxiao.images+e.productPic}):void 0}))}if(/^yhesp/.test(n)){if(e.name="liangshangpin",!a(e[n].tag))return!1;var b=e[n].tag[0];b&&1==b.wpelementDesc&&(e[n].showThreeCols=!0),e[n].tag=e[n].tag.map((function(e){var t=e.elementName.length>20?e.elementName.substring(0,20)+"...":e.elementName,a=e.productUrl.split("/")[1],o="/pages/fourth/fourth?productId=0000000"+e.productUrl.split("/")[2].split(".")[0]+"&shop="+a+"&title=",n=JSON.stringify({eletp:"prd",prdid:e.partnumber,shopid:e.vendorCode});return e.picUrl?Object.assign({},e,{realproductUrl:o,elementName:t,evdl:n,realPicUrl:x.cuxiao.images+(0,D.addIsFormat)(e.picUrl)}):e.productPic?Object.assign({},e,{realproductUrl:o,elementName:t,evdl:n,realPicUrl:"http:"+(0,D.addIsFormat)(e.productPic)}):void 0}))}if(/^hct/.test(n)){e.name="pinpai";var C=function(e){return"[object Array]"==Object.prototype.toString.call(e)},S=e.bdt.tag,T=e.hct.tag,P=(f=0,0);if(C(S)){f=S.length;for(var _=0;_<f;_++)S[_].productSpecialFlag=S[_].productSpecialFlag.replace(/ /g,""),S[_].elementName.length>7&&(S[_].elementName=S[_].elementName.substring(0,7)),S[_].elementDesc.length>8&&(S[_].elementDesc=S[_].elementDesc.substring(0,8))}if(C(T)){P=T.length;for(var k=0;k<P;k++)T[k].elementName.length>6&&(T[k].elementName=T[k].elementName.substring(0,6)),T[k].elementDesc.length>8&&(T[k].elementDesc=T[k].elementDesc.substring(0,8))}}}o.cacheData.push(e)})),o});Page({data:{saPgnm:"",tdk:{},models:[],cacheData:[],host:x,background:"#f2f2f2",pageid:"",counts:1,toLeftback:-1,pullDown:!0,tablength:"",colortexts:"#FF5800"},onLoad:function(e){var t=this,a=this,o=e.pageid||"";this.setData({pageid:o}),_().then((function(e){t.setData({cityCode:e.cityLESId||"025"}),i.request({url:x.cms+"/api/json/"+o+".json",success:function(e){var t=N(e),o=[];function n(e){for(var o=(e=t.cacheData).length,n=0;n<o;n++)e[n].name,e[n].background&&e[n].background.tag&&a.setData({background:e[n].background.tag[0].elementName,colortexts:e[n].background.tag[0].elementName})}t.cacheData.forEach((function(e,t){Object.keys(e).includes("yhesp")&&e.yhesp.tag[0].templateFullId&&e.yhesp.modelFullId&&e.yhesp.plId&&o.push({index:t,templateFullId:e.yhesp.tag[0].templateFullId,modelFullId:e.yhesp.modelFullId,plId:e.yhesp.plId})})),a.requestNewPolld(o).then((function(e){"no"!==e&&e.forEach((function(e){e.forEach((function(e){1==e.list[0].wpelementDesc?e.list=e.list.slice(0,e.list.length-e.list.length%3):e.list=e.list.slice(0,e.list.length-e.list.length%2),e.list=e.list.map((function(e){var t=e.elementName,a=e.vendorCode,o="/pages/fourth/fourth?productId=0000000"+e.partnumber+"&shop="+a+"&title=",n=JSON.stringify({eletp:"prd",prdid:e.partnumber,shopid:e.vendorCode});return e.picUrl?Object.assign({},e,{realproductUrl:o,elementName:t,evdl:n,realPicUrl:x.cuxiao.images+(0,D.addIsFormat)(e.picUrl)}):Object.assign({},e,{realproductUrl:o,elementName:t,evdl:n,realPicUrl:"https:"+(0,D.addIsFormat)(e.productPic)})})),t.cacheData[e.index].yhesp.tag=e.list}))})),a.setData({cacheData:t.cacheData}),a.dealproductInfo(),n(t.cacheData)})).catch((function(){a.setData({cacheData:t.cacheData}),a.dealproductInfo(),n(t.cacheData)}))}})}))},onShow:function(){var e=this;this.data.saPgnm?(0,P.saSendLog)("pageview"):i.request({url:x.cms+"/api/page/"+this.data.pageid+".json",success:function(t){var a="pageid="+t.data.data.apiName+";pgcate=10002;pgtitle="+t.data.data.pageName;e.setData({saPgnm:a},(function(){(0,P.saSendLog)("pageview")}))}}),this.setData({counts:this.data.counts+1})},refreshmore:function(){var e=this;i.request({url:x.cms+"/api/json/"+e.data.pageid+".json",success:function(a){var o=N(a);e.setData({cacheData:o.cacheData}),e.dealproductInfo();for(var n=o.cacheData,r=n.length,s=0;s<r;s++)"tabimg"==n[s].name&&n[s].tablcbjyspz.tag,n[s].background&&(n[s].background.tag?e.setData({background:n[s].background.tag[0].elementName,colortexts:n[s].background.tag[0].elementName}):e.setData({background:"#f2f2f2",colortexts:"#FF5800"}));t((function(){e.data.pullDown=!0,i.stopPullDownRefresh({success:function(){console.log("stopPullDownRefresh调用成功")},fail:function(){console.log("stopPullDownRefresh调用失败")}})}),600)}})},dealproductInfo:function(){var e=this.data.cacheData,t=this;e.forEach((function(a){"liangshangpin"==a.name&&a.yhesp.tag.length?t.getIdsArr(a.yhesp.tag):"tabimg"==a.name&&a.tabtitleimg.nodes?a.tabtitleimg.nodes.forEach((function(e){e.tag.length&&t.getIdsArr(e.tag)})):t.setData({models:e})}))},getIdsArr:function(e){if(e.length>20){for(var t=Math.ceil(e.length/20),a=[],o=0;o<t;o++){var n=e.slice(20*o,20*(o+1));a.push(n)}for(o=0;o<a.length;o++)this.loadPriceData(a[o])}else this.loadPriceData(e)},loadPriceData:function(e){var t=this;if(e.length<=0)return!1;for(var a=[],o=[],n=0;n<e.length;n++)a.push(("000000000000000000"+e[n].partnumber).slice(-18)),"0"==e[n].vendorCode?o.push("0000000000"):o.push(e[n].vendorCode);_().then((function(e){var n=e.cityLESId||"025",i=x.icps+"/icps-web/getVarnishAllPrice014/"+a.join(",")+"_"+n+"__"+o.join(",")+"_5_CPFCallback1504150510242.vhtm";L({url:i,dataType:"jsonp"}).then((function(e){var a=t.data.cacheData,o=t;e.forEach((function(e){a.forEach((function(t){"liangshangpin"==t.name&&t.yhesp.tag.length&&o.processInfo(t.yhesp.tag,e,o),"tabimg"==t.name&&t.tabtitleimg.nodes.length&&t.tabtitleimg.nodes.forEach((function(t){o.processInfo(t.tag,e,o)}))}))})),o.setData({models:a})}))}))},processInfo:function(e,t,a){e.forEach((function(e){var o=e.partnumber;if((o=("000000000000000000"+o).slice(-18))==t.cmmdtyCode){var n=parseFloat(t.price),i=t.snPrice,r=t.refPrice,s=t.status,c=t.invStatus;e.gbPrice=parseFloat(t.price),""!=n&&2!=c&&3!=c&&2!=s||(e.soldout="售罄"),3!=c&&2!=s||(e.txt="暂不销售"),2==c&&(e.txt="无货"),e.gbPrice=n,i?(Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(r)>Number(i)&&(e.result=a.formatPrice(r)),r&&Number(r)<Number(i)&&(e.result=a.formatPrice(i)),!r&&Number(n)<Number(i)&&(e.result=a.formatPrice(i)),r&&Number(n)<Number(i)&&Number(n)<Number(r)&&(e.result=a.formatPrice(r)),r||Number(n)!=Number(i)||(e.result=""),r&&Number(n)==Number(i)&&Number(n==Number(r))&&(e.result=""),r&&Number(n)<Number(i)&&Number(n>=Number(r))&&(e.result="")):e.result=""}}))},formatPrice:function(e){if(e){var t=e.split("."),a=void 0;if(2==t.length){for(var o=t[1],n=!0,i=0;i<o.length;i++)if(0==o.charAt(o.length-1)&&(t[1]=t[1].substring(0,t[1].length-1)),0!=o.charAt(i)){n=!1;break}a=n?t[0]:t[0]+"."+t[1]}else a=e;return a}},onPullDownRefresh:function(){this.setData({toLeftback:Math.random()});var e=this;t((function(){e.setData({toLeftback:0})})),e.data.pullDown&&(e.data.pullDown=!1,e.refreshmore())},moveLefts:function(e){this.data.toLeftback=e.detail.moveLeft},onLike:function(e){this.setData({toLeftback:this.data.toLeftback})},groupBy:function(e){for(var t=[],a=0;a<e.length;a+=8)t.push(e.slice(a,a+8));return t},requestNewPolld:function(e){var t=this;return new Promise((function(a,o){if(0!=e.length){var n=[];(e=t.groupBy(e)).forEach((function(e,a){var o,i=[],r=[],s=[],c=[];e.forEach((function(e){c.push(e.index),i.push(e.templateFullId),r.push(e.modelFullId),s.push(e.plId)})),o="https://f.m.suning.com/api/newPolId.json?cityId="+t.data.cityCode+"&pid="+t.data.pageid+"&fid="+i.join(",")+"&mid="+r.join(",")+"&plId="+s.join(","),n.push(t.promiseNewPolld(o))})),Promise.all(n).then((function(t){t.forEach((function(t){e.forEach((function(e){e.forEach((function(e){t[e.templateFullId+"-"+e.modelFullId]&&(e.list=t[e.templateFullId+"-"+e.modelFullId])}))}))})),a(e)})).catch((function(){o("失败了")}))}else a("no")}))},promiseNewPolld:function(e){return new Promise((function(t,a){i.request({url:e,success:function(e){"200"==e.statusCode?t(e.data):a("失败了")},fail:function(){a("失败了")}})}))}})})),window.define("659",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.addIsFormat=function(e){return e+(e.indexOf("?")>-1?"&format=is":"?format=is")}})),window.define("662",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{url:""},onLoad:function(e){var t=e.url||"https://cuxiao.m.suning.com/dp2018.html";this.setData({url:t})},copy:function(){n.setClipboardData({data:this.data.url,success:function(e){}})}})})),window.define("665",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=re(e(666)),D=re(e(668)),x=re(e(669)),_=re(e(670)),k=re(e(671)),L=re(e(672)),N=re(e(673)),E=re(e(674)),O=re(e(675)),A=re(e(676)),R=re(e(677)),M=re(e(170)),U=re(e(678)),j=re(e(679)),B=re(e(685)),F=re(e(686)),V=re(e(687)),H=re(e(688)),q=re(e(689)),G=re(e(680)),Y=e(667),z=re(e(8)),W=e(25),J=e(61),Q=re(e(135)),X=e(19),K=re(e(54)),$=re(e(78)),Z=re(e(690)),ee=e(77),te=e(691),ae=re(e(692)),oe=e(125),ne=re(e(387)),ie=e(23);function re(e){return e&&e.__esModule?e:{default:e}}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ce(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var de,ue,le,pe,fe,he,ge,me,ve,ye,we,be,Ce,Se=e(474),Te=Se.prefixShopCode,Ie=Se.prefixPartNumber,Pe=Se.snBusError,De=Se.iosVirtualGoodsFlag,xe=e(693),_e=xe.parseFourth,ke=xe.parseFourthByDetail,Le=xe.getInitData,Ne=e(694).fourthSeo,Ee=e(36),Oe=Ee(i.getNetworkType),Ae=Ee(i.getSystemInfo),Re=e(9),Me=r(),Ue=function(e,t){return new Promise((function(a,o){try{e.setData(t,(function(){a()}))}catch(e){o(e)}}))},je={detectTouchStart:K.default.detectTouchStart,detectTouchMove:K.default.detectTouchMove,detectTouchEnd:K.default.detectTouchEnd,detectTap:K.default.detectTap,detectLongPress:K.default.detectLongPress,modal:W.modal,data:Le(),launchAppError:function(){i.navigateTo({url:"/pages/downloadApp/index"}),console.log(arguments)},onLoad:function(e){i.showLoading(),console.log("onLoad"),this.onLoadAsync(e)},onLoadAsync:function(){var e=ce(ne.default.mark((function e(t){var a,o,n,i,r,s,c,d,u;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this,(o=decodeURIComponent(t.scene))&&o.length&&o.length>20?(n=o.split("&"),i=I(n,2),r=i[0],s=i[1],c=void 0,d=void 0,void 0,r&&(c=r.substring(r.length-8),d=r.substring(0,r.length-8)),u=s.split("=")[1],c&&d&&u&&(t.productId=d,t.shop=c,t.union=u,a.data.pageSource=4)):o&&o.length&&19===o.length&&(t.shop=o.substring(o.length-8),t.productId=o.substring(0,o.length-8),a.data.pageSource=3),a.fourth={},a.lazyload={},a.fourth.firstScrolled=!1,a.fourth.initParm=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),a.fourth.params=t,a.fourth.params.shared&&(a.data.pageSource=a.fourth.params.shared),a.fourth.partNumber=(0,Y.trimNumber)(t.productId),a.fourth.shop=Te(t.shop),a.fourth.shopParam="0"===t.shop.indexOf("003")?"0000000000":Te(t.shop),a.fourth.selfShopping="0000000000"===a.fourth.shop,a.setData({initbg:"background-image:url("+z.default.img+"/uimg/b2c/newcatentries/"+a.fourth.shopParam+"-"+a.fourth.partNumber+"_2.jpg_800w_800h_4e_100Q)"}),console.log("打开四级页:"+a.fourth.initParm),a.fourth.union=t.union,a.fourth.tarbarTip=!0,this.parseCommonUnion(t,""),e.next=21,Oe();case 21:if("none"!==e.sent.networkType){e.next=24;break}return e.abrupt("return",Q.default.showToast({title:"网络好像不太给力哦，检查一下您的网络再试吧",duration:3e3}));case 24:t.title&&a.setData({"price.name":t.title}),a.fourth.union=t.union,e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),e.t0.code="onLoadSync failed",console.error(e.t0);case 32:case"end":return e.stop()}}),e,this,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),onReady:function(){this.videoContext=i.createVideoContext("myVideo")},onShow:function(){console.info("show"),this.hideCover(),this.onShowAsync()},parseCommonUnion:function(e,t){if(e&&e.union)this.fourth.unionPromise=P.default.getUnion(this,e.union,t);else try{var a=i.getStorageSync("unionData");this.parseUnionData(a)}catch(e){Pe(this,{errorCode:"pds-spxq-2onLoad_2",errorDesc:"解析微视联盟数据错误："+(e&&e.message||"")})}},onShowAsync:(Ce=ce(ne.default.mark((function e(){var t,a,o,n,r,s,c,d,u,l,p=this;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=this).isStep2Loaded=!1,t.isStep3Loaded=!1,t.couponinit={isLogin:!1,productId:t.fourth.partNumber,storeId:t.fourth.shop,cityId:"",marketingActivityType:"",detect:K.default.getTrack()},t.logininfo={errCode:"E00005"},e.prev=6,e.next=9,(0,J.checkAuth)();case 9:t.logininfo=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),t.logininfo={errCode:"E00005"};case 15:if("E00000"===t.logininfo.errCode?(Me.globalData.isLogin=!0,t.couponinit.isLogin=!0):Me.globalData.isLogin=!1,!Me.globalData.isLogin){e.next=23;break}return e.next=19,P.default.getSuperInfo(t);case 19:(a=e.sent)&&1===a.superFlag&&(t.fourth.isVip=!0),e.next=24;break;case 23:t.fourth.isVip=!1;case 24:return t.setMenuBtnStyle(),t.data.saPgnm&&(0,ee.saSendLog)("pageview",{ext:{}}),K.default.init("mainApp"),t.removeBuyLock(),t.fourth.loadingPhase1=!1,t.fourth.scrollTimer="",e.next=32,Ae();case 32:if(t.systemInfo=e.sent,t.fourth.isipx=-1!==t.systemInfo.model.search("iPhone X"),o={},!Me.globalData.isLogin){e.next=41;break}return e.next=38,t.addressFun();case 38:o=e.sent,e.next=45;break;case 41:return Pe(this,{errcode:"pds-spxq-2dzjk_4",errorDesc:"地址接口：用户未登录状态"}),e.next=44,(0,X.getUnionLocation)();case 44:o=e.sent;case 45:return t.fourth.position&&t.fourth.position.districtMDMId===o.districtMDMId&&t.fourth.position.detailAddress===o.detailAddress||(console.log(o),o.districtLESId.length<=3&&(o.districtLESId=""+o.cityLESId+o.districtLESId),t.fourth.position=o,t.setData({position:o}),i.setStorageSync("fourthLocation",o)),t.fourth.partNumberLoaded=null,t.fourth.loadingPhase1=!0,t.fourth.isSendGiftPro=!1,e.next=51,P.default.getPrice(t,t.fourth.partNumber,t.fourth.shop);case 51:if(!((n=e.sent).data&&n.data.data&&n.data.data.isDelete&&"1"===n.data.data.isDelete)){e.next=56;break}return i.hideLoading(),this.setData({nosuchpro:!0,nosuchtips:"很抱歉，此商品不存在(0)"},(function(){(0,ee.saSendLog)("autoexpo",p)})),e.abrupt("return");case 56:if(n.data.code&&"211"===n.data.code&&Pe(t,{errorCode:"pds-spxq-2211"}),t.data.result=n,r=n.data&&n.data.data&&n.data.data||{},s=r.price&&n.data.data.price.saleInfo&&n.data.data.price.saleInfo[0]||{},t.couponinit.storeId=s.vendorCode||{},t.couponinit.marketingActivityType=t.fourth.isVip&&"4-12"===s.marketVipPriceType?s.marketVipPriceType:s.priceType,t.couponinit.cityId=o.cityLESId,c=t.fourth,t.couponinit.subError={cityLESId:o.cityLESId,isJW:c.isJW,isCSSWL:c.isCSSWL,isLYTM:c.isLYTM,isHwg:c.isHwg,isCshop:c.isCshop,activityType:c.activityType,businessId:r.businessId||"",priceType:c.priceType,initParm:c.initParm,brandCode:c.brandCode,brandId:c.brandId,shopParam:c.shopParam,cShopName:c.cShopName,passPartNumber:c.passPartNumber,datacategoryCode:r.data1&&r.data1.datacategoryCode||"",pageSource:t.data.pageSource,memberId:i.getStorageSync("custNo")||"",memberLevel:(0,$.default)()&&(0,$.default)().custLevel||""},Pe(t),t.fourth.iosVirtualGoodsFlag=De(n),t.removeBuyLock(),_e(t,n)){e.next=71;break}return e.abrupt("return",i.showModal({title:"提示",content:"抱歉，该商品不存在",showCancel:!1,success:function(e){getCurrentPages().length>1?i.navigateBack():t.homePage()}}));case 71:if(t.fourth.isPg&&!t.fourth.params.fromPg&&t.fourth.pgActId&&t.goPin(),d=n.data.data,u=d.data1.data.ItemClusterDisplayVO,l=void 0,l=u&&(u.colorList||u.versionList)?L.default.parseCluster(t,u):L.default.parseCharacter(t,d),!Me.globalData.isLogin){e.next=79;break}return e.next=79,t.updateCartNumber();case 79:return(0,W.getDfpToken)().then((function(e){t.couponinit.dfpToken=e,t.couponinit.xcxGqFlag="0"===d.xcxGqFlag,t.couponinit.isHk=t.fourth.isHk,t.couponinit.xcxGqFlag||Pe(t,{errcode:"pds-spxq-2yzgq_4"}),t.setData({couponinit:t.couponinit})})),e.abrupt("return",l.then((function(e){e.rows.forEach((function(e){e.nameArr=e.name&&e.name.split("").filter((function(e){return e.trim()}))})),t.data.sub.rows=e.rows,t.data.sub.saleList=e.saleList,t.data.sub.subMap=e.subMap,t.data.sub.picked=e.picked,t.data.sub.clusterFlag=e.clusterFlag,t.data.sub.characterFlag=e.characterFlag,t.data.sub.keyMaps=e.rows.map((function(e){var t={};return e.items&&e.items.forEach((function(e){t[e.id]=e.name})),t})),t.delayTarbarTip(),L.default.setSubPickByPart(t.data.sub,t.fourth.partNumber),L.default.calcPicked(t.data.sub),t.setData({sub:t.data.sub}),t.fourth.isPackage&&(t.data.package=j.default.parsePackage(t,n),t.setData({package:t.data.package})),t.fourth.isDiscPackage&&ae.default.parseDiscPackage(t,n);var a=void 0;return t.data.sub.subMap[t.data.sub.picked.join("-")]||(a=t.fourth.partNumber),t.loadPartAsync(n,a)})));case 83:throw e.prev=83,e.t1=e.catch(0),e.t1&&e.t1.code&&e.t1.code.indexOf("E001"),"none"===Oe().networkType?Q.default.showToast({title:"网络好像不太给力哦，检查一下您的网络再试吧",duration:3e3}):i.showModal({title:"提示",content:"抱歉，该商品不存在",showCancel:!1,success:function(){getCurrentPages().length>1?i.navigateBack({delta:1}):i.switchTab({url:"/pages/index/index"})}}),Pe(this,{errorCode:"pds-spxq-2onLoad",errorDesc:"页面加载异常"}),e.t1.code="onShowAsync failed",console.error(e.t1),e.t1;case 92:case"end":return e.stop()}}),e,this,[[0,83],[6,12]])}))),function(){return Ce.apply(this,arguments)}),loadPartAsync:(be=ce(ne.default.mark((function e(t,a){var o,n,i,r;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=this,n=this.data,i=void 0,o.version=o.version||0,o.version++,r=o.version,a?(i=a,L.default.setSubPickByPart(o.data.sub,a),L.default.calcPicked(o.data.sub),o.setData({sub:o.data.sub})):i=n.sub.subMap[n.sub.picked.join("-")],i){e.next=10;break}return e.abrupt("return");case 10:if(o.fourth.partNumberLoaded!=i){e.next=12;break}return e.abrupt("return");case 12:return o.fourth.partNumberLoaded,o.fourth.partNumberLoaded=o.fourth.partNumber=i,o.fourth.loadingPhase1=!0,e.next=17,Ue(this,{"renderState.step1":!1});case 17:return e.next=19,this.step1(t,r);case 19:return e.next=21,Ue(this,{"renderState.step1":!0});case 21:Me.globalData.isLogin&&this.surplusStep(),e.next=30;break;case 24:return e.prev=24,e.t0=e.catch(0),e.next=28,Ue(this,{"renderState.step1":!0});case 28:throw console.error("loadPartAsync error",e.t0),e.t0;case 30:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(e,t){return be.apply(this,arguments)}),addressActive:(we=ce(ne.default.mark((function e(){var t,a,o,n,r;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.default.GetAddressInfo4Level();case 2:t=e.sent,a=t.contactPointList||[],o=void 0,n=void 0,i.removeStorageSync("addressFlag");try{o=i.getStorageSync("addressActive")}catch(e){console.error(e,"获取用户选择地址缓存失败")}if(r=o||a.find((function(e){return"100000000010"===e.preferFlag}))||{},!(Object.keys(r).length>0)){e.next=15;break}return e.next=11,P.default.GetSmallProgram(r);case 11:(n=e.sent).isEmpty&&Pe(this,{errcode:"pds-spxq-2dzjk_3",errorDesc:"地址接口：查询地址信息为空"}),e.next=20;break;case 15:return this.fourth.addrNum="",Pe(this,{errCode:"pds-spxq-2dzjk_2",errorDesc:"地址接口：地址信息列表为空"}),e.next=19,(0,X.getUnionLocation)();case 19:n=e.sent;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)}))),function(){return we.apply(this,arguments)}),delivery:function(){var e=i.getStorageSync("userLocation");if(e)return i.removeStorageSync("addressFlag"),e},addressFun:(ye=ce(ne.default.mark((function e(){var t,a,o,n;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,a=i.getStorageSync("userSelectedLocation"),o=i.getStorageSync("userLocation"),n=i.getStorageSync("addressFlag"),console.info("购物车缓存",a),console.info("地址选择模块缓存",o),console.info("地址标记",n),!n||"addressReplace"!==n){e.next=12;break}return e.next=10,this.addressActive();case 10:return t=e.sent,e.abrupt("return",t);case 12:if(!n||"delivery"!==n){e.next=15;break}return t=this.delivery(),e.abrupt("return",t);case 15:if(!a){e.next=22;break}return i.removeStorageSync("addressFlag"),e.next=19,P.default.GetSmallProgram(a||[]);case 19:return(t=e.sent).isEmpty&&Pe(this,{errcode:"pds-spxq-2dzjk_3",errorDesc:"地址接口：查询地址信息为空"}),e.abrupt("return",t);case 22:if(!o){e.next=25;break}return t=this.delivery(),e.abrupt("return",t);case 25:return t=this.addressActive(),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,this)}))),function(){return ye.apply(this,arguments)}),step1:(ve=ce(ne.default.mark((function e(a,o){var n,r,s,c,d,u,l,p,f,h,g,m,v,y;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this,a){e.next=6;break}return e.next=5,P.default.getPrice(n,n.fourth.partNumber,n.fourth.shop);case 5:a=e.sent;case 6:if(console.info(a),n.fourth.isSendGiftPro=void 0!==a.data.data.wxslFlag&&"Y"===a.data.data.wxslFlag,n.fourth.giftTips=a.data.data.wxslxzImg||"https://oss.suning.com/vss/activity/wximg/sgifts/remind.jpg",n.fourth.loadingPhase1=!1,_.default.disCount(a,n),r=a,s=a.data.data,o===n.version){e.next=15;break}return e.abrupt("return");case 15:if(n.data.short.isShort=0,clearInterval(n.fourth.activityTimer),n.removeBuyLock(),_e(n,a)){e.next=21;break}return e.abrupt("return",i.showModal({title:"提示",content:"抱歉，该商品不存在",showCancel:!1,success:function(e){}}));case 21:c=n.fourth.shopParam,d=Ie(n.fourth.partNumber);try{u=function(e){!n.fourth.hasUnionData||Me.globalData.isLogin?e():l()},l=function(){var e="pgtitle=商品详情页;prdtp="+(n.fourth.brandId||"").substr(0,5)+";pgcate=10008;prdid="+d+";supid="+n.fourth.priceVendor+";shopid="+n.fourth.shopParam+";actype="+n.fourth.actType;console.log("saPgnm",e),n.setData({saPgnm:e}),(0,ee.saSendLog)("pageview",{ext:{}})},n.fourth.unionPromise?n.fourth.unionPromise.catch(l).then((function(e){n.parseUnionData(e);try{i.setStorageSync("unionData",e)}catch(e){}u(l)})):u(l)}catch(e){console.log(e)}if(p={ready:!0},n.fourth.published)if("4"===n.fourth.activityType||"6"===n.fourth.activityType&&n.fourth.activitySubType)a.data.data.bigPoly&&(p=F.default.bigPoly(n,a.data.data.bigPoly,a.data.data.nowTime)||p,"12"!==n.fourth.activitySubType&&"4-14"!==n.fourth.priceType||!s||"Y"!==s.stillChance||(p.stillChance=!0),(0,ee.saSendLog)("autoexpo",this));else if("8"===n.fourth.activityType||"13"===n.fourth.activityType)a.data.data.psell&&(p=F.default.book(n,a.data.data.psell,a.data.data.nowTime,a)||p);else if("7"===n.fourth.activityType||"12"===n.fourth.activityType)a.data.data.psell&&(p=F.default.order(n,a.data.data.psell,a.data.data.nowTime,a)||p);else if("14"===n.fourth.activityType||"16"===n.fourth.activityType)"1"===s.cxjFlag&&(p=F.default.cxPromotion(n,s.bigPoly,a)||p),s&&"Y"===s.stillChance&&(p.stillChance=!0),p.cxj=!0,(0,ee.saSendLog)("autoexpo",this);else if("15"===n.fourth.activityType||"17"===n.fourth.activityType||s.price&&s.price.saleInfo.length&&s.price.saleInfo[0].bigPromoId)try{p=F.default.dcPromotion(n,s.nowTime,a)||p,s&&"Y"===s.stillChance&&(p.stillChance=!0),p.dcj=!0,(0,ee.saSendLog)("autoexpo",this)}catch(e){console.log("%c大促价容错"+e,"color:red;")}if(p.stillChance&&s.bigPoly&&(p.stillChanceTip=s.bigPoly.taskUpMsg),n.fourth.isCShop&&n.fourth.isVirtual&&(p.hideCart=!0),a.data.data.dcjFlag&&(p.dcjType=+a.data.data.dcjFlag),n.setData({activity:p,"sub.maxActivity":p.limitBuyNum||0}),f=a.data.data.data1.data.itemInfoVo.imageCount||0,h=a.data.data.data1.data.mainPictureList,0===Number(f)?(n.data.bigPage.imgUrls=[{url:"",bigUrl:""}],Pe(n,{errorCode:"pds-spxq-2wzt"})):h&&h.length?((h=h.slice(0,f)).length>1&&""==n.data.sub.pickedName&&(g=h[0],h[0]=h[1],h[1]=g),n.data.bigPage.imgUrls=h.filter((function(e){return 0!==e.illegalFlag})).map((function(e){return/^http/i.test(e.domain+"")||(e.domain="https:"+e.domain),n.fourth.isLYTM?{url:""+e.domain+e.pictureUrl+"_800h_600w_4e",bigUrl:""+e.domain+e.pictureUrl+"_800h_600w_4e"}:{url:""+e.domain+e.pictureUrl+"_800h_800w_4e",bigUrl:""+e.domain+e.pictureUrl+"_800h_800w_4e"}}))):n.data.bigPage.imgUrls=new Array(f).fill(null).map((function(e,t){return f>1&&t<2&&""==n.data.sub.pickedName&&(t^=1),n.fourth.isLYTM?{url:z.default.img+"/uimg/mcmp/tm/"+c+d+"_"+(t+1)+"_600x800.jpg",bigUrl:z.default.img+"/uimg/mcmp/tm/"+c+d+"_"+(t+1)+"_600x800.jpg"}:{url:z.default.img+"/uimg/b2c/newcatentries/"+c+"-"+d+"_"+(t+1)+"_800x800.jpg",bigUrl:z.default.img+"/uimg/b2c/newcatentries/"+c+"-"+d+"_"+(t+1)+"_800x800.jpg"}})),i.getNetworkType({success:function(e){var t=e.networkType;n.data.bigPage.isWiFi="wifi"===t}}),a.data&&a.data.data&&a.data.data.data1&&a.data.data.data1.data&&a.data.data.data1.data.brandCode&&(n.fourth.shopBrandcode=a.data.data.data1.data.brandCode),(m=a.data.data.data1.data.atmoSphereImg)&&"string"==typeof m&&(/^http/i.test(m)||(m="https:"+m),n.data.bigPage.imgUrls.unshift({url:m,bigUrl:m})),v=i.getSystemInfoSync(),"wx"==(0,ie.getPlatformType)()&&"0"===a.data.data.xcxZtSp&&1===this.compareVersion(v.SDKVersion,"2.6.3")&&(n.data.bigPage.detailsUrl=a.data.data.data1.data.detailsUrl,n.data.bigPage.imgVideoPoster=n.data.bigPage.imgUrls[0].url),1!==this.compareVersion(v.SDKVersion,"2.4.5")&&(n.fourth.playHeaderDisplay=!0),console.log(v.SDKVersion,"9999999999999999999999999999"),n.fourth.HyAddress="1"===a.data.data.xcxHyAddress,n.data.bigPage.current=0,n.data.bigPage.scroll=0,n.data.price.name=a.data.data.data1.data.itemInfoVo.itemDisplayName,"swan"==(0,ie.getPlatformType)()&&(Ne(a.data.data.data1.data.itemInfoVo,a.data.data.data1.data.groupInfoVO||{},n),n.data.price.currentPrice=a.currentPrice),n.data.price.promotionPrice=a.currentPrice.promotionPrice,n.data.price.vipPrice=a.currentPrice.vipPrice,n.data.price.refPrice=a.currentPrice.refPrice?a.currentPrice.refPrice:a.currentPrice.netPrice,Number(n.data.price.refPrice)<=Number(n.data.price.promotionPrice)&&(n.data.price.refPrice=""),n.data.price.refPrice&&Number(n.data.price.refPrice)<Number(n.data.price.promotionPrice)&&Pe(n,{errorCode:"pds-spxq-2jgdg"}),n.fourth.isPass||"N"!==a.data.data.deliverableFlag||"1"!==n.fourth.hasStorage||(n.fourth.hasStorage="0"),n.data.place1Color=a.data.data.ttaObjcet||{},n.data.popLabel=Z.default.parsePopLabel(a),y=n.data.bigPage.imgUrls,n.data.bigPage.imgUrls=y,n.fourth.timestemp="",n.fourth.sendparams={},n.getIfInGray(),k.default.parseFwlabelList(n,a.data),n.fourth.zxLogo=!(!n.fourth.zxLogo||!a.data.data.zxlabel||"SL00000052"!==a.data.data.zxlabel.labelCode)&&a.data.data.zxlabel.logo,a.data.data.lxqicon&&(n.fourth.wxPlayList=n.parsePlayImg(a.data.data.lxqicon.tag),n.data.pageSource&&(n.fourth.playStatus=!0)),n.fourth.isPackage?(n.data.package=j.default.parsePackage(n,a),n.setData({package:n.data.package})):n.setData({package:""}),n.fourth.isDiscPackage&&ae.default.parseDiscPackage(n,a),a.data.data&&"Y"===a.data.data.c2mMadeFlag?n.fourth.c2mFlag=!0:n.fourth.c2mFlag=!1,!n.fourth.isHk){e.next=71;break}n.setData({popLabel:n.data.popLabel,bigPage:n.data.bigPage,price:n.data.price,fourth:n.fourth,"renderState.step1":!0},(function(){t((function(){n.setData({initbg:""})}),2e3)})),this.parseDetail(r),this.parseNogoods(r),e.next=86;break;case 71:return this.parseNogoods(r,o),e.next=74,this.step2(a,r,o);case 74:if(e.t1=n.fourth.isSendGiftPro,!e.t1){e.next=79;break}return e.next=78,P.default.getSharePic(this,1);case 78:e.t1=e.sent;case 79:if(e.t0=e.t1,e.t0){e.next=82;break}e.t0="";case 82:n.data.sharefriendImg=e.t0,this.computePoint(),this.pointFun({pageid:"140",modid:"3",eleid:"140000240",node:"bigImage"}),(0,ee.saSendLog)("autoexpo",this);case 86:i.hideLoading(),e.next=94;break;case 89:throw e.prev=89,e.t2=e.catch(0),this.fourth.loadingPhase1=!1,i.hideLoading(),e.t2;case 94:case"end":return e.stop()}}),e,this,[[0,89]])}))),function(e,t){return ve.apply(this,arguments)}),step2:(me=ce(ne.default.mark((function e(a,o,n){var i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,D,_,N,A,R,M,j,B,G,Y,z,J,Q,X=this;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=this,e.next=4,P.default.getDetail(i,i.fourth.partNumber,i.fourth.shop,a);case 4:if(r=e.sent,n===i.version){e.next=7;break}return e.abrupt("return");case 7:if(a.data.data.psell&&a.data.data.psell.bookInfoDetail&&"14"===a.data.data.psell.bookInfoDetail.bookType&&(r.currentPrice.promotionPrice&&"8-5"===r.currentPrice.priceType?(r.currentPrice.promotionPrice.length<=3?i.data.price.bookPriceLabelLength=1:i.data.price.bookPriceLabelLength=0,i.data.price.tailname="尾款待定"):r.currentPrice.promotionPrice&&"8-6"===r.currentPrice.priceType&&(r.currentPrice.finalPayment&&r.currentPrice.finalPayment.indexOf("-")>-1?i.data.price.tailname=r.currentPrice.finalPayment.split("-")[0]+"起":i.data.price.tailname=r.currentPrice.finalPayment,i.data.price.bookPriceLabelLength=0),i.data.price.blindness=1,i.data.price.bookPriceLabel=r.currentPrice.promotionPrice,i.data.price.promotionPrice=r.currentPrice.promotionPrice),s=["",r.data.data],c=s[0],d=s[1],i.fourth.discountListParam="",!(d&&d.salesPromotion.activityList&&d.salesPromotion.activityList.length)){e.next=30;break}for(u=!0,l=!1,p=void 0,e.prev=14,f=d.salesPromotion.activityList[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)"1"==(g=h.value).activityTypeId&&g.calRewardList.length&&g.calRewardList[0].discountAmount&&(c=""+g.calRewardList[0].discountAmount);e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),l=!0,p=e.t0;case 22:e.prev=22,e.prev=23,!u&&f.return&&f.return();case 25:if(e.prev=25,!l){e.next=28;break}throw p;case 28:return e.finish(25);case 29:return e.finish(22);case 30:if(d&&d.jgActivityInfos&&d.jgActivityInfos.jgPrice&&(c=+c+d.jgActivityInfos.jgPrice),""!==c&&(i.fourth.discountListParam="5-"+c),i.parseNewer(r.data&&r.data.data&&r.data.data.imageDoamin||""),ke(i,r),(0,te.oldForNewData)(i,r.data.data.dealMsg),m=x.default.parsePromote(r),v=I(m,3),y=v[0],w=v[1],b=v[2],U.default.parseCoupon(i,r),Me.globalData.isLogin&&U.default.judgeBestCoupon(i,r),i.data.promote.list=y,i.data.promote.orderGifts=b,i.data.optimizeAddCart=i.getOptimizeCartInfo(r),i.data.promote.expand=1,i.data.coupon.list=w,q.default.initLimitTime(i,r),i.data.answerData={},void 0===r.data.data.questionCnt&&void 0===r.data.data.questionList&&(i.data.answerData.switch=!0),i.data.answerData.questionCnt=r.data.data.questionCnt||0,i.data.answerData.questionList=r.data.data.questionList||[],i.data.answerData.questionList.length)for(C in i.data.answerData.questionList)i.data.answerData.questionList[C].index=Number(C);if(S=U.default.getInfo(i.data.couponCover),this.fourth.subsidySwitch=d.shoppingWelfarexcx,i.fourth.isHwg?(T=k.default.parseServiceOversea(i,r),i.data.service.list=T.serviceList,i.data.oversea.banner={},i.data.oversea.banner.bannerText=T.bannerText&&T.bannerText.replace(/\s/g,"&nbsp;"),i.data.oversea.banner.bannerList=T.bannerList,i.data.oversea.banner.show=0,i.data.oversea.yunfei=T.yunfei,i.data.oversea.returnPromise=T.returnPromise,i.data.oversea.isBy=T.isBy):i.data.service.list=k.default.parseService(i,r),i.data.service.show=0,D=i.data.result.data.data.data1.data.itemInfoVo,_=L.default.optimization(a),console.log(_),i.data.sub.checktimer=null,""!==_?(N=Number(_.startCount||1)>=_.remanentQty?1:Number(_.startCount||1),A=Math.min(_.maxNum,_.remanentQty),console.log(N,A),i.data.sub.optimization=_,i.data.sub.count=N,i.data.sub.min=0===A?1:N,i.data.sub.max=A):(i.data.sub.optimization="",i.data.sub.validCount=1,i.data.sub.count=1,i.data.sub.min=1,i.data.sub.max=i.data.sub.maxActivity||r.data.data.commLimit||0,!i.data.sub.max||i.fourth.isShort&&!i.data.activity.book?i.fourth.isCShop&&D&&D.attachedTypeList&&D.attachedTypeList.length>0&&D.attachedTypeList.some((function(e){return"12"===e.attachedType||"11"===e.attachedType}))?(D.attachedTypeList.some((function(e){return"12"===e.attachedType}))&&(i.data.sub.max=99),D.attachedTypeList.some((function(e){return"11"===e.attachedType}))&&(i.data.sub.max=9999),i.data.sub.limitNotify="每人限购"+i.data.sub.max+"件"):i.fourth.isSendGiftPro?(i.data.sub.limitNotify="送单人支持1件商品，送多人至少选择2件",i.data.sub.min=1,i.data.sub.max=1,this.fourth.giftObj=[{title:"送单人",index:0,picked:!0},{title:"送多人",index:1}]):(i.data.sub.max=99,i.data.sub.limitNotify=""):i.data.sub.limitNotify="每人限购"+i.data.sub.max+"件"),R="",i.fourth.isHwg||(R+=r.data.data.itemShopInfo.poromotionPointNew||""),R+=r.data.data.itemShopInfo.poromotionPointVo||"",i.data.price.sellPoint={text:R,navText:r.data.data.itemShopInfo.poromotionPointCu,navUrl:r.data.data.itemShopInfo.poromotionPointUrl,promotionPoint:r.data.data.itemShopInfo.poromotionPointNew},i.fourth.isPackage&&E.default.parsepackageBetail(a,i),i.data.detail.detailList=i.fourth.isBook?E.default.parseBookDetail(r):E.default.parseDetail(r),i.data.detail.flattenList=(i.data.detail.detailList||[]).reduce((function(e,t){return e.concat(t.list)}),[]),i.data.detail.detailList.length||i.fourth.isPackage||Pe(i,{errorCode:"pds-spxq-2wcs"}),(0,W.extend)(i.data.gift,O.default.parseGift(r)),(i.fourth.isHwg||i.fourth.isHwgLocal)&&(0,W.extend)(i.data.oversea,V.default.parseOverseaDetail(i,r)),i.fourth.isHwg&&"2"===a.data.data.isPreBuy&&(i.fourth.unsupport=!0),!(d.localhwg&&d.localhwg.z_001&&d.localhwg.z_001.tag&&d.localhwg.z_001.tag.length)){e.next=91;break}for(M=i.judgeEnv("localhwg"),j=!0,B=!1,G=void 0,e.prev=74,Y=d.localhwg.z_001.tag[Symbol.iterator]();!(j=(z=Y.next()).done);j=!0)(J=z.value).picUrl=""+M+J.picUrl;e.next=82;break;case 78:e.prev=78,e.t1=e.catch(74),B=!0,G=e.t1;case 82:e.prev=82,e.prev=83,!j&&Y.return&&Y.return();case 85:if(e.prev=85,!B){e.next=88;break}throw G;case 88:return e.finish(85);case 89:return e.finish(82);case 90:i.fourth.hwgLocalImg=d.localhwg.z_001.tag;case 91:i.data.activity.dcj&&(i.data.price.promotionPrice=F.default.slicePrice(i.data.price.promotionPrice)),i.fourth.jgActivityInfos=r.data.data.jgActivityInfos?r.data.data.jgActivityInfos:{},Q=H.default.parseVip(i,r),i.fourth.shareconfig=a.data.data.xcxObjcet,i.setData({popLabel:i.data.popLabel,bigPage:i.data.bigPage,"floatButton.isShare":!!i.data.pageSource,promote:i.data.promote,coupon:i.data.coupon,service:i.data.service,price:i.data.price,detail:i.data.detail,gift:i.data.gift,fourth:i.fourth,sub:i.data.sub,oversea:i.data.oversea,vip:Q,answer:i.data.answerData,place1Color:i.data.place1Color,optimizeAddCart:i.data.optimizeAddCart||"","couponCover.couponCoverList":S},(function(){t((function(){i.setData({initbg:""}),i.isStep2Loaded=!0,X.step3(a,o,n)}),2e3)})),i.subCheckValue(),i.lazyload.priceResult=o,i.lazyload.result=a,i.lazyload.currentVersion=n,e.next=105;break;case 102:throw e.prev=102,e.t2=e.catch(0),e.t2;case 105:case"end":return e.stop()}}),e,this,[[0,102],[14,18,22,30],[23,,25,29],[74,78,82,90],[83,,85,89]])}))),function(e,t,a){return me.apply(this,arguments)}),step3:(ge=ce(ne.default.mark((function e(t,a,o){var n,i,r,s,c,d,u,l;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this,e.next=4,P.default.getAttache(n,n.fourth.partNumber,n.fourth.shop,t);case 4:if(i=e.sent,r=i.data.data.bdtjobj,(s=(r=void 0===r?{}:r).goodList)&&((0,ee.saSendLog)("autoexpo",this),s.map((function(e){if(e.adSrc&&e.apsClickUrl&&e.brandCode&&e.companyCode&&e.price)return e}))),o===n.version){e.next=11;break}return e.abrupt("return");case 11:if(i.data.data.errorTable&&"pds-spxq-2pjrkyc"===i.data.data.errorTable.yjmdErrorCode&&Pe(n,{errorCode:"pds-spxq-2pjrkyc"}),c="",i.data&&i.data.data&&i.data.data.ggwdata&&i.data.data.ggwdata.cpm.constructor===Array&&i.data.data.ggwdata.cpm.length&&(c=i.data.data.ggwdata.cpm[0],(0,ee.saSendLog)("autoexpo",this),c.adSrc=c&&c.adSrc&&-1===c.adSrc.indexOf("https")?c.adSrc.replace("http","https"):c.adSrc),n.setData({eval:N.default.parseEval(i),attacheRes:i,advertisement:c}),!n.fourth.isHwg){e.next=21;break}return e.next=18,P.default.getHwgAnwser(n,n.fourth.partNumber,n.fourth.shop,a);case 18:d=e.sent,u=V.default.faq(d),n.setData({"oversea.faq":u});case 21:n.data.eval.newReviewCount||(l=[{title:"商品",id:1,area:"banner-container"},{title:"详情",id:3,area:"anchors_detail"}],n.setData({tarBarList:l})),n.initfunction(),this.parseDetail(a,o),this.isStep3Loaded=!0,e.next=31;break;case 27:throw e.prev=27,e.t0=e.catch(0),e.t0.code="step3 failed",e.t0;case 31:case"end":return e.stop()}}),e,this,[[0,27]])}))),function(e,t,a){return ge.apply(this,arguments)}),parseNewer:(he=ce(ne.default.mark((function e(t){var a,o,n;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.default.isNewPeople();case 2:a=e.sent,o=a&&Object.values(a)[0],(n=o.tag)[0]&&n[0].picUrl&&n[0].linkUrl&&(this.setData({"newer.show":!0,"newer.img":t+n[0].picUrl,"newer.url":n[0].linkUrl}),(0,ee.saSendLog)("autoexpo",this));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return he.apply(this,arguments)}),baseJump:function(e){var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop,o=e.currentTarget.dataset.jumpurl;if(0==a&&(a="0000000000"),t&&a&&o)return(0,ee.saSendLog)("manuclick",{modid:"3",eleid:"140010420"}),i.request({url:o}),void i.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="});console.log(o,"href"),o&&(0===o.indexOf("http://")||0===o.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(o)}):((0,ee.saSendLog)("manuclick",{modid:"3",eleid:"140010430"}),(0,W.baseJump)(o)))},surplusStep:(fe=ce(ne.default.mark((function e(){var t;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Me.globalData.isLogin){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,P.default.getSurplusQuota();case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:t instanceof Array&&t.length&&("0"===t[0].resultCode&&Pe(this,{errorCode:"pds-spxq-2gwjtyzcxsb",errorDesc:"购物津贴-查询失败"}),t.every((function(e){return 0===e.isEnabled}))?this.setData({isEnabled:0}):this.setData({isEnabled:1})),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0.code="surplusStep failed",e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return fe.apply(this,arguments)}),parseDetail:(pe=ce(ne.default.mark((function e(t,a){var o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"swan"==(0,ie.getPlatformType)()&&(a=1),e.prev=1,n="0000000000"===(o=this).fourth.shopParam&&t.data.data.data1.data.brandCode||o.fourth.shopParam,e.next=6,P.default.getDetailHtml(o,t.data.data.data1.data.passPartNumber,n,t);case 6:if(i=e.sent,a===o.version){e.next=9;break}return e.abrupt("return");case 9:r=i.data.itemDetail,s=i.data.comItemdetail,c=i.data.selfDetailList,d="",u="","10051"!==o.fourth.catalogId&&r&&!r.haveBookNewDetail&&(d={},r.pictureList&&(u=r.pictureList.map((function(e){return'<img src="'+e+'">'})).join("")),l=[],r.recommend&&l.push({title:"编辑推荐",contents:r.recommend.split("<br/>")}),r.author&&l.push({title:"作者简介",contents:r.author.split("<br/>")}),r.content&&l.push({title:"内容简介",contents:r.content.split("<br/>")}),r.directory&&l.push({title:"目录",contents:r.directory.split("<br/>")}),r.media&&l.push({title:"媒体评论",contents:r.media.split("<br/>")}),r.summary&&l.push({title:"书摘",contents:r.summary.split("<br/>")}),r.magazine&&l.push({title:"杂志社简介",contents:r.magazine.split("<br/>")}),r.author&&l.push({title:"精彩内容",contents:r.author.split("<br/>")}),d.list=l),p=(r.hasPhoneDetail?r.phoneDetail:r.detailUrl)||"",f="",h="",g="",m="",v="",s&&s.comitemDetailsList&&s.comitemDetailsList.length>0&&s.comitemDetailsList.forEach((function(e){"40"===e.orderCode?f=e.detailsUrl:"00"===e.orderCode||"01"===e.orderCode?h=e.detailsUrl:"20"!==e.orderCode&&"11"!==e.orderCode||(g=e.detailsUrl)})),c&&c.length>0&&c.forEach((function(e){"01"===e.orderCode&&""!==e.detailsUrl?m=e.detailsUrl:"11"===e.orderCode&&""!==e.detailsUrl&&(v=e.detailsUrl)})),o.fourth.pavilion=r.pavilion,y=void 0,y=(y=d?[m+f+h,u+g+v]:[m+f+h+p+g+v]).map((function(e){return e=(e=(e=(e=e.replace(/src2/g,"src")).replace(/src="\/\//g,'src="http://')).replace(/<tr[\s\S]*?<\/tr>/gm,(function(e){return e.match(/<td/g).length<=1?e:""}))).replace(/<img[\s\S]*?>/gm,(function(e){return e.indexOf("src")>=0?e:""}))}));try{d?(G.default.wxParse("detailHtml1","html",y[0],o,0),G.default.wxParse("detailHtml2","html",y[1],o,0)):(G.default.wxParse("detailHtml","html","",o,0),G.default.wxParse("detailHtml","html",y[0],o,0))}catch(e){console.error(e)}!p&&o.data.package&&o.data.package.list&&(w=[],o.data.package.list.forEach((function(e){w.push(e.subPartNumber)})),b=o.data.package.list[0].vendorCode,C={partNumberArr:w,supplierCode:b,terminate:"2"},P.default.getBatchDetailInfo(C).then((function(e){var t=e.data,a=o.data.detail.currentSubTab;if(t.length>=0){var n=(t[a].hasPhoneDetail?t[a].phoneDetail:t[a].detailUrl)||"";n=(n=(n=(n=n.replace(/src2/g,"src")).replace(/src="\/\//g,'src="http://')).replace(/<tr[\s\S]*?<\/tr>/gm,(function(e){return e.match(/<td/g).length<=1?e:""}))).replace(/<img[\s\S]*?>/gm,(function(e){return e.indexOf("src")>=0?e:""}));try{G.default.wxParse("detailHtml","html","",o,0),G.default.wxParse("detailHtml","html",n,o,0)}catch(e){console.error(e)}}})),o.setData({"detail.subDetail":!0})),o.fourth.isHwg&&P.default.getHwgBrandInfo().then((function(e){o.setData({"detail.faq":e})})),S=[{content:r.detailParkingList||"暂无数据",show:!0,title:"包装清单"},{content:r.service||"暂无数据",show:!0,title:"售后服务",isHtml:!0},{content:"本站苏宁自营商品的商品详情信息及包装参数信息均由供应商自行设计、制作并通过苏宁向其开放的数据端口自行发布，其真实性、准确性和合法性由供应商负责。本站保证苏宁自营商品均为正品，但因生产厂家可能会在没有任何提前通知的情况下更改产品包装、产地或者一些附件，本站不能确保用户收到的货物与本站展示的图片、产地、附件说明完全一致。",show:!0,title:"特别声明"},{content:"划线价：商品展示的划线价，可能是品牌专柜标价、品牌供应商提供的正品零售价（如厂商指导价、建议零售价等）或该商品在苏宁易购平台或销售商门店曾经展示过的挂牌价；由于地区、时间的差异性和市场行情波动，品牌专柜标价、商品吊牌价、销售商门店挂牌价等可能会与您购物时展示的不一致，该价格仅供您参考。\n折扣：如无特殊说明，折扣指销售商在划线价基础上计算出的优惠比例或优惠金额；如有疑问，您可在购买前联系销售商进行咨询。\n异常问题：商品促销信息以商品详情页“促销”信息为准；商品的具体售价以订单结算页价格为准；如您发现活动商品售价或促销信息有异常，建议购买前先联系销售商咨询。",show:!0,title:"价格说明"}],o.fourth.panSelf||S.splice(2,1),o.setData({"detail.serviceList":S,"fourth.pavilion":o.fourth.pavilion||"","detail.graphicHeight":0,"detail.package":r.detailParkingList||"暂无数据","detail.book":d}),G.default.wxParse("detail.serviceList[1].content","html",S[1].content,o,0),e.next=40;break;case 37:throw e.prev=37,e.t0=e.catch(1),e.t0;case 40:case"end":return e.stop()}}),e,this,[[1,37]])}))),function(e,t){return pe.apply(this,arguments)}),parseNogoods:(le=ce(ne.default.mark((function e(t,a){var o,n,i,r,s,c,d,u;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(o=this).data.short.shortChecked=1,o.fourth.iosVirtualGoodsFlag&&(o.fourth.unsupport=!1,o.fourth.published=!0,o.fourth.isShort=!0,o.fourth.noPrice=!0,o.fourth.hasStorage="0"),t.data.data.bigPoly&&t.data.data.bigPoly.bigPolyInfo&&"4"===t.data.data.bigPoly.bigPolyInfo.status&&(o.fourth.isShort=!0,o.fourth.areadyRobbed=!0),!o.fourth.isShort){e.next=28;break}return o.fourth.published?"0"===o.fourth.hasStorage?(o.data.short.price="暂不销售",o.data.short.btn="暂不销售",o.data.short.notify="抱歉，该商品暂不销售"):"2"===o.fourth.hasStorage?(o.data.short.price="无货",o.data.short.btn="无货",o.data.short.notify="抱歉，该地区/商品无货"):o.fourth.areadyRobbed?(o.data.short.price="已抢完",o.data.short.btn="已抢完",o.data.short.notify="抱歉，该商品已抢完"):(o.data.short.price="暂不销售",o.data.short.btn="暂不销售",o.data.short.notify="抱歉，该商品暂不销售"):(o.data.short.price="已下架",o.data.short.btn="已下架",o.data.short.notify="抱歉，该商品已下架"),o.data.short.isShort=1,n=void 0,o.data.sub.clusterFlag&&(i=o.data.sub.subMap,r=Object.keys(i).find((function(e){return i[e]===o.fourth.partNumber})).split("-"),s=[],c=[],d=[],o.data.sub.saleList.forEach((function(e){e.join("-")!==r.join("-")&&(e[0]===r[0]?s.push(e):e[1]&&e[1]===r[1]?c.push(e):d.push(e))})),n=s.concat(c).concat(d).splice(0,2).map((function(e){return{key:e,partNumber:o.data.sub.subMap[e.join("-")],name:e.map((function(e,t){return o.data.sub.keyMaps[t][e]})).join(" ")}}))),o.setData({short:o.data.short}),e.next=13,P.default.getNoGoods(o,o.fourth.partNumber,o.fourth.shop,t);case 13:if(u=e.sent,a===o.version){e.next=16;break}return e.abrupt("return");case 16:o.data.short.more=n||[],o.data.short.like={show:0,list:u.data.data.sugGoods||[]},o.data.short.recommend=u.data.data.srecommendation,o.data.short.itemParm=u.data.data.itemParm,o.data.short.empty=!o.data.short.more.length&&!o.data.short.like.list.length&&!o.data.short.recommend,o.data.short.showLike=o.data.short.more.length||!o.data.short.like.list.length||o.data.short.recommend?0:1,o.data.short.showShort=o.data.short.empty?0:1,o.data.short.recommend&&(o.data.fourth.recommendPictureSwitch&&o.data.short.recommend.pictureUrl?o.data.short.recommend.pictureUrl=o.data.short.recommend.pictureUrl+"_200h_200w_4e":o.data.short.recommend.pictureUrl=z.default.img+"/uimg/b2c/newcatentries/"+o.data.short.recommend.supplierCode+"-"+o.data.short.recommend.sugGoodsCode+"_1_200x200.jpg"),o.data.short.like.list.length&&o.data.short.like.list.forEach((function(e){o.data.fourth.recommendPictureSwitch&&e.pictureUrl?e.pictureUrl=e.pictureUrl+"_200h_200w_4e":e.pictureUrl=z.default.img+"/uimg/b2c/newcatentries/"+e.vendorId+"-"+e.sugGoodsCode+"_1_200x200.jpg"})),o.setData({short:o.data.short}),e.next=30;break;case 28:o.data.short={isShort:0,showShort:0,shortChecked:1},o.setData({short:o.data.short});case 30:e.next=35;break;case 32:throw e.prev=32,e.t0=e.catch(0),e.t0;case 35:case"end":return e.stop()}}),e,this,[[0,32]])}))),function(e,t){return le.apply(this,arguments)}),parseUnionData:function(e){var t=this;e&&e.split("&").forEach((function(e){var a=e.split("=");t.options&&(t.options[a[0]]=a[1])})),t.fourth.hasUnionData=!0},initfunction:function(){var e=i.createSelectorQuery(),t=this;e.select("#banner-container").boundingClientRect(),e.select("#anchors_separator").boundingClientRect(),e.select("#anchors_detail").boundingClientRect(),e.selectViewport().scrollOffset(),e.exec((function(e){var a=[];if(e&&e[0]){try{for(var o in e)o<3&&e[o]&&void 0!==e[o].top&&a.push(parseInt(e[o].top-39)),console.log(e[o])}catch(e){console.log(e,"获取节点有误")}t.setData({tabTopData:a})}}))},getOptimizeCartInfo:function(e){console.info(e);try{var t=e.data.data;if(t.jgActivityInfos)return t.jgActivityInfos.downMs;if(t.jgObj&&t.jgObj.activityList&&t.jgObj.activityList.length>0&&t.jgObj.activityList[0].disDesc)return t.jgObj.activityList[0].disDesc}catch(e){return console.log(e),""}},delayTarbarTip:function(){var e=this;t((function(){e.fourth.tarbarTip=!1,e.setData({"fourth.tarbarTip":!1})}),3e3)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},updateCartNumber:(ue=ce(ne.default.mark((function e(){var t,a,o;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,Me.globalData.isLogin){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,P.default.mergeShoppingCart(t);case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:o=(a.data.cartTotalQty||0)>99?"99+":a.data.cartTotalQty,t.setData({"actionBar.cartNumber":o}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),Pe(t,{errorCode:"pds-gwcjk-gwcgs"});case 16:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(){return ue.apply(this,arguments)}),onShareAppMessage:function(e){e&&e.target&&e.target.dataset&&e.target.dataset.type&&"sendgift"===e.target.dataset.type?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:3,eleid:"140000610"}}}}):(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000270"}}}});var t=this,a=t.data.price.name,o=encodeURIComponent("/pages/fourth/fourth?productId="+t.fourth.partNumber+"&shop="+t.fourth.shop+"&shared=3");return console.warn("fourthShareUrl",o),{title:a,path:"/pages/index/index?target="+o,imageUrl:t.data.sharefriendImg,success:function(e){t.shareCloseEvent()},fail:function(e){"shareAppMessage:fail cancel"===e.errMsg?(Q.default.showToast({title:"取消转发"}),t.shareCloseEvent()):"shareAppMessage:fail"===e.errMsg&&Pe(t,{errorCode:"pds-spxq-2fxpysb"})}}},openBigImg:function(e){var t=this.data.bigPage;t.showBig=!0,(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:3,eleid:"140000180"}}}}),t.detailsUrl&&(t.current=t.current-1),this.setBannerScroll(),this.setData({bigPage:t})},closeBigImg:function(){var e=this.data.bigPage;e.detailsUrl&&(e.current=e.current+1),e.showBig=!1,this.setData({bigPage:e})},toH5:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:11,eleid:"140000420"}}}});var e=this.data.oldForNewMsg.oldForNewUrl;i.navigateTo({url:"/pages/webView/index?webViewSrc="+e+"&notNeedLogin=true"})},answerToH5:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:18,eleid:"140000840"}}}});var e,t,a=[this.data.fourth],o=a[0],n=a[1],r=this.data.fourth;if(n=r.isLYTM?1:r.isHwg?2:0,o&&o.params&&o.params.productId){e=Ie(o.params.productId),t=r.shopBrandcode&&"003"===String(r.shopBrandcode.substr(0,3))?r.shopBrandcode:r.shopParam;var s=this.judgeEnv("answer")+"/wdPage.html#/"+e+"/"+t+"/"+o.supplierCode+"/"+n+"/"+(o.isCSSWL?1:0)+"/"+encodeURIComponent((this.data.price.name+"").replace(/\//g," "))+"/0/null/null/null";i.navigateTo({url:"/pages/webView/index?webViewSrc="+s+"&notNeedLogin=true"})}},goToAdvertise:function(e){e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.url&&(this.data.advertisement&&this.data.advertisement.apsClickUrl&&i.request({url:this.data.advertisement.apsClickUrl}),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000650",tar:this.data.advertisement.apsClickUrl}}}}),i.navigateTo({url:e.currentTarget.dataset.url+"&notNeedLogin=true"}))},compareVersion:function(e,t){e=e.split("."),t=t.split(".");for(var a=Math.max(e.length,t.length);e.length<a;)e.push("0");for(;t.length<a;)t.push("0");for(var o=0;o<a;o++){var n=parseInt(e[o]),i=parseInt(t[o]);if(n>i)return 1;if(n<i)return-1}return 0},playVideo:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000640"}}}}),this.videoContext.play();var e=this,a=e.data.bigPage,o="bigPage.isPlayVideoToastShow";if(a.isShowFront=!1,this.setData({bigPage:a}),!a.isWiFi&&!a.isAleadyShowToast){a.isAleadyShowToast=!0,e.setData(se({},o,!1));t((function(){e.setData(se({},o,!0))}),3e3)}},playEnded:function(){var e=this.data.bigPage;e.isShowFront=!0,this.setData({bigPage:e})},toApp:function(){},bannerChange:function(e){if(e&&e.detail){var t=void 0,a=void 0,o=void 0;switch(e.detail.current){case 1:t="140",a="3",o="140000250";break;case 2:t="140",a="3",o="140000260";break;case 3:t="140",a="3",o="140000270";break;case 4:t="140",a="3",o="140000280";break;case 5:t="140",a="3",o="140000290";break;case 6:t="140",a="3",o="140000300";break;case 7:t="140",a="3",o="140000310";break;case 8:t="140",a="3",o="140000320";break;case 9:t="140",a="3",o="140000330"}this.pointFun({pageid:t,modid:a,eleid:o,node:"bigImage"}),(0,ee.saSendLog)("autoexpo",this)}if(this.videoContext.pause(),!this.data.bigPage.showBig){var n=this.data.bigPage;n.current=e.detail.current,e&&e.detail&&"touch"==e.detail.source&&this.setData({bigPage:n})}},bannerChangeBig:function(e){var t=this.data.bigPage;t.current=e.detail.current,this.setBannerScroll(),this.setData({bigPage:t})},chooseBigImg:function(e){var t=this.data.bigPage;t.current=e.currentTarget.dataset.index,this.setBannerScroll(),this.setData({bigPage:t})},setBannerScroll:function(){if(this.systemInfo){var e=this.data.bigPage,t=e.current;e.scroll>92*t&&(e.scroll=92*t),92*(t+1)>e.scroll+this.systemInfo.windowWidth&&(e.scroll=92*(t+1)-this.systemInfo.windowWidth)}},updateBannerScroll:function(e){this.data.bigPage.scroll=e.detail.scrollLeft},promoteExpand:function(){this.setData({"promote.expand":1^this.data.promote.expand})},subExpand:function(){this.setData({"sub.expand":1^this.data.sub.expand}),this.setData({"sub.count":this.data.sub.count})},subPick:function(e){if(!this.fourth.loadingPhase1){var t=this.data.sub;t.rows[e.currentTarget.dataset.rowIndex].items[e.currentTarget.dataset.itemIndex];"4-14"===this.fourth.priceType&&(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:26,eleid:"140003870"}}}}),L.default.setSubPick(t,e.currentTarget.dataset.rowIndex,e.currentTarget.dataset.itemIndex),this.setData({sub:t}),1===t.picked.length?this.autoClick({pageid:140,modid:11,eleid:"140000430",eletp:"prd"}):this.autoClick({pageid:140,modid:11,eleid:"140000440",eletp:"prd"}),this.loadPartAsync()}},subInc:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:11,eleid:"140001150"}}}}),this.data.sub.validCount++,this.data.sub.count=this.data.sub.validCount,this.subCheckValue()},subDesc:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:11,eleid:"140001160"}}}}),this.data.sub.validCount--,this.data.sub.count=this.data.sub.validCount,this.subCheckValue()},subCheckValue:function(e){var t=this.data.sub;console.log(e),e&&(t.count=Number(e.detail.value),t.validCount=Number(e.detail.value)),console.log(t,"sub");var a=t.count;t.count=t.count<t.max?t.count:t.max,t.count=t.count>t.min?t.count:t.min,t.validCount=t.count,e&&a===t.count?this.setData({"sub.validCount":t.validCount,"sub.count":t.validCount}):this.setData({sub:t})},subCheckValue2:function(e){var a=this;if(e.detail.value.length)return function(e){clearTimeout(a.data.sub.checktimer),a.data.sub.checktimer=t((function(){a.subCheckValue.call(a,e)}),16)}(e)},subCheckValueBlur:function(e){var a=this;return(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:11,eleid:"140001140"}}}}),console.log(""===e.detail.value),function(e){clearTimeout(a.data.sub.checktimer),a.data.sub.checktimer=t((function(){a.subCheckValue.call(a,e)}),16)}(e)},giftSubClick:function(e){var t=void 0,a=this.fourth.giftObj;if(e&&e.currentTarget&&e.currentTarget.dataset){var o=e.currentTarget.dataset.index,n=!0,i=!1,r=void 0;try{for(var s,c=a[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value;d.picked=!1,o===d.index&&(d.picked=!0)}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}0===o&&(this.data.sub.min=1,this.data.sub.max=1,t=1),1===o&&(this.data.sub.min=2,this.data.sub.max=99,t=2),this.setData({"fourth.giftObj":a,"sub.count":t,"sub.validCount":t})}},detailTabChange:function(e){var t=e.currentTarget.dataset.index,a=this;switch(t){case"0":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140002920"}}}});break;case"1":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140002930"}}}});break;case"2":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140002940"}}}});break;case"3":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000620"}}}})}var o={"detail.currentTab":t};if(t!==this.data.detail.currentTab){if("0"===a.data.detail.currentTab&&i.canIUse("createSelectorQuery")){var n=i.createSelectorQuery();n.select(".detail-graphic-warpper").boundingClientRect(),n.exec((function(e){a.setData({"detail.graphicHeight":e[0].height})}))}a.setData(o)}},clickFaqAll:function(e){this.hideCoverHandle=function(){this.setData({"detail.detailFaqShow":0})},this.setData({"fourth.coverShow":1,"detail.detailFaqShow":1})},clickFaqRow:function(e){var t=e.currentTarget.dataset.index;this.setData(se({},"oversea.faq.list["+t+"].show",!this.data.oversea.faq.list[t].show))},clickDetailAll:function(e){this.hideCoverHandle=function(){this.setData({"detail.detailCoverShow":0})},this.setData({"fourth.coverShow":1,"detail.detailCoverShow":1})},moreDetail:function(e){this.data.fourth.isVip?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:4,eleid:"140000480"}}}}):(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:4,eleid:"140000430"}}}}),(0,W.checkLogin)({toLogin:!0}).then((function(){i.navigateTo({url:"/packageA/pages/superMember/superMember_chanel/superMember_chanel"})})).catch((function(){console.log("我没登录,咋滴")}))},clickTax:function(e){this.hideCoverHandle=function(){this.setData({"oversea.tax.show":0})},this.setData({"fourth.coverShow":1,"oversea.tax.show":1})},clickBanner:function(e){this.hideCoverHandle=function(){this.setData({"oversea.banner.show":0})},this.fourth.isJW&&(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:25,eleid:"140003520"}}}}),this.setData({"fourth.coverShow":1,"oversea.banner.show":1})},toBanner:function(){var e=this.data.fwlabels.place1.length>0?this.data.fwlabels.place1[0].docLink.replace("http:","https:"):"";e&&i.navigateTo({url:"/pages/webView/index?webViewSrc="+e})},clickYunfei:function(e){this.data.oversea.yunfei&&(this.hideCoverHandle=function(){this.setData({"oversea.yunfei.show":0})},this.setData({"fourth.coverShow":1,"oversea.yunfei.show":1}))},clickPromote:function(e){var t=e.currentTarget.dataset.code;if((0,ee.saSendLog)("autoexpo",this),e&&e.currentTarget&&e.currentTarget.dataset){var a=e.currentTarget.dataset.param;"满减"===a?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000660"}}}}):"赠品"===a&&(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000600"}}}})}"gift"===t&&this.data.fourth.disCountStyle?(this.hideCover(),this.hideCoverHandle=function(){this.setData({"gift.show":0})},this.setData({"fourth.coverShow":1,"gift.show":1})):e.currentTarget.dataset.url&&this.data.fourth.disCountStyle&&i.navigateTo({url:e.currentTarget.dataset.url})},promoFourth:function(e){var t=e.currentTarget.dataset.giftid,a=e.currentTarget.dataset.show,o=this.data.fourth.shop;t&&o&&"Y"===a&&i.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+o})},toMZActivicty:function(e){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:6,eleid:"140010070"}}}});var t=encodeURIComponent(e.currentTarget.dataset.src.replace("http","https"));i.navigateTo({url:"/pages/webView/index?webViewSrc="+t})},clickService:function(){(0,ee.saSendLog)("autoexpo",this),this.hideCoverHandle=function(){this.setData({"service.show":0})},this.setData({"fourth.coverShow":1,"service.show":1}),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140001260"}}}})},hideCover:function(e){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140001270"}}}});this.data.floatButton.isShare?(this.fourth.coverShow=0,this.setData({"fourth.coverShow":this.fourth.coverShow,"floatButton.right":"-440","floatButton.width":"110"}),this.hideCoverHandle&&this.hideCoverHandle()):(this.fourth.coverShow=0,this.setData({"fourth.coverShow":this.fourth.coverShow,"floatButton.right":"-440","floatButton.width":"110"}),this.hideCoverHandle&&this.hideCoverHandle(),e&&e.currentTarget.dataset.flag&&"addrflag"===e.currentTarget.dataset.flag&&(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140000790"}}}}))},toggleParam:function(e){var t=e.currentTarget.dataset.target;if("lists"===t)this.setData({"detail.showParam":!this.data.detail.showParam});else if("service"===t){var a=this.data.detail.serviceList[e.currentTarget.dataset.index].show;this.setData(se({},"detail.serviceList["+e.currentTarget.dataset.index+"].show",!a))}},toggleShortContainer:function(){this.data.short.empty||this.setData({"short.showShort":1^this.data.short.showShort})},toggleShortLike:function(){this.setData({"short.showLike":1^this.data.short.showLike})},no:function(){},showCouponCover:function(e){(0,oe.formid)(e),(0,ee.saSendLog)("autoexpo",this);var t=this;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000440"}}}}),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000680"}}}});(0,W.checkLogin)({toLogin:!0}).then((function(){U.default.reloadCoupon(t).then((function(e){console.log(e),t.hideCoverHandle=function(){t.setData({"couponCover.show":0,"fourth.disCountStyle":0})},t.setData({"couponCover.show":1,"fourth.disCountStyle":1})}))})).catch((function(){Pe(t,{errorCode:"pds-spxq-2lqrkdjsb"})}))},pickPart:function(e){this.fourth.loadingPhase1||this.loadPartAsync(null,e.currentTarget.dataset.part)},openItem:function(e){var t=e.currentTarget.dataset;if(e&&e.currentTarget&&e.currentTarget.dataset){var a=void 0,o=void 0,n=void 0;switch(e.currentTarget.dataset.index){case 0:a="140",o="15",n="140001540";break;case 1:a="140",o="15",n="140001550";break;case 2:a="140",o="15",n="140001560";break;case 3:a="140",o="15",n="140001570";break;default:n=""}(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:a,modid:o,eleid:n}}}})}i.navigateTo({url:"/pages/fourth/fourth?productId="+t.part+"&shop="+t.shop}),this.hideCover()},pickAddress:function(){(0,ee.saSendLog)("autoexpo",this);var e=this;e.data.fourth.HyAddress?e.goAddress():(0,W.checkLogin)().then((function(){var t;P.default.GetAddressInfo4Level().then((t=ce(ne.default.mark((function t(a){var o;return ne.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=a.contactPointList).length?(e.setData({"fourth.coverShow":1,"addressCover.show":1}),e.hideCoverHandle=function(){e.setData({"addressCover.show":0})},e.setData({addressList:o.length&&o})):e.goAddress();case 2:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})).catch((function(){e.goAddress()}))})).catch((function(){e.goAddress()})),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140000560"}}}})},addressChange:function(e){var t=this,a=e.currentTarget.dataset;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140001250"}}}}),a&&a.item&&P.default.GetSmallProgram(a.item).then((function(){t.hideCover(),i.setStorageSync("addressActive",a.item),i.setStorageSync("addressFlag","addressReplace"),i.removeStorageSync("userLocation"),t.onShowAsync(),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140000770"}}}})})).catch((function(){Q.default.showToast({title:"地址列表切换失败，请重试"})}))},goAddress:function(){this.fourth.position=this.fourth.position||{},(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:13,eleid:"140000780"}}}}),i.navigateTo({url:"/packageC/pages/fourth/address/address?provinceMDMId="+this.fourth.position.provinceMDMId+"&cityMDMId="+this.fourth.position.cityMDMId+"&districtMDMId="+this.fourth.position.districtMDMId})},addToCart:function(e){(0,oe.formid)(e),(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140003160"}}}});var t=this,a=!0;t.fourth&&t.fourth.priceType&&"7"===t.fourth.priceType.substr(0,1)&&(a=!1);try{var o,n=(o={},se(o,Y.ActType.QIANG_GOU,"140000020"),se(o,Y.ActType.XIAN_SHI,"140000060"),o)[this.fourth.actType]||"140000160";if(this.autoClick({pageid:140,modid:24,eleid:n,eletp:"addtocart"}),t.fourth.isHwg?this.autoClick({pageid:140,modid:22,eleid:"140000510",eletp:"addtocart"}):t.fourth.isJW?this.autoClick({pageid:140,modid:22,eleid:"140000530",eletp:"addtocart"}):t.fourth.snCard?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140000820"}}}}):t.data.activity.dcj?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140010010"}}}}):t.data.activity.cxj?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140010030"}}}}):"4-14"===t.fourth.priceType?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140006610"}}}}):"4"===t.fourth.activityType||"6"===t.fourth.activityType&&t.fourth.activitySubType?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140006620"}}}}):this.autoClick({pageid:140,modid:22,eleid:"140000550",eletp:"addtocart"}),!this.data.short.shortChecked||!this.data.activity.ready){var i=void 0;return i=this.data.short.shortChecked?2:1,a&&Q.default.showToast({title:"添加失败("+i+")"}),this.removeBuyLock()}if(this.checkSubPicked())return this.removeBuyLock();if(t.fourth.buyLock)return;this.addBuyLock(2);(0,W.checkLogin)({page:"fourth",act:"add-to-cart",toLogin:!0}).then((function(){var e=void 0;!function(o){var n=3,i={number:t.data.sub.count,activityId:t.data.activity.activityId,cartHeadInfo:o};D.default.addShoppingCloudCart(t,i).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n=4,t.removeBuyLock(),!i.data||!i.data.cartHeadInfo||"Y"!=i.data.cartHeadInfo.isSuccess){if(i.data&&i.data.errorInfos&&i.data.errorInfos.length){var r=i.data.errorInfos[0];e=r.errorMessage,r.needImageCode&&"1"==r.needImageCode&&Q.default.showToast({title:e})}n=5;var s=void 0;throw i.data&&0!==i.data.errorInfos.length&&(s=i.data.errorInfos[0].errorCode),Pe(t,{errorCode:"pds-spxq-2jgsb__"+s}),console.error(i),new Error("4-加入购物车失败:"+JSON.stringify(i))}(i.data.cartHeadInfo.cartTotalQty||0)>99||i.data.cartHeadInfo.cartTotalQty;t.updateCartNumber(),a?Q.default.showToast({title:"添加成功"}):Q.default.showToast({title:"加入购物车成功"}),o&&A.default.hide(t)})).catch((function(o){console.error("addToCart",o),t.removeBuyLock(),3==n?a&&Q.default.showToast({title:"添加失败(3)"}):a&&Q.default.showToast({title:e||"添加失败("+n+")"})}))}()})).catch((function(e){console.info("addToCart",e),t.removeBuyLock()}))}catch(e){throw console.error(e),t.removeBuyLock(),a&&Q.default.showToast({title:"添加失败(0)"}),e}},customBuy:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140006790"}}}});if(this.data.fourth.c2mFlag){var e=void 0;this.data.fourth.isJW?e="JW":this.data.fourth.isCShop&&(e="cShop");var t=this.data;t.imageVerify=this.imageVerify,i.setStorage({key:"fourthData",data:t}),i.navigateTo({url:"../../packageC/pages/fourth/customPosture/posture?subInfo="+this.data.sub.pickedName+"&goodsType="+e+"&productId="+this.data.fourth.partNumber+"&shop="+this.data.fourth.shop})}},buy:function(e){try{var a;(0,oe.formid)(e);var o=this;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140003150"}}}});var n=(a={},se(a,Y.ActType.QIANG_GOU,"140000010"),se(a,Y.ActType.BAO_KUAN,"140000040"),se(a,Y.ActType.XIAN_SHI,"140000050"),se(a,Y.ActType.YU_DIN,"140000070"),a)[this.fourth.actType]||"140000150";if(n&&this.autoClick({pageid:140,modid:24,eleid:n,eletp:"buynow"}),o.fourth.isHwg?this.autoClick({pageid:140,modid:22,eleid:"140000500",eletp:"buynow"}):o.fourth.isJW?this.autoClick({pageid:140,modid:22,eleid:"140000520",eletp:"buynow"}):o.fourth.snCard?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140000810"}}}}):o.data.activity.dcj?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140010020"}}}}):o.data.activity.cxj?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140010040"}}}}):o.data.activity.book?(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140003370"}}}}):this.autoClick({pageid:140,modid:22,eleid:"140000540",eletp:"buynow"}),!this.data.short.shortChecked||!this.data.activity.ready){var r=this.data.short.shortChecked?2:1;return Q.default.showToast({title:"购买失败("+r+")"}),this.removeBuyLock()}if(this.checkSubPicked())return this.removeBuyLock();if(o.fourth.buyLock)return this.removeBuyLock();this.addBuyLock(1);var s={page:"fourth",act:"quick-buy",toLogin:!0,params:{fourth:o.fourth,data:{price:(o.data.attacheRes||o.data.price||{}).currentPrice,images:(o.data.bigPage||{}).imgUrls,option:o.data.baseOptions||{},activity:o.data.activity||{},package:o.data.package||{},count:(o.data.sub||{}).count,shop:o.data.shop||{},pageUrl:o.data.pageUrl,pageid:o.data.pageid,title:o.data.title,itemInfoVo:o.data.result.data.data.data1.data.itemInfoVo}}};(0,W.checkLogin)(s).then((function(){if(o.data.fourth.c2mFlag)o.customBuy();else{var e=void 0;!function(a){var n=3,r={number:o.data.sub.count,activityId:o.data.activity.activityId,wapTerminal:"01",cartHeadInfo:a};console.info(r),D.default.quickBuy(o,r).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(console.log(r),n=4,o.removeBuyLock(),r.data&&r.data.errorInfos&&r.data.errorInfos.length){var s=r.data.errorInfos[0];e=r.data.errorInfos[0].errorMessage,s.needImageCode&&"1"==s.needImageCode&&Q.default.showToast({title:e})}else if("1"===r.code&&(a&&A.default.hide(o),t((function(){o.removeBuyLock()}),500),r.data&&r.data.result&&"Y"==r.data.result.isSuccess)){var c=o.data.result.data.data.data1.data.itemInfoVo;return void(o.fourth.isVirtual&&c&&c.attachedTypeList&&c.attachedTypeList.length>0&&c.attachedTypeList.some((function(e){return"11"===e.attachedType}))?i.navigateTo({url:"/packageC/pages/cart/gamecart/cart2?no="+r.data.result.cart2No}):i.navigateTo({url:"/pages/cart/cart2/cart2?no="+r.data.result.cart2No}))}n=5;var d="",u="pds-spxq-2lgsb_";throw r.data&&0!==r.data.errorInfos.length&&(d=r.data.errorInfos[0].errorCode),o.data.activity.book&&(u="pds-spxq-2zfdj_"),Pe(o,{errorCode:""+u+d}),new Error("立即购买失败:"+JSON.stringify(r))})).catch((function(t){console.error(t),o.removeBuyLock(),3==n?Q.default.showToast({title:"购买失败(3)"}):Q.default.showToast({title:e||"购买失败("+n+")"})}))}()}})).catch((function(){o.removeBuyLock()}))}catch(e){throw console.error("立即购买",e),this.removeBuyLock(),Q.default.showToast({title:"购买失败(0)"}),e}},gobuy:function(){var e=this;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140000600"}}}}),(0,W.checkLogin)().then((function(){var t,a;a={number:e.data.sub.count,activityId:e.data.activity.activityId,cartHeadInfo:t},D.default.quickBuy(e,a,1).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.info(t);var a=t.immediateBuyItems[0].itemHeadInfo,o=t.immediateBuyItems[0].mainCmmdtyInfo.basicInfo;e.setData({"fourth.sendparams":[{itemHeadInfo:{itemNo:a.itemNo,activityType:a.activityType,activityId:a.activityId,subActivityType:a.subActivityType},mainCmmdtyInfo:{basicInfoVO:{itemNo:o.itemNo,cmmdtyCode:o.cmmdtyCode,shopCode:o.shopCode,shopName:o.shopName,cmmdtyQty:o.cmmdtyQty}}}],"fourth.timestemp":Date.now()})})).catch((function(e){return console.info(e),Q.default.showToast({title:"购买失败(6)"})}))})).catch((function(){e.removeBuyLock()}))},buyRecommend:function(){},goCart:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140003180"}}}}),i.navigateTo({url:"/pages/cart/noSwitchCart1/index"})},homePage:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:23,eleid:"140010050"}}}}),i.switchTab({url:"/pages/index/index"})},burialPoint:function(e){switch(e.currentTarget.dataset.point){case"main":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000380"}}}});break;case"note":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000390"}}}});break;case"all":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000400"}}}});break;case"score":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000410"}}}});break;case"service":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000470"}}}});break;case"inshop":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140000480"}}}});break;case"btmservice":(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:22,eleid:"140000490"}}}})}},toTop:function(){this.fourth.scrollTop=0,this.setData({scrollTop:0,"detail.tabFix":!1,"detail.toTop":!1})},jumpTo:function(e){var t=e.currentTarget.dataset.id;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:2,eleid:{1:"140000230",2:"140000240",3:"140000250"}[t]}}}});var a=e.currentTarget.dataset.option;this.setData({selectIndex:t,toView:a})},shareFriendImgFun:function(){var e=this;P.default.getSharePic(this,1).then((function(t){if(!t)return!1;e.setData({sharefriendImg:t,friendDisplay:!0})})).catch((function(t){Q.default.showToast({title:"分享失败，请重试"}),console.error(t),Pe(e,{errorCode:"pds-spxq-2fxpysb"})}))},shareEvent:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000260"}}}}),this.hideCoverHandle=function(){this.setData({sharePopState:!1})},this.setData({"fourth.coverShow":!0,sharePopState:!0}),this.data.bigPage.imgUrls.length<2?this.data.bigPage.imgUrls[0].url?this.setData({sharefriendImg:this.data.bigPage.imgUrls[0].url,friendDisplay:!0}):this.setData({sharefriendImg:"https://image2.suning.cn/uimg/cms/img/154199042086981761.png",friendDisplay:!0}):this.shareFriendImgFun()},shareCloseEvent:function(){this.setData({"fourth.coverShow":!1,sharePopState:!1}),this.hideCoverHandle&&this.hideCoverHandle()},sharefriendShip:function(){var e=this;(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000280"}}}}),P.default.getSharePic(this,2).then((function(t){if(!t)throw new Error("分享失败，请重试");e.setData({shareImg:t}),e.hideCoverHandle=function(){return e.setData({shareFriendPopState:!1})},e.setData({shareFriendPopState:!0,sharePopState:!1})})).catch((function(t){console.log(t,"err"),Q.default.showToast({title:"分享失败，请重试"}),Pe(e,{errorCode:"pds-spxq-2fxpyqsb"})}))},sharePostBar:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000640"}}}});var e={third_app_id:"ubGt79hmfogvuMmjOUeuYbefB8mYhQKD",third_app_name:"苏宁易购",third_app_avatar:"https://image3.suning.cn/uimg/cms/img/155263491206154298.png",third_app_pic:this.data.bigPage.imgUrls?this.data.bigPage.imgUrls[1]?this.data.bigPage.imgUrls[1].url:this.data.bigPage.imgUrls[0].url:"https://image2.suning.cn/uimg/cms/img/154199042086981761.png",third_app_link:"/pages/fourth/fourth?productId="+this.fourth.partNumber+"&shop="+this.fourth.shop+"&title="},t=encodeURIComponent(JSON.stringify(e));i.navigateToSmartProgram({appKey:"flFqXclepWs7RdugAszy9eERL7G5dS0I",path:"/pages/frshistory/frshistory?extradata="+t,extraData:{from:"suning"},success:function(e){}})},saveImg:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:32,eleid:"140000290"}}}});var e=this;if(!i.saveImageToPhotosAlbum)return i.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"});i.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]||i.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("授权成功")}})}}),i.downloadFile({url:this.data.shareImg,success:function(a){console.log("下载文件:success"),console.log(a),i.saveImageToPhotosAlbum({filePath:a.tempFilePath,success:function(a){Q.default.showToast({title:"保存成功"}),t((function(){e.setData({"fourth.coverShow":!1,sharePopState:!1}),e.hideCoverHandle()}),1e3)},fail:function(e){console.log(e,"res")}})},fail:function(e){console.log(e,"下载失败")}})},copyTitle:function(){this.setData({copyIcon:!0})},copyEvent:function(){this.setData({copyIcon:!1}),i.setClipboardData({data:this.data.price.name,success:function(e){i.getClipboardData({success:function(e){console.log(e.data)}})}})},scrollMain:(de=ce(ne.default.mark((function e(a){var o,n;return ne.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fourth||(this.fourth={}),(o=this).fourth.firstScrolled||o.fourth.isHk||!o.isStep2Loaded||(this.fourth.firstScrolled=!0),(n=!!(a&&a.detail&&a.detail.scrollTop&&a.detail.scrollTop>400))!==this.data.fourth.topStatus&&this.setData({"fourth.topStatus":n}),this.data.fourth.playStatus&&this.setData({"fourth.playStatus":!1}),clearTimeout(o.fourth.scrollTimer),e.abrupt("return",function(e){console.log(55),o.fourth.scrollTimer=t((function(){var t=o.data.tabTopData;if(e&&(e.detail.scrollTop>t[0]&&e.detail.scrollTop<t[1]?o.setData({selectIndex:1}):e.detail.scrollTop>t[1]&&e.detail.scrollTop<t[2]?o.setData({selectIndex:2}):e.detail.scrollTop>t[2]&&o.setData({selectIndex:3}),e.detail.scrollTop>50&&o.setData({"fourth.hideLaunchAppBanner":!0}),i.canIUse("createSelectorQuery"))){if(!o.fourth.isHwg){var a=i.createSelectorQuery();a.select(".detail-tab-warpper").boundingClientRect(),a.exec((function(e){if(e&&e[0]){e[0].top<0!==o.data.detail.tabFix&&o.setData({"detail.tabFix":!o.data.detail.tabFix});var t=o.systemInfo?o.systemInfo.windowHeight:667;e[0].top-t+100<0!==o.data.detail.toTop&&o.setData({"detail.toTop":!o.data.detail.toTop})}}))}if(o.fourth.isHwg){var n=i.createSelectorQuery();n.select(".detail2").boundingClientRect(),n.exec((function(e){if(e&&e[0]){var t=o.systemInfo?o.systemInfo.windowHeight:667;e[0].top-t+100<0!=o.data.detail.toTop&&o.setData({"detail.toTop":!o.data.detail.toTop})}}));var r=i.createSelectorQuery();r.select(".oversea-country").boundingClientRect(),r.exec((function(e){e&&e[0]?e[0].top<0!=o.data.oversea.countryFix&&o.setData({"oversea.countryFix":!o.data.oversea.countryFix}):o.setData({"oversea.countryFix":!1})}))}}}),60)}(a));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return de.apply(this,arguments)}),checkSubPicked:function(){var e=this,t=[];if(this.data.sub.picked.forEach((function(a,o){null==a&&t.push(e.data.sub.rows[o].name)})),t.length>0){var a=t.join("和");return Q.default.showToast({title:"请选择"+a}),!0}},addBuyLock:function(e){1===e?this.setData({"actionBar.buying":!0}):this.setData({"actionBar.adding":!0}),this.fourth.buyLock=!0},removeBuyLock:function(){this.setData({"actionBar.buying":!1,"actionBar.adding":!1}),this.fourth.buyLock=!1},showTips:function(e){Q.default.showToast({title:e})},gotoAppoint:function(e){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:24,eleid:"140000090"}}}});var t=this;(0,W.checkLogin)({toLogin:!0}).then((function(){P.default.gotoAppoint(t).then((function(a){var o=a.value||{},n={title:a.message,timeInfo:o.rushStartTime?"抢购将于"+o.rushStartTime+"准时开始":"",phoneInfo:o.phoneNumber?"开抢前将提醒短信发送至"+o.phoneNumber:""};"006"!==a.code?("00"===a.code?(n.title="恭喜您预约成功！","1"===t.data.result.data.data.yyshop&&t.addToCart(e)):Pe(t,{errorCode:"pds-spxq-2ljyyyc"}),t.setData({orderModel:n},(function(){(0,ee.saSendLog)("autoexpo",this)}))):Q.default.showToast({title:"你已预约过，无需重复预约"})})).catch((function(e){console.log(e),Q.default.showToast({title:"活动太火爆啦，稍后再来试试吧！"})}))}))},orderModelCancel:function(){this.setData({orderModel:null})},lookMybook:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:24,eleid:"140005630"}}}});var e=encodeURIComponent({pre:"https://yushoupre1.cnsuning.com",xgpre:"https://yushouprexg.cnsuning.com",prod:"https://yushou.suning.com"}[Re]+"/appointwap/passport/tomyappoint_2.do");i.navigateTo({url:"/pages/webView/index?webViewSrc="+e})},orderBuy:function(e){var t=this;(0,W.checkLogin)().then((function(){P.default.orderQualification(t).then((function(a){var o=(a||{}).data||{};"0"===o.resultNewCode?t.buy(e):"5"===o.resultNewCode?Q.default.showToast({title:o.resultNewMsg}):Q.default.showToast({title:o.resultNewMsg||"当前活动太火爆，请稍后再试！"})})).catch((function(e){console.log(e),Q.default.showToast({title:"当前活动太火爆，请稍后再试！"})}))}))},openStoreCover:function(){this.setData({maskConfig:{maskShow:!0,maskMark:"tx",title:"选择门店",iconPosition:"left",iconSrc:"https://oss.suning.com/vss/activity/wximg/fourth/close-icon-left.png"}})},weightClick:function(){this.setData({maskConfig:{maskShow:!0,maskMark:"wt",title:"重量说明",maskCoverHeight:"60%",iconSrc:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/fourth/cover-close.png"}})},checkTxStore:function(e){if(e&&e.currentTarget&&e.currentTarget.dataset){var t=e.currentTarget.dataset.index;this.setData({"fourth.checkedTx":this.data.fourth.txfwObj[t],"maskConfig.maskShow":!1})}},parsePlayImg:function(e){if(!e||!e.length)return[];var t={pre:"https://uimgpre.cnsuning.com",prod:"https://image.suning.cn"};return e.forEach((function(e){e.picUrl=""+t[Re]+e.picUrl})),e},gotoReview:function(e){(0,oe.formid)(e);e.target=e.currentTarget,this.saClick(e);var t=void 0,a=void 0,o=Ie(this.data.fourth.partNumber);this.fourth.isPackage?(t="package",a=o):this.data.sub.characterFlag?(t="style",a=this.fourth.passPartNumber):(t="general",a=o);var n=this.fourth.shopParam,r=this.fourth.clusterId||"";i.navigateTo({url:"/packageA/pages/review/list/list?cmmdtyType="+t+"&cmmdtyValue="+a+"&shopId="+n+"&clusterId="+r+"&title="+this.data.title})},saClick:function(e){(0,ee.saSendLog)("click",{event:e})},autoClick:function(e){e.pageid=140;var t=["addtocart","buynow"].join(""),a=["shop","addtocart","buynow"].join("");e.eletp&&t.indexOf(e.eletp)&&(e.prdid=this.data.fourth.partNumber),e.eletp&&a.indexOf(e.eletp)&&(e.shopid=this.data.fourth.shop),"coupon"===e.eletp&&(e.activityid=""),console.log("snpm:",e),(0,ee.saSendLog)("click",{event:{target:{dataset:e}}})},goPin:function(e){var t=this;console.log("跳转拼购:/pages/fourth/fourth/fourth?actId="+t.fourth.pgActId),P.default.FourthToPingo().then((function(e){e?i.redirectTo({url:"/packageB/pages/pingou/fourth/fourth/fourth?actId="+t.fourth.pgActId}):i.navigateToSmartProgram({envVersion:"trial",appId:"wxe964260af9330942",path:"/pages/fourth/fourth/fourth?actId="+t.fourth.pgActId,success:function(e){console.info("success")},fail:function(e){console.error("拼购跳转失败123123:",e)}})}))},goAllowanceDescription:function(){var e="/pages/webView/index?webViewSrc="+this.data.allowance.activityJumpUrl.replace("http:","https:");i.navigateTo({url:e})},goShop:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:19,eleid:"140001980"}}}}),this.autoClick({pageid:140,modid:22,eleid:"140000140",eletp:"shop"});var e="/packageE/pages/shop/index/index?shopId="+this.data.shop.targetShop,t=0;try{t=getCurrentPages().length}catch(e){}t>7?i.redirectTo({url:e}):i.navigateTo({url:e})},showscrap:function(){this.hideCoverHandle=function(){this.setData({showscrap:!1})},this.setData({showscrap:!0,"fourth.coverShow":!0})},hidescrap:function(){this.setData({showscrap:!1,"fourth.coverShow":!1})},playSilde:function(){var e=this.data.fourth,t=void 0;e.playStatus||(t=!0),this.setData({"fourth.playStatus":!e.playStatus,"fourth.pointStatus":t})},loginchange:function(){Me.globalData.isLogin=!0,this.setData({"couponinit.isLogin":!0})},judgeEnv:function(e){if(e)try{var t={answer:{prod:"https://c.m.suning.com",pre:"http://cpre.m.cnsuning.com",xgpre:"http://cprexg.m.cnsuning.com"},localhwg:{prod:"https://lib.suning.com",pre:"https://libpre.cnsuning.com",xgpre:"https://libprexg.cnsuning.com"}},a=void 0;return t[e]&&Re&&(a=t[e][Re]),a}catch(e){console.log(e,"获取域名错误error")}},commonSendClick:function(e,t,a){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:e,modid:t,eleid:a}}}})},commonSendExpo:function(){console.log("曝光"),(0,ee.saSendLog)("autoexpo",this)},navTorecommendGoods:function(e){var t=this.data.shop.main?JSON.stringify(this.data.shop.main):"",a=e.currentTarget.dataset,o=a.suggoods&&(a.suggoods.constructor===Array&&0!==a.suggoods.length||a.suggoods.constructor===Object&&0!==Object.keys(a.suggoods).length)?JSON.stringify(a.suggoods):"",n=a.srecommendation&&(a.srecommendation.constructor===Array&&0!==a.srecommendation.length||a.srecommendation.constructor===Object&&0!==Object.keys(a.srecommendation).length)?JSON.stringify(a.srecommendation):"",r=a.itemparm&&(a.itemparm.constructor===Array&&0!==a.itemparm.length||a.itemparm.constructor===Object&&0!==Object.keys(a.itemparm).length)?JSON.stringify(a.itemparm):"",s="../../packageC/pages/fourth/recommend/recommend?sugGoods="+encodeURIComponent(o)+"&srecommendation="+encodeURIComponent(n)+"&itemParm="+encodeURIComponent(r)+"&shop="+encodeURIComponent(t);i.navigateTo({url:s})},ruleClick:function(){(0,ee.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:24,eleid:"140003410"}}}})},toPlayH5:function(e){e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.url&&i.navigateTo({url:"/pages/webView/index?webViewSrc="+e.currentTarget.dataset.url+"&notNeedLogin=true"})},setMenuBtnStyle:function(){var e={};i.getMenuButtonBoundingClientRect&&"wx"==(0,ie.getPlatformType)()&&(e=i.getMenuButtonBoundingClientRect()),this.fourth.menuButtonStyle=Object.assign({width:87,height:32,left:278,top:26,right:365,bottom:58},e),this.fourth.menuButtonStyle.top<26&&(this.fourth.menuButtonStyle.top=26)},navClick:function(e){if(e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.param){var t=e.currentTarget.dataset.param;"home"===t&&i.switchTab({url:"/pages/index/index"}),"back"===t&&i.navigateBack({delta:1,success:function(e){console.log("跳转成功"+e)}})}},deltetePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=getCurrentPages();if(console.log(a,"获取层级"),a&&(console.log("%c进入"+a.length,"color:red;font-size:18px;"),a.length===e)){console.log("%c进入第"+e+"层，开始跳转","color:red;font-size:18px;");var o="/"+a[e-1].route+"?"+a[e-1].fourth.initParm;console.log("%c跳转地址"+o,"color:red;font-size:18px;"),i.navigateBack({delta:t,success:function(){console.log("%c跳转地址222"+o,"color:red;font-size:18px;"),i.navigateTo({url:o})}})}},computePoint:function(){this.data.activity.dcj&&(this.pointFun({pageid:"140",modid:"22",eleid:"140010020",node:"buyBtn"}),this.pointFun({pageid:"140",modid:"22",eleid:"140010010",node:"cartBtn"})),this.data.activity.cxj&&(this.pointFun({pageid:"140",modid:"22",eleid:"140010040",node:"buyBtn"}),this.pointFun({pageid:"140",modid:"22",eleid:"140010030",node:"cartBtn"}))},pointFun:function(e){var t=e.pageid,a=e.modid,o=e.eleid,n=e.node;try{if(!n)return;var i=this.data.exposureObj;i[n]={},i[n].pageid=t,i[n].modid=a,i[n].eleid=o,this.setData({exposureObj:i})}catch(e){console.log(e,"埋点解析出错")}}};(0,W.extend)(je,U.default.action),(0,W.extend)(je,A.default.api),(0,W.extend)(je,j.default.action),(0,W.extend)(je,ae.default.action),(0,W.extend)(je,B.default.action),(0,W.extend)(je.data,B.default.extendData),R.default.init(je),M.default.init(je),Page(je)})),window.define("666",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=N(e(78)),I=e(667),P=e(25),D=N(e(36)),x=N(e(8)),_=N(e(22)),k=e(474),L=N(e(387));function N(e){return e&&e.__esModule?e:{default:e}}function E(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var O,A,R,M,U,j,B,F,V,H,q,G,Y,z,W,J,Q,X,K,$,Z,ee,te,ae,oe,ne,ie,re,se,ce=e(17),de=(0,D.default)(n.request),ue=e(9);a.default={getmemType:function(){var e=E(L.default.mark((function e(){return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","01");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getPrice:(se=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,D,_,N,E,O,A;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.fourth,r=this,s=i.position,c=(0,T.default)()||{},d=(0,k.prefixPartNumber)(a),u=i.shopParam,l="2",p="888",f=s.provinceMDMId,h=s.cityLESId,g=s.districtLESId,m="1",v="",y="",w=(0,P.getUserLevel)(c.custLevel)||"V0",b="",C="",S=5,D=x.default.pas+"/nsenitemsale_"+d+"_"+u+"_"+l+"_"+p+"_"+f+"_"+h+"_"+g+"_"+m+"_"+v+"_"+y+"_"+w+"_"+b+"__"+C+"_"+(c.custno||"")+"_01_"+S+"_"+t.data.version+"________________2.html",e.next=22,de({url:D});case 22:if("200"===(_=e.sent).data.code){e.next=25;break}throw new Error("call-nsenitemsale-failed");case 25:if(!(_&&_.data&&_.data.data&&_.data.data.data1&&"0"===_.data.data.data1.code)){e.next=27;break}return e.abrupt("return",_);case 27:if(N={},!(_.data&&_.data.data&&_.data.data.price)){e.next=34;break}if(N=_.data.data.price.saleInfo.filter((function(e){return(0,I.trimNumber)(e.partNumber)===a}))[0]){e.next=34;break}return N=_.data.data.price.saleInfo[0],i.partNumber=(0,I.trimNumber)(N.partNumber),e.abrupt("return",r.getPrice(t,i.partNumber,o,_));case 34:if((E=_.data.data.data1.data.passPartNumber?(0,I.trimNumber)(_.data.data.data1.data.passPartNumber):null)===a){e.next=49;break}if(!n){e.next=40;break}return _.data.data.price.saleInfo=n.data.data.price.saleInfo,_.currentPrice=N,e.abrupt("return",_);case 40:return O=x.default.pas+"/nsenitemsale_"+E+"_"+u+"_"+l+"_"+p+"_"+f+"_"+h+"_"+g+"_"+m+"_"+v+"_"+y+"_"+w+"_"+b+"__"+C+"_"+(c.custno||"")+"_01_"+S+"_"+t.data.version+".html",e.next=43,de({url:O});case 43:return A=e.sent,_.data&&_.data.data&&_.data.data.price&&(_.data.data.price.saleInfo=A.data.data.price.saleInfo),_.currentPrice=N,e.abrupt("return",_);case 49:return _.currentPrice=N,e.abrupt("return",_);case 51:e.next=57;break;case 53:throw e.prev=53,e.t0=e.catch(0),e.t0.code="E001-nssnPrice",e.t0;case 57:case"end":return e.stop()}}),e,this,[[0,53]])}))),function(e,t,a,o){return se.apply(this,arguments)}),getDetail:(re=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,P,D,_;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.fourth,r=i.position,s=(0,k.prefixPartNumber)(a),c=n.data.data.data1.data,d=c.itemInfoVo.categoryCode||"",u=c.groupInfoVO?c.groupInfoVO.categoryId:"",l=c.catalogId,p=n.currentPrice,f=(0,I.trimNumber)(n.data.data.data1.data.passPartNumber),h=c.itemInfoVo.brandCode||"",g=c.itemInfoVo.brandId||"",m=(0,T.default)()||{},v="",y=n.data.data.allpowerful||"",w="",t.data.package&&t.data.package.list&&(w=t.data.package.list.map((function(e){return e.subCategoryCode+"-"+e.sumPrice+"-"+e.subPartNumber})).join(",")),n.currentPrice.warrantyList&&n.currentPrice.warrantyList.length&&(v=n.currentPrice.warrantyList.map((function(e){return e.goodsCode+"-"+e.goodsType})).join(",")),f=(0,k.prefixPartNumber)(f),b=i.isVip?"02":"01",C="",n&&n.currentPrice&&(C=n.currentPrice.marketVipPrice||n.currentPrice.vipPrice),S="",P="",t.data.activity.stageInfo&&(S=t.data.activity.stageInfo.balanceStartTime||"",P=t.data.activity.stageInfo.balanceEndTime||""),D=x.default.pas+"/nsendetail_"+s+"_"+i.priceVendorCode+"_"+r.cityLESId+"_"+r.districtLESId+"_2_"+d+"_"+l+"_"+encodeURIComponent(p.promotionPrice)+"__"+r.provinceMDMId+"_"+i.priceSalesOrg+"_"+i.priceOwnerPlace+"_"+i.priceVendor+"_"+p.netPrice+"_0_"+f+"_888_"+p.priceType+"_"+h+"_"+w+"_"+g+"_"+u+"_"+i.itemType+"_"+(i.vendorType==I.Vendor.CSSWL?1:0)+"_"+(i.earliestArriveDate||"")+"_"+y+"__"+(m.custno||"")+"_"+v+"__"+b+"_"+C+"____"+S+"_"+P+"_______"+t.data.version+".html",e.next=28,de({url:D});case 28:return(_=e.sent).currentPrice=p,_.priceResult=n,_.data.data.salesPromotion=_&&_.data&&_.data.data&&_.data.data.salesPromotion||{},e.abrupt("return",_);case 35:throw e.prev=35,e.t0=e.catch(0),e.t0.code="E001-nsenDetail",e.t0;case 39:case"end":return e.stop()}}),e,this,[[0,35]])}))),function(e,t,a,o){return re.apply(this,arguments)}),getClusterPrice:(ie=E(L.default.mark((function e(t,a,o){var n,i,r,s,c;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.fourth,i=n.position,r=a.map((function(e){return(0,k.prefixPartNumber)(e)})).join(","),s=a.map((function(e){return n.shopParam})).join(","),c=x.default.icps+"/icps-web/getVarnishAllPrice014/"+r+"_"+i.cityLESId+"_"+i.districtLESId+"99_"+s+"_2_.vhtm",e.abrupt("return",de({url:c}));case 9:throw e.prev=9,e.t0=e.catch(0),e.t0.code="E001-getVarnishAllPrice014",e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e,t,a){return ie.apply(this,arguments)}),getAttache:(ne=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d,u,l,p,f,h,g;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.fourth,r=i.position,s=(0,k.prefixPartNumber)(a),c=n.data.data.data1.data,d=c.itemInfoVo.categoryCode||"",u=c.groupInfoVO?c.groupInfoVO.categoryId:"",l=n.currentPrice,p=(0,I.trimNumber)(n.data.data.data1.data.passPartNumber),p=(0,k.prefixPartNumber)(p),f=n.data.data.allpowerful||"",h=x.default.pas+"/nssnattache_"+s+"_"+i.supplierCode+"__18_5_"+d+"_"+u+"__"+("0000000000"==i.supplierCode?0:1)+"_2_"+i.itemType+"_"+p+"_"+(i.isPackage?1:0)+"_"+l.netPrice+"_888_"+r.districtLESId+"_"+r.cityLESId+"_"+i.itemType+"_0_"+f+"_"+i.shop+"_"+i.categoryIds+"__"+i.brandCode+"_"+i.brandId+"_"+i.clusterId+".html",e.next=14,de({url:h});case 14:return(g=e.sent).currentPrice=l,e.abrupt("return",g);case 19:throw e.prev=19,e.t0=e.catch(0),e.t0.code="E001-nssnAttache",e.t0;case 23:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(e,t,a,o){return ne.apply(this,arguments)}),getDetailHtml:(oe=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,I.trimNumber)(a),i=n.data.data.data1.data,r=i.itemInfoVo.categoryCode,s=i.itemInfoVo.brandCode||"",c=x.default.product+"/pds-web/ajax/selfUniqueInfoJsonp_"+a+"_"+o+"_"+r+"_"+s+"_.html",e.next=8,de({url:c});case 8:return d=e.sent,e.abrupt("return",d);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0.code="E001-selfUniqueInfoJsonp",e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e,t,a,o){return oe.apply(this,arguments)}),getNoGoods:(ae=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d,u,l,p,f,h,g,m,v,y;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.fourth,r=i.position,s=n.data.data.data1.data,c=s.groupInfoVO?s.groupInfoVO.categoryId:"",d=s.itemInfoVo.categoryCode,u=(0,I.trimNumber)(n.data.data.data1.data.passPartNumber),l=n.data.data.allpowerful||"",p=(0,T.default)()||{},f=(0,k.getSnma)()||"",h=s.catalogId,g=n.currentPrice,m=n.data.data.pckMainNumber||"",v=x.default.pas+"/nssnnogoods_"+a+"_"+i.shopParam+"_"+r.cityLESId+"_"+r.districtLESId+"_"+c+"_2_"+u+"_888_"+l+"___"+(p.custno||"")+"_"+f+"__"+encodeURIComponent(g.promotionPrice)+"_"+h+"_"+m+"_"+d+"_"+g.priceType+".html",e.next=16,de({url:v});case 16:return y=e.sent,e.abrupt("return",y);case 20:throw e.prev=20,e.t0=e.catch(0),e.t0.code="E001-nssnNogoods",e.t0;case 24:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(e,t,a,o){return ae.apply(this,arguments)}),getHwgAnwser:(te=E(L.default.mark((function e(t,a,o,n){var i,r,s,c,d,u,l;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.fourth,r=n.data.data.data1.data,s=r.itemInfoVo.categoryCode,c=r.itemInfoVo.brandCode||"",d=x.default.pas+"/nsHwgAnswerInfo_"+i.shopParam+"_"+a+"_"+s+"_"+c+"_callback.html",e.next=8,(0,P.requestPromise)({url:d});case 8:return u=e.sent,l=u.data,e.abrupt("return",l?JSON.parse(l.substr(9,l.length-11)):{});case 13:throw e.prev=13,e.t0=e.catch(0),e.t0.code="request-getHwgAnwser",e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t,a,o){return te.apply(this,arguments)}),mergeShoppingCart:(ee=E(L.default.mark((function e(){var t;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,((0,T.default)()||{}).custno){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return t=x.default.shopping+"/app/cart1/gateway/queryCartProdNum.do?&operationTerminal=01&&supportYB=1&publishDate=20170710",e.abrupt("return",(0,P.requestPromise)({url:t}));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.code="request-ipQuery",e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return ee.apply(this,arguments)}),ipQuery:(Z=E(L.default.mark((function e(){return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",de({url:x.default.ipService+"/ipQuery.do"}));case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.code="request-ipQuery",e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return Z.apply(this,arguments)}),token:($=E(L.default.mark((function e(){return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",de({url:x.default.crdNode+"/wx/node/passport/getUnionId/mainApp",method:"POST"}));case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.code="request-token",e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return $.apply(this,arguments)}),getBestCoupon:(K=E(L.default.mark((function e(t,a){var o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=t.fourth,n=o.position,(i=(0,T.default)()||{}).custno){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:return r=(0,k.prefixPartNumber)(o.partNumber),s="0",o.isHwg?s="1":o.isLYTM&&(s="5"),"1"!==(c=o.priceType)&&"6"!==c||(c="0"),d=t.data.couponCover.coupon.map((function(e){return"6-"+e.actId})).join(","),u=i.custno,l=n.cityLESId,p=r,f="",a&&a.priceResult&&a.priceResult.currentPrice&&(f=a.priceResult.currentPrice.marketVipPrice||a.priceResult.currentPrice.vipPrice),h=t.fourth.isVip&&f?f:t.data.price.promotionPrice,g=void 0,g=o.isLYTM||"0000000000"===o.shopParam?"":o.shopParam,m=x.default.quan+"/getBestCoupons.do?memberId="+u+"&channelId=32&cityId="+l+"&commdtyCode="+p+"&productListPrice="+h+"&storeId="+g+"&productQty=1&freightAmount=0&marketingActivityType="+c+"&businessSign="+s+"&activityList="+d+"&discountList="+o.discountListParam,(v=t.data.result.data.data.psell)&&v.bookInfoDetail&&(y="",w="",t.data.activity.stageInfo&&(y=t.data.activity.stageInfo.balanceStartTime||0,w=t.data.activity.stageInfo.balanceEndTime||0,y=(y/1e3).toFixed(0),w=(w/1e3).toFixed(0)),m+="&mktActStartTime="+y+"&mktActEndTime="+w),e.abrupt("return",(0,P.requestPromise)({url:m}));case 26:throw e.prev=26,e.t0=e.catch(0),e.t0.code="request-getBestCoupon",e.t0;case 30:case"end":return e.stop()}}),e,this,[[0,26]])}))),function(e,t){return K.apply(this,arguments)}),gotoAppoint:(X=E(L.default.mark((function e(t){var a,o,n;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.fourth,o=(0,k.prefixPartNumber)(a.partNumber),n=x.default.yushou+"/jsonp/appoint/gotoAppoint_"+t.data.activity.activityId+"_"+o+"_"+a.supplierCode+"_P01_3_.do",e.abrupt("return",(0,P.requestPromise)({url:n}));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.code="request-gotoAppoint",e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return X.apply(this,arguments)}),orderQualification:(Q=E(L.default.mark((function e(t){var a,o,n;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.fourth,o=(0,k.prefixPartNumber)(a.partNumber),n=x.default.yushou+"/jsonp/appoint/checkQualificationStatus-"+t.data.activity.activityId+"-"+o+"-"+a.supplierCode+"-P01-3-.do",e.abrupt("return",(0,P.requestPromise)({url:n}));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.code="request-orderQualification",e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return Q.apply(this,arguments)}),getUnion:(J=E(L.default.mark((function e(t,a,o){var n,i;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=x.default.sugs+"/miniprogram.htm?union="+a,o&&(n+="&sub_user="+o),e.next=5,de({url:n});case 5:if(!(i=e.sent).data||"success"!==i.data.status||!i.data.data){e.next=8;break}return e.abrupt("return",i.data.data);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.code="request-getUnion",e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e,t,a){return J.apply(this,arguments)}),getSuperInfo:(W=E(L.default.mark((function e(t){var a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=(0,T.default)()||{}).custno){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.next=6,(0,P.requestPromise)({url:ce.my.super,data:{custNum:a.custno}});case 6:if(!(o=e.sent)||"success"!==o.status){e.next=17;break}if("A9200010"!==o.paidFlag){e.next=12;break}return e.abrupt("return",{superFlag:1});case 12:if("A9200020"!==o.canApplyTrial){e.next=16;break}return e.abrupt("return",{superFlag:2});case 16:return e.abrupt("return",{superFlag:3});case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(0),e.t0.code="request-getSuperInfo",e.t0;case 23:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(e){return W.apply(this,arguments)}),getBatchDetailInfo:(z=E(L.default.mark((function e(t){var a,o,n;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a="",o=0;o<t.partNumberArr.length;o++)o>0&&(a+="-"),a+=t.partNumberArr[o];return n=x.default.product+"/pds-web/ajax/getBatchDetailJsonp_"+a+"_"+t.supplierCode+"_"+t.terminate+"_.html",e.next=6,de({url:n});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0.code="nsenDetail",e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return z.apply(this,arguments)}),getSubGuiGeParams:(Y=E(L.default.mark((function e(t){var a,o,n,i,r,s,c,d,u;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.data.data.data1.data,o=a.bundleRel.bundleDto.productList[0].subPartNumber,n=a.catalogId,i=x.default.product+"/pds-web/ajax/itemParaJsonp_"+o+"__"+n+"_itemParameter.html?callback=itemParameter",e.next=7,de({url:i,type:"JSONP"});case 7:return r=e.sent,s=(0,_.default)(r.data),c=s.eleParameterList,(d=c.map((function(e){for(var t in e)e.attrName=t,e.parameter=e[t],delete e[t];return e}))).length||(d=[]),u=d.map((function(e){return{title:e.attrName,list:e.parameter.map((function(e){return{key:e.snparameterdesc,value:e.snparameterVal}}))}})),e.abrupt("return",u);case 16:throw e.prev=16,e.t0=e.catch(0),e.t0.code="nsenDetail",e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return Y.apply(this,arguments)}),getUserQualificationInfo:(G=E(L.default.mark((function e(){var t;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.requestPromise)({url:x.default.yunzhuan+"/yzdh-web/voucher/scrape/ajax/external/getUserQualificationInfo.do"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)}),getSurplusQuota:(q=E(L.default.mark((function e(){var t;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,P.requestPromise)({url:x.default.yunzhuan+"/yzdh-web/allowance/querySurplusQuota.do?terminalType=3&sendCategory=2"});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)}),exchangeAllowance:(H=E(L.default.mark((function e(t){var a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={terminalType:"3",dfpToken:t.dfpToken,programChannel:1,detect:t.detect,uuid:t.uuid||"",vcsCode:t.vcsCode||"",activityId:t.activityId||"",sendCategory:t.sendCategory},e.next=3,(0,P.requestPromise)({method:"POST",url:x.default.yunzhuan+"/yzdh-web/allowance/exchange.do",data:a});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)}),generateSmsCode:(V=E(L.default.mark((function e(){var t,a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.requestPromise)({url:x.default.yunzhuan+"/yzdh-web/voucher/generateSmsCode.do"});case 2:t=e.sent,a=t.resultCode,o="",e.t0=a,e.next="1000"===e.t0?8:"1001"===e.t0?10:"1002"===e.t0?12:14;break;case 8:return o="发送验证码失败(1104)",e.abrupt("break",15);case 10:return o="超过每天发送验证码次数(01001)",e.abrupt("break",15);case 12:return o="未达到两次验证码发送时间间隔要求(01002)",e.abrupt("break",15);case 14:o="生成验证码成功(1001)";case 15:return t.msg=o,e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)}))),function(){return V.apply(this,arguments)}),packageBetail:(F=E(L.default.mark((function e(t,a){var o,n,i,r,s,c,d,u,l,p;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=a.data.data.data1.data.itemInfoVo.attachedTypeList||[],n=t.fourth,i=n.shopParam,r=n.position,s=r.cityLESId,c=r.districtLESId,d="",o.forEach((function(e,t){t===o.length-1?d+=e.attachedValue+":"+i:d+=e.attachedValue+":"+i+"-"})),u=x.default.pas+"/nssnitempck_"+s+"_"+c+"99_5_888_"+d+"_0.html",e.next=12,de({url:u,type:"JSONP"});case 12:if(l=e.sent,"0"!==(p=(0,_.default)(l.data)).errCode){e.next=16;break}return e.abrupt("return",p.data.itemList||[]);case 16:e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(0),e.t0.code="E001-nssnitempck",e.t0;case 22:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(e,t){return F.apply(this,arguments)}),getHwgBrandInfo:(B=E(L.default.mark((function e(t){var a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de({url:x.default.product+"/pds-web/ajax/getHwgBrandInfo__getHwgBrandInfoCallback.html"});case 3:return a=e.sent,o=(0,_.default)(a.data),e.abrupt("return",o);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.code="E001-getHwgBrandInfo",e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return B.apply(this,arguments)}),generateQrcode:(j=E(L.default.mark((function e(t){var a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de({method:"POST",url:x.default.mpbss+"/mpbss-web/wx/generateQrcode.do",header:{"content-type":"application/x-www-form-urlencoded"},data:{appid:"mainApp",page:"pages/fourth/fourth",scene:t,width:"120",suffix:"png"}});case 3:if(a=e.sent,"string"==typeof(o=JSON.parse((0,P.protocol)(a.data)))&&(o=JSON.parse(o)),!o||"0"!==o.code){e.next=8;break}return e.abrupt("return",o.result);case 8:throw console.error("fourth:request:generateQrcode",o.message),new Error("fourth:request:generateQrcode");case 12:throw e.prev=12,e.t0=e.catch(0),e.t0.code="E001-generateQrcode",e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e){return j.apply(this,arguments)}),getSharePic:(U=E(L.default.mark((function e(t,a){var o,n,i,r,s,c,d,u,l,p,f,h,g,m,v;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,o=function(e){var t="";if(e&&e.replace(/^\s*|\s*$/,""))for(var a=0,o=e.length;a<o;a++)t+=e.charCodeAt(a).toString(16);return t},n="",t.data.service.list)i<=1&&(n+=(void 0!==t.data.service.list[i].title?t.data.service.list[i].title:"")+",");if(r=encodeURIComponent(encodeURIComponent(n.substring(0,n.length-1).replace(/\_/g,"%bottom%line").replace(/\//g,"%slash%line"))),s="",t.data.promote.list.length&&(s=t.data.promote.list[0].type),c=encodeURIComponent(encodeURIComponent(s.replace(/\_/g,"%bottom%line").replace(/\//g,"%slash%line"))),d=encodeURIComponent(encodeURIComponent(t.data.price.name.replace(/\_/g,"%bottom%line").replace(/\//g,"%slash%line"))),u=t.fourth.passPartNumber||"",l=t.fourth.shop||"",u=u&&u.length>11?u.substr(-11):("00000000000"+u).substr(-11),l=l&&l.length>8?l.substr(-8):l,p=u+l,"prod"!==ue){e.next=20;break}return e.next=17,this.generateQrcode(p);case 17:e.t0=e.sent,e.next=21;break;case 20:e.t0="https://imgservice1.suning.cn/uimg1/mpbss/qrcode/2k_0txkef-2Mx2iP9F0nFQ.png_120w_120h_2e";case 21:return f=e.t0,h=void 0,t.data.bigPage.imgUrls.length>1&&(h=o(t.data.bigPage.imgUrls[1].url)),g={mainPictureUrl:o(t.data.bigPage.imgUrls[0].url),itemDisplayName:d,netPrice:encodeURIComponent(t.data.price.promotionPrice.replace(/\_/g,"%bottom%line").replace(/\//g,"%slash%line")),transQrCodeUrl:o(f),refPrice:encodeURIComponent(t.data.price.refPrice.replace(/\_/g,"%bottom%line").replace(/\//g,"%slash%line")),priceType:t.data.fourth.priceType,isSelf:t.data.fourth.panSelf?"1":"0"},m=void 0,1===a?m=x.default.mfspds+"/mfs-web/wx/shareFriend_"+g.mainPictureUrl+"_"+h+"_"+g.netPrice+"_"+g.refPrice+"_"+g.priceType+"_"+g.isSelf+"_"+c+"_"+r+"_.htm":2===a&&(m=x.default.mfspds+"/mfs-web/wx/sharePicb_"+g.mainPictureUrl+"_"+g.itemDisplayName+"_"+g.netPrice+"_"+g.refPrice+"_"+g.transQrCodeUrl+"_"+g.priceType+"_"+g.isSelf+"_"+c+"_"+r+"_.htm"),e.next=29,de({url:m,type:"JSONP"});case 29:if(!(v=e.sent)||!v.data||"1"!==v.data.code){e.next=32;break}return e.abrupt("return",v.data.url.replace("http:","https:").replace(/image\d?.suning.cn/,"image.suning.cn"));case 32:throw new Error("fourth:request:getSharePic");case 35:throw e.prev=35,e.t1=e.catch(0),e.t1.code="E001-getSharePic",e.t1;case 39:case"end":return e.stop()}}),e,this,[[0,35]])}))),function(e,t){return U.apply(this,arguments)}),FourthToPingo:(M=E(L.default.mark((function e(){var t,a,o;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de({url:x.default.cms+"/api/json/fourthToPingou.json?v=2018102001"});case 3:return t=e.sent,a=t.data,o=!1,a.minip_switch&&a.minip_switch.tag&&a.minip_switch.tag.length&&(o="1"===a.minip_switch.tag[0].elementDesc),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.code="E001-FourthToPingo",e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return M.apply(this,arguments)}),GetAddressInfo4Level:(R=E(L.default.mark((function e(){return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.requestPromise)({url:x.default.mySuning+"/urbanLink/queryAddressInfo4Level.do",method:"POST"}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)}),getDefaultPos:function(){return{provinceName:"北京",provinceMDMId:"10",provinceCommerceId:"10",cityName:"北京",cityMDMId:"1000000",cityCommerceId:"9017",cityLESId:"010",districtName:"东城区",districtMDMId:"10000001",districtCommerceId:"10106",districtLESId:"01"}},GetSmallProgram:(A=E(L.default.mark((function e(t){var a,o,n,i,r,s,c,d;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getDefaultPos(),n={addrNum:(o=t||a).addrNum||o.aId,provinceName:encodeURIComponent(o.provinceName||o.stateName),provinceLESId:o.provinceCode||o.state,provinceMDMId:o.provinceMdmId||"",provinceCommerceId:o.provinceCommerceId,cityName:encodeURIComponent(o.cityName||""),cityLESId:o.cityCode||o.city,cityMDMId:o.cityMdmId||"",districtName:encodeURIComponent(o.districtName||o.townName),districtLESId:o.districtCode||o.town,districtMDMId:o.districtMdmId||"",streetName:encodeURIComponent(o.streetName||o.townName),streetLESId:o.street||o.townCode,detailAddress:o.detailAddress||""},i=n.provinceName,r=n.cityName,s=n.districtName,c=n.streetName,d=x.default.ipService+"/ip-web/smallProgram/getCityInfoByName_"+i+"_"+r+"_"+s+"_"+c+"_.html",e.abrupt("return",(0,P.requestPromise)({url:d}).then((function(e){if(!e)return a;var t=e.data;return"0"!==e.code?Object.assign(n,{provinceName:t.provinceName,provinceLESId:t.provinceCode,provinceMDMId:t.provinceMdmCode,cityLESId:t.cityCode,cityName:t.cityName,cityMDMId:t.cityMdmCode,districtName:t.districtName,districtLESId:t.districtCode,districtMDMId:t.districtMdmCode,streetName:t.streetName,streetLESId:t.streetCode}):(a.isEmpty=!0,a)})).catch((function(e){return console.log(e),a})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)}),isNewPeople:(O=E(L.default.mark((function e(){var t,a,o,n;return L.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.requestPromise)({data:{channelType:9,deptIds:"ALL"},url:x.default.nmqs+"/json/getQualificationData.do"});case 2:if(t=e.sent,a=t.code,o=t.onlineNewmember,0!=a||0!=o){e.next=10;break}return e.next=8,(0,P.requestPromise)({url:x.default.lib+"/api/json/bdxrkw.json"});case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})}})),window.define("667",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e(62).requestPromise,e(8);var T={SHOP:"921C店",SWL:"925SWL",HWG:"927HWG",HWG1:"927HWG1",TM:"928TM",CSSWL:"936超市联营",LYTM:"944联营特卖",LYHWG:"957联营海外购",JDXHWG:"经代销海外购",convert:function(e,t,a){return t=t||"","1"===e?T.SHOP:"2"===e?T.SWL:"3"===e?"0"===t.indexOf("H")||"0"===t.indexOf("B")||"0"===t.indexOf("L")?T.HWG:T.HWG1:"4"===e?T.CSSWL:"5"===e?T.LYTM:"6"===e?T.LYHWG:a.indexOf("H7")>-1?T.JDXHWG:e}};a.Vendor=T,a.HwgType={Inter:"0",Donded:"1",Abroad:"2",BcAbroad:"3"},a.fourth={},a.trimNumber=function(e){return e.replace(/^0*/,"")},a.ActType={XIAN_SHI:100033,BAO_KUAN:100034,DA_JU_HUI:100035,ZHANG_SHANG_QIANG:100036,QIANG_GOU:100037,TE_MAI:100038,YU_YUE:100039,YU_DIN:100040}})),window.define("668",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(667),I=x(e(54)),P=x(e(8)),D=x(e(45));function x(e){return e&&e.__esModule?e:{default:e}}var _=e(25),k=_.requestPromise,L=_.getDfpToken;a.default={addShoppingCloudCart:function(e,t){var a=e.fourth,o=t.number,n=t.cartHeadInfo||{},i=t.activityId||"",r="01";""!==i&&(r="02"),i=e.data.activity.activityId,"8"===a.activityType?r="15":"7"===a.activityType?r="07":"12"===a.activityType?r="20":"13"===a.activityType?r="21":"1"===a.bundelType?r="05":a.isPackage&&(r="12");var s="";"4-10"===a.priceType&&(s="10");var c=0,d=a.priceVendorCode;a.vendorType===T.Vendor.LYHWG&&(d="0000000000");var u=a.shop;(a.vendorType===T.Vendor.LYHWG||a.vendorType===T.Vendor.JDXHWG||a.isPackage)&&(u="");var l=[];if(a.isPackage)if("2"===a.bundelType){for(var p={},f=2,h=0;h<e.data.package.list.length;h++){p={itemNo:++f,cmmdtyCode:e.data.package.list[h].subPartNumber,shopCode:d,overSeasFlag:"",cmmdtyQty:e.data.package.list[h].count*o,accessoryRelationID:""}}var g={};g.subCmmdtyBasicInfo=p,g.subExtendCmmdtyItems=[],l.push(g)}else for(var m=2,v=0;v<e.data.package.list.length;v++){var y={subCmmdtyBasicInfo:{itemNo:++m,cmmdtyCode:e.data.package.list[v].subPartNumber,shopCode:d,overSeasFlag:"",cmmdtyQty:e.data.package.list[v].count*o,accessoryRelationID:""}};l.push(y)}var w={cmmdtyInfos:[{cmmdtyHeadBasicInfo:{activityId:i,activityType:r,itemNo:""+c++,subActivityType:s},mainCmmdtyInfo:{mainCmmdtyBasicInfo:{itemNo:""+c++,cmmdtyQty:o,shopName:a.cShopName,shopCode:d,shopAddCode:u,tickStatus:"1",overSeasFlag:a.vendorType===T.Vendor.HWG?a.vendorType:"",cmmdtyCode:a.partNumber},mainExtendInfos:[]},subCmmdtyInfos:l}],limitedCmmdtyRules:[{limitType:"01",commodityAttributeRules:[{commodityAttribute:"04"}]}],cartHeadInfo:{provinceCode:a.position.provinceMDMId,cityCode:a.position.cityLESId,districtCode:a.position.districtLESId,operationTerminal:"01",operationChannel:"50",townCode:"",userFlag:"0",operationEquipment:"06",operationUser:"",token:D.default.pdToken,imageCode:n.imageCode||"",uuid:n.uuid||"",sceneId:n.sceneId,detect:I.default.getTrack(),dfptoken:""},supportYB:"1",publishDate:"20180625",operationTerminal:"01"};return new Promise((function(e,t){L().then((function(a){w.cartHeadInfo.dfptoken=a,k({method:"POST",url:P.default.shopping+"/app/addcart/gateway/addWapCmmdty.do",data:{data:JSON.stringify(w)}}).then(e).catch(t)})).catch((function(a){return console.log(a),k({method:"POST",url:P.default.shopping+"/app/addcart/gateway/addWapCmmdty.do",data:{data:JSON.stringify(w)}}).then(e).catch(t)}))}))},discPackageAddCart:function(e,t){var a=e.fourth,o=t.cartHeadInfo||{},n=t.index,i=e.data.discPackage.list[n];if(i.partNumber===t.partNumber){var r=0,s="",c="";"12"===(s="1"===i.bundelType?"05":"12")&&("6-1"===i.priceType?c="1":"6-2"===i.priceType?c="2":"6-3"===i.priceType?c="3":"6-5"===i.priceType?c="5":"6-12"===i.priceType&&(c="12"));var d=[];if("2"===i.bundelType){for(var u={},l=2,p=0;p<i.productList.length;p++){"2"===i.productList[p].seq?u.subExtendInfos=[{itemNo:l,cmmdtyCode:i.productList[p].subPartNumber,supplierCode:i.vendorCode,isCollocation:"1",cmmdtyQty:i.productList[p].count}]:u.subCmmdtyBasicInfo={itemNo:l,tickStatus:"1",cmmdtyCode:i.productList[p].subPartNumber,cmmdtyName:"",shopCode:i.vendorCode,shopName:"",overSeasFlag:"",cmmdtyQty:i.productList[p].count,accessoryRelationID:""},l++}d.push(u)}else for(var f=2,h=0;h<i.productList.length;h++)d.push({subCmmdtyBasicInfo:{itemNo:f,tickStatus:"1",cmmdtyCode:i.productList[h].subPartNumber,cmmdtyName:"",shopCode:i.vendorCode,shopName:"",overSeasFlag:"",cmmdtyQty:i.productList[h].count,accessoryRelationID:""}}),f++;var g={cmmdtyInfos:[{cmmdtyHeadBasicInfo:{activityId:"",activityType:s,itemNo:""+r++,subActivityType:c},mainCmmdtyInfo:{mainCmmdtyBasicInfo:{itemNo:""+r++,tickStatus:"1",cmmdtyQty:"1",cmmdtyCode:t.partNumber,shopName:"",shopCode:i.vendorCode,overSeasFlag:""}},subCmmdtyInfos:d}],cartHeadInfo:{operationTerminal:"01",operationChannel:"50",townCode:"",userFlag:"0",operationEquipment:"06",operationUser:"",operationStoreCode:"",sourcePageType:"01",provinceCode:a.position.provinceMDMId,cityCode:a.position.cityLESId,districtCode:a.position.districtLESId,token:D.default.pdToken,imageCode:o.imageCode||"",uuid:o.uuid||"",sceneId:o.sceneId,detect:I.default.getTrack(),dfptoken:""},supportYB:"1",publishDate:"20180625",operationTerminal:"01"};return new Promise((function(e,t){L().then((function(a){g.cartHeadInfo.dfptoken=a,k({method:"POST",url:P.default.shopping+"/app/addcart/gateway/addWapCmmdty.do",data:{data:JSON.stringify(g)}}).then(e).catch(t)})).catch((function(a){return console.log(a),k({method:"POST",url:P.default.shopping+"/app/addcart/gateway/addWapCmmdty.do",data:{data:JSON.stringify(g)}}).then(e).catch(t)}))}))}},quickBuy:function(e,t,a){var o=e.fourth,n=t.number,i=t.cartHeadInfo||{},r=t.cartShopMemo||{},s=t.activityId||"",c="01";""!==s&&(c="02"),s=e.data.activity.activityId,"8"===o.activityType?c="15":"7"===o.activityType?c="07":"12"===o.activityType?c="20":"13"===o.activityType?c="21":"1"===o.bundelType?c="05":o.isPackage&&(c="12");var d="";"4-10"===o.priceType&&(d="10");var u=0,l=o.priceVendorCode;o.vendorType===T.Vendor.LYHWG&&(l="0000000000");var p=o.shop;(o.vendorType===T.Vendor.LYHWG||o.vendorType===T.Vendor.JDXHWG||o.isPackage)&&(p="");var f=[];if(o.isPackage)if("2"===o.bundelType){for(var h={},g=1,m=0;m<e.data.package.list.length;m++){h={itemNo:++g,cmmdtyCode:e.data.package.list[m].subPartNumber,shopCode:l,overSeasFlag:"",cmmdtyQty:e.data.package.list[m].count*n,accessoryRelationID:""}}var v={};v.basicInfo=h,v.subExtendCmmdtyItems=[],f.push(v)}else for(var y=2,w=0;w<e.data.package.list.length;w++){var b={basicInfo:{itemNo:++y,cmmdtyCode:e.data.package.list[w].subPartNumber,shopCode:l,overSeasFlag:"",cmmdtyQty:e.data.package.list[w].count*n,accessoryRelationID:""}};f.push(b)}console.log(o.position);var C={immediateBuyItems:[{itemHeadInfo:{activityId:s,activityType:c,itemNo:""+u++,subActivityType:d},mainCmmdtyInfo:{basicInfo:{itemNo:""+u++,cmmdtyQty:n,shopName:o.cShopName,shopCode:l,shopAddCode:p,overSeasFlag:o.vendorType===T.Vendor.HWG?o.vendorType:"",cmmdtyCode:o.partNumber,gameId:e.fourth.brandCode},extendCmmdtyItems:[],subCmmdtyItems:f}}],cartHeadInfo:{provinceCode:o.position.provinceMDMId,cityCode:o.position.cityLESId,districtCode:o.position.districtLESId,directFlag:"1",operationTerminal:"01",wapTerminal:"01",operationChannel:"50",userFlag:"0",operationEquipment:"06",operationUser:"",limitType:"02",commodityAttribute:"1",token:D.default.pdToken,imageCode:i.imageCode||"",uuid:i.uuid||"",sceneId:i.sceneId,detect:I.default.getTrack(),dfptoken:""},cartShopMemo:{shopCode:"",orderMemo:r.orderMemo||""},supportYB:"1",publishDate:"20170710",operationTerminal:"01"};if(o.TxType&&o.checkedTx){var S=o.checkedTx.networkBp;C.immediateBuyItems[0].mainCmmdtyInfo.basicInfo.networkCode=S}return o.position.addrNum&&(C.historyReceiverInfo={addrNum:o.position.addrNum}),o.snCard&&(C.publishDate="20190422"),new Promise(a?function(e,t){e(C)}:function(e,t){L().then((function(a){C.cartHeadInfo.dfptoken=a,k({method:"POST",url:P.default.shopping+"/app/addcart/private/quickBuyForWap.do",data:{data:JSON.stringify(C)}}).then(e).catch(t)})).catch((function(a){return console.log(a),k({method:"POST",url:P.default.shopping+"/app/addcart/private/quickBuyForWap.do",data:{data:JSON.stringify(C)}}).then(e).catch(t)}))})},changeTempCartCity:function(e){var t=e.fourth,a={provinceCode:t.position.provinceMDMId,cityCode:t.position.cityLESId,districtCode:t.position.cityLESId+t.position.districtLESId,operationTerminal:"01",operationChannel:"50",operationEquipment:"06",operationStoreCode:"",operationUser:"",townCode:""};return k({method:"POST",url:P.default.shopping+"/app/cart1/gateway/changeTempCartCity.do",data:{data:JSON.stringify(a)}}).catch((function(e){console.error(e)}))}}})),window.define("669",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T={curMemberIndex:0};a.default={parsePromote:function(e){var t=e.data.data.salesPromotion,a=[],o=[],n=[],i=[],r=[],s=[],c=[],d=[],u=0|e.data.data.dealMsg[0].accountAmt;if(u){var l=e.data.data.dealMsg[0].accountMsg||"普通会员送"+u+"云钻";i.push({type:"返云钻",text:l})}if(t.giftInfoList){var p=t.giftInfoList.some((function(e,t){return T.curMemberIndex=t,e.memberAttributeList&&"142000000155"===e.memberAttributeList[0]}))?t.giftInfoList[T.curMemberIndex].studentstext:"赠品";a.push({type:p,text:"赠送"+t.giftInfoList.length+"件赠品(赠完即止)",code:"gift",urlText:"查看赠品"})}return t.orderGiftsObj&&(c.push({type:"满赠",text:t.orderGiftsObj.topTitle}),d=t.orderGiftsObj),t.activityList&&t.activityList.forEach((function(e){switch(e.activityTypeId){case"1":o[0]?o[0].text+=","+e.activityDescription:o.push({type:"满减",text:e.activityDescription,code:"1",url:"/packageA/pages/quanSearch/search/search?id="+e.activityId});break;case"2":n[0]?n[0].text+=","+e.activityDescription:n.push({type:"返券",text:e.activityDescription,code:"2",url:"/packageA/pages/quanSearch/search/search?id="+e.activityId});break;case"7":r.push({valueText:"¥"+e.salesPrice,label:e.couponPromotionLabel,id:e.activityId})}})),e.data.data.conServation&&"01"===e.data.data.conServation.queryStat&&s.push({type:"节能补贴",text:e.data.data.conServation.jnbtDetail,code:"jn"}),[o.concat(a).concat(c).concat(n).concat(s).concat(i),r,d]}}})),window.define("670",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={disCount:function(e,t){if(e&&e.data.data.price&&e.data.data.price.saleInfo.length&&e.data.data.price.saleInfo[0].priceType){var a=e.data.data.price.saleInfo[0];"8"===a.priceType.split("-")[0]||"13"===a.priceType.split("-")[0]?(t.data.couponCover.orderPrice=e.data.data.bookCanSave,t.data.couponCover.priceType="预定"):(t.data.couponCover.orderPrice=0,t.data.couponCover.priceType="")}}}})),window.define("671",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(667),I=e(77),P=e(25).extend;function D(e,t){var a=t.data.data.fwlabels;if(a){var o=t.data.nosupportlabel&&t.data.nosupportlabel.replace(/\s*/g,""),n=!0,i=!1,r=void 0;try{for(var s,c=a[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value;if(o.indexOf(d.labelCode)>-1)return{icon:"7",isDynamic:!0,logo:d.logo,title:d.labelName,content:d.labelDesc}}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}}}function x(e,t){var a=t.priceResult.data.data,o=t.data.data;if(e.baoyou="",o&&o.salesPromotion&&o.salesPromotion.activityList&&o.salesPromotion.activityList.forEach((function(t){if("4"==t.activityTypeId){e.baoyou=t.activityDescription;var a=t.activityDescription||"免运费";if(!e.isCShop)return{title:a};e.yunfei=a}})),a.prescription?(e.shipOffSetText=a.prescription.shipOffSetText,e.bigPromotionDesc=a.prescription.bigPromotionDesc):(e.shipOffSetText="",e.bigPromotionDesc=""),a.freightObj){if(e.isCShop&&e.vendorType!=T.Vendor.SWL&&e.vendorType!=T.Vendor.CSSWL&&!e.isLYTM){var n=Number(a.freightObj.fare);e.yunfei=n<0?"":0==n?"免运费":"运费"+a.freightObj.fare+"元",e.weight=""}else if(e.weight=a.freightObj.freightWeight,e.weightDetail=a.freightObj.freightDetail,(e.isHwg||e.isHwgLocal||e.isLYTM)&&(e.yunfei=a.freightObj.freightMsg),a.freightObj.freightMsg&&!e.isLYTM)return{icon:"yunfei",title:a.freightObj.freightMsg,content:a.myfdesc}}else e.yunfei="",e.weight="";e.yunfeiDisplay=!(1!=e.itemType||e.baoyou),e.weight=""}a.default={parseFwlabelList:function(e,t){var a=t.data.fwlablelist||{},o=t.data.nosupportlabel,n={},i="";for(var r in a){var s=a[r];if("place1"===r||"place2"===r){var c=[],d=!0,u=!1,l=void 0;try{for(var p,f=s[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;c.push(h.labelName)}}catch(e){u=!0,l=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw l}}n[r]=c.join("•")}else if("place5"===r){var g=!0,m=!1,v=void 0;try{for(var y,w=s[Symbol.iterator]();!(g=(y=w.next()).done);g=!0){var b=y.value;"SL00000052"===b.labelCode?e.fourth.zxLogo=b.logo:"C00000023"===b.labelCode&&(e.fourth.hdLogo=b.logo)}}catch(e){m=!0,v=e}finally{try{!g&&w.return&&w.return()}finally{if(m)throw v}}}if(a[r]){var C=!0,S=!1,T=void 0;try{for(var P,D=a[r][Symbol.iterator]();!(C=(P=D.next()).done);C=!0){i+="_"+P.value.labelCode}}catch(e){S=!0,T=e}finally{try{!C&&D.return&&D.return()}finally{if(S)throw T}}}if("place1"===r){var x=!0,_=!1,k=void 0;try{for(var L,N=s[Symbol.iterator]();!(x=(L=N.next()).done);x=!0){var E=L.value;E.logo&&-1===E.logo.indexOf("http")&&(E.logo="https:"+E.logo)}}catch(e){_=!0,k=e}finally{try{!x&&N.return&&N.return()}finally{if(_)throw k}}}}var O=e.fourth.partNumber+"_"+e.fourth.shop+i;for(var A in(0,I.saSendLog)("custom",{evtp:"solplabel",evdl:{labelinfo:O}}),a.labelObj=n,a.place3)o.indexOf(a.place3[A].labelCode)>-1?a.place3[A].nosupport=!0:a.place3[A].nosupport=!1;e.setData({fwlabels:a})},parseService:function(e,t){var a=e.fourth,o=t.data.data.dealMsg[0]||{},n={};n.zsd=function(e,t){return!e.isHwg&&t.zsdTitle&&t.zsdDesc?{icon:"fly",title:t.zsdTitle,content:t.zsdDesc}:!e.isHwg&&t.brdTitle&&t.brdDesc?{icon:"fly",title:t.brdTitle,content:t.brdDesc}:!e.isHwg&&t.crdTitle&&t.crdDesc?{icon:"fly",title:t.crdTitle,content:t.crdDesc}:void 0}(a,t.priceResult.data.data),P(n,function(e,t){var a={},o=!1;if(e.isHwg)e.vendorType==T.Vendor.LYHWG||e.vendorType==T.Vendor.JDXHWG?(o=!0,a.send={title:"苏宁发货&售后",content:"由“苏宁”销售和发货，并承担售后服务"},a.timeOut={icon:"time-out",title:"超时赔付",content:"苏宁国际自营商品保税仓发货7个工作日送达，海外直邮15个工作日送达，超时赔付"},a.priceProtected={icon:"price-protected",title:"价格保护",content:"您购买的商品在收到之前如商品发生降价，可联系客服申请价格补差"}):e.sendCityName?a.send={title:"店铺发货&售后",content:'由 "'+e.cShopName+'"从"'+e.sendCityName+'" 销售和发货，并提供售后服务'}:a.send={title:"店铺发货&售后",content:'由 "'+e.cShopName+'" 销售和发货，并提供售后服务'},a.lightningSend={icon:"lightning-send",title:"闪电发货",content:"除预订及其他另约的发货情况外，我们将在您付款后次日起的3个工作日内发货，如未按时发货可申请赔付。"};else if(e.isCShop)e.vendorType==T.Vendor.SWL?(a.send={title:"苏宁发货&售后",content:'由"苏宁"销售和发货，并享受售后服务'},o=!0):e.vendorType==T.Vendor.CSSWL?("1"==e.factorySendFlag?a.send={title:"供应商发货&售后",content:'由"苏宁"销售，供应商发货，并提供售后安装服务'}:a.send={title:"苏宁发货&售后",content:'由"苏宁"销售和发货，并提供售后安装服务'},o=!0):(a.send={title:"店铺发货&售后",content:'由 "'+e.cShopName+'" 销售和发货，并提供售后服务'},o=!1);else{if(e.isLYTM&&e.availCheckCode)"05"==e.availCheckCode?a.send={title:"苏宁销售&售后",content:'由"苏宁"销售和发货，并享受售后服务'}:a.send={title:"供应商发货&售后",content:'由"苏宁"销售，供应商发货，并提供售后服务'};else if("1"==e.factorySendFlag)a.send={title:"供应商发货&售后",content:'由"苏宁"销售，供应商发货，并提供售后服务'},"0"==e.installFlag?a.send={title:"供应商发货",content:'由"苏宁"销售，供应商发货'}:"1"==e.installFlag?a.send={title:"供应商发货&苏宁售后",content:'由"苏宁"销售，供应商发货，苏宁提供售后安装服务'}:"2"==e.installFlag?a.send={title:"供应商发货&售后",content:'由"苏宁"销售，供应商发货，并提供售后安装服务'}:"3"==e.installFlag&&(a.send={title:"供应商送装一体",content:'由"苏宁"销售，供应商发货，并提供送装一体服务'});else{if("00028"===e.brandId)return;a.send={title:"苏宁发货&售后",content:'由"苏宁"销售和发货，并提供售后服务'},"0"==e.installFlag?a.send={title:"苏宁发货",content:"由苏宁销售和发货，并提供售后服务"}:"1"==e.installFlag?a.send={title:"苏宁发货&售后",content:'由"苏宁"销售和发货，并提供售后安装服务'}:"2"==e.installFlag?a.send={title:"苏宁发货&供应商售后",content:'由"苏宁"销售和发货，并由供应商提供售后安装服务'}:"3"==e.installFlag&&(a.send={title:"苏宁送装一体",content:'由"苏宁"销售和发货，并提供送装一体服务'})}o=!0}return a.send&&(a.send.icon=o?"self":"shop"),a}(a));var i=function(e,t){var a=[];if(t.mpzpt&&a.push({icon:"zheng",title:t.mpzpt,content:t.mpzpd}),t.mpwlyt){var o=t.mpwlyt.indexOf("不支持")>-1;a.push({icon:o?"notReturn":"7",title:t.mpwlyt,content:t.mpwlyd,unsupport:o})}return t.mptht&&a.push({icon:"fan",title:t.mptht,content:t.mpthd}),t.mpjsdt&&a.push({icon:"ji",title:t.mpjsdt,content:t.mpjsdd}),a}(0,o);n.yfx=function(e,t){if(!e.isLYTM&&!e.isHwg&&t.yfxlabelName&&t.yfxlabelDesc)return{icon:"yfx",title:t.yfxlabelName,content:t.yfxlabelDesc}}(a,o),n.hdfk=function(e){if(!e.isLYTM&&"1"==e.hasStorage&&"1"==e.hdfkFlag&&"1"!=e.activityType&&"3"!=e.activityType)return{icon:"hdfk",title:"货到付款",content:"支持送货后再付款，支持刷卡、现金等支付方式"}}(a),n.ziti=function(e){if("1"!=e.isLimitTake&&!e.snCard&&"00028"!==e.brandId)return 1==e.hdFlag||e.isLYTM||"0"!=e.factorySendFlag||"0000000000"!=e.shop&&e.vendorType!=T.Vendor.SWL&&e.vendorType!=T.Vendor.CSSWL||"2"!=e.sizeAttribute||e.ybkFlag?void 0:{icon:"ziti",title:"自提",content:"支持门店自提点、自助提货柜等自助服务"}}(a),n.jsd=function(e){if(1!=e.hdFlag&&!e.isLYTM&&e.jsdTitle&&e.jsdDesc)return{icon:"fly",title:e.jsdTitle,content:e.jsdDesc}}(a),n.ret=function(e,t){if(!e.isLYTM){if(t.returnCate)return e.isHwg,{icon:"7",title:t.returnCate,content:t.returnDesc};if(t.unSupReturn)return{unsupport:!0,icon:"notReturn",title:t.unSupReturn,content:t.unSupReturnDesc}}}(a,t.data.data.dealMsg[0]),n.goodsKeep=function(e){if(!e.snCard)return 1==e.hdFlag||e.isCShop||e.isLYTM?void 0:{icon:"cun",title:"商品保管说明",content:"当您购买由苏宁配送的苏宁自营商品（定制、预售、保质期及虚拟产品除外），由于特殊原因需要延迟收货时，苏宁将向您提供一定期限的免费保管服务。"}}(a),n.yunfei=x(a,t),n.retSolp=D(0,e.data.result);var r=[];return a.published?(r.push(n.send),r.push(n.hdfk),r.push(n.jsd),r.push(n.ret),r.push(n.ziti),r.push(n.yunfei),r.push(n.goodsKeep),r.push(n.retSolp),(r=r.concat(i)).push(n.oversea)):r.push(n.goodsKeep),a.yunfeiDisplay=!(!a.yunfei&&!a.baoyou),r=r.filter((function(e){return e}))},parseServiceOversea:function(e,t){var a=e.fourth,o=t.data.data.dealMsg[0]||{},n=x(a,t),i=void 0,r={};if(a.isHwgZy)o.zyhwg&&(r.bannerText=o.zyhwg),r.bannerList=[{icon:"oversea-real",title:o.zpbzT,content:o.zpbzV},{icon:"oversea-self",title:o.slzyT,content:o.slzyV},{icon:"oversea-sale",title:o.shbzT,content:o.shbzV}],r.serviceList=[{icon:"oversea-self",title:"苏宁国际发货&售后",content:"由“苏宁国际”销售和发货，并承担售后服务"},{icon:"oversea-flash",title:o.sdfhT,content:o.sdfhV},i,{icon:"oversea-compensation",title:o.cspfT,content:o.cspfV},{icon:"oversea-protect",title:o.jgbhT,content:o.jgbhV}].filter((function(e){return e}));else{o.cdhwg&&(r.bannerText=o.cdhwg),r.bannerList=[{icon:"oversea-real",title:o.zpbzT,content:o.zpbzV},{icon:"oversea-direct",title:o.hwzyT,content:o.hwzyV},{icon:"oversea-sale",title:o.shbzT,content:o.shbzV}];var s=void 0;s=t.priceResult.data.data.prescription.sendCityName?'由"'+t.data.data.itemShopInfo.shopInfo.shopName+'"从"'+t.priceResult.data.data.prescription.sendCityName+'"销售和发货，并提供售后服务':'由"'+t.data.data.itemShopInfo.shopInfo.shopName+'"直接销售和发货，并提供售后服务',r.serviceList=[{icon:"oversea-shop",title:"店铺发货&售后",content:s},{icon:"oversea-flash",title:o.sdfhT,content:o.sdfhV},i].filter((function(e){return e}))}var c=D(0,e.data.result);return c&&r.serviceList.push(c),r.yunfei=n,r.returnPromise=null,r.isBy="1"===t.priceResult.data.data.hwgIsBy,r}}})),window.define("672",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T,I=e(666),P=(T=I)&&T.__esModule?T:{default:T},D=e(667);function x(e){var t=e.rows,a=e.picked,o=[];t.forEach((function(e,t){e.items&&e.items.forEach((function(e){e.id==a[t]&&o.push(e.name)}))})),e.pickedName=o.join(",")}function _(e){var t=e.rows,a=e.saleList,o=(e.subMap,e.picked),n=t.map((function(e){return new Set}));a.forEach((function(e){t.forEach((function(t,a){var i=o.slice(0);i[a]=null;for(var r=!0,s=0;s<e.length;s++)e[s]!=i[s]&&null!=i[s]&&(r=!1);r&&n[a].add(e[a])}))})),t.forEach((function(e,t){e.items&&e.items.forEach((function(e,a){e.active=n[t].has(e.id)}))}))}function k(e,t){for(var a=e.fourth,o=[];t.length;){var n=t.splice(0,20);o.push({part:n,shop:a.shop})}var i=o.map((function(t){return P.default.getClusterPrice(e,t.part,t.shop).catch((function(e){return{data:t.part.map((function(e){return{cmmdtyCode:e,invStatus:"1"}}))}}))}));return Promise.all(i).then((function(e){var t={};return e.forEach((function(e){e.data.forEach((function(e){(["1","4","6","7"].filter((function(t){return t==e.invStatus})).length||"2"==e.invStatus&&e.priceType&&0==e.priceType.indexOf("7"))&&(e.sale=!0),t[(0,D.trimNumber)(e.cmmdtyCode)]=e}))})),t}))}a.default={parseCharacter:function(e,t){e.fourth;var a=t.data1.data.CharacterInfoVO;if(!a)return Promise.resolve({rows:[],saleList:[],subMap:{"":t.data1.data.partNumber},picked:[],pickedName:""});var o=t.price.saleInfo,n=a.uniqueSubs,i={};if(o.forEach((function(e){var t=!1;(["1","4","6","7"].filter((function(t){return t==e.invStatus})).length||"2"==e.invStatus&&e.priceType&&0==e.priceType.indexOf("7"))&&(t=!0),i[(0,D.trimNumber)(e.partNumber)]=t})),n.colorMap){var r={name:n.color&&n.color[0]&&n.color[0].characterDisplayName,items:n.color.length&&n.color.map((function(e){return{id:e.characterValueId,partNumber:(0,D.trimNumber)(e.partNumber),name:e.characterValueDisplayName}}))},s={name:n.color&&n.color[0]&&n.version[0].characterDisplayName,items:n.color.length&&n.version.map((function(e){return{id:e.characterValueId,partNumber:(0,D.trimNumber)(e.partNumber),name:e.characterValueDisplayName}}))},c={},d=[];return n.colorMap.length&&Object.keys(n.colorMap[0]).forEach((function(e){var t=n.colorMap[0][e];Object.keys(t).forEach((function(a){var o=(0,D.trimNumber)(t[a]);c[e+"-"+a]=o,i[o]&&d.push([e,a])}))})),Promise.resolve({rows:[r,s],saleList:d,subMap:c,picked:[null],pickedName:"",characterFlag:!0})}var u=n.color.length?n.color:n.version,l={name:u[0].characterDisplayName,items:u.map((function(e){return{id:e.characterValueId,partNumber:(0,D.trimNumber)(e.partNumber),name:e.characterValueDisplayName}}))},p=l.items.filter((function(e){return i[e.partNumber]})).map((function(e){return[e.id]})),f={};return l.items.forEach((function(e){f[e.id]=e.partNumber})),Promise.resolve({rows:[l],saleList:p,subMap:f,picked:[null],pickedName:"",characterFlag:!0})},parseCluster:function(e,t){if(e.fourth,t.colorList.length&&t.versionList.length){var a={name:t.colorName,items:t.colorList.map((function(e){return{id:e.characterValueId,partNumber:(0,D.trimNumber)(e.partNumber),name:e.characterValueName}}))},o={name:t.versionName,items:t.versionList.map((function(e){return{id:e.characterValueId,partNumber:(0,D.trimNumber)(e.partNumber),name:e.characterValueName}}))},n=[],i={},r=[];return Object.keys(t.clusterPartMap).forEach((function(e){var a=t.clusterPartMap[e];Object.keys(a).forEach((function(t){i[e+"-"+t]=(0,D.trimNumber)(a[t]),n.push(a[t])}))})),k(e,n).then((function(e){return Object.keys(i).forEach((function(t){e[i[t]].sale&&r.push(t.split("-"))})),{rows:[a,o],saleList:r,subMap:i,picked:[null,null],pickedName:"",clusterFlag:!0}}))}var s=void 0;s=t.colorList.length?{name:t.colorName,items:t.colorList.map((function(e){return{id:e.characterValueId,partNumber:e.partNumber,name:e.characterValueName}}))}:{name:t.versionName,items:t.versionList.map((function(e){return{id:e.characterValueId,partNumber:e.partNumber,name:e.characterValueName}}))};var c=[],d={},u=[];return s.items.forEach((function(e){c.push((0,D.trimNumber)(e.partNumber)),d[e.id]=(0,D.trimNumber)(e.partNumber)})),k(e,c).then((function(e){return Object.keys(d).forEach((function(t){e[d[t]].sale&&u.push(t.split("-"))})),{rows:[s],saleList:u,subMap:d,picked:[null],pickedName:"",clusterFlag:!0}}))},setSubPick:function(e,t,a){var o=e.rows,n=e.saleList,i=e.picked,r=o[t].items[a].id;i[t]!==r&&(1!=i.length||o[t].items[a].active)&&(i[t]=r,n.find((function(e){for(var t=0;t<e.length;t++)if(e[t]!=i[t]&&null!=i[t])return!1;return!0}))||(i.fill(null),i[t]=r),x(e),_(e))},setSubPickByPart:function(e,t){var a=e.rows,o=(e.saleList,e.subMap);e.picked,e.picked=a.map((function(e){return null})),Object.keys(o).forEach((function(a){t==o[a]&&(e.picked=a.split("-"))})),_(e)},calcPicked:x,setSubActive:_,optimization:function(e){return console.log(e),console.log(e.data.data.nSaleobj),e&&e.data&&e.data.data&&e.data.data.nSaleobj?e.data.data.nSaleobj:""}}})),window.define("673",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T,I=e(8),P=(T=I)&&T.__esModule?T:{default:T};a.default={parseEval:function(e){if(!e.data.data.reviewInfo)return{hide:!0};var t=e.data.data.reviewInfo.reviewInfo.reviewList,a=t?t.slice(0,2).map((function(e){var t=e.picVideoFlag&&e.picVideInfo&&Array.isArray(e.picVideInfo.imageInfo)?e.picVideInfo.imageInfo.slice(0,3).map((function(e){return P.default.img+"/uimg/ZR/share_order/"+e.url+"_400x400.jpg"})):[];return{user:e.nickName,content:e.content,ratio:e.qualityStar,img:t}})):[],o=e.data.data.reviewInfo.reviewInfo.labelList||[],n={"有图":200,"追评":1100};o=o.map((function(e,t){return{name:e.labelName,count:e.labelCnt,priority:(n[e.labelName]||0)-t}})).sort((function(e,t){return t.priority-e.priority}));var i=e.data.data.reviewInfo.reviewInfo.newReviewCount;return{list:a,marks:o,ratio:e.data.data.reviewInfo.reviewInfo.goodRate,newReviewCount:i}}}})),window.define("674",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T,I=e(666),P=(T=I)&&T.__esModule?T:{default:T};var D=e(474).snBusError;a.default={parseDetail:function(e){var t=e.data.data.itemParam.parametersElec;return t.length||(t=[]),t.map((function(e){return{title:e.attrName,list:e.parametersData.map((function(e){return{key:e.snparameterdesc,value:e.snparameterVal}}))}}))},parseBookDetail:function(e){var t=e.data.data;if(t.itemParam&&t.itemParam.paraInfo&&t.itemParam.paraInfo.bookParameterInfo){var a=t.itemParam.paraInfo.bookParameterInfo,o=a.author;return a.translator&&(o+="|"+a.translator),[{title:"",list:[{key:"作者",value:o},{key:"出版社",value:a.publication},{key:"出版时间",value:a.publicationDate},{key:"版次",value:a.revision},{key:"印次",value:a.printCount},{key:"印刷时间",value:a.printingDate},{key:"字数",value:a.wordsCount},{key:"页数",value:a.pageNumber},{key:"开本",value:a.kaiben},{key:"装帧",value:a.zhuangzhen}].filter((function(e){return e.value}))}]}return[]},parsepackageBetail:function(e,t){P.default.getSubGuiGeParams(e).then((function(e){t.setData({"detail.detailList":e}),e.length||D(t,{errorCode:"pds-spxq-2wcs"})}))}}})),window.define("675",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(8);a.default={parseGift:function(e){var t=e.priceResult.currentPrice.warrantyList,a={};t&&t.length&&t.forEach((function(e){a[e.goodsCode]=e.warrantyPrice}));var o=e.data.data.salesPromotion.giftInfoList||[];return{list:o=o.map((function(e){var t=void 0;return t=e.pictureUrl?"https:"+e.pictureUrl+"_200w_200h_4e":T.img+"/uimg/b2c/newcatentries/0000000000-"+e.giftId+"_1_200x200.jpg",{title:e.giftName,price:a[e.giftId]||e.giftPrice,number:e.giftNumberOnetime,imgUrl:t,showFlag:e.showFlag}})),coverTitle:"赠品清单"}}}})),window.define("676",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(25),I=e(8),P={imageVerifyApiRefresh:function(){var e=this.data.imageVerify;this.setData({"imageVerify.imageUrl":x(e.uuid,e.sceneId)})},imageVerifyCancel:function(){var e=this.imageVerify;e&&e.promiseFun&&e.promiseFun.reject&&(e.promiseFun.reject({type:1}),D(this))},imageVerifyConfirm:function(){var e=this.imageVerify,t=this.data.imageVerify;!e.imagCode||e.imagCode.length<4?this.setData({"imageVerify.codeError":!0,"imageVerify.codeEmpty":!e.imagCode}):e&&e.promiseFun&&e.promiseFun.resolve&&(e.options.url?(e.promiseFun.resolve(),D(this)):e.promiseFun.resolve({uuid:t.uuid,code:e.imagCode}))},imageVerifyInput:function(e){this.imageVerify.imagCode=e.detail.value},imageVerify:{}};function D(e){e.imageVerify.promiseFun=void 0,e.setData({imageVerify:{show:!1}})}function x(e,t){var a=(0,T.formatTime)(new Date).replace(/[^\d]/g,"");return I.vcs+"/vcs/imageCode.htm?uuid="+e+"&yys="+a+"&sceneId="+t}a.default={show:function(e){var t=e.uuid,a=e.sceneId,o=void 0===a?1:a,n=e.page,i=e.codeError,r=n.imageVerify||{},s=n.data.imageVerify||{};return r.options=e,s.show=!0,s.uuid=t||function(e){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,o="",n=0;n<e;n++)o+=t.charAt(Math.floor(Math.random()*a));return o}(32),s.sceneId=o,s.imageUrl=x(s.uuid,o),s.codeError=i,r.imageCode="",new Promise((function(e,t){r.promiseFun={resolve:e,reject:t},n.setData({imageVerify:s})}))},hide:D,api:P}})),window.define("677",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(77).saSendLog;a.default={init:function(e){e.floatButtonMove=function(e){this.data.floatButton.show&&this.data.floatButton.isShare?(console.log("分享过来的页面"),this.setData({"floatButton.right":0,"fourth.coverShow":!0,"floatButton.width":0})):(console.log("正常进来的页面"),this.setData({"floatButton.right":0,"fourth.coverShow":!0}))},e.floatButtonhide=function(e){this.data.floatButton.show&&this.data.floatButton.isShare?this.setData({"floatButton.right":"-330","fourth.coverShow":!1}):this.setData({"floatButton.right":"-440","fourth.coverShow":!1})},e.floatButtonClose=function(){this.setData({"floatButton.open":!1})},e.floatButtonOpen=function(){this.setData({"floatButton.open":!0})},e.floatButtonAction=function(e){switch(e.currentTarget.dataset.action){case"my":T("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000350"}}}}),n.switchTab({url:"/pages/my/v2/myv2"});break;case"list":T("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000330"}}}}),n.switchTab({url:"/pages/list/list"});break;case"search":T("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000340"}}}}),n.navigateTo({url:"/pages/search/searchResult/result"});break;case"index":T("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000320"}}}}),n.switchTab({url:"/pages/index/index"});break;case"outIndex":T("click",{event:{target:{dataset:{pageid:140,modid:21,eleid:"140000360"}}}}),n.switchTab({url:"/pages/index/index"})}},e.toNewerUrl=function(e){T("click",{event:{target:{dataset:{pageid:140,modid:3,eleid:"140010000"}}}}),this.baseJump(e)},e.newsClose=function(){this.setData({"newer.show":!1})}}}})),window.define("678",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=L(e(135)),P=L(e(54)),D=L(e(170)),x=L(e(666)),_=L(e(387)),k=e(77);function L(e){return e&&e.__esModule?e:{default:e}}var N=e(25),E=N.requestPromise,O=N.formatTime,A=N.getDfpToken,R=N.extend,M=N.checkLogin,U=e(45),j=e(8),B=e(474).snBusError,F=void 0;function V(e,t){var a=new Date(e.replace(/-/g,"/")).getTime(),o=new Date(t.replace(/-/g,"/")).getTime(),n=(new Date).getTime(),i=void 0,r=void 0;return n<a?(r=(a-n)/36e5)>0&&r<1?i="即将开始":r<24&&r>=1?i=Math.floor(r)+"小时后可用":r>=24&&(i=Math.floor(r/24)+"天后可用"):i=n>=a&&n<=o?(r=(o-n)/36e5)<24?"即将过期":0:"已过期",i}function H(e){return 1===e.toString().length?"0"+e:e}function q(e,t){var a=new Date(e.replace(/-/g,"/")),o=a.getTime(),n=(new Date).getTime(),i=void 0,r=void 0;return n<o&&((r=(o-n)/36e5)>=24?i=a.getMonth()+1+"."+a.getDate()+"  "+H(a.getHours())+":"+H(a.getMinutes())+"起可用":r<24&&(i=0===Math.floor(r)?Math.floor((o-n)/6e4)+"分后可用":Math.floor(r)+"小时"+Math.floor(60*(r-Math.floor(r)))+"分后可用")),i}function G(e){for(var t="",a=[],o=F.slice(0);o.length;){var n=o.splice(0,20).join(",");t=j.quan+"/getPromFourPageNew_"+n+"_1_.do";var i=E({url:t});a.push(i)}var r=e.data.couponCover.coupon;Promise.all(a).then((function(t){var a=[];t.forEach((function(e){a=a.concat(e.activityList)})),a.forEach((function(e,t){r[t].receiveTimes=e.receiveTimes,2==e.isReceive?r[t].isReceive=!1:r[t].isReceive=!0})),e.setData({"couponCover.coupon":r})}))}var Y={couponGotClick:function(e){var t=this.data.couponCover.gotCoupon[e.currentTarget.dataset.index];n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+t.couponRuleId+"&type=0"})},couponTabClick:function(e){this.setData({"couponCover.tab":e.currentTarget.dataset.index})},refreshImgCode:function(){var e=O(new Date).replace(/[^\d]/g,""),t=j.vcs+"/vcs/imageCode.htm?uuid="+this.data.couponCover.uuid+"&yys="+e+"&sceneId="+this.data.couponCover.sceneId;this.setData({"couponCover.codeImgSrc":t})},validateCancel:function(){this.setData({"couponCover.validateShow":!1})},validateCheck:function(){var e=this,t=e.data.couponCover.code,a=j.vcs+"/vcs/validate_jsonp.htm?code="+t+"&uuid="+e.data.couponCover.uuid+"&delFlag=0";try{t.length>3?E({method:"GET",url:a,dataType:"jsonp"}).then((function(a){a=a.replace(/'/g,'"'),null!=(a=JSON.parse(a))&&null!=a[0]&&"false"!=a[0].result?(e.setData({"couponCover.validateShow":!1,"couponCover.code":""}),e.couponClick(null,e.data.couponCover.current,{uuid:e.data.couponCover.uuid,validateCode:t})):e.setData({"couponCover.codeOk":!1,"couponCover.codeNook":!0})})):e.setData({"couponCover.codeOk":!1,"couponCover.codeNook":!0})}catch(t){console.error(t),e.setData({"couponCover.codeOk":!1,"couponCover.codeNook":!0})}},saveCheckVal:function(e){var t=this;t.setData({"couponCover.code":e.detail.value});var a=t.data.couponCover.code,o=j.vcs+"/vcs/validate_jsonp.htm?code="+a+"&uuid="+t.data.couponCover.uuid+"&delFlag=0";a.length>3?E({method:"GET",url:o,dataType:"jsonp"}).then((function(e){e=e.replace(/'/g,'"'),null!=(e=JSON.parse(e))&&null!=e[0]&&"false"!=e[0].result?t.setData({"couponCover.codeOk":!0,"couponCover.codeNook":!1}):t.setData({"couponCover.codeOk":!1,"couponCover.codeNook":!0})})):t.setData({"couponCover.codeOk":!1,"couponCover.codeNook":!1})},couponClick:function(e,t,a){var o=this;(0,k.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000810"}}}}),t||(t=o.data.couponCover.coupon[e.currentTarget.dataset.index]),o.setData({"couponCover.couponIndex":e?e.currentTarget.dataset.index:o.data.couponCover.couponIndex,"couponCover.current":t});var n=t.isReceive,i=j.quan+"/lqzx_rsf.do";M().then((function(){n||A().then((function(n){t.dfpToken=n,t.detect=P.default.getTrack(),E({method:"GET",url:i,data:R({},t,a)}).then((function(a){if(console.log("点击领券",a),"0"===a.resultCode){I.default.showToast({title:"领券成功"});var n="couponCover.coupon["+e.currentTarget.dataset.index+"].geted";o.setData((d=!0,(c=n)in(s={})?Object.defineProperty(s,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[c]=d,s))}else if("2001"===a.resultCode||"2002"===a.resultCode||"2003"===a.resultCode)I.default.showToast({title:a.resultMsg});else if("2004"===a.resultCode)D.default.show({page:o,phone:a.mobileNum,callback:function(e){var a=e.success,n=e.code;a&&o.couponClick(null,t,{validateCode:n})}});else if("2005"===a.resultCode||"2006"===a.resultCode)D.default.setError(o,a.resultMsg);else if("1003"===a.resultCode||"1004"===a.resultCode){var i=O(new Date).replace(/[^\d]/g,""),r=j.vcs+"/vcs/imageCode.htm?uuid="+a.uuid+"&yys="+i+"&sceneId="+a.sceneId;o.setData({"couponCover.codeImgSrc":r,"couponCover.uuid":a.uuid,"couponCover.sceneId":a.sceneId,"couponCover.validateShow":!0,"couponCover.codeOk":!1,"couponCover.codeNook":!1})}else I.default.showToast({title:a.resultMsg||"领券失败"}),B(o,{errorCode:"pds-spxq-2qljlqdjsb_"+a.resultCode,errorDesc:a.resultMsg});var s,c,d;"2004"!==a.resultCode&&"2005"!==a.resultCode&&"2006"!==a.resultCode&&D.default.hide(o),W(o)})).catch((function(e){console.error("lqzx_rsf",e)}))}))}))},allowanceGotClick:function(e){var t=e.currentTarget.dataset.param;if("mj"===t||"满减"===t){(0,k.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000450"}}}});var a=null,o=this.data.promote.list;if(o&&o.length>0){var i=!0,r=!1,s=void 0;try{for(var c,d=o[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;"1"==u.code&&(a=u.url)}}catch(e){r=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(r)throw s}}}n.navigateTo({url:""+a})}else if("allowance-cd"===t){(0,k.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000450"}}}});var l=this.data.allowance,p=l.ruleId,f=l.bountyRuleId;n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+p+"_"+f})}else if("allowance-mj"===t){(0,k.saSendLog)("click",{event:{target:{dataset:{pageid:140,modid:8,eleid:"140000220"}}}});var h=this.data.allowance,g=h.ruleId,m=h.bountyRuleId;n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+g+"_"+m})}},buyswitch:function(){console.log("已关闭")},refreshData:function(){W(this)},allowanceClick:function(e){var t=this,a=void 0;e.uuid||(a=e.currentTarget.dataset.sendcategory);var o=this,n="";"0"===a?n="140000210":"1"===a&&(n="140000430"),this.autoClick({pageid:140,modid:8,eleid:n,eletp:"coupon"});var i=o.data.allowance;M().then((function(){var n,r;A().then((n=_.default.mark((function n(r){var s,c,d,u,l,p;return _.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=R({},e,{dfpToken:r,detect:P.default.getTrack(),activityId:i.activityId,sendCategory:a}),t.next=3,x.default.exchangeAllowance(s);case 3:c=t.sent,d=0,u=c.msg||"兑换失败，请重试","0"===c.resultCode?(W(o),u="恭喜您，成功兑换"+c.exchangeAllowanceQuota+"元"):"ALLOWANCE_1013"===c.resultCode?(l=O(new Date).replace(/[^\d]/g,""),p=j.vcs+"/vcs/imageCode.htm?uuid="+c.uuid+"&yys="+l+"&sceneId="+c.sceneId,o.setData({"allowance.codeImgSrc":p,"allowance.uuid":c.uuid,"allowance.sceneId":c.sceneId,"allowance.validateShow":!0,"allowance.codeOk":!1,"allowance.codeNook":!1})):"403"===c.resultCode&&(d="403",u=c.msg),"0"!==c.resultCode&&B(o,{errorCode:"pds-spxq-2gwjtdh_"+c.resultCode,errorDesc:u}),o.setData({"allowance.resultStaus":d}),I.default.showToast({title:u});case 10:case"end":return t.stop()}}),n,t)})),r=function(){var e=n.apply(this,arguments);return new Promise((function(t,a){return function o(n,i){try{var r=e[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e){return r.apply(this,arguments)})).catch((function(e){console.error("云钻兑换购物津贴-err",e)}))}))},allowanceRefreshImgCode:function(){var e=O(new Date).replace(/[^\d]/g,""),t=j.vcs+"/vcs/imageCode.htm?uuid="+this.data.allowance.uuid+"&yys="+e+"&sceneId="+this.data.allowance.sceneId;this.setData({"allowance.codeImgSrc":t})},allowanceValidateCancel:function(){this.setData({"allowance.validateShow":!1})},allowanceValidateCheck:function(){var e=this,t=e.data.allowance.code,a=j.vcs+"/vcs/validate_jsonp.htm?code="+t+"&uuid="+e.data.allowance.uuid+"&delFlag=0";try{t.length>3?E({method:"GET",url:a,dataType:"jsonp"}).then((function(a){a=a.replace(/'/g,'"'),null!=(a=JSON.parse(a))&&null!=a[0]&&"false"!=a[0].result?(e.setData({"allowance.validateShow":!1,"allowance.code":""}),e.allowanceClick({uuid:e.data.allowance.uuid,vcsCode:t})):e.setData({"allowance.codeOk":!1,"allowance.codeNook":!0})})):e.setData({"allowance.codeOk":!1,"allowance.codeNook":!0})}catch(t){console.error(t),e.setData({"allowance.codeOk":!1,"allowance.codeNook":!0})}},allowanceSaveCheckVal:function(e){var t=this;t.setData({"allowance.code":e.detail.value});var a=t.data.allowance.code,o=j.vcs+"/vcs/validate_jsonp.htm?code="+a+"&uuid="+t.data.allowance.uuid+"&delFlag=0";a.length>3?E({method:"GET",url:o,dataType:"jsonp"}).then((function(e){e=e.replace(/'/g,'"'),null!=(e=JSON.parse(e))&&null!=e[0]&&"false"!=e[0].result?t.setData({"allowance.codeOk":!0,"allowance.codeNook":!1}):t.setData({"allowance.codeOk":!1,"allowance.codeNook":!0})})):t.setData({"allowance.codeOk":!1,"allowance.codeNook":!1})}};function z(e){x.default.getBestCoupon(e).then((function(t){if(t){t.bestUseAmount&&!e.fourth.isPass&&e.setData({"price.bestCouponAmount":t.bestUseAmount});var a=e.data.couponCover;a.coupon&&a.coupon.length||a.show||(a.tab=2),e.setData({"fourth.coverShow":1,"couponCover.show":1});var o=t.couponInfoList||[],n=!1;o.forEach((function(e){var t=V(e.startTime,e.endTime),a=q(e.startTime,e.endTime);a&&(n=!0),e.coverMsg=t,e.waitTimeTip=a,e.startTime=(e.startTime||"").split(" ")[0].replace(/-/g,"."),e.endTime=(e.endTime||"").split(" ")[0].replace(/-/g,"."),"10002"!==e.couponType&&"10003"!==e.couponType&&"10004"!==e.couponType&&"10005"!==e.couponType&&"10006"!==e.couponType||(e.showUrl=!0)})),t.bonusUseAmount&&e.setData({"allowance.bonusUseAmount":t.bonusUseAmount}),e.setData({"couponCover.gotCoupon":o,"couponCover.tab":a.tab,"couponCover.hasWaitCoupon":n})}}))}function W(e){return Promise.all([G(e),z(e),(t=e,a=t.data.allowance,void(a.bountyRulDescribe&&Promise.all([x.default.getUserQualificationInfo(),x.default.getSurplusQuota()]).then((function(e){var o=T(e,2),n=o[0],i=o[1];a.resultStaus="","403"==n.resultCode||Array.isArray(i)&&"403"===i[0].resultCode?(a.resultStaus=403,I.default.showToast({title:i[0].msg})):a.resultStaus=0,a.point=n&&1===n.result?n.point:0,a.startTime=a.startTime.split(" ")[0].split("-").join("."),a.endTime=a.endTime.split(" ")[0].split("-").join("."),i instanceof Array?(a.sendCategory=2,0==i[0].isEnabled&&0==i[1].isEnabled?a.liukongStaus=1:a.liukongStaus=0,i.forEach((function(e,t){1==e.sendCategory?a.randQuota=e:0==e.sendCategory&&(a.fixedQuota=e)}))):1==i.sendCategory?a.randQuota=i:0==i.sendCategory&&(a.fixedQuota=i),t.setData({allowance:a},(function(){(0,k.saSendLog)("autoexpo",this)}))})).catch((function(e){throw console.error("获取云钻额度、限制次数接口失败！",e.message),e}))))]);var t,a}a.default={parseCoupon:function(e,t){F=[];var a=e;t.data.data.errorTable&&"pds-spxq-2cxyc"===t.data.data.errorTable.yjmdErrorCode&&B(a,{errorCode:"pds-spxq-2cxyc"});var o=t.data.data.salesPromotion.activityList||[],n=t.data.data.salesPromotion.shoppingAllowance||{};o=o.filter((function(e){return"7"===e.activityTypeId})).map((function(e){var t=V(e.couponStartTime,e.couponEndTime),a=q(e.couponStartTime,e.couponEndTime);e.couponStartTime=e.couponStartTime.split(" ")[0].split("-").join("."),e.couponEndTime=e.couponEndTime.split(" ")[0].split("-").join(".");var o=function(e){var t=/([^&=]+)=([\w\W]*?)(&|$|#)/g,a=/^[^\?]+\?([\w\W]+)$/.exec(e),o={};if(a&&a[1])for(var n,i=a[1];null!=(n=t.exec(i));)o[n[1]]=n[2];return o}(e.activityLink);return F.push(e.activityId),{coverMsg:t,waitTimeTip:a,salesPrice:e.salesPrice,couponStartTime:e.couponStartTime,couponEndTime:e.couponEndTime,activityDescription:e.activityDescription,isReceive:!1,actId:o.actId,bonusTrigerId:o.bonusTrigerId,actKey:o.actKey,channel:o.channel,cityId:o.cityId,sourceId:o.sourceId,deviceToken:U.pdToken,receiveTimes:0,memberAttLimit:e.memberAttLimit,bonusListInfo:e.bonusListInfo,couponShowType:e.couponShowType,geted:!1,limitTypeClass:{1:"coupon-limit-student",2:"coupon-limit-new-vip",3:"coupon-limit-old-vip"}[e.memberAttLimitType]}}));var i=a.data.couponCover;i.coupon=o,i.coverTitle="优惠",i.validateShow=!1,i.show=0,i.tab=1,e.data.allowance=n,e.data.allowance.validateShow=!1,e.data.allowance.show=0,e.data.allowance.tab=1,(0,k.saSendLog)("exposure",[{pageid:140,modid:8,eleid:"140000190"}]),a.setData({couponCover:i,allowance:n})},action:Y,parseGotCoupon:function(e,t){var a=e.data.couponCover;a.coupon&&a.coupon.length||a.show||(a.tab=2),e.setData({"couponCover.gotCoupon":t.couponInfoList||[],"couponCover.tab":a.tab})},reloadCoupon:W,judgeBestCoupon:function(e,t){x.default.getBestCoupon(e,t).then((function(a){if(a){var o={};if(t.data.data.salesPromotion.activityList&&t.data.data.salesPromotion.activityList.length){var n=!0,i=!1,r=void 0;try{for(var s,c=t.data.data.salesPromotion.activityList[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value;"1"==d.activityTypeId&&d.calRewardList.length&&(o=d.calRewardList[0])}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}}var u=void 0;e.fourth.jgActivityInfos.jgFlag&&e.fourth.jgActivityInfos.jgPrice?(u=Number((Number(e.fourth.jgActivityInfos.jgPrice||0)+Number("".bonusAmount||0)+Number(o.discountAmount||0)+Number(a.bestUseAmount||0)).toFixed(2)),o.sumDiscount=e.fourth.jgActivityInfos.jgPrice+(+o.discountAmount||0)):u=Number((Number("".bonusAmount||0)+Number(o.discountAmount||0)+Number(a.bestUseAmount||0)).toFixed(2));var l=e.data.fourth.priceType||"",p=void 0,f=void 0;"8"!==l.split("-")[0]&&"13"!==l.split("-")[0]&&"7-1"!==l&&"-1"!==e.data.price.promotionPrice.indexOf("-")&&(e.data.fourth.isVip&&e.data.vip.vipPrice?p=e.data.vip.vipPrice-u:e.data.price.promotionPrice&&(p=e.data.price.promotionPrice-u),p&&(p=p.toFixed(2)),p<0&&(p=0)),"8-5"===l||"8-6"===l||"12-1"===l||"7-1"===l?(u=0,f=!0):f=!1,e.setData({BestCouponMeg:a,"couponCover.FinalAmout":u,"couponCover.arrivalPrice":p||0,"couponCover.isTextPrice":f,salesPromotion:t.data.data.salesPromotion,calRewardList:o,"couponCover.gotCoupon":a.couponInfoList||[]})}})),e.setData({"couponCover.switch":Number(t.data.data.preferentialCopywriterFlag)||0})},getInfo:function(e){if(e.coupon.length){var t=e.coupon.map((function(e){return{valueText:"2"===e.couponShowType&&e.bonusListInfo.length>0&&"5"===e.bonusListInfo[0].rewardQuantifierType?e.bonusListInfo[0].bounsAmount+"折":"￥"+e.salesPrice,label:e.activityDescription}}));return[{title:"优惠券".split(""),list:t,total:e.coupon.length+e.gotCoupon.length}]}if(e.gotCoupon.length){t=e.gotCoupon.map((function(e){return{valueText:e.couponDiscount?e.couponDiscount+"折":"¥"+e.amount,label:e.bonusRulesDesc}}));return[{title:"优惠券".split(""),list:t,total:e.coupon.length+e.gotCoupon.length}]}return[{}]}}})),window.define("679",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=D(e(666)),I=D(e(680)),P=D(e(8));function D(e){return e&&e.__esModule?e:{default:e}}function x(e,t){var a=t.data.data.data1.data.bundleRel,o=((t.data.data.fixedPrice||{}).saleInfo||[]).reduce((function(e,t){return e[t.partNumber]=t,e}),{}),n=a&&a.bundleDto?a.bundleDto.productList:[],i=t.currentPrice.vendorCode;n.forEach((function(e,t){e.vendorCode=""===i?"0000000000":i,e.sumPrice=o[e.subPartNumber].count*o[e.subPartNumber].promotionPrice,e.firstPic?(console.log("firstPic1",e.firstPic),e.firstPic=e.firstPic+"_200w_200h_4e_100Q"):e.firstPic=P.default.img+"/uimg/b2c/newcatentries/"+e.vendorCode+"-"+e.subPartNumber+"_1_200x200.jpg"}));for(var r=0,s=0;s<n.length;s++)r+=n[s].count;return{show:!0,list:n,allCount:r}}var _={packageClick:function(){this.commonSendClick(140,15,140001530),this.commonSendExpo(),this.hideCoverHandle=function(){this.setData({"package.showCover":0})},this.setData({"fourth.coverShow":1,"package.showCover":1})},detailTabSubChange:function(e){var t=this,a=e.currentTarget.dataset.index,o={"detail.currentSubTab":a};if(a!==this.data.detail.currentSubTab){if(0==this.data.detail.currentSubTab&&n.canIUse("createSelectorQuery")){var i=n.createSelectorQuery();i.select(".detail-graphic-warpper").boundingClientRect(),i.exec((function(e){t.setData({"detail.graphicHeight":e[0].height})}))}t.setData(o)}var r=x(0,t.data.result).list,s=[];r.map((function(e){s.push(e.subPartNumber)}));var c=r[0].vendorCode,d={partNumberArr:s,supplierCode:c,terminate:"2"};console.log(a),T.default.getBatchDetailInfo(d).then((function(e){var a=e.data,o=t.data.detail.currentSubTab;if(a.length>=0){var n=(a[o].hasPhoneDetail?a[o].phoneDetail:a[o].detailUrl)||"";n=(n=(n=(n=n.replace(/src2/g,"src")).replace(/src="\/\//g,'src="http://')).replace(/<tr[\s\S]*?<\/tr>/gm,(function(e){return e.match(/<td/g).length<=1?e:""}))).replace(/<img[\s\S]*?>/gm,(function(e){return e.indexOf("src")>=0?e:""}));try{I.default.wxParse("detailHtml","html","",t,0),I.default.wxParse("detailHtml","html",n,t,0)}catch(e){console.error(e)}}})),t.loadPartAsync()}};a.default={parsePackage:x,action:_}})),window.define("680",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=P(e(681)),I=P(e(682));function P(e){return e&&e.__esModule?e:{default:e}}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=0,_=0;function k(e){var t=e.target.dataset.src,a=e.target.dataset.from;void 0!==a&&a.length>0&&n.previewImage({current:t,urls:this.data[a].imageUrls})}function L(e){var t=this,a=e.target.dataset.from,o=e.target.dataset.idx;void 0!==a&&a.length>0&&(0===x&&0===_?n.getSystemInfo({success:function(n){x=n.screenWidth,_=n.windowHeight,N(e,o,t,a)}}):N(e,o,t,a))}function N(e,t,a,o){var n,i,r=a.data[o];if(r&&0!=r.images.length){var s=r.images;console.log(s);var c=function(e,t,a,o){var n,i=0,r=0,s={},c=a.data[o].view.imagePadding;n=(x=x||375)-2*c,_=_||300,console.log("originalWidth:"+e,"windowWidth:"+n),e>n?(r=(i=n)*t/e,s.imageWidth=i,s.imageheight=r):(s.imageWidth=e,s.imageheight=t);return s}(e.detail.width,e.detail.height,a,o);if(s&&s[t]&&s[t].index){var d=s&&s[t]?s[t].index:"",u=""+o,l=!0,p=!1,f=void 0;try{for(var h,g=d.split(".")[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){u+=".nodes["+h.value+"]"}}catch(e){p=!0,f=e}finally{try{!l&&g.return&&g.return()}finally{if(p)throw f}}var m=u+".width",v=u+".height";console.log((D(n={},m,c.imageWidth),D(n,v,c.imageheight),n)),a.setData((D(i={},m,c.imageWidth),D(i,v,c.imageheight),i))}}}t.exports={wxParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wxParseData",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'<div class="color:red;">数据不能为空</div>',o=arguments[3],n=arguments[4],i=o,r={};if("html"==t)r=I.default.html2json(a,e);else if("md"==t||"markdown"==t){var s=new T.default.Converter,c=s.makeHtml(a);r=I.default.html2json(c,e)}r.view={},r.view.imagePadding=0,void 0!==n&&(r.view.imagePadding=n);var d={};d[e]=r,i.setData(d),i.wxParseImgLoad=L,i.wxParseImgTap=k},wxParseTemArray:function(e,t,a,o){for(var n=[],i=o.data,r=null,s=0;s<a;s++){var c=i[t+s].nodes;n.push(c)}e=e||"wxParseTemArray",(r=JSON.parse('{"'+e+'":""}'))[e]=n,o.setData(r)},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",a=arguments[2];I.default.emojisInit(e,t,a)}}})),window.define("681",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function I(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix identation in es6 strings",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]=t[o].defaultValue);return a}var P={},D={},x={},_=I(!0),k={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:I(!0)};function L(e,t){var a=t?"Error in "+t+" extension->":"Error in unnamed extension",o={valid:!0,error:""};P.helper.isArray(e)||(e=[e]);for(var n=0;n<e.length;++n){var i=a+" sub-extension "+n+": ",r=e[n];if("object"!==(void 0===r?"undefined":T(r)))return o.valid=!1,o.error=i+"must be an object, but "+(void 0===r?"undefined":T(r))+" given",o;if(!P.helper.isString(r.type))return o.valid=!1,o.error=i+'property "type" must be a string, but '+T(r.type)+" given",o;var s=r.type=r.type.toLowerCase();if("language"===s&&(s=r.type="lang"),"html"===s&&(s=r.type="output"),"lang"!==s&&"output"!==s&&"listener"!==s)return o.valid=!1,o.error=i+"type "+s+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',o;if("listener"===s){if(P.helper.isUndefined(r.listeners))return o.valid=!1,o.error=i+'. Extensions of type "listener" must have a property called "listeners"',o}else if(P.helper.isUndefined(r.filter)&&P.helper.isUndefined(r.regex))return o.valid=!1,o.error=i+s+' extensions must define either a "regex" property or a "filter" method',o;if(r.listeners){if("object"!==T(r.listeners))return o.valid=!1,o.error=i+'"listeners" property must be an object but '+T(r.listeners)+" given",o;for(var c in r.listeners)if(r.listeners.hasOwnProperty(c)&&"function"!=typeof r.listeners[c])return o.valid=!1,o.error=i+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+T(r.listeners[c])+" given",o}if(r.filter){if("function"!=typeof r.filter)return o.valid=!1,o.error=i+'"filter" must be a function, but '+T(r.filter)+" given",o}else if(r.regex){if(P.helper.isString(r.regex)&&(r.regex=new RegExp(r.regex,"g")),!r.regex instanceof RegExp)return o.valid=!1,o.error=i+'"regex" property must either be a string or a RegExp object, but '+T(r.regex)+" given",o;if(P.helper.isUndefined(r.replace))return o.valid=!1,o.error=i+'"regex" extensions must implement a replace string or function',o}}return o}function N(e,t){return"~E"+t.charCodeAt(0)+"E"}P.helper={},P.extensions={},P.setOption=function(e,t){return _[e]=t,this},P.getOption=function(e){return _[e]},P.getOptions=function(){return _},P.resetOptions=function(){_=I(!0)},P.setFlavor=function(e){if(k.hasOwnProperty(e)){var t=k[e];for(var a in t)t.hasOwnProperty(a)&&(_[a]=t[a])}},P.getDefaultOptions=function(e){return I(e)},P.subParser=function(e,t){if(P.helper.isString(e)){if(void 0===t){if(D.hasOwnProperty(e))return D[e];throw Error("SubParser named "+e+" not registered!")}D[e]=t}},P.extension=function(e,t){if(!P.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=P.helper.stdExtName(e),P.helper.isUndefined(t)){if(!x.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return x[e]}"function"==typeof t&&(t=t()),P.helper.isArray(t)||(t=[t]);var a=L(t,e);if(!a.valid)throw Error(a.error);x[e]=t},P.getAllExtensions=function(){return x},P.removeExtension=function(e){delete x[e]},P.resetExtensions=function(){x={}},P.validateExtension=function(e){var t=L(e,null);return!!t.valid||(console.warn(t.error),!1)},P.hasOwnProperty("helper")||(P.helper={}),P.helper.isString=function(e){return"string"==typeof e||e instanceof String},P.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},P.helper.forEach=function(e,t){if("function"==typeof e.forEach)e.forEach(t);else for(var a=0;a<e.length;a++)t(e[a],a,e)},P.helper.isArray=function(e){return e.constructor===Array},P.helper.isUndefined=function(e){return void 0===e},P.helper.stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()},P.helper.escapeCharactersCallback=N,P.helper.escapeCharacters=function(e,t,a){var o="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";a&&(o="\\\\"+o);var n=new RegExp(o,"g");return e=e.replace(n,N)};var E=function(e,t,a,o){var n,i,r,s,c,d=o||"",u=d.indexOf("g")>-1,l=new RegExp(t+"|"+a,"g"+d.replace(/g/g,"")),p=new RegExp(t,d.replace(/g/g,"")),f=[];do{for(n=0;r=l.exec(e);)if(p.test(r[0]))n++||(s=(i=l.lastIndex)-r[0].length);else if(n&&!--n){c=r.index+r[0].length;var h={left:{start:s,end:i},match:{start:i,end:r.index},right:{start:r.index,end:c},wholeMatch:{start:s,end:c}};if(f.push(h),!u)return f}}while(n&&(l.lastIndex=i));return f};P.helper.matchRecursiveRegExp=function(e,t,a,o){for(var n=E(e,t,a,o),i=[],r=0;r<n.length;++r)i.push([e.slice(n[r].wholeMatch.start,n[r].wholeMatch.end),e.slice(n[r].match.start,n[r].match.end),e.slice(n[r].left.start,n[r].left.end),e.slice(n[r].right.start,n[r].right.end)]);return i},P.helper.replaceRecursiveRegExp=function(e,t,a,o,n){if(!P.helper.isFunction(t)){var i=t;t=function(){return i}}var r=E(e,a,o,n),s=e,c=r.length;if(c>0){var d=[];0!==r[0].wholeMatch.start&&d.push(e.slice(0,r[0].wholeMatch.start));for(var u=0;u<c;++u)d.push(t(e.slice(r[u].wholeMatch.start,r[u].wholeMatch.end),e.slice(r[u].match.start,r[u].match.end),e.slice(r[u].left.start,r[u].left.end),e.slice(r[u].right.start,r[u].right.end))),u<c-1&&d.push(e.slice(r[u].wholeMatch.end,r[u+1].wholeMatch.start));r[c-1].wholeMatch.end<e.length&&d.push(e.slice(r[c-1].wholeMatch.end)),s=d.join("")}return s},P.helper.isUndefined(console)&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),P.Converter=function(e){var t={},a=[],o=[],n={};function i(e,t){if(t=t||null,P.helper.isString(e)){if(t=e=P.helper.stdExtName(e),P.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new P.Converter));P.helper.isArray(e)||(e=[e]);var n=L(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i)switch(e[i].type){case"lang":a.push(e[i]);break;case"output":o.push(e[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(P.extensions[e],e);if(P.helper.isUndefined(x[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=x[e]}"function"==typeof e&&(e=e()),P.helper.isArray(e)||(e=[e]);var i=L(e,t);if(!i.valid)throw Error(i.error);for(var s=0;s<e.length;++s){switch(e[s].type){case"lang":a.push(e[s]);break;case"output":o.push(e[s])}if(e[s].hasOwnProperty(n))for(var c in e[s].listeners)e[s].listeners.hasOwnProperty(c)&&r(c,e[s].listeners[c])}}function r(e,t){if(!P.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+(void 0===e?"undefined":T(e))+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+(void 0===t?"undefined":T(t))+" given");n.hasOwnProperty(e)||(n[e]=[]),n[e].push(t)}!function(){for(var a in e=e||{},_)_.hasOwnProperty(a)&&(t[a]=_[a]);if("object"!==(void 0===e?"undefined":T(e)))throw Error("Converter expects the passed parameter to be an object, but "+(void 0===e?"undefined":T(e))+" was passed instead.");for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.extensions&&P.helper.forEach(t.extensions,i)}(),this._dispatch=function(e,t,a,o){if(n.hasOwnProperty(e))for(var i=0;i<n[e].length;++i){var r=n[e][i](e,t,this,a,o);r&&void 0!==r&&(t=r)}return t},this.listen=function(e,t){return r(e,t),this},this.makeHtml=function(e){if(!e)return e;var n={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:a,outputModifiers:o,converter:this,ghCodeBlocks:[]};return e=(e=(e=(e=e.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,a=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(a,"")}(e)),e=e,e=P.subParser("detab")(e,t,n),e=P.subParser("stripBlankLines")(e,t,n),P.helper.forEach(a,(function(a){e=P.subParser("runExtension")(a,e,t,n)})),e=P.subParser("hashPreCodeTags")(e,t,n),e=P.subParser("githubCodeBlocks")(e,t,n),e=P.subParser("hashHTMLBlocks")(e,t,n),e=P.subParser("hashHTMLSpans")(e,t,n),e=P.subParser("stripLinkDefinitions")(e,t,n),e=P.subParser("blockGamut")(e,t,n),e=P.subParser("unhashHTMLSpans")(e,t,n),e=(e=(e=P.subParser("unescapeSpecialChars")(e,t,n)).replace(/~D/g,"$$")).replace(/~T/g,"~"),P.helper.forEach(o,(function(a){e=P.subParser("runExtension")(a,e,t,n)})),e},this.setOption=function(e,a){t[e]=a},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){i(e,t=t||null)},this.useExtension=function(e){i(e)},this.setFlavor=function(e){if(k.hasOwnProperty(e)){var a=k[e];for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}},this.removeExtension=function(e){P.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var n=e[t],i=0;i<a.length;++i)a[i]===n&&a[i].splice(i,1);for(;0<o.length;++i)o[0]===n&&o[0].splice(i,1)}},this.getAllExtensions=function(){return{language:a,output:o}}},P.subParser("anchors",(function(e,t,a){var o=function(e,t,o,n,i,r,s,c){P.helper.isUndefined(c)&&(c=""),e=t;var d=o,u=n.toLowerCase(),l=i,p=c;if(!l)if(u||(u=d.toLowerCase().replace(/ ?\n/g," ")),l="#"+u,P.helper.isUndefined(a.gUrls[u])){if(!(e.search(/\(\s*\)$/m)>-1))return e;l=""}else l=a.gUrls[u],P.helper.isUndefined(a.gTitles[u])||(p=a.gTitles[u]);var f='<a href="'+(l=P.helper.escapeCharacters(l,"*_",!1))+'"';return""!==p&&null!==p&&(p=p.replace(/"/g,"&quot;"),f+=' title="'+(p=P.helper.escapeCharacters(p,"*_",!1))+'"'),f+=">"+d+"</a>"};return e=(e=(e=(e=a.converter._dispatch("anchors.before",e,t,a)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,o)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,o)).replace(/(\[([^\[\]]+)])()()()()()/g,o),e=a.converter._dispatch("anchors.after",e,t,a)})),P.subParser("autoLinks",(function(e,t,a){function o(e,t){var a=t;return/^www\./i.test(t)&&(t=t.replace(/^www\./i,"http://www.")),'<a href="'+t+'">'+a+"</a>"}function n(e,t){var a=P.subParser("unescapeSpecialChars")(t);return P.subParser("encodeEmailAddress")(a)}return e=(e=(e=a.converter._dispatch("autoLinks.before",e,t,a)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,o)).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,n),t.simplifiedAutoLink&&(e=(e=e.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,o)).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,n)),e=a.converter._dispatch("autoLinks.after",e,t,a)})),P.subParser("blockGamut",(function(e,t,a){e=a.converter._dispatch("blockGamut.before",e,t,a),e=P.subParser("blockQuotes")(e,t,a),e=P.subParser("headers")(e,t,a);var o=P.subParser("hashBlock")("<hr />",t,a);return e=(e=(e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,o)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,o)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,o),e=P.subParser("lists")(e,t,a),e=P.subParser("codeBlocks")(e,t,a),e=P.subParser("tables")(e,t,a),e=P.subParser("hashHTMLBlocks")(e,t,a),e=P.subParser("paragraphs")(e,t,a),e=a.converter._dispatch("blockGamut.after",e,t,a)})),P.subParser("blockQuotes",(function(e,t,a){return e=(e=a.converter._dispatch("blockQuotes.before",e,t,a)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,o){var n=o;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=P.subParser("githubCodeBlocks")(n,t,a),n=(n=(n=P.subParser("blockGamut")(n,t,a)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var a=t;return a=(a=a.replace(/^  /gm,"~0")).replace(/~0/g,"")})),P.subParser("hashBlock")("<blockquote>\n"+n+"\n</blockquote>",t,a)})),e=a.converter._dispatch("blockQuotes.after",e,t,a)})),P.subParser("codeBlocks",(function(e,t,a){e=a.converter._dispatch("codeBlocks.before",e,t,a);return e=(e=(e+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,o,n){var i=o,r=n,s="\n";return i=P.subParser("outdent")(i),i=P.subParser("encodeCode")(i),i=(i=(i=P.subParser("detab")(i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(s=""),i="<pre><code>"+i+s+"</code></pre>",P.subParser("hashBlock")(i,t,a)+r}))).replace(/~0/,""),e=a.converter._dispatch("codeBlocks.after",e,t,a)})),P.subParser("codeSpans",(function(e,t,a){return void 0===(e=a.converter._dispatch("codeSpans.before",e,t,a))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,a,o){var n=o;return n=(n=n.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),t+"<code>"+(n=P.subParser("encodeCode")(n))+"</code>"})),e=a.converter._dispatch("codeSpans.after",e,t,a)})),P.subParser("detab",(function(e){return e=(e=(e=(e=(e=e.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,(function(e,t){for(var a=t,o=4-a.length%4,n=0;n<o;n++)a+=" ";return a}))).replace(/~A/g,"    ")).replace(/~B/g,"")})),P.subParser("encodeAmpsAndAngles",(function(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")})),P.subParser("encodeBackslashEscapes",(function(e){return e=(e=e.replace(/\\(\\)/g,P.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,P.helper.escapeCharactersCallback)})),P.subParser("encodeCode",(function(e){return e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=P.helper.escapeCharacters(e,"*_{}[]\\",!1)})),P.subParser("encodeEmailAddress",(function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=(e='<a href="'+(e=(e="mailto:"+e).replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else if(":"!==e){var a=Math.random();e=a>.9?t[2](e):a>.45?t[1](e):t[0](e)}return e})))+'">'+e+"</a>").replace(/">.+:/g,'">')})),P.subParser("escapeSpecialCharsWithinTagAttributes",(function(e){return e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=P.helper.escapeCharacters(t,"\\`*_",!1)}))})),P.subParser("githubCodeBlocks",(function(e,t,a){return t.ghCodeBlocks?(e=a.converter._dispatch("githubCodeBlocks.before",e,t,a),e=(e=(e+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,(function(e,o,n){var i=t.omitExtraWLInCodeBlocks?"":"\n";return n=P.subParser("encodeCode")(n),n="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(n=(n=(n=P.subParser("detab")(n)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+i+"</code></pre>",n=P.subParser("hashBlock")(n,t,a),"\n\n~G"+(a.ghCodeBlocks.push({text:e,codeblock:n})-1)+"G\n\n"}))).replace(/~0/,""),a.converter._dispatch("githubCodeBlocks.after",e,t,a)):e})),P.subParser("hashBlock",(function(e,t,a){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(a.gHtmlBlocks.push(e)-1)+"K\n\n"})),P.subParser("hashElement",(function(e,t,a){return function(e,t){var o=t;return o=(o=(o=o.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),o="\n\n~K"+(a.gHtmlBlocks.push(o)-1)+"K\n\n"}})),P.subParser("hashHTMLBlocks",(function(e,t,a){for(var o=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],n=function(e,t,o,n){var i=e;return-1!==o.search(/\bmarkdown\b/)&&(i=o+a.converter.makeHtml(t)+n),"\n\n~K"+(a.gHtmlBlocks.push(i)-1)+"K\n\n"},i=0;i<o.length;++i)e=P.helper.replaceRecursiveRegExp(e,n,"^(?: |\\t){0,3}<"+o[i]+"\\b[^>]*>","</"+o[i]+">","gim");return e=(e=(e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,P.subParser("hashElement")(e,t,a))).replace(/(<!--[\s\S]*?-->)/g,P.subParser("hashElement")(e,t,a))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,P.subParser("hashElement")(e,t,a))})),P.subParser("hashHTMLSpans",(function(e,t,a){for(var o=P.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),n=0;n<o.length;++n)e=e.replace(o[n][0],"~L"+(a.gHtmlSpans.push(o[n][0])-1)+"L");return e})),P.subParser("unhashHTMLSpans",(function(e,t,a){for(var o=0;o<a.gHtmlSpans.length;++o)e=e.replace("~L"+o+"L",a.gHtmlSpans[o]);return e})),P.subParser("hashPreCodeTags",(function(e,t,a){return e=P.helper.replaceRecursiveRegExp(e,(function(e,t,o,n){var i=o+P.subParser("encodeCode")(t)+n;return"\n\n~G"+(a.ghCodeBlocks.push({text:e,codeblock:i})-1)+"G\n\n"}),"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")})),P.subParser("headers",(function(e,t,a){e=a.converter._dispatch("headers.before",e,t,a);var o=t.prefixHeaderId,n=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),i=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,r=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function s(e){var t,n=e.replace(/[^\w]/g,"").toLowerCase();return a.hashLinkCounts[n]?t=n+"-"+a.hashLinkCounts[n]++:(t=n,a.hashLinkCounts[n]=1),!0===o&&(o="section"),P.helper.isString(o)?o+t:t}return e=(e=(e=e.replace(i,(function(e,o){var i=P.subParser("spanGamut")(o,t,a),r=t.noHeaderId?"":' id="'+s(o)+'"',c="<h"+n+r+">"+i+"</h"+n+">";return P.subParser("hashBlock")(c,t,a)}))).replace(r,(function(e,o){var i=P.subParser("spanGamut")(o,t,a),r=t.noHeaderId?"":' id="'+s(o)+'"',c=n+1,d="<h"+c+r+">"+i+"</h"+c+">";return P.subParser("hashBlock")(d,t,a)}))).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,(function(e,o,i){var r=P.subParser("spanGamut")(i,t,a),c=t.noHeaderId?"":' id="'+s(i)+'"',d=n-1+o.length,u="<h"+d+c+">"+r+"</h"+d+">";return P.subParser("hashBlock")(u,t,a)})),e=a.converter._dispatch("headers.after",e,t,a)})),P.subParser("images",(function(e,t,a){function o(e,t,o,n,i,r,s,c){var d=a.gUrls,u=a.gTitles,l=a.gDimensions;if(o=o.toLowerCase(),c||(c=""),""===n||null===n){if(""!==o&&null!==o||(o=t.toLowerCase().replace(/ ?\n/g," ")),n="#"+o,P.helper.isUndefined(d[o]))return e;n=d[o],P.helper.isUndefined(u[o])||(c=u[o]),P.helper.isUndefined(l[o])||(i=l[o].width,r=l[o].height)}t=t.replace(/"/g,"&quot;"),t=P.helper.escapeCharacters(t,"*_",!1);var p='<img src="'+(n=P.helper.escapeCharacters(n,"*_",!1))+'" alt="'+t+'"';return c&&(c=c.replace(/"/g,"&quot;"),p+=' title="'+(c=P.helper.escapeCharacters(c,"*_",!1))+'"'),i&&r&&(p+=' width="'+(i="*"===i?"auto":i)+'"',p+=' height="'+(r="*"===r?"auto":r)+'"'),p+=" />"}return e=(e=(e=a.converter._dispatch("images.before",e,t,a)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g,o)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o),e=a.converter._dispatch("images.after",e,t,a)})),P.subParser("italicsAndBold",(function(e,t,a){return e=a.converter._dispatch("italicsAndBold.before",e,t,a),e=t.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e=a.converter._dispatch("italicsAndBold.after",e,t,a)})),P.subParser("lists",(function(e,t,a){function o(e,o){a.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var n=/\n[ \t]*\n(?!~0)/.test(e+="~0");return e=(e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,(function(e,o,i,r,s,c,d){d=d&&""!==d.trim();var u=P.subParser("outdent")(s,t,a),l="";return c&&t.tasklists&&(l=' class="task-list-item" style="list-style-type: none;"',u=u.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return d&&(e+=" checked"),e+=">"}))),o||u.search(/\n{2,}/)>-1?(u=P.subParser("githubCodeBlocks")(u,t,a),u=P.subParser("blockGamut")(u,t,a)):(u=(u=P.subParser("lists")(u,t,a)).replace(/\n$/,""),u=n?P.subParser("paragraphs")(u,t,a):P.subParser("spanGamut")(u,t,a)),u="\n<li"+l+">"+u+"</li>\n"}))).replace(/~0/g,""),a.gListLevel--,o&&(e=e.replace(/\s+$/,"")),e}function n(e,t,a){var n="ul"===t?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,i=[],r="";if(-1!==e.search(n)){!function e(i){var s=i.search(n);-1!==s?(r+="\n\n<"+t+">"+o(i.slice(0,s),!!a)+"</"+t+">\n\n",n="ul"===(t="ul"===t?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(i.slice(s))):r+="\n\n<"+t+">"+o(i,!!a)+"</"+t+">\n\n"}(e);for(var s=0;s<i.length;++s);}else r="\n\n<"+t+">"+o(e,!!a)+"</"+t+">\n\n";return r}e=a.converter._dispatch("lists.before",e,t,a),e+="~0";var i=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return a.gListLevel?e=e.replace(i,(function(e,t,a){return n(t,a.search(/[*+-]/g)>-1?"ul":"ol",!0)})):(i=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(i,(function(e,t,a,o){return n(a,o.search(/[*+-]/g)>-1?"ul":"ol")}))),e=e.replace(/~0/,""),e=a.converter._dispatch("lists.after",e,t,a)})),P.subParser("outdent",(function(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")})),P.subParser("paragraphs",(function(e,t,a){for(var o=(e=(e=(e=a.converter._dispatch("paragraphs.before",e,t,a)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),n=[],i=o.length,r=0;r<i;r++){var s=o[r];s.search(/~(K|G)(\d+)\1/g)>=0||(s=(s=P.subParser("spanGamut")(s,t,a)).replace(/^([ \t]*)/g,"<p>"),s+="</p>"),n.push(s)}for(i=n.length,r=0;r<i;r++){for(var c="",d=n[r],u=!1;d.search(/~(K|G)(\d+)\1/)>=0;){var l=RegExp.$1,p=RegExp.$2;c=(c="K"===l?a.gHtmlBlocks[p]:u?P.subParser("encodeCode")(a.ghCodeBlocks[p].text):a.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),d=d.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(d)&&(u=!0)}n[r]=d}return e=(e=(e=n.join("\n\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),a.converter._dispatch("paragraphs.after",e,t,a)})),P.subParser("runExtension",(function(e,t,a,o){if(e.filter)t=e.filter(t,o.converter,a);else if(e.regex){var n=e.regex;!n instanceof RegExp&&(n=new RegExp(n,"g")),t=t.replace(n,e.replace)}return t})),P.subParser("spanGamut",(function(e,t,a){return e=a.converter._dispatch("spanGamut.before",e,t,a),e=P.subParser("codeSpans")(e,t,a),e=P.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,a),e=P.subParser("encodeBackslashEscapes")(e,t,a),e=P.subParser("images")(e,t,a),e=P.subParser("anchors")(e,t,a),e=P.subParser("autoLinks")(e,t,a),e=P.subParser("encodeAmpsAndAngles")(e,t,a),e=P.subParser("italicsAndBold")(e,t,a),e=(e=P.subParser("strikethrough")(e,t,a)).replace(/  +\n/g," <br />\n"),e=a.converter._dispatch("spanGamut.after",e,t,a)})),P.subParser("strikethrough",(function(e,t,a){return t.strikethrough&&(e=(e=a.converter._dispatch("strikethrough.before",e,t,a)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=a.converter._dispatch("strikethrough.after",e,t,a)),e})),P.subParser("stripBlankLines",(function(e){return e.replace(/^[ \t]+$/gm,"")})),P.subParser("stripLinkDefinitions",(function(e,t,a){return e=(e=(e+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,(function(e,o,n,i,r,s,c){return o=o.toLowerCase(),a.gUrls[o]=P.subParser("encodeAmpsAndAngles")(n),s?s+c:(c&&(a.gTitles[o]=c.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&i&&r&&(a.gDimensions[o]={width:i,height:r}),"")}))).replace(/~0/,"")})),P.subParser("tables",(function(e,t,a){if(!t.tables)return e;function o(e,o){return"<td"+o+">"+P.subParser("spanGamut")(e,t,a)+"</td>\n"}return e=(e=a.converter._dispatch("tables.before",e,t,a)).replace(/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm,(function(e){var n,i=e.split("\n");for(n=0;n<i.length;++n)/^[ \t]{0,3}\|/.test(i[n])&&(i[n]=i[n].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(i[n])&&(i[n]=i[n].replace(/\|[ \t]*$/,""));var r,s,c,d,u=i[0].split("|").map((function(e){return e.trim()})),l=i[1].split("|").map((function(e){return e.trim()})),p=[],f=[],h=[],g=[];for(i.shift(),i.shift(),n=0;n<i.length;++n)""!==i[n].trim()&&p.push(i[n].split("|").map((function(e){return e.trim()})));if(u.length<l.length)return e;for(n=0;n<l.length;++n)h.push((r=l[n],/^:[ \t]*--*$/.test(r)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(r)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(r)?' style="text-align:center;"':""));for(n=0;n<u.length;++n)P.helper.isUndefined(h[n])&&(h[n]=""),f.push((s=u[n],c=h[n],d=void 0,d="",s=s.trim(),t.tableHeaderId&&(d=' id="'+s.replace(/ /g,"_").toLowerCase()+'"'),"<th"+d+c+">"+(s=P.subParser("spanGamut")(s,t,a))+"</th>\n"));for(n=0;n<p.length;++n){for(var m=[],v=0;v<f.length;++v)P.helper.isUndefined(p[n][v]),m.push(o(p[n][v],h[v]));g.push(m)}return function(e,t){for(var a="<table>\n<thead>\n<tr>\n",o=e.length,n=0;n<o;++n)a+=e[n];for(a+="</tr>\n</thead>\n<tbody>\n",n=0;n<t.length;++n){a+="<tr>\n";for(var i=0;i<o;++i)a+=t[n][i];a+="</tr>\n"}return a+="</tbody>\n</table>\n"}(f,g)})),e=a.converter._dispatch("tables.after",e,t,a)})),P.subParser("unescapeSpecialChars",(function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var a=parseInt(t);return String.fromCharCode(a)}))})),t.exports=P})),window.define("682",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T="",I="",P={},D=e(683),x=e(684),_=(N("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),N("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),k=N("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),L=N("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");N("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),N("wxxxcode-style,script,style,view,scroll-view,block");function N(e){for(var t={},a=e.split(","),o=0;o<a.length;o++)t[a[o]]=!0;return t}function E(e){var t=[];if(0==T.length||!P)return(r={node:"text"}).text=e,o=[r];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var a=new RegExp("[:]"),o=e.split(a),n=0;n<o.length;n++){var i=o[n],r={};P[i]?(r.node="element",r.tag="emoji",r.text=P[i],r.baseSrc=I):(r.node="text",r.text=i),t.push(r)}return t}t.exports={html2json:function(e,t){e=function(e){return e.replace(/\n+/g,"").replace(/<!--.*?-->/gi,"").replace(/\/\*.*?\*\//gi,"").replace(/[ ]+</gi,"<")}(e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}(e)),e=D.strDiscode(e);var a=[],o={node:t,nodes:[],images:[],imageUrls:[]},n=0;return x(e,{start:function(e,i,r){var s,c={node:"element",tag:e};0===a.length?(c.index=n.toString(),n+=1):(void 0===(s=a[0]).nodes&&(s.nodes=[]),c.index=s.index+"."+s.nodes.length);if(_[e]?c.tagType="block":k[e]?c.tagType="inline":L[e]&&(c.tagType="closeSelf"),0!==i.length&&(c.attr=i.reduce((function(e,t){var a=t.name,o=t.value;return"class"==a&&(console.dir(o),c.classStr=o),"style"==a&&(console.dir(o),c.styleStr=o),o.match(/ /)&&(o=o.split(" ")),e[a]?Array.isArray(e[a])?e[a].push(o):e[a]=[e[a],o]:e[a]=o,e}),{})),"img"===c.tag){c.imgIndex=o.images.length;var d=c.attr.src;""==d[0]&&d.splice(0,1),d=D.urlToHttpUrl(d,"https"),c.attr.src=d,c.from=t,o.images.push(c),o.imageUrls.push(d)}if("font"===c.tag){var u=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],l={color:"color",face:"font-family",size:"font-size"};for(var p in c.attr.style||(c.attr.style=[]),c.styleStr||(c.styleStr=""),l)if(c.attr[p]){var f="size"===p?u[c.attr[p]-1]:c.attr[p];c.attr.style.push(l[p]),c.attr.style.push(f),c.styleStr+=l[p]+": "+f+";"}}("source"===c.tag&&(o.source=c.attr.src),r)?(void 0===(s=a[0]||o).nodes&&(s.nodes=[]),s.nodes.push(c)):a.unshift(c)},end:function(e){var t=a.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&o.source&&(t.attr.src=o.source,delete result.source),0===a.length)o.nodes.push(t);else{var n=a[0];void 0===n.nodes&&(n.nodes=[]),n.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:E(e)};if(0===a.length)o.nodes.push(t);else{var n=a[0];void 0===n.nodes&&(n.nodes=[]),t.index=n.index+"."+n.nodes.length,n.nodes.push(t)}},comment:function(e){}}),o},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",a=arguments[2];T=e,I=t,P=a}}})),window.define("683",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={strDiscode:function(e){return e=function(e){return e=(e=(e=e.replace(/\r\n/g,"")).replace(/\n/g,"")).replace(/code/g,"wxxxcode-style")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&OElig;/g,"Œ")).replace(/&oelig;/g,"œ")).replace(/&Scaron;/g,"Š")).replace(/&scaron;/g,"š")).replace(/&Yuml;/g,"Ÿ")).replace(/&fnof;/g,"ƒ")).replace(/&circ;/g,"ˆ")).replace(/&tilde;/g,"˜")).replace(/&ensp;/g,"")).replace(/&emsp;/g,"")).replace(/&thinsp;/g,"")).replace(/&zwnj;/g,"")).replace(/&zwj;/g,"")).replace(/&lrm;/g,"")).replace(/&rlm;/g,"")).replace(/&ndash;/g,"–")).replace(/&mdash;/g,"—")).replace(/&lsquo;/g,"‘")).replace(/&rsquo;/g,"’")).replace(/&sbquo;/g,"‚")).replace(/&ldquo;/g,"“")).replace(/&rdquo;/g,"”")).replace(/&bdquo;/g,"„")).replace(/&dagger;/g,"†")).replace(/&Dagger;/g,"‡")).replace(/&bull;/g,"•")).replace(/&hellip;/g,"…")).replace(/&permil;/g,"‰")).replace(/&prime;/g,"′")).replace(/&Prime;/g,"″")).replace(/&lsaquo;/g,"‹")).replace(/&rsaquo;/g,"›")).replace(/&oline;/g,"‾")).replace(/&euro;/g,"€")).replace(/&trade;/g,"™")).replace(/&larr;/g,"←")).replace(/&uarr;/g,"↑")).replace(/&rarr;/g,"→")).replace(/&darr;/g,"↓")).replace(/&harr;/g,"↔")).replace(/&crarr;/g,"↵")).replace(/&lceil;/g,"⌈")).replace(/&rceil;/g,"⌉")).replace(/&lfloor;/g,"⌊")).replace(/&rfloor;/g,"⌋")).replace(/&loz;/g,"◊")).replace(/&spades;/g,"♠")).replace(/&clubs;/g,"♣")).replace(/&hearts;/g,"♥")).replace(/&diams;/g,"♦")).replace(/&#39;/g,"'")}(e=function(e){return e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/g," ")).replace(/&quot;/g,"'")).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#8226;/g,"•")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&Alpha;/g,"Α")).replace(/&Beta;/g,"Β")).replace(/&Gamma;/g,"Γ")).replace(/&Delta;/g,"Δ")).replace(/&Epsilon;/g,"Ε")).replace(/&Zeta;/g,"Ζ")).replace(/&Eta;/g,"Η")).replace(/&Theta;/g,"Θ")).replace(/&Iota;/g,"Ι")).replace(/&Kappa;/g,"Κ")).replace(/&Lambda;/g,"Λ")).replace(/&Mu;/g,"Μ")).replace(/&Nu;/g,"Ν")).replace(/&Xi;/g,"Ν")).replace(/&Omicron;/g,"Ο")).replace(/&Pi;/g,"Π")).replace(/&Rho;/g,"Ρ")).replace(/&Sigma;/g,"Σ")).replace(/&Tau;/g,"Τ")).replace(/&Upsilon;/g,"Υ")).replace(/&Phi;/g,"Φ")).replace(/&Chi;/g,"Χ")).replace(/&Psi;/g,"Ψ")).replace(/&Omega;/g,"Ω")).replace(/&alpha;/g,"α")).replace(/&beta;/g,"β")).replace(/&gamma;/g,"γ")).replace(/&delta;/g,"δ")).replace(/&epsilon;/g,"ε")).replace(/&zeta;/g,"ζ")).replace(/&eta;/g,"η")).replace(/&theta;/g,"θ")).replace(/&iota;/g,"ι")).replace(/&kappa;/g,"κ")).replace(/&lambda;/g,"λ")).replace(/&mu;/g,"μ")).replace(/&nu;/g,"ν")).replace(/&xi;/g,"ξ")).replace(/&omicron;/g,"ο")).replace(/&pi;/g,"π")).replace(/&rho;/g,"ρ")).replace(/&sigmaf;/g,"ς")).replace(/&sigma;/g,"σ")).replace(/&tau;/g,"τ")).replace(/&upsilon;/g,"υ")).replace(/&phi;/g,"φ")).replace(/&chi;/g,"χ")).replace(/&psi;/g,"ψ")).replace(/&omega;/g,"ω")).replace(/&thetasym;/g,"ϑ")).replace(/&upsih;/g,"ϒ")).replace(/&piv;/g,"ϖ")).replace(/&middot;/g,"·")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&forall;/g,"∀")).replace(/&part;/g,"∂")).replace(/&exists;/g,"∃")).replace(/&empty;/g,"∅")).replace(/&nabla;/g,"∇")).replace(/&isin;/g,"∈")).replace(/&notin;/g,"∉")).replace(/&ni;/g,"∋")).replace(/&prod;/g,"∏")).replace(/&sum;/g,"∑")).replace(/&minus;/g,"−")).replace(/&lowast;/g,"∗")).replace(/&radic;/g,"√")).replace(/&prop;/g,"∝")).replace(/&infin;/g,"∞")).replace(/&ang;/g,"∠")).replace(/&and;/g,"∧")).replace(/&or;/g,"∨")).replace(/&cap;/g,"∩")).replace(/&cap;/g,"∪")).replace(/&int;/g,"∫")).replace(/&there4;/g,"∴")).replace(/&sim;/g,"∼")).replace(/&cong;/g,"≅")).replace(/&asymp;/g,"≈")).replace(/&ne;/g,"≠")).replace(/&le;/g,"≤")).replace(/&ge;/g,"≥")).replace(/&sub;/g,"⊂")).replace(/&sup;/g,"⊃")).replace(/&nsub;/g,"⊄")).replace(/&sube;/g,"⊆")).replace(/&supe;/g,"⊇")).replace(/&oplus;/g,"⊕")).replace(/&otimes;/g,"⊗")).replace(/&perp;/g,"⊥")).replace(/&sdot;/g,"⋅")}(e)))))},urlToHttpUrl:function(e,t){return new RegExp("^//").test(e)&&(e=t+":"+e),e}}})),window.define("684",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,I=/^<\/([-A-Za-z0-9_]+)[^>]*>/,P=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,D=E("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),x=E("a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),_=E("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),k=E("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),L=E("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),N=E("wxxxcode-style,script,style,view,scroll-view,block");function E(e){for(var t={},a=e.split(","),o=0;o<a.length;o++)t[a[o]]=!0;return t}t.exports=function(e,t){var a,o,n,i=[],r=e;for(i.last=function(){return this[this.length-1]};e;){if(o=!0,i.last()&&N[i.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+i.last()+"[^>]*>"),(function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a),""})),d("",i.last());else if(0==e.indexOf("\x3c!--")?(a=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),o=!1):0==e.indexOf("</")?(n=e.match(I))&&(e=e.substring(n[0].length),n[0].replace(I,d),o=!1):0==e.indexOf("<")&&(n=e.match(T))&&(e=e.substring(n[0].length),n[0].replace(T,c),o=!1),o){a=e.indexOf("<");for(var s="";0===a;)s+="<",a=(e=e.substring(1)).indexOf("<");s+=a<0?e:e.substring(0,a),e=a<0?"":e.substring(a),t.chars&&t.chars(s)}if(e==r)throw"Parse Error: "+e;r=e}function c(e,a,o,n){if(a=a.toLowerCase(),x[a])for(;i.last()&&_[i.last()];)d("",i.last());if(k[a]&&i.last()==a&&d("",a),(n=D[a]||!!n)||i.push(a),t.start){var r=[];o.replace(P,(function(e,t){var a=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:L[t]?t:"";r.push({name:t,value:a,escaped:a.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(a,r,n)}}function d(e,a){if(a){a=a.toLowerCase();for(o=i.length-1;o>=0&&i[o]!=a;o--);}else var o=0;if(o>=0){for(var n=i.length-1;n>=o;n--)t.end&&t.end(i[n]);i.length=o}}d()}})),window.define("685",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=x(e(387)),I=x(e(36)),P=x(e(8)),D=e(23);function x(e){return e&&e.__esModule?e:{default:e}}var _=e(9),k=e(474),L=k.prefixPartNumber,N=k.getProps,E=(0,I.default)(n.request),O={productUrl:{sit:"https://productsit.suning.com/",pre:"https://productpre.cnsuning.com/",prod:"https://product.suning.com/",xgpre:"https://productxgpre.suning.com/"}[_],yunxinUrl:{pre:"https://yxwappre.cnsuning.com/#/",prod:"https://yxwap.suning.com/#/"}[_],channelId:{JW:{pre:"58752",prod:"471422"}[_],LYTM:{pre:"3139",prod:"14266"}[_],HwgZy:{pre:"300112",prod:"80366"}[_]}},A={toContactService:function(e){var t=this.data,a=N(e,"currentTarget","dataset","tag"),o=t.fourth;console.log(o,"fffff");var i=t.position||{},r="",s=getCurrentPages()[getCurrentPages().length-1],c="/"+s.__route__+"?"+s.fourth.initParm,d="",u="",l="",p=o.shopParam;o.isLYTM?(r="sntm",d=O.channelId.LYTM,u="2001",l="0001030501000000",p=o.priceVendor):o.isHwgZy?(r="hwg",d=O.channelId.HwgZy,u="2002",l="0001030701000000"):o.isCShop?(r="dp",o.panSelf&&"0"===o.factorySendFlag&&(r=""),l="0001030201000000"):l=o.shopBrandcode&&~o.shopBrandcode.indexOf("003")?"0001030801000000":"0001030101000000",o.iscarrefourPage&&(l="0001030D01000000"),o.spsFlag&&(l="0001040A01000000"),o.spsYBMY&&(l="0001040101000000"),o.isSNHL&&(l="0001030B01000000");var f={productPosition:"SNYG",businessCode:r,terminalType:4,pageSource:"01",enterCode:void 0!==a?"02":"01",prodUrl:t.bigPage.imgUrls.length>0?t.bigPage.imgUrls[0].bigUrl:"",prodImgUrl:t.bigPage.imgUrls.length>0?t.bigPage.imgUrls[0].bigUrl:"",prodName:t.price.name,prodPrice:t.price.promotionPrice,prdWebUrl:""+O.productUrl+o.shopParam+"/"+o.partNumber+".html",bizCode:l,bizSeq:"0001",cityCode:i.cityLESId,prodNo:L(o.partNumber),shopCode:p,groupMember:o.priceVendor||"",distCode:i.districtLESId,sourceURL:""+O.productUrl+o.shopParam+"/"+o.partNumber+".html",classCode:N(t.result,"data","data","data1","data","itemInfoVo","categoryCode")||"",brandId:o.brandId||"",groupId:N(t.result,"data","data","data1","data","groupInfoVO","categoryId")||""};o.iscarrefourPage&&(f.carrefourType=1,f.storeId=N(o,"storeData","storeCode"),f.shopId=N(o,"storeData","merchantCode")),o.isPlatformPage&&(f.storeCode=o.storeCode);var h={};o.isCShop||o.isCShop&&o.isHwg||o.panSelf&&!o.isHwg&&!o.isLYTM?o.isCShop||o.isCShop&&o.isHwg?(console.log("C店商品（包括海外购C店）"),o.panSelf&&"0"===o.factorySendFlag?(console.log("联营非厂送"),h=Object.assign({},f,{biz:"4000010101",channelId:"",prodNo:L(o.partNumber),groupMember:o.priceVendor,prdurl:c})):h=Object.assign({},f,{biz:"400010201",sc:o.shopParam,prodNo:L(o.partNumber),prdurl:c})):(console.log("普通自营商品"),h=Object.assign({},f,{biz:"4000010101",channelId:"",selfShopCode:t.result.data.data.data1.data.brandCode,prodNo:L(o.partNumber),brandId:o.brandId,groupId:N(t.result,"data","data","data1","data","groupInfoVO","categoryId")||"",groupMember:o.priceVendor,classCode:N(t.result,"data","data","data1","data","itemInfoVo","categoryCode")||"",prdurl:c})):h=Object.assign({},f,{channelId:d,biz:u});var g=Object.keys(h).map((function(e){return e+"="+h[e]})).join("&");console.info(h,"客服入参"),console.log(g);var m="https://yxwap.suning.com/#/?"+encodeURIComponent(g);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(m)+"&notNeedLogin=true"})},toContactService1:function(e){var t=this.data,a=e.currentTarget.dataset.tag,o=t.fourth,i="",r=getCurrentPages()[getCurrentPages().length-1],s="/"+r.route+"?"+r.fourth.initParm,c="",d="";o.isLYTM?(i="sntm",c=O.channelId.LYTM,d="2001"):o.isHwgZy?(i="hwg",c=O.channelId.HwgZy,d="2002"):o.isCShop&&(i="dp",o.panSelf&&"0"===o.factorySendFlag&&(i=""));var u={productPosition:"SNYG",businessCode:i,terminalType:4,pageSource:"01",enterCode:void 0!==a?"02":"01",prodUrl:t.bigPage.imgUrls.length>0?t.bigPage.imgUrls[0].bigUrl:"",prodName:t.price.name,prodPrice:t.price.promotionPrice,prdWebUrl:""+O.productUrl+o.shopParam+"/"+o.partNumber+".html"},l={};o.isCShop||o.isCShop&&o.isHwg||o.panSelf&&!o.isHwg&&!o.isLYTM?o.isCShop||o.isCShop&&o.isHwg?(console.log("C店商品（包括海外购C店）"),o.panSelf&&"0"===o.factorySendFlag?(console.log("联营非厂送"),l=Object.assign({},u,{biz:"4000010101",channelId:"",prodNo:L(o.partNumber),brandId:o.brandId,groupId:t.result.data.data.threeCategoryId,groupMember:o.priceVendor,classCode:t.result.data.data.data1.data.itemInfoVo.categoryCode,prdurl:s})):l=Object.assign({},u,{biz:"400010201",sc:o.shopParam,prodNo:L(o.partNumber),prdurl:s})):(console.log("普通自营商品"),l=Object.assign({},u,{biz:"4000010101",channelId:"",selfShopCode:t.result.data.data.data1.data.brandCode,prodNo:L(o.partNumber),brandId:o.brandId,groupId:t.result.data.data.threeCategoryId,groupMember:o.priceVendor,classCode:t.result.data.data.data1.data.itemInfoVo.categoryCode,prdurl:s})):l=Object.assign({},u,{channelId:c,biz:d});var p=Object.keys(l).map((function(e){return e+"="+l[e]})).join("&");console.log(l),n.navigateTo({url:"/packageB/pages/yunxin/chat/chat?"+p}),console.log(t)},getIfInGray:function(){var e,t=(e=T.default.mark((function e(t){var a,o,i;return T.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,o=P.default.product+"/pds-web/ajax/getXcxGaryListRsfData_"+n.getStorageSync("custNo")+"_.html",e.next=4,E({url:o});case 4:i=e.sent,"wx"==(0,D.getPlatformType)()?i&&i.data&&"boolean"==typeof i.data?a.setData({isgray:i.data}):a.setData({isgray:!1}):"swan"==(0,D.getPlatformType)()&&(i&&i.data&&"boolean"==typeof i.data?a.setData({isgray:i.data}):i&&i.data&&"string"==typeof i.data&&"true"==i.data?a.setData({isgray:!0}):a.setData({isgray:!1}));case 6:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))});return function(e){return t.apply(this,arguments)}}()};a.default={action:A,extendData:{isgray:!1}}})),window.define("686",(function(e,t,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var I=e(25);function P(e,t){var o=(new Date).getTime(),n=e-o;return t(e),a((function(){o+=1e3;var e=(new Date).getTime()-o;Math.abs(e)>3e3&&(o+=e),t(o+n)}),1e3)}function D(e){var t=(e/=1e3)%60|0,a=e/60%60|0,o=e/3600%24|0,n=e/86400|0;return{dd:n=n<10?"0"+n:n,hh:o=o<10?"0"+o:o,mm:a=a<10?"0"+a:a,ss:t=t<10?"0"+t:t}}function x(e){return e?(-1===e.indexOf("http")&&(e="https:"+e),-1===e.indexOf("https")&&(e=e.replace("http","https")),e):""}o.default={bigPoly:function(e,t,a){var o=e.fourth,n=void 0;try{n=t.bigPolyInfo.bigPolyPreResponseDTO.commList[0]||{}}catch(e){return}var i=n.serviceType,r=void 0,s=!1,c=!1;if(1==i||14==i||12==i||10==i||9==i||2==i){10==i&&(c=!0),1!=i&&14!=i&&12!=i||(s=!0);return clearInterval(o.activityTimer),o.activityTimer=P(a,(function(t){var a=void 0;t<n.gbBeginDate?((a=D(n.gbBeginDate-t)).stage=0,a.text="距开始",a.actionBtn="活动未开始"):t<n.gbEndDate?((a=D(n.gbEndDate-t)).stage=1,a.text="距结束"):n.gbEndDate&&n.gbQuietDate&&n.gbEndDate<=n.gbQuietDate?((a={}).stage=3,a.text="距结束",a.actionBtn="活动已结束",clearInterval(void 0)):((a={dd:"00",hh:"00",mm:"00",ss:"00"}).stage=2,a.text="距结束",a.actionBtn="活动已结束",clearInterval(void 0)),r?e.setData({"activity.status":a}):r=a})),console.info(e.data.result),{buyCounter:t.juBuyCount,bigPoly:i,progressBar:t.progressBar,progressNum:e.data.result.data.data.propressNum,limitBuyNum:n.limitBuyNum,activityPrice:n.gbPrice,activityId:n.activityId,hidePrice:s,hasActivity:!0,status:r,ready:!0,hideCart:c}}},book:function(e,t,a,o){var n=e.fourth,i=t.bookInfoDetail,r=void 0,s=o.currentPrice;if(!(i.depositEndTime&&a>i.depositEndTime)){var c=void 0;if(i.balanceStartTime&&i.balanceEndTime){var d=new Date(Number(i.balanceStartTime)),u=new Date(Number(i.balanceEndTime));c="("+(0,I.formatDate)(d,"MM月dd日hh:mm")+"-"+(0,I.formatDate)(u,"MM月dd日hh:mm")+")"}var l=s.bookPrice||"",p=s.finalPayment||"";l.indexOf("-")>-1&&(l=l.split("-")[0]+"起"),p.indexOf("-")>-1&&(p=p.split("-")[0]+"起");var f={title1:s.bookPrice?""+l:null,info1:s.bookPriceSwell?"可抵扣"+s.bookPriceSwell+"元":null,final1:s.finalPayment?p.substr(0,p.indexOf(".")):null,final2:s.finalPayment?p.substr(p.indexOf(".")):null,price1:s.promotionPrice?s.promotionPrice.substr(0,s.promotionPrice.indexOf(".")):null,price2:s.promotionPrice?s.promotionPrice.substr(s.promotionPrice.indexOf(".")):null,info2:c,info3:i.sendTime?(0,I.formatDate)(new Date(Number(i.sendTime)),"MM月dd日"):"",balanceStartTime:i.balanceStartTime,balanceEndTime:i.balanceEndTime};return clearInterval(n.activityTimer),n.activityTimer=P(a,(function(t){var a=void 0,o=!1;if(t<i.depositStartTime?((a=D(i.depositStartTime-t)).stage=0,a.text="距付定金开始",a.actionBtn="等待预定"):t<i.depositEndTime?((a=D(i.depositEndTime-t)).stage=1,a.text="距付定金结束"):((a={dd:"0",hh:"00",mm:"00",ss:"00"}).stage=1,a.text="距付定金结束",o=!0,clearInterval(void 0)),1===a.stage)if(!0===o)a.actionBtn="已结束";else if(0===i.bookRemain)a.actionBtn="已定完";else if(1===i.bookRemain&&i.unPayedNum>0)a.actionBtn="还有机会";else{var n=(0,I.formatDate)(new Date(Number(i.depositEndTime)),"MM月dd日"),s=(0,I.formatDate)(new Date(Number(i.depositEndTime)),"hh:mm");e.setData({"activity.djBtnTimet":n,"activity.djBtnTimeb":s}),a.bookBtn="支付定金"}r?e.setData({"activity.status":a}):r=a})),{book:!0,counter:i.totalBookedCount,limitBuyNum:i.personBuyLimit,activityId:i.bookActionId,hidePrice:!0,hasActivity:!0,status:r,ready:!0,hideCart:!1,stageInfo:f}}},order:function(e,t,a,o){var n=e.fourth,i=t.subscribeDetail,r=void 0,s=(o.currentPrice,"10"===o.status);if(!(i.depositEndTime&&a>i.depositEndTime)){var c={},d=i.phonePurchaseStartTime||i.purStartTime;if(d||i.purEndTime||i.scheduleStartTime){var u=new Date(Number(d)),l=new Date(Number(i.purEndTime)),p=new Date(Number(i.scheduleStartTime));d&&i.purEndTime&&(c.info2=(0,I.formatDate)(u,"MM.dd hh:mm")+"-"+(0,I.formatDate)(l,"MM.dd hh:mm")),c.start=(0,I.formatDate)(p,"MM.dd hh:mm")}var f=void 0;return t.isEffect?e.fourth.published?"0"==e.fourth.hasStorage&&(f="本地区暂不支持预约"):f="很抱歉，此商品已下架":f="很抱歉，本地区暂不支持预约活动",clearInterval(n.activityTimer),n.activityTimer=P(a,(function(a){var o=void 0;a<i.scheduleStartTime?((o=D(i.scheduleStartTime-a)).stage=0,o.text="距预约开始",o.actionBtn="等待预约",t.isEffect?"2"===e.fourth.hasStorage?o.orderBtn="等待预约":e.fourth.isShort?(o.actionBtn="等待预约",o.orderNotify=!0):o.orderBtn="等待预约":(o.actionBtn="等待预约",o.orderNotify=!0)):a<i.scheduleEndTime?((o=D(i.scheduleEndTime-a)).stage=1,o.text="距预约结束",t.isEffect?"2"===e.fourth.hasStorage?o.orderBtn="立即预约":e.fourth.isShort?(o.actionBtn="暂不销售",o.orderNotify=!0):o.orderBtn="立即预约":(o.actionBtn="暂不销售",o.orderNotify=!0)):a<d?((o=D(d-a)).stage=2,o.text="距抢购开始",t.isEffect&&("2"===e.fourth.hasStorage||t.isEffect&&!e.fourth.isShort)?o.actionBtn="等待抢购":(o.actionBtn="暂不销售",o.orderNotify=!0)):a<i.purEndTime?((o=D(i.purEndTime-a)).stage=3,o.text="距抢购结束",t.isEffect?s||"2"===e.fourth.hasStorage?o.actionBtn="已抢完":e.fourth.isShort?(o.actionBtn="暂不销售",o.orderNotify=!0):o.orderBuyBtn="立即抢购":(o.actionBtn="暂不销售",o.orderNotify=!0)):((o={dd:"0",hh:"00",mm:"00",ss:"00"}).stage=4,o.text="距抢购结束",o.actionBtn="已抢完",clearInterval(void 0)),r?e.setData({"activity.status":o}):r=o})),{hidePrice:!0,order:!0,counter:i.appiontCount,limitBuyNum:i.personBuysLimit,activityId:i.actionId,hasActivity:!0,status:r,ready:!0,hideCart:!1,stageInfo:c,orderNotifyMsg:f}}},dcPromotion:function(e,t,a){var o=void 0,n=void 0,i=void 0,r=void 0,s=void 0,c=void 0,d=void 0,u=void 0,l=void 0,p=e.fourth,f=a.data.data.bigPoly,h=a.data.data.price;if(f&&f.bigPolyInfo&&f.bigPolyInfo.bigPolyPreResponseDTO&&f.bigPolyInfo.bigPolyPreResponseDTO.commList.length&&f.bigPolyInfo.bigPolyPreResponseDTO.commList[0].promotionPrice){var g=f.bigPolyInfo.bigPolyPreResponseDTO.commList[0].promotionPrice;o=x(g.atmospherePic),n=x(g.activityAtmosphereLogo),c=x(g.activityFLPPicLabel),i=g.activityLabel}if(h&&h.saleInfo.length&&a.currentPrice&&(r=h.saleInfo[0].bigPromoTextPrice,s=h.saleInfo[0].bigPromoPrice,Number(a.currentPrice.promotionPrice)<Number(h.saleInfo[0].bigPromoPrice)&&(l=!0)),f&&f.bigPolyInfo&&f.bigPolyInfo.bigPolyPreResponseDTO&&f.bigPolyInfo.bigPolyPreResponseDTO.commList.length&&(d=f.bigPolyInfo.bigPolyPreResponseDTO.commList[0]),d&&d.gbBeginDate){var m=+d.gbBeginDate,v=new Date(m);u=v.getMonth()+1+"月"+v.getDate()+"日"}return clearInterval(p.activityTimer),p.activityTimer=P(t,(function(t){if(d&&t){var a=void 0,o=Number(d.gbBeginDate)-Number(t);o>=0&&o<=1e3?((a={dd:"0",hh:"00",mm:"00",ss:"00"}).text="距开始",clearInterval(p.activityTimer)):t<d.gbBeginDate?(a=D(d.gbBeginDate-t)).text="距开始":t<d.gbEndDate?(a=D(d.gbEndDate-t)).text="距结束":((a={dd:"0",hh:"00",mm:"00",ss:"00"}).text="距结束",clearInterval(p.activityTimer)),a&&e.setData({"activity.status":a})}})),{hidePrice:!0,dcBackground:o,dcLogo:n,activityLabel:i,bigPromoTextPrice:r,bigPromoPrice:s,dcLabelPic:c,dcBannerTextTime:u,PriceInversion:l,ready:!0}},cxPromotion:function(e,t,a){var o=void 0;return t&&t.bigPolyInfo&&t.bigPolyInfo.bigPolyPreResponseDTO&&t.bigPolyInfo.bigPolyPreResponseDTO.commList.length&&(o=t.bigPolyInfo.bigPolyPreResponseDTO.commList[0].activeTag),{ready:!0,cxText:o}},computePicHead:x,slicePrice:function(e){return e&&e.constructor===String&&-1!==e.indexOf("-")&&e.length>5?e.split("-")[0]+"起":e}}})),window.define("687",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=e(667);function I(e,t){var a={};return"8"===e.fourth.activityType||"13"===e.fourth.activityType||e.fourth.isCShop?(a.bs="1"===t.priceResult.data.data.hwgIsBs,a.desc=t.priceResult.data.data.hwgTax,a.msg=t.priceResult.data.data.hwgMsg||""):"1"===t.data.data.hwgIsBs?(a.bs=!0,a.desc=t.data.data.hwgTax,a.msg=t.data.data.hwgMsg):(a.bs=!1,a.desc=t.priceResult.data.data.hwgTax,a.msg=t.priceResult.data.data.hwgMsg),a.msgList=a.msg?a.msg.split("\n"):[],a}a.default={parseOverseaDetail:function(e,t){var a=t.data.data.itemShopInfo||{},o={show:!1};return o.img=a.imgUrl,a.itemSource&&(o.show=!0,o.countryStr=a.itemSource+"品牌"),e.fourth.isHwgLocal&&(o.show=!0),e.fourth.hwgType===T.HwgType.Donded?o.sendCity=(t.priceResult.data.data.prescription.sendCityName||"保税区")+"发货":e.fourth.hwgType===T.HwgType.Abroad?o.sendCity="海外直邮":e.fourth.hwgType===T.HwgType.BcAbroad?o.sendCity=(t.priceResult.data.data.prescription.sendCityName||"海外")+"直邮":e.fourth.hwgType===T.HwgType.Inter&&(o.sendCity=""),{hwglc:t.priceResult.data.data.hwglc||(t.priceResult.data.data.freightObj||{}).hwglc,country:o,tax:I(e,t)}},faq:function(e){var t=[{title:"苏宁国际官方直营和入驻商家销售的海外商品是如何保证商品品质的？",content:"苏宁国际的商品分为苏宁国际官方直营商品和入驻商户商品两类：（1）苏宁国际官方直营商品由苏宁海外公司专业采购团队从海外采购并向您销售，苏宁海外公司已分别在韩国、美国、日本、香港等地设有采购团队，为您甄选全球好货；（2）苏宁国际平台入驻的商户保证100%官方海外认证海外公司，确保销售资质，通过专业的海外采购公司进行商品采购并向您销售，绝无个人代购行为。苏宁国际与海关跨境电子商务通关管理平台对接，严格遵守跨境电子商务监管政策，保证海外原装正品！所有商品均从大陆以外的国家或地区通过国际物流发出，或从国内保税区发出，请您放心购买。"},{title:"为什么有的商品从国内保税仓发货，有的从海外仓发货？",content:"保税区发货：保税区发货是跨境电商企业与政府部门合作的新一代海淘模式，跨境电商企业从海外直接采购商品，在海关的监控下，批量运入保税区并储存在保税区仓库100%正品保障。用户完成下单后，商品直接从国内保税区仓库用国内快递寄出。保税区发货，让您享受更优惠的商品价格，同时享受到国内的物流时效体验。海外仓发货：为保证用户能在苏宁国际买到理想、优质的海外商品，苏宁国际直接与海外品牌方或其授权的经销商合作，在海外仓直接发货，送至用户手中，从而避免了源头不清和中间环节转手。苏宁国际精选海外优质品牌，所有商品均由拥有海外经营资质的商家认证的商家提供，100%正品保证"},{title:"跨境电商零售进口商品如何征税？",content:"根据财政部、海关总署和国家税务总局联合发布的《关于跨境电子商务零售进口税收政策的通知》及《关于完善跨境电子商务零售进口税收政策的通知》，跨境电子商务零售进口商品按照货物征收关税和进口环节增值税、消费税，实际交易价格（包括货物零售价格、运费和保险费）作为完税价格，消费者个人为纳税义务人。 跨境电子商务零售进口商品的单次交易限值为人民币5000元，个人年度交易限值为人民币26000元。在限值以内进口的跨境电子商务零售进口商品，关税税率暂设为0%；进口环节增值税、消费税取消免征税额，暂按法定应纳税额的70%征收。超过单次限值、累加后超过个人年度限值的单次交易，以及完税价格超过5000元限值的单个不可分割商品，均按照一般贸易方式全额征税。"},{title:"为什么要提供身份证信息？",content:"根据《关于跨境电子商务零售进口税收政策的通知》，跨境电子商务零售进口商品购买人（订购人）的身份信息应进行认证；未进行认证的，购买人（订购人）身份信息应与付款人一致。"},{title:"下单支付后能否修改订单信息？",content:"订单提交成功并完成支付后，订单将提交至海关进行申报，不支持修改订单信息（收货地址、电话等），您可在订单发货前（清关状态之前）取消订单重新购买并填写正确的订单信息。请知晓并谅解，如有疑问请及时联系在线客服"},{title:"为什么苏宁国际跨境海外商品没有发票？",content:"苏宁国际跨境海外商品由海外商家从中国关境外向您销售，无法为您开具国内发票，请您谅解！如有疑问，请联系我们的在线客服。"},{title:"30天无忧退产生的相关费用由谁承担？",content:"购买苏宁国际官方直营商品的，如因用户个人原因导致商品退货（商品需保证未拆封、未使用且无人为损坏）或者拒签，往返运费由用户个人承担，已缴纳的相关税费由苏宁国际承担。如有疑问可直接咨询在线客服。无忧退货的期限，从您收到苏宁国际官方直营的商品之日起算。"}],a=["1.您在本（公司）网站上购买的境外商品，仅限个人自用不得进行再销售。商品本身可能无中文标签，您可以查看网站的翻译或者在线联系我们的客服。","2.您购买的境外商品适用的品质、健康、标识等项目使用标准均按照原产国使用标准（比如本站所销售的欧洲奶粉为欧洲标准，所售美国奶粉为美国标准，所售澳洲奶粉则为澳洲标准），可能与我国标准有所不同，所以在使用过程中产生的危害或损失以及其他风险，将由您个人承担。","3.您在本（公司）网站上购买保税仓发货的境外商品时，自动视为苏宁官方代您向海关进行申报和代缴税款。","4.国际自营商品的经营主体为依照海外法律在海外设立的苏宁关联公司。"];return e.overseasFAQ02&&e.overseasFAQ02.resultDtoList&&e.overseasFAQ02.resultDtoList[0]&&e.overseasFAQ02.resultDtoList[0].list&&e.overseasFAQ02.resultDtoList[0].list.length&&(t=e.overseasFAQ02.resultDtoList[0].list.map((function(e){return{title:e.question,content:e.answer.replace(/&lt;.*?&gt;/g,"")}}))),e.overseasFAQ05&&e.overseasFAQ05.resultDtoList&&e.overseasFAQ05.resultDtoList[0]&&e.overseasFAQ05.resultDtoList[0].noticeUrl&&(a=e.overseasFAQ05.resultDtoList[0].noticeUrl.split(/&lt;.*?&gt;/).filter((function(e){return e.trim().length}))),{list:t,tips:a,promise:[{image:"https://product.m.suning.com/pds-web/project/pds/wapV3/images/oversea-service-flash.png",msg:"闪电发货"},{image:"https://product.m.suning.com/pds-web/project/pds/wapV3/images/oversea-service-direct.png",msg:"海外直采"}]}}}})),window.define("688",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={parseVip:function(e,t){return{vipPrice:t.priceResult.currentPrice.marketVipPrice||t.priceResult.currentPrice.vipPrice,vipInfo:t.data.data.dealMsg[0].accountSuperM,marketVipPriceType:t.priceResult.currentPrice.marketVipPriceType,isVip:e.fourth.isVip}}}})),window.define("689",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={initLimitTime:function(e,t){if(t){var a=t.data.data;a.jgObj&&a.jgObj.activityList.length?e.fourth.jgObjData=a.jgObj.activityList[0]:e.fourth.jgObjData=null}}}})),window.define("690",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={parsePopLabel:function(e){var t=e.data.data.popLabel;if(t&&t.length){var a=[];return t.forEach((function(e){"01"===e.labelScene&&e.labelList&&e.labelList.length&&(a=e.labelList.map((function(e){return{place:e.labelPlace,url:e.labelPath.replace("http://","https://")}})))})),{bztList:a}}return{}}}})),window.define("691",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.oldForNewData=function(e,t){if(t&&t[0]&&t[0].oldForNewUrl){var a=t[0].oldForNewUrl.split(":");"http"===a[0]&&(t[0].oldForNewUrl=a[0]+"s:"+a[1]),t[0].h5Url="",t[0].oldForNew&&t[0].oldForNewDesc?t[0].isForNew=1:t[0].isForNew=0,e.setData({oldForNewMsg:t[0]})}}})),window.define("692",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=_(e(668)),I=_(e(676)),P=_(e(666)),D=_(e(135)),x=e(25);function _(e){return e&&e.__esModule?e:{default:e}}var k=e(77).saSendLog;var L={discPackageClick:function(){k("click",{event:{target:{dataset:{pageid:140,modid:15,eleid:"140000370"}}}}),this.setData({"fourth.coverShow":!0,"discPackage.show":!0}),this.hideCoverHandle=function(){this.setData({"discPackage.show":!1})}},subTagget:function(e){for(var t=e.currentTarget.dataset.parentindex,a=0;a<this.data.discPackage.list.length;a++)a===t?this.data.discPackage.list[t].iscurrent=!this.data.discPackage.list[t].iscurrent:this.data.discPackage.list[a].iscurrent=!1;this.setData({"discPackage.list":this.data.discPackage.list})},discPackageAddCart:function(e){var t=this,a=e.currentTarget.dataset.partnumber,o=e.currentTarget.dataset.index;try{(0,x.checkLogin)().then((function(){var e=void 0;!function n(i){var r=3,s={cartHeadInfo:i,partNumber:a,index:o};T.default.discPackageAddCart(t,s).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r=4,!a.data||!a.data.cartHeadInfo||"Y"!==a.data.cartHeadInfo.isSuccess){if(a.data&&a.data.errorInfos&&a.data.errorInfos.length){var o=a.data.errorInfos[0];if(e=o.errorMessage,o.needImageCode&&"1"===o.needImageCode){if(null!=o.isRightImageCode&&""===o.isRightImageCode)return I.default.show({sceneId:o.sceneId,page:t}).then((function(e){var t=e.code,a=e.uuid;n({uuid:a,imageCode:t,sceneId:o.sceneId})}));if(o.isRightImageCode&&"0"===o.isRightImageCode)return I.default.show({sceneId:o.sceneId,page:t,codeError:!0}).then((function(e){var t=e.code,a=e.uuid;n({uuid:a,imageCode:t,sceneId:o.sceneId})}))}}throw r=5,console.error(a),new Error("4-加入购物车失败:"+JSON.stringify(a))}t.updateCartNumber(),D.default.showToast({title:"添加成功"}),i&&I.default.hide(t)})).catch((function(t){console.error(t),3===r?D.default.showToast({title:"添加失败(3)"}):D.default.showToast({title:e||"添加失败("+r+")"})}))}()})).catch((function(e){return console.error("固定套装添加失败",e),D.default.showToast({title:"添加失败(6)"})}))}catch(e){throw console.error(e),D.default.showToast({title:"添加失败(0)"}),e}}};a.default={parseDiscPackage:function(e,t){P.default.packageBetail(e,t).then((function(t){for(var a=0;a<t.length;a++){0===a?t[0].iscurrent=!0:t[a].iscurrent=!1;for(var o=0;o<t[a].productList.length;o++)0==t[a].productList[o].firstPic.indexOf("//")&&(t[a].productList[o].firstPic="https:"+t[a].productList[o].firstPic)}console.log(1e16),console.log(t),e.setData({"discPackage.list":t})})).catch((function(e){console.error("Server.packageBetail",e)}))},action:L}})),window.define("693",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(667),I=e(23),P=e(474),D=P.prefixPartNumber,x=P.getProps,_=e(694);t.exports={parseFourth:function(e,t){var a=e;if(0===t.data.data.data1.code)return!1;t.data.data.data1=t.data.data.data1||{},t.data.data.data1.data=t.data.data.data1.data||{};var o=t.data.data.data1.data,n=t.data.data.freightObj;a.fourth.shareFlag=!0,a.fourth.supplierCode=t.currentPrice.vendorCode||"",a.fourth.vendorType=T.Vendor.convert(t.currentPrice.vendorType,t.currentPrice.ownerPlace,t.data.data.allpowerful||""),a.fourth.hwgType="",a.fourth.vendorType===T.Vendor.SHOP||a.fourth.vendorType===T.Vendor.SWL||a.fourth.vendorType===T.Vendor.CSSWL?a.fourth.isCShop=!0:a.fourth.vendorType===T.Vendor.HWG?(a.fourth.isCShop=!0,0===t.currentPrice.ownerPlace.indexOf("H")?a.fourth.hwgType=T.HwgType.Abroad:0===t.currentPrice.ownerPlace.indexOf("B")||"0"===t.currentPrice.ownerPlace.indexOf("L")?a.fourth.hwgType=T.HwgType.Donded:a.fourth.hwgType=T.HwgType.Inter):a.fourth.vendorType===T.Vendor.HWG1?(a.fourth.isCShop=!0,a.fourth.hwgType=T.HwgType.Inter):a.fourth.vendorType===T.Vendor.LYHWG||a.fourth.vendorType===T.Vendor.JDXHWG?(a.fourth.isCShop=!1,n&&n.mode&&"01"===n.mode?a.fourth.hwgType=T.HwgType.Donded:n&&n.mode&&("02"===n.mode||"04"===n.mode)?a.fourth.hwgType=T.HwgType.BcAbroad:n&&n.mode&&"01"!==n.mode&&(a.fourth.hwgType=T.HwgType.Abroad)):a.fourth.isCShop=!1,a.fourth.isVirtual=!1;var i=a.data.result.data.data.data1.data.itemInfoVo;a.fourth.isCShop&&i&&i.attachedTypeList&&i.attachedTypeList.length>0&&i.attachedTypeList.some((function(e){return"12"===e.attachedType||"11"===e.attachedType}))&&(a.fourth.isVirtual=!0),!i||"01"!==i.businessField&&"02"!==i.businessField||(a.fourth.snCard="virtual"),!i||"03"!==i.businessField&&"04"!==i.businessField||(a.fourth.snCard="actual"),a.fourth.passPartNumber=t.data.data.data1.data.passPartNumber,a.fourth.panSelf=!a.fourth.isCShop||a.fourth.vendorType===T.Vendor.CSSWL||a.fourth.vendorType===T.Vendor.LYTM,a.fourth.isHk="Y"===t.data.data.hkFlag,a.fourth.isSNHL="3"===x(t.data,"data","hkprice","yysCode"),a.fourth.isMobile="1"===t.data.data.isMobile,a.fourth.isSignal="Y"===t.data.data.isSignal,a.fourth.isCSSWL=a.fourth.vendorType===T.Vendor.CSSWL,a.fourth.itemType=t.data.data.data1.data.itemType,a.fourth.hdfkFlag=t.data.data.hdfkFlag,a.fourth.activityType=t.data.data.activityType,"29"===t.data.data.activityType&&(a.fourth.activityType=31),a.fourth.factorySendFlag=t.currentPrice.factorySendFlag,a.fourth.sizeAttribute=t.data.data.data1.data.itemInfoVo.sizeAttribute,a.fourth.isPass="20"===t.data.data.data1.data.itemInfoVo.itemType,a.fourth.isPackage="30"===t.data.data.data1.data.itemInfoVo.itemType,a.fourth.isDiscPackage=t.data.data.data1.data.itemInfoVo.attachedTypeList&&t.data.data.data1.data.itemInfoVo.attachedTypeList.length>0&&"1"===t.data.data.data1.data.itemInfoVo.attachedTypeList[0].attachedType;var r=t.data.data.data1.data.bundleRel;a.fourth.bundelType=r&&r.bundleDto?r.bundleDto.bundelType:null,a.fourth.businessFlag=t.data.data.data1.data.itemInfoVo.businessFlag,a.fourth.clusterId=t.data.data.data1.data.clusterId||"",a.fourth.ybkFlag="Y"===t.data.data.ybkFlag,a.fourth.jsdTitle=t.data.data.jsdTitle,a.fourth.jsdDesc=t.data.data.jsdDesc,a.fourth.priceType=t.currentPrice.priceType,a.fourth.isBook="Y"===t.data.data.isBook,a.fourth.hdFlag=t.data.data.hdFlag,"Y"!=t.data.data.spsFlag||t.data.data.isHwg||(a.fourth.spsYBMY=!0),a.fourth.spsFlag="Y"==t.data.data.spsFlag,a.fourth.isHwg=!!t.data.data.isHwg,a.fourth.isHwgLocal="Y"===t.data.data.hwglocalflag;var s="normal-root";if(a.fourth.isHwg||a.fourth.isHwgLocal?s="oversea-root":a.fourth.isJW?s="jiwu-root":a.fourth.isLYTM&&(s="temai-root"),a.fourth.cssType=s,a.fourth.unsupport=!1,t.data.data.price&&Array.isArray(t.data.data.price.saleInfo)&&t.data.data.price.saleInfo.length){a.fourth.isPg=!0;var c=t.data.data.price.saleInfo.filter((function(e){return(e.partNumber&&D(e.partNumber))===(a.fourth.params&&a.fourth.params.productId&&D(a.fourth.params.productId))}));c&&c.constructor===Array&&c.length&&(a.fourth.pgActId=c[0].pgActionId)}else a.fourth.params.pgActId&&(a.fourth.pgActId=a.fourth.params.pgActId);a.fourth.isHwgZy=a.fourth.isHwg&&!a.fourth.isCShop,a.fourth.isO2o=void 0!==t.data.data.o2oFlag,a.fourth.o2oFlag=t.data.data.o2oFlag,a.fourth.unsupport=!1,a.fourth.recommendPictureSwitch="1"===t.data.data.dttTjFlag,a.fourth.priceSalesOrg=t.currentPrice.salesOrg,a.fourth.priceOwnerPlace=t.currentPrice.ownerPlace,a.fourth.priceVendor=t.currentPrice.vendor,a.fourth.priceVendorCode=t.currentPrice.vendorCode,a.fourth.baseVendorCode=t.data.data.vendorCode,a.fourth.brandId=t.data.data.data1.data.itemInfoVo.brandId,a.fourth.brandCode=t.data.data.data1.data.itemInfoVo.brandCode,a.fourth.categoryIds=t.data.data.categoryIds||"",a.fourth.isLYTM="5"===t.data.data.data1.data.shopType,a.fourth.isJW="Y"===t.data.data.jwFlag,a.fourth.catalogId=t.data.data.data1.data.catalogId,a.fourth.dressFlag="Y"===t.data.data.dressFlag;var d=t.currentPrice.priceType;return a.fourth.activityType=d&&d.split("-")[0]||"",a.fourth.activitySubType=d&&d.split("-")[1]||"",o.itemInfoVo&&o.itemInfoVo.attachedTypeList&&o.itemInfoVo.attachedTypeList.length&&(o.itemInfoVo.attachedTypeList.some((function(e){return"14"===e.attachedType}))?a.fourth.hasSecondHand=!0:o.itemInfoVo.attachedTypeList.some((function(e){return"13"===e.attachedType}))?a.fourth.isSecondHand=!0:(o.itemInfoVo.attachedTypeList.some((function(e){return"12"===e.attachedType}))||o.itemInfoVo.attachedTypeList.some((function(e){return"11"===e.attachedType})))&&(a.fourth.isCShop||(a.fourth.unsupport=!0))),a.fourth.earliestArriveDate=t.data.data.prescription?t.data.data.prescription.earliestArriveDate:void 0,a.fourth.isHk&&(t.currentPrice.promotionPrice=t.data.data.hkprice.price),t.currentPrice.promotionPrice?a.fourth.noPrice=!1:a.fourth.noPrice=!0,a.fourth.published="1"===t.data.data.data1.data.itemInfoVo.published,a.fourth.hasStorage=t.data.data.invStatus,a.fourth.isShort=!a.fourth.published||"1"!==a.fourth.hasStorage||a.fourth.noPrice,a.fourth.isPublished=t.data.data.data1.data.itemInfoVo&&t.data.data.data1.data.itemInfoVo.published,a.fourth.isO2o&&(a.fourth.unsupport=!0),a.fourth.isHwg&&"0"===t.data.data.xcxHwgFlag&&(a.fourth.unsupport=!0),"Y"===t.data.data.footFlag&&(a.fourth.unsupport=!0),a.fourth.isHk&&(a.fourth.unsupport=!0),a.fourth.hdFlag&&(a.fourth.unsupport=!0),"2"===a.fourth.bundelType&&(a.fourth.unsupport=!0),"3"===a.fourth.bundelType&&(a.fourth.unsupport=!0),"Y"===t.data.data.isKD&&(a.fourth.unsupport=!0),"16"!==a.fourth.businessFlag&&"17"!==a.fourth.businessFlag&&"19"!==a.fourth.businessFlag&&"20"!==a.fourth.businessFlag&&"21"!==a.fourth.businessFlag&&"22"!==a.fourth.businessFlag||(a.fourth.unsupport=!0),"1"===d||"0"===d||"4-1"===d||"4-14"===d||"4-12"===d||"4-5"===d||"4-10"===d||"4-9"===d||"4-2"===d||"8"===a.fourth.activityType||"13"===a.fourth.activityType||"7"===a.fourth.activityType||"12"===a.fourth.activityType||("6"===a.fourth.activityType?a.fourth.isJW&&(a.fourth.unsupport=!0):"0"===a.fourth.hasStorage&&(a.fourth.unsupport=!0)),"DD"===t.data.data.txfwFlag||"JX"===t.data.data.txfwFlag?(a.fourth.TxType=t.data.data.txfwFlag,a.fourth.txfwObj=t.data.data.txfwObj||{},a.fourth.checkedTx=a.fourth.txfwObj[0]||{}):(a.fourth.TxType="",a.fourth.txfwObj=""),a.fourth.actType="4-1"===d?"100035":"4-9"===d?"100033":"4-10"===d?"100034":"4-14"===d?"100038":"8-1"===d||"8-2"===d||"8-3"===d||"8-4"===d||"13-1"===d||"13-2"===d?"100040":"4-12"===d?"100036":"7-1"===d||"7-2"===d||"7-3"===d||"7-4"===d||"12-1"===d||"12-2"===d?"100039":"4-2"===d?"100037":"",_.isWxGift&&_.isWxGift(a,t.data.data.wxslFlag),!0},parseFourthByDetail:function(e,t){var a=e.fourth;t.priceResult.data.data.prescription=t.priceResult.data.data.prescription||{},a.cShopName=t.data.data.itemShopInfo&&t.data.data.itemShopInfo.shopInfo&&t.data.data.itemShopInfo.shopInfo.shopName?t.data.data.itemShopInfo.shopInfo.shopName:"",t.data.data.switchObj&&"1"==t.data.data.switchObj.szytFlag?a.installFlag=t.data.data.szytObj&&t.data.data.szytObj.installFlag:a.installFlag=t.data.data.dealMsg&&t.data.data.dealMsg[0].installFlag,a.availCheckCode=t.data.data.availCheckCode;var o=void 0,n=void 0,i=void 0;if(a.isCShop&&!a.isCSSWL){var r=(t.data.data.itemShopInfo||{}).shopInfo||{};n=r.logoUrl,o=a.shopParam,i=r.shopName}else t.priceResult.data.data.data1.data.brandUrl&&"0"==t.priceResult.data.data.data1.data.brandStatus&&(n=t.priceResult.data.data.data1.data.brandLogoUrl,o=t.priceResult.data.data.data1.data.brandCode,i=t.priceResult.data.data.data1.data.brandName);var s=t.priceResult.data.data.hdlabel,c=void 0;a.hdLogo?c=a.hdLogo:s&&s.logo&&(c=s.logo.replace(/^\/\//,"http://"));var d=a.isJW,u=a.isLYTM,l=a.isHwgZy,p=a.isCShop,f=a.panSelf,h=a.factorySendFlag,g=a.shopParam,m=a.partNumber,v=a.brandId,y=a.priceVendor,w=a.isHwg;e.setData({shop:{targetShop:o||"",shopLogo:n,shopName:i,hdLogo:c,price:{name:e.data.price.name,promotionPrice:e.data.price.promotionPrice},main:{isJW:d,isLYTM:u,isHwgZy:l,isCShop:p,panSelf:f,factorySendFlag:h,shopParam:g,partNumber:m,brandId:v,priceVendor:y,isHwg:w},result:{threeCategoryId:e.data.result.data.data.threeCategoryId,categoryCode:e.data.result.data.data.data1.data.itemInfoVo.categoryCode},bigPage:e.data.bigPage}})},defaultError:function(e){console.error(e)},getInitData:function(e){var t=(e=e||{}).actionBar?e.actionBar.cartNumber:void 0;return{pageid:"140",modalHidden:!0,position:e.position||{},activity:{},renderState:{step1:!1,step2:!1,step3:!1},fourth:{},actionBar:{cartNumber:t},detail:{tabFix:!1,currentTab:0,detailList:[],showParam:1,serviceList:[],currentSubTab:0,subDetail:!1},price:{sellPoint:{}},bigPage:{detailsUrl:"",imgVideoPoster:"",isWiFi:!1,isPlayVideoToastShow:!0,isAleadyShowToast:!1,isShowFront:!0,current:0,imgUrls:[],duration:300,showBig:0,scroll:0},promote:{expand:1,list:[]},sub:e.sub||{picked:[],pickedName:"",count:1,validCount:1,min:1,max:99,expand:1,rows:[]},eval:e.eval||{marks:[],list:[]},service:{list:[]},coupon:{list:[]},gift:{show:0},short:{isShort:0,showShort:0},couponCover:{show:0,gotCoupon:[],coupon:[]},oversea:{},tarBarList:[{title:"商品",id:1,area:"banner-container"},{title:"评价",id:2,area:"anchors_separator"},{title:"详情",id:3,area:"anchors_detail"}],selectIndex:1,bannerTop:0,anchorTop:0,detailTop:0,toView:"banner-container",sharePopState:!1,copyIcon:!1,shareFriendPopState:!1,shareImg:"https://oss.suning.com/vss/activity/wximg/fourth/wechat-circle.png",pageSource:0,tabTopData:[],shareFriendImg:"",bookPriceLabelLength:0,floatButton:{isShare:!1,right:"-440",show:!0,width:110},friendDisplay:!1,customParam:{},custom:{customParam:{},isCustom:!1,customMask:!1},isEnabled:1,initbg:"",shop:null,attacheRes:null,couponinit:{isLogin:!1},addressList:[],showscrap:!1,optimizeAddCart:"",nosuchpro:!1,noprotips:"很抱歉，此商品不存在",openApp:!1,version:2,newer:{show:!1,img:"",url:""},exposureObj:{},platform:(0,I.getPlatformType)()}}}})),window.define("694",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={isWxGift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"Y"===t&&(e.fourth.unsupport=!0)},wxVersion:function(e){return""},reviewSeo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setPageInfo&&n.setPageInfo({title:e+"评价[怎么样好不好 多少钱]-苏宁易购",keywords:e+"怎么样,"+e+"好不好,"+e+"多少钱",description:"苏宁易购"+e+"评价专区，由众多消费者对"+e+"怎么样、"+e+"好不好、"+e+"多少钱的评价，想了解更多关于"+e+"评价信息，就上苏宁易购！",success:function(){console.log("页面基础信息设置完成")}})},fourthSeo:function(e,t,a){var o=e.itemDisplayName,i=e.brandName,r=t.categoryName,s=void 0===r?"":r;a.setData({title:o}),n.setPageInfo&&n.setPageInfo({title:o+"【价格 图片 品牌 报价】-苏宁易购苏宁自营",keywords:""+i+s+"价格,"+i+s+","+o,description:"苏宁易购为您提供"+o+"价格、图片、品牌、报价等信息，网购正品"+i+s+"首选苏宁易购！",success:function(){console.log("页面基础信息设置完成")}})},searchSeo:function(e){n.setPageInfo&&n.setPageInfo({title:e+"正品价格_折扣_图片_分期付款-苏宁易购",keywords:e+","+e+"图片,"+e+"价格",description:"苏宁易购为您提供最新的"+e+"的报价，"+e+"的相关折扣信息"+e+"的图片、"+e+"的分期付款及最新的"+e+"的优缺点，好不好，怎么样等用户评价信息。",success:function(){console.log("页面基础信息设置完成")}})},shopSeo:function(e){var t=e.replace(/官方旗舰店|自营店|专卖店|专营店|旗舰店|苏宁自营旗舰店/g,"");n.setPageInfo&&n.setPageInfo({title:e+"_"+t+"商城_"+t+"-苏宁易购官网",keywords:e+","+t+"专卖店报价,"+t+"价格,"+t+"正品行货",description:e+"入驻苏宁易购官网,为您提供"+t+"价格、评价、正品行货、图片等信息,买"+t+"来苏宁易购!",success:function(){console.log("页面基础信息设置完成")}})}}})),window.define("697",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=e(77),P=e(698),D=(e(8),e(25)),x=(D.login,D.requestPromise,D.baseJump,D.saSendPageViewLog);e(20).getCityCodeByIp;Page({data:{saPgnm:"pgcate=10009;pgtitle=热门推荐",baiduRecGoods:[],snRecGoods:[],baiduRec:[],showToTop:!1,screenH:0,scrollTop:""},onLoad:function(e){this.getSystemInfo(),this.setData({baseOptions:e}),this.setData({hotrecid:e.hotrecid})},onShow:function(){this.queryStoreGoods(),x()},queryStoreGoods:function(){var e=n.getStorageSync("recGoods");this.setData({snRecGoods:e})},jump2FourthPage:function(e){var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop,o=e.currentTarget.dataset.parama;(0,I.saSendLog)("manuclick",{pageid:P.PAGE_ID,modid:this.data.hotrecid,eleid:e.currentTarget.dataset.eleid,evdl:{eletp:"prd",prdid:e.currentTarget.dataset.prdid,shopid:e.currentTarget.dataset.shopid,recvalue:e.currentTarget.dataset.recvalue||"rec"}}),0==a&&(a="0000000000"),n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title=&bdParama="+o})},scrollMain:function(e){var t=e.detail.scrollTop;this.showTop(t)},showTop:function(e){e>this.data.screenH?!this.getData("showToTop")&&this.setData({showToTop:!0}):this.getData("showToTop")&&this.setData({showToTop:!1})},tapToTop:function(){0===this.getData("scrollTop")?this.setData({scrollTop:-1,showToTop:!0}):this.setData({scrollTop:0,showToTop:!1})},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)}),"ios"!=t.platform&&"devtools"!=t.platform||e.setData({isIos:!0})}})},copyObj:function(e){if("object"!==(void 0===e?"undefined":T(e)))return e;if(e instanceof Array)var t=[];else t={};for(var a in e)"object"!==T(e[a])?t[a]=e[a]:t[a]=this.copyObj(e[a]);return t}})})),window.define("698",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.PAGE_ID="baidusy130",a.PAGE_TICKET="2018121601"})),window.define("701",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=e(8),x=(I=D)&&I.__esModule?I:{default:I},_=e(6);var k=e(25),L=k.requestPromise,N=k.requestPromiseWx,E=k.find,O=k.isObjEqual,A=e(17),R=e(45),M=(r(),e(77).saSendLog);var U=-1;Page({data:{pageid:"prolistPage",saPgnm:"pgcate=10006;pgtitle=搜索分类页",hasLoaded:!1,list:[],curDir:{},scrolltop:0,imageHost:x.default.res,isSwitchOn:"off",catalogueLineUpCI:{}},imgError:function(e){(0,_.snBusError)({bid:"ss-wxfllby_search",error_code:"ss-wxfllby_search-20002",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+i.getStorageSync("custNo")}),type_name:"无logo"})},autoclick:function(e){M("manuclick",Object.assign({},e.currentTarget.dataset))},onLoad:function(e){var t=this;L({url:x.default.searchFE+"/mpapi/zk/ASN"}).then((function(e){t.setData({catalogueLineUpCI:e.catalogueLineUpCI}),t.initialize()})).catch((function(e){t.initialize()}))},onReady:function(){},onShow:function(){M("pageview",{ext:{}}),this.data.hasLoaded?this.checkVersion():this.setData({hasLoaded:!0}),clearTimeout(U),U=t((function(){i.setNavigationBarColor({backgroundColor:"#ffffff",frontColor:"#000000"}),i.setBackgroundColor({backgroundColor:"#ffffff",backgroundColorTop:"#ffffff",backgroundColorBottom:"#ffffff"})}),2e3)},onHide:function(){clearTimeout(U)},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},toSearch:function(){i.navigateTo({url:"/pages/search/searchResult/result"})},list:null,initialize:function(){var e="",t=this;this.showLoading();try{e=i.getStorageSync("listData")}catch(e){console.error(e)}if(e){var a=e.data.map((function(e){return{id:e.id,isDisable:e.isDisable,color:e.color,dirName:e.dirName}}));return t.setData({list:a,curDir:e.data[0]}),t.list=e.data,void t.hideLoading()}this.isLastVersion().then((function(){e||t.getCategoryInfo(!0)})).catch((function(){t.getCategoryInfo(!0)}))},checkVersion:function(){var e=this;this.isLastVersion().then((function(){e.updateData()})).catch((function(){e.getCategoryInfo()}))},updateData:function(){var e="";try{e=i.getStorageSync("listData")}catch(e){console.error(e)}if(e){var t=this.data.list;if(!O(t,e.data)){var a=this.data.curDir.id,o=E(e.data,(function(e){return e.id===a}));o||(o=e.data[0]);var n=e.data.map((function(e){return{id:e.id,isDisable:e.isDisable,color:e.color,dirName:e.dirName}}));this.setData({list:n,curDir:o})}}},getCategoryInfo:function(e){var t=this;e&&t.showLoading(),new Promise((function(e,t){return N({url:A.list.getCategoryInfo+R.listChnId+"-callback.json",method:"get"}).then((function(a){var o=a.data,n=a.statusCode;n<400?e(o):((0,_.snBusError)({bid:"ss-ss-wxssfly_allfl",error_code:"ss-wxssfly_allfl-20001",error_type:1,error_detail:JSON.stringify({errorDesc:"response_"+n+"_"+i.getStorageSync("custNo")}),type_name:"全部分类接口"}),t(o))})).catch((function(e){(0,_.snBusError)({bid:"ss-ss-wxssfly_allfl",error_code:"ss-wxssfly_allfl-20001",error_type:1,error_detail:JSON.stringify({errorDesc:"response_"+e.statusCode+"_"+i.getStorageSync("custNo")}),type_name:"全部分类接口"}),t(e)}))})).then((function(a){if(a=a||{},console.log("分类一级目录",a),a.rs&&a.rs.length>0){var o=function(e){return(e=e||[]).forEach((function(e){var t=0;""==e.dirName&&(0,_.snBusError)({bid:"ss-wxfllby_search",error_code:"ss-wxfllby_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+i.getStorageSync("custNo")}),type_name:"无名称"}),e.children&&(e.children.forEach((function(e){var a=0;""==e.dirName&&(0,_.snBusError)({bid:"ss-wxfllby_search",error_code:"ss-wxfllby_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+i.getStorageSync("custNo")}),type_name:"无名称"}),e.children&&(e.children.forEach((function(e){""==e.dirName&&(0,_.snBusError)({bid:"ss-wxfllby_search",error_code:"ss-wxfllby_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+i.getStorageSync("custNo")}),type_name:"无名称"}),""==e.imgWx&&(0,_.snBusError)({bid:"ss-wxfllby_search",error_code:"ss-wxfllby_search-20002",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+i.getStorageSync("custNo")}),type_name:"无logo"}),e.gotoApp||e.gotoWap?(e.isDisable=!0,a+=1):e.isDisable=!1})),a==e.children.length?(e.isDisable=!0,t+=1):e.isDisable=!1)})),t==e.children.length?e.isDisable=!0:e.isDisable=!1)})),e}(a.rs),n={data:o};t.list=o;var r=o.map((function(e){return{id:e.id,isDisable:e.isDisable,color:e.color,dirName:e.dirName}}));e&&(t.setData({list:r,curDir:o[0]}),t.hideLoading());try{i.setStorageSync("listData",n)}catch(e){console.error(e)}}else t.hideLoading()})).catch((function(e){t.hideLoading()}))},isLastVersion:function(){var e="";try{e=i.getStorageSync("listLastVersion")}catch(e){console.error(e)}return new Promise((function(t,a){L({url:A.list.getNewVersion+R.listChnId+"-callback.json",method:"get"}).then((function(o){var n=(o=o||{}).rs;try{i.setStorageSync("listLastVersion",n)}catch(e){console.error(e)}e&&n&&e===n?t():a()})).catch((function(e){console.error(e),a()}))}))},changeNav:function(e){M("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.id,a=e.currentTarget.dataset.index,o=this.list;if(t){var n=E(o,(function(e){return e.id===t}));(void 0===n||P(n))&&(n.leftIndex=a),console.log(n),n&&this.setData({curDir:n,scrolltop:0})}},goPage:function(e){M("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset,a=t.id,o=t.parentId,n=this.data.curDir;if(a&&o){var r=E(n.children,(function(e){return e.id==o}));if(r){var s=E(r.children,(function(e){return e.id==a}));s&&s.gotoWx?i.navigateTo({url:s.gotoWx}):s&&s.pcCi&&i.navigateTo({url:"/pages/search/searchList/list?ci="+s.pcCi+"&cf="+s.seoCf})}}},showLoading:function(e){i.showLoading({title:e||"加载中",mask:!0})},hideLoading:function(){i.hideLoading()}})})),window.define("704",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=x(e(54)),I=x(e(705)),P=e(77),D=e(450);function x(e){return e&&e.__esModule?e:{default:e}}var _={"fourth::quick-buy":function(e,t){var a=e.params;if(a){var o={showQuickBuy:!0,quickBuyTitle:a.data.itemInfoVo.itemDisplayName,quickBuyCount:a.data.count,quickBuyPrice:a.data.price&&a.data.price.promotionPrice};Array.isArray(a.data.images)&&a.data.images.length>0&&(o.quickBuyFaceImageUrl=a.data.images[0].url),t.setData(o),n.setNavigationBarTitle({title:"快速下单"})}}};Page(Object.assign({detectTouchStart:T.default.detectTouchStart,detectTouchMove:T.default.detectTouchMove,detectTouchEnd:T.default.detectTouchEnd,detectTap:T.default.detectTap,detectLongPress:T.default.detectLongPress,data:{showAgreeModula:!1,nextTargetUrl:encodeURIComponent("https://sale.suning.com/page/loginVerifySuccess/index.html"),welcomeTitle:"欢迎登录苏宁易购",showQuickBuy:!1,loginType:0,focusPhone:!1,focusVerifyCode:!1,needVerify:!1,verifyCode:"",verifyCodeImageUrl:"",verifyCodeCheckDisabled:!0,smsCode:"",smsForcus:!1,smsCanSend:!1,countSeconds:90,buttonText:"获取验证码",sendingStatus:0,showHistory:!1,phoneList:[],accountList:[],showRegisterModel:!1,showPrompt:!1,showInputClear:!1,agreeRulers:!1,openCaptcha:!1,rdsyData:{},snCaptchaSuccessToken:"",smsToken:"",snCaptchaSuccessToken_account:"",privateMemberUrl:"",privateUrl:""},preparePage:function(e){var t=e.page+"::"+e.act;t in _?_[t](e,this):n.setNavigationBarTitle({title:" "})},onLoad:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var a,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.args=JSON.parse(t.args)}catch(e){t.args={}}return e.next=4,(0,D.getPrivacyConfig)();case 4:a=e.sent,o=a.privateMemberUrl,n=a.privateUrl,this.setData({privateMemberUrl:o,privateUrl:n}),this.options=t,this.preparePage(this.options.args),console.log(this.options);case 11:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))});return function(e){return t.apply(this,arguments)}}(),onReady:function(){},onShow:function(){T.default.init("mainApp"),this.showArrow(),this.data.showQuickBuy?this.setData({saPgnm:"pgtitle=百度快捷下单;pageid=afxw6f7aab;pgcate=10009;",pageid:"afxw6f7aab"}):this.setData({saPgnm:"pgtitle=百度未登录;pageid=afxw5a3aab;pgcate=10009;",pageid:"afxw5a3aab"}),(0,P.saSendLog)("pageview",{ext:{}})},onAgreeCheck:function(){var e=this.getData().agreeRulers;e=!e,this.setData({agreeRulers:e})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}},I.default))})),window.define("705",(function(e,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,I){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var P=e(25),D=e(77),x=O(e(17)),_=e(706),k=e(40),L=e(708),N=e(39),E=O(e(54));e(454);function O(e){return e&&e.__esModule?e:{default:e}}var A=e(709),R=(A.cookieHandle,A.cookieBaiduHandle),M=e(455).SnCaptcha,U=e(9),j=["@qq.com","@163.com","@126.com","@sina.com","@sohu.com","@yahoo.com.cn","@gmail.com","@hotmail.com","@foxmail.com","@139.com","@189.cn","@tom.com","@hotmail.com.cn","@sina.cn","@vip.qq.com","@vip.sina.com","@vip.163.com","@wo.com.cn","@21cn.com","@yeah.net","@netease.com"],B={E4700440:"当前账号不存在",E4700456:"当前账号不存在",E4700A37:"当前账号不存在",E4700451:"账号异常，请联系4008365365",E4700464:"网络异常，请稍后重试",E4700000:"网络异常，请稍后重试",E4700013:"网络异常，请稍后重试",E4700443:"当前账号被锁定，请联系苏宁客服4008365365",badVerifyCode:"验证码错误",badSlideVerifyCode:"滑动验证码验证失败",needVerifyCode:"请输入验证码","badPassword.msg1":"账号或密码错误","badPassword.msg2":"账号或密码错误",unknownUsername:"当前账号不存在",lockedBySystem:"当前账号被锁定，请联系苏宁客服4008365365",lockedBySelf:"当前账号被锁定，请联系苏宁客服4008365365",lockedByManual:"当前账号被锁定，请至pc端完成解锁",serviceNotAvailable:"网络异常，请稍后重试",badCredentials:"网络异常，请稍后重试",uncategorized:"网络异常，请稍后重试"};e(710);n.default={onSmsCodeSend:function(e){var t=this.data,a=t.phoneNumber,o=t.smsCanSend;if(0==L.verify.phone(a)){if(!o){var n=this;(0,_.getNetworkType)().then((function(){n.initNeedVerify(a).then((function(e){n.requestSmsCode()}))})),this.data.showQuickBuy?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"03OPaue",eleid:"03OPaue1"}}}}):(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl03"}}}})}}else r.showToast({title:"请输入正确的手机号",icon:"none"})},initNeedVerify:function(e){var t=this;return new Promise((function(a,o){(0,_.apiCheckPhoneNumberNeedVerify)(e).then((function(e){console.log("apiCheckPhoneNumberNeedVerify",e);try{e.code;var o=e.data,n=(e.status,o.ticket),i=void 0===n?"":n,r=o.iarTicket,s=void 0===r?"":r,c=o.riskType,d=void 0===c?"":c;t.setData({rdsyData:{ticket:i,riskType:d}}),"isNullVerifyCode"==d?a():t.openSnCaptcha(s)}catch(e){console.log(e)}}))}))},requestSmsCode:function(){var e=this,t=this.data,a=t.currentUUid,o=t.customImageCode,n=t.rdsyData,i=t.snCaptchaSuccessToken,s=t.phoneNumber,c=n.ticket,d=n.riskType;(0,_.apiRequestSmsCode)({phoneNumber:s,ticket:c,riskType:d,code:i,currentUUid:a,customImageCode:o}).then((function(t){console.log("手机短信",t),t.errorCode?r.showToast({title:"发送短信验证码失败["+t.errorCode+"]",icon:"none"}):"COMPLETE"==t.status?(r.showToast({title:"短信已成功发送，请注意查收",icon:"none"}),e.rdsyStep2Ticket=t.data.ticket,e.setData({smsCanSend:!0}),e.countStart()):r.showToast({title:t.msg+"["+t.code+"]",icon:"none"})}))},onSmsCodeChange:function(e){this.setData({smsForcus:!1})},onHiddenInput:function(e){var t=e.detail.value,a=t.length;this.setData({smsCode:t,cursor:a})},onHiddenFocus:function(){this.setData({smsForcus:!0})},countReset:function(){clearInterval(this.countHandle),this.setData({buttonText:"获取验证码",smsCanSend:!1,countSeconds:90,sendingStatus:0})},countStart:function(){var e=this;this.countStartTick=Date.now();var t=this.data.countSeconds;this.countHandle=a((function(){var a=t-((Date.now()-e.countStartTick)/1e3>>0);if(a<0)return e.countReset(),void(e.data.sendingStatus=0);e.setData({buttonText:a+"s"})}),500)},onSendStart:function(e){if(this.data.smsCanSend)switch(this.data.sendingStatus){case 0:this.data.sendingStatus=1,this.countStart()}},changePasswordShow:function(){this.setData({showPassWord:!this.data.showPassWord}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq5"}}}})},clearPassword:function(){this.setData({password:""}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq3"}}}})},onPsInput:function(e){var t=e.detail.value;this.setData({password:t})},cancelAgreeModula:function(){this.setData({showAgreeModula:!1})},agreeAgreeModula:function(){var e=this;this.setData({agreeRulers:!0,showAgreeModula:!1},(function(){e.doLogin()}))},doLogin:function(){var e=this,a=this.getData();a.agreeRulers?(r.showLoading({title:"请稍候",mask:!0}),t((function(){e.checkData().then((function(t){t.canSubmit?a.loginType?e.doLoginByAccount():e._doLoginByPhone():(r.showToast({title:t.errmsg,icon:"none"}),r.hideLoading())}))}),800),a.showQuickBuy?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"03OPaue",eleid:"03OPaue2"}}}}):a.loginType||(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl05"}}}})):this.setData({showAgreeModula:!0})},testQuickBuy:function(){return!!this.data.showQuickBuy&&((0,_.apiQuickBuyCallCart2)(this.options.args.params).then((function(e){console.log("testQuickBuy",e),r.redirectTo({url:e.url})})).catch((function(e){console.log("testQuickBuy err",e),r.showToast({title:"快捷下单失败："+e,icon:"none"}),t((function(){r.navigateBack({delta:1})}),1e3)})),!0)},doLoginByAccount:function(){var e=this,t=this.data.account;(0,_.getNetworkType)().then((function(){(0,_.apiCheckAccountNumberNeedVerify)(t).then((function(a){var o=a.needVerifyCode;void 0!==o&&o?(0,_.getVerifyCodeTicket)(t).then((function(t){e.openSnCaptcha(t)})):e._doLoginByAccount()}))}))},_doLoginByPhone:function(){var e=this.data,t=e.phoneNumber,a=e.token,o=e.smsCode,n=e.smsToken,i=this,s=this.rdsyStep2Ticket;(0,_.getNetworkType)().then((function(){(0,k.apiBaiduUnionPhoneSmsLogin)({phoneNumber:t,token:a,detect:E.default.getTrack({scene:1}),smsCode:o,rdsyStep2Ticket:s,smsToken:n}).then((function(e){r.hideLoading();var a=e.data,o=a.code,n=a.msg;if("0"===o){var s={custNum:e.data.cookie.custno,authorizeSource:"284000012011",agreementInfo:JSON.stringify([{agreementType:"285000000002"}])};(0,k.setPrivacy)(s,e.data.cookieString),R(e.data),i.setStorageHistoryList({value:t,time:(new Date).getTime()}),(0,N.checkLoginFrom)()||i.testQuickBuy()||r.navigateBack({delta:1})}else if("60002"==o){var c=e.data.data.smsToken;i.setData({showRegisterModel:!0,smsToken:c})}else i.outRiskControl(e.data,n)})).catch((function(){r.hideLoading()}))}))},_doLoginByAccount:function(){var e=this,t=this.data,a=t.account,o=t.password,n=t.snCaptchaSuccessToken_account;(0,_.apiAccountLogin)(a,o,n).then((function(t){r.hideLoading();var o=t.data,n=o.code;o.msg;if("0"===n){R(t.data),(0,N.checkLoginFrom)()||e.testQuickBuy()||r.navigateBack({delta:1}),e.setStorageHistoryList({value:a,time:(new Date).getTime()});var i={custNum:t.data.cookie.custno,authorizeSource:"284000012011",agreementInfo:JSON.stringify([{agreementType:"285000000002"}])};(0,k.setPrivacy)(i,t.data.cookieString)}else e.outRiskControl(t.data)})).catch((function(){r.hideLoading()}))},checkData:function(){var e=this;return new Promise((function(t,a){if(e.data.loginType){var o=!0,n=e.data,i=n.account,r=n.password;if(0!=L.verify.account(i))return void t({canSubmit:o=!1,errmsg:L.errMsg.account[L.verify.account(i)]});if(0!=L.verify.password(r))return void t({canSubmit:o=!1,errmsg:L.errMsg.password[L.verify.password(r)]});t({canSubmit:o})}else{o=!0;var s=e.data,c=s.phoneNumber,d=s.smsCode;if(0!=L.verify.phone(c))return void t({canSubmit:o=!1,errmsg:L.errMsg.phone[L.verify.phone(c)]});if(0!=L.verify.smsCode(d))return void t({canSubmit:o=!1,errmsg:L.errMsg.smsCode[L.verify.smsCode(d)]});if(!e.data.smsCode||4!=e.data.smsCode.length)return void t({canSubmit:o=!1,errmsg:"请输入正确的短信验证码"});t({canSubmit:o})}}))},clearInputNumber:function(){this.data.loginType?(this.setData({account:"",focusInput:!0}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq2"}}}})):(this.setData({phoneNumber:"",smsCanSend:!1,focusInput:!0}),this.countReset(),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl02"}}}}))},changeLoginType:function(e){var t=this.data.loginType?0:1;this.setData({loginType:t,showHistory:!1,smsCode:""}),this.showArrow(),t?(this.data.account&&this.onAccountBlur(),e&&(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl06"}}}})):e&&(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq8"}}}})},outRiskControl:function(e,t){var a=e.loginErr,o=void 0===a?{errorCode:s,snapshotId:c,remainTimes:d}:a,n=e.msg,i=o.errorCode,s=void 0===i?"":i,c=o.snapshotId,d=o.remainTimes,u={highRiskAccount:"highRiskAccount",suspectedHighRiskAccount:"suspectedHighRiskAccount",maliciousRegister:"maliciousRegister",suspiciousLogin:"suspiciousLogin"},l=void 0;if(Object.keys(u).indexOf(s)+1){l="suspiciousLogin"===u[s]?"targetUrl":"nextTargetUrl";var p=x.default.riskControl[u[s]]+"&ticket="+c+"&"+l+"="+this.data.nextTargetUrl+"&notNeedLogin=1";console.log(p,"webViewSrc*******************************"),r.navigateTo({url:"/pages/webView/index?webViewSrc="+p})}else if(s)if(this.data.loginType)if("E4700440"==s){/^1[3|4|5|7|8][0-9]{9}$/.test(this.data.account)?this.setData({showExist:!0}):(r.showToast({title:"当前账号不存在",icon:"none"}),this.setData({password:""}))}else if("E4700456"==s||"E4700A37"==s||"unknownUsername"==s)r.showToast({title:"当前账号不存在",icon:"none"}),this.setData({password:""});else if("badPassword.msg2"==s){var f={1:"一",2:"两",3:"三"},h=d&&f[d]?"账号或密码错误，还可以输入"+f[d]+"次":"账号或密码错误";r.showToast({title:h,icon:"none"})}else B[s]?r.showToast({title:B[s],icon:"none"}):n&&r.showToast({title:n,icon:"none"});else B[s]?r.showToast({title:B[s],icon:"none"}):n&&r.showToast({title:n,icon:"none"});else t&&r.showToast({title:t,icon:"none"})},setStorageHistoryList:function(e){var t=this;if(this.data.loginType){var a=r.getStorageSync("accountList")||[],o=a.findIndex((function(e,a){return e.value==t.data.account}));o<0?a.unshift(e):a[o]=e,r.setStorageSync("accountList",a)}else{var n=r.getStorageSync("phoneList")||[],i=n.findIndex((function(e,a){return e.value==t.data.phoneNumber}));i<0?n.unshift(e):n[i]=e,r.setStorageSync("phoneList",n)}},compareTime:function(e){return function(t,a){var o=t[e];return a[e]-o}},clearHistroy:function(){this.data.loginType?(r.setStorageSync("accountList",[]),this.setData({accountList:[],showHistory:!1}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq4"}}}})):(r.setStorageSync("phoneList",[]),this.setData({phoneList:[],showHistory:!1}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl04"}}}}))},replaceNum:function(e){var t=this.data.loginType,a=e.currentTarget.dataset.val;t?(this.setData({account:"",focusInput:!0}),this.setData({account:a,showHistory:!1})):(this.setData({phoneNumber:"",focusInput:!0}),this.setData({phoneNumber:a,showHistory:!1}))},onInputChange:function(e){var a=this,o=e.detail.value,n=[],i=[],s=5;if(this.data.loginType?(n=r.getStorageSync("accountList")||[],this.setData({account:o})):(n=r.getStorageSync("phoneList")||[],o=o.replace(/[^\d]/g,""),this.setData({phoneNumber:o}),clearTimeout(this.handle),this.handle=t((function(){a.countReset()}),100)),o){if(!this.data.showQuickBuy)if(n.length)n.forEach((function(e){if(s>0)if(e.value.startsWith(o))i.push(e);else if(-1!=o.indexOf("@")){var t=o.lastIndexOf("@"),a=o.substr(0,t),n=o.substr(t);j.forEach((function(e,t){-1!=e.indexOf(n)&&i.push({value:a+e,tiem:new Date})}))}s--})),this.data.loginType?this.setData({accountList:i.sort(this.compareTime("time")),showHistory:!0}):this.setData({phoneList:i.sort(this.compareTime("time")),showHistory:!0});else if(-1!=o.indexOf("@")){var c=o.lastIndexOf("@"),d=o.substr(0,c),u=o.substr(c);j.forEach((function(e,t){-1!=e.indexOf(u)&&i.push({value:d+e,tiem:new Date})})),i.length>5&&(i.length=5),this.data.loginType?this.setData({accountList:i.sort(this.compareTime("time")),showHistory:!0}):this.setData({phoneList:i.sort(this.compareTime("time")),showHistory:!0})}}else this.setData("showHistory",!1)},hiddenHistory:function(){this.setData({showHistory:!1})},disagreeRegister:function(){this.data.showQuickBuy?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"3OPaue",eleid:"03OPaue7"}}}}):(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl08"}}}}),this.countReset(),this.setData({showRegisterModel:!1,smsCode:"",smsCanSend:!0})},agreeReister:function(){this.setData({showRegisterModel:!1}),this._doLoginByPhone(),this.data.showQuickBuy?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"3OPaue",eleid:"03OPaue6"}}}}):(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl07"}}}})},handleForget:function(){this.setData({showPrompt:!0}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq9"}}}})},cancelPrompt:function(){this.setData({showPrompt:!1}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq6"}}}})},goSin:function(){this.setData({showPrompt:!1}),this.changeLoginType(),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq7"}}}})},goDetail:function(e){var t=e.currentTarget.dataset.type,a=e.currentTarget.dataset.url||"";"2"==t&&(a=encodeURIComponent(a)),(a.indexOf("#")>-1||a.indexOf("?")>-1)&&(a=encodeURIComponent(a)),r.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+a}),this.data.showQuickBuy?1==t?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"3OPaue",eleid:"03OPaue4"}}}}):0==t&&(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"3OPaue",eleid:"03OPaue3"}}}}):1==t?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl10"}}}}):0==t&&(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl09"}}}})},contactService:function(){(0,_.apiContactService)().then((function(e){e.indexOf("http")<0&&(e="https:"+e),console.log(e),r.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+encodeURIComponent(e)})})).catch((function(){r.showToast({title:"请拨打电话4008-365-365",icon:"none"})})),this.data.showQuickBuy?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"3OPaue",eleid:"03OPaue5"}}}}):this.data.loginType?(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq1"}}}}):(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"1TtIJl1",eleid:"1TtIJl01"}}}})},cancelExist:function(){this.setData({showExist:!1}),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq10"}}}})},goSmsCode:function(){this.setData({showExist:!1}),this.changeLoginType(),(0,D.saSendLog)("click",{event:{target:{dataset:{modid:"0DIcszq",eleid:"0DIcszq11"}}}})},showArrow:function(){this.data.loginType?this.setData({accountList:r.getStorageSync("accountList")||[]}):this.setData({phoneList:r.getStorageSync("phoneList")||[]})},openDropDown:function(){this.setData({showHistory:!this.data.showHistory})},openSnCaptcha:function(e){var t=this;try{(0,P.getDfpToken)().then((function(a){M.init({ticket:e,env:"prod"==U?"prd":U,token:a,appName:"苏宁易购",initTime:+new Date,callback:function(e){console.log("token ========> ",e),t.data.loginType?t.setData({snCaptchaSuccessToken_account:e},(function(){r.showLoading({title:"请稍候",mask:!0}),t._doLoginByAccount()})):t.setData({snCaptchaSuccessToken:e},(function(){t.requestSmsCode()}))},success:function(){r.hideLoading(),t.setData({openCaptcha:!0})},error:function(e){r.hideLoading(),console.log(" error ==========> ",e)}})}))}catch(e){}},changeStateEvent:function(e){console.log("changeStateEvent",e);var t=e.detail,a=(t.success,t.openCaptcha);this.setData({openCaptcha:a})}}})),window.define("706",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getNetworkType=a.apiContactService=a.apiQuickBuyCallCart2=a.apiAccountLogin=a.checkIsExist=a.getVerifyCodeTicket=a.apiCheckAccountNumberNeedVerify=a.apiCheckIp=a.apiRequestSmsCode=a.apiCheckPhoneNumberNeedVerify=void 0;var T=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=e(707),P=A(e(45)),D=A(e(17)),x=e(26),_=A(e(54)),k=e(25),L=e(708),N=e(40),E=A(e(52)),O=A(e(668));function A(e){return e&&e.__esModule?e:{default:e}}var R=new x.JSEncrypt;R.setPublicKey(P.default.RASKey);var M=new x.JSEncrypt;M.setPublicKey("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOuozMgVH/glMcCOIDKjXP83zDmgi6hKvwB9VLQG6RWcxm/lNmB/Uq3LGdKUnm+JBFy1GeHA8oNKLFROF/ebzSqr6kOkuSsAZmcvsvgaigD7cSzIipdfJpE3bZd9y7X8Mq+uDhNKpvlH9lR+OmTgMFAKq8w6QMYY+ksHjWINSDIwIDAQAB");var U=new x.JSEncrypt;U.setPublicKey(P.default.rdsyPublickKey);var j=e(135),B=(a.apiCheckPhoneNumberNeedVerify=function(e){return new Promise((function(t,a){Promise.all([(0,k.getDfpToken)(),B()]).then((function(o){var i=T(o,2),r=i[0],s=i[1],c=L.verify.phone(e);if(0==c){var d={sceneId:"PASSPORT_MINIPROGRAM",stepFlag:"8763EC7BB5D7EEE18EDD1E4BD59A1679",appCode:"409083ba5ff247708b7c75cebd456788",data:{result:"-1",time:(0,k.formatDate)(new Date,"yyyy-MM-dd hh:mm:ss"),channel:"MOBILE",ip:s,userName:e,custNum:"",detect:_.default.getTrack({scene:1}),mode:"1",subMode:11,cntctMobileNum:e,dfpToken:r,orderChannel:I.loginInfo.channel,ways:"duanxindl",miniType:"bD",loginTheme:"miniprogram"}};console.log("加密前",d);var u=E.default.encrypt(JSON.stringify(d));n.request({url:D.default.smsLogin.needVerifyCode2,dataType:"json",method:"GET",data:{_x_rdsy_block_:u},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var a=e.data._x_rdsy_resp_,o=void 0===a?"":a,n=JSON.parse(E.default.decrypt(o));console.log("解密后",n),t(n)},fail:function(e){a({error:error})}})}else a({error:L.errMsg.phone[c]})}))}))},a.apiRequestSmsCode=function(e){var t=e.phoneNumber,a=e.ticket,o=e.riskType,i=e.code;return new Promise((function(e,r){Promise.all([(0,k.getDfpToken)(),B()]).then((function(s){var c=T(s,2),d=c[0],u=c[1],l=(0,k.formatDate)(new Date,"yyyy-MM-dd hh:mm:ss"),p={sceneId:"PASSPORT_MINIPROGRAM",stepFlag:"3D58885D2B0CB135703770C03852E8CB",appCode:"409083ba5ff247708b7c75cebd456788",ticket:a,riskType:o,code:i,phoneNum:U.encrypt(t),data:{result:"-1",time:l,channel:"MOBILE",ip:u,userName:t,custNum:"",detect:_.default.getTrack({scene:1}),mode:"1",subMode:11,cntctMobileNum:t,dfpToken:d,orderChannel:I.loginInfo.channel,ways:"duanxindl",miniType:"bD",loginTheme:"miniprogram"}};console.log("加密前",p);var f={_x_rdsy_block_:E.default.encrypt(JSON.stringify(p))};n.request({url:D.default.smsLogin.sendSms,method:"POST",dataType:"json",data:f,header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t);var a=t.data._x_rdsy_resp_,o=void 0===a?"":a,n=JSON.parse(E.default.decrypt(o));console.log("解密后",n),e(n)},fail:function(e){r({error:e})}})}))}))},a.apiCheckIp=function(){return new Promise((function(e,t){function a(t){n.request({url:D.default.accountLogin.getAddress,dataType:"JSON",header:{"content-type":"application/json"},success:function(t){var a=t.data;"string"==typeof a&&(a=JSON.parse(a)),1==a.returnCode&&e(a.ip),e("127.0.0.1")},fail:function(){e("127.0.0.1")}})}(0,k.getDfpToken)().then((function(e){a(e=e)})).catch((function(){a("")}))}))});a.apiCheckAccountNumberNeedVerify=function(e){return new Promise((function(t,a){Promise.all([(0,k.getDfpToken)(),B()]).then((function(o){var i=T(o,2),r=i[0],s=i[1],c=L.verify.account(e);if(0==c){var d={username:e,terminal:"MOBILE",deviceId:r,ip:s||"127.0.0.1",loginTheme:"imgTheme",loginChannel:I.loginInfo.channel,viewType:"json",dfpToken:r,detect:_.default.getTrack({scene:1})};n.request({url:D.default.accountLogin.needVerifyCode,method:"POST",dataType:"json",data:d,header:{"content-type":"application/x-www-form-urlencoded",Cookie:"_device_session_id="+d.deviceId},success:function(e){if(console.log(e,"api.accountLogin.needVerifyCode"),"string"==typeof(e=e.data))try{e=JSON.parse(e)}catch(e){}"string"==typeof e&&("true"===e.toLowerCase()?e=!0:"false"===e.toLowerCase()&&(e=!1)),("boolean"==typeof e||e)&&t(e)},fail:function(e){}})}else a({error:L.errMsg.account[c]})}))}))},a.getVerifyCodeTicket=function(e){return new Promise((function(t,a){(0,k.requestPromise)({url:D.default.accountLogin.getVerifyCodeTicket,data:{username:e}}).then((function(e){var o=e.ticket,n=void 0===o?"":o;n?t(n):a()}))}))},a.checkIsExist=function(e){var t={aliasName:M.encrypt(e)};return new Promise((function(e,a){n.request({url:D.default.smsLogin.checkAlias,method:"POST",dataType:"text",data:t,header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e(t.data)},fail:function(e){a(e)}})}))},a.apiAccountLogin=function(e,t,a){return(0,N.apiBaiduUnionAccountLogin)({username:e,password:t,terminal:"MOBILE",detect:_.default.getTrack({scene:1}),ticket:a})};a.apiQuickBuyCallCart2=function(e,t){console.log(e);var a={number:e.data.count,activityId:e.data.activity.activityId,cartHeadInfo:t};return new Promise((function(t,o){O.default.quickBuy(e,a).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(4,a.data&&a.data.errorInfos&&a.data.errorInfos.length){var n=a.data.errorInfos[0];o(n)}else if("1"===a.code&&a.data&&a.data.result&&"Y"==a.data.result.isSuccess){var i=e.data.itemInfoVo;return void(e.fourth.isVirtual&&i&&i.attachedTypeList&&i.attachedTypeList.length>0&&i.attachedTypeList.some((function(e){return"11"===e.attachedType}))?t({url:"/pages/cart/gamecart/cart2?no="+a.data.result.cart2No}):t({url:"/pages/cart/cart2/cart2?no="+a.data.result.cart2No}))}throw 5,new Error("立即购买失败:"+JSON.stringify(a))})).catch((function(e){o(e)}))}))},a.apiContactService=function(){return new Promise((function(e,t){function a(a){R.setPublicKey(D.default.customerRsa),n.request({url:D.default.customerVistor+"?encryDeviceId="+R.encrypt(a),success:function(a){var o=a.data;o&&"success"==o.status&&o.skipUrl?e(o.skipUrl):t(""),R.setPublicKey(P.default.RASKey)},fail:function(e){console.log(e),R.setPublicKey(P.default.RASKey),t("")}})}(0,k.getDfpToken)().then((function(e){a(e)})).catch((function(){a("")}))}))},a.getNetworkType=function(){return new Promise((function(e,t){n.getNetworkType({success:function(a){var o=a.networkType;console.log(o),"none"==o||"offline"==o?(j.showToast({title:"网络异常，请稍后再试"}),t()):e()},fail:function(){e()}})}))}})),window.define("707",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I="208000201058",P="208000202058",D="208000602045",x={channel:(T=n.getSystemInfoSync(),"ios"==T.platform?"iPhone"==T.brand?I:D:P),terminal:"APP",sysCode:"BaiduMiniProgram",source:"",scene:"logonImg",ip:"127.0.0.1"};t.exports={loginInfo:x,errMap:{MP0001:"创建账号失败",MP0002:"基于会员卡创建账号失败",MP0003:"IP被锁定",MP0004:"手机验证码登录帐号不存在，自动注册失败",MP0005:"小程序token失效",MP0006:"sysCode校验失败",MP0007:"loginTicket无效",MP0008:"loginTicket为空",MP0009:"您输入的图片验证码错误，请重新输入",MP8001:"系统编码为空",MP8002:"终端标识为空",MP8003:"别名为空",MP8004:"数字签名为空",MP8005:"ip地址为空",MP8006:"注册渠道为空",MP8007:"设备编号为空",MP8008:"验证码uuid为空",MP8009:"验证码imgCode为空",MP8010:"短信验证码为空",MP8011:"密码为空",MP8012:"注册来源为空",MP8013:"交易流水为空",MP8014:"苏宁易购账号标识为空",MP8015:"第三方账号标识为空",MP8016:"第三方系统标识为空",MP8017:"ticket为空",MP8018:"第三方系统绑定别名为空",MP8019:"页面签名为空",MP8020:"手机号为空",MP8021:"openId为空",MP8022:"短信模板为空",MP8023:"图片验证码为空或格式错误",MP1001:"账号已存在",MP1002:"账号不存在",MP3001:"验证码错误或是已失效",MP3002:"图片验证码长度错误错误",MP2001:"需要验证码",MP2002:"不需要验证码",MP4001:"短信发送次数已达上限",MP4002:"操作频繁，请稍后再试",MP4003:"短信模板不存在",MP4004:"短信发送失败",MP5001:"短信验证码错误或已失效",MP6001:"易购账号已存在绑定关系",MP6002:"第三方账号已存在绑定关系",MP6003:"不允许重复绑定，绑定失败",MP6004:"绑定账号不存在",MP6009:"绑定失败",MP7001:"查询无绑定关系",MP8101:"数字签名错误",MP8102:"数字签名盐值不存在错误",MP8103:"解密私钥不存在",MP8104:"此场景暂不支持发送短信验证码",MP8105:"系统标识错误",MP9001:"用户别名解密错误",MP9002:"密码解密错误",MP9003:"交易流水号重复",MP9004:"操作已失效，请重试！",MP9997:"服务不可用！",MP9998:"网络异常，请稍后再试！",MP9999:"系统错误"},appCode:"crqLD6X15QCukVGz"}})),window.define("708",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T={phone:function(e){var t=0;return e&&""!=e?0==/1\d{10,10}/.test(e)&&(t=2):t=1,t},smsCode:function(e){var t=0;return e&&""!=e?0==/\d{4,6}/.test(e)&&(t=2):t=1,t},imageVerify:function(e){var t=0;return e?4!=e.length&&(t=2):t=1,t},account:function(e){var t=0;return e&&""!=e||(t=1),t},password:function(e){var t=0;return e&&""!=e?(e.length<6||e.length>20)&&(t=2):t=1,t}},I={phone:["","手机号码不可为空","请填写正确的手机号码"],smsCode:["","请填写正确的短信验证码","请填写正确的短信验证码"],imageVerify:["","图片验证码不可为空","请填写正确的图片验证码"],account:["","请输入苏宁易购账号"],password:["","请输入6-20位易购密码","请输入6-20位易购密码"]},P={};Object.keys(T).forEach((function(e){P[e]=function(t){var a=T[e](t);return 0===a?{success:!0}:{code:a,error:I[e][a]||"未知错误("+e+"-"+a+")"}}})),t.exports={verify:T,errMsg:I,checking:P}})),window.define("710",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={page:"fourth",act:"quick-buy",toLogin:!0,params:{fourth:{initParm:"productId=000000010606656239&shop=0000000000&title=",params:{productId:"000000010606656239",shop:"0000000000",title:""},partNumber:"10606656239",shop:"0000000000",shopParam:"0000000000",selfShopping:!0,coverShow:0,buyLock:!0,loadingPhase1:!1,position:{provinceName:"北京",provinceMDMId:"10",provinceCommerceId:"10",cityName:"北京",cityMDMId:"1000000",cityCommerceId:"9017",cityLESId:"010",districtName:"东城区",districtMDMId:"10000001",districtCommerceId:"10106",districtLESId:"01",isEmpty:!0},partNumberLoaded:"10606656239",iosVirtualGoodsFlag:!1,shareFlag:!0,supplierCode:"0000000000",vendorType:"",hwgType:"",isCShop:!1,zxLogo:!1,isVirtual:!1,passPartNumber:"000000010606656239",panSelf:!0,isHk:!1,isCSSWL:!1,itemType:"3",hdfkFlag:"0",activityType:"4",factorySendFlag:"0",sizeAttribute:"2",isPass:!1,isPackage:!1,isDiscPackage:!0,bundelType:null,businessFlag:"",clusterId:"30193816",ybkFlag:!1,priceType:"4-1",isBook:!1,hdFlag:"",isHwg:!1,cssType:"normal-root",isPg:!1,isHwgZy:!1,isO2o:!1,unsupport:!1,recommendPictureSwitch:!0,priceSalesOrg:"",priceOwnerPlace:"D702",priceVendor:"0010136878",priceVendorCode:"0000000000",brandId:"000060021",brandCode:"0021",categoryIds:"20089-20002-20006",isLYTM:!1,isJW:!1,catalogId:"10051",activitySubType:"1",earliestArriveDate:"20190524",noPrice:!1,published:!0,hasStorage:"1",isShort:!1,actType:"100035",activityTimer:81,HyAddress:!1,cShopName:"苏宁自营",installFlag:"0",shipOffSetText:"23:00前下单，预计明天（5月24日）送达",weight:"0.463kg",pavilion:""},data:{price:{vipPrice:"",vendorCode:"0000000000",accountPlace:"",sendCityId:"",refPrice:"6999.00",processStat:"X",noPriceCausation:"",balanceStartTime:"",onLineStatus:"",netPrice:"5631.00",warrantyList:[{warrantyPrice:"299.00",goodsSupplyCode:"0050000000",costPrice:"369.00",timeLimit:"1",goodsRate:"",goodsCode:"000000000110021792",typeName:"原厂碎屏",goodsType:"YCSP",limitUnit:"年",promotionDoc:"已省70元",promotionFlag:"1",totalRepair:"1",displayOrder:"2",saleType:"A",sellPoint:"苹果原厂屏幕免费换屏一次",repairUnit:"年"},{warrantyPrice:"129.00",goodsSupplyCode:"0050000000",costPrice:"129.00",timeLimit:"6",goodsRate:"",goodsCode:"000000000110020675",typeName:"碎屏保",goodsType:"SPB",limitUnit:"月",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"4",saleType:"A",sellPoint:"免费换屏一次",repairUnit:"年"},{warrantyPrice:"199.00",goodsSupplyCode:"0050000000",costPrice:"199.00",timeLimit:"1",goodsRate:"98",goodsCode:"000000000110020027",typeName:"碎屏保",goodsType:"SPB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"4",saleType:"A",sellPoint:"免费换屏一次",repairUnit:"年"},{warrantyPrice:"369.00",goodsSupplyCode:"0050000000",costPrice:"369.00",timeLimit:"2",goodsRate:"",goodsCode:"000000000110025116",typeName:"碎屏保",goodsType:"SPB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"4",saleType:"A",sellPoint:"免费换屏一次",repairUnit:"年"},{warrantyPrice:"369.00",goodsSupplyCode:"0050000000",costPrice:"369.00",timeLimit:"2",goodsRate:"",goodsCode:"000000000110023131",typeName:"全保修",goodsType:"QBX",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"5",saleType:"A",sellPoint:"性能故障意外故障全面保修",repairUnit:"年"},{warrantyPrice:"469.00",goodsSupplyCode:"0050000000",costPrice:"469.00",timeLimit:"3",goodsRate:"",goodsCode:"000000000110023258",typeName:"全保修",goodsType:"QBX",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"5",saleType:"A",sellPoint:"性能故障意外故障全面保修",repairUnit:"年"},{warrantyPrice:"199.00",goodsSupplyCode:"0050000000",costPrice:"199.00",timeLimit:"1",goodsRate:"",goodsCode:"000000000110023858",typeName:"整机保",goodsType:"ZJB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"6",saleType:"A",sellPoint:"整机性能故障免费维修",repairUnit:"年"},{warrantyPrice:"299.00",goodsSupplyCode:"0050000000",costPrice:"299.00",timeLimit:"2",goodsRate:"",goodsCode:"000000000110023864",typeName:"整机保",goodsType:"ZJB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"6",saleType:"A",sellPoint:"整机性能故障免费维修",repairUnit:"年"},{warrantyPrice:"389.00",goodsSupplyCode:"0050000000",costPrice:"389.00",timeLimit:"3",goodsRate:"",goodsCode:"000000000110023870",typeName:"整机保",goodsType:"ZJB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"6",saleType:"A",sellPoint:"整机性能故障免费维修",repairUnit:"年"},{warrantyPrice:"49.00",goodsSupplyCode:"0050000000",costPrice:"49.00",timeLimit:"1",goodsRate:"",goodsCode:"000000000110021987",typeName:"手机电池保",goodsType:"SJDCB",limitUnit:"年",promotionDoc:"",promotionFlag:"0",totalRepair:"1",displayOrder:"7",saleType:"A",sellPoint:"电池保修一年",repairUnit:"年"}],deptNo:"0001",finalPayment:"",salesOrg:"",pgPrice:"",factorySendFlag:"0",plantCode:"DX03",pgNum:"",businessField1:"93",manageInvFlag:"0",promotionPrice:"5588.00",bookPrice:"",pgActionId:"",bigPromoPrice:"",singlePrice:"",bigPromoTextPrice:"",bigPromoId:"",promoActType:"",promoActId:"",bookActionID:"",bookPriceLabel:"",marketVipPriceType:"",marketVipPrice:"",sendAvalidTime:"1558607464000",serveCodeList:{},rentPrice:"",bookGoodID:"",usePrice:"",vendorType:"",balanceEndTime:"",invStatus:"1",chargePlantCode:"D702",bookPriceSwell:"",juId:"14014313",partNumber:"000000010606656239",noPriceCode:"",priceType:"4-1",ownerPlace:"D702",vendor:"0010136878",govPrice:"",purChaseType:""},images:[{url:"https://imgservice.suning.cn/uimg1/b2c/image/zkm9YPyplxFJt5YmWfxAIQ.jpg_800h_800w_4e",bigUrl:"https://imgservice.suning.cn/uimg1/b2c/image/zkm9YPyplxFJt5YmWfxAIQ.jpg_800h_800w_4e"},{url:"https://imgservice.suning.cn/uimg1/b2c/image/jduJgYSYwZG_ywB83qZMWw.jpg_800h_800w_4e",bigUrl:"https://imgservice.suning.cn/uimg1/b2c/image/jduJgYSYwZG_ywB83qZMWw.jpg_800h_800w_4e"},{url:"https://imgservice.suning.cn/uimg1/b2c/image/_Y8WFNgVDc6CyjorKL4A4w.jpg_800h_800w_4e",bigUrl:"https://imgservice.suning.cn/uimg1/b2c/image/_Y8WFNgVDc6CyjorKL4A4w.jpg_800h_800w_4e"},{url:"https://imgservice.suning.cn/uimg1/b2c/image/mUZbMf9gnsy2KW-Z8QNgPw.jpg_800h_800w_4e",bigUrl:"https://imgservice.suning.cn/uimg1/b2c/image/mUZbMf9gnsy2KW-Z8QNgPw.jpg_800h_800w_4e"},{url:"https://imgservice.suning.cn/uimg1/b2c/image/NOionXKBlkVWyN8qbM8RfA.jpg_800h_800w_4e",bigUrl:"https://imgservice.suning.cn/uimg1/b2c/image/NOionXKBlkVWyN8qbM8RfA.jpg_800h_800w_4e"}],option:{productId:"000000010606656239",shop:"0000000000",title:""},activity:{buyCounter:"928",bigPoly:"1",progressBar:"",progressNum:"300",limitBuyNum:"1",activityPrice:"5588.00",activityId:"14014313",hidePrice:!0,hasActivity:!0,status:{dd:"01",hh:"05",mm:28,ss:50,stage:1,text:"距结束"},ready:!0,hideCart:!1},package:{},count:1,shop:{targetShop:"0030000400",shopLogo:"http://image.suning.cn/uimg/cshop/logo/000000000030000400.jpg?1554862380761",shopName:"Apple产品苏宁自营店"},pageUrl:"/pages/fourth/fourth?productId=000000010606656239&shop=0000000000&title=",pageid:"140",title:"Apple iPhone XR 128GB 白色 移动联通电信4G全网通手机 双卡双待",itemInfoVo:{weight:"0.463",vendorCode:"",errDesc:"Success",itemPrice:"0.00",businessFlag:"",itemName:"Apple iPhone XR 128GB 白色 移动联通电信4G全网通手机 双卡双待",itemType:"10",brandCode:"0021",attachedTypeList:[{attachedValue:"000000000945044090",attachedType:"1"},{attachedValue:"000000000945044173",attachedType:"1"},{attachedValue:"000000000945045532",attachedType:"1"},{attachedValue:"000000000945045577",attachedType:"1"},{attachedValue:"000000000945046220",attachedType:"1"},{attachedValue:"000000000945046941",attachedType:"1"},{attachedValue:"000000000945046997",attachedType:"1"},{attachedValue:"000000000945048498",attachedType:"1"},{attachedValue:"000000000945048514",attachedType:"1"},{attachedValue:"000000000945048933",attachedType:"1"},{attachedValue:"000000000945048937",attachedType:"1"},{attachedValue:"000000000945050633",attachedType:"1"},{attachedValue:"000000000945054216",attachedType:"1"},{attachedValue:"000000000945055866",attachedType:"1"}],published:"1",itemDisplayName:"Apple iPhone XR 128GB 白色 移动联通电信4G全网通手机 双卡双待",deleteFlag:"0",sizeAttribute:"2",brandName:"Apple",categoryCode:"R1901001",imageCount:"5",partNumber:"000000010606656239",cmmdtyType:"Z001",volume:"802.75",errCode:"0",brandId:"000060021"}}}}})),window.define("713",(function(e,t,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=L(e(714)),P=L(e(716)),D=L(e(717)),x=L(e(56)),_=L(e(387)),k=e(26);function L(e){return e&&e.__esModule?e:{default:e}}function N(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=e(135),A=e(17),R=e(45),M=e(25),U=M.Uuid,j=M.MD5,B=e(718),F=B.verify,V=B.errMsg,H=e(77).saSendLog,q=e(42).getDfpToken,G=e(66).baseLoginInfo;(new k.JSEncrypt).setPublicKey(R.RASKey);var Y,z="重新获取",W=/^(\d{3})\d*(\d{2})$/;function J(e,t){throw x.default.snBusError(t),new Error(e)}function Q(e){O.showToast({title:e})}Page({data:{pageid:"5WWgS",saPgnm:"pgtitle=微信小程序新版联合登录绑定页;pageid=5WWgS;pgcate=10009;",phone:"",needVerify:!1,imageVerifyCode:"",imageVerifyUrl:"",smsCode:"",isSendSms:!1,sendSmsTitle:"获取验证码",count:"",isNeedSoundVerify:!1,HasSendingSoundSms:!1,isAccept:!1,snToastShowFlag:!1,snToastTitle:"",isShowCallDialog:!1,isShowYFBDialog:!1,isShowSNDialog:!1,createChannel:"",canSubmit:!1,isHiddenClearItem:!1,isCanNotEdit:!1},autoclick:function(e){H("click",{event:e})},onLoad:function(e){if(H("pageview",{ext:{}}),this.from=e.from,e.phone){var t=e.phone,a=e.phone.replace(W,"$1****$2");this.setData({phone:a,quickPhone:t,isCanNotEdit:!0,isHiddenClearItem:!0})}"au"==e.from&&(this.setData({pageType:"au",isAccept:!0}),i.setNavigationBarTitle({title:"升级正式账号"})),e.target&&this.setData({target:e.target})},onShow:function(){this.isNeedImageVerify()},phoneInput:function(e){var t=this,a=e.detail.value;this.setData({phone:a},(function(){return(0,D.default)(t)}))},clearItem:function(e){var t=e.currentTarget.dataset.name;this.setData(E({},t,""))},isNeedImageVerify:function(){var e=this;q().then((function(t){(0,P.default)().then((function(a){var o={ip:a||G.ip,sysCode:G.sysCode,dfpToken:t||"",detect:R.pdToken,createChannel:G.channel,createSource:G.createSource};I.default.isNeedImageVerify(o,e)})).catch((function(e){return J(e,"b11")}))})).catch((function(e){return J(e,"b13")}))},reloadImageVerifyUrl:function(){var e=U();this.setData({imageVerifyUrl:A.register.vsc+"?uuid="+e,currentUUid:e,imageVerifySuccess:!1})},imageVerifyInput:function(e){var t=this;this.setData({imageVerifyCode:e.detail.value},(function(){return(0,D.default)(t)}))},imageVerifyBlur:function(e){},smsCodeInput:function(e){var t=this,a=e.detail.value;this.setData({smsCode:a},(function(){return(0,D.default)(t)}))},smsBlur:function(e){},checkImgCode:function(){var e=this;return new Promise((function(t,a){(0,P.default)().then((function(o){var n={sysCode:G.sysCode,imgCode:e.data.imageVerifyCode,imgUuid:e.data.currentUUid,ip:o||G.ip,dfpToken:"",detect:R.pdToken,createChannel:G.channel,createSource:G.createSource};q().then((function(e){n.dfpToken=e,I.default.checkImgCode(n,t)})).catch((function(e){J(e,"b13"),a(e)}))})).catch((function(e){return J(e,"b11")}))}))},getSmsCode:function(){var e=N(_.default.mark((function e(t){var a,o,n,i;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.next=3,this.checkImgCode();case 3:o=e.sent,n=t.currentTarget.dataset.type,i=void 0,(i=a.data.quickPhone?F.phone(a.data.quickPhone):F.phone(a.data.phone))?Q(V.phone[i]):!0!==o?Q("图形验证码错误，请重新输入"):"message"===n?a.requestSmsCode():a.requestSmsCode(n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),requestSmsCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this;console.log("sendSms phone is: ",t.data.phone);var a=t.data.quickPhone,o=void 0;a?(0,P.default)().then((function(n){o={ip:n||G.ip,sysCode:G.sysCode,phoneNumber:a,dfpToken:"",detect:R.pdToken,sign:j(a+G.sysCode+R.wechatSalt),uuid:t.data.currentUUid,imgCode:t.data.imageVerifyCode,createChannel:G.channel,createSource:G.createSource,smsType:e},q().then((function(a){o.dfpToken=a,I.default.requestSmsCode(o,t,e)})).catch((function(e){J(e,"b13"),console.log("获取token失败",e)}))})).catch((function(e){return J(e,"b11")})):(0,P.default)().then((function(a){o={ip:a||G.ip,sysCode:G.sysCode,phoneNumber:t.data.phone,dfpToken:"",detect:R.pdToken,sign:j(t.data.phone+G.sysCode+R.wechatSalt),uuid:t.data.currentUUid,imgCode:t.data.imageVerifyCode,createChannel:G.channel,createSource:G.createSource,smsType:e},q().then((function(a){o.dfpToken=a,I.default.requestSmsCode(o,t,e)})).catch((function(e){J(e,"b13"),console.log("获取token失败",e)}))})).catch((function(e){return J(e,"b11")}))},doCountDown:function(){var e=60,t=this;this.setData({count:e,isSendSms:!0});var o=a((function(){e<40&&t.setData({isNeedSoundVerify:!0}),e>0?t.setData({count:--e}):(clearInterval(o),t.setData({isSendSms:!1,sendSmsTitle:z}))}),1e3)},checkSmsCode:function(){var e=this,t=this.data.smsCode;return new Promise((function(a,o){var n=e,i=n.data.quickPhone,r={},s=F.smsCode(t);r.phoneNumber=i||n.data.phone,0===s&&(r.createChannel=G.channel,r.createSource=G.createSource,r.sysCode=G.sysCode,r.smsCode=t,r.imgCode=n.data.imageVerifyCode,r.uuid=n.data.currentUUid,r.sign=j(r.phoneNumber+t+R.wechatSalt),q().then((function(e){r.dfpToken=e,I.default.checkSmsCode(r,n,a,o)})))}))},submitBind:(Y=N(_.default.mark((function e(){var t,a,o,n;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(t=this).data.quickPhone,(o={}).phoneNum=a||t.data.phone,0===F.phone(o.phoneNum)){e.next=6;break}return e.abrupt("return",Q("手机号输入不正确"));case 6:return e.next=8,t.checkImgCode();case 8:if(!0===e.sent){e.next=11;break}return e.abrupt("return",Q("图形验证码错误，请重新输入"));case 11:if(0===(n=F.smsCode(t.data.smsCode))){e.next=14;break}return e.abrupt("return",Q(V.smsCode[n]));case 14:return e.next=16,t.checkSmsCode();case 16:if(!0===e.sent){e.next=19;break}return e.abrupt("return",Q("短信验证码错误，请重新输入"));case 19:(0,P.default)().then((function(e){"au"==t.from&&(o.custNo=i.getStorageSync("custNo")||""),o.miniToken=i.getStorageSync("quick_miniToken"),o.miniToken=(o.miniToken+"").substr(0,32),o.createChannel=G.channel,o.createSource=G.createSource,o.sign=j(o.phoneNum+t.data.smsCode+R.wechatSalt),o.sysCode=G.sysCode,o.smsCode=t.data.smsCode,o.imgCode=t.data.imageVerifyCode,o.uuid=t.data.currentUUid,o.ip=e||G.ip,o.detect=R.pdToken,o.dfpToken="",q().then((function(e){o.dfpToken=e,I.default.regBindLogin(o,t)})).catch((function(e){J(e,"b13"),console.log("获取token失败",e)}))})).catch((function(e){return J(e,"b11")}));case 20:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)}),toggleAcceptStatus:function(){var e=this;this.setData({isAccept:!this.data.isAccept},(function(){return(0,D.default)(e)}))},showAgreementDialog:function(e){var t,a="isShow"+e.currentTarget.dataset.id+"Dialog";console.log("id",a),this.setData((E(t={},a,!0),E(t,"slideAnimate","slide-up"),t))},closeAgreementDialog:function(){this.setData({isShowSNDialog:!1,isShowYFBDialog:!1})},closeCallDialog:function(){this.setData({isShowCallDialog:!1})},protocolYfb:function(){i.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbxy.html")})},protocolHyzc:function(){i.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/snyghyzc.html")})},protocolYszc:function(){i.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yssm.html")})},protocolYfbYszc:function(){i.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbyszc.html")})}})})),window.define("714",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T=P(e(715)),I=P(e(56));function P(e){return e&&e.__esModule?e:{default:e}}var D=e(135),x=e(17),_=e(36),k=e(77).saSendLog,L=e(66).wechatErrMap,N=_(n.request);function E(e,t){throw I.default.snBusError(t),new Error(e)}function O(e){D.showToast({title:e})}a.default={isNeedImageVerify:function(e,t){var a=t;N({url:x.wechatUnion.needVerifyCode,method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){e=e.data,a.setData({hasCheckPhone:!0}),e&&e.code&&"MP2001"===e.code&&(a.reloadImageVerifyUrl(),a.setData({needVerify:!0}))})).catch((function(e){return console.log(e)}))},checkImgCode:function(e,t){var a=e;N({url:x.wechatUnion.checkImgCode,method:"POST",dataType:"json",data:a,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){(e=e.data||"")&&e.code&&"0000"===e.code?t(!0):t(e.code)})).catch((function(e){return E(e,"b17")}))},checkSmsCode:function(e,t,a){var o=t;N({url:x.wechatUnion.checkSmsMsg,method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){(e=e.data)&&e.code&&"0000"===e.code?(o.setData({checkSmsCodeSuccess:!0}),a(!0)):(o.setData({checkSmsCodeSuccess:!1}),a(e.code))})).catch((function(e){return E(e,"b16")}))},requestSmsCode:function(e,t,a){var o=t;N({url:x.wechatUnion.sendSmsMsg,method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){(e=e.data)&&e.code&&"0000"===e.code?"voice"===a?o.setData({HasSendingSoundSms:!0,isShowCallDialog:!0}):(O("验证码已发送，5分钟内有效"),o.doCountDown()):"13001"===e.code?o.setData({HasSendingSoundSms:!1,isShowCallDialog:!1},(function(){return O(L[e.code])})):"1118"===e.code?O(e.desc):O(L[e.code])})).catch((function(e){return E(e,"b15")}))},regBindLogin:function(e,t){N({url:x.quickLogin+"/regBindLogin.do",method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){if("0"===e.data.code&&e.data.cookie){try{n.setStorageSync("quick_cookieStr",e.data.cookieString||""),n.setStorageSync("quick_cookieObj",e.data.cookie||""),n.setStorageSync("custNo",e.data.cookie&&e.data.cookie.custno||"")}catch(e){throw I.default.snBusError("b4"),new Error("设置cookie失败",e)}t.data.target?n.redirectTo({url:decodeURIComponent(t.data.target)}):(0,T.default)(t),k("register",{reg_uid:e.data.cookie.custno})}else if("MPBSS01"===e.data.code)n.navigateTo({url:"/pages/auth/index"});else if("MP1002"===e.data.code)n.showToast({icon:"none",title:"当前账号异常[MP1002]"});else if("MP1003"===e.data.code)n.redirectTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount"});else if("MP1004"===e.data.code)n.showToast({icon:"none",title:"当前账号异常[MP1004]"});else if(e.data.loginErr&&e.data.loginErr.errorCode){var a=e.data.loginErr.errorCode,o=e.data.loginErr.snapshotId;"highRiskAccount"===a||"suspectedHighRiskAccount"===a||"maliciousRegister"===a||"suspiciousLogin"===a?("highRiskAccount"===a&&I.default.snBusError("b7"),"maliciousRegister"===a&&I.default.snBusError("b9"),n.navigateTo({url:"/packageA/pages/riskRelease/riskRelease?errorCode="+a+"&snapshotId="+encodeURIComponent(o)})):O("登录异常，请至PC或APP进行处理")}else O("网络问题，请稍后再试")})).catch((function(e){return E(e,"b4")}))}}})),window.define("715",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var t=e.data.phone,a=t.replace(/^(\d{3})\d*(\d{2})$/,"$1****$2");n.setStorageSync("regPhone",a),n.redirectTo({url:"../bindSuccess/success"})}})),window.define("716",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return new Promise((function(e,t){I({url:T.getAddress,dataType:"JSON",header:{"content-type":"application/json"}}).then((function(t){try{var a=JSON.parse(t);1===a.returnCode?e(a.ip):console.log("返回状态码不等于1")}catch(e){throw new Error("ip地址获取错误")}})).catch((function(e){return t(e)}))}))};var T=e(17),I=e(62).requestPromise})),window.define("717",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var t=e,a=!0,o=void 0;o=t.data.quickPhone?t.data.quickPhone:t.data.phone;var n=t.data.smsCode,i=t.data.needVerify,r=t.data.imageVerifyCode;0!==T.phone(o)&&(a=!1);0!==T.smsCode(n)&&(a=!1);i&&0!==T.imageVerify(r)&&(a=!1);t.data.isAccept||(a=!1);t.setData({canSubmit:a})};var T=e(718).verify})),window.define("718",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={verify:{phone:function(e){return e&&""!==e&&!1!==/1\d{10,10}/.test(e)?0:1},smsCode:function(e){var t=0;return e&&""!==e?!1===/\d{4}/.test(e)&&(t=2):t=1,t},imageVerify:function(e){return e&&""!==e?0:1}},errMsg:{phone:["","手机号码格式不正确"],smsCode:["","短信验证码不可为空","短信验证码错误，请重新输入"],imageVerify:["","图形验证码错误，请重新输入"]}}})),window.define("721",(function(e,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,I){"use strict";var P=e(26),D=e(17),x=e(45),_=e(25).getDfpToken;e(709).cookieHandle;(new P.JSEncrypt).setPublicKey(x.RASKey);var k=e(25),L=k.Uuid,N=(k.requestPromise,e(722)),E=N.verify,O=N.errMsg,A=e(47),R=A.baseLoginInfo,M=A.baiduErrMap,U=e(77).saSendLog,j=s();Page({data:{pageid:"omw9t",saPgnm:"pgtitle=百度小程序联合登录绑定页;pageid=omw9t;pgcate=10009;",sendBtnText:"获取验证码",canSubmit:!1,showPassWord:!1,isSure:!0,testText:"test",showSNDialog:!1,showYFBDialog:!1,sendingsms:!1,sendingsmsTimeout:60,sendVoicesmsTimeout:60,needShowSoundsms:!1,sendingSoundsms:!1},autoclick:function(e){U("click",{event:e})},onShow:function(){U("pageview",{ext:{}}),r.hideLoading(),this.inputChanged=!0},onReady:function(){},phoneInput:function(e){var t=e.detail.value;this.setData({phone:t}),this.checkData(),this.inputChanged=!0},phoneBlur:function(e){if(this.inputChanged){var t=e.detail.value;console.log("value is:",t),this.setData({hasCheckPhone:!1}),this.checkNeedVerify(t)}},checkNeedVerify:function(e){var t=this,a=E.phone(e);if(0==a){var o=function(e){r.request({url:D.baiduUnion.needVerifyCode,method:"POST",dataType:"json",data:n,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){e=e.data,t.setData({hasCheckPhone:!0}),e&&e.code&&"MP2001"==e.code?(t.reloadImageVerifyUrl(),t.setData({needVerify:!0})):e&&e.code&&"MP2002"!=e.code&&r.showToast({title:M[e.code],icon:"none",duration:3e3})},fail:function(e){}})},n={ip:j.globalData.ip||R.ip,sysCode:R.sysCode,phoneNumber:e,deviceId:x.pdToken,dfpToken:"",createChannel:R.channel};console.log(n);_().then((function(e){n.dfpToken=e,o()})).catch((function(){o()}))}else r.showToast({title:O.phone[a],icon:"none",duration:3e3})},imageVerifyInput:function(e){var t=e.detail.value;this.setData({imageVerify:t}),this.checkData(),this.inputChanged=!0,console.log("imageVerifyInput inputChanged:"+this.inputChanged),4==t.length&&this.imageVerifyBlur(e)},imageVerifyBlur:function(e){if(console.log("imageVerifyBlur inputChanged:"+this.inputChanged),this.inputChanged){var t=e.detail.value,a=this;if(this.hasCheckImageVerify=!1,0==E.imageVerify(t)){var o=function(e){r.request({url:D.baiduUnion.checkImgCode,method:"POST",dataType:"json",data:n,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){a.hasCheckImageVerify=!0,(e=e.data)&&e.code&&"0000"==e.code?(a.setData({imageVerifySuccess:!0}),a.inputChanged=!1):(a.setData({imageVerifySuccess:!1}),r.showToast({title:M[e.code],icon:"none",duration:3e3})),a.checkData()},fail:function(e){a.checkData()}})},n={sysCode:R.sysCode,imgCode:t,imgUuid:a.data.currentUUid,ip:j.globalData.ip||R.ip,deviceId:x.pdToken,dfpToken:"",createChannel:R.channel};_().then((function(e){n.dfpToken=e,o()})).catch((function(){o()}))}}},reloadImageVerifyUrl:function(){var e=L();this.setData({imageVerifyUrl:D.register.vsc+"?uuid="+e,currentUUid:e,imageVerifySuccess:!1})},smsCodeInput:function(e){var t=e.detail.value;this.setData({smsCode:t}),this.checkData(),this.inputChanged=!0,6==t.length&&this.checkSmsCode(e)},getSmsCode:function(e){this.data.needVerify;var t=E.phone(this.data.phone),a=E.imageVerify(this.data.imageVerify);this.data.loadingSmsCode||(t?r.showToast({title:O.phone[t],icon:"none",duration:3e3}):this.data.hasCheckPhone&&(this.data.needVerify&&a?r.showToast({title:O.imageVerify[a],icon:"none",duration:3e3}):(!this.data.needVerify||this.hasCheckImageVerify||this.data.imageVerifySuccess)&&this.requestSmsCode()))},requestSmsCode:function(){var e=this;console.log("sendSms phone is: ",e.data.phone);var t={ip:j.globalData.ip||R.ip,sysCode:R.sysCode,phoneNumber:e.data.phone,deviceId:x.pdToken,dfpToken:"",sign:(0,P.md5)(e.data.phone+R.sysCode+x.baiduSalt),uuid:e.data.currentUUid,imgCode:e.data.imageVerify,createChannel:R.channel};function a(a){r.request({url:D.baiduUnion.sendSmsMsg,method:"POST",dataType:"json",data:t,header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){(t=t.data)&&t.code&&"0000"==t.code?(e.doCountDown(),e.setData({loadingSmsCode:!0}),r.showToast({title:"验证码已发送到您手机，5分钟内有效",icon:"none"})):r.showToast({title:M[t.code],icon:"none",duration:3e3})},fail:function(e){}})}_().then((function(e){t.dfpToken=e,a(e)})).catch((function(){a("")}))},checkSmsCode:function(e){if(this.inputChanged){var t=e.detail.value,a=this;if(0==E.smsCode(t)){var o=function(e){r.request({url:D.baiduUnion.checkSmsMsg,method:"POST",dataType:"json",data:n,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){(e=e.data)&&e.code&&"0000"==e.code?(a.setData({checkSmsCodeSuccess:!0}),a.inputChanged=!1,a.checkData()):(r.showToast({title:M[e.code],icon:"none",duration:3e3}),a.setData({checkSmsCodeSuccess:!1}),a.checkData())},fail:function(e){a.setData({checkSmsCodeSuccess:!1}),a.checkData()}})},n={sysCode:R.sysCode,smsCode:t,imgCode:a.data.imageVerify,uuid:a.data.currentUUid,phoneNumber:a.data.phone,sign:(0,P.md5)(a.data.phone+t+x.baiduSalt),ip:j.globalData.ip||R.ip,deviceId:x.pdToken,dfpToken:"",createChannel:R.channel};_().then((function(e){n.dfpToken=e,o()})).catch((function(){o()}))}else r.showToast({title:"请输入正确的短信验证码",icon:"none",duration:3e3})}},doCountDown:function(){var e=60,t=this;this.setData({sendBtnText:e+"s"});var o=a((function(){e>0?(e--,t.setData({sendBtnText:e+"s"})):(clearInterval(o),t.setData({sendBtnText:"重新获取",loadingSmsCode:!1}))}),1e3)},checkData:function(){var e=this;t((function(){var t=!0,a=e.data.phone,o=e.data.imageVerify,n=e.data.smsCode,i=e.data.needVerify;0!=E.phone(a)&&(t=!1),0!=E.smsCode(n)&&(t=!1),i&&0!=E.imageVerify(o)&&(t=!1),e.data.needVerify&&!e.data.imageVerifySuccess&&(t=!1),e.data.checkSmsCodeSuccess||(t=!1),e.data.isSure||(t=!1),e.setData({canSubmit:t})}),0)},doBind:function(){this.data;if(!this.data.canSubmit)return!1;this.doSubmitBind()},doSubmitBind:function(){var e={miniToken:r.getStorageSync("mpbsstoken"),createChannel:R.channel,sign:(0,P.md5)(this.data.phone+this.data.smsCode+x.baiduSalt),sysCode:R.sysCode,phoneNumber:this.data.phone,smsCode:this.data.smsCode,imgCode:this.data.imageVerify,uuid:this.data.currentUUid,ip:j.globalData.ip||R.ip,deviceId:x.pdToken,dfpToken:""};function t(t){r.request({url:D.baiduUnion.regAndBind,method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){e.data.loginTicket?(r.setStorageSync("ticket",e.data.loginTicket),r.redirectTo({url:"/pages/my/bindSuccess/success"})):r.showToast({title:M[e.data.code],icon:"none",duration:3e3})},fail:function(e){}})}_().then((function(a){e.dfpToken=a,t(a)})).catch((function(){t("")}))},testPay:function(){},showRegDialog:function(e){var t=e.currentTarget.id;this.setData({showSNDialog:!1,showYFBDialog:!1}),"SN"==t?this.setData({showSNDialog:!0,slideAnimate:"slide-up"}):"YFB"==t&&this.setData({showYFBDialog:!0,slideAnimate:"slide-up"})},closeRegDialog:function(){this.setData({showSNDialog:!1,showYFBDialog:!1})},toggleReg:function(e){var t=e.detail.value&&e.detail.value.length>0;this.setData({isSure:t}),this.checkData()}})})),window.define("722",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";t.exports={verify:{phone:function(e){var t=0;return e&&""!=e?0==/1\d{10,10}/.test(e)&&(t=2):t=1,t},smsCode:function(e){var t=0;return e&&""!=e?0==/\d{4,6}/.test(e)&&(t=2):t=1,t},imageVerify:function(e){var t=0;return e&&""!=e||(t=1),t},account:function(e){var t=0;return e&&""!=e||(t=1),t},password:function(e){var t=0;return e&&""!=e?(e.length<6||e.length>20)&&(t=2):t=1,t}},errMsg:{phone:["","手机号码不可为空","请填写正确的手机号码"],smsCode:["","短信验证码不可为空","请填写正确的短信验证码"],imageVerify:["","图片验证码不可为空"],account:["","账号不可为空"],password:["","密码不可为空","请填写正确的密码"]}}})),window.define("725",(function(e,t,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(26);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=e(25),x=D.requestPromise,_=D.Uuid,k=e(17),L=(e(8),e(45)),N=e(135),E={message:"WCHAT_MINI_PROGRAM",voice:"WCHAT_MINI_PROGRAM_VOICE"},O="message",A="voice",R=null,M=null,U=!1,j="获取验证码",B="重新获取";function F(e){return/^[1]\d{10}$/.test(e)}var V=L.ip,H=L.deviceSessionId,q=null,G=L.createSource,Y=r();Page({data:{slideAnimate:"",showCallDialog:!1,showSNDialog:!1,showYFBDialog:!1,needPicCode:!1,sendSmsTitle:j,picCodeSrc:"",sendingsms:!1,sendingsmsTimeout:60,sendVoicesmsTimeout:60,needShowSoundsms:!1,sendingSoundsms:!1,isSure:!0,telephone:"",telsms:"",imgsms:"",currentUUid:""},showCallDialog:function(){this.setData({showCallDialog:!0})},closeCallDialog:function(){this.setData({showCallDialog:!1})},showRegDialog:function(e){var t=e.currentTarget.id;this.setData({showSNDialog:!1,showYFBDialog:!1}),"SN"==t?this.setData({showSNDialog:!0,slideAnimate:"slide-up"}):"YFB"==t&&this.setData({showYFBDialog:!0,slideAnimate:"slide-up"})},closeRegDialog:function(){this.setData({showSNDialog:!1,showYFBDialog:!1})},toggleReg:function(e){var t=e.detail.value&&e.detail.value.length>0;this.setData({isSure:t})},getSMS:function(e){var t,o=this.data.telephone,n=this.data.currentUUid,i=this.data.imgsms,r=e.currentTarget.dataset.type,s=this;if(this.data.sendingsms&&r===O||U)console.log("lock");else if(0!=o.length)if(F(o))if(U=!0,r===O&&(s.setData({needShowSoundsms:!1}),s._initSendVoiceSms()),this.data.needPicCode){if(!i)return s.showTips("请输入验证码！"),void(U=!1);var c=function(){U=!1,s.showTips("验证码不正确，请重新输入！"),s.changePicCode()};(t={code:i,uuid:n,delFlag:0},x({url:k.register.vsc_validate,method:"get",dataType:"jsonp",data:t})).then((function(e){e=e.replace(/'/g,'"');try{e=JSON.parse(e)}catch(e){console.error(e)}"true"===(e=e&&e[0]||{}).result||!0===e.result?d():c()})).catch((function(e){c()}))}else d();else s.showTips("格式不正确，请您输入正确的手机号！");else s.showTips("请输入手机号！");function d(){var e=E[r],t={telephone:o,scene:e,uuid:n||"",imgCode:i||""};e===E.message?s._startTelTimeout():(s.setData({sendingSoundsms:!0,needShowSoundsms:!1}),s._clearVoiceTimeout(),M=a((function(){var e=s.data.sendVoicesmsTimeout;0==e&&(s._clearVoiceTimeout(),s._initSendVoiceSms()),s.setData({sendVoicesmsTimeout:e-1})}),1e3)),function(e){var t=(0,I.md5)(e.telephone+e.scene+L.registerMd5);return x({url:k.register.sendsmc,method:"POST",data:{ip:V,scene:e.scene,phoneNumber:e.telephone,deviceSessionId:H,createChannel:q,sign:t,uuid:e.uuid,imgCode:e.imgCode}})}(t).then((function(e){s._handleReceiveSMS(e,r)})).catch((function(e){console.error(e),U=!1}))}},changePicCode:function(){var e=_();this.setData({picCodeSrc:k.register.vsc+"?uuid="+e,currentUUid:e})},_handleReceiveSMS:function(e,t){var a=e.code;U=!1,"LRI2001"==a||"LRI2002"==a?t==O?this.showTips("验证码已经发送到您手机，五分钟内有效"):t==A&&this.showCallDialog():(this._clearVoiceTimeout(),this._clearTelTimeout(),this._initSendSms(),this._initSendVoiceSms(),this.showTips(e.msg))},_startTelTimeout:function(){var e=this;this.setData({sendingsms:!0}),this._clearTelTimeout(),R=a((function(){var t=e.data.sendingsmsTimeout;if(1===t)return e._clearTelTimeout(),void e._initSendSms();40===t&&e.setData({needShowSoundsms:!0}),e.setData({sendingsmsTimeout:t-1})}),1e3)},_initSendSms:function(){this.setData({sendSmsTitle:B,sendingsmsTimeout:60,sendingsms:!1})},_initSendVoiceSms:function(){this.setData({sendVoicesmsTimeout:60,sendingSoundsms:!1})},_clearTelTimeout:function(){R&&(clearInterval(R),R=null)},_clearVoiceTimeout:function(){M&&(clearInterval(M),M=null)},changeValue:function(e){var t=e.detail.value,a=e.currentTarget.dataset.name;this.setData(P({},a,t))},clearItem:function(e){var t=e.currentTarget.dataset.name;this.setData(P({},t,""))},submitBind:function(){var e=this.data,t=e.isSure,a=e.telephone,o=e.telsms,n=e.imgsms,r=e.currentUUid,s=e.needPicCode,c=this;if(t)if(0!=a.length)if(F(a))if(!s||n)if(o){try{i.getStorageSync("wxInfo")}catch(e){}var d="";try{d=i.getStorageSync("token")}catch(e){console.error(e)}if(Y.globalData.hasAuth&&d){var u,l,p={telephone:a,smsCode:o,uuid:r||"",imgCode:n||"",token:d};this.showLoading(),(u=p,l=(0,I.md5)(u.telephone+u.smsCode+L.registerMd5),x({url:k.register.bind,method:"POST",data:{ip:V,scene:"WCHAT_MINI_PROGRAM",phoneNumber:u.telephone,deviceSessionId:H,createChannel:q,createSource:G,sign:l,smsCode:u.smsCode,token:u.token,uuid:u.uuid,imgCode:u.imgCode}})).then((function(e){c.hideLoading(),"LRI0000"===e.code?c.goSuccess():"LRI8006"===e.code?(c.setData({needPicCode:!0}),c.changePicCode()):c.showTips(e.msg)})).catch((function(){c.hideLoading(),c.showTips("系统异常，请重试")}))}else c.showTips("获取用户信息失败，请删除小程序程序获取用户信息")}else c.showTips("请输入手机验证码！");else c.showTips("请输入验证码！");else c.showTips("格式不正确，请您输入正确的手机号！");else c.showTips("请输入手机号！")},onLoad:function(e){var t=this;q=function(){var e="208000201041",t="208000202041",a={};try{a=i.getSystemInfoSync()||{}}catch(e){}var o=(a.system+"").toLowerCase();return"-1"!=o.indexOf("ios")?t:"-1"!=o.indexOf("android")?e:t}(),x({url:k.register.verifyCode,method:"POST",data:{ip:V,deviceSessionId:H,createChannel:q}}).then((function(e){"LRI1001"===e.code&&(t.setData({needPicCode:!0}),t.changePicCode())})).catch((function(){}))},goSuccess:function(){var e=this.data.telephone,t=i.getStorageSync("userInfo");i.redirectTo({url:"../bindSuccess/success?n="+t.userInfo.nickName+"&t="+e})},onReady:function(){},onShow:function(){U=!1},onHide:function(){},onUnload:function(){},onShareAppMessage:function(){},showTips:function(e){N.showToast({title:e})},showLoading:function(e){try{i.showLoading({title:e||"加载中",mask:!0})}catch(e){}},hideLoading:function(){i.hideLoading()}})})),window.define("728",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(77).saSendLog,I=e(17),P=(e(8),e(45)),D=e(25).getDfpToken,x=i(),_=e(47),k=_.baseLoginInfo,L=_.baiduErrMap;Page({data:{pageid:"adjnS",saPgnm:"pgtitle=百度小程序联合登录授权页;pageid=adjnS;pgcate=10009;",sendBtnText:"获取验证码",isSure:!0,showSNDialog:!1,showYFBDialog:!1,tryAuthorize:!1},autoclick:function(e){T("click",{event:e})},onShow:function(){T("pageview",{ext:{}}),n.hideLoading()},onReady:function(){},showRegDialog:function(e){var t=e.currentTarget.id;this.setData({showSNDialog:!1,showYFBDialog:!1}),"SN"==t?this.setData({showSNDialog:!0,slideAnimate:"slide-up"}):"YFB"==t&&this.setData({showYFBDialog:!0,slideAnimate:"slide-up"})},closeRegDialog:function(){this.setData({showSNDialog:!1,showYFBDialog:!1})},toggleReg:function(e){var t=e.detail.value&&e.detail.value.length>0;this.setData({isSure:t})},handlePhone:function(e){e.detail&&e.detail.encryptedData?this.sendPhoneNumber(e.detail):(n.showToast({title:"获取手机号码失败",icon:"none",duration:3e3}),n.navigateTo({url:"/pages/my/bind/baidubind"}))},sendPhoneNumber:function(e){var t=this,a=n.getStorageSync("mpbsstoken");n.request({url:I.baiduUnion.mpbssSavePsd,method:"POST",dataType:"json",data:{token:a,phoneNum:e.encryptedData,iv:e.iv},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){"0"!=e.data.code||0==e.data.exist?0==e.data.exist?n.showToast({title:"此账号未绑定手机号",icon:"none",duration:2e3,complete:function(){n.navigateTo({url:"/pages/my/bind/baidubind"})}}):"0"!=e.data.code&&n.showToast({title:L[e.data.code],icon:"none",duration:2e3,complete:function(){n.navigateTo({url:"/pages/my/bind/baidubind"})}}):t.autoRegAndBind(a)},fail:function(e){n.showToast({title:"发送手机号码失败",icon:"none",duration:3e3}),n.navigateTo({url:"/pages/my/bind/baidubind"})}})},autoRegAndBind:function(e){var t={miniToken:e,createChannel:k.channel,ip:x.globalData.ip||"127.0.0.1",deviceId:P.pdToken,dfpToken:"",sysCode:k.sysCode};function a(e){n.request({url:I.baiduUnion.autoRegAndBind,method:"POST",dataType:"json",data:e,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){e.data.loginTicket?(n.setStorageSync("ticket",e.data.loginTicket),n.redirectTo({url:"/pages/my/bindSuccess/success"})):(n.showToast({title:L[e.data.code],icon:"none",duration:3e3}),n.navigateTo({url:"/pages/my/bind/baidubind"}))},fail:function(e){n.showToast({title:"自动绑定失败",icon:"none",duration:3e3}),n.navigateTo({url:"/pages/my/bind/baidubind"})}})}D().then((function(e){t.dfpToken=e,a(t)})).catch((function(){a(t)}))},otherPhone:function(){n.navigateTo({url:"/pages/my/bind/baidubind"})},donotBind:function(){n.navigateBack()}})})),window.define("731",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(25).login,I=e(17),P=(e(8),e(45)),D=i(),x=i(),_=x.bindUserInfo,k=x.handleAuthDeny,L=e(77).saSendLog,N=e(709).cookieBaiduHandle,E=e(732).autoLogin,O=e(47),A=O.baseLoginInfo,R=O.baiduErrMap,M=e(25).getDfpToken;Page({data:{pageid:"G6t",saPgnm:"pgtitle=百度小程序联合登录成功页;pageid=G6t;pgcate=10009;",bdNick:"",telephone:""},autoclick:function(e){L("click",{event:e})},onLoad:function(e){e=e||{},this.setData({bdNick:e.n,telephone:e.t}),D.globalData.hasAuth&&!D.globalData.isLogin&&T().then((function(e){_(e)})).catch((function(e){k(e)})),this.loginAfterBind()},onReady:function(){},onShow:function(){L("pageview",{ext:{}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},loginAfterBind:function(){var e=this,t=n.getStorageSync("ticket");if(t){var a={loginTicket:t,loginChannel:A.channel,ip:D.globalData.ip||"127.0.0.1",deviceId:P.pdToken,dfpToken:"",sysCode:A.sysCode,rememberMe:"true"};M().then((function(e){a.dfpToken=e,o(a)})).catch((function(){o(a)}))}function o(t){n.request({url:I.baiduUnion.mpbssTicketLogin,method:"POST",dataType:"json",data:t,header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=t.data;if(a&&"0"==a.code){E(),N(a);var o=n.getStorageSync("cookieObj");o&&o.nick&&e.setData({telephone:decodeURIComponent(o.nick)});var i=n.getStorageSync("nickname");i&&e.setData({bdNick:i}),D.globalData.isLogin=1}else n.showToast({title:a.msg||R[a.code],icon:"none",duration:3e3})},fail:function(e){n.showToast({title:"登录失败",icon:"none",duration:5e3})}})}},backTo:function(){n.reLaunch({url:"/pages/index/index"})}})})),window.define("735",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(635);Page({onLoad:function(e){this.option=e||{}},onShow:function(){n.redirectTo({url:(0,T.buildUrl)("/packageA/pages/order/orderList/orderList",this.option)})}})})),window.define("738",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{webViewSrc:""},onLoad:function(e){this.setData({webViewSrc:decodeURIComponent(e.url)})}})})),window.define("741",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=_(e(78)),I=(_(e(293)),_(e(54))),P=(e(125),e(40)),D=e(26),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(e(39));function _(e){return e&&e.__esModule?e:{default:e}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var L=e(8),N=e(25),E=N.requestPromise,O=N.wxPay,A=N.checkLogin,R=N.baseJump,M=e(19).getLocation,U=e(742),j=e(579),B=e(743).manualLoginResolve,F=i(),V=e(276).addCart,H=e(77).saSendLog,q=e(25),G=q.find,Y=q.getUserLevel,z=(q.saSendPageViewLog,e(17)),W={getUserInfoUrl:z.userInfo,getUserRelation:L.mySuning+"/api/mini/queryAppletHeadPicAlias.do",getCouponCountUrl:L.quan+"/getCouponCount_json_2_getCouponCountCallback.do",getYunCountUrl:L.vip+"/jsonp/getPoints.do",getRxfSizeUrl:L.sncfc+"/sncfc-tps/creditpay/accountauth.do",getYesIncomeUrl:L.mySuning+"/wap/member/getYesterdayIncome.do",getOrderCountUrl:L.order+"/wap/onlineOrder/queryOrderCount.do",getEvaluationCountUrl:L.mySuning+"/getEvaluationCount.do",getOrderWaitPayOrderUrl:L.order+"/publicService/wap/order/queryOrderList.do",getRegularOrderUrl:L.order+"/mobile/v2/recommend/queryRecommendPriceLabel.do",getWaitCommentList:L.review+"/wap/store/myPendReviewListEdit.do?orderType=2&currentPage=1&callback=callback",getCmsDataUrl:L.cms+"/api/app/baiduxiaochengxv.json",getFavoriteCountUrl:L.favorite+"/favorite/ajax/getMyFavoritesCountJsonp.do",paramsBiz:L.tuijian+"/recommend-portal/recommend/paramsBiz.jsonp",queryThirdRelation:L.myapi+"/api/mini/queryThirdRelation.do",showDiamondTip:L.showDiamondTip+"/sign-web/m/sign/welcome.do?channelType=5",lqb:L.lqb,rxf:L.rxf},J=[{},{title:"免费试用SUPER会员",tips:"尊敬的苏宁用户，您可前往“苏宁易购微信公众号-我的服务-SUPER会员”免费试用30天SUPER会员"},{title:"开通SUPER会员",tips:"尊敬的苏宁用户，您可前往“苏宁易购微信公众号-我的服务-SUPER会员”开通会员，尽情享受特权福利"},{title:"SUPER会员",tips:"尊敬的SUPER会员，您可前往“苏宁易购微信公众号-我的服务-SUPER会员”查看会员特权福利，参与专属活动"}],Q=0,X=1,K=2,$=3,Z={161000000100:"V0",161000000110:"V1",161000000120:"V2",161000000130:"V3",161000000140:"V4"},ee=function(e){var t=e||"",a=t.split("."),o=a[0]||"",n=a[1]||"";return n.length>2&&(t=o+"."+(n=n.substring(0,2))),"00"===n&&o.length>5&&o.length<9?t=o:t.length>8&&o.length>4&&(t=o.substring(0,5)+"..."),t},te=function(e,t){return e-t>0?t+"+":parseInt(e)},ae=function(){var e=n.getStorageSync("_snma")||"";if(e=encodeURIComponent(e)){var t=e.indexOf("%7C");t>-1&&(e=e.substring(t+3,e.length));var a=e.indexOf("%7C");a>-1&&(e=e.substring(0,a))}return e||"139841943622658873"},oe=function(e){var t=e.match(/\d+/g),a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)-new Date(t[0],t[1]-1,t[2],0,0,0)<6048e5};var ne={payType:0,orderDetaiUrl:"",payUrl:"",orderId:""},ie=null;Page({detectTouchStart:I.default.detectTouchStart,detectTouchMove:I.default.detectTouchMove,detectTouchEnd:I.default.detectTouchEnd,detectTap:I.default.detectTap,detectLongPress:I.default.detectLongPress,data:{showMask:!1,pageid:"usfX1",saPgnm:"pageid=usfX1;pgcate=10009;pgtitle=我的易购首页",userData:{isEnterprise:!1,headPic:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",nickName:"",level:"P1",superFlag:1,realName:0},relationData:{isRealUser:!0,LSTip:"",onlyExtraUser:!1,md:""},moneyData:{coupon:{count:0,promotion:""},diamond:{count:0,promotion:""},rxf:{amount:0,promotion:""},lqb:{amount:"+0.00",promotion:""},wallet:{promotion:""}},orderData:{waitPayCount:0,waitReceiveCount:0,waitCommentCount:0,hasBuyList:!1,hasWaitPayOrder:1,hasExpressOrder:1,hasWaitCommentProduct:0,waitCommentProduct:{productImage:"",productName:"",diamond:"",partNumber:"",omsOrderItemId:"",orderId:""},waitPayOrder:{productList:[],totalCount:0,totalPrice:{integer:0,decimal:0}}},promotionData:{title:"",titleLink:"",promotionList:[]},toolData:[],productFavoriteCount:0,shopFavoriteCount:0,isNew:!0,oldData:{saPgnm:"pgcate=10009;pgtitle=我的易购首页",avatar:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",username:"登录/注册",userinfo:{custLevel:"",nickname:""},couponNum:0,orderNoPay:0,orderNoGet:0,orderFinish:0,superFlag:3,superInfo:{},isFavoriteSwitchOn:!1},guessLikeList:[],nextTargetUrl:encodeURIComponent("https://sale.suning.com/page/loginVerifySuccess/index.html")},resetData:function(){console.log("重置data"),this.setData({userData:{isEnterprise:!1,headPic:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",nickName:"",level:"P1",superFlag:1,realName:0},relationData:{isRealUser:!0,LSTip:"",onlyExtraUser:!1,md:""},moneyData:{coupon:{count:0,promotion:""},diamond:{count:0,promotion:""},rxf:{amount:0,promotion:""},lqb:{amount:"+0.00",promotion:""},wallet:{promotion:""}},orderData:{waitPayCount:0,waitReceiveCount:0,waitCommentCount:0,hasBuyList:!1,hasWaitPayOrder:1,hasExpressOrder:1,hasWaitCommentProduct:0,waitCommentProduct:{productImage:"",productName:"",diamond:"",partNumber:"",omsOrderItemId:"",orderId:""},waitPayOrder:{productList:[],totalCount:0,totalPrice:{integer:0,decimal:0}}},promotionData:{title:"",titleLink:"",promotionList:[]},toolData:[],productFavoriteCount:0,shopFavoriteCount:0,isNew:!0,oldData:{saPgnm:"pgcate=10009;pgtitle=我的易购首页",avatar:"https://res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",username:"登录/注册",userinfo:{custLevel:"",nickname:""},couponNum:0,orderNoPay:0,orderNoGet:0,orderFinish:0,superFlag:3,superInfo:{},isFavoriteSwitchOn:!1},guessLikeList:[]})},autoclick:function(e){H("click",{event:e})},onLoad:function(){ie=2,n.showLoading({title:"加载中",mask:!0})},onShow:function(){ie=3;var e=this;e.setData({showMask:!1},(function(){e.initPage()}))},onHide:function(){ie=8,n.hideLoading()},onUnload:function(){ie=9},manualGoLogin:function(){var e=this;x.checkLogin().then((function(e){var t=e.sys?"/pages/unionLogin/first/first":"/pages/login/login";n.navigateTo({url:t})}),(function(){"number"!=typeof ie||ie>=8||(e.resetData(),console.log("UnionLogin.checkLogin error",err),I.default.init("mainApp"))}))},initPage:function(){var e=this,t=this;n.showLoading({title:"请稍候",mask:!0}),x.checkLogin().then((function(a){"number"!=typeof ie||ie>=8||(a.app?t.initUserRelation().then((function(){t._initPage()})).catch((function(){t._initPage()})):(a.highRisk&&a.detail?((0,P.outRiskControl)(a.detail),n.hideLoading()):(0,T.default)().custno?t.initUserRelation().then((function(){t._initPage()})).catch((function(){t._initPage()})):(n.hideLoading(),B().then((function(){var e=a.sys?"/pages/unionLogin/first/first":"/pages/login/login";n.navigateTo({url:e})}),(function(){t.setData({showMask:!0})}))),e.resetData()),I.default.init("mainApp"))})).catch((function(t){"number"!=typeof ie||ie>=8||(e.resetData(),console.log("UnionLogin.checkLogin error",t),I.default.init("mainApp"))})),H("pageview")},_initPage:function(){var e=this;"number"!=typeof ie||ie>=8||(this.initUserInfo(),this.initMoney(),this.initOrder(),this.initGuessLikeData(),this.initCms(!0,(function(){e.setData({isNew:!0}),n.hideLoading()}),(function(){e.setData({isNew:!1}),e.initialize(),n.hideLoading()})))},initUserRelation:function(){var e=this;return new Promise((function(t,a){var o=e;console.log(W.getUserRelation),E({url:W.getUserRelation,data:{custNum:(0,T.default)().custno||"",extSystemId:"139000003420",sign:(0,D.md5)("custNum"+((0,T.default)().custno||"")+"extSystemId139000003420SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")}}).then((function(e){if(e&&"success"===e.status){o.resetData();for(var a=e.wechatAppletInfoList,n=a.length,i=0;i<n;i++)if(1===n&&"100000000010"==a[i].appletCustLabelFlag)o.setData({"relationData.LSTip":"升级至正式会员","relationData.onlyExtraUser":!0,"relationData.isRealUser":!1,"relationData.md":"006"});else if(2===n&&(0,T.default)().custno==a[i].custNum&&"100000000010"==a[i].appletCustLabelFlag){var r=1===i?0:1;o.setData({"relationData.LSTip":"切换至"+(a[r].nickName||"正式账户"),"relationData.isRealUser":!1,"relationData.md":"007"})}else(0,T.default)().custno==a[i].custNum&&"100000000020"==a[i].appletCustLabelFlag&&o.setData({"relationData.isRealUser":!0});t()}else"100000000010"===e.code?(console.log("开关关闭当前为临时会员",e.code),o.resetData(),o._initPage()):(o.resetData(),o._initPage(),t())})).catch((function(){a()}))}))},onPullDownRefresh:function(){this.initPage()},initGuessLikeData:function(){console.log("开始获取猜你喜欢数据");var e=this,t=W.paramsBiz;M().then((function(a){E({url:t,dataType:"jsonp",data:{sceneIds:"28-80",c:ae(),u:(0,T.default)().custno||"",cityId:a.cityLESId,count:40}}).then((function(t){console.info("猜你喜欢数据：",t);var a={"名品特卖":"特卖","可领券":"领券"};if(t&&t.sugGoods&&t.sugGoods[0]&&t.sugGoods[0].skus){for(var o,i=t.sugGoods[0].skus,r=[],s=(k(o={1:"zy-icon",3:"zy-icon",4:"zy-icon",5:"zy-icon",7:"zy-icon"},"4","gj-icon"),k(o,"5","gj-icon"),k(o,"6","gj-icon"),k(o,"7","jw-icon"),o),c=0;c<i.length;c++){var d=i[c];d.price&&d.sugGoodsName&&d.pictureUrl&&(a[d.promotionInfo]&&(d.promotionInfo=a[d.promotionInfo]),d.typeClass=s[d.productType]||"",d.priceInt=d.price.split(".")[0],d.priceDecimal=d.price.split(".")[1]||"00",r.push(d))}e.setData({guessLikeList:r.slice(0,36)})}n.hideLoading(),n.stopPullDownRefresh()})).catch((function(e){n.hideLoading(),n.stopPullDownRefresh()}))})).catch((function(){n.hideLoading(),n.stopPullDownRefresh()}))},jump2FourthPage:function(e){var t=e.currentTarget.dataset.productid,a=e.currentTarget.dataset.shop;0==a&&(a="0000000000"),n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})},addToCart:function(e){n.showLoading({title:"请稍候",mask:!0});var t=e.currentTarget.dataset;function a(){n.showToast({title:"加购失败，请稍后再试~",icon:"none",duration:2e3})}console.info("data",t),t.detect=I.default.getTrack()||"",V(t).then((function(e){n.hideLoading();try{"Y"===e.data.cartHeadInfo.isSuccess?n.showToast({title:"加购成功",icon:"success",duration:2e3}):a()}catch(e){a()}})).catch((function(){n.hideLoading(),a()}))},initUserInfo:function(){var e=this;"number"!=typeof ie||ie>=8||E({url:W.getUserInfoUrl,data:{custNum:(0,T.default)().custno||""}}).then((function(t){if(console.log(3333333333,e.pageState),!("number"!=typeof ie||ie>=8)){var a=1;a="A9200010"==t.paidFlag?3:"A9200010"==t.canApplyTrial?1:2;var o={headPic:U(t.sysHeadPicFlag,t.sysHeadPicNum,t.encrypteCustNum,!1),nickName:t.accountName,level:t.ecologyLevleTag,superFlag:a,isEnterprise:"enterprise"==t.custType,realName:t.eppIsReal};console.log(o,"userData");var i=3==a?"#322f2a":"#ffa700";n.setNavigationBarColor({backgroundColor:i,frontColor:3==a?"#ffffff":"#000000"}),n.setBackgroundColor&&(console.log(333333,4444444,e.pageState),n.setBackgroundColor({backgroundColor:i,backgroundColorTop:i,backgroundColorBottom:i})),e.setData({userData:o})}}))},initMoney:function(){var e=this,t=this.data.moneyData;E({url:W.getCouponCountUrl,dataType:"jsonp",jsonpCallback:"getCouponCountCallback"}).then((function(a){a&&a.couponTotalNumber&&(t.coupon.count=te(a.couponTotalNumber,9999),e.setData({moneyData:t}))})),E({url:W.getYunCountUrl,dataType:"jsonp"}).then((function(a){a&&a.totalPoint&&(t.diamond.count=te(a.totalPoint,99999),e.setData({moneyData:t}))})),E({url:W.getRxfSizeUrl,dataType:"jsonp"}).then((function(a){a&&a.accountState&&("00"==a.accountState||"03"==a.accountState)?t.rxf.amount=ee(a.avaliableAmt):t.rxf.promotion||(t.rxf.promotion="立即开通"),e.setData({moneyData:t})}),(function(){t.rxf.promotion||(t.rxf.promotion="立即开通")})),E({url:W.getYesIncomeUrl,data:{custNum:(0,T.default)().custno||""}}).then((function(a){a&&"success"==a.status&&a.yesterdayIncome&&(t.lqb.amount="+"+ee(a.yesterdayIncome),e.setData({moneyData:t}))}))},initOrder:function(){var e=this,t=this.data.orderData;E({url:W.getOrderCountUrl}).then((function(a){a&&a.waitPayCount&&(t.waitPayCount=te(a.waitPayCount,99)),a&&a.waitReceiveCount&&(t.waitReceiveCount=te(a.waitReceiveCount,99)),e.setData({orderData:t})})),E({url:W.getEvaluationCountUrl}).then((function(a){a&&(a=(a+="").replace(/"/g,""),t.waitCommentCount=te(a,99),e.setData({orderData:t}))})),E({url:W.getWaitCommentList,dataType:"jsonp"}).then((function(a){if(0==a.returnCode&&a.orderList&&a.orderList.length>0){var o=a.orderList[0];if(oe(o.orderTime)&&o.orderItemList&&o.orderItemList.length>0){var n=o.orderItemList[0];t.hasWaitCommentProduct=2,t.waitCommentProduct={productImage:n.productImgUrl,productName:n.catentryName,diamond:n.score>0?n.score+n.orderShowScore:0,partNumber:n.partNumber,omsOrderItemId:n.omsorderItemId,orderId:o.orderId},e.setData({orderData:t})}else t.hasWaitCommentProduct=1,e.setData({orderData:t})}else t.hasWaitCommentProduct=1,e.setData({orderData:t})}),(function(){t.hasWaitCommentProduct=1,e.setData({orderData:t})})),M().then((function(a){E({url:W.getRegularOrderUrl,data:{cookieId:ae(),cityId:a.cityLESId||"",sceneIds:"5-18",count:"50"},method:"GET",debug302:!0}).then((function(a){a&&1==a.priceLabel&&(t.hasBuyList=!0,e.setData({orderData:t}))}))}))},initCms:function(e,t,a){var o=this;E({url:W.getCmsDataUrl}).then((function(n){try{if(1==n.code&&n.data&&n.data.length>0&&1==n.data[3].msi_minip_switch.tag[0].elementDesc){o.initMoneyPromotion(n.data[0]),o.initPromotionModule(n.data[1]);for(var i=0;i<n.data.length;i++)0==o.data.relationData.isRealUser?n.data[i].linshibbgj&&o.initToolModule(n.data[i].linshibbgj,e):n.data[i].msi_minip_tools&&o.initToolModule(n.data[i].msi_minip_tools,e);t()}else a()}catch(e){a()}}),a)},initMoneyPromotion:function(e){var t=this.data.moneyData;try{e.assets.tag.forEach((function(e){"优惠券"==e.elementName?t.coupon.promotion=e.elementDesc:"领云钻"==e.elementName?t.diamond.promotion=e.elementDesc:"任性付"==e.elementName?t.rxf.promotion=e.elementDesc:"零钱宝"==e.elementName?t.lqb.promotion=e.elementDesc:"我的钱包"==e.elementName&&(t.wallet.promotion=e.elementDesc)})),this.setData({moneyData:t})}catch(e){}},initPromotionModule:function(e){var t=this.data.promotionData;try{t.promotionList=[],t.title=e.msi_title_weixin.tag[0].elementDesc,t.titleLink=e.msi_title_weixin.tag[0].linkUrl||e.msi_title_weixin.tag[0].productSpecialFlag,e.msipromotion.tag.forEach((function(e){t.promotionList.push({image:L.img+e.picUrl,txt:e.elementDesc,href:e.linkUrl||e.productSpecialFlag})})),t.promotionList=t.promotionList.slice(0,4),this.setData({promotionData:t})}catch(e){}},initToolModule:function(e,t){var a=!1;try{var o=[];e.tag.forEach((function(e){"商品关注"!=e.elementName&&"店铺关注"!=e.elementName||(a=!0),o.push({image:L.img+e.picUrl,name:e.elementName,promotion:e.elementDesc,href:e.linkUrl||e.productSpecialFlag})})),a&&t&&this.initFavoriteCount(),this.setData({toolData:o.slice(0,16)}),console.log(this.data.toolData)}catch(e){}},initFavoriteCount:function(){var e=this;E({url:W.getFavoriteCountUrl,dataType:"jsonp"}).then((function(t){0==t.returnCode&&e.setData({productFavoriteCount:te(t.productFavoriteCount,9999),shopFavoriteCount:te(t.shopFavoriteCount,9999)})}))},toLogin:function(){var e=this,t=this.getData().toLoginDisabled;console.log(t,"toLoginDisabled"),t||(this.resetToLoginTimeout(),n.showLoading({title:"请稍候",icon:"none",mask:!1}),this.setData({toLoginDisabled:!0}),x.checkLogin().then((function(t){console.log(t,"UnionLogin.checkLogin"),e.getData().breakLogin||(t.app?(e.initUserInfo(),n.hideLoading(),console.log("APP已经登录，登录资源不受限",t,"UnionLogin.checkLogin"),setGlobalData({isLogin:!0})):(e.resetData(),console.log("APP未登录",t,"UnionLogin.checkLogin"),t.sys?(console.log("SYS已登录",t,"UnionLogin.checkLogin"),console.log("APP开始自动登录，需要访问平台受限资源",t,"UnionLogin.checkLogin"),apiBaiduUnionAutoLogin().then((function(t){if(!e.getData().breakLogin){var a=t.result;"success"===a.msg&&(a.isBind?(cookieBaiduHandle(a),e.initUserInfo(),n.hideLoading(),setGlobalData({isLogin:!0})):delay.timeout((function(){n.hideLoading(),n.navigateTo({url:"/pages/unionLogin/first/first"})}),1534))}}),(function(t){console.log(t,"自动登录失败",n.isLoginSync()),setGlobalData({isLogin:!1}),e.setData({toLoginDisabled:!1});var a=t.error,o=((void 0===a?{}:a).data||{}).loginErr,i=getHighRiskMessage((void 0===o?{}:o).errorCode);i&&i.msg;n.hideLoading()}))):(setGlobalData({isLogin:!1}),console.log("SYS未登录",t,"UnionLogin.checkLogin"),console.log("APP跳转帐密登录",t,"UnionLogin.checkLogin"),delay.timeout((function(){e.setData({toLoginDisabled:!1}),n.hideLoading(),n.navigateTo({url:"/pages/login/login"})}),1534))))})))},showAuthDenyTips:function(){n.navigateTo({url:"/pages/auth/auth"})},showHasLock:function(){n.showModal({title:"提示",content:"您的账户存在安全风险，为了保障您的账户安全，请移步苏宁易购APP客户端验证身份。",showCancel:!1})},toOrderPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/order/orderList/orderList?index="+e.currentTarget.dataset.orderType})})).catch((function(){}))},toWaitCommentPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/review/core/core"})})).catch((function(){}))},toPersonPage:function(e){console.log("toPersonPage",e),x.checkLogin().then((function(e){e.app&&n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.person)})})).catch((function(){}))},toQrPage:function(e){var t=this;A().then((function(){0==t.data.relationData.isRealUser?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.upUser)}):n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.personQr)})})).catch((function(){}))},toExchangePage:function(e){A().then((function(){n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.exchange)})})).catch((function(){}))},toBuyListPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/alwaysbuy/alwaysbuy"})})).catch((function(){}))},toCouponPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/quan/quanList"})})).catch((function(){}))},showDiamondTip:function(e){0==this.data.relationData.isRealUser?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.upUser)}):n.navigateTo({url:"/pages/webView/index?webViewSrc="+W.showDiamondTip})},toCommentProductPage:function(e){A().then((function(){var t=e.currentTarget.dataset,a=t.partNumber,o=t.omsOrderItemId,i=t.orderId;n.navigateTo({url:"/packageA/pages/review/publish/publish?partNumber="+a+"&omsorderItemId="+o+"&orderid="+i})})).catch((function(){}))},toPromotionPage:function(e){var t=e.currentTarget.dataset.href;if(t)try{1==(t=JSON.parse(t)).type?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t.url)}):2==t.type?n.navigateTo({url:t.path}):3==t.type&&n.navigateToSmartProgram(t)}catch(e){0==t.indexOf("http")?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):n.navigateTo({url:t})}},toToolPage:function(e){var t=e.currentTarget.dataset.href;t&&(0===t.indexOf("http://")||0===t.indexOf("https://")?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):"/packageB/pages/my/unbind/index"==t?this.queryThirdRelation(t):R(t))},queryThirdRelation:function(e){E({url:W.queryThirdRelation,data:{custNum:(0,T.default)().custno||"",extSys:"139000003420",sign:(0,D.md5)("custNum"+((0,T.default)().custno||"")+"extSys139000003420SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")}}).then((function(t){"success"===t.status&&(0==t.bindRelation?(x.ResetLogin(n),n.switchTab({url:"/pages/index/index"})):R(e))}))},showSuperUserTip:function(){0==this.data.relationData.isRealUser?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.upUser)}):n.navigateTo({url:"/packageA/pages/superMember/superMember_chanel/superMember_chanel"})},payOrder:function(){if(1==ne.payType){var e=ne.btnType,t=ne.orderId;O(t,"1"==e||"31"==e||"2"==e||"36"==e||"37"==e?2:1,"1"==e||"31"==e||"36"==e?2:"2"==e||"37"==e?3:1).then((function(){n.redirectTo({url:"/packageA/pages/cart4/cart4?id="+t})})).catch((function(e){console.log("fail"),e&&"当前订单状态不可支付，请前往订单中心查看订单状态"==e.errMsg&&n.showModal({title:"提示",content:e.errMsg||"系统繁忙，请稍后再试！",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",complete:function(){n.redirectTo({url:"/packageA/pages/order/orderList?index=0&source=payfail"})}})}))}else n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(ne.payUrl)})},toOrderDetailPage:function(){A().then((function(){n.navigateTo({url:ne.orderDetaiUrl})})).catch((function(){}))},toRxf:function(e){n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(L.rxf)})},toLqb:function(e){0==this.data.relationData.isRealUser?n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.upUser)}):n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(L.lqb+"&mode=restrict&agentType=wap")})},toWallet:function(e){},toAllOrderPage:function(){this.toOderPage(Q)},toNoPayOrderPage:function(){this.toOderPage(X)},toNoGetOrderPage:function(){this.toOderPage(K)},toNoCommentOrderPage:function(){this.toOderPage($)},toFavPage:function(){A().then((function(){n.navigateTo({url:"/pages/webView/index?webViewSrc="+j.shoucang})})).catch((function(){}))},toOderPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/order/orderList?index="+e})})).catch((function(){}))},toCommentPage:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/review/core/core"})})).catch((function(){}))},toChoujiang:function(e){A().then((function(){n.navigateTo({url:"/packageA/pages/platluckdraw/index"})})).catch((function(){}))},toQuanList:function(){A().then((function(){n.navigateTo({url:"/packageA/pages/quan/quanList"})})).catch((function(){}))},toHuishou:function(){n.navigateToSmartProgram({appId:"wx8dc21e89439d0e82",success:function(e){console.log("success")},fail:function(e){console.log(e),console.log("fail")}})},showSuperTips:function(){var e;e=J[this.data.oldData.superFlag],n.showModal({title:e.title,content:e.tips,showCancel:!1,confirmColor:"#F60"})},showTip:function(){n.showModal({content:"请至“苏宁易购APP进行登录—我的易购—账户管理”进行账户管理",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600"})},__init_ialize:function(){var e=this;A().then((function(){var t=Object.assign({},e.data.oldData||{});console.log(t,"oldData"),t.userinfo={custLevel:Y(""+F.globalData.userInfo.custLevel),nickname:decodeURIComponent(F.globalData.userInfo.nickname)},t.avatar=F.globalData.userInfo.userInfo.avatarUrl,t.username=F.globalData.userInfo.userInfo.nickName,e.setData({oldData:t}),e.getSuperInfo(),e.getFavoriteSwitch()})).catch((function(){}))},initialize:function(){var e,t=this,a={custNum:(0,T.default)().custno};(e=a,e._=Date.now(),E({url:z.userInfo,data:e,dataType:"JSON",method:"GET"})).then((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}var a=Object.assign({},t.data.oldData||{}),o=a.avatar;if("success"==e.status){o="person"==e.custType?"100000000010"==e.sysHeadPicFlag?L.img+"/uimg/cmf/cust_headpic/0000000000_"+e.sysHeadPicNum+"_60x60.jpg":"100000000020"==e.sysHeadPicFlag?L.img+"/uimg/cmf/cust_headpic/"+e.encrypteCustNum+"_00_60x60.jpg?v="+e.sysHeadPicNum:L.img+"/uimg/cmf/cust_headpic/0000000000_01_60x60.jpg":"100000000020"==sysHeadPicFlag?L.img+"/uimg/cmf/cust_headpic/"+e.encrypteCustNum+"_00_60x60.jpg?v="+e.sysHeadPicNum:L.img+"/project/msIndex/enterprise/css/images/sysheadpic_60x60.jpg",console.log(o,"oldData");var i=3;"success"==e.status&&(console.log("resData.paidFlag",e.paidFlag),i="A9200010"==e.paidFlag?1:"A9200020"==e.canApplyTrial?2:3),a=Object.assign({},a,{userinfo:{custLevel:Z[e.custLevel]},avatar:o,username:"苏宁会员："+e.accountName,superFlag:i}),t.setData({userinfo:{custLevel:Z[e.custLevel]},avatar:o,username:"苏宁会员："+e.accountName,superFlag:i})}else{var r=n.getStorageSync("cookieObj"),s=decodeURIComponent(r.nick),c=Z[r.custLevel];t.setData({userinfo:{custLevel:c},avatar:o,username:"苏宁会员："+s})}})).catch((function(e){console.log("获取用户信息失败",e);var a=t.data.avatar,o=n.getStorageSync("cookieObj"),i=decodeURIComponent(o.nick),r=Z[o.custLevel];t.setData({userinfo:{custLevel:r},avatar:a,username:"苏宁会员："+i})}))},getFavoriteSwitch:function(){var e=this,t=this.data.oldData;E({url:z.my.favoriteSwitch}).then((function(a){a&&0==a.returnCode&&(t.isFavoritedSwitchOn="on"==a.isFavoritedSwitch,e.setData({oldData:t}))}))},toFavourite:function(){console.log(j.shoucang),n.navigateTo({url:"/pages/webView/index?webViewSrc="+j.shoucang})},getSuperInfo:function(){var e=this,t=this.data.oldData;E({url:z.my.super,data:{custNum:n.getStorageSync("custNo")},dataType:"JSON"}).then((function(a){"success"==(a=JSON.parse(a)).status&&("A9200010"==a.paidFlag?t.superFlag=1:"A9200020"==a.canApplyTrial?t.superFlag=2:t.superFlag=3,e.setData({oldData:t}))}))},queryData:function(){this.queryOrderCount(),this.queryCouponCount(),this.queryEvaluationCount()},queryOrderCount:function(){var e=this,t=this.data.oldData;E({url:z.my.orderCount}).then((function(a){a=a||{},t.orderNoPay=parseInt(a.waitPayCount||0,10)||0,t.orderNoGet=parseInt(a.waitReceiveCount||0,10)||0,e.setData({oldData:t})})).catch((function(){}))},queryCouponCount:function(){var e=this,t=this.data.oldData;E({url:z.my.couponCount}).then((function(a){var o=G((a=a||{}).couponStatusList||[],(function(e){return"2"===e.couponStatus||2===e.couponStatus}));o&&(t.couponNum=parseInt(o.couponNumber,10)||0,e.setData({oldData:t}))})).catch((function(){}))},queryEvaluationCount:function(){var e=this,t=this.data.oldData;E({url:z.my.evaluationCount}).then((function(a){a=a||0,t.evaluationCount=parseInt(a,10)||0,e.setData({oldData:t})})).catch((function(){}))},scan:function(){n.scanCode({success:function(e){n.navigateTo({url:e.result})}})},jump2Temai:function(){n.navigateTo({url:"/pages/temai_index/index"})},toRedirect:function(e){console.log(e.target.dataset.url),n.navigateTo({url:e.target.dataset.url+"?activityCode=xcxphotograph"})},upOrChangeTip:function(e){n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.upUser)})},torealName:function(e){n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(j.yfbsm)+"&mode=restrict&agentType=wap"})}})})),window.define("742",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(8);t.exports=function(e,t,a,o){var n=T.img,i="/uimg/cmf/cust_headpic/",r="100000000010"===e,s="100000000020"===e;return o?s&&a?n+i+a+"_00_240x240.jpg?v="+t:T.mySuning+"/project/msIndex/enterprise/css/images/sysheadpic_240x240.jpg":r?t?n+i+"0000000000_"+t+"_240x240.jpg":n+i+"0000000000_01_240x240.jpg":s&&a&&t?n+i+a+"_00_240x240.jpg?v="+t:n+i+"0000000000_01_240x240.jpg"}})),window.define("743",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.manualLoginResolve=function(){return new Promise((function(e,t){var a=i().globalData;a.manualLoginCount=a.manualLoginCount||0,a.manualLoginCount<1?(a.manualLoginCount+=1,e()):t()}))}})),window.define("746",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=O(e(78)),P=O(e(293)),D=O(e(54)),x=e(125),_=O(e(747)),k=e(38),L=e(26),N=O(e(22)),E=e(16);function O(e){return e&&e.__esModule?e:{default:e}}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var R=e(8),M=e(25),U=M.requestPromise,j=M.wxPay,B=M.baseJump,F=M.checkLogin,V=e(19).getLocation,H=e(748),q=e(579),G=r(),Y=e(276).addCart,z=e(77).saSendLog,W={},J=function(e,t){return e-t>0?t+"+":parseInt(e)},Q=function(){var e=i.getStorageSync("_snma")||"";if(e=encodeURIComponent(e)){var t=e.indexOf("%7C");t>-1&&(e=e.substring(t+3,e.length));var a=e.indexOf("%7C");a>-1&&(e=e.substring(0,a))}return e||"139841943622658873"},X=function(e){var t=e.match(/\d+/g),a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)-new Date(t[0],t[1]-1,t[2],0,0,0)<6048e5},K=function(e,t,a,o){V().then((function(n){var r=i.getStorageSync("custNo")||"",s=i.getStorageSync("cookieObj")&&i.getStorageSync("cookieObj").custLevel||"";E._snBusError.bizExcp({bid:"member-wdyg",error_code:e,error_detail:JSON.stringify(t),error_type:a,member_id:r,member_level:s,region:n.cityLESId||"025",type_name:o||""})}))},$={payType:0,orderDetaiUrl:"",payUrl:"",orderId:""};Page({detectTouchStart:D.default.detectTouchStart,detectTouchMove:D.default.detectTouchMove,detectTouchEnd:D.default.detectTouchEnd,detectTap:D.default.detectTap,detectLongPress:D.default.detectLongPress,data:{pageid:"usfX1",saPgnm:"pageid=usfX1;pgcate=10009;pgtitle=我的易购首页",switch:{dingdankg:!0,yunxin:!0,qrbox:!0,guessLike:!0},userData:{isEnterprise:!1,headPic:"//res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",nickName:"",custLevel:"v1",ecologicalValue:"",superFlag:1,realName:0},cmsInfo:{guessLikeTitle:"好货推荐",qrshow:{src:"https://oss.suning.com/vss/activity/wximg/my/qr-icon1.png",href:"/packageB/pages/my/qrcode/index"},moneyData:{coupon:{name:"优惠券",count:0,href:"/packageA/pages/quan/quanList"},yunzuan:{name:"领云钻",count:0,href:q.yun},myfoucs:{name:"我的关注",count:0,href:q.myFoucs},footprints:{name:"足迹",count:0,href:q.footPrints}}},payData:{pic:"https://oss.suning.com/vss/activity/wximg/my/vip.png",textmodle:[{text:"开通SUPER会员预计可得10008云钻",color:"#222"}],defaultColor:"#222",btntext:"立即开通",href:"/packageA/pages/superMember/superMember_chanel/superMember_chanel"},relationData:{isRealUser:!0,LSTip:"",onlyExtraUser:!1,md:""},orderData:{allLook:{text:"查看全部"},waitPay:{count:0,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon01.png",text:"待支付"},waitReceive:{count:0,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon02.png",text:"待收货"},waitComment:{count:0,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon03.png",text:"评价有礼"},Exchange:{src:"https://oss.suning.com/vss/activity/wximg/my/order-icon04.png",text:"退换/售后"},hasBuy:{src:"https://oss.suning.com/vss/activity/wximg/my/order-icon05.png",text:"常购清单",hasBuyList:!1},hasWaitPayOrder:1,hasExpressOrder:1,hasWaitCommentProduct:0,waitCommentProduct:{productImage:"",productName:"",diamond:"",partNumber:"",omsOrderItemId:"",orderId:""},waitPayOrder:{productList:[],totalCount:0,totalPrice:{integer:0,decimal:0}}},game:{title:"",titleLink:"",gameList:[]},toolData:[],toolPageLen:"1",swiperCurrent:"0",productFavoriteCount:0,shopFavoriteCount:0,guessLikeList:[],yxcount:0},resetData:function(){console.log("重置data"),this.setData({switch:{dingdankg:!0,yunxin:!0,qrbox:!0,guessLike:!0},userData:{isEnterprise:!1,headPic:"//res.suning.cn/project/cmsWeb/suning/wxmini/images/suning/common/avatar.png",nickName:"",custLevel:"v1",ecologicalValue:"",superFlag:1,realName:0},cmsInfo:{guessLikeTitle:"好货推荐",qrshow:{src:"https://oss.suning.com/vss/activity/wximg/my/qr-icon1.png",href:"/packageB/pages/my/qrcode/index"},moneyData:{coupon:{name:"优惠券",count:0,href:"/packageA/pages/quan/quanList"},yunzuan:{name:"领云钻",count:0,href:q.yun},myfoucs:{name:"我的关注",count:0,href:q.myFoucs},footprints:{name:"足迹",count:0,href:q.footPrints}}},payData:{pic:"https://oss.suning.com/vss/activity/wximg/my/vip.png",textmodle:[{text:"开通SUPER会员预计可得10008云钻",color:"#222"}],defaultColor:"#222",btntext:"立即开通",href:"/packageA/pages/superMember/superMember_chanel/superMember_chanel"},relationData:{isRealUser:!0,LSTip:"",onlyExtraUser:!1,md:""},orderData:{allLook:{text:"查看全部"},waitPay:{count:88,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon01.png",text:"待支付"},waitReceive:{count:0,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon02.png",text:"待收货"},waitComment:{count:0,src:"https://oss.suning.com/vss/activity/wximg/my/order-icon03.png",text:"评价有礼"},Exchange:{src:"https://oss.suning.com/vss/activity/wximg/my/order-icon04.png",text:"退换/售后"},hasBuy:{src:"https://oss.suning.com/vss/activity/wximg/my/order-icon05.png",text:"常购清单",hasBuyList:!1},hasWaitPayOrder:1,hasExpressOrder:1,hasWaitCommentProduct:0,waitCommentProduct:{productImage:"",productName:"",diamond:"",partNumber:"",omsOrderItemId:"",orderId:""},waitPayOrder:{productList:[],totalCount:0,totalPrice:{integer:0,decimal:0}}},game:{title:"",titleLink:"",gameList:[]},toolData:[],toolPageLen:"1",swiperCurrent:"0",productFavoriteCount:0,shopFavoriteCount:0,guessLikeList:[],yxcount:0})},autoclick:function(e){z("click",{event:e})},onLoad:function(){this.pageState=2,W.all=R.app+"/wechatAppletMerge",i.showLoading({title:"加载中",mask:!0}),t((function(){i.hideLoading()}),3e3)},onShow:function(){var e=this;this.pageState=3,F().then((function(){e.initPage()})).catch((function(){}))},onHide:function(){this.pageState=8,i.hideLoading()},onUnload:function(){this.pageState=9},initPage:function(){D.default.init("mainApp"),z("pageview");var e=this;(0,_.default)().then((function(){e.initAll()})).catch((function(){i.hideLoading(),console.log("未登录"),e.resetData()}))},onPullDownRefresh:function(){this.initPage()},addToCart:function(e){i.showLoading({title:"请稍候",mask:!0});var t=e.currentTarget.dataset;function a(){i.showToast({title:"加购失败，请稍后再试~",icon:"none",duration:2e3})}console.info("data",t),t.detect=D.default.getTrack()||"",Y(t).then((function(e){i.hideLoading();try{"Y"===e.data.cartHeadInfo.isSuccess?i.showToast({title:"加购成功",icon:"success",duration:2e3}):(a(),K("msi-wdzc-20001_1",{errorDesc:"商品加入购物车失败"},2,"商品加入购物车失败"))}catch(e){a(),K("msi-wdzc-20001_2",{errorDesc:"商品加入购物车失败"},2,"商品加入购物车失败")}})).catch((function(){i.hideLoading(),a(),K("msi-wdzc-20001",{errorDesc:"商品加入购物车失败"},1,"商品加入购物车失败")}))},initOrder:function(){this.data.orderData},initGameModule:function(e){var t=this.data.game;try{t.gameList=[],t.title=e.gamecopy.tag[0].elementDesc,t.titleLink=e.gamecopy.tag[0].linkUrl||e.gamecopy.tag[0].productSpecialFlag,e.game4.tag.forEach((function(e){t.gameList.push({image:R.img+e.picUrl,txt:e.elementDesc,href:e.linkUrl||e.productSpecialFlag})})),t.gameList=t.gameList.slice(0,4),this.setData({game:t})}catch(e){}},initToolModule:function(e){try{var t=[];e.tag.forEach((function(e){t.push({image:R.img+e.picUrl,name:e.elementName,promotion:e.elementDesc,href:e.linkUrl||e.productSpecialFlag,md:e.productSpecialFlag})})),this.setData({toolData:t,toolPageLen:Math.ceil(e.tag.length/8)})}catch(e){}},toYxPage:function(){i.navigateTo({url:"/packageB/pages/yunxin/msgCenter/msgCenter"})},toPersonPage:function(e){(0,x.formid)(e),i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.person)})},torealName:function(e){(0,x.formid)(e),i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.yfbsm)+"&mode=restrict&agentType=wap"})},upOrChangeTip:function(e){i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.upUser)})},toLogin:function(){G.globalData.hasLock?this.showHasLock():G.globalData.hasAuth?G.globalData.isLogin||(0,P.default)():this.showAuthDenyTips()},showAuthDenyTips:function(){i.navigateTo({url:"/pages/auth/auth"})},showHasLock:function(){i.showModal({title:"提示",content:"您的账户存在安全风险，为了保障您的账户安全，请移步苏宁易购APP客户端验证身份。",showCancel:!1})},toOrderPage:function(e){var t=e.currentTarget.dataset.href;(0,x.formid)(e),t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):!1===this.data.dingdankg?i.navigateTo({url:"/packageA/pages/order/orderList?index="+e.currentTarget.dataset.orderType}):i.navigateTo({url:"/packageA/pages/order/orderList/orderList?index="+e.currentTarget.dataset.orderType})},toWaitCommentPage:function(e){var t=e.currentTarget.dataset.href;(0,x.formid)(e),t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):i.navigateTo({url:"/packageA/pages/review/core/core"})},toExchangePage:function(e){var t=e.currentTarget.dataset.href;(0,x.formid)(e),t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.exchange)})},toBuyListPage:function(e){var t=e.currentTarget.dataset.href;(0,x.formid)(e),t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):i.navigateTo({url:"/packageA/pages/alwaysbuy/alwaysbuy"})},toOrderDetailPage:function(){i.navigateTo({url:$.orderDetaiUrl})},toCommentProductPage:function(e){var t=e.currentTarget.dataset,a=t.partnumber,o=t.omsorderitemid,n=t.orderid;i.navigateTo({url:"/packageA/pages/review/publish/publish?partNumber="+a+"&omsorderItemId="+o+"&orderid="+n+"&isAdultProduct="+t.isadultproduct})},toPromotionPage:function(e){var t=e.currentTarget.dataset.href;if(t)try{1===(t=JSON.parse(t)).type?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t.url)}):2===t.type?i.navigateTo({url:t.path}):3===t.type&&i.navigateToSmartProgram(t)}catch(e){0===t.indexOf("http")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):i.navigateTo({url:t})}},toToolPage:function(e){var t=e.currentTarget.dataset.href;t&&(0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t))},toQrPage:function(e){var t=e.currentTarget.dataset.href;!1===this.data.relationData.isRealUser?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.upUser)}):t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):i.navigateTo({url:"/packageB/pages/my/qrcode/index"})},toVipPage:function(e){var t=e.currentTarget.dataset.href;!1===this.data.relationData.isRealUser?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.upUser)}):t?0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t):i.navigateTo({url:"/packageA/pages/superMember/superMember_chanel/superMember_chanel"})},toToolAll:function(e){!0===this.data.relationData.isRealUser&&i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.toolAll)})},toMoneyPage:function(e){var t=e.currentTarget.dataset.href;"领云钻"===e.currentTarget.dataset.name&&!1===this.data.relationData.isRealUser?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.upUser)}):0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):B(t)},showDiamondTip:function(e){(0,x.formid)(e);!1===this.data.relationData.isRealUser?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.upUser)}):i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(q.yun)})},payOrder:function(){if(1===$.payType){var e=$.btnType,t=$.orderId;j(t,"1"===e||"31"===e||"2"===e||"36"===e||"37"===e?2:1,"1"===e||"31"===e||"36"===e?2:"2"===e||"37"===e?3:1).then((function(){i.redirectTo({url:"/packageA/pages/cart4/cart4?id="+t})})).catch((function(e){console.log("fail"),e&&"当前订单状态不可支付，请前往订单中心查看订单状态"===e.errMsg&&i.showModal({title:"提示",content:e.errMsg||"系统繁忙，请稍后再试！",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",complete:function(){i.redirectTo({url:"/pages/my/order/orderList?index=0&source=payfail"})}})}))}else i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent($.payUrl)})},swiperChange:function(e){this.setData({swiperCurrent:e.detail.current})},initAll:function(){var e=this;V().then((function(t){var a={unreadMessagesReq:"appCode=SNYG&custNo="+((0,I.default)().custno||""),memberBasicInfo:"custNum="+((0,I.default)().custno||""),weChatAppletRelation:"custNum="+((0,I.default)().custno||"")+"&sign="+(0,L.md5)("custNum"+((0,I.default)().custno||"")+"SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5"),queryOrderList:"status=waitPay&page=1",recommendPriceLabel:"cookieId="+Q()+"&cityId="+(t.cityLESId||"")+"&sceneIds=5-18&count=50",paramsBiz:"sceneIds=28-80&c="+Q()+"&u="+((0,I.default)().custno||"")+"&cityId="+t.cityLESId+"&count=40",querymyPointInfoReq:"custNum="+((0,I.default)().custno||"")+"&sign="+(0,L.md5)("custNum"+((0,I.default)().custno||"")+"SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")};U({url:W.all,dataType:"json",data:a}).then((function(t){var a;"success"===t.status?function(){var o="",n="",i="",r="",s="",c="",d="",u="",l="",p="",f=[],h="",g="",m="",v="",y="",w="";t.respWeChatAppletRelation&&(w=JSON.parse(t.respWeChatAppletRelation),e.parseWeChatAppletRelation(w)),t.respMemberBasicInfo&&(o=JSON.parse(t.respMemberBasicInfo),e.parseUserInfo(o)),t.respUnreadMessages&&(n=JSON.parse(t.respUnreadMessages),e.parseYunxin(n)),t.respQueryTraceNumber&&(i=t.respQueryTraceNumber,e.parseTrace(i)),t.respCouponCount&&(r=(0,N.default)(t.respCouponCount),e.parseCoupon(r)),t.respGetMyFavoritesCount&&(s=(0,N.default)(t.respGetMyFavoritesCount),e.parseMyFavorite(s)),t.respGetPoints&&(c=JSON.parse(t.respGetPoints),e.parseYunzuan(c)),t.respQueryOrderCount&&(h=JSON.parse(t.respQueryOrderCount),e.parseOrderCount(h)),t.respMyEbuyReviews&&(g=JSON.parse(t.respMyEbuyReviews),e.parseEbuyReviewsCount(g)),t.respMyPendReviewListEdit&&(v=JSON.parse(t.respMyPendReviewListEdit),e.parseMyPendReviewList(v)),t.respRecommendPriceLabel&&(m=JSON.parse(t.respRecommendPriceLabel),e.parseRecommendPriceLabel(m)),t.respRecommendDatas&&(y=JSON.parse(t.respRecommendDatas),e.parseRecommendDatas(y));var b=JSON.parse(t.respCMSInfo).data;if(b){var C="";for(a=0;a<b.length;a++){var S=b[a];if(S.assets)C=b[a].assets,e.parseAssets(C,{couponCount:r,footCount:i,yunzuanCount:c,myfoucsCount:s});else if(S.paymember_wap||S.showedmessage){var T=S.paymember_wap;T&&T.tag[0]&&(u=R.img+T.tag[0].picUrl,l=T.tag[0].elementDesc,p=T.tag[0].linkUrl);var I=S.showedmessage;I&&I.tag&&I.tag.forEach((function(e){f.push({text:e.elementDesc,color:e.color})}))}else if(S.yuanshengswitch&&"0"===S.yuanshengswitch.tag[0].elementDesc)console.log("二维码展示区域开关关闭"),e.setData({"switch.qrcode":!1});else if(S.huiyuanmashow){var P=S.huiyuanmashow;if(P.tag){console.log("会员码块取cms配置");var D={href:P.tag[0].linkUrl,src:R.img+P.tag[0].picUrl};e.setData({"cmsInfo.qrshow":D})}else console.log("会员码默认显示")}else S.yxswitch&&"0"===S.yxswitch.tag[0].elementDesc?(console.log("云信开关关闭"),e.setData({"switch.yunxin":!1})):S.game4||S.gamecopy?e.initGameModule(S):S.msi_minip_tools||S.linshibbgj?(console.log("当前是什么用户："+e.data.relationData.isRealUser),!1===e.data.relationData.isRealUser?e.initToolModule(S.linshibbgj):e.initToolModule(S.msi_minip_tools)):S.allOrderXCX||S.waitOrderXCX||S.purchaseListXCX||S.waitPackageXCX||S.waitReviewXCX||S.waitServiceXCX?e.parseOrder(S,{orderCount:h,ebuyReviewsCount:g,recommendPriceLabel:m}):S.cainimodulekg||S.copyabove?(S.cainimodulekg.tag[0]&&"0"===S.cainimodulekg.tag[0].elementDesc&&(console.log("猜你喜欢开关关闭"),e.setData({"switch.guessLike":!1})),S.copyabove.tag[0]&&e.setData({"cmsInfo.guessLikeTitle":S.copyabove.tag[0].elementName})):S.dingdankg&&S.dingdankg.tag&&S.dingdankg.tag[0]&&S.dingdankg.tag[0].elementDesc&&e.setData({"switch.dingdankg":!1})}}t.respQuerySuperDocLetters&&(d=JSON.parse(t.respQuerySuperDocLetters),e.parseVip(d,{vipAllText:f,vipBtnText:l,vipHref:p,vipPic:u}))}():K("msi-wdzc-20002_1",{errorDesc:t.code},2,"合并接口")})).catch((function(e){K("msi-wdzc-20002_1",{errorDesc:e.code},2,"合并接口")}))}))},parseUserInfo:function(e){var t=this;if(console.log("userInfo:"+e.ecologicalValue),e&&"success"===e.status){var a=1;a="A9200010"===e.paidFlag?3:"A9200010"===e.canApplyTrial?1:2;var o="v1";o="161000000100"===e.custLevel?"新人":"161000000110"===e.custLevel?"V1":"161000000120"===e.custLevel?"V2":"161000000130"===e.custLevel?"V3":"161000000140"===e.custLevel?"v4":"161000000145"===e.custLevel?"超级粉丝":"161000000160"===e.custLevel?"v0":"超级粉丝";var n={headPic:H(e.sysHeadPicFlag,e.sysHeadPicNum,e.encrypteCustNum,!1),nickName:e.accountName,superFlag:a,custLevel:o,ecologicalValue:e.ecologicalValue,isEnterprise:"enterprise"===e.custType,realName:e.eppIsReal},r=3===a?"#2D2A25":"#FFDB47";i.setNavigationBarColor({backgroundColor:r,frontColor:3===a?"#ffffff":"#000000"}),i.setBackgroundColor&&"number"==typeof t.pageState&&t.pageState<8&&i.setBackgroundColor({backgroundColor:r,backgroundColorTop:r,backgroundColorBottom:r}),t.setData({userData:n},(function(){z("autoexpo",t)}))}else K("msi-touxiang-20001",{errorDesc:"查询头像、昵称、会员等级失败"},2,"头像、昵称、会员等级接口")},parseYunxin:function(e){if(e&&"success"===e.meta.result){console.log("云信接口成功");var t=J(e.data.totalMsg,99);this.setData({yxcount:t})}else K("msi-yunxin-20001",{errorDesc:"云信接口失败"},2,"云信接口接口")},parseTrace:function(e){e&&(console.log("足迹接口成功"),this.setData({"cmsInfo.moneyData.footprints.count":e}))},parseCoupon:function(e){e&&e.couponTotalNumber?(console.log("优惠劵接口成功"),this.setData({"cmsInfo.moneyData.coupon.count":J(e.couponTotalNumber,9999)})):K("msi-wdqb-20001",{errorDesc:"查询已领优惠券数量接口失败"},1,"查询已领优惠券数量接口")},parseMyFavorite:function(e){if("成功"===e.returnMsg){console.log("我的关注接口成功");var t=e.productFavoriteCount+e.shopFavoriteCount;this.setData({"cmsInfo.moneyData.myfoucs.count":J(t,9999)})}},parseYunzuan:function(e){"success"===e.status?(console.log("云钻接口成功"),this.setData({"cmsInfo.moneyData.yunzuan.count":J(e.pointNum,9999)})):K("msi-wdqb-20002",{errorDesc:"查询已领云钻数量接口失败"},2,"查询已领云钻数量接口")},parseVip:function(e,t){var a=t.vipAllText,o=t.vipBtnText,n=t.vipHref,i=t.vipPic;"1"===e.code?this.setData({"payData.textmodle":[{text:e.docLetters}],"payData.btntext":e.buttonLetters,"payData.href":e.buttonLink}):this.setData({"payData.textmodle":a,"payData.btntext":o,"payData.href":n,"payData.pic":i})},parseAssets:function(e,t){var a=t.couponCount,o=t.footCount,n=t.yunzuanCount,i=t.myfoucsCount;try{var r={};e.tag.length>=2&&(e.tag.forEach((function(e){"优惠劵"===e.elementName?(r.coupon={},r.coupon.name=e.elementDesc,r.coupon.count=J(a.couponTotalNumber,9999),r.coupon.href=e.linkUrl):"足迹"===e.elementName?(r.footprints={},r.footprints.name=e.elementDesc,r.footprints.count=o,r.footprints.href=e.linkUrl):"领云钻"===e.elementName?(r.yunzuan={},r.yunzuan.name=e.elementDesc,r.yunzuan.count=J(n.pointNum,9999),r.yunzuan.href=e.linkUrl):"我的关注"===e.elementName?(r.myfoucs={},r.myfoucs.name=e.elementDesc,r.myfoucs.count=J(i,9999),r.myfoucs.href=e.linkUrl):(r[e.elementName]={},r[e.elementName].name=e.elementDesc,r[e.elementName].href=e.linkUrl)})),console.log(r),this.setData({"cmsInfo.moneyData":r}))}catch(e){}},parseOrderCount:function(e){"0000"===e.resultCode?(this.setData({"orderData.waitPay.count":J(e.waitPayCount||0,99)}),this.setData({"orderData.waitReceive.count":J(e.waitReceiveCount||0,99)})):K("msi-dingdan-20001",{errorDesc:"查询待支付、待收货、待评价数量接口失败"},1,W.getOrderCountUrl)},parseEbuyReviewsCount:function(e){"0"===e.returnCode?this.setData({"orderData.waitComment.count":J(e.totalOrderItemRecords||0,99)}):K("msi-dingdan-20001_1",{errorDesc:"查询待支付、待收货、待评价数量接口失败"},2,W.getEvaluationCountUrl)},parseMyPendReviewList:function(e){var t={};if(0===e.returnCode&&e.orderList&&e.orderList.length>0){var a=e.orderList[0];if(X(a.orderTime)&&a.orderItemList&&a.orderItemList.length>0){var o=a.orderItemList[0];t.hasWaitCommentProduct=2,t.waitCommentProduct={productImage:o.productImgUrl,productName:o.catentryName,diamond:o.score>0?1===o.isSpecialCommdityFlag?o.score:o.score+o.orderShowScore:0,partNumber:o.partNumber,omsOrderItemId:o.omsorderItemId,orderId:a.orderId,isAdultProduct:1===o.isSpecialCommdityFlag},this.setData({"orderData.hasWaitCommentProduct":t.hasWaitCommentProduct,"orderData.waitCommentProduct":t.waitCommentProduct})}else t.hasWaitCommentProduct=1,this.setData({"orderData.hasWaitCommentProduct":t.hasWaitCommentProduct})}else t.hasWaitCommentProduct=1,this.setData({"orderData.hasWaitCommentProduct":t.hasWaitCommentProduct});e&&0!==e.returnCode&&K("msi-dingdan-20002",{errorDesc:"查询待评价商品详情失败"},2,W.getWaitCommentList)},parseRecommendPriceLabel:function(e){e&&"1"===e.priceLabel&&this.setData({"orderData.hasBuy.hasBuyList":!0})},parseOrder:function(e,t){var a=t.orderCount,o=t.ebuyReviewsCount,n=t.recommendPriceLabel;if(e.allOrderXCX){var i=e.allOrderXCX.tag,r={text:i[0].elementName,href:i[0].linkUrl};this.setData({"orderData.allLook":r})}if(e.waitOrderXCX){var s=e.waitOrderXCX.tag,c={count:J(a.waitPayCount||0,99),text:s[0].elementName,href:s[0].linkUrl,src:R.img+s[0].picUrl};this.setData({"orderData.waitPay":c})}if(e.waitPackageXCX){var d=e.waitPackageXCX.tag,u={count:J(a.waitReceiveCount||0,99),text:d[0].elementName,href:d[0].linkUrl,src:R.img+d[0].picUrl};this.setData({"orderData.waitReceive":u})}if(e.waitReviewXCX){console.log(e.waitReviewXCX.tag);var l=e.waitReviewXCX.tag,p={count:J(o.totalOrderItemRecords||0,99),text:l[0].elementName,href:l[0].linkUrl,src:R.img+l[0].picUrl};this.setData({"orderData.waitComment":p})}if(e.waitServiceXCX){console.log(e.waitServiceXCX.tag);var f=e.waitServiceXCX.tag,h={text:f[0].elementName,href:f[0].linkUrl,src:R.img+f[0].picUrl};this.setData({"orderData.Exchange":h})}if(e.purchaseListXCX){console.log(e.purchaseListXCX.tag);var g=e.purchaseListXCX.tag,m={hasBuyList:!(!n||"0"!==n.priceLabel),text:g[0].elementName,href:g[0].linkUrl,src:R.img+g[0].picUrl};this.setData({"orderData.hasBuy":m})}},parseRecommendDatas:function(e){var t=this;console.info("猜你喜欢数据：",e);var a={"名品特卖":"特卖","可领券":"领券"};if(e&&e.sugGoods&&e.sugGoods[0]&&e.sugGoods[0].skus){for(var o,n=e.sugGoods[0].skus,r=[],s=(A(o={1:"zy-icon",3:"zy-icon",4:"zy-icon",5:"zy-icon",7:"zy-icon"},"4","gj-icon"),A(o,"5","gj-icon"),A(o,"6","gj-icon"),A(o,"7","jw-icon"),o),c=0;c<n.length;c++){var d=n[c];d.price&&d.sugGoodsName&&d.pictureUrl&&(a[d.promotionInfo]&&(d.promotionInfo=a[d.promotionInfo]),d.typeClass=s[d.productType]||"",d.priceInt=d.price.split(".")[0],d.priceDecimal=d.price.split(".")[1]||"00",r.push(d))}this.setData({guessLikeList:r.slice(0,36)},(function(){z("autoexpo",t)}))}else K("msi-wdzc-20002_1",{errorDesc:"查询猜你喜欢接口失败"},2,"猜你喜欢接口");i.hideLoading(),i.stopPullDownRefresh()},parseWeChatAppletRelation:function(e){var t=this;if(e&&"success"===e.status){this.resetData();for(var a=e.wechatAppletInfoList,o=a.length,n=0;n<o;n++)if(1===o&&"100000000010"===a[n].appletCustLabelFlag)this.setData({"relationData.LSTip":"升级至正式会员","relationData.onlyExtraUser":!0,"relationData.isRealUser":!1,"relationData.md":"006"});else if(2===o&&(0,I.default)().custno===a[n].custNum&&"100000000010"===a[n].appletCustLabelFlag){var i=1===n?0:1;this.setData({"relationData.LSTip":"切换至"+(a[i].nickName||"正式账户"),"relationData.isRealUser":!1,"relationData.md":"007"})}else(0,I.default)().custno===a[n].custNum&&"100000000020"===a[n].appletCustLabelFlag&&this.setData({"relationData.isRealUser":!0})}else"100000000010"===e.code?(console.log("开关关闭当前为临时会员",e.code),(0,k.doLogin)().then((function(){t.resetData(),t.initPage()}))):this.resetData()}})})),window.define("747",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var T,I=e(78),P=(T=I)&&T.__esModule?T:{default:T},D=e(38);a.default=function(){return new Promise((function(e,t){if(!(0,P.default)().custno)return(0,D.doLogin)().then((function(t){return e(t)})).catch((function(e){return t(e)}));e()}))}})),window.define("748",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(8);t.exports=function(e,t,a,o){var n=T.img,i="/uimg/cmf/cust_headpic/",r="100000000010"===e,s="100000000020"===e;return o?s&&a?n+i+a+"_00_240x240.jpg?v="+t:T.mySuning+"/project/msIndex/enterprise/css/images/sysheadpic_240x240.jpg":r?t?n+i+"0000000000_"+t+"_240x240.jpg":n+i+"0000000000_01_240x240.jpg":s&&a&&t?n+i+a+"_00_240x240.jpg?v="+t:n+i+"0000000000_01_240x240.jpg"}})),window.define("751",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=D(e(716)),I=D(e(56)),P=e(26);function D(e){return e&&e.__esModule?e:{default:e}}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _=e(17),k=e(135),L=e(45),N=e(36),E=e(77).saSendLog,O=e(42).getDfpToken,A=(e(16)._snBusError,e(66).baseLoginInfo);(new P.JSEncrypt).setPublicKey(L.RASKey);var R=N(n.request);function M(e,t){if(I.default.snBusError(e),t)throw new Error(t)}function U(e){k.showToast({title:e})}Page({data:{pageid:"kt6g",saPgnm:"pgtitle=微信小程序快速登录页;pageid=kt6g;pgcate=10009;"},autoclick:function(e){E("click",{event:e})},onLoad:function(e){this.from=e.from,E("pageview",{ext:{}}),"au"==e.from&&(this.setData({pageType:"au"}),n.setNavigationBarTitle({title:"升级正式账号"})),e.target&&this.setData({target:e.target})},onShow:function(){},showRegDialog:function(e){var t,a="show"+e.currentTarget.dataset.id+"Dialog";this.setData((x(t={},a,!0),x(t,"slideAnimate","slide-up"),t))},closeRegDialog:function(){this.setData({showSNDialog:!1,showYFBDialog:!1})},goToBind:function(){n.redirectTo({url:"../my/bind-kun/index?from="+this.from})},getPhoneNumber:function(e){var t=this;e.detail.iv&&e.detail.encryptedData?O().then((function(a){(0,T.default)().then((function(o){var i=void 0,r=n.getStorageSync("quick_miniToken");if(!r)throw M("b12",err),U("您的网络不给力哦，请稍后再试！"),new Error("获取miniToken失败");r=(r+"").substr(0,32),i={encryptData:e.detail.encryptedData,iv:e.detail.iv,sysCode:A.sysCode,createSource:L.createSource||"",createChannel:A.channel,ip:o||A.ip,dfpToken:a||"",detect:L.pdToken,miniToken:r,rememberMe:!0},"au"==t.from&&(i.custNo=n.getStorageSync("custNo")||""),R({url:_.quickLogin+"/phoneAutoLogin.do",method:"POST",dataType:"json",data:i,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){var a=e.data;switch(a.sceneType){case"0":t.dealNoPhone();break;case"1":t.dealPhoneExistAndHasBind(a);break;case"2":t.dealPhoneExistAndNoBInd(a);break;case"MPBSS01":t.dealGaoWei(a);break;default:t.dealOtherCase(e)}})).catch((function(e){return M("b17",e)}))})).catch((function(e){return M("b11",e)}))})).catch((function(e){return M("b13",e)})):void 0!==e.detail.iv&&void 0!==e.detail.encryptedData||n.redirectTo({url:"/pages/my/bind-kun/index?from="+t.from+"&target="+t.data.target})},dealNoPhone:function(){n.redirectTo({url:"/pages/my/bind-kun/index?from="+this.from+"&target="+this.data.target})},dealPhoneExistAndHasBind:function(e){var t=e.phoneNum;n.redirectTo({url:"/pages/my/bind-kun/index?from="+this.from+"&phone="+t+"&target="+this.data.target})},dealPhoneExistAndNoBInd:function(e){if("0"===e.code&&e.cookie)try{n.setStorageSync("quick_cookieStr",e.cookieString||""),n.setStorageSync("quick_cookieObj",e.cookie||""),n.setStorageSync("custNo",e.cookie&&e.cookie.custno||""),E("register",{reg_uid:e.cookie.custno||""}),this.data.target?n.redirectTo({url:decodeURIComponent(this.data.target)}):n.navigateBack()}catch(e){throw I.default.snBusError("b3"),this.data.target?n.redirectTo({url:decodeURIComponent(this.data.target)}):n.navigateBack(),new Error("设置cookie失败",e)}else U("您的网络不给力哦，请稍后再试！")},dealGaoWei:function(e){if("MPBSS01"===e.code)n.navigateTo({url:"/pages/auth/auth"});else if(e.loginErr&&e.loginErr.errorCode){var t=e.loginErr.errorCode,a=e.loginErr.snapshotId;"highRiskAccount"===t||"suspectedHighRiskAccount"===t||"maliciousRegister"===t||"suspiciousLogin"===t?("highRiskAccount"===t&&I.default.snBusError("b7"),"maliciousRegister"===t&&I.default.snBusError("b9"),n.navigateTo({url:"/packageA/pages/riskRelease/riskRelease?errorCode="+t+"&snapshotId="+encodeURIComponent(a)})):U("登录异常，请至PC或APP进行处理")}else U("网络问题，请稍后再试")},dealOtherCase:function(e){if("MP1002"===e.data.code)n.showToast({icon:"none",title:"当前账号异常[MP1002]"});else if("MP1003"===e.data.code)n.redirectTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount"});else if("MP1004"===e.data.code)n.showToast({icon:"none",title:"当前账号异常[MP1004]"});else if(e.data.loginErr&&e.data.loginErr.errorCode){var t=e.data.loginErr.errorCode,a=e.data.loginErr.snapshotId;"highRiskAccount"===t||"suspectedHighRiskAccount"===t||"maliciousRegister"===t||"suspiciousLogin"===t?("highRiskAccount"===t&&I.default.snBusError("b7"),"maliciousRegister"===t&&I.default.snBusError("b9"),n.navigateTo({url:"/packageA/pages/riskRelease/riskRelease?errorCode="+t+"&snapshotId="+encodeURIComponent(a)})):U("登录异常，请至PC或APP进行处理")}else U("网络问题，请稍后再试")},protocolYfb:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbxy.html")})},protocolHyzc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/snyghyzc.html")})},protocolYszc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yssm.html")})},protocolYfbYszc:function(){n.navigateTo({url:"/pages/my/protocol/protocol?url="+encodeURIComponent("https://sale.suning.com/all/regProtocol/yfbyszc.html")})}})})),window.define("754",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P,D=L(e(25)),x=L(e(19)),_=e(8),k=(P=_)&&P.__esModule?P:{default:P};function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var E=r(),O=e(77).saSendLog;Page((N(I={data:{saPgnm:"pgcate=10006;prdtp=销售目录ID;pgtitle=搜索列表页-xxx@xxx",pageid:"listPage",filterOptions:{keyword:"",iv:0,st:0,cp:0,cf:"",ci:"",ct:0,sp:""},placeholder:"请输入您想要的商品",maxPageSize:0,isSnServiceFlag:"0",scrollTopShow:!1,bottomTextShow:!1,productList:[],priceList:[],brandList:[],categoryList:[],resultType:"-1",filterSelected:!1,loadingShow:!1,hotWord:[],hisWord:[],associateWords:[],searchText:"请输入您想要的商品",associateAreaHidden:!0,inputShow:!1,imageHost:k.default.res,isSwitchOn:"off",isListPage:!0},isCategoryShow:!1,searchFlag:!1,cityObj:{},minPrice:"",maxPrice:"",pageName:"searchResult",selectedCategoryByCategory:{},selectedCategory:{},isReload:!0,brandListByCategory:[],imgError:function(e){var t=e.currentTarget.dataset.item;console.log(t),E.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxjgy_search",error_code:"ss-wxjgy_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+(1==t.extenalFileds.specifiedSubFlag?t.extenalFileds.specifiedSub:t.partnumber)+"_"+i.getStorageSync("custNo")}),type_name:"商品主图加载"})},onLoad:function(e){var t=this;this.setData({saPgnm:"pgcate=10006;prdtp="+e.ci+";pgtitle=搜索列表页-"+e.ci+"@"+e.cf,filterOptions:D.extend(this.data.filterOptions,{cp:0,cf:e.cf||"",ci:e.ci||"",sp:e.sp||"",keyword:e.keyword||""})}),this.selectedCategory={id:e.ci},x.getLocation().then((function(e){t.cityObj=e})),i.createIntersectionObserver&&i.createIntersectionObserver(this).relativeToViewport({top:-1}).observe(".second-selector",(function(e){t.setData({thirdSelectorFix:!e.intersectionRatio})})),i.createIntersectionObserver&&i.createIntersectionObserver(this).relativeToViewport({top:-1}).observe(".second-selector",(function(e){t.setData({thirdSelectorFix:!e.intersectionRatio})}))},autoclick:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset))},tapToTop:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset)),clearTimeout(this.scrollTimer),i.pageScrollTo({scrollTop:0})},toSearch:function(){i.redirectTo({url:"/pages/search/searchResult/result"})},tapTimer:!0,router:"",onReady:function(){},onShow:function(){var e=this;O("pageview",{ext:{}});var t=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice;""!=this.data.filterOptions.keyword&&this.setData({searchText:this.data.filterOptions.keyword}),this.setData({filterSelected:t}),this.selectedCategoryByCategory=this.selectedCategory,x.getLocation().then((function(t){t.cityLESId!=e.cityObj.cityLESId?(D.isNotEmpty(e.cityObj.cityLESId)?e.setData({filterOptions:D.extend(e.data.filterOptions,{cp:0}),cityObj:t,productList:[],priceList:[],protoProductList:[],protoPriceList:[]}):e.setData({filterOptions:D.extend(e.data.filterOptions,{cp:0}),productList:[],priceList:[],protoProductList:[],protoPriceList:[]}),E.wechat.store.dispatch.bind(e)("clientSearch",e.data.filterOptions)):e.data.inputShow||e.isReload&&(e.setData({filterOptions:D.extend(e.data.filterOptions,{cp:0}),productList:[],priceList:[],protoProductList:[],protoPriceList:[]}),E.wechat.store.dispatch.bind(e)("clientSearch",e.data.filterOptions))})).catch((function(e){console.log(e,"搜索定位失败")}))},onHide:function(){this.isReload=!1},onUnload:function(){this.isReload=!1},scrollTimer:null,jumpTimer:null,onPageScroll:function(e){var a=this;clearTimeout(this.scrollTimer),this.scrollTimer=t((function(){e.scrollTop>600?a.setData({scrollTopShow:!0}):a.setData({scrollTopShow:!1})}),50)},onReachBottom:function(){var e=this.data.filterOptions.cp+1;e>this.data.maxPageSize?this.setData({bottomTextShow:!0}):(this.setData({filterOptions:D.extend(this.data.filterOptions,{cp:e})}),E.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions))},doFilter:function(e){var a=this;clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){O("manuclick",Object.assign({},e.currentTarget.dataset)),a.router="filter",i.navigateTo({url:"/packageC/pages/listFilter/filter?fromResult=true&isSnServiceFlag="+a.data.isSnServiceNewFlag})}),200)},secondFilter:function(e){if(O("manuclick",Object.assign({},e.currentTarget.dataset)),this.tapTimer){var t=e.currentTarget.dataset.item;this.setData({filterOptions:D.extend(this.data.filterOptions,{st:{z:function(){return"0"},x:function(){return"8"},j:function(){return 9==this.data.filterOptions.st?"10":"9"}}[t].bind(this)(),cp:0}),resultType:"-1",productList:[],priceList:[],protoProductList:[],protoPriceList:[]}),E.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)}},openFourthPage:function(e){clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.item,a="/pages/fourth/fourth?productId="+(1==t.extenalFileds.specifiedSubFlag?t.extenalFileds.specifiedSub:t.partnumber)+"&shop="+t.salesCode;console.log("link to fourth:",a),i.navigateTo({url:a})}),200)},onShareAppMessage:function(){},snServerFilter:function(e){e.currentTarget.dataset.item;this.setData({filterOptions:D.extend(this.data.filterOptions,{ct:2==this.data.filterOptions.ct?0:2}),filterSelected:0!=this.data.filterOptions.ct,resultType:"-1",productList:[],priceList:[],protoProductList:[],protoPriceList:[]}),E.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)},fastFilter:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.filterResultSearchList,a=this.data.selectFilterValList||[],o=e.currentTarget.dataset.item,n=[],i=[],r=this.data.brandList;for(var s in r)r[s].forEach((function(e){e.checked&&(n.push(e.value),i.push(e.valueDesc))}));if("isFastFilter"==o){var c=e.currentTarget.dataset.key,d=t&&t.length&&t[c];d&&d.values&&d.values.length&&d.values.forEach((function(e){var t=a.indexOf(e.value);if(e.checked&&t<0?(a.push(e.value),d.checkedValDesc.push(e.valueDesc)):!e.checked&&t>=0&&(a.splice(t,1),d.checkedValDesc.splice(t,1)),"brand_Id_Name"===d.field){var o=i.indexOf(e.value);e.checked&&o<0&&n.push(e.value),!e.checked&&o>=0&&n.splice(o,1)}})),d.isShow=!1}var u=[],l=!1;if(0!=a.length&&u.push.apply(u,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a)),0!=n.length&&u.push.apply(u,n),this.setData({filterOptions:D.extend(this.data.filterOptions,{cf:u.join(",")})}),"ct"==o&&(this.setData({filterOptions:D.extend(this.data.filterOptions,{ct:2==this.data.filterOptions.ct?0:2})}),l=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.ci||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice,this.setData({filterSelected:l})),"spf"==o){var p=e.currentTarget.dataset.pram.activityId,f=this.data.filterOptions.spf&&this.data.filterOptions.spf.split("_")||[],h=f.indexOf(p);-1!=h&&f.length?f.splice(h,1):f.push(p);var g={};f.forEach((function(e){g[e]=!0})),l=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.ci||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice,this.setData({filterOptions:D.extend(this.data.filterOptions,{spf:f.join("_")}),filterSelected:l,spfObj:g})}l=l||""!=this.data.filterOptions.cf,this.setData({filterSelected:l,filterResultSearchList:t,selectFilterValList:a,selectedBrandList:n,priceList:[],productList:[],adProductList:[],protoProductList:[],protoPriceList:[],resultType:"-1"}),E.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)},doExpand:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.index,a=this.data.filterResultSearchList,o=this.data.selectFilterValList;a&&a.length&&a[t]&&(a[t].isShow=!a[t].isShow),a&&a.length&&a.forEach((function(e,a){a!==t&&(e.isShow=!1),e&&e.values&&e.values.length&&e.values.forEach((function(e){var t=o.indexOf(e.value);e.checked=-1!==t}))})),this.setData({filterResultSearchList:a})},toItem:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.key,a=e.currentTarget.dataset.index,o=this.data.filterResultSearchList,n=o&&o.length&&o[t];n&&n.values&&n.values.length&&(n.values[a].checked=!n.values[a].checked),this.setData({filterResultSearchList:o})},doRest:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.brandList,a=this.data.filterResultSearchList,o=this.data.selectedBrandList,n=e.currentTarget.dataset.key,i=a&&a.length&&a[n];if(i&&i.values&&i.values.length&&i.values.forEach((function(e){e.checked=!1})),"brand_Id_Name"==i.field)for(var r in o=[],t)t[r].forEach((function(e){e.checked&&(e.checked=!1)}));this.setData({filterResultSearchList:a,selectedBrandList:o,brandList:t})},closeShadeLayer:function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.filterResultSearchList,a=e.currentTarget.dataset.key;(t&&t.length&&t[a]).isShow=!1,this.setData({filterResultSearchList:t})}},"closeShadeLayer",(function(e){O("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.filterResultSearchList,a=e.currentTarget.dataset.key;(t&&t.length&&t[a]).isShow=!1,this.setData({filterResultSearchList:t})})),N(I,"preventTouchMove",(function(){})),I))})),window.define("757",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=N(e(6)),P=N(e(25)),D=N(e(19)),x=L(e(8)),_=L(e(9)),k=e(23);function L(e){return e&&e.__esModule?e:{default:e}}function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var E=e(694).searchSeo,O=r(),A=e(77).saSendLog;Page({data:{pageid:"searchPage",filterOptions:{id:"",keyword:"",iv:0,st:0,cp:0,cf:"",ci:"",ct:0,sp:"",spf:""},hotSearchWord:!1,historyWord:!1,xiaoqiang:!1,associateWord:!1,storeSearch:!1,placeholder:"请输入您想要的商品",maxPageSize:0,isSnServiceFlag:!1,shopWords:"",scrollTopShow:!1,bottomTextShow:!1,productList:[],adProductList:[],protoProductList:[],aboutClassList:[],priceList:[],protoPriceList:[],brandList:[],selectedBrandList:[],categoryList:[],resultType:"-1",filterSelected:!1,loadingShow:!1,hotWord:[],hisWord:[],directWord:[],associateWords:[],searchText:"",associateAreaHidden:!0,inputShow:!0,imageHost:x.default.res,isSwitchOn:"off",superRedPkg:{},filterResultSearchList:[],selectFilterValList:[],platform:"",isGotAdProduct:!0,noResultShow:!1,coverIsOpen:!0,openKeyboard:!1,isSeo:!1},searchFlag:!1,cityObj:{},minPrice:"",maxPrice:"",pageName:"searchResult",selectedCategoryByCategory:{},selectedCategory:{},isReload:!1,brandListByCategory:[],autoclick:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset))},imgError:function(e){console.log("结果页 图片异常");var t=e.currentTarget.dataset.item;O.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxjgy_search",error_code:"ss-wxjgy_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+(t.extenalFileds&&1==t.extenalFileds.specifiedSubFlag?t.extenalFileds.specifiedSub:t.partnumber)+"_"+i.getStorageSync("custNo")}),type_name:"商品主图展示异常"})},onLoad:function(e){var t=this;"prod"!=_.default&&this.setData({showquanSearch:!0}),this.pageResult=getCurrentPages().find((function(e){return"searchResult"==e.pageName})),D.getLocation().then((function(e){t.cityObj=e})),O.wechat.store.dispatch.bind(this)("getHotWords"),O.wechat.store.dispatch.bind(this)("getHisWords");var a=e.keywords;a&&/%[0-9a-f]{2}/i.test(a)&&"swan"==(0,k.getPlatformType)()&&(a=decodeURIComponent(a)),this.setData({searchText:a||""}),this.inputText=a;var o=e.id;if(o){var n=e.st||0,r=e.sp||"";this.setData({isSeo:!0,st:n,sp:r}),I.getWordTextByID(o).then((function(e){var a=e.keyWord||"";t.inputText=a,t.setData({searchText:a},(function(){O.wechat.store.dispatch.bind(t)("searchTdk",a,n,r)})),O.wechat.store.dispatch.bind(t)("goSearchResult",!0)}))}else O.wechat.store.dispatch.bind(this)("goSearchResult",!0);i.getSystemInfo({success:function(e){this.setData({platform:e.platform})}.bind(this)})},tapToTop:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset)),clearTimeout(this.scrollTimer),i.pageScrollTo({scrollTop:0})},inputTimer:null,inputText:"",searchInput:function(e){clearTimeout(this.inputTimer),this.inputTimer=t(function(){this.inputText=e.detail.value,O.wechat.store.dispatch.bind(this)("getAssociateWords",e.detail.value)}.bind(this),100)},showplaceholder:function(e){var t=e.detail.value;this.searchFlag=!1,this.setData({placeholder:this.data.defaultWord||"请输入您想要的商品"}),this.inputText=t,O.wechat.store.dispatch.bind(this)("getAssociateWords",t)},setinputvalue:function(e){""==e.detail.value&&(this.setData({placeholder:this.data.defaultWord||"请输入您想要的商品"}),this.data.AdDefaultWord&&(console.log("默认词曝光555555555555"),A("autoexpo",this)))},tapTimer:!0,doSearchByTap:function(e){var t=e.currentTarget.dataset.item||e.detail,a=t.keyword||t.word||t.keyname||t.value||this.inputText||this.data.defaultWord||"",o=this.data.directWord,n=this.data.AdDefaultWord,r=!1,s="",c=e.currentTarget.dataset.rewrite||!1;if(console.log(c,999),this.setData({searchText:a,isGotAdProduct:!0}),"swan"==(0,k.getPlatformType)()&&E(a),this.inputText=a,"2"==t.type){r=!0,s=t.clickUrl+"&notNeedLogin=true";var d=t.url;console.log("热搜词广告计费链接",d),I.sendApsUrl(d)}else o.forEach((function(e){if(e.word==a)return r=!0,void(s=e.url+"&notNeedLogin=true")}));if(n&&n.word==a){r=!0,s=n.clickUrl+"&notNeedLogin=true";var u=n.url;console.log("默认词广告计费链接",u),I.sendApsUrl(u),A("manuclick",{modid:"handle",eleid:"keyboardback",evdl:'{"keyword":"'+a+'"}',tar:n.url})}A("manuclick",Object.assign({},e.currentTarget.dataset,{evdl:a})),r?(console.log("广告直达词",s),i.navigateTo({url:s})):c?O.wechat.store.dispatch.bind(this)("goSearchResult",!1,!0):O.wechat.store.dispatch.bind(this)("goSearchResult",!1,!1)},clearHis:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset)),O.wechat.store.dispatch.bind(this)("clearHisWords")},doSearch:function(){O.wechat.store.dispatch.bind(this)("goSearchResult")},router:"",onReady:function(){var e=this;i.createIntersectionObserver&&i.createIntersectionObserver(this).relativeToViewport({top:-1}).observe(".second-selector",(function(t){e.setData({thirdSelectorFix:!t.intersectionRatio})}))},onShow:function(){var e=this;E(this.data.searchText),O.wechat.store.dispatch.bind(this)("getPageConfig"),this.data.inputShow?this.setData({pageid:"inputPage",pageType:"pgcate=10007;pgtitle=搜索输入页;",saPgnm:"pgcate=10007;pgtitle=搜索输入页;"}):this.setData({pageid:"searchPage",pageType:"pgcate=10007;pgtitle=搜索结果页-自然搜索;",saPgnm:"pgcate=10007;pgtitle=搜索结果页-自然搜索;keyword="+this.data.searchText}),A("pageview",{ext:{}});var t=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.ci||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice;this.setData({filterSelected:t}),this.selectedCategoryByCategory=this.selectedCategory,D.getLocation().then((function(t){t.cityLESId!=e.cityObj.cityLESId?P.isNotEmpty(e.cityObj.cityLESId)&&(e.setData({filterOptions:P.extend(e.data.filterOptions,{cp:0}),cityObj:t,productList:[],priceList:[],adProductList:[],protoProductList:[],protoPriceList:[]}),O.wechat.store.dispatch.bind(e)("clientSearch",e.data.filterOptions)):e.data.inputShow||e.isReload&&(e.setData({filterOptions:P.extend(e.data.filterOptions,{cp:0}),productList:[],priceList:[],adProductList:[],protoProductList:[],protoPriceList:[]}),O.wechat.store.dispatch.bind(e)("clientSearch",e.data.filterOptions))})).catch((function(e){console.log(e,"搜索定位失败")}))},onHide:function(){this.isReload=!1},onUnload:function(){this.isReload=!1},scrollTimer:null,jumpTimer:null,onPageScroll:function(e){var a=this;clearTimeout(this.scrollTimer),this.scrollTimer=t((function(){e.scrollTop>600?a.setData({scrollTopShow:!0}):a.setData({scrollTopShow:!1})}),50)},onReachBottom:function(){var e=this.data.filterResultSearchList,t=0;if(e.length&&e.forEach((function(e){t+=Number(e.isShow)})),!t){var a=this.data.filterOptions.cp+1;if(a>this.data.maxPageSize)return void this.setData({bottomTextShow:!0});this.setData({filterOptions:P.extend(this.data.filterOptions,{cp:a}),searchText:this.data.filterOptions.keyword,rewriteWord:!1}),O.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)}},doFilter:function(e){var a=this;A("manuclick",Object.assign({},e.currentTarget.dataset)),clearTimeout(this.jumpTimer);var o=this.data.aboutClassList,n=this.data.filterResultSearchList;n.length&&n.forEach((function(e){e.isShow=!1})),o=o.map((function(e){return e.id==a.data.filterOptions.ci?e.checked=!0:e.checked=!1,e})),this.jumpTimer=t((function(){a.router="filter",a.setData({aboutClassList:o,selectedBrandList:a.data.selectedBrandList,isSnServiceFlag:a.data.isSnServiceFlag,isSnServiceNewFlag:a.data.isSnServiceNewFlag,filterResultSearchList:n,coverIsOpen:!0,searchText:a.data.filterOptions.keyword,rewriteWord:!1}),console.log(a.data.filterOptions,22222222),O.wechat.store.dispatch.bind(a)("goSearchFilter")}),200)},secondFilter:function(e){if(this.tapTimer){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.item;this.setData({filterOptions:P.extend(this.data.filterOptions,{st:{z:function(){return"0"},x:function(){return"8"},j:function(){return 9==this.data.filterOptions.st?"10":"9"}}[t].bind(this)(),cp:0}),resultType:"-1",productList:[],priceList:[],adProductList:[],protoProductList:[],protoPriceList:[],coverIsOpen:!0,searchText:this.data.filterOptions.keyword,rewriteWord:!1}),O.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)}},openFourthPage:function(e){clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.item,a="";if(t.isAdproduct){a="/pages/fourth/fourth?productId="+t.cmdCode+"&shop="+t.companyCode;var o=t.apsClickUrl;console.log("广告计费链接",o),I.sendApsUrl(o)}else a="/pages/fourth/fourth?productId="+(1==t.extenalFileds.specifiedSubFlag?t.extenalFileds.specifiedSub:t.partnumber)+"&shop="+t.salesCode;console.log("四级页:",a),i.navigateTo({url:a})}),200)},openShopListPage:function(e){var a=this;clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){A("manuclick",Object.assign({},e.currentTarget.dataset));var t="/pages/search/searchStore/store?keywords="+a.data.shopWords;i.navigateTo({url:t})}),200)},doExpand:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.index,a=e.currentTarget.dataset.isopen,o=this.data.filterResultSearchList,n=this.data.selectFilterValList;o&&o.length&&o[t]&&(o[t].isShow=!o[t].isShow),o&&o.length&&o.forEach((function(e,a){a!==t&&(e.isShow=!1),e&&e.values&&e.values.length&&e.values.forEach((function(e){var t=n.indexOf(e.value);e.checked=-1!==t}))})),console.log(a,7777),this.setData({filterResultSearchList:o,coverIsOpen:a})},toItem:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=e.currentTarget.dataset.key,a=e.currentTarget.dataset.index,o=this.data.filterResultSearchList,n=o&&o.length&&o[t];n&&n.values&&n.values.length&&(n.values[a].checked=!n.values[a].checked),this.setData({filterResultSearchList:o})},doRest:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.brandList,a=this.data.filterResultSearchList,o=this.data.selectedBrandList,n=e.currentTarget.dataset.key,i=a&&a.length&&a[n];if(i&&i.values&&i.values.length&&i.values.forEach((function(e){e.checked=!1})),"brand_Id_Name"==i.field)for(var r in o=[],t)t[r].forEach((function(e){e.checked&&(e.checked=!1)}));this.setData({filterResultSearchList:a,selectedBrandList:o,brandList:t})},fastFilter:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.filterResultSearchList,a=this.data.selectFilterValList||[],o=e.currentTarget.dataset.item,n=[],i=[],r=[],s=this.pageResult.data.brandList;for(var c in s)s[c].forEach((function(e){e.checked&&(n.push(e.value),i.push(e.valueDesc))}));if("isFastFilter"==o){var d=e.currentTarget.dataset.key,u=t&&t.length&&t[d];u&&u.values&&u.values.length&&u.values.forEach((function(e){var t=a.indexOf(e.value);if(e.checked&&t<0?(a.push(e.value),u.checkedValDesc.push(e.valueDesc)):!e.checked&&t>=0&&(a.splice(t,1),u.checkedValDesc.splice(t,1)),"brand_Id_Name"===u.field){var o=i.indexOf(e.value);e.checked&&o<0&&n.push(e.value),!e.checked&&o>=0&&n.splice(o,1)}})),u.isShow=!1}var l=[],p=!1;if(0!=a.length&&l.push.apply(l,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a)),0!=n.length&&l.push.apply(l,n),""==this.minPrice||""==this.maxPrice?r=(r=[this.minPrice,this.maxPrice]).map((function(e,t){return""==String(e)?e:parseInt(+e)})):parseInt(+this.minPrice)>parseInt(+this.maxPrice)?(r[0]=parseInt(+this.maxPrice),r[1]=parseInt(+this.minPrice)):(r[0]=parseInt(+this.minPrice),r[1]=parseInt(+this.maxPrice)),"_"!=r.join("_")&&l.push(r.join("_")),this.setData({filterOptions:P.extend(this.data.filterOptions,{cf:l.join(",")})}),"ct"==o&&(this.setData({filterOptions:P.extend(this.data.filterOptions,{ct:2==this.data.filterOptions.ct?0:2})}),p=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.ci||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice,this.setData({filterSelected:p})),"spf"==o){var f=e.currentTarget.dataset.pram.activityId,h=this.data.filterOptions.spf&&this.data.filterOptions.spf.split("_")||[],g=h.indexOf(f);-1!=g&&h.length?h.splice(g,1):h.push(f);var m={};h.forEach((function(e){m[e]=!0})),p=""!=this.data.filterOptions.cf||0!=this.data.filterOptions.ct||0!=this.data.filterOptions.iv||""!=this.data.filterOptions.ci||""!=this.data.filterOptions.sp||""!=this.minPrice||""!==this.maxPrice,this.setData({filterOptions:P.extend(this.data.filterOptions,{spf:h.join("_")}),filterSelected:p,spfObj:m})}p=p||""!=this.data.filterOptions.cf,this.setData({filterSelected:p,filterResultSearchList:t,selectFilterValList:a,selectedBrandList:n,priceList:[],productList:[],adProductList:[],protoProductList:[],protoPriceList:[],resultType:"-1",coverIsOpen:!0,searchText:this.data.filterOptions.keyword,rewriteWord:!1}),O.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)},closeShadeLayer:function(e){A("manuclick",Object.assign({},e.currentTarget.dataset));var t=this.data.filterResultSearchList,a=e.currentTarget.dataset.key;(t&&t.length&&t[a]).isShow=!1,this.setData({filterResultSearchList:t,coverIsOpen:!0})},onShareAppMessage:function(){},quanSearch:function(){console.log(_.default,"环境"),i.navigateTo({url:"../../../packageA/pages/quanSearch/search/search?id="+this.data.quanId})},quanIdsearch:function(e){this.setData({quanId:e.detail.value})},categoryWallSelect:function(e){e.currentTarget.dataset;var t=e.currentTarget.dataset.index,a=e.currentTarget.dataset.item,o=e.currentTarget.dataset.item.dirId,n=(e.currentTarget.dataset.item.dirName,this.data.directories),i=this.data.filterOptions.ci,r=!1;(n=n.map((function(e){return e.checked=!1,e})))[t].checked=!a.checked,a.checked?i="":(i=o,r=!0),console.log(this.data.filterOptions,8888),this.setData({directories:n,filterOptions:P.extend(this.data.filterOptions,{ci:i,cf:"",st:0}),filterSelected:r,resultType:"-1",productList:[],priceList:[],adProductList:[],protoProductList:[],protoPriceList:[]}),O.wechat.store.dispatch.bind(this)("clientSearch",this.data.filterOptions)},preventTouchMove:function(){}})})),window.define("760",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=k(e(25)),D=k(e(19)),x=e(8),_=(I=x)&&I.__esModule?I:{default:I};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var L=r();e(77).saSendLog;Page({data:{saPgnm:"pgtitle=searchResult;pgcate=10007;",filterOptions:{keyword:"",cn:"",st:0,cp:0,ps:20,ext:12},totalCount:"1",maxPageSize:0,scrollTopShow:!1,bottomTextShow:!1,shopList:[],loadingShow:!1,searchText:"",imageHost:_.default.res,imageOss:_.default.oss},isReload:!0,cityObj:{},pageName:"searchStore",shopProductError:function(e){var t=e.currentTarget.dataset.item;console.log("店铺主图 - 异常",t),L.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxdpjgy_search",error_code:"ss-wxdpjgy_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+t.shopId+"_"+i.getStorageSync("custNo")}),type_name:"店铺商品主图展示异常"})},shopLogoError:function(e){var t=e.currentTarget.dataset.item;console.log("店铺LOGO图片 - 异常",t),L.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxdpjgy_search",error_code:"ss-wxdpjgy_search-20002",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+t.shopId+"_"+i.getStorageSync("custNo")}),type_name:"店铺品牌logo无图片"})},onLoad:function(e){var t=this;D.getLocation().then((function(e){t.cityObj=e,L.wechat.store.dispatch.bind(t)("goSearchStoreResult")})),this.setData({searchText:e.keywords})},tapToTop:function(){clearTimeout(this.scrollTimer),i.pageScrollTo({scrollTop:0})},inputTimer:null,inputText:"",tapTimer:!0,router:"",onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},scrollTimer:null,jumpTimer:null,onPageScroll:function(e){var a=this;clearTimeout(this.scrollTimer),this.scrollTimer=t((function(){e.scrollTop>600?a.setData({scrollTopShow:!0}):a.setData({scrollTopShow:!1})}),50)},onReachBottom:function(){var e=this.data.filterOptions.cp+1;e>this.data.maxPageSize?this.setData({bottomTextShow:!0}):(this.setData({filterOptions:P.extend(this.data.filterOptions,{cp:e})}),L.wechat.store.dispatch.bind(this)("storeSearch",this.data.filterOptions))},secondFilter:function(e){if(this.tapTimer){var t=e.currentTarget.dataset.item,a=this.data.filterOptions.st;console.log("原",a);var o={z:function(){return console.log("z - 0"),"0"},x:function(){return console.log("x - 1"),"1"},m:function(){return console.log("m - 2"),"2"},g:function(){return console.log("g - 3"),"3"}};o[t].bind(this)()!=a&&(this.setData({filterOptions:P.extend(this.data.filterOptions,{st:o[t].bind(this)(),cp:0}),storeList:[]}),L.wechat.store.dispatch.bind(this)("storeSearch",this.data.filterOptions))}},toSearch:function(){i.navigateBack()},toStore:function(e){var a=this;clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){var t=e.currentTarget.dataset.item;console.log(t);var o="/packageE/pages/shop/index/index?shopId="+a.addZero(t.shopId,10);console.log("店铺地址:",o),i.navigateTo({url:o})}),200)},addZero:function(e,t){for(var a=(e+"").length,o="",n=0;n<t-a;n++)o+="0";return o+e},toFourth:function(e){clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){var t=e.currentTarget.dataset.item,a="/pages/fourth/fourth?productId="+t.partnumber+"&shop="+t.storeIdStr;console.log("商品地址:",a),i.navigateTo({url:a})}),200)},onShareAppMessage:function(){}})})),window.define("763",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(8),D=(I=P)&&I.__esModule?I:{default:I};Page({data:{},onLoad:function(e){this.setData({options:e})},onReady:function(){},onShow:function(){if(i.showLoading({title:"加载中"}),this.data.options.scene){var e=decodeURIComponent(this.data.options.scene).split("&"),a=D.default.syDomain;1===e.length?a=a+"sy_content.html?productId="+e[0].split("=")[1]:2===e.length&&(a=a+"sy_share.html?id="+e[0].split("=")[1]+"&applyId="+e[1].split("=")[1]),t((function(){i.reLaunch({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(a)})}),200)}else t((function(){i.reLaunch({url:"/packageA/pages/trialCenter/index/trialCenter"})}),200)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("766",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{popShow:!1,orderInfo:[{typeCode:"13",orderId:"123456",payflag:"1",typeText:"支付宝",btntype:"2"},{typeCode:"08",orderId:"123456",payflag:"1",typeText:"微信",btntype:"1"}],popTitle:"请选择支付方式"},onLoad:function(){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},showPop:function(){this.setData({popShow:!0})},closePop:function(){this.data.popShow&&this.setData({popShow:!this.data.popShow})}})})),window.define("769",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";e(770);Component({properties:{title:{type:String,value:"请选择支付方式"},overlayStyle:String,zIndex:{type:Number,value:100},overlay:{type:Boolean,value:!0},position:{type:String,value:"center"},show:{type:Boolean,value:!1},btnList:{type:Object,value:{}},closeOnClickOverlay:{type:Boolean,value:!0}},data:{canClick:!0},attached:function(){},ready:function(){console.log(this.properties)},detached:function(){},methods:{onTap:function(){this.setData({})},choosePay:function(e){console.log(e.currentTarget.dataset.btntype),console.log(this.properties.btnList);var t=this.properties.btnList;t.orderId,t.vendorCode,t.omsOrderId,t.orderType,t.payFlag,t.newCart4Switch,t.wxGiftFlag},onClose:function(){this.triggerEvent("close")},doWxpay:function(e){var t=this.properties.btnList,a={orderId:t.orderId,vendorCode:t.vendorCode,omsOrderId:t.omsOrderId,orderType:t.orderType,payFlag:t.payFlag,btnType:t.btnType,newCart4Switch:t.newCart4Switch,wxGiftFlag:t.wxGiftFlag,payMethod:e.currentTarget.dataset.paytype};this.triggerEvent("wx",a)},doAlipay:function(e){var t=this.properties.btnList,a={orderId:t.orderId,vendorCode:t.vendorCode,omsOrderId:t.omsOrderId,orderType:t.orderType,payFlag:t.payFlag,btnType:t.btnType,newCart4Switch:t.newCart4Switch,wxGiftFlag:t.wxGiftFlag,payMethod:e.currentTarget.dataset.paytype};this.triggerEvent("ali",a)}}}),Page({_isCustomComponentPage:!0})})),window.define("770",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(17),P=e(25),D=P.requestPromise,x=P.compareVersion;a.exports={showFunc:function(e,t){console.log("order..............",t);var a=e.btnType;if(t.vendorList&&t.vendorList.length>0)var o=!(!t.vendorList[0].vendorFlag.bdxcxQueryMethodFlag||"1"!=t.vendorList[0].vendorFlag.bdxcxQueryMethodFlag);else o=!(!t.vendorFlag.bdxcxQueryMethodFlag||"1"!=t.vendorFlag.bdxcxQueryMethodFlag);var n,r=i.getSystemInfoSync(),s=r.version,c=r.SDKVersion;switch(n=x(s,"10.13")>=0&&x(c,"1.13.4")>=0,a){case"4":case"nopayflag":case"6":case"7":case"10":case"17":case"26":case"28":return!0;case"32":return!!n;case"13":return"待支付"==t.transStatus||"待付定金"==t.transStatus;case"1":case"2":case"31":case"36":case"37":case"8":case"12":case"14":case"15":case"18":case"19":case"24":case"25":case"21":case"34":case"23":case"27":case"29":case"10000":case"40":case"45":return!1;default:return!!o}},goUseCoupon:function(e){var t="/pages/quan/search/search?";t+="&id="+e,t+="&type=0",i.navigateTo({url:t})},goEExchangeCard:function(e,t){i.navigateTo({url:"/packageA/pages/order/eExchangeCard/index?orderId="+e+"&vendorCode="+t})},confirmOrder:function(e){"0000000000"==e.vendorCode||"factory"==e.target?this._confirmFactoryOrder(e).then((function(e){0==e.retCode?i.showToast({title:"确认收货成功",icon:"success",duration:2e3}):i.showToast({title:e.errMsg.split("E")[0]||"确认收货失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3}),t((function(){i.redirectTo({url:"/packageA/pages/order/orderList?index=0"})}),2e3)})):this._confirmCShopOrder(e).then((function(e){0==e.retCode?i.showToast({title:"确认收货成功",icon:"success",duration:2e3}):i.showToast({title:e.errMsg.split("E")[0]||"确认收货失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3}),t((function(){i.redirectTo({url:"/packageA/pages/order/orderList?index=0"})}),2e3)}))},cancelOrder:function(e,t,a){var o=this;e&&e.length&&i.showModal({title:"提示",content:"确定取消订单？",confirmColor:"#ffc200",success:function(t){t.confirm&&o._cancelOrder(e).then((function(e){0==(e=e||{}).retCode?(i.showToast({title:"取消成功",icon:"success",duration:2e3}),"orderList"==a?i.redirectTo({url:"/packageA/pages/order/orderList?index=0"}):i.navigateBack()):i.showToast({title:e.errMsg.split("E")[0]||"取消失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3})})).catch((function(){}))}})},deleteOrder:function(e,t){var a=this;i.showModal({content:"确定删除订单？",confirmColor:"#ffc200",success:function(o){o.confirm&&e&&e.length&&a._deleteOrder(e).then((function(a){0==(a=a||{}).retCode&&(i.showToast({title:"删除成功",icon:"success",duration:2e3}),t.data.currentData.forEach((function(a,o){a.orderId==e&&(t.data.currentData.splice(o,1),t.setData({currentData:t.data.currentData}),0==t.data.currentData.length&&t.setData({isEmpty:!0,isLoading:!1,noMore:!0}))})))})).catch((function(){}))}})},_isValidatorName:function(e){var t=/^.{2,32}$/.test(e),a=/^[\s\u4e00-\u9fa5a-zA-Z0-9]*$/.test(e),o=""!==e;return{allEnable:t&&a&&o,countRule:t,illegalRule:a,emptyRule:o}},_isCardNo:function(e){return{allEnable:/(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e),emptyRule:""!==e}},_addPayer:function(e){var t=e||{};return D({method:"POST",url:I.order.addPayer,data:{payerName:t.payerName||"",certNo:t.certNo||""}})},_omsSavePayer:function(e){var t=e||{};return D({method:"POST",url:I.order.omsSavePayer,data:{orderId:t.orderId||"",omsItemIds:t.omsItemIds||"",payerName:t.payerName||"",certNo:t.certNo||""}})},_queryCouponUsable:function(e){var t=e||{};return D({method:"GET",url:I.order.queryCouponUsable,data:t})},_deletePayer:function(e){var t={payerNum:(e||{}).payerNum||""};return D({method:"GET",url:I.order.deletePayer,data:t})},_queryOrderList:function(e){var t=e||{};return D({method:"GET",url:I.order.orderList,data:{status:t.status||"all",page:t.page||"1",pageSize:t.pageSize||"15",sourceName:t.sourceName||"bdxcx"}})},_queryOrderDetail:function(e){var t=e||{},a={};return a=e.omsOrderId?{orderId:t.orderId||"",omsOrderId:t.omsOrderId||"",vendorCode:t.vendorCode||"",sourceName:"bdxcx"}:{orderId:t.orderId||"",vendorCode:t.vendorCode||"",sourceName:"bdxcx"},D({method:"GET",url:I.order.orderDetail,data:a})},_queryECertificate:function(e){var t=e||{},a={orderId:t.orderId||"",vendorCode:t.vendorCode||""};return D({method:"GET",url:I.order.queryECertificate,data:a})},_queryLogisticsDetail:function(e){var t=e||{};return D({method:"GET",url:I.order.logisticsDetail,data:{orderId:t.orderId||"",vendorCode:t.vendorCode||""}})},_queryOrderConfirm:function(e){var t=e||{};return D({method:"GET",url:I.order.queryOrderConfirm,data:{orderId:t.orderId||"",vendorCode:t.vendorCode||""}})},_confirmCShopOrder:function(e){return D({method:"GET",url:I.order.confirmCShopOrder,data:{orderId:e.orderId,vendorCode:e.vendorCode,itemIds:e.itemIds}})},_confirmFactoryOrder:function(e){return D({method:"GET",url:I.order.confirmFactoryOrder,data:{orderId:e.orderId,omsItemIds:e.omsItemIds}})},_cancelOrder:function(e){return D({method:"GET",url:I.order.cancelOrder,data:{orderId:e}})},_deleteOrder:function(e){return D({method:"GET",url:I.order.deleteOrder,data:{orderId:e}})},_queryEinvoice:function(e){var t=e||{},a={orderId:t.orderId||"",vendorCode:t.vendorCode||"",omsOrderId:t.omsOrderId||""};return D({method:"GET",url:I.order.queryEinvoice,data:a})},_queryOrderPayerList:function(e){return D({method:"GET",url:I.order.queryOrderPayerList,data:{orderId:e.orderId}})},_signature:function(e){return D({method:"GET",url:I.pay.signature+e})},_queryPayMethods:function(e){return D({method:"GET",url:I.order.queryPayMethods,data:e})}}})),window.define("773",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Component({properties:{show:{type:Boolean,value:!1},zIndex:{type:Number,value:1}},data:{},attached:function(){},ready:function(){console.log(this.properties)},detached:function(){},methods:{onTap:function(){this.setData({})}}}),Page({_isCustomComponentPage:!0})})),window.define("776",(function(e,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T,I){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getServerError=n.UnionLoginServerErrorCode=void 0;E(e(17));var P=e(25),D=e(41),x=e(40),_=E(e(54)),k=e(709),L=e(450),N=e(45);e(454);function E(e){return e&&e.__esModule?e:{default:e}}function O(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var A,R=e(455).SnCaptcha,M=n.UnionLoginServerErrorCode=[{code:"MP8009",server:"验证码imgCode为空",text:"请输入验证码"},{code:"MP3002",server:"图片验证码长度错误"},{code:"MP3001",server:"验证码错误或是已失效"},{code:"MP5001",server:"短信验证码错误或已失效"},{code:"SL3001",server:"短信验证码获取次数已达上限，请明日再试"}],U=(n.getServerError=function(e,t){var a=M.find((function(t){return t.code===e}));if(a){var o=a.server,n=void 0===o?t:o,i=a.text;return{code:e,msg:void 0===i?n:i}}return{code:e,msg:t}},{"fourth::quick-buy":function(e,t){if(e.params){t.setData({showQuickBuy:!0}),r.setNavigationBarTitle({title:"快速下单"})}}});Page({detectTouchStart:_.default.detectTouchStart,detectTouchMove:_.default.detectTouchMove,detectTouchEnd:_.default.detectTouchEnd,detectTap:_.default.detectTap,detectLongPress:_.default.detectLongPress,data:{smsVoiceCalling:!1,smsReloadButtonText:"获取验证码",smsReloadButtonDisabled:!1,focusPhoneNumber:!1,focusImageCode:!1,focusSmsCode:!1,needVerify:null,counting:!1,hidePhoneNumberClear:!0,hideSmsCodeClear:!0,phoneImageUrl:"https://oss.suning.com/vss/activity/wximg/swan/images/1203/phone.gif",agreeImageUrl:"https://oss.suning.com/vss/activity/wximg/swan/images/1203/nod.png",agreeRulers:!1,verifyNumberLength:N.verifyNumberLength,show:!1,nextTargetUrl:encodeURIComponent("https://sale.suning.com/page/loginVerifySuccess/index.html"),fromPageUrl:"",pageType:""},preparePage:function(e){var t=e.page+"::"+e.act;t in U?U[t](e,this):r.setNavigationBarTitle({title:" "})},closeCallingModuleDialog:function(){var e=this;this.setData({showCallingModuleDialog:!1,smsVoiceCalling:!0});var t=this.getPhoneNumber(),a=this.getData(),o=a.currentUUid,n=a.customImageCode;(0,x.apiBaiduUnionSendSmsMsg)({phoneNumber:t,uuid:o,imgCode:n,voice:!0}).then((function(t){var a=t.data,o=a.code,n=a.desc;"0000"===o||(e.setData({smsVoiceCalling:!1}),r.showToast({title:n,icon:"none"}))}))},callSmsVoice:function(e){var t=this.getPhoneNumber()+"";/^1\d{10}$/.test(t)?this.setData({showCallingModuleDialog:!0}):r.showToast({title:"请输入正确的手机号码",icon:"none"})},loginMe:function(e){var t=this,a=this,o=this.checkUserInput(),n=o.status,i=o.msg;if(0===n){var s=this.getPhoneNumber(),c=this.getData().customSmsCode,d=(r.getStorageSync("custNo"),this.rdsyStep2Ticket);r.setStorageSync("phoneNumber",s),(0,x.apiBaiduUnionRegBindLogin)({phoneNum:s,smsCode:c,detect:_.default.getTrack({scene:1}),rdsyStep2Ticket:d}).then((function(e){r.hideLoading();var o=e.data,n=o.code,i=o.msg;o.cookie,o.cookieString;if(o.loginErr)(0,x.outRiskControl)(e.data);else if("0"===n?(console.log(e.data,"apiBaiduUnionRegBindLogin"),(0,k.cookieBaiduHandle)(e.data),a.data.showQuickBuy?r.redirectTo({url:"/pages/unionLogin/baiduLoginDone/baiduLoginDone?args="+encodeURIComponent(JSON.stringify(t.options.args))}):"au"==a.data.pageType?r.redirectTo({url:"/pages/unionLogin/baiduLoginDone/baiduLoginDone"+(t.data.fromPageUrl?"?pageUrl="+encodeURIComponent(t.data.fromPageUrl):"")}):r.navigateTo({url:"/pages/unionLogin/baiduLoginDone/baiduLoginDone"+(t.data.fromPageUrl?"?pageUrl="+encodeURIComponent(t.data.fromPageUrl):"")})):"MP1003"==n?"au"==a.data.pageType?r.redirectTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount"}):r.navigateTo({url:"/pages/unionLogin/baiduLoginDone/baiduLoginDone"+(t.data.fromPageUrl?"?pageUrl="+encodeURIComponent(t.data.fromPageUrl):"")}):r.showToast({title:i,icon:"none"}),"0"===n||"MP1003"===n){var s={custNum:e.data.cookie.custno,authorizeSource:"284000012011",agreementInfo:JSON.stringify([{agreementType:"285000000002"}])};(0,x.setPrivacy)(s,e.data.cookieString)}}))}else r.showToast({icon:"none",title:i})},getPhoneNumber:function(){var e=this.getData(),t=e.customPhoneNumber,a=e.phoneNum,o=(void 0===a?t:a)||t;return o.indexOf("*")>-1&&(o=t),o+=""},checkUserInput:function(){var e=this.getData(),t=(e.customPhoneNumber,e.customImageCode,e.customSmsCode),a=void 0===t?"":t,o=(e.needVerify,0),n="success",i=this.getPhoneNumber();if((i+="").length<1?(o=10,n="请输入手机号码"):/^1\d{10}$/.test(i)||(o=11,n="请输入正确的手机号码"),0!==o)return{status:o,msg:n};var r=this.getData().verifyNumberLength;return(a+="").length<1?(o=30,n="请输入短信验证码"):a.length!==r&&(o=31,n="请输入"+r+"位短信验证码"),{status:o,msg:n}},resetCountDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"获取验证码";clearInterval(this.countDownHandle),this.setData({smsReloadButtonText:e,smsReloadButtonDisabled:!1,counting:!1,showCalling:!1,smsVoiceCalling:!1})},countDown:function(){var e=this;return new Promise((function(t){clearInterval(e.countDownHandle);var o=Date.now(),n=a((function(){var t=(Date.now()-o)/1e3>>0,a=60-t;a<0?e.resetCountDown("重发验证码"):(t>=20&&e.setData({showCalling:!0}),e.setData({smsReloadButtonText:a+"s"}))}),200);e.countDownHandle=n}))},requestSmsCode:function(){var e=this,t=this.getPhoneNumber(),a=this.getData(),o=a.currentUUid,n=a.customImageCode,i=a.rdsyData,s=a.snCaptchaSuccessToken,c=i.ticket,d=i.riskType;(0,x.apiBaiduUnionSendSmsMsg)({phoneNumber:t,ticket:c,riskType:d,code:s,currentUUid:o,customImageCode:n}).then((function(t){console.log("手机短信",t),t.errorCode?(r.showToast({title:"发送短信验证码失败["+t.errorCode+"]",icon:"none"}),e.resetCountDown("重发验证码")):"COMPLETE"==t.status?(r.showToast({title:"短信已成功发送，请注意查收",icon:"none"}),e.rdsyStep2Ticket=t.data.ticket,e.countDown()):(r.showToast({title:t.msg+"["+t.code+"]",icon:"none"}),e.resetCountDown("重发验证码"))}))},initNeedVerify:function(){var e=this,t=this;return new Promise((function(a,o){var n=e.getPhoneNumber();(0,x.apiBaiduUnionNeedVerifyCode)({phoneNumber:n}).then((function(o){try{o.code;var n=o.data,i=(o.status,n.ticket),r=void 0===i?"":i,s=n.iarTicket,c=void 0===s?"":s,d=n.riskType,u=void 0===d?"":d;e.setData({rdsyData:{ticket:r,riskType:u}}),"isNullVerifyCode"==u?a():(0,P.getDfpToken)().then((function(e){t.openSnCaptcha({dfpToken:e,ticket:c})}))}catch(e){console.log(e)}}))}))},reloadSmsCode:function(){var e=this.getData(),t=e.counting,a=void 0!==t&&t;if(!a){this.setData({counting:!0});var o=this,n=this.getPhoneNumber()+"";return n.length<1?(msg="请输入手机号码",r.showToast({title:msg,icon:"none"}),void this.setData({counting:!1})):/^1\d{10}$/.test(n)?void this.initNeedVerify().then((function(e){o.requestSmsCode()})):(msg="请输入正确的手机号码",r.showToast({title:msg,icon:"none"}),void this.setData({counting:!1}))}},onPhoneNumberInput:function(e){var t=(e.detail.value||"")+"",a=t.length<1;this.setData({customPhoneNumber:t,hidePhoneNumberClear:a})},onImageCodeInput:function(e){this.setData({customImageCode:e.detail.value})},onSmsCodeInput:function(e){var t=(e.detail.value||"")+"",a=t.length<1;this.setData({customSmsCode:t,hideSmsCodeClear:a})},clearFocusData:function(){this.setData({focusPhoneNumber:!1,focusImageCode:!1,focusSmsCode:!1})},clearPhoneNumberInput:function(){var e=this;this.clearFocusData(),this.setData({customPhoneNumber:"",hidePhoneNumberClear:!0}),t((function(){e.setData({focusPhoneNumber:!0})}),50)},clearSmsInput:function(){var e=this;this.clearFocusData(),this.setData({customSmsCode:"",hideSmsCodeClear:!0}),t((function(){e.setData({focusSmsCode:!0})}),50)},openSnCaptcha:function(e){var t=e.dfpToken,a=e.ticket,o=this;R.init({ticket:a,env:"prod"==N.env?"prd":N.env,token:t,appName:"苏宁易购",initTime:+new Date,callback:function(e){console.log("token ========> ",e),o.setData({snCaptchaSuccessToken:e},(function(){o.requestSmsCode()}))},success:function(){o.setData({openCaptcha:!0})},error:function(e){console.log(" error ==========> ",e)}})},changeStateEvent:function(e){console.log("changeStateEvent",e);var t=e.detail,a=(t.success,t.openCaptcha);this.setData({openCaptcha:a})},onLoad:function(e){var t=D.flat.getStorageSync("userInfoSec")||{},a=t.phoneNum,o=void 0===a?"":a,n=t.phoneNumShow,i=void 0===n?"":n;this.setData({phoneNum:o,phoneNumShow:i,customPhoneNumber:i,fromPageUrl:e.pageUrl?e.pageUrl:""});try{e.args=JSON.parse(e.args)}catch(t){e.args={}}this.options=e,this.preparePage(this.options.args),e.from&&"au"==e.from&&(this.setData({pageType:"au"}),r.setNavigationBarTitle({title:"升级正式账号"}))},onReady:function(){},onShow:function(){_.default.init("mainApp"),this.resetCountDown();var e=r.getStorageSync("phoneNum");if(e){var t=(e+="").replace(/(\d{3})(\d+)(\d{2})/,"$1******$3");this.setData({phoneNum:t,customPhoneNumber:e,phoneNumberDisabled:!0})}else this.setData({phoneNum:"",phoneNumberDisabled:!1})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},onAgreeCheck:function(){var e=this.getData().agreeRulers;e=!e,this.setData({agreeRulers:e})},snMemberRuler:function(){var e=O(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getPrivacyConfig)();case 2:t=e.sent,a=t.privateMemberUrl,t.privateUrl,r.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+encodeURIComponent(a)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),yifubaoRuler:function(){r.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc=http://sale.suning.com/all/regProtocol/yfbxy.html"})},closeRegDialog:function(){this.setData({doc1Position:100,doc2Position:100,show:!1})},yinsiRuler:(A=O(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getPrivacyConfig)();case 2:(t=e.sent).privateMemberUrl,a=t.privateUrl,r.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+encodeURIComponent(a)});case 6:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})})})),window.define("779",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(39),P=e(706),D={"fourth::quick-buy":function(e,t){if(e.params){t.setData({showQuickBuy:!0}),i.setNavigationBarTitle({title:"快速下单"})}}};Page({data:{fromPageUrl:""},preparePage:function(e){var t=e.page+"::"+e.act;t in D?D[t](e,this):i.setNavigationBarTitle({title:" "})},goBack:function(){this.testQuickBuy()||((0,I.checkLoginFrom)()||this.data.fromPageUrl?i.navigateTo({url:this.data.fromPageUrl}):i.switchTab({url:"/pages/my/v2/myv2"}))},onLoad:function(e){this.setData({fromPageUrl:e.pageUrl?e.pageUrl:""});var t=i.getStorageSync("phoneNumber")+"";t=t.replace(/(\d{3})(.+)(\d{2})/,"$1******$3"),this.setData({phoneNumber:t});try{e.args=JSON.parse(e.args)}catch(t){e.args={}}this.options=e,this.preparePage(this.options.args)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},testQuickBuy:function(){return!!this.data.showQuickBuy&&((0,P.apiQuickBuyCallCart2)(this.options.args.params).then((function(e){console.log("testQuickBuy",e),i.redirectTo({url:e.url})})).catch((function(e){console.log("testQuickBuy err",e),i.showToast({title:"快捷下单失败："+e,icon:"none"}),t((function(){i.navigateBack({delta:1})}),1e3)})),!0)}})})),window.define("782",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I,P=e(40),D=e(450),x=e(41),_=e(709),k=(e(39),e(58),e(17)),L=((I=k)&&I.__esModule,e(77)),N=e(706);function E(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var O,A={"fourth::quick-buy":function(e,t){if(e.params){t.setData({showQuickBuy:!0}),i.setNavigationBarTitle({title:"快速下单"})}}};Page({data:{doc1Position:100,doc2Position:100,unionLoginButtonDisabled:!0,iv:null,userInfoEncryptedData:null,buttonsDisabled:!0,show:!1,nextTargetUrl:encodeURIComponent("https://sale.suning.com/page/loginVerifySuccess/index.html"),saPgnm:"pgtitle=百度小程序快速登录用户确认授权;pageid=kt6g;pgcate=10009;",fromPageUrl:"",pageType:"",isShow:!1,regToken:"",pageid:"afxw6K6aab",agreeRulers:!1},preparePage:function(e){var t=e.page+"::"+e.act;t in A?A[t](e,this):i.setNavigationBarTitle({title:" "})},baiduMobileLogin:function(e){var a=this;console.log(e,"baiduMobileLogin");var o=e.detail,n=this;if("string"!=typeof o.encryptedData)return i.showLoading({title:"正在跳转请稍候",mask:!0}),void t((function(){i.hideLoading(),n.data.showQuickBuy?i.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?optins="+a.options}):"au"==a.data.pageType?i.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"})}),1534);i.showLoading({mask:!0,title:"请稍候..."});var r=o.encryptedData,s=o.iv;(0,P.getMiniToken)().then((function(e){i.setStorageSync("miniToken",e);var t=i.getStorageSync("custNo");(0,P.apiBaiduUnionPhoneAutoLogin)({encryptData:r,miniToken:e,custNo:t,iv:s}).then((function(t){console.log(t,"apiBaiduUnionPhoneAutoLogin");var o=t.data,n=o.phoneNum,r=(o.msg,o.sceneType),s=(o.cookie,o.cookieString,o.loginErr),c=o.code;if(i.removeStorageSync("phoneNum"),s)return(0,P.outRiskControl)(t.data),void i.hideLoading();var d=void 0;if(t.data.data&&(d=t.data.data.regToken),"MP1003"==c)"au"==a.data.pageType?i.redirectTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount"}):a.testQuickBuy()||i.navigateBack();else if("40033"==c)i.hideLoading(),a.setData({isShow:!0,regToken:d});else if("40034"==c)i.showToast({icon:"none",title:"系统异常，请稍后重试[40034]"});else if("40035"==c)i.showToast({icon:"none",title:"因您长时间没有操作，请重试[40035]"});else if("MP1002"==c)i.showToast({icon:"none",title:"当前账号异常[MP1002]"});else switch(r){case"1":console.log(t,"存在手机但未绑定易购账号 apiBaiduUnionPhoneAutoLogin"),i.setStorageSync("phoneNum",n),a.data.showQuickBuy?i.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?optins="+a.options}):"au"==a.data.pageType?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"});break;case"2":i.setStorageSync("miniToken",e),console.log(t,"存在手机号且已绑定易购账号 apiBaiduUnionPhoneAutoLogin"),(0,_.cookieBaiduHandle)(t.data);var u={custNum:t.data.cookie.custno,authorizeSource:"284000012011",agreementInfo:JSON.stringify([{agreementType:"285000000002"}])};(0,P.setPrivacy)(u,t.data.cookieString),a.testQuickBuy()||i.navigateBack();break;case"0":default:console.log(t,"不存在手机号 apiBaiduUnionPhoneAutoLogin"),i.removeStorageSync("phoneNum"),a.data.showQuickBuy?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?optins="+a.options}):"au"==a.data.pageType?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"})}i.hideLoading()}))}))},otherMobileLogin:function(){x.flat.setStorageSync("userInfoSec",{}),this.data.showQuickBuy?x.flat.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?args="+encodeURIComponent(JSON.stringify(this.options.args))}):"au"==this.data.pageType?x.flat.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):x.flat.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"+(this.data.fromPageUrl?"?pageUrl="+encodeURIComponent(this.data.fromPageUrl):"")})},snMemberRuler:function(){var e=E(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.getPrivacyConfig)();case 2:t=e.sent,a=t.privateMemberUrl,t.privateUrl,i.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+encodeURIComponent(a)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),yifubaoRuler:function(){i.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc=http://sale.suning.com/all/regProtocol/yfbxy.html"})},yinsiRuler:(O=E(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.getPrivacyConfig)();case 2:(t=e.sent).privateMemberUrl,a=t.privateUrl,i.navigateTo({url:"/pages/webView/index?notNeedLogin=1&webViewSrc="+encodeURIComponent(a)});case 6:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)}),closeRegDialog:function(){this.setData({doc1Position:100,doc2Position:100,show:!1})},onLoad:function(e){this.setData({fromPageUrl:e.pageUrl?e.pageUrl:""});try{this.quickParams=e.args,e.args=JSON.parse(e.args)}catch(t){e.args={}}this.options=e,this.preparePage(this.options.args),e.from&&"au"==e.from&&(this.setData({pageType:"au"}),i.setNavigationBarTitle({title:"升级正式账号"}))},onReady:function(){},onShow:function(){i.removeStorageSync("phoneNum");i.setStorageSync("iv","iv-baidu"),this.setData({buttonsDisabled:!1}),(0,L.saSendLog)("pageview",{ext:{}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},testQuickBuy:function(){return!!this.data.showQuickBuy&&((0,N.apiQuickBuyCallCart2)(this.options.args.params).then((function(e){console.log("testQuickBuy",e),i.redirectTo({url:e.url})})).catch((function(e){console.log("testQuickBuy err",e),i.showToast({title:"快捷下单失败："+e,icon:"none"}),t((function(){i.navigateBack({delta:1})}),1e3)})),!0)},refuseRegAgg:function(){(0,L.saSendLog)("click",{event:{target:{dataset:{pageid:"afxw6K6aab",modid:"09t49lw",eleid:"2"}}}}),this.setData({isShow:!1})},agreeRegAgg:function(){var e=this;(0,L.saSendLog)("click",{event:{target:{dataset:{pageid:"afxw6K6aab",modid:"09t49lw",eleid:"1"}}}});var t=this.data.regToken;console.log("regToken2:",t),this.setData({isShow:!1}),(0,P.getMiniToken)().then((function(a){i.setStorageSync("miniToken",a),(0,P.apiBaiduUnionPhoneAutoLogin)({regToken:t}).then((function(t){console.log(t,"apiBaiduUnionPhoneAutoLogin");var o=t.data,n=o.phoneNum,r=(o.msg,o.sceneType),s=(o.cookie,o.cookieString,o.loginErr),c=o.code;if(i.removeStorageSync("phoneNum"),s)return(0,P.outRiskControl)(t.data),void i.hideLoading();var d=void 0;if(t.data.data&&(d=t.data.data.regToken),"MP1003"==c)"au"==e.data.pageType?i.redirectTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount"}):e.testQuickBuy()||i.navigateBack();else if("40033"==c)i.hideLoading(),e.setData({isShow:!1,regToken:d});else if("40034"==c)i.showToast({icon:"none",title:"系统异常，请稍后重试[40034]"});else if("40035"==c)i.showToast({icon:"none",title:"因您长时间没有操作，请重试[40035]"});else if("MP1002"==c)i.showToast({icon:"none",title:"当前账号异常[MP1002]"});else switch(r){case"1":console.log(t,"存在手机但未绑定易购账号 apiBaiduUnionPhoneAutoLogin"),i.setStorageSync("phoneNum",n),e.data.showQuickBuy?i.redirectTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?optins="+e.options}):"au"==e.data.pageType?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"});break;case"2":i.setStorageSync("miniToken",a),console.log(t,"存在手机号且已绑定易购账号 apiBaiduUnionPhoneAutoLogin"),(0,_.cookieBaiduHandle)(t.data),e.testQuickBuy()||i.navigateBack();break;case"0":default:console.log(t,"不存在手机号 apiBaiduUnionPhoneAutoLogin"),i.removeStorageSync("phoneNum"),e.data.showQuickBuy?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?optins="+e.options}):"au"==e.data.pageType?i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin?from=au"}):i.navigateTo({url:"/pages/unionLogin/baiduLogin/baiduLogin"})}i.hideLoading()}))}))},onAgreeCheck:function(){var e=this.getData().agreeRulers;e=!e,this.setData({agreeRulers:e})}})})),window.define("785",(function(e,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S,T){"use strict";var I=e(709),P=e(39),D=e(58),x=e(40);Page({data:{},onLoad:function(){},onReady:function(){},onShow:function(){var e=this;(0,P.checkLogin)().then((function(a){a.app;a.sys&&(0,x.apiBaiduUnionAutoLogin)().then((function(a){(0,x.apiBaiduUnionAutoLogin)().then((function(e){var a=e.result;"success"===a.msg&&(a.isBind?((0,I.cookieBaiduHandle)(a),i.hideLoading(),(0,D.setGlobalData)({isLogin:!0}),(0,P.checkLoginFrom)()):t((function(){i.hideLoading(),i.navigateTo({url:"/pages/unionLogin/first/first"})}),1534))}),(function(t){(0,D.setGlobalData)({isLogin:!1}),e.setData({toLoginDisabled:!1});var a=t.error,o=((void 0===a?{}:a).data||{}).loginErr,n=getHighRiskMessage((void 0===o?{}:o).errorCode),r=n?n.msg:"平台账号异常";i.hideLoading(),i.showToast({title:r,icon:"none"})}))}))}))},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("788",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=D(e(789)),I=D(e(790)),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(e(39));function D(e){return e&&e.__esModule?e:{default:e}}var x=e(25),_=x.saSendPageViewLog;x.checkLogin;Page({data:{webViewSrc:"",saPgnm:"pgtitle=webView内嵌页;pgcate=10009;"},onLoad:function(e){e.webViewSrc&&(e.webViewSrc=decodeURIComponent(e.webViewSrc)),console.log("webView options",e),e.ticket&&(e.nextTargetUrl||e.targetUrl)&&(e.webViewSrc=e.webViewSrc+"?ticket="+e.ticket+"&"+(e.nextTargetUrl?"nextTargetUrl":"targetUrl")+"="+decodeURIComponent(e.nextTargetUrl||e.targetUrl),this.setData({webViewSrc:e.webViewSrc})),e.webViewSrc=(0,I.default)(e.webViewSrc);var t=e.s;this.options=e,1===t&&"function"==typeof n.hideShareMenu&&n.hideShareMenu()},do:function(e){var t=this;console.log("webView do",e),(0,T.default)(e).then((function(e){console.log("webView authRedirect",e),t.setData({webViewSrc:e.src})})).catch((function(e){console.log("webView authRedirect error",e)}))},onReady:function(){},onShow:function(){var e=this,t=this;t.options&&_({webViewSrc:t.options.webViewSrc}),P.checkLogin().then((function(a){if(a.app)t.do(t.options);else if(console.log(null,"webView onShow not login"),t.options.notNeedLogin)e.setData({webViewSrc:t.options.webViewSrc});else{var o=a.sys?"/pages/unionLogin/first/first":"/pages/login/login";n.navigateTo({url:o})}})).catch((function(a){if(console.log(a,"webView onShow not login"),t.options.notNeedLogin)e.setData({webViewSrc:t.options.webViewSrc});else{n.navigateTo({url:"/pages/login/login"})}}))},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(e){console.log("res",e);var t=encodeURIComponent(e.webViewUrl);return console.log("/pages/webView/index?webviewSrc="+t),{path:"/pages/webView/index?webViewSrc="+e.webViewUrl,success:function(){console.log("转发成功")},fail:function(e){console.log(e)}}}})})),window.define("789",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dealWebviewSrc=void 0;var T=e(48);var I=e(17),P=(0,T.platform)(),D=a.dealWebviewSrc=function(e){try{var t=decodeURIComponent(e.webViewSrc).replace(/[\u4e00-\u9fa5]/g,(function(e,t){return encodeURI(e)})),a=encodeURIComponent(t),o=P.getStorageSync("quick_miniToken")||P.getStorageSync("miniToken")||"";return o=o.substr(0,32),o=encodeURIComponent(o),{src:I.baiduUnion.newAuthRedirect+"?miniToken="+o+"&targetUrl="+a}}catch(e){return{error:e}}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";",a=[];for(var o in e){var n=e[o]+"";a.push(o+"="+n)}return a.join(t)},_=function(e){return"[object Object]"===Object.prototype.toString.call(e)};a.default=function(e){return new Promise((function(t,a){var o=P.getStorageSync("miniToken")||P.getStorageSync("quick_miniToken")||"";o=(o+"").substr(0,32);var n,i,r,s=(n=P.getStorageSync("quick_cookieObj"),i=P.getStorageSync("cookieObj"),r={},_(i)?Object.assign(r,i):_(n)&&Object.assign(r,n),x(r));P.request({url:I.baiduUnion.setCookie,method:"POST",data:{cookieStr:s,miniToken:o},header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(o){try{var n=o.data,i=n.code,r=n.msg,s=n.token;if("0"==i||"success"==r){P.setStorageSync("miniToken",(s+"").substr(0,32));var c=D(e);c.src&&!c.error?t({code:i,msg:r,token:s,src:c.src}):a(c)}else a(o.data)}catch(e){a({error:e,res:o})}}))}))}})),window.define("790",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return e=decodeURIComponent(e+""),/^(:)?\/\//.test(e)&&(e=(RegExp.$1?""+t:t+":")+e),e}})),window.define("793",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(17),I=e(25).requestPromise;Page({data:{url:""},onLoad:function(e){var t=e.orderId,a=e.payFlag||"1",o=this,i=T.wxh5page+"?orderId="+t+"&payFlag="+a,r=n.getStorageSync("cookieStr")+"";if(!r)return console.log("cookieStr 为空"),!1;var s={method:"post",url:T.cookieSend,dataType:"json",data:{cookieStr:r}};I(s).then((function(e){if(0==e.code&&e.token){var t=T.bd302+"?token="+e.token+"&targetUrl="+encodeURIComponent(i);o.setData({url:t})}})).catch((function(e){console.log(e)}))},onReady:function(){},onShow:function(e){},onHide:function(e){},getUrlParams:function(e,t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=e.split("?")[1].match(a);return null!=o?unescape(o[2]):null}})})),window.define("796",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("799",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";Page({data:{},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("802",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T=e(40),I=e(450);var P=e(135),D=e(77).saSendLog;i();Page({data:{pageid:"axSgJRaaaa",saPgnm:"pgtitle=隐私弹窗;pageid=axSgJRaaaa;pgcate=10009;",isShow:!1,memberChannelId:"163488611809858538",privacyChannelId:"163419572121896459"},onLoad:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var a,o,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.hideTabBar({animation:!0});try{this.hasLogin=JSON.parse(t.hasLogin),this.pageUrl=t.url}catch(e){}return e.next=4,(0,I.getPrivacyConfig)();case 4:a=e.sent,o=a.privateMemberUrl,i=a.privateUrl,r=(0,I.getChannelId)(o),s=(0,I.getChannelId)(i),this.setData({privateMemberUrl:o,privateUrl:i,memberChannelId:r,privacyChannelId:s});case 10:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))});return function(e){return t.apply(this,arguments)}}(),onReady:function(){},onShow:function(){D("pageview",{ext:{}})},noAgree:function(e){D("manuclick",Object.assign({},e.currentTarget.dataset)),P.showToast({title:"若您不同意隐私权政策，很遗憾我们将无法为您提供服务。"})},nav:function(){try{n.reLaunch({url:decodeURIComponent(this.pageUrl)})}catch(e){n.reLaunch({url:"/pages/index/index"})}},agree:function(e){D("manuclick",Object.assign({},e.currentTarget.dataset));var t=this;if(t.hasLogin){var a={custNum:n.getStorageSync("custno")||n.getStorageSync("custNo"),authorizeSource:"284000012011",agreementInfo:JSON.stringify([{agreementType:"285000000002"}])};(0,T.setPrivacy)(a,n.getStorageSync("quick_cookieStr")).then((function(e){"success"==e.data.status?t.nav():P.showToast({title:"网络问题，请稍后重试。"})})).catch((function(e){P.showToast({title:"网络问题，请稍后重试。"})}))}else n.setStorageSync("isAgreePrivacy",!0),t.nav()},goDetail:function(e){this.setData({isShow:!0,channelId:e.currentTarget.dataset.channelid})},closePop:function(){this.setData({isShow:!1})}})})),window.define("805",(function(e,t,a,o,n,i,r,s,c,d,u,l,p,f,h,g,m,v,y,w,b,C,S){"use strict";var T,I=e(8),P=(T=I)&&T.__esModule?T:{default:T},D=e(38);var x=function(e){return new Promise((function(t,a){var o=P.default.order+"/mobile/v3/pay/queryPayStatus.do";n.request({url:o,method:"GET",data:{orderIds:e.orderIds,payType:3},dataType:"json",header:{"content-type":"application/x-www-form-urlencoded",cookie:n.getStorageSync("cookieStr")||n.getStorageSync("quick_cookieStr")},success:function(e){console.log("queryPayStatus res:",e);var o=e.data,n=o.retCode,i=o.errMsg;"0"==n?t():a("["+n+"]"+i)},fail:function(e){a(e)}})}))};Page({data:{},onInit:function(){},onLoad:function(e){this.options=e},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},onError:function(){},handleDone:function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,D.checkLogin)({toLogin:!0});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),"完成付款 checkLogin fail";case 8:x(this.options).then((function(){t.goCart4()}),(function(e){console.log("queryPayStatus error:",e),t.goOrder()}));case 9:case"end":return e.stop()}}),e,this,[[0,5]])})),function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))});return function(){return t.apply(this,arguments)}}(),goCart4:function(){var e=this.options,t=e.orderIds,a=e.newCart4Switch;if("1"==e.wxGetGiftFlag)n.redirectTo({url:"/packageA/pages/order/cart4Gift/cart4Gift?id="+t});else{var o=a&&"0"===a?"/packageA/pages/cart4/cart4?id=":"/packageA/pages/order/cart4/cart4?id=";n.redirectTo({url:o+t})}},goOrder:function(){n.redirectTo({url:"/packageA/pages/order/orderList/orderList?index=0"})},handleReture:function(){this.goOrder()}})})),window.__swanRoute="pages/cart/_Components/UI/Tip/index",window.usingComponents=[],window.usingPluginComponents=[],require("229"),window.__swanRoute="pages/cart/_Components/Submit/GoodsRemove/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("231"),window.__swanRoute="pages/cart/_Components/Submit/PriceChange/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("234"),window.__swanRoute="pages/cart/_Components/UI/Transition/index",window.usingComponents=[],window.usingPluginComponents=[],require("236"),window.__swanRoute="pages/cart/_Components/UI/Overlay/index",window.usingComponents=["pages/cart/_Components/UI/Transition/index"],window.usingPluginComponents=[],require("239"),window.__swanRoute="pages/cart/_Components/UI/Popup/index",window.usingComponents=["pages/cart/_Components/UI/Overlay/index"],window.usingPluginComponents=[],require("241"),window.__swanRoute="pages/cart/_Components/Submit/vericode/vericode",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("243"),window.__swanRoute="pages/cart/_Components/Submit/Button/index",window.usingComponents=["pages/cart/_Components/Submit/vericode/vericode","pages/cart/_Components/Submit/PriceChange/index","pages/cart/_Components/Submit/GoodsRemove/index","pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("250"),window.__swanRoute="polyfill/componets/IF/index",window.usingComponents=[],window.usingPluginComponents=[],require("256"),window.__swanRoute="pages/cart/_Components/Card/item/item",window.usingComponents=[],window.usingPluginComponents=[],require("260"),window.__swanRoute="pages/cart/_Components/Cart/Commodity/LabelBaseInfos/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("263"),window.__swanRoute="sn-wxminip-components/toast/index",window.usingComponents=[],window.usingPluginComponents=[],require("271"),window.__swanRoute="polyfill/componets/FILTER/index",window.usingComponents=[],window.usingPluginComponents=[],require("280"),window.__swanRoute="pages/privacy/component/index",window.usingComponents=[],window.usingPluginComponents=[],require("449"),window.__swanRoute="components/sncaptcha/components/jigsaw/index",window.usingComponents=[],window.usingPluginComponents=[],require("452"),window.__swanRoute="components/sncaptcha/components/noise/index",window.usingComponents=[],window.usingPluginComponents=[],require("458"),window.__swanRoute="components/sncaptcha/components/geometric/index",window.usingComponents=[],window.usingPluginComponents=[],require("460"),window.__swanRoute="components/sncaptcha/components/click/index",window.usingComponents=[],window.usingPluginComponents=[],require("463"),window.__swanRoute="components/sncaptcha/index",window.usingComponents=["components/sncaptcha/components/click/index","components/sncaptcha/components/geometric/index","components/sncaptcha/components/noise/index","components/sncaptcha/components/jigsaw/index"],window.usingPluginComponents=[],require("465"),window.__swanRoute="components/registration-agreement/index",window.usingComponents=[],window.usingPluginComponents=[],require("467"),window.__swanRoute="components/confirm/confirm",window.usingComponents=[],window.usingPluginComponents=[],require("469"),window.__swanRoute="pages/fourth/components/fourth-masker/mask",window.usingComponents=[],window.usingPluginComponents=[],require("471"),window.__swanRoute="pages/fourth/components/seeAndSee/seeAndSee",window.usingComponents=[],window.usingPluginComponents=[],require("473"),window.__swanRoute="pages/fourth/components/recommend/recommend",window.usingComponents=[],window.usingPluginComponents=[],require("476"),window.__swanRoute="pages/fourth/components/scrapCoupon/scrapCoupon",window.usingComponents=[],window.usingPluginComponents=[],require("478"),window.__swanRoute="pages/fourth/components/answer/answer",window.usingComponents=[],window.usingPluginComponents=[],require("480"),window.__swanRoute="pages/fourth/components/cart-gift/giftQuickBuy/index",window.usingComponents=["pages/cart/_Components/Submit/vericode/vericode"],window.usingPluginComponents=[],require("482"),window.__swanRoute="pages/fourth/components/shop/shop",window.usingComponents=[],window.usingPluginComponents=[],require("485"),window.__swanRoute="pages/cuxiao/cx190728/components/tabgoods/index",window.usingComponents=[],window.usingPluginComponents=[],require("487"),window.__swanRoute="pages/cuxiao/cx190728/components/tabtitle/index",window.usingComponents=["pages/cuxiao/cx190728/components/tabgoods/index"],window.usingPluginComponents=[],require("489"),window.__swanRoute="pages/cuxiao/cx190728/components/floorShop/index",window.usingComponents=[],window.usingPluginComponents=[],require("491"),window.__swanRoute="pages/cuxiao/cx190728/components/goodsList/index",window.usingComponents=[],window.usingPluginComponents=[],require("493"),window.__swanRoute="pages/cuxiao/cx190728/components/firstFigure/index",window.usingComponents=[],window.usingPluginComponents=[],require("495"),window.__swanRoute="pages/cuxiao/cx190728/components/commonFigure/index",window.usingComponents=[],window.usingPluginComponents=[],require("497"),window.__swanRoute="pages/cart/noSwitchCart1/Component/NavigationBar/index",window.usingComponents=[],window.usingPluginComponents=[],require("499"),window.__swanRoute="pages/cart/cart1/Component/CartHeader/Tips/index",window.usingComponents=[],window.usingPluginComponents=[],require("501"),window.__swanRoute="pages/cart/cart1/Component/Recommend/RecommendGoods/index",window.usingComponents=[],window.usingPluginComponents=[],require("503"),window.__swanRoute="pages/cart/cart1/Component/EmptyCart/index",window.usingComponents=[],window.usingPluginComponents=[],require("506"),window.__swanRoute="pages/cart/cart1/Component/ShopHeader/Promotions/FullGift/index",window.usingComponents=["pages/cart/_Components/UI/Checkbox/index","pages/cart/_Components/UI/Popup/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("508"),window.__swanRoute="pages/cart/cart1/Component/ShopHeader/Promotions/index",window.usingComponents=["pages/cart/_Components/UI/Checkbox/index","pages/cart/_Components/UI/Popup/index","pages/cart/cart1/Component/ShopHeader/Promotions/FullGift/index"],window.usingPluginComponents=[],require("511"),window.__swanRoute="pages/cart/cart1/Component/AutoCoupon/Slip/index",window.usingComponents=[],window.usingPluginComponents=[],require("513"),window.__swanRoute="pages/cart/cart1/Component/AutoCoupon/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index","pages/cart/cart1/Component/AutoCoupon/Slip/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("515"),window.__swanRoute="pages/cart/cart1/Component/CmmdtyInfo/Disabled/index",window.usingComponents=["pages/cart/_Components/UI/SwipeCell/index","pages/cart/_Components/UI/Checkbox/index"],window.usingPluginComponents=[],require("517"),window.__swanRoute="pages/cart/_Components/UI/SwipeCell/index",window.usingComponents=[],window.usingPluginComponents=[],require("519"),window.__swanRoute="pages/cart/_Components/UI/Counter/index",window.usingComponents=[],window.usingPluginComponents=[],require("522"),window.__swanRoute="pages/cart/cart1/Component/CmmdtyInfo/index",window.usingComponents=["pages/cart/_Components/UI/Checkbox/index","pages/cart/_Components/UI/Counter/index","pages/cart/_Components/UI/Popup/index","pages/cart/_Components/UI/SwipeCell/index","pages/cart/_Components/UI/Transition/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("525"),window.__swanRoute="pages/cart/cart1/Component/ShopHeader/Coupon/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index","pages/cart/cart1/Component/Vericode/index"],window.usingPluginComponents=[],require("528"),window.__swanRoute="pages/cart/cart1/Component/ShopHeader/index",window.usingComponents=["pages/cart/_Components/UI/Checkbox/index","pages/cart/_Components/UI/Popup/index","pages/cart/cart1/Component/ShopHeader/Coupon/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("530"),window.__swanRoute="pages/cart/cart1/Component/Vericode/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("532"),window.__swanRoute="pages/cart/_Components/UI/Checkbox/index",window.usingComponents=[],window.usingPluginComponents=[],require("534"),window.__swanRoute="pages/cart/cart1/Component/Settlement/index",window.usingComponents=["pages/cart/_Components/UI/Checkbox/index","pages/cart/_Components/UI/Popup/index","pages/cart/cart1/Component/Vericode/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("536"),window.__swanRoute="pages/cart/cart2/Components/messageLeaving/index",window.usingComponents=[],window.usingPluginComponents=[],require("539"),window.__swanRoute="pages/cart/_Components/Subsidy/item/item",window.usingComponents=["pages/cart/_Components/UI/Popup/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("541"),window.__swanRoute="pages/cart/_Components/Cart/Commodity/PublicWelfare/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("544"),window.__swanRoute="pages/cart/_Components/Cart/Commodity/Install/index",window.usingComponents=["pages/cart/_Components/UI/Picker/index","pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("546"),window.__swanRoute="pages/cart/_Components/UI/Picker/index",window.usingComponents=[],window.usingPluginComponents=[],require("549"),window.__swanRoute="pages/cart/_Components/Cart/Commodity/Panel/index",window.usingComponents=["pages/cart/_Components/UI/Picker/index","pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("551"),window.__swanRoute="pages/cart/_Components/Cart/Commodity/index",window.usingComponents=["pages/cart/_Components/Cart/Commodity/LabelBaseInfos/index","pages/cart/_Components/Cart/Commodity/Panel/index","pages/cart/_Components/Cart/Commodity/Install/index","pages/cart/_Components/UI/Counter/index","pages/cart/_Components/Cart/Commodity/PublicWelfare/index"],window.usingPluginComponents=[],require("553"),window.__swanRoute="pages/cart/_Components/Delivery/Select/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("555"),window.__swanRoute="pages/cart/cart2/Components/Invoice/item/index",window.usingComponents=["pages/cart/_Components/UI/Icon/index"],window.usingPluginComponents=[],require("558"),window.__swanRoute="pages/cart/_Components/UI/Icon/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("561"),window.__swanRoute="pages/cart/cart2/Components/GoodsPrompt/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("563"),window.__swanRoute="pages/cart/cart2/Components/Oversea/license/license",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("565"),window.__swanRoute="pages/cart/_Components/Delivery/item/item",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("567"),window.__swanRoute="pages/cart/cart2/Components/Oversea/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("569"),window.__swanRoute="pages/cart/_Components/Delivery/Select/ZT/index",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("573"),window.__swanRoute="pages/cart/_Components/Card/vericode/vericode",window.usingComponents=["pages/cart/_Components/UI/Popup/index"],window.usingPluginComponents=[],require("575"),window.__swanRoute="sn-wxminip-components/homeguide/index",window.usingComponents=[],window.usingPluginComponents=[],require("577"),window.__swanRoute="pages/index/index",window.usingComponents=["sn-wxminip-components/homeguide/index"],window.usingPluginComponents=[],require("578"),window.__swanRoute="pages/act/a/a",window.usingComponents=[],window.usingPluginComponents=[],require("584"),window.__swanRoute="pages/auth/auth",window.usingComponents=[],window.usingPluginComponents=[],require("587"),window.__swanRoute="pages/cart/_Components/Card/add/add",window.usingComponents=[],window.usingPluginComponents=[],require("590"),window.__swanRoute="pages/cart/_Components/Card/page/page",window.usingComponents=["pages/cart/_Components/Card/vericode/vericode"],window.usingPluginComponents=[],require("593"),window.__swanRoute="pages/cart/_Components/Coupon/page/list",window.usingComponents=["pages/cart/_Components/UI/Tip/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("596"),window.__swanRoute="pages/cart/_Components/Delivery/list/list",window.usingComponents=["pages/cart/_Components/UI/SwipeCell/index","pages/cart/_Components/Submit/PriceChange/index","pages/cart/_Components/Submit/GoodsRemove/index"],window.usingPluginComponents=[],require("602"),window.__swanRoute="pages/cart/_Components/Delivery/psEdit/psEdit",window.usingComponents=["pages/cart/_Components/Delivery/Select/index","pages/cart/_Components/UI/Popup/index","pages/cart/_Components/Submit/PriceChange/index","pages/cart/_Components/Submit/GoodsRemove/index"],window.usingPluginComponents=[],require("605"),window.__swanRoute="pages/cart/_Components/Delivery/ztEdit/ztEdit",window.usingComponents=["pages/cart/_Components/Delivery/Select/ZT/index","pages/cart/_Components/Submit/PriceChange/index","pages/cart/_Components/Submit/GoodsRemove/index"],window.usingPluginComponents=[],require("608"),window.__swanRoute="pages/cart/cart1/cart1",window.usingComponents=["pages/cart/cart1/Component/Settlement/index","pages/cart/cart1/Component/ShopHeader/index","pages/cart/cart1/Component/CmmdtyInfo/index","pages/cart/cart1/Component/CmmdtyInfo/Disabled/index","pages/cart/cart1/Component/AutoCoupon/index","pages/cart/cart1/Component/ShopHeader/Promotions/index","pages/cart/cart1/Component/EmptyCart/index","pages/cart/cart1/Component/Recommend/RecommendGoods/index","pages/cart/cart1/Component/CartHeader/Tips/index"],window.usingPluginComponents=[],require("611"),window.__swanRoute="pages/cart/cart2/cart2",window.usingComponents=["pages/cart/_Components/UI/Popup/index","pages/cart/cart2/Components/Oversea/index","pages/cart/_Components/Cart/Commodity/index","pages/cart/_Components/Delivery/item/item","pages/cart/_Components/Card/item/item","pages/cart/_Components/UI/Tip/index","pages/cart/cart2/Components/Oversea/license/license","pages/cart/_Components/Submit/Button/index","pages/cart/_Components/Subsidy/item/item","pages/cart/cart2/Components/GoodsPrompt/index","pages/cart/_Components/UI/Icon/index","pages/cart/cart2/Components/Invoice/item/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("616"),window.__swanRoute="pages/cart/cart2/Components/Invoice/page/index",window.usingComponents=["pages/cart/_Components/UI/Tip/index","pages/cart/_Components/UI/Popup/index","pages/cart/_Components/Delivery/Select/index"],window.usingPluginComponents=[],require("628"),window.__swanRoute="pages/cart/cart2/goods/goods",window.usingComponents=["pages/cart/_Components/UI/Popup/index","pages/cart/_Components/Cart/Commodity/index","pages/cart/_Components/Subsidy/item/item","pages/cart/cart2/Components/messageLeaving/index","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("631"),window.__swanRoute="pages/cart/cart4/cart4",window.usingComponents=[],window.usingPluginComponents=[],require("634"),window.__swanRoute="pages/cart/cart4/save/save",window.usingComponents=[],window.usingPluginComponents=[],require("638"),window.__swanRoute="pages/cart/noSwitchCart1/index",window.usingComponents=["pages/cart/cart1/Component/Settlement/index","pages/cart/cart1/Component/ShopHeader/index","pages/cart/cart1/Component/CmmdtyInfo/index","pages/cart/cart1/Component/CmmdtyInfo/Disabled/index","pages/cart/cart1/Component/AutoCoupon/index","pages/cart/cart1/Component/ShopHeader/Promotions/index","pages/cart/cart1/Component/EmptyCart/index","pages/cart/cart1/Component/Recommend/RecommendGoods/index","pages/cart/cart1/Component/CartHeader/Tips/index","pages/cart/noSwitchCart1/Component/NavigationBar/index"],window.usingPluginComponents=[],require("641"),window.__swanRoute="pages/content/rank/rank",window.usingComponents=[],window.usingPluginComponents=[],require("644"),window.__swanRoute="pages/couponList/single/index",window.usingComponents=[],window.usingPluginComponents=[],require("647"),window.__swanRoute="pages/cuxiao/cx0103/index",window.usingComponents=["sn-wxminip-components/toast/index"],window.usingPluginComponents=[],require("650"),window.__swanRoute="pages/cuxiao/cx1120/index",window.usingComponents=[],window.usingPluginComponents=[],require("655"),window.__swanRoute="pages/cuxiao/cx190728/index",window.usingComponents=["pages/cuxiao/cx190728/components/commonFigure/index","pages/cuxiao/cx190728/components/firstFigure/index","pages/cuxiao/cx190728/components/goodsList/index","pages/cuxiao/cx190728/components/floorShop/index","pages/cuxiao/cx190728/components/tabtitle/index"],window.usingPluginComponents=[],require("658"),window.__swanRoute="pages/downloadApp/index",window.usingComponents=[],window.usingPluginComponents=[],require("662"),window.__swanRoute="pages/fourth/fourth",window.usingComponents=["pages/fourth/components/shop/shop","pages/fourth/components/cart-gift/giftQuickBuy/index","pages/fourth/components/answer/answer","pages/fourth/components/scrapCoupon/scrapCoupon","pages/fourth/components/recommend/recommend","pages/fourth/components/seeAndSee/seeAndSee","pages/fourth/components/fourth-masker/mask"],window.usingPluginComponents=[],require("665"),window.__swanRoute="pages/hotrec/hotrecResult",window.usingComponents=[],window.usingPluginComponents=[],require("697"),window.__swanRoute="pages/list/list",window.usingComponents=[],window.usingPluginComponents=[],require("701"),window.__swanRoute="pages/login/login",window.usingComponents=["components/sncaptcha/index","components/confirm/confirm"],window.usingPluginComponents=[],require("704"),window.__swanRoute="pages/my/bind-kun/index",window.usingComponents=[],window.usingPluginComponents=[],require("713"),window.__swanRoute="pages/my/bind/baidubind",window.usingComponents=[],window.usingPluginComponents=[],require("721"),window.__swanRoute="pages/my/bind/bind",window.usingComponents=[],window.usingPluginComponents=[],require("725"),window.__swanRoute="pages/my/bindConfirm/baiduConfirm",window.usingComponents=[],window.usingPluginComponents=[],require("728"),window.__swanRoute="pages/my/bindSuccess/success",window.usingComponents=[],window.usingPluginComponents=[],require("731"),window.__swanRoute="pages/my/order/orderList",window.usingComponents=[],window.usingPluginComponents=[],require("735"),window.__swanRoute="pages/my/protocol/protocol",window.usingComponents=[],window.usingPluginComponents=[],require("738"),window.__swanRoute="pages/my/v2/myv2",window.usingComponents=[],window.usingPluginComponents=[],require("741"),window.__swanRoute="pages/my/v3/myv3",window.usingComponents=[],window.usingPluginComponents=[],require("746"),window.__swanRoute="pages/quickLogin/index",window.usingComponents=["components/registration-agreement/index"],window.usingPluginComponents=[],require("751"),window.__swanRoute="pages/search/searchList/list",window.usingComponents=[],window.usingPluginComponents=[],require("754"),window.__swanRoute="pages/search/searchResult/result",window.usingComponents=[],window.usingPluginComponents=[],require("757"),window.__swanRoute="pages/search/searchStore/store",window.usingComponents=[],window.usingPluginComponents=[],require("760"),window.__swanRoute="pages/trialCenter/dowebviewdata/loadingpage",window.usingComponents=[],window.usingPluginComponents=[],require("763"),window.__swanRoute="pages/ui/index",window.usingComponents=["pages/ui/popup/popUp"],window.usingPluginComponents=[],require("766"),window.__swanRoute="pages/ui/popup/popUp",window.usingComponents=["pages/ui/popup/popUp","pages/ui/overlay/overlay"],window.usingPluginComponents=[],require("769"),window.__swanRoute="pages/ui/overlay/overlay",window.usingComponents=["pages/ui/overlay/overlay"],window.usingPluginComponents=[],require("773"),window.__swanRoute="pages/unionLogin/baiduLogin/baiduLogin",window.usingComponents=["components/sncaptcha/index"],window.usingPluginComponents=[],require("776"),window.__swanRoute="pages/unionLogin/baiduLoginDone/baiduLoginDone",window.usingComponents=[],window.usingPluginComponents=[],require("779"),window.__swanRoute="pages/unionLogin/first/first",window.usingComponents=[],window.usingPluginComponents=[],require("782"),window.__swanRoute="pages/unionLogin/redir/redir",window.usingComponents=[],window.usingPluginComponents=[],require("785"),window.__swanRoute="pages/webView/index",window.usingComponents=[],window.usingPluginComponents=[],require("788"),window.__swanRoute="pages/weChat/weChat",window.usingComponents=[],window.usingPluginComponents=[],require("793"),window.__swanRoute="pages/yushou/bookRule/index",window.usingComponents=[],window.usingPluginComponents=[],require("796"),window.__swanRoute="pages/yushou/orderRule/index",window.usingComponents=[],window.usingPluginComponents=[],require("799"),window.__swanRoute="pages/privacy/index",window.usingComponents=["pages/privacy/component/index"],window.usingPluginComponents=[],require("802"),window.__swanRoute="pages/wxpay-confirm/wxpay-confirm",window.usingComponents=[],window.usingPluginComponents=[],require("805")}(__hacked);