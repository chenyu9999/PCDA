var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(e){e.global,e.Function;var t=e.setTimeout,a=e.setInterval;e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis;window.define("221",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({externalClasses:["sn-class"],properties:{type:{type:"String",value:"light"},size:{type:"String",value:"middle"},disabled:{type:"Boolean",value:!1},hoverClass:{type:"String",value:"hover"},shape:{type:String,value:"square"},inline:{type:Boolean,value:!1},status:{type:String,value:""},loading:{type:"Boolean",value:!1},hoverStopPropagation:{type:Boolean,value:!1},hoverStartTime:{type:Number,value:20},hoverStayTime:{type:Number,value:70},lang:{type:"String",value:"en"},plain:{type:Boolean,value:!1},formType:String,openType:String,appParameter:String,sessionFrom:{type:String,value:""},sendMessageTitle:String,sendMessagePath:String,sendMessageImg:String,showMessageCard:Boolean},methods:{handleTap:function(){if(this.data.disabled)return!1;this.triggerEvent("click")},bindgetuserinfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,a=void 0===t?{}:t;this.triggerEvent("getuserinfo",a)},bindcontact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,a=void 0===t?{}:t;this.triggerEvent("contact",a)},bindgetphonenumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,a=void 0===t?{}:t;this.triggerEvent("getphonenumber",a)},binderror:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,a=void 0===t?{}:t;this.triggerEvent("error",a)},bindopensetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,a=void 0===t?{}:t;this.triggerEvent("opensetting",a)}}})})),window.define("227",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({externalClasses:["sn-class"],properties:{bgUrl:{type:String,value:""},miniUrl:{type:String,value:""},miniPath:{type:String,value:""}},data:{},methods:{}})})),window.define("314",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};Component({properties:{iphoneXClass:{type:String,value:"",observer:function(e,t,a){}}},data:{},methods:{jumbToPage:function(e){var t=e.currentTarget.dataset.html;console.log(t);var a=D.default.syDomain+t;n.navigateTo({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(a)})}}})})),window.define("316",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};Component({properties:{reportObj:{type:Object,value:{},observer:function(e,t,a){}}},data:{host:{img:D.default.img}},methods:{jumbToPage:function(e){var t=e.currentTarget.dataset.id,a=D.default.syDomain+"sy_reportDetail.html?code=1&id="+t;n.navigateTo({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(a)})}}})})),window.define("318",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};Component({properties:{advertisementObj:{type:Object,value:{},observer:function(e,t,a){}}},data:{host:{img:D.default.img}},methods:{jumbToDetail:function(e){var t=e.currentTarget.dataset.url;n.navigateTo({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(t)})}}})})),window.define("320",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{zjmdList:{type:Array,value:[],observer:function(e,t,a){}}},data:{},methods:{stopTouchMove:function(){return!1}}})})),window.define("322",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};Component({properties:{bannerObj:{type:Object,value:{},observer:function(e,t,a){}}},data:{swiperCurrent:0,host:{img:D.default.img}},methods:{swiperChange:function(e){this.setData({swiperCurrent:e.detail.current})},jumbToDetail:function(e){var t=e.currentTarget.dataset.url;n.navigateTo({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(t)})}}})})),window.define("324",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({pageLifetimes:{show:function(){console.log(this.data)}},properties:{allPayWays:{type:Array,value:""}},data:{someData:{}},methods:{payWayChange:function(e){var t=e.detail.value;this.triggerEvent("changeWay",t)}}})})),window.define("326",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(327),D=(b=x)&&b.__esModule?b:{default:b};var S=e(135);Component({properties:{giftOrderId:{type:String,value:""},playNo:{type:Number,value:""}},data:{show:!1,giftData:{},objGift:{}},ready:function(){var e=this,t=this.properties,a=t.giftOrderId,o=t.playNo;n.showLoading({title:"加载中"}),D.default._queryWechatGift({giftOrderId:a,playNo:o}).then((function(t){if(t.playList&&t.playList.length>0)e.triggerEvent("playList",{playList:playList});else{var a={};a.shareContent=t.shareContent,a.shareImgUrl=t.shareImgUrl,a.shareUrl=t.shareUrl,e.setData({objGift:a})}return t})).catch((function(e){S.showToast({title:e.errMsg||"接口异常"})})).finally((function(){n.hideLoading()}))},methods:{clickCancel:function(){this.triggerEvent("giveFriends")},clickShare:function(e){e.target.dataset;this.triggerEvent("shareData")}}})})),window.define("327",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";S(e(78));var b=e(25),x=S(e(328)),D=(S(e(135)),S(e(16)),S(e(329)));function S(e){return e&&e.__esModule?e:{default:e}}var P="20190624";t.exports={_newOrderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.orderList,data:Object.assign({},e,{version:P})})},_queryRelationOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryRelationOrder,data:Object.assign({},e,{version:P})})},_newOrderDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.newOrderDetail,data:Object.assign({},e,{version:P,sourceName:"xcx",newSourceName:"bdxcx"})})},_queryPayMethods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryPayMethods,data:e})},_queryCouponUsable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryCouponUsable,data:e})},_cancelOrder:function(e){return D.default._requestPromise({method:"GET",url:x.default.order.cancelOrder,data:e})},_factoryDeliver:function(e){return D.default._requestPromise({method:"GET",url:e})},_factorySendDelay:function(e){return D.default._requestPromise({method:"GET",url:e})},_cshopSendDelay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.cshopDelayConfirm,data:e})},_notifyDeliverCshopGoods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.notifyDeliverCshopGoods,data:e})},_orderSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.cart4.recOrderSuccess,data:Object.assign({},e,{version:P})})},_orderRedPkg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.cart4.queryOrderRedPkg,data:e})},_queryNewOrderRedPkg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.cart4.queryNewOrderRedPkg,data:e})},_queryOrderConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryOrderConfirm,data:e})},_confirmCShopOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.confirmCShopOrder,data:e})},_confirmFactoryOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.confirmFactoryOrder,data:e})},_queryWechatGift:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryWechatGift,data:Object.assign({},e,{version:P})})},_deleteOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.deleteOrder,data:Object.assign({},e,{version:P})})},_cancelOrderReason:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.cancelOrderReason,data:Object.assign({},e,{version:P})})},_generateSmsCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.generateSmsCode,data:Object.assign({},e,{version:P})})},_queryBindPhoneNum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryBindPhoneNum,data:Object.assign({},e,{version:P})})},_verifySmsCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.verifySmsCode,data:Object.assign({},e,{version:P})})},_recommend:function(e,t){var a=D.default.objParser(e),o="";switch(t){case"cart4":o=x.default.order.recommendCart4;break;default:o=x.default.order.recommend}return(0,b.requestPromise)({method:"GET",url:o+"?"+a,dataType:"jsonp"})},_getAccout:function(e){var t=D.default.objParser(e);return D.default._getAccout({method:"GET",url:x.default.order.switchAccount+"?"+t})},_getAdvistisment:function(){return D.default._getAdvistisment({method:"GET",dataType:"jsonp",url:x.default.order.adverCart4})},_cpm:function(e){var t=D.default.objParser(e);return D.default._cpm({method:"GET",url:x.default.order.cpm+"?"+t})},_cpmAd:function(e,t){D.default.objParser(t);return D.default._cpmAd({method:"GET",url:e})},_getGiftRecord:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryWechatGiftRecord,data:Object.assign({},e)})},_queryWechatGiftUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D.default._requestPromise({method:"GET",url:x.default.order.queryWechatGiftUrl,data:Object.assign({},e,{version:P})})},_changeInvoiceForOrderList:function(e){return D.default._requestPromise({method:"GET",url:e})}}})),window.define("328",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(9);var b=e(45),x={publickKey:b.publickKey,bpmBizExcpUrl:D().bpm+"/dc-web/excp.gif",rq_http:D().rq_http,act:D().act,cms:D().cms,order:{orderList:D().order+"/xcx/order/queryList.do",orderDetail:D().order+"/xcx/order/queryDetail.do",newOrderDetail:D().order+"/xcx/v2/order/queryDetail.do",switchAccount:D().mySuning+"/api/mini/queryAppletHeadPicAlias.do",reviewGiftLogistic:D().order+"/xcx/logistic/queryReviewGiftLogistic.do",logisticsDetail:D().order+"/wap/logistic/queryLogisticDetail.do",logisticsXcxDetail:D().order+"/xcx/logistic/queryLogisticDetail.do",notifyDeliverCshopGoods:D().order+"/wap/order/notifyDeliverCshopGoods.do",cshopDelayConfirm:D().order+"/wap/onlineOrder/cshopDelayConfirm.do",queryPayMethods:D().order+"/bdxcx/pay/queryPayMethods.do",deleteOrder:D().order+"/wap/onlineOrder/deleteOrder.do",cancelOrderReason:D().order+"/xcx/order/cancelOrderReason.do",cancelOrder:D().order+"/wap/onlineOrder/cancelOrder.do",queryOrderConfirm:D().order+"/wap/order/queryOrderConfirm.do",confirmCShopOrder:D().order+"/wap/onlineOrder/confirmCShopOrder.do",confirmFactoryOrder:D().order+"/wap/onlineOrder/confirmFactoryOrder.do",queryECertificate:D().order+"/wap/order/queryECertificate.do",queryOrderPayerList:D().order+"/wap/identity/queryOrderPayerList.do",addPayer:D().order+"/wap/identity/addPayer.do",queryCouponUsable:D().order+"/wap/promotion/queryCouponUsable.do",deletePayer:D().order+"/wap/identity/deletePayer.do",omsSavePayer:D().order+"/wap/identity/omsSavePayer.do",queryEinvoice:D().order+"/wap/order/queryEleInvoice.do",queryWechatGift:D().order+"/xcx/order/opera/queryWechatGift.do",generateSmsCode:D().order+"/common/smsCode/generateSmsCode.do",queryBindPhoneNum:D().order+"/common/member/queryBindPhoneNum.do",verifySmsCode:D().order+"/common/smsCode/verifySmsCode.do",queryWechatGiftUrl:D().order+"/xcx/order/opera/queryWechatGiftInfo.do",queryWechatGiftRecord:D().order+"/xcx/order/opera/queryWechatGiftRecord.do",recommendCart4:D().tuijian+"/recommend-portal/recommend/paramsBiz.jsonp",recommend:D().tuijian+"/recommend-portal/recommendv2/biz.jsonp",queryRelationOrder:D().order+"/wap/order/queryRelationOrder.do",adverCart4:D().adverCart4,cpm:D().cpm,pay:{signature:D().crdNode+"/wx/node/pay/getAppIdAndSignature/mainApp/",toWxpay:D().order+"/wap/pay/toWxpay.do"}},cart4:{recOrderSuccess:D().order+"/xcx/pay/paySuccess.do",queryOrderRedPkg:D().order+"/xcx/bonus/queryOrderRedPkg.do",queryNewOrderRedPkg:D().order+"/xcx/bonus/queryNewOrderRedPkg.do"}};function D(){return b.host}t.exports=x})),window.define("329",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=e(20),D=_(e(328)),S=_(e(330)),P=e(23);function _(e){return e&&e.__esModule?e:{default:e}}var k={_requestPromise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.requestPromise)(e).then((function(e){if(e&&"0"==e.retCode)return e;throw Object.assign({},e)})).catch((function(t){try{(0,S.default)(e.url,t.retCode,t.uomErrMsg||t.errMsg)}catch(t){console.log(t)}return Promise.reject(t||"接口异常")}))},_getAccout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.requestPromise)(e).then((function(e){if(e&&"success"===e.status)return e;throw Object.assign({},e)})).catch((function(t){try{(0,S.default)(e.url,t.retCode,t.uomErrMsg||t.errMsg)}catch(t){console.log(t)}return Promise.reject(t||"接口异常")}))},_getAdvistisment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.requestPromise)(e).then((function(e){if(e.cart_pid&&e.cart_pid.tag&&e.cart_pid.tag[0])return e;throw Object.assign({},e)})).catch((function(t){try{(0,S.default)(e.url,t.retCode,t.uomErrMsg||t.errMsg)}catch(t){console.log(t)}return Promise.reject(t||"接口异常")}))},_cpm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.requestPromise)(e).then((function(e){if(e.data.cpm[0])return e;throw Object.assign({},e)})).catch((function(t){try{(0,S.default)(e.url,t.retCode,t.uomErrMsg||t.errMsg)}catch(t){console.log(t)}return Promise.reject(t||"接口异常")}))},_cpmAd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.requestPromise)(e,t)},_getCityCode:function(){return(0,x.getCityCode)().then((function(e){return{cityCode:e.cityLESId||"025"}})).catch((function(e){return{cityCode:"025"}}))},objParser:function(e){var t=[];for(var a in e)t.push(a+"="+e[a]);return t.join("&")},autoclick:function(e){saSendLog("click",{event:e})},_showBtn:function(e,t){var a=e.btnType,o=null,n=t.orderFlag&&"1"==t.orderFlag.eppAndAliToWxPaySwitch,i=t.orderFlag&&"1"==t.orderFlag.wxPaySwitch,r=t.orderFlag&&"0"==t.orderFlag.storePreSaleFlag,s=t.orderFlag&&"1"==t.orderFlag.wxpayFlag,c=t.orderFlag&&"1"==t.orderFlag.eppToAliWxPaySwitch;switch(a){case"3":o="swan"==(0,P.getPlatformType)()?!!(c&&i&&r):!!(n&&i&&r);break;case"4":o="swan"==(0,P.getPlatformType)()?!(!i||!r):!!(n&&i&&r);break;case"32":o=!!((t.payInfo&&"08"==t.payInfo.payMethodCode||"08"==t.payMethod)&&i&&r);break;case"1":case"31":case"36":case"2":case"37":o=!!(s&&i&&r);break;default:o=!0}return o},_imgFn1:function(e,t){var a=null;return 0==e?(a="cart-sn-ico",1==t.goodStoreFlag?a="cart-goods-store":1==t.mptmFlag?a="cart-mptm-store":1==t.hwgFlag&&(a="cart-hwg-ico")):1==e?a=1==t.goodStoreFlag?"cart-goods-store":1==t.hwgFlag||1==t.mptmFlag?"cart-hwg-ico":"cart-cshop-ico":2==e&&(1==t.goodStoreFlag?a="cart-goods-store":1!=t.sxFlag?a="cart-service-ico":1==t.sxFlag&&(a="cart-sn-ico")),a},_imgFn2:function(e,t){var a=e.itemFlag;return 1==a.couponFlag?e.couponPictureUrl.replace(/^\/\//,D.default.rq_http):1==a.ybFlag?"https://res.m.suning.com/project/cart/images/sun_package.png":1==a.sxsFlag?e.commonPicUrl.replace(/^\/\//,D.default.rq_http):e.productImgUrl?e.productImgUrl.replace(/^\/\//,D.default.rq_http):(0,b.goodImageUrl)(e.partNumber,e.supplierCode,"",t.vendorCode,120)},_copy:function(e){n.setClipboardData({data:e,success:function(e){n.showToast({title:"复制成功",icon:"success",duration:2e3}),n.getClipboardData({success:function(e){}})}})}};t.exports=k})),window.define("330",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x,D=e(78),S=(x=D)&&x.__esModule?x:{default:x},P=e(16);function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=(_(b={"order/queryList.do":"ofs-newddlb-20167","order/queryDetail.do":"ofs-newddxqdetail-20113","onlineOrder/cancelOrder.do":"ofs-newqxdd-20116","order/notifyDeliverCshopGoods.do":"ofs-newddxqcdcfh-20114","onlineOrder/cshopDelayConfirm.do":"ofs-newddxqcdycsh-20120","pay/paySuccess.do":"ofs-newcart4detail-20125","bonus/queryNewOrderRedPkg.do":"ofs-newcart4jl-20124","order/urgeFactoryDeliver.do":"ofs-newcscfh-20115","order/factorySendDelayConfirm.do":"ofs-newddxqcsycsh-20121","opera/queryWechatGift.do":"ofs-giftCart4Rule-20133","order/queryRelationOrder.do":"ofs-kdpmj-20142","mini/queryWeChatAppletRelation.do":"ofs-MSIqueryRelatedAccount-20157","cb/applet-cart4Pid.jsonp":"ofs-cart4newad-20129","cpm/getMCpmDatasGroup":"ofs-cart4cpmnewad-20129","onlineOrder/confirmCShopOrder.do":"ofs-newddxqcdqrsh-20118","onlineOrder/confirmFactoryOrder.do":"ofs-newddxqcsqrsh-20119"},"order/notifyDeliverCshopGoods.do","ofs-newddxqccfh-20120"),_(b,"onlineOrder/deleteOrder.do","ofs-ddlbscdd-20148"),_(b,"bonus/queryOrderRedPkg.do","ofs-newcart4jl-20124"),b);t.exports=function(e,t,a){try{var o=e.split(".com/")[1];o.indexOf(".do?")&&(o=o.split("?")[0]);var i=o.split("/");o=i[i.length-2]+"/"+i[i.length-1];!function(e){var t=n.getStorageSync("custNo")||"",a=(0,S.default)()&&(0,S.default)().custLevel||"";P._snBusError.bizExcp({bid:"bid_xcx",error_code:e.error_code,error_detail:JSON.stringify(e.error_detail),error_type:e.error_type,member_id:t,member_level:a,region:e.region,type_name:e.type_name})}({error_code:k[o]+"_"+t,error_detail:{errorDesc:a||""},error_type:"1",region:"025",type_name:e})}catch(e){console.log(e)}}})),window.define("332",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=_(e(329)),x=_(e(327)),D=_(e(333)),S=_(e(328)),P=e(77);function _(e){return e&&e.__esModule?e:{default:e}}Component({properties:{pageType:{type:String,value:""},content:{type:String,value:""},count:{type:String,value:""},sceneIds:{type:String,value:""},eleid:{type:String,value:""},modid:{type:String,value:""},addeleid:{type:String,value:""}},data:{response:[],noMore:!1},created:function(){},ready:function(){var e=this,t={u:n.getStorageSync("custNo"),c:"",sceneIds:this.properties.sceneIds,count:this.properties.count,parameters:""};b.default._getCityCode().then((function(a){var o=a.cityCode,n=Object.assign({},t,{cityCode:o}),i=e;x.default._recommend(n,e.properties.pageType||"").then((function(e){if(e&&e.sugGoods&&e.sugGoods.length>0&&e.sugGoods[0].skus.length>1){var t=e.sugGoods[0].skus;t.length%2!="0"&&t.pop(),t.forEach((function(e){e.pictureUrl=e.pictureUrl.replace(/^\/\//,S.default.rq_http)+"_400w_400h"})),i.setData({response:t},(function(){i.setData({noMore:!0})}))}}))}))},methods:{addCarts:function(e){try{(0,P.saSendLog)("manuclick",{modid:this.properties.modid,eleid:this.properties.addeleid,evdl:e.currentTarget.dataset.evdl})}catch(e){}var t=e.currentTarget.dataset,a=t.shopCode,o=t.vendorId,n=t.sugGoodsCode;D.default._againBuy([{cmmdtyCode:n,shopCode:a||o}])},goFourthPage:function(e){var t=e.currentTarget.dataset,a=t.partNumber,o=t.shopCode;try{(0,P.saSendLog)("autoexpo",this),(0,P.saSendLog)("manuclick",{modid:this.properties.modid,eleid:this.properties.eleid,evdl:e.currentTarget.dataset.evdl})}catch(e){}n.redirectTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o})}}})})),window.define("333",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=A(e(327)),D=A(e(54)),S=A(e(276)),P=e(77),_=A(e(328)),k=e(25),L=(e(73),e(23)),R=e(251);function A(e){return e&&e.__esModule?e:{default:e}}function j(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var O=e(135);a.exports={_goPay:function(e,t,a,o){var n,r=this,s=e.btnType,c=t.orderId,d=t.vendorCode,u=t.omsOrderId,l=t.payMethod,g="1"==s||"31"==s||"36"==s?2:"2"==s||"37"==s?3:1,p="1"==s||"31"==s||"2"==s||"36"==s||"37"==s?2:1;"3"!=e.btnType&&"4"!=e.btnType?"2"!=s&&"37"!=s?r._goWxPay(c,p,g,a,o,l):x.default._queryCouponUsable({orderId:c,vendorCode:d,omsOrderId:u,payFlag:g,orderType:p}).then((function(e){e.cart2No&&""!=e.cart2No?i.navigateTo({url:"/packageC/pages/cart/prepayment/prepayment?cart2No="+e.cart2No}):r._goWxPay(c,p,g,a,o,l)})).catch((function(e){r._goWxPay(c,p,g,a,o,l)})):"wx"===(0,L.getPlatformType)()?x.default._queryPayMethods((n=t,c=n.orderId,u=n.omsOrderId,n)).then((function(e){"1"==e.wxPayFlag?r._goWxPay(c,p,g,a,o,l):O.showToast({title:e.wxPayGuideTip||"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"})})).catch((function(e){O.showToast({title:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"})})):r._goWxPay(c,p,g,a,o,l)},_goWxPay:function(e,t,a,o,n,r){var s=this;if("wx"===(0,L.getPlatformType)())(0,k.wxPay)(e,t,a).then((function(){s._goCart4(e,o,n)})).catch((function(e){e&&"当前订单状态不可支付，请前往订单中心查看订单状态"==e.errMsg?i.showModal({title:"提示",content:e.errMsg||"系统繁忙，请稍后再试！",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",complete:function(){i.navigateTo({url:"/packageA/pages/order/orderList"})}}):e&&"requestPayment:fail cancel"!=e.errMsg&&O.showToast({title:e.errMsg||"接口异常"})}));else switch(r){case"08":(0,R.wxPay)({orderId:e,payFlag:a}).then((function(t){console.log("wxPay2 success",t),t.errMsg&&t.errMsg?O.showToast({title:t.errMsg}):t&&i.redirectTo({url:"/pages/wxpay-confirm/wxpay-confirm?orderIds="+e+"&newCart4Switch="+o+"&wxGetGiftFlag="+n})})).catch((function(e){console.error("wxPay2 fail",e),i.redirectTo({url:"/packageA/pages/order/orderList"})}));break;case"13":(0,R.aliPay)({orderId:e,payFlag:a}).then((function(t){console.log("aliPay2 success",t),t.errMsg&&t.errMsg?O.showToast({title:t.errMsg}):s._goCart4(e,o,n)})).catch((function(e){console.error("aliPay2 fail",e),i.redirectTo({url:"/packageA/pages/order/orderList"})}));break;default:i.showModal({title:"提示",content:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",complete:function(){}})}},_confirmGoods:function(e,t,a,o){var n=this;x.default._queryOrderConfirm({orderId:e,vendorCode:t}).then((function(r){if(r.cShopPkgList.length+r.factoryPkgList.length<2){var s=[].concat(j(r.cShopPkgList),j(r.factoryPkgList))[0].orderItemList.map((function(e,t){return"7"===a?e.omsItemId:e.itemId}));if("7"===a){var c=s.join("_");n._confirmFactoryOrder({orderId:e,omsItemIds:c,vendorCode:t},o)}else{var d=s.join("_");n._confirmCShopOrder({orderId:e,itemIds:d,vendorCode:t},o)}}else i.navigateTo({url:"/packageA/pages/order/confirmOrder?orderId="+e+"&vendorCode="+t})}))},_confirmCShopOrder:function(e,a){i.showModal({content:"请收到货后，再确认收货！否则您可能钱货两空哦",confirmColor:"#ffc200",showCancel:!0,success:function(o){o.confirm&&x.default._confirmCShopOrder(e).then((function(o){O.showToast({title:o.errMsg||"确认收货成功"}),t((function(){a?i.redirectTo({url:"/packageA/pages/order/orderList/orderList?index="+a}):i.redirectTo({url:"/packageA/pages/order/orderDetail/orderDetail?orderId="+e.orderId+"&vendorCode="+e.vendorCode+"&version=20190422"})}),3e3)})).catch((function(e){O.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})}))}})},_confirmFactoryOrder:function(e,a){i.showModal({content:"请收到货后，再确认收货！否则您可能钱货两空哦",confirmColor:"#ffc200",showCancel:!0,success:function(o){o.confirm&&x.default._confirmFactoryOrder(e).then((function(o){O.showToast({title:o.errMsg||"确认收货成功"}),t((function(){a?i.redirectTo({url:"/packageA/pages/order/orderList/orderList?index="+a}):i.redirectTo({url:"/packageA/pages/order/orderDetail/orderDetail?orderId="+e.orderId+"&vendorCode="+e.vendorCode+"&version=20190422"})}),3e3)})).catch((function(e){O.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})}))}})},_confirmGoodsAlert:function(e){i.showModal({content:"请收到货后，再确认收货！否则您可能钱货两空哦",confirmColor:"#ffc200",showCancel:!0,success:function(t){t.confirm&&O.showToast({title:e.errMsg})}})},_logistics:function(e){var t=null;"1"==e.logisticFlag?(t=e.omsItemId?"/packageA/pages/logistics-new/logistics-new?orderId="+e.orderId+"&vendorCode="+e.vendorCode+"&omsItemId="+e.omsItemId:"/packageA/pages/logistics-new/logistics-new?orderId="+e.orderId+"&vendorCode="+e.vendorCode,i.navigateTo({url:t})):(t=e.omsItemId?"/packageA/pages/logistics/logistics?orderId="+e.orderId+"&vendorCode="+e.vendorCode+"&omsItemId="+e.omsItemId:"/packageA/pages/logistics/logistics?orderId="+e.orderId+"&vendorCode="+e.vendorCode,i.navigateTo({url:t}))},_goExchangeCard:function(e,t){i.navigateTo({url:"/packageA/pages/order/eExchangeCard/index?orderId="+e+"&vendorCode="+t})},_coupon:function(e){var t="/packageA/pages/quanSearch/search/search?id="+e;i.navigateTo({url:t})},_factoryDeliver:function(e,t,a){x.default._factoryDeliver(e).then((function(e){e.urgeDetailUrl?i.redirectTo({url:"/pages/webView/index?webViewSrc="+e.urgeDetailUrl}):O.showToast({title:e.urgeTip})})).catch((function(e){O.showToast({title:e.urgeTip||"催发货失败"})})).finally((function(){}))},_notifyDeliverCshopGoods:function(e){x.default._notifyDeliverCshopGoods(e).then((function(e){e&&"0"==e.retCode?O.showToast({title:e.errMsg||"催发货成功，已经通知商家，请耐心等待"}):O.showToast({title:e.errMsg||"催发货失败"})})).catch((function(){O.showToast({title:"催发货失败"})})).finally((function(){}))},_factorySendDelay:function(e,a,o,n,r){i.showModal({content:"确认延长收货时间？每笔订单最多延迟"+a+"次，每次延迟"+o+"天",confirmColor:"#ffc200",showCancel:!0,success:function(a){a.confirm&&x.default._factorySendDelay(e).then((function(e){O.showToast({title:"延迟成功，已为您延迟"+o+"天"})})).catch((function(e){O.showToast({title:resp.errMsg||"延迟失败"})})).finally((function(){t((function(){i.redirectTo({url:"/packageA/pages/order/orderDetail/orderDetail?orderId="+n+"&vendorCode="+r+"&version=20190103"})}),2e3)}))}})},_cshopSendDelay:function(e,a,o){i.showModal({content:"确认延长收货时间？每笔订单只能延迟一次，延迟"+e+"天",confirmColor:"#ffc200",showCancel:!0,success:function(n){n.confirm&&x.default._cshopSendDelay({orderId:a,vendorCode:o}).then((function(t){O.showToast({title:"延迟成功，已为您延迟"+e+"天"})})).catch((function(e){O.showToast({title:"延迟失败"})})).finally((function(){t((function(){i.redirectTo({url:"/packageA/pages/order/orderDetail/orderDetail?orderId="+a+"&vendorCode="+o+"&version=20190103"})}),2e3)}))}})},_cancelOrder:function(e,a,o){var n=o||"0",r=e.relationFlag;i.showModal({content:"0"==r?"确定取消订单？":"参与共享优惠的订单如未支付将会一起取消订单!",confirmColor:"#ffc200",success:function(o){if(o.confirm){try{(0,P.saSendLog)("manuclick",{modid:"044",eleid:"776044002"})}catch(e){}x.default._cancelOrder(e).then((function(e){O.showToast({title:"取消成功"}),t((function(){"orderList"==a?i.redirectTo({url:"/packageA/pages/order/orderList/orderList?index="+n}):i.navigateBack()}),2100)})).catch((function(e){O.showToast({title:e.errMsg||"取消失败"})}))}else try{(0,P.saSendLog)("manuclick",{modid:"044",eleid:"776044003"})}catch(e){}}})},_againBuy:function(e){S.default.addCart(D.default.getTrack(),e).then((function(e){e.data.cartHeadInfo&&e.data.cartHeadInfo.isSuccess&&"Y"==e.data.cartHeadInfo.isSuccess?i.showModal({content:"加入购物车成功，是否去结算",confirmColor:"#ffc200",success:function(e){e.confirm&&i.switchTab({url:"/pages/cart/cart1/cart1"})}}):O.showToast({title:e.data&&e.data.errorInfos[0]&&(e.data.errorInfos[0].errorMessage||e.msg||"加入购物车失败")})}))},_goCart4:function(e,t,a){if("1"==a)i.redirectTo({url:"/packageA/pages/order/cart4Gift/cart4Gift?id="+e});else{var o=t&&"0"===t?"/packageA/pages/cart4/cart4?id=":"/packageA/pages/order/cart4/cart4?id=";i.redirectTo({url:o+e})}},_goDetail:function(e){i.navigateTo({url:"/packageA/pages/order/orderDetail/orderDetail?orderId="+e.orderId+"&vendorCode="+e.vendorCode})},_goEInvoice:function(e){i.navigateTo({url:"/packageA/pages/order/eInvoice/eInvoice?orderId="+e.orderId+"&cardFlag=0&vendorCode="+e.vendorCode+"&omsOrderId="+e.omsOrderId})},_deleteOrder:function(e,t){i.showModal({content:"删除后可以从电脑端订单回收站恢复",confirmColor:"#ffc200",success:function(a){a.confirm&&x.default._deleteOrder(e).then((function(a){O.showToast({title:"删除成功"}),t.triggerEvent("delete",e.orderId)})).catch((function(e){O.showToast({title:e.errMsg||"删除失败"})}))}})},_changeInvoiceForOrderList:function(e){x.default._changeInvoiceForOrderList(e).then((function(e){if(e.changeInvoiceUrl){var t=e.changeInvoiceUrl;t=t.replace(/^\/\//,_.default.rq_http),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})}else O.showToast({title:e.reason})})).catch((function(e){O.showToast({title:e.errMsg})}))}}})),window.define("335",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{},data:{},methods:{clickFn:function(e){var t=e.target.dataset,a=t.typeName,o=t.typeValue;this.triggerEvent("clickFn",{typeName:a,typeValue:o})}}})})),window.define("337",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{content:{type:String,value:""},alertclass:{type:String,value:""}},data:{},methods:{clickFn:function(e){var t=e.target.dataset,a=t.typeName,o=t.typeValue;this.triggerEvent("clickFn",{typeName:a,typeValue:o})}}})})),window.define("339",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(77);Component({properties:{staOrderRedPkg:{type:Object,value:{}}},data:{bonusInfoFlag:!1,bonustip:""},ready:function(){(0,b.saSendLog)("autoexpo",this)},methods:{userTip:function(e){var t=e.currentTarget.dataset.userurl,a=e.currentTarget.dataset.url;try{(0,b.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}t?n.redirectTo({url:"/pages/webView/index?webViewSrc="+a}):this.setData({bonusInfoFlag:!0,bonustip:e.currentTarget.dataset.bonustip||"请前往苏宁易购APP - 领券中心查看"})},bonusShare:function(){this.triggerEvent("rewardevent",{share_bottom:1})},clickFn:function(){this.setData({bonusInfoFlag:!1})}}})})),window.define("341",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(328),D=((b=x)&&b.__esModule,e(77));Component({properties:{orderInfo:{type:Object,value:{}}},data:{},ready:function(){(0,D.saSendLog)("autoexpo",this)},methods:{goHome:function(e){console.log(e.currentTarget.dataset.href);try{(0,D.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}n.reLaunch({url:e.currentTarget.dataset.href})},goOrderList:function(e){console.log(e.currentTarget.dataset.href);try{(0,D.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}n.redirectTo({url:e.currentTarget.dataset.href})}}})})),window.define("343",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";S(e(329));var x=S(e(327)),D=S(e(333));function S(e){return e&&e.__esModule?e:{default:e}}Component({properties:{order:{value:"",type:Object},relationBtnType:{value:"",type:String}},data:{showModalStatus:!1,queryRelationInfo:{}},created:function(){},ready:function(){var e=this,t=this.properties.order.omsOrderId;x.default._queryRelationOrder({omsOrderId:t}).then((function(t){e.setData({queryRelationInfo:t,relationOrder:!0},(function(){e.showModal()}))})).catch((function(t){var a=e.properties.relationBtnType,o=e.properties.order,n=o.switchKey&&o.switchKey.newCart4Switch,i=o.orderFlag.wxGiftFlag;D.default._goPay({btnType:a},o,n,i)}))},methods:{relationPay:function(){var e=[];this.data.queryRelationInfo.orderList.length>0&&this.data.queryRelationInfo.orderList.map((function(t){e.push(t.b2cOrderId)}));var t=this.data.relationBtnType,a=this.properties.order;a.orderId=e.join();var o=a.switchKey&&a.switchKey.newCart4Switch,n=a.orderFlag.wxGiftFlag;D.default._goPay({btnType:t},a,o,n)},showModal:function(){var e=i.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=e,e.translateY(300).step(),this.setData({animationData:e.export(),showModalStatus:!0}),t(function(){e.translateY(0).step(),this.setData({animationData:e.export()})}.bind(this),200)},hideModal:function(){this.triggerEvent("hideModal");var e=i.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=e,e.translateY(300).step(),this.setData({animationData:e.export()}),t(function(){e.translateY(0).step(),this.setData({animationData:e.export(),showModalStatus:!1})}.bind(this),200)}}})})),window.define("345",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";D(e(328));var b=D(e(333)),x=D(e(327));function D(e){return e&&e.__esModule?e:{default:e}}Component({properties:{orderId:{value:"",type:String},tabIndex:{value:"",type:String},relationFlag:{value:"",type:String}},created:function(e){},data:{reasonList:{},selected:!1,id:-1},ready:function(){var e=this,t=this.properties.orderId,a=this.properties.relationFlag;n.showLoading({title:"加载中",mask:!0}),x.default._cancelOrderReason({orderId:t,relationFlag:a}).then((function(t){t.reasonList.map((function(e){e.cancelSelect=!1})),e.setData({reasonList:t})})).finally((function(){n.hideLoading()}))},methods:{closed:function(){this.triggerEvent("closed")},selected:function(e){var t=e.currentTarget.dataset.id,a=this.data.reasonList.reasonList;a.map((function(e,a){e.cancelSelect=!1,t==a&&(e.cancelSelect=!e.cancelSelect)}));var o=Object.assign({},this.data.reasonList,{arr:a});this.setData({reasonList:o,selected:!0,id:t})},submitReason:function(){if(!this.data.selected)return!1;var e=this.data.reasonList.reasonList[this.data.id].cancelReason,t={orderId:this.properties.orderId,cancelReason:e,relationFlag:this.properties.relationFlag},a=this.properties.tabIndex;b.default._cancelOrder(t,"orderList",a)}}})})),window.define("347",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{},data:{},methods:{clickFn:function(){n.switchTab({url:"/pages/index/index"})}}})})),window.define("349",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=_(e(328)),x=_(e(333)),D=_(e(327)),S=e(77),P=e(23);function _(e){return e&&e.__esModule?e:{default:e}}var k=e(135);Component({properties:{orderData:{type:Array,value:[]},switchkey:{type:Object,value:{}},tabIndex:{type:String,value:{}},userInfo:{type:Object,value:{}}},data:{platform:(0,P.getPlatformType)(),goMoreIndex:"",show:!1,objGift:{},playList:[],giftOrderId:""},ready:function(){},methods:{snHwgSpot:function(e){if("1"==e.currentTarget.dataset.snHwgSpotFlag){var t="//fe.suning.com/oversea/ziying.html";t=t.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})}},goMore:function(e){var t=e.currentTarget.dataset.goMore;this.setData({goMoreIndex:t==this.data.goMoreIndex?"":t})},goLogtsic:function(e){var t=e.currentTarget.dataset,a=t.orderId,o=t.vendorCode,n=this.properties.switchkey.logisticFlag;x.default._logistics({orderId:a,vendorCode:o,logisticFlag:n})},goHwg:function(e){var t=e.currentTarget.dataset.orderId;n.navigateTo({url:"/packageA/pages/order/overSeasReal/index?orderId="+t+"&type=0"})},sale_service:function(e){var t=e.currentTarget.dataset.url;t&&(t=t.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}))},goDetail:function(e){var t=e.currentTarget.dataset,a=t.orderId,o=t.vendorCode;x.default._goDetail({orderId:a,vendorCode:o})},giftLogistic:function(e){var t=e.currentTarget.dataset,a=t.orderId,o=t.vendorCode,n=t.omsItemId,i=this.properties.switchkey.logisticFlag;x.default._logistics({orderId:a,vendorCode:o,omsItemId:n,logisticFlag:i})},clickCancel:function(){this.setData({show:!this.data.show})},giftService:function(e){var t=this;n.showLoading({title:"加载中",mask:!0});var a={orderId:e.orderId,giftPlay:e.giftPlay,custPhoto:this.properties.userInfo.avatarUrl,custNick:this.properties.userInfo.nickName};D.default._queryWechatGiftUrl(a).then((function(e){var a={};a.title=e.shareContent,a.imageUrl=e.shareImgUrl,a.path=e.shareUrl,t.setData({show:!t.data.show,objGift:a})})).catch((function(e){k.showToast({title:e.errMsg||"网络异常"})})).finally((function(){n.hideLoading()}))},giveGift:function(e){var t=e.currentTarget.dataset,a=t.playNo,o=t.orderId;this.giftService({playNo:a,orderId:o})},orderBtn:function(e){var t=this,a=e.target.dataset,o=a.btnUrl,i=a.btnType,r=e.currentTarget.dataset,s=r.orderId,c=r.omsOrderId,d=r.vendorCode,u=r.orderFlag,l=r.payMethod,g=r.giftPlay,p=this.properties.switchkey;try{(0,S.saSendLog)("manuclick",{modid:e.target.dataset.modid,eleid:e.target.dataset.eleid})}catch(e){}if("6"==i||"7"==i)x.default._confirmGoods(s,d,i,this.properties.tabIndex);else if("13"==i){var h=u.relationFlag;this.triggerEvent("openCancel",{orderId:s,relationFlag:h})}else if("17"==i){var f={orderId:e.currentTarget.dataset.orderId};x.default._deleteOrder(f,this)}else if("10"==i){var m={orderId:s,vendorCode:d,logisticFlag:p.logisticFlag};x.default._logistics(m)}else if("1"==i||"2"==i||"3"==i||"4"==i||"31"==i||"32"==i||"36"==i||"37"==i)if(u&&"1"==u.relationFlag){if("08"!=l)return void k.showToast({title:"小程序仅支持微信支付，请到APP或电脑端支付"});this.triggerEvent("relationOrder",{btnType:i,omsOrderId:c,orderFlag:u,orderId:s})}else if("swan"==this.data.platform){var w={orderIds:s,version:"20170625",clientType:"bdxcx"};if("4"==i)x.default._goPay({btnType:i},{orderId:s,omsOrderId:c,vendorCode:d,payMethod:"13"},p.newCart4Switch,u.wxGiftFlag);else if("32"==i)x.default._goPay({btnType:i},{orderId:s,omsOrderId:c,vendorCode:d,payMethod:"08"},p.newCart4Switch,u.wxGiftFlag);else if("2"==i||"37"==i){var v="1"==i||"31"==i||"36"==i?2:"2"==i||"37"==i?3:1,y="1"==i||"31"==i||"2"==i||"36"==i||"37"==i?2:1;D.default._queryCouponUsable({orderId:s,vendorCode:d,omsOrderId:c,payFlag:v,orderType:y}).then((function(e){e.cart2No&&""!=e.cart2No?n.navigateTo({url:"/packageC/pages/cart/prepayment/prepayment?cart2No="+e.cart2No}):t.queryPayMethods(w,i,s,c,d,p.newCart4Switch,u.wxGiftFlag)})).catch((function(e){t.queryPayMethods(w,i,s,c,d,p.newCart4Switch,u.wxGiftFlag)}))}else this.queryPayMethods(w,i,s,c,d,p.newCart4Switch,u.wxGiftFlag)}else x.default._goPay({btnType:i},{orderId:s,omsOrderId:c,vendorCode:d,payMethod:l},p.newCart4Switch,u.wxGiftFlag);else if("20"==i){var C=e.currentTarget.dataset.againBuy;x.default._againBuy(C)}else if("23"==i)x.default._notifyDeliverCshopGoods({orderId:s,vendorCode:d});else if("26"==i)x.default._goExchangeCard(s,d);else if("34"==i)x.default._factoryDeliver(o,s,d);else if("40"==i){var T=e.target.dataset.messageTip;T?k.showToast({title:T}):(o=o.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(o)}))}else"44"==i?this.giftService({orderId:s,giftPlay:g}):"45"==i?(o=o.replace(/^\/\//,b.default.rq_http),x.default._changeInvoiceForOrderList(o)):o&&("-1"!=o.indexOf("suning.com")||"-1"!=o.indexOf("cnsuning.com")?(o=o.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(o)})):n.redirectTo({url:o}))},queryPayMethods:function(e,t,a,o,i,r,s){var c=this;D.default._queryPayMethods(e).then((function(e){if("0"!=e.retCode||"0"==e.alipayFlag&&"0"==e.wxPayFlag)n.showModal({title:"提示",content:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#f60"});else if("1"==e.alipayFlag&&"0"==e.wxPayFlag)x.default._goPay({btnType:t},{orderId:a,omsOrderId:o,vendorCode:i,payMethod:"13"},r,s);else if("0"==e.alipayFlag&&"1"==e.wxPayFlag)x.default._goPay({btnType:t},{orderId:a,omsOrderId:o,vendorCode:i,payMethod:"08"},r,s);else if("1"==e.alipayFlag&&"1"==e.wxPayFlag){var d={orderId:a,btnType:t,omsOrderId:o,vendorCode:i,newCart4Switch:r,wxGiftFlag:s,payType:[{typeCode:"13",typeText:"支付宝"},{typeCode:"08",typeText:"微信"}]};c.setData({orderInfo:d,popShow:!c.data.popShow})}})).catch((function(e){k.showToast({title:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"})}))},closePop:function(){this.data.popShow&&this.setData({popShow:!this.data.popShow})},goPay:function(e){var t=e.btnType,a=e.orderId,o=e.omsOrderId,n=e.vendorCode,i=e.payMethod,r=e.newCart4Switch,s=e.wxGiftFlag;this.setData({popShow:!this.data.popShow}),x.default._goPay({btnType:t},{orderId:a,omsOrderId:o,vendorCode:n,payMethod:i},r,s)}}})})),window.define("351",(function(e,t,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=P(e(328)),D=(P(e(333)),P(e(327))),S=e(77);function P(e){return e&&e.__esModule?e:{default:e}}var _=e(135);Component({properties:{orderId:{value:"",type:String}},data:{queryBindInfo:{},havePhone:!1,noPhone:!1,times:60,showTimes:!1,codeValue:"",changePhoneNumUrl:""},ready:function(){var e=this;i.showLoading({title:"加载中",mask:!0}),D.default._queryBindPhoneNum({clientType:"xcx"}).then((function(t){e.setData({queryBindInfo:t,havePhone:t&&t.phoneNum,noPhone:t&&!t.phoneNum,changePhoneNumUrl:t&&t.changePhoneNumUrl})})).catch((function(e){_.showToast({title:e.errMsg||"网络异常"})})).finally((function(){i.hideLoading()}))},methods:{checkCode:function(e){var t=e.currentTarget.dataset,a=t.modid,o=t.eleid;this.clickPoint(a,o),this.triggerEvent("checkCode")},getCheckCode:function(e){var t=this,o=this,n=e.currentTarget.dataset,i=n.modid,r=n.eleid;this.clickPoint(i,r),D.default._generateSmsCode({clientType:"xcx",businessType:"01"}).then((function(e){t.data.changePhoneNumUrl=e.changePhoneNumUrl;var n=a((function(){o.setData({times:o.data.times-1,showTimes:!0}),o.data.times<=0&&o.setData({showTimes:!o.data.showTimes,times:60},(function(){clearInterval(n)}))}),1e3)})).catch((function(e){_.showToast({title:e.errMsg||"网络异常"})}))},wxSearchInput:function(e){this.data.codeValue=e.detail.value},setPhone:function(e){var t=this.data.changePhoneNumUrl,a=e.currentTarget.dataset,o=a.modid,n=a.eleid;this.clickPoint(o,n),t=t.replace(/^https:\/\//,x.default.rq_http),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})},confirmCode:function(e){var t=this.data.codeValue,a=this.properties.orderId,o=e.currentTarget.dataset,n=o.modid,r=o.eleid;this.clickPoint(n,r),D.default._verifySmsCode({orderId:a,checkCode:t,clientType:"xcx"}).then((function(e){var t=e.cardKeyUrl;t=t.replace(/^\/\//,x.default.rq_http),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})})).catch((function(e){_.showToast({title:e.errMsg||"网络异常"})}))},clickPoint:function(e,t){try{(0,S.saSendLog)("manuclick",{modid:e,eleid:t})}catch(e){}}}})})),window.define("353",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{detailPromotionList:{type:Array,value:[]},payInfo:{type:Object,value:{}}},data:{},methods:{clickFn:function(e){var t=e.target.dataset,a=t.typeName,o=t.typeValue;this.triggerEvent("clickFn",{typeName:a,typeValue:o})}}})})),window.define("355",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=_(e(328)),x=_(e(333)),D=_(e(327)),S=e(77),P=e(23);function _(e){return e&&e.__esModule?e:{default:e}}var k=e(135);Component({properties:{orderBtnList:{type:Array,value:[]},others:{type:Object,value:{}},showTuijianFlag:{type:Boolean,value:""},userInfo:{type:Object,value:{}}},data:{platform:(0,P.getPlatformType)(),showBtn:!1,show:!1,giftBtn:!1,playList:[],objGift:{}},methods:{clickMore:function(){this.setData({showBtn:!this.data.showBtn})},clickCancel:function(){this.setData({show:!this.data.show})},btnClick:function(e){var t=this,a=this.properties.others,o=a.orderFlag.wxGiftFlag,i=a.orderFlag.relationFlag,r=e.currentTarget.dataset.btnType,s=e.currentTarget.dataset.url,c=a.switchKey&&a.switchKey.logisticFlag,d=a.switchKey&&a.switchKey.newCart4Switch,u=a.giftPlay;try{(0,S.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}if("1"==r||"2"==r||"3"==r||"4"==r||"31"==r||"32"==r||"36"==r||"37"==r)if(a.orderFlag&&"1"==a.orderFlag.relationFlag){if("08"!=a.payInfo.payMethodCode)return void k.showToast({title:"小程序仅支持微信支付，请到APP或电脑端支付"});this.triggerEvent("relationOrder",{btnType:r})}else if(a.payMethod=a.payInfo&&a.payInfo.payMethodCode,"swan"==(0,P.getPlatformType)()){var l=a,g=l.orderId,p=l.vendorCode,h=l.omsOrderId,f=l.payMethod;a={orderId:g,vendorCode:p,omsOrderId:h,payMethod:f};var m={orderIds:g,version:"20170625",clientType:"bdxcx"};if("4"==r)a.payMethod="13",x.default._goPay({btnType:r},a,d,o);else if("32"==r)a.payMethod="08",x.default._goPay({btnType:r},a,d,o);else if("2"==r||"37"==r){var w="1"==r||"31"==r||"36"==r?2:"2"==r||"37"==r?3:1,v="1"==r||"31"==r||"2"==r||"36"==r||"37"==r?2:1;D.default._queryCouponUsable({orderId:g,vendorCode:p,omsOrderId:h,payFlag:w,orderType:v}).then((function(e){e.cart2No&&""!=e.cart2No?n.navigateTo({url:"/packageC/pages/cart/prepayment/prepayment?cart2No="+e.cart2No}):t.queryPayMethods(m,r,a,d,o)})).catch((function(e){t.queryPayMethods(m,r,a,d,o)}))}else this.queryPayMethods(m,r,a,d,o)}else x.default._goPay({btnType:r},a,d,o);else if("13"==r)x.default._cancelOrder({orderId:a.orderId,relationFlag:i},"orderDeatil");else if("26"==r)x.default._goExchangeCard(a.orderId,a.vendorCode);else if("6"==r||"7"==r)x.default._confirmGoods(a.orderId,a.vendorCode,r);else if("10"==r){var y=a,C=y.orderId,T=y.vendorCode;x.default._logistics({orderId:C,vendorCode:T,logisticFlag:c},d)}else if("28"==r){var I=a.itemList[0].ruleId;x.default._coupon(I)}else if("34"==r){var _=a,L=_.orderId,R=_.vendorCode;x.default._factoryDeliver(s,L,R)}else if("35"==r){var A=a,j=A.delayCounts,O=A.delayDays,q=A.orderId,M=A.vendorCode;x.default._factorySendDelay(s,j,O,q,M)}else if("15"==r){var F=a,U=F.delayDays,N=F.orderId,E=F.vendorCode;x.default._cshopSendDelay(U,N,E)}else if("20"==r){var B=a.againBuy;x.default._againBuy(B)}else if("23"==r)x.default._notifyDeliverCshopGoods({orderId:a.orderId,vendorCode:a.vendorCode});else if("42"==r)this.triggerEvent("checkCode");else if("40"==r)s=s.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(s)});else if("44"==r){var G=a.orderId;if(this.data.giftBtn)this.setData({giftBtn:!1});else{n.showLoading({title:"加载中",mask:!0});var V={orderId:G,giftPlay:u,custPhoto:this.properties.userInfo.avatarUrl,custNick:this.properties.userInfo.nickName};D.default._queryWechatGiftUrl(V).then((function(e){var a={};a.title=e.shareContent,a.imageUrl=e.shareImgUrl,a.path=e.shareUrl,t.setData({show:!t.data.show,objGift:a})})).catch((function(e){k.showToast({title:e.errMsg||"网络异常"})})).finally((function(){n.hideLoading()}))}}else s&&(-1!==s.indexOf("cnsuning.com")||-1!==s.indexOf("suning.com")?(s=s.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(s)})):n.redirectTo({url:s}))},giftBtnClick:function(e){var t=this,a=this.properties.others.orderId,o=e.currentTarget.dataset.playNo;try{(0,S.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}n.showLoading({title:"加载中",mask:!0}),D.default._queryWechatGift({orderId:a,playNo:o}).then((function(e){var a={};a.title=e.shareContent,a.imageUrl=e.shareImgUrl,a.path=e.shareUrl,t.setData({show:!t.data.show,objGift:a})})).catch((function(e){k.showToast({title:e.errMsg||"网络异常"})})).finally((function(){n.hideLoading()}))},queryPayMethods:function(e,t,a,o,i){var r=this;D.default._queryPayMethods(e).then((function(e){if("0"!=e.retCode||"0"==e.alipayFlag&&"0"==e.wxPayFlag)n.showModal({title:"提示",content:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付",showCancel:!1,confirmText:"我知道了",confirmColor:"#f60"});else if("1"==e.alipayFlag&&"0"==e.wxPayFlag)a.payMethod="13",x.default._goPay({btnType:t},a,o,i);else if("0"==e.alipayFlag&&"1"==e.wxPayFlag)a.payMethod="08",x.default._goPay({btnType:t},a,o,i);else if("1"==e.alipayFlag&&"1"==e.wxPayFlag){var s={orderId:a.orderId,btnType:t,omsOrderId:a.omsOrderId,vendorCode:a.vendorCode,newCart4Switch:o,wxGiftFlag:i,payType:[{typeCode:"13",typeText:"支付宝"},{typeCode:"08",typeText:"微信"}]};r.setData({orderInfo:s,popShow:!r.data.popShow})}})).catch((function(e){k.showToast({title:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"})}))},closePop:function(){this.data.popShow&&this.setData({popShow:!this.data.popShow})},goPay:function(e){var t=e.btnType,a=e.orderId,o=e.omsOrderId,n=e.vendorCode,i=e.payMethod,r=e.newCart4Switch,s=e.wxGiftFlag,c={orderId:a,omsOrderId:o,vendorCode:n,payMethod:i};this.setData({popShow:!this.data.popShow}),x.default._goPay({btnType:t},c,r,s)}}})})),window.define("357",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=P(e(329)),x=P(e(333)),D=P(e(328)),S=e(77);function P(e){return e&&e.__esModule?e:{default:e}}Component({properties:{payInfo:{type:Object,value:{}},mixedObj:{type:Object,value:{}},invoiceInfo:{type:Object,value:{}},detailPromotionList:{type:Array,value:[]}},data:{},methods:{autoclick:function(e){(0,S.saSendLog)("click",{event:e})},superUrl:function(e){var t=e.currentTarget.dataset.superUrl;t&&(t=t.replace(/^\/\//,D.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}))},clickFn:function(e){var t=e.target.dataset,a=t.typeName,o=t.typeValue,n=t.typeContent;if("copy"==a){var i=e.target.dataset.orderId;try{(0,S.saSendLog)("manuclick",{modid:"028",eleid:"776028005"})}catch(e){console.log(e)}b.default._copy(i)}else if("turnOff"==a||"turnOff1"==a){try{(0,S.saSendLog)("manuclick",{modid:"turnOff1"==a?"008":"040",eleid:"turnOff1"==a?"776008001":"776040001"})}catch(e){console.log(e)}this.triggerEvent("clickFn",{typeName:a,typeValue:o,typeContent:n})}else if("invoice"==a){var r=this.properties.mixedObj,s=r.orderId,c=r.vendorCode,d=r.omsOrderId;x.default._goEInvoice({orderId:s,vendorCode:c,omsOrderId:d})}else{var u=this.properties.invoiceInfo,l=u.delayOpenInvoiceRemind,g=u.invoiceUrl,p=u.elecInvoiceing;if(l)this.triggerEvent("clickFn",{typeName:"turnOff1",typeValue:"true",typeContent:l});else if(g&&!p){var h=this.properties.mixedObj,f=h.orderId,m=h.vendorCode,w=h.omsOrderId;x.default._goEInvoice({orderId:f,vendorCode:m,omsOrderId:w})}}}}})})),window.define("359",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{contractInfo:{type:Object,value:{}}},data:{},methods:{}})})),window.define("361",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{tripTickect:{type:Object,value:{}}},data:{show:!0},methods:{promotClick:function(){this.setData({show:!1})}}})})),window.define("363",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=P(e(328)),x=P(e(333)),D=e(77),S=e(23);function P(e){return e&&e.__esModule?e:{default:e}}Component({properties:{itemList:{type:Array,value:[],observer:function(e,t){this.init()}},periodInfo:{type:Object,value:{}},insuranceInfoList:{type:Array,value:[]},yudingInfo:{type:Object,value:null},others:{type:Object,value:{}}},data:{itemListNew:[]},ready:function(){(0,D.saSendLog)("autoexpo",this)},methods:{init:function(){this.setData({itemListNew:this.properties.itemList}),console.log("this.properties.itemList",this.properties.itemList)},snHwgSpot:function(e){if("1"==e.currentTarget.dataset.snHwgSpotFlag){var t="//fe.suning.com/oversea/ziying.html";t=t.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})}},onerror:function(e){if("error"==e.type){var t=e.target.dataset.imgIndex,a=e.target.dataset.orderType,o=this.properties.itemList;o[t].productImgUrl=a&&1==a?b.default.rq_http+"res.m.suning.com/project/cart/images/css_images/mendian.png":b.default.rq_http+"res.suning.cn/images/ShoppingArea/Common/blankbg.gif","swan"==(0,S.getPlatformType)()&&this.setData({itemListNew:o}),this.triggerEvent("onerror",o)}},clickJump:function(e){var t=e.currentTarget.dataset.url;try{(0,D.saSendLog)("manuclick",{modid:e.currentTarget.dataset.modid,eleid:e.currentTarget.dataset.eleid})}catch(e){}if("38"!=e.currentTarget.dataset.btnType)t&&(t=t.replace(/^\/\//,b.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}));else{var a=e.currentTarget.dataset.omsItemId,o=this.properties.others,i=o.orderId,r=o.vendorCode,s=o.switchKey.logisticFlag;x.default._logistics({orderId:i,vendorCode:r,logisticFlag:s,omsItemId:a})}},callPhone:function(e){var t=e.currentTarget.dataset.callPhone;t&&n.makePhoneCall({phoneNumber:t})},goFourthPage:function(e){var t=e.currentTarget.dataset.partNumber,a=e.currentTarget.dataset.shop;e.currentTarget.dataset.notGoFourthPage||n.redirectTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a})}}})})),window.define("365",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{hwgCertInfo:{type:Object,value:{}},mixedObj:{type:Object,value:{}}},data:{},methods:{goHwg:function(){var e=this.properties.mixedObj.orderId;n.navigateTo({url:"/packageA/pages/order/overSeasReal/index?orderId="+e+"&type=1"})}}})})),window.define("367",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{telePay:{type:Object,value:{}}},data:{},methods:{}})})),window.define("369",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{gameRecharge:{type:Object,value:{}}},data:{show:!0},methods:{promotClick:function(){this.setData({show:!1})}}})})),window.define("371",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(328),D=(b=x)&&b.__esModule?b:{default:b},S=e(77);Component({properties:{service:{type:Object,value:{}}},data:{},methods:{clickArrow:function(e){var t=e.currentTarget.dataset.type,a=e.currentTarget.dataset.url;if("1000"==t)try{(0,S.saSendLog)("manuclick",{modid:"053",eleid:"776053001"})}catch(e){}"0"!=t&&"1000"!=t?a&&(a=a.replace(/^\/\//,D.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)})):n.navigateTo({url:a})}}})})),window.define("373",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{service:{type:Object,value:{},observer:function(e,t){}}},data:{},methods:{}})})),window.define("375",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{orderStatus:{type:Object,value:{}}},data:{},methods:{}})})),window.define("377",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(77);Component({properties:{announcement:{type:Object,value:{}}},data:{show:!1},methods:{attached:function(){!function(e){if(!e)return!0;for(var t in e)return!1;return!0}(this.properties.announcement)?this.setData({show:!0}):this.setData({show:!1})},promotClick:function(){this.setData({show:!1});try{(0,b.saSendLog)("manuclick",{modid:"043",eleid:"776043001"})}catch(e){console.log(e)}}}})})),window.define("379",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({options:{multipleSlots:!0},properties:{tabIndex:{type:String},actCode:{type:String}},data:{actCode:""},methods:{goMy:function(e){n.redirectTo({url:"/packageA/pages/cjt/my/myReward/myReward?actCode="+e.currentTarget.dataset.actcode})},goAllReward:function(e){n.redirectTo({url:"/packageA/pages/cjt/index?actCode="+e.currentTarget.dataset.actcode})}}})})),window.define("381",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({externalClasses:["sn-class"],properties:{bottom:{type:String,value:"0"},top:{type:String,value:""},width:{type:String,value:"300px"},left:{type:String,value:"0"},right:{type:String,value:"0"}},data:{},methods:{}})})),window.define("383",(function(e,t,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=e(384),S=e(25).requestPromise;Component({options:{multipleSlots:!0},properties:{actCode:{type:"string"},errorMsg:{type:"string"}},data:{sms:{show:!1,sent:!1,code:"",inputValue:"",countDown:{timer:"",countStr:"重新获取(60)",count:60},tips:"",valid:!1}},methods:{getSmsCode:function(){var e=this,t=this,o=this.data.actCode||"";this.setData(x({},"sms.sent",!0)),t.setData({"sms.countDown.count":60}),S({url:D.getSendSmsCode+"?activityCode="+o+"&smsSence=1",method:"get"}).then((function(o){var n=o.data.state;o.data.errorCode;"1"==n?t.setData({"sms.sent":!0,"sms.tips":"今日次数用完","sms.countDown.countStr":"无法获取"}):"0"==n?t.setData({"sms.sent":!1,"sms.countDown.countStr":"60s重新获取","sms.countDown.timer":a((function(){var e=Number(t.data.sms.countDown.count)-1,a=!!e;a||clearInterval(t.data.sms.countDown.timer),t.setData({"sms.sent":!a,"sms.countDown.count":e,"sms.countDown.countStr":e+"s重新获取"})}),1e3)}):"-1"==n?(t.setData({"sms.show":!1}),e.triggerEvent("action")):t.setData({"sms.sent":!0,"sms.tips":"短信验证码发送失败","sms.countDown.countStr":"无法获取"})}))},smsInput:function(e){this.setData(x({},"sms.code",e.detail.value))},smsConfirm:function(){var e=this,t=this,a=this.data.actCode||"";this.modalShow(),S({url:D.getUserSmsState+"?activityCode="+a+"&smsSence=1",method:"get"}).then((function(a){var o=a.data;o&&(0==o.state?t.setData({"sms.sent":!0,"sms.countDown.countStr":"获取验证码"}):1==o.state?t.setData({"sms.sent":!0,"sms.tips":"超出今日获取次数","sms.countDown.countStr":"无法获取"}):-1==o.state?(t.setData({"sms.show":!1}),e.triggerEvent("action")):t.setData({"sms.sent":!0,"sms.tips":"获取短信失败"}))}))},smsSubmit:function(){clearInterval(this.data.sms.countDown.timer),this.triggerEvent("action",{smcode:this.data.sms.code,flag:"fk"}),this.modalHide();this.setData(x({},"sms.code",""))},smsCancel:function(){clearInterval(this.data.sms.countDown.timer);this.setData(x({},"sms.code","")),this.modalHide()},modalShow:function(){this.setData(x({},"sms.show",!0))},modalHide:function(){this.setData(x({},"sms.show",!1))}}})})),window.define("384",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x,D,S=e(8),P=S.act+"/act-wap-web",_=(S.actwechat,D=P+"/drawGroup/public/sendSmsCode.do",(x="checkSendSmsCode")in(b={getDrawGroupList:P+"/drawGroup/gateway/getdrawGroupList.do",getTakePartPhoto:P+"/drawGroup/gateway/getTakePartPhoto.do",participateInDraw:P+"/drawGroup/gateway/participateInDraw.do",getDrawGroupCode:P+"/drawGroup/gateway/getDrawGroupCode.do",getWinnerInfo:P+"/drawGroup/gateway/getWinnerInfo.do",saveCustInfo:P+"/drawGroup/gateway/saveCustInfo.do",getMyLotteryGroupList:P+"/drawGroup/gateway/queryMyGroupList.do",getMyNonLotteryGroupList:P+"/drawGroup/gateway/queryMyGroupList.do",getUserSmsState:P+"/gateway/smscode/getUserSmsState.do",getSendSmsCode:P+"/gateway/sendSmsCode.do",checkSendSmsCode:P+"/drawGroup/public/sendSmsCode.do",getDrawDetail:P+"/drawGroup/gateway/getDetail.do",drawGroupHelp:P+"/drawGroup/public/gateway/drawGroupHelp.do",getShareTolen:P+"/drawGroup/gateway/getShareToken.do",queryWinInfo:P+"/drawGroup/gateway/queryWinInfo.do",tryMore:P+"/drawGroup/gateway/tryMore.do"})?Object.defineProperty(b,x,{value:D,enumerable:!0,configurable:!0,writable:!0}):b[x]=D,b);t.exports=_})),window.define("386",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(387),D=(b=x)&&b.__esModule?b:{default:b};function S(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}e(384);var P,_=e(77).saSendLog,k=e(8),L=e(25),R=L.requestPromise;L.saSendPageViewLog;Component({properties:{token:{type:"string"},actCode:{type:"string"},actId:{type:"string"}},data:{showMomentsImg:!1,qrCodeUrl:"",shareTitle:"",xcx_cardPic:"",xcx_savePic:"",shareOject:{isshowquan:"1",shareFriTitle:"分享到朋友圈oo",shareFriDes:"保存图片到手机后，您可以到朋友圈分享该活动oo",friIconTitle:"",friIconPic:"",hyIconTitle:"",hyIconPic:""}},lifetimes:{attached:function(){this.getCmsData(),this.getCmsData3()}},methods:{closeSelf:function(){this.triggerEvent("action")},toFriend:function(e){_("click",{event:e})},toMoments:function(e){this.setData({showMomentsImg:!0}),this.drawPic(),_("click",{event:e})},drawPic:function(){var e=this,t=n.createCanvasContext("myCanvas",e),a={src:e.data.xcx_savePic,x:0,y:0,width:680,height:700};e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){1}))}(t)}))},getQrCode:function(e,t){var a,o=this,n=k.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail",scene:String(o.data.actCode)+"?"+String(o.data.actId)+"?"+String(o.data.token)},console.log("_data",a),R({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(170,257.5,70,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){var n={src:a.data.imageUrl.replace("http://","https://"),x:200,y:375,width:280,height:280};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},saveImgToPhotosAlbumTap:function(){var e=this;n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:340*e.data.ratio,destHeight:350*e.data.ratio,success:function(t){var a,o;a=t.tempFilePath,o={filePath:a,success:function(){n.showToast({title:"保存成功",icon:"succes",duration:3e3,mask:!0}),e.closeSelf()},fail:function(e){n.showToast({title:"保存失败",duration:3e3,mask:!0,icon:"none"})}},n.saveImageToPhotosAlbum(o)}},this)},getCmsData:function(){var e=S(D.default.mark((function e(){var t,a,o,n;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=k.cms+"/api/json/cjt.json",e.prev=2,e.next=5,R({method:"GET",url:a,dataType:"json"});case 5:(o=e.sent)&&(n=t.data.shareOject,o.cjt_hyicon&&o.cjt_hyicon.tag&&o.cjt_hyicon.tag.length>0&&(n.hyIconTitle=o.cjt_hyicon.tag[0].elementName,n.hyIconPic=k.img+o.cjt_hyicon.tag[0].picUrl),o.cjt_shareFri&&o.cjt_shareFri.tag&&o.cjt_shareFri.tag.length>0&&(n.isshowquan=o.cjt_shareFri.tag[0].elementDesc,n.friIconTitle=o.cjt_shareFri.tag[0].elementName,n.friIconPic=k.img+o.cjt_shareFri.tag[0].picUrl),o.cjt_shareSave&&o.cjt_shareSave.tag&&o.cjt_shareSave.tag.length>0&&(n.shareFriTitle=o.cjt_shareSave.tag[0].elementName,n.shareFriDes=o.cjt_shareSave.tag[0].elementDesc,t.setData({shareOject:n}))),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),getCmsData3:(P=S(D.default.mark((function e(){var t,a,o;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=k.cms+"/api/json/"+t.data.actCode+t.data.actId+".json",e.prev=2,e.next=5,R({method:"GET",url:a,dataType:"json"});case 5:(o=e.sent)&&(o.cjt_shareTitle&&o.cjt_shareTitle.tag&&o.cjt_shareTitle.tag.length>0&&t.setData({shareTitle:o.cjt_shareTitle.tag[0].elementName}),o.cjt_shareCard&&o.cjt_shareCard.tag&&o.cjt_shareCard.tag.length>0&&t.setData({xcx_cardPic:k.img+o.cjt_shareCard.tag[0].picUrl}),o.cjt_z&&o.cjt_z.nodes&&o.cjt_z.nodes.length>0&&o.cjt_z.nodes.forEach((function(e,a,o){"cjt_shareLongPic"==e.modelFullCode&&e.tag&&e.tag.length>0&&t.setData({xcx_savePic:k.img+e.tag[0].picUrl})}))),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return P.apply(this,arguments)})}})})),window.define("389",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{titleData:Object,goodsData:Object},data:{imgDomain:b.host.img},methods:{gotoFourth:function(e){b.gotoFourth(e)}},ready:function(){if(!this.properties.titleData.tag)return console.log("cms配置异常：没有配置公共模块标题"),!1;if(!this.properties.goodsData.tag)return console.log("cms配置异常：没有配置公共模块商品数据"),!1;if(this.properties.goodsData.tag&&this.properties.goodsData.tag.length<6)return console.log("cms配置异常：公共模块数据小于6个"),!1;this.setData({innerData:this.properties.goodsData.tag});var e=n.getStorageSync("__CITYCODE__");b.getPrice(this,this.properties.goodsData.tag,5,e,{code:"hwg-miniPBSZY-01",detail:{errorDesc:"包税直营部分商品告罄"}})}})})),window.define("390",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(125);var b=e(8),x=e(77).saSendLog,D=function(e){return(e=e.toString())[1]?e:"0"+e};function S(e){return e>=200&&e<300||304===e}function P(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(a,o){t.success=function(e){S(e.statusCode)?a(e):o(e)},t.fail=function(e){o(e)},e(t)}))}}function _(e,t){return P(n.request)({url:e,method:"GET",data:t,header:{"Content-Type":"application/json"}})}Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(a){return t.resolve(e()).then((function(){return a}))}),(function(a){return t.resolve(e()).then((function(){throw a}))}))};var k=e(64),L=k.request,R=k.requestPromise;function A(e,t,a,o,n){a&&a.length?(t.forEach((function(e,t){var i=a[t];2==i.status?(e.asyncSellOut=!0,n&&q(n)):e.asyncPrice=i.pgPrice||i.price;var r=void 0;if(i.pgPrice?r="乐拼购":("4-1"==i.priceType&&(r="大聚惠"),"4-12"==i.priceType&&(r="掌上抢")),!r&&o&&"success"==o.serchResult&&o.activityList[t].activityInfo){var s=o.activityList[t],c={};s.activityInfo.forEach((function(e){"11"==e.activityTypeId?c[e.activityTypeId]="领券"+e.bonusList[0].bonusRulesDesc.replace(/\.00/g,""):c[e.activityTypeId]=e.bonusList[0].bonusRulesDesc.replace(/\.00/g,"")})),(c[4]||c[11]||c[14])&&(r=c[4]||c[11]||c[14])}e.asyncLabel=r})),e.setData({innerData:t})):console.error("查询价格异常")}function j(e){x("manuclick",{modid:e.currentTarget.dataset.modid||"",eleid:e.currentTarget.dataset.eleid||"",evdl:e.currentTarget.dataset.evdl||"",tar:e.currentTarget.dataset.tar||""})}var O=e(16)._snBusError;function q(e){O.bizExcp({bid:"hwg",error_code:e.code,error_detail:JSON.stringify(e.detail),error_type:2})}t.exports={formatTime:function(e){var t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return[t,a,o].map(D).join("/")+" "+[n,i,r].map(D).join(":")},postRequest:function(e,t){return P(n.request)({url:e,method:"POST",data:t,header:{"content-type":"application/x-www-form-urlencoded"}})},getRequest:_,request:L,requestPromise:R,wxLogin:function(){return P(n.login)},wxGetSystemInfo:function(){return P(n.getSystemInfo)},jsonp2json:function(e){var t=!1,a=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/^.*?\(\s{0,}/,"").replace(/\);?$/,"");try{t=JSON.parse(a)}catch(e){console.error(e),t=a}return t},dealCmsData:function(e){var t=[];try{return e.data.forEach((function(e){var a=Object.keys(e),o={};a.forEach((function(t){e[t]&&e[t].tag?o[t]=e[t].tag:o[t]=[]})),o.template=a.join("_"),t.push(o)})),t}catch(e){return console.log(e),[]}},filterNavTitle:function(e){var t=e.filter((function(e){return e.template&&"wx_title"===e.template}));return t[0].wx_title&&t[0].wx_title[0]&&t[0].wx_title[0].elementName&&t[0].wx_title[0].elementName.slice(0,5)},filterData:function(e,t){return e.filter((function(e){return e.template&&e.template===t}))[0]},dealGoodsData:A,getPrice:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"025",n=arguments[4],i=[],r=[];t.forEach((function(e){i.push(e.partnumber.padStart(18,"0")),r.push(e.shopCode.padStart(10,"0"))}));var s=b.nhwg+"/nhwg-web/priceandpromotion/getPriceAndPromotion_"+i.join(",")+"_"+o+"_"+a+"_"+r.join(",")+"__.html";_(s,{}).then((function(t){var a=e.data.innerData,o=t.data.price,i=t.data.promotion||t.data.promotionNonMember;A(e,a,o,i,n)}))},gotoFourth:function(e){console.log(e),j(e);var t=e.currentTarget.dataset.partnumber,a=e.currentTarget.dataset.shopcode;n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&title="})},baseJump:function(e){if(/^(appid)[^(0-9a-z)]wx[0-9a-z]{16}$/gi.test(e)){-1!=e.indexOf("=")&&(e=e.split("=")[1]),-1!=e.indexOf(":")&&(e=e.split(":")[1]),console.log("小程序之间跳转");try{n.navigateToSmartProgram({appId:e,success:function(e){console.log("success")},fail:function(e){console.log(e),console.log("fail")}})}catch(e){}}else if(/^(appid)[^(0-9a-z)]wx[0-9a-z]{16}\#\#(\/pages\/).*[0-9a-z]$/gi.test(e)){var t=e.split("##")[0],a=e.split("##")[1];-1!=t.indexOf("=")&&(t=t.split("=")[1]),-1!=t.indexOf(":")&&(t=t.split(":")[1]),console.log("小程序之间跳转_带path"),n.navigateToSmartProgram({appId:t,path:a,success:function(e){console.log("success")},fail:function(e){console.log(e),console.log("fail")}})}else/^\/pages\/.*/i.test(e)?(console.log("小程序内跳转"),n.navigateTo({url:e}),console.log(e)):console.log("维护错误")},SA:j,host:b,snBusError:q}})),window.define("392",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390),x=e(8);Component({properties:{likeTitle:null},data:{goodsData:[]},methods:{init:function(){var e=this;this.setData({likeTitle:this.properties.likeTitle.tag?this.properties.likeTitle.tag[0].elementName:""}),this.getData().then((function(t){var a=t.data.sugGoods;a&&a[0]&&a[0].skus&&(a[0].skus.length%2>0&&a[0].skus.pop(),a[0].skus.length>0&&e.setData({goodsData:a[0].skus}))}))},getData:function(){var e=x.tuijian+"/recommend-portal/dyBase.jsonp";return b.getRequest(e,{u:n.getStorageSync("custNo"),c:"",sceneIds:"9-92",cityId:n.getStorageSync("__CITYCODE__"),count:100})},gotoFourth:function(e){b.gotoFourth(e)}},ready:function(){this.init()}})})),window.define("394",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390),x=e(8);Component({properties:{pgTitle:Object,pgGoods:Object},data:{indicatorDots:!1,autoplay:!1,circular:!0,interval:5e3,duration:1e3,current:1,imgDomain:b.host.img},methods:{init:function(){var e=this;this.setData({pgTitle:this.properties.pgTitle.tag||[]});var t=this.properties.pgGoods.tag||[];if(t.length<3)return this.setData({pgGoods:[]});t.length>9&&(t=t.slice(0,9)),this.getData(t).then((function(t){var a=t[0].data,o=t[1].data;e.setData({pgGoods:e.templateData(a,o)})})).catch((function(t){e.setData({pgGoods:[]})}))},sa:function(e){b.SA(e)},getData:function(e){var t=[],a=[];e.forEach((function(e,o){t.push(e.wpelementDesc),a.push(e.partnumber.padStart(18,"0"))}));var o=x.pgs+"/pgs/act/batchGetActivity_"+t.join("-")+".json",n=x.pgs+"/pgs/act/getSaleStore_"+a.join("-")+".json",i=b.getRequest(o,{}),r=b.getRequest(n,{});return Promise.all([i,r])},templateData:function(e,t){var a=this,o=[];if(e&&t&&"1"==e.code&&"1"==t.code&&e.data.length==t.data.length){var n=[];e.data.forEach((function(e,i){e.itemName&&Number.isFinite(e.price)&&Number.isFinite(e.memberNum)&&t.data[i]&&Number.isFinite(t.data[i].saledStore)&&n.push({actId:e.actId,name:e.itemName,price:e.price,member:e.memberNum,sale:a.saleDeal(t.data[i].saledStore),singlePrice:e.singlePrice,imgUrl:e.imgUrl,itemCode:e.itemCode,vendorCode:e.vendorCode}),3==n.length&&(o.push(n),n=[])}))}return o},saleDeal:function(e){return e>9999?Math.floor(e/1e3)/10+"万":e},swiperChange:function(e){this.setData({current:e.detail.current+1})}},ready:function(){this.init()}})})),window.define("396",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{titleData:Object,goodsData:Object},data:{imgDomain:b.host.img},methods:{gotoFourth:function(e){b.gotoFourth(e)}},ready:function(){if(!this.properties.titleData.tag)return console.log("cms配置异常：没有配置优选推荐模块标题"),!1;if(!this.properties.goodsData.tag)return console.log("cms配置异常：没有配置优选推荐模块商品数据"),!1;if(this.properties.goodsData.tag&&this.properties.goodsData.tag.length<6)return console.log("cms配置异常：公共模块数据小于6个"),!1;this.setData({innerData:this.properties.goodsData.tag});var e=n.getStorageSync("__CITYCODE__");b.getPrice(this,this.properties.goodsData.tag,5,e,{code:"hwg-miniPYXTJ-01",detail:{errorDesc:"优选推荐商品告罄"}})}})})),window.define("398",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{leftImg:Object,quanlist:Object},data:{imgDomain:b.host.img},methods:{init:function(){this.setData({leftImg:this.properties.leftImg.tag||[],quanlist:this.properties.quanlist.tag||[]})},sa:function(e){b.SA(e)}},ready:function(){this.init()}})})),window.define("400",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{adTitle:null,adOne:Object,adTwo:Object},data:{imgDomain:b.host.img},methods:{init:function(){this.setData({adTitle:this.properties.adTitle.tag?this.properties.adTitle.tag[0].elementName:"",adOne:this.properties.adOne.tag||[],adTwo:this.properties.adTwo.tag||[]})},sa:function(e){b.SA(e)}},ready:function(){this.init()}})})),window.define("402",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390),x=e(8),D=e(25).checkLogin;i();Component({properties:{newerTitle:null,newerOne:Object,newerTwo:Object},data:{isNewer:!1,imgDomain:b.host.img},methods:{init:function(){this.setData({newerTitle:this.properties.newerTitle.tag?this.properties.newerTitle.tag[0].elementName:"",newerOne:this.properties.newerOne.tag||[],newerTwo:this.properties.newerTwo.tag||[]});var e=this;D().then((function(){e.isNewmember().then((function(t){t&&"0"==t.code&&"0"==t.channelAndDeptNewmember&&e.setData({isNewer:!0})}))})).catch((function(){e.setData({isNewer:!0})}))},isNewmember:function(e){var t=x.xinren+"/json/getChannelAndDeptNewmember.do?channelType=9&deptIds=hwg";return b.requestPromise({url:t,method:"GET",dataType:"jsonp"})},sa:function(e){b.SA(e)}},ready:function(){this.init()}})})),window.define("404",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{promiseData:Object},data:{promiseImg:"",imgDomain:b.host.img},methods:{init:function(){this.setData({promiseImg:this.properties.promiseData})},jumpUrl:function(e){b.SA(e),b.baseJump(e.target.dataset.url)}},ready:function(){this.init()}})})),window.define("406",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390);Component({properties:{bannerData:Object},data:{banners:"",bannerdots:[],dotshow:!1,imgDomain:b.host.img},methods:{init:function(){this.setData({banners:this.properties.bannerData.tag,bannerdots:this.setBannerIcon(this.properties.bannerData.tag),dotshow:this.setBannerIcon(this.properties.bannerData.tag).length>1})},setBannerIcon:function(e){var t=e.length,a=[];if(t>1)for(var o=0;o<t;o++)0==o?a.push("on"):a.push("");return a},listenSwiper:function(e){var t=this.data.bannerdots.fill("").fill("on",e.detail.current,e.detail.current+1);this.setData({bannerdots:t})},jumpUrl:function(e){b.SA(e),b.baseJump(e.target.dataset.url)}},ready:function(){this.init()}})})),window.define("408",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromiseWx,D=(b.toFixed,e(17)),S=e(276),P=e(135),_=e(19).getLocation;Component({properties:{counponid:{type:"string"}},data:{carListShow:!1,cartProductList:[],totalCount:0,totalPrice:0,difference:0,finish:!1},lifetimes:{attached:function(){this.getCarListData()}},pageLifetimes:{show:function(){this.getCarListData()}},methods:{tapChange:function(e){},handleTouchStart:function(e){this.startX=e.touches[0].pageX},handleTouchEnd:function(e){var t=this.data.cartProductList,a=e.currentTarget.dataset.index,o=e.changedTouches[0].clientX;this.startX-o<30?t[a].movex=0:t[a].movex=-62,t.forEach((function(e,t){t!=a&&(e.movex=0)})),this.setData({cartProductList:t})},getCarListData:function(){var e=this;_().then((function(t){var a=t.cityLESId||"10";e.setData({cityObj:{cityName:t.cityName,provinceMDMId:t.provinceMDMId,districtMDMId:t.districtMDMId,cityMDMId:t.cityMDMId}});var o=D.quan.showCart+"?provCode="+t.provinceMDMId+"&cityCode="+a+"&distCode="+a+"01&actId="+e.data.counponid+"&channelType=05&operationEquipment=06";console.log("查询购物车接口：",o),e.getDatas(o).then((function(t){"1"==t.code?e.dealCartList(t.data,!1):console.log("查询购物车接口请求错误",t)}))}))},dealCartList:function(e,t){var a=this,o=e.productList,n=e.discountInfos,i=e.needPayAmount,r=e.promotionAmount,s=new Array,c=0,d=0,u=!1,l=0,g=0;"1"==e.actStatus?(t||(o.forEach((function(e){n.forEach((function(t){t.cmmdtyLineInfos.forEach((function(t){e.itemNo==t.itemNo&&t.allocatedAmount>0?(e.mjLabel=!0,s.push(t.allocatedAmount)):e.mjLabel=!1})),t.discountDetailInfo.promotionId==a.data.counponid&&("1"==t.discountDetailInfo.status?u=!0:(u=!1,l=t.discountDetailInfo.distanceValue,t.discountDetailInfo.distanceValue,g="1"==t.discountDetailInfo.bonusClassifierType?"元":"3"==t.discountDetailInfo.bonusClassifierType?"件":"元"))})),e.cmmdtyQty=Number(e.cmmdtyQty),e.maxQty=Number(e.maxQty),c+=Number(e.cmmdtyQty)})),s.forEach((function(e){d+=Number(e)})),c=c>99?"99+":c),this.setData({cartProductList:o,totalPrice:i,productCount:c,reducePrice:d,canRudece:u,distanceValue:l,cartReducePrice:r,distanceValueUint:g})):this.setData({cartProductList:[],productCount:0,totalPrice:0,reducePrice:0}),console.log(this.data.cartProductList)},showCarList:function(){this.setData({carListShow:!this.data.carListShow})},addMinipCmmdty:function(e){console.log("新版加入购物车",e);var t=this;console.log(e,99996666),S.addCart(e).then((function(e){if(n.hideLoading(),!(!e||!e.data||"Y"!=e.data.cartHeadInfo.isSuccess))P.showToast({title:" 加入成功 "}),t.getCarListData();else{var a=!1;try{a=e.msg||e.data.errorInfos[0].errorMessage}catch(e){}P.showToast({title:a||" 加入失败 "}),t.getCarListData()}}))},countChangeJug:function(e){var t=e.currentTarget.dataset;if(!("reduce"==t.kind&&t.itemdata.cmmdtyQty>1||"add"==t.kind&&t.itemdata.cmmdtyQty<t.itemdata.maxQty))return!1;this.countChange(t)},countChange:function(e){var t=this,a=void 0;if("delete"==e.kind)a=D.quan.updateCart+"?itemNo="+e.itemno+"&quantity=&operaType=02&actId="+t.data.counponid+"&channelType=05&operationEquipment=06";else{n.showLoading({title:"请稍候",mask:!0});var o=e.count;"add"==e.kind?o++:o--,console.log("更新购物车商品数量",o),a=D.quan.updateCart+"?itemNo="+e.itemno+"&quantity="+o+"&operaType=01&actId="+t.data.counponid+"&channelType=05&operationEquipment=06"}console.log("购物车商品增删接口",a),t.getDatas(a).then((function(e){n.hideLoading(),"1"==e.code?t.dealCartList(e.data,!1):console.log("更新购物车接口请求错误",e)}))},gotoCart:function(){this.triggerEvent("action")},closeSelf:function(){this.setData({carListShow:!1})},forbidenClose:function(){},getDatas:function(e){return new Promise((function(t,a){return x({url:e}).catch((function(e){})).then((function(e){var o=e.data;e.statusCode<400?t(o):a(o)}))}))}}})})),window.define("410",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(54),S=(x=D)&&x.__esModule?x:{default:x};var P=e(17),_=e(25),k=_.requestPromiseWx;_.extend;Component({properties:{subsData:{type:"object"}},data:{},lifetimes:{attached:function(){console.log(this.data.subsData,789),this.getSubsGoodsData(this.data.subsData)}},methods:{getSubsGoodsData:function(e){var t="",a=[],o=this;this.setData({price:e.price.join("."),imageSrc:e.image}),0==e.quanType?t="2":1==e.quanType&&(t="1");var n=""+P.quan.subCodeNew+e.cmmdtyCode+"_"+e.shopCode+"_"+t+"-"+e.cityId+"-5-"+e.couponid+"_"+t+"-subCodeCallback";console.log("通子码商品请求地址",n),o.getDatas(n).then((function(e){e&&e.rs&&e.rs.length&&(a=e.rs,o.dealSubsArr(a),o.setData({showSubsGoods:!0,requestSubsArr:a}))}))},dealSubsArr:function(e){var t,a=this,o={},n={};console.log("通子码商品数据",e),e.forEach((function(e){var t=[];e.characterList.forEach((function(e){var a=e.characterId+e.characterValueId;t.push(a),n[a]=e.characterValueDisplayName}));var i=a.arrSort(t).join("-");o[i]=e})),t=a.multidimensional(e),this.setData({subsObj:o,saveSubsArr:t,subsArr:t,subsNameObj:n}),console.log(o,t,n,7777)},multidimensional:function(e){var t=[],a={};for(var o in e.forEach((function(e){e.characterList.forEach((function(e){e.canSelect=!0,a[e.characterId]=a[e.characterId]?a[e.characterId]:[],a[e.characterId].push(e)}))})),a)t.push(this.duplicateRemoval(a[o],"characterValueId"));for(var n=0;n<t.length-1;n++)for(var i=0;i<t.length-n-1;i++)if(t[i][0].characterId>t[i+1][0].characterId){var r=t[i];t[i]=t[i+1],t[i+1]=r}return t},subsSelect:function(e){console.log(e.target.dataset,88888);var t=this.data.subsArr,a=this.data.subsObj,o=this.data.subsNameObj,n=e.target.dataset,i=this.data.selectValueIdArr||[],r="",s=[],c=[],d=[];t[n.index].forEach((function(e){e.characterValueId==n.valueid?(e.isSelected=!e.isSelected,e.isSelected?i[n.index]=e.characterId+e.characterValueId:i.splice(n.index,1,"")):e.isSelected=!1})),console.log(t,a,i,789789),r=n.isselected?"":""+n.characterid+n.valueid,console.log(i,444444),i.forEach((function(e){e&&(d.push(e),c.push(o[e]))}));var u=this.arrSort(d).join("-");if(""==r){for(var l in a)l.indexOf(u)>-1&&s.push(a[l]);var g=this.multidimensional(s);t.forEach((function(e,t){t==n.index?e.forEach((function(e){var t=!1;g.forEach((function(a,o){o==n.index&&a.forEach((function(a){e.characterId==a.characterId&&e.characterValueId==a.characterValueId&&(t=!0)}))})),t?e.canSelect=!0:(e.canSelect=!1,e.isSelected=!1)})):e.forEach((function(e){e.canSelect=!0}))}))}else{for(var p in a)p.indexOf(r)>-1&&s.push(a[p]);console.log(this.multidimensional(s),9966);var h=this.multidimensional(s);t.forEach((function(e,t){t!=n.index&&e.forEach((function(e){var t=!1;h.forEach((function(a,o){o!=n.index&&a.forEach((function(a){e.characterId==a.characterId&&e.characterValueId==a.characterValueId&&(t=!0)}))})),t?e.canSelect=!0:(e.canSelect=!1,e.isSelected=!1)}))}))}this.setData({subsArr:t,selectValueIdArr:i,subsSelectName:c,imageSrc:a[u]&&a[u].dynamicImage||this.data.imageSrc,price:a[u]&&a[u].price||this.data.price})},subsEnter:function(){console.log("选择完毕",111);var e=this.data.subsArr,a=this.data.subsObj,o=[],n=[];if(e.forEach((function(e){var t="",a=!1;e.forEach((function(e){e.isSelected&&(a=!0,o.push(e.characterId+e.characterValueId)),t=e.characterDisplayName})),a||n.push(t)})),0==n.length){var r=new Object,s=this.arrSort(o).join("-");console.log(s,a,343434);var c=a[s].partNumber,d=a[s].businessCode;r.cmmdtyCode=c,r.shopCode=d,r.detect=S.default.getTrack()||"",console.log("选择完毕的子码编码(加购入参)",d+"-"+c),this.triggerEvent("subsenter",r),this.closeSelf()}else{var u=n.join(",");i.showLoading({title:"请选择"+u,mask:!0}),t((function(){i.hideLoading()}),2e3)}},closeSelf:function(){this.triggerEvent("action")},forbidenClose:function(){},arrSort:function(e){for(var t=0;t<e.length-1;t++)for(var a=0;a<e.length-t-1;a++)if(e[a]>e[a+1]){var o=e[a];e[a]=e[a+1],e[a+1]=o}return e},duplicateRemoval:function(e,t){var a=new Object,o=new Array;return e.forEach((function(e){var n=e[t]+"";a[n]||(a[n]=e,o.push(e))})),o},getDatas:function(e){return new Promise((function(t,a){return k({url:e}).catch((function(e){})).then((function(e){var o=e.data;e.statusCode<400?t(o):a(o)}))}))}}})})),window.define("412",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{},data:{},methods:{clickFn:function(){n.switchTab({url:"/pages/index/index"})}}})})),window.define("414",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({})})),window.define("416",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({})})),window.define("418",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{expressReview:Object,user:Object},attached:function(){console.log(this.data.user)}})})),window.define("420",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{installReview:Object,user:Object}})})),window.define("422",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{type:Number,name:String}})})),window.define("424",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{storeReviews:Array,user:Object},data:{shopComment:"",guideComment:"",cashierComment:""},attached:function(){var e=void 0,t=void 0,a=void 0;this.data.storeReviews.forEach((function(o){4==o.type?e=o:5==o.type?t=o:6==o.type&&(a=o)})),this.setData({shopComment:e,guideComment:t,cashierComment:a})}})})),window.define("426",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{rewardContent:String}})})),window.define("428",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{product:Object},data:{price:"",imgUrl:""},attached:function(){var e=this.data.product.payMoney.toString().split(".");this.setData({price:[e[0],e[1]],imgUrl:"https:"+this.data.product.productImgUrl.split(".webp")[0]})},methods:{handleError:function(){1==this.data.product.orderType&&this.setData({imgUrl:"http://image2.suning.cn/uimg/cms/img/153812377017769226.png"})},goFourthPage:function(){var e=this.data.product,t=e.targetid,a=e.shopId,o=e.shopType;"1"==e.orderType?n.showModal({title:"提示",content:"该商品暂不支持查看",showCancel:!1}):"1"==o||"2"==o||"501"==o?(console.log("/pages/fourth/fourth?productId="+t+"&shop=0000000000&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop=0000000000&disablePg=1"})):(console.log("/pages/fourth/fourth?productId="+t+"&shop="+a+"&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a+"&disablePg=1"}))}}})})),window.define("430",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(8),x=e(25).requestPromise;Component({properties:{video:Object},data:{showVideoFlag:!1,videoSrc:""},methods:{showVideo:function(){var e=this,t=this.data.video.channelWebId,a=b.review+"/mobile/getPlayUrl.do?channelWebId="+t+"&deviceType=2";x({url:a}).then((function(t){e.setData({videoSrc:t.url,showVideoFlag:!0}),i().globalData.reviewList.hideTab(),i().globalData.doneReviewList.hideTop()}))},hideVideo:function(){this.setData({showVideo:!1,showVideoFlag:!1}),i().globalData.reviewList.showTab(),i().globalData.doneReviewList.showTop()}}})})),window.define("432",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(8);Component({properties:{images:Array,review:Object,user:Object},data:{imgHost:b.img,showImages:[],currentIndex:0,showAlbumFlag:!1},attached:function(){this.setData({showImages:this.data.images.slice(0,3)}),console.log(this.data.review)},methods:{showAlbum:function(e){i().globalData.reviewList.hideTab(),i().globalData.doneReviewList.hideTop(),this.setData({currentIndex:e.currentTarget.dataset.index,showAlbumFlag:!0})},closeAlbum:function(){i().globalData.reviewList.showTab(),i().globalData.doneReviewList.showTop(),this.setData({showAlbumFlag:!1})},changeImg:function(e){this.setData({currentIndex:e.detail.current})}}})})),window.define("434",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{content:String}})})),window.define("436",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{labels:Array}})})),window.define("438",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{starCount:Number,publishTime:String},data:{publishDate:""},attached:function(){this.setData({publishDate:this.data.publishTime.split(" ")[0]})}})})),window.define("440",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{user:Object},data:{imgUrl:""},attached:function(){var e=void 0;e=/^\/\//.test(this.data.user.imgUrl)?"https:"+this.data.user.imgUrl:""+this.data.user.imgUrl,this.setData({imgUrl:e})}})})),window.define("442",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Component({properties:{user:Object,doneReview:Object}})})),window.define("444",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25).requestPromise,x=e(8);Component({data:{doneReviews:[],noMore:!1,page:1,empty:!1,loading:!1,screenH:0,scrollTop:0,showToTop:!1,showTopFlag:!0},attached:function(){var e=this;i().globalData.doneReviewList=this,n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight)})}})},methods:{toast:function(e){n.showToast({title:e,icon:"none"})},resetList:function(){this.setData({page:1,noMore:!1,empty:!1,doneReviews:[]}),this.getDoneReviews()},getDoneReviews:function(){var e=this;this.data.loading=!0,n.showLoading({title:"加载中",mask:!0}),b({url:x.review+"/mobile/getMyProductAndServiceReviews/"+this.data.page+"-.do"}).then((function(t){e.data.loading=!1,t&&1==t.returnCode?t.doneReviews?t.doneReviews.length<15?1==e.data.page&&0==t.doneReviews.length?e.setData({empty:!0}):e.setData({doneReviews:e.data.doneReviews.concat(t.doneReviews),noMore:!0}):e.setData({doneReviews:e.data.doneReviews.concat(t.doneReviews),page:++e.data.page}):1==e.data.page?e.setData({empty:!0}):e.setData({noMore:!0}):toast("系统繁忙，请稍后再试"),n.hideLoading()})).catch((function(){e.data.loading=!1,n.hideLoading(),toast("系统繁忙，请稍后再试")}))},loadMore:function(){this.data.empty||this.data.noMore||this.data.loading||this.getDoneReviews()},onTapMove:function(){this.setData({scrollTop:0})},scroll:function(e){var t=e.detail.scrollTop;this.setData({showToTop:t>1*this.data.screenH})},showTop:function(){this.setData({showTopFlag:!0})},hideTop:function(){this.setData({showTopFlag:!1})}}})})),window.define("446",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(447),D=(b=x)&&b.__esModule?b:{default:b},S=e(16);var P=e(8),_=e(25),k=_.requestPromise,L=_.checkLogin,R=i();var A=e(19).getLocation;function j(e,t,a,o){A().then((function(i){var r=n.getStorageSync("custNo")||"",s=n.getStorageSync("cookieObj")&&n.getStorageSync("cookieObj").custLevel||"";S._snBusError.bizExcp({bid:"review",error_code:e||"",error_detail:'{"errorDesc": "'+(a||"")+"_"+(o||"")+'"}',error_type:"2",member_id:r,member_level:s,region:i.cityLESId||"025",type_name:t||""})}))}var O=1,q=!1,M=!1,F=[];Component({data:{showToTop:!1,scrollTop:"",screenH:0,screenW:0,isLoading:!1,reviewList:[],reviewListFlag:1,imgHost:"",isShowBottom:!1,hasLoaded:!1},attached:function(){this.getSystemInfo()},methods:{resetList:function(){var e=this;O=1,q=!1,M=!1,F=[],n.showLoading({title:"加载中",mask:!0}),console.log(R.globalData.isLogin),L().then((function(){(0,D.default)().then((function(){e.getReviewList()})).catch((function(){}))}))},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},goFourthPage:function(e){if("true"!=e.target.dataset.ispublishbutton){var t=e.currentTarget.dataset,a=t.id,o=t.shop,i=(t.title,t.shoptype);"1"==t.orderonlineflag?n.showModal({title:"提示",content:"该商品暂不支持查看",showCancel:!1}):"1"==i||"2"==i||"501"==i?(console.log("/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"})):(console.log("/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"}))}},goPublishPage:function(e){var t=e.currentTarget.dataset;n.navigateTo({url:"/packageA/pages/review/publish/publish?omsorderItemId="+t.omsorderitemid+"&orderid="+t.orderid+"&partNumber="+t.id+"&isAdultProduct="+t.isadultproduct})},getReviewList:function(){var e=this;n.showLoading({title:"加载中",mask:!0}),e.setData({isLoading:!0});var t;t=P.review+"/wap/store/myPendReviewListEdit.do?orderType=2&currentPage="+O+"&callback=myPendReviewList",k({method:"GET",url:t,dataType:"jsonp"}).then((function(t){if("0"!==t.returnCode&&j("review-dpsp-20008","待评信息接口返回异常",t.returnCode,t.errorMsg),t.orderList&&t.orderList.length>0){1===O&&(F=[]);var a=0;t.orderList.forEach((function(e,t,o){e.orderTime=e.orderTime.split(" ")[0],e.orderItemList.forEach((function(e,t,o){a++,e.partNumber=("0000000000000000"+e.partNumber).substr(-18),0!=e.productImgUrl.indexOf("http")&&(e.productImgUrl="https:"+e.productImgUrl)})),F.push(e)})),console.log(a),a<15&&(q=!0,e.setData({isShowBottom:!0})),e.setData({reviewList:F,reviewListFlag:2,imgHost:P.img})}else M&&(q=!0,e.setData({isShowBottom:!0})),M||e.setData({reviewListFlag:3});n.hideLoading(),e.setData({isLoading:!1})})).catch((function(e){j("review-dpsp-20008","待评信息接口返回异常","","网络异常"),n.hideLoading()}))},goguangguang:function(){console.log("aaa"),n.switchTab({url:"/pages/index/index"})},errorFunction:function(e){console.log(e);var t="reviewList["+e.currentTarget.dataset.index1+"].orderItemList["+e.currentTarget.dataset.index2+"].productImgUrl";this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,"https://image2.suning.cn/uimg/cms/img/153812377017769226.png")),console.log(this.data)},onTapMove:function(){this.setData({scrollTop:0})},loadMore:function(){this.data.isLoading||q||(O++,this.getReviewList(),M=!0)},scroll:function(e){var t=e.detail.scrollTop;this.setData({showToTop:t>1*this.data.screenH})}}})})),window.define("447",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b,x=e(78),D=(b=x)&&b.__esModule?b:{default:b},S=e(38);a.default=function(){return new Promise((function(e,t){if(!(0,D.default)().custno)return(0,S.doLogin)().then((function(t){return e(t)})).catch((function(e){return t(e)}));e()}))}})),window.define("808",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(23),D=e(447),S=(b=D)&&b.__esModule?b:{default:b},P=e(16);var _=e(8),k=e(135),L=e(694).reviewSeo,R=e(25),A=R.requestPromise,j=R.checkLogin,O=e(77).saSendLog,q=e(19).getLocation;function M(e,t,a,o){q().then((function(i){var r=n.getStorageSync("custNo")||"",s=n.getStorageSync("cookieObj")&&n.getStorageSync("cookieObj").custLevel||"";P._snBusError.bizExcp({bid:"review",error_code:e||"",error_detail:'{"errorDesc": "'+(a||"")+"_"+(o||"")+'"}',error_type:"2",member_id:r,member_level:s,region:i.cityLESId||"025",type_name:t||""})}))}Page({data:{saPgnm:"pgcate=10009;tag=100052;pgtitle=Wap评价聚合页",showToTop:!1,scrollTop:"",screenH:0,screenW:0,isLoading:!1,goodScore:"",currentIndex:0,currentSignIndex:-1,showVideo:!1,videoSrc:"",reviewSign:[],reviewList:[],filterFlag:!1,filterCheckedFlag:!1,imgHost:_.img,reviewCntList:[{name:"全部评价",num:"",type:"total"},{name:"最新",num:"",type:"newest"},{name:"有图",num:"",type:"picFlag"},{name:"好评",num:"",type:"good"},{name:"中评",num:"",type:"normal"},{name:"差评",num:"",type:"bad"},{name:"追评",num:"",type:"again"},{name:"视频",num:"",type:"smallVideo"}],showAlbum:!1,album:{currentIndex:0,currentReviewImgs:[],currentReviewItem:{}},pageid:"review",curPage:1,curType:"total",isSignTye:!1,g_signDes:"",g_isFinish:!1,g_reviewMap:{},g_reviewList:[],cmmdtyType:"",originaliCmmdtyType:"",cmmdtyValue:"",shopId:"",clusterId:""},autoclick:function(e){O("click",{event:e})},onShow:function(){O("pageview")},onLoad:function(e){this.data.cmmdtyType=e.cmmdtyType,this.data.originaliCmmdtyType=e.cmmdtyType,this.data.cmmdtyValue=e.cmmdtyValue,this.data.shopId=e.shopId,this.data.clusterId=e.clusterId,console.log("cmmdtyType:"+this.data.cmmdtyType),console.log("cmmdtyValue:"+this.data.cmmdtyValue),console.log("shopId:"+this.data.shopId),console.log("clusterId:"+this.data.clusterId),"swan"==(0,x.getPlatformType)()&&L(e.title);var t=Boolean(this.data.clusterId),a=this;a.setData({filterFlag:t}),t?A({url:_.review+"/mobile/checkSwitch.do",dataType:"jsonp"}).then((function(e){e&&1==e.returnCode?a.filterCurrentProduct():(a.getSystemInfo(),a.getReviewCnt(),a.getReviewSign(),a.getReviewList())})):(this.getSystemInfo(),this.getReviewCnt(),this.getReviewSign(),this.getReviewList())},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},getReviewCnt:function(){var e=this;A({url:_.review+"/mobile/getClusterReviewCnt/"+[this.data.cmmdtyType,this.data.clusterId,this.data.cmmdtyValue,this.data.shopId].join("-")+"-----.htm"}).then((function(t){if(t&&1==t.returnCode){if(t&&t.reviewCounts&&t.reviewCounts[0]){var a=t.reviewCounts[0],o=a.totalCount>999999?999999:a.totalCount,n=a.fiveStarCount+a.fourStarCount;n=n>999999?999999:n;var i=a.threeStarCount+a.twoStarCount;i=i>999999?999999:i;var r=a.oneStarCount>999999?999999:a.oneStarCount,s=0;0==o?s=100:((s=100-Math.round(r/o*100)-Math.round(i/o*100))<=0&&(s=0,n>0&&(s=1)),100==s&&r+i>=1&&(s=99));var c=[{name:"全部评价",num:a.totalCount,type:"total"},{name:"最新",num:-1,type:"newest"},{name:"有图",num:a.picFlagCount,type:"picFlag"},{name:"好评",num:a.fiveStarCount+a.fourStarCount,type:"good"},{name:"中评",num:a.threeStarCount+a.twoStarCount,type:"normal"},{name:"差评",num:a.oneStarCount,type:"bad"},{name:"追评",num:a.againCount,type:"again"},{name:"视频",num:a.smallVideoCount,type:"smallVideo"}];a.installCount-0>0&&c.push({name:"安装",num:a.installCount,type:"install"}),e.setData({goodScore:s+"%",reviewCntList:c})}}else M("review-pjjh-20042","簇商品普通标签接口异常",t.returnCode,t.returnMsg)})).catch((function(){console.log("获取评价数失败"),M("review-pjjh-20042","簇商品普通标签接口异常","","网络异常")}))},getReviewSign:function(){var e=this;A({url:_.review+"/mobile/getClusterCmmdtyLabels/"+[this.data.cmmdtyType,this.data.clusterId,this.data.cmmdtyValue,this.data.shopId].join("-")+"-----.htm"}).then((function(t){if(t&&1==t.returnCode){if(t&&t.commodityLabelCountList){var a=t.commodityLabelCountList;e.setData({reviewSign:a})}}else M("review-pjjh-20043","簇商品用户选择标签接口异常",t.returnCode,t.returnMsg),e.setData({reviewSign:[]})})).catch((function(){console.log("获取评价数失败"),M("review-pjjh-20043","簇商品用户选择标签接口异常","","网络异常"),e.setData({reviewSign:[]})}))},getReviewList:function(){var e=this;n.showLoading({title:"加载中",mask:!0}),e.setData({isLoading:!0});var t="";t=this.data.isSignTye?_.review+"/mobile/reviewsClusterByLables/"+[this.data.cmmdtyType,this.data.clusterId,this.data.cmmdtyValue,this.data.shopId,"total",this.data.curPage,this.data.g_signDes,10].join("-")+"-.htm":_.review+"/mobile/getClusterReviewList/"+[this.data.cmmdtyType,this.data.clusterId,this.data.cmmdtyValue,this.data.shopId,this.data.curType,this.data.curPage,"default",10].join("-")+"-----.htm",A({url:t}).then((function(t){if(1==t.returnCode){if(t.commodityReviews)(function(e){return new Promise((function(t,a){if(0!=e.length){var o=[],n={};e.map((function(e){e.publishTime=e.publishTime.split(" ")[0],o.push(e.commodityReviewId),n[e.commodityReviewId]=e})),A({url:_.review+"/ajax/useful_count/ "+o+"-.htm",dataType:"jsonp"}).then((function(a){1==a.returnCode&&(a.reviewUsefuAndReplylList.forEach((function(e){n[e.commodityReviewId].usefulCnt=e.usefulCount})),t(e))}))}else t(e)}))})(t.commodityReviews).then((function(t){t.length<10&&(e.data.g_isFinish=!0),1===e.data.curPage&&(e.data.g_reviewList=[],e.data.g_reviewMap={}),t.forEach((function(t){e.data.g_reviewList.push(t),e.data.g_reviewMap[t.commodityReviewId]=t})),e.setData({reviewList:e.data.g_reviewList,isLoading:!1}),n.hideLoading()}));else if(t.doneInstallReviews){var a=t.doneInstallReviews;a.forEach((function(e){e.createTime=e.createTime.split(" ")[0]})),a.length<10&&(e.data.g_isFinish=!0),1===e.data.curPage&&(e.data.g_reviewList=[],e.data.g_reviewMap={}),a.forEach((function(t){e.data.g_reviewList.push(t),e.data.g_reviewMap[t.commodityReviewId]=t})),e.setData({reviewList:e.data.g_reviewList,isLoading:!1}),n.hideLoading()}}else n.hideLoading(),e.data.isSignTye?M("review-pjjh-20045","簇商品用户选择标签聚合列表接口异常",t.returnCode,t.returnMsg):M("review-pjjh-20044","簇商品普通标签聚合列表接口异常",t.returnCode,t.returnMsg)})).catch((function(t){n.hideLoading(),e.data.isSignTye?M("review-pjjh-20045","簇商品用户选择标签聚合列表接口异常","","网络异常"):M("review-pjjh-20044","簇商品普通标签聚合列表接口异常","","网络异常")}))},loadMore:function(){this.data.isLoading||this.data.g_isFinish||(this.data.curPage++,this.getReviewList())},onTapMove:function(){this.setData({scrollTop:0})},scroll:function(e){var t=e.detail.scrollTop;this.setData({showToTop:t>2*this.data.screenH})},changeType:function(e){this.data.g_isFinish=!1,this.data.isSignTye=!1,this.data.curPage=1,this.data.curType=e.currentTarget.dataset.type,this.setData({currentIndex:e.currentTarget.dataset.index,currentSignIndex:-1}),this.getReviewList()},changeTypeSign:function(e){this.data.g_isFinish=!1,this.data.isSignTye=!0,this.data.curPage=1,this.setData({currentIndex:-1,currentSignIndex:e.currentTarget.dataset.index}),this.data.g_signDes=e.currentTarget.dataset.labelname,this.getReviewList()},showVideo:function(e){var t=this,a=e.currentTarget.dataset.channelwebid,o=_.review+"/mobile/getPlayUrl.do?channelWebId="+a+"&deviceType=2";A({url:o}).then((function(e){t.setData({videoSrc:e.url,showVideo:!0})}))},hideVideo:function(){this.setData({showVideo:!1,videoSrc:""})},filterCurrentProduct:function(){var e=this.data.filterCheckedFlag;this.data.cmmdtyType=e?"cluster":this.data.originaliCmmdtyType,this.data.g_isFinish=!1,this.data.curPage=1,this.setData({filterCheckedFlag:!e}),this.getSystemInfo(),this.getReviewCnt(),this.getReviewSign(),this.getReviewList()},likeProduct:function(e){var t=this;j().then((function(){(0,S.default)().then((function(){var a=e.currentTarget.dataset.reviewid;A({url:_.review+"/ajax/addUseful/"+a+".do",dataType:"jsonp"}).then((function(e){1==e.returnCode?(t.data.g_reviewMap[a].usefulCnt++,t.setData({reviewList:t.data.g_reviewList})):k.showToast({title:e.returnMsg})}))})).catch((function(){}))}))},showAlbum:function(e){var t=e.currentTarget.dataset.reviewId,a=e.currentTarget.dataset.imgIndex,o=this.data.g_reviewMap[t],n=[];o&&(o&&o.picVideoFlag&&o.picVideInfo&&o.picVideInfo.imgCount>0&&o.picVideInfo.imageInfo.forEach((function(e,t){n.push(e.url)})),o&&o.againFlag&&o.againReviewImgFlag&&o.againReviewImgList&&o.againReviewImgList.length>0&&o.againReviewImgList.forEach((function(e,t){n.push(e.imgId.split("/").reverse()[0])})),this.setData({showAlbum:!0,album:{currentIndex:a,currentReviewImgs:n,currentReviewItem:o}}))},closeAlbum:function(){this.setData({showAlbum:!1})},changeImg:function(e){this.setData({album:{currentIndex:e.detail.current,currentReviewItem:this.data.album.currentReviewItem,currentReviewImgs:this.data.album.currentReviewImgs}})}})})),window.define("811",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(77).saSendLog;Page({data:{saPgnm:"pgcate=10009;tag=100052;pgtitle=Wap评价中心",pageid:"review",currentTabIndex:0,renderDonePanelFlag:!1,showTabFlag:!0},onLoad:function(){i().globalData.reviewList=this},switchTab:function(e){var t=e.target.dataset.tabIndex;this.setData({currentTabIndex:t}),1==t?this.selectComponent("#done-comment").resetList():this.selectComponent("#pending-comment").resetList()},onShow:function(){this.selectComponent("#pending-comment").resetList()},autoclick:function(e){b("click",{event:e})},showTab:function(){this.setData({showTabFlag:!0})},hideTab:function(){this.setData({showTabFlag:!1})}})})),window.define("814",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=k(e(78)),D=k(e(447)),S=k(e(9)),P=e(23),_=e(16);function k(e){return e&&e.__esModule?e:{default:e}}var L=e(8),R=(e(135),e(25)),A=R.requestPromise,j=(R.login,R.saSendPageViewLog,R.checkLogin),O=e(77).saSendLog,q=(r(),e(19).getLocation);function M(e,t,a,o){q().then((function(n){var r=i.getStorageSync("custNo")||"",s=i.getStorageSync("cookieObj")&&i.getStorageSync("cookieObj").custLevel||"";_._snBusError.bizExcp({bid:"review",error_code:e||"",error_detail:'{"errorDesc": "'+(a||"")+"_"+(o||"")+'"}',error_type:"2",member_id:r,member_level:s,region:n.cityLESId||"025",type_name:t||""})}))}function F(e,a){var o=0,n="1";if(e.data.uploadPicList.length+a.length<=5){i.showToast({icon:"loading",title:"正在上传",duration:2e4,success:function(){e.setData({isuploadpic:!1})}}),t((function(){e.setData({isuploadpic:!0})}),5e3);for(var r={pre:"http://reviewpre.cnsuning.com",xgpre:"https://reviewxgpre.cnsuning.com",prod:"https://review.suning.com"}[S.default],s=function(t,s){i.uploadFile({url:r+"/imageload/uploadImg.do",filePath:a[t],name:"Filedata",header:{"content-type":"multipart/form-data"},formData:{omsOrderItemId:e.data.omsorderItemId,custNum:e.data.custNum,deviceType:"15",isReviewFlag:"N"},success:function(r){var s=r.data;if("string"==typeof s)try{s=JSON.parse(s)}catch(e){console.error(e)}if(o++,"1"!=s.errorcode)return M("review-spfb-20010","商品评价-上传图片失败",s.errorcode,s.errMsg),void("2"!=n&&(i.showModal({title:"提示",content:s.errMsg,showCancel:!1}),n="2"));var c=e.data.uploadPicList;c.push({imgid:s.imgId,imgurl:"http:"+s.src+"_100x100.jpg",wxUploadPic:"wx"==P.getPlatformType?a[t]:"http:"+s.src+".jpg",bigImgUrl:"http:"+s.src+".jpg"}),e.setData({uploadPicList:c}),o==a.length&&(i.hideToast(),e.setData({isuploadpic:!0}))},fail:function(e){M("review-spfb-20010","商品评价-上传图片失败","","网络异常"),i.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){i.hideToast(),e.setData({isuploadpic:!0})}})},c=0,d=a.length;c<d;c++)s(c)}else i.showModal({title:"提示",content:"最多只能上传5张图片",showCancel:!1})}Page({data:{saPgnm:"pgcate=10009;tag=100052;pgtitle=Wap评价发表页",omsorderItemId:"",orderid:"",initData:"",custNum:"",goodIndex:4,goodDegree:"好评",goodStarNum:5,serviceIndex:4,serviceDegree:"好评",serviceStarNum:5,expressIndex:4,expressDegree:"好评",expressStarNum:5,currentIndex:0,reviewCntList:[],defaultPjObj:{},defaultPjText:"",uploadPicList:[],isChangeColor:1,partNumber:"",reviewContent:"",reviewNum:0,isShowOther:!1,isreturndrill:!0,returndrillText:"",isdisable:"",isuploadpic:!0,brand:"",model:"",pageid:"review"},autoclick:function(e){O("click",{event:e})},onLoad:function(e){var t=this;j().then((function(){(0,D.default)().then((function(){var a=((0,x.default)()||{}).custno;console.log(a),console.log("是否是成人用品："+e.isAdultProduct),t.setData({partNumber:e.partNumber,omsorderItemId:e.omsorderItemId,orderid:e.orderid,custNum:a,isAdultProduct:"true"==e.isAdultProduct}),t.getInitData(e),t.getLabel()})).catch((function(){}))})),this.getSystemInfo()},getSystemInfo:function(){var e=this;i.getSystemInfo({success:function(t){console.log(t),e.setData({brand:t.brand,model:t.model})}})},goMy:function(){i.switchTab({url:"/pages/my/v2/myv2"})},getInitData:function(){var e,t=this;e=L.review+"/mobile/getDetailPending.do",A({method:"GET",url:e,dataType:"json",data:{omsOrderItemId:this.data.omsorderItemId}}).then((function(e){console.log(e),"1"==e.returnCode?(/^\/\//.test(e.orderItemVO.productImgUrl)&&(e.orderItemVO.productImgUrl="https:"+e.orderItemVO.productImgUrl),t.setData({initData:e.orderItemVO}),t.getSomeJudgeResult()):M("review-spfb-20030","获取订单行信息接口异常",e.returnCode,e.returnMsg)})).catch((function(e){M("review-spfb-20030","获取订单行信息接口异常","","网络异常")}))},goFourthPage:function(e){var t=e.currentTarget.dataset,a=t.id,o=t.shop,n=(t.title,t.shoptype);"1"==t.orderonlineflag?i.showModal({title:"提示",content:"该商品暂不支持查看",showCancel:!1}):"1"==n?(console.log("/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"),i.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"})):(console.log("/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"),i.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"}))},getLabel:function(){var e,t=this;e=L.review+"/mobile/reviewNewLabels/"+this.data.partNumber+"-getSingleReviewLabelswerwe.do",A({method:"GET",url:e,dataType:"jsonp"}).then((function(e){"1"==e.returnCode&&(e.labels=e.newLabels||e.labels||[],e.labels.forEach((function(e,t,a){e.status="off"})),t.setData({reviewCntList:e.labels,defaultPjObj:e.reviewPublishPage,defaultPjText:e.reviewPublishPage.goodTip}))})).catch((function(e){}))},getSomeJudgeResult:function(){var e,t=this;e=L.review+"/mobile/getSomeJudgeResult.do",A({method:"post",url:e,dataType:"json",data:{omsOrderId:t.data.initData.omsorderId,omsOrderItemId:t.data.omsorderItemId,orderId:t.data.orderid,orderItemId:t.data.initData.orderItemId,orderOnlineFlag:0,shopId:t.data.initData.shopId,shopType:t.data.initData.shopType,versionFlag:2}}).then((function(e){"1"==e.returnCode&&(1!=e.serviceReviewFlag&&t.setData({isShowOther:!0}),t.setData({returndrillText:e.publishRewardContent}))})).catch((function(e){}))},returndrill:function(){},changeStar:function(e){"god"==e.currentTarget.dataset.type?(this.setData({goodIndex:e.currentTarget.dataset.index,goodStarNum:Number(e.currentTarget.dataset.index)+1}),this.data.goodIndex>=3?this.setData({goodDegree:"好评",defaultPjText:this.data.defaultPjObj.goodTip}):this.data.goodIndex>=1?this.setData({goodDegree:"中评",defaultPjText:this.data.defaultPjObj.middlingTip}):this.setData({goodDegree:"差评",defaultPjText:this.data.defaultPjObj.badTip})):"svc"==e.currentTarget.dataset.type?(this.setData({serviceIndex:e.currentTarget.dataset.index,serviceStarNum:Number(e.currentTarget.dataset.index)+1}),this.data.serviceIndex>=3?this.setData({serviceDegree:"好评"}):this.data.serviceIndex>=1?this.setData({serviceDegree:"中评"}):this.setData({serviceDegree:"差评"})):"exp"==e.currentTarget.dataset.type&&(this.setData({expressIndex:e.currentTarget.dataset.index,expressStarNum:Number(e.currentTarget.dataset.index)+1}),this.data.expressIndex>=3?this.setData({expressDegree:"好评"}):this.data.expressIndex>=1?this.setData({expressDegree:"中评"}):this.setData({expressDegree:"差评"}))},changeType:function(e){"off"==e.currentTarget.dataset.status?(this.data.reviewCntList[e.currentTarget.dataset.index].status="on",this.setData({reviewCntList:this.data.reviewCntList})):(this.data.reviewCntList[e.currentTarget.dataset.index].status="off",this.setData({reviewCntList:this.data.reviewCntList}))},handleImageError:function(){this.data.initData.productImgUrl="https://image2.suning.cn/uimg/cms/img/153812377017769226.png",this.setData({initData:this.data.initData})},uploadPic:function(e){var t=this;e.currentTarget.dataset.uploadpicclick&&("Xiaomi"==t.data.brand&&"Redmi Note 2"==t.data.model||"Meizu"==t.data.brand&&"PRO 5"==t.data.model?i.chooseImage({count:5,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var a=e.tempFilePaths;F(t,a)}}):i.chooseImage({count:5,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var a=e.tempFilePaths;F(t,a)}}))},previewPic:function(e){var t=e.currentTarget.dataset.wxsrc,a=[],o=[];this.data.uploadPicList.forEach((function(e,t,n){a.push(e.wxUploadPic),o.push(e.bigImgUrl)})),i.previewImage({current:t,urls:"wx"==P.getPlatformType?a:o})},delPic:function(e){this.data.uploadPicList.splice(e.currentTarget.dataset.index,1),this.setData({uploadPicList:this.data.uploadPicList});var t;t=L.review+"/imageload/deleteImg.do",A({method:"post",url:t,dataType:"json",data:{omsOrderItemId:this.data.omsorderItemId,custNum:this.custNum,deviceType:"15",isReviewFlag:"N",imgId:e.currentTarget.dataset.id}}).then((function(e){try{"1"==(e=JSON.parse(e)).errorcode?console.log("删除成功"):console.log("删除失败")}catch(e){console.error(e)}})).catch((function(e){}))},changeColor:function(e){0==this.data.isChangeColor?this.setData({isChangeColor:1}):this.setData({isChangeColor:0})},bindTextAreaBlur:function(e){this.setData({reviewContent:e.detail.value}),this.setData({reviewNum:this.data.reviewContent.length})},addReview2:function(e){var t=this;if("disable"!=e.currentTarget.dataset.click){if(t.setData({isdisable:"disable"}),this.data.reviewContent.length<1)return i.showModal({content:"请输入评价内容",showCancel:!1}),void t.setData({isdisable:""});i.showLoading({title:"请稍候",mask:!0});var a=[];this.data.uploadPicList.forEach((function(e,t,o){a.push("imgIds="+e.imgid)}));var o=[];this.data.reviewCntList.forEach((function(e,t,a){"on"==e.status&&o.push("0_"+e.labelId+"_"+e.labelName)}));var n={reviewContent:encodeURIComponent(this.data.reviewContent),reviewLabels:o.join(","),qualityStar:this.data.goodStarNum+"",anonFlag:this.data.isChangeColor+"",deviceType:"15",sourceSystem:"wap",orderId:this.data.orderid,orderItemId:this.data.initData.orderItemId,omsOrderId:this.data.initData.omsorderId,omsOrderItemId:this.data.initData.omsorderItemId,cmmdtyValue:this.data.initData.partNumber,bestFlag:"0"};console.log(n);var r;r=L.review+"/wap/addCmmdtyReview.do?"+a.join("&"),A({method:"POST",url:r,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:n}).then((function(e){if("1"==e.returnCode){var a=e.publishedRewardContent;t.data.isShowOther?A({method:"POST",url:L.review+"/wap/insertServiceReview.do",dataType:"json",data:{shopCode:t.data.initData.shopId,orderId:t.data.orderid,orderItemId:t.data.initData.orderItemId,omsOrderId:t.data.initData.omsorderId,omsOrderItemId:t.data.initData.omsorderItemId,serviceAttribute:t.data.serviceStarNum+"",delieveAttribute:t.data.expressStarNum+"",anony:t.data.isChangeColor+"",deviceType:"15",sourceSystem:"wap",orderOnlineFlag:t.data.initData.orderOnlineFlag}}).then((function(e){t.setData({isdisable:""}),i.hideLoading(),i.redirectTo({url:"/packageA/pages/review/finish/finish?publishedRewardContent="+a})})).catch((function(t){i.hideLoading(),M("review-spfb-20033","发表接口返回异常",e.returnCode,e.returnMsg)})):(t.setData({isdisable:""}),i.hideLoading(),i.redirectTo({url:"/packageA/pages/review/finish/finish?publishedRewardContent="+a}))}else i.hideLoading(),M("review-spfb-20033","发表接口返回异常",e.returnCode,e.returnMsg),e.returnCode,i.showModal({content:e.returnMsg,showCancel:!1}),t.setData({isdisable:""})})).catch((function(e){i.hideLoading(),M("review-spfb-20033","发表接口返回异常","","网络异常")}))}},onReady:function(){},onShow:function(){O("pageview")},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("817",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(447),D=(b=x)&&b.__esModule?b:{default:b};var S=e(8),P=(e(135),e(25)),_=P.requestPromise,k=(P.login,P.saSendPageViewLog,P.checkLogin),L=e(77).saSendLog;i();Page({data:{saPgnm:"pgcate=10009;tag=100052;pgtitle=Wap评价中心",showToTop:!1,scrollTop:"",screenH:0,screenW:0,isLoading:!1,reviewList:[],reviewListFlag:1,isShowBottom:!1,publishedRewardContent:"",pageid:"review"},autoclick:function(e){L("click",{event:e})},onLoad:function(e){var t=this;this.setData({publishedRewardContent:e.publishedRewardContent}),n.showLoading({title:"加载中",mask:!0}),k().then((function(){(0,D.default)().then((function(){t.getReviewList()})).catch((function(){}))})),this.getSystemInfo()},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},goFourthPage:function(e){if("true"!=e.target.dataset.ispublishbutton){var t=e.currentTarget.dataset,a=t.id,o=t.shop,i=(t.title,t.shoptype);"1"==t.orderonlineflag?n.showModal({title:"提示",content:"该商品暂不支持查看",showCancel:!1}):"1"==i||"2"==i||"501"==i?(console.log("/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop=0000000000&disablePg=1"})):(console.log("/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"),n.navigateTo({url:"/pages/fourth/fourth?productId="+a+"&shop="+o+"&disablePg=1"}))}},goguangguang:function(){console.log("aaa"),n.switchTab({url:"/pages/index/index"})},errorFunction:function(e){console.log(e);var t="reviewList["+e.currentTarget.dataset.index1+"].orderItemList["+e.currentTarget.dataset.index2+"].productImgUrl";this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,"http://image2.suning.cn/uimg/cms/img/153812377017769226.png")),console.log(this.data)},goPublishPage:function(e){var t=e.currentTarget.dataset;n.navigateTo({url:"/packageA/pages/review/publish/publish?omsorderItemId="+t.omsorderitemid+"&orderid="+t.orderid+"&partNumber="+t.id+"&isAdultProduct="+t.isadultproduct})},getReviewList:function(){var e,t=this;e=S.review+"/wap/store/myPendReviewListEdit.do?orderType=2&currentPage=1&callback=myPendReviewList",_({method:"GET",url:e,dataType:"jsonp"}).then((function(e){e.orderList&&e.orderList.length>0?(e.orderList.forEach((function(e,t,a){e.orderTime=e.orderTime.split(" ")[0],Array.isArray(e.orderItemList)&&e.orderItemList.forEach((function(e){/^\/\//.test(e.productImgUrl)&&(e.productImgUrl="https:"+e.productImgUrl)}))})),t.setData({reviewList:e.orderList,reviewListFlag:2})):(console.log("222"),t.setData({reviewListFlag:3})),n.hideLoading(),t.setData({isShowBottom:!0})})).catch((function(e){n.hideLoading()}))},onTapMove:function(){this.setData({scrollTop:0})},scroll:function(e){var t=e.detail.scrollTop;this.setData({showToTop:t>1*this.data.screenH})},onReady:function(){},onShow:function(){L("pageview")},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("820",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(579);Page({data:{activityCode:"",orderRedId:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);console.log("scene的值：",t);var a=t.split("?");this.setData({orderRedId:a[0],activityCode:a[1]})}else console.log("orderRedId的值：",e.orderRedId),console.log("activityCode的值：",e.activityCode),this.setData({activityCode:e.activityCode,orderRedId:e.orderRedId})},navigateToH5:function(){var e=b.orderRed+this.data.activityCode+".html?orderRedId="+this.data.orderRedId+"&activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("823",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{activityCode:"",orderRedId:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}e?this.setData({activityCode:e.activityCode,orderRedId:e.orderRedId}):this.setData({activityCode:"",orderRedId:""}),this.checkPageLogin(),this.getCmsData()},onReady:function(){},onShow:function(){},checkPageLogin:function(){D().then((function(){console.log("已登录")})).catch((function(){}))},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t="/packageA/pages/orderRed/main/index?orderRedId="+this.data.orderRedId+"&activityCode="+this.data.activityCode;return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:"https://oss.suning.com/smcp/smcpgameplatform/orderRed_mini/share.png",path:t}},sharePYQ:function(){var e;e="../save/index?orderRedId="+this.data.orderRedId+"&activityCode="+this.data.activityCode,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{t.forEach((function(t,a,o){t.shareTitle&&t.shareTitle.tag&&t.shareTitle.tag.length>0&&e.setData({shareTitle:t.shareTitle.tag[0].elementName})}))}catch(e){}})).catch((function(e){}))}})})),window.define("826",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=e(9),_="https://oss.suning.com/smcp/smcpgameplatform/orderRed_mini/";Page({data:{activityCode:"",orderRedId:"",ratio:2},onLoad:function(e){console.log(P);try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({activityCode:e.activityCode,orderRedId:e.orderRedId}):i.setData({activityCode:"",orderRedId:""}),this.init()},onReady:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:_+"img-share.jpg",x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/orderRed/main/index",scene:o.data.orderRedId+"?"+o.data.activityCode},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("829",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25).checkLogin,x=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var n=this;n.getData(e),b().then((function(){console.log("已登录"),n.navigateToH5()})).catch((function(){}))},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},navigateToH5:function(){var e=x.greenChannel+"cutCouponXCX/index.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)})}})})),window.define("832",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:"",isMain:!0},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},navigateToH5:function(){var e=b.greenChannel+"cutCouponXCX/index.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)})}})})),window.define("835",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0],inviteCode:t[1]})}else this.setData({activityCode:e.activityCode,inviteCode:e.inviteCode})},navigateToH5:function(){var e=b.greenChannel+"cutCouponXCX/assist.html?activityCode="+this.data.activityCode+"&inviteCode="+this.data.inviteCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)})}})})),window.define("838",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_sharePic:"",xcx_cardPic:"",xcx_savePic:"",activityCode:"",inviteCode:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}e?this.setData({activityCode:e.activityCode,inviteCode:e.inviteCode}):this.setData({activityCode:"",inviteCode:""}),this.checkPageLogin(),this.getCmsData()},onReady:function(){},onShow:function(){},checkPageLogin:function(){D().then((function(){console.log("已登录")})).catch((function(){}))},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t="/packageA/pages/cutCoupon/assist/index?activityCode="+this.data.activityCode+"&inviteCode="+this.data.inviteCode;return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.xcx_cardPic,path:t}},sharePYQ:function(){var e;e="../save1/index?activityCode="+this.data.activityCode+"&inviteCode="+this.data.inviteCode,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{console.log(t.wxShare_title),t.wxShare_title&&t.wxShare_title.tag&&t.wxShare_title.tag.length>0&&e.setData({shareTitle:t.wxShare_title.tag[0].elementName}),t.xcxImgs&&t.xcxImgs.nodes&&t.xcxImgs.nodes.length>0&&t.xcxImgs.nodes.forEach((function(t,a,o){"xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"xcx_sharePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_sharePic:S.img+t.tag[0].picUrl}),"xcx_cardPic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_cardPic:S.img+t.tag[0].picUrl}),"xcx_savePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_savePic:S.img+t.tag[0].picUrl})}))}catch(e){}})).catch((function(e){}))}})})),window.define("841",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=e(9);Page({data:{xcx_bigBg:"",xcx_savePic:"",xcx_saveBtn:"",activityCode:"",ratio:2},onLoad:function(e){console.log(P);try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({activityCode:e.activityCode,inviteCode:e.inviteCode}):i.setData({activityCode:"",inviteCode:""}),this.init(),i.getCmsData()},onReady:function(){},drawPic:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.xcx_savePic,x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/cutCoupon/assist/index",scene:o.data.activityCode+"?"+o.data.inviteCode},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{t.xcxImgs&&t.xcxImgs.nodes&&t.xcxImgs.nodes.length>0&&t.xcxImgs.nodes.forEach((function(t,a,o){"xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"xcx_savePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_savePic:t.tag[0].elementDesc}),"xcx_saveBtn"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_saveBtn:S.img+t.tag[0].picUrl}),console.log(e.data.xcx_savePic)}))}catch(e){}e.drawPic()})).catch((function(e){}))}})})),window.define("844",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=S(e(54)),x=S(e(651)),D=e(77);function S(e){return e&&e.__esModule?e:{default:e}}var P=e(845),_=e(8),k=e(25),L=k.saSendPageViewLog,R=k.checkLogin,A=e(276).addCart,j=e(135),O=[];Page({detectTouchStart:b.default.detectTouchStart,detectTouchMove:b.default.detectTouchMove,detectTouchEnd:b.default.detectTouchEnd,detectTap:b.default.detectTap,detectLongPress:b.default.detectLongPress,data:{saPgnm:"pgcate=10009;pgtitle=常购清单",tuijianTabs:[],tuijianList:[],tuijianIndex:0,cartNum:0},swithTab:function(e){var t=e.currentTarget.dataset.url;n.switchTab({url:t})},jump:function(e){var t=e.currentTarget.dataset.url;try{(0,D.saSendLog)("click",{event:e})}catch(e){}n.navigateTo({url:t})},addCart:function(e){var t=this;n.showLoading({title:"请稍候",mask:!0});var a=e.currentTarget.dataset;a.detect=b.default.getTrack()||"",A(a).then((function(e){if(n.hideLoading(),!(!e||!e.data||"Y"!=e.data.cartHeadInfo.isSuccess)){j.showToast({title:" 加入成功 "});var a=e.data.cartHeadInfo.cartTotalQty;t.setData({cartNum:a})}else{var o=!1;try{o=e.msg||e.data.errorInfos[0].errorMessage}catch(e){}j.showToast({title:o||" 加入失败 "})}}))},tab:function(e){var t=this;(0,D.saSendLog)("click",{event:e});var a=e.currentTarget.dataset.index,o=O[a]&&O[a].skus;o.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1_400x400.jpg",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode})),this.setData({tuijianIndex:a,tuijianList:o},(function(){(0,D.saSendLog)("autoexpo",t)}))},onLoad:function(e){var t=this;R().then((function(){n.showLoading({title:"加载中"}),P.queryRecommend().then((function(e){var o=e.goodTypeList,i=e.labelFlag;o&&o.forEach((function(e,t){var a=e.sugGoods,o=e.labelList;o&&o.forEach((function(e,t){e.url="/packageA/pages/alwaysbuy/list?labelCode="+e.labelCode;var a=e.sugGoods;a&&a.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1.jpg_400w_400h"}))})),a&&a.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1.jpg_400w_400h",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode}))})),t.setData({goodTypeList:o,labelFlag:i},(function(){(0,D.saSendLog)("autoexpo",t)})),n.hideLoading(),a()}))})).catch((function(){}));var a=function(){P.queryTuijian().then((function(e){O=e&&e.sugGoods;var a=[];O.forEach((function(e,t){a.push({name:e.catGroupName,index:t})}));var o=O[0]&&O[0].skus;o.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1.jpg_400w_400h",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode})),t.setData({tuijianTabs:a,tuijianList:o},(function(){(0,D.saSendLog)("autoexpo",t)}))})).catch((function(){}))};new x.default("pages/alwaysbuy/alwaysbuy")},onReady:function(){},onShow:function(){L(),b.default.init("mainApp")}})})),window.define("845",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(78),D=(b=x)&&b.__esModule?b:{default:b};e(25);var S=e(25),P=S.requestPromise,_=(S.getDfpToken,e(19).getLocation),k=e(8),L=(e(17),e(276),e(22),e(135),k.order+"/wap/recommend/queryRecommendProductsForLabel.do"),R=k.tuijian+"/recommend-portal/recommend/paramsBiz.jsonp";t.exports={queryRecommend:function(){var e=(0,D.default)()||{};return new Promise((function(t,a){_().then((function(a){var o=a.cityLESId||"10",n=e.custno||"";P({url:L,data:{cityId:o,sceneIds:"5-31",userId:n,cookieId:"",count:50}}).then((function(e){t(e)})).catch((function(){t({goodTypeList:[],labelFlag:"0"})}))}))}))},queryTuijian:function(){var e=(0,D.default)()||{};return new Promise((function(t,a){_().then((function(a){var o=a.cityLESId||"10",n=e.custno||"";P({url:R,data:{cityId:o,sceneIds:"5-20",userId:n,cookieId:"",count:16}}).then((function(e){t(e)})).catch((function(){t({sugGoods:[]})}))}))}))}}})),window.define("848",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=S(e(54)),x=S(e(651)),D=e(77);function S(e){return e&&e.__esModule?e:{default:e}}var P=e(845),_=e(8),k=(i(),e(25)),L=k.saSendPageViewLog,R=k.checkLogin,A=e(276).addCart,j=e(135),O=[];Page({detectTouchStart:b.default.detectTouchStart,detectTouchMove:b.default.detectTouchMove,detectTouchEnd:b.default.detectTouchEnd,detectTap:b.default.detectTap,detectLongPress:b.default.detectLongPress,data:{saPgnm:"pgcate=10009;pgtitle=常购清单",tuijianTabs:[],tuijianList:[],tuijianIndex:0,goods:[],cartNum:0},swithTab:function(e){var t=e.currentTarget.dataset.url;n.switchTab({url:t})},jump:function(e){try{(0,D.saSendLog)("click",{event:e})}catch(e){}var t=e.currentTarget.dataset.url;n.navigateTo({url:t})},addCart:function(e){var t=this;n.showLoading({title:"请稍候",mask:!0});var a=e.currentTarget.dataset;a.datect=b.default.getTrack()||"",A(a).then((function(e){if(n.hideLoading(),!(!e||!e.data||"Y"!=e.data.cartHeadInfo.isSuccess)){j.showToast({title:" 加入成功 "});var a=e.data.cartHeadInfo.cartTotalQty;t.setData({cartNum:a})}else{var o=!1;try{o=e.msg||e.data.errorInfos[0].errorMessage}catch(e){}j.showToast({title:o||" 加入失败 "})}}))},tab:function(e){(0,D.saSendLog)("click",{event:e});var t=this,a=e.currentTarget.dataset.index,o=O[a]&&O[a].skus;o.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1_400x400.jpg",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode})),t.setData({tuijianIndex:a,tuijianList:o},(function(){(0,D.saSendLog)("autoexpo",t)}))},onLoad:function(e){var t=this,a=e.labelName||!1,o=e.labelCode||!1;a&&n.setNavigationBarTitle({title:a});R().then((function(e){!function(e){n.showLoading({title:"加载中"}),P.queryRecommend().then((function(a){var o=a.goodTypeList;a.labelFlag;o&&o.forEach((function(a,o){var r=a.goodType,s=a.labelList;"03"==r&&s&&s.forEach((function(a,o){if(a.labelCode==e){var r=a.labelName||"",s=a.sugGoods||[];s.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1_400x400.jpg",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode})),n.setNavigationBarTitle({title:r}),t.setData({goods:s},(function(){(0,D.saSendLog)("autoexpo",t)})),n.hideLoading(),i()}}))}))}))}(o)})).catch((function(e){}));var i=function(){P.queryTuijian().then((function(e){O=e&&e.sugGoods;var a=[];O.forEach((function(e,t){a.push({name:e.catGroupName,index:t})}));var o=O[0]&&O[0].skus;o.forEach((function(e,t){e.pic=_.img+"/uimg/b2c/newcatentries/"+e.shopCode+"-"+e.sugGoodsCode+"_1_400x400.jpg",e.url="/pages/fourth/fourth?shop="+e.shopCode+"&productId="+e.sugGoodsCode})),t.setData({tuijianTabs:a,tuijianList:o},(function(){(0,D.saSendLog)("autoexpo",t)}))})).catch((function(){}))},r="pages/alwaysbuy/list?labelCode="+o;new x.default(r)},onShow:function(){b.default.init("mainApp"),L()}})})),window.define("851",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(852),x=e(25),D=x.requestPromise,S=(x.login,x.saSendPageViewLog,e(16)._snBusError),P=function(e){return parseFloat(e)},_=function(e){return e.toString().slice(0,10)},k=!0,L=function(e,t,a,o){e=e||2,t=t||1,a=a;var i=b.quan.queryCouponList,r=a.data.currentData||[];o=o||"-1";(k||a.data.currentStatus!=e||1!=t)&&n.showLoading({title:"加载中"}),k=!1,a.setData({currentStatus:e,isLoading:!0}),D({method:"GET",url:i,data:{timeRange:-1,timeType:5,isDeleted:0,couponStatus:e,storeType:-1,couponDonationStatus:-1,pageNo:t,pageSize:10,couponType:o}}).then((function(t){if("1"!==t.isSuccess&&S.bizExcp({bid:"cpfSale",error_code:"cpf-wdyhq-20031_"+t.errorCode,error_detail:JSON.stringify({errorDesc:"我的优惠券易购券列表查询失败",fromType:"小程序"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"}),0==t.couponCount)a.setData({isEmpty:!0,showNoMore:!1,currentData:[]}),"2"==e&&a.setData({count:t.couponCount});else{(r=1==t.pageNo?t.couponList:r.concat(t.couponList)).forEach((function(e,t){2==e.couponStatus&&(e.className=function(e){e=e.toString();return["10001","10002","10003","10004","10005","10006"].indexOf(e)>-1?"coupon-ygq":["10010","10011"].indexOf(e)>-1?"coupon-yfq":["10009","10013"].indexOf(e)>-1?"coupon-wdq":"10015"==e?"coupon-sfq":void 0}(e.couponType)),2==e.couponStatus||3==e.couponStatus?e.showValue=P(e.remainValue):e.showValue=P(e.couponValue),e.startDate=_(e.startTime),e.endDate=_(e.endTime)}));var o=t.pageNo||1,i=t.pageCount||1;a.setData({isEmpty:!1,currentPage:o,totalPage:i,currentData:r,isLoading:!1,showNoMore:o==i}),"2"==e&&a.setData({count:t.couponCount})}n.hideLoading()})).catch((function(){S.bizExcp({bid:"cpfSale",error_code:"cpf-wdyhq-20031_-1",error_detail:JSON.stringify({errorDesc:"我的优惠券易购券列表查询失败",fromType:"小程序"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"})}))};Page({data:{saPgnm:"pgcate=10009;pgtitle=优惠券-我的优惠券",scrollTop:0,showNoMore:!1,isLoading:!1,currentStatus:2,currentPage:1,totalPage:0,couponCount:{num2:0,num3:0,num4:0,num5:0},count:0,isEmpty:0,currentData:[],showSelect:!1,subNavIndex:0,subNaveName:"可用",type:"-1"},closeWrap:function(){this.setData({showSelect:!1})},showCouponList:function(e){var t=e.currentTarget.id,a=this.data.type;this.setData({scrollTop:0}),2==t&&2==this.data.currentStatus?this.setData({showSelect:!this.data.showSelect}):2==t?(this.setData({showSelect:!1}),L(t,1,this,a)):(this.setData({showSelect:!1}),L(t,1,this))},subChangeTab:function(e){var t=e.currentTarget.dataset.type,a=e.currentTarget.dataset.index,o=e.currentTarget.dataset.couponname;this.setData({showSelect:!1,subNavIndex:a,subNaveName:o,type:t}),L("2",1,this,t)},loadNextPage:function(){var e=this.data.isLoading,t=this.data.currentPage,a=this.data.totalPage,o=this.data.currentStatus;!e&&parseInt(t)<parseInt(a)&&(console.log("loadNextPage"),L(o,1*t+1,this))},gotoOrderList:function(){n.navigateTo({url:"/packageA/pages/order/orderList?index=1"})},gotoQuanSearch:function(e){var t=e.currentTarget.dataset;if(t&&t.coupontype&&["10009","10010","10011","10013"].indexOf(t.coupontype)>-1)n.switchTab({url:"/pages/index/index"});else{var a="/packageA/pages/quanSearch/search/search?";a+="label="+t.label,a+="&endtime="+t.endtime,a+="&id="+t.couponruleid,a+="&type=0",n.navigateTo({url:a})}},onLoad:function(e){!function(e){var t=b.quan.getCouponCount;new Promise((function(a,o){D({method:"GET",url:t}).then((function(t){"1"!==t.result&&S.bizExcp({bid:"cpfSale",error_code:"cpf-wdyhq-20030_"+t.errorCode,error_detail:JSON.stringify({errorDesc:"我的优惠券券数量查询失败"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"});var o=t&&t.couponStatusList,i={};o.forEach((function(e,t){i["num"+e.couponStatus]=e.couponNumber})),e.setData({couponCount:i,count:i.num2}),a()})).catch((function(){S.bizExcp({bid:"cpfSale",error_code:"cpf-wdyhq-20030_-1",error_detail:JSON.stringify({errorDesc:"我的优惠券券数量查询失败",fromType:"小程序"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"})}))}))}(this),L(2,1,this)}})})),window.define("852",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(8),x={quan:{getCouponCount:b.quan+"/getCouponCount_json_-1_.do",queryCouponList:b.quan+"/wap/queryCouponList.do",queryCouponDetail:b.quan+"/wap/queryCouponDetail.do"},check:b.aq+"/asc/wap/mobile/check_1.do",toIdentityVerification:b.mpay+"/epwm/identity/toIdentityVerification.htm"};t.exports=x})),window.define("855",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(16)._snBusError,x=e(25).saSendPageViewLog,D=function(e){e=e.toString();return["10001","10002","10003","10004","10005","10006"].indexOf(e)>-1?"coupon-ygq":["10010","10011"].indexOf(e)>-1?"coupon-yfq":["10009","10013"].indexOf(e)>-1?"coupon-wdq":"10015"==e?"coupon-sfq":void 0},S=function(e){return parseFloat(e)},P=e(852),_=e(25),k=_.requestPromise;_.login;Page({gotoQuanSearch:function(){if(this.data&&this.data.couponType&&["10009","10010","10011","10013"].indexOf(this.data.couponType)>-1)n.switchTab({url:"/pages/index/index"});else{var e="/packageA/pages/quanSearch/search/search?";e+="label="+this.data.label,e+="&endtime="+this.data.endtime,e+="&id="+this.data.couponRuleId,e+="&type=0",n.navigateTo({url:e})}},data:{showInfo:!0,showUseBtn:!1},onShow:function(){x()},onLoad:function(e){var t={showVaule:e.showValue,couponId:e.couponNo,couponTypeName:e.couponTypeName,couponRulesId:e.couponRulesId,className:D(e.couponType),startTime:e.startTime,endTime:e.endTime,terminalLimit:"WAP、网站、移动终端"};this.setData({data:t,label:e.promotionLabel,endtime:e.endTime}),function(e,t){n.showLoading({title:"加载中"});var a=e.couponRulesId,o=e.couponNo,i=e.couponStatus,r=P.quan.queryCouponDetail;new Promise((function(e,s){k({method:"GET",url:r,data:{couponRulesId:a,couponNo:o}}).then((function(e){"1"!==e.isSuccess&&b.bizExcp({bid:"cpfSale",error_code:"cpf-wdyhq-20050_"+e.errorCode,error_detail:JSON.stringify({errorDesc:"券详情规则详细查询失败",fromType:"小程序"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"}),n.hideLoading(),e.showVaule=2==e.couponStatus||3==e.couponStatus?S(e.remainValue):S(e.couponValue),e.className=D(e.couponType),t.setData({data:e,showInfo:!0,showUseBtn:2==i,couponId:o,couponRuleId:a,couponType:e.couponType})})).catch((function(){b.bizExcp({bid:"cpfSale",error_code:"cpf-qxq-20050_-1",error_detail:JSON.stringify({errorDesc:"券详情规则详细查询失败",fromType:"小程序"}),error_type:"2",member_id:n.getStorageSync("custNo"),region:d.data.cityCode||"025"})}))}))}(e,this)}})})),window.define("858",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(635);Page({onLoad:function(e){this.option=e||{}},onShow:function(){n.redirectTo({url:(0,b.buildUrl)("/packageA/pages/order/orderList/orderList",this.option)})}})})),window.define("861",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=k(e(327)),x=k(e(328)),D=e(25),S=(k(e(78)),e(77)),P=k(e(329)),_=e(23);function k(e){return e&&e.__esModule?e:{default:e}}i();Page({data:{pageid:"778",saPvId:"",saPgnm:"pgcate=10009;tag=100123;pgtitle=网上订单列表",tabIndex:"-1",orderStatus:{0:"all",1:"waitPay",2:"waitReceive",3:"success"},orderData:[],page:"1",totalPage:"",switchkey:{},noMore:!1,noLoading:!0,haveData:!1,noData:!1,cancelClosed:!1,cancelOrderId:"",giftOrderId:"",relationOrder:!1,relationOrderContent:{},relationBtnType:"",relationFlag:"",goTop:!1,showAccount:!1,flatAccount:!1,nickName:"",avatarUrl:"",userInfo:{}},switchAccount:function(){this.setData({flatAccount:!this.data.flatAccount})},tabSwitch:function(e){var t=this;e.target.dataset.index&&this.data.tabIndex!=e.target.dataset.index&&this.setData({tabIndex:e.target.dataset.index,page:"1",orderData:[],totalPage:"",haveData:!1,noData:!1},(function(){var e={status:t.data.orderStatus[t.data.tabIndex],page:t.data.page,sourceName:"xcx",newSourceName:"bdxcx"};t.getOrderData(e)}))},goSearch:function(e){n.navigateTo({url:"../orderSearch/orderSearch?index=0"})},relationOrder:function(e){e.detail.btnType;var t=e.detail,a=t.btnType,o=t.omsOrderId,n=t.orderFlag,i=t.orderId;this.setData({relationBtnType:a,relationOrder:!0,relationOrderContent:{omsOrderId:o,orderId:i,switchKey:this.data.switchkey,orderFlag:n}})},hideModal:function(){this.setData({relationOrder:!1})},onLoad:function(e){var t=this;(0,D.checkLogin)().then((function(){t.init(e)})).catch((function(e){console.log(e)}))},onShow:function(){(0,D.saSendPageViewLog)()},init:function(e){var t=e.index||"0";t&&this.setData({tabIndex:t});var a={status:this.data.orderStatus[t],page:this.data.page||"1",sourceName:"xcx",newSourceName:"bdxcx"};this.getOrderData(a)},getOrderData:function(e){var t=this;n.showLoading({title:"加载中",mask:!0}),b.default._newOrderList(e).then((function(e){t.parseData(e.orderList),e&&"1"==e.switchkey.relationCustNoFlag&&"1"==e.currPage&&t.getAccount();var a=e.orderList;t.setData({orderData:t.data.orderData.concat(a),page:++t.data.page,totalPage:e.totalPage,noMore:t.data.page>e.totalPage,haveData:e.orderList.length>0,noData:0==e.orderList.length,switchkey:e.switchkey})})).catch((function(e){t.setData({haveData:!1,noData:!0})})).finally((function(){n.hideLoading({complete:function(){t.data.noLoading=!0}})}))},getAccount:function(){var e={custNum:n.getStorageSync("custNo")||"",sign:(0,D.MD5)("custNum"+(n.getStorageSync("custNo")||"")+"SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")};"swan"==(0,_.getPlatformType)()&&(e={custNum:n.getStorageSync("custNo")||"",extSystemId:"139000003420",sign:(0,D.MD5)("custNum"+(n.getStorageSync("custNo")||"")+"extSystemId139000003420SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")});var t=this;b.default._getAccout(e).then((function(a){if(a.wechatAppletInfoList&&a.wechatAppletInfoList.length>"1"){var o=a.wechatAppletInfoList.findIndex((function(t){return t.custNum===e.custNum})),n=a.wechatAppletInfoList[o].appletCustLabelFlag,i=a.wechatAppletInfoList.findIndex((function(e){return"100000000010"==e.appletCustLabelFlag}))||"0",r=a.wechatAppletInfoList[i].custNum;t.setData({showAccount:!0,showAccountContent:"100000000020"===n?"切换至苏宁易购临时账号查看订单信息":"切换至账号"+r+"查看订单信息"})}})).catch((function(e){console.log(e)}))},autoclick:function(e){(0,S.saSendLog)("click",{event:e})},onReady:function(){(0,S.saSendLog)("autoexpo",this)},switchOrder:function(){var e=encodeURIComponent("/packageA/pages/order/orderList/orderList?index=0");n.navigateTo({url:"/packageA/pages/loginFive/changeAccount/changeAccount?target="+e})},parseData:function(e){e.forEach((function(e){e.vendorList.forEach((function(t,a){t.goMore=e.orderId+"_"+a,t.iconType=P.default._imgFn1(t.vendorType,t.vendorFlag),t.vendorBtnList&&t.vendorBtnList.length>1&&t.vendorBtnList.reverse(),t.vendorBtnList=t.vendorBtnList.filter((function(t){return P.default._showBtn(t,e)})),t.vendorBtnList.forEach((function(e){"1"!=e.btnType&&"2"!=e.btnType&&"3"!=e.btnType&&"4"!=e.btnType&&"31"!=e.btnType&&"32"!=e.btnType&&"36"!=e.btnType&&"37"!=e.btnType||(e.goPayShow=!0)}));var o=[];t.itemList.forEach((function(a){if("1"!=a.itemFlag.giftFlag){var n={};n.cmmdtyCode=a.partNumber,n.shopCode=t.vendorCode,o.push(n),n=null}t.againBuy=o,a.productImgUrl=P.default._imgFn2(a,e)}))}))}))},delete:function(e){var t=e.detail,a=this.data.orderData.filter((function(e){return e.orderId!=t}));this.setData({orderData:a})},onReachBottom:function(e){if(this.data.noLoading&&this.data.page<=this.data.totalPage){var t={status:this.data.orderStatus[this.data.tabIndex],page:this.data.page,sourceName:"xcx",newSourceName:"bdxcx"};this.getOrderData(t)}},onPageScroll:function(e){e.scrollTop>200&&!this.data.goTop&&this.setData({goTop:!0}),e.scrollTop<100&&this.data.goTop&&this.setData({goTop:!1})},goTop:function(){n.pageScrollTo({scrollTop:0})},closed:function(){this.setData({cancelClosed:!1})},openCancel:function(e){this.setData({cancelOrderId:e.detail.orderId,relationFlag:e.detail.relationFlag,cancelClosed:!0})},onShareAppMessage:function(e){var t=e.target.dataset.shareData,a=t.title,o=t.imageUrl,n=t.path;return{title:a,imageUrl:o=o.replace(/^\/\//,x.default.rq_http),path:n}}})})),window.define("864",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(635);Page({onLoad:function(e){this.option=e||{}},onShow:function(){n.redirectTo({url:(0,b.buildUrl)("/packageA/pages/order/orderDetail/orderDetail",this.option)})}})})),window.define("867",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=P(e(54)),D=P(e(328)),S=e(23);function P(e){return e&&e.__esModule?e:{default:e}}function _(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var k=e(868),L=e(77).saSendLog,R=e(25),A=(R.login,R.goodImageUrl),j=R.wxPay,O=R.saSendPageViewLog,q=R.checkLogin,M=e(135);r();Page({data:{platform:(0,S.getPlatformType)(),pageid:"778",isGoPay:!0,saPgnm:"pgcate=10009;tag=100123;pgtitle=网上订单列表",currentData:[],currentIndex:0,currentStatus:"all",condition:"",orderTabs:[{status:"all",txt:"全部订单"},{status:"waitPay",txt:"待支付"},{status:"waitReceive",txt:"待收货"},{status:"success",txt:"已完成"}],page:0,pageSize:15,isEmpty:0,isLoading:!1,noMore:!1,searchOld:[],showSearch:!0,searchText:"",inputText:"",inputTimer:"",giftBtn:!1,switchKey:""},autoclick:function(e){L("click",{event:e})},inpContent:function(e){clearTimeout(this.inputTimer),this.inputTimer=t(function(){this.data.inputText=e.detail.value}.bind(this),100)},conditainSearch:function(e){var t=this.data.searchOld;t.length>1&&0!=e.target.dataset.valindex&&(t.splice(e.target.dataset.valindex,1),t.unshift(e.target.dataset.valsearch),i.setStorageSync("oldContent",t.join(","))),this.data.searchText=e.target.dataset.valsearch,this.queryOrderList({status:this.data.currentStatus,condition:e.target.dataset.valsearch||""}),this.setData({showSearch:!1})},goFirstpage:function(){i.reLaunch({url:"/pages/index/index"})},baoxian:function(e){var t=e.currentTarget.dataset.insuranceurl;(t=t.replace(/^\/\//,"https://"))&&i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)})},getOrderListSearch:function(){var e=this.data.inputText.replace(/\s+/g,"");if(e&&e.length>30&&(e=e.substr(0,12)+"..."),e){var t=i.getStorageSync("oldContent"),a=[];if(""!=t){(a=t.split(",")).length>10&&a.splice(9,a.length-1);var o=a.findIndex((function(t,a){return t==e}));"-1"!=o?(a.splice(o,1),a.unshift(e)):a.unshift(e),t=a.join(",")}else t=e+","+t;i.setStorageSync("oldContent",t)}this.data.searchText=e,this.queryOrderList({status:this.data.currentStatus,condition:e||""}),this.setData({showSearch:!1})},onLoad:function(e){this.setData({options:e})},initialize:function(e){e||(e={}),e.index||(e.index=0);var t=i.getStorageSync("oldContent")&&i.getStorageSync("oldContent").split(",");t&&t.length&&t.length>10&&(t=t.slice(0,10)),this.setData({currentIndex:e.index,currentStatus:this.data.orderTabs[e.index].status,searchOld:t})},loadMore:function(){this.data.isLoading||this.data.noMore||this.queryOrderList({status:this.data.currentStatus,page:this.data.page+1,condition:this.data.searchText||""})},goHwg:function(e){var t=e.currentTarget.dataset.orderid;i.navigateTo({url:"/packageA/pages/order/overSeasReal/index?orderId="+t+"&type=0"})},showBtn:function(e){var t=this,a=e.currentTarget.dataset.orderId;i.showLoading({title:"加载中",mask:!0}),k._queryWechatGift({orderId:"111"}).then((function(e){if("0"==e.retCode)if(e.playList&&e.playList.length>0)t.setData({playList:e.playList}),t.data.openId==a?t.setData({openId:"0"}):t.setData({openId:a});else{var o={};o.title=e.shareContent,o.imageUrl=e.shareImgUrl,o.path=e.shareUrl,t.setData({giftBtn:!t.data.giftBtn,objGift:o})}else{try{k.snBusError("ofs-ddlbRule-20135_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","")}catch(e){}M.showToast({title:e.errMsg||"网络异常"})}})).finally((function(){i.hideLoading()}))},clickCancel:function(){this.setData({giftBtn:!this.data.giftBtn})},giftBtnClick:function(e){var t=this,a=e.currentTarget.dataset,o=a.orderId,n=a.playNo;i.showLoading({title:"加载中",mask:!0}),k._queryWechatGift({orderId:o,playNo:n}).then((function(e){if("0"==e.retCode){var a={};a.title=e.shareContent,a.imageUrl=e.shareImgUrl,a.path=e.shareUrl,t.setData({giftBtn:!t.data.giftBtn,objGift:a,openId:"0"})}else{try{k.snBusError("ofs-ddlbRule-20135_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","")}catch(e){}M.showToast({title:e.errMsg||"网络异常"})}})).finally((function(){i.hideLoading()}))},queryOrderList:function(e){var t=this;i.showLoading({title:"加载中"}),t.setData({isLoading:!0}),k._queryOrderList(Object.assign({},e,{version:"20190320"})).then((function(e){var a=(e=e||{}).orderList||[],o=t.data.page+1;a.length>0?(a=t.parseOrderList(a),t.setData({currentData:t.data.currentData.concat(a),page:o,isLoading:!1,noMore:o==e.totalPage,switchKey:e.switchkey})):1==o?t.setData({isEmpty:!0,isLoading:!1,noMore:!0}):t.setData({isLoading:!1,noMore:!0}),i.hideLoading()})).catch((function(e){console.log(e)}))},showOrderList:function(e){var t=e.currentTarget.dataset.id;this.setData({page:0,isEmpty:0,isLoading:!1,noMore:!1,currentIndex:t,currentStatus:this.data.orderTabs[t].status,currentData:[]}),this.queryOrderList({status:this.data.currentStatus})},reverseShowOrderId:function(e,t){var a=this;a.data.currentData.forEach((function(o,n){if(o.orderId==e){var i=a.data.currentData[n].vendorList[t].showOrderId;a.setData((c=!i,(s="currentData["+n+"].vendorList["+t+"].showOrderId")in(r={})?Object.defineProperty(r,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[s]=c,r))}var r,s,c}))},copyOrderId:function(e){var t=this,a=e.currentTarget.dataset.orderId,o=e.currentTarget.dataset.index;i.setClipboardData({data:a,success:function(e){t.reverseShowOrderId(a,o),i.showToast({title:"复制成功",icon:"success",duration:2e3}),i.getClipboardData({success:function(e){console.log(e.data)}})}})},showOrderId:function(e){var t=e.currentTarget.dataset.orderId,a=e.currentTarget.dataset.index;this.reverseShowOrderId(t,a)},parseOrderList:function(e){var t=[];return e.forEach((function(e,a){e.orderBtnList=e.orderBtnList||[],e.vendorList.forEach((function(e,a){if(e.itemList&&e.itemList.length&&(e.itemList.forEach((function(a,o){if(a.reviewGiftInfo&&a.reviewGiftInfo.evaluationGiftName){var n={productName:a.reviewGiftInfo.evaluationGiftName,itemFlag:{reviewGiftFlag:"1"},itemBtnList:[{btnName:"赠品物流",omsItemId:e.itemList[o].omsItemId,btnType:"1"==a.reviewGiftInfo.showGiftLogisticFalg?"38":""}],showGiftLogisticFalg:a.reviewGiftInfo.showGiftLogisticFalg,qty:a.reviewGiftInfo.evaluationGiftAmount,indexGift:o};t.push(n)}})),t.length)){for(var o=0;o<t.length;o++)e.itemList.splice(t[o].indexGift+o+1,0,t[o]);t=[]}})),e.orderBtnList=e.orderBtnList.filter((function(t){return k.showFunc(t,e)})),e.vendorList.forEach((function(e,t){e.vendorBtnList.length&&e.vendorBtnList.forEach((function(t,a){if("20"==t.btnType){var o=[],n=[];e.itemList.length&&e.itemList.forEach((function(t){t.itemFlag&&"1"!=t.itemFlag.giftFlag&&(o.push(e.vendorCode),n.push(t.partNumber))})),t.shopCode=o,t.cmmdtyCode=n}}))})),e.vendorList.forEach((function(t,a){t.vendorBtnList.some((function(e){return 1==e.btnType||31==e.btnType}))&&(e.orderFlag.payToapp=!0),t.vendorBtnList=t.vendorBtnList||[],t.vendorBtnList=t.vendorBtnList.filter((function(t){return k.showFunc(t,e)})),t.showOrderId=!1,0==t.vendorType?(t.iconType="cart-sn-ico",1==e.orderType&&(t.iconType="cart-store-ico"),"1"==t.vendorFlag.goodStoreFlag?t.iconType="cart-goods-store":"1"==t.vendorFlag.mptmFlag?t.iconType="cart-mptm-store":1==t.vendorFlag.hwgFlag&&(t.iconType="cart-hwg-ico")):1==t.vendorType?"1"==t.vendorFlag.goodStoreFlag?t.iconType="cart-goods-store":1==t.vendorFlag.hwgFlag||1==t.vendorFlag.mptmFlag?t.iconType="cart-hwg-ico":t.iconType="cart-cshop-ico":2==t.vendorType&&("1"==t.vendorFlag.goodStoreFlag?t.iconType="cart-goods-store":1!=t.vendorFlag.sxFlag?t.iconType="cart-service-ico":1==t.vendorFlag.sxFlag&&(t.iconType="cart-sn-ico")),t.isPg=!1,t.itemList.forEach((function(a,o){a.pgItemStatusContent&&(t.isPg=!0),a.itemBtnList=a.itemBtnList||[],a.itemBtnList=a.itemBtnList.filter((function(t){return k.showFunc(t,e)})),a.productImgUrl?a.imgUrl=a.productImgUrl:a.imgUrl=A(a.partNumber,a.supplierCode,"",e.vendorCode,120),a.ruleId&&(a.imgUrl=a.couponPictureUrl,t.ruleId=a.ruleId),a.commonPicUrl&&(a.imgUrl=a.commonPicUrl),!a.itemFlag||1!=a.itemFlag.pgOneFlag&&1!=a.itemFlag.pgTwoFlag||(e.pgCanNotPay=!0)}))}))})),e},orderFunc:function(e){var a=this,o=e.currentTarget.dataset.btnType,n=e.currentTarget.dataset.orderId,r=e.currentTarget.dataset.vendorCode,s=e.currentTarget.dataset.couponId,c=e.currentTarget.dataset.omsOrderId,d=e.currentTarget.dataset.btnUrl,u=e.currentTarget.dataset.omsItemId,l=e.currentTarget.dataset.cmmdtyCode,g=e.currentTarget.dataset.shopCode,p=e.currentTarget.dataset.orderFlag&&e.currentTarget.dataset.orderFlag.wxGiftFlag,h=x.default.getTrack(),f={cmmdtyCode:l,shopCode:g,detect:h};switch(o){case"2":case"3":case"4":case"32":case"1":case"36":case"37":case"31":if(a.data.isGoPay){a.setData({isGoPay:!1});var m="1"==o||"31"==o||"36"==o?2:"2"==o||"37"==o?3:1,w="1"==o||"31"==o||"2"==o||"36"==o||"37"==o?2:1;a.data.currentData.forEach((function(e,t){if(e.orderId==n){var s=function(){j(n,w,m).then((function(){a.setData({isGoPay:!0}),a.goCart4(n,p)})).catch((function(e){a.setData({isGoPay:!0}),console.log("fail"),e&&"当前订单状态不可支付，请前往订单中心查看订单状态"==e.errMsg?i.showModal({title:"提示",content:e.errMsg||"系统繁忙，请稍后再试！",showCancel:!1,confirmText:"我知道了",confirmColor:"#ff6600",complete:function(){a.goOrderList()}}):e&&"requestPayment:fail cancel"!=e.errMsg&&M.showToast({title:e.errMsg||"接口异常"})}))};if("3"==o||"4"==o)return void k._queryPayMethods({orderId:n,omsOrderId:c}).then((function(e){e&&"0"==e.retCode&&"1"==e.wxPayFlag?s():(M.showToast({title:e.wxPayGuideTip||"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"}),a.setData({isGoPay:!0}))})).catch((function(e){M.showToast({title:"抱歉，该订单不支持在当前环境支付，请前往电脑端支付"}),a.setData({isGoPay:!0})}));if(e.pgCanNotPay)return i.navigateToSmartProgram({appId:"wxe964260af9330942",path:"/pages/order/orderList",success:function(e){a.setData({isGoPay:!0})},fail:function(e){a.setData({isGoPay:!0})}}),!1;if("2"==o||"37"==o)return void k._queryCouponUsable({orderId:n,vendorCode:r,omsOrderId:c,orderType:w,payFlag:m}).then((function(e){e.cart2No&&""!=e.cart2No?(i.navigateTo({url:"/packageC/pages/cart/prepayment/prepayment?cart2No="+e.cart2No}),a.setData({isGoPay:!0})):s()})).catch((function(e){s()}));s()}}))}break;case"6":case"7":k._queryOrderConfirm({orderId:n,vendorCode:r}).then((function(e){if(e.cShopPkgList.length+e.factoryPkgList.length<2){var a=[].concat(_(e.cShopPkgList),_(e.factoryPkgList))[0].orderItemList.map((function(e,t){return"7"===o?e.omsItemId:e.itemId}));if("7"===o){var s=a.join("_");i.showModal({content:"确认收货",confirmColor:"#ffc200",showCancel:!0,success:function(e){e.confirm&&k._confirmFactoryOrder({orderId:n,omsItemIds:s,vendorCode:r}).then((function(e){0==e.retCode?(M.showToast({title:e.errMsg||"确认收货成功"}),t((function(){i.redirectTo({url:"/packageA/pages/order/orderList"})}),3e3)):M.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})})).catch((function(e){M.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})}))}})}else{var c=a.join("_");i.showModal({content:"确认收货",confirmColor:"#ffc200",showCancel:!0,success:function(e){e.confirm&&k._confirmCShopOrder({orderId:n,itemIds:c,vendorCode:r}).then((function(e){0==e.retCode?(M.showToast({title:e.errMsg||"确认收货成功"}),t((function(){i.redirectTo({url:"/packageA/pages/order/orderList"})}),3e3)):M.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})})).catch((function(e){M.showToast({title:e.errMsg||"确认收货失败，请稍后重新尝试"})}))}})}}else i.navigateTo({url:"/packageA/pages/order/confirmOrder?orderId="+n+"&vendorCode="+r})}));break;case"8":d=d.replace("//","https://"),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(d)});break;case"10":"1"==a.data.switchKey.logisticFlag?i.navigateTo({url:"/packageA/pages/logistics-new/logistics-new?orderId="+n+"&vendorCode="+r}):i.navigateTo({url:"/packageA/pages/logistics/logistics?orderId="+n+"&vendorCode="+r});break;case"12":case"13":k.cancelOrder(n,a,"orderList");break;case"17":k.deleteOrder(n,a);break;case"18":d=d.replace("//","https://"),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(d)});break;case"20":for(var v=[],y=0;y<f.cmmdtyCode.length;y++){var C={cmmdtyCode:l=f.cmmdtyCode[y],shopCode:g=f.shopCode[y]};v.push(C)}k._addCart(h,[].concat(v)).then((function(e){e.data.cartHeadInfo&&e.data.cartHeadInfo.isSuccess&&"Y"==e.data.cartHeadInfo.isSuccess?i.showModal({content:"加入购物车成功，是否去结算",confirmColor:"#ffc200",success:function(e){e.confirm&&i.switchTab({url:"/pages/cart/cart1/cart1"})}}):M.showToast({title:e.data&&e.data.errorInfos[0]&&e.data.errorInfos[0].errorMessage||e.msg||"加入购物车失败"})}));break;case"26":k.goEExchangeCard(n,r);break;case"28":k.goUseCoupon(s);break;case"34":k.factoryDeliver(d);case"38":"1"==a.data.switchKey.logisticFlag?i.navigateTo({url:"/packageA/pages/logistics-new/logistics-new?orderId="+n+"&vendorCode="+r+"&omsItemId="+u}):i.navigateTo({url:"/packageA/pages/logistics/logistics?orderId="+n+"&vendorCode="+r+"&omsItemId="+u});break;case"10000":-1!==d.indexOf("cnsuning.com")||-1!==d.indexOf("suning.com")?(d=d.replace("//","https://"),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(d)})):i.redirectTo({url:d})}},goCart4:function(e,t){if("1"==t)i.redirectTo({url:"/packageA/pages/order/cart4Gift/cart4Gift?id="+e});else{var a="0"===this.data.switchKey.newCart4Switch?"/packageA/pages/cart4/cart4?id=":"/packageA/pages/order/cart4/cart4?id=";i.redirectTo({url:a+e})}},goDetail:function(e){var t=e.currentTarget.dataset.orderType,a=e.currentTarget.dataset.omsOrderId,o=e.currentTarget.dataset.orderId,n=e.currentTarget.dataset.vendorCode;e.currentTarget.dataset.ispg;"0"==this.data.switchKey.orderDetailNewFlag?1==t?i.navigateTo({url:"./orderDetail?orderId="+o+"&omsOrderId="+a+"&vendorCode="+n+"&source="+this.data.options.source}):i.navigateTo({url:"./orderDetail?orderId="+o+"&vendorCode="+n+"&source="+this.data.options.source+"&clientType=xcx"}):"1"==this.data.switchKey.orderDetailNewFlag&&i.navigateTo({url:"./orderDetail/orderDetail?orderId="+o+"&vendorCode="+n+"&version=20190320"})},goOrderList:function(){i.redirectTo({url:"/pages/my/order/orderList?index=0&source=payfail"})},onReady:function(){},onShow:function(){var e=this.data.options;this.setData({page:0,isEmpty:0,isLoading:!1,noMore:!0});var t=this;q().then((function(){t.initialize(e)})).catch((function(){})),O()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(e){var t=e.target.dataset.shareData,a=t.title,o=t.imageUrl,n=t.path;return{title:a,imageUrl:o=o.replace(/^\/\//,D.default.rq_http),path:n}}})})),window.define("868",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(78),S=(x=D)&&x.__esModule?x:{default:x};var P=e(869),_=e(135),k=e(16)._snBusError,L=e(25).requestPromise,R=e(276).addCart,A=e(870).showFunc;a.exports={snBusError:function(e,t,a,o,n){var r=i.getStorageSync("custNo")||"",s=(0,S.default)()&&(0,S.default)().custLevel||"";try{k.bizExcp({bid:"bid_xcx",error_code:e,error_detail:JSON.stringify(t),error_type:a,member_id:r,member_level:s,region:o,type_name:n||""})}catch(e){console.log(e)}},showFunc:A,goUseCoupon:function(e){var t="/packageA/pages/quanSearch/search/search?";t+="&id="+e,t+="&type=0",i.navigateTo({url:t})},goEExchangeCard:function(e,t){i.navigateTo({url:"/packageA/pages/order/eExchangeCard/index?orderId="+e+"&vendorCode="+t})},factoryDeliver:function(e){this._factoryDeliver(e).then((function(e){0==e.retCode?e.urgeDetailUrl?i.redirectTo({url:"/pages/webView/index?webViewSrc="+e.urgeDetailUrl}):(_.showToast({title:e.urgeTip}),t((function(){i.redirectTo({url:"/pages/order/orderList?index=0"})}),3e3)):(_.showToast({title:e.urgeTip||"催发货失败"}),t((function(){i.redirectTo({url:"/pages/order/orderList?index=0"})}),3e3))}))},factorySendDelay:function(e,a,o){var n=this;i.showModal({content:"确认延长收货时间？每笔订单最多延迟"+a+"次，每次延迟"+o+"天",confirmColor:"#ffc200",showCancel:!0,success:function(a){a.confirm?n._factorySendDelay(e).then((function(e){0==(e=e||{}).retCode?(_.showToast({title:"延迟成功，已为您延迟"+o+"天"}),t((function(){i.redirectTo({url:"/pages/order/orderList?index=0"})}),2e3)):_.showToast({title:e.errMsg||"延迟失败"})})).catch((function(e){console.log(e)})):a.cancel}})},confirmOrder:function(e){"0000000000"==e.vendorCode||"factory"==e.target?this._confirmFactoryOrder(e).then((function(e){if(0==e.retCode)i.showToast({title:"确认收货成功",icon:"success",duration:2e3});else{i.showToast({title:e.errMsg.split("E")[0]||"确认收货失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3});snBusError("ofs-wsddqrsh-10009_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","order.suning.com/wap/onlineOrder/confirmFactoryOrder.do")}t((function(){i.redirectTo({url:"/packageA/pages/order/orderList?index=0"})}),2e3)})).catch((function(){snBusError("ofs-wsddqrsh-10009_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/onlineOrder/confirmFactoryOrder.do")})):this._confirmCShopOrder(e).then((function(e){if(0==e.retCode)i.showToast({title:"确认收货成功",icon:"success",duration:2e3});else{i.showToast({title:e.errMsg.split("E")[0]||"确认收货失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3});snBusError("ofs-wsddqrsh-10008_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","order.suning.com/wap/onlineOrder/confirmCShopOrder.do")}t((function(){i.redirectTo({url:"/packageA/pages/order/orderList?index=0"})}),2e3)})).catch((function(){snBusError("ofs-wsddqrsh-10008_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/onlineOrder/confirmCShopOrder.do")}))},cancelOrder:function(e,a,o){var n=this;e&&e.length&&i.showModal({content:"确定取消订单？",confirmColor:"#ffc200",success:function(a){a.confirm&&n._cancelOrder(e).then((function(e){if(0==(e=e||{}).retCode)i.showToast({title:"取消成功",icon:"success",duration:2e3}),t((function(){"orderList"==o?i.redirectTo({url:"/pages/order/orderList?index=0"}):i.navigateBack()}),2100);else{snBusError("ofs-wsddqxdd-10005_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","order.suning.com/wap/onlineOrder/cancelOrder.do"),i.showToast({title:e.errMsg.split("E")[0]||"取消失败",icon:"fail",image:"../../../images/cancel.png",duration:2e3})}})).catch((function(){snBusError("ofs-wsddqxdd-10005_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/onlineOrder/cancelOrder.do")}))}})},deleteOrder:function(e,t){var a=this;i.showModal({content:"确定删除订单？",confirmColor:"#ffc200",success:function(o){o.confirm&&e&&e.length&&a._deleteOrder(e).then((function(a){if(0==(a=a||{}).retCode)i.showToast({title:"删除成功",icon:"success",duration:2e3}),t.data.currentData.forEach((function(a,o){a.orderId==e&&(t.data.currentData.splice(o,1),t.setData({currentData:t.data.currentData}),0==t.data.currentData.length&&t.setData({isEmpty:!0,isLoading:!1,noMore:!0}))}));else{snBusError("ofs-wsddscdd-10006_"+a.retCode,{errorDesc:a.errMsg||""},1,"025","order.suning.com/wap/onlineOrder/deleteOrder.do")}})).catch((function(){snBusError("ofs-wsddscdd-10006_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/onlineOrder/deleteOrder.do")}))}})},_isValidatorName:function(e){var t=/^.{2,32}$/.test(e),a=/^[\s\u4e00-\u9fa5a-zA-Z0-9]*$/.test(e),o=""!==e;return{allEnable:t&&a&&o,countRule:t,illegalRule:a,emptyRule:o}},_isCardNo:function(e){return{allEnable:/(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e),emptyRule:""!==e}},_addPayer:function(e){var t=e||{};return L({method:"POST",url:P.order.addPayer,data:{payerName:t.payerName||"",certNo:t.certNo||"",defaultFlag:t.defaultFlag||""}})},_omsSavePayer:function(e){var t=e||{};return L({method:"POST",url:P.order.omsSavePayer,data:{orderId:t.orderId||"",omsItemIds:t.omsItemIds||"",payerName:t.payerName||"",certNo:t.certNo||""}})},_queryCouponUsable:function(e){var t=e||{};return L({method:"GET",url:P.order.queryCouponUsable,data:t})},_deletePayer:function(e){var t={payerNum:(e||{}).payerNum||""};return L({method:"GET",url:P.order.deletePayer,data:t})},_queryOrderList:function(e){var t=e||{};return L({method:"GET",url:P.order.orderList,data:{status:t.status||"all",page:t.page||"1",pageSize:t.pageSize||"15",condition:t.condition||"",sourceName:"xcx",newSourceName:"bdxcx",version:"20190320"}})},_queryOrderDetail:function(e){var t=e||{},a={};return a=e.omsOrderId?{orderId:t.orderId||"",omsOrderId:t.omsOrderId||"",vendorCode:t.vendorCode||"",sourceName:"xcx",newSourceName:"bdxcx"}:{orderId:t.orderId||"",vendorCode:t.vendorCode||"",sourceName:"xcx",newSourceName:"bdxcx"},L({method:"GET",url:P.order.orderDetail,data:a})},_queryECertificate:function(e){var t=e||{},a={orderId:t.orderId||"",vendorCode:t.vendorCode||""};return L({method:"GET",url:P.order.queryECertificate,data:a})},_queryLogisticsDetail:function(e){var t=e||{};return L({method:"GET",url:P.order.logisticsDetail,data:{orderId:t.orderId||"",vendorCode:t.vendorCode||""}})},_queryReviewGiftLogisticsDetail:function(e){var t=e||{};return L({method:"GET",url:P.order.reviewGiftLogistic,data:{orderId:t.orderId||"",vendorCode:t.vendorCode||"",omsItemId:t.omsItemId||""}})},_queryOrderConfirm:function(e){var t=e||{};return L({method:"GET",url:P.order.queryOrderConfirm,data:{orderId:t.orderId||"",vendorCode:t.vendorCode||""}})},_confirmCShopOrder:function(e){return L({method:"GET",url:P.order.confirmCShopOrder,data:{orderId:e.orderId,vendorCode:e.vendorCode,itemIds:e.itemIds}})},_confirmFactoryOrder:function(e){return L({method:"GET",url:P.order.confirmFactoryOrder,data:{orderId:e.orderId,omsItemIds:e.omsItemIds}})},_cancelOrder:function(e){return L({method:"GET",url:P.order.cancelOrder,data:{orderId:e}})},_deleteOrder:function(e){return L({method:"GET",url:P.order.deleteOrder,data:{orderId:e}})},_queryEinvoice:function(e){var t=e||{},a={orderId:t.orderId||"",vendorCode:t.vendorCode||"",omsOrderId:t.omsOrderId||""};return L({method:"GET",url:P.order.queryEinvoice,data:a})},_queryOrderPayerList:function(e){return L({method:"GET",url:P.order.queryOrderPayerList,data:{orderId:e.orderId}})},_signature:function(e){return L({method:"GET",url:P.pay.signature+e})},_toWxpay:function(e){return L({method:"GET",url:P.pay.toWxpay,data:e})},_factoryDeliver:function(e){return L({method:"GET",url:e})},_factorySendDelay:function(e){return L({method:"GET",url:e})},_addCart:function(e,t){return R(e,t)},_queryPayMethods:function(e){return L({method:"GET",url:P.order.queryPayMethods,data:{orderId:e.orderId,omsOrderId:e.omsOrderId}})},_queryWechatGift:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L({method:"GET",url:P.order.queryWechatGift,data:Object.assign({},e,{version:"20190320"})})}}})),window.define("869",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(9),x={rq_http:"http://",order:"https://ordersit.cnsuning.com",crdNode:"https://crdnode-sit.cnsuning.com",cms:"https://fastpre.cnsuning.com/libpre",act:"http://actsit.cnsuning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAjqk9hU/RYqGp0HgcaX1fiYetipsXlsloSb4p0G7sqpOoaQlyx4IcL+zUai7CerJeAXBWWC1CiAXP4VeSy0qrleG8rMOAiCLHMboAmf2VJFZhhleLs3RQuEFiRftqBX1mck3YhygKqIihZmI8grFCcLdPFPCkelr3ouStYAv+FQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCquSzTv8w+zsaHjdMUUeBuak1ZTlUiTwDreEuW8fHMW/W2wpJPXZDtNxX3tZ+JIfWnQ4yO2W27aiQcCLNdJTiz2Vd2IgCL3+j9CIKPDt3Gwl+luiXQMvVfnOeyIxcbJJkmPVF5bXXL1igUvpr1ESXLEF9zYABIIGdNJWC4cOJe1wIDAQAB"},D={rq_http:"http://",bpm:"https://fastpre.cnsuning.com/bpmpre",order:"https://orderpre.cnsuning.com",crdNode:"https://fastpre.cnsuning.com/crdnodepre",cms:"https://fastpre.cnsuning.com/libpre",act:"http://actpre.cnsuning.com",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsd6gnhd1htzeYpozsya/f07jAG3CcMb27sV3i0PBiI+EnWuXQmupMDuGucnetSb8m/ELYOc03ira/I7upioaxSubnuGzAX+zZNQCNhAGKJjiG15w2HzPW4LUtLskUYQ6+2j0Uf/qAmh71hkKNvCOJAmuZvw5Hsd/CAWutN2FlSwIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPjK29RXWvPqpfOGFNj4YG8EJLM5/phCaaHjXkXkslRVbeoY9oS11dDWhrjEu4F/EOmjSCBO3kmlWmMuQNyWcGNZqzIoAuzv5clNjKRJAMFqPwC6Rqxdel/7uW3TQVyavcH3jeS0SwlXwCrYjG08JFtp4LJxKhESWSntSuWpc2eQIDAQAB"},S={rq_http:"http://",bpm:"https://fastxgpre.cnsuning.com/bpmxgpre",order:"https://orderprexg.cnsuning.com",crdNode:"http://crdnode-xgpre.cnsuning.com",cms:"https://fastxgpre.cnsuning.com/libprexg",act:"http://fastxgpre.cnsuning.com/actprexg",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCq+iyJd8UHVLELegvDtnnhoLs7FTQ+VJxkGLRc5UcHSo7m5jhivbX+q0Vfp8endPcE0ZrFCxn0JZ11w0G46o87kPdeUU7ULI+WVLU8aN8PtP0YLOpWiT0TFUY8eUhL3nsnprO9TC5AailndAxOE94ivx56psPS9EOFCL/zXc3nZQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPjK29RXWvPqpfOGFNj4YG8EJLM5/phCaaHjXkXkslRVbeoY9oS11dDWhrjEu4F/EOmjSCBO3kmlWmMuQNyWcGNZqzIoAuzv5clNjKRJAMFqPwC6Rqxdel/7uW3TQVyavcH3jeS0SwlXwCrYjG08JFtp4LJxKhESWSntSuWpc2eQIDAQAB"},P={rq_http:"https://",bpm:"https://fast.suning.com/ctbpm/wx/",order:"https://order.suning.com",crdNode:"https://fe.suning.com",cms:"https://fast.suning.com/lib/wx",act:"https://fast.suning.com/act/wx",publickKey:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDiRZgfyHuLVm3cxTUkbuoS2YgSyFeZlJEwhZ8vplGZoFIJo8qrrdtozx/i9kE1b76PJ4nSm+d+CIRqAG3lONIsjzMx0IVLrcAauzF7VNjJ3tcgYeOdfpKW3A4Qmv1jafO0H81xJEdJ0Gc0u7oIIOnIAURcgzksKr/4nGaMTsMDpQIDAQAB",publickKey2:"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCquSzTv8w+zsaHjdMUUeBuak1ZTlUiTwDreEuW8fHMW/W2wpJPXZDtNxX3tZ+JIfWnQ4yO2W27aiQcCLNdJTiz2Vd2IgCL3+j9CIKPDt3Gwl+luiXQMvVfnOeyIxcbJJkmPVF5bXXL1igUvpr1ESXLEF9zYABIIGdNJWC4cOJe1wIDAQAB"},_={rq_http:"https://",order:"https://fast.suning.com/order/wx",crdNode:"https://fast.suning.com/fe/wx",act:"https://fast.suning.com/act/wx",cms:"https://fast.suning.com/lib/wx"},k={publickKey:L().publickKey,bpmBizExcpUrl:L().bpm+"/dc-web/excp.gif",act:L().act,cms:L().cms,rq_http:L().rq_http,order:{orderList:L().order+"/xcx/order/queryList.do",orderDetail:L().order+"/xcx/order/queryDetail.do",reviewGiftLogistic:L().order+"/xcx/logistic/queryReviewGiftLogistic.do",logisticsDetail:L().order+"/wap/logistic/queryLogisticDetail.do",logisticsXcxDetail:L().order+"/xcx/logistic/queryLogisticDetail.do",queryPayMethods:L().order+"/xcx/pay/queryPayMethods.do",deleteOrder:L().order+"/wap/onlineOrder/deleteOrder.do",cancelOrder:L().order+"/wap/onlineOrder/cancelOrder.do",queryOrderConfirm:L().order+"/wap/order/queryOrderConfirm.do",confirmCShopOrder:L().order+"/wap/onlineOrder/confirmCShopOrder.do",confirmFactoryOrder:L().order+"/wap/onlineOrder/confirmFactoryOrder.do",queryECertificate:L().order+"/wap/order/queryECertificate.do",queryOrderPayerList:L().order+"/wap/identity/queryOrderPayerList.do",addPayer:L().order+"/wap/identity/addPayer.do",queryCouponUsable:L().order+"/wap/promotion/queryCouponUsable.do",deletePayer:L().order+"/wap/identity/deletePayer.do",omsSavePayer:L().order+"/wap/identity/omsSavePayer.do",queryEinvoice:L().order+"/wap/order/queryEleInvoice.do",queryWechatGift:L().order+"/xcx/order/opera/queryWechatGift.do",pay:{signature:L().crdNode+"/wx/node/pay/getAppIdAndSignature/mainApp/",toWxpay:L().order+"/wap/pay/toWxpay.do"}}};function L(){return{sit:x,pre:D,prod:P,prodFast:_,xgpre:S}[b]}t.exports=k})),window.define("870",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";t.exports={showFunc:function(e,t){var a=null;switch(e.btnType){case"3":case"4":a=!(!t.orderFlag||"1"!=t.orderFlag.eppAndAliToWxPaySwitch||"1"!=t.orderFlag.wxPaySwitch||"0"!=t.orderFlag.storePreSaleFlag);break;case"32":a=!(!("08"==t.payMethod||t.payInfo&&"微信支付"==t.payInfo.payMethod)||"1"!=t.orderFlag.wxPaySwitch||"0"!=t.orderFlag.storePreSaleFlag);break;case"12":case"13":a="待支付"==t.transStatus||"待付定金"==t.transStatus;break;case"36":case"1":case"31":a="1"==t.orderFlag.wxpayFlag&&"1"==t.orderFlag.wxPaySwitch&&"0"==t.orderFlag.storePreSaleFlag;break;case"2":case"37":a="1"==t.orderFlag.wxpayFlag&&"1"==t.orderFlag.wxPaySwitch&&"0"==t.orderFlag.storePreSaleFlag;break;case"34":case"35":case"10":case"17":case"18":a=!0;break;case"6":case"7":case"26":case"28":case"38":case"10000":a=!0;break;case"8":a=!1;break;case"20":case"44":a=!0;break;case"14":case"15":case"18":case"19":case"24":case"25":case"21":case"23":case"27":case"29":a=!1;break;default:a=!1}return a}}})),window.define("873",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(135);Page({data:{pdfUrl:""},downloadFile:function(){n.showLoading({title:"下载中"}),n.downloadFile({url:this.data.pdfUrl,success:function(e){console.log(e),n.hideLoading();var t=e.tempFilePath;n.openDocument({filePath:t,success:function(e){console.log("打开文档成功")}})},fail:function(e){n.hideLoading(),b.showToast({title:"下载失败"}),console.log(e)}})},onLoad:function(e){console.log(e),console.log(e.id),this.setData({pdfUrl:e.id})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("876",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(868),x=e(25),D=x.goodImageUrl,S=x.checkLogin,P=x.saSendPageViewLog;i();Page({data:{saPgnm:"pgcate=10009;pgtitle=确认收货",order:{},saPvId:""},onLoad:function(e){var t=this;S().then((function(){t.initialize(e)})).catch((function(){}))},initialize:function(e){this.queryOrderConfirm(e)},queryOrderConfirm:function(e){var t=this;n.showLoading({title:"加载中"}),b._queryOrderConfirm(e).then((function(e){e&&"0"!=e.retCode&&b.snBusError("ofs_wsddqrsh_"+e.retCode,{errorDesc:"确认收货失败，请稍后重新尝试。（"+e.retCode+"）"},1,"025","order.suning.com/wap/order/queryOrderConfirm.do"),e=e||{},t.setData({order:t.parseOrderConfirm(e)}),n.hideLoading()})).catch((function(){}))},parseOrderConfirm:function(e){return e.cShopPkgList.forEach((function(t,a){t.orderItemList.forEach((function(t,a){t.productImgUrl?t.imgUrl=t.productImgUrl:t.imgUrl=D(t.partNumber,t.supplierCode,"",e.vendorCode,120)}))})),e.factoryPkgList.forEach((function(t,a){t.orderItemList.forEach((function(t,a){t.productImgUrl?t.imgUrl=t.productImgUrl:t.imgUrl=D(t.partNumber,t.supplierCode,"",e.vendorCode,120)}))})),console.log(e),e},confirmOrderAll:function(e){var t,a=this.data.order,o=[],n=[],i=[];a.factoryPkgList&&a.factoryPkgList.length?(o=a.factoryPkgList,t="factoryPkgList"):a.cShopPkgList&&a.cShopPkgList.length&&(o=a.cShopPkgList,t="cShopPkgList"),o.forEach((function(e,t){e.orderItemList.forEach((function(e,t){n.push(e.itemId),i.push(e.omsItemId)}))})),n=n.join("_"),i=i.join("_"),b.confirmOrder({target:"factoryPkgList"==t?"factory":"cshop",orderId:a.orderId,omsItemIds:i,itemIds:n,vendorCode:a.vendorCode})},confirmOrder:function(e){var t=e.currentTarget.dataset.index,a=e.currentTarget.dataset.target,o=this.data.order,n=o[a][t].orderItemList||[],i=[],r=[];n.forEach((function(e,t){i.push(e.itemId)})),i=i.join("_"),n.forEach((function(e,t){r.push(e.omsItemId)})),r=r.join("_"),b.confirmOrder({target:"factoryPkgList"==a?"factory":"cshop",orderId:o.orderId,omsItemIds:r,itemIds:i,vendorCode:o.vendorCode})},onReady:function(){},onShow:function(){P()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){}})})),window.define("879",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=e(868),D=e(135),S=e(25),P=(S.login,S.getWXUserInfo,S.checkLogin),_=S.saSendPageViewLog;r();Page({data:{saPgnm:"pgcate=10009;pgtitle=海外购实名认证",lists:[],omsItemIds:"",orderId:"",omsOrderId:"",onshowOptions:"",vendorCodeNew:"",payerListLen:"",saPvId:""},onLoad:function(e){this.setData({options:e,onshowOptions:e})},initialize:function(e){this.queryOrderPayerList(e)},queryOrderPayerList:function(e){var a=this;i.showLoading({title:"加载中"}),t((function(){i.hideLoading()}),2e3);x._queryOrderPayerList(e).then((function(e){e&&"0"!=e.retCode&&x.snBusError("ofs-hwg-10064_"+resp.retCode,{errorDesc:resp.errMsg||""},1,"025","order.suning.com/wap/identity/queryOrderPayerList.do"),e=e||{},a.parseOrderPayerList(e)})).catch((function(){i.hideLoading(),x.snBusError("ofs-hwg-10064_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/identity/queryOrderPayerList.do")}))},goBack:function(){i.navigateBack()},parseOrderPayerList:function(e){if(e&&"0"==e.retCode){e.payerList&&e.payerList.length&&e.payerList.forEach((function(e){e.payerName=e.payerName&&e.payerName.length>16?e.payerName.substr(0,16)+"...":e.payerName})),this.setData({getDataSuccess:!0,lists:e,vendorCodeNew:e.order&&e.order.itemList&&e.order.itemList[0].vendorCode});var t=e.payerList&&e.payerList.length,a=e.order.itemList,o="";a.length&&a.forEach((function(e){o+=e.omsItemId+"_"})),o=o.substring(0,o.length-1),this.setData({omsItemIds:o,payerListLen:t,orderId:e.order.orderId,omsOrderId:e.order.omsOrderId})}else this.setData({pageShow:!0,getDataSuccess:!1});i.hideLoading()},addPayer:function(){this.data.payerListLen&&this.data.payerListLen>19?D.showToast({title:"抱歉,您只能新增20个付款人"}):i.navigateTo({url:"addPayer/index"})},goSeeRealInfo:function(){i.navigateTo({url:"seeReal/index"})},useInfo:function(e){var a=this,o={orderId:this.data.omsOrderId,omsItemIds:this.data.omsItemIds,payerName:encodeURI(e.target.dataset.payname),certNo:e.target.dataset.certno};x._omsSavePayer(o).then((function(e){e&&"0"==e.retCode?(D.showToast({title:e.errMsg||"保存成功"}),t((function(){"0"==a.data.onshowOptions.type?i.redirectTo({url:"../orderList?index=0"}):"1"==a.data.onshowOptions.type&&i.redirectTo({url:"../orderDetail?orderId="+a.data.orderId+"&vendorCode="+a.data.vendorCodeNew})}),2500)):D.showToast({title:e.errMsg||"保存失败"})})).catch((function(){}))},deleteInfo:function(e){var a=this,o=e.target.dataset.payernum,n=e.target.dataset.payername,r={payerNum:o},s=this;i.showModal({title:"",content:"确定删除“"+n+"”的信息",confirmColor:"#f60",complete:function(e){e.confirm?x._deletePayer(r).then((function(e){e&&"0"==e.retCode?(D.showToast({title:e.errMsg||"删除成功"}),t((function(){var e=a.data.onshowOptions;P().then((function(){s.initialize(e)})).catch((function(){}))}),2e3)):D.showToast({title:e.errMsg||"删除失败"})})).catch():e.cancel&&console.log("cancel")}})},onReady:function(){},onShow:function(e){e=this.data.onshowOptions;var t=this;P().then((function(){t.initialize(e)})).catch((function(){})),_()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){}})})),window.define("882",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=e(26),D=e(868),S=e(869),P=e(135);r();Page({data:{legalName:!1,legalCard:!1,legalNameVal:"",legalCardVal:"",selectRel:!0,defaultFlag:1},onLoad:function(e){},onReady:function(){},selectRel:function(){this.setData({selectRel:!this.data.selectRel,defaultFlag:"1"==this.data.defaultFlag?"0":"1"})},isblur:function(e){var t=e.detail.value;switch(e.target.dataset.id){case"name":D._isValidatorName(t).allEnable?this.setData({legalName:!0,legalNameVal:t}):D._isValidatorName(t).emptyRule?D._isValidatorName(t).countRule&&D._isValidatorName(t).illegalRule||(this.setData({legalName:!1}),P.showToast({title:"您的姓名格式不正确"})):(this.setData({legalName:!1}),P.showToast({title:"请输入信息"}));break;case"card":D._isCardNo(t).allEnable?this.setData({legalCard:!0,legalCardVal:t}):D._isCardNo(t).emptyRule?(this.setData({legalCard:!1}),P.showToast({title:"您的身份证格式不正确"})):(this.setData({legalCard:!1}),P.showToast({title:"请输入信息"}))}},submitSave:function(e){if(this.data.legalName&&this.data.legalCard){try{var a=new x.JSEncrypt,o=(a.setPublicKey(S.publickKey),a.encrypt(this.data.legalCardVal))}catch(e){console.log(e)}var n={payerName:encodeURI(this.data.legalNameVal),certNo:encodeURIComponent(o),defaultFlag:this.data.defaultFlag};D._addPayer(n).then((function(e){if("0"==e.retCode)P.showToast({title:e.errMsg||"新增成功"}),t((function(){i.navigateBack({})}),1500);else{D.snBusError("ofs-hwg-10064_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","order.suning.com/wap/identity/addPayer.do")}})).catch((function(e){console.log(e),D.snBusError("ofs-hwg-10064_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/identity/addPayer.do")}))}},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){}})})),window.define("885",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({data:{},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("888",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=i(),_=1,k=1,L=!1,R="1";Page({data:{showBottom:!1,showToTop:!1,screenH:0,screenW:0,isLoading:!1,awardwList:[],awardTypeIcon:{2:"sma",3:"yunzhuan",4:"shiwu",9:"youhuijuan",10:"shiwu",11:"yibuhezuo",12:"youhuijuan",13:"dianzishu",14:"dianzijuan"}},onLoad:function(e){this.getSystemInfo(),this.init()},onReady:function(){},onShow:function(){},init:function(){var e=this;console.log("登录状态：",P.globalData.isLogin),D().then((function(){e.getAwardList()})).catch((function(){}))},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){e.setData({screenH:Number(t.windowHeight),screenW:Number(t.windowWidth)})}})},getAwardList:function(){if(!(_>k)){var e=this;n.showLoading({title:"加载中",mask:!0}),e.setData({isLoading:!0});var t={url:S.luckyProxy+"/award/my/awardByWapByType.html",data:{type:"",pageNumber:_}};x(t).then((function(t){var a=[];t&&(k=t.pageCount,a=t.datas||[],a=e.setAwardData(a)),a.length<10&&(L=!0,e.setData({showBottom:!0}));var o;o=e.data.awardwList.concat(a),console.log("请求数据",o),e.setData({awardwList:o,isLoading:!1}),n.hideLoading()})).catch((function(){e.setData({isLoading:!1}),n.hideLoading()}))}},loadMore:function(){this.data.isLoading||L||(_++,this.getAwardList())},onTapMove:function(){this.setData({scrollTop:0})},scroll:function(e){var t=e.detail.scrollTop;this.setData({showToTop:t>2*this.data.screenH})},setAwardData:function(e){for(var t=0;t<e.length;t++)e[t].awardStateDes=this.setState(e[t]),e[t].winDt=e[t].winDt.substring(0,19),e[t].sendDtDes=this.setDrawTime(e[t]),e[t].drawBtnInfo=this.setDrawBtn(e[t]);return console.log(e),e},setState:function(e){var t="",a=e.awardState,o=e.awardTypeId;return t+=4==o?1==a||2==a?"未领取":3==a?"已领取":6==a?"待发货":7==a?"已过期":"发放中":10==o?1==a||6==a||2==a?"未领取":3==a?"已领取":7==a?"已过期":"发放中":11==o?"已发放":1==a?"未领取":3==a||6==a?"已领取":7==a?"已过期":"发放中"},setDrawTime:function(e){var t="",a=e.awardState,o=e.awardTypeId;return 10==o&&3==a&&(t+="领取时间："+e.sendDt.substring(0,19)),(10!=o&&4!=o||1!=a&&2!=a)&&(10!=o||6!=a)||(t+="请于 "+e.endDate.substring(0,11)+" 前领取"),console.log("时间",t),t},setDrawBtn:function(e){var t={class:"",des:""},a=e.awardState,o=e.awardTypeId;return 4==o?1==a||2==a?t={class:"btn-get",des:"领取"}:3!=a&&6!=a||(t={class:"btn-done",des:"发货详情"}):10==o?1==a?t={class:"btn-get",des:"领取"}:2!=a&&6!=a||(t={class:"btn-done",des:"领取"}):11==o||(1==a?t={class:"btn-get",des:"领取"}:3!=a&&6!=a||"2"==o||"13"==o||"3"!=o&&"12"!=o&&"14"!=o&&(t={class:"btn-done",des:"我的优惠券"})),t},shopTipsClick:function(){n.showModal({title:"",content:"抱歉，该功能暂未开通，您可到网站或APP中查看",showCancel:!1,confirmText:"知道了",success:function(e){}})},onClick:function(e){var t=e.currentTarget.dataset.item,a=t.awardState,o=t.awardTypeId;4==o?1==a?this.sendAwardWap(t):2==a?this.maGet(t):(3==a||6==a)&&this.maDelivery(t):10==o?1==a?this.sendAwardWap(t):2!=a&&6!=a||this.viewLocalPrize(t):1==a?this.sendAwardWap(t):3!=a&&6!=a||"2"==o||"13"==o||"3"!=o&&"12"!=o&&"14"!=o&&(console.log("优惠券"),n.navigateTo({url:"../quan/quanList"}))},sendAwardWap:function(e){var t=this;n.showLoading({title:"正在领取",mask:!0});var a=e.actCode,o=e.awardId,i=e.actWinId,r=e.awardTypeId,s={url:S.luckyProxy+"/award/receive.do",method:"post",data:{actCode:a,awardId:o,winId:i}};x(s).then((function(a){if(n.hideLoading(),"0"==a.resultCode)if(4==r)t.maGet(e);else if(10==r)t.viewLocalPrize(e);else{var o=t.data.awardwList.map((function(t){return t.actWinId===e.actWinId?Object.assign({},t,{awardState:"3",awardStateDes:"已领取",drawBtnInfo:{des:""}}):t}));t.setData({awardwList:o}),n.showToast({title:"领取成功",icon:"none",duration:2e3})}else"1606"==data.resultCode||"1524"==data.resultCode?n.showToast({title:"请先绑定手机号",icon:"none",duration:2e3}):"1525"==data.resultCode||"1526"==data.resultCode?n.showToast({title:"很遗憾，您还不是我们的企业员工会员，本活动只有苏宁易购企业会员可以参加，申请加入企业会员!",icon:"none",duration:2e3}):n.showToast({title:data.resultMsg,icon:"none",duration:2e3})})).catch((function(){n.hideLoading()}))},maGet:function(e){var t=e.actCode,a=e.actWinId,o=S.lucky+"/award/my/address/"+t+"_"+a+".html?channel="+R;n.navigateTo({url:"/pages/webView/index?webViewSrc="+o})},viewLocalPrize:function(e){var t=e.actCode,a=e.actWinId,o=S.lucky+"/award/my/qrcode/"+t+"_"+a+".html?channel="+R;n.navigateTo({url:"/pages/webView/index?webViewSrc="+o})},maDelivery:function(e){var t=e.actCode,a=e.actWinId,o=e.compCode,i=S.lucky+"/award/deliever_"+t+"_"+a+"_"+(o||"")+".html?channel="+R;n.navigateTo({url:"/pages/webView/index?webViewSrc="+i})}})})),window.define("891",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=D(e(328));D(e(333));function D(e){return e&&e.__esModule?e:{default:e}}var S=e(868),P=e(869),_=e(77).saSendLog,k=e(25),L=k.goodImageUrl,R=k.saSendPageViewLog,A=(k.snBusError,k.checkLogin),j=k.requestPromise;r(),e(135);Page({data:{pageid:"775",saPgnm:"pgcate=10009;tag=100125;pgtitle=物流",indicatorDots:!1,autoplay:!1,interval:1e3,duration:500,alertImg:!1,currentTab:0,logisticsData:{},currentLogistics:{},optionsData:"",haveData:"",noData:"",img_index:0,showTuijianFlag:!1,customerChannelInfo:{}},changeIndicatorDots:function(e){this.setData({indicatorDots:!this.data.indicatorDots})},changeAutoplay:function(e){this.setData({autoplay:!this.data.autoplay})},intervalChange:function(e){this.setData({interval:e.detail.value})},durationChange:function(e){this.setData({duration:e.detail.value})},bindchangeTag:function(e){var t=e.detail.current;this.setData({img_index:t}),console.log("bindchangeTag...")},autoclick:function(e){_("click",{event:e})},suyuan:function(e){var t=e.currentTarget.dataset.url;t&&(t=t.replace(/^\/\//,x.default.rq_http),i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}))},onLoad:function(e){var t=this;this.setData({optionsData:e}),A().then((function(){t.initialize(e)})).catch((function(){}))},swichNav:function(e){i.showLoading({title:"加载中"});var a=e.target.dataset.current,o=this.data.logisticsData.pkgList[a];this.setData({currentTab:e.target.dataset.current,currentLogistics:o}),t((function(){i.hideLoading()}),300)},alertImg:function(e){e.currentTarget.dataset.imgLength;this.setData({alertImg:!0})},closeAlertImg:function(){this.setData({alertImg:!1})},callPhone:function(e){var t=e.currentTarget.dataset.pickUpPhone;t&&i.makePhoneCall({phoneNumber:t})},expPhone:function(e){var t=e.currentTarget.dataset.expCompPhone;t&&i.makePhoneCall({phoneNumber:t})},freshen:function(){var e=this;A().then((function(){e.initialize(e.data.optionsData)})).catch((function(){}))},copyExpo:function(e){var t=e.currentTarget.dataset.expNo;i.setClipboardData({data:t,success:function(e){i.showToast({title:"复制成功",icon:"success",duration:2e3}),i.getClipboardData({success:function(e){console.log(e.data)}})}})},copyAddress:function(e){var t=e.currentTarget.dataset.receiverAddr;i.setClipboardData({data:t,success:function(e){i.showToast({title:"复制成功",icon:"success",duration:2e3}),i.getClipboardData({success:function(e){console.log(e.data)}})}})},onReady:function(){console.log("onReady")},onerror:function(e){if("error"==e.type){var t=this.data.currentLogistics;t.itemList[0].productImgUrl="https://res.suning.cn/images/ShoppingArea/Common/blankbg.gif",this.setData({currentLogistics:t})}},initialize:function(e){var a=this;i.showLoading({title:"加载中"}),this._queryDetailLogistics(e).then((function(o){if(o&&"0"==o.retCode){var n=o&&o.pkgList&&o.pkgList.length,r=o.showTuijianFlag,s=o.customerChannelInfo;o&&o.pkgList.forEach((function(e){e.total_quality=0,e.checkCode&&e.checkCode.length>4&&(e.checkCode1=e.checkCode.substr(0,2),e.checkCode2=e.checkCode.substr(2,3),e.checkCode3=e.checkCode.substr(5,7)),e.itemList.forEach((function(t){e.total_quality+=parseInt(t.qty)})),e.logisticList.forEach((function(e,t){var a=e.content,o=a.match(/((((13[0-9])|(15[^4])|(18[0,1,2,3,5-9])|(17[0-8])|(147))\d{8})|((\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}))?/g),n=o.findIndex((function(e){return 0!=e.length})),i=o.find((function(e){return 0!=e.length}));n>0?(e.havePhone=!0,e.str1=a.substr(0,n),e.str2=i,e.str3=a.substr(n+i.length,a.length)):(e.str1=a,e.str2="",e.str3="")})),e.itemList.forEach((function(e){"1"==o.reviewGiftFalg?e.productImgUrl="https://res.m.suning.com/project/cart/images/css_images/zpwl.png":"1"==e.itemType?e.productImgUrl="https://res.m.suning.com/project/cart/images/css_images/sun_package.png":e.productImgUrl?e.productImgUrl=e.productImgUrl.replace(/^\/\//,x.default.rq_http):e.productImgUrl||(e.productImgUrl=L(e.partNumber,e.supplierCode,"",o.vendorCode,120))}))})),o.packageQuantity=n,a.setData({logisticsData:o,currentLogistics:o.pkgList[0],customerChannelInfo:s,haveData:!0,noData:!1}),"1"==r&&a.setData({showTuijianFlag:!0}),t((function(){i.hideLoading()}),500)}else a.setData({haveData:!1,noData:!0}),e.omsItemId?(S.snBusError(),S.snBusError("ofs-newwlmxdetail-20127 _"+o.retCode,{errorDesc:o.errMsg||""},1,"025","order.suning.com/xcx/logistic/queryReviewGiftLogistic.do")):S.snBusError("ofs-newwlmxdetail-20123 _"+o.retCode,{errorDesc:o.errMsg||""},1,"025","order.suning.com/xcx/logistic/queryLogisticDetail.do"),t((function(){i.hideLoading()}),500)})).catch((function(e){console.log(e),i.hideLoading(),a.setData({haveData:!1,noData:!0})}))},_queryDetailLogistics:function(e){var t=e||{},a={orderId:t.orderId||"",vendorCode:t.vendorCode||""},o={orderId:t.orderId||"",vendorCode:t.vendorCode||"",omsItemId:t.omsItemId||""},n=t.omsItemId?o:Object.assign({},a,{version:"20190422"});return j({method:"GET",url:t.omsItemId?P.order.reviewGiftLogistic:P.order.logisticsXcxDetail,data:n})},onShow:function(){R()},onHide:function(){},onUnload:function(){}})})),window.define("894",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(868),x=e(125).formid,D=e(25),S=(D.formatTime,D.goodImageUrl),P=D.checkLogin,_=D.saSendPageViewLog;i();Page({data:{saPgnm:"pgcate=10009;tag=100125;pgtitle=物流",showTab:!1,showImg:!1,showExp:!1,showLogistics:!1,pkgIndex:0,numFilter:["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"]},onLoad:function(e){var t=this;P().then((function(){t.initialize(e)})).catch((function(){}))},goToZsq:function(e){x(e)},initialize:function(e){this.queryLogisticsDetail(e)},queryLogisticsDetail:function(e){var t=this;n.showLoading({title:"加载中"});(e.omsItemId?b._queryReviewGiftLogisticsDetail(e):b._queryLogisticsDetail(e)).then((function(e){e&&"0"!=e.retCode&&b.snBusError("ofs-ckwlzy-10034_"+e.retCode,{errorDesc:"啊哦~服务器开小差了，请稍后再试~（"+e.retCode+"）"},1,"025","order.suning.com/wap/logistic/queryLogisticDetail.do"),n.hideLoading(),(e=e||{}).pkgList.forEach((function(a,o){1==a.showExpFlag&&t.setData({showPkgs:!0}),a.itemList.forEach((function(t,a){1!=e.reviewGiftFalg?t.productImgUrl?t.imgUrl=t.productImgUrl:t.imgUrl=S(t.partNumber,t.supplierCode,"",e.vendorCode,120):t.imgUrl="https://res.m.suning.com/project/cart/images/css_images/zpwl.png"}))})),console.log(e),t.setData({detail:e,queryDone:!0});var a=e.pkgList,o=t.data.pkgIndex;t.setData({showTab:a.length>1,showImg:a.length>1&&a[o].itemList.length>0||1==a.length&&a[o].itemList.length>1||1==e.reviewGiftFalg,showExp:a.length>0&&1==a[o].showExpFlag||1==e.reviewGiftFalg,showLogistics:a.length>0&&a[o].logisticList.length>0})})).catch((function(){}))},goFourth:function(e){var t=e.currentTarget.dataset.part,a=e.currentTarget.dataset.shop;n.navigateTo({url:"/pages/fourth/fourth?productId="+t+"&shop="+a})},selectPkg:function(e){var t=e.currentTarget.dataset.pkg,a=this.data.detail.pkgList;this.setData({pkgIndex:t}),this.setData({showTab:a.length>1,showImg:a.length>1&&a[t].itemList.length>0||1==a.length&&a[t].itemList.length>1,showExp:a.length>0&&1==a[t].showExpFlag,showLogistics:a.length>0&&a[t].logisticList.length>0})},onReady:function(){},onShow:function(){_()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){}})})),window.define("897",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=S(e(78)),D=S(e(54));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(e(25));function S(e){return e&&e.__esModule?e:{default:e}}var P=e(25),_=P.counponRequestWithSession,k=P.requestPromiseWx,L=P.toFixed,R=P.extend,A=P.MD5,j=(e(20),e(19).getLocation),O=e(8),q=e(17),M=e(276),F=e(22),U=e(135),N=e(77).saSendLog,E=-1,B=0,G=[];var V=function(e,t,a){return i.showLoading({title:"加载中"}),a.setData({isLoading:!0}),new Promise((function(o,n){j().then((function(n){var r,s=n.cityLESId||"10",c=(0,x.default)()||{};if(a.setData({cityObj:{cityName:n.cityName,provinceMDMId:n.provinceMDMId,districtMDMId:n.districtMDMId,cityMDMId:n.cityMDMId}}),a.offenBuy){var d=A(a.id+c.custno+a.md5Key);r=(c.custno||"")+"_"+d,console.log("券编码：",a.id,"会员编码：",c.custno,"常购MD5：",a.md5Key,"拼接完成参数：",r)}else r=c.custno||"";var u=[s,e,B||"0",a.inputText,a.data.filterOptions.ci,10,t||0,a.data.filterOptions.st,a.data.filterOptions.ct,a.data.filterOptions.iv,r,a.data.highFilterOptions.cf],l=q.quan.ebuy+u.join("-")+".json";console.log("券主接口：",l),i.request({url:l,success:function(e){console.log(e.data);var a=[{name:"分类",id:"",childList:[{id:"",name:"全部分类",parentId:""}]}];(e.data.categories&&e.data.categories.filter((function(e){return 0!=e.childList.length}))||[]).forEach((function(e){var t;(t=a).push.apply(t,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(e.childList))})),a=a.map((function(e){return e.id&&e.childList.unshift({name:"全部"+e.name,id:e.id,parentId:e.id}),e}));var n=e&&"200"==e.statusCode&&e.data||{};G.length?n.categoriesNew=G:(n.categoriesNew=a,G=a),n.cityId=s,n.currentPage=t,o(n)},fail:function(){o({})}})}))}))},H=function(e,t,a,o){V(e,t,a).then((function(t){(function(e,t){return new Promise((function(a,o){var n=t.curPid,r=e.goods||[],s=e.cityId||"10",c=e.goodsCount||0,d=parseInt(e.currentPage)||0,u=[],l=e.filters||[],g=e.categoriesNew,p=e.categoriesNew.find((function(e){return e.id==n})).childList||[],h=[];if(0==r.length)return a({goods:[],totalPage:0,currentPage:0,categoriesNew:g,childCategoriesNew:p,prevSearchWd:t.inputText}),t.setData({saPgnm:"pgcate=10007;tag=100086;pgtitle=小程序-用券搜索无结果页;ticketID="+t.id}),void N("pageview");t.setData({saPgnm:"pgcate=10007;tag=100086;pgtitle=小程序-用券搜索结果页;ticketID="+t.id}),r.forEach((function(e,t){e.extenalFileds.specifiedSub?u.push(("000000000000"+e.extenalFileds.specifiedSub).slice(-18)):u.push(e.partnumber),h.push(e.vendor)}));var f=q.icps+u.join(",")+"_"+s+"__"+h.join(",")+"_5_CPFCallback1504150510242.vhtm";i.request({url:f,success:function(e){var o=e&&"200"==e.statusCode&&e.data||{},n=o&&F(o);r.forEach((function(e,a){e.hasAddCartBtn=!(e.extenalFileds&&e.extenalFileds.subCodes&&e.extenalFileds.subCodes.length>0&&"A"==t.data.cartAbTest),e.praiseRateShow=parseInt(100*e.praiseRate,10),e.imgSrc?e.uimg=O.aImg+e.imgSrc+"_400w_400h_4e":e.uimg=O.img+"/uimg/b2c/newcatentries/"+e.vendor+"-"+e.partnumber+"_1_400x400.jpg";for(var o,i,r=e.extenalFileds.specifiedSub?("000000000000"+e.extenalFileds.specifiedSub).slice(-18):e.partnumber,s=0;s<n.length;s++){var c=n[s];if(c.cmmdtyCode==r){e.supplierCode=c.supplierCode,e.priceType=c.priceType,e.snPrice=c.snPrice,e.govPrice=c.govPrice,e.price=c.price.split("."),e.refPrice=c.refPrice,e.promotionLable=(o=c.priceType,i=void 0,i="","4-1"==o?i="大聚惠":"4-14"==o?i="特卖":"7-1"==o||"7-2"==o||"7-3"==o||"7-4"==o||"12-1"==o||"12-2"==o?i="预约":"8-1"==o||"8-3"==o||"13-1"==o?i="预定":"8-2"!=o&&"8-4"!=o&&"13-2"!=o||(i="定金团"),i),e.status=c.status,e.invStatus=c.invStatus,e.hasAddCartBtn=!!("1,3,4-1,4-2,4-5,4-12".indexOf(c.priceType)>-1&&e.hasAddCartBtn),e.extenalFileds&&e.extenalFileds.businessField1&&"06"==e.extenalFileds.businessField1&&(e.hasAddCartBtn=!1),1==c.status&&"1"==c.invStatus||"7-1"==c.priceType&&"7-2"==c.priceType?e.statusTetx=!1:e.statusText="暂不销售";break}}})),a({goods:r,totalPage:parseInt(c/10),currentPage:d,categoriesNew:g,filters:l,childCategoriesNew:p,prevSearchWd:t.inputText})},fail:function(){a({goods:[],filters:[],totalPage:0,currentPage:0,categoriesNew:g,childCategoriesNew:p})}})}))})(t,a).then((function(t){if(o)t.id=e,t.isLoading=!1,a.setData(t);else if(-1==E)t.id=e,t.isLoading=!1,a.setData(t),E=0;else{var n=a.data.goods||[],r=t.currentPage,s=a.data.filters||[],c=t.totalPage;a.setData({id:e,goods:n.concat(t.goods),currentPage:r,totalPage:c,filters:s,isLoading:!1,showClearText:!0,prevSearchWd:a.inputText},(function(){N("autoexpo",a)})),E=r}i.hideLoading()}))}))};Page({detectTouchStart:D.default.detectTouchStart,detectTouchMove:D.default.detectTouchMove,detectTouchEnd:D.default.detectTouchEnd,detectTap:D.default.detectTap,detectLongPress:D.default.detectLongPress,data:{pageid:"ticketPage",saPgnm:"pgcate=10007;tag=100086;pgtitle=小程序-用券搜索结果页;",currentPage:0,isLoading:!1,totalCount:0,totalPage:0,totalPrice:"0.00",difference:!1,finish:!1,imageHost:O.res,xltext:"综合",fltext:"",filterOptions:{st:0,cf:"",ci:"",ct:"",iv:"",hwg:""},filters:[],highFilterOptions:{minPrice:"",maxPrice:"",cf:"",cityId:""},scrollTop:"",categoryPId:"",filterMask:!1,classFilter:!1,sortFilter:!1,ov:!1,showFilter:!1,categoryDetail:!1,citysBox:!1,showBrandList:!1,showToTop:!1,flObj:{},cityObj:{},allBrands:{},toCartJug:!1,couponAllShow:!1,couponMsg:"全部",couponClass:"",showClearText:!0,prevSearchWd:""},curPid:"",toBrandList:function(e){var t=this.data.filters[0].values||[];t.sort((function(e,t){return e.valueDescSpellHead.charCodeAt(0)-t.valueDescSpellHead.charCodeAt(0)}));var a=new Object;a["#"]=[];for(var o=0;o<26;o++){a[String.fromCharCode(65+o)]=[]}var n=!0,i=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value;a[d.valueDescSpellHead].push(d)}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}this.setData({showBrandList:!0,allBrands:a}),N("manuclick",Object.assign({},e.currentTarget.dataset))},mainScroll:function(e){e.detail.scrollTop>this.data.screenHeight?this.data.showToTop||this.setData({showToTop:!0}):this.data.showToTop&&this.setData({showToTop:!1})},brandConfirm:function(){var e=new Array,t=this.data.allBrands;for(var a in t)t[a].forEach((function(t){t.checked&&e.push(t.value)}));var o=this.data.filters[0].values||[];o.forEach((function(t){e.indexOf(t.value)>-1?t.checked=!0:t.checked=!1})),this.data.filters[0].values=o,this.setData({filters:this.data.filters,showBrandList:!1})},brandRest:function(){var e=this.data.allBrands;for(var t in e)e[t].forEach((function(e){e.checked=!1}));this.setData({allBrands:e})},brandsCheck:function(e){var t=e.currentTarget.dataset.key,a=e.currentTarget.dataset.index;this.data.allBrands[t][a].checked=!this.data.allBrands[t][a].checked,N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({allBrands:this.data.allBrands})},openFilter:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({showFilter:!0})},closeFilter:function(){this.setData({showFilter:!1,showBrandList:!1,categoryDetail:!1})},stopScroll:function(){this.setData({ov:!0,showClearText:!this.inputText})},toTop:function(e){e&&N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({scrollTop:0})},startScroll:function(){var e=this;t((function(){e.setData({ov:!1,showClearText:!0})}),200)},categorySelect:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({categoryDetail:!0})},priceinputRange:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset))},inputPrice:function(e){var t=this.data.highFilterOptions;t[e.target.id]=e.detail.value,this.setData({highFilterOptions:t})},changePc:function(e){var t=e.currentTarget.dataset.item,a=t.childList;N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({childCategoriesNew:a,categoryPId:t.id})},changeC:function(e){var t=e.currentTarget.dataset.item,a=t.id,o=R({},this.data.filterOptions,{ci:a});N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({filterOptions:o,fltext:t.name,filterMask:!1,classFilter:!1,sortFilter:!1,categoryDetail:!1}),this.curPid=t.parentId,E=-1,console.log("更改快筛项调接口"),H(this.id,0,this),this.toTop(!1)},hideMask:function(){this.data.categoryPId!==this.curPid?this.setData({filterMask:!1,classFilter:!1,categoryPId:this.curPid,sortFilter:!1}):this.setData({filterMask:!1,classFilter:!1,sortFilter:!1})},openSort:function(){this.data.sortFilter?this.setData({filterMask:!1,classFilter:!1,sortFilter:!1}):this.data.categoryPId!==this.curPid?this.setData({filterMask:!0,classFilter:!1,categoryPId:this.curPid,sortFilter:!0}):this.setData({filterMask:!0,classFilter:!1,sortFilter:!0})},doSn:function(e){var t="";t=1!=this.data.filterOptions.ct?1:0;var a=R({},this.data.filterOptions,{ct:t});N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({filterOptions:a}),this.hideMask(),E=-1,console.log("苏宁服务按钮调接口"),H(this.id,0,this),this.toTop(!1)},doStock:function(e){var t="";t=1!=this.data.filterOptions.iv?1:0;var a=R({},this.data.filterOptions,{iv:t});N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({filterOptions:a}),this.hideMask(),E=-1,console.log("doStock调接口"),H(this.id,0,this)},citySelect:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),i.navigateTo({url:"/packageC/pages/fourth/address/address?provinceMDMId="+this.data.cityObj.provinceMDMId+"&cityMDMId="+this.data.cityObj.cityMDMId+"&districtMDMId="+this.data.cityObj.districtMDMId})},secondFilter:function(e){var t={z:function(){return"0"},x:function(){return"8"},j:function(){return 9==this.data.filterOptions.st?"10":"9"}}[e.currentTarget.dataset.item].bind(this)();0==t&&this.setData({xltext:"综合"}),8==t&&this.setData({xltext:"销量降序"}),this.setData({filterOptions:R(this.data.filterOptions,{st:t})}),N("manuclick",Object.assign({},e.currentTarget.dataset)),this.hideMask(),E=-1,console.log("二次筛选调接口"),H(this.id,0,this),this.toTop(!1)},inputText:"",searchInput:function(e){this.inputText=e.detail.value,this.setData({searchText:e.detail.value,showClearText:!1})},doSearchByTap:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),this.hideMask(),E=-1,H(this.id,0,this)},doSearchByKeyTap:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),this.hideMask(),H(this.id,0,this,!0)},clearText:function(){var e=this;t((function(){e.inputText="",e.data.prevSearchWd&&(e.hideMask(),E=-1,console.log("清除按钮调接口"),H(e.id,0,e)),e.setData({searchText:""})}),200)},classFilter:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset)),this.data.classFilter?this.data.categoryPId!==this.curPid?this.setData({filterMask:!1,classFilter:!1,categoryPId:this.curPid,sortFilter:!1}):this.setData({filterMask:!1,classFilter:!1,sortFilter:!1}):this.setData({filterMask:!0,classFilter:!0,sortFilter:!1})},openMore:function(e){var t=this.data.flObj,a=e.currentTarget.dataset.fileritem;t[a]=!t[a],this.setData({flObj:t}),"brand_Id_Name"==a&&N("manuclick",Object.assign({},e.currentTarget.dataset))},addItems:function(e){var t=e.currentTarget.dataset.name,a=e.currentTarget.dataset.index,o=e.currentTarget.dataset.key,n=e.currentTarget.dataset.item[o],i=this.data.filters;i[a].values[o].checked=!n.checked,"brand_Id_Name"==t&&N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({filters:i})},enterSelect:function(e){var t=this.data.filters,a=new Array,o=this.data.highFilterOptions;if(t.length){var n=!0,i=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){s.value.values.forEach((function(e){e.checked&&a.push(e.value)}))}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}}var d=new Array;""==this.data.highFilterOptions.minPrice||""==this.data.highFilterOptions.maxPrice?d=(d=[this.data.highFilterOptions.minPrice,this.data.highFilterOptions.maxPrice]).map((function(e,t){return""==String(e)?e:parseInt(+e)})):parseInt(this.data.highFilterOptions.minPrice)>parseInt(this.data.highFilterOptions.maxPrice)?(d[0]=parseInt(+this.data.highFilterOptions.maxPrice),d[1]=parseInt(+this.data.highFilterOptions.minPrice)):(d[0]=parseInt(+this.data.highFilterOptions.minPrice),d[1]=parseInt(+this.data.highFilterOptions.maxPrice)),o.minPrice=d[0],o.maxPrice=d[1],(o.minPrice||o.maxPrice)&&a.push(d.join("_")),o.cf=a.join("-"),N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({highFilterOptions:o}),this.hideMask(),E=-1,console.log("高筛确定调接口"),H(this.id,0,this),this.setData({showFilter:!1})},cancelSelect:function(e){var t=this.data.filters,a=!0,o=!1,n=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){i.value.values.forEach((function(e){e.checked=!1}))}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}N("manuclick",Object.assign({},e.currentTarget.dataset)),this.setData({filters:t,highFilterOptions:{minPrice:"",maxPrice:"",cf:"",cityId:""}})},addCart:function(e){var t=e.currentTarget.dataset;return t.detect=D.default.getTrack()||"",t.issubspd?this.setData({showSubsGoods:!0,subsData:R(t,{cityId:this.data.cityId,quanType:this.data.quanType,couponid:this.data.couponid})}):(i.showLoading({title:"请稍候",mask:!0}),"A"==this.data.cartAbTest?this.addWapCmmdty(t,this):this.addMinipCmmdty(t,!0)),N("manuclick",Object.assign({},e.currentTarget.dataset)),!1},addMinipCmmdty:function(e,t){var a=void 0;a=t?e:e.detail,this.selectComponent("#cartList").addMinipCmmdty(a)},addWapCmmdty:function(e,t){M.addCart(e).then((function(a){if(i.hideLoading(),!(!a||!a.data||"Y"!=a.data.cartHeadInfo.isSuccess))U.showToast({title:" 加入成功 "}),function(e,t){var a,o,n=parseInt(t.data.totalCount,10)+1,i=parseFloat(t.data.totalPrice,10)+parseFloat(e.price,10);"Y"==t.data.limitType?(a=t.data.limitValue-i,console.log(i,t.data.limitValue,a,777777)):"J"==t.limitType&&(a=t.data.limitValue-n),o=0==t.data.limitValue?n>0:a<0,t.setData({totalCount:n,totalPrice:L(i,2),difference:L(a,2),finish:o})}(e,t);else{var o=!1;try{o=a.msg||a.data.errorInfos[0].errorMessage}catch(e){}U.showToast({title:o||" 加入失败 "})}}))},gotoCart1:function(e){N("manuclick",Object.assign({},e.currentTarget.dataset));var t=new Date(this.data.starttime).getTime()||0;(new Date).getTime()<t?this.setData({toCartJug:!0}):i.switchTab({url:"/pages/cart/cart1/cart1"})},toCartEnter:function(){i.switchTab({url:"/pages/cart/cart1/cart1"})},closeToCartJug:function(){this.setData({toCartJug:!1})},gotoFourthPage:function(e){var t=e.currentTarget.dataset;if(t&&t.partnumber&&t.vendor){N("manuclick",Object.assign({},e.currentTarget.dataset));var a="/pages/fourth/fourth?productId="+t.partnumber+"&shop=";"4-14"==t.priceType?a+=t.supplier:a+=t.vendor,i.navigateTo({url:a})}},loadNextPage:function(){var e=this.data.isLoading,t=parseInt(this.data.currentPage),a=parseInt(this.data.totalPage);parseInt(this.data.currentStatus);!e&&t<Math.min(a,49)&&(console.log("上滑到底下一页调接口"),H(this.data.id,1*t+1,this))},couponAll:function(){!!this.data.couponAllShow?this.setData({couponAllShow:!1,couponMsg:"全部"}):this.setData({couponAllShow:!0,couponMsg:"收起"})},onLoad:function(e){var a=this;this.id=e.id,console.log("当前券ID:"+e.id),i.getSystemInfo({success:function(e){a.setData({screenHeight:2*e.windowHeight})}}),a.getTicketBaseInf(e.id).then((function(){console.log("onload调接口"),H(e.id,0,a)})),j().then((function(e){a.setData({pageCity:e.cityMDMId,cityId:e.cityLESId})})),this.setData({saPgnm:"pgcate=10007;tag=100086;pgtitle=小程序-用券搜索结果页;ticketID="+e.id+";",counponId:e.id}),t((function(){i.createSelectorQuery?i.createSelectorQuery().selectAll("#couponListMsg,#sryMsg").boundingClientRect((function(e){var t,o,n=!0,i=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value;"sryMsg"==d.id?t=d.height:o=d.height}}catch(e){i=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw r}}o>t?a.setData({showAllBtn:!0,limitHeight:!0}):a.setData({showAllBtn:!1,limitHeight:!1})})).exec():a.setData({showAllBtn:!1,limitHeight:!1})}),200)},onReady:function(){var e=this;i.createIntersectionObserver&&i.createIntersectionObserver(this).relativeTo(".page-quan-search").observe(".coupon-tips",(function(t){e.setData({secondSelectorFix:!t.intersectionRatio})}))},getTicketBaseInf:function(e){var t=this;return new Promise((function(a,o){var n=t,r={},s=O.tssfast+"/ticket/tss/xcx/"+e+".json";console.log("券基本模型接口：",s),_({url:s}).catch((function(e){n.setData({showIntro:!1}),a()})).then((function(e){e=e.data,n.offenBuy="1"==e.tssWapCgRecGoodsSwitch,e&&"200"==e.statusCode&&e.coupon?function(){var t,a=e.coupon,o=a.channel.split(","),s="1"!=a.quanType,c=!(-1!=o.indexOf("36")),d=a.extendInfos&&a.extendInfos.couponType,u=!1,l=a.limitType,g=a.limitValue,p=a.tsssb||"",h=a.tsssv||"",f=p&&p.split("")[1]||"A";if("1"==d?t="hwg":"2"==d?t="outlets":"3"==d?(t="pingou",u=!0):t="9"==d?"allowance":"",p||h){r.tsssb=p,r.tsssbv=h;var m=[];for(var w in r)m.push(w+"="+r[w]);i.setStorageSync("counponABtest",m.join(";"))}n.md5Key=a.extendInfos&&a.extendInfos.cgMD5Key||"",n.setData({endtime:s&&a.endTimeShow||!1,label:a.desc&&a.desc.substring(0,100)||!1,showLabelPoint:a.desc.length>100,ticValue:a.parValue||!1,starttime:s&&a.startTimeShow||!1,quanDynamicTimeShow:a.quanDynamicTimeShow||!1,quanType:a.quanType,outTimer:a.outTimer||"",showIntro:!0,mpcoupon:c,errChannelMsg:a.extendInfos&&a.extendInfos.errChannelMsg||"",ispingou:u,couponClass:t,limitType:l,limitValue:g,hasLimit:""!=l,difference:L(g,2),snServerShow:!(!a||"1"!=a.snfwFlag),docShowFlag:!(!a||"1"!=a.docShowFlag),couponid:a&&a.id||this.id,cartAbTest:f}),B=e.coupon.activeType||0,a.outTimer&&n.countDown()}():n.setData({showIntro:!1}),a()}))}))},countDown:function(){var e=this,a=this.data.outTimer-1e3;if(!(a<0)){var o,n=parseInt(a/1e3/60/60),i=parseInt(a/1e3/60%60),r=parseInt(a/1e3%60);o={hou:this.timeFormat(n),min:this.timeFormat(i),sec:this.timeFormat(r)},this.setData({outTimer:a,countDown:o}),t((function(){return e.countDown()}),1e3)}},timeFormat:function(e){return e<10?"0"+e:e},getDatas:function(e){return new Promise((function(t,a){return k({url:e}).catch((function(e){})).then((function(e){var o=e.data;e.statusCode<400?t(o):a(o)}))}))},onShow:function(){var e=this,t=this;j().then((function(a){t.data.pageCity&&a.cityMDMId!=t.data.pageCity&&(e.hideMask(),E=-1,console.log("地址改变onshow调接口",a.cityMDMId,t.data.pageCity),H(e.id,0,e)),e.setData({cityObj:{cityName:a.cityName,provinceMDMId:a.provinceMDMId,districtMDMId:a.districtMDMId,cityMDMId:a.cityMDMId},pageCity:a.cityMDMId,cityId:a.cityLESId}),N("pageview")}))},onUnload:function(){E=-1,G=[]},onReachBottom:function(){this.data.filterMask||this.loadNextPage()},closeSubs:function(){this.setData({showSubsGoods:!1})}})})),window.define("900",(function(e,t,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=k(e(293)),S=k(e(170)),P=k(e(54)),_=e(23);function k(e){return e&&e.__esModule?e:{default:e}}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var R,A=e(25),j=A.checkLogin,O=A.requestPromise,q=A.modal,M=A.formatTime,F=A.commonPopbox,U=(A.login,A.setDfpToken),N=A.getDfpToken,E=A.saSendPageViewLog,B=e(20).getCityCode,G=e(17),V=e(8),H=e(45),z=e(135),W=e(852),Q=r(),J=null;function K(e){return O({method:"GET",url:G.eshop.getProgress,data:{actIds:e,channel:5}})}function X(e,t){i.showLoading({title:"加载中"});var a="";a="object"===(void 0===e?"undefined":x(e))?e.currentTarget.dataset.indexof:e;var o=t.data.jxdata,n=V.quan+"/lqzx_rsf.do";N().then((function(r){B().then((function(s){return O({method:"GET",url:n,data:{actId:t.data.jxdata[a].actId,actKey:t.data.jxdata[a].actKey,channel:11,cityId:s.cityLesId||"025",deviceToken:H.pdToken,detect:P.default.getTrack()||"",dfpToken:r,sourceId:9964,validateCode:t.data.validataparam.code||"",uuid:t.data.validataparam.uuid||""}}).then((function(n){var r;if(i.hideLoading(),0==n.resultCode)z.showToast({title:"恭喜，领券成功"}),o[a].quanstate=3,t.setData((L(r={},"jxdata["+a+"].quanstate",3),L(r,"validateShow",!1),r));else if(1003==n.resultCode||1004==n.resultCode){1003==n.resultCode?z.showToast({title:"活动过于火爆，请输入验证码"}):z.showToast({title:"验证失败，请重新输入验证码"});var s=M(new Date).replace(/[^\d]/g,""),c=V.vcs+"/vcs/imageCode.htm?uuid="+n.uuid+"&yys="+s+"&sceneId="+n.sceneId,d={};d.imgsrc=c,d.uuid=n.uuid,d.sceneId=n.sceneId,d.codeOk=!0,d.index=a,t.setData({validataparam:d,validateShow:!0})}else"2003"==n.resultCode?z.showToast({title:n.resultMsg}):"2004"==n.resultCode?S.default.show({page:t,phone:n.mobileNum,callback:function(a){var o=a.success,n=a.code;o&&(t.data.validataparam.code=n,X(e,t))}}):"2005"==n.resultCode||"2006"==n.resultCode?S.default.setError(t,n.resultMsg):1e3==n.resultCode||1001==n.resultCode||1002==n.resultCode?(t.setData({validateShow:!1}),z.showToast({title:"很抱歉，当前活动异常火爆，请稍后再试"})):403==n.resultCode?(t.setData({validateShow:!1}),z.showToast({title:"当前领取人数过多，请稍后再试"})):"13"==n.resultCode||"2001"==n.resultCode||"2002"==n.resultCode?i.showModal({title:"",content:n.resultMsg,cancelText:"取消",confirmText:"去绑定",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(W.check)}):e.cancel}}):37==n.resultCode?i.showModal({title:"",content:n.resultMsg,cancelText:"知道了",confirmText:"去认证",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(W.toIdentityVerification)}):e.cancel}}):(t.setData({validateShow:!1}),z.showToast({title:n.resultMsg}));"2004"!=n.resultCode&&"2005"!=n.resultCode&&"2006"!=n.resultCode&&S.default.hide(t)})).catch((function(e){console.log(e),i.hideLoading(),z.showToast({title:"网络开小差，可以再次领取喽"})}))}))})).catch((function(e){console.log(e),i.hideLoading(),z.showToast({title:"网络开小差，可以再次领取喽"})}))}function Y(e){var t,o=!0;null!=J&&clearTimeout(J),t=a((function(){var a=e.data.jxdata;for(var n in a)1==a[n].quanstate&&(a[n].changeTime>0?(a[n].changeTime=a[n].changeTime-1,a[n].changeTimestr=Z(a[n].changeTime)):a[n].quanstate=2,o=!1);e.setData({jxdata:a}),o&&clearInterval(t)}),1e3),J=t}function Z(e){var t=e,a=Math.floor(t/86400),o=Math.floor(t%86400/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return{h:r(24*a+o),m:r(n),s:r(i)};function r(e){return e<10&&(e="0"+e),e}}Page({detectTouchStart:P.default.detectTouchStart,detectTouchMove:P.default.detectTouchMove,detectTouchEnd:P.default.detectTouchEnd,detectTap:P.default.detectTap,detectLongPress:P.default.detectLongPress,modal:q,data:{saPgnm:"pgcate=10004;pgtitle=领券中心",modalHidden:!0,loadingHidden:!0,hidden:!1,hidden1:!1,hidden2:!1,cachebox1:!0,cachebox2:!1,systemtime:0,jxdata:[],timecount:0,boxHidden:!0,popobj:{head:"确定使用云钻兑换",con:["是否确认使用","兑换一张","优惠券"]},yunId:{},islogin:!1,resp:{},onLoaded:!1,endHidel:!1,endHider:!1,validateShow:!1,validataparam:{imgsrc:"",uuid:"",sceneId:"",codeOk:!0,code:"",index:""}},onLoad:function(){},onReady:function(){},onShow:function(e){var t=this;S.default.init(this),j().then((function(e){R=!0,Q.bindUserInfo(e),t.setData({islogin:R,resp:e}),t.getSystemTime(t),U().then((function(e){})).catch((function(e){console.error(e)}))})).catch((function(e){R=!1,t.setData({islogin:R}),Q.handleAuthDeny(),t.getSystemTime(t)})),P.default.init("mainApp"),i.showLoading({title:"加载中"}),this.setData({islogin:R,endHidel:!1,endHider:!1,hidden1:!1,hidden2:!1}),this.data.onLoaded?this.getSystemTime(this):this.setData({onLoaded:!0}),E()},onHide:function(e){this.setData({timecount:0,cxdata:[],jxdata:[],endHidel:!1,endHider:!1,hidden1:!1,hidden2:!1}),clearInterval(this.data.setInterval)},bindButtonSreach:function(e){this.linkToSearch()},linkToSearch:function(){i.navigateTo({url:"/pages/search/searchResult/result"})},openFourthPage:function(e){var t=e.currentTarget.dataset,a=t.endtime;if(t.endtime=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2),t){var o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=1",i.navigateTo({url:o})}},dealStringTime:function(e){var t="0"+(parseInt(e.substr(4,2))-1);return t=t.slice(t.length-2,t.length),new Date(e.substr(0,4),t,e.substr(6,2),e.substr(8,2),e.substr(10,2),e.substr(12,2)).getTime()},dealLocalTime:function(e,t){var a=e.toJSON(),o=a.split("T")[0].split("-"),n=a.split("T")[1].split(".")[0].split(":");t.setData({systemtime:parseFloat(o.join("")+n.join(""))})},getSystemTime:function(e){i.request({url:G.eshop.getSystem,method:"POST",header:{Accept:"application/json"},success:function(t){e.setData({systemtime:t.data.sysTime1})},fail:function(){var t=new Date;return e.dealLocalTime(t,e)},complete:function(){O({method:"POST",url:V.quan+"/wap/queryCouponCenterActivities_5___1__1_50_quancallback.htm",dataType:"jsonp"}).then((function(t){"1"==t.isSuccess&&t.freeCouponList.length>0?e.dealjxdata(t,e):e.data.cachebox2?(i.hideLoading(),e.setData({hidden2:!0,selected:!1,selected1:!0})):(i.hideLoading(),e.setData({hidden2:!0}))})).catch((function(){i.hideLoading(),e.setData({hidden2:!0})})).then((function(){i.stopPullDownRefresh(),1==e.data.hidden2&&1==e.data.cachebox2&&e.setData({hidden:e.data.hidden2})}))}})},dealjxdata:function(e,t){t.data.systemtime;for(var a=[],o=0;o<e.freeCouponList.length;o++)if("3"==e.freeCouponList[o].actType||"5"==e.freeCouponList[o].actType){var n=e.freeCouponList[o];n.showPicUrlList.length>0?n.imgsrc=-1!=n.showPicUrlList[0].showPicUrl.indexOf("https")?n.showPicUrlList[0].showPicUrl:"https:"+n.showPicUrlList[0].showPicUrl:n.partnumber.length>0?n.imgsrc=V.img+"/uimg/b2c/newcatentries/"+n.shopCode+"-"+n.partnumber.split(",")[0]+"_1_200x200.jpg":n.imgsrc=-1!=n.actPicUrl.indexOf("https")?n.actPicUrl:"https:"+n.actPicUrl,a.push(n)}t.dealprogressAll(a,t)},dealprogress:function(e,t){t.data.timecount<e.length?R||t.data.islogin?"6"!=e[t.data.timecount].actType?K(e[t.data.timecount].actId).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0)if(isNaN(parseInt(e[t.data.timecount].dayTimesLimit))||isNaN(parseInt(a.activityList[0].dayRemainCount))?isNaN(parseInt(a.activityList[0].remainCount))&&isNaN(parseInt(a.activityList[0].actCount))?e[t.data.timecount].progress=e[t.data.timecount].progress||0:e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].remainCount)/parseInt(a.activityList[0].actCount)*100)):e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].dayRemainCount)/parseInt(e[t.data.timecount].dayTimesLimit)*100)),e[t.data.timecount].isReceive=parseInt(a.activityList[0].isReceive),e[t.data.timecount].startTimeStr>t.data.systemtime)e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3;else{if(!(e[t.data.timecount].startTimeStr<t.data.systemtime&&t.data.systemtime<e[t.data.timecount].endTimeStr))return;1==parseInt(a.activityList[0].isReceive)?e[t.data.timecount].quanstate=3:"0"===a.activityList[0].remainCount||parseInt(a.activityList[0].remainAmt)<=0||"0"===a.activityList[0].dayRemainCount||100==e[t.data.timecount].progress?e[t.data.timecount].quanstate=4:e[t.data.timecount].quanstate=2}else e[t.data.timecount].startTimeStr>t.data.systemtime&&(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=Z(e[t.data.timecount].changeTime));t.data.timecount++,t.dealprogress(e,t)})).catch((function(){t.data.timecount++,t.dealprogress(e,t)})):(t.data.timecount++,t.dealprogress(e,t)):(e[t.data.timecount].startTimeStr>t.data.systemtime?(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=Z(e[t.data.timecount].changeTime)):(e[t.data.timecount].quanstate=2,e[t.data.timecount].progress=e[t.data.timecount].progress||0),t.data.timecount++,t.dealprogress(e,t)):(t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),Y(t))},dealprogressAll:function(e,t){for(var a=[],o=0;o<e.length;o++)R||t.data.islogin?a.push(e[o].actId):e[o].startTimeStr>t.data.systemtime?(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Z(e[o].changeTime)):(e[o].quanstate=2,e[o].progress=e[o].progress||0);R||t.data.islogin?K(a.join(",")).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0){for(var o=0;o<e.length;o++){for(var n=a.activityList.length,r=0;r<a.activityList.length;r++)if(e[o].actId==a.activityList[r].activityId)if(isNaN(parseInt(e[o].dayTimesLimit))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[o].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):isNaN(parseInt(a.activityList[r].dayRemainCount))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[t.data.timecount].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].dayRemainCount)/parseInt(e[o].dayTimesLimit)*100)),e[o].isReceive=parseInt(a.activityList[r].isReceive),e[o].startTimeStr>t.data.systemtime)e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3;else{if(!(e[o].startTimeStr<t.data.systemtime&&t.data.systemtime<e[o].endTimeStr))return;1==parseInt(a.activityList[r].isReceive)?e[o].quanstate=3:"0"===a.activityList[r].remainCount||parseInt(a.activityList[r].remainAmt)<=0||"0"===a.activityList[r].dayRemainCount||100==e[o].progress?e[o].quanstate=4:e[o].quanstate=2}else n-=1;0==n&&(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Z(e[o].changeTime))}t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),Y(t)}else{for(o=0;o<e.length;o++)e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Z(e[o].changeTime);t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),Y(t)}})).catch((function(a){t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),Y(t)})):(t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),Y(t))},getSalesquan:function(e){if(R||this.data.islogin){var t={imgsrc:"",uuid:"",sceneId:"",codeOk:!0,code:"",index:""};this.setData({validataparam:t}),X(e,this)}else"wx"==(0,_.getPlatformType)()?(0,D.default)():(0,D.default)(this.data.resp)},getyunzhuan:function(e){if(R||this.data.islogin){var t=e.currentTarget.dataset,a={};a.head=this.data.popobj.head,a.content=t.info||"",a.number=t.number||"",a.paramone=this.data.popobj.con[0]||"",a.paramtwo=this.data.popobj.con[1]||"",a.paramthr=this.data.popobj.con[2]||"",F(a,this),this.setData({yunId:e.currentTarget.dataset.voucherid,_index:t.indexof})}else"wx"==(0,_.getPlatformType)()?(0,D.default)():(0,D.default)(this.data.resp)},cancelButton:function(e){this.setData({boxHidden:!0})},enterButton:function(e){var t=this,a=t.data._index;i.showLoading({title:"加载中",mask:!0});var o={voucherId:t.data.yunId,couponGetSource:1003,detect:P.default.getTrack()||"",deviceToken:H.pdToken,vcsCode:"",uuid:""};N().then((function(e){(function(e,t){return O({method:"GET",url:G.eshop.getYun,data:{voucherId:e.voucherId,couponGetSource:e.couponGetSource,detect:P.default.getTrack()||"",dfpToken:t},dataType:"jsonp"})})(o,e).then((function(e){i.hideLoading(),"0"===e.resultCode?(t.data.jxdata[a].quanstate=3,t.setData(L({boxHidden:!0},"jxdata["+a+"].quanstate",3)),z.showToast({title:"恭喜，兑换成功"})):(t.showExange(t,e,t.data.jxdata[a].actId,t.data.jxdata[a].voucherId,t.data.jxdata[a].voucherType),t.setData({boxHidden:!0}))})).catch((function(){i.hideLoading(),t.setData({boxHidden:!0}),z.showToast({title:"兑换失败，可重新尝试"})}))})).catch((function(e){i.hideLoading(),t.setData({boxHidden:!0}),z.showToast({title:"兑换失败，可重新尝试"})}))},showExange:function(e,t,a,o,n){var r="";switch(t.resultCode){case"VOUCHER_1017":case"VOUCHER_1023":i.showModal({title:"",content:t.errorDesc,cancelText:"取消",confirmText:"去绑定",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(W.check)}):e.cancel}});break;case"VOUCHER_1012":case"VOUCHER_1013":case"VOUCHER_1021":r="很抱歉，当前活动异常火爆，请稍后再试",z.showToast({title:r});break;case"VOUCHER_1022":r="活动过于火爆，请输入验证码",z.showToast({title:r});break;case"VOUCHER_1002":r="很抱歉，您的云钻余额不足，兑换失败",z.showToast({title:r});break;case"VOUCHER_1003":r="今日已领完，看看其他优惠券吧",z.showToast({title:r});break;case"VOUCHER_1005":r="您已经兑换过这张优惠券，看看其他券吧",z.showToast({title:r});break;case"VOUCHER_1006":r="很抱歉，此优惠券活动已经结束，看看其他优惠券吧",z.showToast({title:r});break;case"VOUCHER_1008":r="活动尚未开始，请耐心等待",z.showToast({title:r});break;case"VOUCHER_1009":case"VOUCHER_1016":r="领券活动已结束，您可以看看其他优惠券",z.showToast({title:r});break;case"VOUCHER_1010":case"VOUCHER_1011":case"VOUCHER_1020":r="券已领完，明天再来看看吧",z.showToast({title:r});break;case"VOUCHER_1014":r="您的会员等级不满足活动要求，您可以看看其他优惠券",z.showToast({title:r});break;case"VOUCHER_1015":r="您已兑换过同类券，看看其他优惠券吧",z.showToast({title:r});break;case"VOUCHER_1018":r="很抱歉，您的账户未验证，请验证后领取",z.showToast({title:r});break;case"VOUCHER_1019":r="您的账号不满足活动要求，您可以看看其他优惠券！",z.showToast({title:r});break;case"VOUCHER_1024":r="很抱歉，当前活动异常火爆，请稍后再试",z.showToast({title:r});break;case"VOUCHER_1025":r="验证码错误次数过多，请重新获取",z.showToast({title:r});break;case"VOUCHER_1026":r="很抱歉，当前活动异常火爆，请稍后再试",z.showToast({title:r});break;case"VOUCHER_9999":r="很抱歉，当前系统异常，请稍后再试（M9999）",z.showToast({title:r});break;default:r=t.errorDesc,z.showToast({title:r})}},remindme:function(e){return!1},gotojuhePage:function(e){return!1},usequan:function(e){var t=e.currentTarget.dataset,a=new Date(this.data.jxdata[t.indexof].endTime);t.label=this.data.jxdata[t.indexof].shopName,t.endtime=a.toLocaleDateString().replace(/\//g,"-")+" "+a.toTimeString().substr(0,8);if(t&&t.coupontype&&["10002","10003","10004","10005","10006"].indexOf(t.coupontype)>-1){var o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=0",i.navigateTo({url:o})}else{o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=0",i.navigateTo({url:o})}},validateCancel:function(e){this.setData({validateShow:!1})},validateCheck:function(e){this.data.validataparam.codeOk&&X(this.data.validataparam.index,this)},saveCheckVal:function(e){var t=this.data.validataparam;e.detail.value.length>4?(t.codeOk=!1,this.setData({validataparam:t})):(t.codeOk=!0,t.code=e.detail.value,this.setData({validataparam:t}))},refreshImgCode:function(e){var t={};t=this.data.validataparam;var a=M(new Date).replace(/[^\d]/g,""),o=V.vcs+"/vcs/imageCode.htm?uuid="+t.uuid+"&yys="+a+"&sceneId="+t.sceneId;t.imgsrc=o,this.setData({validataparam:t})}})})),window.define("903",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x=e(77),D=e(23);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var P=e(868),_=e(25),k=_.goodImageUrl,L=_.checkLogin,R=_.saSendPageViewLog,A=(r(),e(904).makeQrCode);Page({data:{pageShow:!1,scoreInfo:null,productList:[],showCodeList:[],showUsedBtn:!1,showUse:!1,selectProductIndex:0,errMsg:"",vendorCode:""},onLoad:function(e){var t=this;this.setData({options:e}),L().then((function(){t.initialize(e)})).catch((function(){}))},onReady:function(){(0,x.saSendLog)("autoexpo",this)},autoclick:function(e){(0,x.saSendLog)("click",{event:e})},onShow:function(e){R()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},initialize:function(e){this.queryECertificate(e)},queryECertificate:function(e){var t=this;t.setData({vendorCode:e.vendorCode||""}),i.showLoading({title:"加载中"}),P._queryECertificate(e).then((function(e){e=e||{},console.log(e),t.parseECertificate(e)})).catch((function(){t.setData({pageShow:!0}),i.hideLoading()}))},parseECertificate:function(e){var t=this;if(e&&e.itemList&&e.itemList.length){i.setNavigationBarTitle({title:e.title||"电子兑换券"}),e.itemList.forEach((function(e,a){e.productImgUrl?e.imgUrl=e.productImgUrl:e.imgUrl=k(e.partNumber,e.supplierCode,"",t.data.vendorCode,120)}));var a=e.itemList[0].codeList||[],o=a.find((function(e){return 1!=e.codeStatus})),n=e.itemList[0].storeInfo;e.itemList.forEach((function(e){e.codeList&&e.codeList.forEach((function(e){var t=e.code;Math.ceil(t.length/3);e.showCode=t.slice(0,3)+" "+t.slice(3,6)+" "+t.slice(6,t.length)}))})),this.setData({pageShow:!0,pageData:e,showCodeList:a,showUsedBtn:o||0,productList:e.itemList,storeInfo:n,getDataSuccess:!0,showStoreInfo:!!n}),this.showCode(),i.hideLoading()}else this.setData({pageShow:!0,getDataSuccess:!1,errMsg:e.errMsg||""}),i.hideLoading()},showCode:function(){var e=this;t((function(){(e.data.productList||[]).forEach((function(e){e.codeList&&e.codeList.forEach((function(e){var t={id:"canvas_"+e.code,text:e.code};2==e.codeStatus&&(t.fill="#CCCCCC",t.popImage="/images/has-used.png",t.popImageWidth=80,t.popImageHeight=80),3==e.codeStatus&&(t.fill="#CCCCCC",t.popImage="/images/invalid.png",t.popImageWidth=80,t.popImageHeight=80),4==e.codeStatus&&(t.fill="#CCCCCC",t.popImage="/images/frozen.png",t.popImageWidth=80,t.popImageHeight=80),A(t)}))}))}),300)},changeSelectProductIndex:function(e){var t,a=e.currentTarget.dataset.index,o=this.data.productList,n=o[a].codeList,i=n.find((function(e){return 1!=e.codeStatus})),r=this,s=o[a].storeInfo;this.setData((S(t={showCodeList:n,showUsedBtn:i||0,storeInfo:s,selectProductIndex:a},"storeInfo",s),S(t,"showStoreInfo",!!s),t),(function(){console.log(r.data)}))},changeShowUsed:function(){var e=this.data.showUse;"swan"==(0,D.getPlatformType)()&&(e||this.showCode()),this.setData({showUse:!e})},makePhoneStore:function(e){var t=e.currentTarget.dataset.phone;i.makePhoneCall({phoneNumber:t})},goBack:function(){i.navigateBack()},onShareAppMessage:function(){}})})),window.define("904",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(23),x=function(e,t){var a=e,o=k[t],n=null,i=0,r=null,s=new Array,c={},d=function(e,t){n=function(e){for(var t=new Array(e),a=0;a<e;a+=1){t[a]=new Array(e);for(var o=0;o<e;o+=1)t[a][o]=null}return t}(i=4*a+17),u(0,0),u(i-7,0),u(0,i-7),g(),l(),h(e,t),a>=7&&p(e),null==r&&(r=m(a,o,s)),f(r,t)},u=function(e,t){for(var a=-1;a<=7;a+=1)if(!(e+a<=-1||i<=e+a))for(var o=-1;o<=7;o+=1)t+o<=-1||i<=t+o||(n[e+a][t+o]=0<=a&&a<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=o&&o<=4)},l=function(){for(var e=8;e<i-8;e+=1)null==n[e][6]&&(n[e][6]=e%2==0);for(var t=8;t<i-8;t+=1)null==n[6][t]&&(n[6][t]=t%2==0)},g=function(){for(var e=U.getPatternPosition(a),t=0;t<e.length;t+=1)for(var o=0;o<e.length;o+=1){var i=e[t],r=e[o];if(null==n[i][r])for(var s=-2;s<=2;s+=1)for(var c=-2;c<=2;c+=1)n[i+s][r+c]=-2==s||2==s||-2==c||2==c||0==s&&0==c}},p=function(e){for(var t=U.getBCHTypeNumber(a),o=0;o<18;o+=1){var r=!e&&1==(t>>o&1);n[Math.floor(o/3)][o%3+i-8-3]=r}for(o=0;o<18;o+=1){r=!e&&1==(t>>o&1);n[o%3+i-8-3][Math.floor(o/3)]=r}},h=function(e,t){for(var a=o<<3|t,r=U.getBCHTypeInfo(a),s=0;s<15;s+=1){var c=!e&&1==(r>>s&1);s<6?n[s][8]=c:s<8?n[s+1][8]=c:n[i-15+s][8]=c}for(s=0;s<15;s+=1){c=!e&&1==(r>>s&1);s<8?n[8][i-s-1]=c:s<9?n[8][15-s-1+1]=c:n[8][15-s-1]=c}n[i-8][8]=!e},f=function(e,t){for(var a=-1,o=i-1,r=7,s=0,c=U.getMaskFunction(t),d=i-1;d>0;d-=2)for(6==d&&(d-=1);;){for(var u=0;u<2;u+=1)if(null==n[o][d-u]){var l=!1;s<e.length&&(l=1==(e[s]>>>r&1)),c(o,d-u)&&(l=!l),n[o][d-u]=l,-1==(r-=1)&&(s+=1,r=7)}if((o+=a)<0||i<=o){o-=a,a=-a;break}}},m=function(e,t,a){for(var o=B.getRSBlocks(e,t),n=G(),i=0;i<a.length;i+=1){var r=a[i];n.put(r.getMode(),4),n.put(r.getLength(),U.getLengthInBits(r.getMode(),e)),r.write(n)}var s=0;for(i=0;i<o.length;i+=1)s+=o[i].dataCount;if(n.getLengthInBits()>8*s)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*s+")");for(n.getLengthInBits()+4<=8*s&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*s||(n.put(236,8),n.getLengthInBits()>=8*s));)n.put(17,8);return function(e,t){for(var a=0,o=0,n=0,i=new Array(t.length),r=new Array(t.length),s=0;s<t.length;s+=1){var c=t[s].dataCount,d=t[s].totalCount-c;o=Math.max(o,c),n=Math.max(n,d),i[s]=new Array(c);for(var u=0;u<i[s].length;u+=1)i[s][u]=255&e.getBuffer()[u+a];a+=c;var l=U.getErrorCorrectPolynomial(d),g=E(i[s],l.getLength()-1).mod(l);r[s]=new Array(l.getLength()-1);for(u=0;u<r[s].length;u+=1){var p=u+g.getLength()-r[s].length;r[s][u]=p>=0?g.getAt(p):0}}var h=0;for(u=0;u<t.length;u+=1)h+=t[u].totalCount;var f=new Array(h),m=0;for(u=0;u<o;u+=1)for(s=0;s<t.length;s+=1)u<i[s].length&&(f[m]=i[s][u],m+=1);for(u=0;u<n;u+=1)for(s=0;s<t.length;s+=1)u<r[s].length&&(f[m]=r[s][u],m+=1);return f}(n,o)};return c.addData=function(e){var t=V(e);s.push(t),r=null},c.isDark=function(e,t){if(e<0||i<=e||t<0||i<=t)throw new Error(e+","+t);return n[e][t]},c.getModuleCount=function(){return i},c.make=function(){d(!1,function(){for(var e=0,t=0,a=0;a<8;a+=1){d(!0,a);var o=U.getLostPoint(c);(0==a||e>o)&&(e=o,t=a)}return t}())},c.createImgTag=function(e,t){e=e||2,t=void 0===t?4*e:t;var a=c.getModuleCount()*e+2*t,o=t,n=a-t;return createImgTag(a,a,(function(t,a){if(o<=t&&t<n&&o<=a&&a<n){var i=Math.floor((t-o)/e),r=Math.floor((a-o)/e);return c.isDark(r,i)?0:1}return 1}))},c};x.stringToBytes=function(e){for(var t=new Array,a=0;a<e.length;a+=1){var o=e.charCodeAt(a);t.push(255&o)}return t},x.createStringToBytes=function(e,t){var a=function(){for(var a=H(e),o=function(){var e=a.read();if(-1==e)throw new Error;return e},n=0,i={};;){var r=a.read();if(-1==r)break;var s=o(),c=o()<<8|o();i[String.fromCharCode(r<<8|s)]=c,n+=1}if(n!=t)throw new Error(n+" != "+t);return i}(),o="?".charCodeAt(0);return function(e){for(var t=new Array,n=0;n<e.length;n+=1){var i=e.charCodeAt(n);if(i<128)t.push(i);else{var r=a[e.charAt(n)];"number"==typeof r?(255&r)==r?t.push(r):(t.push(r>>>8),t.push(255&r)):t.push(o)}}return t}};var D=1,S=2,P=4,_=8,k={L:1,M:0,Q:3,H:2},L=0,R=1,A=2,j=3,O=4,q=5,M=6,F=7,U=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t={},a=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t};return t.getBCHTypeInfo=function(e){for(var t=e<<10;a(t)-a(1335)>=0;)t^=1335<<a(t)-a(1335);return 21522^(e<<10|t)},t.getBCHTypeNumber=function(e){for(var t=e<<12;a(t)-a(7973)>=0;)t^=7973<<a(t)-a(7973);return e<<12|t},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(e){switch(e){case L:return function(e,t){return(e+t)%2==0};case R:return function(e,t){return e%2==0};case A:return function(e,t){return t%3==0};case j:return function(e,t){return(e+t)%3==0};case O:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case q:return function(e,t){return e*t%2+e*t%3==0};case M:return function(e,t){return(e*t%2+e*t%3)%2==0};case F:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw new Error("bad maskPattern:"+e)}},t.getErrorCorrectPolynomial=function(e){for(var t=E([1],0),a=0;a<e;a+=1)t=t.multiply(E([1,N.gexp(a)],0));return t},t.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case D:return 10;case S:return 9;case P:case _:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case D:return 12;case S:return 11;case P:return 16;case _:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case D:return 14;case S:return 13;case P:return 16;case _:return 12;default:throw new Error("mode:"+e)}}},t.getLostPoint=function(e){for(var t=e.getModuleCount(),a=0,o=0;o<t;o+=1)for(var n=0;n<t;n+=1){for(var i=0,r=e.isDark(o,n),s=-1;s<=1;s+=1)if(!(o+s<0||t<=o+s))for(var c=-1;c<=1;c+=1)n+c<0||t<=n+c||0==s&&0==c||r==e.isDark(o+s,n+c)&&(i+=1);i>5&&(a+=3+i-5)}for(o=0;o<t-1;o+=1)for(n=0;n<t-1;n+=1){var d=0;e.isDark(o,n)&&(d+=1),e.isDark(o+1,n)&&(d+=1),e.isDark(o,n+1)&&(d+=1),e.isDark(o+1,n+1)&&(d+=1),0!=d&&4!=d||(a+=3)}for(o=0;o<t;o+=1)for(n=0;n<t-6;n+=1)e.isDark(o,n)&&!e.isDark(o,n+1)&&e.isDark(o,n+2)&&e.isDark(o,n+3)&&e.isDark(o,n+4)&&!e.isDark(o,n+5)&&e.isDark(o,n+6)&&(a+=40);for(n=0;n<t;n+=1)for(o=0;o<t-6;o+=1)e.isDark(o,n)&&!e.isDark(o+1,n)&&e.isDark(o+2,n)&&e.isDark(o+3,n)&&e.isDark(o+4,n)&&!e.isDark(o+5,n)&&e.isDark(o+6,n)&&(a+=40);var u=0;for(n=0;n<t;n+=1)for(o=0;o<t;o+=1)e.isDark(o,n)&&(u+=1);return a+=10*(Math.abs(100*u/t/t-50)/5)},t}(),N=function(){for(var e=new Array(256),t=new Array(256),a=0;a<8;a+=1)e[a]=1<<a;for(a=8;a<256;a+=1)e[a]=e[a-4]^e[a-5]^e[a-6]^e[a-8];for(a=0;a<255;a+=1)t[e[a]]=a;var o={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return o}();function E(e,t){if(void 0===e.length)throw new Error(e.length+"/"+t);var a=function(){for(var a=0;a<e.length&&0==e[a];)a+=1;for(var o=new Array(e.length-a+t),n=0;n<e.length-a;n+=1)o[n]=e[n+a];return o}(),o={getAt:function(e){return a[e]},getLength:function(){return a.length},multiply:function(e){for(var t=new Array(o.getLength()+e.getLength()-1),a=0;a<o.getLength();a+=1)for(var n=0;n<e.getLength();n+=1)t[a+n]^=N.gexp(N.glog(o.getAt(a))+N.glog(e.getAt(n)));return E(t,0)},mod:function(e){if(o.getLength()-e.getLength()<0)return o;for(var t=N.glog(o.getAt(0))-N.glog(e.getAt(0)),a=new Array(o.getLength()),n=0;n<o.getLength();n+=1)a[n]=o.getAt(n);for(n=0;n<e.getLength();n+=1)a[n]^=N.gexp(N.glog(e.getAt(n))+t);return E(a,0).mod(e)}};return o}var B=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var a={};return a.totalCount=e,a.dataCount=t,a},a={};return a.getRSBlocks=function(a,o){var n=function(t,a){switch(a){case k.L:return e[4*(t-1)+0];case k.M:return e[4*(t-1)+1];case k.Q:return e[4*(t-1)+2];case k.H:return e[4*(t-1)+3];default:return}}(a,o);if(void 0===n)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+o);for(var i=n.length/3,r=new Array,s=0;s<i;s+=1)for(var c=n[3*s+0],d=n[3*s+1],u=n[3*s+2],l=0;l<c;l+=1)r.push(t(d,u));return r},a}(),G=function(){var e=new Array,t=0,a={getBuffer:function(){return e},getAt:function(t){var a=Math.floor(t/8);return 1==(e[a]>>>7-t%8&1)},put:function(e,t){for(var o=0;o<t;o+=1)a.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return t},putBit:function(a){var o=Math.floor(t/8);e.length<=o&&e.push(0),a&&(e[o]|=128>>>t%8),t+=1}};return a},V=function(e){var t=P,a=x.stringToBytes(e),o={getMode:function(){return t},getLength:function(e){return a.length},write:function(e){for(var t=0;t<a.length;t+=1)e.put(a[t],8)}};return o},H=function(e){var t=e,a=0,o=0,n=0,i={read:function(){for(;n<8;){if(a>=t.length){if(0==n)return-1;throw new Error("unexpected end of file./"+n)}var e=t.charAt(a);if(a+=1,"="==e)return n=0,-1;e.match(/^\s$/)||(o=o<<6|r(e.charCodeAt(0)),n+=6)}var i=o>>>n-8&255;return n-=8,i}},r=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw new Error("c:"+e)};return i},z={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:150,fill:"#000000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null,popImage:"",popImageWidth:0,popImageHeight:0};function W(e,t,a,o){var n={},i=x(a,t);i.addData(e),i.make(),o=o||0;var r=i.getModuleCount(),s=i.getModuleCount()+2*o;return n.text=e,n.level=t,n.version=a,n.moduleCount=s,n.isDark=function(e,t){return t-=o,!((e-=o)<0||e>=r||t<0||t>=r)&&i.isDark(e,t)},n.addBlank=function(e,t,a,o){var i=n.isDark,r=1/s;n.isDark=function(n,s){var c=s*r,d=n*r,u=c+r,l=d+r;return i(n,s)&&(e>u||c>a||t>l||d>o)}},n}function Q(e,t,a,o,n,i,r,s){e.isDark(r,s)&&t.rect(o,n,i,i)}t.exports.makeQrCode=function(e){var t=JSON.parse(JSON.stringify(z)),a=Object.assign(t,e),o=function(e,t,a,o,n){a=Math.max(1,a||1),o=Math.min(40,o||40);for(var i=a;i<=o;i+=1)try{return W(e,t,i,n)}catch(e){}}(a.text,a.ecLevel,a.minVersion,a.maxVersion,a.quiet);if(!o)return null;!function(e,t,a){var o,n,i=e.moduleCount,r=a.size/i;for("swan"!=(0,b.getPlatformType)()&&t.clearActions(),t.beginPath(),t.setFillStyle(a.fill),o=0;o<i;o+=1)for(n=0;n<i;n+=1){Q(e,t,0,a.left+n*r,a.top+o*r,r,o,n)}if(t.fill(),t.draw(),a.popImage){console.log("render_popImage_"+a.text);var s=(a.size-parseInt(a.popImageWidth))/2,c=(a.size-parseInt(a.popImageHeight))/2;t.drawImage(a.popImage,s,c,a.popImageWidth,a.popImageHeight)}t.draw(!0)}(o,n.createCanvasContext(e.id),a)}})),window.define("907",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(868),x=e(25),D=(x.goodImageUrl,x.getWXUserInfo,x.checkLogin);i();Page({data:{},onLoad:function(e){var t=this;this.setData({options:e}),D().then((function(){t.initialize(e)})).catch((function(){}))},initialize:function(e){this.queryECertificate(e)},queryECertificate:function(e){var t=this;n.showLoading({title:"加载中"}),b._queryEinvoice(e).then((function(e){if(e=e||{},console.log(e),"0"==e.retCode)t.parseECertificate(e);else{b.snBusError("ofs_fpxq_10020_"+e.retCode,{errorDesc:e.errMsg||""},1,"025","order.suning.com/wap/order/queryEleInvoice.do")}n.hideLoading()})).catch((function(){t.setData({pageShow:!0}),n.hideLoading(),b.snBusError("ofs_fpxq_10020_9999",{errorDesc:"接口异常"},1,"025","order.suning.com/wap/order/queryEleInvoice.do")}))},parseECertificate:function(e){this.setData({invoiceData:e.invoiceList})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},goWhy:function(){n.navigateTo({url:"/packageA/pages/order/eInvoice/why"})},openInvoice:function(e){var t,a,o=e.currentTarget.dataset.invoiceIndex,i=e.currentTarget.dataset.itemIndex,r="",s=this.data.invoiceData;r=s[o].invoiceItemList[i].downloadUrl,t=s[o].invoiceItemList[i].invoicePicUrl,a=s[o].invoiceItemList[i].productName,t&&""!=t?n.navigateTo({url:"/packageA/pages/order/eInvoice/invoiceImg/invoiceImg?id="+encodeURIComponent(r)+"&invoicePicUrl="+encodeURIComponent(t)+"&productName="+encodeURIComponent(a)}):r?(-1==r.indexOf("https://")&&(r="https://"+r.split("://")[1]),n.downloadFile({url:r,success:function(e){console.log("22222",e),200==e.statusCode?n.openDocument({filePath:e.tempFilePath,success:function(e){console.log("打开文档成功")}}):n.showToast({title:"查看发票失败了,请稍后再试(E000)!",icon:"none"})},fail:function(){n.showToast({title:"查看发票失败了,请稍后再试(E001)!",icon:"none"})}})):n.showToast({title:"查看发票失败了,请稍后再试(E002)!",icon:"none"})}})})),window.define("910",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({data:{},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("913",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(390),x=e(8),D=e(77).saSendLog;Page({data:{pageid:"shwgmp01",cmsData:[],searchData:{},bodyBg:{},searchBgColor:!1,goTop:!1,scrollTop:0,imgDomain:x.img,saPgnm:"pgtitle=苏宁国际频道页首页;pageid=shwgmp01;pgcate=10003;prdtp=null;tag=100020/null;"},onLoad:function(e){var t=this,a=x.ipService+"/ipQuery.do";b.getRequest(a).then((function(e){n.setStorageSync("__CITYCODE__",e.data.cityLESId||"025"),t.getCmsData()})).catch((function(e){console.log("获取城市信息接口异常"),n.setStorageSync("__CITYCODE__","025"),t.getCmsData()}))},getCmsData:function(){var e=this,t=x.cms+"/api/json/wx_oversea.json";b.getRequest(t,{}).then((function(t){var a=t,o=b.dealCmsData(a),n=b.filterNavTitle(o);e.setNavigationBarTitle(n);var i=b.filterData(o,"searchInput_searchItem"),r=b.filterData(o,"wx_bodyBg");e.setData({cmsData:t.data,searchData:i,bodyBg:r})})).catch((function(e){console.log("苏宁国际频道页获取cms接口失败"),n.switchTab({url:"/pages/index/index"})}))},setNavigationBarTitle:function(e){n.setNavigationBarTitle({title:e||"苏宁国际"})},onReady:function(){},onShow:function(){D("pageview")},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},scroll:function(e){var t;t=e.detail.scrollTop>n.getSystemInfoSync().windowHeight,this.data.goTop!=t&&this.setData({goTop:t})},gotoTop:function(e){this.setData({scrollTop:0})},jumpUrl:function(e){b.baseJump(e.target.dataset.url)}})})),window.define("916",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";e(125);var x,D=P(e(8)),S=P(e(680));function P(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=!0,L=1,R=e(77).saSendLog,A=e(25),j=A.requestPromise,O=A.getDfpToken,q=A.baseJump,M=r(),F=(M.bindUserInfo,M.handleAuthDeny,M.globalData,e(38).checkLogin);Page({data:(x={aniData:null,isLock:!1,lotteryArrLen:0,lottery:[],actCode:"",jumpCode:"",pdToken:"",lotteryCount:0,singleAward:{},awardName:"",ruleState:!1,bingoState:!1,bingoFailedState:!1,activityState:!0,bingoAgain:!1,lotteryFail:!1,stateName:""},_(x,"lotteryFail",!1),_(x,"thankPos",-1),_(x,"pageid","sy"),_(x,"wheelBg",""),_(x,"advImg",""),_(x,"topBg",""),_(x,"bottomBg",""),_(x,"bgColor",""),x),autoclick:function(e){R("click",{event:e})},onLoad:function(e){e.actCode&&this.setData({actCode:e.actCode}),e.jumpCode&&this.setData({jumpCode:e.jumpCode})},onShow:function(e){var t=this;F().then((function(a){var o=D.default.cms+"/api/json/"+t.data.jumpCode+".json";t.getCms(t,o,e),t.queryEnabledActivityNumberLatest(t.data.actCode),t.queryWinnerListLatest(t.data.actCode)}),(function(){var a=D.default.cms+"/api/json/"+t.data.jumpCode+".json";t.getCms(t,a,e)})).catch((function(e){i.hideLoading(),i.showModal({title:"提示",content:"登录失败，请重新登录或者绑定~",showCancel:!1})}))},setPlateData:function(e){this.data.lotteryArrLen=e.length;for(var t=new Array(e.length),a=0;a<e.length;a++)t[a]=e[a].awardName?e[a].awardName:"谢谢参与";this.setData({lottery:t})},startRollTap:function(){var e=this;if(0!=e.data.lotteryCount||this.data.isLock){if(!this.data.isLock&&k){k=!1;var a=this.aniData;O().then((function(o){e.setData({pdToken:o}),e.drawAwardLatest(e.data.actCode,e.data.pdToken,0,(function(o){if(o.result)if(0==o.resultCode){null==o.result.awardName?e.setData({awardName:o.result.awardTypeName,bingoAgain:!0,singleAward:o.result,lotteryCount:--e.data.lotteryCount}):"再来一次"==o.result.awardName?e.setData({awardName:"再来一次",bingoAgain:!0}):e.setData({awardName:"您抽中了"+o.result.awardName,bingoAgain:!1,singleAward:o.result,lotteryCount:--e.data.lotteryCount}),a.rotate(3600*L-360/e.data.lotteryArrLen*(o.result.awardOrder-1)).step(),e.setData({aniData:a.export(),isLock:!0}),L++,k=!0,clearTimeout(n);var n=t((function(){e.setData({bingoState:!0,awardState:!0})}),3200);e.queryWinnerListLatest(e.data.actCode)}else if(1527==o.resultCode){e.setData({singleAward:o.result,lotteryCount:--e.data.lotteryCount}),a.rotate(2160*L-360/e.data.lotteryArrLen*(o.result.awardOrder-1)).step(),e.setData({aniData:a.export(),isLock:!0}),L++,k=!0,clearTimeout(i);var i=t((function(){e.setData({awardName:"谢谢参与",bingoState:!0,failBingoState:!0})}),3500)}else 1516==o.resultCode?e.setData({awardName:"未绑定手机",bingoFailedState:!0,bingoState:!1}):1524==o.resultCode?e.setData({awardName:"二次验证",bingoFailedState:!0,bingoState:!1}):1502==o.resultCode?e.setData({awardName:"抽奖机会用完了",bingoFailedState:!0,bingoState:!1}):1515==o.resultCode?e.setData({awardName:"会员等级不够",bingoFailedState:!0,bingoState:!1}):1501==o.resultCode?(e.setData({awardName:"未中奖",bingoFailedState:!0,bingoState:!1}),k=!0):1598==o.resultCode?(e.setData({awardName:"点击太快",bingoFailedState:!0,bingoState:!1}),k=!0):6666==o.resultCode?(e.setData({awardName:"操作频繁",bingoFailedState:!0,bingoState:!1}),k=!0):9999==o.resultCode?(e.setData({awardName:"活动不存在",bingoFailedState:!0,bingoState:!1}),k=!0):1519==o.resultCode?e.setData({awardName:"未实名认证",bingoFailedState:!0,bingoState:!1}):1525==o.resultCode?e.setData({awardName:"非企业用户",bingoFailedState:!0,bingoState:!1}):1526==o.resultCode&&e.setData({awardName:"非指定企业用户",bingoFailedState:!0,bingoState:!1})}))})).catch((function(e){})),clearTimeout(o);var o=t((function(){e.setData({isLock:!1})}),4e3)}}else e.setData({awardName:"抽奖机会用完啦！",bingoFailedState:!0,bingoState:!1})},queryActRuleLatest:function(e){var t=this;if(e){var a=D.default.luckyProxy+"/act/jsonp/rule/desc/"+e+".json";this.queryInfo(a,(function(e){e&&(0==e.resultCode?S.default.wxParse("rules","html",e.result,t):t.lotteryFailed(e.resultCode))}),(function(e){}))}},queryActAwardLatest:function(e){var t=this;if(e){var a=D.default.luckyProxy+"/act/jsonp/award/"+e+".json";t.queryInfo(a,(function(e){0==e.resultCode?e.result.length>0&&t.setPlateData(e.result):t.lotteryFailed(e.resultCode)}),(function(e){}))}},queryEnabledActivityNumberLatest:function(e){var t=this;if(e){var a=D.default.luckyProxy+"/award/jsonp/my/num/"+e+".json";t.queryInfo(a,(function(e){0==e.resultCode?t.setData({lotteryCount:e.result}):t.lotteryFailed(e.resultCode)}),(function(e){console.log("*****"+e)}))}},queryWinnerListLatest:function(e){var t=this;if(e){var a=D.default.luckyProxy+"/award/jsonp/top/"+e+".json";this.queryInfo(a,(function(e){if(e.result)if(0==e.resultCode){console.log(e);var a=[];e.result.map((function(e){a.push({userAccount:e.userAccount,awardName:e.awardName})})),t.setData({binGoInfo:a}),a.length<4&&a.length>0?t.setData({binGoInfoCount:a.length}):0==a.length?t.setData({binGoInfoCount:0}):t.setData({binGoInfoCount:4})}else 1e3==e.resultCode?t.setData({binGoInfo:[]}):t.lotteryFailed(data.resultCode)}))}},drawAwardLatest:function(e,t,a,o,n){var i=this;e&&t&&(0==a||1==a||2==a||3==a)&&"[object Function]"===Object.prototype.toString.call(o)&&-1==i.data.thankPos&&this.queryActAward(e,(function(t){for(var a=0;a<t.length;a++)if(6==t[a].awardTypeId){t[a].awardOrder;break}var r=D.default.luckyProxy+"/award/draw/"+e+".do";i.queryInfo(r,o,n)}))},queryActAward:function(e,t){if(e){var a=D.default.luckyProxy+"/act/jsonp/new/award/"+e+".json";this.queryInfo(a,t)}},toMyAward:function(){1==this.data.bingoState&&this.setData({bingoState:!1}),i.navigateTo({url:"/packageA/pages/lottery/myAward/myAward?actCode="+this.data.actCode})},goIndex:function(){i.switchTab({url:"/pages/index/index"})},viewRules:function(){0==this.data.ruleState&&this.setData({ruleState:!0})},closeRules:function(){1==this.data.ruleState&&this.setData({ruleState:!1})},closeBingo:function(){1==this.data.bingoState&&this.setData({bingoState:!1})},keepBingo:function(){1==this.data.bingoAgain&&this.setData({bingoState:!1,bingoAgain:!1})},closeFailBingo:function(){1==this.data.bingoFailedState&&this.setData({bingoFailedState:!1})},queryInfo:function(e,t,a){j({method:"POST",url:e,dataType:"jsonp"}).then((function(e){t(e)}),(function(e){a(e)}))},lotteryFailed:function(e){switch(e){case 9999:this.setData({lotteryFail:!0,stateName:"活动不存在"});break;case 8888:this.setData({lotteryFail:!0,stateName:"活动码不存在"});break;case 9998:this.setData({lotteryFail:!0,stateName:"会员账号为空"});break;case 7777:this.setData({lotteryFail:!0,stateName:"当前时间不在抽奖时间段"})}},getCms:function(e,t,a){j({method:"GET",url:t,dataType:"json"}).then((function(t){if(t.zp_actCode){var a=t.zp_actCode.tag[0];if(a.picUrl&&e.setData({wheelBg:""+D.default.img+a.picUrl}),t.zp_advImg&&t.zp_advImg.tag){var o=t.zp_advImg.tag;o&&(o.forEach((function(e){0==e.picUrl.indexOf("http://")||0==e.picUrl.indexOf("https://")?e.picUrl=e.picUrl:e.picUrl=D.default.cms+e.picUrl})),e.setData({topAdv:o}))}if(t.zp_bottomadv&&t.zp_bottomadv.tag){var n=t.zp_bottomadv.tag[0];e.setData({bottomAdvUrl:n.elementDesc,bottomAdvImg:""+D.default.img+n.picUrl})}if(t.zp_bgColor&&t.zp_bgColor.tag){var r=t.zp_bgColor.tag[0];e.setData({bgColor:r.elementName})}if(t.zp_bottomImg&&t.zp_bottomImg.tag){var s=t.zp_bottomImg.tag[0].picUrl,c="";c=0==s.indexOf("http://")||0==s.indexOf("https://")?s:D.default.cms+s,e.setData({bottomBg:c})}if(t.zp_topImg&&t.zp_topImg.tag){var d=t.zp_topImg.tag[0].picUrl,u="";u=0==d.indexOf("http://")||0==d.indexOf("https://")?d:D.default.cms+d,e.setData({topBg:u})}e.queryActRuleLatest(e.data.actCode),e.queryActAwardLatest(e.data.actCode);var l=i.createAnimation({duration:3200,timingFunction:"ease-out"});e.aniData=l,i.hideLoading()}}),(function(e){console.log(e)}))},onShareAppMessage:function(e){return{title:"幸运大抽奖，缤纷好礼赚起来~",path:"packageA/pages/lottery/lottery?jumpCode="+this.data.jumpCode+"&&actCode="+this.data.actCode,imageUrl:"https://oss.suning.com/vss/activity/wximg/sharef.png",success:function(e){},fail:function(e){i.showToast({title:"分享失败",duration:"2000"})},complete:function(){}}},baseJump:function(e){var t=e.currentTarget.dataset.jumpurl;t&&(0===t.indexOf("http://")||0===t.indexOf("https://")?i.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):q(t))}})})),window.define("919",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};var S=e(25).requestPromise,P=i(),_=(P.bindUserInfo,P.handleAuthDeny,P.globalData,e(38).checkLogin);Page({data:{actCode:"",winHeight:0,awardList:[],logisticsState:!1,logisticsStateMsg:""},onLoad:function(e){var t=this;_().then((function(){n.getSystemInfo({success:function(e){console.log(e),t.setData({winHeight:e.screenHeight})}}),t.setData({actCode:e.actCode}),t.getMyActAwardURL(t.data.actCode,0)}),(function(){n.getSystemInfo({success:function(e){console.log(e),t.setData({winHeight:e.screenHeight})}}),t.setData({actCode:e.actCode}),t.getMyActAwardURL(t.data.actCode,0)})).catch((function(e){console.log(e),n.hideLoading(),n.showModal({title:"提示",content:"登录失败，请重新登录或者绑定~",showCancel:!1})}))},onReady:function(){},onShow:function(e){console.log(e),this.getMyActAwardURL(this.data.actCode,0)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},getMyActAwardURL:function(e){var t=this,a=D.default.luckyProxy+"/award/jsonp/my/"+e+".json";S({method:"post",url:a,dataType:"jsonp"}).then((function(e){if(e.result){var a=[];e.result.map((function(e){var t={};t.awardImgUrl=e.awardImgUrl,t.awardName=e.awardName,t.winDt=e.winDt.split(".")[0],t.awardState=e.awardState,t.actWinId=e.actWinId,t.awardTypeId=e.awardTypeId,a.push(t)})),t.setData({awardList:a})}}),(function(e){console.log(e)}))},showLogistics:function(e){0==this.data.logisticsState&&this.setData({logisticsState:!0}),console.log(e),this.queryLogistics(this.data.actCode,e.currentTarget.dataset.actwinid)},queryLogistics:function(e,t){var a=this;if(e&&t){var o=D.default.luckyProxy+"/award/jsonp/my/record/"+e+"/"+t+".json";S({method:"post",url:o,dataType:"jsonp"}).then((function(e){if(e.result)switch(e.result.awardState){case"3":a.setData({logisticsStateMsg:"快递单号:"+e.result.expressNumber});break;case"6":a.setData({logisticsStateMsg:e.result.showMessage})}}),(function(e){console.log(e)}))}},closeLogistics:function(){1==this.data.logisticsState&&this.setData({logisticsState:!1})},goFillAddress:function(e){n.navigateTo({url:"/packageA/pages/lottery/address/address?actWinId="+e.target.dataset.actwinid+"&&actCode="+this.data.actCode})},goQuanList:function(){n.navigateTo({url:"/packageA/pages/quan/quanList"})}})})),window.define("922",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(8),S=(x=D)&&x.__esModule?x:{default:x};var P=e(25),_=P.queryAddress,k=P.find,L=P.queryPickSites,R=P.requestPromise,A=(P.getBackDelta,e(17),e(923)),j=A.PAGE_TYPE,O=A.OPERATE_TYPE,q=e(135);r();Page({data:{provs:[],citys:[],areas:[],towns:[],ztTowns:[],provIndex:0,cityIndex:0,areaIndex:0,townIndex:0,ztTownIndex:0,addressID:"",type:"",operate:"",formInvalid:!0,isFirstFocusMobile:!0,receiverName:"",receiverMobile:"",detailAddress:"",defaultAddress:0,postalCode:"",cart2No:"",actWinId:"",actCode:""},onLoad:function(e){this.data.actWinId=e.actWinId,this.data.actCode=e.actCode;var t=(e=e||{}).o||O.add,a=e.type||j.peisong,o=e.obj||"",n=e.no||"";this._updateNavigationBarTitle(t,a),a&&this.setData({type:a,operate:t});var i={};o&&(o=JSON.parse(o),this.setData({addressID:o.addressID,receiverName:o.receiverName,receiverMobile:o.receiverMobile,detailAddress:o.detailAddress,defaultAddress:o.defaultAddress,postalCode:o.postalCode,formInvalid:!1}),i={provCode:o.provinceCode,cityCode:o.cityCode,areaCode:o.districtCode,townCode:o.townCode}),n&&this.setData({cart2No:n}),this.initAddress(i)},onReady:function(){},onShow:function(){!1},onHide:function(){},onUnload:function(){!1},onPullDownRefresh:function(){},onReachBottom:function(){},bindProvChange:function(e){var t=parseInt(e.detail.value,10);this.setData({provIndex:t});var a=this.data.provs[t].code;this.updateAddress({provCode:a})},bindCityChange:function(e){var t=parseInt(e.detail.value,10);this.setData({cityIndex:t});var a=this.data.citys[t].code;this.updateAddress({cityCode:a})},bindAreaChange:function(e){var t=parseInt(e.detail.value,10);this.setData({areaIndex:t});var a=this.data.areas[t].code;this.updateAddress({areaCode:a})},bindTownChange:function(e){var t=parseInt(e.detail.value,10);this.setData({townIndex:t})},bindZTTownChange:function(e){var t=parseInt(e.detail.value,10);this.setData({ztTownIndex:t})},updateData:function(e){var t=e.currentTarget.id,a=e.detail.value;"defaultAddress"===t&&(a="1"==a[0]?1:0);this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,a)),this.submitZTDeliveryEnabled()},initAddress:function(e){var t=this,a=(e=e||{}).provCode;_().then((function(o){if(o=o||[],t.setData({provs:o}),a){var n=k(o,(function(e){return e.code===a}));if(n){var i=o.indexOf(n);t.setData({provIndex:i})}}else t.setData({provIndex:0}),e.provCode=o[0]&&o[0].code;t.updateAddress(e)})).catch((function(e){}))},updateAddress:function(e){var t=this,a=this.data.type,o=e.provCode,n=e.cityCode,i=e.areaCode,r=e.townCode;function s(e){if((e=e||[]).length>0&&t.setData({citys:e}),n){var a=k(e,(function(e){return e.code===n}));if(a){var o=e.indexOf(a);t.setData({cityIndex:o})}}else t.setData({cityIndex:0});var i=n||e[0]&&e[0].code;n=i,i&&_(i,"area").then(c).catch(l)}function c(e){if((e=e||[]).length>0&&t.setData({areas:e}),i){var r=k(e,(function(e){return e.code===i}));if(r){var s=e.indexOf(r);t.setData({areaIndex:s})}}else t.setData({areaIndex:0});var c=i||e[0]&&e[0].code;i=c,c&&(a==j.peisong?_(c,"town").then(d).catch(l):a==j.ziti&&(o=t.data.provs[t.data.provIndex].code,n=t.data.citys[t.data.cityIndex].code,L(o,n,i,t.data.cart2No).then(u).catch(l)))}function d(e){if((e=e||[]).length>0&&t.setData({towns:e,townIndex:0}),r){var a=k(e,(function(e){return e.code===r}));if(a){var o=e.indexOf(a);t.setData({townIndex:o})}else t.setData({townIndex:0})}}function u(e){if(e=e||[],t.setData({ztTowns:e,ztTownIndex:0}),r){var a=k(e,(function(e){return e.code===r}));if(a){var o=e.indexOf(a);t.setData({townIndex:o})}else t.setData({townIndex:0})}}function l(){}o?_(o,"city").then(s).catch(l):n?s():i?c():r&&d()},submitDelivery:function(){var e=this.data.operate,t=this.data.type,a=this.data.formInvalid,o=this._formatSubmitData(e,t),n=this;a||this.submitZTDeliveryEnabled(!0)&&this.createDeliveryLatest(this.data.actCode,this.data.actWinId,o.provinceName,o.cityName,o.districtName,o.detailAddress,o.receiverMobile,o.receiverName,(function(e){e&&(0==e.resultCode?i.navigateBack({url:"/packageA/pages/lottery/myAward/myAward?actCode="+n.data.actCode}):1611==e.resultCode?i.showToast({title:"请设置收货省份",icon:"none",duration:2e3}):1612==e.resultCode?i.showToast({title:"请设置收货城市",icon:"none",duration:2e3}):1613==e.resultCode?i.showToast({title:"请设置收货区/县",icon:"none",duration:2e3}):1614==e.resultCode?i.showToast({title:"请设置收货详细地址",icon:"none",duration:2e3}):1615==e.resultCode?i.showToast({title:"请设置收货人姓名",icon:"none",duration:2e3}):1617==e.resultCode?i.showToast({title:"中奖记录不存在",icon:"none",duration:2e3}):1621==e.resultCode?i.showToast({title:"无法创建物流地址",icon:"none",duration:2e3}):1618==e.resultCode?i.showToast({title:"奖项领取时间已经过期",icon:"none",duration:2e3}):1619==e.resultCode&&i.showToast({title:"会员收货地址不存在",icon:"none",duration:2e3}))}))},clearMobile:function(){this.data.isFirstFocusMobile&&this.setData({isFirstFocusMobile:!1,receiverMobile:""})},submitZTDeliveryEnabled:function(e){var t=this.validName();return t.result&&(t=this.validMobile()),t.result&&this.data.type==j.peisong&&(t=this.validDetailAddress()),t.tips&&!t.result&&e&&this.showTips(t.tips),this.setData({formInvalid:!t.result}),t.result},validDetailAddress:function(e){var t,a=!0,o=this.data.detailAddress;return/^.{1,50}$/.test(o)||(t="详细地址应为1-50个字符，请重新输入！",a=!1),/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(o)||(t="详细地址中含有非法字符",a=!1),/[\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]+/.test(o)||(t="详细地址不允许为空",a=!1),e&&e.currentTarget.id&&!a&&this.showTips(t),{result:a,tips:t}},validMobile:function(e){var t,a=this.data.receiverMobile,o=!0;return this.data.isFirstFocusMobile?11!=a.length&&(t="手机号码必须是以1开头的11位数字",o=!1):/^1\d{10}$/.test(parseInt(a,10))&&11==a.length||(t="手机号码必须是以1开头的11位数字",o=!1),e&&e.currentTarget.id&&!o&&this.showTips(t),{tips:t,result:o}},validName:function(e){var t,a=this.data.receiverName,o=!0;return/^.{1,20}$/.test(a)?/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(a)?/[\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]+/.test(a)||(t="收货人不允许为空",o=!1):(t="收货人中含有非法字符",o=!1):(t="收货人姓名应为1-20个字符，请重新输入！",o=!1),e&&e.currentTarget.id&&!o&&this.showTips(t),{tips:t,result:o}},submitOrderDelivery2CCF:function(e){var a=this;(e=e||{}).cart2No=this.data.cart2No,(void 0).then((function(e){if(a.hideLoading(),"1"==e.code&&e.data&&e.data.errorInfos){var o=e.data.errorInfos[0]||{};o.errorMessage?(a.showTips(o.errorMessage),t((function(){a.goAddressList()}),3e3)):a.goCart2()}else a.showTips("网络异常")})).catch((function(e){console.error(e),a.hideLoading(),a.showTips("网络异常")}))},createDeliveryLatest:function(e,t,a,o,n,i,r,s,c){var d=S.default.luckyProxy+"/award/jsonp/create/address.json",u={};u.actCode=e,u.actWinId=t,u.province=encodeURIComponent(a),u.city=encodeURIComponent(o),u.district=encodeURIComponent(n),u.detailAddr=encodeURIComponent(i),u.phone=r,u.receiveName=encodeURIComponent(s),this.getJsonpDataWithCode(u,d,c,!0)},getJsonpDataWithCode:function(e,t,a,o){e&&R({method:"post",url:t,data:e,dataType:"jsonp",jsonpCallback:"jsonpCallback"}).then((function(e){a(e)}),(function(e){console.log(e)}))},showLoading:function(e){i.showLoading({title:e||"加载中",mask:!0})},hideLoading:function(){i.hideLoading()},validateZTFormItem:function(){},_updateNavigationBarTitle:function(e,t){var a="新增",o="收货";e==O.edit&&(a="修改"),t==j.ziti&&(o="自提"),i.setNavigationBarTitle({title:a+o+"地址"})},_formatSubmitData:function(e,t){var a={},o=this.data,n=o.provs,i=o.citys,r=o.areas,s=o.towns,c=o.ztTowns,d=o.provIndex,u=o.cityIndex,l=o.areaIndex,g=o.townIndex,p=this.data.ztTownIndex,h=this.data,f=h.addressID,m=h.detailAddress,w=h.receiverName,v=h.receiverMobile,y=h.defaultAddress,C=h.postalCode,T=n[d]||{},I=i[u]||{},b=r[l]||{},x=s[g]||{};if(a={opType:e,addressID:f,provinceName:T.name,provinceCode:T.code,cityName:I.name,cityCode:I.code,districtName:b.name,districtCode:b.code,townName:x.name,townCode:x.code,deliveryRegionCode:x.code,detailAddress:m,receiverName:w,receiverMobile:v,defaultAddress:y,idNumber:"",receiverBakMobile:"",postalCode:C,pickupAddress:0},t==j.ziti){var D=c[p];a.pickupAddress=1,a.deliveryRegionCode=D.jurstCode,a.selfPickupCode=D.pickupSiteCode,a.selfPickupType=D.type,a.selfTakeShopCode=D.storeCode,a.townCode=D.jurstCode,a.townName=D.siteName,a.detailAddress=D.siteAddress}return a},showTips:function(e){q.showToast({title:e})}})})),window.define("923",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";t.exports={PAGE_TYPE:{peisong:"ps",ziti:"zt"},OPERATE_TYPE:{add:1,edit:2,delete:3}}})),window.define("926",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({data:{alertStr:"更多精彩，请下载易购App！"},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},alert:function(){n.showModal({title:"苏宁会员",content:"尊敬的苏宁会员，您可前往“苏宁易购微信公众号-我的服务 - SUPER会员”了解更多SUPER会员特权福利。",showCancel:!1,confirmColor:"#f60"})}})})),window.define("929",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,text1:"",text2:"",amount:"",shareImg:""},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e&&e.type?this.setData({isMain:!1,type:e.type,cardId:e.cardId,token:e.token}):this.setData({isMain:!0,token:e.token||""})},getCmsData:function(){var e=this,t=S.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({shareImg:"https://image.suning.cn"+t.adPic.tag[0].picUrl,text1:t.shareinfo.tag[9].elementDesc,text2:t.shareinfo.tag[10].elementDesc}),e.getYunCount()}catch(e){}}))},getYunCount:function(){var e=this,t=S.act+"/act-wap-web/monopoly/gateway/getMyTripInfo.do";x({method:"GET",url:t,data:{activityCode:"monopoly"},dataType:"json"}).then((function(t){try{if(t.data.result.allPassGift){var a=t.data.result.allPassGift,o=JSON.parse(a);e.setData({amount:o.amount})}else e.setData({amount:"0"})}catch(t){e.setData({amount:"0"})}e.readyFun()}))},onReady:function(){this.init()},readyFun:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.shareImg,x:0,y:0,width:600,height:901};e.drawImage(t,a,(function(){!function(){var a={content:e.data.text1,size:30,color:"#fff",position:{x:14,y:688}};e.fillText(t,a);var o={content:e.data.text2+e.data.amount+"云钻",size:30,color:"#fff",position:{x:14,y:732}};e.fillText(t,o),n.hideLoading()}()}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){var e=this;D().then((function(){e.getCmsData()})).catch((function(){console.log("未登录")}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("932",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,e(579),e(8));Page({data:{type:"",token:"",src:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData()},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);console.log("scene的值：",t);var a=t.split("?");this.setData({type:a[0]||"1",token:a[1]||""})}else console.log("token的值：",e.token),console.log("type的值：",e.type),this.setData({type:e.type||"1",token:e.token||""})},getCmsData:function(){var e=this,t=D.cms+"/api/json/woolgame.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a="";a="2"==e.data.type?t.wool_helpsrc.tag[0].elementName:t.wool_indexsrc.tag[0].elementName,console.log("跳转src:",a),e.setData({src:a}),e.navigateToH5()}catch(e){}}))},navigateToH5:function(){var e=this.data.src;"2"==this.data.type&&(e=e+"?token="+this.data.token),console.log("最终跳转地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("935",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{type:"",token:"",times:"",amount:"",yun:"",coupon:"",poolType:"",poolDes:"",shareImg:"",shareLongImg:"",shareIcon:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.setPageData(e),this.getCmsData(),D().then((function(){console.log("已登录")})).catch((function(){}))},onReady:function(){},onShow:function(){},getCmsData:function(){var e=this,t=S.cms+"/api/json/woolgame.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a="",o="",n="",i="";"2"==e.data.type?(a=t.wool_x_imgicon.tag[0].picUrl,o=t.wool_x_imgwx.tag[0].picUrl,n=t.wool_x_imgpyq.tag[0].picUrl,i=t.wool_x_des.tag[0].elementName):"3"==e.data.type?(a=t.wool_z_imgicon.tag[0].picUrl,o=t.wool_z_imgwx.tag[0].picUrl,n=t.wool_z_imgpyq.tag[0].picUrl,i=t.wool_z_des.tag[0].elementName):"4"==e.data.type?(a=t.wool_t_imgicon.tag[0].picUrl,o=t.wool_t_imgwx.tag[0].picUrl,n=t.wool_t_imgpyq.tag[0].picUrl,i=t.wool_t_des.tag[0].elementName):(a=t.wool_h_imgicon.tag[0].picUrl,o=t.wool_h_imgwx.tag[0].picUrl,n=t.wool_h_imgpyq.tag[0].picUrl,i=t.wool_h_des.tag[0].elementName),e.setData({shareImg:S.img+o,shareLongImg:S.img+n,shareIcon:S.img+a,shareTitle:i})}catch(e){console.info("error:",e)}}))},onShareAppMessage:function(){console.log("分享给朋友","");var e="",t="";return"1"==this.data.type?(t="/packageA/pages/friends/main/index?type=2&token="+this.data.token,e=this.data.shareTitle):(t="/packageA/pages/friends/main/index?type=1",e=this.data.shareTitle.replace("{{amount}}",this.data.amount)),console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.shareIcon,path:t}},setPageData:function(e){if(e&&e.type){var t=e.poolType||"3",a="";a="4"==t?"云钻":"5"==t?"优惠券":"元",this.setData({type:e.type,token:e.token||"",amount:e.amount||"",times:e.times||"",yun:e.yun||"",coupon:e.coupon||"",poolType:t,poolDes:a})}else this.setData({type:"1",token:"",amount:"",times:"",yun:"",coupon:"",poolType:""})},sharePYQ:function(){var e;e="../save/index?type="+this.data.type+"&token="+this.data.token+"&amount="+this.data.amount+"&poolDes="+encodeURIComponent(this.data.poolDes)+"&shareLongImg="+encodeURIComponent(this.data.shareLongImg)+"&times="+this.data.times+"&yun="+this.data.yun+"&coupon="+this.data.coupon,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()}})})),window.define("938",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(579),P=e(8);Page({data:{iphoneXClass:"",token:"",date:"10月31日瓜分",award:"4亿云钻"},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.checkPageLogin(),this.getCmsData(),this.getToken(e),this.getSystemInfo()},onShareAppMessage:function(){},getCmsData:function(){var e=this,t=P.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({date:t.shareAward.tag[0].elementName,award:t.shareAward.tag[0].elementDesc})}catch(e){}}))},checkPageLogin:function(){var e=this;D().then((function(){console.log("已登录"),e.getGiftStatus()})).catch((function(){}))},getGiftStatus:function(){console.log("获取是否处于瓜分状态");var e=P.act+"/act-wap-web/monopoly/gateway/getLastGiftStatus.do";x({method:"GET",url:e,dataType:"json",data:{activityCode:"monopoly"}}).then((function(e){if(console.log("获取是否处于瓜分状态",e),"1"==e.code){var t=S.friend_card+"guafen.html";console.log("瓜分页面H5地址:",t),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)+"&s=1"})}}))},getToken:function(e){if(e){var t="";e.token?t=e.token:e.scene&&(t=decodeURIComponent(e.scene)),this.setData({token:t})}},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){-1!=t.model.search("iPhone X")&&e.setData({iphoneXClass:"iphoneX"})}})},enterGame:function(e){var t="true"==e.currentTarget.dataset.isme,a=S.friend_game+"index.html"+(t?"":"?token="+this.data.token);console.log("我的游戏页面H5地址:",a),n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)+"&s=1"})}})})),window.define("941",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{type:"",token:"",amount:"",poolDes:"",shareLongImg:"",times:"",yun:"",coupon:"",ratio:2},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}this.getRatio(),this.setPageData(e),this.init()},getRatio:function(){var e=this;n.getSystemInfo({success:function(t){console.info(t.pixelRatio),e.setData({ratio:t.pixelRatio})}})},setPageData:function(e){e&&e.type?(this.setData({type:e.type,token:e.token,amount:e.amount,poolDes:decodeURIComponent(e.poolDes),shareLongImg:decodeURIComponent(e.shareLongImg),times:e.times,yun:e.yun,coupon:e.coupon}),console.info("朋友圈参数信息：",this.data)):console.info("error:","参数错误")},readyFun:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.shareLongImg,x:0,y:0,width:600,height:900};function o(){var a="",o="",n=!1;e.data.times&&(a+="累计瓜分"+e.data.times+"次, "),e.data.amount&&(a+="获得现金"+e.data.amount+"元"+(e.data.yun||e.data.coupon?", ":""),n=!0),e.data.yun&&(n?o+="云钻"+e.data.yun+"个"+(e.data.coupon?", ":""):a+="云钻"+e.data.yun+"个"+(e.data.coupon?", ":""),n=!0),e.data.coupon&&(n?o+="优惠券"+e.data.coupon+"个":a+="优惠券"+e.data.coupon+"个",n=!0);var i={content:a,size:26,color:"#1F86FB",position:{x:110,y:535}};if(e.fillText(t,i),o){var r={content:o,size:26,color:"#1F86FB",position:{x:110,y:580}};e.fillText(t,r)}}function i(){var a={content:e.data.amount,size:48,color:"#fffb43",position:{x:270,y:535}};e.fillText(t,a);var o=t.measureText(e.data.amount).width,i={content:e.data.poolDes,size:30,color:"#fffb43",position:{x:280+2*o,y:535}};e.fillText(t,i),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){"1"==e.data.type?n.hideLoading():"3"==e.data.type?(o(),n.hideLoading()):i()}))}(t)}))},onShow:function(){},onReady:function(){this.readyFun()},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a=this,o=S.act+"/act-wap-web/wechat/program/geturl.do",n={};n="1"==a.data.type?{page:"packageA/pages/friends/main/index",scene:"2?"+a.data.token}:{page:"packageA/pages/friends/main/index",scene:"1"},console.log("_data",n),x({method:"GET",url:o,dataType:"json",data:n}).then((function(o){console.log("二维码图片地址：：",o.data.imageUrl);if(e.arc(240,382.5,37.5,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),o&&o.data&&o.data.imageUrl){var n={src:o.data.imageUrl.replace("http://","https://"),x:410,y:695,width:140,height:140};a.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("944",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25).checkLogin,x=void 0;Page({onLoad:function(e){console.log("onload"),x=e},onShow:function(){console.log("onshow");var e="true"==x.needLogin,t=decodeURIComponent(x.url);0==t.indexOf("http")&&(t="/pages/webView/index?webViewSrc="+encodeURIComponent(t)+"&s=1"),e?b().then((function(){n.redirectTo({url:t})})).catch((function(){})):n.redirectTo({url:t})}})})),window.define("947",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(9),x=e(25).saSendPageViewLog;Page({data:{webViewSrc:"",saPgnm:"pgtitle=webView内嵌页;pgcate=10009;"},onLoad:function(e){console.log("middle options.scene:"+e.scene);var t=e.scene.split("!"),a={prod:"https://sale.suning.com/all/cs22/middle.html"}[b]||"https://saleprexg.cnsuning.com/QT/cs2/middle.html";a=a+"?pageCode="+t[0]+"&userToken="+t[1]+"&minip=true",x({webViewSrc:encodeURIComponent(a)}),this.setData({webViewSrc:a})}})})),window.define("950",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(8),x=e(25).requestPromise,D=e(77).saSendLog,S=void 0,P=void 0,_=void 0,k=void 0,L=void 0,R=!1,A=void 0,j=void 0,O=void 0,q=void 0;Page({data:{color:"",defaultShareTxt:"",isShareImageVisible:!1,canvasWidth:0,canvasHeight:0,saPgnm:"pgcate=10004;tag=100060;pgtitle=小程序分享页"},onLoad:function(e){var t=decodeURIComponent(e.color),a=decodeURIComponent(e.defaultShareTxt);S=decodeURIComponent(e.shareTitle),P=decodeURIComponent(e.shareBg),_=decodeURIComponent(e.shareMinipIcon),decodeURIComponent(e.shareLink),k=decodeURIComponent(e.pageCode),L=decodeURIComponent(e.userToken),A=n.createCanvasContext("share-image"),this.getCanvasSize(),this.setData({color:t,defaultShareTxt:a,canvasWidth:j,canvasHeight:O})},getCanvasSize:function(){var e=n.getSystemInfoSync(),t=e.windowHeight-120,a=e.windowWidth-40;t/a>1204/750?(O=1204*(j=a)/750,q=j/750):(j=750*(O=t)/1204,q=O/1204)},onShow:function(){R=!1,D("pageview")},onShareAppMessage:function(){return{title:S,imageUrl:_,path:"/packageA/pages/lightapp/cs2/middle/middle?scene="+k+"!"+L}},copy:function(e){n.setClipboardData({data:e.detail.value.textarea,success:function(){n.showToast({title:"复制成功"})},fail:function(){n.showToast({title:"复制失败"})}})},share:function(){var e=this;R?this.setData({isShareImageVisible:!0}):(n.showLoading({title:"正在生成图片"}),function(e){P=P.replace(/image\d?.suning.cn/,"image.suning.cn").replace("http://","https://"),console.log("sharebg"),console.log(P),n.getImageInfo({src:P,success:function(t){A.drawImage(t.path,0,0,j,O),e()},fail:function(){n.showToast({title:"图片生成失败"}),n.hideLoading()}})}((function(){var t;t=function(){R=!0,n.hideLoading(),e.setData({isShareImageVisible:!0})},x({url:b.act+"/act-wap-web/wechat/program/geturl.do",data:{page:"packageA/pages/lightapp/cs2/middle/middle",scene:k+"!"+L}}).then((function(e){if(e&&e.data&&e.data.imageUrl){var a=e.data.imageUrl.replace(/image\d?.suning.cn/,"image.suning.cn").replace("http://","https://");console.log("minipCode"),console.log(a),n.getImageInfo({src:a,success:function(e){A.drawImage(e.path,108*q,882*q,270*q,270*q),A.draw(!0),t()},fail:function(){n.showToast({title:"图片生成失败"}),n.hideLoading()}})}})).catch((function(){n.showToast({title:"图片生成失败"}),n.hideLoading()}))})))},save:function(){var e=this;n.canvasToTempFilePath({canvasId:"share-image",destWidth:750,destHeight:1204,quality:1,success:function(t){n.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){n.showToast({title:"保存成功"}),e.setData({isShareImageVisible:!1})}})}})},close:function(){this.setData({isShareImageVisible:!1})}})})),window.define("953",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(125),S=e(387),P=(x=S)&&x.__esModule?x:{default:x};function _(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function k(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var L,R=e(8),A=e(25),j=A.requestPromise,O=A.saSendPageViewLog,q=(e(77).saSendLog,e(38).checkLogin),M=e(384),F=r();Page({data:{allActionlist:[],actCode:"",pageid:"z48",saPgnm:"pageid=z48;pgtitle=福利大师首页",shouyeShareTitle:"",shouyeSharePic:""},onLoad:function(e){this.setData({actCode:e.actCode||""}),this.getCmsData()},onShow:function(){var e=k(P.default.mark((function e(t){var a;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,O(),e.prev=2,e.next=5,q();case 5:a.getDrawGroupList(a.data.actCode),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),F.handleAuthDeny();case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),getDrawGroupList:function(e){var t=this;j({url:M.getDrawGroupList+"?actCode="+e,method:"get",type:"json"}).then((function(e){var a=e.data,o=e.code;if(a){var n=[],r=a.endDrawList,s=a.noStartDrawList,c=a.startDrawList,d=a.openDrawList;n.push.apply(n,_(c)),n.push.apply(n,_(d)),n.push.apply(n,_(s)),n.push.apply(n,_(r)),t.setData({allActionlist:n}),t.countDown()}15==o&&i.navigateTo({url:"/packageA/pages/cjt/flowControl/index"})}))},joinAct:function(e){(0,D.formid)(e),i.navigateTo({url:"/packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail?actId="+e.currentTarget.dataset.actid+"&actCode="+e.currentTarget.dataset.actcode})},countDown:function(){var e=this,a=(new Date).getTime(),o=this.data.allActionlist,n=this;o.forEach((function(t){var o=new Date(t.beginTime).getTime(),i=null;if(o-a>0){var r=(o-a)/1e3,s=parseInt(r/86400),c=parseInt(r%86400/3600),d=parseInt(r%86400%3600/60),u=parseInt(r%86400%3600%60);i={day:e.timeFormat(s),hou:e.timeFormat(c),min:e.timeFormat(d),sec:e.timeFormat(u)}}else i={day:"00",hou:"00",min:"00",sec:"00"},0==t.state&&(e.setData({allActionlist:[]}),clearTimeout(e.countDown,1e3),n.getDrawGroupList(n.data.actCode));t.countDown=i})),this.setData({allActionlist:o}),t(this.countDown,1e3)},timeFormat:function(e){return e<10?"0"+e:e},submitInfo:function(e){(0,D.formid)(e),console.log(1)},onShareAppMessage:function(e){return{title:this.data.shouyeShareTitle,imageUrl:this.data.shouyeSharePic,success:function(e){},fail:function(e){i.showToast({title:"分享失败",duration:"2000"})},complete:function(){}}},getCmsData:(L=k(P.default.mark((function e(){var t,a,o;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=R.cms+"/api/json/cjt.json",e.prev=2,e.next=5,j({method:"GET",url:a,dataType:"json"});case 5:(o=e.sent)&&o.rd_share_shouye&&o.rd_share_shouye.tag&&o.rd_share_shouye.tag.length>0&&t.setData({shouyeShareTitle:o.rd_share_shouye.tag[0].elementName,shouyeSharePic:R.img+o.rd_share_shouye.tag[0].picUrl}),console.log(t.data.shouyeShareTitle),console.log(t.data.shouyeSharePic),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(){return L.apply(this,arguments)})})})),window.define("956",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({goRecords:function(e){console.log(e),n.navigateTo({url:"/packageA/pages/cjt/my/myReward/myReward?tabIndex="+e.currentTarget.dataset.tabindex})},goAddress:function(){n.navigateTo({url:"/packageA/pages/cjt/my/address/address"})}})})),window.define("959",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(125),x=(e(8),e(25)),D=x.requestPromise,S=x.saSendPageViewLog,P=e(38).checkLogin,_=e(77).saSendLog,k=e(384),L=i();Page({data:{tabIndex:1,lotteryList:[],noLotteryList:[],hasAddress:!1,actCode:"",pageid:"RE9uF",saPgnm:"pageid=RE9uF;pgtitle=我的抽奖"},onLoad:function(e){this.setData({actCode:e.actCode||""})},onShow:function(){var e=this;S(),P().then((function(){e.getMyLotteryGroupList(e.data.actCode),e.getMyNonLotteryGroupList(e.data.actCode)})).catch((function(){L.handleAuthDeny()}))},getMyLotteryGroupList:function(e){var t=this;D({url:k.getMyLotteryGroupList+"?actCode="+e+"&sceneFlag=2",method:"get",type:"json"}).then((function(e){var a=e.data,o=e.code;if(a){var i=a;t.getTakePartPhoto(t.data.actCode,i)}15==o&&n.navigateTo({url:"/packageA/pages/cjt/flowControl/index"})}))},getMyNonLotteryGroupList:function(e){var t=this;D({url:k.getMyNonLotteryGroupList+"?actCode="+e+"&sceneFlag=1",method:"get",type:"json"}).then((function(e){var a=e.data,o=e.code;if(console.log("***未中奖列表***"),console.log(a),a){var i=a;t.setData({noLotteryList:i||[]})}15==o&&n.navigateTo({url:"/packageA/pages/cjt/flowControl/index"})}))},getTakePartPhoto:function(e,t){var a=this;t.map((function(o){D({url:k.getWinnerInfo+"?actCode="+e+"&actId="+o.actId,method:"GET",type:"json"}).then((function(e){e&&e.data?"{}"==JSON.stringify(e.data)?o.hasAddress=!1:o.hasAddress=!0:o.hasAddress=!1,o.photList=o.photList.splice(0,3),o.endTime=a.formatDate(o.endTime),console.log("***已中奖列表***"),console.log(t),a.setData({lotteryList:t||[]})}))}))},joinAct:function(e){(0,b.formid)(e),n.navigateTo({url:"/packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail?actId="+e.currentTarget.dataset.actid+"&actCode="+e.currentTarget.dataset.actcode})},changeTab:function(e){var t=e.target.dataset.index;1==t&&n.setNavigationBarTitle({title:"待开奖"}),2==t&&n.setNavigationBarTitle({title:"已开奖"}),this.setData({tabIndex:t})},goAddress:function(e){n.navigateTo({url:"/packageA/pages/cjt/my/address/edit/edit?actId="+e.currentTarget.dataset.actid+"&actCode="+this.data.actCode})},goQuan:function(){n.navigateTo({url:"/packageA/pages/quan/quanList"})},formatDate:function(e){var t=new Date(Number(e)),a=t.getMonth()+1,o=t.getFullYear(),n=t.getDate(),i=t.getHours(),r=t.getMinutes();console.log(a,o,n,i,r),String(a).length<2&&(a="0"+a),String(n).length<2&&(n="0"+n),String(i).length<2&&(i="0"+i),String(r).length<2&&(r="0"+r);var s=o+"-"+a+"-"+n+" "+i+":"+r;return console.log(a,o,n,i,r),s},submitInfo:function(e){(0,b.formid)(e)},autoClick:function(e){_("click",{event:e})}})})),window.define("962",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(387);(b=x)&&b.__esModule;e(8);var D=e(25),S=D.requestPromise,P=(D.saSendPageViewLog,e(38).checkLogin),_=(e(77).saSendLog,e(384)),k=i();Page({data:{actCode:"",actId:"",custPhotoList:[],custCodes:[],inviteChoseShow:!1,pageid:"RE9uF",saPgnm:"pageid=RE9uF;pgtitle=我的抽奖号"},onLoad:function(e){var t=this;this.setData({actId:e.actId||"",actCode:e.actCode||"",shareToken:e.token||""}),P().then((function(e){var a=n.getStorageSync("custNo");console.log(a),t.getTakePartPhoto(t.data.actCode,t.data.actId),t.getDrawGroupCode(t.data.actCode,t.data.actId),t.getUserToken()})).catch((function(e){k.handleAuthDeny()}))},onShow:function(){},getUserToken:function(){var e=this;S({url:_.getShareTolen+"?actCode="+this.data.actCode+"&actId="+this.data.actId,method:"get",type:"json"}).then((function(t){console.log("分享token数据：",t),e.setData({token:t.data&&t.data.token||""})}))},getTakePartPhoto:function(e,t){var a=this;S({url:_.getTakePartPhoto,method:"POST",type:"json",data:{actCode:e,actId:t}}).then((function(e){if(e){var t=e.data.custPhotoList.map((function(e){return JSON.parse(e)}));t=t.splice(0,16),a.setData({custPhotoList:t||[]})}}))},getDrawGroupCode:function(e,t){var a=this;S({url:_.getDrawGroupCode,method:"POST",type:"json",data:{actCode:e,actId:t}}).then((function(e){if(e&&e.data&&e.data.list){var t=e.data.list.map((function(e){if(e.length<10)for(var t=0;t<10;t++)e="0"+e;return e}));a.setData({custCodes:t||[]})}else a.setData({custCodes:[]})}))},showInviteCover:function(e){this.setData({inviteChoseShow:!0})},closeInvites:function(){this.setData({inviteChoseShow:!1})},onShareAppMessage:function(e){console.log(e);var t=e.target.dataset.xcxcardpic,a="/packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail?actCode="+this.data.actCode+"&actId="+this.data.actId+"&token="+this.data.token;return{title:e.target.dataset.sharetitle,path:a,imageUrl:""+t,success:function(e){},fail:function(e){n.showToast({title:"分享失败",duration:"2000"})},complete:function(){}}}})})),window.define("965",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(125),D=e(387),S=(b=D)&&b.__esModule?b:{default:b};function P(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function o(n,i){try{var r=t[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var _,k,L,R,A,j,O=e(8),q=e(38).checkLogin,M=e(25),F=M.requestPromise,U=M.saSendPageViewLog,N=(e(966).smallMsgCode,e(77).saSendLog),E=e(384),B=i();e(579);Page({data:{coverBox:!1,drawSuccess:!1,goDraw:!1,drawAlready:!1,inviteFriends:!1,fullEnter:!1,inviteChoseShow:!1,showMomentsImg:!1,opening:!1,errorMsgShow:!1,actCode:"",userDrawNumCount:0,renderData:{},takePartType:"",takeNum:0,token:"",officialAccountKg:!1,errorMsgText:"参与失败",pageid:"RE9uF",saPgnm:"pageid=RE9uF;pgtitle=福利大师活动聚合页",showBlock:B.globalData.showGzhzj,canIUseOff:n.canIUse("official-account"),goodsFlowList:[]},closeSelf:function(){this.setData({coverBox:!1,drawAlready:!1,errorMsgShow:!1})},toMoreDraw:function(){n.navigateTo({url:"/packageA/pages/cjt/index?actCode="+this.actCode})},lookMyDrawNum:function(e){n.navigateTo({url:"/packageA/pages/cjt/reward/joinedList/joinedList?actCode="+this.actCode+"&actId="+this.actId+"&token="+this.token})},addAdress:function(e){n.navigateTo({url:"/packageA/pages/cjt/my/address/edit/edit?actCode="+this.actCode+"&actId="+this.actId})},toSuplierUrl:function(e){console.log("页面栈层数",getCurrentPages()),console.log("页面跳转URL",getCurrentPages()),"/pages/index/index"==e.currentTarget.dataset.tolink?n.switchTab({url:e.currentTarget.dataset.tolink}):n.navigateTo({url:e.currentTarget.dataset.tolink})},goDraw:function(e){(0,x.formid)(e),this.enterDraw()},enterDraw:function(){var e=P(S.default.mark((function e(t){var a,o,n,i,r,s,c,d,u,l,g,p;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,console.info("smsFk is have"),o="",console.log(t),o=t&&"fk"==t.detail.flag?E.participateInDraw+"?activityCode="+a.actCode+"&actId="+a.actId+"&token="+a.shareToken+"&smscode="+(t.detail.smcode||"")+"&_device_session_id=wx_mini":E.participateInDraw+"?activityCode="+a.actCode+"&actId="+a.actId+"&token="+a.shareToken+"&_device_session_id=wx_mini",e.next=7,F({url:o,method:"post",type:"json"});case 7:if(n=e.sent,console.log("参与抽奖结果",n),!n.code){e.next=33;break}if(1!=n.code){e.next=30;break}if(!n.data||0!=n.data.code){e.next=29;break}return i=E.getDrawGroupCode+"?actCode="+a.actCode+"&actId="+a.actId,e.next=15,F({url:i,method:"post",type:"json"});case 15:if(r=e.sent,console.log("抽奖号数据：",r),s=r.data&&r.data.list[0]||"",c=r.data&&r.data.list&&r.data.list.length||"",s.length<10)for(d=0;d<10;d++)s="0"+s;return e.next=21,F({url:E.getTakePartPhoto+"?actCode="+a.actCode+"&actId="+a.actId,method:"post",type:"json"});case 21:u=e.sent,console.log("活动参与人接口数据:",u),l=u.data&&u.data.custCount,g=a.data.fullNum,p=(Math.round(l/g*1e4)/100).toFixed(2)+"%",a.setData({takeNum:l,personPercent:p}),a.setData({userDrawNum:s,userDrawNumCount:c,coverBox:!0,drawSuccess:!0,goDraw:!1}),a.setData({goDraw:!1,inviteFriends:!0}),e.next=30;break;case 29:a.setData({coverBox:!0,errorMsgShow:!0,errorMsgText:n.data&&n.data.msg});case 30:10==n.code&&n.data&&19==n.data.code&&(t&&t.detail&&t.detail.smcode?a.setData({coverBox:!0,errorMsgShow:!0,errorMsgText:"验证失败，请重试"}):a.selectComponent("#smsFK").smsConfirm()),e.next=34;break;case 33:a.setData({coverBox:!0,errorMsgShow:!0});case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),inviteChoose:function(){this.setData({inviteChoseShow:!0,coverBox:!1})},closeInvites:function(){this.setData({inviteChoseShow:!1})},onLoad:function(e){if(console.log(e),e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({actCode:t[0]||"",actId:t[1],shareToken:t[2]||""}),this.actCode=t[0],this.actId=t[1],this.shareToken=t[2]||""}else this.setData({actCode:e.actCode||"",actId:e.actId,shareToken:e.token||""}),this.actCode=e.actCode,this.actId=e.actId,this.shareToken=e.token||"";this.getCmsData(),this.getCmsData2()},getDrawCount:(j=P(S.default.mark((function e(){var t,a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F({url:E.getDrawGroupCode+"?actCode="+this.actCode+"&actId="+this.actId,method:"post",type:"json"});case 3:(t=e.sent)&&(a=t.data&&t.data.list&&t.data.list.length||"",this.setData({userDrawNumCount:a})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return j.apply(this,arguments)}),getDrawDetailInf:(A=P(S.default.mark((function e(t,a,o){var n,i,r,s,c,d,u,l,g,p;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({url:E.getDrawDetail+"?actCode="+t+"&actId="+a,method:"get",type:"json"});case 2:n=e.sent,console.log("详情页数据:",n),i=n.data&&n.data.takePartType,r=n.data.data,s=n.data.data.awardDesc||"",c=n.data.data.actionRule||"",d=s&&s.split("*"),u=c&&c.split("*"),l=n.data.takeNum,g=n.data.data&&n.data.data.fullNum,p=(Math.round(l/g*1e4)/100).toFixed(2)+"%",console.log(p,8888),e.t0=i,e.next=0===e.t0?9:1===e.t0?11:2===e.t0?14:3===e.t0?16:4===e.t0?18:5===e.t0?21:6===e.t0?24:26;break;case 9:return this.setData({notBegin:!0}),e.abrupt("break",26);case 11:return this.getDrawCount(),this.setData({inviteFriends:!0}),e.abrupt("break",26);case 14:return this.setData({goDraw:!0}),e.abrupt("break",26);case 16:return this.setData({drawEnd:!0,notDraw:!0}),e.abrupt("break",26);case 18:return this.getDrawCount(),this.setData({opening:!0}),e.abrupt("break",26);case 21:return this.getWinInfo(this.actCode,this.actId),this.setData({drawAlready:!0,drawEnd:!0}),e.abrupt("break",26);case 24:return this.setData({fullEnter:!0,peopleFulled:!0}),e.abrupt("break",26);case 26:this.setData({takePartType:i,renderData:r,takeNum:l,fullNum:g||0,personPercent:p,awardDescArr:d,actionRuleArr:u});case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return A.apply(this,arguments)}),getWinInfo:(R=P(S.default.mark((function e(t,a){var o,n,i,r,s,c;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({url:E.queryWinInfo+"?actCode="+t+"&actId="+a,method:"get",type:"json"});case 2:o=e.sent,console.log("开奖信息接口数据：",o),n=o.data&&o.data.result,i=o.data&&o.data.awardType||"",r=!o.data||0!=o.data.couponFlag,s=o.data&&o.data.couponUrl||"",c=o.data&&o.data.photoList||[],this.setData({productRender:o.data&&o.data.record,notproductRender:c,coverBox:!0,drawAlready:!0,productType:i,isWin:n,couponFlag:r,couponUrl:s});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return R.apply(this,arguments)}),toUseTicket:function(e){n.navigateTo({url:"/packageA/pages/quanSearch/search/search?id="+e.currentTarget.dataset.ticid})},getUserToken:(L=P(S.default.mark((function e(){var t,a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this),t=E.getShareTolen+"?actCode="+this.actCode+"&actId="+this.actId,e.next=4,F({url:t,method:"get",type:"json"});case 4:a=e.sent,console.log("分享token数据：",a),this.token=a.data&&a.data.token||"",this.setData({token:a.data&&a.data.token||""});case 8:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)}),onReady:function(){},onShow:function(){var e=this;console.log("进onshow"),U(),this.setData(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({goDraw:!1,inviteFriends:!1,drawEnd:!1,fullEnter:!1,notBegin:!1,opening:!1,drawAlready:!1},"drawEnd",!1)),q().then((function(t){console.log(e.data.actCode,e.data.actId,"进onshow数据"),e.getDrawDetailInf(e.data.actCode,e.data.actId),e.getUserToken()})).catch((function(e){console.log(e)}))},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(e){var t=e.target.dataset.xcxcardpic,a="/packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail?actCode="+this.actCode+"&actId="+this.actId+"&token="+this.token;return{title:e.target.dataset.sharetitle,path:a,imageUrl:""+t,success:function(e){},fail:function(e){n.showToast({title:"分享失败",duration:"2000"})},complete:function(){}}},autoClick:function(e){N("click",{event:e})},getCmsData:(k=P(S.default.mark((function e(){var t,a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F({url:"https://fast.suning.com/lib/wx/api/json/official_account.json?v=20180809"});case 3:t=e.sent,a=t.minip_switch.tag[0].elementDesc,console.log("公众号组件开关:",a),1==a&&_this.setData({officialAccountKg:!0}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return k.apply(this,arguments)}),getCmsData2:(_=P(S.default.mark((function e(){var t,a,o,n;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=O.cms+"/api/json/"+t.data.actCode+t.data.actId+".json",e.prev=2,e.next=5,F({method:"GET",url:a,dataType:"json"});case 5:(o=e.sent)&&(n=[],o.cjt_z&&o.cjt_z.nodes&&o.cjt_z.nodes.length>0&&o.cjt_z.nodes.forEach((function(e,a,o){"cjt_detailGoods"==e.modelFullCode&&e.tag&&e.tag.length>0&&(e.tag.forEach((function(e,t,a){n.push({imgSrc:O.img+e.picUrl,imgLink:e.elementDesc,linkType:e.elementType})})),t.setData({goodsFlowList:n}))}))),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return _.apply(this,arguments)}),goodsClick:function(e){var t=e.currentTarget.dataset.goodslink,a=e.currentTarget.dataset.linktype;if(console.log(t+a),t&&a)try{"1"==a?n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}):"2"==a&&n.navigateTo({url:t})}catch(e){console.log(e)}}})})),window.define("966",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(8),x=function(e){return new Promise((function(t,a){n.request({url:e,success:function(){t()},fail:function(){a()}})}))};t.exports={smallMsgCode:function(e,t){var a=b.draw+"/act-wap-web/gateway/smscode/getUserSmsState.do?activityCode="+e+"&smsSence=1",o=b.draw+"/act-wap-web/gateway/sendSmsCode.do?activityCode="+e+"&smsSence=1";return new Promise((function(e,i){n.request({url:a,success:function(a){-1==a.data.state?a.data.passMsg=!0:0==a.data.state?x(o).then((function(e){1001!=e.data.errorCode||(a.data.passMsg=!1,t.setData({codeInputIsOpen:!0}))})):n.showToast({title:"今日次数已用完",icon:"none",duration:3e3}),e()},fail:function(e){t.setData({codeInputIsOpen:!0}),console.log(e),i()}})}))}}})),window.define("969",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(8);var b=e(25),x=b.requestPromise,D=(b.wxPay,b.baseJump,e(38).checkLogin),S=e(384),P=i();Page({data:{addressLists:[],actCode:""},onLoad:function(e){var t=this;this.setData({actCode:e.actCode}),D().then((function(e){var a=n.getStorageSync("custNo");console.log(a),t.getTakePartPhoto(t.data.actCode,a)})).catch((function(e){P.handleAuthDeny()}))},onShow:function(){},getTakePartPhoto:function(){var e=this;x({url:S.getWinnerInfo,method:"GET",type:"json"}).then((function(t){t&&t.data&&e.setData({addressLists:t.data.result})}))},goEdit:function(e){n.navigateTo({url:"/packageA/pages/cjt/my/address/edit/edit?index="+e.currentTarget.dataset.index+"&actCode="+this.data.actCode})},addAddress:function(){n.navigateTo({url:"/packageA/pages/cjt/my/address/edit/edit"})}})})),window.define("972",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(8);var b=e(25),x=b.requestPromise,D=b.saSendPageViewLog,S=e(77).saSendLog,P=e(38).checkLogin,_=e(384),k=i();Page({data:{receiverName:"",receiverMobile:"",detailAddress:"",formInvalid:!1,actCode:"",actId:"",isFirstFocusMobile:!0,hasAddress:!1,pageid:"VyJ",saPgnm:"pageid=VyJ;pgtitle=填写收货地址"},onLoad:function(e){var t=this;console.log(e),t.setData({actCode:e.actCode||"",actId:e.actId||""}),P().then((function(e){t.getTakePartPhoto()})).catch((function(e){k.handleAuthDeny()}))},onShow:function(){D()},getTakePartPhoto:function(){var e=this;x({url:_.getWinnerInfo+"?actCode="+e.data.actCode+"&actId="+e.data.actId,method:"GET",type:"json"}).then((function(t){console.log(t),t&&t.data&&t.data.result?"{}"==JSON.stringify(t.data.result)?e.setData({formInvalid:!0,hasAddress:!1}):(e.setData({receiverName:t.data.result.name,receiverMobile:t.data.result.telephone,detailAddress:t.data.result.address,hasAddress:!0}),e.validForm()):e.setData({formInvalid:!0,hasAddress:!1})}))},saveCustInfo:function(e){S("click",{event:e});var t=this.data.actCode||"",a=this.data.actId||"",o=this.data.receiverName,i=this.data.detailAddress,r=this.data.receiverMobile;if(this.validForm(),!this.data.formInvalid){var s=this.data.hasAddress?1:2;x({url:_.saveCustInfo,method:"POST",type:"json",data:{actCode:t,actId:a,name:encodeURIComponent(o),address:encodeURIComponent(i),telephone:r,flag:s}}).then((function(e){e&&(console.log(e),e.data&&e.data.num?(1==e.data.num&&n.redirectTo({url:"/packageA/pages/cjt/my/myReward/myReward?actCode="+t}),0==e.data.num&&n.showToast({title:"保存失败",icon:"none"}),-1==e.data.num&&n.showToast({title:"当日已修改过",icon:"none"})):n.showToast({title:"保存失败",icon:"none"}))}))}},validName:function(e){var t=this.data.receiverName,a=void 0,o=!0;return/^.{1,20}$/.test(t)?/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(t)?/[\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]+/.test(t)||(a="收货人不允许为空",o=!1):(a="收货人中含有非法字符",o=!1):(a="收货人姓名应为1-20个字符，请重新输入！",o=!1),o||n.showToast({title:a,icon:"none"}),{tips:a,result:o}},validMobile:function(e){var t=this.data.receiverMobile,a=void 0,o=!0;return/^1\d{10}$/.test(parseInt(t,10))&&11==t.length||(a="手机号码必须是以1开头的11位数字",o=!1),11!=t.length&&(a="手机号码必须是以1开头的11位数字",o=!1),o||n.showToast({title:a,icon:"none"}),{tips:a,result:o}},validDetailAddress:function(){var e=!0,t=this.data.detailAddress,a=void 0;return/^.{1,50}$/.test(t)||(a="详细地址应为1-50个字符，请重新输入！",e=!1),/^[\s\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]*$/.test(t)||(a="详细地址中含有非法字符",e=!1),/[\u4e00-\u9fa5a-zA-Z0-9，、\-。·#_《》（）,.()]+/.test(t)||(a="详细地址不允许为空",e=!1),e||n.showToast({title:a,icon:"none"}),{tips:a,result:e}},validForm:function(e){var t=this.validName();t.result&&(t=this.validMobile()),t.result&&(t=this.validDetailAddress()),t.tips&&!t.result&&n.showToast({title:t.tips,icon:"none"}),this.setData({formInvalid:!t.result})},updateData:function(e){var t,a,o,n=e.currentTarget.id,i=e.detail.value;this.setData((o=i,(a=n)in(t={})?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t))}})})),window.define("975",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25);i();Page({data:{saPgnm:"pgcate=10009;pgtitle=流控"},onLoad:function(e){},onReady:function(){},onShow:function(){(0,b.saSendPageViewLog)()},goIndex:function(){n.switchTab({url:"/pages/index/index"})},onHide:function(){},onUnload:function(){}})})),window.define("978",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(8),S=(x=D)&&x.__esModule?x:{default:x};var P=e(25).requestPromise;Page({data:{goodsInfo:{productId:"",thumbnail:"",title:"",price:"",tag:"包邮",feedbackRate:"100%",applyId:""},shareFlag:1e4,qrCodeUrl:"",qrCodeImg:"",isShareAlertShow:!1,targetUrl:"",sharekaiguan:"1"},onLoad:function(e){var t=this,a=JSON.parse(decodeURIComponent(e.json)),o=t.httpToHttps(a.thumbnail);t.initKaiguan((function(e){var n="1";try{n=e.sy_share_kaiguan.tag[0].elementName}catch(e){console.log(e)}t.setData({"goodsInfo.productId":a.productId,"goodsInfo.thumbnail":o,"goodsInfo.price":a.productPrice,"goodsInfo.title":a.productName,"goodsInfo.applyId":a.applyId,targetUrl:a.targetUrl,shareFlag:a.shareFlag,sharekaiguan:n})}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(e){var t=encodeURIComponent(this.data.targetUrl);return{title:"【苏宁试用】快来跟我一起申请吧"+this.data.goodsInfo.title,imageUrl:this.data.goodsInfo.thumbnail,path:"/pages/webView/index?s=1&webViewSrc="+t}},renderActiveData:function(){var e="";return e=1e4===this.data.shareFlag?S.default.apiDomain+"api/wechat/sharePicture/product/callback-"+this.data.goodsInfo.productId+".jsonp":S.default.apiDomain+"api/wechat/sharePicture/invite/callback-"+this.data.goodsInfo.productId+"-"+this.data.goodsInfo.applyId+".jsonp",P({method:"GET",url:e,dataType:"jsonp"})},shareToFriends:function(){var e=this;e.renderActiveData().then((function(t){var a="";if(a=1e4===e.data.shareFlag?"productSharePicture":"inviteSharePicture",""!==t.data[a]){var o=e.httpToHttps(t.data[a]);e.setData({isShareAlertShow:!0,qrCodeImg:o},(function(){e.fade(e,"fade",1,200,"linear")}))}else i.showToast({title:"分享图生成失败,请稍后重试",icon:"none",duration:2e3})})).catch((function(e){i.showToast({title:"分享图生成失败,请稍后重试",icon:"none",duration:2e3})}))},saveImgToPhotosAlbumTap:function(){var e=this;i.downloadFile({url:this.data.qrCodeImg,success:function(t){i.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){console.log(t),i.showToast({title:"保存成功",icon:"succes",duration:3e3,mask:!0}),e.closeAlert()},fail:function(e){console.log(e),console.log("fail"),i.showToast({title:"保存失败",duration:3e3,mask:!0,icon:"none"})}})},fail:function(){console.log("fail"),i.showToast({title:"保存失败",duration:3e3,mask:!0,icon:"none"})}})},closeAlert:function(){var e=this;this.fade(this,"fade",0,200,"linear").then((function(){e.setData({isShareAlertShow:!1})}))},fade:function(e,a,o,n,r){return new Promise((function(s){var c=i.createAnimation({duration:n,timingFunction:r});c.opacity(o).step();var d='{"'+a+'":""}';(d=JSON.parse(d))[a]=c.export(),e.setData(d,(function(){t((function(){s()}),n)}))}))},httpToHttps:function(e){if(e){return-1==e.indexOf("https://")?-1!==e.indexOf("http://")?e.replace("http://","https://"):e.replace("//","https://"):e}},initKaiguan:function(e){P({method:"GET",url:S.default.cms+"/api/json/sy_kaiguan.json",dataType:"json"}).then((function(t){e(t)}))}})})),window.define("981",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=e(9),_="https://oss.suning.com/smcp/smcpgameplatform/orderRed_mini/";Page({data:{activityCode:"",orderRedId:"",ratio:2},onLoad:function(e){console.log(P);try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({activityCode:e.activityCode,orderRedId:e.orderRedId}):i.setData({activityCode:"",orderRedId:""}),this.init()},onReady:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:_+"img-share.jpg",x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/orderRed/main_xcx/index",scene:o.data.orderRedId+"?"+o.data.activityCode},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("984",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,e(579),e(8));Page({data:{src:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){e.scene},onShareAppMessage:function(){console.log("右上角分享","")},getCmsData:function(){var e=this,t=D.cms+"/api/json/spellbase.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a;a=t.sp_indexsrc.tag[0].elementName,console.log("跳转src:",a),e.setData({src:a}),e.navigateToH5()}catch(e){}}))},navigateToH5:function(){var e=this.data.src;console.log("最终跳转地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("987",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,e(579),e(8));Page({data:{token:"",src:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData()},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);this.setData({token:t})}else this.setData({token:e.token})},getCmsData:function(){var e=this,t=D.cms+"/api/json/spellbase.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a;a=t.sp_helpsrc.tag[0].elementName,console.log("跳转src:",a),e.setData({src:a}),e.navigateToH5()}catch(e){}}))},navigateToH5:function(){var e=this.data.src;e=e+"?token="+this.data.token,console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("990",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_sharePic:"",xcx_cardPic:"",xcx_savePic:"",token:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.setPageData(e),this.getCmsData(),D().then((function(){console.log("已登录")})).catch((function(){}))},onReady:function(){},onShow:function(){},setPageData:function(e){e?this.setData({token:e.token||""}):this.setData({token:""})},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t="/packageA/pages/spellbase/assist/index?token="+this.data.token;return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.xcx_cardPic,path:t}},sharePYQ:function(){var e;e="../save1/index?token="+this.data.token,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},randomNum:function(e,t){var a=t-e,o=Math.random();return e+Math.round(o*a)},getCmsData:function(){var e=this,t=S.cms+"/api/json/spellbase.json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{console.log(t),t.sp_xcx_config&&t.sp_xcx_config.nodes&&t.sp_xcx_config.nodes.length>0&&t.sp_xcx_config.nodes.forEach((function(t,a,o){"sp_xcx_cardTitle"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({shareTitle:t.tag[0].elementName}),"sp_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"sp_xcx_sharePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_sharePic:S.img+t.tag[0].picUrl}),"sp_xcx_cardPic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_cardPic:S.img+t.tag[0].picUrl})}))}catch(e){}})).catch((function(e){}))}})})),window.define("993",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_savePic:"",xcx_saveBtn:"",ratio:2},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({token:e.token}):i.setData({token:""}),this.init(),i.getCmsData()},onReady:function(){},drawPic:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.xcx_savePic,x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/spellbase/assist/index",scene:o.data.token},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)},getCmsData:function(){var e=this,t=S.cms+"/api/json/spellbase.json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{t.sp_xcx_config&&t.sp_xcx_config.nodes&&t.sp_xcx_config.nodes.length>0&&t.sp_xcx_config.nodes.forEach((function(t,a,o){"sp_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"sp_xcx_savePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_savePic:S.img+t.tag[0].picUrl}),"sp_xcx_saveBtn"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_saveBtn:S.img+t.tag[0].picUrl}),console.log(e.data.xcx_savePic)}))}catch(e){}e.drawPic()})).catch((function(e){}))}})})),window.define("996",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,e(579),e(8));Page({data:{token:"",src:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);this.setData({token:t})}else e.token&&this.setData({token:e.token})},onShareAppMessage:function(){console.log("右上角分享","")},getCmsData:function(){var e=this,t=D.cms+"/api/json/flzhs.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),n.setNavigationBarTitle({title:t.biu_title.tag[0].elementName});var a;a=t.flzhs_indexsrc.tag[0].elementName,console.log("跳转src:",a),e.setData({src:a}),e.navigateToH5()}catch(e){}}))},navigateToH5:function(){var e=this.data.src;""!=this.data.token&&(e=e+"?token="+this.data.token),console.log("最终跳转地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("999",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_sharePic:"",xcx_cardPic:"",xcx_savePic:"",token:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.setPageData(e),this.getCmsData(),D().then((function(){console.log("已登录")})).catch((function(){}))},onReady:function(){},onShow:function(){},setPageData:function(e){e?this.setData({token:e.token||""}):this.setData({token:""})},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t="/pages/index/index?target="+encodeURIComponent("/packageA/pages/flzhs/main/index?token="+this.data.token);return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.xcx_cardPic,path:t}},sharePYQ:function(){var e;e="../save1/index?token="+this.data.token,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},randomNum:function(e,t){var a=t-e,o=Math.random();return e+Math.round(o*a)},getCmsData:function(){var e=this,t=S.cms+"/api/json/flzhs.json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{console.log(t),t.flzhs_share&&t.flzhs_share.nodes&&t.flzhs_share.nodes.length>0&&t.flzhs_share.nodes[0].nodes.length>0&&t.flzhs_share.nodes[0].nodes.forEach((function(t,a,o){"bi_xcx_cardTitle"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({shareTitle:t.tag[0].elementName}),"biu_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"biu_xcx_sharePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_sharePic:S.img+t.tag[0].picUrl}),"biu_xcx_cardPic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_cardPic:S.img+t.tag[0].picUrl})})),t.biu_title.tag&&t.biu_title.tag.length>0&&n.setNavigationBarTitle({title:t.biu_title.tag[0].elementName})}catch(e){}})).catch((function(e){}))}})})),window.define("1002",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_savePic:"",xcx_saveBtn:"",ratio:2},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({token:e.token}):i.setData({token:""}),this.init(),i.getCmsData()},onReady:function(){},drawPic:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.xcx_savePic,x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/flzhs/main/index",scene:o.data.token},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)},getCmsData:function(){var e=this,t=S.cms+"/api/json/flzhs.json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{t.flzhs_share&&t.flzhs_share.nodes&&t.flzhs_share.nodes.length>0&&t.flzhs_share.nodes[0].nodes.length>0&&t.flzhs_share.nodes[0].nodes.forEach((function(t,a,o){"biu_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"biu_xcx_savePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_savePic:S.img+t.tag[0].picUrl}),"biu_xcx_saveBtn"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_saveBtn:S.img+t.tag[0].picUrl}),console.log(e.data.xcx_savePic)})),t.biu_title.tag&&t.biu_title.tag.length>0&&n.setNavigationBarTitle({title:t.biu_title.tag[0].elementName})}catch(e){}e.drawPic()})).catch((function(e){}))}})})),window.define("1005",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},onShareAppMessage:function(){console.log("右上角分享","")},navigateToH5:function(){var e=b.greenChannel+"goodvalue/index.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1008",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0],token:t[1]})}else this.setData({activityCode:e.activityCode,token:e.token})},navigateToH5:function(){var e=b.greenChannel+"goodvalue/assist.html?activityCode="+this.data.activityCode+"&token="+this.data.token;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1011",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},onShareAppMessage:function(){console.log("右上角分享","")},navigateToH5:function(){var e=b.greenChannel+"goodvalue/exchange.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1014",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},onShareAppMessage:function(){console.log("右上角分享","")},navigateToH5:function(){var e=b.greenChannel+"goodvalue/list.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1017",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0]})}else this.setData({activityCode:e.activityCode})},onShareAppMessage:function(){console.log("右上角分享","")},navigateToH5:function(){var e=b.greenChannel+"goodvalue/detail.html?activityCode="+this.data.activityCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1020",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_sharePic:"",xcx_cardPic:"",xcx_savePic:"",activityCode:"",token:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}e?this.setData({activityCode:e.activityCode,token:e.token}):this.setData({activityCode:"",token:""}),this.checkPageLogin(),this.getCmsData()},onReady:function(){},onShow:function(){},checkPageLogin:function(){D().then((function(){console.log("已登录")})).catch((function(){}))},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t="/packageA/pages/sign_in/assist/index?activityCode="+this.data.activityCode+"&token="+this.data.token;return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.xcx_cardPic,path:t}},sharePYQ:function(){var e;e="../save1/index?activityCode="+this.data.activityCode+"&token="+this.data.token,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},randomNum:function(e,t){var a=t-e,o=Math.random();return e+Math.round(o*a)},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{console.log(t),t.col_xcx_config&&t.col_xcx_config.nodes&&t.col_xcx_config.nodes.length>0&&t.col_xcx_config.nodes.forEach((function(t,a,o){"cl_wxShare_title"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({shareTitle:t.tag[0].elementName}),"cl_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"cl_xcx_sharePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_sharePic:S.img+t.tag[0].picUrl}),"cl_xcx_cardPic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_cardPic:S.img+t.tag[0].picUrl})}))}catch(e){}})).catch((function(e){}))}})})),window.define("1023",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=e(9);Page({data:{xcx_bigBg:"",xcx_savePic:"",xcx_saveBtn:"",activityCode:"",ratio:2},onLoad:function(e){console.log(P);try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({activityCode:e.activityCode,token:e.token}):i.setData({activityCode:"",token:""}),this.init(),i.getCmsData()},onReady:function(){},drawPic:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.xcx_savePic,x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/sign_in/assist/index",scene:o.data.activityCode+"?"+o.data.token},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{t.col_xcx_config&&t.col_xcx_config.nodes&&t.col_xcx_config.nodes.length>0&&t.col_xcx_config.nodes.forEach((function(t,a,o){"cl_xcx_bigBg"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_bigBg:S.img+t.tag[0].picUrl}),"cl_xcx_savePic"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_savePic:S.img+t.tag[0].picUrl}),"cl_xcx_saveBtn"==t.modelFullCode&&t.tag&&t.tag.length>0&&e.setData({xcx_saveBtn:S.img+t.tag[0].picUrl}),console.log(e.data.xcx_savePic)}))}catch(e){}e.drawPic()})).catch((function(e){}))}})})),window.define("1026",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=k(e(327)),x=k(e(328)),D=e(25),S=e(77),P=k(e(329)),_=e(23);function k(e){return e&&e.__esModule?e:{default:e}}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i();Page({data:{pageid:"776",saPgnm:"pgcate=10009;tag=100124;pgtitle=网上订单详情",others:{},itemList:[],mixedObj:{},_options:{},noData:!1,haveData:!1,turnOff:!1,turnOff1:!1,show:!1,alertData:"",wxGiftBanner:{},checkCode:!1,relationBtnType:"",relationOrder:!1,showTuijianFlag:!1,nickName:"",avatarUrl:"",userInfo:{}},checkCode:function(){this.setData({checkCode:!this.data.checkCode})},relationOrder:function(e){var t=e.detail.btnType;this.setData({relationBtnType:t,relationOrder:!0})},hideModal:function(){this.setData({relationOrder:!1})},onLoad:function(e){var t=this;this.setData({_options:e}),(0,D.checkLogin)().then((function(){t.initial(e)})).catch((function(e){console.log(e)}))},autoclick:function(e){(0,S.saSendLog)("click",{event:e})},clickFn:function(e){var t,a=this,o=e.detail,n=o.typeName,i=void 0===n?"":n,r=o.typeValue,s=void 0===r?"":r,c=o.typeContent,d=void 0===c?"":c;if("turnOff"===i||"turnOff1"===i)this.setData((L(t={},i,"true"===s),L(t,"alertData",d),t));else if("fresh"==i){var u=this.data.options;(0,D.checkLogin)().then((function(){a.initial(u)})).catch((function(e){console.log(e)}))}},goQuan:function(){n.redirectTo({url:"/pages/webView/index?webViewSrc=https://res.m.suning.com/project/quan/dist/lqwap_5.html#/type/1"})},suyuan:function(e){var t=e.currentTarget.dataset.url;t&&(t=t.replace(/^\/\//,x.default.rq_http),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)}))},centialPhone:function(e){var t=e.currentTarget.dataset.phone;n.makePhoneCall({phoneNumber:t})},initial:function(e){var t=this;n.showLoading({title:"加载中"}),b.default._newOrderDetail(e).then((function(e){t.parseDetail(e)})).catch((function(e){t.setData({haveData:!1,noData:!0})})).finally((function(){n.hideLoading()}))},getGiftRecords:function(e){},parseDetail:function(e){var t=this;this.setData({haveData:!0,noData:!1},(function(){"1"==e.switchKey.showTuijianFlag&&t.setData({showTuijianFlag:!0}),e.wxGiftModuleType})),e.orderBtnList&&e.orderBtnList.length>1&&e.orderBtnList.reverse();var a=e.vendorFlag,o=e.vendorType,n=e.itemList,i=e.vendorCode,r=[];if(n.forEach((function(e){if("1"!=e.itemFlag.giftFlag){var t={};t.cmmdtyCode=e.partNumber,t.shopCode=i,r.push(t),t=null}})),e.againBuy=r,e.iconType=P.default._imgFn1(o,a),n&&n.length&&n.map((function(t,a){1!=t.itemFlag.ybFlag&&1!=t.itemFlag.couponFlag&&1!=t.itemFlag.SxsFlag&&1!=t.itemFlag.pgThreeFlag&&1!=t.itemFlag.commonJumpFlag&&1!=t.itemFlag.pgOneFlag&&1!=t.itemFlag.pgTwoFlag||(t.notGoFourthPage=!0),t.productImgUrl=P.default._imgFn2(t,e)})),"swan"==(0,_.getPlatformType)()&&e.orderBtnList&&e.orderBtnList.length>0){var s=e.orderBtnList;s[0].btnType&&"44"==s[0].btnType&&(s[0]=s.splice(1,1,s[0])[0],e.orderBtnLists=s)}e.orderBtnList=e.orderBtnList&&e.orderBtnList.filter((function(t){return P.default._showBtn(t,e)})),e.wxGiftBanner&&e.wxGiftBanner.backImage&&(e.wxGiftBanner.backImage=e.wxGiftBanner.backImage.replace(/^\/\//,x.default.rq_http));var c=e.logisticInfo,d=e.exchangedInfo,u=e.receiveInfo,l=e.mobileCard,g=e.jnbtContent,p=e.jnbtUrl,h=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["logisticInfo","exchangedInfo","receiveInfo","mobileCard","jnbtContent","jnbtUrl"]),f={orderId:h.orderId,omsOrderId:h.omsOrderId,vendorCode:h.vendorCode,submitTime:h.submitTime,superBackContent:h.superBackContent,hopeArrivalTime:h.hopeArrivalTime,onTimePayTip:h.onTimePayTip,onTimeInterval:h.onTimeInterval,onTimeTip:h.onTimeTip,superBackUrl:h.superBackUrl,orderFlag:h.orderFlag};function m(e,t){h[e]=t}if(g&&m("service_jnbtContent",{contentTop:g,url:p,type:"8"}),c&&c.content&&m("service_logtisic",{contentTop:c.content,contentBottom:c.time,url:"/packageA/pages/logistics-new/logistics-new?orderId="+h.orderId+"&vendorCode="+h.vendorCode,type:"0",daName:"776038013"}),d&&d.exchangedContent&&m("service_changeGoods",{contentTop:d.exchangedContent,contentBottom:d.exchangedTime,url:d.exchangedUrl,type:d.exchangedType}),u&&u.receiverAddr){var w={contentTop:u.receiverName+" "+u.receiverTel,contentBottom:u&&u.receiverAddr,type:"3"};h=Object.assign({},h,{service_address:w})}if(h.resellUrl){var v={contentTop:"旧机换钱",contentBottom:"让闲置物尽其用",url:h.resellUrl,type:"5",daName:"776019001"};h=Object.assign({},h,{service_resellUrl:v})}if(h.oldToNewUrl){var y={contentTop:"以旧换新订单",url:h.oldToNewUrl,type:"6"};h=Object.assign({},h,{service_old:y})}if(l&&l.cmmtyUrl&&l.promotionText&&m("service_mobileCard",{contentTop:l.promotionText,url:l.cmmtyUrl,type:"7"}),"1"==e.wxGiftModuleType){var C=e.orderId;b.default._getGiftRecord({orderId:C}).then((function(e){m("service_getGiftRecord",{contentTop:e&&e.receiverInfoList[0]&&e.receiverInfoList[0].custNick,contentBottom:e&&e.receiverInfoList[0]&&e.receiverInfoList[0].receiveTime,custPhoto:e&&e.receiverInfoList[0]&&e.receiverInfoList[0].custPhoto,type:"1000"}),t.setData({others:h})}))}else"2"==e.wxGiftModuleType&&m("service_getGiftRecord",{contentTop:"查看领取详情",url:"/packageA/pages/order/receiveDetail/receiveDetail?orderId="+e.orderId,type:"1000",custPhoto:"https://res.m.suning.com/project/cart/images/xcx_images/artboard.png"});this.setData({others:h,mixedObj:f,itemList:n})},onerror:function(e){var t=e.detail;this.setData({itemList:t})},wxGift:function(e){var t=e.currentTarget.dataset.giftUrl;n.redirectTo({url:t})},onShow:function(){(0,D.saSendPageViewLog)()},onReady:function(){(0,S.saSendLog)("autoexpo",this)},onShareAppMessage:function(e){var t=e.target.dataset.shareData,a=t.title,o=t.imageUrl,n=t.path;return{title:a,imageUrl:o=o.replace(/^\/\//,x.default.rq_http),path:n}}})})),window.define("1029",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=S(e(327)),x=S(e(328)),D=(e(25),e(77),S(e(329)));function S(e){return e&&e.__esModule?e:{default:e}}i();var P=e(135);Page({data:{serchVal:"",noLoading:!0,orderData:[],page:"1",totalPage:"",noMore:!1,haveData:!1,noData:!1,haveSearch:!0,switchkey:{},oldArr:[],cancelClosed:!1,cancelOrderId:"",relationOrderContent:{},relationBtnType:"",relationOrder:!1,tabIndex:"0",relationFlag:"",getFocus:!0,nickName:"",avatarUrl:"",userInfo:{}},onLoad:function(){},deleteSearch:function(){this.setData({oldArr:[]}),n.removeStorageSync("searchContent")},relationOrder:function(e){e.detail.btnType;var t=e.detail,a=t.btnType,o=t.omsOrderId,n=t.orderFlag,i=t.orderId;this.setData({relationBtnType:a,relationOrder:!0,relationOrderContent:{omsOrderId:o,orderId:i,switchKey:this.data.switchkey,orderFlag:n}})},hideModal:function(){this.setData({relationOrder:!1})},search:function(){var e=this,t={status:"all",condition:this.data.serchVal,page:this.data.page,sourceName:"xcx",newSourceName:"bdxcx"},a=this.data.serchVal;a?(this.storge(a),this.setData({haveSearch:!1,getFocus:!1},(function(){e.getOrderData(t)}))):P.showToast({title:"请输入要搜索的内容"})},storge:function(e){if(n.getStorageSync("searchContent").length>0){var t=n.getStorageSync("searchContent").split(","),a=void 0;t.includes(e)?((a=t.filter((function(t){return t!=e}))).unshift(e),n.setStorageSync("searchContent",a.join())):(t.length>5&&t.pop(),t.unshift(e),n.setStorageSync("searchContent",t.join()))}else n.setStorageSync("searchContent",this.data.serchVal)},btnSearch:function(e){var t=this,a=e.target.dataset.searchValue,o={status:"all",condition:a,page:this.data.page,sourceName:"xcx",newSourceName:"bdxcx"};this.setData({haveSearch:!1,getFocus:!1},(function(){t.storge(a),t.getOrderData(o)}))},wxSearchInput:function(e){this.data.serchVal=e.detail.value},getOrderData:function(e){var t=this;n.showLoading({title:"加载中",mask:!0}),b.default._newOrderList(e).then((function(e){t.parseData(e.orderList);var a=e.orderList;t.setData({orderData:t.data.orderData.concat(a),page:++t.data.page,totalPage:e.totalPage,noMore:t.data.page>e.totalPage,haveData:e.orderList.length>0,noData:0==e.orderList.length,switchkey:e.switchkey})})).catch((function(e){t.setData({haveData:!1,noData:!0})})).finally((function(){n.hideLoading({complete:function(){t.data.noLoading=!0}})}))},parseData:function(e){e.forEach((function(e){e.vendorList.forEach((function(t,a){t.goMore=e.orderId+"_"+a,t.iconType=D.default._imgFn1(t.vendorType,t.vendorFlag),t.vendorBtnList=t.vendorBtnList.reverse()&&t.vendorBtnList.filter((function(t){return D.default._showBtn(t,e)}));var o=t.vendorBtnList.some((function(e){return"1"==e.btnType||"2"==e.btnType||"3"==e.btnType||"4"==e.btnType||"31"==e.btnType||"32"==e.btnType||"36"==e.btnType||"37"==e.btnType}));t.goPayShow=o;var n=[];t.itemList.forEach((function(e){if("1"!=e.itemFlag.giftFlag){var a={};a.cmmdtyCode=e.partNumber,a.shopCode=t.vendorCode,n.push(a),a=null}})),t.againBuy=n,t.itemList.forEach((function(t){t.productImgUrl=D.default._imgFn2(t,e)}))}))}))},onReachBottom:function(){if(this.data.noLoading&&this.data.page<=this.data.totalPage){var e={status:"all",page:this.data.page,condition:this.data.serchVal,sourceName:"xcx",newSourceName:"bdxcx"};this.getOrderData(e)}},onShow:function(){n.getStorageSync("searchContent").length>0&&this.setData({oldArr:n.getStorageSync("searchContent").split(",")})},closed:function(){this.setData({cancelClosed:!1})},openCancel:function(e){this.setData({cancelOrderId:e.detail.orderId,relationFlag:e.detail.relationFlag,cancelClosed:!0})},onShareAppMessage:function(e){var t=e.target.dataset.shareData,a=t.title,o=t.imageUrl,n=t.path;return{title:a,imageUrl:o=o.replace(/^\/\//,x.default.rq_http),path:n}}})})),window.define("1032",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=D(e(327)),x=(D(e(328)),e(25));e(77),D(e(329));function D(e){return e&&e.__esModule?e:{default:e}}i(),e(135);Page({data:{haveData:!1,noData:!1,records:{}},onLoad:function(e){var t=this;(0,x.checkLogin)().then((function(){t.init(e)})).catch((function(e){console.log(e)}))},init:function(e){var t=this;n.showLoading({title:"加载中",mask:!0}),b.default._getGiftRecord(e).then((function(e){t.setData({records:e,haveData:!0,noData:!1})})).catch((function(e){t.setData({haveData:!1,noData:!0})})).finally((function(){n.hideLoading()}))},onShow:function(){}})})),window.define("1035",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=_(e(327)),x=_(e(54)),D=e(25),S=(_(e(329)),e(77)),P=e(23);function _(e){return e&&e.__esModule?e:{default:e}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i();var L=e(42).getDfpToken,R=x.default.getTrack();Page({data:{platform:(0,P.getPlatformType)(),pageid:"777",saPgnm:"pgcate=10009;tag=100085;pgtitle=购物车4",noData:!1,haveData:!1,_options:{},orderList:{},orderInfo:{},orderRedPkg:{},staOrderRedPkg:{},shareRedPkg:{},xcxStaRedPkgFlag:!1,xcxAniRedPkgFlag:!1,share_bottom:"",step_index:"",showTuijianFlag:!1,apsClickUrl:"",clickUrl:"",adSrc:""},onLoad:function(e){var t=this;this.setData({_options:e}),(0,D.checkLogin)().then((function(){t.initial(e)})).catch((function(e){console.log(e)}))},initial:function(e){var t=this,a=e.id;a?(t.showLoading(),L().then((function(e){return e})).then((function(e){var o=e,i=e;b.default._orderSuccess({orderIds:a,detects:R,dfpToken:o,pcToken2:i}).then((function(e){"0"===e.retCode?(t.setData({haveData:!0}),"2"===e.redPkgType&&t.staticPackage(e.orderList),t.parseCart4(e)):t.showTips(e.errMsg||"网络异常")})).catch((function(e){console.log(e),t.setData({haveData:!1,noData:!0}),n.setNavigationBarTitle({title:"网络异常"})})).finally((function(){n.hideLoading()}))}))):t.setData({haveData:!1,noData:!0})},clickFn:function(e){var t,a=this,o=e.detail,n=o.typeName,i=void 0===n?"":n,r=o.typeValue,s=void 0===r?"":r,c=o.typeContent,d=void 0===c?"":c;if("turnOff"===i||"turnOff1"===i)this.setData((k(t={},i,"true"===s),k(t,"alertData",d),t));else if("fresh"==i){var u=this.data._options;(0,D.checkLogin)().then((function(){a.initial(u)})).catch((function(e){console.log(e)}))}},staticPackage:function(e){var t=this;t.showLoading();var a,o=[];e.length&&e.forEach((function(e){o.push(e.orderId)})),a=o.join(",");L().then((function(e){return e})).then((function(e){var o=e,i=R;b.default._queryNewOrderRedPkg({orderIds:a,detect:i,dfpToken:o}).then((function(e){if("0"===e.retCode){if(e&&(e.orderRedPkgList||e.shareRedPkg)){var a={staticOrderRedPkgList:e.orderRedPkgList||[],orderBonusList:e.orderBonusList||[]};t.setData({staOrderRedPkg:a||{},shareRedPkg:e.shareRedPkg||{}})}}else t.showTips(resp.errMsg||"网络异常")})).catch((function(e){console.error(e)})).finally((function(){n.hideLoading()}))})).catch((function(e){console.error(e),t.hideLoading()}))},openPackage:function(){try{(0,S.saSendLog)("autoexpo",this)}catch(e){}var e=this;e.showLoading();var t,a=[];e.data.orderList.length&&e.data.orderList.forEach((function(e){a.push(e.orderId)})),t=a.join(",");L().then((function(e){return e})).then((function(a){var o=a,i=a,r=R;b.default._orderRedPkg({orderIds:t,detect:r,dfpToken:o,pcToken2:i,newCart4Flag:"1"}).then((function(t){"0"===t.retCode?e.parseRedPkg(t):(e.setData({step_index:5,orderRedPkg:t||{}}),e.showTips(t.errMsg||"网络异常"))})).catch((function(t){console.error(t),e.setData({step_index:5,orderRedPkg:{}})})).finally((function(){n.hideLoading()}))})).catch((function(t){console.error(t),e.hideLoading()}))},parseCart4:function(e){var t=e.orderMoney||"",a=e.showTuijianFlag,o=e.adSwitch,i={order:{orderMoney:t,taxMoney:e.taxMoney||"",pageTitle:e.pageTitle||"",deliverTime:e.deliverTime||"",rechargeState:e.rechargeState||0,esInfoHint:e.esInfoHint||"",payResult:e.payResult||"",rentInfo:e.rentInfo||"",showFollowUsFlag:e.showFollowUsFlag||""},orderBtnList:e.orderBtnList||{},rightOrderBtnList:e.rightOrderBtnList||{}};this.setData({orderList:e.orderList||{},orderInfo:i,xcxAniRedPkgFlag:"1"==e.redPkgType,xcxStaRedPkgFlag:"2"==e.redPkgType,step_index:1}),"1"==a&&this.setData({showTuijianFlag:!0}),"1"==o&&this.advistisment(),n.setNavigationBarTitle({title:e.pageTitle})},advistisment:function(){var e=this,t=this;n.getSystemInfo({success:function(e){"ios"==e.platform?"ios":"android"==e.platform&&"ard"}}),b.default._getAdvistisment().then((function(e){return e})).then((function(a){var o=a.cart_pid&&a.cart_pid.tag&&a.cart_pid.tag[0],i=o.advistismentCode,r=o.picUrl,s=o.linkUrl,c={pid:i,user_id:n.getStorageSync("custNo"),dev_id:"",clt:"minipro"};i?b.default._cpm(c).then((function(a){var o=a.data.cpm[0],n=o.apsClickUrl,i=o.adSrc,r=o.clickUrl;e.setData({apsClickUrl:n,clickUrl:r,adSrc:i},(function(){try{(0,S.saSendLog)("autoexpo",t)}catch(e){}}))})):e.setData({clickUrl:s,adSrc:r},(function(){try{(0,S.saSendLog)("autoexpo",t)}catch(e){}}))}))},apsClick:function(e){var t=e.currentTarget.dataset.clickUrl,a=this.data.apsClickUrl||"";t&&n.redirectTo({url:t});try{a&&b.default._cpmAd(a)}catch(e){console.log(e)}},parseRedPkg:function(e){e&&e.orderRedPkgList&&e.orderRedPkgList.length>3&&(e.orderRedPkgList=e.orderRedPkgList.slice(0,3)),e.orderRedPkgList.forEach((function(e){}));var t={shareRedPkgUrl:e.shareRedPkgUrl||"",xcxRedPkgUrl:e.xcxRedPkgUrl||"",sharePicUrl:e.sharePicUrl||"",shareCount:e.shareCount||"",shareTitle:e.shareTitle||"",shareContent:e.shareContent,shareType:e.shareType,sharePlaceList:e.sharePlaceList||[]};this.setData({step_index:5,orderRedPkg:e||{},shareRedPkg:t})},rewardEvent:function(e){this.setData({share_bottom:e.detail.share_bottom})},animationstart:function(e){},animationiteration:function(){},animationend:function(e){"package-cartoon-1"==e.detail.animationName?this.setData({step_index:2}):"package-cartoon-2"==e.detail.animationName?this.setData({step_index:3}):"package-cartoon-3"==e.detail.animationName&&this.setData({step_index:4})},sharePy:function(){this.setData({share_bottom:1})},showTips:function(e){ui.showToast({title:e})},hideShare:function(){this.setData({share_bottom:""})},packageCancel:function(){this.setData({step_index:12,xcxAniRedPkgFlag:!1})},alienBtn:function(){this.setData({step_index:12,xcxAniRedPkgFlag:!1})},showLoading:function(e){n.showLoading({title:e||"加载中",mask:!0})},hideLoading:function(){n.hideLoading()},sharePYQ:function(){var e=encodeURIComponent(this.data.shareRedPkg.xcxRedPkgUrl);n.navigateTo({url:"save/save?shareUrl="+e})},onShow:function(){(0,D.saSendPageViewLog)(),(0,S.saSendLog)("autoexpo",this)},onReady:function(){(0,S.saSendLog)("autoexpo",this)},guanbi:function(){this.setData({share_bottom:""})},autoclick:function(e){(0,S.saSendLog)("click",{event:e})},openCoupon:function(e){var t=e.currentTarget.dataset.couponurl;t&&n.redirectTo({url:"/pages/webView/index?webViewSrc="+t})},onShareAppMessage:function(){(0,S.saSendLog)("autoexpo",this);return{title:this.data.shareRedPkg.shareTitle,imageUrl:this.data.shareRedPkg.sharePicUrl,path:this.data.shareRedPkg.xcxRedPkgUrl}}})})),window.define("1038",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(869),P="https://oss.suning.com/smcp/smcpgameplatform/fanxian/back.jpg";Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,shareUrl:"",redOrderId:"",activityId:"",packageUrl:""},onLoad:function(e){function t(e){for(var t,a=[],o=e.slice(e.indexOf("?")+1).split("&"),n=0;n<o.length;n++)t=o[n].split("="),a.push(t[0]),a[t[0]]=t[1];return a}var a=decodeURIComponent(e.shareUrl),o=(a.split("?")[1].split("&"),a.split("?")[0]);o=o.replace(/^\//,"");var i=t(a).orderRedId,r=t(a).activityCode;this.setData({shareUrl:decodeURIComponent(e.shareUrl),redOrderId:i,activityId:r,packageUrl:o});var s=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),s.setData({ratio:e.pixelRatio})}}),this.init()},onReady:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a=(S.cms,{src:P,x:0,y:0,width:600,height:901});function o(){var a={src:P+"card"+e.data.cardId+".png",x:225,y:460,width:150,height:150};e.drawImage(t,a,i)}function i(){var a={content:(e.data.isMain,""),size:30,color:"#fff",position:{x:28,y:688}};e.fillText(t,a);var o={content:(e.data.isMain,""),size:30,color:"#fff",position:{x:28,y:727}};e.fillText(t,o),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){e.data.isMain?i():o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},setCardState:function(){},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a=this;console.log("二维码图片地址：：",a.data.shareUrl);var o=S.act+"/act-wap-web/wechat/program/geturl.do";console.log("scene参数值：",a.data.token+(a.data.isMain?"":"?"+a.data.type));var n;n={page:a.data.packageUrl,scene:a.data.redOrderId+"?"+a.data.activityId},console.log("_data",n),console.log("_url",o),x({method:"GET",url:o,dataType:"json",data:n}).then((function(o){console.log("二维码图片地址：：",o.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),o&&o.data&&o.data.imageUrl){var n={src:o.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};a.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("1041",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=_(e(327)),x=_(e(54)),D=_(e(328)),S=e(25),P=e(77);_(e(329));function _(e){return e&&e.__esModule?e:{default:e}}i();var k=e(42).getDfpToken,L=e(135),R=x.default.getTrack();Page({data:{pageid:"780",saPgnm:"pgcate=10009;pgtitle=微信送礼车4",noData:!1,haveData:!1,show:!1,select_one:!0,select_more:!0,showData:{},playNo:"",shareObj:{},orderId:"",objGift:{},nickName:"",avatarUrl:"",userInfo:{}},autoclick:function(e){(0,P.saSendLog)("click",{event:e})},onLoad:function(e){var t=this;this.setData({_options:e}),(0,S.checkLogin)().then((function(){t.initial(e)})).catch((function(e){console.log(e)}))},selectGive:function(e){var t=e.target.dataset.type,a=this.data.orderId;this.setData({playNo:t}),"1"==t&&this.data.select_one?(this.setData({select_more:!1}),this.getGift({orderId:a,playNo:t})):"2"==t&&this.data.select_more&&(this.setData({select_one:!1}),this.getGift({orderId:a,playNo:t}))},initial:function(e){var t=this,a=e.id;t.setData({orderId:e.id}),t.showLoading(),k().then((function(e){return e})).then((function(e){var o=e,i=e;b.default._orderSuccess({orderIds:a,detects:R,dfpToken:o,pcToken2:i}).then((function(e){t.setData({haveData:!0,showData:e})})).catch((function(e){t.setData({haveData:!1,noData:!0}),n.setNavigationBarTitle({title:"网络异常"})})).finally((function(){n.hideLoading()}))}))},showLoading:function(e){n.showLoading({title:e||"加载中",mask:!0})},hideLoading:function(){n.hideLoading()},giveFriends:function(e){if("10"!=e.currentTarget.dataset.btnType){var t=this.data.orderId,a=this.data.showData.orderList[0].giftPlay;this.getGift({orderId:t,giftPlay:a,custNick:this.data.userInfo.nickName,custPhoto:this.data.userInfo.avatarUrl})}else n.redirectTo({url:e.currentTarget.dataset.btnUrl})},getGift:function(e){var t=this;this.showLoading(),b.default._queryWechatGiftUrl(e).then((function(e){t.data.objGift.shareContent=e.shareContent,t.data.objGift.shareImgUrl=e.shareImgUrl,t.data.objGift.shareUrl=e.shareUrl,t.setData({show:!t.data.show})})).catch((function(e){L.showToast({title:e.errMsg||"网络异常"})})).finally((function(){n.hideLoading()}))},clickCancel:function(){this.setData({show:!this.data.show})},goOrderList:function(){n.redirectTo({url:"/packageA/pages/order/orderList/orderList?index=0"})},onShow:function(){(0,S.saSendPageViewLog)()},onShareAppMessage:function(e){var t=this.data.objGift,a=t.shareContent,o=t.shareImgUrl,n=t.shareUrl;return{title:a,imageUrl:o=o.replace(/^\/\//,D.default.rq_http),path:n}}})})),window.define("1044",(function(e,t,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=_(e(293)),S=_(e(170)),P=_(e(54));function _(e){return e&&e.__esModule?e:{default:e}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var L,R=e(25),A=R.requestPromise,j=R.modal,O=R.formatTime,q=R.commonPopbox,M=R.setDfpToken,F=R.getDfpToken,U=R.saSendPageViewLog,N=R.checkLogin,E=e(20).getCityCode,B=e(17),G=e(8),V=e(45),H=e(135),z=e(852),W=r(),Q=null;function J(e){return A({method:"GET",url:B.eshop.getProgress,data:{actIds:e,channel:5}})}function K(e,t){i.showLoading({title:"加载中"});var a="";a="object"===(void 0===e?"undefined":x(e))?e.currentTarget.dataset.indexof:e;var o=t.data.jxdata,n=G.quan+"/lqzx_rsf.do";F().then((function(r){E().then((function(s){return A({method:"GET",url:n,data:{actId:t.data.jxdata[a].actId,actKey:t.data.actKey,channel:11,cityId:s.cityLesId||"025",deviceToken:V.pdToken,detect:P.default.getTrack()||"",dfpToken:r,sourceId:9964,validateCode:t.data.validataparam.code||"",uuid:t.data.validataparam.uuid||""}}).then((function(n){var r;(i.hideLoading(),0==n.resultCode)?(H.showToast({title:"恭喜，领券成功"}),o[a].quanstate=3,t.setData((k(r={},"jxdata["+a+"].quanstate",3),k(r,"validateShow",!1),r))):1003==n.resultCode||1004==n.resultCode?H.showToast({title:n.resultMsg||"很抱歉，当前活动异常火爆，请稍后再试"}):"2003"==n.resultCode?H.showToast({title:n.resultMsg}):"2004"==n.resultCode?S.default.show({page:t,phone:n.mobileNum,callback:function(a){var o=a.success,n=a.code;o&&(t.data.validataparam.code=n,K(e,t))}}):"2005"==n.resultCode||"2006"==n.resultCode?S.default.setError(t,n.resultMsg):1e3==n.resultCode||1001==n.resultCode||1002==n.resultCode?(t.setData({validateShow:!1}),H.showToast({title:"很抱歉，当前活动异常火爆，请稍后再试"})):403==n.resultCode?(t.setData({validateShow:!1}),H.showToast({title:"当前领取人数过多，请稍后再试"})):"13"==n.resultCode||"2001"==n.resultCode||"2002"==n.resultCode?i.showModal({title:"",content:n.resultMsg,cancelText:"取消",confirmText:"去绑定",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(z.check)}):e.cancel}}):37==n.resultCode?i.showModal({title:"",content:n.resultMsg,cancelText:"知道了",confirmText:"去认证",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(z.toIdentityVerification)}):e.cancel}}):(t.setData({validateShow:!1}),H.showToast({title:n.resultMsg}));"2004"!=n.resultCode&&"2005"!=n.resultCode&&"2006"!=n.resultCode&&S.default.hide(t)})).catch((function(e){console.log(e),console.log(111),i.hideLoading(),H.showToast({title:"网络开小差，可以再次领取喽"})}))}))})).catch((function(e){console.log(e),i.hideLoading(),H.showToast({title:"网络开小差，可以再次领取喽"})}))}function X(e){var t,o=!0;null!=Q&&clearTimeout(Q),t=a((function(){var a=e.data.jxdata;for(var n in a)1==a[n].quanstate&&(a[n].changeTime>0?(a[n].changeTime=a[n].changeTime-1,a[n].changeTimestr=Y(a[n].changeTime)):a[n].quanstate=2,o=!1);e.setData({jxdata:a}),o&&clearInterval(t)}),1e3),Q=t}function Y(e){var t=e,a=Math.floor(t/86400),o=Math.floor(t%86400/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return{h:r(24*a+o),m:r(n),s:r(i)};function r(e){return e<10&&(e="0"+e),e}}function Z(e){return e.toString().replace(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/,"$1-$2-$3 $4:$5:$6")}Page({detectTouchStart:P.default.detectTouchStart,detectTouchMove:P.default.detectTouchMove,detectTouchEnd:P.default.detectTouchEnd,detectTap:P.default.detectTap,detectLongPress:P.default.detectLongPress,modal:j,data:{saPgnm:"pgcate=10004;pgtitle=领券中心",actId:"",modalHidden:!0,loadingHidden:!0,hidden:!1,hidden1:!1,hidden2:!1,cachebox1:!0,cachebox2:!1,systemtime:0,jxdata:[],timecount:0,boxHidden:!0,popobj:{head:"确定使用云钻兑换",con:["是否确认使用","兑换一张","优惠券"]},yunId:{},islogin:!1,onLoaded:!1,endHidel:!1,endHider:!1,validateShow:!1,validataparam:{imgsrc:"",uuid:"",sceneId:"",codeOk:!0,code:"",index:""}},onLoad:function(e){var t=this,a=e.id;this.setData({actId:a,actKey:e.key}),S.default.init(this),N().then((function(e){W.bindUserInfo(e),L=!0,t.setData({islogin:L}),t.getSystemTime(t),M().then((function(e){})).catch((function(e){console.error(e)}))})).catch((function(e){W.handleAuthDeny(),t.getSystemTime(t)}))},onReady:function(){},onShow:function(e){P.default.init("mainApp"),i.showLoading({title:"加载中"}),this.setData({islogin:L,endHidel:!1,endHider:!1,hidden1:!1,hidden2:!1}),this.data.onLoaded?this.getSystemTime(this):this.setData({onLoaded:!0}),U()},onHide:function(e){this.setData({timecount:0,cxdata:[],jxdata:[],endHidel:!1,endHider:!1,hidden1:!1,hidden2:!1}),clearInterval(this.data.setInterval)},bindButtonSreach:function(e){this.linkToSearch()},linkToSearch:function(){i.navigateTo({url:"/pages/search/searchResult/result"})},openFourthPage:function(e){var t=e.currentTarget.dataset,a=t.endtime;if(t.endtime=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2),t){var o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=1",i.navigateTo({url:o})}},dealStringTime:function(e){var t="0"+(parseInt(e.substr(4,2))-1);return t=t.slice(t.length-2,t.length),new Date(e.substr(0,4),t,e.substr(6,2),e.substr(8,2),e.substr(10,2),e.substr(12,2)).getTime()},dealLocalTime:function(e,t){var a=e.toJSON(),o=a.split("T")[0].split("-"),n=a.split("T")[1].split(".")[0].split(":");t.setData({systemtime:parseFloat(o.join("")+n.join(""))})},getSystemTime:function(e){i.request({url:B.eshop.getSystem,method:"POST",header:{Accept:"application/json"},success:function(t){e.setData({systemtime:t.data.sysTime1})},fail:function(){var t=new Date;return e.dealLocalTime(t,e)},complete:function(){var t;(t=e.data.actId,A({method:"POST",url:G.quan+"/wap/queryCouponCenterActivities_5_"+t+"_3,5,6_2__1_10_callback1.htm",dataType:"jsonp"})).then((function(t){"1"==t.isSuccess&&t.recommendList.length>0?e.dealjxdata(t,e):e.data.cachebox2?(i.hideLoading(),e.setData({hidden2:!0,selected:!1,selected1:!0})):(i.hideLoading(),e.setData({hidden2:!0}))})).catch((function(){i.hideLoading(),e.setData({hidden2:!0})})).then((function(){i.stopPullDownRefresh(),1==e.data.hidden2&&1==e.data.cachebox2&&e.setData({hidden:e.data.hidden2})}))}})},dealjxdata:function(e,t){t.data.systemtime;for(var a=[],o=0;o<e.recommendList.length;o++){if("3"==e.recommendList[o].actType||"5"==e.recommendList[o].actType){var n=e.recommendList[o];a.push(n)}e.recommendList[o].startTimeStrFormat=Z(e.recommendList[o].startTimeStr),e.recommendList[o].endTimeStrFormat=Z(e.recommendList[o].endTimeStr)}t.dealprogressAll(a,t)},dealprogress:function(e,t){t.data.timecount<e.length?L||t.data.islogin?"6"!=e[t.data.timecount].actType?J(e[t.data.timecount].actId).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0)if(isNaN(parseInt(e[t.data.timecount].dayTimesLimit))||isNaN(parseInt(a.activityList[0].dayRemainCount))?isNaN(parseInt(a.activityList[0].remainCount))&&isNaN(parseInt(a.activityList[0].actCount))?e[t.data.timecount].progress=e[t.data.timecount].progress||0:e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].remainCount)/parseInt(a.activityList[0].actCount)*100)):e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].dayRemainCount)/parseInt(e[t.data.timecount].dayTimesLimit)*100)),e[t.data.timecount].isReceive=parseInt(a.activityList[0].isReceive),e[t.data.timecount].startTimeStr>t.data.systemtime)e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=e[t.data.timecount].startTimeStr-t.data.systemtime;else{if(!(e[t.data.timecount].startTimeStr<t.data.systemtime&&t.data.systemtime<e[t.data.timecount].endTimeStr))return;1==parseInt(a.activityList[0].isReceive)?e[t.data.timecount].quanstate=3:"0"===a.activityList[0].remainCount||parseInt(a.activityList[0].remainAmt)<=0||"0"===a.activityList[0].dayRemainCount||100==e[t.data.timecount].progress?e[t.data.timecount].quanstate=4:e[t.data.timecount].quanstate=2}else e[t.data.timecount].startTimeStr>t.data.systemtime&&(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=Y(e[t.data.timecount].changeTime));t.data.timecount++,t.dealprogress(e,t)})).catch((function(){t.data.timecount++,t.dealprogress(e,t)})):(t.data.timecount++,t.dealprogress(e,t)):(e[t.data.timecount].startTimeStr>t.data.systemtime?(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=Y(e[t.data.timecount].changeTime)):(e[t.data.timecount].quanstate=2,e[t.data.timecount].progress=e[t.data.timecount].progress||0),t.data.timecount++,t.dealprogress(e,t)):(t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),X(t))},dealprogressAll:function(e,t){for(var a=[],o=0;o<e.length;o++)L||t.data.islogin?a.push(e[o].actId):e[o].startTimeStr>t.data.systemtime?(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Y(e[o].changeTime)):(e[o].quanstate=2,e[o].progress=e[o].progress||0);L||t.data.islogin?J(a.join(",")).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0){for(var o=0;o<e.length;o++){for(var n=a.activityList.length,r=0;r<a.activityList.length;r++)e[o].actId==a.activityList[r].activityId?(isNaN(parseInt(e[o].dayTimesLimit))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[o].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):isNaN(parseInt(a.activityList[r].dayRemainCount))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[t.data.timecount].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].dayRemainCount)/parseInt(e[o].dayTimesLimit)*100)),e[o].isReceive=parseInt(a.activityList[r].isReceive),e[o].startTimeStr>t.data.systemtime?(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3):e[o].startTimeStr<t.data.systemtime&&t.data.systemtime<e[o].endTimeStr?1==parseInt(a.activityList[r].isReceive)?e[o].quanstate=3:e[o].quanstate=2:e[o].quanstate=7,"3"===a.activityList[r].activityStatus&&(e[o].quanstate=4),"4"===a.activityList[r].activityStatus&&(e[o].quanstate=5),"5"===a.activityList[r].activityStatus&&(e[o].quanstate=6),e[o].nextStartTime=""!==a.activityList[r].nextStartTime?a.activityList[r].nextStartTime.match(/\d{2}\:\d{2}/).toString():""):n-=1;0==n&&(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Y(e[o].changeTime))}console.log(e),t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),X(t)}else{for(o=0;o<e.length;o++)e[o].quanstate=1,t.dealStringTime(t.data.systemtime)>t.dealStringTime(e[o].endTimeStr)&&(e[o].quanstate=4),e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=Y(e[o].changeTime);console.log(e),t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),X(t)}})).catch((function(a){console.log(e),t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),X(t)})):(t.setData({jxdata:e,endHider:!0}),i.hideLoading(),i.stopPullDownRefresh(),X(t))},getSalesquan:function(e){if(L||this.data.islogin){var t={imgsrc:"",uuid:"",sceneId:"",codeOk:!0,code:"",index:""};this.setData({validataparam:t}),K(e,this)}else(0,D.default)()},getyunzhuan:function(e){if(L||this.data.islogin){var t=e.currentTarget.dataset,a={};a.head=this.data.popobj.head,a.content=t.info||"",a.number=t.number||"",a.paramone=this.data.popobj.con[0]||"",a.paramtwo=this.data.popobj.con[1]||"",a.paramthr=this.data.popobj.con[2]||"",q(a,this),this.setData({yunId:e.currentTarget.dataset.voucherid,_index:t.indexof})}else(0,D.default)()},cancelButton:function(e){this.setData({boxHidden:!0})},enterButton:function(e){var t=this,a=t.data._index;i.showLoading({title:"加载中",mask:!0});var o={voucherId:t.data.yunId,couponGetSource:1003,detect:P.default.getTrack()||"",deviceToken:V.pdToken,vcsCode:"",uuid:""};F().then((function(e){(function(e,t){return A({method:"GET",url:B.eshop.getYun,data:{voucherId:e.voucherId,couponGetSource:e.couponGetSource,detect:P.default.getTrack()||"",dfpToken:t},dataType:"jsonp"})})(o,e).then((function(e){i.hideLoading(),"0"===e.resultCode?(t.data.jxdata[a].quanstate=3,t.setData(k({boxHidden:!0},"jxdata["+a+"].quanstate",3)),H.showToast({title:"恭喜，兑换成功"})):(t.showExange(t,e,t.data.jxdata[a].actId,t.data.jxdata[a].voucherId,t.data.jxdata[a].voucherType),t.setData({boxHidden:!0}))})).catch((function(){i.hideLoading(),t.setData({boxHidden:!0}),H.showToast({title:"兑换失败，可重新尝试"})}))})).catech((function(e){i.hideLoading(),t.setData({boxHidden:!0}),H.showToast({title:"兑换失败，可重新尝试"})}))},showExange:function(e,t,a,o,n){var r="";switch(t.resultCode){case"VOUCHER_1017":case"VOUCHER_1023":i.showModal({title:"",content:t.errorDesc,cancelText:"取消",confirmText:"去绑定",confirmColor:"#EDA200",success:function(e){e.confirm?i.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(z.check)}):e.cancel}});break;case"VOUCHER_1012":case"VOUCHER_1013":case"VOUCHER_1021":r="很抱歉，当前活动异常火爆，请稍后再试",H.showToast({title:r});break;case"VOUCHER_1022":r="活动过于火爆，请输入验证码",H.showToast({title:r});break;case"VOUCHER_1002":r="很抱歉，您的云钻余额不足，兑换失败",H.showToast({title:r});break;case"VOUCHER_1003":r="今日已领完，看看其他优惠券吧",H.showToast({title:r});break;case"VOUCHER_1005":r="您已经兑换过这张优惠券，看看其他券吧",H.showToast({title:r});break;case"VOUCHER_1006":r="很抱歉，此优惠券活动已经结束，看看其他优惠券吧",H.showToast({title:r});break;case"VOUCHER_1008":r="活动尚未开始，请耐心等待",H.showToast({title:r});break;case"VOUCHER_1009":case"VOUCHER_1016":r="领券活动已结束，您可以看看其他优惠券",H.showToast({title:r});break;case"VOUCHER_1010":case"VOUCHER_1011":case"VOUCHER_1020":r="券已领完，明天再来看看吧",H.showToast({title:r});break;case"VOUCHER_1014":r="您的会员等级不满足活动要求，您可以看看其他优惠券",H.showToast({title:r});break;case"VOUCHER_1015":r="您已兑换过同类券，看看其他优惠券吧",H.showToast({title:r});break;case"VOUCHER_1018":r="很抱歉，您的账户未验证，请验证后领取",H.showToast({title:r});break;case"VOUCHER_1019":r="您的账号不满足活动要求，您可以看看其他优惠券！",H.showToast({title:r});break;case"VOUCHER_1024":r="很抱歉，当前活动异常火爆，请稍后再试",H.showToast({title:r});break;case"VOUCHER_1025":r="验证码错误次数过多，请重新获取",H.showToast({title:r});break;case"VOUCHER_1026":r="很抱歉，当前活动异常火爆，请稍后再试",H.showToast({title:r});break;case"VOUCHER_9999":r="很抱歉，当前系统异常，请稍后再试（M9999）",H.showToast({title:r});break;default:r=t.errorDesc,H.showToast({title:r})}},remindme:function(e){return!1},gotojuhePage:function(e){return!1},usequan:function(e){var t=e.currentTarget.dataset,a=new Date(this.data.jxdata[t.indexof].endTime);t.label=this.data.jxdata[t.indexof].shopName,t.endtime=a.toLocaleDateString().replace(/\//g,"-")+" "+a.toTimeString().substr(0,8);if(t&&t.coupontype&&["10002","10003","10004","10005","10006"].indexOf(t.coupontype)>-1){var o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=0",i.navigateTo({url:o})}else{o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=0",i.navigateTo({url:o})}},validateCancel:function(e){this.setData({validateShow:!1})},validateCheck:function(e){this.data.validataparam.codeOk&&K(this.data.validataparam.index,this)},saveCheckVal:function(e){var t=this.data.validataparam;e.detail.value.length>4?(t.codeOk=!1,this.setData({validataparam:t})):(t.codeOk=!0,t.code=e.detail.value,this.setData({validataparam:t}))},refreshImgCode:function(e){var t={};t=this.data.validataparam;var a=O(new Date).replace(/[^\d]/g,""),o=G.vcs+"/vcs/imageCode.htm?uuid="+t.uuid+"&yys="+a+"&sceneId="+t.sceneId;t.imgsrc=o,this.setData({validataparam:t})}})})),window.define("1047",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({data:{invoicePicUrl:"",downloadUrl:"",productName:""},onLoad:function(e){var t=decodeURIComponent(e.id),a=decodeURIComponent(e.invoicePicUrl),o=decodeURIComponent(e.productName);this.setData({invoicePicUrl:a,downloadUrl:t,productName:o})},onShareAppMessage:function(){return{title:this.data.productName,imageUrl:this.data.invoicePicUrl}}})})),window.define("1050",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(25),D=(x.requestPromise,x.modal),S=(x.formatTime,x.commonPopbox,x.login,x.setDfpToken,x.getDfpToken,x.checkLogin),P=(e(20).getCityCode,e(17)),_=e(8);e(45),e(135),i();Page({modal:D,data:{modalHidden:!0,loadingHidden:!0,hidden:!1,hidden1:!1,hidden2:!1,selected:!0,selected1:!1,cachebox1:!0,cachebox2:!1,systemtime:0,cxdata:[],onLoaded:!1},onLoad:function(){var e=this,t=this;S().then((function(){b=!0,t.getSystemTime(e)})).catch((function(){})),this.getSystemTime(this)},onReady:function(){},onShow:function(e){this.setData({islogin:b,endHidel:!1,endHider:!1,hidden1:!1,hidden2:!1}),this.data.onLoaded?this.getSystemTime(this):this.setData({onLoaded:!0})},renderSalesData:function(){var e=this;n.request({url:_.eshopSales+"/higou/chart/jsonp/listActive_wap_1_50_salesCallback.html",method:"POST",success:function(t){var a=JSON.parse(t.data.replace("salesCallback(","").substring(0,t.data.replace("salesCallback(","").length-1));"0"==a.ret&&a.data.realCount>0?e.dealcxdata(a,e):e.data.cachebox1?e.setData({hidden1:!0,selected:!0,selected1:!1,hidden:e.data.hidden1}):e.setData({hidden1:!0,selected:!1,selected1:!0,hidden:e.data.hidden2})},fail:function(t){e.data.cachebox1?e.setData({hidden1:!0,selected:!0,selected1:!1,cxdata:[]}):e.setData({hidden1:!0,selected:!1,selected1:!0,cxdata:[]}),retureBack()},complete:function(t){e.data.cachebox1?e.setData({hidden:e.data.hidden1}):e.setData({hidden:e.data.hidden2})}})},bindButtonSreach:function(e){this.linkToSearch()},linkToSearch:function(){n.navigateTo({url:"/pages/search/searchResult/result"})},openFourthPage:function(e){var t=e.currentTarget.dataset,a=t.endtime;if(t.endtime=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2),t){var o="/packageA/pages/quanSearch/search/search?";o+="label="+t.label,o+="&endtime="+t.endtime,o+="&id="+t.couponruleid,o+="&type=1",n.navigateTo({url:o})}},dealcxdata:function(e,t){var a=t.data.systemtime,o=!0,n=!1,i=void 0;try{for(var r,s=e.data.list[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var c=r.value;parseFloat(c.startTime)<a&&a<parseFloat(c.endTime)?((0|c.salesVolume)>9999?c.salesVolume=(c.salesVolume/1e4).toFixed(1).toString().replace(".0","")+"万":c.salesVolume=0|c.salesVolume,c.time=!0,c.imgenv=_.img+"/uimg/b2c/newcatentries/"):c.time=!1}}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}t.data.cachebox1?t.setData({cxdata:e.data.list,hidden1:!1,selected:!0,selected1:!1,endHidel:!0}):t.setData({cxdata:e.data.list,hidden1:!1,selected:!1,selected1:!0,endHidel:!0})},getSystemTime:function(e){n.request({url:P.eshop.getSystem,method:"POST",header:{Accept:"application/json"},success:function(t){e.setData({systemtime:t.data.sysTime1})},fail:function(){var t=new Date;return e.dealLocalTime(t,e)},complete:function(){e.renderSalesData()}})},dealLocalTime:function(e,t){var a=""+e.getFullYear()+(e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1))+(e.getDate()>9?e.getDate():"0"+e.getDate())+(e.getHours()>9?e.getHours():"0"+e.getHours())+(e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes())+(e.getSeconds()>9?e.getSeconds():"0"+e.getSeconds());t.setData({systemtime:a})},dealjxdata:function(e,t){t.data.systemtime;for(var a=[],o=0;o<e.freeCouponList.length;o++)if("3"==e.freeCouponList[o].actType||"5"==e.freeCouponList[o].actType){var n=e.freeCouponList[o];n.showPicUrlList.length>0?n.imgsrc=n.showPicUrlList[0].showPicUrl:n.partnumber.length>0?n.imgsrc=_.img+"/uimg/b2c/newcatentries/"+n.shopCode+"-"+n.partnumber.split(",")[0]+"_1_200x200.jpg":n.imgsrc=n.actPicUrl,a.push(n)}t.dealprogressAll(a,t)},dealprogress:function(e,t){t.data.timecount<e.length?b||t.data.islogin?"6"!=e[t.data.timecount].actType?getProgressData(e[t.data.timecount].actId).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0)if(isNaN(parseInt(e[t.data.timecount].dayTimesLimit))||isNaN(parseInt(a.activityList[0].dayRemainCount))?isNaN(parseInt(a.activityList[0].remainCount))&&isNaN(parseInt(a.activityList[0].actCount))?e[t.data.timecount].progress=e[t.data.timecount].progress||0:e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].remainCount)/parseInt(a.activityList[0].actCount)*100)):e[t.data.timecount].progress=Math.max(e[t.data.timecount].progress,parseInt(100-parseInt(a.activityList[0].dayRemainCount)/parseInt(e[t.data.timecount].dayTimesLimit)*100)),e[t.data.timecount].isReceive=parseInt(a.activityList[0].isReceive),e[t.data.timecount].startTimeStr>t.data.systemtime)e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=e[t.data.timecount].startTimeStr-t.data.systemtime;else{if(!(e[t.data.timecount].startTimeStr<t.data.systemtime&&t.data.systemtime<e[t.data.timecount].endTimeStr))return;1==parseInt(a.activityList[0].isReceive)?e[t.data.timecount].quanstate=3:"0"===a.activityList[0].remainCount||parseInt(a.activityList[0].remainAmt)<=0||"0"===a.activityList[0].dayRemainCount||100==e[t.data.timecount].progress?e[t.data.timecount].quanstate=4:e[t.data.timecount].quanstate=2}else e[t.data.timecount].startTimeStr>t.data.systemtime&&(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=dealhourminsed(e[t.data.timecount].changeTime));t.data.timecount++,t.dealprogress(e,t)})).catch((function(){t.data.timecount++,t.dealprogress(e,t)})):(t.data.timecount++,t.dealprogress(e,t)):(e[t.data.timecount].startTimeStr>t.data.systemtime?(e[t.data.timecount].quanstate=1,e[t.data.timecount].changeTime=(t.dealStringTime(e[t.data.timecount].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[t.data.timecount].changeTimestr=dealhourminsed(e[t.data.timecount].changeTime)):(e[t.data.timecount].quanstate=2,e[t.data.timecount].progress=e[t.data.timecount].progress||0),t.data.timecount++,t.dealprogress(e,t)):(t.setData({jxdata:e,endHider:!0}),n.hideLoading(),n.stopPullDownRefresh(),gobackTime(t))},dealprogressAll:function(e,t){for(var a=[],o=0;o<e.length;o++)b||t.data.islogin?a.push(e[o].actId):e[o].startTimeStr>t.data.systemtime?(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=dealhourminsed(e[o].changeTime)):(e[o].quanstate=2,e[o].progress=e[o].progress||0);b||t.data.islogin?getProgressData(a.join(",")).then((function(a){if("1"==a.resultFlag&&a.activityList.length>0){for(var o=0;o<e.length;o++){for(var i=a.activityList.length,r=0;r<a.activityList.length;r++)if(e[o].actId==a.activityList[r].activityId)if(isNaN(parseInt(e[o].dayTimesLimit))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[o].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):isNaN(parseInt(a.activityList[r].dayRemainCount))?isNaN(parseInt(a.activityList[r].remainCount))&&isNaN(parseInt(a.activityList[r].actCount))?e[o].progress=e[t.data.timecount].progress||0:e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].remainCount)/parseInt(a.activityList[r].actCount)*100)):e[o].progress=Math.max(e[o].progress,parseInt(100-parseInt(a.activityList[r].dayRemainCount)/parseInt(e[o].dayTimesLimit)*100)),e[o].isReceive=parseInt(a.activityList[r].isReceive),e[o].startTimeStr>t.data.systemtime)e[o].quanstate=1,e[o].changeTime=e[o].startTimeStr-t.data.systemtime;else{if(!(e[o].startTimeStr<t.data.systemtime&&t.data.systemtime<e[o].endTimeStr))return;1==parseInt(a.activityList[r].isReceive)?e[o].quanstate=3:"0"===a.activityList[r].remainCount||parseInt(a.activityList[r].remainAmt)<=0||"0"===a.activityList[r].dayRemainCount||100==e[o].progress?e[o].quanstate=4:e[o].quanstate=2}else i-=1;0==i&&(e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=dealhourminsed(e[o].changeTime))}t.setData({jxdata:e,endHider:!0}),n.hideLoading(),n.stopPullDownRefresh(),gobackTime(t)}else{for(o=0;o<e.length;o++)e[o].quanstate=1,e[o].changeTime=(t.dealStringTime(e[o].startTimeStr)-t.dealStringTime(t.data.systemtime))/1e3,e[o].changeTimestr=dealhourminsed(e[o].changeTime);t.setData({jxdata:e,endHider:!0}),n.hideLoading(),n.stopPullDownRefresh(),gobackTime(t)}})).catch((function(a){t.setData({jxdata:e,endHider:!0}),n.hideLoading(),n.stopPullDownRefresh(),gobackTime(t)})):(t.setData({jxdata:e,endHider:!0}),n.hideLoading(),n.stopPullDownRefresh(),gobackTime(t))}})})),window.define("1053",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(42),x=(k(e(387)),k(e(54))),D=k(e(1054)),S=k(e(1057)),P=k(e(1055)),_=k(e(1056));function k(e){return e&&e.__esModule?e:{default:e}}var L=e(25),R=L.requestPromise,A=L.checkLogin,j=(e(135),e(77).saSendLog);console.log(P.default);var O={getIndexParams:P.default.snprimeBase+"/m/pay/ajax/getIndexParams.do",queryInvoiceInformation:P.default.snprimeBase+"/ajax/queryInvoiceInformation.do",redirect:P.default.snprimeBase+"/m/pay/redirect.do",sendSms:P.default.snprimeBase+"/ajax/sms.do"};Page({data:{invoiceUser:"个人",superPayEndDate:"",priceNow:"",setDfpToken:"",superMemberConfig:{},memberLevel:"",memberLevelshow:!1,isDisabled:!1,indexRouter:_.default.index,agreementRouter:_.default.agreement,saPgnm:"pgcate=10004;pgtitle=购买SUPER会员",pageid:"ffhyxcxgmy"},onLoad:function(e){S.default.init(this)},onReady:function(){},onShow:function(){var e=this;j("pageview"),this.setDfpToken(),A().then((function(){e.getsuperMemberConfig()})).catch((function(){n.showModal({title:"苏宁会员",content:"未获取到登录信息",showCancel:!1,confirmColor:"#f60"}),console.log("未登录")}))},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},setDfpToken:function(){var e=this;(0,b.setDfpToken)().then((function(t){console.log("setDfpToken",t),e.setData({setDfpToken:t})})).catch((function(e){console.log(e)}))},getsuperMemberConfig:function(){var e=this;R({url:O.getIndexParams}).then((function(t){var a="",o=t.levelPrice,n=t.ecologyPrice,i=t.paidLevelQualificationCode,r=t.isCreditScore,s=t.score,c=t.limit;o<=n&&o>0||o>0&&!(n>0)?a=o:(n<o&&n>0||n>0&&!(o>0))&&(a=n);var d=!1;!+r||""!==s&&s>=0&&""!==c&&s>=c&&(509!=i||510!=i)||(d=!0),514==t.paidLevelQualificationCode&&(t.paidLevelQualificationCode="1"),e.setData({superMemberConfig:t,priceNow:a,isDisabled:d,isShowEcology:!(o<=n||-1==n)}),e.superBuyInit()}))},superBuyInit:function(){var e=this,t=this.data.isShowEcology,a=this.data.superMemberConfig,o=a.memberLevel,i=a.paidLevelQualificationCode,r=a.superEndDate;this.setData({memberLevel:t?"生态值优惠":"V"+o+"限时",superPayEndDate:r}),(t||o>=2)&&this.setData({memberLevelshow:!0}),"505"==i&&n.showModal({content:"个人用户才能开通SUPER会员",showCancel:!1,confirmColor:"#f60"}),R({url:O.queryInvoiceInformation}).then((function(t){if(1==t.code){var a=t.data.invoiceUser;e.setData({invoiceUser:a||"个人"})}}))},toPay:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x.default&&x.default.getTrack||this.systemErr();var a=this.data.setDfpToken,o={detect:x.default.getTrack(),fromChannel:"",dfpToken:a,weixinShopQrCode:" | | | | | | ",orderChannel:"MINIP",miniProgramFlag:"1"};if(!this.data.isDisabled){n.showLoading({title:"请稍后"});var i=this;R({url:O.redirect,data:Object.assign({},o,t)}).then((function(t){console.log(t),n.hideLoading(),new D.default({that:e,pageType:"pay",res:t,cb:S.default.show,SpSmsParams:{page:e,phone:t.data||"",callback:function(e){var t=e.success,a=e.code;if(!a)return S.default.setError(i,"请输入短信验证码");t&&(i.toPay({type:2,smsCode:a}),S.default.hide(i))}}})})).catch((function(e){n.hideLoading()}))}},systemErr:function(e,t){n.showModal({content:e||"系统繁忙，请稍后重试！",showCancel:!1,confirmColor:"#f60",success:function(e){e.confirm&&t&&t()}})},toPnvoiceInformationPage:function(){n.navigateTo({url:_.default.invoiceInformation})},toGoBindPhone:function(){var e=_.default.payIndex,t=P.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),a=P.default.ascUrl+"/wap/mobile/check_1.do?nextTargetUrl= "+encodeURIComponent(t);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)})},toGoBindCerty:function(){var e=_.default.payIndex,t=P.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),a=P.default.cmsDomain+"/smwap.htm?source=1169&terminal=31&targetUrl= "+encodeURIComponent(t);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)})},reLoadPage:function(){this.onShow()},autoclick:function(e){j("click",{event:e})}})})),window.define("1054",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),x=S(e(1055)),D=S(e(1056));function S(e){return e&&e.__esModule?e:{default:e}}var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log(t,3),this.operate(t)}return b(e,[{key:"operate",value:function(e){console.log(e,66);var t=e.pageType,a=e.res,o=(e.canTryUseLevel,e.cb),i=e.SpSmsParams,r=e.that,s="系统繁忙，请稍后重试！",c=!1,d="确认";console.log(t,17);var u=function(){};if(a&&a.code){switch(a.code){case"1":case"520":if("pay"===t){var l=a.data.split("?")[1];return void n.navigateTo({url:D.default.payWap+"?"+l})}if("1"===a.code){s="恭喜你\r\n成功开通SUPER会员30天试用",d="立即体验",u=function(){n.navigateTo({url:D.default.index})};break}case"501":case"0":case"502":case"503":case"504":s="系统异常，请稍后重试！";break;case"505":s="try"===t?"申请失败，个人用户才能申请试用！":"个人用户才能开通SUPER会员";break;case"506":s="公测期已结束";break;case"507":case"508":s="已经试用过啦，不要贪心噢～",u=function(){n.navigateTo({url:D.default.index})};break;case"509":s="try"===t?"绑定手机后才能申请试用噢～":"绑定手机后才能购买噢～",c=!0,d="去绑定",u=function(){var e="try"===t?D.default.try:D.default.payIndex,a=x.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),o=x.default.ascUrl+"/wap/mobile/check_1.do?nextTargetUrl= "+encodeURIComponent(a);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(o)})};break;case"510":s="try"===t?"实名认证后才能申请试用噢～":"账户未实名认证，重新购买",c=!0,d="去实名",u=function(){var e="try"===t?D.default.try:D.default.payIndex,a=x.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),o=x.default.cmsDomain+"/smwap.htm?source="+("try"===t?"1181":"1169")+"&terminal=31&targetUrl= "+encodeURIComponent(a);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(o)})};break;case"514":s="try"===t?"很遗憾，您的身份证已达到SUPER会员的试用数量上限，试用失败":"很遗憾，您的身份证已达到SUPER会员的购买数量上限，购买失败";break;case"517":s="购买失败，您已达续费次数上限！";break;case"521":s="很抱歉，您的账户存在风险，暂不支持"+("try"===t?"试用":"开通");break;case"522":return console.log("短信验证",120),void(o&&o(i));case"523":return void this.alertBox2("短信验证码错误");case"524":return void this.alertBox2("错误次数过多，请重新获取！");case"528":s="当前仅支持V"+r.data.canTryUseLevel+"及以上等级会员试用SUPER会员快去提升等级吧~",r.setData({isDisabled:!0});break;case"530":return s="土豪，你已经购买过SUPER会员啦",void(u=function(){n.navigateTo({url:D.default.index})});case"540":return s="支付通道暂未开通，money待会儿再上交吧～",void(u=function(){n.navigateTo({url:D.default.index})});case"550":s="账户阳光分未达标",u=function(){r.reLoadPage()};break;case"551":s="系统异常，请稍后重试!",u=function(){r.setData({isDisabled:!0})};break;case"552":s="您扫码购买次数已达系统上限，如需再次购买可通过易购客户端";break;case"553":s="二维码失效";break;default:s="系统正忙，请稍后重试！"}this.systemErr({msg:s,confirm:u,showCancel:c,confirmText:d})}}},{key:"systemErr",value:function(e){var t=e.msg,a=e.confirm,o=e.showCancel,i=void 0!==o&&o,r=e.confirmText;n.showModal({content:t,showCancel:i,confirmColor:"#f60",confirmText:r,success:function(e){e.confirm&&a&&a()}})}},{key:"showSillerFn",value:function(){}},{key:"alertBox2",value:function(e){n.showToast({title:e,icon:"none",duration:2e3})}}]),e}();a.default=P})),window.define("1055",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=D(e(9)),x=D(e(8));function D(e){return e&&e.__esModule?e:{default:e}}var S=x.default.supervip+"/snprime-web",P=x.default.mvo;console.log(S,"superVipHost"),console.log(S,"mvoHost");var _={sit:"https://supervipsit.cnsuning.com/snprime-web",pre:"https://supervippre.cnsuning.com/snprime-web",xgpre:"https://supervipprexg.cnsuning.com/snprime-web",prod:"https://fast.suning.com/supervip/wx/snprime-web"}[b.default],k={sit:{resDomain:"https://sitres.suning.cn",tryPageConfig:S+"/m/free/trial/ajax/getIndexParams.do",weiXinPayIcon:"http://sitres.suning.cn/project/snprime/mobile/images/pay_weixin.png",cmsDomain:"https://csit.m.cnsuning.com",ascUrl:"https://aqsit.cnsuning.com/asc",mvoRequest:P+"/mvo-web/pay/request.do",goodsUrl:P+"/mvo-web/calculation/getSnprimePrice.do",snprimeBase:S,snprimeBaseNoiFast:_},pre:{resDomain:"https://preres.suning.cn",vcs:"https://vcspre.cnsuning.com",tryPageConfig:S+"/m/free/trial/ajax/getIndexParams.do",weiXinPayIcon:"http://preres.suning.cn/project/snprime/mobile/images/pay_weixin.png",signup:S+"/ajax/vip/signup.do",getXdPageParams:S+"/m/ajax/getXdPageParams.do",mvoRequest:P+"/mvo-web/pay/request.do",cmsDomain:"http://cpre.m.cnsuning.com",ascUrl:"https://aqpre.cnsuning.com/asc",goodsUrl:P+"/mvo-web/calculation/getSnprimePrice.do",snprimeBase:S,snprimeBaseNoiFast:_},xgpre:{resDomain:" https://resprexg.suning.cn",vcs:"https://vcsprexg.cnsuning.com",tryPageConfig:S+"/m/free/trial/ajax/getIndexParams.do",signup:S+"/ajax/vip/signup.do",cmsDomain:"http://cprexg.m.cnsuning.com",ascUrl:"https://aqprexg.cnsuning.com/asc",mvoRequest:P+"/mvo-web/pay/request.do",goodsUrl:P+"/mvo-web/calculation/getSnprimePrice.do",getXdPageParams:S+"/m/ajax/getXdPageParams.do",weiXinPayIcon:"http://resprexg.suning.cn/project/snprime/mobile/images/pay_weixin.png",snprimeBase:S,snprimeBaseNoiFast:_},prod:{resDomain:"https://res.suning.cn",vcs:"https://vcs.suning.com",tryPageConfig:S+"/m/free/trial/ajax/getIndexParams.do",weiXinPayIcon:"http://res.suning.cn/project/snprime/mobile/images/pay_weixin.png",signup:S+"/ajax/vip/signup.do",getXdPageParams:S+"/m/ajax/getXdPageParams.do",mvoRequest:P+"/mvo-web/pay/request.do",cmsDomain:"https://c.m.suning.com",ascUrl:"https://aq.suning.com/asc",goodsUrl:P+"/mvo-web/calculation/getSnprimePrice.do",snprimeBase:S,snprimeBaseNoiFast:_}}[b.default];console.log(k,63),a.default=k})),window.define("1056",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b="/packageA/pages/superMember",x={index:b+"/superMember_chanel/superMember_chanel",payIndex:b+"/payIndex/index",try:b+"/try/index",invoiceInformation:b+"/invoiceInformation/index",agreement:b+"/agreement/index",paySuccess:b+"/paySuccess/index",payWap:b+"/payWap/index",smallShop:b+"/smallShop/index"};a.default=x})),window.define("1057",(function(e,t,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x,D=e(1055),S=(x=D)&&x.__esModule?x:{default:x},P=e(25);function _(e,t){e.setData({"sms.errorInfo":t})}function k(e){e.data.sms&&(clearInterval(e.data.sms.timer),e.setData({"sms.show":!1}))}o.default={init:function(e){e.setData?e.setData({sms:{}}):e.data.msm={},e.smsInput=function(e){this.data.sms.phoneCode=e.detail.value},e.smsCancel=function(){this.data.sms.callback({success:!1}),k(this)},e.smsConfirm=function(){this.data.sms.callback({success:!0,code:this.data.sms.phoneCode})},e.smsGetCode=function(){var e=this;(0,P.requestPromise)({url:S.default.snprimeBase+"/ajax/sms.do"}).then((function(t){"1"==t.code?(_(e,"手机验证码已经成功发送"),e.setData({"sms.sent":!0,"sms.count":60,"sms.countStr":"重新获取(60)","sms.timer":a((function(){var t=e.data.sms.count-1,a=!!t;a||clearInterval(e.data.sms.timer),e.setData({"sms.sent":a,"sms.count":t,"sms.countStr":"重新获取("+t+")"})}),1e3)})):"1001"==t.code?(_(e,"今日次数用完"),e.setData({"sms.sent":!0,"sms.countStr":"今日次数用完"})):"1002"==t.code?_(e,"未达到再次获取间隔时间！"):_(e,"验证码获取失败，请重新获取")})).catch((function(){_(e,"短信验证码发送失败！")}))}},show:function(e){var t=e.page,a=e.callback;t.setData({"sms.show":!0,"sms.errorInfo":"","sms.phone":e.phone,"sms.sent":!1,"sms.callback":a})},hide:k,setError:_}})),window.define("1060",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=e(1056),S=(x=D)&&x.__esModule?x:{default:x};var P=e(77).saSendLog;Page({data:{time:5,showInfoButton:"立即前往",toIndexURL:S.default.index,saPgnm:"pgcate=10004;pgtitle=支付成功"},onLoad:function(e){this.setData({showInfoFirst:"1"==e.buyFlag?"开启成功":"升级成功",showInfoSecond:"1"==e.buyFlag?"感谢您续费苏宁SUPER会员!":"恭喜您成为苏宁SUPER会员!",showInfoThird:"1"==e.buyFlag?"":"身份变更如存在延迟请稍候，无需再次支付～"})},autoJump:function(){var e=this,a=4;!function o(){e.data.timer=t((function(){a<1?i.navigateTo({url:e.data.toIndexURL}):(e.setData({time:a}),a--,o())}),1e3)}()},init:function(){this.autoJump()},onHide:function(){clearTimeout(this.data.timer)},onShow:function(){P("pageview"),this.setData({time:5}),this.init()}})})),window.define("1063",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=D(e(387)),x=D(e(1055));function D(e){return e&&e.__esModule?e:{default:e}}var S=e(25),P=S.requestPromise,_=S.checkLogin,k=e(77).saSendLog,L={updateInvoiceInformation:x.default.snprimeBase+"/ajax/updateInvoiceInformation.do",queryInvoiceInformation:x.default.snprimeBase+"/ajax/queryInvoiceInformation.do"};Page({data:{deleteUseinfo1:!0,deleteUseinfo2:!0,invoiceUser:"",invoicePhone:"",saPgnm:"pgcate=10004;pgtitle=发票信息"},onLoad:function(e){var t,a=this;_().then((t=b.default.mark((function e(){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({url:L.queryInvoiceInformation}).then((function(e){if(1==e.code){var t=e.data,o=t.invoiceUser,n=t.invoicePhone;a.setData({invoiceUser:o||"个人",invoicePhone:n||""})}}));case 2:case"end":return e.stop()}}),e,a)})),function(){var e=t.apply(this,arguments);return new Promise((function(t,a){return function o(n,i){try{var r=e[n](i),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))})).catch((function(){console.log("未登录")}))},onReady:function(){},onShow:function(){k("pageview")},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},bindfocus1:function(e){this.setData({deleteUseinfo1:!1,invoiceUser:e.detail.value})},bindfocus2:function(e){this.setData({deleteUseinfo2:!1,invoicePhone:e.detail.value})},bindblur1:function(){this.setData({deleteUseinfo1:!0,invoiceUser:this.data.invoiceUser.length?this.data.invoiceUser:"个人"})},bindblur2:function(){this.setData({deleteUseinfo2:!0})},toSubmit:function(){var e=this.data,t=e.invoiceUser,a=e.invoicePhone;0!=a.length?/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/.test(a)?/^[\u4e00-\u9fa5a-zA-Z]{1,12}$/.test(t||"个人")?P({url:L.updateInvoiceInformation,method:"POST",data:{invoiceUser:this.data.invoiceUser.length?this.data.invoiceUser:"个人",invoicePhone:a}}).then((function(e){1==e.code?n.showModal({content:"提交成功",showCancel:!1,confirmColor:"#f60",success:function(e){e.confirm&&n.navigateBack({})}}):n.showToast({title:"发送请求失败,请返回重试!",icon:"none",duration:2e3})})).catch((function(){n.showToast({title:"发送请求失败,请返回重试!",icon:"none",duration:2e3})})):n.showToast({title:"请输入正确的姓名！",icon:"none",duration:2e3}):n.showToast({title:"手机号格式不正确，请重新输入！",icon:"none",duration:2e3}):n.showToast({title:"请输入手机号！",icon:"none",duration:2e3})}})})),window.define("1066",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(77).saSendLog;Page({data:{type:"zhengshi",saPgnm:"pgcate=10004;pgtitle=购买协议"},onLoad:function(e){var t=void 0,a=void 0;switch(e&&e.type){case"daikou":t="daikou",a="易付宝代扣服务协议";break;case"shiyong":t="shiyong",a="试用协议";break;default:t="zhengshi",a="购买协议"}this.setData({type:t}),a&&n.setNavigationBarTitle({title:a})},onShow:function(){b("pageview")},goBack:function(){n.navigateBack({})}})})),window.define("1069",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(1070),x=P(e(1055)),D=e(42),S=P(e(1056));function P(e){return e&&e.__esModule?e:{default:e}}var _=e(25),k=_.requestPromise,L=_.checkLogin,R=e(77).saSendLog;Page({data:{goodsUrl:x.default.goodsUrl||"https://mvo.suning.com/mvo-web/calculation/getSnprimePrice.do",payPriceNum:"149",isPriceShow:!1,payPars:{},CurrentBtnStatus:"canPay",ShopInfoParams:{},btnConfig:{canPay:{className:"",txt:"去支付"},noCanPay:{className:"can-not-pay",txt:"正在支付中..."}},payWays:[{id:"weixinPay",type:"微信支付",iconSrc:x.default.weiXinPayIcon,checked:!0}],payWay:"weixinPay",saPgnm:"pgcate=10004;pgtitle=支付中心",pageid:"ffhyxcxzfy"},onShow:function(){R("pageview")},onLoad:function(e){var t=this;console.log(this.data,46),L().then((function(){t.getDfpToken(),t.setData({buyFlag:e.buyFlag||"",ShopInfoParams:{goodsNo:e.goodsNo,goodsNum:e.goodsNum,userName:e.userName,userType:e.userType}}),t.setData({payPars:e}),t.getPrice()})).catch((function(){n.showModal({content:"未获取到登录信息",showCancel:!1,confirmColor:"#f60"})}))},addUrl:function(e){var t="?";for(var a in e)t+="&"+a+"="+e[a];return t},getPrice:function(){var e=this;console.log(this.data.ShopInfoParams,74),this.data.goodsUrl+=this.addUrl(this.data.ShopInfoParams),console.log(this.data.goodsUrl,76),k({url:this.data.goodsUrl}).then((function(t){switch(console.log(t,"价格接口"),!0){case"timeout"==t:return void n.showModal({showCancel:!1,content:"网络繁忙，请稍后重试"});case"parsererror"==t:return void n.showModal({showCancel:!1,content:"请先登录，再重试"});case"otherError"==t:return void n.showModal({showCancel:!1,content:"服务器繁忙，请稍后重试"});case"990004"==t.code:return void n.showModal({showCancel:!1,content:"请先登录，再重试"});case"020109"==t.code:return void n.showModal({showCancel:!1,content:"请返回上一页面重新购买！"});case 0!=t.code:return void(t.msg&&n.showModal({showCancel:!1,content:t.msg}))}t.data.price>0&&e.setData({payPriceNum:t.data.price,isPriceShow:!0})}))},payWayChange:function(e){this.setData({payWay:e.detail})},getDfpToken:function(){var e=this;(0,D.getDfpToken)().then((function(t){console.log("getDfpToken",t),e.setData({dfpToken:t})})).catch((function(e){console.log(e)}))},wxPay:function(){var e=this,t=this;(0,b.payOrder)().then((function(a){console.log(a,"'wx_timestamp' 'wx_sign'  'openId'  'appId'  'clientType' ");var o=a.openId,i=a.wx_sign,r=a.wx_timestamp,s=a.appId,c=e.data,d=c.dfpToken,u=c.payPars,l=u.sign,g=u.timestamp,p=u.snLoginName,h=u.userType,f=u.invoiceUser,m=u.invoicePhone,w=u.twitterSnId,v=u.branchCompanyCode,y=u.storeCode,C=u.storeToken,T=u.fromChannel,I=u.wxOpenFlag,b=u.staffNo,D=u.goodsNo,P=u.goodsNum,_=u.returnUrl,L=u.buyFlag;console.log(a,236);var R={appIdWX:s||"wx681b1e78da02dd16",dfpToken:d,tradeType:"JSAPI",openId:decodeURIComponent(o)||"",payWay:"24",wx_sign:decodeURIComponent(i)||"",wx_timestamp:decodeURIComponent(r)||"",sign:decodeURIComponent(l)||"",timestamp:decodeURIComponent(g)||"",orderToken:(new Date).getTime(),traceId:(new Date).getTime(),snLoginName:decodeURIComponent(p),userType:decodeURIComponent(h),distChannel:"50",invoiceUser:decodeURIComponent(f),invoicePhone:decodeURIComponent(m),weixinShopQrCode:decodeURIComponent(w||null)+"|"+decodeURIComponent(v||null)+"|"+decodeURIComponent(y||null)+"|"+decodeURIComponent(b||null)+"|"+decodeURIComponent(I||null)+"|"+decodeURIComponent(T||null)+"|"+decodeURIComponent(C||null),goodsNo:decodeURIComponent(D),goodsNum:decodeURIComponent(P),returnUrl:decodeURIComponent(_),buyFlag:decodeURIComponent(L),appplt:"xcx"};e.setData({buyFlag:L||""}),k({url:x.default.mvoRequest,data:R}).then((function(a){var o=function(){e.setData({CurrentBtnStatus:"canPay"})};switch(console.log(a,"request.do"),!0){case"timeout"==a:return void n.showModal({content:"网络异常，请稍候重试",showCancel:!1,confirmColor:"#f60",confirmText:"我知道了",success:o});case"parsererror"==a:return void n.showModal({content:"您还没有登陆账号",confirmText:"马上登陆",confirmColor:"#f60",showCancel:!1,success:o});case"otherError"==a:return void n.showModal({content:"网络异常，请重新支付",confirmColor:"#f60",confirmText:"我知道了",showCancel:!1,success:o});case"990004"==a.code:return void n.showModal({content:"您还没有登陆账号",confirmText:"马上登陆",confirmColor:"#f60",showCancel:!1,success:o});case"020103"==a.code:return void n.showModal({content:a.msg||"支付失败，请稍候重试",confirmColor:"#f60",showCancel:!1,confirmText:"我知道了",success:o});case"020109"==a.code:return void n.showModal({content:"请返回上一页面重新购买！",confirmColor:"#f60",showCancel:!1,confirmText:"我知道了",success:o});case 0!=a.code:return void n.showModal({content:a.msg||"开通失败，请稍候重试",confirmColor:"#f60",showCancel:!1,confirmText:"我知道了",success:o});default:var i=a&&a.data&&a.data.payContent&&JSON.parse(a.data.payContent);if(i&&i.queryContent){var r=i.queryContent;n.requestPayment({timeStamp:r.timeStamp||"",nonceStr:r.nonceStr||"",package:r.package||"",signType:r.signType||"",paySign:r.paySign||"",success:function(e){console.log(316);try{n.redirectTo({url:S.default.paySuccess+"?buyFlag="+t.data.buyFlag})}catch(e){n.redirectTo({url:"/packageA/pages/superMember/paySuccess/index?buyFlag=0"})}},fail:function(t){e.setData({CurrentBtnStatus:"canPay"})}})}else n.showModal({content:"支付失败，请稍候重试",confirmColor:"#f60",confirmText:"我知道了",showCancel:!1,success:o});return}})).catch((function(t){e.setData({CurrentBtnStatus:"canPay"})}))}))},toPay:function(){if("noCanPay"!=this.data.CurrentBtnStatus){this.setData({CurrentBtnStatus:"noCanPay"});switch(this.data.payWay){case"weixinPay":this.wxPay()}}},autoclick:function(e){R("click",{event:e})}})})),window.define("1070",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(56),D=(b=x)&&b.__esModule?b:{default:b};var S=e(17),P=e(25).requestPromise,_=function(e){return P({url:S.quickLogin+"/getSignature.do",data:{miniToken:e},dataType:"json",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"}})};t.exports={payOrder:function(){n.getStorageSync("loginSwitch");var e=n.getStorageSync("quick_miniToken");return e=(e+"").substr(0,32),new Promise((function(t,a){_(e).then((function(e){console.log(e,32);var a={wx_timestamp:e.wxTimestamp,wx_sign:e.wxSign,openId:e.openId,appId:e.appId,clientType:"applet"};t(a)})).catch((function(e){D.default.snBusError("b6"),a(e)}))}))}}})),window.define("1073",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=D(e(1056)),x=D(e(1055));function D(e){return e&&e.__esModule?e:{default:e}}var S=e(77).saSendLog,P=e(25),_=P.requestPromise,k=P.checkLogin;Page({data:{canShow:!1,btnConfig:{text:"免费激活",class:"active"},vipType:"2",xdPrivStatus:"-1",saPgnm:"pgcate=10004;pgtitle=小店承接页"},getButtonConfig:function(){var e="",t=this.data.vipType,a=this.data.xdPrivStatus;switch(!0){case"1"!=t:e="-1";break;case"0"==a:e="1";break;case"1"==a:e="2";break;case"-1"==a:e="0"}return this.data.btnType=e,{0:{text:"系统繁忙，稍后再试",class:"disable"},1:{text:"免费激活",class:"active"},"-1":{text:"开通SUPER立享",class:"active"},2:{text:"逛逛优惠商品",class:"more"}}[e]},btnclick:function(){switch(console.log(this.data.btnType,59),this.data.btnType){case"1":case"2":n.navigateToSmartProgram({appId:"wx8bbc408a183bed10",path:"pages/vip/index/index"});break;case"-1":console.log(76,b.default.payIndex),n.navigateTo({url:b.default.payIndex})}},onLoad:function(e){var t=this;k().then((function(){_({url:x.default.getXdPageParams}).then((function(e){e.xdPrivStatus=0,t.setData(e),t.setData({btnConfig:t.getButtonConfig(),canShow:!0})})).catch((function(e){n.showModal({showCancel:!1,content:"系统繁忙，请稍后重试！",confirmText:"我知道了",success:function(e){e.confirm&&this.onLoad()}})}))})).catch((function(){n.showModal({content:"未获取到登录信息",showCancel:!1,confirmColor:"#f60"})}))},onShow:function(){S("pageview")}})})),window.define("1076",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=k(e(1055)),x=k(e(1056)),D=k(e(54)),S=k(e(1054)),P=e(42),_=k(e(1057));function k(e){return e&&e.__esModule?e:{default:e}}var L=e(25),R=L.requestPromise,A=L.checkLogin,j=e(77).saSendLog;Page({data:{canShow:!1,memberLevel:"1",paidLevelQualificationCode:"1",score:222,limit:86,isCreditScore:1,snprimeBase:"//supervip.suning.com/snprime-web",version:"?v=20181218000406",vipType:"0",tryFlag:"0",canTryUseLevel:"1",ecologyPrice:-1,levelPrice:149,signContractOpen:"0",remainFreePostageCouponNum:"0",isCheck:!0,Price:149,indexRouter:x.default.index,payIndexRouter:x.default.payIndex,agreementRouter:x.default.agreement,saPgnm:"pgcate=10004;pgtitle=试用会员"},onLoad:function(e){var t=this;_.default.init(this),A().then((function(){t.getDfpToken(),R({url:b.default.tryPageConfig,method:"GET"}).then((function(e){console.log(e,"pageConfig"),"514"==e.paidLevelQualificationCode&&(e.paidLevelQualificationCode="1"),t.setData(Object.assign({},t.data,e,{signContractOpen:"0",isCheck:!1}));e.levelPrice,e.ecologyPrice;t.setData({canShow:!0})}))})).catch((function(){n.showModal({content:"未获取到登录信息",showCancel:!1,confirmColor:"#f60"})}))},onShow:function(){j("pageview")},getDfpToken:function(){var e=this;(0,P.getDfpToken)().then((function(t){console.log("getDfpToken",t),e.setData({dfpToken:t})})).catch((function(e){console.log(e)}))},toGetTry:function(){var e=this;if(!(this.data.isCreditScore&&(""===this.data.score||this.data.score<=-1||""===this.data.limit||this.data.score<this.data.limit)||this.data.isDisabled)){var t=this.data,a=t.canTryUseLevel;t.memberLevel<a?n.showModal({title:"",content:"您当前的等级为新人，升级为V1后，运费券将于10分钟内到账。",cancelText:"如何升级",confirmText:"继续申请",confirmColor:"#f60",success:function(t){t.confirm?e.getTry(void 0,void 0,(function(){console.log("自动转正并试用，此版本不做")})):t.cancel&&n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent("http://hc.suning.com/index.htm#/solution?knowledgeId=K15301704360838550")})}}):e.getTry(void 0,void 0,(function(){console.log("自动转正并试用，此版本不做")}))}},bindPhone:function(){var e=x.default.try,t=b.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),a=b.default.ascUrl+"/wap/mobile/check_1.do?nextTargetUrl= "+encodeURIComponent(t);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)})},realNameVerified:function(){var e=x.default.try,t=b.default.snprimeBaseNoiFast+"/m/toMinIpPage.htm?minipRouter="+encodeURIComponent(e),a=b.default.cmsDomain+"/smwap.htm?source=1181&terminal=31&targetUrl= "+encodeURIComponent(t);n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)})},getTry:function(e,t,a){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=this;D.default&&D.default.getTrack?A().then((function(){var a=Object.assign({},{detect:D.default.getTrack(),dfpToken:o.data.dfpToken||"",miniProgramFlag:"1"},e||{});R({url:b.default.signup,method:"GET",data:Object.assign({},a,i),dataType:"json"}).then((function(e){console.log(e,146),new S.default({pageType:"try",res:e,that:o,cb:_.default.show,SpSmsParams:{page:o,phone:e.data||"",callback:function(e){var t=e.success,a=e.code;if(!a)return _.default.setError(r,"请输入短信验证码");t&&(r.getTry({type:2,smsCode:a}),_.default.hide(r))}}})})).catch((function(e){console.log(e,157),n.showModal({showCancel:!1,content:"系统繁忙，请稍后重试！"}),t&&t()}))})).catch((function(e){n.showModal({content:"未获取到登录信息",showCancel:!1,confirmColor:"#f60"})})):n.showModal({showCancel:!1,content:"系统繁忙，请稍后重试！",confirmText:"我知道了",success:function(e){e.confirm&&this.onLoad()}})},buyNow:function(e){var t=this.data,a=t.levelPrice,o=t.ecologyPrice;a<=o&&a>0||a>0&&!(o>0)||o<a&&o>0||o>0&&!(a>0)||n.showModal({content:"系统异常，请稍后重试！",showCancel:!1})},checkboxChange:function(e){console.log(e,96),e.detail.value.length?this.setData({isCheck:!0}):this.setData({isCheck:!1})},reLoadPage:function(){this.onLoad()}})})),window.define("1079",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,text1:"",text2:"",amount:"",shareImg:""},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e&&e.type?this.setData({isMain:!1,type:e.type,cardId:e.cardId,token:e.token}):this.setData({isMain:!0,token:e.token||""})},getCmsData:function(){var e=this,t=S.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({shareImg:"https://image.suning.cn"+t.adPic.tag[0].picUrl,text1:t.shareinfo.tag[9].elementDesc,text2:t.shareinfo.tag[10].elementDesc}),e.getYunCount()}catch(e){}}))},getYunCount:function(){var e=this,t=S.act+"/act-wap-web/monopoly/gateway/getMyTripInfo.do";x({method:"GET",url:t,data:{activityCode:"monopoly"},dataType:"json"}).then((function(t){try{if(t.data.result.allPassGift){var a=t.data.result.allPassGift,o=JSON.parse(a);e.setData({amount:o.amount})}else e.setData({amount:"0"})}catch(t){e.setData({amount:"0"})}e.readyFun()}))},onReady:function(){this.init()},readyFun:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.shareImg,x:0,y:0,width:600,height:901};e.drawImage(t,a,(function(){!function(){var a={content:e.data.text1,size:30,color:"#fff",position:{x:14,y:688}};e.fillText(t,a);var o={content:e.data.text2+e.data.amount+"云钻",size:30,color:"#fff",position:{x:14,y:732}};e.fillText(t,o),n.hideLoading()}()}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){var e=this;D().then((function(){e.getCmsData()})).catch((function(){console.log("未登录")}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("1082",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25).checkLogin,x=e(579);Page({data:{type:"",token:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var n=this;n.getData(e),b().then((function(){console.log("已登录"),n.navigateToH5()})).catch((function(){}))},onReady:function(){},onShow:function(){},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);console.log("scene的值：",t);var a=t.split("?");this.setData({token:a[0],type:a[1]})}else console.log("token的值：",e.token),console.log("type的值：",e.type),this.setData({token:e.token,type:e.type})},navigateToH5:function(){var e=x.friend_card+"changeCard.html?token="+this.data.token+"&type="+this.data.type;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1085",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P={1:"“智慧”碎片",2:"“零售”碎片",3:"“服务”碎片",4:"“优质”碎片",5:"“易购”碎片",6:"“达人”碎片",7:"“生鲜”碎片",8:"“理财”碎片",9:"“平价”碎片"};Page({data:{isMain:!0,token:"",type:"",cardId:"",cardName:"",cardImg:"",cmsShareText:"",cardTitle1:"",cardTitle2:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.setPageData(e),this.getCmsData(),D().then((function(){console.log("已登录")})).catch((function(){}))},onReady:function(){},onShow:function(){},getCmsData:function(){var e=this,t=S.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({cmsShareText:t.shareinfo.tag[3].elementDesc,cardTitle1:t.shareinfo.tag[7].elementDesc,cardTitle2:t.shareinfo.tag[8].elementDesc})}catch(e){}}))},onShareAppMessage:function(){console.log("分享给朋友","");var e="",t="";return this.data.isMain?(e=this.data.cmsShareText||"快来帮我前进，助我瓜分云钻。还有海量优惠送给你",t="/packageA/pages/newfriends/index/index?token="+(this.data.token||"")):(e="1"==this.data.type?"送你一张"+(P[this.data.cardId]||"碎片")+","+(this.data.cardTitle2||"助你赢4999免单"):'送我一张"'+(P[this.data.cardId]||"碎片")+","+(this.data.cardTitle1||"助我赢4999免单"),t="/packageA/pages/newfriends/main/index?token="+this.data.token+"&type="+this.data.type),console.log("分享标题：",e),console.log("分享路径：",t),this.setCardState(),{title:e,imageUrl:"https://oss.suning.com/smcp/smcpgameplatform/friend_mini/share.png",path:t}},setCardState:function(){var e="";e="1"==this.data.type?S.act+"/act-wap-web/greensports/gateway/giveFragment.do":S.act+"/act-wap-web/greensports/gateway/demandFragment.do";var t={activityCode:"greensports",token:this.data.token};x({method:"GET",url:e,dataType:"json",data:t}).then((function(e){try{console.log("赠送、请求接口下发结果：",e)}catch(e){}}))},setPageData:function(e){if(e&&e.type)this.setData({isMain:!1,token:e.token,type:e.type,cardId:e.cardId,cardName:P[e.cardId]||"碎片",cardImg:"https://oss.suning.com/smcp/smcpgameplatform/friend_mini/"+e.cardId+".png"});else{var t="";e&&e.token?t=e.token:e&&e.scene&&(t=decodeURIComponent(e.scene)),this.setData({isMain:!0,token:t,type:""})}},sharePYQ:function(){var e="";e=this.data.isMain?"../save/index?token="+this.data.token:"../save/index?token="+this.data.token+"&type="+this.data.type+"&cardId="+this.data.cardId,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()}})})),window.define("1088",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(579),P=e(8);Page({data:{iphoneXClass:"",token:"",date:"10月31日瓜分",award:"4亿云钻"},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.checkPageLogin(),this.getCmsData(),this.getToken(e),this.getSystemInfo()},onShareAppMessage:function(){},getCmsData:function(){var e=this,t=P.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({date:t.shareAward.tag[0].elementName,award:t.shareAward.tag[0].elementDesc})}catch(e){}}))},checkPageLogin:function(){var e=this;D().then((function(){console.log("已登录"),e.getGiftStatus()})).catch((function(){}))},getGiftStatus:function(){console.log("获取是否处于瓜分状态");var e=P.act+"/act-wap-web/monopoly/gateway/getLastGiftStatus.do";x({method:"GET",url:e,dataType:"json",data:{activityCode:"monopoly"}}).then((function(e){if(console.log("获取是否处于瓜分状态",e),"1"==e.code){var t=S.friend_card+"guafen.html";console.log("瓜分页面H5地址:",t),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)+"&s=1"})}}))},getToken:function(e){if(e){var t="";e.token?t=e.token:e.scene&&(t=decodeURIComponent(e.scene)),this.setData({token:t})}},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){-1!=t.model.search("iPhone X")&&e.setData({iphoneXClass:"iphoneX"})}})},enterGame:function(e){var t="true"==e.currentTarget.dataset.isme,a=S.friend_game+"index.html"+(t?"":"?token="+this.data.token);console.log("我的游戏页面H5地址:",a),n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)+"&s=1"})}})})),window.define("1091",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P={1:"“智慧”碎片",2:"“零售”碎片",3:"“服务”碎片",4:"“优质”碎片",5:"“易购”碎片",6:"“达人”碎片",7:"“生鲜”碎片",8:"“理财”碎片",9:"“平价”碎片"},_="https://oss.suning.com/smcp/smcpgameplatform/friend_mini/";Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,friendTitle1:"",friendTitle2:"",cardTitle1:"",cardTitle2:""},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),this.init(),e&&e.type?this.setData({isMain:!1,type:e.type,cardId:e.cardId,token:e.token}):this.setData({isMain:!0,token:e.token||""})},getCmsData:function(){var e=this,t=S.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({friendTitle1:t.shareinfo.tag[5].elementDesc,friendTitle2:t.shareinfo.tag[6].elementDesc,cardTitle1:t.shareinfo.tag[7].elementDesc,cardTitle2:t.shareinfo.tag[8].elementDesc}),e.readyFun()}catch(e){}}))},onReady:function(){this.getCmsData()},readyFun:function(){n.showLoading();var e=this;console.log(e.data.isMain);var t=n.createCanvasContext("myCanvas"),a={src:_+"img-share2.png",x:0,y:0,width:600,height:901};function o(){var a={src:_+"card"+e.data.cardId+".png",x:225,y:460,width:150,height:150};e.drawImage(t,a,i)}function i(){var a={content:e.data.isMain?e.data.friendTitle1:"1"==e.data.type?"送你一张"+P[e.data.cardId]+",":"送我一张"+P[e.data.cardId]+",",size:30,color:"#fff",position:{x:28,y:688}};e.fillText(t,a);var o={content:e.data.isMain?e.data.friendTitle2:"1"==e.data.type?e.data.cardTitle2:e.data.cardTitle1,size:30,color:"#fff",position:{x:28,y:727}};e.fillText(t,o),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){e.data.isMain?i():o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}}),this.data.isMain||this.setCardState()},setCardState:function(){var e="";e="1"==this.data.type?S.act+"/act-wap-web/greensports/gateway/giveFragment.do":S.act+"/act-wap-web/greensports/gateway/demandFragment.do";var t={activityCode:"greensports",token:this.data.token};x({method:"GET",url:e,dataType:"json",data:t}).then((function(e){try{console.log("赠送、请求接口下发结果：",e)}catch(e){}}))},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a=this,o=S.act+"/act-wap-web/wechat/program/geturl.do";console.log("scene参数值：",a.data.token+(a.data.isMain?"":"?"+a.data.type));var n={};n=a.data.isMain?{page:"packageA/pages/newfriends/index/index",scene:a.data.token||""}:{page:"packageA/pages/newfriends/main/index",scene:a.data.token+"?"+a.data.type},console.log("_data",n),x({method:"GET",url:o,dataType:"json",data:n}).then((function(o){console.log("二维码图片地址：：",o.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),o&&o.data&&o.data.imageUrl){var n={src:o.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};a.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("1094",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{isMain:!0,token:"",type:"",cardId:"",ratio:2,text1:"",text2:"",amount:"",shareImg:""},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e&&e.type?this.setData({isMain:!1,type:e.type,cardId:e.cardId,token:e.token}):this.setData({isMain:!0,token:e.token||""})},getCmsData:function(){var e=this,t=S.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({shareImg:"https://image.suning.cn"+t.adPic.tag[0].picUrl,text1:t.shareinfo.tag[9].elementDesc,text2:t.shareinfo.tag[10].elementDesc}),e.getYunCount()}catch(e){}}))},getYunCount:function(){var e=this,t=S.act+"/act-wap-web/monopoly/gateway/getMyTripInfo.do";x({method:"GET",url:t,data:{activityCode:"monopoly"},dataType:"json"}).then((function(t){try{if(t.data.result.allPassGift){var a=t.data.result.allPassGift,o=JSON.parse(a);e.setData({amount:o.amount})}else e.setData({amount:"0"})}catch(t){e.setData({amount:"0"})}e.readyFun()}))},onReady:function(){this.init()},readyFun:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.shareImg,x:0,y:0,width:600,height:901};e.drawImage(t,a,(function(){!function(){var a={content:e.data.text1,size:30,color:"#fff",position:{x:14,y:688}};e.fillText(t,a);var o={content:e.data.text2+e.data.amount+"云钻",size:30,color:"#fff",position:{x:14,y:732}};e.fillText(t,o),n.hideLoading()}()}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){var e=this;D().then((function(){e.getCmsData()})).catch((function(){console.log("未登录")}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("1097",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,e(8));Page({data:{type:"",token:"",src:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData()},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene);console.log("scene的值：",t);var a=t.split("?");this.setData({type:a[0]||"1",token:a[1]||""})}else console.log("token的值：",e.token),console.log("type的值：",e.type),this.setData({type:e.type||"1",token:e.token||""})},getCmsData:function(){var e=this,t=D.cms+"/api/json/woolwechat.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a="";a="2"==e.data.type?t.wool_helpsrc.tag[0].elementName:t.wool_indexsrc.tag[0].elementName,console.log("跳转src:",a),e.setData({src:a}),e.navigateToH5()}catch(e){}}))},navigateToH5:function(){var e=this.data.src;"2"==this.data.type&&(e=e+"?token="+this.data.token),console.log("最终跳转地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1100",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{type:"",token:"",times:"",amount:"",yun:"",coupon:"",poolType:"",poolDes:"",shareImg:"",shareLongImg:"",shareIcon:"",shareTitle:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.setPageData(e),this.getCmsData(),D().then((function(){console.log("已登录")})).catch((function(){}))},onReady:function(){},onShow:function(){},getCmsData:function(){var e=this,t=S.cms+"/api/json/woolwechat.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t);var a="",o="",n="",i="";"2"==e.data.type?(a=t.wool_x_imgicon.tag[0].picUrl,o=t.wool_x_imgwx.tag[0].picUrl,n=t.wool_x_imgpyq.tag[0].picUrl,i=t.wool_x_des.tag[0].elementName):"3"==e.data.type?(a=t.wool_z_imgicon.tag[0].picUrl,o=t.wool_z_imgwx.tag[0].picUrl,n=t.wool_z_imgpyq.tag[0].picUrl,i=t.wool_z_des.tag[0].elementName):"4"==e.data.type?(a=t.wool_t_imgicon.tag[0].picUrl,o=t.wool_t_imgwx.tag[0].picUrl,n=t.wool_t_imgpyq.tag[0].picUrl,i=t.wool_t_des.tag[0].elementName):(a=t.wool_h_imgicon.tag[0].picUrl,o=t.wool_h_imgwx.tag[0].picUrl,n=t.wool_h_imgpyq.tag[0].picUrl,i=t.wool_h_des.tag[0].elementName),e.setData({shareImg:S.img+o,shareLongImg:S.img+n,shareIcon:S.img+a,shareTitle:i})}catch(e){console.info("error:",e)}}))},onShareAppMessage:function(){console.log("分享给朋友","");var e="",t="";return"1"==this.data.type?(t="/packageA/pages/wool/main/index?type=2&token="+this.data.token,e=this.data.shareTitle):(t="/packageA/pages/wool/main/index?type=1",e=this.data.shareTitle.replace("{{amount}}",this.data.amount)),console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.shareIcon,path:t}},setPageData:function(e){if(e&&e.type){var t=e.poolType||"3",a="";a="4"==t?"云钻":"5"==t?"优惠券":"兑换币",this.setData({type:e.type,token:e.token||"",amount:e.amount||"",times:e.times||"",yun:e.yun||"",coupon:e.coupon||"",poolType:t,poolDes:a})}else this.setData({type:"1",token:"",amount:"",times:"",yun:"",coupon:"",poolType:""})},sharePYQ:function(){var e;e="../save/index?type="+this.data.type+"&token="+this.data.token+"&amount="+this.data.amount+"&poolDes="+encodeURIComponent(this.data.poolDes)+"&shareLongImg="+encodeURIComponent(this.data.shareLongImg)+"&times="+this.data.times+"&yun="+this.data.yun+"&coupon="+this.data.coupon,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()}})})),window.define("1103",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(579),P=e(8);Page({data:{iphoneXClass:"",token:"",date:"10月31日瓜分",award:"4亿云钻"},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.checkPageLogin(),this.getCmsData(),this.getToken(e),this.getSystemInfo()},onShareAppMessage:function(){},getCmsData:function(){var e=this,t=P.cms+"/api/json/friend.json";x({method:"GET",url:t,dataType:"json"}).then((function(t){try{console.log("CMS数据：",t),e.setData({date:t.shareAward.tag[0].elementName,award:t.shareAward.tag[0].elementDesc})}catch(e){}}))},checkPageLogin:function(){var e=this;D().then((function(){console.log("已登录"),e.getGiftStatus()})).catch((function(){}))},getGiftStatus:function(){console.log("获取是否处于瓜分状态");var e=P.act+"/act-wap-web/monopoly/gateway/getLastGiftStatus.do";x({method:"GET",url:e,dataType:"json",data:{activityCode:"monopoly"}}).then((function(e){if(console.log("获取是否处于瓜分状态",e),"1"==e.code){var t=S.friend_card+"guafen.html";console.log("瓜分页面H5地址:",t),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(t)+"&s=1"})}}))},getToken:function(e){if(e){var t="";e.token?t=e.token:e.scene&&(t=decodeURIComponent(e.scene)),this.setData({token:t})}},getSystemInfo:function(){var e=this;n.getSystemInfo({success:function(t){-1!=t.model.search("iPhone X")&&e.setData({iphoneXClass:"iphoneX"})}})},enterGame:function(e){var t="true"==e.currentTarget.dataset.isme,a=S.friend_game+"index.html"+(t?"":"?token="+this.data.token);console.log("我的游戏页面H5地址:",a),n.navigateTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(a)+"&s=1"})}})})),window.define("1106",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{type:"",token:"",amount:"",poolDes:"",shareLongImg:"",times:"",yun:"",coupon:"",ratio:2},onLoad:function(e){try{var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数：",o)}catch(e){}this.getRatio(),this.setPageData(e),this.init()},getRatio:function(){var e=this;n.getSystemInfo({success:function(t){console.info(t.pixelRatio),e.setData({ratio:t.pixelRatio})}})},setPageData:function(e){e&&e.type?(this.setData({type:e.type,token:e.token,amount:e.amount,poolDes:decodeURIComponent(e.poolDes),shareLongImg:decodeURIComponent(e.shareLongImg),times:e.times,yun:e.yun,coupon:e.coupon}),console.info("朋友圈参数信息：",this.data)):console.info("error:","参数错误")},readyFun:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.shareLongImg,x:0,y:0,width:600,height:900};function o(){var a="",o="",n=!1;e.data.times&&(a+="累计瓜分"+e.data.times+"次, "),e.data.amount&&(a+="获得"+e.data.amount+"兑换币"+(e.data.yun||e.data.coupon?", ":""),n=!0),e.data.yun&&(n?o+="云钻"+e.data.yun+"个"+(e.data.coupon?", ":""):a+="云钻"+e.data.yun+"个"+(e.data.coupon?", ":""),n=!0),e.data.coupon&&(n?o+="优惠券"+e.data.coupon+"个":a+="优惠券"+e.data.coupon+"个",n=!0);var i={content:a,size:26,color:"#1F86FB",position:{x:110,y:535}};if(e.fillText(t,i),o){var r={content:o,size:26,color:"#1F86FB",position:{x:110,y:580}};e.fillText(t,r)}}function i(){var a={content:e.data.amount,size:48,color:"#fffb43",position:{x:270,y:535}};e.fillText(t,a);var o=t.measureText(e.data.amount).width,i={content:e.data.poolDes,size:30,color:"#fffb43",position:{x:280+2*o,y:535}};e.fillText(t,i),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){"1"==e.data.type?n.hideLoading():"3"==e.data.type?(o(),n.hideLoading()):i()}))}(t)}))},onShow:function(){},onReady:function(){this.readyFun()},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a=this,o=S.act+"/act-wap-web/wechat/program/geturl.do",n={};n="1"==a.data.type?{page:"packageA/pages/wool/main/index",scene:"2?"+a.data.token}:{page:"packageA/pages/wool/main/index",scene:"1"},console.log("_data",n),x({method:"GET",url:o,dataType:"json",data:n}).then((function(o){console.log("二维码图片地址：：",o.data.imageUrl);if(e.arc(240,382.5,37.5,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),o&&o.data&&o.data.imageUrl){var n={src:o.data.imageUrl.replace("http://","https://"),x:410,y:695,width:140,height:140};a.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)}})})),window.define("1109",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b,x=e(8),D=(b=x)&&b.__esModule?b:{default:b};var S=e(25),P=S.requestPromise,_=S.saSendPageViewLog;i();Page({data:{saPgnm:"pageid=gt0;pgcate=10003;pgtitle=小程序试用首页;",cmsData:{},host:{img:D.default.img},zjmdList:[],goodTab:[],navFixed:!1,allProductList:[],curId:"",toTab:"",contentHeight:0,goodsItemHeight:0,jxGoodsLength:0,otherGood:0,reportData:{}},onLoad:function(e){var t=this;t.initPage(),n.getSystemInfo({success:function(e){t.setData({windowWidth:e.windowWidth}),-1!=e.model.search("iPhone X")&&t.setData({iphoneXClass:"iphoneX"})}})},onReady:function(){},onShow:function(){_()},onHide:function(){},onUnload:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{title:"【苏宁试用】快来跟我一起申请吧",imageUrl:"https://oss.suning.com/tps/share_bucket/page_share.png",path:"/packageA/pages/trialCenter/index/trialCenter"}},initPage:function(){this.initCMS(),this.getWinningList()},initCMS:function(){var e=this;P({method:"GET",url:D.default.cms+"/api/json/shiyongindex.json",dataType:"json"}).then((function(t){try{for(var a=t,o={},n=0;n<a.length;n++)switch(Object.keys(a[n])[0]){case"sy_banner":o.sy_banner=a[n].sy_banner;break;case"sy_zjmd":o.sy_zjmd=a[n].sy_zjmd;break;case"sy_ad":o.sy_ad=a[n].sy_ad;break;case"sy_syxbt":e.getReportDetail(a[n].sy_syxbt);break;case"sy_pro1":o.sy_pro1=a[n].sy_pro1}e.setData({cmsData:o});if(o.sy_pro1){for(var i=0;i<o.sy_pro1.nodes[0].tag.length;i++)o.sy_pro1.nodes[0].tag[i].id="tab-"+(parseInt(i)+1);e.setData({goodTab:[{id:"tab-0",color:"",elementDesc:"",elementName:"精选",elementType:"",linkType:"",linkUrl:"",modelFullId:"",sequence:"",templateFullId:"",trickPoint:""}].concat(o.sy_pro1.nodes[0].tag)}),e.getCarefullyChosenList(o.sy_pro1)}}catch(e){console.log(e)}}))},getCarefullyChosenList:function(e){var t=[];if(e.nodes[0]&&e.nodes[0].nodes[0]&&e.nodes[0].nodes[0].tag)for(var a=e.nodes[0].nodes[0].tag,o=0;o<a.length;o++)t.push(a[o].elementName);var n=D.default.apiDomain+"api/index/batchProductBriefInfoMap/callfunciton1-1-"+t.join(",")+".jsonp",i=this;P({method:"GET",url:n,dataType:"jsonp",jsonpCallback:"callfunciton1"}).then((function(a){for(var o={},n=[],r=0;r<t.length;r++)null!=a.data[""+t[r]]&&n.push(a.data[""+t[r]]);if(0===n.length){var s=i.data.goodTab;s.splice(s.findIndex((function(e){return"tab-0"===e.id})),1),i.setData({goodTab:s})}else o["tab-0"]=n;i.getOtherProductList(e,o)}))},getOtherProductList:function(e,t){for(var a=this,o=[],n=e.nodes[0].tag,i=0;i<n.length;i++)o.push(n[i].elementDesc);var r=D.default.apiDomain+"api/index/batchCategoryProductBriefInfoList/callfunciton2-1-"+o.join(",")+".jsonp";P({method:"GET",url:r,dataType:"jsonp",jsonpCallback:"callfunciton2"}).then((function(e){var o=e.data,n=a.data.goodTab;o.map((function(e,a,o){0===e.length?n.splice(n.findIndex((function(e){return e.id==="tab-"+(parseInt(a)+1)})),1):t["tab-"+(parseInt(a)+1)]=e})),a.setData({goodTab:n,curId:n[0].id,allProductList:t})}))},getWinningList:function(){var e=this;P({method:"GET",url:D.default.apiDomain+"api/index/topChosenFreeTryOrderList/callfunction6.jsonp",dataType:"jsonp"}).then((function(t){e.setData({zjmdList:t.data})}))},getReportDetail:function(e){var t=this,a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e.nodes[0].tag[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var c=r.value;a.push(c.elementName)}}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}var d=D.default.apiDomain+"api/index/batchReportBriefInfoMap/callfunciton5-"+a.join(",")+".jsonp";P({method:"GET",url:d,dataType:"jsonp",jsonpCallback:"callfunciton5"}).then((function(a){e.reportDetail=a.data,t.setData({reportData:e})}))},scrollFunc:function(e){var t=this,a=t.data.cmsData.sy_pro1;null!=a&&0!=a.length&&t.doData((function(){var a=e.detail.scrollTop,o=t.data.contentHeight;a===o||a>o?t.setData({navFixed:!0}):t.setData({navFixed:!1}),t.scrollTab()}))},clickTab:function(e){if(null!=this.data.cmsData.sy_pro1){var t=e.currentTarget.id;this.setData({curId:t}),this.scrollTab()}},jumbToProductDetail:function(e){var t=e.currentTarget.dataset.productid,a=D.default.syDomain+"sy_content.html?productId="+t;n.navigateTo({url:"/pages/webView/index?s=1&webViewSrc="+encodeURIComponent(a)})},scrollTab:function(){var e=this,t=e.data.curId,a=n.createSelectorQuery();a.select("#"+t).boundingClientRect((function(a){var o=a.width,i=e.data.windowWidth-a.right,r=a.left,s=void 0;n.createSelectorQuery().select("#rpx-60").boundingClientRect((function(a){if(s=a.width,i<o+s){var n=parseInt(t.split("-")[1])+1;e.setData({toTab:"tab-"+n})}if(r<o+s){var c=parseInt(t.split("-")[1]);if(c>0){var d=c-1;e.setData({toTab:"tab-"+d})}}})).exec()})),a.exec()},doData:function(e){var t=this;0!=t.data.contentHeight&&e(),n.createSelectorQuery().select("#content").boundingClientRect((function(a){t.setData({contentHeight:a.height}),e()})).exec()}})})),window.define("1112",(function(e,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I,b){"use strict";var x,D=k(e(25)),S=k(e(19)),P=e(8),_=(x=P)&&x.__esModule?x:{default:x};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var L=r();e(77).saSendLog;Page({data:{saPgnm:"pgtitle=searchResult;pgcate=10007;",filterOptions:{keyword:"",cn:"",st:0,cp:0,ps:20,ext:12},totalCount:"1",maxPageSize:0,scrollTopShow:!1,bottomTextShow:!1,shopList:[],loadingShow:!1,searchText:"",imageHost:_.default.res},isReload:!0,cityObj:{},pageName:"searchStore",shopProductError:function(e){var t=e.currentTarget.dataset.item;console.log("店铺主图 - 异常",t),L.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxdpjgy_search",error_code:"ss-wxdpjgy_search-20001",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+t.shopId+"_"+i.getStorageSync("custNo")}),type_name:"店铺商品主图展示异常"})},shopLogoError:function(e){var t=e.currentTarget.dataset.item;console.log("店铺LOGO图片 - 异常",t),L.wechat.store.dispatch.bind(this)("doSnBusError",{bid:"ss-wxdpjgy_search",error_code:"ss-wxdpjgy_search-20002",error_type:2,error_detail:JSON.stringify({errorDesc:"response_"+t.shopId+"_"+i.getStorageSync("custNo")}),type_name:"店铺品牌logo无图片"})},onLoad:function(e){var t=this;S.getLocation().then((function(e){t.cityObj=e,L.wechat.store.dispatch.bind(t)("goSearchStoreResult")})),this.setData({searchText:e.keywords})},tapToTop:function(){clearTimeout(this.scrollTimer),i.pageScrollTo({scrollTop:0})},inputTimer:null,inputText:"",tapTimer:!0,router:"",onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},scrollTimer:null,jumpTimer:null,onPageScroll:function(e){var a=this;clearTimeout(this.scrollTimer),this.scrollTimer=t((function(){e.scrollTop>600?a.setData({scrollTopShow:!0}):a.setData({scrollTopShow:!1})}),50)},onReachBottom:function(){var e=this.data.filterOptions.cp+1;e>this.data.maxPageSize?this.setData({bottomTextShow:!0}):(this.setData({filterOptions:D.extend(this.data.filterOptions,{cp:e})}),L.wechat.store.dispatch.bind(this)("storeSearch",this.data.filterOptions))},secondFilter:function(e){if(this.tapTimer){var t=e.currentTarget.dataset.item,a=this.data.filterOptions.st;console.log("原",a);var o={z:function(){return console.log("z - 0"),"0"},x:function(){return console.log("x - 1"),"1"},m:function(){return console.log("m - 2"),"2"},g:function(){return console.log("g - 3"),"3"}};o[t].bind(this)()!=a&&(this.setData({filterOptions:D.extend(this.data.filterOptions,{st:o[t].bind(this)(),cp:0}),storeList:[]}),L.wechat.store.dispatch.bind(this)("storeSearch",this.data.filterOptions))}},toSearch:function(){i.navigateBack()},toStore:function(e){var a=this;clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){var t=e.currentTarget.dataset.item;console.log(t);var o="/packageE/pages/shop/index/index?shopId="+a.addZero(t.shopId,10);console.log("店铺地址:",o),i.navigateTo({url:o})}),200)},addZero:function(e,t){for(var a=(e+"").length,o="",n=0;n<t-a;n++)o+="0";return o+e},toFourth:function(e){clearTimeout(this.jumpTimer),this.jumpTimer=t((function(){var t=e.currentTarget.dataset.item,a="/pages/fourth/fourth?productId="+t.partnumber+"&shop="+t.storeIdStr;console.log("商品地址:",a),i.navigateTo({url:a})}),200)},onShareAppMessage:function(){}})})),window.define("1115",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25).saSendPageViewLog,x=e(8),D={highRiskAccount:x.aq+"/asc/wap/highrisk/getinfo_1.do",suspectedHighRiskAccount:x.aq+"/asc/wap/highrisk/getinfo_1.do",maliciousRegister:x.aq+"/asc/wap/maliciousreg/getinfo_1.do",suspiciousLogin:x.aq+"/asc/wap/loginpro/getinfo.do"};Page({data:{webViewSrc:"",saPgnm:"pgtitle=webView内嵌页;pgcate=10009;"},onLoad:function(e){e.snapshotId=decodeURIComponent(e.snapshotId),console.log("errorCode: "+e.errorCode),console.log("snapshotId: "+e.snapshotId);var t="suspiciousLogin"==e.errorCode?"targetUrl":"nextTargetUrl",a=D[e.errorCode]+"?ticket="+e.snapshotId+"&"+t+"="+encodeURIComponent("https://sale.suning.com/page/loginVerifySuccess/index.html");b({webViewSrc:encodeURIComponent(a)}),this.setData({webViewSrc:a})}})})),window.define("1118",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},x=(k(e(716)),k(e(56))),D=k(e(78)),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(e(39)),P=e(40),_=e(59);function k(e){return e&&e.__esModule?e:{default:e}}e(38).checkLogin;var L=e(64).requestPromise,R=e(62).requestPromise,A=e(42).getDfpToken,j=e(77).saSendLog,O=e(25),q=O.MD5,M=O.saSendPageViewLog,F=e(16)._snBusError,U=(e(135),e(8)),N=e(17),E=e(36),B=e(47).baseLoginInfo,G=E(n.login),V=E(n.getSetting);function H(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a&&x.default.snBusError(a)}function z(e){var t=parseInt(+new Date/1e3)+1200,a=(e.miniToken+"").substring(0,32);n.setStorageSync("quick_miniToken",a),n.setStorageSync("miniTokenExpired",t),n.setStorageSync("SN_OPENID",e.miniToken.substring(32))}function W(e){if(e&&e.cookie){var t=e.cookie,a=void 0===t?{}:t,o=e.token,i=void 0===o?"":o,r=e.miniToken,s=void 0===r?"":r,c=(0,_.parseCookieObject)(a),d=parseInt(+new Date/1e3)+2592e3;n.setStorageSync("cookieStr",c),n.setStorageSync("cookieObj",a),n.setStorageSync("token",i),n.setStorageSync("cookieExpired",d),s&&"string"==typeof s&&n.setStorageSync("miniToken",(s+"").substr(0,32)),a.custno&&n.setStorageSync("custNo",a.custno);var u=new Date;u.setMinutes(u.getMinutes()+LoginExpiredMinute),n.setStorageSync(LoginExpiredKey,u.getTime()),n.switchTab({url:"/pages/index/index"})}}Page({data:{saPgnm:"pgcate=10004;pgtitle=切换账号",accountTypeName:"",accountList:[],newAccountInfo:{}},onLoad:function(e){M(),"",e.target&&decodeURIComponent(e.target)},onShow:function(){var e=this;S.checkLogin().then((function(t){t.app&&e.getUserAccountList().then((function(t){t&&"success"==t.status&&t.wechatAppletInfoList&&t.wechatAppletInfoList.length&&e.dealUserAccountList(t.wechatAppletInfoList),e.isNewAuth&&e.dealNewChangeAccount()}))}))},dealUserAccountList:function(e){var t=n.getStorageSync("custNo"),a="",o="",i="";e.forEach((function(e){e.custNum==t?a=100000000010==e.appletCustLabelFlag?"临时账号":"正式账号":(o=e.custNum,i=e.aliasName)})),this.setData({accountType:a,targetAccount:o,targetAccountName:i})},getUserAccountList:function(){var e=n.getStorageSync("custNo");return L({url:U.myapi+"/api/mini/queryAppletHeadPicAlias.do",data:{custNum:e,extSystemId:"139000003420",sign:q("custNum"+e+"extSystemId139000003420SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")}})},dealNewChangeAccount:function(){G().then((function(e){var t=e.code;(0,P.apiBaiduUnionAutoLogin2)({code:t}).then((function(e){e.cookie&&W(e)})).catch((function(e){console.log(e,"apiBaiduUnionAutoLogin2 error")}))})).catch((function(e){console.log("9999"),H(e,"网络问题，请稍后再试[E0009]")}))},makeSign:function(e){return q("custNum"+e+"SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")},changeAccount:function(e){var t=this;A().then((function(e){(0,P.apiAccountLoginGetAddress)().then((function(a){G().then((function(o){t.doChangeAccount(e,a,o.code).then((function(e){console.log("autoLogin快速登录的loginRes",e);var a=e||{};if("0"===a.code||0===a.code)t.dealCodeForZero(a);else if(a.loginErr&&a.loginErr.errorCode)t.dealGaoWei(a);else if("MPBSS01"===a.code)V().then((function(e){e.authSetting["scope.userInfo"]?(0,P.apiBaiduUnionAutoLogin2)({code:code}).then((function(e){e.cookie&&(W(e),n.navigateBack())})).catch((function(e){console.log(e,"apiBaiduUnionAutoLogin2 error")})):(t.isNewAuth=!0,n.navigateTo({url:"/pages/auth/auth?auth=newUser"}))})).catch((function(){t.isNewAuth=!0,n.navigateTo({url:"/pages/auth/auth?auth=newUser"})}));else{n.showToast({icon:"none",title:e.msg+"["+e.code+"]"});var o=(0,D.default)()&&(0,D.default)().custLevel||"";F.bizExcp({bid:"wxLogin-qiehuan-20001",error_code:"wxLogin-qiehuan-20001"+e.code,error_detail:JSON.stringify({err_desc:e.msg+"["+e.code+"]"}),error_type:1,member_id:n.getStorageSync("custNo"),member_level:o,region:"",type_name:"checkoutAutoLogin"})}})).catch((function(e){var t=(0,D.default)()&&(0,D.default)().custLevel||"";F.bizExcp({bid:"wxLogin-qiehuan-20001",error_code:"wxLogin-qiehuan-20001Minip0000",error_detail:JSON.stringify({err_desc:"接口异常"}),error_type:1,member_id:n.getStorageSync("custNo"),member_level:t,region:"",type_name:"checkoutAutoLogin"}),console.log("____error in changeAccount ",e)}))}))}))})),j("click",{event:e})},dealGaoWei:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=b(t,1),i=o[0],r=i.loginErr.errorCode,s=i.loginErr.snapshotId;"highRiskAccount"===r||"suspectedHighRiskAccount"===r||"maliciousRegister"===r||"suspiciousLogin"===r?("highRiskAccount"===r&&x.default.snBusError("b7"),"maliciousRegister"===r&&x.default.snBusError("b9"),n.navigateTo({url:"/packageA/pages/riskRelease/riskRelease?errorCode="+r+"&snapshotId="+encodeURIComponent(s)})):H("登陆失败","登录异常，请至PC或APP进行处理")},hasLogin:function(e){var t=!0===e.hasLogin,a=n.getStorageSync("miniTokenExpired"),o=!0;return""!==a&&a>parseInt(+new Date/1e3)&&(o=!1),!(!t||o)},dealCodeForZero:function(){console.log("98888777");for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=b(t,2),i=o[0];o[1];if(!i||!i.miniToken)return H("获取miniToken失败","网络问题，请稍后再试[E0006]","b12");if(z(i),null!==i.cookie&&"true"===i.isBind){try{W(i)}catch(e){H("设置cookie失败","网络问题，请稍后再试[E0007]")}n.switchTab({url:"/pages/index/index"})}else n.navigateTo({url:"/pages/quickLogin/index"})},doChangeAccount:function(e,t,a){var o=this;return new Promise((function(i,r){var s={ip:t||B.ip,sysCode:"baidu_temporary",dfpToken:e||"",loginChannel:B.channel,createSource:B.createSource,rememberMe:"true",code:a,currentNum:n.getStorageSync("custNo"),loginNum:o.data.targetAccount,deviceId:e||"",rememberType:"app"};(0,P.getMiniToken)().then((function(e){s.miniToken=e,R({url:N.baiduUnion.checkoutAutoLogin,data:s,method:"POST"}).then((function(e){i(e)})).catch((function(){r()}))}))}))},noChange:function(e){n.navigateBack(),j("click",{event:e})}})})),window.define("1121",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";Page({data:{},onLoad:function(e){n.removeStorageSync("phoneNumber"),n.removeStorageSync("userInfoSec"),n.removeStorageSync("cookieStr"),n.removeStorageSync("cookieObj"),n.removeStorageSync("token"),n.removeStorageSync("custNo"),n.removeStorageSync("custno"),n.removeStorageSync("cookieExpired"),n.removeStorageSync("userInfo"),n.removeStorageSync("miniToken"),n.removeStorageSync("SN_OPENID"),n.removeStorageSync("quick_cookieStr"),n.removeStorageSync("quick_cookieObj"),n.removeStorageSync("quick_miniToken"),n.swan.switchTab({url:"/pages/index/index"})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("1124",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=(b.checkLogin,b.MD5),S=e(579),P=e(8);Page({data:{pageCode:"",proCustNum:"",subUserId:"",tempCumId:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.getCmsData(),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({pageCode:t[0],proCustNum:t[1],subUserId:t[2]})}else this.setData({pageCode:e.pageCode,proCustNum:e.proCustNum,subUserId:e.subUserId})},queryWeChat:function(){console.info("nskdfjsk");var e=this;x({method:"GET",url:P.myapi+"/api/mini/queryWeChatAppletRelation.do",dataType:"json",data:{custNum:n.getStorageSync("custNo")||"",sign:D("custNum"+(n.getStorageSync("custNo")||"")+"SIGN_SECRET_39685bf3edff4cd895e73ce1e409d8d5")}}).then((function(t){t.wechatAppletInfoList&&t.wechatAppletInfoList.length>0&&("100000000020"==t.wechatAppletInfoList[0].appletCustLabelFlag?e.setData({tempCumId:"2"}):"100000000010"==t.wechatAppletInfoList[0].appletCustLabelFlag?e.setData({tempCumId:"1"}):e.setData({tempCumId:"3"}))})).catch((function(e){console.info(e)}))},onShareAppMessage:function(){console.log("右上角分享","")},getCmsData:function(){var e=P.cms+"/api/json/"+this.data.pageCode+".json";x({method:"GET",url:e,dataType:"json"}).then((function(e){try{console.log("CMS数据：",e),n.setNavigationBarTitle({title:e.jgldx_title.tag[0].elementName})}catch(e){}}))},navigateToH5:function(){var e=S.lightappDomain+this.data.pageCode+".html?pageCode="+this.data.pageCode+"&proCustNum="+this.data.proCustNum+"&subUserId="+this.data.subUserId;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)+"&s=1"})}})})),window.define("1127",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:"",isMain:!0},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){console.log("wwwwwwwwww")},getData:function(e){if(e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0],H5url:t[1]})}else this.setData({activityCode:e.activityCode,H5url:e.H5url})},navigateToH5:function(){var e=b.lightappDomain+this.data.H5url;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)})}})})),window.define("1130",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";e(25).checkLogin;var b=e(579);Page({data:{activityCode:"",H5url:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}this.getData(e),this.navigateToH5()},onReady:function(){},onShow:function(){},getData:function(e){if(console.log(e,"webview"),e.scene){var t=decodeURIComponent(e.scene).split("?");this.setData({activityCode:t[0],inviteCode:t[1],H5url:t[2]})}else this.setData({activityCode:e.activityCode,inviteCode:e.inviteCode,H5url:e.H5url})},navigateToH5:function(){var e=b.lightappDomain+this.data.H5url+"?activityCode="+this.data.activityCode+"&inviteCode="+this.data.inviteCode;console.log("赠送页、索求页H5地址:",e),n.redirectTo({url:"/pages/webView/index?webViewSrc="+encodeURIComponent(e)})}})})),window.define("1133",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8);Page({data:{xcx_bigBg:"",xcx_sharePic:"",xcx_cardPic:"",xcx_savePic:"",activityCode:"",inviteCode:"",H5url:"",shareTitle:"",sharePath:"",savePath:"",sceneKey:""},onLoad:function(e){try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}e?this.setData({activityCode:e.activityCode,inviteCode:e.inviteCode,H5url:e.H5url,sharePath:"/packageA/pages/SuningManor/assist/index?activityCode="+e.activityCode+"&inviteCode="+e.inviteCode+"&H5url="+e.H5url,savePath:"../save1/index?activityCode="+e.activityCode+"&inviteCode="+e.inviteCode+"&H5url="+e.H5url+"&sceneKey="+e.sceneKey,sceneKey:e.sceneKey}):this.setData({activityCode:"",inviteCode:"",H5url:"",sharePath:"",savePath:"",sceneKey:""}),this.checkPageLogin(),this.getCmsData()},onReady:function(){},onShow:function(){},checkPageLogin:function(){D().then((function(){console.log("已登录")})).catch((function(){}))},onShareAppMessage:function(){console.log("分享给朋友","");var e=this.data.shareTitle,t=this.data.sharePath;return console.log("分享标题：",e),console.log("分享路径：",t),{title:e,imageUrl:this.data.xcx_cardPic,path:t}},sharePYQ:function(){var e;e=this.data.savePath,console.log("跳转图片保存页面URL:",e),n.navigateTo({url:e})},sharePy:function(){this.onShareAppMessage()},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{console.log(t);var a=t.snfarm_share,o=[],n={},i={};if(a.tag&&a.tag.length>0){var r=a.tag,s=r[0].elementName,c=r[1].elementName;n[s]=r[0],i[s]=r[1],n[c]=r[0],i[c]=r[1]}if(a.nodes&&a.nodes.length>0)a.nodes.map((function(e,t){if(e.modelFullCode)if(e.modelFullCode.indexOf("add")>0){if(e.tag&&e.tag.length>0){var a=e.modelFullCode;i[a]=e.tag[0]}}else if(e.tag&&e.tag.length>0){var o=e.modelFullCode;n[o]=e.tag[0]}}));console.log(n,i),o.push(n,i);var d=1;e.data.sceneKey&&(d=e.data.sceneKey);var u=o[d];u.share_friendDoc&&e.setData({shareTitle:u.share_friendDoc.elementName}),u.share_FriMidPic&&e.setData({xcx_bigBg:S.img+u.wechat_share_bg.picUrl}),u.share_FriMidPic&&e.setData({xcx_sharePic:S.img+u.share_FriMidPic.picUrl}),u.share_friendCard&&e.setData({xcx_cardPic:S.img+u.share_friendCard.picUrl}),u.share_friendPic&&e.setData({xcx_savePic:S.img+u.share_friendPic.picUrl})}catch(e){}})).catch((function(e){}))}})})),window.define("1136",(function(e,t,a,o,n,i,r,s,c,d,u,l,g,p,h,f,m,w,v,y,C,T,I){"use strict";var b=e(25),x=b.requestPromise,D=b.checkLogin,S=e(8),P=e(9);Page({data:{xcx_bigBg:"",xcx_savePic:"",H5url:"",xcx_saveBtn:"",activityCode:"",ratio:2,sceneKey:""},onLoad:function(e){console.log(P);try{console.log("当前页面参数1：",e);var t=getCurrentPages(),a=t[t.length-1];console.log("当前页面：",a);var o;o=(a=a instanceof Object?a:{}).options instanceof Object?a.options:{},console.log("当前页面参数2：",o)}catch(e){}var i=this;n.getSystemInfo({success:function(e){console.info(e.pixelRatio),i.setData({ratio:e.pixelRatio})}}),e?i.setData({activityCode:e.activityCode,inviteCode:e.inviteCode,H5url:e.H5url,sceneKey:e.sceneKey}):i.setData({activityCode:"",inviteCode:"",H5url:""}),this.init(),i.getCmsData()},onReady:function(){},drawPic:function(){n.showLoading();var e=this,t=n.createCanvasContext("myCanvas"),a={src:e.data.xcx_savePic,x:0,y:0,width:600,height:901};function o(){e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:678}});e.fillText(t,{content:"",size:30,color:"#fff",position:{x:28,y:717}}),n.hideLoading()}e.drawImage(t,a,(function(){!function(t){e.getQrCode(t,(function(){console.log("111"),o()}))}(t)}))},onShow:function(){},saveImg:function(){n.canvasToTempFilePath({canvasId:"myCanvas",destWidth:300*this.data.ratio,destHeight:450*this.data.ratio,success:function(e){var t,a;console.log(e.tempFilePath),t=e.tempFilePath,a={filePath:t,success:function(){n.showToast({title:"保存成功"})},fail:function(e){console.log(e)}},n.saveImageToPhotosAlbum(a)}})},init:function(){D().then((function(){console.log("已登录")})).catch((function(){console.log("未登录")}))},getQrCode:function(e,t){var a,o=this,n=S.act+"/act-wap-web/wechat/program/geturl.do";a={page:"packageA/pages/SuningManor/assist/index",scene:o.data.activityCode+"?"+o.data.inviteCode+"?"+o.data.H5url},console.log("_data",a),x({method:"GET",url:n,dataType:"json",data:a}).then((function(a){console.log("二维码图片地址：：",a.data.imageUrl);if(e.arc(251,357,45,0,2*Math.PI),e.setFillStyle("#fff"),e.fill(),a&&a.data&&a.data.imageUrl){console.log("www");var n={src:a.data.imageUrl.replace("http://","https://"),x:417,y:630,width:170,height:170};o.drawImage(e,n,t)}else t&&t()}))},drawImage:function(e,t,a){n.getImageInfo({src:t.src,success:function(o){console.log(o,11),e.drawImage(o.path,t.x/2,t.y/2,t.width/2,t.height/2),e.draw(!0),a&&a()},fail:function(){a&&a()}})},fillText:function(e,t){e.setFillStyle(t.color),e.setFontSize(t.size/2),e.fillText(t.content,t.position.x/2,t.position.y/2),e.draw(!0)},getCmsData:function(){var e=this,t=S.cms+"/api/json/"+e.data.activityCode+".json";console.log(t),x({method:"GET",url:t,dataType:"json"}).then((function(t){if(t)try{var a=t.snfarm_share,o=[],n={},i={};if(a.tag&&a.tag.length>0){var r=a.tag,s=r[0].elementName,c=r[1].elementName;n[s]=r[0],n[c]=r[1],i[s]=r[0],i[c]=r[1]}if(a.nodes&&a.nodes.length>0)a.nodes.map((function(e,t){if(e.modelFullCode)if(e.modelFullCode.indexOf("add")>0){if(e.tag&&e.tag.length>0){var a=e.modelFullCode;i[a]=e.tag[0]}}else if(e.tag&&e.tag.length>0){var o=e.modelFullCode;n[o]=e.tag[0]}}));console.log(n,i),o.push(n,i);var d=1;e.data.sceneKey&&(d=e.data.sceneKey);var u=o[d];u.wechat_share_bg&&e.setData({xcx_bigBg:S.img+u.wechat_share_bg.picUrl}),u.share_friendCard&&e.setData({xcx_savePic:S.img+u.share_friendCard.picUrl}),u.wechat_share_btn&&e.setData({xcx_saveBtn:S.img+u.wechat_share_btn.picUrl})}catch(e){}e.drawPic()})).catch((function(e){}))}})})),window.__swanRoute="sn-wxminip-components/button/index",window.usingComponents=[],window.usingPluginComponents=[],require("221"),window.__swanRoute="sn-wxminip-components/cservice/index",window.usingComponents=[],window.usingPluginComponents=[],require("227"),window.__swanRoute="packageA/pages/trialCenter/components/bottomNav/bottomNav",window.usingComponents=[],window.usingPluginComponents=[],require("314"),window.__swanRoute="packageA/pages/trialCenter/components/report/report",window.usingComponents=[],window.usingPluginComponents=[],require("316"),window.__swanRoute="packageA/pages/trialCenter/components/advertisement/advertisement",window.usingComponents=[],window.usingPluginComponents=[],require("318"),window.__swanRoute="packageA/pages/trialCenter/components/rollingBulletin/rollingBulletin",window.usingComponents=[],window.usingPluginComponents=[],require("320"),window.__swanRoute="packageA/pages/trialCenter/components/banner/banner",window.usingComponents=[],window.usingPluginComponents=[],require("322"),window.__swanRoute="packageA/pages/superMember/Sp_components/payWay/payWay",window.usingComponents=[],window.usingPluginComponents=[],require("324"),window.__swanRoute="packageA/pages/order/Components/wxGift/giftBox/giftBox",window.usingComponents=[],window.usingPluginComponents=[],require("326"),window.__swanRoute="packageA/pages/order/Components/common/pub4/pub4",window.usingComponents=[],window.usingPluginComponents=[],require("332"),window.__swanRoute="packageA/pages/order/Components/common/pub2/pub2",window.usingComponents=[],window.usingPluginComponents=[],require("335"),window.__swanRoute="packageA/pages/order/Components/common/pub3/pub3",window.usingComponents=[],window.usingPluginComponents=[],require("337"),window.__swanRoute="packageA/pages/order/Components/cart4/reward/reward",window.usingComponents=["packageA/pages/order/Components/common/pub3/pub3"],window.usingPluginComponents=[],require("339"),window.__swanRoute="packageA/pages/order/Components/cart4/header/header",window.usingComponents=[],window.usingPluginComponents=[],require("341"),window.__swanRoute="packageA/pages/order/Components/common/pub5/pub5",window.usingComponents=[],window.usingPluginComponents=[],require("343"),window.__swanRoute="packageA/pages/order/Components/orderList/cancelReason/cancelReason",window.usingComponents=[],window.usingPluginComponents=[],require("345"),window.__swanRoute="packageA/pages/order/Components/orderList/searchError/searchError",window.usingComponents=[],window.usingPluginComponents=[],require("347"),window.__swanRoute="packageA/pages/order/Components/orderList/productsInfo/productsInfo",window.usingComponents=["polyfill/componets/IF/index","polyfill/componets/FILTER/index","pages/ui/popup/popUp"],window.usingPluginComponents=[],require("349"),window.__swanRoute="packageA/pages/order/Components/orderDetail/checkCard/checkCard",window.usingComponents=[],window.usingPluginComponents=[],require("351"),window.__swanRoute="packageA/pages/order/Components/orderDetail/alertBox/alertBox",window.usingComponents=[],window.usingPluginComponents=[],require("353"),window.__swanRoute="packageA/pages/order/Components/orderDetail/orderBtn/orderBtn",window.usingComponents=["packageA/pages/order/Components/wxGift/giftBox/giftBox","polyfill/componets/IF/index","polyfill/componets/FILTER/index","pages/ui/popup/popUp"],window.usingPluginComponents=[],require("355"),window.__swanRoute="packageA/pages/order/Components/orderDetail/footer/footer",window.usingComponents=[],window.usingPluginComponents=[],require("357"),window.__swanRoute="packageA/pages/order/Components/orderDetail/phonePackage/phonePackage",window.usingComponents=[],window.usingPluginComponents=[],require("359"),window.__swanRoute="packageA/pages/order/Components/orderDetail/admissionTicket/admissionTicket",window.usingComponents=[],window.usingPluginComponents=[],require("361"),window.__swanRoute="packageA/pages/order/Components/orderDetail/productsInfo/productsInfo",window.usingComponents=[],window.usingPluginComponents=[],require("363"),window.__swanRoute="packageA/pages/order/Components/orderDetail/overseas/overseas",window.usingComponents=[],window.usingPluginComponents=[],require("365"),window.__swanRoute="packageA/pages/order/Components/orderDetail/bankInformation/bankInformation",window.usingComponents=[],window.usingPluginComponents=[],require("367"),window.__swanRoute="packageA/pages/order/Components/orderDetail/virtualCard/virtualCard",window.usingComponents=[],window.usingPluginComponents=[],require("369"),window.__swanRoute="packageA/pages/order/Components/common/pub1/pub1",window.usingComponents=[],window.usingPluginComponents=[],require("371"),window.__swanRoute="packageA/pages/order/Components/orderDetail/service/service",window.usingComponents=["packageA/pages/order/Components/common/pub1/pub1"],window.usingPluginComponents=[],require("373"),window.__swanRoute="packageA/pages/order/Components/orderDetail/orderStatus/orderStatus",window.usingComponents=[],window.usingPluginComponents=[],require("375"),window.__swanRoute="packageA/pages/order/Components/orderDetail/promotion/promotion",window.usingComponents=[],window.usingPluginComponents=[],require("377"),window.__swanRoute="packageA/pages/cjt/component/bottomBtn",window.usingComponents=[],window.usingPluginComponents=[],require("379"),window.__swanRoute="sn-wxminip-components/official-account/index",window.usingComponents=[],window.usingPluginComponents=[],require("381"),window.__swanRoute="packageA/pages/cjt/component/FK/FK",window.usingComponents=[],window.usingPluginComponents=[],require("383"),window.__swanRoute="packageA/pages/cjt/component/inviteCover",window.usingComponents=[],window.usingPluginComponents=[],require("386"),window.__swanRoute="packageA/pages/internation/components/comLayer/comLayer",window.usingComponents=[],window.usingPluginComponents=[],require("389"),window.__swanRoute="packageA/pages/internation/components/like/like",window.usingComponents=["polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("392"),window.__swanRoute="packageA/pages/internation/components/joinBuy/joinBuy",window.usingComponents=["polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("394"),window.__swanRoute="packageA/pages/internation/components/recommend/recommend",window.usingComponents=[],window.usingPluginComponents=[],require("396"),window.__swanRoute="packageA/pages/internation/components/coupon/coupon",window.usingComponents=[],window.usingPluginComponents=[],require("398"),window.__swanRoute="packageA/pages/internation/components/ad/ad",window.usingComponents=[],window.usingPluginComponents=[],require("400"),window.__swanRoute="packageA/pages/internation/components/newer/newer",window.usingComponents=[],window.usingPluginComponents=[],require("402"),window.__swanRoute="packageA/pages/internation/components/promise/promise",window.usingComponents=[],window.usingPluginComponents=[],require("404"),window.__swanRoute="packageA/pages/internation/components/banner/banner",window.usingComponents=[],window.usingPluginComponents=[],require("406"),window.__swanRoute="packageA/pages/quanSearch/component/carList/carList",window.usingComponents=[],window.usingPluginComponents=[],require("408"),window.__swanRoute="packageA/pages/quanSearch/component/subs/subsCom",window.usingComponents=[],window.usingPluginComponents=[],require("410"),window.__swanRoute="packageA/pages/order/Components/orderList/noOrder/noOrder",window.usingComponents=[],window.usingPluginComponents=[],require("412"),window.__swanRoute="packageA/pages/review/core/components/done/components/empty/empty",window.usingComponents=[],window.usingPluginComponents=[],require("414"),window.__swanRoute="packageA/pages/review/core/components/done/components/no-more/no-more",window.usingComponents=[],window.usingPluginComponents=[],require("416"),window.__swanRoute="packageA/pages/review/core/components/done/components/express/express",window.usingComponents=["packageA/pages/review/core/components/done/components/components/user/user","packageA/pages/review/core/components/done/components/components/star/star","packageA/pages/review/core/components/done/components/components/label/label","packageA/pages/review/core/components/done/components/components/word/word","packageA/pages/review/core/components/done/components/components/person/person","packageA/pages/review/core/components/done/components/components/reward/reward"],window.usingPluginComponents=[],require("418"),window.__swanRoute="packageA/pages/review/core/components/done/components/install/install",window.usingComponents=["packageA/pages/review/core/components/done/components/components/user/user","packageA/pages/review/core/components/done/components/components/star/star","packageA/pages/review/core/components/done/components/components/label/label","packageA/pages/review/core/components/done/components/components/word/word","packageA/pages/review/core/components/done/components/components/person/person","packageA/pages/review/core/components/done/components/components/reward/reward"],window.usingPluginComponents=[],require("420"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/person/person",window.usingComponents=[],window.usingPluginComponents=[],require("422"),window.__swanRoute="packageA/pages/review/core/components/done/components/shop/shop",window.usingComponents=["packageA/pages/review/core/components/done/components/components/user/user","packageA/pages/review/core/components/done/components/components/star/star","packageA/pages/review/core/components/done/components/components/label/label","packageA/pages/review/core/components/done/components/components/word/word","packageA/pages/review/core/components/done/components/components/person/person","packageA/pages/review/core/components/done/components/components/reward/reward"],window.usingPluginComponents=[],require("424"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/reward/reward",window.usingComponents=[],window.usingPluginComponents=[],require("426"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/product/product",window.usingComponents=[],window.usingPluginComponents=[],require("428"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/video/video",window.usingComponents=[],window.usingPluginComponents=[],require("430"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/image/image",window.usingComponents=[],window.usingPluginComponents=[],require("432"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/word/word",window.usingComponents=[],window.usingPluginComponents=[],require("434"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/label/label",window.usingComponents=[],window.usingPluginComponents=[],require("436"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/star/star",window.usingComponents=[],window.usingPluginComponents=[],require("438"),window.__swanRoute="packageA/pages/review/core/components/done/components/components/user/user",window.usingComponents=[],window.usingPluginComponents=[],require("440"),window.__swanRoute="packageA/pages/review/core/components/done/components/product/product",window.usingComponents=["packageA/pages/review/core/components/done/components/components/user/user","packageA/pages/review/core/components/done/components/components/star/star","packageA/pages/review/core/components/done/components/components/label/label","packageA/pages/review/core/components/done/components/components/word/word","packageA/pages/review/core/components/done/components/components/image/image","packageA/pages/review/core/components/done/components/components/video/video","packageA/pages/review/core/components/done/components/components/product/product","packageA/pages/review/core/components/done/components/components/reward/reward"],window.usingPluginComponents=[],require("442"),window.__swanRoute="packageA/pages/review/core/components/done/done",window.usingComponents=["packageA/pages/review/core/components/done/components/product/product","packageA/pages/review/core/components/done/components/shop/shop","packageA/pages/review/core/components/done/components/install/install","packageA/pages/review/core/components/done/components/express/express","packageA/pages/review/core/components/done/components/no-more/no-more","packageA/pages/review/core/components/done/components/empty/empty"],window.usingPluginComponents=[],require("444"),window.__swanRoute="packageA/pages/review/core/components/pending/pending",window.usingComponents=[],window.usingPluginComponents=[],require("446"),window.__swanRoute="packageA/pages/review/list/list",window.usingComponents=[],window.usingPluginComponents=[],require("808"),window.__swanRoute="packageA/pages/review/core/core",window.usingComponents=["packageA/pages/review/core/components/pending/pending","packageA/pages/review/core/components/done/done"],window.usingPluginComponents=[],require("811"),window.__swanRoute="packageA/pages/review/publish/publish",window.usingComponents=[],window.usingPluginComponents=[],require("814"),window.__swanRoute="packageA/pages/review/finish/finish",window.usingComponents=[],window.usingPluginComponents=[],require("817"),window.__swanRoute="packageA/pages/orderRed/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("820"),window.__swanRoute="packageA/pages/orderRed/app/index",window.usingComponents=[],window.usingPluginComponents=[],require("823"),window.__swanRoute="packageA/pages/orderRed/save/index",window.usingComponents=[],window.usingPluginComponents=[],require("826"),window.__swanRoute="packageA/pages/lightapp/mainW20181013/index",window.usingComponents=[],window.usingPluginComponents=[],require("829"),window.__swanRoute="packageA/pages/cutCoupon/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("832"),window.__swanRoute="packageA/pages/cutCoupon/assist/index",window.usingComponents=[],window.usingPluginComponents=[],require("835"),window.__swanRoute="packageA/pages/cutCoupon/app1/index",window.usingComponents=[],window.usingPluginComponents=[],require("838"),window.__swanRoute="packageA/pages/cutCoupon/save1/index",window.usingComponents=[],window.usingPluginComponents=[],require("841"),window.__swanRoute="packageA/pages/alwaysbuy/alwaysbuy",window.usingComponents=[],window.usingPluginComponents=[],require("844"),window.__swanRoute="packageA/pages/alwaysbuy/list",window.usingComponents=[],window.usingPluginComponents=[],require("848"),window.__swanRoute="packageA/pages/quan/quanList",window.usingComponents=[],window.usingPluginComponents=[],require("851"),window.__swanRoute="packageA/pages/quan/quanInfo",window.usingComponents=[],window.usingPluginComponents=[],require("855"),window.__swanRoute="packageA/pages/order/orderList",window.usingComponents=[],window.usingPluginComponents=[],require("858"),window.__swanRoute="packageA/pages/order/orderList/orderList",window.usingComponents=["packageA/pages/order/Components/orderList/productsInfo/productsInfo","packageA/pages/order/Components/orderList/noOrder/noOrder","packageA/pages/order/Components/orderList/cancelReason/cancelReason","packageA/pages/order/Components/common/pub5/pub5","packageA/pages/order/Components/common/pub4/pub4"],window.usingPluginComponents=[],require("861"),window.__swanRoute="packageA/pages/order/orderDetail",window.usingComponents=[],window.usingPluginComponents=[],require("864"),window.__swanRoute="packageA/pages/order/orderSearch",window.usingComponents=[],window.usingPluginComponents=[],require("867"),window.__swanRoute="packageA/pages/order/openPdf",window.usingComponents=[],window.usingPluginComponents=[],require("873"),window.__swanRoute="packageA/pages/order/confirmOrder",window.usingComponents=[],window.usingPluginComponents=[],require("876"),window.__swanRoute="packageA/pages/order/overSeasReal/index",window.usingComponents=[],window.usingPluginComponents=[],require("879"),window.__swanRoute="packageA/pages/order/overSeasReal/addPayer/index",window.usingComponents=[],window.usingPluginComponents=[],require("882"),window.__swanRoute="packageA/pages/order/overSeasReal/seeReal/index",window.usingComponents=[],window.usingPluginComponents=[],require("885"),window.__swanRoute="packageA/pages/platluckdraw/index",window.usingComponents=[],window.usingPluginComponents=[],require("888"),window.__swanRoute="packageA/pages/logistics-new/logistics-new",window.usingComponents=["packageA/pages/order/Components/common/pub4/pub4"],window.usingPluginComponents=[],require("891"),window.__swanRoute="packageA/pages/logistics/logistics",window.usingComponents=[],window.usingPluginComponents=[],require("894"),window.__swanRoute="packageA/pages/quanSearch/search/search",window.usingComponents=["packageA/pages/quanSearch/component/subs/subsCom","packageA/pages/quanSearch/component/carList/carList"],window.usingPluginComponents=[],require("897"),window.__swanRoute="packageA/pages/couponList/couponList",window.usingComponents=[],window.usingPluginComponents=[],require("900"),window.__swanRoute="packageA/pages/order/eExchangeCard/index",window.usingComponents=[],window.usingPluginComponents=[],require("903"),window.__swanRoute="packageA/pages/order/eInvoice/eInvoice",window.usingComponents=[],window.usingPluginComponents=[],require("907"),window.__swanRoute="packageA/pages/order/eInvoice/why",window.usingComponents=[],window.usingPluginComponents=[],require("910"),window.__swanRoute="packageA/pages/internation/internation",window.usingComponents=["packageA/pages/internation/components/banner/banner","packageA/pages/internation/components/promise/promise","packageA/pages/internation/components/newer/newer","packageA/pages/internation/components/ad/ad","packageA/pages/internation/components/coupon/coupon","packageA/pages/internation/components/recommend/recommend","packageA/pages/internation/components/joinBuy/joinBuy","packageA/pages/internation/components/like/like","packageA/pages/internation/components/comLayer/comLayer"],window.usingPluginComponents=[],require("913"),window.__swanRoute="packageA/pages/lottery/lottery",window.usingComponents=[],window.usingPluginComponents=[],require("916"),window.__swanRoute="packageA/pages/lottery/myAward/myAward",window.usingComponents=[],window.usingPluginComponents=[],require("919"),window.__swanRoute="packageA/pages/lottery/address/address",window.usingComponents=[],window.usingPluginComponents=[],require("922"),window.__swanRoute="packageA/pages/superMember/superMember_chanel/superMember_chanel",window.usingComponents=[],window.usingPluginComponents=[],require("926"),window.__swanRoute="packageA/pages/friends/shop/index",window.usingComponents=[],window.usingPluginComponents=[],require("929"),window.__swanRoute="packageA/pages/friends/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("932"),window.__swanRoute="packageA/pages/friends/app/index",window.usingComponents=[],window.usingPluginComponents=[],require("935"),window.__swanRoute="packageA/pages/friends/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("938"),window.__swanRoute="packageA/pages/friends/save/index",window.usingComponents=[],window.usingPluginComponents=[],require("941"),window.__swanRoute="packageA/pages/lightapp/cs2/bridge/bridge",window.usingComponents=[],window.usingPluginComponents=[],require("944"),window.__swanRoute="packageA/pages/lightapp/cs2/middle/middle",window.usingComponents=[],window.usingPluginComponents=[],require("947"),window.__swanRoute="packageA/pages/lightapp/cs2/share/share",window.usingComponents=[],window.usingPluginComponents=[],require("950"),window.__swanRoute="packageA/pages/cjt/index",window.usingComponents=["packageA/pages/cjt/component/bottomBtn","packageA/pages/cjt/component/FK/FK"],window.usingPluginComponents=[],require("953"),window.__swanRoute="packageA/pages/cjt/my/my",window.usingComponents=["packageA/pages/cjt/component/bottomBtn"],window.usingPluginComponents=[],require("956"),window.__swanRoute="packageA/pages/cjt/my/myReward/myReward",window.usingComponents=["packageA/pages/cjt/component/bottomBtn"],window.usingPluginComponents=[],require("959"),window.__swanRoute="packageA/pages/cjt/reward/joinedList/joinedList",window.usingComponents=["packageA/pages/cjt/component/bottomBtn","packageA/pages/cjt/component/inviteCover"],window.usingPluginComponents=[],require("962"),window.__swanRoute="packageA/pages/cjt/lotteryDraw/drawDetails/drawDetail",window.usingComponents=["packageA/pages/cjt/component/inviteCover","packageA/pages/cjt/component/bottomBtn","packageA/pages/cjt/component/FK/FK","sn-wxminip-components/official-account/index"],window.usingPluginComponents=[],require("965"),window.__swanRoute="packageA/pages/cjt/my/address/address",window.usingComponents=["packageA/pages/cjt/component/bottomBtn"],window.usingPluginComponents=[],require("969"),window.__swanRoute="packageA/pages/cjt/my/address/edit/edit",window.usingComponents=["packageA/pages/cjt/component/bottomBtn"],window.usingPluginComponents=[],require("972"),window.__swanRoute="packageA/pages/cjt/flowControl/index",window.usingComponents=[],window.usingPluginComponents=[],require("975"),window.__swanRoute="packageA/pages/trialCenter/middleware/middleware",window.usingComponents=[],window.usingPluginComponents=[],require("978"),window.__swanRoute="packageA/pages/orderRed/save_xcx/index",window.usingComponents=[],window.usingPluginComponents=[],require("981"),window.__swanRoute="packageA/pages/spellbase/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("984"),window.__swanRoute="packageA/pages/spellbase/assist/index",window.usingComponents=[],window.usingPluginComponents=[],require("987"),window.__swanRoute="packageA/pages/spellbase/app1/index",window.usingComponents=[],window.usingPluginComponents=[],require("990"),window.__swanRoute="packageA/pages/spellbase/save1/index",window.usingComponents=[],window.usingPluginComponents=[],require("993"),window.__swanRoute="packageA/pages/flzhs/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("996"),window.__swanRoute="packageA/pages/flzhs/app1/index",window.usingComponents=[],window.usingPluginComponents=[],require("999"),window.__swanRoute="packageA/pages/flzhs/save1/index",window.usingComponents=[],window.usingPluginComponents=[],require("1002"),window.__swanRoute="packageA/pages/sign_in/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("1005"),window.__swanRoute="packageA/pages/sign_in/assist/index",window.usingComponents=[],window.usingPluginComponents=[],require("1008"),window.__swanRoute="packageA/pages/sign_in/exchange/index",window.usingComponents=[],window.usingPluginComponents=[],require("1011"),window.__swanRoute="packageA/pages/sign_in/list/index",window.usingComponents=[],window.usingPluginComponents=[],require("1014"),window.__swanRoute="packageA/pages/sign_in/detail/index",window.usingComponents=[],window.usingPluginComponents=[],require("1017"),window.__swanRoute="packageA/pages/sign_in/app1/index",window.usingComponents=[],window.usingPluginComponents=[],require("1020"),window.__swanRoute="packageA/pages/sign_in/save1/index",window.usingComponents=[],window.usingPluginComponents=[],require("1023"),window.__swanRoute="packageA/pages/order/orderDetail/orderDetail",window.usingComponents=["packageA/pages/order/Components/orderDetail/promotion/promotion","packageA/pages/order/Components/orderDetail/orderStatus/orderStatus","packageA/pages/order/Components/orderDetail/service/service","packageA/pages/order/Components/orderDetail/virtualCard/virtualCard","packageA/pages/order/Components/orderDetail/bankInformation/bankInformation","packageA/pages/order/Components/orderDetail/overseas/overseas","packageA/pages/order/Components/orderDetail/productsInfo/productsInfo","packageA/pages/order/Components/orderDetail/admissionTicket/admissionTicket","packageA/pages/order/Components/orderDetail/phonePackage/phonePackage","packageA/pages/order/Components/orderDetail/footer/footer","packageA/pages/order/Components/orderDetail/orderBtn/orderBtn","packageA/pages/order/Components/common/pub2/pub2","packageA/pages/order/Components/orderDetail/alertBox/alertBox","packageA/pages/order/Components/common/pub3/pub3","packageA/pages/order/Components/orderDetail/checkCard/checkCard","packageA/pages/order/Components/common/pub5/pub5","packageA/pages/order/Components/common/pub4/pub4","polyfill/componets/IF/index","polyfill/componets/FILTER/index"],window.usingPluginComponents=[],require("1026"),window.__swanRoute="packageA/pages/order/orderSearch/orderSearch",window.usingComponents=["packageA/pages/order/Components/orderList/productsInfo/productsInfo","packageA/pages/order/Components/orderList/searchError/searchError","packageA/pages/order/Components/orderList/cancelReason/cancelReason","packageA/pages/order/Components/common/pub5/pub5","packageA/pages/order/Components/common/pub4/pub4"],window.usingPluginComponents=[],require("1029"),window.__swanRoute="packageA/pages/order/receiveDetail/receiveDetail",window.usingComponents=["packageA/pages/order/Components/common/pub4/pub4","packageA/pages/order/Components/common/pub2/pub2"],window.usingPluginComponents=[],require("1032"),window.__swanRoute="packageA/pages/order/cart4/cart4",window.usingComponents=["packageA/pages/order/Components/cart4/header/header","packageA/pages/order/Components/cart4/reward/reward","packageA/pages/order/Components/common/pub2/pub2","packageA/pages/order/Components/common/pub4/pub4","sn-wxminip-components/cservice/index"],window.usingPluginComponents=[],require("1035"),window.__swanRoute="packageA/pages/order/cart4/save/save",window.usingComponents=[],window.usingPluginComponents=[],require("1038"),window.__swanRoute="packageA/pages/order/cart4Gift/cart4Gift",window.usingComponents=["packageA/pages/order/Components/wxGift/giftBox/giftBox"],window.usingPluginComponents=[],require("1041"),window.__swanRoute="packageA/pages/couponList/single/index",window.usingComponents=[],window.usingPluginComponents=[],require("1044"),window.__swanRoute="packageA/pages/order/eInvoice/invoiceImg/invoiceImg",window.usingComponents=[],window.usingPluginComponents=[],require("1047"),window.__swanRoute="packageA/pages/promotion/promotion",window.usingComponents=[],window.usingPluginComponents=[],require("1050"),window.__swanRoute="packageA/pages/superMember/payIndex/index",window.usingComponents=[],window.usingPluginComponents=[],require("1053"),window.__swanRoute="packageA/pages/superMember/paySuccess/index",window.usingComponents=[],window.usingPluginComponents=[],require("1060"),window.__swanRoute="packageA/pages/superMember/invoiceInformation/index",window.usingComponents=[],window.usingPluginComponents=[],require("1063"),window.__swanRoute="packageA/pages/superMember/agreement/index",window.usingComponents=[],window.usingPluginComponents=[],require("1066"),window.__swanRoute="packageA/pages/superMember/payWap/index",window.usingComponents=["packageA/pages/superMember/Sp_components/payWay/payWay"],window.usingPluginComponents=[],require("1069"),window.__swanRoute="packageA/pages/superMember/smallShop/index",window.usingComponents=[],window.usingPluginComponents=[],require("1073"),window.__swanRoute="packageA/pages/superMember/try/index",window.usingComponents=[],window.usingPluginComponents=[],require("1076"),window.__swanRoute="packageA/pages/newfriends/shop/index",window.usingComponents=[],window.usingPluginComponents=[],require("1079");window.__swanRoute="packageA/pages/newfriends/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("1082"),window.__swanRoute="packageA/pages/newfriends/app/index",window.usingComponents=[],window.usingPluginComponents=[],require("1085"),window.__swanRoute="packageA/pages/newfriends/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("1088"),window.__swanRoute="packageA/pages/newfriends/save/index",window.usingComponents=[],window.usingPluginComponents=[],require("1091"),window.__swanRoute="packageA/pages/wool/shop/index",window.usingComponents=[],window.usingPluginComponents=[],require("1094"),window.__swanRoute="packageA/pages/wool/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("1097"),window.__swanRoute="packageA/pages/wool/app/index",window.usingComponents=[],window.usingPluginComponents=[],require("1100"),window.__swanRoute="packageA/pages/wool/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("1103"),window.__swanRoute="packageA/pages/wool/save/index",window.usingComponents=[],window.usingPluginComponents=[],require("1106"),window.__swanRoute="packageA/pages/trialCenter/index/trialCenter",window.usingComponents=["packageA/pages/trialCenter/components/banner/banner","packageA/pages/trialCenter/components/rollingBulletin/rollingBulletin","packageA/pages/trialCenter/components/advertisement/advertisement","packageA/pages/trialCenter/components/report/report","packageA/pages/trialCenter/components/bottomNav/bottomNav"],window.usingPluginComponents=[],require("1109"),window.__swanRoute="packageA/pages/searchStore/store",window.usingComponents=[],window.usingPluginComponents=[],require("1112"),window.__swanRoute="packageA/pages/riskRelease/riskRelease",window.usingComponents=[],window.usingPluginComponents=[],require("1115"),window.__swanRoute="packageA/pages/loginFive/changeAccount/changeAccount",window.usingComponents=["sn-wxminip-components/button/index"],window.usingPluginComponents=[],require("1118"),window.__swanRoute="packageA/pages/loginFive/removeLoginCookie/removeLoginCookie",window.usingComponents=[],window.usingPluginComponents=[],require("1121"),window.__swanRoute="packageA/pages/lightapp/main_hby/index",window.usingComponents=[],window.usingPluginComponents=[],require("1124"),window.__swanRoute="packageA/pages/SuningManor/main/index",window.usingComponents=[],window.usingPluginComponents=[],require("1127"),window.__swanRoute="packageA/pages/SuningManor/assist/index",window.usingComponents=[],window.usingPluginComponents=[],require("1130"),window.__swanRoute="packageA/pages/SuningManor/app1/index",window.usingComponents=[],window.usingPluginComponents=[],require("1133"),window.__swanRoute="packageA/pages/SuningManor/save1/index",window.usingComponents=[],window.usingPluginComponents=[],require("1136")}(__hacked);
//# sourceMappingURL=D:\output\packageA\app.js.map