!function(e){e.global,e.Function,e.setTimeout,e.setInterval,e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis;window.define("19",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Component({properties:{dialogText:{type:Object},confirmBtnClassName:{type:String,value:"theme-btn-primary"},cancelBtnClassName:{type:String,value:"theme-btn-primary_active"},buttonReverse:{type:Boolean,value:!1}},data:{showOptionAdialog:!1,delta:1},methods:{hideOptionDialog:function(){this.setData({showOptionAdialog:!1}),this.triggerEvent("cancel","tapMask")},showOptionDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setData({showOptionAdialog:!0,delta:e})},confirm:function(){this.setData({showOptionAdialog:!1}),this.triggerEvent("confirm",this.data.delta)},cancel:function(){this.setData({showOptionAdialog:!1}),this.triggerEvent("cancel","tapBtn")},emptyEventCallback:function(){}}})})),window.define("156",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.env=a.check=a.format=a.common=a.base=void 0;var S=_(e(157)),N=_(e(158)),O=_(e(159)),x=_(e(160)),C=_(e(161));function _(e){return e&&e.__esModule?e:{default:e}}a.base=S.default,a.common=N.default,a.format=O.default,a.check=x.default,a.env=C.default,a.default={base:S.default,common:N.default,format:O.default,check:x.default,env:C.default}})),window.define("157",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";function S(e){return"[object Object]"===Object.prototype.toString.call(e)}function N(e){return"[object Null]"===Object.prototype.toString.call(e)}function O(e){return Object.prototype.toString.call(e).slice(8,-1)}function x(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function C(e){return void 0===e}function _(e){return"function"==typeof e}function A(e){return"[object String]"===Object.prototype.toString.call(e)}function F(e){return"[object Array]"===Object.prototype.toString.call(e)}function R(e){if(!S(e))return!1;for(var t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){if(!F(e))return"";for(var a=[],i=0;i<e.length;i++)try{a.push(String(e[i]))}catch(e){a.push("[value cannot be serialized]")}return a.join(t)}Object.defineProperty(a,"__esModule",{value:!0});var L=function(e,t){var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var n=0,r=a;n<r.length;n++){var o=r[n];if(e[o]!==t[o])return!1}return!0};a.isPlainObject=S,a.isNull=N,a.dataType=O,a.isError=x,a.isUndefined=C,a.isFunction=_,a.isString=A,a.isArray=F,a.isEmptyObject=R,a.hasKey=E,a.safeJoin=I,a.isShallowEqual=L,a.default={isPlainObject:S,isNull:N,dataType:O,isError:x,isUndefined:C,isFunction:_,isString:A,isArray:F,isEmptyObject:R,hasKey:E,safeJoin:I,isShallowEqual:L}})),window.define("158",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S=a.UUID=function(e,t){void 0===e&&(e=32),void 0===t&&(t=16);for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(e).fill(""),n=0;n<e;n++){var r=Math.floor(Math.random()*t);i[n]=a[r]}return i.join("")},N=a.random6=function(e){return void 0===e&&(e=6),Math.random().toString().substr(2,e)},O=a.objectClearEmpty=function(e){var t={};for(var a in e)(""!==e[a]||Object.keys(e[a]).length)&&(t[a]=e[a]);return t},x=a.objectReorganize=function(e,t){if(!Array.isArray(t))return e;var a={};return t.forEach((function(t){var i,n=[t,t],r=n[0],o=n[1];Array.isArray(t)&&(r=(i=[t[0],t[1]])[0],o=i[1]),a[r]=e[o]||""})),a};a.default={UUID:S,random6:N,objectClearEmpty:O,objectReorganize:x}})),window.define("159",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N=a.isSFNo=function(e){return void 0===e&&(e=""),"string"==typeof e&&/^(([0-9]{12})|(sf[0-9]{13}))$/i.test(e)},O=a.waybillNoGrouping=function(e,t){void 0===e&&(e=""),void 0===t&&(t=3);var a=new RegExp("\\w{1,"+t+"}(?=(\\d{"+t+"})+$)","g");return e.replace(/\s/,"").replace(a,"$& ")},x=a.normalizeSFNo=function(e,t){void 0===t&&(t=!0);var a=e.replace(/[^sf0-9]/gi,"");return t?a.toUpperCase():a},C=a.postCodeGrouping=function(e,t){void 0===t&&(t=3);var a=e.replace(/[^0-9a-zA-Z]/g,"").toLocaleUpperCase().substr(0,11),i=new RegExp("([0-9A-Z]{2})([0-9A-Z]{"+t+"})([0-9A-Z]{"+t+"})([0-9A-Z]{"+t+"})","g");return a.replace(i,"$1 $2 $3 $4")},_=a.telGrouping=function(e,t){return void 0===t&&(t=4),e.replace(new RegExp("([0-9]{"+t+",})","g"),(function(e){return e.split("").reverse().map((function(e,a){return a>0&&a%t==0?e+" ":e})).reverse().join("")}))},A=a.encrypted=function(e,t,a){return void 0===t&&(t=5),void 0===a&&(a=4),"string"==typeof e&&e?e.length<t?e.split("").map((function(){return"*"})).join(""):e.split("").reverse().map((function(e,i){return i>=t-1&&i<t+a-1?"*":e})).reverse().join(""):""},F=a.encryptedName=function(e,t){void 0===t&&(t="*");var a=e.split(""),i=a.length;return i<=1?e:2===i?""+a[0]+t:""+a[0]+t+a[i-1]},R=a.obj2str=function(e){var t=["","?"],a=t[0],i=t[1];if("object"!==(void 0===e?"undefined":S(e))||!Object.keys(e).length)return a;for(var n in e)a+=""+i+n+"="+e[n],i="&";return a},E=a.formatAddress=function(e){var t=e.address,a=e.province.replace("省",""),i=e.city,n=new RegExp(a+"省?(?="+i+")","gim");return a&&i&&(t=t.replace(n,"")),-1!==t.indexOf(e.city)&&(t=t.replace(e.city,"")),-1!==t.indexOf(e.county)&&(t=t.replace(e.county,"")),t},I=a.isInputSpecial=function(e){return void 0===e&&(e=""),e.trim().replace(/(\{)|(\})|(\[)|(\])/g,"")},L=a.desensitization=function(e,t){var a=e.length,i=t.character,n=void 0===i?"*":i,r=t.beginIndex,o=void 0===r?0:r,l=t.endIndex,s=void 0===l?e.length:l,u=t.characterLen,c=e.slice(0,o),d=s>0?e.slice(s,a):e.slice(s);return c+(u&&u>0?n.repeat(u):e.slice(o,s).replace(/[\s\S]/gi,n))+d};a.default={isSFNo:N,waybillNoGrouping:O,normalizeSFNo:x,telGrouping:_,encrypted:A,formatAddress:E,isInputSpecial:I,obj2str:R,encryptedName:F,desensitization:L,postCodeGrouping:C}})),window.define("160",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S=a.isPhone=function(e){return/^((\+?00[- ]?86[- ]?)|(\+?86[- ]?))?1[3|4|5|6|7|8|9]\d{9}$/.test(e)},N=a.isHKMOPhone=function(e){return/^((\+?00[- ]?85[2|3][- ]?)|(\+?85[2|3][- ]?))?[4|5|6|7|8|9]\d{7}$/.test(e)},O=a.isTWPhone=function(e){return/^((\+?00[- ]?886[- ]?)|(\+?886[- ]?))?([0]?9\d{8})$/.test(e)},x=a.isLandline=function(e){return/^((\+?00[- ]?886[- ]?)|(\+?886[- ]?))?(010|02\d|0[3-9]\d{2,3})[- ]?\d{7,8}$/.test(e)},C=a.isHKMOLandline=function(e){return/^((\+?00[- ]?85[2|3][- ]?)|(\+?85[2|3][- ]?))?[2|3]\d{7}$/.test(e)},_=a.isTWLandline=function(e){return/^((\+?00[- ]?886[- ]?)|(\+?886[- ]?))?([0]?\d{1,3})[- ]?\d{7,8}$/.test(e)},A=a.isMail=function(e){e=e.trim();return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,5}$/.test(e)},F=a.isEmojiCharacter=function(e){for(var t=e.trim(),a=0;a<t.length;a++){var i=t.charCodeAt(a),n=t.charCodeAt(a+1);if(i>=55296&&i<=56319){if(t.length>1){var r=1024*(i-55296)+(n-56320)+65536;if(r>=118784&&r<=128895)return!0}}else if(t.length>1){if(8419===n)return!0}else{if(i>=8448&&i<=10239||i>=11013&&i<=11015||i>=10548&&i<=10549||i>=12951&&i<=12953)return!0;if(169===i||174===i||12349===i||12336===i||11093===i||11036===i||11035===i||11088===i)return!0}}return!1},R=a.trimEmojiText=function(e){return e.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\u00A9|\u00AE|\u3030/gi,"")},E=a.trimSpecialText=function(e){return e.replace(/[^\u0020-\u22FF^\u4e00-\u9FFF^\uFF00—\uFFEF]/g,"")},I=a.checkRealName=function(e,t){if(void 0===t&&(t=20),!e)return!1;var a=t,i=e.length>a,n=/[\u4E00-\u9FA5]/g.test(e),r=/[()（）》《?/〈〉，,。@！？#￥%…&\-=+|【】「」|^!“”‘’_]/.test(e),o=/[0-9]/gi.test(e),l=n?/女士|小姐|先生|[a-zA-Z]|\s/.test(e)||e.length<2:/^(mr|miss|mrs)/.test(e.toLowerCase()),s=!n&&!/^\S{2,20}\s\S{2,15}$/.test(e);return!(i||r||o||l||s)},L=a.checkCNIDCard=function(e){if(!e)return!1;return/^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$/.test(e)||/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e)};a.default={isPhone:S,isLandline:x,isHKMOLandline:C,isHKMOPhone:N,isTWPhone:O,isTWLandline:_,isMail:A,isEmojiCharacter:F,trimEmojiText:R,trimSpecialText:E,checkRealName:I,checkCNIDCard:L}})),window.define("161",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S=a.development=function(){return/localhost/g.test(c.hostname)},N=a.alpha=function(){return/sit/g.test(c.hostname)},O=a.production=function(){return/^(ucmp|ucmp-static|ucmp-x|cx-mgr|ump|hub|mp|mpp|www)\.sf-express\.com$/g.test(c.hostname)},x=a.versions=function(){var e=o.navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari"),aliPay:e.indexOf("AlipayClient")>-1}},C=a.getBrowser=function(){var e=o.navigator.userAgent.toLocaleLowerCase(),t="OtherBrowser",a={WeixinBrowser:function(){return e.indexOf("micromessenger")>-1},AlipayBrowser:function(){return e.indexOf("alipay")>-1},UCBrowser:function(){return e.indexOf("UCBrowser")>-1},QQBrowser:function(){return e.indexOf("qqbrowser")>-1},Safari:function(){return e.indexOf("safari")>-1&&-1===e.indexOf("chrome")},Chrome:function(){return e.indexOf("chrome")>-1&&e.indexOf("safari")>-1},IE:function(){return o.ActiveXObject||"ActiveXObject"in o},Firefox:function(){return e.indexOf("firefox")>-1},Opera:function(){return e.indexOf("opera")>-1},Edge:function(){return e.indexOf("edge")>-1}};return Object.keys(a).some((function(e){return!!a[e]()&&(t=e,!0)})),t},_=a.isWeiXin=function(){var e=o.navigator.userAgent.toLowerCase().match(/MicroMessenger/i);return!!e&&"micromessenger"===e[0]},A=a.isALiPay=function(){var e=o.navigator.userAgent.toLowerCase().match(/Alipay/i);return!!e&&"alipay"===e[0]};a.default={development:S,alpha:N,production:O,versions:x,getBrowser:C,isALiPay:A,isWeiXin:_}})),window.define("221",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";var S=e(156);function N(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=e(14),C=e(213),_=e(23),A=e(31).formatOrderStatus,F=e(11),R=e(95),E=e(13),I=e(222).query,L=e(223).cancel,q=e(23).sfSeneorTracksEvent,j=e(32).titleList,U=e(39).localStorageKey,B=(e(12).actualHost,e(164).PICK_UP_TYPE),P=e(224).SCENE_CONSTANT,k={checking:{statusText:"待审核",routerStatusText:"待审核",statusClass:"waybill-waitTake"},checked:{statusText:"已审核",routerStatusText:"已审核：",statusClass:"waybill-waitTake"},waitTake:{statusText:"等待取件",statusClass:"waybill-waitTake"},waitVisit:{statusText:"等待上门",statusClass:"waybill-waitTake"},canceled:{statusText:"已取消",statusClass:"waybill-status"},taked:{statusText:"已揽收",statusClass:"waybill-run-status"},areadyTake:{statusText:"已取件",statusClass:"waybill-run-status"},closed:{statusText:"已关闭",statusClass:"waybill-status"},running:{statusText:"运送中",statusClass:"waybill-run-status"},delivering:{statusText:"派送中",statusClass:"waybill-run-status"},asigned:{statusText:"已签收",statusClass:"waybill-status"},invalid:{statusText:"已作废",statusClass:"waybill-status"},sendback:{statusText:"已退回",statusClass:"waybill-status"},forwarded:{statusText:"已转寄",statusClass:"waybill-run-status"},waitingForPick:{statusText:"待取件",statusClass:"waybill-run-status"},abnormal:{statusText:"异常",statusClass:"waybill-status"},waitingForDeivery:{statusText:"待派送",statusClass:"waybill-run-status"},waitPay:{statusText:"待支付",statusClass:"waybill-run-status"},waitRefund:{statusText:"待退款",statusClass:"waybill-run-status"},refunded:{statusText:"已退款",statusClass:"waybill-run-status"},ordered:{statusText:"预约完成",statusClass:"waybill-run-status"},rejected:{statusText:"已拒单",statusClass:"waybill-run-status"},canOrder:{statusText:"可接单",statusClass:"waybill-run-status"}},V="expectedDeliveryTime",K="appointmentTime",M="endTime",H="/pages/query/order-detail/waybill-detail/waybill-detail",J="/pages/query/order-detail/booking-detail/booking-detail",W="/pages/query/order-detail/cold-detail/cold-detail",$="/pages/query/order-detail/self-send-detail/self-send-detail?appointmentNo=",Q={cancelOrder:{tabFunction:"showCanelDialog",jumpUrl:"",btnText:"取消预约"},cancleSend:{tabFunction:"showCanelDialog",jumpUrl:"",btnText:"取消寄件"},modify:{tabFunction:"",jumpUrl:"",btnText:"更改改派信息"},complaint:{tabFunction:"complaintWaybillHander",jumpUrl:"",btnText:"投诉"},evaluate:{tabFunction:"linkToEvaluate",jumpUrl:"",btnText:"服务评价"},evaluated:{tabFunction:"",jumpUrl:"",btnText:"已评价"},remove:{tabFunction:"showDeleteDialog",jumpUrl:"",btnText:"删除"},pay:{tabFunction:"",jumpUrl:"",btnText:"支付"},closed:{tabFunction:"",jumpUrl:"",btnText:"已关闭"},obsolete:{tabFunction:"",jumpUrl:"",btnText:"已作废"},pickuped:{tabFunction:"",jumpUrl:"",btnText:"已取件"}},G={waybillStatus_0:{detailJumpUrl:H,statusText:k.waitTake,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_2:{detailJumpUrl:H,statusText:k.running,timeOrDescribleTitle:"预计最晚派达时间：",timeOrDescribleDetail:"",timeKey:V,queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_3:{detailJumpUrl:H,statusText:k.delivering,timeOrDescribleTitle:"预计最晚派达时间：",timeOrDescribleDetail:"",timeKey:V,queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_4:{detailJumpUrl:H,statusText:k.asigned,timeOrDescribleTitle:"签收时间：",timeOrDescribleDetail:"",queryRouterFlag:!0,timeKey:M,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[Q.remove]},waybillStatus_5:{detailJumpUrl:"",statusText:k.invalid,timeOrDescribleTitle:"作废时间：",timeOrDescribleDetail:"",timeKey:M,queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_6:{detailJumpUrl:J,statusText:k.canceled,timeOrDescribleTitle:"已失效：",timeOrDescribleDetail:"已取消寄件",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"无",operationBtnArray:[Q.remove]},waybillStatus_8:{detailJumpUrl:H,statusText:k.forwarded,timeOrDescribleTitle:"已转寄：",timeKey:"",queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_9:{detailJumpUrl:H,statusText:k.sendback,timeOrDescribleTitle:"已退回：",timeKey:"",queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_11:{detailJumpUrl:H,statusText:k.waitingForPick,timeOrDescribleTitle:"待取件：",timeKey:"",queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_12:{detailJumpUrl:H,statusText:k.abnormal,timeOrDescribleTitle:"异常：",timeKey:"",queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},waybillStatus_13:{detailJumpUrl:H,statusText:k.waitingForDeivery,timeOrDescribleTitle:"待派送：",timeKey:"",queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_0:{detailJumpUrl:J,statusText:k.waitTake,timeOrDescribleTitle:"预约上门时间：",timeOrDescribleDetail:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_1:{detailJumpUrl:J,statusText:k.waitTake,timeOrDescribleTitle:"待取件：",timeOrDescribleDetail:"下单成功，等待顺丰快递员上门取件",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"待定",operationBtnArray:[]},appointmentStatue_0_T34:{detailJumpUrl:W,statusText:k.checking,latestRoutertext:" ",timeOrDescribleTitle:"下单时间：",timeOrDescribleDetail:"",timeKey:K,queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"待定",operationBtnArray:[Q.cancelOrder]},appointmentStatue_1_T34:{detailJumpUrl:W,statusText:k.checked,latestRoutertext:"如需取消订单，请电话联系本地冷库管理员或拨打9533881",timeOrDescribleTitle:"下单时间：",timeOrDescribleDetail:"",timeKey:K,queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"待定",operationBtnArray:[]},appointmentStatue_5:{detailJumpUrl:H,statusText:k.taked,timeOrDescribleTitle:"揽收时间：",timeOrDescribleDetail:"",queryRouterFlag:!0,timeKey:"receivedTime",waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_7:{detailJumpUrl:J,statusText:k.canceled,timeOrDescribleTitle:"已失效：",timeOrDescribleDetail:"已取消寄件",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"无",operationBtnArray:[Q.remove]},appointmentStatue_10:{detailJumpUrl:J,statusText:k.areadyTake,timeOrDescribleTitle:"预计最晚派达时间：",timeOrDescribleDetail:"",timeKey:V,queryRouterFlag:!0,waybillNoTitle:"运单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_12:{detailJumpUrl:J,statusText:k.closed,timeOrDescribleTitle:"关闭时间：",timeOrDescribleDetail:"",timeKey:M,queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"无",operationBtnArray:[Q.remove]},appointmentStatue_40038:{detailJumpUrl:"",statusText:k.waitTake,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[Q.cancelOrder]},appointmentStatue_40039:{detailJumpUrl:"",statusText:k.waitPay,timeOrDescribleTitle:"",timeOrDescribleDetail:"寄付订单支付后预约快递员上门收件",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[Q.cancelOrder]},appointmentStatue_40040:{detailJumpUrl:"",statusText:k.waitRefund,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_40041:{detailJumpUrl:"",statusText:k.refunded,timeOrDescribleTitle:"退款时间：",timeOrDescribleDetail:"",timeKey:M,queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[Q.remove]},appointmentStatue_40042:{detailJumpUrl:J,statusText:k.canceled,timeOrDescribleTitle:"已失效：",timeOrDescribleDetail:"已取消寄件",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[Q.remove]},appointmentStatue_40043:{detailJumpUrl:"",statusText:k.running,timeOrDescribleTitle:"预计派达时间：",timeOrDescribleDetail:"",queryRouterFlag:!1,timeKey:"",waybillNoTitle:"订单号：",operationBtnArray:[Q.remove]},appointmentStatue_40044:{detailJumpUrl:"",statusText:k.ordered,timeOrDescribleTitle:"完成时间：",timeOrDescribleDetail:"",timeKey:M,queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[Q.remove]},appointmentStatue_40049:{detailJumpUrl:"",statusText:k.rejected,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",waybillNoValue:"",operationBtnArray:[]},appointmentStatue_40050:{detailJumpUrl:"",statusText:k.canOrder,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"订单号：",operationBtnArray:[]},appointmentStatue_defaut:{detailJumpUrl:J,statusText:k.waitVisit,timeOrDescribleTitle:"",timeKey:"",queryRouterFlag:!1,waybillNoTitle:"运单号：",waybillNoValue:"待定",operationBtnArray:[Q.cancelOrder]}},z=[{dataType:0,pageNo:1,pageRows:10},{dataType:1,pageNo:1,pageRows:10}],Y=[{listKey:"mysendList",totalKey:"mySendTotal",currentPageKey:"currentSendpageNo"},{listKey:"myreceiveList",totalKey:"myReceiveTotal",currentPageKey:"currentReceivepageNo"}],Z={mysendList:"mySendTotal",myreceiveList:"myReceiveTotal"},X=["myreceiveList","mysendList"];Page(Object.assign({data:Object.assign({toQueryHistoryFlag:!0,showHistory:!1,historyNos:[],loginUrl:"/pages/common/login/login",dataType:"0",currentSendpageNo:1,currentReceivepageNo:1,mysendList:[],myreceiveList:[],myReceiveTotal:0,mySendTotal:0,showLogin:!1,hasBindmember:!1,bindMobile:"",scrollTopH:0,fixedPadTop:0,fixTopFlag:!1,onloaded:!1,scanFlag:!1,scancomplete:!1,emptyListContent:{login:{mysendEmpty:["点击“寄快递”，开启快递之旅吧"],myreceiveEmpty:["空空如也~"],selfShipEmpty:["空空如也~"]},nologin:{mysendEmpty:["点击登录获取快递最新状态"],myreceiveEmpty:["点击登录获取快递最新状态"],selfShipEmpty:["点击登录获取快递最新状态"]}},querying:!1,curEditAppointmentNO:"",lastQuery:{waybillNo:"",isThirdQuery:!0},flexItemWidth:"",shipDetailUrl:$,currentSelfShipPageNo:1,selfShipTotal:0,selfShipList:[],inputVal:"",loginDialog:{title:"温馨提示",content:"登录后可投诉，前往登录？",cancel:"立即登录",confirm:"暂不登录"}},I.data)},I.methods,{onLoad:function(e){this.app=r(),this.globalData=this.app.globalData,this.init(),this.queryReservationNoList({showLoading:!1})},init:function(){this.initQuery();var e=this;n.getSystemInfo({success:function(t){if(t&&t.windowWidth){var a=.9*t.windowWidth/2;e.setData({sliderOffset:a*parseInt(e.data.dataType),flexItemWidth:a})}}})},initQuery:function(){var e=this,t=this.globalData.queryType||"0";this.setData({dataType:t}),C.isbindMember().then((function(a){var i=a.data;e.data.onloaded=!0;var n=i.obj,r=n&&n.mobile||"",o={hasBindmember:i.success,bindMobile:r,memberId:n&&n.memId||"",memberNo:n&&n.memNo||"",uid:n&&n.wxid||""};e.setData({hasBindmember:o.hasBindmember,bindMobile:o.bindMobile,showLogin:!i.success}),e.app.setBindInfo(o),e.queryData(z[t],!0)}))},onReady:function(){this.getQueryHeight()},onShow:function(){var e=this;if(this.data.scanFlag)this.data.scanFlag=!1,(/^\d{12}$/.test(this.data.inputVal)||/^SF\d{13}$/.test(this.data.inputVal))&&this.data.scancomplete&&(this.data.scancomplete=!1,this.queryWaybillInfo(this.data.inputVal));else if(this.data.onloaded){var t=this.globalData.queryType||(this.globalData.globalRefresh?"0":this.data.dataType);this.setData({dataType:t,sliderOffset:this.data.flexItemWidth*parseInt(t),focus:!this.data.isHideVidate}),C.isbindMember().then((function(a){var i=a.data,n=i.obj,r=n&&n.mobile||"",o={hasBindmember:i.success,bindMobile:r,memberId:n&&n.memId||"",memberNo:n&&n.memNo||"",uid:n&&n.wxid||""},l=e.data,s=l.bindMobile,u=l.hasBindmember;if(o.hasBindmember!==u||o.hasBindmember&&o.bindMobile!==s){var c=!o.hasBindmember;return e.app.setBindInfo(o),e.queryReservationNoList({showLoading:!1}),e.onshowQuery({queryType:t,bindObj:o,showLogin:c,clearFlag:!0}),void e.setData({"lastQuery.isThirdQuery":!0,"lastQuery.waybillNo":""})}if(e.globalData.queryType){var d=Y[e.globalData.queryType],p=d.listKey,y=d.totalKey;0===e.data[p].length&&0!==e.data[y]&&e.queryData(z[t],!0)}else{var m=e.data.showLogin;if(e.globalData.globalRefresh)return e.globalData.globalRefresh=!1,e.queryReservationNoList({showLoading:!1}),void e.onshowQuery({queryType:t,showLogin:m,clearFlag:!0});e.globalData.queryRefresh?e.onshowQuery({queryType:t,showLogin:m,clearFlag:!1}):e.globalData.needUpdateFcList&&e.queryReservationNoList()}}))}n.getClipboardData({success:function(t){var a=t.data.replace(/\s+/g,"").toUpperCase();(/^\d{12}$/.test(a)||/^SF\d{13}$/.test(a))&&a!==n.getStorageSync(U.local_popup_query_waybillno)&&n.showModal({title:"快速查询",content:"运单号："+a,cancelText:"取消",cancelColor:"#999",confirmText:"确定",confirmColor:"#CC3244",success:function(t){n.setStorageSync(U.local_popup_query_waybillno,a),t.confirm&&e.queryWaybillInfo(a)}})},fail:function(e){console.log("getClipboardData fail",e)}}),n.setPageInfo({title:j.query,keywords:"快递,查快递,顺丰",description:"用“顺丰速运”小程序查包裹，物流详情尽在掌握",success:function(){}})},onshowQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,a=void 0===t?"0":t,i=e.bindObj,n=e.showLogin,r=void 0!==n&&n,o=e.clearFlag,l=void 0!==o&&o,s={showLogin:r,queryType:a},u="2"===a?"0":a;if(l){var c=X[u];s[c]=[]}if(i){var d=i.hasBindmember,p=i.bindMobile;s.hasBindmember=d,s.bindMobile=p}this.setData(s),this.queryData(z[u],!0)},getUpdateKey:function(e){return e.listKey+"["+e.listIndex+"]"},showCanelDialog:function(e){var t=e.currentTarget.dataset.btnIndex,a=e.currentTarget.dataset.listIndex,i=e.currentTarget.dataset.operationData,n=i.appointmentNo,r=i.pickupType,o=i.productType,l=i.listKey,s=i.waybillno,u=this.getUpdateKey({listKey:l,listIndex:a});this.setData({dialogText:{content:"是否取消订单？",cancel:"否",confirm:"是"},opData:{appointmentNo:n,pickupType:r,updateListKey:u,btnIndex:t,productType:o,waybillno:s},curEditAppointmentNO:n}),this.selectComponent("#cancel-dialog").showOptionDialog(),q.CancelOrderClick({page_name:"query",order_no:s||n})},showDeleteDialog:function(e){var t=e.currentTarget.dataset.listIndex,a=e.currentTarget.dataset.operationData,i=a.waybillno,n=a.isSend,r=a.waybillStatus,o=a.appointmentStatue,l=a.appointmentNo,s=a.pickupType,u=a.isSender,c=a.listKey;this.setData({dialogText:{content:"是否确认删除？",cancel:"否",confirm:"是"},opData:{waybillno:i,isSend:n,waybillStatus:r,appointmentStatue:o,appointmentNo:l,pickupType:s,isSender:u,listKey:c,listIndex:t}}),this.selectComponent("#delete-dialog").showOptionDialog(),q.DeleteOrderClick({page_name:"query",waybill_no:i||l,user_role:n?"1":"2"})},showDelSelfShipDialog:function(e){var t=e.currentTarget.dataset,a=t.listIndex,i=t.operationData;this.setData({dialogText:{content:"是否确认删除？",cancel:"否",confirm:"是"},opData:{appointmentNo:i,listIndex:a}}),this.selectComponent("#delete-selfship-dialog").showOptionDialog()},gotoWaybillDetail:function(e){var t=e.currentTarget.dataset.operationData,a=t.waybillno,i=t.appointmentNo,r=t.pickupType,o=t.sendEvaluate,l=t.recEvaluate,s=t.originateCityName,u=t.destinationCityName,c=t.isSender,d=t.isSend,p=t.detailJumpUrl,y=t.waybillStatusText,m=t.timeOrDescribleDetail,f=t.extFiled;if(p){var b=this.getUrlParm(p,{waybillno:a,appointmentNo:i,pickupType:r,sendEvaluate:o,recEvaluate:l,originateCityName:d||"17"!==r&&!f.hiddenAddressFlag?s:"***",destinationCityName:d&&("17"===r||f.hiddenAddressFlag)?"***":u,isSender:c,isSend:d,regSource:"queryPage"});q.expressDetailPageView({page_name:b,waybill_no:a||i,waybill_status:y.statusText,user_role:d?"1":"2",visit_src:"3",exp_cnsg_time:m,signin_time:m}),n.navigateTo({url:b})}},waybillEmptyToLogin:function(){n.navigateTo({url:this.data.loginUrl})},getUrlParm:function(e,t){var a="",i=!0,n=!1,r=void 0;try{for(var o,l=Object.keys(t)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=o.value;t[s]&&(a=a+"&"+s+"="+t[s])}}catch(e){n=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}return a=a.substring(1),-1===e.indexOf("?")&&(e+="?"),e+a},cancelConfirm:function(){var e=this.data.opData,t=e.appointmentNo,a=e.pickupType,i=e.updateListKey,r=e.productType,o=e.btnIndex,l=this.data.opData.waybillno,s=this;l=l||"无","T34"===r?L.orderCancel(t).then((function(e){e?s.updateCancelObjData(i,o,l):n.showToast({title:"取消失败",icon:"none"})})).catch((function(e){console.error(e),n.showToast({title:"取消失败",icon:"none"})})):C.cancelOrder({data:{appointmentNo:t,pickupType:a},success:function(){s.updateCancelObjData(i,o,l)},fail:function(){n.showToast({title:"取消失败",icon:"none"})}})},updateCancelObjData:function(e,t,a){var i,r=e+".operationBtnArray["+t+"]",o=e+".waybillStatusText",l=e+".timeOrDescribleDetail",s=e+".timeOrDescribleTitle",u=e+".operationData.appointmentStatue",c=e+".waybillNoValue",d=e+".latestRoutertext";this.setData((O(i={},d,""),O(i,c,a),O(i,r,Q.remove),O(i,o,k.canceled),O(i,s,"已失效："),O(i,l,"已取消寄件"),O(i,u,"7"),i)),n.navigateTo({url:"../../common/cancle-order-option/cancle-order-option?appointmentNo="+this.data.curEditAppointmentNO+"&origin=query"})},deleteConfirm:function(){var e=this,t=this.data.opData,a=t.waybillno,i=t.waybillStatus,r=t.appointmentStatue,o=t.appointmentNo,l=t.pickupType,s=t.isSend,u=t.listKey,c=t.listIndex,d=this,p="",y="",m="0";a&&"10"!==l?"4"!==i&&"2"!==i&&"3"!==i&&"8"!==i&&"9"!==i||(p=a,m=s?"1":"2"):"10"!==l&&"18"!==l||!r||(y=o),"7"!==r&&"12"!==r||(y=o),C.remove({data:{dataWaybillNo:p,dataAppointmentNo:y,deleteType:m},success:function(){var t;n.showToast({title:"删除成功",icon:"success"}),e.data[u].splice(c,1);var a=Z[u];d.setData((O(t={},u,e.data[u]),O(t,a,e.data[a]-1),t))},fail:function(e){n.showToast({title:e,icon:"none"})}})},deleteSelfShip:function(){var e=this,t=this.data.opData,a=t.appointmentNo,i=t.listIndex,r=encodeURI(JSON.stringify({appointmentNo:a,hideFlag:"1"}));x.api({url:R.order.deleteReservationNo+"?jsonStr="+r}).then((function(t){var a=t.data;"true"===a.success||!0===a.success?(n.showToast({title:"删除成功",icon:"success"}),e.data.selfShipList.splice(i,1),e.setData({selfShipList:e.data.selfShipList,selfShipTotal:e.data.selfShipTotal-1})):n.showToast({title:"系统繁忙，请稍后重试!",icon:"none"})})).catch((function(e){n.showToast({title:"系统繁忙，请稍后重试!",icon:"none"})}))},onPageScroll:function(e){var t=e.scrollTop,a=!this.data.onPullDownRefreshFlag&&t>=0,i=this.data.fixTopFlag,n=this.data.scrollTopH||55;a&&(t>=n&&!i||t<n&&i)&&this.setData({fixTopFlag:!i})},getQueryHeight:function(){var e=this;if(!e.data.scrollTopH){var t=n.createSelectorQuery();t.select("#query-head").boundingClientRect(),t.select("#query-fixed").boundingClientRect(),t.exec((function(t){e.setData({scrollTopH:t[0]&&t[0].height,fixedPadTop:t[1]&&t[1].height})}))}},queryData:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setData({onPullDownRefreshFlag:i,querying:!0}),i||n.showLoading({title:"数据加载中..."});var r=this,o=void 0,l=void 0,s=void 0,u=void 0,c=void 0,d=void 0,p=!1;this.getParceList(e).then((function(a){var r=a.data;if(i&&n.stopPullDownRefresh(),r.errCode||r.errorMessage)return p=!0,o=Y[t.data.dataType].listKey,l=Y[t.data.dataType].currentPageKey,u=e.pageNo,[];if(r&&r.obj){var s=r.obj;return o=Y[s.dataType].listKey,l=Y[s.dataType].currentPageKey,c=parseInt(s.myReceiveTotal),d=parseInt(s.mySendTotal),u=s.pageNo,s.dataList.length>0?t.dealWaybillList(s.dataList,o,s.dataType):[]}})).then((function(e){var i,y;(n.hideLoading(),s=a?e:t.data[o].concat(e),p)?a&&r.setData((O(i={},o,s),O(i,l,u),O(i,"myReceiveTotal",0),O(i,"mySendTotal",0),O(i,"onPullDownRefreshFlag",!1),O(i,"querying",!1),i)):r.setData((O(y={},o,s),O(y,l,u),O(y,"myReceiveTotal",c),O(y,"mySendTotal",d),O(y,"onPullDownRefreshFlag",!1),O(y,"querying",!1),y))})).catch((function(){r.setData({onPullDownRefreshFlag:!1,querying:!1}),i?n.stopPullDownRefresh():n.hideLoading()}))},dealWaybillList:function(e,t,a){var i=this,n=[],r=[],o=!0,l=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d.originateCityName=d.originateCityName.split("/")[0]||"暂无信息",d.destinationCityName=d.destinationCityName.split("/")[0]||"暂无信息";var p=d.waybillno,y=d.waybillStatus,m=d.appointmentStatue,f=d.appointmentNo,b=d.pickupType,h=d.sendEvaluate,g=d.recEvaluate,T=d.originateCityName,w=d.destinationCityName,v=d.originateContacts,D=d.destinationContacts,O=d.waybillType,x=d.productType,C=d.empCode,_=d.recEmpCode;"6"===y&&(d.waybillno="无");var A=this.getTemplateItem(d,a),F={waybillNoTitle:A.waybillNoTitle,waybillNoValue:A.waybillNoValue,showCopyIcon:A.showCopyIcon,originateCityName:d.originateCityName,destinationCityName:d.destinationCityName,senderName:v,encryptedSenderName:S.format.desensitization(v,{beginIndex:1}),receiverName:D,encryptedReceiverName:S.format.desensitization(D,{beginIndex:1}),latestRoutertext:A.latestRoutertext||"",timeOrDescribleTitle:A.timeOrDescribleTitle,timeOrDescribleDetail:this.dealTimeOrDescribleDetail(A,d),timeKey:A.timeKey,waybillStatusText:A.statusText,operationBtnArray:[].concat(N(A.operationBtnArray)),empCode:C,recEmpCode:_,operationData:{detailJumpUrl:A.detailJumpUrl,waybillStatusText:A.statusText,timeOrDescribleDetail:this.dealTimeOrDescribleDetail(A,d),isSend:"0"===a,listKey:t,appointmentNo:f,waybillno:p||"",waybillStatus:y,appointmentStatue:m,pickupType:b,waybillType:O,productType:x,sendEvaluate:h,recEvaluate:g,originateCityName:T,destinationCityName:w,isSender:A.isSender,extFiled:d.extFiled}};p&&A.queryRouterFlag&&r.push(p),n.push(F)}}catch(e){l=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(l)throw s}}return 0===r.length?n:i.getExpectedDeliveryTmAndLastRouterByNos(r,a).then((function(e){if(e&&e.data&&e.data.success){var t=e.data.obj.billResults,a=function(e){var t=n.find((function(t){return t.operationData.waybillno===e.waybillNo}));t&&i.dealExpectedDeliveryTmAndLastRouterData(t,e)},r=!0,o=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){a(s.value)}}catch(e){o=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw l}}}return n}))},dealTimeOrDescribleDetail:function(e,t){var a=e.timeOrDescribleDetail,i=e.timeKey;return i===K?"T34"===t.productType?_.formatAppointmentTime({appointmentTime:t.appointmentTime,addHour:0,isformat:!1}):t.expectedTime?_.formatAppointmentTime({appointmentTime:t.expectedTime,addHour:0}):t[i]?_.formatAppointmentTime({appointmentTime:t[i]}):"":t[i]?t[i].substr(0,16):a},getoperationBtnArray:function(e){var t=e.isSend,a=e.isSender,i=e.waybillStatus,n=e.tranfSend,r=e.evaluateFlag,o=[],l=this.data.hasBindmember;this.data.dataType;return r&&o.push(Q.evaluate),"2"===i||"3"===i||"8"===i||"9"===i?"1"!==a&&t||"16"!==n&&"17"!==n||o.push(Q.remove):"4"===i&&l&&o.push(Q.remove),o},judgeEvaluateShow:function(e){var t=0===Number(this.data.dataType),a=e.appointmentStatue,i=e.status,n=e.sendEvaluate,r=e.recEvaluate,o=e.extFiled,l=void 0===o?{}:o,s=e.isSender,u=e.waybillStatus,c=e.pickupType,d=e.waybillType,p=this.data.hasBindmember,y=s&&t?n||"":!t&&r||"",m=!t||!s&&p?t?"":"0":"1",f="1"===m?l.sendSfEvaluate||"":l.recSfEvaluate||"",b=u?"waybillStatus":a||i?"appointmentStatue":"",h=_.jsonStringToObj(l),g=c||d,T={0:{waybillStatus:"4"},1:{waybillStatus:["2","3","4"],appointmentStatue:["5"]}};return!y&&!f&&b&&m&&T[m][b]&&T[m][b].indexOf(u||a||i)>-1&&!h.cityWide&&(g!==B.SF_CABINET_SELF||g===B.SF_CABINET_SELF&&"0"===m)},getTemplateItem:function(e,t){var a=e.waybillno,i=e.appointmentNo,n=e.waybillStatus,r=e.pickupType,o=e.productType,l=e.appointmentStatue,s=e.waybillStatusMessage,u=void 0===s?"":s,c=void 0,d=void 0;if("T34"===o)["2","3","4","5","8","9"].includes(n)?d=G[c="waybillStatus_"+n]:(c="appointmentStatue_"+l,"0"===l||"1"===l?c+="_T34":["7","12"].includes(l)||(c="appointmentStatue_1_T34"),d=G[c],d=Object.assign({},d,{detailJumpUrl:W})),a&&(d=Object.assign({},d,{waybillNoValue:a}));else if(a&&"10"!==r&&"18"!==r){if(!(d=G[c="waybillStatus_"+n])&&(d=G[c="appointmentStatue_"+l],"0"===l||"1"===l)){var p={};p="3"===r?{statusText:k.waitTake,timeOrDescribleTitle:"待取件：",timeOrDescribleDetail:"请自己联系快递员或营业网点寄件",operationBtnArray:[Q.cancleSend]}:{operationBtnArray:[Q.cancelOrder]},d=Object.assign({},d,p)}var y="0"===t,m=this.judgeEvaluateShow(e),f=this.getoperationBtnArray(Object.assign({},e,{evaluateFlag:m,isSend:y})),b={waybillNoValue:a};f.length>0&&(b.operationBtnArray=f),d=Object.assign({},d,b)}else d=G[c="appointmentStatue_"+l],"7"===l||"12"===l?d.waybillNoValue="无":"10"!==r&&"18"!==r||!l?(d=G.appointmentStatue_defaut,"3"===r?d.statusText=k.waitTake:(d.timeOrDescribleTitle="预约上门时间：",d.timeKey=K)):(d||(d=G.appointmentStatue_40042),d.waybillNoValue=i);"18"===r&&d&&d.operationBtnArray.length>0&&(d.operationBtnArray=d.operationBtnArray.filter((function(e){return e.btnText!==Q.cancelOrder.btnText})));var h=a&&(/^\d{12}$/.test(a)||/^SF\d{13}$/.test(a));return(d=Object.assign({},d,{showCopyIcon:h})).statusText.statusText=u||d.statusText.statusText,d},onHide:function(){this.globalData.queryType="",this.globalData.queryRefresh=!1,this.globalData.needUpdateFcList=!1},getParceList:function(e){var t=e.dataType,a=e.pageNo,i=e.pageRows;return x.api({url:F.query.getParceList,data:{dataType:t,pageNo:a,pageRows:i,channelSource:"BDAPP",supportWaybillStatusNew:!0}}).catch((function(){console.error("查单异常")}))},onPullDownRefresh:function(){if(this.data.onPullDownRefreshFlag)n.stopPullDownRefresh();else{n.stopPullDownRefresh();var e="2"===this.data.dataType?"0":this.data.dataType;this.queryData(z[e],!0,!0),this.queryReservationNoList({showLoading:!1})}},onReachBottom:function(){var e=this.data.dataType;if("0"===e){if("0"!==this.data.mySendTotal&&parseInt(this.data.mySendTotal)/10>parseInt(this.data.currentSendpageNo)){var t={dataType:0,pageNo:parseInt(this.data.currentSendpageNo)+1,pageRows:10};this.queryData(t)}}else if("1"===e){if("0"!==this.data.myReceiveTotal&&parseInt(this.data.myReceiveTotal)/10>parseInt(this.data.currentReceivepageNo)){var a={dataType:1,pageNo:parseInt(this.data.currentReceivepageNo)+1,pageRows:10};this.queryData(a)}}else if(0!==this.data.selfShipTotal&&this.data.selfShipTotal/10>parseInt(this.data.currentSelfShipPageNo)){var i=parseInt(this.data.currentSelfShipPageNo)+1;this.queryReservationNoList({currentPage:i})}},changePackageType:function(e){var t=e.currentTarget.dataset.dataType;t!==this.data.dataType&&(this.setData({dataType:t,sliderOffset:e.currentTarget.offsetLeft}),"0"===t?0!==this.data.mySendTotal&&0===this.data.mysendList.length&&this.queryData(z[0]):"1"===t?0!==this.data.myReceiveTotal&&0===this.data.myreceiveList.length&&this.queryData(z[1]):0!==this.data.selfShipTotal&&0===this.data.selfShipList.length&&this.queryReservationNoList())},queryInput:function(e){this.setData({inputVal:e.detail.value})},queryInputFocus:function(){this.setData({showHistory:!0}),this.queryHistory()},hideHistory:function(){this.data.showHistory&&this.setData({showHistory:!1})},clickHistoryWaybillNo:function(e){this.setData({inputVal:e.currentTarget.dataset.waybillNo}),this.queryWaybill()},queryWaybill:function(){this.hideHistory();var e=this.data.inputVal;e&&(e=e.toUpperCase(),/^\d{12}$/.test(e)||/^SF\d{13}$/.test(e)?this.queryWaybillInfo(e):n.showToast({title:"请输入正确运单号",icon:"none"}))},scancode:function(){var e=this;e.data.scanFlag=!0,n.scanCode({success:function(t){var a=void 0;a="QR_CODE"===t.scanType?_.getUrlParm("p1",t.result):t.result||"",e.setData({inputVal:a}),e.data.scanFlag||!/^\d{12}$/.test(a)&&!/^SF\d{13}$/.test(a)||e.queryWaybillInfo(a)},complete:function(){e.data.scancomplete=!0}})},queryWaybillInfo:function(e){this.data.inputVal=e;var t=this.data.lastQuery,a=t.waybillNo,i=t.isThirdQuery;this.hideHistory(),a===e?i?this.setData({isHideVidate:!1,focus:!0}):(this.insertHistoryorder(e),n.navigateTo({url:H+"?waybillno="+e})):(this.data.lastQuery.isThirdQuery=!0,this.data.lastQuery.waybillNo=e,this.initValidData(!0),this.newWaybillSearch())},getExpectedDeliveryTmAndLastRouterByNos:function(e){return x.api({url:F.query.queryExpectedDeliveryTmAndLastRouterByNosUrl,data:{countryCode:"CN",mediaCode:"sc",systemCode:"ccsp",waybillNos:e}}).catch((function(){console.error("查单异常")}))},dealExpectedDeliveryTmAndLastRouterData:function(e,t){t.lastestRouter&&(e.latestRoutertext=t.lastestRouter.remark),e.timeKey===V&&(t.initExpectedDeliveryTm?e.timeOrDescribleDetail=t.initExpectedDeliveryTm.substr(0,16):e.timeOrDescribleDetail="")},copyWaybillNo:function(e){var t=e.currentTarget.dataset.waybillNo;(/^\d{12}$/.test(t)||/^SF\d{13}$/.test(t))&&n.setClipboardData({data:t,success:function(){n.showToast({title:"运单号已复制",icon:"none"})}})},closeCodeBox:function(){this.setData({isHideVidate:!0})},emptyEvent:function(){},queryReservationNoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.currentPage,e.pageRows,e.showLoading},insertHistoryorder:function(e){x.api({url:"/cx-wechat-query/query/history/insert/"+e+"/1/oms",method:"GET"}).catch((function(e){console.log(e)}))},queryHistory:function(){var e=this;this.data.toQueryHistoryFlag&&(this.data.toQueryHistoryFlag=!1,x.api({url:F.query.queryHistoryList,method:"GET"}).then((function(t){var a=t.data;e.data.toQueryHistoryFlag=!0,a.success&&e.setData({historyNos:a.obj||[]})})).catch((function(e){console.log(e)})))},complaintWaybillHander:function(e){var t=this;n.reportAnalytics("click_order_list_complaint_btn");var a={0:this.data.mysendList,1:this.data.myreceiveList}[this.data.dataType][e.target.dataset.listIndex],i=a.waybillNoValue;"0"===this.data.dataType?a.senderName:a.receiverName;x.api({url:E.complaint.queryCheckInitiateJob,method:"GET",data:{waybillNo:i}}).then((function(e){if(e.data.success){var a=e.data.success?e.data.obj:{};if(!0===a.flag&&null===a.jobId){var r=JSON.stringify({waybillNo:i,isSender:"0"===t.data.dataType?"1":"2"}),o="scene="+encodeURIComponent(P.WAYBILL_COMPLAINT.type)+"&param="+r;n.navigateTo({url:"/pages/common/web-view/web-view?"+o})}else n.showToast({title:"系统繁忙，请稍后再试！",icon:"none"})}else{var l={200051:"已超出线上投诉时效，如有问题，请拨打95338"},s=e.data.errorCode&&l[e.data.errorCode]?l[e.data.errorCode]:"系统繁忙，请稍后再试！";n.showToast({title:s,icon:"none"})}})).catch((function(){n.showToast({title:"系统繁忙，请稍后再试！",icon:"none"})}));var r=e.target.dataset.operationData,o=r.waybillno,l=r.appointmentNo,s=r.waybillStatusText,u=r.isSend;q.expressDetailComplainClick({page_name:"query",waybill_no:o||l,waybill_status:A(s?s.statusText:""),user_role:u?"1":"2"})},linkToEvaluate:function(e){n.reportAnalytics("click_order_list_evaluate_btn");var t={0:this.data.mysendList,1:this.data.myreceiveList}[this.data.dataType][e.target.dataset.listIndex],a="0"===this.data.dataType,i=a?"0":"1",r=t.waybillNoValue,o=t.empCode,l=t.recEmpCode,s=t.operationData,u=s.appointmentNo,c=s.extFiled,d=_.jsonStringToObj(c),p=!a&&d.customerPickUp||a&&d.selfSendFlg,y=JSON.stringify({waybillNo:r,evaluationType:i,resourceCode:a?o:l,appointmentNo:u,sendType:i,prePage:"query"}),m="scene="+encodeURIComponent(P.SELF_SEND_GET_EVALUATE.type)+"&param="+y,f="scene="+encodeURIComponent(P.NORMAL_EVALUATE.type)+"&param="+y,b=""+(p?m:f);q.evaluationClick({page_name:"查快递",waybill_no:r,user_role:a?"1":"2"}),n.navigateTo({url:"/pages/common/web-view/web-view?"+b})},toLogin:function(e){"tapBtn"===e.detail&&n.navigateTo({url:this.data.loginUrl})}}))})),window.define("222",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S=e(14),N=e(11),O=e(32).sceneCode,x=e(213).checkBindMember,C="/pages/query/order-detail/waybill-detail/waybill-detail",_={data:{codeValidating:!1,activeIndex:0,code:new Array(4).fill(""),focus:!1,isHideVidate:!0,inputCode:"",inputVal:"",channel:"",isFromTransfer:!1},methods:{codeInput:function(e){if(!this.data.codeValidating){var t=e.detail.value,a=new Array(4).fill("");a.splice.apply(a,[0,t.length].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t)));var i=4===t.length;this.setData({code:a,activeIndex:t.length}),i&&(this.data.codeValidating=!0,this.newWaybillSearch(t))}},inputFocus:function(){this.setData({focus:!this.data.focus})},codeInputblur:function(){this.data.focus&&this.setData({focus:!this.data.focus})},initValidData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setData({isHideVidate:e,activeIndex:0,inputCode:"",focus:!1,code:new Array(4).fill("")})},newWaybillSearch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a={countryCode:"CN",langCode:"sc",language:"zh_CN",mediaCode:"BDAPP",notOmpExpect:!0,waybillNo:this.data.inputVal.toUpperCase(),swanId:""};t&&(a.mobileCode=t);var i=this.data.channel===O.BAIDU_ALADING||this.data.channel===O.BDAPP1,r=function(t,r){n.showLoading({title:"加载中..."}),S.api({url:t,data:r}).then((function(t){var r=t.data;n.hideLoading(),e.data.codeValidating=!1;var o=r.success,l=r.errorCode;if(o){if(e.initValidData(!0),r.obj&&r.obj.barNewList&&r.obj.barNewList.length>0){var s="";x().then((function(t){t?s=C+"?waybillno="+a.waybillNo+"&channel="+e.data.channel:(e.unLoginRoutesDetailCache(r.obj),s=C+"?waybillno="+a.waybillNo+"&mobileCode="+a.mobileCode+"&channel="+e.data.channel),i?n.redirectTo({url:s}):n[e.data.isFromTransfer?"redirectTo":"navigateTo"]({url:s})}))}else e.setData({focus:!1}),n[e.data.isFromTransfer?"redirectTo":"navigateTo"]({url:C})}else{switch(l){case"40040":if(e.setData({isHideVidate:!1,focus:!0}),i)return;break;case"40041":if(e.initValidData(),n.showToast({title:"输入号码有误",icon:"none"}),i)return;break;case"40042":if(n[e.data.isFromTransfer?"redirectTo":"navigateTo"]({url:C}),i)return;break;case"401":case"601":e.initValidData(),n.showToast({title:"系统繁忙，请稍后再试！",icon:"none"});break;default:if(n[e.data.isFromTransfer?"redirectTo":"navigateTo"]({url:C}),i)return}i&&n.switchTab({url:"/pages/tabBar/query/query"})}})).catch((function(t){e.data.codeValidating=!1,n.hideLoading(),console.error(t),n[e.data.isFromTransfer?"redirectTo":"navigateTo"]({url:C})}))};x().then((function(i){i?r(N.query.newWaybillSearch,a):n.getSwanId({success:function(e){a.swanId=e.data.swanid||""},complete:function(){t?r(N.query.newWaybillSearchForBdMini,a):e.setData({isHideVidate:!1,focus:!0})}})}))},unLoginRoutesDetailCache:function(e){e&&Object.keys(e).length>0&&(this.globalData.unLoginRoutesDetail=e)}}};a.query=_})),window.define("223",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var S=e(95),N=e(14),O=e(39).localStorageKey;var x={computeLoadFee:function(e){var t=3*e/100;return t<30&&(t=30),Math.round(t)},computeUnloadFee:function(e){var t=3*e/100;return t<30&&(t=30),Math.round(t)},computeSpecialStoreFee:function(e){var t=.2*e;return t<200&&(t=200),t>800&&(t=800),Math.round(t)}},C={orderCancel:function(e){return new Promise((function(t){N.api({url:S.order.cancelColdOrder,data:{erpOrder:e}}).then((function(e){return"200"===e.data.code?t(!0):t(!1)})).catch((function(){return t(!1)}))}))}},_={checkSendAndReceiveIsOneCity:function(e,t){if("cold_send"!==e&&"cold_receive"!==e)return!0;if(!t||!t.province||!t.city)return!0;var a="";"cold_send"===e?a=O.local_cold_receive_address:"cold_receive"===e&&(a=O.local_cold_send_address);var i=n.getStorageSync(a);return!i||(i=JSON.parse(i)).province!==t.province||i.city!==t.city}};a.feeService=x,a.cancel=C,a.coldAddressUtil=_})),window.define("224",(function(e,t,a,i,n,r,o,l,s,u,c,d,p,y,m,f,b,h,g,T,w,v,D){"use strict";t.exports={SCENE_CONSTANT:{SERVICE_SITE_EVALUATION:{type:"service-site-evaluation",title:"服务评价",canShare:!1},ORDER_RED_PACKET:{type:"order-red-packet",title:"顺丰红包",canShare:!0},GIFT_SENDING:{type:"gift-sending",title:"无忧送礼",canShare:!0},GIFT_RECORD:{type:"gift-record",title:"礼物记录",canShare:!0},GET_GIFT:{type:"get-gift",title:"领礼物",canShare:!0},SF_FOUNDATION:{type:"sf-foundation",title:"丰益行动",canShare:!0},FOUNDATION_SHARE:{type:"foundation-share",title:"公益分享",canShare:!0},FOUNDATION_EXPRESS:{type:"foundation-express",title:"公益寄件",canShare:!0},SELF_SEND_GET_EVALUATE:{type:"self-send-get-evaluate",title:"",canShare:!1},NORMAL_EVALUATE:{type:"normal-evaluate",title:"",canShare:!1},WAYBILL_COMPLAINT:{type:"waybill-complaint",title:"",canShare:!1},GIFT_CARD:{type:"gift-card",title:"",canShare:!0},GROUP_ACTIVITY:{type:"group-activity",title:"",canShare:!0},SPRING_FESTIVAL_COLLECT:{type:"spring-festival-collect",title:"",canShare:!0},HIGH_END_AD:{type:"high-end-ad",title:"",canShare:!1},DELIVERY_APPOINT:{type:"delivery-appoint",title:"",canShare:!1},FEE_DETAIL:{type:"fee-detail",title:"",canShare:!1},SFC_GIFT:{type:"sfcgift",title:"",canShare:!0},AUTH_ID:{type:"auth-id",title:"",canShare:!1},ABNORMITY:{type:"abnormity",title:"",canShare:!1},ABNORMITY_CANCEL:{type:"abnormity-cancel",title:"",canShare:!1},MONTH_CARD:{type:"month-card",title:"",canShare:!1},REVERSE_SEND_ACTIVITY:{type:"reverse-send-activity",title:"",canShare:!1},ADD_SERVICE_EXPLAIN:{type:"add-service-explain",title:"",canShare:!1},CITYWIDE_CANCEL_RULE:{type:"citywide-cancel-rule",title:"",canShare:!1},IBU_ORDER:{type:"ibu-order",title:"",canShare:!1},MY_POINTS:{type:"my-points",title:"",canShare:!1}}}})),window.__swanRoute="components/option-dialog/option-dialog",window.usingComponents=[],window.usingPluginComponents=[],require("19"),window.__swanRoute="pages/tabBar/query/query",window.usingComponents=["components/alert-dialog/alert-dialog","components/option-dialog/option-dialog"],window.usingPluginComponents=[],require("221")}(__hacked);
//# sourceMappingURL=/output/pages/tabBar/query/query.js.map