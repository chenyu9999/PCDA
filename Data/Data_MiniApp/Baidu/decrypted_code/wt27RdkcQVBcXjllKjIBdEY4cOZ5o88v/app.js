var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(t){t.global,t.Function;var e=t.setTimeout,a=t.setInterval;t.setImmediate,t.requestAnimationFrame,t.swanGlobal,t.jsNative,t.masterManager,t._openSourceDebugInfo,t.System,t.Bdbox_aiapps_jsbridge,t.Bdbox_android_jsbridge,t.Bdbox_android_utils,t._naFile,t._naInteraction,t._naNetwork,t._naRouter,t._naSetting,t._naStorage,t._naUtils,t.globalThis;window.define("utils/ga",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function S(t){this.app=t,this.systemInfo=O(),this.trackers=[],this.appName="Mini Program",this.appVersion="unknow",this.log=!0;var e,a,n,o=i.getStorageSync("_ga_cid")||!1;o||(o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),i.setStorageSync("_ga_cid",o)),this.cid=o,this.userAgent=(e=this.systemInfo,a=e.system.toLowerCase().indexOf("android")>-1,n=!a&&-1==e.model.toLowerCase().indexOf("iphone"),a?"Mozilla/5.0 (Linux; U; "+e.system+"; "+e.model+" Build/000000) AppleWebKit/537.36 (KHTML, like Gecko)Version/4.0 Chrome/49.0.0.0 Mobile Safari/537.36 MicroMessenger/"+e.version:n?"Mozilla/5.0 (iPad; CPU OS "+e.system.replace(/^.*?([0-9.]+).*?$/,(function(t,e){return e})).replace(/\./g,"_")+" like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/10A406 MicroMessenger/"+e.version:"Mozilla/5.0 (iPhone; CPU iPhone OS "+e.system.replace(/^.*?([0-9.]+).*?$/,(function(t,e){return e})).replace(/\./g,"_")+" like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 MicroMessenger/"+e.version);var r=this.systemInfo.pixelRatio;this.sr=function(t,e,a){!(a.system.toLowerCase().indexOf("android")>-1)&&a.model.toLowerCase().indexOf("iphone");return[t,e].join("x")}(Math.round(this.systemInfo.windowWidth*r),Math.round(this.systemInfo.windowHeight*r),this.systemInfo),this.vp=[this.systemInfo.windowWidth,this.systemInfo.windowHeight].map((function(t){return t})).join("x")}function C(t){return String(t).replace(/^&/,"")}function P(t,e){this.ga=t,this.trackerServer="https://www.google-analytics.com",this.hit={tid:e||"",cd:""},this.next_hit={},this.sending=!1,this.send_queue=[]}function F(){this.hit={t:"screenview",ni:0},this.custom_dimensions=[],this.custom_metrics=[],this.next_impression_index=1,this.impression_product_list={},this.next_product_index=1,this.next_promotion_index=1}function k(t,e,a){t.hit[e]==a&&delete t.hit[e]}function I(){F.call(this),this.setHitType("screenview")}function A(){F.call(this),this.setHitType("event"),this.setAll({ec:"",ea:"",el:"",ev:0})}function E(){F.call(this),this.setHitType("social"),this.setAll({sn:"",sa:"",st:""})}function L(){F.call(this),this.setHitType("exception"),this.setAll({exd:"",exf:1})}function H(){F.call(this),this.setHitType("timing"),this.setAll({utc:"",utv:"",utt:0,utl:""})}function R(){this.hit={}}function M(){this.hit={}}function j(t){this.hit={pa:t}}function q(){this.params={},this.params_map={utm_source:"cs",utm_medium:"cm",utm_term:"ck",utm_content:"cc",utm_campaign:"cn",gclid:"gclid"}}function z(t){var e=q.parseFromUrl(t),a=e.params_map,n={};for(var o in e.params)n[a[o]]=e.params[o];return n}S.prototype.setAppName=function(t){return this.appName=t,this},S.prototype.setAppVersion=function(t){return this.appVersion=t,this},S.prototype.getDefaultTracker=function(){return this.trackers[0]},S.prototype.newTracker=function(t){var e=new P(this,t);return this.trackers.push(e),e},S.prototype.setLog=function(t){return this.log=!!t,this},P.prototype.setTrackerServer=function(t){return this.trackerServer=t,this},P.prototype.get=function(t){return this.hit[C(t)]},P.prototype.set=function(t,e){return this.hit[C(t)]=e,this},P.prototype.setAnonymizeIp=function(t){return this.set("aip",t?1:0)},P.prototype.setAppId=function(t){return this.set("aid",t)},P.prototype.setAppInstallerId=function(t){return this.set("aiid",t)},P.prototype.setAppName=function(t){return this.set("an",t)},P.prototype.setAppVersion=function(t){return this.set("av",t)},P.prototype.setCampaignParamsOnNextHit=function(t){var e=z(t);for(var a in this.next_hit={},e)this.next_hit[a]=e[a];return this},P.prototype.setClientId=function(t){return this.set("cid",t)},P.prototype.setEncoding=function(t){return this.set("de",t)},P.prototype.setLanguage=function(t){return this.set("ul",t)},P.prototype.setLocation=function(t){return this.set("geoid",t)},P.prototype.setScreenColors=function(t){return this.set("sd",t)},P.prototype.setScreenName=function(t){return this.set("cd",t)},P.prototype.setScreenResolution=function(t,e){return this.set("sr",[t,e].join("x"))},P.prototype.setViewportSize=function(t){return this.set("vp",t)},P.prototype.send=function(t){return this.send_queue_push(this.ga,t),this},P.prototype.send_queue_push=function(t,e){var a=this,n={v:1,cid:t.cid,ds:"app",ul:t.systemInfo.language,de:"UTF-8",sd:"24-bit",je:0,an:t.appName,av:t.appVersion,sr:t.sr,vp:t.vp,ua:t.userAgent};for(var o in a.hit)n[o]=a.hit[o];for(var o in a.next_hit)n[o]=a.next_hit[o];for(var o in a.next_hit={},e)n[o]=e[o];this.ga.log&&console.log(["ga.queue.push",n]),this.send_queue.push([n,new Date]),this._do_send()},P.prototype._do_send=function(){if(!this.sending)if(this.send_queue.length<=0)this.sending=!1;else{this.sending=!0;for(var t=this,a=function(t){var e=[];for(var a in t)e.push([encodeURIComponent(a),encodeURIComponent(t[a])].join("="));return e.join("&")},n=[];this.send_queue.length>0;){var o=this.send_queue[0],r=o[0];r.qt=(new Date).getTime()-o[1].getTime(),r.z=Math.floor(2147483648*Math.random());var s=a(r),c=n.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0),u=s.length;if((c+u>16384||u>8192||n.length>=20)&&n.length>0)break;n.push(s),this.send_queue.shift(),this.ga.log&&console.log(["ga.queue.presend["+(n.length-1)+"]",r])}var l=n.join("\r\n"),d=this.trackerServer+"/collect";n.length>1?(this.ga.log&&console.log(["ga.queue.send.batch",l]),d=this.trackerServer+"/batch"):this.ga.log&&console.log(["ga.queue.send.collect",l]),i.request({url:d,data:l,method:"POST",header:{"content-type":"text/plain"},success:function(e){t.ga.log&&console.log(["ga:success",e])},fail:function(e){t.ga.log&&console.log(["ga:failed",e])},complete:function(){t.sending=!1,e((function(){t._do_send()}),0)}})}},F.prototype.get=function(t){return this.hit[C(t)]},F.prototype.set=function(t,e){return this.hit[C(t)]=e,this},F.prototype.setAll=function(t){for(var e in t)this.set(e,t[e]);return this},F.prototype.addImpression=function(t,e){this.impression_product_list[e]||(this.impression_product_list[e]=[this.next_impression_index,1],this.set("il"+this.next_impression_index+"nm",e),this.next_impression_index++);var a=this.impression_product_list[e][0],n=this.impression_product_list[e][1];for(var o in t.hit)this.set("il"+a+"pi"+n+o,t.hit[o]);return this.impression_product_list[e][1]=n+1,this},F.prototype.addProduct=function(t){var e=this.next_product_index;for(var a in t.hit)this.set("pr"+e+a,t.hit[a]);return this.next_product_index++,this},F.prototype.addPromotion=function(t){var e=this.next_promotion_index;for(var a in t.hit)this.set("promo"+e+a,t.hit[a]);return this.next_promotion_index++,this},F.prototype.setProductAction=function(t){for(var e in t.hit)this.set(e,t.hit[e]);return this},F.prototype.setPromotionAction=function(t){return this.set("promoa",t)},F.prototype.setCampaignParamsFromUrl=function(t){var e=z(t);return this.setAll(e)},F.prototype.setCustomDimension=function(t,e){return this.custom_dimensions.push([t,e]),this},F.prototype.setCustomMetric=function(t,e){return this.custom_metrics.push([t,e]),this},F.prototype.setNewSession=function(){return this.hit.sc="start",this},F.prototype.setEndSession=function(){return this.hit.sc="end",this},F.prototype.setNonInteraction=function(t){return this.hit.ni=t?1:0,this},F.prototype.setHitType=function(t){return this.hit.t=t,this},F.prototype.build=function(){var t,e=this,a=[];for(var n in 0==this.hit.ni&&a.push("ni"),this.hit)n.match(/^(cd|cm)\d+$/)&&a.push(n);a.map((function(t){delete e.hit[t]}));var o=this.custom_dimensions,i=this.custom_metrics;for(t=0;t<o.length;t++){var r=o[t];this.hit["cd"+r[0]]=r[1]}for(t=0;t<i.length;t++){var s=i[t];this.hit["cm"+s[0]]=s[1]}return this.hit},I.prototype=Object.create(F.prototype),I.prototype.constructor=I,A.prototype=Object.create(F.prototype),A.prototype.constructor=A,A.prototype.setCategory=function(t){return this.set("ec",t)},A.prototype.setAction=function(t){return this.set("ea",t)},A.prototype.setLabel=function(t){return this.set("el",t)},A.prototype.setValue=function(t){return this.set("ev",t)},A.prototype.build=function(){return k(this,"ev",0),k(this,"el",""),F.prototype.build.apply(this,arguments)},E.prototype=Object.create(F.prototype),E.prototype.constructor=E,E.prototype.setNetwork=function(t){return this.set("sn",t)},E.prototype.setAction=function(t){return this.set("sa",t)},E.prototype.setTarget=function(t){return this.set("st",t)},E.prototype.build=function(){return k(this,"st",""),F.prototype.build.apply(this,arguments)},L.prototype=Object.create(F.prototype),L.prototype.constructor=L,L.prototype.setDescription=function(t){return this.set("exd",t)},L.prototype.setFatal=function(t){return this.set("exf",t?1:0)},H.prototype=Object.create(F.prototype),H.prototype.constructor=H,H.prototype.setCategory=function(t){return this.set("utc",t)},H.prototype.setVariable=function(t){return this.set("utv",t)},H.prototype.setValue=function(t){return this.set("utt",t)},H.prototype.setLabel=function(t){return this.set("utl",t)},H.prototype.build=function(){return k(this,"utl",""),F.prototype.build.apply(this,arguments)},R.prototype.setBrand=function(t){return this.hit.br=t,this},R.prototype.setCategory=function(t){return this.hit.ca=t,this},R.prototype.setCouponCode=function(t){return this.hit.cc=t,this},R.prototype.setCustomDimension=function(t,e){return this.hit["cd"+t]=e,this},R.prototype.setCustomMetric=function(t,e){return this.hit["cm"+t]=e,this},R.prototype.setId=function(t){return this.hit.id=t,this},R.prototype.setName=function(t){return this.hit.nm=t,this},R.prototype.setPosition=function(t){return this.hit.ps=t,this},R.prototype.setPrice=function(t){return this.hit.pr=t,this},R.prototype.setQuantity=function(t){return this.hit.qt=t,this},R.prototype.setVariant=function(t){return this.hit.va=t,this},M.ACTION_CLICK="click",M.ACTION_VIEW="view",M.prototype.setCreative=function(t){return this.hit.cr=t,this},M.prototype.setId=function(t){return this.hit.id=t,this},M.prototype.setName=function(t){return this.hit.nm=t,this},M.prototype.setPosition=function(t){return this.hit.ps=t,this},j.ACTION_ADD="add",j.ACTION_CHECKOUT="checkout",j.ACTION_CHECKOUT_OPTION="checkout_option",j.ACTION_CLICK="click",j.ACTION_DETAIL="detail",j.ACTION_PURCHASE="purchase",j.ACTION_REFUND="refund",j.ACTION_REMOVE="remove",j.prototype.setCheckoutOptions=function(t){return this.hit.col=t,this},j.prototype.setCheckoutStep=function(t){return this.hit.cos=t,this},j.prototype.setProductActionList=function(t){return this.hit.pal=t,this},j.prototype.setProductListSource=function(t){return this.hit.pls=t,this},j.prototype.setTransactionAffiliation=function(t){return this.hit.ta=t,this},j.prototype.setTransactionCouponCode=function(t){return this.hit.tcc=t,this},j.prototype.setTransactionId=function(t){return this.hit.ti=t,this},j.prototype.setTransactionRevenue=function(t){return this.hit.tr=t,this},j.prototype.setTransactionShipping=function(t){return this.hit.ts=t,this},j.prototype.setTransactionTax=function(t){return this.hit.tt=t,this},q.prototype.set=function(t,e){return t in this.params_map&&(this.params[t]=e),this},q.prototype.toUrl=function(){var t=[];for(var e in this.params)t.push([encodeURIComponent(e),encodeURIComponent(this.params[e])].join("="));return"https://example.com?"+t.join("&")},q.parseFromPageOptions=function(t,e){t=t||{},e=e||{};var a=new q;for(var n in t){var o=t[n];n in e&&(n=e[n]),(n.match(/^utm_/)||"gclid"==n)&&a.set(n,o)}return a},q.buildFromWeappScene=function(t){var e={1001:"发现栏小程序主入口",1005:"顶部搜索框的搜索结果页",1006:"发现栏小程序主入口搜索框的搜索结果页",1007:"单人聊天会话中的小程序消息卡片",1008:"群聊会话中的小程序消息卡片",1011:"扫描二维码",1012:"长按图片识别二维码",1013:"手机相册选取二维码",1014:"小程序模版消息",1017:"前往体验版的入口页",1019:"微信钱包",1020:"公众号profile页相关小程序列表",1022:"聊天顶部置顶小程序入口",1023:"安卓系统桌面图标",1024:"小程序profile页",1025:"扫描一维码",1026:"附近小程序列表",1027:"顶部搜索框搜索结果页“使用过的小程序”列表",1028:"我的卡包",1029:"卡券详情页",1030:"自动化测试下打开小程序",1031:"长按图片识别一维码",1032:"手机相册选取一维码",1034:"微信支付完成页",1035:"公众号自定义菜单",1036:"App 分享消息卡片",1037:"小程序打开小程序",1038:"从另一个小程序返回",1039:"摇电视",1042:"添加好友搜索框的搜索结果页",1043:"公众号模板消息",1044:"带shareTicket的小程序消息卡片",1045:"朋友圈广告",1046:"朋友圈广告详情页",1047:"扫描小程序码",1048:"长按图片识别小程序码",1049:"手机相册选取小程序码",1052:"卡券的适用门店列表",1053:"搜一搜的结果页",1054:"顶部搜索框小程序快捷入口",1056:"音乐播放器菜单",1057:"钱包中的银行卡详情页",1058:"公众号文章",1059:"体验版小程序绑定邀请页",1064:"微信连Wifi状态栏",1067:"公众号文章广告",1068:"附近小程序列表广告",1069:"移动应用",1071:"钱包中的银行卡列表页",1072:"二维码收款页面",1073:"客服消息列表下发的小程序消息卡片",1074:"公众号会话下发的小程序消息卡片",1077:"摇周边",1078:"连Wi-Fi成功页",1079:"微信游戏中心",1081:"客服消息下发的文字链",1082:"公众号会话下发的文字链",1084:"朋友圈广告原生页",1089:"微信聊天主界面下拉",1090:"长按小程序右上角菜单唤出最近使用历史",1091:"公众号文章商品卡片",1092:"城市服务入口",1095:"小程序广告组件",1096:"聊天记录",1097:"微信支付签约页",1099:"页面内嵌插件",1102:"公众号 profile 页服务预览"},a=new q;return t in e?(a.set("utm_source","小程序场景"),a.set("utm_medium",t+":"+e[t])):t&&(a.set("utm_source","小程序场景"),a.set("utm_medium",t+":")),a},q.parseFromUrl=function(t){var e=t.replace(/^[^?]+\?/,""),a=new q,n=a.params_map;return e.split("&").map((function(t){var e=t.split("="),o=decodeURIComponent(e[0]);if(2==e.length&&""!==e[1]&&n[o]){var i=decodeURIComponent(e[1]);a.set(o,i)}})),a};var O=function(){return"object"==(void 0===i?"undefined":x(i))&&"function"==typeof i.getSystemInfoSync?i.getSystemInfoSync():{brand:"unknow",screenWidth:0,screenHeight:0,windowWidth:0,windowHeight:0,pixelRatio:1,language:"zh_CN",system:"unknow",model:"unknow",version:"unknow",platform:"unknow",fontSizeSetting:0,SDKVersion:"unknow"}};a.exports={GoogleAnalytics:{getInstance:function(t){return(t=t||{}).defaultGoogleAnalyticsInstance||(t.defaultGoogleAnalyticsInstance=new S(t)),t.defaultGoogleAnalyticsInstance}},HitBuilders:{HitBuilder:F,ScreenViewBuilder:I,EventBuilder:A,SocialBuilder:E,ExceptionBuilder:L,TimingBuilder:H},Product:R,ProductAction:j,Promotion:M,CampaignParams:q}})),window.define("utils/HKSWF/HKLoader",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var _=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pageHeight={},this.loadSuccessFun=e.loadSuccessFun||function(){return!1},this.loadFailedFun=e.loadFailedFun||function(){return!1},this.removeEdgeFun=e.removeEdgeFun||function(){return!1},this.showWaterMarkFun=e.showWaterMarkFun||function(){return!0},this.lazyLoadFun=e.lazyLoadFun||function(){return!0},this.pageCountFun=e.pageCountFun||function(){return 1},this.hidePersonalMessage=e.hidePersonalMessage||function(){return!1},this.hideMinganXinxi=e.hideMinganXinxi||function(){return!1},this.pageHeight={},this.isLoading=!1}return _(t,[{key:"getPageCount",value:function(t){this.pageCountFun(t)}},{key:"loadPage",value:function(t,e,a,n,o){console.log("no")}},{key:"clearPage",value:function(t){}},{key:"select",value:function(t,e,a,n){}},{key:"setPageHeight",value:function(t,e){this.pageHeight[t]=e}},{key:"getPageHeight",value:function(t){return this.pageHeight[t]?this.pageHeight[t]:"auto"}}]),t}();a.HKLoader=x})),window.define("utils/HKSWF/HKSWF",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HKSWF=void 0;var x=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),S=t("./select"),C=t("./HKLoader.js"),P=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(t("./jgcw.js"));var F=function(t){function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.swfselect={},e.myEdge={top:"7.50",bottom:"7.50",left:"13.50",right:"13.50"},e.headDataMap={},e.headURLFun=t.headURLFun,e.pageURLFun=t.pageURLFun,e.edgeURLFun=t.edgeURLFun,e.swfselect={},e.width=800,e.renderPageMap={},e.progressPageMap={},e.worker=e.initWorker(t.workerURL,(function(){e.wURL=t.workerURL})),e.edgeURLFun()&&(e.writeEdge(),e.readEdge()),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t),x(a,[{key:"support",value:function(){var t=!0;return t=(t=(t=t&&"undefined"!=typeof Worker)&&"undefined"!=typeof Promise)&&"undefined"!=typeof IntersectionObserver}},{key:"readAsync",value:function(t,e,a,n){i.request({url:t,data:{},header:{"Content-Type":"application/json"},method:"GET",dataType:"json",responseType:"arraybuffer",success:function(t){e&&e(new Uint8Array(t.data))},fail:function(t){a&&a()},complete:function(){}})}},{key:"readEdge",value:function(){var t=this;this.edgeURLFun()&&i.request({url:this.edgeURLFun()+"&random="+Math.random(),data:{},header:{"Content-Type":"application/json"},method:"GET",dataType:"json",responseType:"json",success:function(e){t.myEdge=e.data.content.edge},fail:function(t){onerror&&onerror()},complete:function(){}})}},{key:"writeEdge",value:function(){this.edgeURLFun()&&i.request({url:this.edgeURLFun()+"&random="+Math.random(),data:JSON.stringify({edge:this.myEdge}),header:{"Content-Type":"application/json"},method:"POST",dataType:"json",responseType:"json",success:function(t){},fail:function(t){onerror&&onerror()},complete:function(){}})}},{key:"postMessage",value:function(t){var e=t.action;this.actionmap[e]?this.actionmap[e](t):console.log(e+" not found")}},{key:"initWorker",value:function(t,e){var a=this;return this.actionmap={},this.actionmap.onRuntimeInitialized=function(){a.hidePersonalMessage()&&P.postMessage({action:"f2288fda82424e5a8fb45d1edce7f23a",content:{}}),a.hideMinganXinxi()&&P.postMessage({action:"5df654c077cf4d6e930b5f37b283f8ce",content:{}}),a.onRuntimeInitialized=!0,e&&e()},this.actionmap.updateEdge=function(t){console.log("updateEdge",t),a.myEdge=t.content.edge},this.readAsync(t,(function(t){console.log("initWASM data.length",t.length),console.log(P),P.postMessage({action:"490040e33f784494adda383827cc334f",content:{data:t,hkswf:a}})})),P}},{key:"renderPage",value:function(t,e,a,n,o){var i=this;this.renderPageMap[t]=function(r){var s=r.success;i.renderPageMap[t]=0,s?e.isPrint?i.printPageCallBack(r,t,e,a):i.renderPageCallBack(r,t,e,a,n,o):n()},this.progressPageMap[t]=function(t){var e=t.content.pageIndex;o&&o(t.content.percent,e)},this.actionmap["75e5d3b0179607557a102d4a324376d6"]=function(t){var e=t.content.pageIndex;i.renderPageMap[e]&&i.renderPageMap[e](t)},this.actionmap.b3e017cf16784006a9a0fb30de28daf1=function(t){var e=t.content.pageIndex;i.progressPageMap[e]&&i.progressPageMap[e](t)},e.width>=2e3&&(e.outType="canvas",e.width=2e3);var r=e.backgroundColor.r+256*e.backgroundColor.g+256*e.backgroundColor.b*256,s=e.textColor.r+256*e.textColor.g+256*e.textColor.b*256,c={debuglog:e.debuglog,notRenderImage:e.notRenderImage,outType:e.outType,width:e.width,partHeight:e.partHeight,backgroundColor:r,textColor:s,watermark:e.watermark,theme:e.theme,removeEdge:e.removeEdge,edge:this.myEdge,pageIndex:t,headData:e.headData,pageData:e.pageData,edge_url:this.edgeURLFun&&this.edgeURLFun(),page_url:this.pageURLFun(t),head_url:this.headURLFun(Math.floor(t/50))};console.log(c),this.worker.postMessage({action:"75e5d3b0179607557a102d4a324376d6",content:c})}},{key:"printPageCallBack",value:function(t,e,a,n){a.width,t.content.width,t.content.height,t.content.bitmap,t.content.text;var o=t.content.svg;t.content.outType;n(o,e)}},{key:"renderPageCallBack",value:function(t,e,a,n,o,i){console.log(t);var r=a.width,s=t.content.width,c=t.content.height,u=t.content.bitmap,l=t.content.text;t.content.svg,t.content.outType;this.swfselect[e]=new S.SWFSelect(l),a.removeEdge?this.pageHeight[e]=this.swfselect[e].scaleContentHeight(r):this.pageHeight[e]=this.swfselect[e].scaleHeight(r),n({bitmap:u,width:s,height:c})}},{key:"getPrintPage",value:function(t,a,n,o,i){var r=this;a.isPrint=!0,a.outType="print",a.watermark=!1,a.removeEdge=!1,this.isLoading||!this.onRuntimeInitialized?e((function(){r.getPrintPage(t,a,n,o,i)}),100):(this.isLoading=!0,this.renderPage(t,a,(function(t){r.isLoading=!1,n(t)}),(function(){r.isLoading=!1,o()}),i))}},{key:"loadPage",value:function(t,a,n,o,i){var r=this;if(this.removeEdge=a.removeEdge,this.isLoading||!this.onRuntimeInitialized)a.debuglog&&console.log("this.onRuntimeInitialized,this.isLoading",this.onRuntimeInitialized,this.isLoading),e((function(){r.loadPage(t,a,n,o,i)}),1e3);else{this.isLoading=!0;var s=Math.floor(t/50);this.headDataMap[s]?this.readAsync(this.pageURLFun(t),(function(e){a.headData=r.headDataMap[s],a.pageData=e,r.renderPage(t,a,(function(t){r.isLoading=!1,n(t)}),(function(){r.isLoading=!1,o()}),i)})):this.readAsync(this.headURLFun(s),(function(e){r.headDataMap[s]=e,r.readAsync(r.pageURLFun(t),(function(e){a.headData=r.headDataMap[s],a.pageData=e,r.renderPage(t,a,(function(t){r.isLoading=!1,n(t)}),(function(){r.isLoading=!1,o()}),i)}))}))}}},{key:"clearPage",value:function(t){this.swfselect[t]=0}},{key:"select",value:function(t,e,a,n){var o=this.swfselect[t];if(this.removeEdge)var i=e/o.contenRect.w;else i=e/o.pageRect.w;a.x/=i,a.y/=i,n.x/=i,n.y/=i,this.removeEdge&&(a.x+=o.contenRect.x,n.x+=o.contenRect.x,a.y+=o.contenRect.y,n.y+=o.contenRect.y);for(var r=o.select2(a,n),s=0;s<r.length;s++){var c=r[s];this.removeEdge&&(c.rect.x-=o.contenRect.x,c.rect.y-=o.contenRect.y),c.rect.x*=i,c.rect.y*=i,c.rect.w*=i,c.rect.h*=i}return r}}]),a}(C.HKLoader);n.HKSWF=F})),window.define("utils/HKSWF/jgcw",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.postMessage=void 0;var _,x=t("./jgcwwasm"),S=(_=x)&&_.__esModule?_:{default:_};var C=0,P={},F=0;P["490040e33f784494adda383827cc334f"]=function(t){console.log(t),F=t.content.hkswf;var e={locateFile:function(t){return""+t},scriptDirectory:"",wasmBinary:t.content.data};console.log("JGCW(args) begin"),C=(0,S.default)(e).then((function(t){var e=new Object;e.action="onRuntimeInitialized",console.log("JGCW(args) then"),F.postMessage(e)})),console.log("JGCW(args) end")};P["75e5d3b0179607557a102d4a324376d6"]=function(t){var e=t.content.pageIndex,a=(t.content.width,t.content.head_url,t.content.page_url,t.content.edge_url,t.content.theme,t.content.watermark,t.content.backgroundColor,t.content.textColor,t.content.partHeight,t.content.outType,t.content.notRenderImage,t.content.headData),n=t.content.pageData,o=Math.floor(e/50);C["32f60109-32c0-4790-afe5-a40964cc0a8f"](o)||function(t,e){var a=C._malloc(e.byteLength);C.HEAP8.set(e,a),C["de8e7243-fa63-480a-9c0d-413248c8aafc"](a,e.byteLength,t),C._free(a)}(o,a);var i=function(t,e){var a=e.content.pageIndex,n=e.content.width,o=(e.content.head_url,e.content.page_url,e.content.removeEdge),i=e.content.theme,r=e.content.watermark,s=e.content.backgroundColor,c=e.content.textColor,u=e.content.partHeight,l=e.content.outType,d=e.content.notRenderImage,h=e.content.edge;Math.floor(a/50);r=r?o?2:1:0,C["c28cea5b-2bbb-40c4-8799-62e281d58acd"](d),C["d126cdbb-4994-44e7-87a8-6262de310414"](i),C["c7de3407-12a9-4cdf-96ad-8f06f23e587d"](r),C["6946fc0b-dc56-41da-bf4b-00577178955d"](s),C["259e0c20-50e4-4d52-a410-90cac7b7c16a"](c),"print"===l&&C["6baa6cd5-ce9b-42eb-8546-393f0ace4c8d"]();var f=C._malloc(t.byteLength);if(C.HEAP8.set(t,f),C["9cca3f43-c24d-462e-9b8c-358349f48ffd"](f,t.byteLength,a),C._free(f),"mix"===l&&(l=C["3043247e-fbee-4b49-8d07-d6a9bb3f3986"](a)?"canvas":"svg"),h&&C["69723186-73b5-4a6f-ba7e-519febfa594f"](parseFloat(h.top),parseFloat(h.bottom),parseFloat(h.left),parseFloat(h.right)),"print"===l){var p="";if(o)var g=C["67580600-1675-4e96-c665-72047e97d4ab"](a,n);else if(u>0)g=C["0a9ea4fe-e0a1-f91a-3a85-1b5b2778b1b1"](a,n,u);else g=C["df74ae44-8adb-4b41-b64b-c0a0beba27f3"](a);for(var m=g.data,y=g.len,w=m;w<m+y;w++)p+=String.fromCharCode(C.HEAPU8[w]);C["7e1ffd34-1091-465f-b024-aeb72eee5fdb"](g.pointer)}else{if(o)var v=C["372d9f17-0049-4f67-acd4-0f18b7081cd8"](a,n);else v=C["76d9e9fc-8924-447a-998a-c10fe2f6d935"](a,n);var D=v.data,b=v.width,T=v.height,_=new Uint8ClampedArray(b*T*4);for(w=0;w<b*T*4;w++)_[w]=C.HEAPU8[D+w];C["1959d189-657a-4a6c-b4b5-a0cf4fc66b88"](v.pixmap)}var x,S=C["1d7ca184-ca4c-4149-93de-6b15e377ee78"]();(e.content.debuglog&&(console.log(a+1,"oldEdge",h),console.log(a+1,"edge",S)),h&&S.top===h.top&&S.bottom===h.bottom&&S.left===h.left&&S.right===h.right)||((x=new Object).action="updateEdge",x.content={edge:S},F.postMessage(x));var P="",k=C["cba145aa-e2f3-49c8-9efa-49aa67429577"](a),I=k.data,A=k.len;for(w=I;w<I+A;w++)P+=String.fromCharCode(C.HEAPU8[w]);return C["05ed55e2-2c24-429e-a3b1-db8e15be776f"](k.pointer),(x=new Object).action="75e5d3b0179607557a102d4a324376d6",x.success=!0,x.content={pageIndex:a,bitmap:_,width:b,height:T,outType:l,text:P,svg:p},x}(n,t);F.postMessage(i)},P.f2288fda82424e5a8fb45d1edce7f23a=function(t){C["c36865a8-c9bd-411d-aa24-46c173c44dbc"]()},P["5df654c077cf4d6e930b5f37b283f8ce"]=function(){C["1e01a00a-72c4-4779-8ce7-d73a08b92189"]()},a.postMessage=function(t){console.log(t);var e=t.action;P[e]?P[e](t):console.log(e+"not found")}})),window.define("utils/HKSWF/jgcwwasm",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=function(){void 0!==c&&c.currentScript&&c.currentScript.src;return function(t){var a,n=void 0!==(t=t||{})?t:{},o={};for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);var i,r=[],s="./this.program",c=function(t,e){throw e},u=!1,l=!1,d=!0,f="";function p(t){return n.locateFile?n.locateFile(t,f):f+t}d&&("undefined"!=typeof read&&function(t){return read(t)},i=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(C("object"===(void 0===(e=read(t,"binary"))?"undefined":x(e))),e)},"undefined"!=typeof scriptArgs?r=scriptArgs:void 0!==arguments&&(r=arguments),"function"==typeof quit&&(c=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print));var g=n.print||console.log.bind(console),m=n.printErr||console.warn.bind(console);for(a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);o=null,n.arguments&&(r=n.arguments),n.thisProgram&&(s=n.thisProgram),n.quit&&(c=n.quit);var y,w,v,D=0,b=function(t){D=t},T=function(){return D};n.wasmBinary&&(y=n.wasmBinary),n.noExitRuntime&&(w=n.noExitRuntime),"object"!==("undefined"==typeof WebAssembly?"undefined":x(WebAssembly))&&m("no native wasm support detected");var _=new WebAssembly.Table({initial:1052,maximum:1052,element:"anyfunc"}),S=!1;function C(t,e){t||mt("Assertion failed: "+e)}var P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(t,e,a){for(var n=e+a,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.subarray&&P)return P.decode(t.subarray(e,o));for(var i="";e<o;){var r=t[e++];if(128&r){var s=63&t[e++];if(192!=(224&r)){var c=63&t[e++];if((r=224==(240&r)?(15&r)<<12|s<<6|c:(7&r)<<18|s<<12|c<<6|63&t[e++])<65536)i+=String.fromCharCode(r);else{var u=r-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&r)<<6|s)}else i+=String.fromCharCode(r)}return i}function k(t,e){return t?F(q,t,e):""}function I(t,e,a,n){if(!(n>0))return 0;for(var o=a,i=a+n-1,r=0;r<t.length;++r){var s=t.charCodeAt(r);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&t.charCodeAt(++r);if(s<=127){if(a>=i)break;e[a++]=s}else if(s<=2047){if(a+1>=i)break;e[a++]=192|s>>6,e[a++]=128|63&s}else if(s<=65535){if(a+2>=i)break;e[a++]=224|s>>12,e[a++]=128|s>>6&63,e[a++]=128|63&s}else{if(a+3>=i)break;e[a++]=240|s>>18,e[a++]=128|s>>12&63,e[a++]=128|s>>6&63,e[a++]=128|63&s}}return e[a]=0,a-o}function A(t,e,a){return I(t,q,e,a)}function E(t){for(var e=0,a=0;a<t.length;++a){var n=t.charCodeAt(a);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++a)),n<=127?++e:e+=n<=2047?2:n<=65535?3:4}return e}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function L(t){var e=E(t)+1,a=Tn(e);return I(t,j,a,e),a}function H(t,e){j.set(t,e)}function R(t,e,a){for(var n=0;n<t.length;++n)j[e++>>0]=t.charCodeAt(n);a||(j[e>>0]=0)}var M,j,q,z,O,B,N,U,V,W=65536;function Y(t,e){return t%e>0&&(t+=e-t%e),t}function K(t){M=t,n.HEAP8=j=new Int8Array(t),n.HEAP16=z=new Int16Array(t),n.HEAP32=B=new Int32Array(t),n.HEAPU8=q=new Uint8Array(t),n.HEAPU16=O=new Uint16Array(t),n.HEAPU32=N=new Uint32Array(t),n.HEAPF32=U=new Float32Array(t),n.HEAPF64=V=new Float64Array(t)}var G=5363856,Q=120816,J=n.TOTAL_MEMORY||16777216;function Z(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var a=e.func;"number"==typeof a?void 0===e.arg?n.dynCall_v(a):n.dynCall_vi(a,e.arg):a(void 0===e.arg?null:e.arg)}else e()}}(v=n.wasmMemory?n.wasmMemory:new WebAssembly.Memory({initial:J/W}))&&(M=v.buffer),J=M.byteLength,K(M),B[Q>>2]=G;var X=[],$=[],tt=[],et=[],at=[];function nt(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)ct(n.preRun.shift());Z(X)}function ot(){!0,Z($)}function it(){Z(tt)}function rt(){!0}function st(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)ut(n.postRun.shift());Z(at)}function ct(t){X.unshift(t)}function ut(t){at.unshift(t)}if(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(t,e){var a=65535&t,n=65535&e;return a*n+((t>>>16)*n+a*(e>>>16)<<16)|0}),!Math.fround){var lt=new Float32Array(1);Math.fround=function(t){return lt[0]=t,lt[0]}}Math.clz32||(Math.clz32=function(t){var e=32,a=t>>16;return a&&(e-=16,t=a),(a=t>>8)&&(e-=8,t=a),(a=t>>4)&&(e-=4,t=a),(a=t>>2)&&(e-=2,t=a),(a=t>>1)?e-2:e-t}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});Math.abs,Math.ceil,Math.floor,Math.min;var dt=0,ht=null,ft=null;function pt(t){dt++,n.monitorRunDependencies&&n.monitorRunDependencies(dt)}function gt(t){if(dt--,n.monitorRunDependencies&&n.monitorRunDependencies(dt),0==dt&&(null!==ht&&(clearInterval(ht),ht=null),ft)){var e=ft;ft=null,e()}}function mt(t){throw n.onAbort&&n.onAbort(t),g(t+=""),m(t),S=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}n.preloadedImages={},n.preloadedAudios={};var yt="data:application/octet-stream;base64,";function wt(t){return String.prototype.startsWith?t.startsWith(yt):0===t.indexOf(yt)}var vt="jgcwwasm.wasm";function Dt(){try{if(y)return new Uint8Array(y);if(i)return i(vt);throw"both async and sync fetching of the wasm failed"}catch(t){mt(t)}}function bt(){return y||!u&&!l||"function"!=typeof fetch?new Promise((function(t,e){t(Dt())})):fetch(vt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+vt+"'";return t.arrayBuffer()})).catch((function(){return Dt()}))}function Tt(){var t={env:Sa,wasi_snapshot_preview1:Sa};function e(t,e){var a=t.exports;n.asm=a,gt()}function a(t){e(t.instance)}function o(e){return bt().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){m("failed to asynchronously prepare wasm: "+t),mt(t)}))}if(pt(),n.instantiateWasm)try{return n.instantiateWasm(t,e)}catch(t){return m("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(y||"function"!=typeof WebAssembly.instantiateStreaming||wt(vt)||"function"!=typeof fetch)return o(a);fetch(vt,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(a,(function(t){m("wasm streaming compile failed: "+t),m("falling back to ArrayBuffer instantiation"),o(a)}))}))}(),{}}function _t(t){return ka(t)}function xt(t,e){et.unshift({func:t,arg:e})}function St(){return xt.apply(null,arguments)}wt(vt)||(vt=p(vt)),$.push({func:function(){Fa()}});var Ct={};function Pt(t,e,a){throw Ct[t]={ptr:t,adjusted:[t],type:e,destructor:a,refcount:0,caught:!1,rethrown:!1},t,"uncaught_exception"in La?La.uncaught_exceptions++:La.uncaught_exceptions=1,t}function Ft(){}function kt(t){return n.___errno_location&&(B[n.___errno_location()>>2]=t),t}function It(t,e){return kt(63),-1}var At={buffers:[null,[],[]],printChar:function(t,e){var a=At.buffers[t];0===e||10===e?((1===t?g:m)(F(a,0)),a.length=0):a.push(e)},varargs:0,get:function(t){return At.varargs+=4,B[At.varargs-4>>2]},getStr:function(){return k(At.get())},get64:function(){var t=At.get();At.get();return t},getZero:function(){At.get()}};function Et(t,e){At.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),-t.errno}}function Lt(t,e){At.varargs=e;try{var a=At.getStreamFromFD(),n=At.get(),o=At.get();return FS.read(a,j,n,o)}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),-t.errno}}function Ht(t,e){At.varargs=e;try{var a=At.getStr(),n=At.get(),o=At.get();return FS.open(a,n,o).fd}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),-t.errno}}function Rt(t,e){At.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),-t.errno}}function Mt(t,e){if(-1===t||0===e)return-28;var a=At.mappings[t];if(!a)return 0;if(e===a.len){var n=FS.getStream(a.fd);At.doMsync(t,n,e,a.flags),FS.munmap(n),At.mappings[t]=null,a.allocated&&Ia(a.malloc)}return 0}function jt(t,e){At.varargs=e;try{return Mt(At.get(),At.get())}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),-t.errno}}function qt(){}function zt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function Ot(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Bt=t}var Bt=void 0;function Nt(t){for(var e="",a=t;q[a];)e+=Bt[q[a++]];return e}var Ut={},Vt={},Wt={},Yt=48,Kt=57;function Gt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=Yt&&e<=Kt?"_"+t:t}function Qt(t,e){return t=Gt(t),function(){return e.apply(this,arguments)}}function Jt(t,e){var a=Qt(e,(function(t){this.name=e,this.message=t;var a=new Error(t).stack;void 0!==a&&(this.stack=this.toString()+"\n"+a.replace(/^Error(:[^\n]*)?\n/,""))}));return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},a}var Zt=void 0;function Xt(t){throw new Zt(t)}var $t=void 0;function te(t){throw new $t(t)}function ee(t,e,a){function n(e){var n=a(e);n.length!==t.length&&te("Mismatched type converter count");for(var o=0;o<t.length;++o)ae(t[o],n[o])}t.forEach((function(t){Wt[t]=e}));var o=new Array(e.length),i=[],r=0;e.forEach((function(t,e){Vt.hasOwnProperty(t)?o[e]=Vt[t]:(i.push(t),Ut.hasOwnProperty(t)||(Ut[t]=[]),Ut[t].push((function(){o[e]=Vt[t],++r===i.length&&n(o)})))})),0===i.length&&n(o)}function ae(t,e,a){if(a=a||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=e.name;if(t||Xt('type "'+n+'" must have a positive integer typeid pointer'),Vt.hasOwnProperty(t)){if(a.ignoreDuplicateRegistrations)return;Xt("Cannot register type '"+n+"' twice")}if(Vt[t]=e,delete Wt[t],Ut.hasOwnProperty(t)){var o=Ut[t];delete Ut[t],o.forEach((function(t){t()}))}}function ne(t,e,a,n,o){var i=zt(a);ae(t,{name:e=Nt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:o},argPackAdvance:8,readValueFromPointer:function(t){var n;if(1===a)n=j;else if(2===a)n=z;else{if(4!==a)throw new TypeError("Unknown boolean type size: "+e);n=B}return this.fromWireType(n[t>>i])},destructorFunction:null})}var oe=[],ie=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function re(t){t>4&&0==--ie[t].refcount&&(ie[t]=void 0,oe.push(t))}function se(){for(var t=0,e=5;e<ie.length;++e)void 0!==ie[e]&&++t;return t}function ce(){for(var t=5;t<ie.length;++t)if(void 0!==ie[t])return ie[t];return null}function ue(){n.count_emval_handles=se,n.get_first_emval=ce}function le(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=oe.length?oe.pop():ie.length;return ie[e]={refcount:1,value:t},e}}function de(t){return this.fromWireType(N[t>>2])}function he(t,e){ae(t,{name:e=Nt(e),fromWireType:function(t){var e=ie[t].value;return re(t),e},toWireType:function(t,e){return le(e)},argPackAdvance:8,readValueFromPointer:de,destructorFunction:null})}function fe(t){if(null===t)return"null";var e=void 0===t?"undefined":x(t);return"object"===e||"array"===e||"function"===e?t.toString():""+t}function pe(t,e){switch(e){case 2:return function(t){return this.fromWireType(U[t>>2])};case 3:return function(t){return this.fromWireType(V[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function ge(t,e,a){var n=zt(a);ae(t,{name:e=Nt(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+fe(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:pe(e,n),destructorFunction:null})}function me(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ye(t,e,a,n,o){var i=e.length;i<2&&Xt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var r=null!==e[1]&&null!==a,s=!1,c=1;c<e.length;++c)if(null!==e[c]&&void 0===e[c].destructorFunction){s=!0;break}var u="void"!==e[0].name,l=i-2,d=new Array(l),h=[],f=[];return function(){var a;arguments.length!==l&&Xt("function "+t+" called with "+arguments.length+" arguments, expected "+l+" args!"),f.length=0,h.length=r?2:1,h[0]=o,r&&(a=e[1].toWireType(f,this),h[1]=a);for(var i=0;i<l;++i)d[i]=e[i+2].toWireType(f,arguments[i]),h.push(d[i]);var c=n.apply(null,h);if(s)me(f);else for(i=r?1:2;i<e.length;i++){var p=1===i?a:d[i-2];null!==e[i].destructorFunction&&e[i].destructorFunction(p)}if(u)return e[0].fromWireType(c)}}function we(t,e,a){if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||Xt("Function '"+a+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}}function ve(t,e,a){n.hasOwnProperty(t)?((void 0===a||void 0!==n[t].overloadTable&&void 0!==n[t].overloadTable[a])&&Xt("Cannot register public name '"+t+"' twice"),we(n,t,t),n.hasOwnProperty(a)&&Xt("Cannot register multiple overloads of a function with the same number of arguments ("+a+")!"),n[t].overloadTable[a]=e):(n[t]=e,void 0!==a&&(n[t].numArguments=a))}function De(t,e){for(var a=[],n=0;n<t;n++)a.push(B[(e>>2)+n]);return a}function be(t,e,a){n.hasOwnProperty(t)||te("Replacing nonexistant public symbol"),void 0!==n[t].overloadTable&&void 0!==a?n[t].overloadTable[a]=e:(n[t]=e,n[t].argCount=a)}function Te(t,e){var a;if(t=Nt(t),void 0!==n["FUNCTION_TABLE_"+t])a=n["FUNCTION_TABLE_"+t][e];else if("undefined"!=typeof FUNCTION_TABLE)a=FUNCTION_TABLE[e];else{var o=n["dynCall_"+t];void 0===o&&void 0===(o=n["dynCall_"+t.replace(/f/g,"d")])&&Xt("No dynCall invoker for signature: "+t),a=function(t){var a=[e];return function(){a.length=arguments.length+1;for(var e=0;e<arguments.length;e++)a[e+1]=arguments[e];return t.apply(null,a)}}(o)}return"function"!=typeof a&&Xt("unknown function pointer with signature "+t+": "+e),a}var _e=void 0;function xe(t){var e=Ha(t),a=Nt(e);return Ia(e),a}function Se(t,e){var a=[],n={};throw e.forEach((function t(e){n[e]||Vt[e]||(Wt[e]?Wt[e].forEach(t):(a.push(e),n[e]=!0))})),new _e(t+": "+a.map(xe).join([", "]))}function Ce(t,e,a,n,o,i){var r=De(e,a);t=Nt(t),o=Te(n,o),ve(t,(function(){Se("Cannot call "+t+" due to unbound types",r)}),e-1),ee([],r,(function(a){var n=[a[0],null].concat(a.slice(1));return be(t,ye(t,n,null,o,i),e-1),[]}))}function Pe(t,e,a){switch(e){case 0:return a?function(t){return j[t]}:function(t){return q[t]};case 1:return a?function(t){return z[t>>1]}:function(t){return O[t>>1]};case 2:return a?function(t){return B[t>>2]}:function(t){return N[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Fe(t,e,a,n,o){e=Nt(e),-1===o&&(o=4294967295);var i=zt(a),r=function(t){return t};if(0===n){var s=32-8*a;r=function(t){return t<<s>>>s}}var c=-1!=e.indexOf("unsigned");ae(t,{name:e,fromWireType:r,toWireType:function(t,a){if("number"!=typeof a&&"boolean"!=typeof a)throw new TypeError('Cannot convert "'+fe(a)+'" to '+this.name);if(a<n||a>o)throw new TypeError('Passing a number "'+fe(a)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+n+", "+o+"]!");return c?a>>>0:0|a},argPackAdvance:8,readValueFromPointer:Pe(e,i,0!==n),destructorFunction:null})}function ke(t,e,a){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(t){var e=N,a=e[t>>=2],o=e[t+1];return new n(e.buffer,o,a)}ae(t,{name:a=Nt(a),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function Ie(t,e){var a="std::string"===(e=Nt(e));ae(t,{name:e,fromWireType:function(t){var e,n=N[t>>2];if(a){var o=q[t+4+n],i=0;0!=o&&(i=o,q[t+4+n]=0);for(var r=t+4,s=0;s<=n;++s){var c=t+4+s;if(0==q[c]){var u=k(r);void 0===e?e=u:(e+=String.fromCharCode(0),e+=u),r=c+1}}0!=i&&(q[t+4+n]=i)}else{var l=new Array(n);for(s=0;s<n;++s)l[s]=String.fromCharCode(q[t+4+s]);e=l.join("")}return Ia(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n="string"==typeof e;n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Xt("Cannot pass non-string to std::string");var o=(a&&n?function(){return E(e)}:function(){return e.length})(),i=ka(4+o+1);if(N[i>>2]=o,a&&n)A(e,i+4,o+1);else if(n)for(var r=0;r<o;++r){var s=e.charCodeAt(r);s>255&&(Ia(i),Xt("String has UTF-16 code units that do not fit in 8 bits")),q[i+4+r]=s}else for(r=0;r<o;++r)q[i+4+r]=e[r];return null!==t&&t.push(Ia,i),i},argPackAdvance:8,readValueFromPointer:de,destructorFunction:function(t){Ia(t)}})}function Ae(t,e,a){var n,o;a=Nt(a),2===e?(n=function(){return O},o=1):4===e&&(n=function(){return N},o=2),ae(t,{name:a,fromWireType:function(t){for(var e=n(),a=N[t>>2],i=new Array(a),r=t+4>>o,s=0;s<a;++s)i[s]=String.fromCharCode(e[r+s]);return Ia(t),i.join("")},toWireType:function(t,a){var i=a.length,r=ka(4+i*e),s=n();N[r>>2]=i;for(var c=r+4>>o,u=0;u<i;++u)s[c+u]=a.charCodeAt(u);return null!==t&&t.push(Ia,r),r},argPackAdvance:8,readValueFromPointer:de,destructorFunction:function(t){Ia(t)}})}function Ee(t,e){ae(t,{isVoid:!0,name:e=Nt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})}function Le(t){t>4&&(ie[t].refcount+=1)}var He={};function Re(t){var e=He[t];return void 0===e?Nt(t):e}function Me(t){return le(Re(t))}function je(){return le({})}function qe(t){return t||Xt("Cannot use deleted val. handle = "+t),ie[t].value}function ze(t,e,a){t=qe(t),e=qe(e),a=qe(a),t[e]=a}function Oe(t,e){var a=Vt[t];return void 0===a&&Xt(e+" has unknown type "+xe(t)),a}function Be(t,e){return le((t=Oe(t,"_emval_take_value")).readValueFromPointer(e))}function Ne(){mt()}function Ue(){return j.length}function Ve(){return 120816}var We=0;function Ye(t,e,a,n){e|=0,a|=0,n|=0;var o=0;for(We=We+1|0,B[(t|=0)>>2]=We;(0|o)<(0|n);){if(0==(0|B[a+(o<<3)>>2]))return B[a+(o<<3)>>2]=We,B[a+(4+(o<<3))>>2]=e,B[a+(8+(o<<3))>>2]=0,b(0|n),0|a;o=o+1|0}return a=0|Ye(0|t,0|e,0|(a=0|Aa(0|a,8*((n=2*n|0)+1|0)|0)),0|n),b(0|n),0|a}function Ke(t,e,a){t|=0,e|=0,a|=0;for(var n=0,o=0;(0|n)<(0|a)&&0!=(0|(o=0|B[e+(n<<3)>>2]));){if((0|o)==(0|t))return 0|B[e+(4+(n<<3))>>2];n=n+1|0}return 0}function Ge(t,e){throw Ea(t,e||1),"longjmp"}function Qe(t,e){Ge(t,e)}function Je(t,e,a){q.set(q.subarray(e,e+a),t)}function Ze(t){try{return v.grow(t-M.byteLength+65535>>16),K(v.buffer),1}catch(t){}}function Xe(t){var e=Ue();if(t>2147418112)return!1;for(var a=1;a<=4;a*=2){var n=e+16777216/a;if(Ze(Math.min(2147418112,Y(Math.max(16777216,t,n),65536))))return!0}return!1}var $e={};function ta(){if(!ta.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===(void 0===h?"undefined":x(h))&&h.languages&&h.languages[0]||"C").replace("-","_")+".UTF-8",_:s};for(var e in $e)t[e]=$e[e];var a=[];for(var e in t)a.push(e+"="+t[e]);ta.strings=a}return ta.strings}function ea(t,e){var a=ta(),n=0;return a.forEach((function(a,o){var i=e+n;B[t+4*o>>2]=i,R(a,i),n+=a.length+1})),0}function aa(t,e){var a=ta();B[t>>2]=a.length;var n=0;return a.forEach((function(t){n+=t.length+1})),B[e>>2]=n,0}function na(t){fo(t)}function oa(t){try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),t.errno}}function ia(t,e,a,n){try{var o=At.getStreamFromFD(t),i=At.doReadv(o,e,a);return B[n>>2]=i,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),t.errno}}function ra(t,e,a,n,o){try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),t.errno}}function sa(t,e,a,n){try{for(var o=0,i=0;i<a;i++){for(var r=B[e+8*i>>2],s=B[e+(8*i+4)>>2],c=0;c<s;c++)At.printChar(t,q[r+c]);o+=s}return B[n>>2]=o,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||mt(t),t.errno}}function ca(){m("missing function: fz_advance_glyph"),mt(-1)}function ua(){m("missing function: fz_drop_font"),mt(-1)}function la(){m("missing function: fz_encode_character"),mt(-1)}function da(){m("missing function: fz_new_buffer_from_pixmap_as_jpeg"),mt(-1)}function ha(){m("missing function: fz_new_font_from_file"),mt(-1)}function fa(){m("missing function: fz_new_text"),mt(-1)}function pa(){m("missing function: fz_show_glyph"),mt(-1)}function ga(){return 0|T()}function ma(t){b(0|t)}function ya(t){return t%4==0&&(t%100!=0||t%400==0)}function wa(t,e){for(var a=0,n=0;n<=e;a+=t[n++]);return a}var va=[31,29,31,30,31,30,31,31,30,31,30,31],Da=[31,28,31,30,31,30,31,31,30,31,30,31];function ba(t,e){for(var a=new Date(t.getTime());e>0;){var n=ya(a.getFullYear()),o=a.getMonth(),i=(n?va:Da)[o];if(!(e>i-a.getDate()))return a.setDate(a.getDate()+e),a;e-=i-a.getDate()+1,a.setDate(1),o<11?a.setMonth(o+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1))}return a}function Ta(t,e,a,n){var o=B[n+40>>2],i={tm_sec:B[n>>2],tm_min:B[n+4>>2],tm_hour:B[n+8>>2],tm_mday:B[n+12>>2],tm_mon:B[n+16>>2],tm_year:B[n+20>>2],tm_wday:B[n+24>>2],tm_yday:B[n+28>>2],tm_isdst:B[n+32>>2],tm_gmtoff:B[n+36>>2],tm_zone:o?k(o):""},r=k(a),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)r=r.replace(new RegExp(c,"g"),s[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(t,e,a){for(var n="number"==typeof t?t.toString():t||"";n.length<e;)n=a[0]+n;return n}function h(t,e){return d(t,e,"0")}function f(t,e){function a(t){return t<0?-1:t>0?1:0}var n;return 0===(n=a(t.getFullYear()-e.getFullYear()))&&0===(n=a(t.getMonth()-e.getMonth()))&&(n=a(t.getDate()-e.getDate())),n}function p(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function g(t){var e=ba(new Date(t.tm_year+1900,0,1),t.tm_yday),a=new Date(e.getFullYear(),0,4),n=new Date(e.getFullYear()+1,0,4),o=p(a),i=p(n);return f(o,e)<=0?f(i,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var m={"%a":function(t){return u[t.tm_wday].substring(0,3)},"%A":function(t){return u[t.tm_wday]},"%b":function(t){return l[t.tm_mon].substring(0,3)},"%B":function(t){return l[t.tm_mon]},"%C":function(t){return h((t.tm_year+1900)/100|0,2)},"%d":function(t){return h(t.tm_mday,2)},"%e":function(t){return d(t.tm_mday,2," ")},"%g":function(t){return g(t).toString().substring(2)},"%G":function(t){return g(t)},"%H":function(t){return h(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),h(e,2)},"%j":function(t){return h(t.tm_mday+wa(ya(t.tm_year+1900)?va:Da,t.tm_mon-1),3)},"%m":function(t){return h(t.tm_mon+1,2)},"%M":function(t){return h(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return h(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),a=0===e.getDay()?e:ba(e,7-e.getDay()),n=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(f(a,n)<0){var o=wa(ya(n.getFullYear())?va:Da,n.getMonth()-1)-31,i=31-a.getDate()+o+n.getDate();return h(Math.ceil(i/7),2)}return 0===f(a,e)?"01":"00"},"%V":function(t){var e,a=new Date(t.tm_year+1900,0,4),n=new Date(t.tm_year+1901,0,4),o=p(a),i=p(n),r=ba(new Date(t.tm_year+1900,0,1),t.tm_yday);return f(r,o)<0?"53":f(i,r)<=0?"01":(e=o.getFullYear()<t.tm_year+1900?t.tm_yday+32-o.getDate():t.tm_yday+1-o.getDate(),h(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),a=1===e.getDay()?e:ba(e,0===e.getDay()?1:7-e.getDay()+1),n=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(f(a,n)<0){var o=wa(ya(n.getFullYear())?va:Da,n.getMonth()-1)-31,i=31-a.getDate()+o+n.getDate();return h(Math.ceil(i/7),2)}return 0===f(a,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,a=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(a?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var c in m)r.indexOf(c)>=0&&(r=r.replace(new RegExp(c,"g"),m[c](i)));var y=xa(r,!1);return y.length>e?0:(H(y,t),y.length-1)}function _a(t,e,a,n){return Ta(t,e,a,n)}Ot(),Zt=n.BindingError=Jt(Error,"BindingError"),$t=n.InternalError=Jt(Error,"InternalError"),ue(),_e=n.UnboundTypeError=Jt(Error,"UnboundTypeError");function xa(t,e,a){var n=a>0?a:E(t)+1,o=new Array(n),i=I(t,o,0,o.length);return e&&(o.length=i),o}var Sa={__cxa_allocate_exception:_t,__cxa_atexit:St,__cxa_throw:Pt,__lock:Ft,__map_file:It,__syscall221:Et,__syscall3:Lt,__syscall5:Ht,__syscall54:Rt,__syscall91:jt,__unlock:qt,_embind_register_bool:ne,_embind_register_emval:he,_embind_register_float:ge,_embind_register_function:Ce,_embind_register_integer:Fe,_embind_register_memory_view:ke,_embind_register_std_string:Ie,_embind_register_std_wstring:Ae,_embind_register_void:Ee,_emval_decref:re,_emval_incref:Le,_emval_new_cstring:Me,_emval_new_object:je,_emval_set_property:ze,_emval_take_value:Be,abort:Ne,emscripten_get_sbrk_ptr:Ve,emscripten_longjmp:Qe,emscripten_memcpy_big:Je,emscripten_resize_heap:Xe,environ_get:ea,environ_sizes_get:aa,exit:na,fd_close:oa,fd_read:ia,fd_seek:ra,fd_write:sa,fz_advance_glyph:ca,fz_drop_font:ua,fz_encode_character:la,fz_new_buffer_from_pixmap_as_jpeg:da,fz_new_font_from_file:ha,fz_new_text:fa,fz_show_glyph:pa,getTempRet0:ga,invoke_ffi:ao,invoke_fi:Vn,invoke_fiff:oo,invoke_fiiii:On,invoke_ii:xn,invoke_iif:qn,invoke_iiff:kn,invoke_iii:In,invoke_iiiff:no,invoke_iiiffffiii:Zn,invoke_iiiffi:Hn,invoke_iiiffii:jn,invoke_iiiffiiiiiii:$n,invoke_iiii:Sn,invoke_iiiii:Rn,invoke_iiiiiffii:Un,invoke_iiiiii:Bn,invoke_iiiiiii:Gn,invoke_iiiiiiii:Qn,invoke_iiiiiiiii:Jn,invoke_iiiiiiiiiii:to,invoke_vi:Fn,invoke_vii:Pn,invoke_viif:Ln,invoke_viiff:io,invoke_viiffff:so,invoke_viiffffff:ro,invoke_viifffiiff:co,invoke_viii:An,invoke_viiii:Mn,invoke_viiiif:Wn,invoke_viiiii:Cn,invoke_viiiiiff:Yn,invoke_viiiiii:En,invoke_viiiiiif:Nn,invoke_viiiiiiif:Kn,invoke_viiiiiiii:Xn,invoke_viiiiiiiiii:zn,invoke_viiiiiiiiiiiii:eo,memory:v,saveSetjmp:Ye,setTempRet0:ma,strftime_l:_a,table:_,testSetjmp:Ke},Ca=Tt();n.asm=Ca;var Pa,Fa=n.___wasm_call_ctors=function(){return n.asm.__wasm_call_ctors.apply(null,arguments)},ka=n._malloc=function(){return n.asm.malloc.apply(null,arguments)},Ia=(n._main=function(){return n.asm.main.apply(null,arguments)},n._free=function(){return n.asm.free.apply(null,arguments)}),Aa=n._realloc=function(){return n.asm.realloc.apply(null,arguments)},Ea=(n.__get_tzname=function(){return n.asm._get_tzname.apply(null,arguments)},n.__get_daylight=function(){return n.asm._get_daylight.apply(null,arguments)},n.__get_timezone=function(){return n.asm._get_timezone.apply(null,arguments)},n._setThrew=function(){return n.asm.setThrew.apply(null,arguments)}),La=n.__ZSt18uncaught_exceptionv=function(){return n.asm._ZSt18uncaught_exceptionv.apply(null,arguments)},Ha=n.___getTypeName=function(){return n.asm.__getTypeName.apply(null,arguments)},Ra=(n.___embind_register_native_and_builtin_types=function(){return n.asm.__embind_register_native_and_builtin_types.apply(null,arguments)},n._memalign=function(){return n.asm.memalign.apply(null,arguments)},n._emscripten_builtin_free=function(){return n.asm.emscripten_builtin_free.apply(null,arguments)},n._emscripten_builtin_memalign=function(){return n.asm.emscripten_builtin_memalign.apply(null,arguments)},n.dynCall_ffi=function(){return n.asm.dynCall_ffi.apply(null,arguments)}),Ma=n.dynCall_fi=function(){return n.asm.dynCall_fi.apply(null,arguments)},ja=n.dynCall_fiff=function(){return n.asm.dynCall_fiff.apply(null,arguments)},qa=n.dynCall_fiiii=function(){return n.asm.dynCall_fiiii.apply(null,arguments)},za=n.dynCall_ii=function(){return n.asm.dynCall_ii.apply(null,arguments)},Oa=n.dynCall_iif=function(){return n.asm.dynCall_iif.apply(null,arguments)},Ba=n.dynCall_iiff=function(){return n.asm.dynCall_iiff.apply(null,arguments)},Na=n.dynCall_iii=function(){return n.asm.dynCall_iii.apply(null,arguments)},Ua=n.dynCall_iiiff=function(){return n.asm.dynCall_iiiff.apply(null,arguments)},Va=n.dynCall_iiiffffiii=function(){return n.asm.dynCall_iiiffffiii.apply(null,arguments)},Wa=n.dynCall_iiiffi=function(){return n.asm.dynCall_iiiffi.apply(null,arguments)},Ya=n.dynCall_iiiffii=function(){return n.asm.dynCall_iiiffii.apply(null,arguments)},Ka=n.dynCall_iiiffiiiiiii=function(){return n.asm.dynCall_iiiffiiiiiii.apply(null,arguments)},Ga=n.dynCall_iiii=function(){return n.asm.dynCall_iiii.apply(null,arguments)},Qa=n.dynCall_iiiii=function(){return n.asm.dynCall_iiiii.apply(null,arguments)},Ja=n.dynCall_iiiiiffii=function(){return n.asm.dynCall_iiiiiffii.apply(null,arguments)},Za=n.dynCall_iiiiii=function(){return n.asm.dynCall_iiiiii.apply(null,arguments)},Xa=n.dynCall_iiiiiii=function(){return n.asm.dynCall_iiiiiii.apply(null,arguments)},$a=n.dynCall_iiiiiiii=function(){return n.asm.dynCall_iiiiiiii.apply(null,arguments)},tn=n.dynCall_iiiiiiiii=function(){return n.asm.dynCall_iiiiiiiii.apply(null,arguments)},en=n.dynCall_iiiiiiiiiii=function(){return n.asm.dynCall_iiiiiiiiiii.apply(null,arguments)},an=n.dynCall_vi=function(){return n.asm.dynCall_vi.apply(null,arguments)},nn=n.dynCall_vii=function(){return n.asm.dynCall_vii.apply(null,arguments)},on=n.dynCall_viif=function(){return n.asm.dynCall_viif.apply(null,arguments)},rn=n.dynCall_viiff=function(){return n.asm.dynCall_viiff.apply(null,arguments)},sn=n.dynCall_viiffff=function(){return n.asm.dynCall_viiffff.apply(null,arguments)},cn=n.dynCall_viiffffff=function(){return n.asm.dynCall_viiffffff.apply(null,arguments)},un=n.dynCall_viifffiiff=function(){return n.asm.dynCall_viifffiiff.apply(null,arguments)},ln=n.dynCall_viii=function(){return n.asm.dynCall_viii.apply(null,arguments)},dn=n.dynCall_viiii=function(){return n.asm.dynCall_viiii.apply(null,arguments)},hn=n.dynCall_viiiif=function(){return n.asm.dynCall_viiiif.apply(null,arguments)},fn=n.dynCall_viiiii=function(){return n.asm.dynCall_viiiii.apply(null,arguments)},pn=n.dynCall_viiiiiff=function(){return n.asm.dynCall_viiiiiff.apply(null,arguments)},gn=n.dynCall_viiiiii=function(){return n.asm.dynCall_viiiiii.apply(null,arguments)},mn=n.dynCall_viiiiiif=function(){return n.asm.dynCall_viiiiiif.apply(null,arguments)},yn=n.dynCall_viiiiiiif=function(){return n.asm.dynCall_viiiiiiif.apply(null,arguments)},wn=n.dynCall_viiiiiiii=function(){return n.asm.dynCall_viiiiiiii.apply(null,arguments)},vn=n.dynCall_viiiiiiiiii=function(){return n.asm.dynCall_viiiiiiiiii.apply(null,arguments)},Dn=n.dynCall_viiiiiiiiiiiii=function(){return n.asm.dynCall_viiiiiiiiiiiii.apply(null,arguments)},bn=n.stackSave=function(){return n.asm.stackSave.apply(null,arguments)},Tn=n.stackAlloc=function(){return n.asm.stackAlloc.apply(null,arguments)},_n=n.stackRestore=function(){return n.asm.stackRestore.apply(null,arguments)};n.__growWasmMemory=function(){return n.asm.__growWasmMemory.apply(null,arguments)},n.dynCall_v=function(){return n.asm.dynCall_v.apply(null,arguments)},n.dynCall_viffff=function(){return n.asm.dynCall_viffff.apply(null,arguments)},n.dynCall_vffff=function(){return n.asm.dynCall_vffff.apply(null,arguments)},n.dynCall_viiiiiiiii=function(){return n.asm.dynCall_viiiiiiiii.apply(null,arguments)},n.dynCall_viiiiiii=function(){return n.asm.dynCall_viiiiiii.apply(null,arguments)},n.dynCall_fif=function(){return n.asm.dynCall_fif.apply(null,arguments)},n.dynCall_jiji=function(){return n.asm.dynCall_jiji.apply(null,arguments)},n.dynCall_iidiiii=function(){return n.asm.dynCall_iidiiii.apply(null,arguments)},n.dynCall_iiiiij=function(){return n.asm.dynCall_iiiiij.apply(null,arguments)},n.dynCall_iiiiid=function(){return n.asm.dynCall_iiiiid.apply(null,arguments)},n.dynCall_iiiiijj=function(){return n.asm.dynCall_iiiiijj.apply(null,arguments)},n.dynCall_iiiiiijj=function(){return n.asm.dynCall_iiiiiijj.apply(null,arguments)};function xn(t,e){var a=bn();try{return za(t,e)}catch(t){if(_n(a),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Sn(t,e,a,n){var o=bn();try{return Ga(t,e,a,n)}catch(t){if(_n(o),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Cn(t,e,a,n,o,i){var r=bn();try{fn(t,e,a,n,o,i)}catch(t){if(_n(r),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Pn(t,e,a){var n=bn();try{nn(t,e,a)}catch(t){if(_n(n),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Fn(t,e){var a=bn();try{an(t,e)}catch(t){if(_n(a),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function kn(t,e,a,n){var o=bn();try{return Ba(t,e,a,n)}catch(t){if(_n(o),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function In(t,e,a){var n=bn();try{return Na(t,e,a)}catch(t){if(_n(n),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function An(t,e,a,n){var o=bn();try{ln(t,e,a,n)}catch(t){if(_n(o),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function En(t,e,a,n,o,i,r){var s=bn();try{gn(t,e,a,n,o,i,r)}catch(t){if(_n(s),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Ln(t,e,a,n){var o=bn();try{on(t,e,a,n)}catch(t){if(_n(o),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Hn(t,e,a,n,o,i){var r=bn();try{return Wa(t,e,a,n,o,i)}catch(t){if(_n(r),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Rn(t,e,a,n,o){var i=bn();try{return Qa(t,e,a,n,o)}catch(t){if(_n(i),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Mn(t,e,a,n,o){var i=bn();try{dn(t,e,a,n,o)}catch(t){if(_n(i),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function jn(t,e,a,n,o,i,r){var s=bn();try{return Ya(t,e,a,n,o,i,r)}catch(t){if(_n(s),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function qn(t,e,a){var n=bn();try{return Oa(t,e,a)}catch(t){if(_n(n),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function zn(t,e,a,n,o,i,r,s,c,u,l){var d=bn();try{vn(t,e,a,n,o,i,r,s,c,u,l)}catch(t){if(_n(d),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function On(t,e,a,n,o){var i=bn();try{return qa(t,e,a,n,o)}catch(t){if(_n(i),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Bn(t,e,a,n,o,i){var r=bn();try{return Za(t,e,a,n,o,i)}catch(t){if(_n(r),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Nn(t,e,a,n,o,i,r,s){var c=bn();try{mn(t,e,a,n,o,i,r,s)}catch(t){if(_n(c),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Un(t,e,a,n,o,i,r,s,c){var u=bn();try{return Ja(t,e,a,n,o,i,r,s,c)}catch(t){if(_n(u),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Vn(t,e){var a=bn();try{return Ma(t,e)}catch(t){if(_n(a),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Wn(t,e,a,n,o,i){var r=bn();try{hn(t,e,a,n,o,i)}catch(t){if(_n(r),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Yn(t,e,a,n,o,i,r,s){var c=bn();try{pn(t,e,a,n,o,i,r,s)}catch(t){if(_n(c),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Kn(t,e,a,n,o,i,r,s,c){var u=bn();try{yn(t,e,a,n,o,i,r,s,c)}catch(t){if(_n(u),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Gn(t,e,a,n,o,i,r){var s=bn();try{return Xa(t,e,a,n,o,i,r)}catch(t){if(_n(s),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Qn(t,e,a,n,o,i,r,s){var c=bn();try{return $a(t,e,a,n,o,i,r,s)}catch(t){if(_n(c),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Jn(t,e,a,n,o,i,r,s,c){var u=bn();try{return tn(t,e,a,n,o,i,r,s,c)}catch(t){if(_n(u),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Zn(t,e,a,n,o,i,r,s,c,u){var l=bn();try{return Va(t,e,a,n,o,i,r,s,c,u)}catch(t){if(_n(l),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function Xn(t,e,a,n,o,i,r,s,c){var u=bn();try{wn(t,e,a,n,o,i,r,s,c)}catch(t){if(_n(u),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function $n(t,e,a,n,o,i,r,s,c,u,l,d){var h=bn();try{return Ka(t,e,a,n,o,i,r,s,c,u,l,d)}catch(t){if(_n(h),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function to(t,e,a,n,o,i,r,s,c,u,l){var d=bn();try{return en(t,e,a,n,o,i,r,s,c,u,l)}catch(t){if(_n(d),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function eo(t,e,a,n,o,i,r,s,c,u,l,d,h,f){var p=bn();try{Dn(t,e,a,n,o,i,r,s,c,u,l,d,h,f)}catch(t){if(_n(p),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function ao(t,e,a){var n=bn();try{return Ra(t,e,a)}catch(t){if(_n(n),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function no(t,e,a,n,o){var i=bn();try{return Ua(t,e,a,n,o)}catch(t){if(_n(i),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function oo(t,e,a,n){var o=bn();try{return ja(t,e,a,n)}catch(t){if(_n(o),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function io(t,e,a,n,o){var i=bn();try{rn(t,e,a,n,o)}catch(t){if(_n(i),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function ro(t,e,a,n,o,i,r,s,c){var u=bn();try{cn(t,e,a,n,o,i,r,s,c)}catch(t){if(_n(u),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function so(t,e,a,n,o,i,r){var s=bn();try{sn(t,e,a,n,o,i,r)}catch(t){if(_n(s),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function co(t,e,a,n,o,i,r,s,c,u){var l=bn();try{un(t,e,a,n,o,i,r,s,c,u)}catch(t){if(_n(l),t!==t+0&&"longjmp"!==t)throw t;Ea(1,0)}}function uo(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}n.asm=Ca,n.then=function(t){if(Pa)t(n);else{var e=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){e&&e(),t(n)}}return n};function lo(t){var e=n._main,a=(t=t||[]).length+1,o=Tn(4*(a+1));B[o>>2]=L(s);for(var i=1;i<a;i++)B[(o>>2)+i]=L(t[i-1]);B[(o>>2)+a]=0;try{fo(e(a,o),!0)}catch(t){if(t instanceof uo)return;if("unwind"==t)return void(w=!0);var r=t;t&&"object"===(void 0===t?"undefined":x(t))&&t.stack&&(r=[t,t.stack]),m("exception thrown: "+r),c(1,t)}finally{!0}}function ho(t){function a(){Pa||(Pa=!0,S||(ot(),it(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),po&&lo(t),st()))}t=t||r,dt>0||(nt(),dt>0||(n.setStatus?(n.setStatus("Running..."),e((function(){e((function(){n.setStatus("")}),1),a()}),1)):a()))}function fo(t,e){e&&w&&0===t||(w||(S=!0,t,rt(),n.onExit&&n.onExit(t)),c(t,new uo(t)))}if(ft=function t(){Pa||ho(),Pa||(ft=t)},n.run=ho,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();var po=!0;return n.noInitialRun&&(po=!1),w=!0,ho(),t}}();"object"===(void 0===n?"undefined":x(n))&&"object"===(void 0===a?"undefined":x(a))?a.exports=S:"function"==typeof o&&o.amd?o([],(function(){return S})):"object"===(void 0===n?"undefined":x(n))&&(n.JGCW=S)})),window.define("utils/HKSWF/Rect",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var _=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=0,this.y=0,this.w=0,this.h=0}return _(t,[{key:"setRect",value:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}},{key:"maxY",value:function(){return this.y+this.h}},{key:"pointAt",value:function(t){return t.x<=this.x&&t.y<=this.y?1:t.x>=this.x&&t.x<=this.x+this.w&&t.y<=this.y?2:t.x>=this.x+this.w&&t.y<=this.y?3:t.x<=this.x&&t.y<=this.y+this.h&&t.y>=this.y?4:t.x>=this.x&&t.x<=this.x+this.w&&t.y<=this.y+this.h&&t.y>=this.y?5:t.x>=this.x+this.w&&t.y<=this.y+this.h&&t.y>=this.y?6:t.x<=this.x&&t.y>=this.y+this.h?7:t.x>=this.x&&t.x<=this.x+this.w&&t.y>=this.y+this.h?8:t.x>=this.x+this.w&&t.y>=this.y+this.h?9:void 0}},{key:"containPoint",value:function(t){return 5==this.pointAt(t)}},{key:"vcontainPoint",value:function(t){var e=this.pointAt(t);return 2==e||8==e}},{key:"hContainPoint",value:function(t){var e=this.pointAt(t);return 4==e||6==e}}]),t}();a.Rect=x})),window.define("utils/HKSWF/select",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SWFSelect=a.Line=void 0;var _=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),x=t("./Rect");function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t){var e=t.match(/\\u[0-9a-fA-F]{4}/g);if(null===e)return"";for(var a=0;a<e.length;a++)t=t.replace(e[a],unescape(e[a].replace("\\u","%u")));return t}var P=function t(){S(this,t),this.x=0,this.y=0},F=function t(){S(this,t),this.rect=new x.Rect,this.str=""},k=a.Line=function t(){S(this,t),this.str="",this.rect=new x.Rect,this.words=new Array},I=function t(){S(this,t),this.line=new k,this.order=0},A=function(){function t(e){S(this,t),this.rects=new Array,this.text_lines=new Array,this.pageRect=new x.Rect,this.contenRect=new x.Rect,this.curr_line=new k,this.from_line=new I,this.to_line=new I,this.init(e)}return _(t,[{key:"init",value:function(t){var e=t.split("\n\n");if(e.length>1){var a=e[0].split(" ");4===a.length&&(this.pageRect.x=parseFloat(a[0]),this.pageRect.y=parseFloat(a[1]),this.pageRect.w=parseFloat(a[2]),this.pageRect.h=parseFloat(a[3]));var n=e[1].split(" ");4===n.length&&(this.contenRect.x=parseFloat(n[0]),this.contenRect.y=parseFloat(n[1]),this.contenRect.w=parseFloat(n[2]),this.contenRect.h=parseFloat(n[3]));for(var o=2;o<e.length;o++){var i=e[o].split("\n"),r=new k;if(i.length>1){4===(u=i[0].split(" ")).length&&(this.text_lines.push(r),r.rect.x=parseFloat(u[0]),r.rect.y=parseFloat(u[1]),r.rect.w=parseFloat(u[2]),r.rect.h=parseFloat(u[3]));for(var s=1;s<i.length;s++){var c=(t=i[s]).split(",");if(2===c.length){var u,l=C(c[0]);if(4===(u=c[1].split(" ")).length){var d=parseFloat(u[0]),h=parseFloat(u[1]),f=parseFloat(u[2]),p=parseFloat(u[3]),g=new F;g.str=l,g.rect.x=d,g.rect.y=h,g.rect.w=f,g.rect.h=p,r.words.push(g)}}}}}}}},{key:"scaleHeight",value:function(t){return this.pageRect.h*(t/this.pageRect.w)}},{key:"scaleContentHeight",value:function(t){return this.contenRect.h*(t/this.contenRect.w)}},{key:"select",value:function(t,e){this.rects=new Array;var a=new P,n=new P;t.y<e.y?(a=t,n=e):(a=e,n=t);for(var o=0;o<this.text_lines.length;o++){var i=this.text_lines[o];if(i.words.length>0){var r=i.rect.y,s=r+i.rect.h;if(a.y<s&&r<n.y){var c=a.y>r,u=n.y<s,l=-4294967296,d=4294967296;c&&u?(l=Math.min(a.x,n.x),d=Math.max(a.x,n.x)):c?l=a.x:u&&(d=n.x),this.startBlock;for(var h=0;h<i.words.length;h++){var f=i.words[h],p=f.rect.x;p+f.rect.w>l&&p<d&&this.wordBlock(f)}this.endBLock}}}return this.rects}},{key:"startBlock",value:function(){var t=new k;this.rects.push(t)}},{key:"wordBlock",value:function(t){var e=this.rects[this.rects.length-1];e.str+=t.str,e.rect=this.rectUnion(e.rect,t.rect)}},{key:"endBLock",value:function(){}},{key:"select2",value:function(t,e){this.start_p=t,this.end_p=e,this.rects=[];for(var a=this.boundary(t,e),n=a.start,o=a.end,i=0,r=0;r<this.text_lines.length;r++){var s=this.text_lines[r];if(s.words.length>0){this.startBlock;for(var c=0;c<s.words.length;c++){i++;var u=s.words[c];i>=n&&i<=o&&this.wordBlock(u)}this.endBLock}if(i>o)break}return this.rects}},{key:"boundary",value:function(t,e){var a=!1;this.from_line=this.getlines(t),this.to_line=this.getlines(e);var n=0,o=0,i=this.from_line.order,r=this.to_line.order;if(i===r&&!this.point_in_line(this.curr_line,t)&&!this.point_in_line(this.curr_line,e)&&this.sameSideOfLine(this.wordAtLine(this.curr_line,t),this.wordAtLine(this.curr_line,e)))return{start:0,end:0};for(var s=0,c=0;c<this.from_line.order;c++)s+=this.text_lines[c].words.length;var u=0;for(c=0;c<this.to_line.order;c++)u+=this.text_lines[c].words.length;a=i!=r?i>r:t.x>e.x;var l=this.getWordFrom(this.from_line.line,t,a,s),d=this.getWordTo(this.to_line.line,e,a,u);return a?(n=d,o=l):(n=l,o=d),{start:n,end:o}}},{key:"getlines",value:function(t){for(var e=4294967296,a=0,n=new I,o=0;o<this.text_lines.length;o++){var i=new x.Rect;if((i=this.text_lines[o].rect).containPoint(t))a=0;else if(i.hContainPoint(t))a=t.x<i.x?this.dist2(i.x-t.x,0):t.x>i.x+i.w?this.dist2(t.x-i.x-i.w,0):0;else if(i.vcontainPoint(t))a=t.y<i.y?this.dist2(i.y-t.y,0):t.y>i.y+i.h?this.dist2(t.y-i.y-i.h,0):0;else{var r=this.dist2(t.x-i.x,t.y-i.y),s=this.dist2(t.x-i.x,t.y-i.y-i.h),c=this.dist2(t.x-i.x-i.w,t.y-i.y),u=this.dist2(t.x-i.x-i.w,t.y-i.y-i.h);a=Math.min(Math.min(r,s),Math.min(c,u))}a<e&&(e=a,n.line=this.text_lines[o],n.order=o,this.curr_line=this.text_lines[o])}return n}},{key:"getWordFrom",value:function(t,e,a,n){for(var o=0,i=0,r=0,s=4294967296,c=0;c<t.words.length;c++){var u=new F,l=((u=t.words[c]).rect.x+u.rect.x+u.rect.w)/2,d=(u.rect.y+u.rect.y+u.rect.h)/2;if((r=this.dist2(e.x-l,e.y-d))<s){s=r;var h=this.wordAtLine(t,e);if(a)switch(h){case 1:case 2:case 3:case 4:i=n;break;case 6:case 7:case 8:case 9:i=n+t.words.length;break;case 5:i=n+o+1}else switch(h){case 3:i=n+1;break;case 1:case 2:case 4:i=n+o+1;break;case 6:case 7:case 8:case 9:i=n+t.words.length+1;break;case 5:i=n+o+1}}++o}return i}},{key:"getWordTo",value:function(t,e,a,n){for(var o=0,i=0,r=0,s=4294967296,c=0;c<t.words.length;c++){var u=new F,l=((u=t.words[c]).rect.x+u.rect.x+u.rect.w)/2,d=(u.rect.y+u.rect.y+u.rect.h)/2;if((r=this.dist2(e.x-l,e.y-d))<s){s=r;var h=this.wordAtLine(t,e);if(a)switch(h){case 1:case 2:case 3:case 4:i=n+1;break;case 6:case 7:case 8:case 9:i=n+t.words.length+1;break;case 5:i=n+o+1}else switch(h){case 1:case 2:case 3:case 4:i=n;break;case 6:i=n+t.words.length;break;case 7:case 8:case 9:case 5:i=n+o+1}}++o}return i}},{key:"wordAtLine",value:function(t,e){return e.x<=t.rect.x&&e.y<=t.rect.y?1:e.x>=t.rect.x&&e.x<=t.rect.x+t.rect.w&&e.y<=t.rect.y?2:e.x>=t.rect.x+t.rect.w&&e.y<=t.rect.y?3:e.x<=t.rect.x&&e.y<=t.rect.y+t.rect.h&&e.y>=t.rect.y?4:e.x>=t.rect.x&&e.x<=t.rect.x+t.rect.w&&e.y<=t.rect.y+t.rect.h&&e.y>=t.rect.y?5:e.x>=t.rect.x+t.rect.w&&e.y<=t.rect.y+t.rect.h&&e.y>=t.rect.y?6:e.x<=t.rect.x&&e.y>=t.rect.y+t.rect.h?7:e.x>=t.rect.x&&e.x<=t.rect.x+t.rect.w&&e.y>=t.rect.y+t.rect.h?8:e.x>=t.rect.x+t.rect.w&&e.y>=t.rect.y+t.rect.h?9:void 0}},{key:"sameSideOfLine",value:function(t,e){switch(t){case 1:if(1===e||2===e||3===e||4===e||7===e)return!0;break;case 2:if(1===e||2===e||3===e)return!0;break;case 3:if(1===e||2===e||3===e||6===e||9===e)return!0;break;case 4:if(1===e||4===e||7===e)return!0;break;case 5:return!1;case 6:if(3===e||6===e||9===e)return!0;break;case 7:if(1===e||4===e||7===e)return!0;break;case 8:if(7===e||8===e||9===e)return!0;break;case 9:if(3===e||6===e||9===e)return!0;break;default:return!1}}},{key:"point_in_line",value:function(t,e){return e.x>=t.rect.x&&e.x<=t.rect.x+t.rect.w&&e.y>=t.rect.y&&e.y<=t.rect.y+t.rect.h}},{key:"dist2",value:function(t,e){return t*t+e*e}},{key:"rectUnion",value:function(t,e){var a=new x.Rect;if(t.w&&t.h&&e.w&&e.h){a.x=Math.min(t.x,e.x),a.y=Math.min(t.y,e.y);var n=Math.max(t.x+t.w,e.x+e.w),o=Math.max(t.y+t.h,e.y+e.h);return a.w=n-a.x,a.h=o-a.y,a}return t.w?(a.setRect(t),a):(a.setRect(e),a)}}]),t}();a.SWFSelect=A})),window.define("utils/stat",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){return o.request({url:t,success:function(t){},fail:function(t){console.log(t)}}),!0}e.exports={inpv:function(t){void 0!==t&&null!=t&&""!=t&&_("https://img.docin.com/app/load/page?pid="+t+"&time="+(new Date).getTime())},inpmv:function(t){void 0!==t&&null!=t&&""!=t&&_("https://img.docin.com/app/load/module?mid="+t+"&time="+(new Date).getTime())}}})),window.define("utils/util",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=function(t){return(t=t.toString())[1]?t:"0"+t};e.exports={formatTime:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),i=t.getMinutes(),r=t.getSeconds();return[e,a,n].map(_).join("/")+" "+[o,i,r].map(_).join(":")},throttle:function(t,e){null!=e&&null!=e||(e=1500);var a=null;return function(){var n=+new Date;(n-a>e||!a)&&(t.apply(this,arguments),a=n)}},randomNum:function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},isPoneAvailable:function(t){return!!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t)},timestampToTime:function(t,e){var a=new Date(t),n=a.getFullYear()+"-",o=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",i=(a.getDate()<10?"0"+a.getDate():a.getDate())+" ",r=(a.getHours()<10?"0"+a.getHours():a.getHours())+":",s=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();return 1==e?n+o+i+r+s:2==e?o+i:void 0},checkEmail:function(t){return!!/^([a-zA-Z0-9_\-\.\+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.test(t)},getPagePath:function(){var t=getCurrentPages();return t[t.length-1].privateProperties.accessUri},deleteURLQuery:function(t){return t.replace(/docId=([^&]*)(&|$)/,"")},replaceUrlQuery:function(t){return t.replace("documentId","docId")}}})),window.define("utils/web",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=1,x=o.getEnvInfoSync().env;try{_="production"===x?2:1}catch(t){console.log(t),_=1}e.exports={ifLocal:_,isDisplay:function(){return 1==_},docinDomain:function(){return 1==_?"https://t.docin.com":"https://www.docin.com"}}})),window.define("pages/index/index",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";function x(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var S=r(),C=t("../../utils/web.js"),P=t("../../utils/util.js"),F=t("../../utils/stat.js"),k=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:S.globalData.ifIos,motto:"Hello World",userInfo:{},hasUserInfo:!1,canIUse:i.canIUse("button.open-type.getUserInfo"),pageNumber:1,pageAmount:20,recdoclists:[],showBacktop:!1,showSearchFloor:!1,showSearchMiddle:!0,searchPlaceholder:"搜索文档或关键词",searchTxt:"",autoFocus:!1,showClear:!1,hotArray:[],historyArray:[],ifShowIndex:!0,ifExistHistory:!1,tabIndex:!0,fixedTop:!1,loadMoreTxt:"点击加载更多",dynamicPrefix:"",status:0,navHeight:0,showLoadMore:!1,ifTest:!1,testPid:""},onPageScroll:function(t){var e=this,a=i.getSystemInfoSync().screenHeight;t.scrollTop>.8*a?this.setData({showBacktop:!0}):this.setData({showBacktop:!1});var n=i.createSelectorQuery();n.select(".search-box-new").boundingClientRect(),n.exec((function(a){var n=a[0].top;t.scrollTop>n?e.setData({fixedTop:!0}):e.setData({fixedTop:!1})}))},goBackTop:function(){i.pageScrollTo({scrollTop:0,duration:300})},turnIndex:function(){i.reLaunch({url:"../index/index"})},turnmine:function(){i.request({url:C.docinDomain()+"/mini/bdIsLogin.do",header:S.globalData.requestHeader,success:function(t){1==t.data.code?i.navigateTo({url:"../my/my"}):2==t.data.code&&(i.setStorage({key:"sessionId",data:t.data.sessionid}),i.navigateTo({url:"../login/login?source=index&action=my"}))},fail:function(t){console.log(t)}})},getTestPid:function(t){this.setData({testPid:t.detail.value})},testTurn:function(){var t=this;if(""==this.data.testPid.trim())return!1;i.request({url:C.docinDomain()+"/mini/queryPsInfo.do?id="+t.data.testPid,success:function(e){null==e.data.data?i.navigateTo({url:"../notfound/notfound"}):i.navigateTo({url:"../result/result?documentId="+t.data.testPid}),t.setData({testPid:""})},fail:function(t){console.log(t)}})},gotoResult:P.throttle((function(t){F.inpmv(7120);var e=t.currentTarget.dataset.docid;i.request({url:C.docinDomain()+"/mini/queryPsInfo.do?id="+e,success:function(t){null==t.data.data?i.reLaunch({url:"../notfound/notfound"}):i.reLaunch({url:"../result/result?documentId="+e})}})})),showSearch:function(){F.inpmv(689),this.setData({showSearchFloor:!0,autoFocus:!0}),this.getHotSearch(),this.getHistorySearch()},cancelSearch:function(){this.setData({showSearchFloor:!1,searchTxt:"",autoFocus:!1})},changeInput:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},confirmInput:function(t){if(""==t.detail.value.trim())return this.setData({autoFocus:!0,searchTxt:""}),!1;this.publicTurnSearch(t.detail.value)},getFocus:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},getBlur:function(){this.setData({autoFocus:!1})},clearValue:function(){this.setData({searchTxt:"",showClear:!1,autoFocus:!0})},forceFocus:function(){this.setData({autoFocus:!0})},getHotSearch:function(){var t=this;i.request({url:C.docinDomain()+"/mini/ajax_search_layer.do",success:function(e){e.data.data.list.length>0&&t.setData({hotArray:e.data.data.list})},fail:function(t){console.log(t)}})},setHistorySearch:function(t,e){var a=this;i.getStorage({key:"historyArray",success:function(n){9999!=e?(i.setStorage({key:"historyArray",data:Array.from(new Set([].concat(x(t))))}),a.getHistorySearch()):i.setStorage({key:"historyArray",data:Array.from(new Set([].concat(x(t),x(n.data))))})},fail:function(t){console.log(t)}})},getHistorySearch:function(){var t=this;i.getStorage({key:"historyArray",success:function(e){0==e.data.length?t.setData({ifExistHistory:!1}):t.setData({ifExistHistory:!0,historyArray:e.data.length<=5?e.data:e.data.slice(0,5)})},fail:function(t){console.log(t)}})},turnSearch:function(t){this.publicTurnSearch(t.currentTarget.dataset.key)},publicTurnSearch:function(t){this.setHistorySearch(new Array(t),9999),i.reLaunch({url:"../search/search?sourceFrom=index&key="+t}),this.setData({showSearchFloor:!1,searchTxt:""})},removeHistory:function(){i.clearStorage({}),this.getHistorySearch()},deleteHistory:function(t){var e=this.data.historyArray;e.splice(t.currentTarget.dataset.sub,1),this.setHistorySearch(e,t.currentTarget.dataset.sub)},onShow:function(){var t=r().getTracker();t.setScreenName("百度小程序-index"),t.send((new k.ScreenViewBuilder).build())},onLoad:function(t){var e=this;C.isDisplay()?this.setData({ifTest:!0}):this.setData({ifTest:!1}),i.showLoading({title:"正在加载中"}),F.inpv(688),S.publicHeader(),i.showFavoriteGuide({type:"tip",content:"关注小程序，下次使用更便捷。"}),this.setHistorySearch(new Array,9999);var a=this;i.request({url:C.docinDomain()+"/jsp_cn/mini/display.jsp",success:function(t){a.setData({dynamicPrefix:t.data.data.st})}}),this.requestRecList(this.data.pageNumber,this.data.pageAmount),S.globalData.userInfo?this.setData({userInfo:S.globalData.userInfo,hasUserInfo:!0}):this.data.canIUse?S.userInfoReadyCallback=function(t){e.setData({userInfo:t.userInfo,hasUserInfo:!0})}:i.getUserInfo({success:function(t){S.globalData.userInfo=t.userInfo,e.setData({userInfo:t.userInfo,hasUserInfo:!0})}})},loadMore:function(){var t=this.data.pageNumber;t++,this.setData({pageNumber:t,loadMoreTxt:"正在加载..."}),this.requestRecList(this.data.pageNumber,this.data.pageAmount)},requestRecList:function(t,e){var a=this;i.request({url:C.docinDomain()+"/mini/indexList.do?pageNum="+t+"&pageSize="+e,success:function(t){if(i.hideLoading(),console.log(t),200==t.statusCode)if(0!=t.data.data.list.length){var e=[].concat(x(a.data.recdoclists),x(t.data.data.list));a.setData({recdoclists:e,showLoadMore:!0})}else a.setData({loadMoreTxt:"已经到底儿啦~"});else a.reLoadRecList()},fail:function(t){console.log(t),a.reLoadRecList()},complete:function(){a.setData({loadMoreTxt:"点击加载更多"})}})},reLoadRecList:function(){var t=this,a=0;i.hideLoading(),t.data.reLoadTimes&&t.data.reLoadTimes>1?i.showToast({title:"请重启程序，或联系我们",duration:1e4,icon:"none",mask:!1}):(a=t.data.reLoadTimes?t.data.reLoadTimes+1:1,t.setData({reLoadTimes:a}),i.showLoading({title:"重新加载中"}),e((function(){t.requestRecList(t.data.pageNumber,t.data.pageAmount)}),3e3))}})})),window.define("pages/result/result",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x=t("../../utils/HKSWF/HKSWF");function S(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function C(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var P,F=r(),k=t("../../utils/web.js"),I=t("../../utils/util.js"),A=t("../../utils/ga.js"),E=t("../../utils/stat.js"),L=A.HitBuilders;Page({data:{ifIos:F.globalData.ifIos,htmlView:!1,picView:!1,spiderView:!1,spiderContent:"",othersView:!1,documentId:0,twoPageMore:!1,firstTimeHeight:0,htmlPageCount:0,ifGoodProduct:!1,fivePageMore:!1,loadedSection:1,currentPageIndex:0,unReadPercent:0,docDetaiInfo:{},docArticleList:[],ifTwoClick:!0,formatFilesize:"",picDetailInfo:[],picPageCount:0,picCurrentIndex:0,phoneWidth:0,slideHeight:0,slideHeight1:240,imgsHeightArr:[],ifFullScreen:!0,ifFullWrap:!1,ifLast:!1,pdfDetailInfo:{},cutDetailInfo:{},originalWidth:1e3,originalHeight:0,originalScale:1,tempScale:0,initGap:150,padd:10,paddH:15,iScale:0,arrPicData:[],clientWidth:0,picWrapHeight:0,reqFlag:!1,commonObj:{},ifShowEnd:!1,testNumber:0,showBacktop:!1,showSearchFloor:!1,showSearchMiddle:!0,searchPlaceholder:"搜索文档或关键词",searchTxt:"",autoFocus:!1,showClear:!1,hotArray:[],historyArray:[],ifShowIndex:!1,ifExistHistory:!1,collectText:"收藏",ifCollected:!1,collectContainer:!1,reportContainer:!1,reportOne:!1,reportTwo:!1,reportTitle:"",reportContent:"",reportColor:!0,showRelative:!1,relDocsArray:[],relDocsArray1:[],relRandomPid:0,ifDownload:0,ifFree:!1,ifEqual:0,downloadStatus:!1,downloadTxt:"立即下载",payType:2,ifShowCharge:!1,payTxt:"立即购买",showpayShadowCenter:!1,showpayShadowBottom:!1,showpayOne:!1,showpayTwo:!1,docrelpriceOne:"",docrelpriceTwo:"",ifdownloadChecked:!0,ifreadChecked:!1,ampleMoney:!1,noAmpleMoney:!1,restMoney:"",needPrice:"",rechargeArray:[],currentTab:0,showPayWay:!1,currentPay:0,rechargeMoney:0,ifpaySuccess:!1,showsaveShadow:!1,showSaveLocal:!0,downloadUrl:"",showforbiddenShadow:!1,nickName:"",showPublicShadow:!1,commonShareTitle:"",loginStatus:!1,isLogin:!1,detailObj:{},ifCommonVip:!1,doctype:1,showSpecial:!1,ifFirstTime:!1,picFlag:1,fixedTop:!1,showFixTop:!0,showFixBottom:!0,slideStyle:{},ifEnough:!0,showTip:!1,tipOne:!0,tipTwo:!1,ifShowSlideFloor:!1,showsendShadow:!1,showSuccessShadow:!1,showfailEmail:!1,emailValue:"",emailValue1:"",emailValue2:"",emailTip:"文档将以附件的形式发送到邮箱",showEmailCode:!1,emailCode:"",emailCodePic:"",sendTxt:"发送",emailFailTxt:"抱歉，该文档超过每日发送限制，请明日再试",codeFocus:!1,codeTip:"请输入图片中的字符",emailFocus:!1,changePosition:!1,showEmailList:!1,emailListArray:[],contactTxt:"",showMatchBox:!1,matchList:[],swiperCurrent:0,canvasSize:{}},onPageScroll:function(t){var e=this,a=i.getSystemInfoSync().screenHeight;t.scrollTop>.8*a?(this.setData({showBacktop:!0}),this.data.showTip&&this.setData({showTip:!1})):this.setData({showBacktop:!1});var n=i.createSelectorQuery();n.select(".detailCon-top-box").boundingClientRect(),n.exec((function(a){if(null!=a[0]){var n=a[0].top;t.scrollTop>n?e.setData({fixedTop:!0}):e.setData({fixedTop:!1})}}))},goBackTop:function(){i.pageScrollTo({scrollTop:0,duration:300})},showSearch:function(){E.inpmv(689),this.setData({showSearchFloor:!0,autoFocus:!0}),this.getHotSearch(this.data.detailObj.productName),this.getHistorySearch()},cancelSearch:function(){this.setData({showSearchFloor:!1,searchTxt:"",autoFocus:!1})},changeInput:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},confirmInput:function(t){if(""==t.detail.value.trim())return this.setData({autoFocus:!0,searchTxt:""}),!1;this.publicTurnSearch(t.detail.value)},getFocus:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},getBlur:function(){this.setData({autoFocus:!1})},clearValue:function(){this.setData({searchTxt:"",showClear:!1,autoFocus:!0})},forceFocus:function(){this.setData({autoFocus:!0})},getHotSearch:function(t){var e=this;i.request({url:k.docinDomain()+"/mini/ajax_search_layer.do",header:F.globalData.requestHeader,data:{isEnd:"true",productName:t},success:function(a){a.data.data.list.length>0&&e.setData({hotArray:[].concat(C(new Array(t)),C(a.data.data.list))})},fail:function(t){console.log(t)}})},setHistorySearch:function(t,e){var a=this;i.getStorage({key:"historyArray",success:function(n){9999!=e?(i.setStorage({key:"historyArray",data:Array.from(new Set([].concat(C(t))))}),a.getHistorySearch()):i.setStorage({key:"historyArray",data:Array.from(new Set([].concat(C(t),C(n.data))))})},fail:function(t){console.log(t)}})},getHistorySearch:function(){var t=this;i.getStorage({key:"historyArray",success:function(e){0==e.data.length?t.setData({ifExistHistory:!1}):t.setData({ifExistHistory:!0,historyArray:e.data.length<=5?e.data:e.data.slice(0,5)})},fail:function(t){console.log(t)}})},turnSearch:function(t){this.publicTurnSearch(t.currentTarget.dataset.key)},publicTurnSearch:function(t){this.setHistorySearch(new Array(t),9999),i.reLaunch({url:"../search/search?sourceFrom=result&key="+t+"&pid="+this.data.documentId}),this.setData({showSearchFloor:!1,searchTxt:""})},removeHistory:function(){i.clearStorage({}),this.getHistorySearch()},deleteHistory:function(t){var e=this.data.historyArray;e.splice(t.currentTarget.dataset.sub,1),this.setHistorySearch(e,t.currentTarget.dataset.sub)},onShow:function(){var t=this;i.request({url:k.docinDomain()+"/mini/queryPsInfo.do",header:F.globalData.requestHeader,data:{id:this.data.documentId,fromHtml:1==this.data.picFlag?0:1},success:function(t){null!=t.data.data&&i.setPageInfo({title:t.data.data.ps.productName,keywords:t.data.data.ps.keyword,description:t.data.data.ps.productDesc,success:function(t){console.log("setPageInfo success")},fail:function(t){console.log("setPageInfo fail",t)}})},fail:function(t){console.log(t)}});var e=r().getTracker();e.setScreenName("百度小程序-result"),e.send((new L.ScreenViewBuilder).build()),i.getStorage({key:"ifTip",success:function(e){""==e.data?(t.setData({showTip:!0}),i.setStorage({key:"ifTip",data:!0})):t.setData({showTip:!1})}})},onLoad:function(t){i.showLoading({title:"正在加载中"}),E.inpv(687),F.publicHeader(),this.setData({documentId:t.documentId});var e=this;i.request({url:k.docinDomain()+"/mini/bdIsLogin.do",header:F.globalData.requestHeader,success:function(a){1==a.data.code?(e.setData({loginStatus:!0}),"download"==t.action?"fail"==t.status?i.showToast({title:"支付失败或取消",icon:"none"}):e.downloadNow():"collect"==t.action?e.collect():"report"==t.action?e.showReport():"buy"==t.action?(e.setData({payType:1}),e.payNow()):"sendEmail"==t.action&&e.sendDocument()):2==a.data.code&&(i.setStorage({key:"sessionId",data:a.data.sessionid}),e.setData({loginStatus:!1}))},fail:function(t){console.log(t)}}),i.getSystemInfo({success:function(t){e.setData({pagewidth:t.screenWidth,phoneWidth:t.windowWidth,slideHeight:t.windowHeight-115}),e.setData({slideStyle:{height:e.data.slideHeight+"px"}})}}),this.requestEnd(this.data.documentId,this.data.picFlag),0==I.randomNum(0,3)?this.setData({reqFlag:!0}):this.setData({reqFlag:!1})},requestEnd:function(t,e){var a=this;i.request({url:k.docinDomain()+"/mini/queryPsInfo.do",header:F.globalData.requestHeader,data:{id:t,fromHtml:1==e?0:1},success:function(t){if(null==t.data.data)i.reLaunch({url:"../notfound/notfound"});else{i.hideLoading(),a.setData({isLowQuality:t.data.data.isLowQuality}),a.setData({isLogin:t.data.data.endPage.isLogin,ifGoodProduct:t.data.data.isGoodProduct,formatFileSize:t.data.data.formatFileSize,ifDownload:t.data.data.ps.ifcharge,commonShareTitle:t.data.data.ps.productName+"."+t.data.data.ps.filePostfix,nickName:t.data.data.endPage.shortUserName,ifCommonVip:t.data.data.endPage.ifVip,showMatchBox:t.data.data.endPage.isMaiQi,matchArray:t.data.data.endPage.mqRecommends});var e=a.checkIsCanDownLocal(a.data.formatFileSize);a.setData({canDownLocal:e});var n=t.data.data.endPage;a.setData({testCon:n.type}),n.invoiceid>0?a.setData({collectText:"已收藏",ifCollected:!0}):a.setData({collectText:"收藏",ifCollected:!1});var o=a.data.ifDownload,r=0;0==o||1==o||4==o?(r="previewPage_v3"==n.type?n.allPages:n.pageCount,0==o&&a.setData({ifFree:!0})):3!=o&&6!=o||(r=n.isCanReadCount,3==o&&(a.setData({ifEqual:n.priceEq}),3==n.isCanRead?a.setData({payTxt:"充值并购买"}):a.setData({payTxt:"立即购买"}))),4!=o&&6!=o||a.setData({downloadStatus:!0,downloadTxt:"禁止下载"});var s={pid:"previewPage_v3"==n.type?n.PID:n.productId,sid:"previewPicCut"==n.type||"previewPage_v3"==n.type?n.sid:n.secretId,pageCount:"previewPage_v3"==n.type?n.allPages:n.pageCount,pageCountOnline:r,perNum:5,isExcel:null!=n.includeTable&&n.includeTable,wordToHkHtml:null!=n.includeTable&&n.wordToHkHtml},c=t.data.data.ps;c.createdDate=I.timestampToTime(c.createdDate,1),a.setData({commonObj:s,detailObj:c}),"previewPage_v3"==n.type?(a.setData({othersView:!0,spiderView:!1,picView:!0,htmlView:!1}),a.loadImg(a.data.commonObj)):"previewHtml_v3"==n.type?(a.setData({othersView:!0,spiderView:!1,htmlView:!0,picView:!1,doctype:1}),a.createPage(a.data.commonObj,"html")):"preview_pdf2html"==n.type?(a.setData({othersView:!0,spiderView:!1,htmlView:!0,picView:!1,doctype:2}),a.createPage(a.data.commonObj,"pdf")):"previewPicCut"==n.type?(a.setData({othersView:!0,spiderView:!1,htmlView:!0,picView:!1,doctype:3}),a.createPage(a.data.commonObj,"cut")):"previewCanvas"==n.type?(console.log("previewCanvas"),a.setData({othersView:!0,spiderView:!1,picView:!0,htmlView:!1,picCanvasView:!0,doctype:4}),a.initCanvasConfig("canvas"),a.loadImg(a.data.commonObj,"canvas")):"previewCanvasPicCut"==n.type?(console.log("previewCanvasPicCut"),a.setData({othersView:!0,spiderView:!1,htmlView:!1,picView:!1,canvasView:!0,doctype:5}),a.initCanvasConfig("canvasCut"),a.createPage(a.data.commonObj,"canvasCut")):"spider"==n.type&&a.setData({spiderView:!0,othersView:!1,spiderContent:n.cache}),a.requestRelatives(a.data.documentId)}},fail:function(t){console.log(t)}})},requestRelatives:function(t){var e=this;i.request({url:k.docinDomain()+"/mini/getRelateDocs.do",header:F.globalData.requestHeader,data:{id:t},success:function(t){if(t.data.data.length>0){e.setData({relDocsArray1:t.data.data}),e.data.htmlView&&e.setData({showRelative:!0}),t.data.data.length<=0?e.setData({relDocsArray:t.data.data}):e.setData({relDocsArray:t.data.data.slice(0,10)});for(var a=[],n=0;n<e.data.relDocsArray.length;n++)a.push(e.data.relDocsArray[n].productId);e.setData({relRandomPid:a[I.randomNum(0,a.length)]})}},fail:function(t){console.log(t)}})},turnResult:function(t){i.request({url:k.docinDomain()+"/mini/queryPsInfo.do?id="+t.currentTarget.dataset.docid,header:F.globalData.requestHeader,success:function(e){null==e.data.data?i.navigateTo({url:"../notfound/notfound"}):i.navigateTo({url:"../result/result?documentId="+t.currentTarget.dataset.docid})}})},swiperChangeCustom:function(t){this.setData({swiperCurrent:t.detail.current})},hideMatch:function(){this.setData({showMatchBox:!1})},clickForPages:function(){this.setData({twoPageMore:!1,ifTwoClick:!1,firstTimeHeight:1600})},createPage:function(t,e){var a=t.pageCount,n=t.pageCountOnline,o=t.perNum,i=this.data.loadedSection,r=n%o,s=0;s=0==r?o:r;var c=Math.ceil(n/o);if(1==c&&n<=o||0==c){var u=n;3!=this.data.ifDownload&&6!=this.data.ifDownload||a==n||this.setData({ifShowCharge:!0})}else if(i<c)u=o;else u=s;var l=i-1;if("canvasCut"==e){for(var d=new Array(u),h=[],f=0;f<d.length;f++)h.push({artCon:"",artIndex:o*l+f,pageTotal:a,pageOnline:n,ifLoading:!0,ifError:!1,errorObj:{},showPages:!1,imgCon:"",imgScale:0,parentHeight:0});console.log(h),this.setData(S({},"docArticleList["+l+"]",h))}else this.setData(S({},"docArticleList["+l+"]",[].concat(C(Array(u).fill({artCon:"",artIndex:0,pageTotal:a,pageOnline:n,ifLoading:!0,ifError:!1,errorObj:{},showPages:!1,imgCon:"",imgScale:0,parentHeight:0})))));this.loadHtmlNext(t,e,u)},loadHtml:function(t,e,a,n,o){var r=this,s=a,c=!1,u={},l="";"html"==e?r.data.commonObj.wordToHkHtml?l="https://page.douding.cn/huangke/docxinshi/api/swf2html?id="+t.pid+"&pn="+a+"&sid="+t.sid+"&from=baiduxcx":(a-=1,l="https://page.douding.cn/docinpage1/htm/des/"+t.pid+"_"+a+".docin4?addTag=1&sid="+t.sid):"pdf"==e?l="https://page.douding.cn/huangke/docxinshi/api/swf2html?id="+t.pid+"&pn="+a+"&sid="+t.sid+"&from=baiduxcx":"cut"==e?l=r.data.reqFlag?"https://docimg2.docin.com/docinpic.jsp?file="+t.pid+"&width=1000&sid="+t.sid+"&pageno="+a:"https://docimg1.docin.com/docinpic.jsp?file="+t.pid+"&width=1000&sid="+t.sid+"&pageno="+a:"canvasCut"==e&&(l="");var d=r.data.loadedSection-1;if(o-=1,""==l){var h=s-1;r.loadCanvas(h,e).then((function(a){var i;r.loadHtmlNext(t,e,n),console.log("loadCanvas",a);var s="docArticleList["+d+"]["+o+"].artIndex",l="docArticleList["+d+"]["+o+"].ifLoading",f="docArticleList["+d+"]["+o+"].ifError",p="docArticleList["+d+"]["+o+"].errorObj",g="docArticleList["+d+"]["+o+"].showPages",m="docArticleList["+d+"]["+o+"].imgScale";r.setData((S(i={},s,h),S(i,l,c),S(i,f,c),S(i,p,u),S(i,g,!0),S(i,m,r.data.iScale),i))})).catch((function(i){var s;r.loadHtmlNext(t,e,n),console.log("loadCanvas",i),c=!0,u.requestInfo=t,u.sourceFrom=e,u.pageNum=a,u.restNum=n,u.testNum=o+1;var l="docArticleList["+d+"]["+o+"].ifLoading",h="docArticleList["+d+"]["+o+"].ifError",f="docArticleList["+d+"]["+o+"].errorObj";r.setData((S(s={},l,c),S(s,h,c),S(s,f,u),s))}))}else i.request({url:l,header:F.globalData.requestHeader,responseType:"cut"==e?"arraybuffer":"text",success:function(l){var h;if(200==l.statusCode&&null!=l.data){if(c=!1,u={},("html"==e&&r.data.commonObj.wordToHkHtml||"pdf"==e)&&(l.data=r.fixErrorCodes(l.data)),"html"==e||"pdf"==e)var f=l.data.replace(/\<img/gi,'<img class="custom-img"').replace(/\<p/gi,'<p class="custom-p"').replace(/\<span/gi,'<span class="custom-span"');else if("cut"==e){f=i.arrayBufferToBase64(l.data);var p=r.base64_decode(f).slice(-128);r.cutSlice(a,p)}}else c=!0,u.requestInfo=t,u.sourceFrom=e,"html"!=e||r.data.commonObj.isExcel?u.pageNum=a:u.pageNum=a+1,u.restNum=n,u.testNum=o+1;if(console.log("docArticleList["+d+"]["+o+"]"),"cut"==e)var g="docArticleList["+d+"]["+o+"].imgCon";else g="docArticleList["+d+"]["+o+"].artCon";var m="docArticleList["+d+"]["+o+"].artIndex",y="docArticleList["+d+"]["+o+"].ifLoading",w="docArticleList["+d+"]["+o+"].ifError",v="docArticleList["+d+"]["+o+"].errorObj",D="docArticleList["+d+"]["+o+"].showPages",b="docArticleList["+d+"]["+o+"].imgScale";r.setData((S(h={},g,null!=l.data?f:l.data),S(h,m,s),S(h,y,c),S(h,w,c),S(h,v,u),S(h,D,!0),S(h,b,r.data.iScale),h))},fail:function(i){var s;console.log(i),c=!0,u.requestInfo=t,u.sourceFrom=e,"html"!=e||r.data.commonObj.isExcel?u.pageNum=a:u.pageNum=a+1,u.restNum=n,u.testNum=o+1;var l="docArticleList["+d+"]["+o+"].ifLoading",h="docArticleList["+d+"]["+o+"].ifError",f="docArticleList["+d+"]["+o+"].errorObj";r.setData((S(s={},l,c),S(s,h,c),S(s,f,u),s))},complete:function(){if(r.loadHtmlNext(t,e,n),t.pageCountOnline>5&&4==a&&1==r.data.loadedSection){var o=i.createSelectorQuery();o.select(".totalPages").boundingClientRect(),o.exec((function(t){if(null!=t[0]){var e=t[0].height;e>2600&&r.data.ifTwoClick&&r.setData({firstTimeHeight:e,twoPageMore:!0})}}))}}})},initCanvasConfig:function(t){var e=this.data.commonObj.pid,a=this.data.commonObj.sid;console.log(e,a);P=new x.HKSWF({headURLFun:function(t){return"https://page.douding.cn/docinfile2/des/head_"+e+"_"+t+".docin?sid="+a},pageURLFun:function(t){return"https://page.douding.cn/docinfile2/des/page_"+e+"_"+t+".docin?sid="+a},pageCountFun:function(t){},workerURL:"https://page.douding.cn/huangke/HKReader-web-server/jgcw/dev/jgcwwasm.wasm",lazyLoadFun:function(t){return!0},edgeURLFun:function(){return"https://page.douding.cn/huangke/doc-server/api/edge?id="+e},removeEdgeFun:function(e){return"canvas"!=t},showWaterMarkFun:function(t){return!0},hidePersonalMessage:function(){return!0},hideMinganXinxi:function(){return!0}})},loadCanvas:function(t,e){console.log("pageIndex",t);var a=this,n={width:"canvasCut"==e?a.data.pagewidth-30:a.data.pagewidth,theme:0,removeEdge:P.removeEdgeFun(t),watermark:P.showWaterMarkFun(t),backgroundColor:{r:0,g:0,b:0},textColor:{r:0,g:0,b:0},notRenderImage:!1,debuglog:!1};return new Promise((function(e,o){P.loadPage(t,n,(function(n){var r=n.bitmap,s=n.width,c=n.height,u="canvas-"+t,l={};for(var d in a.data.canvasSize)console.log(d,a.data.canvasSize[d]),l[d]=a.data.canvasSize[d];l[u]={width:s,height:c},a.setData({canvasSize:l}),console.log("pageIndex",t),i.canvasPutImageData({canvasId:"canvas-"+t,x:0,y:0,width:s,height:c,data:r,success:function(t){console.log("canvasPutImageData success"),e("success")},fail:function(t){console.log("canvasPutImageData fail",t),o("fail")}})}),(function(t){console.log("on error",t)}),(function(t){console.log("on progress",t)}))}))},arrayBuffer2Text:function(t){return function(t){var e="",a=0,n=0,o=0,i=0,r=new Uint8Array(t);for(r.length>=3&&239===r[0]&&187===r[1]&&191===r[2]&&(a=3);a<r.length;)if((n=r[a])<128)e+=String.fromCharCode(n),a++;else if(n>191&&n<224){if(a+1>=r.length)throw"UTF-8 Decode failed. Two byte character was truncated.";o=r[a+1],e+=String.fromCharCode((31&n)<<6|63&o),a+=2}else{if(a+2>=r.length)throw"UTF-8 Decode failed. Multi byte character was truncated.";o=r[a+1],i=r[a+2],e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),a+=3}return e}(t)},fixErrorCodes:function(t){for(var e=["，","。","、"],a=t.length,n=0;n<a;n++){var o=t.charCodeAt(n),i=Math.floor(Math.random()*e.length);o>57344&&o<63743&&(t=t.slice(0,n)+e[i]+t.slice(n+1))}return t},loadHtmlNext:function(t,e,a){var n=this.data.currentPageIndex,o=this.data.testNumber,i=(this.data.loadedSection-1)*t.perNum+a;if(o++,++n<=i)this.loadHtml(t,e,n,a,o),this.setData({currentPageIndex:n,testNumber:o,fivePageMore:!1});else if(a>=t.perNum)if(i==t.pageCountOnline)this.setData({fivePageMore:!1,ifShowEnd:!0});else{var r=parseInt(100*(1-this.data.currentPageIndex/t.pageCountOnline));this.setData({testNumber:0,unReadPercent:r,fivePageMore:!0})}else this.setData({fivePageMore:!1}),3!=this.data.ifDownload&&6!=this.data.ifDownload||t.pageCount==t.pageCountOnline?this.setData({ifShowCharge:!1,ifShowEnd:!0}):this.setData({ifShowCharge:!0})},loadNextSection:I.throttle((function(){var t=this.data.loadedSection;if(t++,this.setData({loadedSection:t}),1==this.data.doctype)var e="html";else if(2==this.data.doctype)e="pdf";else if(3==this.data.doctype)e="cut";else if(4==this.data.doctype)e="canvas";else if(5==this.data.doctype)e="canvasCut";this.createPage(this.data.commonObj,e)})),switchView:function(){this.setData({picFlag:2,showRelative:!1}),this.requestEnd(this.data.documentId,this.data.picFlag)},getCurrentIndex:function(t){var e=this,a=t.detail.current;if("touch"==t.detail.source){this.setData({picCurrentIndex:a});var n=e.data.picDetailInfo;console.log(n[a].isLoaded),0==n[a].isLoaded&&(e.loadCanvas(a,"canvas").then((function(t){console.log("loadCanvas:",t);var n="picDetailInfo["+a+"].isLoaded";console.log(n),e.setData(S({},n,!0)),console.log(e.data.picDetailInfo)})).catch((function(t){console.log("loadCanvas:",t)})),console.log(a)),t.detail.current+1<n.length?(n[t.detail.current].ifShow=!0,n[t.detail.current+1].ifShow=!0,this.setData({ifLast:!1})):t.detail.current+1==n.length?(n[t.detail.current].ifShow=!0,this.setData({ifLast:!1})):this.setData({ifLast:!0}),this.setData({picDetailInfo:n})}},changeWrap:function(){return!1},picError:function(){console.log("图片出错了")},calOriginalSize:function(t){var e=t.detail.width/t.detail.height,a=this.data.ifFullScreen?this.data.phoneWidth:.5*this.data.phoneWidth,n=this.data.imgsHeightArr,o=a/e;n[t.currentTarget.dataset.id]=o,this.setData({imgsHeightArr:n,slideHeight1:.5*this.data.phoneWidth/e>240?.5*this.data.phoneWidth/e:240}),this.data.ifFullScreen||this.setData({slideStyle:{height:this.data.slideHeight1+"px"}})},stopPreview:function(){return!1},refreshAgain:function(t){var e=t.currentTarget.dataset.obj;this.loadHtml(e.requestInfo,e.sourceFrom,e.pageNum,e.restNum,e.testNum)},loadImg:function(t,a){var n=this;i.getStorage({key:"firstVisit",success:function(t){""==t.data&&(n.setData({ifFirstTime:!0}),e((function(){n.setData({ifFirstTime:!1}),i.setStorage({key:"firstVisit",data:!0})}),2e3))}});var o=[];if(a&&"canvas"==a)for(var r=0;r<t.pageCountOnline;r++){var s={};s.index=r,s.isLoaded=!1,s.ifShow=0==r,o.push(s)}else for(var c=1;c<=t.pageCountOnline;c++){var u={};u.imgUrl="https://docimg1.docin.com/docinpic.jsp?width=1000&file="+t.pid+"&sid="+t.sid+"&pageno="+c,u.ifShow=1==c,o.push(u)}n.setData({picDetailInfo:o}),a&&"canvas"==a&&n.loadCanvas(0,"canvas").then((function(t){console.log("loadCanvas:",t),n.setData({"picDetailInfo[0].isLoaded":!0}),console.log(n.data.picDetailInfo)})).catch((function(t){console.log("loadCanvas:",t)})),console.log(n.data.picDetailInfo),3!=this.data.ifDownload&&6!=this.data.ifDownload||t.pageCount==t.pageCountOnline?this.setData({ifShowCharge:!1}):this.setData({ifShowCharge:!0})},changePicSwitch:function(){this.setData({ifFullScreen:!this.data.ifFullScreen,showSpecial:!this.data.showSpecial}),this.data.relDocsArray.length>0&&this.setData({showRelative:!this.data.showRelative}),this.data.ifFullScreen?this.setData({slideStyle:{height:this.data.slideHeight+"px"},ifShowSlideFloor:!1}):this.setData({slideStyle:{height:this.data.slideHeight1+"px"},ifShowSlideFloor:!0})},base64_decode:function(t){var e,a,n,o,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=s.indexOf(t.charAt(u++))<<2|(o=s.indexOf(t.charAt(u++)))>>4,a=(15&o)<<4|(i=s.indexOf(t.charAt(u++)))>>2,n=(3&i)<<6|(r=s.indexOf(t.charAt(u++))),c+=String.fromCharCode(e),64!=i&&(c+=String.fromCharCode(a)),64!=r&&(c+=String.fromCharCode(n));return c},cutSlice:function(t,e){var a=e.indexOf("&&&PIC"),n=e.slice(a+6);this.getCutScaleInfo(t,n),this.setPageWarpHeight(t)},getCutScaleInfo:function(t,e){var a=this.splitNum(e,5),n={};n.iLeft=a[0],n.iRight=a[1],n.iTop=a[2],n.iBottom=a[3],n.picWidth=this.data.originalWidth=a[4],n.picHeight=this.data.originalHeight=a[5],n.originScale=n.picWidth/n.picHeight;var o=this.data.arrPicData;o.push(n),this.setData({arrPicData:o});var i=n.iLeft-n.iRight>0?n.iRight:n.iLeft;n.iTop-n.iBottom>0?n.iBottom:n.iTop;i=i-this.data.initGap>0?this.data.initGap:i;var r=n.picWidth/(n.picWidth-2*i);this.setData({iScale:r}),0!=this.data.tempScale&&this.setData({iScale:r<this.data.tempScale?r:this.data.tempScale}),this.setData({tempScale:this.data.iScale})},splitNum:function(t,e){for(var a=[],n=t.length/e,o=0;o<n;o++)a.push(parseInt(t.slice(o*e,(o+1)*e)));return a},setPageWarpHeight:function(t){var e=this.data.arrPicData[t-1].picWidth,a=this.data.clientWidth/e*this.data.arrPicData[t-1].picHeight*this.data.iScale;this.setData({picWrapHeight:a})},collect:function(){var t=this;t.data.isCollecting||(E.inpmv(7117),this.data.ifCollected?(t.setData({isCollecting:!0}),i.request({url:k.docinDomain()+"/mini/unCollectProduct.do",header:F.globalData.requestHeader,data:{productid:t.data.documentId},success:function(e){200==e.data.code&&"success"==e.data.msg?(i.showToast({title:"已取消收藏",icon:"none",duration:3e3}),t.setData({collectText:"收藏",ifCollected:!1})):(console.log(e.data.msg),i.showToast({title:e.data.msg,icon:"none"}))},fail:function(t){console.log(t)},complete:function(){t.setData({isCollecting:!1})}})):(t.setData({isCollecting:!0}),i.request({url:k.docinDomain()+"/mini/saveFolder.do",header:F.globalData.requestHeader,data:{pid:t.data.documentId,folder_id:0,flag:"m"},success:function(e){500==e.data.code&&"用户未登录"==e.data.msg&&i.navigateTo({url:"../login/login?source=result&documentId="+t.data.documentId+"&action=collect"}),200==e.data.code&&"success"==e.data.msg&&(1==e.data.data.resultValue?i.showToast({title:"您已收藏过此文档",icon:"none"}):2==e.data.data.resultValue?i.showToast({title:"您最多只能收藏1000个文档，请删除一些收藏后再操作!",icon:"none"}):3==e.data.data.resultValue?i.showToast({title:"请您稍作休息！",icon:"none"}):t.setData({showPublicShadow:!0,collectContainer:!0,collectText:"已收藏",ifCollected:!0}))},fail:function(t){console.log(t)},complete:function(){t.setData({isCollecting:!1})}})))},closeCollect:function(){this.setData({showPublicShadow:!1,collectContainer:!1})},showReport:function(){this.data.loginStatus?this.setData({showPublicShadow:!0,reportContainer:!0,reportOne:!0,reportTwo:!1}):i.navigateTo({url:"../login/login?source=result&documentId="+this.data.documentId+"&action=report"})},showreportForm:function(t){var e=t.currentTarget.dataset.type;this.setData({reportTwo:!0,reportOne:!1,reportTitle:1==e?"该文档为侵权文档":"该文档含有违规或不良信息"})},changeInputValue:function(t){this.setData({reportContent:t.detail.value}),0!=t.detail.value.trim().length?this.setData({reportColor:!1}):this.setData({reportColor:!0})},reportSubmit:function(){if("该文档为侵权文档"==this.data.reportTitle)var t=1;else t=2;0!=this.data.reportContent.trim().length&&this.publicReport(t,this.data.reportContent)},cancelreportShadow:function(){this.setData({showPublicShadow:!1,reportContainer:!1,reportContent:"",reportColor:!0})},publicReport:function(t,e){var a=this;i.request({url:k.docinDomain()+"/mini/reportProduct.do",header:F.globalData.requestHeader,data:{productId:a.data.documentId,type:t,reportContent:e},success:function(t){200==t.data.code&&"success"==t.data.msg&&(a.cancelreportShadow(),1==t.data.data?i.showModal({title:"提示",content:"举报成功！多谢你的支持",showCancel:!1,success:function(t){}}):2==t.data.data?i.showModal({title:"提示",content:"亲爱的豆友，感谢您对豆丁网的支持，请勿重复举报相同文档",showCancel:!1,success:function(t){}}):3==t.data.data&&i.showModal({title:"提示",content:"举报失败！请稍后重试！",showCancel:!1,success:function(t){}}))},fail:function(t){console.log(t)}})},startShare:function(){E.inpmv(7118),i.openShare({title:this.data.commonShareTitle,content:"拥有7亿篇商业/教育/学术/技术等专业资料文档，助你学习实践",imageUrl:"",path:"",success:function(t){},fail:function(t){},complete:function(t){}})},backIndex:function(){E.inpmv(7119),i.reLaunch({url:"../index/index"})},contactPage:function(){this.data.loginStatus?i.navigateTo({url:"../connect/connect"}):i.setClipboardData({data:"文档地址：https://www.docin.com/p-"+this.data.documentId+".html"})},cancelPayCenter:function(){this.setData({showpayShadowCenter:!1,showPublicShadow:!1})},okPayCenter:function(){this.setData({showpayShadowCenter:!1,showPublicShadow:!1}),this.data.ifpaySuccess||(i.showToast({title:"您尚未完成支付，请重新支付",icon:"none"}),1==this.data.payType?this.payNow():2==this.data.payType&&this.downloadNow())},choosePayBottom:function(t){"read"==t.detail.value?this.setData({ifreadChecked:!0,ifdownloadChecked:!1,payType:1}):"download"==t.detail.value&&(this.setData({ifdownloadChecked:!0,ifreadChecked:!1,payType:2}),"bottom"!=t.currentTarget.dataset.source||this.data.ifEnough||this.publicDownload())},cancelPayBottom:function(){this.setData({showPublicShadow:!1,showpayShadowBottom:!1,ampleMoney:!1,noAmpleMoney:!1,showPayWay:!1,currentTab:0})},okPayBottom:function(){this.setData({showPublicShadow:!1,showpayShadowBottom:!1}),this.successPay(this.data.payType)},downloadNow:I.throttle((function(t){if(E.inpmv(7115),this.setData({payType:2}),this.data.downloadStatus)return!1;this.publicDownload()})),showTipTwo:function(){this.setData({tipOne:!1,tipTwo:!0})},closeTip:function(){this.setData({showTip:!1})},payNow:function(){E.inpmv(7116),this.data.ifreadChecked?this.setData({payType:1}):this.data.ifdownloadChecked&&this.setData({payType:2}),this.data.ifIos?i.showModal({title:"提示",content:"由于相关规定，IOS功能暂不可用！",showCancel:!1,success:function(t){}}):((6==this.data.ifDownload||3==this.data.ifDownload&&1==this.data.ifEqual)&&this.setData({payType:1}),1==this.data.payType?this.publicDownload():2==this.data.payType&&this.downloadNow())},publicDownload:function(){var t=this;i.request({url:k.docinDomain()+"/mini/buyBefore.do",header:F.globalData.requestHeader,data:{productId:t.data.documentId,action:t.data.payType},success:function(e){console.log(e),-1==e.data.code?1==t.data.payType?i.navigateTo({url:"../login/login?source=result&documentId="+t.data.documentId+"&action=buy"}):2==t.data.payType&&i.navigateTo({url:"../login/login?source=result&documentId="+t.data.documentId+"&action=download"}):200==e.data.code&&(console.log(t.data.isLowQuality,"res.data.isLowQuality"),t.data.isLowQuality?t.setData({publicDownloadData:e,showDocDownloadTips:!0,showPublicShadow:!0}):t.publicDownloadFn(e))},fail:function(t){console.log(t)}})},publicDownloadFn:function(t){if(console.log(t.data.data.if_scan),void 0!==t.data.data.if_scan&&this.setData({if_scan:t.data.data.if_scan}),1==t.data.data.result)this.setData({downloadUrl:t.data.data.url}),this.publicSave();else if(0==t.data.data.result)this.data.ifIos?i.showModal({title:"提示",content:"由于相关规定，IOS功能暂不可用！",showCancel:!1,success:function(t){}}):this.setData({showPublicShadow:!0,showpayShadowBottom:!0,ampleMoney:!0,noAmpleMoney:!1,showpayOne:!0,showpayTwo:!1,docrelpriceTwo:t.data.data.downPrice});else if(3==t.data.data.result)this.resetData(),this.requestEnd(this.data.commonObj,1);else if(4==t.data.data.result)this.setData({showPublicShadow:!0,showpayShadowBottom:!0,ampleMoney:!0,noAmpleMoney:!1,docrelpriceTwo:t.data.data.downPrice,docrelpriceOne:t.data.data.readPrice}),parseFloat(t.data.data.downPrice)>parseFloat(t.data.data.userMoney)?this.setData({ifEnough:!1}):this.setData({ifEnough:!0}),3==this.data.ifDownload&&1!=this.data.ifEqual?this.setData({showpayTwo:!0,showpayOne:!1}):this.setData({showpayOne:!0,showpayTwo:!1});else if(2==t.data.data.result||5==t.data.data.result)if(this.data.ifIos)i.showModal({title:"提示",content:"由于相关规定，IOS功能暂不可用！",showCancel:!1,success:function(t){}});else{for(var e=0;e<t.data.data.moneyArr.length;e++)t.data.data.moneyArr[e].def&&this.setData({currentTab:e,rechargeMoney:t.data.data.moneyArr[e].m1});this.setData({showPublicShadow:!0,showpayShadowBottom:!0,noAmpleMoney:!0,ampleMoney:!1,restMoney:parseFloat(t.data.data.userMoney).toFixed(2),needPrice:1==this.data.payType?parseFloat(t.data.data.readPrice).toFixed(2):parseFloat(t.data.data.downPrice).toFixed(2),rechargeArray:t.data.data.moneyArr})}else if(-6==t.data.data.result)this.setData({showPublicShadow:!0,showforbiddenShadow:!0});else{if(10!=t.data.data.result)return!1;this.setData({showSaveLocal:!1}),this.publicSave()}},docDownloadTipsClose:function(){this.setData({showDocDownloadTips:!1,showPublicShadow:!1})},docDownloadTipsContinue:function(){this.setData({showDocDownloadTips:!1,showPublicShadow:!1}),this.publicDownloadFn(this.data.publicDownloadData)},successPay:function(t){var e=this;i.request({url:k.docinDomain()+"/mini/buy.do",header:F.globalData.requestHeader,data:{productId:e.data.documentId,action:t},success:function(t){1==t.data.data.result?(i.showToast({title:"购买成功",icon:"none"}),e.setData({downloadUrl:t.data.data.url}),e.publicSave(),e.resetData(),e.requestEnd(e.data.documentId,1)):4==t.data.data.result&&(i.showToast({title:"购买成功",icon:"none"}),e.setData({payType:2}),e.resetData(),e.data.picView?e.requestEnd(e.data.documentId,2):e.requestEnd(e.data.documentId,1))},fail:function(t){console.log(t)}})},addMoney:function(){this.cancelPayBottom();var t=this;i.request({url:k.docinDomain()+"/mini/preparePay.do",header:F.globalData.requestHeader,data:{type:1==t.data.payType?1:2,amount:t.data.rechargeMoney,productId:t.data.documentId},success:function(e){1==e.data.data.result&&(t.publicPay(e.data.data.orderInfo),t.setData({showPublicShadow:!0,showpayShadowCenter:!0}),console.log(F.globalData.requestHeader,123),console.log(e.data.data.orderInfo))},fail:function(t){console.log(t)}})},publicPay:function(t){var e=I.getPagePath(),a=I.deleteURLQuery(e);t.payResultUrl=I.replaceUrlQuery(a);var n=this;i.requestPolymerPayment({orderInfo:t,success:function(e){n.setData({ifpaySuccess:!0}),n.cancelPayCenter(),i.request({url:k.docinDomain()+"/mini/finBuy.do",header:F.globalData.requestHeader,data:{finId:t.tpOrderId},success:function(t){1!=t.data.data.result&&0!=t.data.data.result||(1==n.data.payType?i.showToast({title:"购买成功，可继续阅读",icon:"none"}):n.downloadNow(),n.resetData(),n.requestEnd(n.data.documentId,n.data.picFlag))}})},fail:function(t){i.showToast({title:"支付失败或取消",icon:"none"}),n.setData({ifpaySuccess:!1,showPublicShadow:!1,showpayShadowCenter:!1})}})},publicSave:function(){this.setData({showPublicShadow:!0,showsaveShadow:!0})},openLocalDocument:function(t){i.openDocument({filePath:t,success:function(t){console.log("openDocument success",t)},fail:function(t){console.log("openDocument fail",t),i.showToast({title:"打开失败",icon:"none"})}})},justSaveLocal:function(t){i.saveFile({tempFilePath:t,success:function(t){console.log(t);var e=t.savedFilePath;console.log("保存到的路径是：",e),i.showModal({title:"保存成功",content:"保存到的路径是："+e,cancelText:"我知道了",confirmText:"复制路径",success:function(t){t.confirm&&console.log("copy path")}})},fail:function(t){console.log(t),i.showToast({title:"保存失败",icon:"none"})}})},savedocLocal:function(){var t=this;console.log("savedocLocal",this.data.downloadUrl),i.showLoading({title:"正在下载文档中"}),i.getHostDownloadManager?i.getHostDownloadManager().download({url:this.data.downloadUrl,success:function(e){console.log(e.taskID),t.setData({showPublicShadow:!1,showsaveShadow:!1})},fail:function(t){console.log("错误码："+t.errCode),console.log("错误信息："+t.errMsg),i.showToast({title:"下载文件失败",icon:"none"})},complete:function(){i.hideLoading()}}):i.downloadFile({header:{"Cache-Control":"no-cache"},url:this.data.downloadUrl,success:function(e){console.log("临时文件路径:",e);var a=e.tempFilePath;t.setData({showPublicShadow:!1,showsaveShadow:!1}),i.showModal({title:"下载成功",confirmText:"查看",success:function(e){e.confirm&&t.openLocalDocument(a)}})},fail:function(t){i.showToast({title:"下载文件失败",icon:"none"}),console.log(t)},complete:function(){i.hideLoading()}})},savedocLocalOthers:function(){i.showLoading({title:"正在下载文档中"});new Date;this.cancelsaveShadow(),i.downloadFile({url:this.data.downloadUrl,filePath:F.globalData.userDataPath+"/"+this.data.detailObj.productName+"."+this.data.detailObj.filePostfix,success:function(t){i.hideLoading();var e=t.filePath;console.log(e),i.shareFile({filePath:e,success:function(t){i.showToast({title:"分享成功",icon:"none"})},fail:function(t){i.showToast({title:t.errMsg,icon:"none"})}})},fail:function(t){i.showToast({title:"下载文件失败",icon:"none"})},complete:function(){i.showLoading()}})},sendDocument:function(){var t=this;i.request({url:k.docinDomain()+"/app/xcx/getUserEmailAdress",header:F.globalData.requestHeader,data:{pid:t.data.commonObj.pid},success:function(e){0==e.data.code?i.navigateTo({url:"../login/login?source=result&documentId="+t.data.documentId+"&action=sendEmail"}):1==e.data.code?(t.setData({showsaveShadow:!1,showsendShadow:!0}),null!=e.data.addr&&t.setData({emailValue:e.data.addr})):-17==e.data.code?t.setData({showsaveShadow:!1,showfailEmail:!0,emailFailTxt:"抱歉，该文档超过每日发送限制，请明日再试"}):-18==e.data.code&&t.setData({showsaveShadow:!1,showfailEmail:!0,emailFailTxt:"抱歉，超过每日发送限制，请明日再试"})},fail:function(t){console.log(t)}})},getEmail:function(t){this.setData({emailValue:t.detail.value,emailTip:"文档将以附件的形式发送到邮箱"});var e=t.detail.value;if(-1!=e.indexOf("@")){e=e.match(/@\w*[\.]?\w*/);var a="@qq.com @gmail.com @126.com @163.com @hotmail.com @yahoo.com @yahoo.com.cn @live.com @sohu.com @sina.com @139.com".match(new RegExp(e+"[^ ]* ","gm"));a?(a=a.join("").replace(/ $/,"").split(" "),this.setData({emailValue2:this.data.emailValue.slice(0,this.data.emailValue.indexOf("@")),showEmailList:!0,emailListArray:a})):this.setData({showEmailList:!1,emailListArray:[],emailValue2:""})}else this.setData({showEmailList:!1,emailListArray:[],emailValue2:""})},chooseEmailList:function(t){this.setData(S({emailFocus:!1,emailValue:t.currentTarget.dataset.mail,showEmailList:!1,emailListArray:[]},"emailFocus",!0))},focusEmail:function(){this.setData({changePosition:!0})},getCode:function(t){this.setData({emailCode:t.detail.value,codeTip:"请输入图片中的字符"})},sendEmail:function(){if(""==this.data.emailValue.trim())return this.setData({emailTip:"请您输入邮箱",emailFocus:!0}),!1;if(!I.checkEmail(this.data.emailValue))return this.setData({emailTip:"邮箱格式错误，请重新填写",emailFocus:!0}),!1;if(this.data.showEmailCode&&""==this.data.emailCode.trim())return this.setData({codeTip:"验证码错误，请重新输入",codeFocus:!0}),!1;var t=this,e={pid:t.data.commonObj.pid,email:t.data.emailValue};t.data.showEmailCode&&(e.user_code=t.data.emailCode),i.request({url:k.docinDomain()+"/app/xcx/sendProduct",header:F.globalData.requestHeader,data:e,success:function(e){t.setData({sendTxt:"正在发送"}),1==e.data.code?t.setData({showsendShadow:!1,showSuccessShadow:!0,sendTxt:"发送",emailValue1:t.splitEmail(t.data.emailValue),emailTip:"文档将以附件的形式发送到邮箱",codeTip:"请输入图片中的字符"}):0==e.data.code?i.navigateTo({url:"../login/login?source=result&documentId="+t.data.documentId+"&action=sendEmail"}):3==e.data.code||-20==e.data.code?(t.setData({sendTxt:"发送",emailTip:"文档将以附件的形式发送到邮箱",codeTip:"请输入图片中的字符"}),i.showToast({title:"发送异常",icon:"none"})):-17==e.data.code||-18==e.data.code?t.setData({sendTxt:"发送",emailTip:"抱歉，超过每日发送限制，请明日再试。",codeTip:"请输入图片中的字符"}):5==e.data.code?(t.setData({changePosition:!0,sendTxt:"发送",showEmailCode:!0,emailTip:"文档将以附件的形式发送到邮箱",codeTip:"请输入图片中的字符",codeFocus:!0}),t.getYzmPic()):-1==e.data.code&&t.setData({sendTxt:"发送",codeTip:"验证码错误，请重新输入",emailTip:"文档将以附件的形式发送到邮箱",codeFocus:!0})},fail:function(t){console.log(t)}})},getYzmPic:function(){var t=this;i.request({url:k.docinDomain()+"/app/xcx/getDocinCode",header:F.globalData.requestHeader,data:{codeFlag:4},success:function(e){1==e.data.code&&t.setData({emailCodePic:"data:image/jpeg;base64,"+e.data.result.replace(/[\r\n]/g,"")})},fail:function(t){console.log(t)}})},changeCode:function(){this.getYzmPic()},resetData:function(){this.setData({loadedSection:1,currentPageIndex:0,testNumber:0,firstTimeHeight:0,docArticleList:[],ifTwoClick:!0,twoPageMore:!1,ifShowCharge:!1,picCurrentIndex:0,picDetailInfo:[]})},publicCancel:function(){this.data.collectContainer?this.closeCollect():this.data.showpayShadowBottom?this.cancelPayBottom():this.data.showPayWay?(this.cancelPayBottom(),this.backRecharge()):this.data.showsaveShadow?this.cancelsaveShadow():this.data.showDocDownloadTips&&this.setData({showDocDownloadTips:!1,showPublicShadow:!1})},selectThis:function(t){this.setData({currentTab:t.currentTarget.dataset.current,rechargeMoney:t.currentTarget.dataset.money})},turnRecharge:function(){if(1==this.data.payType)var t="read";else t="download";i.navigateTo({url:"../recharge/recharge?action="+t+"&pid="+this.data.documentId+"&needMoney="+this.data.needPrice}),this.setData({showpayShadowBottom:!1,showPublicShadow:!1})},changePayWay:function(){this.setData({showPayWay:!0,noAmpleMoney:!1})},choosePayWay:function(t){this.setData({currentPay:t.currentTarget.dataset.current}),this.backRecharge()},backRecharge:function(){this.setData({showPayWay:!1,noAmpleMoney:!0})},cancelsaveShadow:function(){this.setData({showPublicShadow:!1,showsaveShadow:!1})},cancelfailShadow:function(){this.setData({showPublicShadow:!1,showforbiddenShadow:!1})},cancelfailEmail:function(){this.setData({showPublicShadow:!1,showfailEmail:!1,emailFailTxt:""})},cancelsendShadow:function(){this.setData({showPublicShadow:!1,showsendShadow:!1,showEmailCode:!1,emailFocus:!1,emailCode:"",changePosition:!1,emailTip:"文档将以附件的形式发送到邮箱",codeTip:"请输入图片中的字符",showEmailList:!1,emailListArray:[],emailValue2:""})},cancelsuccessShadow:function(){this.setData({showPublicShadow:!1,showsendShadow:!1,showSuccessShadow:!1,showEmailCode:!1,emailFocus:!1,emailCode:"",changePosition:!1,emailTip:"文档将以附件的形式发送到邮箱",codeTip:"请输入图片中的字符",showEmailList:!1,emailListArray:[],emailValue2:""})},splitEmail:function(t){var e=t.split("@"),a="";return e[0].length>10&&(a="...",e[0]=e[0].substr(0,e[0].length-10)+a),e[0]+"@"+e[1]},turnMine:function(){var t=this;i.request({url:k.docinDomain()+"/mini/bdIsLogin.do",header:F.globalData.requestHeader,success:function(e){1==e.data.code?i.navigateTo({url:"../my/my"}):2==e.data.code&&(i.setStorage({key:"sessionId",data:e.data.sessionid}),i.navigateTo({url:"../login/login?source=result&action=my&documentId="+t.data.documentId}))},fail:function(t){console.log(t)}})},checkIsCanDownLocal:function(t){if(console.log(t,"<--- sizeStr"),t.indexOf("未知")>=0)return console.log("未知大小"),!1;var e=t.length,a=t.slice(e-1,e),n=Math.ceil(t.split(a));return!("M"==a&&n>10)},onReady:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/template/template",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){})),window.define("pages/notfound/notfound",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/ga.js"),S=t("../../utils/web.js"),C=t("../../utils/util.js"),P=x.HitBuilders,F=t("../../utils/stat.js");Page({data:{ifIos:_.globalData.ifIos,dynamicPrefix:"",guessList:[],guessPage:1},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-notfound"),t.send((new P.ScreenViewBuilder).build())},onLoad:function(t){F.inpv(693),_.publicHeader();var e=this;o.request({url:S.docinDomain()+"/jsp_cn/mini/display.jsp",success:function(t){e.setData({dynamicPrefix:t.data.data.st})}}),e.requestData()},requestData:function(){var t=this;o.request({url:S.docinDomain()+"/mini/guess_want_search.do",data:{pageNo:t.data.guessPage},success:function(e){200==e.data.code&&t.setData({guessPage:e.data.data.nextPage,guessList:e.data.data.list})},fail:function(t){console.log(t)}})},turnResult:C.throttle((function(t){var e=t.currentTarget.dataset.docid;o.request({url:S.docinDomain()+"/mini/queryPsInfo.do?id="+e,header:_.globalData.requestHeader,success:function(t){null==t.data.data?o.navigateTo({url:"../notfound/notfound"}):o.navigateTo({url:"../result/result?documentId="+e})}})})),backIndex:function(){o.reLaunch({url:"../index/index"})},onReady:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/login/login",(function(t,e,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x=r(),S=t("../../utils/util.js"),C=t("../../utils/web.js"),P=t("../../utils/stat.js"),F=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,commonLogin:!0,ifShowPassword:!1,showYzm:!1,username:"",userFocus:!1,password:"",passFocus:!1,yzm:"",yzmError:!1,yzmFocus:!1,yzmText:"",phoneLogin:!1,phone:"",focusPhone:!1,falsePhone:!1,messageYzm:"",messageFocus:!1,getYzmText:"获取验证码",falseYzm:!1,ifMessageCorrect:!1,showErrorOne:!1,showErrorTwo:!1,errorTextOne:"",errorTextTwo:"",forgetFloor:!1,yzmFloor:!1,yzmFloorFocus:!1,yzmFloorText:"",phoneYzmError:!1,phoneYzmErrorText:"",tempFlag:0,yzmFloorPic:"",showPublicShadow:!1,sourceFrom:"",sourceAction:"",documentId:0,loginTxt:"登录豆丁账号",loginOneTxt:"登录",loginTwoTxt:"登录",showWelcome:!1,nickName:"",headPic:C.docinDomain()+"/images_cn/people01_80x80.gif",backDjsTime:5,backDjsTimer:""},onLoad:function(t){P.inpv(692),x.publicHeader(),"index"!=t.source&&("result"==t.source&&"my"==t.action||"register"==t.source?this.setData({loginTxt:"登录豆丁账号"}):this.setData({loginTxt:"请先登录"})),this.setData({sourceFrom:null!=t.source?t.source:"",sourceAction:null!=t.action?t.action:"",documentId:null!=t.documentId?t.documentId:""})},backPrev:function(){this.data.phoneLogin?this.setData({commonLogin:!0,phoneLogin:!1,phone:"",messageYzm:"",showErrorTwo:!1,errorTextTwo:"",falsePhone:!1,falseYzm:!1}):"register"==this.data.sourceFrom||"index"==this.data.sourceFrom?i.reLaunch({url:"../index/index"}):i.redirectTo({url:"../"+this.data.sourceFrom+"/"+this.data.sourceFrom+"?documentId="+this.data.documentId})},turnReg:function(){i.navigateTo({url:"../register/register"})},showPassword:function(){this.setData({ifShowPassword:!this.data.ifShowPassword})},forgetPass:function(){this.setData({showPublicShadow:!0,forgetFloor:!0})},cancelForget:function(){this.setData({showPublicShadow:!1,forgetFloor:!1})},changePhoneLogin:function(){this.setData({phoneLogin:!0,commonLogin:!1})},getUsername:function(t){this.setData({username:t.detail.value})},getPassword:function(t){this.setData({password:t.detail.value})},usernameFocus:function(){this.setData({showErrorOne:!1,errorTextOne:"",userFocus:!0,passFocus:!1,yzmFocus:!1})},usernameBlur:function(){if(this.setData({userFocus:!1}),""!=this.data.username.trim()){var t=this,e=new Date;i.request({url:C.docinDomain()+"/app/my/docin/showCode4LoginFalse",header:x.globalData.requestHeader,data:{um:t.data.username,t:e.getTime()},success:function(e){1==e.data&&(t.setData({showYzm:!0}),t.getYzmPic(1))},fail:function(t){console.log(t)}})}},passwordFocus:function(){this.setData({showErrorOne:!1,errorTextOne:"",passFocus:!0,userFocus:!1,yzmFocus:!1})},passwordBlur:function(){this.setData({passFocus:!1})},getPicCode:function(t){this.setData({yzm:t.detail.value})},codeFocus:function(){this.setData({showErrorOne:!1,errorTextOne:"",yzmFocus:!0,yzmError:!1,userFocus:!1,passFocus:!1})},codeBlur:function(){this.setData({yzmFocus:!1})},changeCode:function(){this.getYzmPic(1)},loginOne:function(){if(""==this.data.username.trim())return this.setData({showErrorOne:!0,errorTextOne:"用户名或密码不能为空"}),!1;if(""==this.data.password.trim())return this.setData({showErrorOne:!0,errorTextOne:"用户名或密码不能为空"}),!1;if(this.data.password.trim().length<6)return this.setData({showErrorOne:!0,errorTextOne:"用户名或密码错误"}),!1;if(""==this.data.yzm.trim())return this.setData({showErrorOne:!0,errorTextOne:"请输入验证码"}),!1;var t=this;t.setData({loginOneTxt:"正在登录"}),i.canIUse("getLoginCode")&&i.getLoginCode({success:function(e){i.request({url:C.docinDomain()+"/app/xcx/login",header:x.globalData.requestHeader,data:{username:t.data.username,password:t.data.password,showcode4login:t.data.showYzm?1:0,user_code:t.data.yzm,code:e.code},success:function(e){if(1==e.data.code)i.setStorage({key:"publicLoginEmail",data:e.data.login_email}),i.setStorage({key:"publicPassword",data:e.data.user_password}),i.showToast({title:"登录成功",icon:"none"}),t.publicBack();else if(2==e.data.code)i.showToast({title:"登录成功",icon:"none"}),t.publicBack();else{if(-1==e.data.code)return t.setData({showErrorOne:!0,errorTextOne:"验证码错误，请重新输入",yzmError:!0,yzm:"",loginOneTxt:"登录"}),!1;if(-2==e.data.code||-3==e.data.code||-4==e.data.code||-5==e.data.code||-6==e.data.code||-7==e.data.code||-1e4==e.data.code)return t.setData({showErrorOne:!0,errorTextOne:"用户名或密码错误",loginOneTxt:"登录"}),!1}},fail:function(t){console.log(t)}})},fail:function(e){i.request({url:C.docinDomain()+"/app/xcx/login",header:x.globalData.requestHeader,data:{username:t.data.username,password:t.data.password,showcode4login:t.data.showYzm?1:0,user_code:t.data.yzm},success:function(e){if(1==e.data.code)i.setStorage({key:"publicLoginEmail",data:e.data.login_email}),i.setStorage({key:"publicPassword",data:e.data.user_password}),i.showToast({title:"登录成功",icon:"none"}),t.publicBack();else if(2==e.data.code)i.showToast({title:"登录成功",icon:"none"}),t.publicBack();else{if(-1==e.data.code)return t.setData({showErrorOne:!0,errorTextOne:"验证码错误，请重新输入",yzmError:!0,yzm:"",loginOneTxt:"登录"}),!1;if(-2==e.data.code||-3==e.data.code||-4==e.data.code||-5==e.data.code||-6==e.data.code||-7==e.data.code||-1e4==e.data.code)return t.setData({showErrorOne:!0,errorTextOne:"用户名或密码错误",loginOneTxt:"登录"}),!1}},fail:function(t){console.log(t)}})}})},getPhone:function(t){this.setData({phone:t.detail.value})},phoneFocus:function(){this.setData({showErrorTwo:!1,errorTextTwo:"",focusPhone:!0,falsePhone:!1,falseYzm:!1,focusMessage:!1})},phoneBlur:function(){this.setData({focusPhone:!1})},getMessageYzm:function(t){this.setData({messageYzm:t.detail.value})},messageFocus:function(){this.setData({showErrorTwo:!1,errorTextTwo:"",focusMessage:!0,focusPhone:!1,falseYzm:!1,falsePhone:!1})},messageBlur:function(){this.setData({focusMessage:!1})},getYzm:function(){if(""==this.data.phone.trim())this.setData({showErrorTwo:!0,errorTextTwo:"请输入手机号",falsePhone:!0});else if(""!==this.data.phone.trim()&&0==S.isPoneAvailable(this.data.phone))this.setData({showErrorTwo:!0,errorTextTwo:"手机号格式不正确",falsePhone:!0});else{if(0!=this.data.tempFlag)return!1;this.setData({showPublicShadow:!0,yzmFloor:!0,yzmFloorFocus:!0}),this.getYzmPic(3)}},changeYzm:function(){this.getYzmPic(3)},getYzmPic:function(t){var e=this;i.request({url:C.docinDomain()+"/app/xcx/getDocinCode",header:x.globalData.requestHeader,data:{codeFlag:t,login_tel:3==t?e.data.phone:""},success:function(a){1==a.data.code&&(1==t?e.setData({yzmText:"data:image/jpeg;base64,"+a.data.result.replace(/[\r\n]/g,"")}):3==t&&e.setData({yzmFloorPic:"data:image/jpeg;base64,"+a.data.result.replace(/[\r\n]/g,"")}))},fail:function(t){console.log(t)}})},loginTwo:function(){var t=this;if(""==this.data.phone.trim())return this.setData({showErrorTwo:!0,errorTextTwo:"请输入手机号",falsePhone:!0}),!1;if(""!==this.data.phone.trim()&&0==S.isPoneAvailable(this.data.phone))return this.setData({showErrorTwo:!0,errorTextTwo:"手机号格式不正确",falsePhone:!0}),!1;if(""==this.data.messageYzm.trim())return this.setData({showErrorTwo:!0,errorTextTwo:"请输入短信验证码",falseYzm:!0}),!1;if(""!=this.data.messageYzm.trim()&&4!=this.data.messageYzm.length)return this.setData({showErrorTwo:!0,errorTextTwo:"验证码格式不正确",falseYzm:!0}),!1;if(""!=this.data.messageYzm.trim()&&4==this.data.messageYzm.length){var e=this;e.setData({loginTwoTxt:"正在登录"}),i.canIUse("getLoginCode")&&i.getLoginCode({success:function(a){i.request({url:C.docinDomain()+"/mini/login.do",header:x.globalData.requestHeader,data:{login_tel:e.data.phone,vcode:e.data.messageYzm,code:a.code},success:function(a){if(0==a.data.code)i.setStorage({key:"publicLoginEmail",data:a.data.loginEmail}),i.setStorage({key:"publicPassword",data:a.data.password}),i.showToast({title:"登录成功",icon:"none"}),e.publicBack();else{if(-1==a.data.code)return e.setData({showErrorTwo:!0,errorTextTwo:"请输入手机号",falsePhone:!0,loginTwoTxt:"登录"}),!1;if(-2==a.data.code)return t.setData({showErrorTwo:!0,errorTextTwo:"手机号格式不正确",falsePhone:!0,loginTwoTxt:"登录"}),!1;if(-3==a.data.code)return t.setData({showErrorTwo:!0,errorTextTwo:"请输入短信验证码",falseYzm:!0,loginTwoTxt:"登录"}),!1;-4==a.data.code?e.setData({showErrorTwo:!0,errorTextTwo:"验证码错误",falseYzm:!0,loginTwoTxt:"登录"}):-5!=a.data.code&&-6!=a.data.code&&-7!=a.data.code||(i.showToast({title:"登录出错,请稍后再试！",icon:"none"}),e.setData({loginTwoTxt:"登录"}))}},fail:function(t){console.log(t)}})},fail:function(a){i.request({url:C.docinDomain()+"/mini/login.do",header:x.globalData.requestHeader,data:{login_tel:e.data.phone,vcode:e.data.messageYzm},success:function(a){if(0==a.data.code)i.setStorage({key:"publicLoginEmail",data:a.data.loginEmail}),i.setStorage({key:"publicPassword",data:a.data.password}),i.showToast({title:"登录成功",icon:"none"}),e.publicBack();else{if(-1==a.data.code)return e.setData({showErrorTwo:!0,errorTextTwo:"请输入手机号",falsePhone:!0,loginTwoTxt:"登录"}),!1;if(-2==a.data.code)return t.setData({showErrorTwo:!0,errorTextTwo:"手机号格式不正确",falsePhone:!0,loginTwoTxt:"登录"}),!1;if(-3==a.data.code)return t.setData({showErrorTwo:!0,errorTextTwo:"请输入短信验证码",falseYzm:!0,loginTwoTxt:"登录"}),!1;-4==a.data.code?e.setData({showErrorTwo:!0,errorTextTwo:"验证码错误",falseYzm:!0,loginTwoTxt:"登录"}):-5!=a.data.code&&-6!=a.data.code&&-7!=a.data.code||(i.showToast({title:"登录出错,请稍后再试！",icon:"none"}),e.setData({loginTwoTxt:"登录"}))}},fail:function(t){console.log(t)}})}})}},getYzmFloorText:function(t){this.setData({yzmFloorText:t.detail.value})},compareCode:function(){if(this.setData({yzmFloorFocus:!1}),""==this.data.yzmFloorText.trim())return this.setData({phoneYzmError:!0,phoneYzmErrorText:"请输入短信验证码",yzmFloorFocus:!0}),!1;if(""!=this.data.yzmFloorText.trim()&&5!=this.data.yzmFloorText.length)return this.setData({phoneYzmError:!0,phoneYzmErrorText:"验证码格式不正确",yzmFloorFocus:!0}),!1;if(""!=this.data.yzmFloorText.trim()&&5==this.data.yzmFloorText.length){var t=this;i.request({url:C.docinDomain()+"/mini/validataLoginCode.do",header:x.globalData.requestHeader,data:{codeFlag:3,user_code:t.data.yzmFloorText},success:function(e){e.data.res?i.request({url:C.docinDomain()+"/mini/msgValidacode.do",header:x.globalData.requestHeader,data:{login_tel:t.data.phone},success:function(a){if(0==a.data.code)t.setData({tempFlag:1}),t.cancelYzm();else{if(-1==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"手机号为空！"}),!1;if(-2==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"手机号格式不正确！"}),!1;if(1==a.data.code||5==e.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"短信发送过于频繁，请稍后再试！"}),!1;if(10==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"短信发送过于频繁，请明天再试！"}),!1}},fail:function(t){console.log(t)}}):t.setData({phoneYzmError:!0,phoneYzmErrorText:"验证码错误，请重新输入",yzmFloorFocus:!0})},fail:function(t){console.log(t)}})}},cancelYzm:function(){if(this.setData({showPublicShadow:!1,yzmFloor:!1,yzmFloorText:"",phoneYzmError:!1,phoneYzmErrorText:""}),1==this.data.tempFlag){i.showModal({content:"验证码已发送，请查看手机",showCancel:!1,confirmText:"确定"});var t=60,e=this;e.setData({getYzmText:"重新发送("+t+")"});var n=a((function(){--t>0?e.setData({getYzmText:"重新发送("+t+")"}):(clearInterval(n),e.setData({getYzmText:"获取验证码",tempFlag:0}),t=60)}),1e3)}},loginBd:function(t){P.inpmv(740);var e=this;if(t.detail.encryptedData){var a=t.detail;i.getLoginCode({success:function(t){i.request({url:C.docinDomain()+"/mini/quickTelPhone.do",header:x.globalData.requestHeader,data:{code:t.code,iv:a.iv,dy:a.encryptedData},success:function(t){0==t.data.code?(i.setStorageSync("publicLoginEmail",t.data.loginEmail),i.setStorageSync("publicPassword",t.data.password),e.setData({showWelcome:!0,headPic:t.data.usrImg,nickName:t.data.nickName}),e.calculateTime()):i.showToast({title:"登录出错,请稍后再试！",icon:"none"})},fail:function(t){i.showToast({title:"登录出错,请稍后再试！",icon:"none"})}})},fail:function(t){console.log("getLoginCode fail",t)}})}},picError:function(){this.setData({headPic:C.docinDomain()+"/images_cn/people01_80x80.gif"})},backLogin:function(){var t=this;i.request({url:C.docinDomain()+"/mini/clearUserInfo.do",header:x.globalData.requestHeader,success:function(e){i.removeStorageSync("publicLoginEmail"),i.removeStorageSync("publicPassword"),x.publicHeader(),t.setData({showWelcome:!1}),t.clearDjsTimer()}})},backAction:function(){this.setData({showWelcome:!1}),this.clearDjsTimer(),this.publicBack()},calculateTime:function(){var t=this,e=this.data.backDjsTime;t.data.backDjsTimer=a((function(){e--,t.setData({backDjsTime:e}),0==t.data.backDjsTime&&(t.clearDjsTimer(),t.backAction())}),1e3)},clearDjsTimer:function(){clearInterval(this.data.backDjsTimer),this.setData({backDjsTime:5})},turnService:function(){i.navigateTo({url:"../serviceTips/serviceTips"})},publicBack:function(){"my"==this.data.sourceAction?i.redirectTo({url:"../my/my"}):"docin"==this.data.sourceAction?i.redirectTo({url:"../mydocin/mydocin"}):"bookhouse"==this.data.sourceAction?i.redirectTo({url:"../bookhouse/bookhouse"}):"recharge"==this.data.sourceAction?i.redirectTo({url:"../recharge/recharge"}):"bill"==this.data.sourceAction?i.redirectTo({url:"../billdetail/billdetail"}):"award"==this.data.sourceAction||"service"==this.data.sourceAction?i.redirectTo({url:"../awarddetail/awarddetail"}):"about"==this.data.sourceAction?i.redirectTo({url:"../aboutdocin/aboutdocin"}):i.redirectTo({url:"../"+this.data.sourceFrom+"/"+this.data.sourceFrom+"?documentId="+this.data.documentId+"&action="+this.data.sourceAction})},turnHelp:function(){i.navigateTo({url:"../help/help"})},publicCancel:function(){this.data.forgetFloor&&this.cancelForget()},onReady:function(){},onShow:function(){var t=r().getTracker();t.setScreenName("百度小程序-login"),t.send((new F.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/recharge/recharge",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var x=i(),S=t("../../utils/web.js"),C=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,userId:0,rechargeItems:[{rmb:10,douyuan:10,giftLong:"",giftShort:"",other:!1,selected:!1},{rmb:20,douyuan:20,giftLong:"",giftShort:"",other:!1,selected:!1},{rmb:50,douyuan:50,giftLong:"",giftShort:"",other:!1,selected:!1},{rmb:100,douyuan:120,giftLong:"附赠1月VIP",giftShort:"1个月VIP",other:!1,selected:!0},{rmb:200,douyuan:260,giftLong:"附赠2月VIP",giftShort:"2个月VIP",other:!1,selected:!1},{rmb:500,douyuan:700,giftLong:"附赠5月VIP",giftShort:"5个月VIP",other:!1,selected:!1},{rmb:1e3,douyuan:1400,giftLong:"附赠10月VIP",giftShort:"10个月VIP",other:!1,selected:!1},{rmb:2e3,douyuan:2800,giftLong:"附赠2年VIP",giftShort:"2年VIP",other:!1,selected:!1},{rmb:0,douyuan:0,giftLong:"",giftShort:"",other:!0,selected:!1}],bal:0,beforeAction:"",pid:0,needMoney:""},onLoad:function(t){x.publicHeader(),this.setData({beforeAction:t.action,pid:t.pid,needMoney:t.needMoney})},turnCashier:function(t){if(0==t.currentTarget.dataset.sum){var e=this.data.rechargeItems;e.splice(8,1),this.setData({rechargeItems:[].concat(_(e),[{rmb:5e3,douyuan:7e3,giftLong:"附赠5年VIP",giftShort:"5年VIP",other:!1,selected:!1},{rmb:1,douyuan:1,giftLong:"",giftShort:"",other:!1,selected:!1},{rmb:2,douyuan:2,giftLong:"",giftShort:"",other:!1,selected:!1},{rmb:5,douyuan:5,giftLong:"",giftShort:"",other:!1,selected:!1}])})}else{var a=t.currentTarget.dataset.sum,n=t.currentTarget.dataset.douyuan,i=t.currentTarget.dataset.gift;o.navigateTo({url:"../cashier/cashier?sum="+a+"&douyuan="+n+"&gift="+i+"&beforeAction="+this.data.beforeAction+"&pid="+this.data.pid})}},onReady:function(){},onShow:function(){var t=this;o.request({url:S.docinDomain()+"/mini/finPageInfo.do",header:x.globalData.requestHeader,success:function(e){t.setData({bal:e.data.data.total,userId:e.data.data.userId})},fail:function(t){console.log(t)}});var e=i().getTracker();e.setScreenName("百度小程序-recharge"),e.send((new C.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/my/my",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/web.js"),S=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:_.globalData.ifIos,myObj:{},tabIndex:!1},onLoad:function(){_.publicHeader()},turnIndex:function(){o.reLaunch({url:"../index/index"})},turnMydocin:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../mydocin/mydocin"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.navigateTo({url:"../login/login?source=my&action=docin"}))},fail:function(t){console.log(t)}})},turnRecharge:function(){this.data.ifIos?o.showModal({title:"提示",content:"由于相关规定，IOS功能暂不可用！",showCancel:!1,success:function(t){}}):o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../recharge/recharge?action=recharge"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=my&action=recharge"}))},fail:function(t){console.log(t)}})},turnBookhouse:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../bookhouse/bookhouse"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=my&action=bookhouse"}))},fail:function(t){console.log(t)}})},onReady:function(){},onShow:function(){var t=this;o.request({url:x.docinDomain()+"/app/xcx/mine",header:_.globalData.requestHeader,success:function(e){0==e.data.code||1==e.data.code&&"Success"==e.data.msg&&t.setData({myObj:{nickName:e.data.nickName,bal:e.data.bal,headPic:e.data.img,ifVip:e.data.ifVip}})},fail:function(t){console.log(t)}});var e=i().getTracker();e.setScreenName("百度小程序-my"),e.send((new S.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/mydocin/mydocin",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/web.js"),S=t("../../utils/stat.js"),C=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:_.globalData.ifIos,tabIndex:!1,myDocinObj:{}},onLoad:function(){_.publicHeader(),S.inpv(691)},onReady:function(){},turnRecharge:function(){this.data.ifIos?o.showModal({title:"提示",content:"由于相关规定，IOS功能暂不可用！",showCancel:!1,success:function(t){}}):o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../recharge/recharge?action=recharge"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=mydocin&action=recharge"}))},fail:function(t){console.log(t)}})},showBill:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../billdetail/billdetail"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=mydocin&action=bill"}))},fail:function(t){console.log(t)}})},showAward:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../awarddetail/awarddetail"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=mydocin&action=award"}))},fail:function(t){console.log(t)}})},showService:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../contactservice/contactservice"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=mydocin&action=service"}))},fail:function(t){console.log(t)}})},showDocin:function(){o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:_.globalData.requestHeader,success:function(t){1==t.data.code?o.navigateTo({url:"../aboutdocin/aboutdocin"}):2==t.data.code&&(o.setStorage({key:"sessionId",data:t.data.sessionid}),o.redirectTo({url:"../login/login?source=mydocin&action=about"}))},fail:function(t){console.log(t)}})},quitLogin:function(){o.request({url:x.docinDomain()+"/mini/logout.do",header:{sessionId:_.globalData.requestHeader.sessionId},success:function(t){o.reLaunch({url:"../index/index"}),o.removeStorage({key:"publicLoginEmail",success:function(t){}}),o.removeStorage({key:"publicPassword",success:function(t){}}),o.removeStorage({key:"sessionId",success:function(t){}})},fail:function(t){console.log(t)}})},turnIndex:function(){o.reLaunch({url:"../index/index"})},onShow:function(){var t=this;o.request({url:x.docinDomain()+"/app/xcx/mine",header:_.globalData.requestHeader,success:function(e){0==e.data.code||1==e.data.code&&"Success"==e.data.msg&&t.setData({myDocinObj:{nickName:e.data.nickName,bal:e.data.bal,headPic:e.data.img,ifVip:e.data.ifVip}})},fail:function(t){console.log(t)}});var e=i().getTracker();e.setScreenName("百度小程序-mydocin"),e.send((new C.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/billdetail/billdetail",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var x=i(),S=t("../../utils/web.js"),C=t("../../utils/util.js"),P=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,billArray:[],pageNum:1,ifExistDetail:!0,loadTxt:"以上为最近6个月的全部交易记录"},onLoad:function(){o.showLoading({title:"正在加载中"}),this.requestData(this.data.pageNum),x.publicHeader()},requestData:function(t){var e=this;o.request({url:S.docinDomain()+"/mini/saleAccount.do",header:x.globalData.requestHeader,data:{currentPage:t},success:function(t){if(1==t.data.data.result)if(o.hideLoading(),null!=t.data.data.list){for(var a=t.data.data.list,n=0;n<a.length;n++)a[n].created_date=C.timestampToTime(a[n].created_date,2),120==a[n].account_record_typeid?a[n].amount=a[n].amount.toFixed(2):e.isInteger(a[n].amount)&&(a[n].amount=a[n].amount.toFixed(1));e.setData({ifExistDetail:!0,billArray:[].concat(_(e.data.billArray),_(a))}),t.data.data.hasNext?e.setData({loadTxt:"点击加载更多"}):e.setData({loadTxt:"以上为最近6个月的全部交易记录"})}else e.setData({ifExistDetail:!1})},fail:function(t){console.log(t)}})},loadMore:function(){if("点击加载更多"!=this.data.loadTxt)return!1;this.data.pageNum++,this.requestData(this.data.pageNum)},turnResult:function(t){if(!(t.currentTarget.dataset.id>0))return!1;o.request({url:S.docinDomain()+"/mini/queryPsInfo.do?id="+t.currentTarget.dataset.id,header:x.globalData.requestHeader,success:function(e){null==e.data.data?o.navigateTo({url:"../notfound/notfound"}):o.navigateTo({url:"../result/result?documentId="+t.currentTarget.dataset.id})}})},isInteger:function(t){return parseInt(t)==parseFloat(t)},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-billdetail"),t.send((new P.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/awarddetail/awarddetail",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var x=i(),S=t("../../utils/web.js"),C=t("../../utils/util.js"),P=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,awardArray:[],pageNum:1,ifExistDetail:!0,loadTxt:"以上为最近6个月的全部交易记录"},onLoad:function(){o.showLoading({title:"正在加载中"}),x.publicHeader(),this.requestData(this.data.pageNum)},requestData:function(t){var e=this;o.request({url:S.docinDomain()+"/mini/awardRecord.do",header:x.globalData.requestHeader,data:{currentPage:t},success:function(t){if(1==t.data.data.result)if(o.hideLoading(),null!=t.data.data.list){for(var a=t.data.data.list,n=0;n<a.length;n++)a[n].created_date=C.timestampToTime(a[n].created_date,2),105!=a[n].account_record_typeid&&107!=a[n].account_record_typeid&&116!=a[n].account_record_typeid&&121!=a[n].account_record_typeid&&123!=a[n].account_record_typeid&&e.isInteger(a[n].dd_score)&&(a[n].dd_score=a[n].dd_score.toFixed(1));e.setData({ifExistDetail:!0,awardArray:[].concat(_(e.data.awardArray),_(a))}),t.data.data.hasNext?e.setData({loadTxt:"点击加载更多"}):e.setData({loadTxt:"以上为最近6个月的全部交易记录"})}else e.setData({ifExistDetail:!1})},fail:function(t){console.log(t)}})},loadMore:function(){if("点击加载更多"!=this.data.loadTxt)return!1;this.data.pageNum++,this.requestData(this.data.pageNum)},isInteger:function(t){return parseInt(t)==parseFloat(t)},turnResult:function(t){if(!(t.currentTarget.dataset.id>0))return!1;o.request({url:S.docinDomain()+"/mini/queryPsInfo.do?id="+t.currentTarget.dataset.id,header:x.globalData.requestHeader,success:function(e){null==e.data.data?o.navigateTo({url:"../notfound/notfound"}):o.navigateTo({url:"../result/result?documentId="+t.currentTarget.dataset.id})}})},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-awarddetail"),t.send((new P.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/contactservice/contactservice",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=(t("../../utils/web.js"),t("../../utils/ga.js").HitBuilders);Page({data:{ifIos:_.globalData.ifIos},onLoad:function(){},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-contactservice"),t.send((new x.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/aboutdocin/aboutdocin",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:_.globalData.ifIos},onLoad:function(){},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-aboutdocin"),t.send((new x.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/cashier/cashier",(function(t,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x=r(),S=t("../../utils/web.js"),C=(t("../../utils/util.js"),t("../../utils/ga.js").HitBuilders);Page({data:{ifIos:x.globalData.ifIos,sum:0,douyuan:0,gift:"",currentWay:0,showPublicShadow:!1,showpayShadowCenter:!1,ifpaySuccess:!1,beforeAction:"",pid:0},onLoad:function(t){x.publicHeader(),this.setData({sum:parseFloat(t.sum).toFixed(2),douyuan:parseFloat(t.douyuan).toFixed(2),gift:t.gift,beforeAction:t.beforeAction,pid:t.pid});var e=this;i.getSystemInfo({success:function(t){"web"==t.platform&&""!=i.getStorageSync("orderId")&&e.afterPay(i.getStorageSync("orderId"))},fail:function(t){}})},payThisway:function(t){var e=t.currentTarget.dataset.current;this.setData({currentWay:e})},payNow:function(){var t=this;if("recharge"==this.data.beforeAction)var e={type:0,amount:t.data.sum};else if("read"==this.data.beforeAction)e={type:1,amount:t.data.sum,productId:t.data.pid};else if("download"==this.data.beforeAction)e={type:2,amount:t.data.sum,productId:t.data.pid};i.request({url:S.docinDomain()+"/mini/preparePay.do",header:x.globalData.requestHeader,data:e,success:function(e){if(1==e.data.data.result){var a=e.data.data.orderInfo;t.publicPay(a),t.setData({showPublicShadow:!0,showpayShadowCenter:!0}),i.getSystemInfo({success:function(t){"web"==t.platform&&""==i.getStorageSync("orderId")&&i.setStorageSync("orderId",a.tpOrderId)},fail:function(t){}})}},fail:function(t){console.log(t)}})},publicPay:function(t){var e=this;i.requestPolymerPayment({orderInfo:t,success:function(a){e.setData({ifpaySuccess:!0}),e.cancelPayCenter(),"recharge"==e.data.beforeAction?i.showLoading({title:"正在充值中，请稍等"}):i.showLoading({title:"正在购买中，请稍等"}),i.getSystemInfo({success:function(a){"web"!=a.platform&&e.afterPay(t.tpOrderId)},fail:function(t){}})},fail:function(t){e.setData({ifpaySuccess:!1}),e.turnRoute("fail")}})},afterPay:function(t){var a=this;i.request({url:S.docinDomain()+"/mini/finBuy.do",header:x.globalData.requestHeader,data:{finId:t},success:function(t){1==t.data.data.result?a.turnRoute("success"):0==t.data.data.result?e((function(){a.turnRoute("success")}),1500):(a.setData({ifpaySuccess:!1}),a.turnRoute("fail"))},fail:function(t){console.log(t)}})},turnRoute:function(t){i.hideLoading(),"recharge"==this.data.beforeAction?"fail"==t?(i.showToast({title:"支付失败或取消",icon:"none"}),this.setData({showPublicShadow:!1,showpayShadowCenter:!1})):i.navigateTo({url:"../billdetail/billdetail"}):"read"==this.data.beforeAction?i.reLaunch({url:"../result/result?documentId="+this.data.pid+"&status="+t}):"download"==this.data.beforeAction&&i.reLaunch({url:"../result/result?documentId="+this.data.pid+"&action=download&status="+t}),""!=i.getStorageSync("orderId")&&i.removeStorageSync("orderId")},cancelPayCenter:function(){this.setData({showpayShadowCenter:!1,showPublicShadow:!1})},okPayCenter:function(){this.setData({showpayShadowCenter:!1,showPublicShadow:!1}),this.data.ifpaySuccess||i.showToast({title:"您尚未完成支付，请重新支付",icon:"none"})},publicCancel:function(){this.cancelPayCenter()},onReady:function(){},onShow:function(){var t=r().getTracker();t.setScreenName("百度小程序-cashier"),t.send((new C.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/search/search",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var x=i(),S=t("../../utils/web.js"),C=t("../../utils/util.js"),P=t("../../utils/stat.js"),F=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,currentTab:0,typeSelected:!1,typeText:"格式",currentType:0,searchKey:"",yz:0,ot:0,ft:0,pageNum:1,ifNext:!1,searchType:!1,searchResultArr:[],ifLoadMore:!1,loadMoreTxt:"点击加载更多",ifResultNo:!0,dynamicPrefix:"",showBacktop:!1,showSearchFloor:!1,showSearchMiddle:!0,searchPlaceholder:"搜索文档或关键词",searchTxt:"",autoFocus:!1,showClear:!1,hotArray:[],historyArray:[],ifShowIndex:!0,ifExistHistory:!1,sourceFrom:"",sourcrPid:0,ifShowMatch:!1,matchArray:[],tempArray:[],swiperCurrent:0},onPageScroll:function(t){var e=o.getSystemInfoSync().screenHeight;t.scrollTop>.8*e?this.setData({showBacktop:!0}):this.setData({showBacktop:!1})},goBackTop:function(){o.pageScrollTo({scrollTop:0,duration:300})},showSearch:function(t){P.inpmv(689),"clear"==t.target.dataset.tip&&this.setData({searchTxt:""}),this.setData({showSearchFloor:!0,autoFocus:!0}),this.getHotSearch(),this.getHistorySearch()},cancelSearch:function(){this.setData({showSearchFloor:!1,searchTxt:this.data.searchKey,autoFocus:!1})},changeInput:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},confirmInput:function(t){if(""==t.detail.value.trim())return this.setData({autoFocus:!0,searchTxt:""}),!1;this.publicTurnSearch(t.detail.value)},getFocus:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},getBlur:function(){this.setData({autoFocus:!1})},clearValue:function(){this.setData({searchTxt:"",showClear:!1,autoFocus:!0})},forceFocus:function(){this.setData({autoFocus:!0})},getHotSearch:function(){var t=this;o.request({url:S.docinDomain()+"/mini/ajax_search_layer.do",header:x.globalData.requestHeader,success:function(e){e.data.data.list.length>0&&t.setData({hotArray:e.data.data.list})},fail:function(t){console.log(t)}})},setHistorySearch:function(t,e){var a=this;o.getStorage({key:"historyArray",success:function(n){9999!=e?(o.setStorage({key:"historyArray",data:Array.from(new Set([].concat(_(t))))}),a.getHistorySearch()):o.setStorage({key:"historyArray",data:Array.from(new Set([].concat(_(t),_(n.data))))})},fail:function(t){console.log(t)}})},getHistorySearch:function(){var t=this;o.getStorage({key:"historyArray",success:function(e){0==e.data.length?t.setData({ifExistHistory:!1}):t.setData({ifExistHistory:!0,historyArray:e.data.length<=5?e.data:e.data.slice(0,5)})},fail:function(t){console.log(t)}})},turnSearch:function(t){this.publicTurnSearch(t.currentTarget.dataset.key)},publicTurnSearch:function(t){this.setHistorySearch(new Array(t),9999),o.navigateTo({url:"../search/search?sourceFrom=search&key="+t}),this.setData({showSearchFloor:!1})},removeHistory:function(){o.clearStorage({}),this.getHistorySearch()},deleteHistory:function(t){var e=this.data.historyArray;e.splice(t.currentTarget.dataset.sub,1),this.setHistorySearch(e,t.currentTarget.dataset.sub)},onLoad:function(t){o.showLoading({title:"正在加载中"}),x.publicHeader(),P.inpv(690);var e=this;o.request({url:S.docinDomain()+"/jsp_cn/mini/display.jsp",success:function(t){e.setData({dynamicPrefix:t.data.data.st})}}),this.setData({searchKey:t.key,searchTxt:t.key,sourceFrom:t.sourceFrom,sourcrPid:t.pid});var a={rkey:this.data.searchKey,yz:this.data.yz,ot:this.data.ot,ft:this.data.ft,pageNum:this.data.pageNum};this.publicSearch(a)},backPrev:function(){null!=this.data.sourcrPid?o.redirectTo({url:"../"+this.data.sourceFrom+"/"+this.data.sourceFrom+"?documentId="+this.data.sourcrPid}):"search"==this.data.sourceFrom?o.navigateBack({}):o.redirectTo({url:"../"+this.data.sourceFrom+"/"+this.data.sourceFrom})},switchCondition:C.throttle((function(t){this.hideTypes();var e=t.currentTarget.dataset.current;this.setData({currentTab:e,pageNum:1,ifNext:!1}),0==e?this.setData({yz:0,ot:0}):1==e?this.setData({yz:1,ot:0}):2==e&&this.setData({yz:0,ot:1});var a={rkey:this.data.searchKey,yz:this.data.yz,ot:this.data.ot,ft:this.data.ft,pageNum:this.data.pageNum};this.publicSearch(a),this.goBackTop()})),showTypes:function(){var t,e,a;this.setData((t={searchType:!0,typeSelected:!this.data.typeSelected},e="searchType",a=!this.data.searchType,e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t))},hideTypes:function(){this.setData({searchType:!1,typeSelected:!1})},chooseType:function(t){var e=t.currentTarget.dataset.sub,a=t.currentTarget.dataset.txt;this.setData({currentType:e,typeText:a,searchType:!1,typeSelected:!1,ft:e,pageNum:1,ifNext:!1});var n={rkey:this.data.searchKey,yz:this.data.yz,ot:this.data.ot,ft:e,pageNum:this.data.pageNum};this.publicSearch(n),this.goBackTop()},loadMore:function(){var t=this.data.pageNum;t++,this.setData({pageNum:t,loadMoreTxt:"正在加载...",ifNext:!0});var e={rkey:this.data.searchKey,yz:this.data.yz,ot:this.data.ot,ft:this.data.ft,pageNum:t};this.publicSearch(e)},swiperChangeCustom:function(t){this.setData({swiperCurrent:t.detail.current})},spArr:function(t,e){for(var a=[],n=0;n<t.length;)a.push(t.slice(n,n+=e));return a},publicSearch:function(t){var e=this;o.request({url:S.docinDomain()+"/mini/search.do",header:x.globalData.requestHeader,data:t,success:function(t){if(o.hideLoading(),t.data.data.isMaiQi){var a=t.data.data.mqRecommends;e.setData({ifShowMatch:!0,matchArray:a})}var n=t.data.data.list;n.length>0?(e.setData({ifResultNo:!0}),e.data.ifNext?e.setData({searchResultArr:[].concat(_(e.data.searchResultArr),_(n))}):e.setData({searchResultArr:n}),t.data.data.currentPage<t.data.data.pageCount?e.setData({ifLoadMore:!0}):e.setData({ifLoadMore:!1})):e.setData({ifResultNo:!1})},fail:function(t){console.log(t)},complete:function(){e.setData({loadMoreTxt:"点击加载更多"})}})},gotoResult:C.throttle((function(t){P.inpmv(7121);var e=t.currentTarget.dataset.docid;o.request({url:S.docinDomain()+"/mini/queryPsInfo.do",data:{id:e},success:function(t){null==t.data.data?o.navigateTo({url:"../notfound/notfound"}):o.navigateTo({url:"../result/result?documentId="+e})}})})),onReady:function(){},onShow:function(){o.setPageInfo({title:"豆丁网_"+this.data.searchKey,success:function(t){console.log("setPageInfo success")},fail:function(t){console.log("setPageInfo fail",t)}});var t=i().getTracker();t.setScreenName("百度小程序-search"),t.send((new F.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/bookhouse/bookhouse",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";function _(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var x=i(),S=t("../../utils/web.js"),C=(t("../../utils/util.js"),t("../../utils/stat.js")),P=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,showSelect:!1,arrIndex:0,selectArray:[],selectObj:{},value:[0],bookArray:[],floderType:-1,pageNum:1,hasNext:!1,loadTxt:"点击加载更多",ifExistDetail:!1,detailStr:"",fixedTop:!1,searchKey:"",showBacktop:!1,showSearchFloor:!1,showSearchMiddle:!1,searchPlaceholder:"查找书房里的文档",searchBarTxt:"查找书房里的文档",searchTxt:"",autoFocus:!1,showClear:!1,dynamicPrefix:""},onLoad:function(){o.showLoading({title:"正在加载中"});var t=this;o.request({url:S.docinDomain()+"/jsp_cn/mini/display.jsp",success:function(e){t.setData({dynamicPrefix:e.data.data.st})}}),this.requestBookhouse(this.data.floderType,this.data.pageNum,this.data.searchKey),x.publicHeader()},onPageScroll:function(t){var e=this,a=o.getSystemInfoSync().screenHeight;t.scrollTop>.8*a?this.setData({showBacktop:!0}):this.setData({showBacktop:!1});var n=o.createSelectorQuery();n.select(".detailCon-top-box").boundingClientRect(),n.exec((function(a){if(null!=a[0]){var n=a[0].top;t.scrollTop>n?e.setData({fixedTop:!0}):e.setData({fixedTop:!1})}}))},goBackTop:function(){o.pageScrollTo({scrollTop:0,duration:300})},showSearch:function(){C.inpmv(7641),this.setData({showSearchFloor:!0,autoFocus:!0})},cancelSearch:function(){this.setData({showSearchFloor:!1,searchTxt:this.data.searchKey,autoFocus:!1})},changeInput:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},confirmInput:function(t){if(""==t.detail.value.trim())return this.setData({autoFocus:!0,searchTxt:""}),!1;this.setData({searchKey:t.detail.value.trim()}),this.searchMyBook(this.data.searchKey)},getFocus:function(t){""==t.detail.value.trim()?this.setData({showClear:!1}):this.setData({showClear:!0})},getBlur:function(){this.setData({autoFocus:!1})},clearValue:function(){this.setData({searchTxt:"",showClear:!1,autoFocus:!0})},forceFocus:function(){this.setData({autoFocus:!0})},selectFloder:function(){this.setData({showSelect:!0})},changeSelection:function(t){this.setData({bookArray:[],arrIndex:t.detail.value,floderType:this.data.selectObj[t.detail.value].floderId,pageNum:1,searchKey:"",searchTxt:"",searchBarTxt:"查找书房里的文档"}),this.requestBookhouse(this.data.floderType,this.data.pageNum,this.data.searchKey)},searchMyBook:function(t){this.setData({bookArray:[],pageNum:1,showSearchFloor:!1,searchTxt:t,searchBarTxt:t,arrIndex:0}),this.requestBookhouse(this.data.floderType,this.data.pageNum,t)},requestBookhouse:function(t,e,a){var n=this;o.request({url:S.docinDomain()+"/mini/bookhouse.do",header:x.globalData.requestHeader,data:{floderId:t,page:e,keyword:a},success:function(t){if(-1==t.data.code)o.navigateTo({url:"../login/login"});else if(0==t.data.code)if(o.hideLoading(),t.data.bookPage.length>0){if(0==n.data.selectArray.length){for(var a=n.data.selectArray,i=0;i<t.data.floderList.length;i++)a.push(t.data.floderList[i].floderName);n.setData({selectObj:t.data.floderList,selectArray:a})}n.setData({bookArray:[].concat(_(n.data.bookArray),_(t.data.bookPage)),ifExistDetail:!0}),t.data.totalPage>e?n.setData({hasNext:!0,loadTxt:"点击加载更多"}):n.setData({hasNext:!1})}else n.setData({ifExistDetail:!1,detailStr:""==n.data.searchKey.trim()?"目前没有内容!":"抱歉，没有找到符合条件的文档。建议更换关键词搜索"})},fail:function(t){console.log(t)}})},loadMore:function(){this.setData({loadTxt:"正在加载..."}),this.data.pageNum++,this.requestBookhouse(this.data.floderType,this.data.pageNum,this.data.searchKey)},gotoResult:function(t){o.request({url:S.docinDomain()+"/mini/queryPsInfo.do?id="+t.currentTarget.dataset.docid,header:x.globalData.requestHeader,success:function(e){null==e.data.data?o.navigateTo({url:"../notfound/notfound"}):o.navigateTo({url:"../result/result?documentId="+t.currentTarget.dataset.docid})}})},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-我bookhouse"),t.send((new P.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/register/register",(function(t,e,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T,_){"use strict";var x=r(),S=t("../../utils/util.js"),C=t("../../utils/web.js"),P=t("../../utils/stat.js"),F=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:x.globalData.ifIos,focusPhone:!1,errorPhone:!1,phoneText:"",focusPass:!1,errorPass:!1,passwordText:"",showPassword:!0,focusCode:!1,errorCode:!1,codeText:"",getYzmText:"获取验证码",yzmFloor:!1,yzmFloorFocus:!1,yzmFloorText:"",phoneYzmErro:!1,phoneYzmError:"",yzmFloorPic:"",showError:!1,errorText:"",tempFlag:0,regTxt:"确定注册"},getPhone:function(t){this.setData({phoneText:t.detail.value})},phoneFocus:function(){this.setData({focusPhone:!0,focusPass:!1,focusCode:!1,showError:!1,errorPhone:!1,errorPass:!1,errorCode:!1})},phoneBlur:function(){this.setData({focusPhone:!1})},getPassword:function(t){this.setData({passwordText:t.detail.value})},passwordFocus:function(){this.setData({focusPass:!0,focusPhone:!1,focusCode:!1,showError:!1,errorPass:!1,errorPhone:!1,errorCode:!1})},passwordBlur:function(){this.setData({focusPass:!1})},controlPassword:function(){this.setData({showPassword:!this.data.showPassword})},getCode:function(t){this.setData({codeText:t.detail.value})},codeFocus:function(){this.setData({focusCode:!0,focusPhone:!1,focusPass:!1,showError:!1,errorCode:!1,errorPhone:!1,errorPass:!1})},codeBlur:function(){this.setData({focusCode:!1})},onLoad:function(){P.inpv(694),x.publicHeader()},getYzm:function(){if(""==this.data.phoneText.trim())return this.setData({showError:!0,errorText:"请输入手机号",errorPhone:!0}),!1;if(""!==this.data.phoneText.trim()&&0==S.isPoneAvailable(this.data.phoneText))return this.setData({showError:!0,errorText:"手机号格式不正确",errorPhone:!0}),!1;if(""!==this.data.phoneText.trim()&&1==S.isPoneAvailable(this.data.phoneText)){var t=this;i.request({url:C.docinDomain()+"/app/xcx/clickGetRegisterCode",header:x.globalData.requestHeader,data:{login_tel:t.data.phoneText},success:function(e){if(-8==e.data.code||-9==e.data.code)return t.setData({showError:!0,errorText:"此手机号已注册过",errorPhone:!0}),!1;1==e.data.code&&(t.setData({showPublicShadow:!0,yzmFloor:!0,yzmFloorFocus:!0}),t.getYzmPic())}})}},changeYzm:function(){this.getYzmPic()},getYzmPic:function(){var t=this;i.request({url:C.docinDomain()+"/app/xcx/getDocinCode",header:x.globalData.requestHeader,data:{login_tel:t.data.phoneText,codeFlag:2},success:function(e){1==e.data.code&&t.setData({yzmFloorPic:"data:image/jpeg;base64,"+e.data.result.replace(/[\r\n]/g,"")})},fail:function(t){console.log(t)}})},compareCode:function(){if(this.setData({yzmFloorFocus:!1}),""==this.data.yzmFloorText.trim())return this.setData({phoneYzmError:!0,phoneYzmErrorText:"请输入短信验证码",yzmFloorFocus:!0}),!1;if(""!=this.data.yzmFloorText.trim()&&5!=this.data.yzmFloorText.length)return this.setData({phoneYzmError:!0,phoneYzmErrorText:"验证码格式不正确",yzmFloorFocus:!0}),!1;if(""!=this.data.yzmFloorText.trim()&&5==this.data.yzmFloorText.length){var t=this;i.request({url:C.docinDomain()+"/mini/validataLoginCode.do",header:x.globalData.requestHeader,data:{codeFlag:2,user_code:t.data.yzmFloorText},success:function(e){e.data.res?i.request({url:C.docinDomain()+"/mini/msgValidacode.do",header:x.globalData.requestHeader,data:{login_tel:t.data.phoneText},success:function(a){if(0==a.data.code)t.setData({tempFlag:1}),t.cancelYzm();else{if(-1==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"手机号为空！"}),!1;if(-2==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"手机号格式不正确！"}),!1;if(1==a.data.code||5==e.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"短信发送过于频繁，请稍后再试！"}),!1;if(10==a.data.code)return t.setData({phoneYzmError:!0,phoneYzmErrorText:"短信发送过于频繁，请明天再试！"}),!1}},fail:function(t){console.log(t)}}):t.setData({phoneYzmError:!0,phoneYzmErrorText:"验证码错误，请重新输入",yzmFloorFocus:!0})},fail:function(t){console.log(t)}})}},cancelYzm:function(){if(this.setData({showPublicShadow:!1,yzmFloor:!1,yzmFloorText:"",phoneYzmError:!1,phoneYzmErrorText:"",yzmFloorFocus:!1}),1==this.data.tempFlag){i.showToast({title:"验证码已发送，请查看手机",icon:"none"});var t=60,e=this;e.setData({getYzmText:"重新发送("+t+")"});var n=a((function(){--t>0?e.setData({getYzmText:"重新发送("+t+")"}):(clearInterval(n),e.setData({getYzmText:"获取验证码",tempFlag:0}),t=60)}),1e3)}},publicCancel:function(){this.data.forgetFloor&&this.cancelForget()},getYzmFloorText:function(t){this.setData({yzmFloorText:t.detail.value})},regSubmit:function(){var t=this;if(""==this.data.phoneText.trim())return this.setData({showError:!0,errorText:"请输入手机号",errorPhone:!0}),!1;if(""!=this.data.phoneText.trim()&&0==S.isPoneAvailable(this.data.phoneText))return this.setData({showError:!0,errorText:"手机号格式不正确",errorPhone:!0}),!1;if(""!=this.data.phoneText.trim()&&1==S.isPoneAvailable(this.data.phoneText)){var e=this;i.request({url:C.docinDomain()+"/app/xcx/clickGetRegisterCode",header:x.globalData.requestHeader,data:{login_tel:e.data.phoneText},success:function(a){if(-8==a.data.code||-9==a.data.code)return e.setData({showError:!0,errorText:"此手机号已注册过",errorPhone:!0}),!1;if(1==a.data.code){if(""==e.data.passwordText.trim())return e.setData({showError:!0,errorText:"密码不能为空，请填写",errorPass:!0}),!1;if(e.data.passwordText.trim().length<6)return e.setData({showError:!0,errorText:"密码长度不能少于6位",errorPass:!0}),!1;if(e.data.passwordText.trim().length>16)return e.setData({showError:!0,errorText:"密码长度不能多于16位",errorPass:!0}),!1;if(""==e.data.codeText.trim())return t.setData({showError:!0,errorText:"请填写验证码",errorCode:!0}),!1;if(""!=e.data.codeText.trim()&&4!=e.data.codeText.length)return e.setData({showError:!0,errorText:"验证码格式不正确"}),!1;i.request({url:C.docinDomain()+"/app/xcx/phoneRegister",header:x.globalData.requestHeader,data:{login_tel:e.data.phoneText,user_code:e.data.codeText,password:e.data.passwordText},success:function(t){if(1==t.data.code)i.setStorage({key:"publicLoginEmail",data:e.data.phoneText}),i.setStorage({key:"publicPassword",data:e.data.passwordText}),e.setData({regTxt:"正在注册"}),i.reLaunch({url:"../index/index"}),i.showToast({title:"注册成功",icon:"none"});else{if(-12==t.data.code)return e.setData({showError:!0,errorText:"手机号格式不正确",errorPhone:!0}),!1;if(-13==t.data.code)return e.setData({showError:!0,errorText:"验证码错误，请重新输入",errorCode:!0}),!1;if(-14==t.data.code)return e.setData({showError:!0,errorText:"手机号转为long型异常",errorPhone:!0}),!1;if(-15==t.data.code||-7==t.data.code||-1e4==t.data.code)return i.showToast({title:"注册失败",icon:"none"}),!1}},fail:function(t){console.log(t)}})}},fail:function(t){console.log(t)}})}},turnLogin:function(){i.navigateBack({})},onReady:function(){},onShow:function(){var t=r().getTracker();t.setScreenName("百度小程序-register"),t.send((new F.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/serviceTips/serviceTips",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:_.globalData.ifIos},onLoad:function(){},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-serviceTips"),t.send((new x.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/help/help",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/ga.js").HitBuilders;Page({data:{ifIos:_.globalData.ifIos},onLoad:function(){},onReady:function(){},onShow:function(){var t=i().getTracker();t.setScreenName("百度小程序-help"),t.send((new x.ScreenViewBuilder).build())},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("pages/connect/connect",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=i(),x=t("../../utils/web.js");Page({data:{},contactService:function(){var t=this;o.request({url:x.docinDomain()+"/mini/bdQQService.do",header:_.globalData.requestHeader,success:function(e){1==e.data.state?t.setData({contactTxt:"文档地址：https://www.docin.com/p-"+t.data.documentId+".html\n用户Userid:"+e.data.user_id+"\n最近一次的充值交易号:"+e.data.user_bank_transaction_id+",交易日期："+e.data.date}):0==e.data.state&&t.setData({contactTxt:"文档地址：https://www.docin.com/p-"+t.data.documentId+".html\n用户Userid:"+e.data.user_id}),o.setClipboardData({data:t.data.contactTxt,success:function(){o.showToast({title:"文档信息已复制，粘贴给客服咨询",icon:"none"})}})},fail:function(t){console.log(t)}})},contact:function(t){console.log("用户面板:",t)},onInit:function(){},onLoad:function(){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},onError:function(){}})})),window.define("app",(function(t,e,a,n,o,i,r,s,c,u,l,d,h,f,p,g,m,y,w,v,D,b,T){"use strict";var _=t("./utils/ga.js"),x=t("./utils/web.js"),S=_.GoogleAnalytics;App({tracker:null,getTracker:function(){return this.tracker||(this.tracker=S.getInstance(this).setAppName("DocinBaiduProgram").setAppVersion("1.0.1").newTracker("UA-3158355-1"),this.tracker.setTrackerServer("https://ga.docin.com")),this.tracker},globalData:{userInfo:null,requestEnv:1,requestHeader:{},ifIos:!1},onLaunch:function(){this.checkIfIos(),this.checkLoginStatus();var t=o.getUpdateManager();t.onUpdateReady((function(e){o.showModal({title:"更新提示",content:"新版本已OK，点确定即可。",success:function(e){e.confirm&&t.applyUpdate()}})})),t.onUpdateFailed((function(t){o.showToast({title:"新版本下载失败，请稍后再试",icon:"none"})}))},publicHeader:function(){var t=o.getStorageSync("sessionId");this.globalData.requestHeader=""==t?{loginEmail:"",password:"",sessionId:""}:{loginEmail:o.getStorageSync("publicLoginEmail"),password:o.getStorageSync("publicPassword"),sessionId:o.getStorageSync("sessionId")}},checkIfIos:function(){var t=this;o.getSystemInfo({success:function(e){t.globalData.platform=e.platform,t.globalData.userDataPath=o.env.USER_DATA_PATH,"ios"==e.platform?t.globalData.ifIos=!0:t.globalData.ifIos=!1}})},checkLoginStatus:function(){var t=this;o.request({url:x.docinDomain()+"/mini/bdIsLogin.do",header:t.globalData.requestHeader,success:function(e){2==e.data.code&&(o.setStorage({key:"sessionId",data:e.data.sessionid}),t.publicHeader(),o.canIUse("getLoginCode")&&o.getLoginCode({success:function(e){o.request({url:x.docinDomain()+"/mini/checkLogin.do",header:t.globalData.requestHeader,data:{code:e.code},success:function(t){},fail:function(t){}})},fail:function(t){}}))},fail:function(t){console.log(t)}})}})})),window.__swanRoute="app",window.usingComponents=[],window.usingPluginComponents=[],require("app"),window.__swanRoute="pages/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("pages/index/index"),window.__swanRoute="pages/result/result",window.usingComponents=[],window.usingPluginComponents=[],require("pages/result/result"),window.__swanRoute="pages/template/template",window.usingComponents=[],window.usingPluginComponents=[],require("pages/template/template"),window.__swanRoute="pages/notfound/notfound",window.usingComponents=[],window.usingPluginComponents=[],require("pages/notfound/notfound"),window.__swanRoute="pages/login/login",window.usingComponents=[],window.usingPluginComponents=[],require("pages/login/login"),window.__swanRoute="pages/recharge/recharge",window.usingComponents=[],window.usingPluginComponents=[],require("pages/recharge/recharge"),window.__swanRoute="pages/my/my",window.usingComponents=[],window.usingPluginComponents=[],require("pages/my/my"),window.__swanRoute="pages/mydocin/mydocin",window.usingComponents=[],window.usingPluginComponents=[],require("pages/mydocin/mydocin"),window.__swanRoute="pages/billdetail/billdetail",window.usingComponents=[],window.usingPluginComponents=[],require("pages/billdetail/billdetail"),window.__swanRoute="pages/awarddetail/awarddetail",window.usingComponents=[],window.usingPluginComponents=[],require("pages/awarddetail/awarddetail"),window.__swanRoute="pages/contactservice/contactservice",window.usingComponents=[],window.usingPluginComponents=[],require("pages/contactservice/contactservice"),window.__swanRoute="pages/aboutdocin/aboutdocin",window.usingComponents=[],window.usingPluginComponents=[],require("pages/aboutdocin/aboutdocin"),window.__swanRoute="pages/cashier/cashier",window.usingComponents=[],window.usingPluginComponents=[],require("pages/cashier/cashier"),window.__swanRoute="pages/search/search",window.usingComponents=[],window.usingPluginComponents=[],require("pages/search/search"),window.__swanRoute="pages/bookhouse/bookhouse",window.usingComponents=[],window.usingPluginComponents=[],require("pages/bookhouse/bookhouse"),window.__swanRoute="pages/register/register",window.usingComponents=[],window.usingPluginComponents=[],require("pages/register/register"),window.__swanRoute="pages/serviceTips/serviceTips",window.usingComponents=[],window.usingPluginComponents=[],require("pages/serviceTips/serviceTips"),window.__swanRoute="pages/help/help",window.usingComponents=[],window.usingPluginComponents=[],require("pages/help/help"),window.__swanRoute="pages/connect/connect",window.usingComponents=[],window.usingPluginComponents=[],require("pages/connect/connect")}(__hacked);
//# sourceMappingURL=C:\output\app.js.map