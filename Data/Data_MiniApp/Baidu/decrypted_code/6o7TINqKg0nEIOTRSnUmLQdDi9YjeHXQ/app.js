var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(e){e.global,e.Function;var t=e.setTimeout,n=e.setInterval;e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis;window.define("2",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Component({options:{addGlobalClass:!0},properties:{fromType:{type:String,value:"",observer:function(e,t){e!=t&&this.setData({fromType:e})}},cartInfo:{type:Object,value:{},observer:function(e,t){if(e!=t){var n=e;this.setData({pickUpCity:n.PickupCity,dropOffCity:n.ReturnCity,pickUpStore:n.PickupStore,dropOffStore:n.ReturnStore,pickUpDate:T.createDate(n.PickupTime.split(" ")[0]),dropOffDate:T.createDate(n.ReturnTime.split(" ")[0]),pickUpTime:n.PickupTime.split(" ")[1],dropOffTime:n.ReturnTime.split(" ")[1],rentDays:T.formatRentDays(n.PickupTime,n.ReturnTime)})}}},openPicker:{type:Boolean,value:!1},PageIsDiffDropOff:{type:Boolean,value:!1},hasLogin:{type:Boolean},isFirstBuy:{type:Boolean},DiffCityFeeText:{type:String,value:""},flag:{type:String,value:""}},data:{pickUpCity:"",dropOffCity:"",pickUpStore:"",dropOffStore:"",rentDays:"",pickUpDate:null,dropOffDate:null,pickUpTime:"",dropOffTime:"",isDropOff:!1,dateList:null,timeList:null,pickupTimeList:null,dropoffTimeList:null,showDatePickerModal:!1,placePickUpIndex:null,defaultPickUpIndex:null,placeDropOffIndex:null,defaultDropOffIndex:null,rentDay:189,isDiffDropOff:!1},attached:function(){console.log("组件初始化",this.properties,this.data);var e=this.properties.cartInfo;console.log("cartinfooooooooooooooo",this.properties.cartInfo),e&&e.PickupTime&&e.ReturnTime&&this.setData({pickUpCity:e.PickupCity,dropOffCity:e.ReturnCity,pickUpStore:e.PickupStore,dropOffStore:e.ReturnStore,pickUpDate:T.createDate(e.PickupTime.split(" ")[0]),dropOffDate:T.createDate(e.ReturnTime.split(" ")[0]),pickUpTime:e.PickupTime.split(" ")[1],dropOffTime:e.ReturnTime.split(" ")[1],rentDays:T.formatRentDays(e.PickupTime,e.ReturnTime),fromType:this.properties.fromType}),this.properties.PageIsDiffDropOff&&this.setData({isDiffDropOff:this.properties.PageIsDiffDropOff})},detached:function(){},observers:{cartInfo:function(e){if(e!==this.properties.cartInfo){var t=this.properties.cartInfo;t&&this.setData({pickUpCity:t.PickupCity,dropOffCity:t.ReturnCity,pickUpStore:t.PickupStore,dropOffStore:t.ReturnStore,pickUpDate:T.createDate(t.PickupTime.split(" ")[0]),dropOffDate:T.createDate(t.ReturnTime.split(" ")[0]),pickUpTime:t.PickupTime.split(" ")[1],dropOffTime:t.ReturnTime.split(" ")[1],rentDays:T.formatRentDays(t.PickupTime,t.ReturnTime)})}},PageIsDiffDropOff:function(){this.setData({isDiffDropOff:this.properties.PageIsDiffDropOff})}},methods:{getRentDay:function(){var e=this,t=T.getParamEncrypt(w.md5_aeskey,"");o.showLoading({title:"加载中",mask:!0}),o.request({url:D.LimitTime,method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:t.auth,AppIdentity:w.des_identity},success:function(t){var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("可租时间"),console.log(n),n.IsSuccess&&e.setData({rentDay:Number(n.Result.PickUpLimitDay)+Number(n.Result.DropoffLimitDay)})},fail:function(){},complete:function(){o.hideLoading({fail:function(){}})}})},chooseCity:function(e){if("carpoolStep1"!==this.data.fromType){var t=~~e.currentTarget.dataset.type?"Y":"N";o.navigateTo({url:"/pages/booking/cityInfoPage/cityInfoPage?isReturn="+t+"&fromType="+this.properties.fromType})}},chooseStore:function(e){var t=~~e.currentTarget.dataset.type,n=e.currentTarget.dataset.cityId,r=e.currentTarget.dataset.cityName,a=t?"Y":"N";console.log(n,r),o.navigateTo({url:"/pages/booking/shopInfoPage/shopInfoPage?"+(n?"cityId="+n:"")+"&cityName="+r+"&isReturn="+a+"&fromType="+this.properties.fromType})},showDatePicker:function(){T.getCartData()&&(this.data.pickUpCity?this.data.dropOffCity?this.data.pickUpStore&&this.data.pickUpStore.Id?this.data.dropOffStore&&this.data.dropOffStore.Id?o.navigateTo({url:"/pages/booking/datePick/datePick?rentDay="+this.data.rentDay+"&fromType="+this.data.fromType}):o.showToast({title:"请选择还车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择还车城市",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车城市",duration:2e3,icon:"none",success:function(e){}}))},cancelBubble:function(e){e.cancelBubble=!0},submitStep1:function(){var e=T.getCartData();if(e.UserId=w.User.UserId||"",this.data.pickUpCity)if(this.data.dropOffCity)if(this.data.pickUpStore&&this.data.pickUpStore.Id)if(this.data.dropOffStore&&this.data.dropOffStore.Id){if(e){var t={MobileContext:{Version:w.Version,DeviceId:w.DeviceId,Source:w.Source,AppStoreId:w.AppStoreId,Idfa:w.Idfa,SessionId:w.SessionId,PromotionUrl:w.PromotionUrl,PromotionTemplateId:w.PromotionTemplateId,Longitude:w.Longitude,Latitude:w.Latitude,IpAddress:w.IpAddress,PromotionId:w.PromotionId,PhoneIMSI:w.PhoneIMSI,PhoneMAC:w.PhoneMAC,Extend:w.Extend,OperatorId:w.Extend},RequestParam:{DropoffCityName:e.ReturnCity.Name,PickupCityName:e.PickupCity.Name,PickupDeliver:e.PickupService,DropoffDeliver:e.ReturnService,PickupTime:e.PickupTime,PickupStoreId:e.PickupStore.Id,PickupCityId:e.PickupStore.CityId,DropoffTime:e.ReturnTime,DropoffStoreId:e.ReturnStore.Id,DropoffCityId:e.ReturnStore.CityId,UserId:e.UserId,OrderId:e.OrderId}},n=T.postParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.Step1SubmitValidate,data:{key:n.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();t=T.decrypt(t),t=JSON.parse(t),console.log("去选车"),console.log(t),1==t.IsSuccess?o.navigateTo({url:"../carModels/carModels"}):t.IsSuccess||o.showToast({title:t.Message,icon:"none"})},fail:function(){},complete:function(){o.hideLoading()}})}}else o.showToast({title:"请选择还车门店",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择取车门店",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择还车城市",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择取车城市",duration:2e3,icon:"none",success:function(e){}})},switchChange:function(e){var t="step2"===this.properties.fromType?w.temporaryCartInfo:T.getCartData();if(t){if(console.log("switchchange",e.detail.checked,t),!1===e.detail.checked&&(t.ReturnCity=t.PickupCity?t.PickupCity:"",t.ReturnStore=t.PickupStore?t.PickupStore:"",this.setData({dropOffCity:this.data.pickUpCity?this.data.pickUpCity:"",dropOffStore:this.data.pickUpStore?this.data.pickUpStore:""})),this.setData({isDiffDropOff:e.detail.checked}),"step2"===this.properties.fromType)return w.temporaryCartInfo=t,void this.triggerEvent("handleDiffDroppOff",{isDiffDropOff:e.detail.checked});T.setCartData(t),this.triggerEvent("handleDiffDroppOff",{isDiffDropOff:e.detail.checked})}},openDoubleImmunity:function(){o.navigateTo({url:"/pages/activity/freeCharge/freeCharge"})}}})})),window.define("3",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=e(4),w=C.enc.Utf8.parse("th!s!s@p@ssw0rd;setoae$12138!@$@"),D=C.enc.Utf8.parse("-o@g*m,%0!si^fo1");var b=["北京市","上海市","天津市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","内蒙古","广西","西藏","宁夏","新疆"],_=[{province:"北京市",cities:[{name:"东城区"},{name:"西城区"},{name:"崇文区"},{name:"宣武区"},{name:"朝阳区"},{name:"丰台区"},{name:"石景山区"},{name:"海淀区"},{name:"门头沟区"},{name:"房山区"},{name:"通州区"},{name:"顺义区"},{name:"昌平区"},{name:"大兴区"},{name:"怀柔区"},{name:"平谷区"},{name:"密云县"},{name:"延庆县"}]},{province:"上海市",cities:[{name:"黄浦区"},{name:"卢湾区"},{name:"徐汇区"},{name:"长宁区"},{name:"静安区"},{name:"普陀区"},{name:"闸北区"},{name:"虹口区"},{name:"杨浦区"},{name:"闵行区"},{name:"宝山区"},{name:"嘉定区"},{name:"浦东新区"},{name:"金山区"},{name:"松江区"},{name:"青浦区"},{name:"南汇区"},{name:"奉贤区"},{name:"崇明县"}]},{province:"天津市",cities:[{name:"和平区"},{name:"河东区"},{name:"河西区"},{name:"南开区"},{name:"红桥区"},{name:"塘沽区"},{name:"汉沽区"},{name:"大港区"},{name:"西青区"},{name:"津南区"},{name:"武清区"},{name:"蓟县"},{name:"宁河县"},{name:"静海县"},{name:"东丽区"},{name:"河北区"}]},{province:"重庆市",cities:[{name:"渝中区"},{name:"大渡口区"},{name:"江北区"},{name:"沙坪坝区"},{name:"九龙坡区"},{name:"南岸区"},{name:"北碚区"},{name:"万盛区"},{name:"双桥区"},{name:"渝北区"},{name:"巴南区"},{name:"万州区"},{name:"涪陵区"},{name:"黔江区"},{name:"长寿区"},{name:"合川市"},{name:"永川市"},{name:"江津市"},{name:"南川市"},{name:"綦江县"},{name:"潼南县"},{name:"铜梁县"},{name:"大足县"},{name:"璧山县"},{name:"垫江县"},{name:"武隆县"},{name:"丰都县"},{name:"城口县"},{name:"开县"},{name:"巫溪县"},{name:"巫山县"},{name:"奉节县"},{name:"云阳县"},{name:"忠县"},{name:"石柱"},{name:"彭水"},{name:"酉阳"},{name:"秀山"}]},{province:"河北省",cities:[{name:"石家庄"},{name:"张家口市"},{name:"承德市"},{name:"秦皇岛市"},{name:"唐山市"},{name:"廊坊市"},{name:"保定市"},{name:"沧州市"},{name:"衡水市"},{name:"邢台市"},{name:"邯郸市"}]},{province:"山西省",cities:[{name:"太原市"},{name:"大同市"},{name:"朔州市"},{name:"阳泉市"},{name:"长治市"},{name:"晋城市"},{name:"忻州区"},{name:"吕梁区"},{name:"晋中市"},{name:"临汾区"},{name:"运城区"}]},{province:"辽宁省",cities:[{name:"沈阳市"},{name:"朝阳市"},{name:"阜新市"},{name:"铁岭市"},{name:"抚顺市"},{name:"本溪市"},{name:"辽阳市"},{name:"鞍山市"},{name:"丹东市"},{name:"大连市"},{name:"营口市"},{name:"盘锦市"},{name:"锦州市"},{name:"葫芦岛市"}]},{province:"吉林省",cities:[{name:"长春市"},{name:"白城市"},{name:"松原市"},{name:"吉林市"},{name:"四平市"},{name:"辽源市"},{name:"通化市"},{name:"白山市"},{name:"延边"}]},{province:"黑龙江省",cities:[{name:"哈尔滨市"},{name:"齐齐哈尔"},{name:"黑河市"},{name:"大庆市"},{name:"伊春市"},{name:"鹤岗市"},{name:"佳木斯市"},{name:"双鸭山市"},{name:"七台河市"},{name:"鸡西市"},{name:"牡丹江市"},{name:"绥化市"},{name:"大兴安"}]},{province:"江苏省",cities:[{name:"南京市"},{name:"徐州市"},{name:"连云港"},{name:"宿迁市"},{name:"淮安市"},{name:"盐城市"},{name:"扬州市"},{name:"泰州市"},{name:"南通市"},{name:"镇江市"},{name:"常州市"},{name:"无锡市"},{name:"苏州市"}]},{province:"浙江省",cities:[{name:"杭州市"},{name:"湖州市"},{name:"嘉兴市"},{name:"舟山市"},{name:"宁波市"},{name:"绍兴市"},{name:"金华市"},{name:"台州市"},{name:"温州市"},{name:"丽水区"}]},{province:"安徽省",cities:[{name:"合肥市"},{name:"宿州市"},{name:"淮北市"},{name:"阜阳市"},{name:"蚌埠市"},{name:"淮南市"},{name:"滁州市"},{name:"马鞍山市"},{name:"芜湖市"},{name:"铜陵市"},{name:"安庆市"},{name:"黄山市"},{name:"六安市"},{name:"巢湖市"},{name:"池州区"},{name:"宣城区"}]},{province:"福建省",cities:[{name:"福州市"},{name:"南平市"},{name:"三明市"},{name:"莆田市"},{name:"泉州市"},{name:"厦门市"},{name:"漳州市"},{name:"龙岩市"},{name:"宁德市"}]},{province:"江西省",cities:[{name:"南昌市"},{name:"九江市"},{name:"景德镇市"},{name:"鹰潭市"},{name:"新余市"},{name:"萍乡市"},{name:"赣州市"},{name:"上饶区"},{name:"抚州区"},{name:"宜春区"},{name:"吉安区"}]},{province:"山东省",cities:[{name:"济南市"},{name:"聊城市"},{name:"德州市"},{name:"东营市"},{name:"淄博市"},{name:"潍坊市"},{name:"烟台市"},{name:"威海市"},{name:"青岛市"},{name:"日照市"},{name:"临沂市"},{name:"枣庄市"},{name:"济宁市"},{name:"泰安市"},{name:"莱芜市"},{name:"滨州区"},{name:"菏泽区"}]},{province:"河南省",cities:[{name:"郑州市"},{name:"三门峡市"},{name:"洛阳市"},{name:"焦作市"},{name:"新乡市"},{name:"鹤壁市"},{name:"安阳市"},{name:"濮阳市"},{name:"开封市"},{name:"商丘市"},{name:"许昌市"},{name:"漯河市"},{name:"平顶山市"},{name:"南阳市"},{name:"信阳市"},{name:"周口区"},{name:"驻马店区"}]},{province:"湖北省",cities:[{name:"武汉市"},{name:"十堰市"},{name:"襄攀市"},{name:"荆门市"},{name:"孝感市"},{name:"黄冈市"},{name:"鄂州市"},{name:"黄石市"},{name:"咸宁市"},{name:"荆州市"},{name:"宜昌市"},{name:"恩施"},{name:"襄樊市"}]},{province:"湖南省",cities:[{name:"长沙市"},{name:"张家界市"},{name:"常德市"},{name:"益阳市"},{name:"岳阳市"},{name:"株洲市"},{name:"湘潭市"},{name:"衡阳市"},{name:"郴州市"},{name:"永州市"},{name:"邵阳市"},{name:"怀化市"},{name:"娄底市"},{name:"湘西"}]},{province:"广东省",cities:[{name:"广州市"},{name:"清远市"},{name:"韶关市"},{name:"河源市"},{name:"梅州市"},{name:"潮州市"},{name:"汕头市"},{name:"揭阳市"},{name:"汕尾市"},{name:"惠州市"},{name:"东莞市"},{name:"深圳市"},{name:"珠海市"},{name:"江门市"},{name:"佛山市"},{name:"肇庆市"},{name:"云浮市"},{name:"阳江市"},{name:"茂名市"},{name:"湛江市"},{name:"中山市"}]},{province:"海南省",cities:[{name:"海口市"},{name:"三亚市"}]},{province:"四川省",cities:[{name:"成都市"},{name:"广元市"},{name:"绵阳市"},{name:"德阳市"},{name:"南充市"},{name:"广安市"},{name:"遂宁市"},{name:"内江市"},{name:"乐山市"},{name:"自贡市"},{name:"泸州市"},{name:"宜宾市"},{name:"攀枝花市"},{name:"巴中区"},{name:"达川市"},{name:"资阳区"},{name:"眉山区"},{name:"雅安区"},{name:"阿坝"},{name:"甘孜"},{name:"凉山"}]},{province:"贵州省",cities:[{name:"贵阳市"},{name:"六盘水市"},{name:"遵义市"},{name:"毕节区"},{name:"铜仁区"},{name:"安顺区"},{name:"黔东南"},{name:"黔南"},{name:"黔西南"}]},{province:"云南省",cities:[{name:"昆明市"},{name:"曲靖市"},{name:"玉溪市"},{name:"丽江区"},{name:"昭通区"},{name:"思茅区"},{name:"临沧区"},{name:"保山区"},{name:"德宏"},{name:"怒江"},{name:"迪庆"},{name:"大理"},{name:"楚雄"},{name:"红河"},{name:"文山"},{name:"西双版纳"}]},{province:"陕西省",cities:[{name:"西安市"},{name:"延安市"},{name:"铜川市"},{name:"渭南市"},{name:"咸阳市"},{name:"宝鸡市"},{name:"汉中市"},{name:"榆林市"},{name:"商洛区"},{name:"安康区"}]},{province:"甘肃省",cities:[{name:"兰州市"},{name:"嘉峪关市"},{name:"金昌市"},{name:"白银市"},{name:"天水市"},{name:"酒泉区"},{name:"张掖区"},{name:"武威区"},{name:"庆阳区"},{name:"平凉区"},{name:"定西区"},{name:"陇南区"},{name:"临夏"},{name:"甘南"}]},{province:"青海省",cities:[{name:"西宁市"},{name:"海东区"},{name:"西宁市"},{name:"海北"},{name:"海南"},{name:"黄南"},{name:"果洛"},{name:"玉树"},{name:"海西"}]},{province:"内蒙古",cities:[{name:"呼和浩特"},{name:"包头市"},{name:"乌海市"},{name:"赤峰市"},{name:"呼伦贝尔盟"},{name:"兴安盟"},{name:"哲里木盟"},{name:"锡林郭勒"},{name:"乌兰察布"},{name:"鄂尔多斯"},{name:"巴彦淖尔"},{name:"阿拉善盟"}]},{province:"广西",cities:[{name:"南宁市"},{name:"桂林市"},{name:"柳州市"},{name:"梧州市"},{name:"贵港市"},{name:"玉林市"},{name:"钦州市"},{name:"北海市"},{name:"防城港市"},{name:"南宁区"},{name:"百色区"},{name:"河池区"},{name:"柳州区"},{name:"贺州区"}]},{province:"西藏",cities:[{name:"拉萨市"},{name:"那曲区"},{name:"昌都区"},{name:"林芝区"},{name:"山南区"},{name:"日喀则"},{name:"阿里区"}]},{province:"宁夏",cities:[{name:"银川市"},{name:"石嘴山市"},{name:"吴忠市"},{name:"固原区"}]},{province:"新疆",cities:[{name:"乌鲁木齐"},{name:"克拉玛依"},{name:"喀什"},{name:"阿克苏"},{name:"和田"},{name:"吐鲁番"},{name:"哈密"},{name:"博尔塔拉"},{name:"昌吉"},{name:"巴音郭楞"},{name:"伊犁"},{name:"塔城"},{name:"阿勒泰"}]}];t.exports={des_identity_string:"Version=6630&Source=BaiduMiniApp",md5:function(e){return C.MD5(e+"Version=6630&Source=BaiduMiniApp").toString()},encrypt:function(e){var t=C.AES.encrypt(e,w,{iv:D,mode:C.mode.CFB,padding:C.pad.Pkcs7});return t=(t=(t=t.toString()).replace(/=/g,"*")).replace(/\+/g,"$")},decrypt:function(e){e=e.replace(/\*/g,"=").replace(/\$/g,"+");var t=C.AES.decrypt(e,w,{iv:D,mode:C.mode.CFB,padding:C.pad.Pkcs7});return C.enc.Utf8.stringify(t)},postParamEncrypt:function(e,t){var n=JSON.stringify(t),r=e+n;return{auth:this.md5(r),des:this.encrypt(n)}},getParamEncrypt:function(e,t){var n=t,r=e+n;return{auth:this.md5(r),des:this.encrypt(n)}},paramEncrypt:function(e,t,n){var r=e+t+JSON.stringify(n);return{auth:this.md5(r)}},getCartData:function(){var e=o.getStorageSync("EhiCart");return e||e},setCartData:function(e){o.setStorageSync("EhiCart",e)},removeCartData:function(){o.removeStorageSync("EhiCart")},setCartype:function(e){return{BrandId:e.CarTypeItem.BrandId,CarTypeId:e.CarTypeItem.CarType,Emission:e.CarTypeItem.Emission,EmissionUnit:e.CarTypeItem.EmissionUnit,FloorPrice:e.FloorPrice,GearId:e.CarTypeItem.GearId,GearName:e.CarTypeItem.GearName,IsChangeStore:e.IsChangeStore,IsEnjoyCar:e.CarTypeItem.IsEnjoyCar,LevelId:e.CommonItem.LevelId,LevelName:e.CommonItem.LevelName,LocationId:e.StockItem.LocationId,ManagerId:e.StockItem.ManagerId,MaxPassenger:e.CarTypeItem.MaxPassenger,Name:e.CarTypeItem.Name,SmallImagePath:e.CarTypeItem.SmallImagePath,SortType:e.CarTypeItem.SortType,StructureName:e.CarTypeItem.StructureName,UserLevel:e.CommonItem.UserLevel,GroupId:0,GroupDescription:e.GroupItem?e.GroupItem.Description:""}},physicalStore:function(e){var t=[],n=[];return e.forEach((function(e,r){"Y"===e.IsPhysicalStore?t.push(e):n.push(e)})),t.concat(n)},getSpecificDate:function(e,t){var n=new Date;return n.setDate(n.getDate()+e+t),n=n.getFullYear()+"-"+this.formatNum(n.getMonth()+1)+"-"+this.formatNum(n.getDate())},getSpecificTime:function(e){var t=new Date;return t.setHours(t.getHours()+e),t=t.getFullYear()+"-"+this.formatNum(t.getMonth()+1)+"-"+this.formatNum(t.getDate())+"T"+this.formatNum(t.getHours())+":00:00"},getSpecificMinute:function(e){var t=new Date;return t.setTime(t.getTime()+3600*e*1e3),t=t.getFullYear()+"-"+this.formatNum(t.getMonth()+1)+"-"+this.formatNum(t.getDate())+"T"+this.formatNum(t.getHours())+":"+this.formatNum(t.getMinutes())+":00"},getDay:function(e){var t=e.replace(/-/g,"/");return t=new Date(t).getDay(),"星期"+"日一二三四五六".split("")[t]},formatNum:function(e){return e.toString().replace(/^(\d)$/,"0$1")},oldencrypt:function(e){var t=C.enc.Utf8.parse("th!s!s@p@ssw0rd;setoae$12138!@$@"),n=C.AES.encrypt(e,t,{iv:D,mode:C.mode.CFB,padding:C.pad.Pkcs7});return n=(n=(n=n.toString()).replace(/=/g,"*")).replace(/\+/g,"$"),n=encodeURIComponent(n)},formatStrDate:function(e){switch(void 0===e?"undefined":T(e)){case"string":var t=e.split(" ")[0].split(/-|\//g),n=e.split(" ")[1].split(/-|\/|:/g);return t[0]+"-"+this.formatNum(t[1])+"-"+this.formatNum(t[2])+" "+this.formatNum(n[0])+":"+this.formatNum(n[1]);case"object":return e.getFullYear()+"-"+this.formatNum(e.getMonth()+1)+"-"+this.formatNum(e.getDate())+" "+this.formatNum(e.getHours())+":"+this.formatNum(e.getMinutes());case"number":return(t=new Date(e)).getFullYear()+"-"+this.formatNum(t.getMonth()+1)+"-"+this.formatNum(t.getDate())+" "+this.formatNum(t.getHours())+":"+this.formatNum(t.getMinutes())}},formatStrWithT:function(e){switch(void 0===e?"undefined":T(e)){case"string":var t=e.split(" ");return t[0]+"T"+t[1]+":00"}},formatStrWithSpace:function(e){switch(void 0===e?"undefined":T(e)){case"string":var t=e.split("T"),n=t[1].split(":");return t[0]+" "+n[0]+":"+n[1]}},createDate:function(e){return{full:this.formatNum(e.split("-")[0])+"-"+this.formatNum(e.split("-")[1])+"-"+this.formatNum(e.split("-")[2]),simply:this.formatNum(e.split("-")[1])+"月"+this.formatNum(e.split("-")[2])+"日",week:this.getDay(e)}},createAllDates:function(e,t,n,r){console.log(e,-e,n,r);var o,a,i,s,c,d,u={};for(s=0;s<(n||t);s+=1){if(o=this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[0])+"-"+this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[1])+"-"+this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[2]),a=this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[1])+"月"+this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[2])+"日",i=this.getDay(this.getMoreSpecificDate(e,s,r)),c=this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[0])+"-"+this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[1]),d=this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[2]),!u[c])switch(i){case"星期日":u[c]=[];break;case"星期一":u[c]=[""];break;case"星期二":u[c]=["",""];break;case"星期三":u[c]=["","",""];break;case"星期四":u[c]=["","","",""];break;case"星期五":u[c]=["","","","",""];break;case"星期六":u[c]=["","","","","",""]}if(s===t-1){var l=Number(this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[2]));n=t+(new Date(this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[0]),this.formatNum(this.getMoreSpecificDate(e,s,r).split("-")[1]),0).getDate()-l)}var p={full:o,simply:a,week:i,month:c,day:d};n&&s<n&&s>=t&&(p.isGray=!0),s<-e&&(p.isGray=!0),s==-e&&(p.isBlue=!0),u[c].push(p)}return u},createDates:function(e){var t,n,r,o,a=[];for(o=0;o<e;o+=1)t=this.formatNum(this.getSpecificDate(0,o).split("-")[0])+"-"+this.formatNum(this.getSpecificDate(0,o).split("-")[1])+"-"+this.formatNum(this.getSpecificDate(0,o).split("-")[2]),n=this.formatNum(this.getSpecificDate(0,o).split("-")[1])+"月"+this.formatNum(this.getSpecificDate(0,o).split("-")[2])+"日",r=this.getDay(this.getSpecificDate(0,o)),a.push({full:t,simply:n,week:r});return a},createTimes:function(e){var t,n=[];for(t=0;t<24;t+=1)e?(n.push(this.formatNum(t)+":00"),n.push(this.formatNum(t)+":30")):n.push(this.formatNum(t)+":00");return n},createMinutes:function(e){var t,n,r=[];for(t=0;t<24;t++)for(n=0;n<60;n++)n<10?n%e||r.push(this.formatNum(t)+":0"+n):n%e||r.push(this.formatNum(t)+":"+n);return r},getTime:function(e){return(e?new Date(e.replace(/-/g,"/")):new Date).getTime()},formatRentDays:function(e,t){var n=this.getTime(t)-this.getTime(e),r=n/864e5,o=n%864e5/36e5,a=r.toFixed(2);if(r<0)var i=Math.ceil(n/864e5);else i=Math.floor(n/864e5);return o&&(o=Math.ceil(o)),24===o&&(i+=1,o=0),o?{d:i+"天",h:o+"小时",dh:a}:i+"天"},getProvinceData:function(){return b},getCityData:function(){return _},strReplace:function(e,t,n){if(e){var r,o=e.replace(/\s+/g,""),a="";for(r=0;r<o.substring(t,o.length-n).length;r++)a+="*";return o.substring(0,t)+" "+a+" "+o.substring(o.length-n,e.length)}},getMoreSpecificDate:function(e,t,n){var r;return n?(n=n.split(" ")[0],r=new Date(n.split("-")[0],n.split("-")[1]-1,n.split("-")[2])):r=new Date,r.setDate(r.getDate()+e+t),r=r.getFullYear()+"-"+this.formatNum(r.getMonth()+1)+"-"+this.formatNum(r.getDate())},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}})),window.define("4",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T,C,w,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,r){"object"==D(n)?t.exports=n=r():(C=[],void 0===(w="function"==typeof(T=r)?T.apply(n,C):T)||(t.exports=w))}(0,(function(){var e,t,n,r,o,a,i,s=s||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},a=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<o;a++){var i=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=i<<24-(r+a)%4*8}else for(a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){t=t;var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=o(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new i.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},d=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,d=e.min(4*c,o);if(c){for(var u=0;u<c;u+=a)this._doProcessBlock(r,u);var l=r.splice(0,c);n.sigBytes-=d}return new i.init(l,d)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(o.Hasher=l.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return function(){function e(e,t,r){for(var o=[],a=0,i=0;i<t;i++)if(i%4){var s=r[e.charCodeAt(i-1)]<<i%4*2,c=r[e.charCodeAt(i)]>>>6-i%4*2;o[a>>>2]|=(s|c)<<24-a%4*8,a++}return n.create(o,a)}var t=s,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],a=0;a<n;a+=3)for(var i=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)o.push(r.charAt(i>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var n=t.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<r.length;a++)o[r.charCodeAt(a)]=a}var i=r.charAt(64);if(i){var s=t.indexOf(i);-1!==s&&(n=s)}return e(t,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,o,a,i){var s=e+(t&n|~t&r)+o+i;return(s<<a|s>>>32-a)+t}function n(e,t,n,r,o,a,i){var s=e+(t&r|n&~r)+o+i;return(s<<a|s>>>32-a)+t}function r(e,t,n,r,o,a,i){var s=e+(t^n^r)+o+i;return(s<<a|s>>>32-a)+t}function o(e,t,n,r,o,a,i){var s=e+(n^(t|~r))+o+i;return(s<<a|s>>>32-a)+t}var a=s,i=a.lib,c=i.WordArray,d=i.Hasher,u=a.algo,l=[];!function(){for(var t=0;t<64;t++)l[t]=4294967296*e.abs(e.sin(t+1))|0}();var p=u.MD5=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var i=0;i<16;i++){var s=a+i,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var d=this._hash.words,u=e[a+0],p=e[a+1],f=e[a+2],h=e[a+3],m=e[a+4],g=e[a+5],y=e[a+6],I=e[a+7],v=e[a+8],P=e[a+9],S=e[a+10],k=e[a+11],T=e[a+12],C=e[a+13],w=e[a+14],D=e[a+15],b=d[0],_=d[1],R=d[2],L=d[3];b=t(b,_,R,L,u,7,l[0]),L=t(L,b,_,R,p,12,l[1]),R=t(R,L,b,_,f,17,l[2]),_=t(_,R,L,b,h,22,l[3]),b=t(b,_,R,L,m,7,l[4]),L=t(L,b,_,R,g,12,l[5]),R=t(R,L,b,_,y,17,l[6]),_=t(_,R,L,b,I,22,l[7]),b=t(b,_,R,L,v,7,l[8]),L=t(L,b,_,R,P,12,l[9]),R=t(R,L,b,_,S,17,l[10]),_=t(_,R,L,b,k,22,l[11]),b=t(b,_,R,L,T,7,l[12]),L=t(L,b,_,R,C,12,l[13]),R=t(R,L,b,_,w,17,l[14]),b=n(b,_=t(_,R,L,b,D,22,l[15]),R,L,p,5,l[16]),L=n(L,b,_,R,y,9,l[17]),R=n(R,L,b,_,k,14,l[18]),_=n(_,R,L,b,u,20,l[19]),b=n(b,_,R,L,g,5,l[20]),L=n(L,b,_,R,S,9,l[21]),R=n(R,L,b,_,D,14,l[22]),_=n(_,R,L,b,m,20,l[23]),b=n(b,_,R,L,P,5,l[24]),L=n(L,b,_,R,w,9,l[25]),R=n(R,L,b,_,h,14,l[26]),_=n(_,R,L,b,v,20,l[27]),b=n(b,_,R,L,C,5,l[28]),L=n(L,b,_,R,f,9,l[29]),R=n(R,L,b,_,I,14,l[30]),b=r(b,_=n(_,R,L,b,T,20,l[31]),R,L,g,4,l[32]),L=r(L,b,_,R,v,11,l[33]),R=r(R,L,b,_,k,16,l[34]),_=r(_,R,L,b,w,23,l[35]),b=r(b,_,R,L,p,4,l[36]),L=r(L,b,_,R,m,11,l[37]),R=r(R,L,b,_,I,16,l[38]),_=r(_,R,L,b,S,23,l[39]),b=r(b,_,R,L,C,4,l[40]),L=r(L,b,_,R,u,11,l[41]),R=r(R,L,b,_,h,16,l[42]),_=r(_,R,L,b,y,23,l[43]),b=r(b,_,R,L,P,4,l[44]),L=r(L,b,_,R,T,11,l[45]),R=r(R,L,b,_,D,16,l[46]),b=o(b,_=r(_,R,L,b,f,23,l[47]),R,L,u,6,l[48]),L=o(L,b,_,R,I,10,l[49]),R=o(R,L,b,_,w,15,l[50]),_=o(_,R,L,b,g,21,l[51]),b=o(b,_,R,L,T,6,l[52]),L=o(L,b,_,R,h,10,l[53]),R=o(R,L,b,_,S,15,l[54]),_=o(_,R,L,b,p,21,l[55]),b=o(b,_,R,L,v,6,l[56]),L=o(L,b,_,R,D,10,l[57]),R=o(R,L,b,_,y,15,l[58]),_=o(_,R,L,b,C,21,l[59]),b=o(b,_,R,L,m,6,l[60]),L=o(L,b,_,R,k,10,l[61]),R=o(R,L,b,_,f,15,l[62]),_=o(_,R,L,b,P,21,l[63]),d[0]=d[0]+b|0,d[1]=d[1]+_|0,d[2]=d[2]+R|0,d[3]=d[3]+L|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var a=e.floor(r/4294967296),i=r;n[15+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,d=0;d<4;d++){var u=c[d];c[d]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=d._createHelper(p),a.HmacMD5=d._createHmacHelper(p)}(Math),t=(e=s).lib,n=t.WordArray,r=t.Hasher,o=e.algo,a=[],i=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],d=0;d<80;d++){if(d<16)a[d]=0|e[t+d];else{var u=a[d-3]^a[d-8]^a[d-14]^a[d-16];a[d]=u<<1|u>>>31}var l=(r<<5|r>>>27)+c+a[d];l+=d<20?1518500249+(o&i|~o&s):d<40?1859775393+(o^i^s):d<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,c=s,s=i,i=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i),function(e){var t=s,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,i=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(i[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var d=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],s=n[4],u=n[5],l=n[6],p=n[7],f=0;f<64;f++){if(f<16)d[f]=0|e[t+f];else{var h=d[f-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=d[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;d[f]=m+d[f-7]+y+d[f-16]}var I=r&o^r&a^o&a,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),P=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&l)+c[f]+d[f];p=l,l=u,u=s,s=i+P|0,i=a,a=o,o=r,r=P+(v+I)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+i|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),function(){function e(e){return e<<8&4278255360|e>>>8&16711935}var t=s,n=t.lib.WordArray,r=t.enc;r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(t){for(var n=t.words,r=t.sigBytes,o=[],a=0;a<r;a+=2){var i=e(n[a>>>2]>>>16-a%4*8&65535);o.push(String.fromCharCode(i))}return o.join("")},parse:function(t){for(var r=t.length,o=[],a=0;a<r;a++)o[a>>>1]|=e(t.charCodeAt(a)<<16-a%2*16);return n.create(o,2*r)}}}(),function(){if("function"==typeof ArrayBuffer){var e=s.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),function(e){function t(e,t,n){return e^t^n}function n(e,t,n){return e&t|~e&n}function r(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function i(e,t){return e<<t|e>>>32-t}var c=s,d=c.lib,u=d.WordArray,l=d.Hasher,p=c.algo,f=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=u.create([0,1518500249,1859775393,2400959708,2840853838]),I=u.create([1352829926,1548603684,1836072691,2053994217,0]),v=p.RIPEMD160=l.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,s){for(var c=0;c<16;c++){var d=s+c,u=e[d];e[d]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var l,p,v,P,S,k,T,C,w,D,b=this._hash.words,_=y.words,R=I.words,L=f.words,A=h.words,U=m.words,O=g.words;k=l=b[0],T=p=b[1],C=v=b[2],w=P=b[3],D=S=b[4];var x;for(c=0;c<80;c+=1)x=l+e[s+L[c]]|0,x+=c<16?t(p,v,P)+_[0]:c<32?n(p,v,P)+_[1]:c<48?r(p,v,P)+_[2]:c<64?o(p,v,P)+_[3]:a(p,v,P)+_[4],x=(x=i(x|=0,U[c]))+S|0,l=S,S=P,P=i(v,10),v=p,p=x,x=k+e[s+A[c]]|0,x+=c<16?a(T,C,w)+R[0]:c<32?o(T,C,w)+R[1]:c<48?r(T,C,w)+R[2]:c<64?n(T,C,w)+R[3]:t(T,C,w)+R[4],x=(x=i(x|=0,O[c]))+D|0,k=D,D=w,w=i(C,10),C=T,T=x;x=b[1]+v+w|0,b[1]=b[2]+P+D|0,b[2]=b[3]+S+k|0,b[3]=b[4]+l+T|0,b[4]=b[0]+p+C|0,b[0]=x},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,i=0;i<5;i++){var s=a[i];a[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});c.RIPEMD160=l._createHelper(v),c.HmacRIPEMD160=l._createHmacHelper(v)}(Math),function(){var e=s,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),i=this._iKey=t.clone(),s=a.words,c=i.words,d=0;d<r;d++)s[d]^=1549556828,c[d]^=909522486;a.sigBytes=i.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(){var e=s,t=e.lib,n=t.Base,r=t.WordArray,o=e.algo,a=o.SHA1,i=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=i.create(n.hasher,e),a=r.create(),s=r.create([1]),c=a.words,d=s.words,u=n.keySize,l=n.iterations;c.length<u;){var p=o.update(t).finalize(s);o.reset();for(var f=p.words,h=f.length,m=p,g=1;g<l;g++){m=o.finalize(m),o.reset();for(var y=m.words,I=0;I<h;I++)f[I]^=y[I]}a.concat(p),d[0]++}return a.sigBytes=4*u,a}});e.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),function(){var e=s,t=e.lib,n=t.Base,r=t.WordArray,o=e.algo,a=o.MD5,i=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),a=r.create(),i=a.words,s=n.keySize,c=n.iterations;i.length<s;){d&&o.update(d);var d=o.update(e).finalize(t);o.reset();for(var u=1;u<c;u++)d=o.finalize(d),o.reset();a.concat(d)}return a.sigBytes=4*s,a}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),function(){var e=s,t=e.lib.WordArray,n=e.algo,r=n.SHA256,o=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(o),e.HmacSHA224=r._createHmacHelper(o)}(),function(e){var t=s,n=t.lib,r=n.Base,o=n.WordArray,a=t.x64={};a.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}})}(),function(e){var t=s,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.x64.Word,i=t.algo,c=[],d=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)d[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,i=0;i<24;i++){for(var s=0,l=0,p=0;p<7;p++){if(1&o){var f=(1<<p)-1;f<32?l^=1<<f:s^=1<<f-32}128&o?o=o<<1^113:o<<=1}u[i]=a.create(s,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=a.create()}();var p=i.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var a=e[t+2*o],i=e[t+2*o+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(_=n[o]).high^=i,_.low^=a}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var f=0,h=0,m=0;m<5;m++){f^=(_=n[p+5*m]).high,h^=_.low}var g=l[p];g.high=f,g.low=h}for(p=0;p<5;p++){var y=l[(p+4)%5],I=l[(p+1)%5],v=I.high,P=I.low;for(f=y.high^(v<<1|P>>>31),h=y.low^(P<<1|v>>>31),m=0;m<5;m++){(_=n[p+5*m]).high^=f,_.low^=h}}for(var S=1;S<25;S++){var k=(_=n[S]).high,T=_.low,C=c[S];if(C<32)f=k<<C|T>>>32-C,h=T<<C|k>>>32-C;else f=T<<C-32|k>>>64-C,h=k<<C-32|T>>>64-C;var w=l[d[S]];w.high=f,w.low=h}var D=l[0],b=n[0];D.high=b.high,D.low=b.low;for(p=0;p<5;p++)for(m=0;m<5;m++){var _=n[S=p+5*m],R=l[S],L=l[(p+1)%5+5*m],A=l[(p+2)%5+5*m];_.high=R.high^~L.high&A.high,_.low=R.low^~L.low&A.low}_=n[0];var U=u[s];_.high^=U.high,_.low^=U.low}},_doFinalize:function(){var t=this._data,n=t.words,o=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(e.ceil((o+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var i=this._state,s=this.cfg.outputLength/8,c=s/8,d=[],u=0;u<c;u++){var l=i[u],p=l.high,f=l.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),d.push(f),d.push(p)}return new r.init(d,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(p),t.HmacSHA3=o._createHmacHelper(p)}(Math),function(){function e(){return o.create.apply(o,arguments)}var t=s,n=t.lib.Hasher,r=t.x64,o=r.Word,a=r.WordArray,i=t.algo,c=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],d=[];!function(){for(var t=0;t<80;t++)d[t]=e()}();var u=i.SHA512=n.extend({_doReset:function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],s=n[4],u=n[5],l=n[6],p=n[7],f=r.high,h=r.low,m=o.high,g=o.low,y=a.high,I=a.low,v=i.high,P=i.low,S=s.high,k=s.low,T=u.high,C=u.low,w=l.high,D=l.low,b=p.high,_=p.low,R=f,L=h,A=m,U=g,O=y,x=I,N=v,E=P,M=S,B=k,V=T,H=C,z=w,j=D,q=b,F=_,G=0;G<80;G++){var $=d[G];if(G<16)var W=$.high=0|e[t+2*G],J=$.low=0|e[t+2*G+1];else{var K=d[G-15],Z=K.high,X=K.low,Y=(Z>>>1|X<<31)^(Z>>>8|X<<24)^Z>>>7,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^(X>>>7|Z<<25),ee=d[G-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=d[G-7],ie=ae.high,se=ae.low,ce=d[G-16],de=ce.high,ue=ce.low;W=(W=(W=Y+ie+((J=Q+se)>>>0<Q>>>0?1:0))+re+((J=J+oe)>>>0<oe>>>0?1:0))+de+((J=J+ue)>>>0<ue>>>0?1:0);$.high=W,$.low=J}var le,pe=M&V^~M&z,fe=B&H^~B&j,he=R&A^R&O^A&O,me=L&U^L&x^U&x,ge=(R>>>28|L<<4)^(R<<30|L>>>2)^(R<<25|L>>>7),ye=(L>>>28|R<<4)^(L<<30|R>>>2)^(L<<25|R>>>7),Ie=(M>>>14|B<<18)^(M>>>18|B<<14)^(M<<23|B>>>9),ve=(B>>>14|M<<18)^(B>>>18|M<<14)^(B<<23|M>>>9),Pe=c[G],Se=Pe.high,ke=Pe.low,Te=q+Ie+((le=F+ve)>>>0<F>>>0?1:0),Ce=ye+me;q=z,F=j,z=V,j=H,V=M,H=B,M=N+(Te=(Te=(Te=Te+pe+((le=le+fe)>>>0<fe>>>0?1:0))+Se+((le=le+ke)>>>0<ke>>>0?1:0))+W+((le=le+J)>>>0<J>>>0?1:0))+((B=E+le|0)>>>0<E>>>0?1:0)|0,N=O,E=x,O=A,x=U,A=R,U=L,R=Te+(ge+he+(Ce>>>0<ye>>>0?1:0))+((L=le+Ce|0)>>>0<le>>>0?1:0)|0}h=r.low=h+L,r.high=f+R+(h>>>0<L>>>0?1:0),g=o.low=g+U,o.high=m+A+(g>>>0<U>>>0?1:0),I=a.low=I+x,a.high=y+O+(I>>>0<x>>>0?1:0),P=i.low=P+E,i.high=v+N+(P>>>0<E>>>0?1:0),k=s.low=k+B,s.high=S+M+(k>>>0<B>>>0?1:0),C=u.low=C+H,u.high=T+V+(C>>>0<H>>>0?1:0),D=l.low=D+j,l.high=w+z+(D>>>0<j>>>0?1:0),_=p.low=_+F,p.high=b+q+(_>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),function(){var e=s,t=e.x64,n=t.Word,r=t.WordArray,o=e.algo,a=o.SHA512,i=o.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(i),e.HmacSHA384=a._createHmacHelper(i)}(),s.lib.Cipher||function(e){var t=s,n=t.lib,r=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,i=t.enc,c=(i.Utf8,i.Base64),d=t.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),l=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),p=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=l.CBC=function(){function e(e,t,n){var r=this._iv;if(r){var o=r;this._iv=void 0}else o=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=o[a]}var t=p.extend();return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize;e.call(this,t,n,o),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+o)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize,a=t.slice(n,n+o);r.decryptBlock(t,n),e.call(this,t,n,o),this._prevBlock=a}}),t}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,a=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(a);var c=o.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(t);else r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:r})}},y=n.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),a=o.finalize(t),i=o.cfg;return m.create({ciphertext:a,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),I=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var a=d.create({keySize:t+n}).compute(e,r),i=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,m.create({key:a,iv:i,salt:r})}},v=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:I}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var a=y.encrypt.call(this,e,t,o.key,r);return a.mixIn(o),a},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=o.iv,y.decrypt.call(this,e,t,o.key,r)}})}(),s.mode.CFB=function(){function e(e,t,n,r){var o=this._iv;if(o){var a=o.slice(0);this._iv=void 0}else a=this._prevBlock;r.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}var t=s.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize;e.call(this,t,n,o,r),this._prevBlock=t.slice(n,n+o)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize,a=t.slice(n,n+o);e.call(this,t,n,o,r),this._prevBlock=a}}),t}(),s.mode.ECB=function(){var e=s.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),s.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso10126={pad:function(e,t){var n=4*t,r=n-e.sigBytes%n;e.concat(s.lib.WordArray.random(r-1)).concat(s.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.mode.OFB=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._keystream;o&&(a=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var i=0;i<r;i++)e[t+i]^=a[i]}});return e.Decryptor=t,e}(),s.pad.NoPadding={pad:function(){},unpad:function(){}},function(e){var t=s,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),function(){var e=s,t=e.lib.BlockCipher,n=e.algo,r=[],o=[],a=[],i=[],c=[],d=[],u=[],l=[],p=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,s=0;for(t=0;t<256;t++){var h=s^s<<1^s<<2^s<<3^s<<4;h=h>>>8^255&h^99,r[n]=h,o[h]=n;var m=e[n],g=e[m],y=e[g],I=257*e[h]^16843008*h;a[n]=I<<24|I>>>8,i[n]=I<<16|I>>>16,c[n]=I<<8|I>>>24,d[n]=I;I=16843009*y^65537*g^257*m^16843008*n;u[h]=I<<24|I>>>8,l[h]=I<<16|I>>>16,p[h]=I<<8|I>>>24,f[h]=I,n?(n=m^e[e[e[y^m]]],s^=e[e[s]]):n=s=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],m=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],i=0;i<o;i++)if(i<n)a[i]=t[i];else{var s=a[i-1];i%n?n>6&&i%n==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=h[i/n|0]<<24),a[i]=a[i-n]^s}for(var c=this._invKeySchedule=[],d=0;d<o;d++){i=o-d;if(d%4)s=a[i];else s=a[i-4];c[d]=d<4||i<=4?s:u[r[s>>>24]]^l[r[s>>>16&255]]^p[r[s>>>8&255]]^f[r[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,i,c,d,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,l,p,f,o);n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,a,i,s){for(var c=this._nRounds,d=e[t]^n[0],u=e[t+1]^n[1],l=e[t+2]^n[2],p=e[t+3]^n[3],f=4,h=1;h<c;h++){var m=r[d>>>24]^o[u>>>16&255]^a[l>>>8&255]^i[255&p]^n[f++],g=r[u>>>24]^o[l>>>16&255]^a[p>>>8&255]^i[255&d]^n[f++],y=r[l>>>24]^o[p>>>16&255]^a[d>>>8&255]^i[255&u]^n[f++],I=r[p>>>24]^o[d>>>16&255]^a[u>>>8&255]^i[255&l]^n[f++];d=m,u=g,l=y,p=I}m=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^n[f++],g=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^n[f++],y=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[f++],I=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[f++];e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=I},keySize:8});e.AES=t._createHelper(m)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n=s,r=n.lib,o=r.WordArray,a=r.BlockCipher,i=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=i.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=c[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],a=0;a<16;a++){var i=o[a]=[],s=u[a];for(n=0;n<24;n++)i[n/6|0]|=t[(d[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=t[28+(d[n+24]-1+s)%28]<<31-n%6;i[0]=i[0]<<1|i[0]>>>31;for(n=1;n<7;n++)i[n]=i[n]>>>4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}var l=this._invSubKeys=[];for(n=0;n<16;n++)l[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,o){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var a=0;a<16;a++){for(var i=o[a],s=this._lBlock,c=this._rBlock,d=0,u=0;u<8;u++)d|=l[u][((c^i[u])&p[u])>>>0];this._lBlock=c,this._rBlock=s^d}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=a._createHelper(f);var h=i.TripleDES=a.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(o.create(e.slice(0,2))),this._des2=f.createEncryptor(o.create(e.slice(2,4))),this._des3=f.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=a._createHelper(h)}(),function(){function e(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[n],e[n]=a,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var t=s,n=t.lib.StreamCipher,r=t.algo,o=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;o=0;for(var a=0;o<256;o++){var i=o%n,s=t[i>>>2]>>>24-i%4*8&255;a=(a+r[o]+s)%256;var c=r[o];r[o]=r[a],r[a]=c}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});t.RC4=n._createHelper(o);var a=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});t.RC4Drop=n._createHelper(a)}(),s.mode.CTRGladman=function(){function e(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function t(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var n=s.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0),t(i);var s=i.slice(0);r.encryptBlock(s,0);for(var c=0;c<o;c++)e[n+c]^=s[c]}});return n.Decryptor=r,n}(),function(){function e(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,d=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^d}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}var t=s,n=t.lib.StreamCipher,r=t.algo,o=[],a=[],i=[],c=r.Rabbit=n.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var o=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],a=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(r=0;r<4;r++)e.call(this);for(r=0;r<8;r++)a[r]^=o[r+4&7];if(n){var i=n.words,s=i[0],c=i[1],d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=d>>>16|4294901760&u,p=u<<16|65535&d;a[0]^=d,a[1]^=l,a[2]^=u,a[3]^=p,a[4]^=d,a[5]^=l,a[6]^=u,a[7]^=p;for(r=0;r<4;r++)e.call(this)}},_doProcessBlock:function(t,n){var r=this._X;e.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var a=0;a<4;a++)o[a]=16711935&(o[a]<<8|o[a]>>>24)|4278255360&(o[a]<<24|o[a]>>>8),t[n+a]^=o[a]},blockSize:4,ivSize:2});t.Rabbit=n._createHelper(c)}(),s.mode.CTR=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0);var i=a.slice(0);n.encryptBlock(i,0),a[r-1]=a[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=i[s]}});return e.Decryptor=t,e}(),function(){function e(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,d=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^d}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}var t=s,n=t.lib.StreamCipher,r=t.algo,o=[],a=[],i=[],c=r.RabbitLegacy=n.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var a=0;a<4;a++)e.call(this);for(a=0;a<8;a++)o[a]^=r[a+4&7];if(n){var i=n.words,s=i[0],c=i[1],d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=d>>>16|4294901760&u,p=u<<16|65535&d;o[0]^=d,o[1]^=l,o[2]^=u,o[3]^=p,o[4]^=d,o[5]^=l,o[6]^=u,o[7]^=p;for(a=0;a<4;a++)e.call(this)}},_doProcessBlock:function(t,n){var r=this._X;e.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var a=0;a<4;a++)o[a]=16711935&(o[a]<<8|o[a]>>>24)|4278255360&(o[a]<<24|o[a]>>>8),t[n+a]^=o[a]},blockSize:4,ivSize:2});t.RabbitLegacy=n._createHelper(c)}(),s.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},s}))})),window.define("5",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=(e(6),a()),w=C.globalData,D=C.url;Page({data:{pageName:"step1",systemInfo:null,galleryList:null,galleryHeight:"",indicatorDots:!0,autoplay:!0,interval:4e3,duration:500,dateNum:189,dateList:T.createDates(189),getTimeList:"",reTimeList:"",pickUpCity:"",dropOffCity:"",pickUpStore:"",dropOffStore:"",rentDays:"",pickUpDate:null,dropOffDate:null,pickUpTime:"",dropOffTime:"",isDropOff:!1,showDatePickerModal:!1,placePickUpIndex:null,defaultPickUpIndex:null,placeDropOffIndex:null,defaultDropOffIndex:null,hasLogin:!1,isFirstBuy:0,showNewUserPopup:!1,message_tips:"messageTips hide",userPackage:"",serviceHour:24,cityCount:450,outletCount:6e3,carTypeCount:200,rentDay:189,fromType:"step1",DiffCityFeeText:"",swiperIndex:0,isShowPrivacy:!1,query:void 0},onLoad:function(e){this.setData({query:e})},onShow:function(){var e=this;o.setPageInfo({title:"一嗨租车_自驾租车",keywords:"一嗨租车,一嗨,自驾预订,自驾,租车,自驾出行,自驾租车,自驾游,出行,用车,共享汽车",description:"选择租车日期、租车时间、租车城市、异地还车、租车门店和取还车门店，查看租车优惠活动信息，租车指南和免押租车指引",image:["https://img.1hai.cn/groupf2/M00/00/F1/rBQFIF3BVJyANQTnAAEZaBqkmFw989.jpg"],success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}}),e.setData({systemInfo:o.getSystemInfoSync()},(function(){e.getSecondFocusPicture()})),o.getStorage({key:"EhiFocusList",success:function(t){t.data&&e.setData({galleryList:t.data})}}),e.getFocusPicture(),o.getStorage({key:"PrivacyAgreement",success:function(t){t.data?(e.init(),e.initialization()):e.setData({isShowPrivacy:!0})}})},init:function(){var e=this.data.query;e&&e.citycode?this.getInitCart("","","",0,e.citycode,0,0):this.getInitLocation("","","")},initialization:function(){var e=this,t=T.getCartData();t&&(e.cartInfoInit(t),t.PickupStore.Id&&t.ReturnStore.Id?e.getDiffText(t):e.setData({DiffCityFeeText:""})),o.getStorage({key:"User",success:function(t){t.data&&(console.log("获取登录信息成功"),e.setData({hasLogin:!0,isFirstBuy:t.data.IsFirstBuy,showNewUserPopup:!1}),w.User=t.data)},fail:function(e){console.log("获取登录信息失败"),console.log(e)},complete:function(t){e.getNewUserPackage()}}),e.newUserCoupon(),o.getStorage({key:"EhiScheduledTime",success:function(t){t.data&&e.setData({dateNum:t.data,dateList:T.createDates(t.data)})}}),e.getScheduledTime(),w.CrossCityStoreToastTip&&o.showToast({title:w.CrossCityStoreToastTip,duration:2e3,icon:"none",success:function(){w.CrossCityStoreToastTip=null}})},handlePrivacy:function(e){var t=this;"ok"===e.currentTarget.dataset.type&&o.setStorage({data:!0,key:"PrivacyAgreement",success:function(){t.init(),t.initialization()}}),t.setData({isShowPrivacy:!1})},openSecondBanner:function(e){var t=e.currentTarget.dataset.url;2992!==e.currentTarget.dataset.id?o.navigateTo({url:"../focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(t)}):o.navigateToSmartProgram({appKey:"oOGuS3YsxFzu7ud8hhc215l8bKpBZiuH",path:"page/usedcar/index/index",extraData:{},success:function(e){console.log(JSON.stringify(e))},fail:function(e){console.log(JSON.stringify(e))}})},getSecondFocusPicture:function(){var e=this;e.setData({gallerysecondHeight:e.data.systemInfo.windowWidth/750*156*2+"rpx"});var t={NewsTypeIds:[45],SiteTypeId:5,ChannelId:w.ChannelId,UserId:w.User.UserId||"",CardLevel:w.User.CardLevel||0,IsFirstBuy:0===w.User.IsFirstBuy};console.log("第二广告位入参",t);var n=T.postParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.GetSecondNews,data:{key:n.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("第二广告位",n),n.IsSuccess?(e.setData({secondGalleryList:n.Result}),o.setStorage({data:n.Result,key:"EhiSecondFocusList"})):o.showToast({title:n.Message||"请求失败，请重试",icon:"none"})},fail:function(){},complete:function(){o.hideLoading()}})},getScheduledTime:function(){var e=this,t=T.getParamEncrypt(w.md5_key,"");o.request({url:D.LimitTime,data:{},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:t.auth,AppIdentity:w.des_identity},success:function(t){var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("预订时间天数"),console.log(n),n.IsSuccess&&(e.setData({dateNum:Number(n.Result.PickUpLimitDay)+Number(n.Result.DropoffLimitDay),dateList:T.createDates(Number(n.Result.PickUpLimitDay)+Number(n.Result.DropoffLimitDay))}),o.setStorageSync("EhiScheduledTime",Number(n.Result.PickUpLimitDay)+Number(n.Result.DropoffLimitDay)))},fail:function(){},complete:function(){}})},newUserCoupon:function(){var e=this;o.getStorage({key:"User",success:function(t){if(t.data&&t.data.UserId)return!1;o.getStorage({key:"NewUserCouponCount",success:function(t){if(t.data){var n=(new Date).getTime();Math.floor((n-t.data.saveTime)/36e5)>24?(e.setData({showNewUserPopup:!0},(function(){})),o.setStorage({key:"NewUserCouponCount",data:{saveTime:n}})):e.setData({showNewUserPopup:!1},(function(){}))}else{e.setData({showNewUserPopup:!0},(function(){}));var r=(new Date).getTime();o.setStorage({key:"NewUserCouponCount",data:{saveTime:r}})}},fail:function(){}})}})},handleNewUserCoupon:function(){this.setData({showNewUserPopup:!1}),o.navigateTo({url:"../../my/loginType/loginType?fromType=newUserCoupon"})},hideNewUserCoupon:function(){this.setData({showNewUserPopup:!1})},goLogin:function(){o.navigateTo({url:"../../my/loginType/loginType?fromType=homeGuide"})},getFocusPicture:function(){var e=this;e.setData({galleryHeight:e.data.systemInfo.windowWidth/750*342*2+"rpx"});var t="typeId=1&cityName=&channelId="+w.ChannelId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.GetFocusPicture,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("焦点图列表"),console.log(n),n.IsSuccess&&(e.data.galleryList||e.setData({galleryList:n.Result}),o.setStorageSync("EhiFocusList",n.Result))},fail:function(){},complete:function(){o.hideLoading()}})},openWV:function(e){console.log(e);var t=e.currentTarget.dataset.url;o.navigateTo({url:"../focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(t)})},cartInfoInit:function(e){this.setData({pickUpCity:e.PickupCity,dropOffCity:e.ReturnCity,pickUpStore:e.PickupStore,dropOffStore:e.ReturnStore,pickUpDate:T.createDate(e.PickupTime.split(" ")[0]),dropOffDate:T.createDate(e.ReturnTime.split(" ")[0]),pickUpTime:e.PickupTime.split(" ")[1],dropOffTime:e.ReturnTime.split(" ")[1],rentDays:T.formatRentDays(e.PickupTime,e.ReturnTime),cartInfo:e}),w.GetStoreOpen=e.PickupStore.OpeningTime,w.GetStoreClose=e.PickupStore.ClosingTime,w.ReStoreOpen=e.ReturnStore.OpeningTime,w.ReStoreClose=e.ReturnStore.ClosingTime;for(var t=T.createTimes(1),n=T.createTimes(1),r=void 0,o=void 0,a=void 0,i=void 0,s=0;s<t.length;s++)t[s]==w.GetStoreOpen&&(r=s),t[s]==w.GetStoreClose&&(o=s+1),n[s]==w.ReStoreOpen&&(a=s),n[s]==w.ReStoreClose&&(i=s+1);this.setData({getTimeList:t.slice(r,o),reTimeList:n.slice(a,i)})},getDiffText:function(e){var t=this;if(e.PickupStore.Id&&e.ReturnStore.Id){e.PickupStore.Id===e.ReturnStore.Id&&e.PickupCity.Id===e.ReturnCity.Id||t.setData({isDiffDropOff:!0});var n={PickupTime:e.PickupTime,PickupStoreId:e.PickupStore.Id||0,PickupCityId:e.PickupCity.Id,DropoffTime:e.ReturnTime,DropoffStoreId:e.ReturnStore.Id||0,DropoffCityId:e.ReturnCity.Id,UserId:w.User.UserId},r=T.postParamEncrypt(w.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.DiffCityFee,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:r.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("是否需要提示异地费"),console.log(n),n.IsSuccess&&t.setData({DiffCityFeeText:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})}else t.setData({DiffCityFeeText:""})},getInitLocation:function(e,t,n){var r=this;o.getLocation({type:"gcj02",success:function(o){w.lng=o.longitude,w.lat=o.latitude,r.getInitCart(e,t,n,0,0,w.lng,w.lat)},fail:function(o){console.log("fail",o),r.getInitCart(e,t,n,0,0,0,0)}})},getInitCart:function(e,t,n,r,a,i,s){var c=this,d={MobileContext:{Version:w.Version,DeviceId:w.DeviceId,Source:w.Source,AppStoreId:w.AppStoreId,Idfa:w.Idfa,SessionId:w.SessionId,PromotionUrl:w.PromotionUrl,PromotionTemplateId:w.PromotionTemplateId,Longitude:w.Longitude,Latitude:w.Latitude,IpAddress:w.IpAddress,PromotionId:w.PromotionId,PhoneIMSI:w.PhoneIMSI,PhoneMAC:w.PhoneMAC,Extend:w.Extend,OperatorId:w.Extend},RequestParam:{IsBatch:e||!1,SpecifyStoreId:r,SpecifyCityId:a,Logitude:i,Latitude:s,SpecifyPickupTime:"",SpecifyReturnTime:""}},u=T.postParamEncrypt(w.md5_key,d);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.BookingInit,data:{key:u.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:u.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();if(t=T.decrypt(t),t=JSON.parse(t),console.log("初始化"),console.log(t),t.IsSuccess){if(t.Result.DataList){var n=t.Result.DataList;c.setData({serviceHour:n.filter((function(e){return 1==e.Type}))[0].Value,cityCount:n.filter((function(e){return 2==e.Type}))[0].Value,outletCount:n.filter((function(e){return 3==e.Type}))[0].Value,carTypeCount:n.filter((function(e){return 4==e.Type}))[0].Value})}var r={PickupTime:T.formatStrWithSpace(t.Result.PickupTime),ReturnTime:T.formatStrWithSpace(t.Result.ReturnTime),PickupCity:t.Result.DefaultCity,PickupStore:t.Result.DefaultStore,IsPickupService:!1,PickupService:"",ReturnCity:t.Result.DefaultCity,ReturnStore:t.Result.DefaultStore,IsReturnService:!1,ReturnService:"",IsBatch:!1,IsModifyOrder:!1,UserId:"",OrderId:"",ChannelId:"",EdmId:"",EnterpriseId:"",IsEnterpriseUse:!1,CorpUid:"",Ldata:"",PromotionUrl:"",Cartype:"",PaymentType:5,PriceType:1,OrderType:"1"},a=T.getCartData();a&&r&&a.PickupTime<T.formatStrWithSpace(t.Result.PickupTime)&&(a.PickupTime=T.formatStrWithSpace(t.Result.PickupTime),a.ReturnTime=T.formatStrWithSpace(t.Result.ReturnTime)),r=a||r,T.setCartData(r),c.getDiffText(r),c.cartInfoInit(r)}},fail:function(){},complete:function(){o.hideLoading()}})},handleDiffDroppOff:function(e){var t=e.detail.isDiffDropOff;this.setData({isDiffDropOff:t});var n=T.getCartData();this.getDiffText(n)},handleSwiper:function(e){var t=e.detail.current;this.setData({swiperIndex:t})},chooseCity:function(e){var t=parseInt(e.currentTarget.dataset.type)?"Y":"N";e.currentTarget.dataset.cityName&&o.navigateTo({url:"../cityInfoPage/cityInfoPage?isReturn="+t})},chooseStore:function(e){var t=parseInt(e.currentTarget.dataset.type),n=e.currentTarget.dataset.cityName,r=e.currentTarget.dataset.cityId,a=t?"Y":"N";n&&o.navigateTo({url:"../shopInfoPage/shopInfoPage?cityId="+r+"&isReturn="+a})},showDatePicker:function(e){T.getCartData()&&o.navigateTo({url:"/pages/booking/datePick/datePick?rentDay="+this.data.rentDay+"&fromType="+this.data.fromType})},hideDatePicker:function(){this.setData({showDatePickerModal:!1})},btnCancel:function(){this.hideDatePicker()},btnConfirm:function(){var e=this,t=null,n="",r=null,o="",a=null,i="",s=T.getCartData();if(e.hideDatePicker(),e.data.isDropOff)e.setData({defaultDropOffIndex:e.data.placeDropOffIndex}),e.data.defaultDropOffIndex&&(e.data.dateList.forEach((function(t,n){n==e.data.defaultDropOffIndex[0]&&(r=t)})),e.data.reTimeList.forEach((function(t,n){n==e.data.defaultDropOffIndex[1]&&(o=t)})),e.setData({dropOffDate:r,dropOffTime:o}),s.ReturnTime=r.full+" "+o);else if(e.setData({defaultPickUpIndex:e.data.placePickUpIndex}),e.data.defaultPickUpIndex){e.data.dateList.forEach((function(n,r){r==e.data.defaultPickUpIndex[0]&&(t=n)})),e.data.getTimeList.forEach((function(t,r){r==e.data.defaultPickUpIndex[1]&&(n=t)})),e.data.defaultPickUpIndex[0]<e.data.dateNum-2?e.data.dateList.forEach((function(t,n){n==e.data.defaultPickUpIndex[0]+2&&(a=t)})):e.data.dateList.forEach((function(t,n){n==e.data.dateNum-1&&(a=t)}));for(var c=e.data.reTimeList.length,d=0;d<c;d++){if(d==e.data.defaultPickUpIndex[1]){i=e.data.reTimeList[d];break}i=e.data.reTimeList[c-1]}e.setData({pickUpDate:t,pickUpTime:n,dropOffDate:a,dropOffTime:i}),s.PickupTime=t.full+" "+n,s.ReturnTime=a.full+" "+i}e.setData({rentDays:T.formatRentDays(s.PickupTime,s.ReturnTime)}),T.setCartData(s)},cancelBubble:function(e){e.cancelBubble=!0},changePickUp:function(e){this.setData({placePickUpIndex:e.detail.value})},changeDropOff:function(e){this.setData({placeDropOffIndex:e.detail.value})},goDiscountGuide:function(){o.navigateTo({url:"../../my/promotion/promotion"})},goRentGuide:function(){o.navigateTo({url:"../rentGuide/rentGuide"})},getNewUserPackage:function(){var e=this,t=T.getParamEncrypt(w.md5_key,"");o.request({url:D.NewUserPackage,data:{},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:t.auth,AppIdentity:w.des_identity},success:function(t){var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("新人大礼包"),console.log(n),n.IsSuccess&&e.setData({userPackage:n.Result})},fail:function(){},complete:function(){}})}})})),window.define("6",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=a().globalData,C=e(3);t.exports={get:function(e,t,n){return new Promise((function(r,a){var i="";if(t){for(var s in t)i+="&"+s+"="+t[s];i=i.slice(1)}var c=C.getParamEncrypt(T.md5_key,i);console.log("GET >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.log("url: ",e),console.log("param: ",i,c.des),o.showLoading({title:"加载中",mask:!0}),o.request({url:e,data:t?{query:c.des}:"",method:"GET",header:{"Content-Type":"application/json",Token:T.Token,Remark:"Unchecked",AppVersion:T.Version,AppPlatform:T.Source,Authorization:c.auth,AppIdentity:T.des_identity},success:function(e){o.hideLoading({complete:function(e){}});var t=e.data.Result.toString();t=C.decrypt(t),t=JSON.parse(t),n&&(console.log("desc: ",n),console.log("result: ",t)),r(t)},fail:function(e){o.hideLoading({complete:function(e){}}),o.showToast({title:"请求失败，请重试",icon:"none"}),a(e)}})}))},post:function(e,t,n,r,a){return new Promise((function(a,i){var s,c="",d="",u="";if(t){for(var l in t)t[l]&&String(t[l])&&(c+="&"+l+"="+t[l]);c=c.slice(1),d=C.getParamEncrypt(T.md5_key,c)}s=C.postParamEncrypt(T.md5_key,n),u=t&&n?C.paramEncrypt(T.md5_key,c,n):t?C.getParamEncrypt(T.md5_key,c):C.postParamEncrypt(T.md5_key,n),console.log("POST >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.log("url: ",e),console.log("param: ",c,d.des),console.log("data: ",n,s.des),o.showLoading({title:"加载中",mask:!0}),o.request({url:e+(d?d.des:""),data:n?{key:s.des}:"",method:"POST",header:{"Content-Type":"application/json",Token:T.Token,Remark:"Unchecked",AppVersion:T.Version,AppPlatform:T.Source,Authorization:u.auth,AppIdentity:T.des_identity},success:function(e){o.hideLoading({complete:function(e){}});var t=e.data.Result.toString();t=C.decrypt(t),t=JSON.parse(t),r&&(console.log("desc: ",r),console.log("result: ",t)),a(t)},fail:function(e){o.hideLoading({complete:function(e){}}),o.showToast({title:"请求失败，请重试",icon:"none"}),i(e)}})}))}}})),window.define("9",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";e(3);var T=a();T.globalData,T.url;Page({data:{pageName:"step1-focus",wvUrl:""},onLoad:function(e){o.showToast({title:"加载中",icon:"loading",duration:2e3}),console.log("url",decodeURIComponent(e.urlStr)),e&&this.setData({wvUrl:decodeURIComponent(e.urlStr)})}})})),window.define("11",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url;Page({data:{pageName:"step1-city",isSearch:!1,isReturn:"",hdList:"",bdList:"",cityList:"",cityListHot:"",historyList:[],currentCity:"",toView:"",searchCity:"",searchCityList:""},onLoad:function(e){var t=this;t.setData({isReturn:e.isReturn,historyList:a.getStorageSync("HistoryList")||[]}),a.getStorage({key:"CityList",success:function(e){e.data&&t.setData({cityList:e.data})}}),a.getStorage({key:"CityListHot",success:function(e){e.data&&t.setData({cityListHot:e.data})}}),a.getStorage({key:"HdList",success:function(e){e.data&&t.setData({hdList:e.data})}}),a.getStorage({key:"BdList",success:function(e){e.data&&t.setData({bdList:e.data})}}),""!=t.data.cityList&&""!=t.data.cityListHot||t.getCityList(),D.lat&&D.lng&&t.getCurrentCity()},onShow:function(){a.setPageInfo({title:"选择租车城市",keywords:"一嗨租车,一嗨,租车城市,北京租车,安达租车,大庆租车,哈尔滨租车,鹤岗租车,鸡西租车,肇东租车,佳木斯租车,尚志租车,宾县租车,绥芬河租车,海林租车,牡丹江租车,齐齐哈尔租车,伊春租车,白城租车,松原租车,德惠租车,扶余租车,安图租车,敦化租车,公主岭租车,吉林租车,四平租车,延吉租车,长春租车,宽甸租车,东港租车,铁岭租车,阜新租车,朝阳租车,丹东租车,鞍山租车,兴城租车,绥中租车,本溪租车,大连租车,凤城租车,抚顺租车,葫芦岛租车,锦州租车,辽阳租车,沈阳租车,营口租车,永安租车,福鼎租车,漳浦租车,福安租车,福州租车,建瓯租车,龙岩租车,南平租车,宁德租车,莆田租车,泉州租车,三明租车,厦门租车,武夷山租车,漳州租车,潮州租车,东莞租车,佛山租车,高州租车,河源租车,惠州租车,江门租车,揭阳租车,廉江租车,茂名租车,梅州租车,普宁租车,清远租车,汕头租车,汕尾租车,韶关租车,四会租车,遂溪租车,台山租车,吴川租车,兴宁租车,阳春租车,阳江租车,英德租车,云浮租车,湛江租车,肇庆租车,中山租车,珠海租车,广州租车,澄迈租车,琼中租车,屯昌租车,儋州租车,定安租车,海口租车,临高租车,琼海租车,文昌租车,昌江租车,东方租车,乐东租车,陵水租车,三亚租车,万宁租车,承德租车,霸州租车,保定租车,沧州租车,辛集租车,定州租车,邯郸租车,衡水租车,廊坊租车,秦皇岛租车,石家庄租车,唐山租车,邢台租车,雄安新区租车,张家口租车,巴彦淖尔租车,包头租车,赤峰租车,鄂尔多斯租车,呼和浩特租车,呼伦贝尔租车,通辽租车,乌海租车,乌兰察布租车,锡林浩特租车,洪洞租车,应县租车,怀仁租车,霍州租车,闻喜租车,襄汾租车,太谷租车,介休租车,灵石租车,祁县租车,永济租车,原平租车,吕梁租车,大同租车,侯马租车,晋城租车,晋中租车,临汾租车,平遥租车,朔州租车,太原租车,忻州租车,阳泉租车,运城租车,长治租车,天津租车,启东租车,海安租车,常熟租车,如皋租车,常州租车,句容租车,丹阳租车,淮安租车,江阴租车,靖江租车,昆山租车,溧阳租车,连云港租车,南京租车,南通租车,苏州租车,太仓租车,泰州租车,无锡租车,宿迁租车,徐州租车,盐城租车,扬州租车,宜兴租车,镇江租车,荣成租车,德州租车,东营租车,高密租车,菏泽租车,济南租车,济宁租车,聊城租车,临海租车,临沂租车,青岛租车,青州租车,曲阜租车,日照租车,泰安租车,威海租车,潍坊租车,烟台租车,余姚租车,枣庄租车,淄博租车,江山租车,慈溪租车,德清租车,富阳租车,海宁租车,杭州租车,湖州租车,嘉兴租车,建德租车,金华租车,丽水租车,宁波租车,千岛湖租车,衢州租车,绍兴租车,台州租车,桐庐租车,温岭租车,温州租车,义乌租车,舟山租车,稻城租车,巴中租车,蓬安租车,成都租车,资中租车,达州租车,德阳租车,广安租车,广汉租车,广元租车,简阳租车,江油租车,九寨沟租车,阆中租车,乐山租车,泸州租车,眉山租车,绵阳租车,南部租车,南充租车,内江租车,攀枝花租车,遂宁租车,武胜租车,西昌租车,雅安租车,宜宾租车,资阳租车,自贡租车,拉萨租车,林芝租车,重庆租车,淮北租车,安庆租车,蚌埠租车,池州租车,滁州租车,阜阳租车,合肥租车,淮南租车,黄山租车,六安租车,马鞍山租车,铜陵租车,芜湖租车,宿州租车,宣城租车,长临河租车,安阳租车,巩义租车,鹤壁租车,焦作租车,开封租车,灵宝租车,洛阳租车,漯河租车,南阳租车,平顶山租车,濮阳租车,三门峡租车,商丘租车,新乡租车,新郑租车,信阳租车,许昌租车,永城租车,郑州租车,周口租车,驻马店租车,赤壁租车,麻城租车,红安租车,大冶租车,鄂州租车,恩施租车,汉川租车,黄冈租车,利川租车,黄石租车,荆门租车,荆州租车,潜江租车,十堰租车,随州租车,武汉租车,仙桃租车,咸宁租车,襄阳租车,孝感租车,阳新租车,宜昌租车,枝江租车,常德租车,郴州租车,衡阳租车,怀化租车,吉首租车,耒阳租车,醴陵租车,浏阳租车,娄底租车,汨罗租车,祁东租车,邵阳租车,双峰租车,湘潭租车,新化租车,益阳租车,永州租车,岳阳租车,张家界租车,长沙租车,株洲租车,德兴租车,抚州租车,赣州租车,高安租车,共青城租车,吉安租车,景德镇租车,九江租车,进贤租车,南昌租车,萍乡租车,瑞昌租车,上饶租车,婺源租车,新余租车,宜春租车,鹰潭租车,上海租车,庆阳租车,定西租车,陇南租车,敦煌租车,嘉峪关租车,兰州租车,天水租车,张掖租车,银川租车,格尔木租车,德令哈租车,西宁租车,安康租车,宝鸡租车,汉中租车,渭南租车,西安租车,咸阳租车,延安租车,榆林租车,库尔勒租车,喀什租车,乌鲁木齐租车,深圳租车,百色租车,北海租车,防城港租车,贵港租车,桂林租车,贺州租车,来宾租车,柳州租车,南宁租车,钦州租车,梧州租车,安顺租车,贵定租车,从江租车,都匀租车,贵阳租车,凯里租车,六盘水租车,铜仁租车,兴义租车,遵义租车,保山租车,楚雄租车,大理租车,德宏租车,昆明租车,丽江租车,蒙自租车,普洱租车,曲靖租车,腾冲租车,文山租车,西双版纳租车,玉溪租车,昭通租车",description:"选择要租车的城市",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}})},onUnload:function(){this.setData({isSearch:!1})},getCurrentCity:function(){var e=this;if(D.lat&&D.lng){var t="lat="+D.lat+"&lng="+D.lng,n=C.getParamEncrypt(D.md5_key,t);a.request({url:b.FromCity,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:n.auth,AppIdentity:D.des_identity},success:function(t){var n=t.data.Result.toString();n=C.decrypt(n,!0),n=JSON.parse(n),console.log("当前城市"),console.log(n),e.setData({currentCity:n.Result})},fail:function(){a.hideLoading()}})}},toggleSearch:function(){this.setData({isSearch:!this.data.isSearch})},getSearchCity:function(e){var t=e.detail.value,n=[];t.length>0&&this.data.cityList.forEach((function(e){-1==e.CityCode.toUpperCase().indexOf(t.toUpperCase())&&-1==e.Name.indexOf(t)||n.push(e)})),this.setData({searchCityList:n,searchCity:t})},getCityList:function(){var e=this,n="Version="+D.Version+"&DeviceId="+D.DeviceId+"&Source="+D.Source+"&AppStoreId="+D.AppStoreId+"&Idfa="+D.Idfa+"&SessionId="+D.SessionId+"&PromotionUrl="+D.PromotionUrl+"&PromotionTemplateId="+D.PromotionTemplateId+"&Longitude="+D.Longitude+"&Latitude="+D.Latitude+"&IpAddress="+D.IpAddress+"&PromotionId="+D.PromotionId+"&PhoneIMSI="+D.PhoneIMSI+"&PhoneMAC="+D.PhoneMAC+"&Extend="+D.Extend,r=C.getParamEncrypt(D.md5_key,n);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.CityList,data:{query:r.des},method:"GET",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(n){t((function(){a.hideLoading()}),1500);var r=[],o=n.data.Result.toString();o=C.decrypt(o,!0),o=JSON.parse(o),console.log("城市列表"),console.log(o);var i,s=o.Result;s=s.sort((i="FirstLetter",function(e,t){var n=e[i],r=t[i];return n<r?-1:n>r?1:0}));var c={};s.forEach((function(e){c[e.FirstLetter]=c[e.FirstLetter]||[],c[e.FirstLetter].push(e),!0===e.IsHot&&r.push(e)})),e.setData({hdList:Object.keys(c),bdList:Object.values(c),cityList:s,cityListHot:r}),a.setStorage({key:"CityList",data:s}),a.setStorage({key:"CityListHot",data:r}),a.setStorage({key:"HdList",data:Object.keys(c)}),a.setStorage({key:"BdList",data:Object.values(c)})},fail:function(){a.hideLoading()}})},letterIndexTap:function(e){var t=e.currentTarget.dataset.index;this.setData({toView:t})},cityNameTap:function(e){var t=e.currentTarget.dataset.city,n=C.getCartData(),r=this.data.historyList;this.data.currentCity&&t.Id==this.data.currentCity.Id||(r.length>=2?r[1].Id!==t.Id&&(r.shift(),r.push(t)):r[0]&&r[0].Id===t.Id||r.push(t),this.setData({historyList:r})),a.setStorage({data:r,key:"HistoryList"}),"N"==this.data.isReturn?(n.PickupCity=t,n.ReturnCity=t,n.PickupStore="",n.ReturnStore=""):(n.ReturnCity=t,n.ReturnStore=""),C.setCartData(n),a.redirectTo({url:"../shopInfoPage/shopInfoPage?cityId="+t.Id+"&cityName="+t.Name+"&isReturn="+this.data.isReturn})}})})),window.define("13",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"step1-store",isReturn:"",cityId:"",cityName:"",storeList:"",storeListInfo:"",storeListNear:"",storeListOften:[],storeListAirportRailway:"",toView:"",district:"",scrollTop:0},onLoad:function(e){var t=this;t.setData({isReturn:e.isReturn,cityId:e.cityId,cityName:e.cityName},(function(){return[t.getStoreListOften(t.data.cityId)]})),w.lat&&w.lng?t.getStoreListNear(e.cityId,e.cityName,w.lat,w.lng):t.getStoreList(e.cityId,e.cityName)},onShow:function(){o.setPageInfo({title:"选择租车门店",keywords:"一嗨租车,一嗨,一嗨门店,一嗨租车门店",description:"选择租车的取车门店和还车门店、查看租车门店地址和联系方式等信息",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}})},getStoreListOften:function(){var e=T.getCartData(),t=(o.getStorageSync("storeListOften")||{})["N"===this.data.isReturn?e.PickupCity.Id:e.ReturnCity.Id]||[];t&&t.length>0&&this.setData({toView:"storeOften",district:"Often",storeListOften:t})},getStoreListNear:function(e,t,n,r){var a=this,i="cityId="+e+"&cityName="+t+"&lat="+n+"&lng="+r+"&count=10&distance=5",s=T.getParamEncrypt(w.md5_key,i);o.request({url:D.StoreListNear,data:{query:s.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:s.auth,AppIdentity:w.des_identity},success:function(n){o.hideLoading();var r=n.data.Result.toString();if(r=T.decrypt(r),r=JSON.parse(r),console.log("附近门店"),console.log(r),r.IsSuccess&&r.Result){var i=r.Result;i[0]&&i[0].CityId==a.data.cityId&&(a.setData({storeListNear:r.Result}),0===a.data.storeListOften.length&&a.setData({district:"Nearby"}))}a.getStoreList(e,t)},fail:function(){o.hideLoading()},complete:function(){}})},getStoreList:function(e,t){var n=this,r="cityId="+e+"&cityName="+t,a=T.getParamEncrypt(w.md5_key,r);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.StoreList,data:{query:a.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:a.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();t=T.decrypt(t),t=JSON.parse(t),console.log("门店列表"),console.log(t);var r=[],a=[];T.physicalStore(t.Result).forEach((function(e,t){1!==e.DisplayType&&3!==e.DisplayType||r.push(e)})),r.length>0&&(r.sort((function(e,t){return e.DisplayType-t.DisplayType})),a=T.physicalStore(r)),n.setData({storeList:t.Result,storeListAirportRailway:a}),0===n.data.storeListOften.length&&0===n.data.storeListNear.length&&n.data.storeListAirportRailway.length>0&&n.setData({district:"Traffic"}),0===n.data.storeListOften.length&&0===n.data.storeListNear.length&&0===n.data.storeListAirportRailway.length&&n.setData({district:t.Result[0].Id})},fail:function(){},complete:function(){o.hideLoading()}})},districtIndexTap:function(e){var t=e.currentTarget.dataset.district,n=t.slice(5);this.setData({toView:t,district:n})},storeTap:function(e){var t=e.currentTarget.dataset.store,n=T.getCartData(),r=o.getStorageSync("storeListOften")||{},a="N"===this.data.isReturn?n.PickupCity.Id:n.ReturnCity.Id,i=r[a]||[];if(n){var s=this.data.district,c="其他";if(s)switch(s){case"Hot":c="热门景点";break;case"Traffic":c="机场火车站";break;case"Often":c="常用门店";break;case"Nearby":c="附近门店"}C.ehiSensors.track("choosestore",{storesource:c,vip_no:w.User.UserId||""}),i.length>=2?i[1].Id!==t.Id&&(i.shift(),i.push(t)):i[0]&&i[0].Id===t.Id||i.push(t),r[a]=i,o.setStorageSync("storeListOften",r),t.CrossCityStoreToastTip&&(w.CrossCityStoreToastTip=t.CrossCityStoreToastTip,n.ReturnCity=t.CityInfo,"N"===this.data.isReturn&&(n.PickupCity=t.CityInfo)),"Y"===this.data.isReturn?n.ReturnStore=t:n.PickupStore=t,"N"===this.data.isReturn&&n.PickupCity.Id&&n.ReturnCity.Id&&n.PickupCity.Id===n.ReturnCity.Id&&(n.ReturnStore=t),T.setCartData(n),o.navigateBack({url:"../bookIndex/bookIndex"})}},makePhoneCall:function(e){var t=e.currentTarget.dataset.phone;o.makePhoneCall({phoneNumber:t})}})})),window.define("15",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";e(3);var T=a();T.globalData,T.url;Page({data:{pageName:"rent-guide",galleryList:[{ImageUrl:"https://files.1hai.cn/groupf2/M00/02/F5/rBUFIFxmkcWAOxBNAAJXlmo2upc207.png"},{ImageUrl:"https://files.1hai.cn/groupf1/M00/0A/5D/rBQFH1xmkcaAAEGjAAHKqeb-0W0867.png"},{ImageUrl:"https://files.1hai.cn/groupf1/M00/0A/5D/rBQFH1xmkcaACU_aAAHDuvjnFmo340.png"},{ImageUrl:"https://files.1hai.cn/groupf1/M00/06/D0/rBUFH1xmkceAHSdOAAJrLyvaKP0337.png"},{ImageUrl:"https://files.1hai.cn/groupf2/M00/02/F5/rBUFIFxmkceAYL3rAAGDIJV5XNc577.png"}],indicatorDots:!0,autoplay:!1,vertical:!1,interval:5e3,circular:!0,systemInfo:null,galleryHeight:"100%"},onLoad:function(){this.getSystemInfoPage()},getSystemInfoPage:function(){var e=this;o.getSystemInfo({success:function(t){e.setData({systemInfo:t})}})},backToRent:function(){o.navigateBack()}})})),window.define("17",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"step2",stockPriceListRaw:null,stockPriceList:null,carFilterTypeList:null,showNoneTip:!1,typeActive:0,stockArray:[],showTypeFilterTip:!1,nationalDayTips:""},onLoad:function(){var e=T.getCartData();if(e){this.getStockPriceList(e,w.IsGoldCard,1)}else o.reLaunch({url:"../bookIndex/bookIndex"})},onShow:function(){o.setPageInfo({title:"选择租车车型",keywords:"一嗨租车,一嗨,车型,经济型,舒适型,精英型,SUV,商务型,电动车,高端车",description:"车辆类型包括经济型、舒适型、精英型、SUV、商务型、电动车、高端车等",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}})},goTopTipsDetail:function(e){var t=e.currentTarget.dataset.url;o.navigateTo({url:"../focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(t)})},getStockPriceList:function(e,t,n){var r=this,a={OrderId:e.OrderId,UserId:e.UserId,ChannelId:"",StockType:n,EnterpriseId:e.EnterpriseId,IsEnterpriseUse:e.IsEnterpriseUse,IsPickupService:e.IsPickupService,IsDropoffService:e.IsReturnService,PickupInfo:{CityId:e.PickupCity.Id,CityName:e.PickupCity.Name,Address:e.PickupStore.Address,StoreId:e.PickupStore.Id,Time:e.PickupTime,Longitude:e.PickupStore.Longitude,Latitude:e.PickupStore.Latitude},DropoffInfo:{CityId:e.ReturnCity.Id,CityName:e.ReturnCity.Name,Address:e.ReturnStore.Address,StoreId:e.ReturnStore.Id,Time:e.ReturnTime,Longitude:e.ReturnStore.Longitude,Latitude:e.ReturnStore.Latitude}},i=T.postParamEncrypt(w.md5_key,a);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.StockList,data:{key:i.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:i.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();t=T.decrypt(t),t=JSON.parse(t),console.log("车型"),console.log(t),t.IsSuccess||1010121!==t.ErrorCode?(!1===t.IsSuccess&&o.showModal({title:"提示",content:t.Message,showCancel:!1,success:function(e){e.confirm&&o.navigateBack({delta:1})}}),r.setData({stockPriceListRaw:t.Result.StockPriceList,stockPriceList:t.Result.StockPriceList,carFilterTypeList:t.Result.CarFilterTypeList,showNoneTip:0===t.Result.StockPriceList.length,nationalDayTips:""})):r.setData({nationalDayTips:t.Message})},fail:function(){},complete:function(){o.hideLoading()}})},typeFilter:function(e){var t=e.currentTarget.dataset.index,n=e.currentTarget.dataset.typeId,r=[];console.log("iiiiiiiiiiiii",e,t,n),this.setData({typeActive:t}),0!=n?this.data.stockPriceListRaw.forEach((function(e){e.CommonItem.LevelId===n&&r.push(e)})):r=this.data.stockPriceListRaw,this.setData({stockPriceList:r,showTypeFilterTip:!(r.length>0)}),console.log(this.data.stockPriceList)},carChoosedTap:function(e){var t=e.currentTarget.dataset.index,n=this.data.stockPriceList[t],r=n.BookingPriceItem;console.log("priiiice-=-=",n,r),r.IsAvailble&&this.validateCartData(n,r)},validateCartData:function(e,t){var n=T.getCartData();n.Cartype=T.setCartype(e),n.PriceType=t.PriceType,n.OrderType=e.CommonItem.IsHiCarEnjoy?"7":"1",T.setCartData(n),w.Token?o.navigateTo({url:"../orderConfirm/orderConfirm"}):o.navigateTo({url:"../../my/loginType/loginType?fromType=stockPriceList"})}})})),window.define("19",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url;Page({data:{pageName:"step3-completion",placeCardTypeIndex:[0],defaultCardTypeIndex:[0],listCardType:null,finalCardType:null,showCardTypeModal:!1,trueName:"",idCardNo:"",totalPrice:"",message_tips:"messageTips hide"},onLoad:function(e){var t=this;t.setData({totalPrice:e.totalPrice});var n="Version="+D.Version+"&DeviceId="+D.DeviceId+"&Source="+D.Source+"&AppStoreId="+D.AppStoreId+"&Idfa="+D.Idfa+"&SessionId="+D.SessionId+"&PromotionUrl="+D.PromotionUrl+"&PromotionTemplateId="+D.PromotionTemplateId+"&Longitude="+D.Longitude+"&Latitude="+D.Latitude+"&IpAddress="+D.IpAddress+"&PromotionId="+D.PromotionId+"&PhoneIMSI="+D.PhoneIMSI+"&PhoneMAC="+D.PhoneMAC+"&Extend="+D.Extend+"&OperatorId="+D.Extend+"&enumType=1",r=C.getParamEncrypt(D.md5_key,n);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.GetCardType,data:{query:r.des},method:"GET",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var n=e.data.Result.toString();n=C.decrypt(n);var r=(n=JSON.parse(n)).Result[0].Name;t.setData({cardName:r,cardNo:n.Result[0].key,listCardType:n.Result,finalCardType:n.Result[0]})},fail:function(){},complete:function(){a.hideLoading()}})},trueNameInput:function(e){this.setData({trueName:e.detail.value})},idCardNoInput:function(e){this.setData({idCardNo:e.detail.value})},showCardType:function(){this.setData({showCardTypeModal:!0})},hideCardType:function(){this.setData({showCardTypeModal:!1})},changeCardType:function(e){this.setData({placeCardTypeIndex:e.detail.value})},btnCancel:function(){this.hideCardType()},btnConfirm:function(){this.hideCardType(),this.setData({defaultCardTypeIndex:this.data.placeCardTypeIndex,finalCardType:this.data.listCardType[this.data.placeCardTypeIndex[0]]})},cancelBubble:function(e){e.cancelBubble=!0},verityName:function(e){return!!/^[A-Za-z·.．\u4E00-\uFA29\/]{2,20}$/.test(e)},completeUser:function(){var e=this;if(""==e.data.trueName)return e.setData({message_tips:"messageTips",message:"姓名不能为空"}),void t((function(){e.setData({message_tips:"messageTips hide",message:""})}),2e3);if(!e.verityName(e.data.trueName))return e.setData({message_tips:"messageTips",message:"限英文、汉字，2-20个字符"}),void t((function(){e.setData({message_tips:"messageTips hide",message:""})}),2e3);var n={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{PositiveImg:"",VersoImg:"",FaceImg:"",ExpDate:"",BusinssType:0,PhoneNumber:D.User.PhoneNumber,UserId:D.User.UserId,TrueName:e.data.trueName,IdCardNo:e.data.idCardNo,IdCardType:8,IdType:e.data.finalCardType.key,Birthday:""}},r=C.postParamEncrypt(D.md5_key,n);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.UpdateUser,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n),(n=JSON.parse(n)).IsSuccess?a.getStorage({key:"User",success:function(t){var r=t.data;r.UserName=n.Result.TrueName,r.IdCardNo=n.Result.IdCardNo,D.User.TrueName=r.UserName,D.User.IdCardNo=r.IdCardNo,a.setStorage({key:"User",data:r,success:function(){e.createOrder()}})}}):a.showModal({title:"提示",content:n.Message,showCancel:!1})},fail:function(){},complete:function(){a.hideLoading()}})},createOrder:function(){var e=this,t=(C.getCartData(),D.CreateOrderParam),n=C.postParamEncrypt(D.md5_key,t);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.CreateOrder,data:{key:n.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:n.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n),n=JSON.parse(n),console.log(n),n.IsSuccess?a.redirectTo({url:"../orderResult/orderResult?totalPrice="+e.data.totalPrice+"&orderId="+n.Result.OrderId}):a.showModal({title:"提示",content:n.Message,showCancel:!1})},fail:function(){},complete:function(){a.hideLoading()}})}})})),window.define("21",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=e(3),w=e(22),D=a(),b=D.globalData,_=D.url;Page({data:{pageName:"step3",rentDays:"",cartInfo:null,priceAll:null,additionalInfo:null,commonFees:null,otherFees:null,ruleModal:!1,ruleTitle:"",totalPrice:"",choosedPriceType:"",showPriceDetailModal:!1,placePayWayIndex:null,defaultPayWayIndex:null,listPayWay:null,finalPayWay:{PaymentType:5,Name:"在线支付"},showPayWayModal:!1,chooseCar:null,isSelectChooseCar:!1,groupCarTypeDetail:null,chooseAdded:[],addedServicesPackage:[],addedServicesPackagePair:{},addedServicesPackageChoosed:"",isreaded:!1,addedDescModal:!1,addedDescModalText:"",addedDescModaltitle:"",renterName:"",promotionName:""},onLoad:function(){this.PriceToken||(this.PriceToken=C.guid()),b.IsZhimaPromotion=!1,b.SelectedPromotion="",b.SelectedPromotionName="",b.SelectedRenter="",b.SelectedRenterName="",b.ChoosedCar="",b.IsSelectChoosedCar=!1,b.ChoosedAdded=[],b.CreateOrderParam="";var e=C.getCartData();e?(this.setData({cartInfo:e,rentDays:C.formatRentDays(e.PickupTime,e.ReturnTime),choosedPriceType:e.PriceType}),this.getInitialization(e),e.Cartype.GroupId>0&&this.appointCarTypes(e),this.getAddedServiceList(e)):o.reLaunch({url:"../bookIndex/bookIndex"})},onShow:function(){o.setPageInfo({title:"租车订单确认",keywords:"一嗨租车,一嗨,租车服务费,补充保障,租车费用,支付方式,租车优惠,优惠券,增值服务,在线支付,门店支付,线下支付",description:"确认租车时间城市车型后，选择一嗨相关增值服务和优惠折扣，选择门店支付或在线支付提交租车订单",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}});var e=C.getCartData();e&&(this.setData({cartInfo:e}),this.getInitialization(e),e.Cartype.GroupId>0&&this.appointCarTypes(e))},getPriceDetail:function(e){var t=this,n=[];b.ChoosedAdded&&b.ChoosedAdded.forEach((function(e){n.push({PriceDetailType:e,Count:1})}));var r={OrderPriceTotal:{CarTypeId:b.IsSelectChoosedCar&&b.ChoosedCar?b.ChoosedCar:e.Cartype.CarTypeId,CarGroupId:e.Cartype.GroupId,DropoffCityId:e.ReturnCity.Id,DropoffStoreId:e.ReturnStore.Id,DropoffTime:e.ReturnTime,PickupCityId:e.PickupCity.Id,PickupStoreId:e.PickupStore.Id,PickupTime:e.PickupTime,UserId:b.User.UserId,AddedList:n,PickupDeliver:"",DropoffDeliver:"",OrderId:e.OrderId,OrderType:e.OrderType,Promotions:"",PaymentType:e.PaymentType,PriceType:e.PriceType},SelectPromotion:b.SelectedPromotion,SelectPointPromotion:b.SelectedPointPromotion,PromotionAction:1,IdCardNo:b.User.IdCardNo,TrueName:b.User.TrueName,AcctId:b.User.AccountNo,IsSpecialCarGroupType:b.IsSelectChoosedCar,GroupCartypeId:e.Cartype.CarTypeId,CarGroupId:e.Cartype.GroupId,ChannelId:b.ChannelId,EdmId:"",CorpUid:"",Ldata:"",BeforeCartypeId:null,BeforeCarGroupId:null,PriceToken:this.PriceToken},a=C.postParamEncrypt(b.md5_key,r);o.showLoading({title:"加载中",mask:!0}),o.request({url:_.GetPriceDetail,data:{key:a.des},method:"POST",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:a.auth,AppIdentity:b.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();if(n=C.decrypt(n),n=JSON.parse(n),console.log("价格信息"),console.log(n),n.IsSuccess){var r=[],a=[];if(n.Result.OrderPriceItems.forEach((function(e){0==e.ClassType?a=e.PriceDetails:r.push(e)})),n.Result.DefaultPromotion){var i=n.Result.DefaultPromotion;b.SelectedPromotion={PromotionCode:i.PromotionCode,PromotionId:i.PromotionId,FreeDays:i.FreeDays,Points:i.Points},b.SelectedPromotionName=i.PromotionTitle}else b.SelectedPromotionName="";b.IsZhimaPromotion=n.Result.IsZhimaPromotion,t.setData({priceAll:n.Result,commonFees:r,otherFees:a,totalPrice:n.Result.OrderPriceTotal,pointDeduct:n.Result.UserPoint,promotionName:b.SelectedPromotionName,renterName:C.strReplace(b.SelectedRenterName,0,1)||""})}else o.showModal({title:"提示",content:n.Message,showCancel:!1,success:function(e){e.confirm&&o.reLaunch({url:"../bookIndex/bookIndex"})}})},fail:function(){},complete:function(){o.hideLoading()}})},getInitialization:function(e){var t=this,n={DropoffCityId:e.ReturnCity.Id,DropoffStoreId:e.ReturnStore&&e.ReturnStore.Id,CarTypeUserLevel:e.Cartype.UserLevel,PickupDeliver:e.PickupService,DropoffDeliver:e.ReturnService,CityId:e.PickupCity.Id,PickupStoreId:e.PickupStore&&e.PickupStore.Id,CarTypeId:b.IsSelectChoosedCar&&b.ChoosedCar?b.ChoosedCar:e.Cartype.CarTypeId,CarGroupId:e.Cartype.GroupId,PriceType:e.PriceType,PaymentType:e.PaymentType,ChannelId:b.ChannelId,UserId:b.User.UserId,OrderId:e.OrderId,IsHoliday:!1,IsQueue:!1,IsCallCenter:!1,IsUpdate:e.IsModifyOrder,OrderType:e.OrderType,IsNewUser:!!b.User.IsNewDriver&&b.User.IsNewDriver,IsLongRent:e.IsBatch,AcctId:b.User.AccountNo,CellPhone:"",IsEnterpriseUsage:e.IsEnterpriseUse,PickupTime:e.PickupTime,DropoffTime:e.ReturnTime,PriceToken:this.PriceToken},r=C.postParamEncrypt(b.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:_.GetInitialization,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:r.auth,AppIdentity:b.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();if(n=C.decrypt(n),n=JSON.parse(n),console.log("step3初始化信息"),console.log(n),n.IsSuccess){t.setData({additionalInfo:n.Result});var r=C.getCartData();r.PaymentType=5,C.setCartData(r),t.getPriceDetail(r)}},fail:function(){},complete:function(){o.hideLoading()}})},openWV:function(e){var t=C.getCartData(),n=e.currentTarget.dataset.url,r=e.currentTarget.dataset.rule;!n&&2===r.DesType&&t&&(n="https://market.1hai.cn/ActivePageApp/CommonPage?aid=602&cityId="+t.PickupCity.Id),o.navigateTo({url:"../focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(n)})},appointCarTypes:function(e){var t=this,n={MobileContext:{Version:b.Version,DeviceId:b.DeviceId,Source:b.Source,AppStoreId:b.AppStoreId,Idfa:b.Idfa,SessionId:b.SessionId,PromotionUrl:b.PromotionUrl,PromotionTemplateId:b.PromotionTemplateId,Longitude:b.Longitude,Latitude:b.Latitude,IpAddress:b.IpAddress,PromotionId:b.PromotionId,PhoneIMSI:b.PhoneIMSI,PhoneMAC:b.PhoneMAC,Extend:b.Extend,OperatorId:b.Extend},RequestParam:{OrderId:e.OrderId,CityId:e.PickupCity.Id,PickUpDateTime:e.PickupTime,ReturnDateTime:e.ReturnTime,LocationId:e.PickupStore.Id,GroupId:e.Cartype.GroupId,EnterpriseId:e.EnterpriseId,OperatorId:b.User.UserId,ChannelId:b.ChannelId}},r=C.postParamEncrypt(b.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:_.AppointCarTypes,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:r.auth,AppIdentity:b.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=C.decrypt(n),(n=JSON.parse(n)).IsSuccess&&n.Result&&n.Result.CarTypeList&&t.setData({groupCarTypeDetail:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})},toggleChooseCar:function(e){this.setData({isSelectChooseCar:!this.data.isSelectChooseCar,chooseCar:this.data.cartInfo.Cartype.CarTypeId}),b.ChoosedCar=this.data.chooseCar,b.IsSelectChoosedCar=this.data.isSelectChooseCar,this.getPriceDetail(this.data.cartInfo)},radioChooseCar:function(e){this.setData({chooseCar:e.detail.value}),b.ChoosedCar=this.data.chooseCar,this.getPriceDetail(this.data.cartInfo)},getAddedServiceList:function(e){var t=this,n={PickupStoreId:e.PickupStore.Id,DropoffStoreId:e.ReturnStore.Id,CartypeId:b.IsSelectChoosedCar&&b.ChoosedCar?b.ChoosedCar:e.Cartype.CarTypeId,PickupDateTime:e.PickupTime,DropoffDateTime:e.ReturnTime,IsRelet:!1,CityId:e.PickupCity.Id,DropoffCityId:e.ReturnCity.Id,PickupDistrictName:"",DropoffDistrictName:"",UserId:b.User.UserId,OrderId:e.OrderId,PriceType:e.PriceType,ChannelId:b.ChannelId,Drivers:"",IsRemoveTripInsurance:!0,AcctId:e.IsEnterpriseUse?e.EnterpriseId:"",PriceToken:this.PriceToken},r=C.postParamEncrypt(b.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:_.GetAddedServiceList,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:r.auth,AppIdentity:b.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();if(n=C.decrypt(n),n=JSON.parse(n),console.log("增值服务"),console.log(n),n.IsSuccess&&n.Result.AddedServiceItem){var r=[],a={};n.Result.AddedServiceItem.forEach((function(e){var t=e.AddedService;t&&t.length>1?t.forEach((function(t){t.hasOwnProperty("IsDefault")||(t.IsDefault=e.IsDefault,t.PairId="pair"+e.Id,t.IsOpen=!1,r.push(t),a.hasOwnProperty("pair"+e.Id)||(a["pair"+e.Id]=[]),a["pair"+e.Id].push(t.PriceType))})):1===t.length&&(t[0].IsOpen=!1,r.push(t[0]))})),t.setData({addedServicesPackage:r,addedServicesPackagePair:a})}},fail:function(){},complete:function(){o.hideLoading()}})},chooseAddedNew:function(e){var t=[].concat(this.data.chooseAdded),n=this.data.addedServicesPackage.slice(),r=this.data.addedServicesPackagePair,o=e.currentTarget.dataset.service;console.log(e),e.detail.checked?(o.hasOwnProperty("PairId")&&r[o.PairId].indexOf(o.PriceType)>-1&&r[o.PairId].forEach((function(e){t.indexOf(e)>-1&&(t.splice(t.indexOf(e),1),n.forEach((function(t,r){t.PriceType===e&&(n[r].IsOpen=!1)})))})),t.push(o.PriceType),n.forEach((function(e,t){e.PriceType===o.PriceType&&(n[t].IsOpen=!0)}))):n.forEach((function(e,r){e.PriceType===o.PriceType&&t.indexOf(o.PriceType)>-1&&(t.splice(t.indexOf(o.PriceType),1),n[r].IsOpen=!1)})),this.setData({chooseAdded:t,addedServicesPackage:n}),b.ChoosedAdded=this.data.chooseAdded,this.getPriceDetail(this.data.cartInfo)},openAddedDescModal:function(e){var t=e.currentTarget.dataset.service,n=void 0,r=void 0;t?n=t.DescriptionDetail.replace(/(&#160;)/g," "):(n="必选项，若本人预订则默认本人；若为他人代订，则需完善实际承租人信息。（取还车手续需实际承租人本人办理）",r="实际承租人"),this.setData({addedDescModal:!0,addedDescModalText:t.DescriptionDetail,content:w.bdParse("article","html",n,this),addedDescModaltitle:r||"使用规则："})},closeAddedDescModal:function(){this.setData({addedDescModal:!1})},goPromotion:function(){o.navigateTo({url:"../orderPromotion/orderPromotion"})},toggleChooseDeduct:function(e){var t=this.data.pointDeduct.Promotion;e.detail.checked?b.SelectedPointPromotion=t:b.SelectedPointPromotion="",this.getPriceDetail(this.data.cartInfo)},orderRulesTap:function(){o.navigateTo({url:"../orderRules/orderRules"})},showPriceDetail:function(){this.setData({showPriceDetailModal:!0})},hidePriceDetail:function(){this.setData({showPriceDetailModal:!1})},showPayWay:function(){this.setData({showPayWayModal:!0})},hidePayWay:function(){this.setData({showPayWayModal:!1})},changePayWay:function(e){this.setData({placePayWayIndex:e.detail.value})},btnCancel:function(){this.hidePayWay()},btnConfirm:function(){if(this.hidePayWay(),this.data.placePayWayIndex){this.setData({defaultPayWayIndex:this.data.placePayWayIndex,finalPayWay:this.data.listPayWay[this.data.placePayWayIndex[0]]});var e=C.getCartData();e.PaymentType=this.data.finalPayWay.PaymentType,C.setCartData(e)}},cancelBubble:function(e){e.cancelBubble=!0},createOrderBefore:function(){var e=this,t="Version="+b.Version+"&DeviceId="+b.DeviceId+"&Source="+b.Source+"&AppStoreId="+b.AppStoreId+"&Idfa="+b.Idfa+"&SessionId="+b.SessionId+"&PromotionUrl="+b.PromotionUrl+"&PromotionTemplateId="+b.PromotionTemplateId+"&Longitude="+b.Longitude+"&Latitude="+b.Latitude+"&IpAddress="+b.IpAddress+"&PromotionId="+b.PromotionId+"&PhoneIMSI="+b.PhoneIMSI+"&PhoneMAC="+b.PhoneMAC+"&Extend="+b.Extend+"&OperatorId="+b.Extend+"&userId="+b.User.UserId+"&dCardNo="+b.IdCardNo,n=C.postParamEncrypt(b.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:_.GetBlackListUserInfo,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:n.auth,AppIdentity:b.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n),(n=JSON.parse(n)).Result.InBlackList?n.Result.InBlackList&&(1==n.Result.RiskLevel?o.showModal({title:"提示",content:n.Result.Tips,showCancel:!1,success:function(t){t.confirm&&e.createOrder()}}):n.Result.RiskLevel>=2&&o.showModal({title:"提示",content:n.Result.Tips,showCancel:!1})):e.createOrder()},fail:function(){},complete:function(){o.hideLoading()}})},goRenter:function(){o.navigateTo({url:"../orderRenter/orderRenter"})},createOrder:function(){var e,t=this,n=C.getCartData(),r=[];b.ChoosedAdded&&b.ChoosedAdded.forEach((function(e){r.push({PriceDetailType:e,Count:1})}));var a=(T(e={PrepayStatus:"",OrderPackType:"",Remark:"",SelectPromotion:b.SelectedPromotion,SelectPointPromotion:b.SelectedPointPromotion,IdCardNo:b.User.IdCardNo,TrueName:b.User.TrueName,AcctId:b.User.AccountNo,EdmId:n.EdmId,Ldata:n.Ldata,CorpUid:n.CorpUid,ChannelId:b.ChannelId,FlightNumber:"",IsEnterpriseUsage:n.IsEnterpriseUse,BeforeCartypeId:null,BeforeCarGroupId:null,GroupCartypeId:n.Cartype.CarTypeId,CarGroupDefautTypeId:null,IsSpecialCarGroupType:b.IsSelectChoosedCar,IsUseBalancePay:!1,PickupDeliver:n.PickupService,DropoffDeliver:n.ReturnService,Promotions:[],Invoice:null,AddedList:r,OrderType:n.OrderType,PaymentType:n.PaymentType,OrderFrom:b.OrderFrom,PriceType:n.PriceType,GiftCards:[],Drivers:b.SelectedRenter},"DropoffDeliver",""),T(e,"UserId",b.User.UserId),T(e,"PickupTime",n.PickupTime),T(e,"DropoffTime",n.ReturnTime),T(e,"PickupStoreId",n.IsPickupService?0:n.PickupStore.Id),T(e,"DropoffStoreId",n.IsReturnService?0:n.ReturnStore.Id),T(e,"PickupCityId",n.PickupCity.Id),T(e,"DropoffCityId",n.ReturnCity.Id),T(e,"CarTypeId",b.IsSelectChoosedCar&&b.ChoosedCar?b.ChoosedCar:n.Cartype.CarTypeId),T(e,"CarGroupId",n.Cartype.GroupId),T(e,"PriceToken",this.PriceToken),e),i=C.postParamEncrypt(b.md5_key,a);console.log(a),o.showLoading({title:"加载中",mask:!0}),o.request({url:_.CreateOrder,data:{key:i.des},method:"POST",header:{"Content-Type":"application/json",Token:b.Token,Remark:"Unchecked",AppVersion:b.Version,AppPlatform:b.Source,Authorization:i.auth,AppIdentity:b.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=C.decrypt(n),n=JSON.parse(n),console.log(n),n.IsSuccess?(n.Result.WeBankAuthEntrance?o.setStorage({key:"WeBankAuthInfo",data:n.Result.WeBankAuthEntrance}):o.removeStorage({key:"WeBankAuthInfo"}),o.redirectTo({url:"../orderResult/orderResult?totalPrice="+n.Result.TotalAmount+"&orderId="+n.Result.OrderId})):1010106==n.ErrorCode?o.showModal({title:"提示",content:n.Message,showCancel:!1,success:function(e){e.confirm&&(b.CreateOrderParam=a,o.navigateTo({url:"../orderComplete/orderComplete?totalPrice="+t.data.totalPrice}))}}):o.showModal({title:"提示",content:n.Message,showCancel:!1})},fail:function(){},complete:function(){o.hideLoading()}})},agreeChange:function(){this.data.isreaded=!this.data.isreaded},submitOrder:function(){this.data.isreaded?this.createOrderBefore():o.showToast({icon:"none",title:"请先阅读规则说明",duration:2e3,success:function(e){o.pageScrollTo({scrollTop:1e4})}})}})})),window.define("22",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=w(e(23)),C=w(e(24));function w(e){return e&&e.__esModule?e:{default:e}}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=0,_=0;function R(e){var t=e.target.dataset.src,n=e.target.dataset.from;void 0!==n&&n.length>0&&o.previewImage({current:t,urls:this.data[n].imageUrls})}function L(e){var t=e.target.dataset.from,n=e.target.dataset.idx;void 0!==t&&t.length>0&&function(e,t,n,r){var o,a=n.data[r];if(!a||0==a.images.length)return;var i=a.images,s=function(e,t,n,r){var o,a=0,i=0,s={},c=n.data[r].view.imagePadding;_,e>(o=b-2*c)?(i=(a=o)*t/e,s.imageWidth=a,s.imageheight=i):(s.imageWidth=e,s.imageheight=t);return s}(e.detail.width,e.detail.height,n,r),c=i[t].index,d=""+r,u=!0,l=!1,p=void 0;try{for(var f,h=c.split(".")[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;d+=".nodes["+m+"]"}}catch(e){l=!0,p=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw p}}var g=d+".width",y=d+".height";n.setData((D(o={},g,s.imageWidth),D(o,y,s.imageheight),o))}(e,n,this,t)}o.getSystemInfo({success:function(e){b=e.windowWidth,_=e.windowHeight}}),t.exports={bdParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bdParseData",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'<div class="color:red;">数据不能为空</div>',r=arguments[3],o=arguments[4],a=r,i={};if("html"==t)i=C.default.html2json(n,e);else if("md"==t||"markdown"==t){var s=new T.default.Converter,c=s.makeHtml(n);i=C.default.html2json(c,e),console.log(JSON.stringify(i," "," "))}i.view={},i.view.imagePadding=0,void 0!==o&&(i.view.imagePadding=o);var d={};d[e]=i,a.setData(d),a.bdParseImgLoad=L,a.bdParseImgTap=R},bdParseTemArray:function(e,t,n,r){for(var o=[],a=r.data,i=null,s=0;s<n;s++){var c=a[t+s].nodes;o.push(c)}e=e||"bdParseTemArray",(i=JSON.parse('{"'+e+'":""}'))[e]=o,r.setData(i)},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/bdParse/emojis/",n=arguments[2];C.default.emojisInit(e,t,n)}}})),window.define("23",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function C(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix identation in es6 strings",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}var w={},D={},b={},_=C(!0),R={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:C(!0)};function L(e,t){var n=t?"Error in "+t+" extension->":"Error in unnamed extension",r={valid:!0,error:""};w.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var a=n+" sub-extension "+o+": ",i=e[o];if("object"!==(void 0===i?"undefined":T(i)))return r.valid=!1,r.error=a+"must be an object, but "+(void 0===i?"undefined":T(i))+" given",r;if(!w.helper.isString(i.type))return r.valid=!1,r.error=a+'property "type" must be a string, but '+T(i.type)+" given",r;var s=i.type=i.type.toLowerCase();if("language"===s&&(s=i.type="lang"),"html"===s&&(s=i.type="output"),"lang"!==s&&"output"!==s&&"listener"!==s)return r.valid=!1,r.error=a+"type "+s+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===s){if(w.helper.isUndefined(i.listeners))return r.valid=!1,r.error=a+'. Extensions of type "listener" must have a property called "listeners"',r}else if(w.helper.isUndefined(i.filter)&&w.helper.isUndefined(i.regex))return r.valid=!1,r.error=a+s+' extensions must define either a "regex" property or a "filter" method',r;if(i.listeners){if("object"!==T(i.listeners))return r.valid=!1,r.error=a+'"listeners" property must be an object but '+T(i.listeners)+" given",r;for(var c in i.listeners)if(i.listeners.hasOwnProperty(c)&&"function"!=typeof i.listeners[c])return r.valid=!1,r.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+T(i.listeners[c])+" given",r}if(i.filter){if("function"!=typeof i.filter)return r.valid=!1,r.error=a+'"filter" must be a function, but '+T(i.filter)+" given",r}else if(i.regex){if(w.helper.isString(i.regex)&&(i.regex=new RegExp(i.regex,"g")),!i.regex instanceof RegExp)return r.valid=!1,r.error=a+'"regex" property must either be a string or a RegExp object, but '+T(i.regex)+" given",r;if(w.helper.isUndefined(i.replace))return r.valid=!1,r.error=a+'"regex" extensions must implement a replace string or function',r}}return r}function A(e,t){return"~E"+t.charCodeAt(0)+"E"}w.helper={},w.extensions={},w.setOption=function(e,t){return _[e]=t,this},w.getOption=function(e){return _[e]},w.getOptions=function(){return _},w.resetOptions=function(){_=C(!0)},w.setFlavor=function(e){if(R.hasOwnProperty(e)){var t=R[e];for(var n in t)t.hasOwnProperty(n)&&(_[n]=t[n])}},w.getDefaultOptions=function(e){return C(e)},w.subParser=function(e,t){if(w.helper.isString(e)){if(void 0===t){if(D.hasOwnProperty(e))return D[e];throw Error("SubParser named "+e+" not registered!")}D[e]=t}},w.extension=function(e,t){if(!w.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=w.helper.stdExtName(e),w.helper.isUndefined(t)){if(!b.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return b[e]}"function"==typeof t&&(t=t()),w.helper.isArray(t)||(t=[t]);var n=L(t,e);if(!n.valid)throw Error(n.error);b[e]=t},w.getAllExtensions=function(){return b},w.removeExtension=function(e){delete b[e]},w.resetExtensions=function(){b={}},w.validateExtension=function(e){var t=L(e,null);return!!t.valid||(console.warn(t.error),!1)},w.hasOwnProperty("helper")||(w.helper={}),w.helper.isString=function(e){return"string"==typeof e||e instanceof String},w.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},w.helper.forEach=function(e,t){if("function"==typeof e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)},w.helper.isArray=function(e){return e.constructor===Array},w.helper.isUndefined=function(e){return void 0===e},w.helper.stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()},w.helper.escapeCharactersCallback=A,w.helper.escapeCharacters=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=new RegExp(r,"g");return e=e.replace(o,A)};var U=function(e,t,n,r){var o,a,i,s,c,d=r||"",u=d.indexOf("g")>-1,l=new RegExp(t+"|"+n,"g"+d.replace(/g/g,"")),p=new RegExp(t,d.replace(/g/g,"")),f=[];do{for(o=0;i=l.exec(e);)if(p.test(i[0]))o++||(s=(a=l.lastIndex)-i[0].length);else if(o&&!--o){c=i.index+i[0].length;var h={left:{start:s,end:a},match:{start:a,end:i.index},right:{start:i.index,end:c},wholeMatch:{start:s,end:c}};if(f.push(h),!u)return f}}while(o&&(l.lastIndex=a));return f};w.helper.matchRecursiveRegExp=function(e,t,n,r){for(var o=U(e,t,n,r),a=[],i=0;i<o.length;++i)a.push([e.slice(o[i].wholeMatch.start,o[i].wholeMatch.end),e.slice(o[i].match.start,o[i].match.end),e.slice(o[i].left.start,o[i].left.end),e.slice(o[i].right.start,o[i].right.end)]);return a},w.helper.replaceRecursiveRegExp=function(e,t,n,r,o){if(!w.helper.isFunction(t)){var a=t;t=function(){return a}}var i=U(e,n,r,o),s=e,c=i.length;if(c>0){var d=[];0!==i[0].wholeMatch.start&&d.push(e.slice(0,i[0].wholeMatch.start));for(var u=0;u<c;++u)d.push(t(e.slice(i[u].wholeMatch.start,i[u].wholeMatch.end),e.slice(i[u].match.start,i[u].match.end),e.slice(i[u].left.start,i[u].left.end),e.slice(i[u].right.start,i[u].right.end))),u<c-1&&d.push(e.slice(i[u].wholeMatch.end,i[u+1].wholeMatch.start));i[c-1].wholeMatch.end<e.length&&d.push(e.slice(i[c-1].wholeMatch.end)),s=d.join("")}return s},w.helper.isUndefined(console)&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),w.Converter=function(e){var t={},n=[],r=[],o={};function a(e,t){if(t=t||null,w.helper.isString(e)){if(t=e=w.helper.stdExtName(e),w.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new w.Converter));w.helper.isArray(e)||(e=[e]);var o=L(e,t);if(!o.valid)throw Error(o.error);for(var a=0;a<e.length;++a)switch(e[a].type){case"lang":n.push(e[a]);break;case"output":r.push(e[a]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(w.extensions[e],e);if(w.helper.isUndefined(b[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=b[e]}"function"==typeof e&&(e=e()),w.helper.isArray(e)||(e=[e]);var a=L(e,t);if(!a.valid)throw Error(a.error);for(var s=0;s<e.length;++s){switch(e[s].type){case"lang":n.push(e[s]);break;case"output":r.push(e[s])}if(e[s].hasOwnProperty(o))for(var c in e[s].listeners)e[s].listeners.hasOwnProperty(c)&&i(c,e[s].listeners[c])}}function i(e,t){if(!w.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+(void 0===e?"undefined":T(e))+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+(void 0===t?"undefined":T(t))+" given");o.hasOwnProperty(e)||(o[e]=[]),o[e].push(t)}!function(){for(var n in e=e||{},_)_.hasOwnProperty(n)&&(t[n]=_[n]);if("object"!==(void 0===e?"undefined":T(e)))throw Error("Converter expects the passed parameter to be an object, but "+(void 0===e?"undefined":T(e))+" was passed instead.");for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.extensions&&w.helper.forEach(t.extensions,a)}(),this._dispatch=function(e,t,n,r){if(o.hasOwnProperty(e))for(var a=0;a<o[e].length;++a){var i=o[e][a](e,t,this,n,r);i&&void 0!==i&&(t=i)}return t},this.listen=function(e,t){return i(e,t),this},this.makeHtml=function(e){if(!e)return e;var o={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:n,outputModifiers:r,converter:this,ghCodeBlocks:[]};return e=(e=(e=(e=e.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}(e)),e=e,e=w.subParser("detab")(e,t,o),e=w.subParser("stripBlankLines")(e,t,o),w.helper.forEach(n,(function(n){e=w.subParser("runExtension")(n,e,t,o)})),e=w.subParser("hashPreCodeTags")(e,t,o),e=w.subParser("githubCodeBlocks")(e,t,o),e=w.subParser("hashHTMLBlocks")(e,t,o),e=w.subParser("hashHTMLSpans")(e,t,o),e=w.subParser("stripLinkDefinitions")(e,t,o),e=w.subParser("blockGamut")(e,t,o),e=w.subParser("unhashHTMLSpans")(e,t,o),e=(e=(e=w.subParser("unescapeSpecialChars")(e,t,o)).replace(/~D/g,"$$")).replace(/~T/g,"~"),w.helper.forEach(r,(function(n){e=w.subParser("runExtension")(n,e,t,o)})),e},this.setOption=function(e,n){t[e]=n},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){a(e,t=t||null)},this.useExtension=function(e){a(e)},this.setFlavor=function(e){if(R.hasOwnProperty(e)){var n=R[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}},this.removeExtension=function(e){w.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var o=e[t],a=0;a<n.length;++a)n[a]===o&&n[a].splice(a,1);for(;0<r.length;++a)r[0]===o&&r[0].splice(a,1)}},this.getAllExtensions=function(){return{language:n,output:r}}},w.subParser("anchors",(function(e,t,n){var r=function(e,t,r,o,a,i,s,c){w.helper.isUndefined(c)&&(c=""),e=t;var d=r,u=o.toLowerCase(),l=a,p=c;if(!l)if(u||(u=d.toLowerCase().replace(/ ?\n/g," ")),l="#"+u,w.helper.isUndefined(n.gUrls[u])){if(!(e.search(/\(\s*\)$/m)>-1))return e;l=""}else l=n.gUrls[u],w.helper.isUndefined(n.gTitles[u])||(p=n.gTitles[u]);var f='<a href="'+(l=w.helper.escapeCharacters(l,"*_",!1))+'"';return""!==p&&null!==p&&(p=p.replace(/"/g,"&quot;"),f+=' title="'+(p=w.helper.escapeCharacters(p,"*_",!1))+'"'),f+=">"+d+"</a>"};return e=(e=(e=(e=n.converter._dispatch("anchors.before",e,t,n)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,r)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,r)).replace(/(\[([^\[\]]+)])()()()()()/g,r),e=n.converter._dispatch("anchors.after",e,t,n)})),w.subParser("autoLinks",(function(e,t,n){function r(e,t){var n=t;return/^www\./i.test(t)&&(t=t.replace(/^www\./i,"http://www.")),'<a href="'+t+'">'+n+"</a>"}function o(e,t){var n=w.subParser("unescapeSpecialChars")(t);return w.subParser("encodeEmailAddress")(n)}return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,r)).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,o),t.simplifiedAutoLink&&(e=(e=e.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,r)).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,o)),e=n.converter._dispatch("autoLinks.after",e,t,n)})),w.subParser("blockGamut",(function(e,t,n){e=n.converter._dispatch("blockGamut.before",e,t,n),e=w.subParser("blockQuotes")(e,t,n),e=w.subParser("headers")(e,t,n);var r=w.subParser("hashBlock")("<hr />",t,n);return e=(e=(e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,r)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r),e=w.subParser("lists")(e,t,n),e=w.subParser("codeBlocks")(e,t,n),e=w.subParser("tables")(e,t,n),e=w.subParser("hashHTMLBlocks")(e,t,n),e=w.subParser("paragraphs")(e,t,n),e=n.converter._dispatch("blockGamut.after",e,t,n)})),w.subParser("blockQuotes",(function(e,t,n){return e=(e=n.converter._dispatch("blockQuotes.before",e,t,n)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,r){var o=r;return o=(o=(o=o.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),o=w.subParser("githubCodeBlocks")(o,t,n),o=(o=(o=w.subParser("blockGamut")(o,t,n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})),w.subParser("hashBlock")("<blockquote>\n"+o+"\n</blockquote>",t,n)})),e=n.converter._dispatch("blockQuotes.after",e,t,n)})),w.subParser("codeBlocks",(function(e,t,n){e=n.converter._dispatch("codeBlocks.before",e,t,n);return e=(e=(e+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,r,o){var a=r,i=o,s="\n";return a=w.subParser("outdent")(a),a=w.subParser("encodeCode")(a),a=(a=(a=w.subParser("detab")(a)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(s=""),a="<pre><code>"+a+s+"</code></pre>",w.subParser("hashBlock")(a,t,n)+i}))).replace(/~0/,""),e=n.converter._dispatch("codeBlocks.after",e,t,n)})),w.subParser("codeSpans",(function(e,t,n){return void 0===(e=n.converter._dispatch("codeSpans.before",e,t,n))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,n,r){var o=r;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),t+"<code>"+(o=w.subParser("encodeCode")(o))+"</code>"})),e=n.converter._dispatch("codeSpans.after",e,t,n)})),w.subParser("detab",(function(e){return e=(e=(e=(e=(e=e.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,(function(e,t){for(var n=t,r=4-n.length%4,o=0;o<r;o++)n+=" ";return n}))).replace(/~A/g,"    ")).replace(/~B/g,"")})),w.subParser("encodeAmpsAndAngles",(function(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")})),w.subParser("encodeBackslashEscapes",(function(e){return e=(e=e.replace(/\\(\\)/g,w.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,w.helper.escapeCharactersCallback)})),w.subParser("encodeCode",(function(e){return e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=w.helper.escapeCharacters(e,"*_{}[]\\",!1)})),w.subParser("encodeEmailAddress",(function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=(e='<a href="'+(e=(e="mailto:"+e).replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else if(":"!==e){var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e})))+'">'+e+"</a>").replace(/">.+:/g,'">')})),w.subParser("escapeSpecialCharsWithinTagAttributes",(function(e){return e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=w.helper.escapeCharacters(t,"\\`*_",!1)}))})),w.subParser("githubCodeBlocks",(function(e,t,n){return t.ghCodeBlocks?(e=n.converter._dispatch("githubCodeBlocks.before",e,t,n),e=(e=(e+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,(function(e,r,o){var a=t.omitExtraWLInCodeBlocks?"":"\n";return o=w.subParser("encodeCode")(o),o="<pre><code"+(r?' class="'+r+" language-"+r+'"':"")+">"+(o=(o=(o=w.subParser("detab")(o)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",o=w.subParser("hashBlock")(o,t,n),"\n\n~G"+(n.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"}))).replace(/~0/,""),n.converter._dispatch("githubCodeBlocks.after",e,t,n)):e})),w.subParser("hashBlock",(function(e,t,n){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n"})),w.subParser("hashElement",(function(e,t,n){return function(e,t){var r=t;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n~K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}})),w.subParser("hashHTMLBlocks",(function(e,t,n){for(var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(e,t,r,o){var a=e;return-1!==r.search(/\bmarkdown\b/)&&(a=r+n.converter.makeHtml(t)+o),"\n\n~K"+(n.gHtmlBlocks.push(a)-1)+"K\n\n"},a=0;a<r.length;++a)e=w.helper.replaceRecursiveRegExp(e,o,"^(?: |\\t){0,3}<"+r[a]+"\\b[^>]*>","</"+r[a]+">","gim");return e=(e=(e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,w.subParser("hashElement")(e,t,n))).replace(/(<!--[\s\S]*?-->)/g,w.subParser("hashElement")(e,t,n))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,w.subParser("hashElement")(e,t,n))})),w.subParser("hashHTMLSpans",(function(e,t,n){for(var r=w.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),o=0;o<r.length;++o)e=e.replace(r[o][0],"~L"+(n.gHtmlSpans.push(r[o][0])-1)+"L");return e})),w.subParser("unhashHTMLSpans",(function(e,t,n){for(var r=0;r<n.gHtmlSpans.length;++r)e=e.replace("~L"+r+"L",n.gHtmlSpans[r]);return e})),w.subParser("hashPreCodeTags",(function(e,t,n){return e=w.helper.replaceRecursiveRegExp(e,(function(e,t,r,o){var a=r+w.subParser("encodeCode")(t)+o;return"\n\n~G"+(n.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}),"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")})),w.subParser("headers",(function(e,t,n){e=n.converter._dispatch("headers.before",e,t,n);var r=t.prefixHeaderId,o=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),a=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,i=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function s(e){var t,o=e.replace(/[^\w]/g,"").toLowerCase();return n.hashLinkCounts[o]?t=o+"-"+n.hashLinkCounts[o]++:(t=o,n.hashLinkCounts[o]=1),!0===r&&(r="section"),w.helper.isString(r)?r+t:t}return e=(e=(e=e.replace(a,(function(e,r){var a=w.subParser("spanGamut")(r,t,n),i=t.noHeaderId?"":' id="'+s(r)+'"',c="<h"+o+i+">"+a+"</h"+o+">";return w.subParser("hashBlock")(c,t,n)}))).replace(i,(function(e,r){var a=w.subParser("spanGamut")(r,t,n),i=t.noHeaderId?"":' id="'+s(r)+'"',c=o+1,d="<h"+c+i+">"+a+"</h"+c+">";return w.subParser("hashBlock")(d,t,n)}))).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,(function(e,r,a){var i=w.subParser("spanGamut")(a,t,n),c=t.noHeaderId?"":' id="'+s(a)+'"',d=o-1+r.length,u="<h"+d+c+">"+i+"</h"+d+">";return w.subParser("hashBlock")(u,t,n)})),e=n.converter._dispatch("headers.after",e,t,n)})),w.subParser("images",(function(e,t,n){function r(e,t,r,o,a,i,s,c){var d=n.gUrls,u=n.gTitles,l=n.gDimensions;if(r=r.toLowerCase(),c||(c=""),""===o||null===o){if(""!==r&&null!==r||(r=t.toLowerCase().replace(/ ?\n/g," ")),o="#"+r,w.helper.isUndefined(d[r]))return e;o=d[r],w.helper.isUndefined(u[r])||(c=u[r]),w.helper.isUndefined(l[r])||(a=l[r].width,i=l[r].height)}t=t.replace(/"/g,"&quot;"),t=w.helper.escapeCharacters(t,"*_",!1);var p='<img src="'+(o=w.helper.escapeCharacters(o,"*_",!1))+'" alt="'+t+'"';return c&&(c=c.replace(/"/g,"&quot;"),p+=' title="'+(c=w.helper.escapeCharacters(c,"*_",!1))+'"'),a&&i&&(p+=' width="'+(a="*"===a?"auto":a)+'"',p+=' height="'+(i="*"===i?"auto":i)+'"'),p+=" />"}return e=(e=(e=n.converter._dispatch("images.before",e,t,n)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g,r)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,r),e=n.converter._dispatch("images.after",e,t,n)})),w.subParser("italicsAndBold",(function(e,t,n){return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e=n.converter._dispatch("italicsAndBold.after",e,t,n)})),w.subParser("lists",(function(e,t,n){function r(e,r){n.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var o=/\n[ \t]*\n(?!~0)/.test(e+="~0");return e=(e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,(function(e,r,a,i,s,c,d){d=d&&""!==d.trim();var u=w.subParser("outdent")(s,t,n),l="";return c&&t.tasklists&&(l=' class="task-list-item" style="list-style-type: none;"',u=u.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return d&&(e+=" checked"),e+=">"}))),r||u.search(/\n{2,}/)>-1?(u=w.subParser("githubCodeBlocks")(u,t,n),u=w.subParser("blockGamut")(u,t,n)):(u=(u=w.subParser("lists")(u,t,n)).replace(/\n$/,""),u=o?w.subParser("paragraphs")(u,t,n):w.subParser("spanGamut")(u,t,n)),u="\n<li"+l+">"+u+"</li>\n"}))).replace(/~0/g,""),n.gListLevel--,r&&(e=e.replace(/\s+$/,"")),e}function o(e,t,n){var o="ul"===t?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,a=[],i="";if(-1!==e.search(o)){!function e(a){var s=a.search(o);-1!==s?(i+="\n\n<"+t+">"+r(a.slice(0,s),!!n)+"</"+t+">\n\n",o="ul"===(t="ul"===t?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(a.slice(s))):i+="\n\n<"+t+">"+r(a,!!n)+"</"+t+">\n\n"}(e);for(var s=0;s<a.length;++s);}else i="\n\n<"+t+">"+r(e,!!n)+"</"+t+">\n\n";return i}e=n.converter._dispatch("lists.before",e,t,n),e+="~0";var a=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return n.gListLevel?e=e.replace(a,(function(e,t,n){return o(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):(a=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(a,(function(e,t,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol")}))),e=e.replace(/~0/,""),e=n.converter._dispatch("lists.after",e,t,n)})),w.subParser("outdent",(function(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")})),w.subParser("paragraphs",(function(e,t,n){for(var r=(e=(e=(e=n.converter._dispatch("paragraphs.before",e,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],a=r.length,i=0;i<a;i++){var s=r[i];s.search(/~(K|G)(\d+)\1/g)>=0||(s=(s=w.subParser("spanGamut")(s,t,n)).replace(/^([ \t]*)/g,"<p>"),s+="</p>"),o.push(s)}for(a=o.length,i=0;i<a;i++){for(var c="",d=o[i],u=!1;d.search(/~(K|G)(\d+)\1/)>=0;){var l=RegExp.$1,p=RegExp.$2;c=(c="K"===l?n.gHtmlBlocks[p]:u?w.subParser("encodeCode")(n.ghCodeBlocks[p].text):n.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),d=d.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(d)&&(u=!0)}o[i]=d}return e=(e=(e=o.join("\n\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",e,t,n)})),w.subParser("runExtension",(function(e,t,n,r){if(e.filter)t=e.filter(t,r.converter,n);else if(e.regex){var o=e.regex;!o instanceof RegExp&&(o=new RegExp(o,"g")),t=t.replace(o,e.replace)}return t})),w.subParser("spanGamut",(function(e,t,n){return e=n.converter._dispatch("spanGamut.before",e,t,n),e=w.subParser("codeSpans")(e,t,n),e=w.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,n),e=w.subParser("encodeBackslashEscapes")(e,t,n),e=w.subParser("images")(e,t,n),e=w.subParser("anchors")(e,t,n),e=w.subParser("autoLinks")(e,t,n),e=w.subParser("encodeAmpsAndAngles")(e,t,n),e=w.subParser("italicsAndBold")(e,t,n),e=(e=w.subParser("strikethrough")(e,t,n)).replace(/  +\n/g," <br />\n"),e=n.converter._dispatch("spanGamut.after",e,t,n)})),w.subParser("strikethrough",(function(e,t,n){return t.strikethrough&&(e=(e=n.converter._dispatch("strikethrough.before",e,t,n)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=n.converter._dispatch("strikethrough.after",e,t,n)),e})),w.subParser("stripBlankLines",(function(e){return e.replace(/^[ \t]+$/gm,"")})),w.subParser("stripLinkDefinitions",(function(e,t,n){return e=(e=(e+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,(function(e,r,o,a,i,s,c){return r=r.toLowerCase(),n.gUrls[r]=w.subParser("encodeAmpsAndAngles")(o),s?s+c:(c&&(n.gTitles[r]=c.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&a&&i&&(n.gDimensions[r]={width:a,height:i}),"")}))).replace(/~0/,"")})),w.subParser("tables",(function(e,t,n){if(!t.tables)return e;function r(e,r){return"<td"+r+">"+w.subParser("spanGamut")(e,t,n)+"</td>\n"}return e=(e=n.converter._dispatch("tables.before",e,t,n)).replace(/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm,(function(e){var o,a=e.split("\n");for(o=0;o<a.length;++o)/^[ \t]{0,3}\|/.test(a[o])&&(a[o]=a[o].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(a[o])&&(a[o]=a[o].replace(/\|[ \t]*$/,""));var i,s,c,d,u=a[0].split("|").map((function(e){return e.trim()})),l=a[1].split("|").map((function(e){return e.trim()})),p=[],f=[],h=[],m=[];for(a.shift(),a.shift(),o=0;o<a.length;++o)""!==a[o].trim()&&p.push(a[o].split("|").map((function(e){return e.trim()})));if(u.length<l.length)return e;for(o=0;o<l.length;++o)h.push((i=l[o],/^:[ \t]*--*$/.test(i)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(i)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(i)?' style="text-align:center;"':""));for(o=0;o<u.length;++o)w.helper.isUndefined(h[o])&&(h[o]=""),f.push((s=u[o],c=h[o],d=void 0,d="",s=s.trim(),t.tableHeaderId&&(d=' id="'+s.replace(/ /g,"_").toLowerCase()+'"'),"<th"+d+c+">"+(s=w.subParser("spanGamut")(s,t,n))+"</th>\n"));for(o=0;o<p.length;++o){for(var g=[],y=0;y<f.length;++y)w.helper.isUndefined(p[o][y]),g.push(r(p[o][y],h[y]));m.push(g)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,o=0;o<r;++o)n+=e[o];for(n+="</tr>\n</thead>\n<tbody>\n",o=0;o<t.length;++o){n+="<tr>\n";for(var a=0;a<r;++a)n+=t[o][a];n+="</tr>\n"}return n+="</tbody>\n</table>\n"}(f,m)})),e=n.converter._dispatch("tables.after",e,t,n)})),w.subParser("unescapeSpecialChars",(function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)}))})),t.exports=w})),window.define("24",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T="",C="",w={},D=e(25),b=e(26),_=(A("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),A("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),R=A("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),L=A("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");A("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),A("wxxxcode-style,script,style,view,scroll-view,block");function A(e){for(var t={},n=e.split(","),r=0;r<n.length;r++)t[n[r]]=!0;return t}function U(e){var t=[];if(0==T.length||!w)return(i={node:"text"}).text=e,r=[i];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var n=new RegExp("[:]"),r=e.split(n),o=0;o<r.length;o++){var a=r[o],i={};w[a]?(i.node="element",i.tag="emoji",i.text=w[a],i.baseSrc=C):(i.node="text",i.text=a),t.push(i)}return t}t.exports={html2json:function(e,t){e=function(e){return e.replace(/\r?\n+/g,"").replace(/<!--.*?-->/gi,"").replace(/\/\*.*?\*\//gi,"").replace(/[ ]+</gi,"<")}(e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}(e)),e=D.strDiscode(e);var n=[],r={node:t,nodes:[],images:[],imageUrls:[]},o=0;return b(e,{start:function(e,a,i){var s,c={node:"element",tag:e};0===n.length?(c.index=o.toString(),o+=1):(void 0===(s=n[0]).nodes&&(s.nodes=[]),c.index=s.index+"."+s.nodes.length);if(_[e]?c.tagType="block":R[e]?c.tagType="inline":L[e]&&(c.tagType="closeSelf"),0!==a.length&&(c.attr=a.reduce((function(e,t){var n=t.name,r=t.value;return"class"==n&&(c.classStr=r),"style"==n&&(c.styleStr=r),r.match(/ /)&&(r=r.split(" ")),e[n]?Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r,e}),{})),"img"===c.tag){c.imgIndex=r.images.length;var d=c.attr.src;""==d[0]&&d.splice(0,1),d=D.urlToHttpUrl(d,"https"),c.attr.src=d,c.from=t,r.images.push(c),r.imageUrls.push(d)}if("font"===c.tag){var u=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],l={color:"color",face:"font-family",size:"font-size"};if(console.log(c.attr),void 0!==c.attr&&"null"!=c.attr&&""!=c.attr&&(c.attr.style||(c.attr.style=[])),void 0!==c.styleStr&&"null"!=c.styleStr&&""!=c.styleStr&&(c.styleStr||(c.styleStr="")),void 0!==c.attr&&"null"!=c.attr&&""!=c.attr)for(var p in l)if(c.attr[p]){var f="size"===p?u[c.attr[p]-1]:c.attr[p];c.attr.style.push(l[p]),c.attr.style.push(f),c.styleStr+=l[p]+": "+f+";"}}("source"===c.tag&&(r.source=c.attr.src),i)?(void 0===(s=n[0]||r).nodes&&(s.nodes=[]),s.nodes.push(c)):n.unshift(c)},end:function(e){var t=n.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&r.source&&(t.attr.src=r.source,delete r.source),0===n.length)r.nodes.push(t);else{var o=n[0];void 0===o.nodes&&(o.nodes=[]),o.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:U(e)};if(0===n.length)t.index=o.toString(),o+=1,r.nodes.push(t);else{var a=n[0];void 0===a.nodes&&(a.nodes=[]),t.index=a.index+"."+a.nodes.length,a.nodes.push(t)}},comment:function(e){}}),r},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",n=arguments[2];T=e,C=t,w=n}}})),window.define("25",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";t.exports={strDiscode:function(e){return e=function(e){return e=(e=(e=e.replace(/\r\n/g,"")).replace(/\n/g,"")).replace(/code/g,"wxxxcode-style")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&OElig;/g,"Œ")).replace(/&oelig;/g,"œ")).replace(/&Scaron;/g,"Š")).replace(/&scaron;/g,"š")).replace(/&Yuml;/g,"Ÿ")).replace(/&fnof;/g,"ƒ")).replace(/&circ;/g,"ˆ")).replace(/&tilde;/g,"˜")).replace(/&ensp;/g,"")).replace(/&emsp;/g,"")).replace(/&thinsp;/g,"")).replace(/&zwnj;/g,"")).replace(/&zwj;/g,"")).replace(/&lrm;/g,"")).replace(/&rlm;/g,"")).replace(/&ndash;/g,"–")).replace(/&mdash;/g,"—")).replace(/&lsquo;/g,"‘")).replace(/&rsquo;/g,"’")).replace(/&sbquo;/g,"‚")).replace(/&ldquo;/g,"“")).replace(/&rdquo;/g,"”")).replace(/&bdquo;/g,"„")).replace(/&dagger;/g,"†")).replace(/&Dagger;/g,"‡")).replace(/&bull;/g,"•")).replace(/&hellip;/g,"…")).replace(/&permil;/g,"‰")).replace(/&prime;/g,"′")).replace(/&Prime;/g,"″")).replace(/&lsaquo;/g,"‹")).replace(/&rsaquo;/g,"›")).replace(/&oline;/g,"‾")).replace(/&euro;/g,"€")).replace(/&trade;/g,"™")).replace(/&larr;/g,"←")).replace(/&uarr;/g,"↑")).replace(/&rarr;/g,"→")).replace(/&darr;/g,"↓")).replace(/&harr;/g,"↔")).replace(/&crarr;/g,"↵")).replace(/&lceil;/g,"⌈")).replace(/&rceil;/g,"⌉")).replace(/&lfloor;/g,"⌊")).replace(/&rfloor;/g,"⌋")).replace(/&loz;/g,"◊")).replace(/&spades;/g,"♠")).replace(/&clubs;/g,"♣")).replace(/&hearts;/g,"♥")).replace(/&diams;/g,"♦")).replace(/&#39;/g,"'")}(e=function(e){return e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/g," ")).replace(/&quot;/g,"'")).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#8226;/g,"•")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&Alpha;/g,"Α")).replace(/&Beta;/g,"Β")).replace(/&Gamma;/g,"Γ")).replace(/&Delta;/g,"Δ")).replace(/&Epsilon;/g,"Ε")).replace(/&Zeta;/g,"Ζ")).replace(/&Eta;/g,"Η")).replace(/&Theta;/g,"Θ")).replace(/&Iota;/g,"Ι")).replace(/&Kappa;/g,"Κ")).replace(/&Lambda;/g,"Λ")).replace(/&Mu;/g,"Μ")).replace(/&Nu;/g,"Ν")).replace(/&Xi;/g,"Ν")).replace(/&Omicron;/g,"Ο")).replace(/&Pi;/g,"Π")).replace(/&Rho;/g,"Ρ")).replace(/&Sigma;/g,"Σ")).replace(/&Tau;/g,"Τ")).replace(/&Upsilon;/g,"Υ")).replace(/&Phi;/g,"Φ")).replace(/&Chi;/g,"Χ")).replace(/&Psi;/g,"Ψ")).replace(/&Omega;/g,"Ω")).replace(/&alpha;/g,"α")).replace(/&beta;/g,"β")).replace(/&gamma;/g,"γ")).replace(/&delta;/g,"δ")).replace(/&epsilon;/g,"ε")).replace(/&zeta;/g,"ζ")).replace(/&eta;/g,"η")).replace(/&theta;/g,"θ")).replace(/&iota;/g,"ι")).replace(/&kappa;/g,"κ")).replace(/&lambda;/g,"λ")).replace(/&mu;/g,"μ")).replace(/&nu;/g,"ν")).replace(/&xi;/g,"ξ")).replace(/&omicron;/g,"ο")).replace(/&pi;/g,"π")).replace(/&rho;/g,"ρ")).replace(/&sigmaf;/g,"ς")).replace(/&sigma;/g,"σ")).replace(/&tau;/g,"τ")).replace(/&upsilon;/g,"υ")).replace(/&phi;/g,"φ")).replace(/&chi;/g,"χ")).replace(/&psi;/g,"ψ")).replace(/&omega;/g,"ω")).replace(/&thetasym;/g,"ϑ")).replace(/&upsih;/g,"ϒ")).replace(/&piv;/g,"ϖ")).replace(/&middot;/g,"·")}(e=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&forall;/g,"∀")).replace(/&part;/g,"∂")).replace(/&exists;/g,"∃")).replace(/&empty;/g,"∅")).replace(/&nabla;/g,"∇")).replace(/&isin;/g,"∈")).replace(/&notin;/g,"∉")).replace(/&ni;/g,"∋")).replace(/&prod;/g,"∏")).replace(/&sum;/g,"∑")).replace(/&minus;/g,"−")).replace(/&lowast;/g,"∗")).replace(/&radic;/g,"√")).replace(/&prop;/g,"∝")).replace(/&infin;/g,"∞")).replace(/&ang;/g,"∠")).replace(/&and;/g,"∧")).replace(/&or;/g,"∨")).replace(/&cap;/g,"∩")).replace(/&cap;/g,"∪")).replace(/&int;/g,"∫")).replace(/&there4;/g,"∴")).replace(/&sim;/g,"∼")).replace(/&cong;/g,"≅")).replace(/&asymp;/g,"≈")).replace(/&ne;/g,"≠")).replace(/&le;/g,"≤")).replace(/&ge;/g,"≥")).replace(/&sub;/g,"⊂")).replace(/&sup;/g,"⊃")).replace(/&nsub;/g,"⊄")).replace(/&sube;/g,"⊆")).replace(/&supe;/g,"⊇")).replace(/&oplus;/g,"⊕")).replace(/&otimes;/g,"⊗")).replace(/&perp;/g,"⊥")).replace(/&sdot;/g,"⋅")}(e)))))},urlToHttpUrl:function(e,t){return new RegExp("^//").test(e)&&(e=t+":"+e),e}}})),window.define("26",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,C=/^<\/([-A-Za-z0-9_]+)[^>]*>/,w=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,D=U("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),b=U("a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),_=U("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),R=U("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),L=U("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),A=U("wxxxcode-style,script,style,view,scroll-view,block");function U(e){for(var t={},n=e.split(","),r=0;r<n.length;r++)t[n[r]]=!0;return t}t.exports=function(e,t){var n,r,o,a=[],i=e;for(a.last=function(){return this[this.length-1]};e;){if(r=!0,a.last()&&A[a.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+a.last()+"[^>]*>"),(function(e,n){return n=n.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(n),""})),d("",a.last());else if(0==e.indexOf("\x3c!--")?(n=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),r=!1):0==e.indexOf("</")?(o=e.match(C))&&(e=e.substring(o[0].length),o[0].replace(C,d),r=!1):0==e.indexOf("<")&&(o=e.match(T))&&(e=e.substring(o[0].length),o[0].replace(T,c),r=!1),r){n=e.indexOf("<");for(var s="";0===n;)s+="<",n=(e=e.substring(1)).indexOf("<");s+=n<0?e:e.substring(0,n),e=n<0?"":e.substring(n),t.chars&&t.chars(s)}if(e==i)throw"Parse Error: "+e;i=e}function c(e,n,r,o){if(n=n.toLowerCase(),b[n])for(;a.last()&&_[a.last()];)d("",a.last());if(R[n]&&a.last()==n&&d("",n),(o=D[n]||!!o)||a.push(n),t.start){var i=[];r.replace(w,(function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:L[t]?t:"";i.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(n,i,o)}}function d(e,n){if(n){n=n.toLowerCase();for(r=a.length-1;r>=0&&a[r]!=n;r--);}else var r=0;if(r>=0){for(var o=a.length-1;o>=r;o--)t.end&&t.end(a[o]);a.length=r}}d()}})),window.define("28",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";Page({data:{},onLoad:function(e){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("30",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"step3-promotion",showRuleModal:!1,ruleText:"",ruleType:"",code:null,promtion:null,availablePromotions:null,promotionCode:"",cartInfo:null,selectedPromotion:{}},onLoad:function(){var e=T.getCartData();e?(this.setData({cartInfo:e,selectedPromotion:w.SelectedPromotion}),this.getPromotions(e)):o.reLaunch({url:"../bookIndex/bookIndex"})},getPromotions:function(e){var t=this,n=[];w.ChoosedAdded&&w.ChoosedAdded.forEach((function(e){n.push({PriceDetailType:e,Count:1})}));var r={CarTypeId:e.Cartype.CarTypeId,CarGroupId:e.Cartype.GroupId,DropoffCityId:e.ReturnCity.Id,DropoffStoreId:e.ReturnStore.Id,DropoffTime:e.ReturnTime,PickupCityId:e.PickupCity.Id,PickupStoreId:e.PickupStore.Id,PickupTime:e.PickupTime,UserId:w.User.UserId,ChannelId:w.ChannelId,OrderId:e.OrderId,OrderType:e.OrderType,PickupCityName:e.PickupCity.Name,DropoffCityName:e.ReturnCity.Name,EdmId:e.EdmId,AcctId:w.User.AccountNo,IsZhimaPromotion:w.IsZhimaPromotion,PriceType:e.PriceType,PaymentType:e.PaymentType,PickupDeliver:e.PickupService,DropoffDeliver:e.ReturnService,AddedList:n,Drivers:w.SelectedRenter||[]},a=T.postParamEncrypt(w.md5_key,r);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.GetPromotions,data:{key:a.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:a.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("优惠券"),console.log(n),n.IsSuccess&&n.Result&&t.setData({availablePromotions:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})},choosePromotionCode:function(e){var t=e.currentTarget.dataset.code;w.SelectedPromotion=this.formatConvert(t.Code,t.Id,0),w.SelectedPromotionName=t.Title,o.navigateBack({url:"../orderConfirm/orderConfirm"})},choosePromotion:function(e){var t=e.currentTarget.dataset.promotion;w.SelectedPromotion=this.formatConvert("",t.Id,0),w.SelectedPromotionName=t.Title,o.navigateBack({url:"../orderConfirm/orderConfirm"})},useFreeDays:function(e){var t=e.currentTarget.dataset.days;w.SelectedPromotion=this.formatConvert("",1,t),w.SelectedPromotionName="免费天数("+t+"天)",o.navigateBack({url:"../orderConfirm/orderConfirm"})},formatConvert:function(e,t,n){return{FreeDays:n,PromotionCode:e,PromotionId:t,Points:0}},removePromotion:function(){w.SelectedPromotion={},w.SelectedPromotionName="",this.setData({selectedPromotion:{}}),o.navigateBack({url:"../orderConfirm/orderConfirm"})},showRule:function(e){var t=e.currentTarget.dataset.type;if("0"==t){var n=e.currentTarget.dataset.code;this.setData({code:n,ruleText:n.Rule,ruleType:t})}else{var r=e.currentTarget.dataset.promotion;this.setData({promotion:r,ruleText:r.Rule,ruleType:t})}this.setData({showRuleModal:!0})},hideRule:function(){this.setData({showRuleModal:!1})},cancelBubble:function(e){e.cancelBubble=!0},promotionCodeInput:function(e){this.setData({promotionCode:e.detail.value})},bindPromotionCode:function(){var e=this,t=e.data.cartInfo;if(""!==e.data.promotionCode){var n={MobileContext:{Version:w.Version,DeviceId:w.DeviceId,Source:w.Source,AppStoreId:w.AppStoreId,Idfa:w.Idfa,SessionId:w.SessionId,PromotionUrl:w.PromotionUrl,PromotionTemplateId:w.PromotionTemplateId,Longitude:w.Longitude,Latitude:w.Latitude,IpAddress:w.IpAddress,PromotionId:w.PromotionId,PhoneIMSI:w.PhoneIMSI,PhoneMAC:w.PhoneMAC,Extend:w.Extend,OperatorId:w.Extend},RequestParam:{CarTypeId:t.Cartype.CarTypeId,DropoffCityId:t.ReturnCity.Id,DropoffStoreId:t.ReturnStore.Id,DropoffTime:t.ReturnTime,PickupCityId:t.PickupCity.Id,PickupStoreId:t.PickupStore.Id,PickupTime:t.PickupTime,UserId:w.User.UserId,ChannelId:w.ChannelId,PaymentType:t.PaymentType,PriceType:t.PriceType,OrderId:t.OrderId,OrderType:t.OrderType,PickupCityName:t.PickupCity.Name,DropoffCityName:t.ReturnCity.Name}},r="code="+e.data.promotionCode,a=T.postParamEncrypt(w.md5_key,n),i=T.getParamEncrypt(w.md5_key,r),s=T.paramEncrypt(w.md5_key,r,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.BindPromotionCode+i.des,data:{key:a.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:s.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("优惠编码"),console.log(n),!1!==n.IsSuccess?(w.SelectedPromotion=e.formatConvert(n.Result.PromotionCode,n.Result.PromotionId,0),w.SelectedPromotionName=n.Result.PromotionTitle,o.navigateBack({url:"../orderConfirm/orderConfirm"})):o.showToast({title:n.Message,icon:"none",duration:2e3,success:function(){}})},fail:function(){},complete:function(){o.hideLoading()}})}else o.showToast({title:"请输入优惠编码",icon:"none",duration:2e3,success:function(){}})}})})),window.define("32",(function(e,t,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url;Page({data:{pageName:"step4",jumpUrl:"",totalPrice:"",orderId:"",authPopup:null,authPopupPic:null,paymentType:"",showUpgradeMoadl:!1,timer:null,CancelTime:null,CancelTimeTips:null},onLoad:function(e){var t=this,n=C.getCartData();t.setData({totalPrice:e.totalPrice,orderId:e.orderId,paymentType:n.PaymentType},(function(){t.getOrderDetail()}))},onUnload:function(){clearInterval(this.data.timer),"orderList"!=this.data.jumpUrl&&a.switchTab({url:"../../my/myIndex/myIndex"})},onHide:function(){clearInterval(this.data.timer)},getOrderDetail:function(){var e=this,t={OrderId:e.data.orderId,UserId:D.User.UserId,PhoneNumber:D.User.PhoneNumber},r=C.postParamEncrypt(D.md5_key,t);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.GetOrderDetail,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var r=t.data.Result.toString();r=C.decrypt(r),r=JSON.parse(r),console.log("订单详情"),console.log(r),r.IsSuccess&&e.setData({CancelTimeTips:r.Result.CancelTimeTips,CancelTime:r.Result.CancelTime},(function(){r.Result.CancelTime>0&&(clearInterval(e.data.timer),e.data.timer=n((function(){var t=e.data.CancelTime-1;t<=0?(clearInterval(e.data.timer),a.redirectTo({url:"../../my/orderDetail/orderDetail?orderId="+e.data.orderId})):e.setData({CancelTime:t,minutes:Math.floor(t/60),seconds:t%60})}),1e3))}))},fail:function(){},complete:function(){a.hideLoading()}})},ordersManage:function(){this.setData({jumpUrl:"orderList"}),a.switchTab({url:"../../my/orderList/orderList"})},payOrder:function(){var e={PhoneNumber:D.User.PhoneNumber,Subject:"一嗨租车订单支付",OrderId:this.data.orderId,UserId:D.User.UserId,Amount:this.data.totalPrice,GatewayId:80,BusinessType:1,SourceId:39,ActionType:2,ClientIp:"",OperatorId:"",Timestamp:"",OperationId:"",Sign:""},t=C.postParamEncrypt(D.md5_key,e);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.BaiduPay,data:{key:t.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:t.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var t=e.data.Result.toString();t=C.decrypt(t),t=JSON.parse(t),console.log("支付参数"),console.log(t);var n=JSON.parse(t.Result.BizContent);a.requestPolymerPayment({orderInfo:{dealId:n.dealId,appKey:n.appKey,totalAmount:n.totalAmount,tpOrderId:n.tpOrderId,dealTitle:n.dealTitle,rsaSign:n.rsaSign,signFieldsRange:n.signFieldsRange,bizInfo:n.bizInfo,notifyUrl:n.notifyUrl},bannedChannels:["BDWallet"],success:function(){a.showToast({title:"支付成功",icon:"success",mask:!0,duration:2e3,success:function(){a.reLaunch({url:"/pages/my/orderList/orderList"})}})},fail:function(){a.showToast({title:"支付失败",mask:!0})}})},fail:function(){},complete:function(){a.hideLoading()}})}})})),window.define("34",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"step3-renter",debug:w.debug,cartInfo:null,renterList:null,selectedRenter:"",frequentContactsTips:""},onLoad:function(){var e=T.getCartData();e&&w.Token?this.setData({cartInfo:e}):o.switchTab({url:"../bookIndex/bookIndex"})},onShow:function(){this.setData({selectedRenter:w.SelectedRenter&&w.SelectedRenter[0]}),this.getRenters()},chooseRenter:function(e){var t=e.currentTarget.dataset.renter;w.SelectedRenter=[this.formatConvertRenter(t)],w.SelectedRenterName=t.Name;var n=T.getCartData();this.getPromotions(n)},removeRenter:function(){w.SelectedRenter=[],w.SelectedRenterName="",this.setData({selectedRenter:""}),o.navigateBack({url:"../orderConfirm/orderConfirm"})},addRenter:function(){w.Token&&o.navigateTo({url:"/pages/my/renter-add/renter-add"})},formatConvertRenter:function(e){return e?{DrivingIssueDate:e.DrivingRegTime,Id:e.Id,IdCardNo:e.IdCardNo,IdCardType:e.IdCardType,PhoneNumber:e.MobilePhoneNo,TrueName:e.Name}:""},getPromotions:function(e){var t=[];w.ChoosedAdded&&w.ChoosedAdded.forEach((function(e){t.push({PriceDetailType:e,Count:1})}));var n={CarTypeId:e.Cartype.CarTypeId,CarGroupId:e.Cartype.GroupId,DropoffCityId:e.ReturnCity.Id,DropoffStoreId:e.ReturnStore.Id,DropoffTime:e.ReturnTime,PickupCityId:e.PickupCity.Id,PickupStoreId:e.PickupStore.Id,PickupTime:e.PickupTime,UserId:w.User.UserId,ChannelId:w.ChannelId,OrderId:e.OrderId,OrderType:e.OrderType,PickupCityName:e.PickupCity.Name,DropoffCityName:e.ReturnCity.Name,EdmId:e.EdmId,AcctId:w.User.AccountNo,IsZhimaPromotion:w.IsZhimaPromotion,PriceType:e.PriceType,PaymentType:e.PaymentType,PickupDeliver:e.PickupService,DropoffDeliver:e.ReturnService,AddedList:t,Drivers:w.SelectedRenter||[]},r=T.postParamEncrypt(w.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.GetPromotions,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:r.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();t=T.decrypt(t),t=JSON.parse(t),console.log("优惠券"),console.log(t),t.IsSuccess&&t.Result&&(w.SelectedPromotion&&t.Result.UnavailableCodeList.some((function(e){return Number(w.SelectedPromotion.PromotionId)===Number(e.Id)}))&&(w.SelectedPromotion="",w.SelectedPromotionName=""),o.navigateBack({url:"../orderConfirm/orderConfirm"}))},fail:function(){},complete:function(){o.hideLoading()}})},getRenters:function(){var e=this,t="Version="+w.Version+"&DeviceId="+w.DeviceId+"&Source="+w.Source+"&AppStoreId="+w.AppStoreId+"&Idfa="+w.Idfa+"&SessionId="+w.SessionId+"&PromotionUrl="+w.PromotionUrl+"&PromotionTemplateId="+w.PromotionTemplateId+"&Longitude="+w.Longitude+"&Latitude="+w.Latitude+"&IpAddress="+w.IpAddress+"&PromotionId="+w.PromotionId+"&PhoneIMSI="+w.PhoneIMSI+"&PhoneMAC="+w.PhoneMAC+"&Extend="+w.Extend+"&OperatorId="+w.Extend+"&userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中"}),o.request({url:D.Renters,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();if(n=T.decrypt(n),n=JSON.parse(n),console.log("实际承租人列表"),console.log(n),n.IsSuccess){for(var r=n.Result,a=0;a<r.length;a++){var i=r[a].DrivingRegTime.split("T")[0];r[a].DrivingRegTime=i}e.setData({renterList:n.Result.FrequentContacts,frequentContactsTips:n.Result.FrequentContactsTips})}},fail:function(){},complete:function(){o.hideLoading()}})}})})),window.define("36",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=e(3),_=e(6),R=i(),L=R.globalData,A=R.url;Page((C={data:{cartInfo:null,dateList:null,timeList:null,pickupTimeList:null,dropoffTimeList:null,pickUpCity:null,dropOffCity:null,pickUpStore:null,dropOffStore:null,pickUpDate:null,dropOffDate:null,pickUpTime:null,dropOffTime:null,rentDays:null,isScrollY:!0,pickUpMonth:null,dropOffMonth:null,placePickUpIndex:null,placeDropOffIndex:null,nowDate:null,fullRentTip:"",UnOpenHolidays:[],HolidayList:[],HolidayTips:"",pickUpLimitDay:189,dropoffLimitDay:365,rentDay:554,showTips:!1},onShow:function(){console.log("onShow-------------"),this.getFullRentTip()},onLoad:function(e){var t=this;console.log("onload");var n=b.getCartData();console.log("系统信息123"),a.showLoading({title:"加载中",mask:!0}),a.getSystemInfo({success:function(e){console.log("系统信息",e),a.hideLoading(),t.setData({mainH:e.windowHeight*(750/e.windowWidth)-154-88-340-118})},fail:function(){a.showToast({title:"加载失败",icon:"none",duration:2e3})}}),t.setData({rentDay:e.rentDay||"",fromType:e.fromType||""}),n&&n.PickupTime&&n.ReturnTime?t.setData({pickUpCity:n.PickupCity,dropOffCity:n.ReturnCity,pickUpStore:n.PickupStore,dropOffStore:n.ReturnStore,StarTime:e.StarTime||"",EndTime:e.EndTime||"",cartInfo:n},(function(){t.getFullRentTip()})):a.showModal({content:"页面加载失败",showCancel:!1,success:function(){a.switchTab({url:"../index/index"})}})},getCurrentTime:function(){var e=this;_.get(A.CurrentTime,"","当前时间").then((function(t){t.IsSuccess?e.setData({nowDate:b.formatStrWithSpace(t.Result.ServerTime)},(function(){e.getLimitTime(),e.TimePickerInit()})):a.showToast({title:t.Message||"请求失败，请重试！",icon:"none"})}))},getLimitTime:function(){var e=this;_.get(A.LimitTime,{},"取还车限制天数").then((function(t){t.IsSuccess&&e.setData({pickUpLimitDay:t.Result.PickUpLimitDay,dropoffLimitDay:t.Result.DropoffLimitDay,rentDay:Number(t.Result.PickUpLimitDay)+Number(t.Result.DropoffLimitDay)},(function(){console.log("rentDay",e.data.rentDay),e.TimePickerInit()}))}))},TimePickerInit:function(){var e=this,t=e.data.cartInfo,n=e.data.rentDay,r=e.data.nowDate;if(t&&n&&r){for(var o=t.PickupStore&&t.PickupStore.OpeningTime,a=t.PickupStore&&t.PickupStore.ClosingTime,i=t.ReturnStore&&t.ReturnStore.OpeningTime,s=t.ReturnStore&&t.ReturnStore.ClosingTime,c=void 0,d=void 0,u=void 0,l=void 0,p=b.createTimes(1),f=b.createTimes(1),h=0;h<p.length;h++)p[h]===o&&(c=h),p[h]===a&&(d=h+1),f[h]===i&&(u=h),f[h]===s&&(l=h+1);var m=String(r).split(" ")[0].split("-")[2],g=b.createAllDates(1-m,Number(n)+Number(m),"",r);if(console.log(e.data.StarTime,e.data.EndTime),e.data.StarTime&&e.data.EndTime)for(var y in g)g[y].forEach((function(t){(t&&t.full<e.data.StarTime.split("T")[0]||t.full>e.data.EndTime.split("T")[0])&&(t.isPickupGray=!0)}));var I=e.data.nowDate.split(" ")[1],v=null,P=null;v=t.PickupStore.OrderAllHourOpen&&I>=t.PickupStore.OpeningTime&&I<=t.PickupStore.ClosingTime?p:p.slice(c,d),P=t.ReturnStore.OrderAllHourOpen&&I>=t.ReturnStore.OpeningTime&&I<=t.ReturnStore.ClosingTime?f:f.slice(u,l),e.data.HolidayList.forEach((function(e){var t=e.day.substring(0,7);g[t].forEach((function(t){t.full&&t.full===e.day.split(" ")[0]&&(t.HolidayText=e.Value)}))})),e.setData({dateobj:g,timeList:b.createTimes(1),pickupTimeList:v,dropoffTimeList:P,dateobjkeys:Object.keys(g),dateobjvalue:e.myValues(g)});var S=t.PickupTime?t.PickupTime.slice(0,7):"",k=t.ReturnTime?t.ReturnTime.slice(0,7):"",T=void 0,C=void 0;g[S]&&g[S].forEach((function(e,n){e.day===t.PickupTime.slice(8,10)&&(T=n)})),g[k]&&g[k].forEach((function(e,n){e.day===t.ReturnTime.slice(8,10)&&(C=n)}));var w=T-7;w=w<0?S:S+"-"+w;var D=b.formatRentDays(t.PickupTime,t.ReturnTime),_=~~(D.d||D).replace("天",""),R=t.PickupTime.split(" ")[1],L=t.ReturnTime.split(" ")[1],A=0;e.data.dropoffTimeList&&e.data.dropoffTimeList.forEach((function(e,t){e===L&&(A=t)}));var U=0;if(e.data.pickupTimeList&&e.data.pickupTimeList.forEach((function(e,t){e===R&&(U=t)})),console.log("rentNum",D,_),e.data.HolidayTips&&_<28)return console.log("执行初始化清空"),void e.setData({pickUpDate:null,dropOffDate:null,pickUpMonth:null,dropOffMonth:null,pickUpdayIndex:null,dropOffDayIndex:null,rentDays:null,showTips:!0,placeDropOffIndex:[A],placePickUpIndex:[U],pickUpTime:R,dropOffTime:L,defaultpickUp:w});console.log("日期符合规定",e.data.fullRentTip),e.setData({HolidayTips:"",pickUpMonth:S,dropOffMonth:k,pickUpdayIndex:T,dropOffDayIndex:C,defaultpickUp:w,pickUpDate:b.createDate(t.PickupTime.split(" ")[0]),dropOffDate:b.createDate(t.ReturnTime.split(" ")[0]),pickUpTime:R,dropOffTime:L,rentDays:b.formatRentDays(t.PickupTime,t.ReturnTime),showTips:Boolean(e.data.fullRentTip)}),e.setData({placeDropOffIndex:[A],dropOffTime:0===A?e.data.dropoffTimeList[0]:e.data.dropOffTime,placePickUpIndex:[U],pickUpTime:0===U?e.data.pickupTimeList[0]:e.data.pickUpTime,showTips:Boolean(e.data.fullRentTip)||Boolean(e.data.HolidayTips)})}},changePickUp:function(e){if(this.data.pickupTimeList&&this.data.dropoffTimeList&&this.data.placePickUpIndex&&this.data.placeDropOffIndex&&(this.setData({placePickUpIndex:e.detail.value}),this.data.pickUpDate&&this.data.dropOffDate)){var t=this.data.pickUpDate.full+" "+this.data.pickupTimeList[this.data.placePickUpIndex[0]],n=this.data.dropOffDate.full+" "+this.data.dropoffTimeList[this.data.placeDropOffIndex[0]];t>=n?this.setData({rentDays:null}):this.setData({rentDays:b.formatRentDays(t,n),pickUpTime:this.data.pickupTimeList[this.data.placePickUpIndex[0]],dropOffTime:this.data.dropoffTimeList[this.data.placeDropOffIndex[0]]})}},changeDropOff:function(e){if(this.data.pickupTimeList&&this.data.dropoffTimeList&&this.data.placePickUpIndex&&this.data.placeDropOffIndex&&(this.setData({placeDropOffIndex:e.detail.value}),this.data.pickUpDate&&this.data.dropOffDate)){var t=this.data.pickUpDate.full+" "+this.data.pickupTimeList[this.data.placePickUpIndex[0]],n=this.data.dropOffDate.full+" "+this.data.dropoffTimeList[this.data.placeDropOffIndex[0]];t>=n?this.setData({rentDays:null}):this.setData({rentDays:b.formatRentDays(t,n),pickUpTime:this.data.pickupTimeList[this.data.placePickUpIndex[0]],dropOffTime:this.data.dropoffTimeList[this.data.placeDropOffIndex[0]]})}},clearChecked:function(){this.setData({pickUpDate:null,dropOffDate:null,pickUpMonth:null,dropOffMonth:null,pickUpdayIndex:null,dropOffDayIndex:null,placePickUpIndex:[0],placeDropOffIndex:[0],pickUpTime:this.data.pickupTimeList?this.data.pickupTimeList[0]:"",dropOffTime:this.data.dropoffTimeList?this.data.dropoffTimeList[0]:"",rentDays:null})},checkedResult:function(){if(this.data.rentDays&&this.data.cartInfo&&this.data.pickUpDate&&this.data.dropOffDate&&this.data.pickUpTime&&this.data.dropOffTime){var e=this.data.cartInfo;e.PickupTime=this.data.pickUpDate.full+" "+this.data.pickUpTime,e.ReturnTime=this.data.dropOffDate.full+" "+this.data.dropOffTime,"step2"===this.data.fromType?L.temporaryCartInfo=e:b.setCartData(e),a.navigateBack()}else console.log("不确定")},handleDayTap:function(e){var n=this,r=this;if(!e.currentTarget.dataset.day.isGray){if(r.data.pickUpDate)if(r.data.pickUpDate&&!r.data.dropOffDate&&e.currentTarget.dataset.day.full>=r.data.pickUpDate.full){var o=r.data.pickUpDate.full+" "+r.data.pickupTimeList[r.data.placePickUpIndex[0]],i=e.currentTarget.dataset.day.full+" "+r.data.dropoffTimeList[r.data.placeDropOffIndex[0]],s=b.formatRentDays(o,i);if((s=s.dh?s.dh:s.replace("天",""))>r.data.dropoffLimitDay)return void a.showToast({icon:"none",title:"预订租期过长，暂不支持预订"});r.setData({dropOffMonth:e.currentTarget.dataset.month,dropOffDate:e.currentTarget.dataset.day,dropOffDayIndex:e.currentTarget.dataset.dayindex})}else{if(e.currentTarget.dataset.day.isPickupGray)return;var c=e.currentTarget.dataset.day.full+" 23:59",d=b.formatRentDays(r.data.nowDate.split(" ")[0]+" 00:00",c);if((d=d.dh?d.dh:d.replace("天",""))-1>r.data.pickUpLimitDay)return void a.showToast({icon:"none",title:"超出可预定取车时间范围"});r.setData({pickUpMonth:e.currentTarget.dataset.month,pickUpDate:e.currentTarget.dataset.day,pickUpdayIndex:e.currentTarget.dataset.dayindex,dropOffMonth:null,dropOffDate:null,dropOffDayIndex:null,rentDays:null,defaultpickUp:""})}else{if(e.currentTarget.dataset.day.isPickupGray)return;var u=e.currentTarget.dataset.day.full+" 23:59",l=r.data.nowDate.split(" ")[0]+" 00:00",p=b.formatRentDays(l,u);if((p=p.dh?p.dh:p.replace("天",""))-1>r.data.pickUpLimitDay)return void a.showToast({icon:"none",title:"超出可预定取车时间范围"});r.setData({pickUpMonth:e.currentTarget.dataset.month,pickUpDate:e.currentTarget.dataset.day,pickUpdayIndex:e.currentTarget.dataset.dayindex,dropOffMonth:null,dropOffDate:null,rentDays:null,defaultpickUp:""})}if(r.data.pickUpDate&&r.data.dropOffDate){var f=r.data.pickUpDate.full+" "+r.data.pickupTimeList[r.data.placePickUpIndex[0]],h=r.data.dropOffDate.full+" "+r.data.dropoffTimeList[r.data.placeDropOffIndex[0]];if(f>=h)r.setData({rentDays:null});else{var m=function(){var o=r.data.HolidayTips,a=b.formatRentDays(f,h);if((a.d||a).replace("天","")>=28)return r.setData({rentDays:a}),{v:void 0};for(var i=0;i<r.data.UnOpenHolidays.length;i++){var s=r.data.UnOpenHolidays[i],c=b.formatStrWithSpace(s.FromDate),d=b.formatStrWithSpace(s.ToDate);if(!(f>d||h<c))return o=b.createDate(c.split(" ")[0]).simply+"至"+b.createDate(d.split(" ")[0]).simply+"的租期暂未开放，请调至其他时间",r.setData({dropOffMonth:e.currentTarget.dataset.month,dropOffDate:e.currentTarget.dataset.day,dropOffDayIndex:e.currentTarget.dataset.dayindex,rentDays:a}),t((function(){n.setData(D({showTips:Boolean(o)||r.data.showTips,HolidayTips:o,rentDays:null,pickUpDate:null,dropOffDate:null,pickUpMonth:null,dropOffMonth:null,pickUpdayIndex:null,dropOffDayIndex:null},"rentDays",null))}),100),{v:void 0};r.setData({rentDays:a})}}();if("object"===(void 0===m?"undefined":w(m)))return m.v}}}}},D(C,"getLimitTime",(function(){var e=this;_.get(A.LimitTime,{},"取还车限制天数").then((function(t){t.IsSuccess&&e.setData({pickUpLimitDay:t.Result.PickUpLimitDay,dropoffLimitDay:t.Result.DropoffLimitDay,rentDay:Number(t.Result.PickUpLimitDay)+Number(t.Result.DropoffLimitDay)},(function(){console.log("rentDay",e.data.rentDay),e.TimePickerInit()}))}))})),D(C,"myValues",(function(e){if(null!=e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}})),D(C,"getFullRentTip",(function(){var e=this,t=e.data.cartInfo.PickupCity.Id;if(t){var n={cityId:t};_.get(A.GetFullRentTip,n,"获取减免提示").then((function(t){if(t.IsSuccess){var n=b.getCartData(),r=b.formatRentDays(n.PickupTime,n.ReturnTime);R.ehiSensors.track("RentPromotionTip",{vip_no:L.User.UserId,pickup_cityname:n.PickupCity.Name,rental_days:"string"==typeof r?Number(r.replace("天","")):r.dh,from_date:n.PickupTime,to_date:n.ReturnTime,CartypeId:"",renttip_text:t.Result||"",text_position:"时间控件"}),e.setData({fullRentTip:t.Result},(function(){e.getHolidayTips(),e.getHolidayList()}))}}))}})),D(C,"getHolidayTips",(function(){var e=this;_.get(A.HolidayTips,"","节假日提示").then((function(t){if(t.IsSuccess&&t.Result.UnOpenHolidays){var n=e.data.cartInfo,r=n.PickupTime,o=n.ReturnTime,a="";t.Result.UnOpenHolidays.forEach((function(e){var t=b.formatStrWithSpace(e.FromDate),n=b.formatStrWithSpace(e.ToDate);r>n||o<t||(a=b.createDate(t.split(" ")[0]).simply+"至"+b.createDate(n.split(" ")[0]).simply+"的租期暂未开放，请调至其他时间")})),e.setData({UnOpenHolidays:t.Result.UnOpenHolidays,HolidayTips:a},(function(){e.getCurrentTime()}))}}))})),D(C,"closeTips",(function(){this.setData({showTips:!1})})),D(C,"getHolidayList",(function(){var e=this;_.get(A.CalendarVacation,"","节假日展示").then((function(t){t.IsSuccess&&(t.Result.forEach((function(e){e.day=b.formatStrDate(e.TimeStamp)})),e.setData({HolidayList:t.Result},(function(){e.TimePickerInit()})))}))})),C))})),window.define("38",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=e(6),w=a(),D=w.globalData,b=w.url;Page({data:{pageName:"carDetail",carTypeId:"",car:null,basicInfoRaw:null,basicInfo:[],cartInfo:"",config:[],peizhiIndex:0,fromType:"carDetail",totalNum:0,floorPrice:0,rentDay:189,DiffCityFeeText:""},onLoad:function(e){var t=this;e.cartypeId&&(t.setData({carTypeId:e.cartypeId}),t.getBasicInfo(e.cartypeId,0)),e.fromType&&t.setData({fromType:e.fromType||""}),t.setData({storeId:e.storeId||0,cityId:e.cityId||0,pickUpTime:e.pTime?t.formateTime(Number(e.pTime)):"",dropOffTime:e.dTime?t.formateTime(Number(e.dTime)):""},(function(){t.getInitCart()})),console.log("时间戳",(new Date).getTime())},onShow:function(){var e=T.getCartData();e&&(this.cartInfoInit(e),this.getDiffCityFee(e))},formateTime:function(e){if(!e)return"";var t=new Date(e);console.log("data",t);var n=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()+" ",a=t.getHours()+":00";return console.log("格式化日期",n+r+o+a),n+r+o+a},getInitCart:function(e,t,n,r,a,i,s){var c=this,d={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{IsBatch:e||!1,SpecifyStoreId:c.data.storeId||0,SpecifyCityId:c.data.cityId||0,Logitude:i||"0",Latitude:s||"0",SpecifyPickupTime:c.data.pickUpTime||"",SpecifyReturnTime:c.data.dropOffTime||""}},u=T.postParamEncrypt(D.md5_key,d);console.log("初始化入参",d),o.showLoading({title:"加载中",mask:!0}),o.request({url:b.BookingInit,data:{key:u.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:u.auth,AppIdentity:D.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();if(t=T.decrypt(t),t=JSON.parse(t),console.log("初始化"),console.log(t),t.IsSuccess){if(t.Result.DataList){var n=t.Result.DataList;c.setData({serviceHour:n.filter((function(e){return 1==e.Type}))[0].Value,cityCount:n.filter((function(e){return 2==e.Type}))[0].Value,outletCount:n.filter((function(e){return 3==e.Type}))[0].Value,carTypeCount:n.filter((function(e){return 4==e.Type}))[0].Value})}var r={PickupTime:T.formatStrWithSpace(t.Result.PickupTime),ReturnTime:T.formatStrWithSpace(t.Result.ReturnTime),PickupCity:t.Result.DefaultCity,PickupStore:t.Result.DefaultStore,IsPickupService:!1,PickupService:"",ReturnCity:t.Result.DefaultCity,ReturnStore:t.Result.DefaultStore,IsReturnService:!1,ReturnService:"",IsBatch:!1,IsModifyOrder:!1,UserId:"",OrderId:"",ChannelId:"",EdmId:"",EnterpriseId:"",IsEnterpriseUse:!1,CorpUid:"",Ldata:"",PromotionUrl:"",Cartype:"",PaymentType:5,PriceType:1,OrderType:"1"};T.setCartData(r),c.cartInfoInit(r)}},fail:function(){},complete:function(){o.hideLoading()}})},cartInfoInit:function(e){this.setData({pickUpCity:e.PickupCity,dropOffCity:e.ReturnCity,pickUpStore:e.PickupStore,dropOffStore:e.ReturnStore,pickUpDate:T.createDate(e.PickupTime.split(" ")[0]),dropOffDate:T.createDate(e.ReturnTime.split(" ")[0]),pickUpTime:e.PickupTime.split(" ")[1],dropOffTime:e.ReturnTime.split(" ")[1],rentDays:T.formatRentDays(e.PickupTime,e.ReturnTime),cartInfo:e}),console.log("初始化门店城市",e),D.GetStoreOpen=e.PickupStore.OpeningTime,D.GetStoreClose=e.PickupStore.ClosingTime,D.ReStoreOpen=e.ReturnStore.OpeningTime,D.ReStoreClose=e.ReturnStore.ClosingTime;for(var t=T.createTimes(1),n=T.createTimes(1),r=void 0,o=void 0,a=void 0,i=void 0,s=0;s<t.length;s++)t[s]==D.GetStoreOpen&&(r=s),t[s]==D.GetStoreClose&&(o=s+1),n[s]==D.ReStoreOpen&&(a=s),n[s]==D.ReStoreClose&&(i=s+1);this.getStepPriceInfo(),this.setData({getTimeList:t.slice(r,o),reTimeList:n.slice(a,i)})},getConfig:function(e,t,n){var r=this,a={cartypeId:e};C.get(b.CarTypeConfig,a,"配置详情").then((function(e){if(e.IsSuccess||!e.Message){if(e.IsSuccess){var a=r.data.config.concat({index:n,title:t,ConfigItem:e.Result.ItemList});a.sort((function(e,t){return e.index-t.index})),r.setData({config:a})}}else o.showToast({title:e.Message,icon:"none"})}))},getStepPriceInfo:function(){var e=this,t=e.data.cartInfo;if(t){var n={carTypeId:e.data.carTypeId,pickupTime:t.PickupTime,dropoffTime:t.ReturnTime,channelId:D.ChannelId,enterPriseId:"",orderId:"",orderPriceType:1,orderUsageType:0,pickupAddress:{cityId:t.PickupStore.CityId,latitude:t.PickupStore.Latitude,longitude:t.PickupStore.Longitude,storeId:t.PickupStore.Id},dropoffAddress:{cityId:t.ReturnStore.CityId,latitude:t.ReturnStore.Latitude,longitude:t.ReturnStore.Longitude,storeId:t.ReturnStore.Id}},r=T.postParamEncrypt(D.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:b.GetPriceInfo,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("车型日均价"),console.log(n),n.IsSuccess&&n.Result.FloorPrice?e.setData({floorPrice:n.Result.FloorPrice,car:n.Result}):(e.setData({floorPrice:"",car:""}),9830003!=n.ErrorCode&&o.showToast({title:n.Message,icon:"none"}))},fail:function(){},complete:function(){o.hideLoading()}})}},getCurrentTime:function(){var e=this;C.get(b.CurrentTime,"","当前时间").then((function(t){t.IsSuccess&&t.Result.ServerTime?e.verifyStock(T.formatStrWithSpace(t.Result.ServerTime)):o.showToast({title:t.Message||"请求失败，请重试！",icon:"none"})}))},verifyStock:function(e){var t=this,n=t.data.cartInfo;if(n){var r={carTypeId:t.data.carTypeId,pickupTime:n.PickupTime,dropoffTime:n.ReturnTime,channelId:D.ChannelId,enterPriseId:"",orderId:"",orderPriceType:t.data.car.BookingPrice.PriceType,orderUsageType:0,pickupAddress:{cityId:n.PickupStore.CityId,latitude:n.PickupStore.Latitude,longitude:n.PickupStore.Longitude,storeId:n.PickupStore.Id},dropoffAddress:{cityId:n.ReturnStore.CityId,latitude:n.ReturnStore.Latitude,longitude:n.ReturnStore.Longitude,storeId:n.ReturnStore.Id},customCurrentTime:e,sourcePlatform:D.OrderFrom},a=T.postParamEncrypt(D.md5_key,r);o.showLoading({title:"加载中",mask:!0}),o.request({url:b.StockVerifyV2,data:{key:a.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:a.auth,AppIdentity:D.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("验证库存"),console.log(n),n.IsSuccess&&n.Result?t.chooseCar():o.showToast({title:n.Message||"车辆已售罄",icon:"none"})},fail:function(){},complete:function(){o.hideLoading()}})}},switchChange:function(e){var t=T.getCartData();t&&(console.log("switchchange",e.detail.checked,t),!1===e.detail.checked&&(t.ReturnCity=t.PickupCity?t.PickupCity:"",t.ReturnStore=t.PickupStore?t.PickupStore:"",this.setData({dropOffCity:this.data.pickUpCity?this.data.pickUpCity:"",dropOffStore:this.data.pickUpStore?this.data.pickUpStore:""})),this.setData({isDiffDropOff:e.detail.checked}),T.setCartData(t),this.getDiffCityFee(t))},getBasicInfo:function(e,t){var n=this,r={cartypeId:e,cargroupId:t};C.get(b.CarTypeBasicInfo,r,"车辆详情").then((function(e){if(e.IsSuccess||!e.Message){if(e.IsSuccess){var t=0,r=[];e.Result.CarTypeInfoList.length>0&&e.Result.CarTypeInfoList.forEach((function(o,a){n.getConfig(o.CarType,o.Name,a);var i=e.Result.VideoList.filter((function(e){return o.CarType===e.CarTypeId}));i.length>0?(o.Video=i[0],i[0].LongMovieUrlFifteen&&(t+=1)):o.Video=null,i[0].HeadImageUrls&&(t+=i[0].HeadImageUrls.length),r.push(o)})),n.setData({basicInfoRaw:e.Result,basicInfo:r,totalNum:t})}}else o.showToast({title:e.Message,icon:"none"})}))},handleTabClick:function(e){var t=e.currentTarget.dataset.index;this.setData({peizhiIndex:t})},chooseCar:function(){var e=this.data.car,t=e&&e.BookingPrice;this.validateCartData(e,t),D.Token?o.navigateTo({url:"../orderConfirm/orderConfirm?fromType="+this.data.fromType}):o.redirectTo({url:"../../my/loginType/loginType?fromType=stockPriceList"})},carVideoTap:function(e){var t=e.currentTarget.dataset.typeid;o.navigateTo({url:"../carVideos/carVideos?fromType=step2&selCarId=["+t+"]&source=selectCar&fromType=车辆详情"})},validateCartData:function(e,t){var n=T.getCartData();console.log("===================="),console.log(e),n.Cartype={BrandId:0,CarTypeId:this.data.carTypeId,Emission:e.CarTypeInfo.Emission,EmissionUnit:e.CarTypeInfo.EmissionUnit,FloorPrice:e.FloorPrice,GearId:e.CarTypeInfo.GearId,GearName:e.CarTypeInfo.GearName,IsChangeStore:!1,IsEnjoyCar:e.IsHiCarEnjoy,LevelId:0,LevelName:e.CarTypeInfo.LevelName,LocationId:0,ManagerId:0,MaxPassenger:e.CarTypeInfo.MaxPassenger,Name:e.CarTypeInfo.Name,SmallImagePath:this.data.basicInfo[0].SmallImagePath||"",SortType:e.CarTypeInfo.SortType,StructureName:e.CarTypeInfo.StructureName,UserLevel:e.CarTypeInfo.UserLevel,GroupId:0,GroupDescription:""},n.PriceType=t.PriceType,n.OrderType=e.IsHiCarEnjoy?"7":"1",T.setCartData(n)},chooseStore:function(e){var t=~~e.currentTarget.dataset.type,n=e.currentTarget.dataset.cityId,r=e.currentTarget.dataset.cityName,a=t?"Y":"N";console.log(n,r),o.navigateTo({url:"/pages/booking/shopInfoPage/shopInfoPage?"+(n?"cityId="+n:"")+"&cityName="+r+"&isReturn="+a+"&fromType="+this.data.fromType})},chooseCity:function(e){if("carpoolStep1"!==this.data.fromType){var t=~~e.currentTarget.dataset.type?"Y":"N";o.navigateTo({url:"/pages/booking/cityInfoPage/cityInfoPage?isReturn="+t+"&fromType="+this.data.fromType})}},showDatePicker:function(){T.getCartData()&&(this.data.pickUpCity?this.data.dropOffCity?this.data.pickUpStore&&this.data.pickUpStore.Id?this.data.dropOffStore&&this.data.dropOffStore.Id?o.navigateTo({url:"/pages/booking/datePick/datePick?rentDay="+this.data.rentDay+"&fromType="+this.data.fromType}):o.showToast({title:"请选择还车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择还车城市",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车城市",duration:2e3,icon:"none",success:function(e){}}))},getDiffCityFee:function(e){var t=this;if(e.PickupStore.Id&&e.ReturnStore.Id){var n={PickupTime:e.PickupTime,PickupStoreId:e.PickupStore.Id||0,PickupCityId:e.PickupCity.Id,DropoffTime:e.ReturnTime,DropoffStoreId:e.ReturnStore.Id||0,DropoffCityId:e.ReturnCity.Id,UserId:D.User.UserId},r=T.postParamEncrypt(D.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:b.DiffCityFee,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("是否需要提示异地费"),console.log(n),n.IsSuccess&&t.setData({DiffCityFeeText:n.Result||""})},fail:function(){},complete:function(){o.hideLoading()}})}else this.setData({DiffCityFeeText:""})},goStep1:function(){D.toStep1FromType="carDetail",o.reLaunch({url:"/pages/booking/bookIndex/bookIndex"})},goStep3:function(){var e=T.getCartData();this.data.pickUpCity?this.data.dropOffCity?this.data.pickUpStore&&this.data.pickUpStore.Id?this.data.dropOffStore&&this.data.dropOffStore.Id?e&&this.data.floorPrice?this.submitStep1(e):o.showToast({title:"亲，当前时段部分车型已租满，可延长或缩短用车时间搜索哦~",icon:"none"}):o.showToast({title:"请选择还车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车门店",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择还车城市",duration:2e3,icon:"none",success:function(e){}}):o.showToast({title:"请选择取车城市",duration:2e3,icon:"none",success:function(e){}})},submitStep1:function(e){var t=this;if(e.UserId=D.User.UserId||"",t.data.pickUpCity)if(t.data.dropOffCity)if(t.data.pickUpStore&&t.data.pickUpStore.Id)if(t.data.dropOffStore&&t.data.dropOffStore.Id){if(e){var n={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{DropoffCityName:e.ReturnCity.Name,PickupCityName:e.PickupCity.Name,PickupDeliver:e.PickupService,DropoffDeliver:e.ReturnService,PickupTime:e.PickupTime,PickupStoreId:e.PickupStore.Id,PickupCityId:e.PickupStore.CityId,DropoffTime:e.ReturnTime,DropoffStoreId:e.ReturnStore.Id,DropoffCityId:e.ReturnStore.CityId,UserId:e.UserId,OrderId:e.OrderId}},r=T.postParamEncrypt(D.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:b.Step1SubmitValidate,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("去选车"),console.log(n),1==n.IsSuccess?t.getCurrentTime():n.IsSuccess||o.showToast({title:n.Message,icon:"none"})},fail:function(){},complete:function(){o.hideLoading()}})}}else o.showToast({title:"请选择还车门店",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择取车门店",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择还车城市",duration:2e3,icon:"none",success:function(e){}});else o.showToast({title:"请选择取车城市",duration:2e3,icon:"none",success:function(e){}})}})})),window.define("40",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"my",user:null,cardCouponCount:null,hasLogin:!1,smsSwitch:!1},onShow:function(){o.setPageInfo({title:"我的一嗨",keywords:"一嗨租车,一嗨,自驾,出行,用车,租车,租车订单,租车违章,登录,优惠券,我的钱包,发票管理",description:"登录一嗨账号，点击查看自驾租车订单信息、违章记录、优惠券、积分、余额、发票等信息",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}});var e=this;o.getStorage({key:"User",success:function(t){console.log("信息列表"),console.log(t),t.data&&(w.User=t.data,e.setData({hasLogin:!0}),e.getUser(),e.getCardCouponCount(),e.getSmsNotification())}})},getSmsNotification:function(){var e=this,t="userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.SmsNotification+n.des,data:{},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("营销性短信息"),console.log(n),n.IsSuccess||o.showModal({title:"提示",content:n.Message,showCancel:!1}),e.setData({smsSwitch:n&&n.Result&&n.Result.EnableMarketingSms})},fail:function(){},complete:function(){o.hideLoading()}})},updateSmsNotification:function(e){var t=e.detail.checked,n=this,r={userId:w.User.UserId,enableMarketingSms:t},a=T.postParamEncrypt(w.md5_key,r);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.SmsNotificationUpdate,data:{key:a.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:a.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var r=e.data.Result.toString();r=T.decrypt(r),r=JSON.parse(r),console.log("更新营销性短信息"),console.log(r),r.IsSuccess||o.showModal({title:"提示",content:r.Message,showCancel:!1}),n.setData({smsSwitch:t})},fail:function(){},complete:function(){o.hideLoading()}})},getUser:function(){var e=this,t="userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.UserBase,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("基本信息"),console.log(n),n.IsSuccess&&e.setData({user:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})},getCardCouponCount:function(){var e=this,t="userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.CardCouponCount,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("卡券数量"),console.log(n),n.IsSuccess&&n.Result&&e.setData({cardCouponCount:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})},viewLabel:function(e){var t=e.currentTarget.dataset.type;if(this.data.hasLogin)switch(t){case"balance":o.navigateTo({url:"../balance/balance"});break;case"points":o.navigateTo({url:"../points/points"});break;case"promotion":o.navigateTo({url:"../promotion/promotion"});break;case"order":o.switchTab({url:"../orderList/orderList"});break;case"illegally":o.navigateTo({url:"../illegally/illegally"});break;case"renter":o.navigateTo({url:"../renter/renter"})}else o.showModal({title:"提示",content:"您还没有登录，请登录后再试",showCancel:!1,success:function(){}})},logIn:function(){o.navigateTo({url:"../loginType/loginType"})},logOut:function(){var e=this;o.showModal({title:"提示",content:"是否退出登录？",cancelText:"再看看",confirmText:"确认退出",success:function(t){t.confirm&&o.removeStorage({key:"User",success:function(t){e.logIn(),e.setData({hasLogin:!1,user:null,cardCouponCount:null}),w.Token="",w.User={}}})}})},servicePhoneCall:function(e){o.makePhoneCall({phoneNumber:"400-888-6608"})}})})),window.define("42",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"loginType",fromType:"",isReaded:!1},onLoad:function(e){e.fromType&&this.setData({fromType:e.fromType})},loginWithBaidu:function(e){var t=this,n=void 0,r=void 0,a=void 0;o.canIUse("getLoginCode")&&o.getLoginCode({success:function(i){if(n=i.code,"getPhoneNumber:fail auth deny"===e.detail.errMsg)o.showModal({title:"提示",content:"您已拒绝授权获取手机号码，请重新点击并授权登录。",showCancel:!1});else{if(r=e.detail.encryptedData,a=e.detail.iv,!t.data.isReaded)return void o.showToast({icon:"none",title:"请先阅读规则说明"});var s={Data:r,Iv:a,Code:n,ChannelId:w.ChannelId},c=T.postParamEncrypt(w.md5_key,s);o.showLoading({title:"登录中",mask:!0}),o.request({url:D.LoginPassBaiDu,data:{key:c.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:c.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("联合登录：getLoginCode",n),n.IsSuccess?(o.setStorage({key:"User",data:n.Result,success:function(){}}),n.Result.UserId&&(C.ehiSensors.login(n.Result.UserId),C.ehiSensors.registerApp({vip_no:n.Result.UserId})),w.User=n.Result,w.Token=n.Result.Token,"stockPriceList"!=t.data.fromType?"newUserCoupon"!=t.data.fromType?o.reLaunch({url:"../myIndex/myIndex"}):o.navigateBack({}):o.redirectTo({url:"../../booking/orderConfirm/orderConfirm"})):o.showToast({icon:"none",title:n.Message})},fail:function(){o.showToast({icon:"none",title:"登录失败，请稍候再试"})},complete:function(){o.hideLoading()}})}}})},loginWithEhi:function(){this.data.fromType?o.redirectTo({url:"../login/login?fromType="+this.data.fromType}):o.redirectTo({url:"../login/login"})},agreeChange:function(){this.setData({isReaded:!this.data.isReaded})},openWV:function(e){var t=e.target.dataset.url;o.navigateTo({url:"../../booking/focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(t)})}})})),window.define("44",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url,_=59,R=void 0;Page({data:{pageName:"login",fromType:"",verityButton:"get",codeStr:"获取验证码",fastPhone:"",fastCode:"",isReaded:!1},onLoad:function(e){e.fromType&&this.setData({fromType:e.fromType})},fastPhoneInput:function(e){this.setData({fastPhone:e.detail.value})},fastCodeInput:function(e){this.setData({fastCode:e.detail.value})},verityPhone:function(e){return/^\d{7,15}$/.test(e)},getVerityCode:function(e){var n=this;if(n.verityPhone(n.data.fastPhone)){n.setData({verityButton:"countDown"}),clearTimeout(R),_=59,function e(n){if(n.setData({codeStr:_+"秒后重发"}),0==_)return n.setData({verityButton:"get",codeStr:"获取验证码"}),void(_=59);_--,R=t((function(){e(n)}),1e3)}(n);var r={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{AuthCode:"",Type:3,MobilePhone:n.data.fastPhone}},o=C.postParamEncrypt(D.md5_key,r);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.GetVerifyCode,data:{key:o.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:o.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var t=e.data.Result.toString();t=C.decrypt(t),(t=JSON.parse(t)).IsSuccess||(clearTimeout(R),_=59,n.setData({verityButton:"get",codeStr:"获取验证码"}),a.showToast({icon:"none",title:t.Message}))},fail:function(){clearTimeout(R),_=59,n.setData({verityButton:"get",codeStr:"获取验证码"})},complete:function(){a.hideLoading()}})}else a.showToast({icon:"none",title:"请输入正确手机号"})},loginButton:function(){var e=this,t=e.data.fastPhone,n=e.data.fastCode;if(""!==t)if(e.verityPhone(t))if(""!==n)if(e.data.isReaded){var r={LoginName:t,Password:n,Type:2,ChannelId:D.ChannelId},o=C.postParamEncrypt(D.md5_key,r);a.showLoading({title:"登录中",mask:!0}),a.request({url:b.LoginPass,data:{key:o.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:o.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n);var r=(n=JSON.parse(n)).Result;console.log("登录",n),n.IsSuccess?r.UserVerifyInfo?a.showModal({title:"提示",content:"当前账号长时间未登录，请联系客服",confirmText:"联系客服",success:function(e){e.confirm&&a.makePhoneCall({phoneNumber:"400-888-6608"})}}):r.UserInfo&&e.LoginComplete(r.UserInfo):a.showToast({icon:"none",title:n.Message})},fail:function(){a.showToast({icon:"none",title:"登录失败，请稍候再试"})},complete:function(){a.hideLoading()}})}else a.showToast({icon:"none",title:"请先阅读规则说明"});else a.showToast({icon:"none",title:"验证码不能为空"});else a.showToast({icon:"none",title:"请输入正确手机号"});else a.showToast({icon:"none",title:"手机号码不能为空"})},LoginComplete:function(e){a.setStorage({key:"User",data:e,success:function(){}}),e.UserId&&(w.ehiSensors.login(e.UserId),w.ehiSensors.registerApp({vip_no:e.UserId})),D.User=e,D.Token=e.Token,"stockPriceList"!=this.data.fromType?"newUserCoupon"!=this.data.fromType?a.reLaunch({url:"../myIndex/myIndex"}):a.navigateBack({}):a.redirectTo({url:"../../booking/orderConfirm/orderConfirm"})},agreeChange:function(){this.setData({isReaded:!this.data.isReaded})},openWV:function(e){var t=e.target.dataset.url;a.navigateTo({url:"../../booking/focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent(t)})}})})),window.define("46",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"balance",userBalance:null},onLoad:function(){w.Token&&this.getUserBalance()},onShow:function(){o.setPageInfo({title:"用户余额",keywords:"一嗨租车,一嗨,余额,用户余额,钱包",description:"查看一嗨租车个人账户余额情况",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}})},getUserBalance:function(){var e=this,t="Version="+w.Version+"&DeviceId="+w.DeviceId+"&Source="+w.Source+"&AppStoreId="+w.AppStoreId+"&Idfa="+w.Idfa+"&SessionId="+w.SessionId+"&PromotionUrl="+w.PromotionUrl+"&PromotionTemplateId="+w.PromotionTemplateId+"&Longitude="+w.Longitude+"&Latitude="+w.Latitude+"&IpAddress="+w.IpAddress+"&PromotionId="+w.PromotionId+"&PhoneIMSI="+w.PhoneIMSI+"&PhoneMAC="+w.PhoneMAC+"&Extend="+w.Extend+"&OperatorId="+w.Extend+"&userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.UserBalance,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("余额信息"),console.log(n),n.IsSuccess&&e.setData({userBalance:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})}})})),window.define("48",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=e(22),w=a(),D=w.globalData,b=w.url;Page({data:{pageName:"points",userPoints:null},onLoad:function(){D.Token&&(this.getUserPoints(),this.getPointsRule())},onShow:function(){o.setPageInfo({title:"用户积分",keywords:"一嗨租车,一嗨,租车积分,用户积分,会员,会员积分",description:"查看一嗨账户积分情况和积分规则说明",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}})},getUserPoints:function(){var e=this,t="Version="+D.Version+"&DeviceId="+D.DeviceId+"&Source="+D.Source+"&AppStoreId="+D.AppStoreId+"&Idfa="+D.Idfa+"&SessionId="+D.SessionId+"&PromotionUrl="+D.PromotionUrl+"&PromotionTemplateId="+D.PromotionTemplateId+"&Longitude="+D.Longitude+"&Latitude="+D.Latitude+"&IpAddress="+D.IpAddress+"&PromotionId="+D.PromotionId+"&PhoneIMSI="+D.PhoneIMSI+"&PhoneMAC="+D.PhoneMAC+"&Extend="+D.Extend+"&OperatorId="+D.Extend+"&userId="+D.User.UserId,n=T.getParamEncrypt(D.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:b.UserPoints,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:n.auth,AppIdentity:D.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log("积分信息"),console.log(n),n.IsSuccess&&e.setData({userPoints:n.Result})},fail:function(){},complete:function(){o.hideLoading()}})},getPointsRule:function(){var e=this,t=T.getParamEncrypt(D.md5_key,"id=40");o.showLoading({title:"加载中",mask:!0}),o.request({url:b.HelpCenterRuleInfo,data:{query:t.des},method:"GET",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:t.auth,AppIdentity:D.des_identity},success:function(t){var n=t.data.Result.toString();n=T.decrypt(n,!0),n=JSON.parse(n),console.log("积分规则"),console.log(n),e.setData({content:C.bdParse("article","html",n.Result.Content,e)})},fail:function(){},complete:function(){o.hideLoading()}})}})})),window.define("50",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url;Page({data:{pageName:"promotion",AllList:[],SelfList:[],ChauffeurList:[],TripList:[],promotionCode:"",promotionTabType:"a",showRuleModal:!1,ruleText:"",promotion:null},onShow:function(){a.setPageInfo({title:"优惠券",keywords:"一嗨租车,一嗨,租车优惠券,租车优惠,租车折扣",description:"查看一嗨租车账户优惠券情况，包括未使用、已使用、已过期优惠券",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}});D.Token&&this.getPromotion()},getPromotion:function(){var e=this,t="userId="+D.User.UserId+"&usedStatus=1",n=C.getParamEncrypt(D.md5_key,t);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.UserPromotion,method:"GET",data:{query:n.des},header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:n.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n),n=JSON.parse(n),console.log("优惠券列表"),console.log(n);var r=[],o=[],i=[],s=[],c=[];n.Result.AllList.length>0&&n.Result.AllList.forEach((function(e){e.ExpiredTime&&(e.ExpiredTime=C.formatStrWithSpace(e.ExpiredTime).split(" ")[0]),r.push(e),1===e.Type&&o.push(e),3===e.Type&&i.push(e),2===e.Type&&s.push(e),4===e.Type&&c.push(e)})),e.setData({AllList:r,SelfList:o,ChauffeurList:i,InternationalList:s,TripList:c})},fail:function(){},complete:function(){a.hideLoading()}})},tabSwitch:function(e){var t=e.target.dataset.id;this.setData({promotionTabType:t})},_getPromotionType:function(e){var t="";switch(e.PromotionType){case 0:t="专享券";break;case 1:t="折";break;case 2:t="元";break;case 3:t="天";break;case 4:t="次"}return e.PromotionType>0?e.PromotionTypeValue+t:t},showRule:function(e){var t=e.currentTarget.dataset.promotion;this.setData({showRuleModal:!0,ruleText:t.Rule,promotion:t})},hideRule:function(){this.setData({showRuleModal:!1})},cancelBubble:function(e){e.cancelBubble=!0},choosePromotion:function(){a.switchTab({url:"../../booking/bookIndex/bookIndex"})},promotionCodeInput:function(e){this.setData({promotionCode:e.detail.value})},bindPromotionCode:function(){var e=this;if(""!=e.data.promotionCode){var n={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{UserId:D.User.UserId,Code:e.data.promotionCode}},r=C.postParamEncrypt(D.md5_key,n);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.BindListPromotionCode,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(n){a.hideLoading();var r=n.data.Result.toString();r=C.decrypt(r),r=JSON.parse(r),console.log("绑定优惠券"),console.log(r),r.IsSuccess?(e.setData({promotionCode:""}),a.showToast({title:"绑定成功",duration:2e3,success:function(){t((function(){e.getPromotion()}),2e3)}})):a.showToast({title:r.Message,icon:"none",duration:2e3,success:function(e){}})},fail:function(){a.hideLoading()}})}else a.showToast({title:"请输入优惠编码",icon:"none",duration:2e3,success:function(e){}})}})})),window.define("52",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"orderList",jumpUrl:"",orderList:[],pageIndex:1,pageSize:10,status:1,isLogin:!1},onShow:function(){o.setPageInfo({title:"自驾订单",keywords:"一嗨租车,一嗨,订单,订单管理,修改订单,取消订单,预约中,租赁中,已完成,已取消",description:"查看租车订单状况包括预约中、租赁中、已完成、已取消的订单，点击订单可以进行修改订单信息或取消订单等操作",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}});w.Token?this.setData({isLogin:!0}):this.setData({isLogin:!1}),this.setData({orderList:[]}),(w.User.UserId||w.ChannelId)&&this.getOrderList()},onUnload:function(){"orderDetail"!=this.data.jumpUrl&&o.switchTab({url:"../myIndex/myIndex"})},onHide:function(){this.setData({pageIndex:1,pageSize:10})},changeOrderStatus:function(e){var t=Number(e.currentTarget.dataset.status);this.setData({status:t,pageIndex:1,pageSize:10,orderList:[]}),this.getOrderList()},orderDetail:function(e){var t=e.currentTarget.dataset.id;this.setData({jumpUrl:"orderDetail"}),o.navigateTo({url:"../orderDetail/orderDetail?orderId="+this.data.orderList[t].Id})},getOrderList:function(){var e=this,t="userId="+w.User.UserId+"&channelId="+w.ChannelId+"&enterpriseId="+w.User.AccountNo+"&pageIndex="+e.data.pageIndex+"&pageSize="+e.data.pageSize+"&status="+e.data.status,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.GetOrderList,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();if(n=T.decrypt(n),n=JSON.parse(n),console.log("订单列表"),console.log(n),n.IsSuccess){if(0===n.Result.Items.length)return;for(var r in n.Result.Items)n.Result.Items[r].PickupTime=T.formatStrWithSpace(n.Result.Items[r].PickupTime),n.Result.Items[r].DropoffTime=T.formatStrWithSpace(n.Result.Items[r].DropoffTime);e.setData({orderList:e.data.orderList.concat(n.Result.Items)})}},fail:function(){},complete:function(){o.hideLoading()}})},loadMore:function(){if(!(this.data.orderList.length<10)){var e=this.data.pageIndex+1;this.setData({pageIndex:e}),this.getOrderList()}},toLogin:function(){o.navigateTo({url:"../loginType/loginType?fromType=orderList"})}})})),window.define("54",(function(e,t,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url;Page({data:{pageName:"orderDetail",orderId:"",orderDetail:null,timer:null,CancelTime:null,CancelTimeTips:null},onLoad:function(e){this.setData({orderId:e.orderId}),this.data.orderId&&D.Token&&this.getOrderDetail()},onShow:function(){},onHide:function(){clearInterval(this.data.timer)},onUnload:function(){clearInterval(this.data.timer)},getOrderDetail:function(){var e=this,t={OrderId:e.data.orderId,UserId:D.User.UserId,PhoneNumber:D.User.PhoneNumber},r=C.postParamEncrypt(D.md5_key,t);console.log(t,"---------------"),a.showLoading({title:"加载中",mask:!0}),a.request({url:b.GetOrderDetail,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var r=t.data.Result.toString();r=C.decrypt(r),r=JSON.parse(r),console.log("订单详情"),console.log(r),r.IsSuccess?(r.Result.PickupTime=C.formatStrWithSpace(r.Result.PickupTime),r.Result.DropoffTime=C.formatStrWithSpace(r.Result.DropoffTime),e.setData({orderDetail:r.Result,CancelTimeTips:r.Result.CancelTimeTips,CancelTime:r.Result.CancelTime},(function(){r.Result.CancelTime>0&&(clearInterval(e.data.timer),e.data.timer=n((function(){var t=e.data.CancelTime-1;t<=0?(clearInterval(e.data.timer),a.redirectTo({url:"../orderDetail/orderDetail?orderId="+e.data.orderId})):e.setData({CancelTime:t,minutes:Math.floor(t/60),seconds:t%60})}),1e3))}))):a.showModal({title:"提示",content:r.Result.Message,showCancel:!1,success:function(e){e.confirm&&a.reLaunch({url:"../orderList/orderList"})}})},fail:function(){},complete:function(){a.hideLoading()}})},cancelOrder:function(){var e=this;e.data.orderDetail.IsCancelMessage&&a.showModal({title:"提示",content:e.data.orderDetail.CancelMessage,success:function(t){if(t.confirm){var n={OrderId:e.data.orderId,UserId:D.User.UserId,OperatorId:"",ChannelId:D.ChannelId,CancelComment:""},r=C.postParamEncrypt(D.md5_key,n);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.CancelOrder,data:{key:r.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:r.auth,AppIdentity:D.des_identity},success:function(t){a.hideLoading();var n=t.data.Result.toString();n=C.decrypt(n),(n=JSON.parse(n)).IsSuccess?a.showToast({title:"订单取消成功",icon:"success",duration:2e3,success:function(){e.getOrderDetail()}}):a.showModal({title:"提示",content:n.Message,showCancel:!1,success:function(){}})},fail:function(){},complete:function(){a.hideLoading()}})}}})},payOrder:function(){var e={PhoneNumber:D.User.PhoneNumber,Subject:"一嗨租车订单支付",OrderId:this.data.orderId,UserId:D.User.UserId,Amount:this.data.orderDetail.PaymentAmount,GatewayId:80,BusinessType:1,SourceId:39,ActionType:2,ClientIp:"",OperatorId:"",Timestamp:"",OperationId:"",Sign:""},t=C.postParamEncrypt(D.md5_key,e);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.BaiduPay,data:{key:t.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:t.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var t=e.data.Result.toString();t=C.decrypt(t),t=JSON.parse(t),console.log("支付参数"),console.log(t);var n=JSON.parse(t.Result.BizContent);a.requestPolymerPayment({orderInfo:{dealId:n.dealId,appKey:n.appKey,totalAmount:n.totalAmount,tpOrderId:n.tpOrderId,dealTitle:n.dealTitle,rsaSign:n.rsaSign,signFieldsRange:n.signFieldsRange,bizInfo:n.bizInfo,notifyUrl:n.notifyUrl},bannedChannels:["BDWallet"],success:function(){a.showToast({title:"支付成功",icon:"success",duration:2e3,success:function(){a.reLaunch({url:"../orderList/orderList"})}})},fail:function(){a.showToast({title:"支付失败，请重试"})}})},fail:function(){a.hideLoading()}})}})})),window.define("56",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"illegally",illegallyList:null},onShow:function(){o.setPageInfo({title:"违章记录",keywords:"一嗨租车,一嗨,违章,违章记录,违章查询,租车违章",description:"查看租车违章情况，上传相关违章处理文件图片等",success:function(){console.log("setPageInfo success")},fail:function(e){console.log("setPageInfo fail",e)}});w.Token&&this.getIllegallyList()},getIllegallyList:function(){var e=this,t=this,n="Version="+w.Version+"&DeviceId="+w.DeviceId+"&Source="+w.Source+"&AppStoreId="+w.AppStoreId+"&Idfa="+w.Idfa+"&SessionId="+w.SessionId+"&PromotionUrl="+w.PromotionUrl+"&PromotionTemplateId="+w.PromotionTemplateId+"&Longitude="+w.Longitude+"&Latitude="+w.Latitude+"&IpAddress="+w.IpAddress+"&PromotionId="+w.PromotionId+"&PhoneIMSI="+w.PhoneIMSI+"&PhoneMAC="+w.PhoneMAC+"&Extend="+w.Extend+"&OperatorId="+w.Extend+"&userId="+w.User.UserId,r=T.getParamEncrypt(w.md5_key,n);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.IllegallyList,data:{query:r.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:r.auth,AppIdentity:w.des_identity},success:function(n){o.hideLoading();var r=n.data.Result.toString();if(r=T.decrypt(r),r=JSON.parse(r),console.log("违章信息"),console.log(r),r.IsSuccess){var a=[];r.Result.forEach((function(e){e.TicketTime=T.formatStrWithSpace(e.TicketTime),a.push(e)}),e),t.setData({illegallyList:r.Result})}},fail:function(){},complete:function(){o.hideLoading()}})}})})),window.define("58",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"renter-add",debug:w.debug,renterList:null},onLoad:function(e){},onShow:function(){w.Token&&this.getRenters()},getRenters:function(){var e=this,t=this,n="Version="+w.Version+"&DeviceId="+w.DeviceId+"&Source="+w.Source+"&AppStoreId="+w.AppStoreId+"&Idfa="+w.Idfa+"&SessionId="+w.SessionId+"&PromotionUrl="+w.PromotionUrl+"&PromotionTemplateId="+w.PromotionTemplateId+"&Longitude="+w.Longitude+"&Latitude="+w.Latitude+"&IpAddress="+w.IpAddress+"&PromotionId="+w.PromotionId+"&PhoneIMSI="+w.PhoneIMSI+"&PhoneMAC="+w.PhoneMAC+"&Extend="+w.Extend+"&OperatorId="+w.Extend+"&userId="+w.User.UserId,r=T.getParamEncrypt(w.md5_key,n);o.showLoading({title:"加载中"}),o.request({url:D.Renters,data:{query:r.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:r.auth,AppIdentity:w.des_identity},success:function(n){o.hideLoading();var r=n.data.Result.toString();if(r=T.decrypt(r),r=JSON.parse(r),console.log("常用承租人列表"),console.log(r),r.IsSuccess){var a=[];r.Result.FrequentContacts.forEach((function(e){e.MobilePhoneNo=T.strReplace(e.MobilePhoneNo,3,4),a.push(e)}),e),t.setData({renterList:a})}},fail:function(){},complete:function(){o.hideLoading()}})},removeRenter:function(e){var t=this,n=e.currentTarget.dataset.id;o.showModal({content:"确定删除常用承租人？",success:function(e){if(e.confirm){var r={Version:w.Version,DeviceId:w.DeviceId,Source:w.Source,PhoneMAC:w.PhoneMAC,Extend:w.Extend,OperatorId:w.Extend},a="userId="+w.User.UserId+"&frequentId="+n,i=T.getParamEncrypt(w.md5_key,a),s=T.postParamEncrypt(w.md5_key,r),c=T.paramEncrypt(w.md5_key,a,r);o.showLoading({content:"加载中"}),o.request({url:D.RentersRemove+i.des,method:"POST",data:{key:s.des},header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:c.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var n=e.data.Result.toString();n=T.decrypt(n),n=JSON.parse(n),console.log(n),!1===n.IsSuccess?o.showModal({content:n.Message,showCancel:!1,success:function(e){}}):(o.showModal({content:"常用承租人删除成功",showCancel:!1,success:function(e){}}),t.getRenters())},fail:function(){},complete:function(){o.hideLoading()}})}}})},addRenter:function(){w.Token&&o.navigateTo({url:"../renter-add/renter-add"})}})})),window.define("60",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"renter-add",debug:w.debug,nowtime:"",name:"",phoneNo:"",idNo:"",isDefault:!1,drivingRegTime:"",items:[{name:!0,value:"设为默认租车人",checked:!1}]},onLoad:function(e){var t=this.data.drivingRegTime||T.getSpecificDate(0,0);this.setData({nowtime:t})},nameInput:function(e){this.setData({name:e.detail.value})},phoneNoInput:function(e){this.setData({phoneNo:e.detail.value})},idNoInput:function(e){this.setData({idNo:e.detail.value})},dateChangeDay:function(e){console.log("picker-date changed，值为",e.detail.value),this.setData({drivingRegTime:e.detail.value})},cancel:function(){o.showToast({title:"用户取消选择",icon:"none"})},addRenter:function(){if(/^[A-Za-z\u4E00-\uFA29\·.．/]{2,20}$/.test(this.data.name))if(/^\d{7,15}$/.test(this.data.phoneNo))if(/^(\d{17})(\d|[xX])$/.test(this.data.idNo))if(0===this.data.drivingRegTime.length)o.showModal({content:"请选择时间",showCancel:!1,success:function(e){}});else{var e={UserId:w.User.UserId,IdCardType:1010101,Name:this.data.name,MobilePhoneNo:this.data.phoneNo,IdCardNo:this.data.idNo,IsDefault:this.data.isDefault,DrivingRegTime:this.data.drivingRegTime},t=T.postParamEncrypt(w.md5_key,e);o.showLoading({title:"加载中"}),o.request({url:D.RentersAdd,data:{key:t.des},method:"POST",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:t.auth,AppIdentity:w.des_identity},success:function(e){o.hideLoading();var t=e.data.Result.toString();t=T.decrypt(t),t=JSON.parse(t),o.hideLoading(),!1===t.IsSuccess?o.showModal({content:t.Message,showCancel:!1,success:function(e){}}):o.navigateBack()},fail:function(){},complete:function(){o.hideLoading()}})}else o.showModal({content:"证件号码格式不正确",showCancel:!1,success:function(e){}});else o.showModal({content:"手机号码格式不正确",showCancel:!1,success:function(e){}});else o.showModal({content:"姓名不能为空，限英文、汉字，2-20个字符",showCancel:!1,success:function(e){}})},openUrl:function(){o.navigateTo({url:"../../booking/focusPicInfo/focusPicInfo?urlStr="+encodeURIComponent("https://market.1hai.cn/ActivePageApp/CommonPage?aid=643&guid=97b1fbfde44b4d4bbd3616a3d239be9a")})}})})),window.define("62",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"service-online",debug:w.debug,wvUrl:D.ServiceUrl+"?p="+T.oldencrypt("Version="+w.Version+"&Source="+w.Source)},onLoad:function(){},onShow:function(){w.Token?this.getUser():(this.setData({wvUrl:D.ServiceUrl+"?p="+T.oldencrypt("Version="+w.Version+"&Source="+w.Source)}),console.log("nologin",this.data.wvUrl))},getUser:function(){var e=this,t="userId="+w.User.UserId,n=T.getParamEncrypt(w.md5_key,t);o.showLoading({title:"加载中",mask:!0}),o.request({url:D.UserBase,data:{query:n.des},method:"GET",header:{"Content-Type":"application/json",Token:w.Token,Remark:"Unchecked",AppVersion:w.Version,AppPlatform:w.Source,Authorization:n.auth,AppIdentity:w.des_identity},success:function(t){o.hideLoading();var n=t.data.Result.toString();if(n=T.decrypt(n),n=JSON.parse(n),console.log("用户信息"),console.log(n),n.IsSuccess){var r=n.Result.TrueName||"",a=n.Result.PhoneNumber||"",i=w.Token||"",s="Version="+w.Version+"&Source="+w.Source+"&TrueName="+r+"&PhoneNumber="+a+"&UserId="+w.User.UserId+"&Token="+i;console.log("param",s),e.setData({wvUrl:D.ServiceUrl+"?p="+T.oldencrypt(s)})}},fail:function(){},complete:function(){o.hideLoading()}})}})})),window.define("64",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=e(3),w=i(),D=w.globalData,b=w.url,_=59,R=void 0;Page({data:{pageName:"mayDay",verityButton:"get",codeStr:"获取验证码",showRuleMoadl:!1,situationOne:!1,situationTwo:!1,situationThree:!1,activityPhone:"",activityCode:"",operateType:""},onUnload:function(){""==this.data.operateType&&a.reLaunch({url:"../../booking/bookIndex/bookIndex"})},activityPhoneInput:function(e){this.setData({activityPhone:e.detail.value})},activityCodeInput:function(e){this.setData({activityCode:e.detail.value})},verityPhone:function(e){return!!/^\d{7,15}$/.test(e)},getVerityCode:function(e){var n=this;if(n.verityPhone(n.data.activityPhone)){n.setData({verityButton:"countDown"}),clearTimeout(R),_=59,function e(n){if(n.setData({codeStr:_+"秒后重发"}),0==_)return n.setData({verityButton:"get",codeStr:"重获验证码"}),void(_=59);_--,R=t((function(){e(n)}),1e3)}(n);var r={MobileContext:{Version:D.Version,DeviceId:D.DeviceId,Source:D.Source,AppStoreId:D.AppStoreId,Idfa:D.Idfa,SessionId:D.SessionId,PromotionUrl:D.PromotionUrl,PromotionTemplateId:D.PromotionTemplateId,Longitude:D.Longitude,Latitude:D.Latitude,IpAddress:D.IpAddress,PromotionId:D.PromotionId,PhoneIMSI:D.PhoneIMSI,PhoneMAC:D.PhoneMAC,Extend:D.Extend,OperatorId:D.Extend},RequestParam:{AuthCode:"",Type:3,MobilePhone:n.data.activityPhone}},o=C.postParamEncrypt(D.md5_key,r);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.GetVerifyCode,data:{key:o.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:o.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var r=e.data.Result.toString();r=C.decrypt(r),(r=JSON.parse(r)).IsSuccess||(clearTimeout(R),_=59,n.setData({message_tips:"messageTips",message:r.Message,verityButton:"get",codeStr:"获取验证码"}),t((function(){n.setData({message_tips:"messageTips hide",message:""})}),2e3))},fail:function(){clearTimeout(R),_=59,n.setData({verityButton:"get",codeStr:"获取验证码"})},complete:function(){a.hideLoading()}})}else a.showToast({title:"请输入正确手机号",icon:"none",duration:2e3})},receiveRedPacket:function(){var e=this.data.activityPhone,t=this.data.activityCode;if(""!==e&&""!==t&&this.verityPhone(e)){var n=this,r={PromotionId:1004,LoginName:e,Password:t,ChannelId:D.ChannelId},o=C.postParamEncrypt(D.md5_key,r);a.showLoading({title:"加载中",mask:!0}),a.request({url:b.MayDay,data:{key:o.des},method:"POST",header:{"Content-Type":"application/json",Token:D.Token,Remark:"Unchecked",AppVersion:D.Version,AppPlatform:D.Source,Authorization:o.auth,AppIdentity:D.des_identity},success:function(e){a.hideLoading();var t=e.data.Result.toString();t=C.decrypt(t),t=JSON.parse(t),console.log(t),t.IsSuccess?(clearTimeout(R),_=59,n.setData({verityButton:"get",codeStr:"获取验证码"}),n.setData({showResultMoadl:!0,situationOne:!0})):a.showToast({title:t.Message,icon:"none",duration:2e3})},fail:function(){a.hideLoading()}})}else""===e?a.showToast({title:"手机号码不能为空",icon:"none",duration:2e3}):this.verityPhone(e)?""===t&&a.showToast({title:"验证码不能为空",icon:"none",duration:2e3}):a.showToast({title:"请输入正确手机号",icon:"none",duration:2e3})},closeResultMoadl:function(){this.setData({showResultMoadl:!1,situationOne:!1,situationTwo:!1,situationThree:!1})},popupRuleMoadl:function(){var e=this;a.pageScrollTo({scrollTop:220,duration:300}),t((function(){e.setData({showRuleMoadl:!0})}),320)},closeRuleMoadl:function(){this.setData({showRuleMoadl:!1})},ticketUse:function(){this.setData({operateType:"booking"}),a.reLaunch({url:"../../booking/bookIndex/bookIndex"})},activityBook:function(){this.setData({operateType:"booking"}),a.reLaunch({url:"../../booking/bookIndex/bookIndex"})},ticketSee:function(){this.setData({operateType:"seeuser"}),a.reLaunch({url:"../../my/myIndex/myIndex"})}})})),window.define("66",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";e(3);var T=e(6),C=a(),w=C.globalData,D=C.url;Page({data:{pageName:"newUserPackage",debug:w.debug,ruleModal:!1,ruleImg:"",isLogin:!1,pageScheme:""},onLoad:function(){this.getRuleImg()},onShow:function(){var e=this;o.getStorage({key:"User",success:function(t){t.data&&e.setData({isLogin:!0})}})},getRuleImg:function(){var e=this;T.get(D.GetConfigImg,{key:201142582,Platform:"MyEhi"},"获取banner图").then((function(t){t.IsSuccess&&(t.Result&&t.Result.title&&o.setNavigationBarTitle({title:t.Result.title}),console.log("获取图片",JSON.parse(t.Result)),e.setData({pageScheme:JSON.parse(t.Result)}))}))},closeModal:function(){this.setData({ruleModal:!1})},handleModal:function(e){var t=e.currentTarget.dataset.url;this.setData({ruleModal:!0,ruleImg:t})},goReceive:function(){this.data.isLogin?o.switchTab({url:"/pages/booking/bookIndex/bookIndex"}):o.navigateTo({url:"/pages/my/loginType/loginType?fromType=newUserCoupon"})}})})),window.define("68",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";var T=e(3),C="https://appmini.1hai.cn/BaiDuMiniApp/",w=e(69);w.setPara({name:"ehiSensors",server_url:"https://sensors.1hai.cn:11621/sa?project=production",autoTrack:{mpClick:!0}}),w.registerApp({app_name:"一嗨租车百度小程序",PlatformType:"一嗨租车百度小程序"}),App({url:{ServiceUrl:"https://csonline.1hai.cn/",CurrentTime:C+"mobile/CurrentTime",HolidayTips:C+"Verify/Holiday/Reservation?",CalendarVacation:C+"Mobile/CalendarVacation?",GetFullRentTip:C+"Verify/Full/Rent",LimitTime:C+"SystemSpecific/Scheduled/Time/V2",GetFocusPicture:C+"News/FocusPicture/List",BookingInit:C+"Booking/InitCart",DiffCityFee:C+"Verify/DiffCity/Fee",Step1SubmitValidate:C+"Verify/Step1",NewUserPackage:C+"Mobile/New/User/Package",GetSecondNews:C+"News/List",CityList:C+"AddressInfo/CityList",FromCity:C+"AddressInfo/City/Info/LatLng",StoreList:C+"Store/List",StoreListNear:C+"Store/List/Distance",StockList:C+"Car/StoreStock/List",Step2SubmitValidate:C+"Booking/SubmitCart",CarTypeBasicInfo:C+"CarType/BasicInfo",CarTypeConfig:C+"CarType/Config",GetVerifyCode:C+"AuthCode",LoginPass:C+"Session/Login",LoginPassBaiDu:C+"Session/BaiDu/Mini/Auth",GetPriceInfo:C+"CarType/StepPriceInfo",StockVerifyV2:C+"CarType/Stock/Verify/V2",GetPriceDetail:C+"Price/All/V2",GetInitialization:C+"Price/Initialization/V2",GetAddedServiceList:C+"AddedService/List/V2",AppointCarTypes:C+"Car/AppointCarType",GetPromotions:C+"OrderPromotion/OrderPromotionList",BindPromotionCode:C+"OrderPromotion/BindPromotionCode?query=",BindListPromotionCode:C+"PromotionCode/PromotionCodeBound",GetBlackListUserInfo:C+"Verify/BlackListUserInfo",CreateOrder:C+"Orders/CreateOrder/V2",GetCardType:C+"Mobile/Enum",UpdateUser:C+"User/UpdateUser/SaveImage",UserBase:C+"User/Base/v2",CardCouponCount:C+"User/CardCoupon/Count",UserBalance:C+"ChargeAccount/UserBalance",UserPoints:C+"OrderPromotion/UserPoint",UserFreeDays:C+"User/FreeDays",UserPromotion:C+"PromotionCode/List",IllegallyList:C+"Illegal/IllegalList",HelpCenterRuleInfo:C+"HelpCenter/RuleInfo/ById",Renters:C+"FrequentContacts/V2",RentersAdd:C+"FrequentContacts/Add",RentersRemove:C+"FrequentContacts/Delete?query=",GetOrderList:C+"Orders/List/V2",GetOrderDetail:C+"Orders/Detail/V2",CancelOrder:C+"Orders/Cancel",BaiduPay:C+"BaiduPay/CheckOut/",MayDay:C+"User/Register/Send/Coupons",GetConfigImg:C+"Mobile/Description",SmsNotification:C+"User/User/Setting/Notification?",SmsNotificationUpdate:C+"User/UpdateUser/Setting/Notification"},globalData:{md5_key:"-o@g*m,%0!si^fo1",md5_deskey:"11eehhii!!",des_identity:"",lng:0,lat:0,Version:"6630",DeviceId:"",Source:"BaiduMiniApp",AppStoreId:"",Idfa:"",SessionId:"",PromotionUrl:"",PromotionTemplateId:0,Longitude:0,Latitude:0,IpAddress:"",PromotionId:"",PhoneIMSI:"",PhoneMAC:"",Extend:"",OperatorId:"",ChannelId:"200249",IsGoldCard:!1,OrderFrom:10133016,Token:"",User:{},PositiveImg:"",VersoImg:"",IsZhimaPromotion:"",SelectedPromotion:"",SelectedPromotionName:"",ChoosedCar:"",IsSelectChoosedCar:!1,ChoosedAdded:[],WaitingInvoice:{},InvoiceCityInfo:{},GetStoreOpen:"",GetStoreClose:"",ReStoreOpen:"",ReStoreClose:"",toStep1FromType:""},onLaunch:function(e){var t=this;e.query&&e.query.ChannelId&&(this.globalData.ChannelId=e.query.ChannelId),t.globalData.des_identity=T.encrypt(T.des_identity_string),o.getStorage({key:"User",success:function(e){e.data&&(t.globalData.Token=e.data.Token,t.globalData.User=e.data)}}),w.init(),t.ehiSensors=w,o.removeStorage({key:"EhiCart",success:function(e){}}),o.removeStorage({key:"CityList",success:function(e){}}),o.getSystemInfo({success:function(e){t.globalData.windowWidth=e.windowWidth,t.globalData.windowHeight=e.windowHeight,t.globalData.model=e.model}})},onShow:function(){},onHide:function(){}})})),window.define("69",(function(e,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k,T){"use strict";var C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var D=Object.assign({},a),b="sensorsdata2015_baidu",_="SmartProgram",R="code",L="sensors_prepare_data";D.sdmp_request=a.request,D.sdmp_getSystemInfo=a.getSystemInfo,D.sdmp_getNetworkType=a.getNetworkType,D.sdmp_getStorageSync=a.getStorageSync,D.sdmp_setStorageSync=a.setStorageSync,D.sdmp_getAppId=a.getEnvInfoSync,D.sdmp_getStorage=a.getStorage;var A={lib_version:"0.15.1",is_first_launch:!1,_queue:[],getSystemInfoComplete:!1,para:{name:"sensors",server_url:"",max_string_length:200,autoTrack:{appLaunch:!0,appShow:!0,appHide:!0,pageShow:!0,mpClick:!0},show_log:!0,batch_send:!0},log:function(){if(A.para.show_log)try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}}},U={},O=Array.prototype,x=Object.prototype,N=O.slice,E=x.toString,M=x.hasOwnProperty,B=O.forEach,V=O.indexOf,H=Array.isArray,z={},j=U.each=function(e,t,n){if(null==e)return!1;if(B&&e.forEach===B)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(r in e&&t.call(n,e[r],r,e)===z)return!1}else for(var a in e)if(M.call(e,a)&&t.call(n,e[a],a,e)===z)return!1};U.extend=function(e){return j(N.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},U.extend2Lev=function(e){return j(N.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(U.isObject(t[n])&&U.isObject(e[n])?U.extend(e[n],t[n]):e[n]=t[n])})),e},U.coverExtend=function(e){return j(N.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&void 0===e[n]&&(e[n]=t[n])})),e},U.isArray=H||function(e){return"[object Array]"===E.call(e)},U.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},U.isArguments=function(e){return!(!e||!M.call(e,"callee"))},U.toArray=function(e){return e?e.toArray?e.toArray():U.isArray(e)||U.isArguments(e)?N.call(e):U.values(e):[]},U.values=function(e){var t=[];return null==e||j(e,(function(e){t[t.length]=e})),t},U.include=function(e,t){var n=!1;return null==e?n:V&&e.indexOf===V?-1!=e.indexOf(t):(j(e,(function(e){if(n||(n=e===t))return z})),n)},U.trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},U.isObject=function(e){return"[object Object]"==E.call(e)&&null!=e},U.isEmptyObject=function(e){if(U.isObject(e)){for(var t in e)if(M.call(e,t))return!1;return!0}return!1},U.isUndefined=function(e){return void 0===e},U.isString=function(e){return"[object String]"==E.call(e)},U.isDate=function(e){return"[object Date]"==E.call(e)},U.isBoolean=function(e){return"[object Boolean]"==E.call(e)},U.isNumber=function(e){return"[object Number]"==E.call(e)&&/[\d\.]+/.test(String(e))},U.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},U.decodeURIComponent=function(e){var t="";try{t=decodeURIComponent(e)}catch(n){t=e}return t},U.encodeDates=function(e){return U.each(e,(function(t,n){U.isDate(t)?e[n]=U.formatDate(t):U.isObject(t)&&(e[n]=U.encodeDates(t))})),e},U.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())},U.searchObjDate=function(e){U.isObject(e)&&U.each(e,(function(t,n){U.isObject(t)?U.searchObjDate(e[n]):U.isDate(t)&&(e[n]=U.formatDate(t))}))},U.searchObjString=function(e){U.isObject(e)&&U.each(e,(function(t,n){U.isObject(t)?U.searchObjString(e[n]):U.isString(t)&&(e[n]=U.formatString(t))}))},U.unique=function(e){for(var t,n=[],r={},o=0;o<e.length;o++)(t=e[o])in r||(r[t]=!0,n.push(t));return n},U.strip_sa_properties=function(e){return U.isObject(e)?(U.each(e,(function(t,n){if(U.isArray(t)){var r=[];U.each(t,(function(e){U.isString(e)?r.push(e):A.log("您的数据-",t,"的数组里的值必须是字符串,已经将其删除")})),0!==r.length?e[n]=r:(delete e[n],A.log("已经删除空的数组"))}U.isString(t)||U.isNumber(t)||U.isDate(t)||U.isBoolean(t)||U.isArray(t)||(A.log("您的数据-",t,"-格式不满足要求，我们已经将其删除"),delete e[n])})),e):e},U.strip_empty_properties=function(e){var t={};return U.each(e,(function(e,n){null!=e&&(t[n]=e)})),t},U.utf8Encode=function(e){var t,n,r,o,a="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<r;o++){var i=e.charCodeAt(o),s=null;i<128?n++:s=i>127&&i<2048?String.fromCharCode(i>>6|192,63&i|128):String.fromCharCode(i>>12|224,i>>6&63|128,63&i|128),null!==s&&(n>t&&(a+=e.substring(t,n)),a+=s,t=n=o+1)}return n>t&&(a+=e.substring(t,e.length)),a},U.base64Encode=function(e){var t,n,r,o,a,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,d="",u=[];if(!e)return e;e=U.utf8Encode(e);do{t=(a=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=a>>12&63,r=a>>6&63,o=63&a,u[c++]=i.charAt(t)+i.charAt(n)+i.charAt(r)+i.charAt(o)}while(s<e.length);switch(d=u.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d},A._=U;U.getMPScene=function(e){if("number"==typeof e||"string"==typeof e&&""!==e){switch(_){case"QQMini":e="qq-"+String(e);break;case"SmartProgram":e="baidu-"+String(e);break;case"BytedanceMini":e="byte-"+String(e)}return e}return"未取到值"},U.getCurrentPath=function(){var e="未取到";try{var t=getCurrentPages(),n=t[t.length-1];e=n.route?n.route:n.__route__}catch(e){A.log(e)}return e},U.getPath=function(e){return"string"==typeof e?e.replace(/^\//,""):"取值异常"},U.setUtm=function(e,t){var n={},r=U.getQuery(e),o=U.getUtmFromQuery(r,"$","_"),a=U.getUtmFromQuery(r,"$latest_","_latest_");return n.pre1=o,n.pre2=a,U.extend(t,o),n},U.getQuery=function(e){var t={};for(var n in e&&U.isObject(e.query)&&(t=U.extend(t,e.query)),t)t[n]=U.decodeURIComponent(t[n]);return t},U.getUtmFromQuery=function(e,t,n){if(!U.isObject(e))return{};var r={};for(var o in e)-1!==" utm_source utm_medium utm_campaign utm_content utm_term ".indexOf(" "+o+" ")&&(r[t+o]=e[o]),U.isArray(A.para.source_channel)&&U.include(A.para.source_channel,o)&&(r[n+o]=e[o]);return r},U.formatString=function(e){return e.length>A.para.max_string_length?(A.log("字符串长度超过限制，已经做截取--"+e),e.slice(0,A.para.max_string_length)):e},U.getAppId=function(){var e;if(D.sdmp_getAppId&&(e=D.sdmp_getAppId()),U.isObject(e))return e.appKey},U.setUpperCase=function(e){return U.isString(e)?e.toLocaleUpperCase():e},U.info={currentProps:{},properties:{$lib:_,$lib_version:String(A.lib_version)},getSystem:function(){var e=this.properties,t=!0;function n(){t&&(t=!0,D.sdmp_getSystemInfo({success:function(t){e.$model=t.model,e.$screen_width=Number(t.screenWidth),e.$screen_height=Number(t.screenHeight),e.$os=function(e){try{var t=e.toLowerCase();return"ios"===t?"iOS":"android"===t?"Android":e}catch(e){A.log(e)}}(t.platform),e.$os_version=t.system.indexOf(" ")>-1?t.system.split(" ")[1]:t.system,e.$brand=U.setUpperCase(t.brand),e.$manufacturer=t.brand},complete:function(){var t=U.getAppId(),n=(new Date).getTimezoneOffset();t&&(e.$app_id=t),U.isNumber(n)&&(e.$timezone_offset=n),A.getSystemInfoComplete=!0,A.checkIsComplete()}}))}D.sdmp_getNetworkType({success:function(t){e.$network_type=U.setUpperCase(t.networkType),n()},complete:function(){n()}})},setStatusComplete:function(){if(A.getSystemInfoComplete)return!1;A.getSystemInfoComplete=!0,A._queue.length>0&&(U.each(A._queue,(function(e){A.prepareData.apply(A,Array.prototype.slice.call(e))})),A._queue=[])}},U.getIsFirstDay=function(){return"object"==w(A.store._state)&&"number"==typeof A.store._state.first_visit_day_time&&A.store._state.first_visit_day_time>(new Date).getTime()};var q={getUUID:function(){return Date.now()+"-"+Math.floor(1e7*Math.random())+"-"+Math.random().toString(16).replace(".","")+"-"+String(31242*Math.random()).replace(".","").slice(0,8)},setStorage:function(){},getStorage:function(){return D.sdmp_getStorageSync(b)||""},_state:{},mem:{mdata:[],getLength:function(){return this.mdata.length},add:function(e){this.mdata.push(e)},clear:function(e){this.mdata.splice(0,e)}},toState:function(e){"object"==(void 0===e?"undefined":w(e))&&e.distinct_id?this._state=e:this.set("distinct_id",this.getUUID())},getFirstId:function(){return this._state.first_id},getDistinctId:function(){return this._state.distinct_id},getProps:function(){return this._state.props||{}},setProps:function(e,t){var n=this._state.props||{};t?this.set("props",e):(U.extend(n,e),this.set("props",n))},set:function(e,t){var n={};for(var r in"string"==typeof e?n[e]=t:"object"==(void 0===e?"undefined":w(e))&&(n=e),this._state=this._state||{},n)this._state[r]=n[r];this.save()},change:function(e,t){this._state[e]=t},save:function(){D.sdmp_setStorageSync(b,this._state)},init:function(){var e=this.getStorage();if(e)this.toState(e);else{A.is_first_launch=!0;var t=new Date,n=t.getTime();t.setHours(23),t.setMinutes(59),t.setSeconds(60),A.setOnceProfile({$first_visit_time:new Date}),this.set({distinct_id:this.getUUID(),first_visit_time:n,first_visit_day_time:t.getTime()})}}};A.store=q;var F=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataHasSend=!0,this.syncStorage=!1,this.is_first_batch_write=!0,this.failTime=0}return C(e,[{key:"init",value:function(){var e=this;D.sdmp_getStorage({key:L,complete:function(t){var n=t.data&&U.isArray(t.data)?t.data:[];A.store.mem.mdata=n.concat(A.store.mem.mdata),e.syncStorage=!0}}),this.batchInterval()}},{key:"onAppHide",value:function(){A.para.batch_send&&this.batchSend()}},{key:"send",value:function(e){return!!A.para.server_url&&(this.dataHasChange=!0,A.store.mem.getLength()>=300?(A.log("数据量存储过大，有异常"),!1):(A.log(e),A.store.mem.add(e),void(A.store.mem.getLength()>=A.para.batch_send.max_length&&this.batchSend())))}},{key:"batchWrite",value:function(){var e=this;this.dataHasChange&&(this.is_first_batch_write&&(this.is_first_batch_write=!1,t((function(){e.batchSend()}),1e3)),this.syncStorage&&(D.sdmp_setStorageSync(L,A.store.mem.mdata),this.dataHasChange=!1))}},{key:"batchInterval",value:function(){var e=this;!function n(){t((function(){e.batchSend(),n()}),A.para.batch_send.send_timeout*Math.pow(2,e.failTime))}(),function n(){t((function(){e.batchWrite(),n()}),500)}()}},{key:"batchSend",value:function(){if(this.dataHasSend){var e=this,t=A.store.mem.mdata,n=t.length;if(U.isArray(t)&&t.length>0){this.dataHasSend=!1;var r=Date.now();t.forEach((function(e){e._flush_time=r})),t=JSON.stringify(t),t="data_list="+encodeURIComponent(U.base64Encode(t)),D.sdmp_request({url:A.para.server_url,method:"POST",data:t,dataType:"text",success:function(t){e.batchRemove(n)},fail:function(t){e.sendFail()}})}}}},{key:"batchRemove",value:function(e){this.dataHasSend=!0,this.dataHasChange=!0,A.store.mem.clear(e),this.batchWrite(),this.failTime=0}},{key:"sendFail",value:function(){this.dataHasSend=!0,this.failTime++}}]),e}()),G=null;A.setPara=function(e){if(A.para=U.extend2Lev(A.para,e),U.isObject(A.para.register)&&U.extend(U.info.properties,A.para.register),A.para.name||(A.para.name="sensors"),A.para.server_url){var t={send_timeout:6e3,max_length:6};!0===A.para.batch_send?A.para.batch_send=U.extend({},t):U.isObject(A.para.batch_send)?A.para.batch_send=U.extend({},t,A.para.batch_send):A.para.batch_send=!1}else A.log("请使用 setPara() 方法设置 server_url 数据接收地址,详情可查看https://www.sensorsdata.cn/manual/mp_sdk_new.html#112-%E5%BC%95%E5%85%A5%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0")},A.getServerUrl=function(){return A.para.server_url},A.prepareData=function(e,t){if(!A.isComplete)return A._queue.push(arguments),!1;var n={distinct_id:this.store.getDistinctId(),lib:{$lib:_,$lib_method:R,$lib_version:String(A.lib_version)},properties:{}};U.extend(n,e),U.isObject(e.properties)&&!U.isEmptyObject(e.properties)&&U.extend(n.properties,e.properties),e.type&&"profile"===e.type.slice(0,7)||(n._track_id=Number(String(Math.random()).slice(2,5)+String(Math.random()).slice(2,4)+String(Date.now()).slice(-4)),n.properties=U.extend({},U.info.properties,A.store.getProps(),U.info.currentProps,n.properties),"object"==w(A.store._state)&&"number"==typeof A.store._state.first_visit_day_time&&A.store._state.first_visit_day_time>(new Date).getTime()?n.properties.$is_first_day=!0:n.properties.$is_first_day=!1),n.properties.$time&&U.isDate(n.properties.$time)?(n.time=1*n.properties.$time,delete n.properties.$time):n.time=1*new Date,U.searchObjDate(n),U.searchObjString(n),A.para.batch_send?F.send(n):A.send(n,t)},A.setProfile=function(e,t){A.prepareData({type:"profile_set",properties:e},t)},A.setOnceProfile=function(e,t){A.prepareData({type:"profile_set_once",properties:e},t)},A.track=function(e,t,n){this.prepareData({type:"track",event:e,properties:t},n)},A.identify=function(e,t){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;var n=A.store.getFirstId();!0===t?n?A.store.set("first_id",e):A.store.set("distinct_id",e):n?A.store.change("first_id",e):A.store.change("distinct_id",e)},A.trackSignup=function(e,t,n,r){A.prepareData({original_id:A.store.getFirstId()||A.store.getDistinctId(),distinct_id:e,type:"track_signup",event:t,properties:n},r),A.store.set("distinct_id",e)},A.registerApp=function(e){U.isObject(e)&&!U.isEmptyObject(e)&&(U.info.currentProps=U.extend(U.info.currentProps,e))},A.getPresetProperties=function(){if(U.info&&U.info.properties&&U.info.properties.$lib){var e={};U.each(U.info.currentProps,(function(t,n){0===n.indexOf("$")&&(e[n]=t)}));var t=U.extend(e,{$url_path:U.getCurrentPath(),$is_first_day:U.getIsFirstDay()},U.info.properties);return delete t.$lib,t}return{}},A.clearAppRegister=function(e){U.isArray(e)&&U.each(U.info.currentProps,(function(t,n){U.include(e,n)&&delete U.info.currentProps[n]}))},A.appLaunch=function(e,t,n){t&&U.isObject(t)||(t={});var r={};e&&e.path&&(r.$url_path=U.getPath(e.path));var o=U.setUtm(e,r);A.is_first_launch?(r.$is_first_time=!0,U.isEmptyObject(o.pre1)||A.setOnceProfile(o.pre1)):r.$is_first_time=!1,U.isEmptyObject(o.pre2)||A.registerApp(o.pre2);var a=U.getMPScene(e.scene);a&&(r.$scene=a,A.registerApp({$latest_scene:r.$scene})),U.extend(r,t),(!n||A.para.autoTrack&&A.para.autoTrack.appLaunch)&&A.track("$MPLaunch",r)},A.appShow=function(e,t,n){t&&U.isObject(t)||(t={});var r={};G=(new Date).getTime(),e&&e.path&&(r.$url_path=U.getPath(e.path));var o=U.setUtm(e,r);U.isEmptyObject(o.pre2)||A.registerApp(o.pre2);var a=U.getMPScene(e.scene);a&&(r.$scene=a,A.registerApp({$latest_scene:r.$scene})),U.extend(r,t),(!n||A.para.autoTrack&&A.para.autoTrack.appShow)&&A.track("$MPShow",r)},A.appHide=function(e,t){e&&U.isObject(e)||(e={});var n=(new Date).getTime(),r={};r.$url_path=U.getCurrentPath(),G&&n-G>0&&(n-G)/36e5<24&&(r.event_duration=(n-G)/1e3),U.extend(r,e),(!t||A.para.autoTrack&&A.para.autoTrack.appHide)&&A.track("$MPHide",r),F.onAppHide()},A.clearAllRegister=function(){A.store.setProps({},!0)},A.login=function(e){var t=A.store.getFirstId(),n=A.store.getDistinctId();e!==n&&(t||A.store.set("first_id",n),A.trackSignup(e,"$SignUp"))},A.logout=function(e){var t=A.store.getFirstId();t?(A.store.set("first_id",""),!0===e?A.store.set("distinct_id",A.store.getUUID()):A.store.set("distinct_id",t)):A.log("没有first_id，logout失败")},A.getAnonymousID=function(){if(!U.isEmptyObject(A.store._state))return A.store._state.first_id||A.store._state.distinct_id;A.log("请先初始化SDK")},A.checkIsComplete=function(){this.isComplete=!1,this.getSystemInfoComplete&&this.hasInit&&(this.isComplete=!0,A._queue.length>0&&(U.each(A._queue,(function(e){A.prepareData.apply(A,Array.prototype.slice.call(e))})),A._queue=[]))},A.init=function(){if(!0===this.hasInit)return!1;this.hasInit=!0,A.para.batch_send&&F.init(),A.checkIsComplete()},A.initial=function(){this._.info.getSystem(),this.store.init(),U.isObject(this.para.register)&&(U.info.properties=U.extend(U.info.properties,this.para.register))},A.send=function(e){var t;e._nocache=(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15),A.log(e),e._flush_time=Date.now(),e=JSON.stringify(e),t=-1!==A.para.server_url.indexOf("?")?A.para.server_url+"&data="+encodeURIComponent(U.base64Encode(e)):A.para.server_url+"?data="+encodeURIComponent(U.base64Encode(e)),D.sdmp_request({url:t,dataType:"text",method:"GET"})},A.quick=function(){var e=arguments[0],t=arguments[1],n=arguments[2],r=U.isObject(n)?n:{};"appLaunch"===e||"appShow"===e?t?A[e](t,r):A.log("App的launch和show，在sensors.quick第二个参数必须传入App的options参数"):"appHide"===e&&(r=U.isObject(t)?t:{},A[e](r))},A.pageShow=function(e,t){var n={};n.$url_path=U.getCurrentPath(),U.extend(n,e),(!t||A.para.autoTrack&&A.para.autoTrack.pageShow)&&A.track("$MPViewScreen",n)};var $={data:1,onLoad:1,onShow:1,onReady:1,onHide:1,onUnload:1,onPullDownRefresh:1,onReachBottom:1,onShareAppMessage:1,onPageScroll:1,onResize:1,onTabItemTap:1,onURLQueryChange:1,attached:1,created:1,detached:1,methods:1,properties:1,ready:1,__customConstructor__:1};U.getMethods=function(e){var t=[];for(var n in e)"function"!=typeof e[n]||$[n]||t.push(n);return t},U.isClick=function(e){return!!{tap:1,longpress:1,longtap:1}[e]};var W=function(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments),t={},r="";if(U.isObject(arguments[0])){U.isObject(arguments[0].event_prop)&&(t=U.extend(t,arguments[0].event_prop));var o=arguments[0].currentTarget||{},a=arguments[0].target||{};if(U.isObject(A.para.framework)&&U.isObject(A.para.framework.taro)&&!A.para.framework.taro.createApp&&a.id&&o.id&&a.id!==o.id)return!1;var i=o.dataset||{};r=arguments[0].type,t.$url_path=U.getCurrentPath(),t.$element_id=o.id,t.$element_type=i.type,t.$element_content=i.content,t.$element_name=i.name}return r&&U.isClick(r)&&A.track("$MPClick",t),e}},J=(App,Page),K=Component;App.after({methods:{onLaunch:function(e){e.thisObject[A.para.name]=A,A.appLaunch(e.args,{},!0)},onShow:function(e){A.appShow(e.args,{},!0)},onHide:function(){A.appHide({},!0)}}}),Page.after({methods:{onShow:function(){A.pageShow({},!0)}}}),Page=function(e){var t=A.para.autoTrack&&A.para.autoTrack.mpClick&&U.getMethods(e);if(t)for(var n=0,r=t.length;n<r;n++)W(e,t[n]);J.apply(this,arguments)},Component=function(e){try{var t=A.para.autoTrack&&A.para.autoTrack.mpClick&&U.getMethods(e.methods);if(t)for(var n=0,r=t.length;n<r;n++)W(e.methods,t[n]);var o=A.para.autoTrack&&A.para.autoTrack.mpClick&&U.getMethods(e);if(o)for(var a=0,i=o.length;a<i;a++)W(e,o[a]);K.apply(this,arguments)}catch(e){K.apply(this,arguments)}},A.initial(),n.exports=A})),window.__swanRoute="app",window.usingComponents=[],window.usingPluginComponents=[],require("68"),window.__swanRoute="components/multiPicker/multiPicker",window.usingComponents=[],window.usingPluginComponents=[],require("2"),window.__swanRoute="pages/booking/bookIndex/bookIndex",window.usingComponents=["components/multiPicker/multiPicker"],window.usingPluginComponents=[],require("5"),window.__swanRoute="pages/booking/focusPicInfo/focusPicInfo",window.usingComponents=[],window.usingPluginComponents=[],require("9"),window.__swanRoute="pages/booking/cityInfoPage/cityInfoPage",window.usingComponents=[],window.usingPluginComponents=[],require("11"),window.__swanRoute="pages/booking/shopInfoPage/shopInfoPage",window.usingComponents=[],window.usingPluginComponents=[],require("13"),window.__swanRoute="pages/booking/rentGuide/rentGuide",window.usingComponents=[],window.usingPluginComponents=[],require("15"),window.__swanRoute="pages/booking/carModels/carModels",window.usingComponents=[],window.usingPluginComponents=[],require("17"),window.__swanRoute="pages/booking/orderComplete/orderComplete",window.usingComponents=[],window.usingPluginComponents=[],require("19"),window.__swanRoute="pages/booking/orderConfirm/orderConfirm",window.usingComponents=[],window.usingPluginComponents=[],require("21"),window.__swanRoute="pages/booking/orderRules/orderRules",window.usingComponents=[],window.usingPluginComponents=[],require("28"),window.__swanRoute="pages/booking/orderPromotion/orderPromotion",window.usingComponents=[],window.usingPluginComponents=[],require("30"),window.__swanRoute="pages/booking/orderResult/orderResult",window.usingComponents=[],window.usingPluginComponents=[],require("32"),window.__swanRoute="pages/booking/orderRenter/orderRenter",window.usingComponents=[],window.usingPluginComponents=[],require("34"),window.__swanRoute="pages/booking/datePick/datePick",window.usingComponents=[],window.usingPluginComponents=[],require("36"),window.__swanRoute="pages/booking/carDetail/carDetail",window.usingComponents=[],window.usingPluginComponents=[],require("38"),window.__swanRoute="pages/my/myIndex/myIndex",window.usingComponents=[],window.usingPluginComponents=[],require("40"),window.__swanRoute="pages/my/loginType/loginType",window.usingComponents=[],window.usingPluginComponents=[],require("42"),window.__swanRoute="pages/my/login/login",window.usingComponents=[],window.usingPluginComponents=[],require("44"),window.__swanRoute="pages/my/balance/balance",window.usingComponents=[],window.usingPluginComponents=[],require("46"),window.__swanRoute="pages/my/points/points",window.usingComponents=[],window.usingPluginComponents=[],require("48"),window.__swanRoute="pages/my/promotion/promotion",window.usingComponents=[],window.usingPluginComponents=[],require("50"),window.__swanRoute="pages/my/orderList/orderList",window.usingComponents=[],window.usingPluginComponents=[],require("52"),window.__swanRoute="pages/my/orderDetail/orderDetail",window.usingComponents=[],window.usingPluginComponents=[],require("54"),window.__swanRoute="pages/my/illegally/illegally",window.usingComponents=[],window.usingPluginComponents=[],require("56"),window.__swanRoute="pages/my/renter/renter",window.usingComponents=[],window.usingPluginComponents=[],require("58"),window.__swanRoute="pages/my/renter-add/renter-add",window.usingComponents=[],window.usingPluginComponents=[],require("60"),window.__swanRoute="pages/serviceOnline/serviceOnline",window.usingComponents=[],window.usingPluginComponents=[],require("62"),window.__swanRoute="pages/activity/mayDay/mayDay",window.usingComponents=[],window.usingPluginComponents=[],require("64"),window.__swanRoute="pages/activity/newUserPackage/newUserPackage",window.usingComponents=[],window.usingPluginComponents=[],require("66")}(__hacked),window.define("pages/swan-operate-news/index",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";Page({})})),window.__swanRoute="pages/swan-operate-news/index",window.usingComponents=["dynamicLib://swan-news-tool/swan-news"],window.usingPluginComponents=[],require("pages/swan-operate-news/index"),window.define("pages/swan-news-showcase/index",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";Page({})})),window.__swanRoute="pages/swan-news-showcase/index",window.usingComponents=["dynamicLib://swan-news-tool/swan-news-showcase"],window.usingPluginComponents=[],require("pages/swan-news-showcase/index"),window.define("pages/swan-news-articles/index",(function(e,t,n,r,o,a,i,s,c,d,u,l,p,f,h,m,g,y,I,v,P,S,k){"use strict";Page({})})),window.__swanRoute="pages/swan-news-articles/index",window.usingComponents=["dynamicLib://swan-news-tool/swan-news-articles"],window.usingPluginComponents=[],require("pages/swan-news-articles/index");
//# sourceMappingURL=D:\output\app.js.map