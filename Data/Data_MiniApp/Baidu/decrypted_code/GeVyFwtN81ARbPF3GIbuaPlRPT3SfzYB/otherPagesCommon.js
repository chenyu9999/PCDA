var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(e){e.global;var t=e.Function,i=e.setTimeout,o=e.setInterval,a=(e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis);window.define("140",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("24"),C=e("36"),O=e("34"),k=O.request,E=O.sendLog,F=s();Page({platform:"",intervalFeedListId:null,intervalFeedList:[],prevScreen:0,pageStartTime:0,pageUUID:"",winWidth:0,winHeight:0,startTime:0,processedOption:null,from:"",shouldSkeletonRemove:!0,headImgHeight:200,scrolledHeight:0,tabItemMarginLeft:24,headSwiperLogMap:{},mixBannerInfoList:[],isSwiperBgShow:!0,grassViewLogShown:!1,grassListTop:0,homeTabTop:0,cidUrl:{0:"homeFeed",2:"smallVideoFeed"},data:{shouldGray:!1,pn:0,pageSize:20,noMoreLiveFeed:!1,pageName:I.PageName.Home,fixedSpotBizSlotName:"",fixedSpotJumpTo:null,isSkeletonShow:!0,shouldFixed:!1,shouldBackColorShow:!0,showIndicatorDots:!1,switchSwiperAutoPlay:!0,contentMinHeight:0,headImgList:[],isCheckedId:0,encEid:"",headShow:!1,headBegin:!1,scrollTop:0,isError:!1,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},errInfo:"",showMask:!0,currentCategoryId:0,firstLoad:!0,feedList:[],hasMore:!0,tabList:[{cid:0,name:"推荐"},{cid:2,name:"小视频"}],preList:[{title:"小视频",cid:2,type:"smallvideo"}],liveTopTab:[],smallVideoTopTab:[],foodList:[],liveTabParams:{},liveFeedData:[],grassFeedList:[],searchBanner:[],mixBannerNum:0,currentSwiperIndex:0,topWrapBgColor:"#ffffff",backColorHeight:137,constCardType:I.liveCardType},onInit:function(e){this.processedOption||(this.processedOption=this.processOption(e),this.from=this.processedOption.from,this.getHome())},onLoad:function(e){if(!this.processedOption){this.processedOption=this.processOption(e);this.processedOption.tabindex;this.getHome()}this.processedOption.from&&(this.from=this.processedOption.from);var t=C.getSysInfoSync(I.PageName.Home);this.winWidth=t.windowWidth,this.winHeight=t.windowHeight,this.platform=t.platform,this.setData({contentMinHeight:this.winHeight+2,liveTabParams:{from:this.from,frompage:"tab"}}),this.sendLog({pos:"load",action:"home-load",cid:this.processedOption.tabindex})},onShow:function(){this.isSwiperBgShow=!0,this.setData({switchSwiperAutoPlay:!0}),this.setBgColor()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)}),this.setData({switchSwiperAutoPlay:!1})},processOption:function(e){var t={tabindex:parseInt(e.tabindex,10)||0};return this.setData({isCheckedId:t.tabindex}),e.from&&(this.from=C.decodeUriComponent(e.from)),t},smallVideoClick:function(e){var t=e.currentTarget.dataset.id,i=(e.currentTarget.dataset.sid,e.currentTarget.dataset.type,e.currentTarget.dataset.coverImage||"");this.sendLog({itemType:"video",action:"click",encEid:t}),C.jumpTo(I.PageName.Article,{eid:t,coverImage:i,extra:this.data.extra})},preSeeMore:function(e){var t=this,i=e.currentTarget.dataset.cid;this.intervalFeedList=[],this.setData({isCheckedId:i,feedList:null,pn:0},(function(){t.getExpFeeds(i),n.createSelectorQuery().select("#head-wrap").boundingClientRect().exec((function(e){t.homeTabTop=e[0].top+t.scrolledHeight,n.pageScrollTo({scrollTop:t.homeTabTop,duration:0})}))}))},gotoGrassHome:function(){C.jumpTo(I.PageName.HomeGrass),this.sendLog({pos:"grass-see-more",action:"click"})},getGrassList:function(){var e=this;k({url:C.getApiUrl("grassFeedList"),data:{},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.grassList||[];if(o&&o.length){var a=o.slice(0,5);a.forEach((function(e,t){e.index=t,e.flag="list",e.picUrl=C.procBosImg(e.picUrl,{w:510,h:690})})),e.setData({grassList:a},(function(){e.getGrassListViewTop()}))}}},fail:function(){}})},getGrassListViewTop:function(){var e=this,t=n.createSelectorQuery();C.poll((function(e,i){t.select("#js-grass-head-top").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(t,i){t||(e.grassListTop=i.top+e.scrolledHeight)}))},checkGrassVisible:C.throttle((function(){var e=this.selectComponent("#card-list");e&&e.checkVisible()})),changeGrassShown:function(e){var t=e.detail;this.grassViewLogShown||(this.grassViewLogShown=!(!t.ids||!t.ids.length))},makeBgColor:function(e){return e[1]=.66,e[2]=.75,C.rgbToHex(C.hsvToRgb(e))},getHome:function(){var e=this;n.showLoading({title:"加载中"}),k({url:C.getApiUrl(I.PageName.Home),success:function(t){var i=t.data;n.hideLoading();var o={};if(0===i.errNo){var a=i.data;if(a.bannerList&&a.bannerList.length&&(o.headImgList=a.bannerList,a.bannerList.forEach((function(t){var i=t.bgColorRgb||"105, 135, 255",o=[];(i.split(",")||[]).forEach((function(e){o.push(parseInt(e,10))}));var a=C.rgbToHsv(o),n=e.makeBgColor(a);t.bgColorRgb=n})),o.topWrapBgColor=o.headImgList[e.data.currentSwiperIndex].bgColorRgb,a.bannerList.length>1&&(o.showIndicatorDots=!0)),a.liveTopTab&&a.liveTopTab.length&&(o.liveTopTab=a.liveTopTab.map((function(e){return P(P({},e),{},{browserTimes:C.countFormatter(e.browserTimes)})}))),a.verticalVideo&&a.verticalVideo.length){for(var s=0,r=a.verticalVideo.length;s<r;s++){var c=a.verticalVideo[s],d=C.countFormatter(c.browserTimes);c.browserTimes=d,c.picUrl=C.procBosImg(c.picUrl,{w:540,h:810})}o.smallVideoTopTab=a.verticalVideo}if(a.extra&&a.extra.spot&&a.extra.spot.type){var l=encodeURIComponent(JSON.stringify(a.extra.spot));e.data.fixedSpotBizSlotName!==l&&(o.fixedSpotBizSlotName=l,o.fixedSpotJumpTo=a.extra.spot)}a.extra&&a.extra.toGray&&1==+a.extra.toGray.sappHome&&(o.shouldGray=!0),a.searchBanner&&a.searchBanner.length&&(o.searchBanner=a.searchBanner),e.sendLog({pos:"after",action:"pv"})}else o.isError=!0,o.errInfo="数据错误";var h=Date.now();o.isSkeletonShow=!1,e.setData(o,(function(){e.headSwiperItemShowLog(0),e.setNavigationBgColor(o.topWrapBgColor),e.getGrassList(),e.getExpFeeds(0);var t=Date.now()-h;e.shouldSkeletonRemove&&(e.shouldSkeletonRemove=!1,e.removeSkeleton()),e.sendLog({pos:"perf-analyze",action:"set-data",setDataTime:t})}))},fail:function(t){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),e.setData({isError:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})},getLiveFeed:function(){var e=this;k({url:C.getApiUrl("liveFeed"),data:{pn:this.data.pn,rn:this.data.pageSize},success:function(t){n.hideLoading();var i=t.data,o={};if(0===i.errNo)if(i.data.list){var a=i.data.list;e.setData({liveFeedData:a,firstLoad:!1,noMoreLiveFeed:i.data.list.length>0,pn:i.data.pn})}else o.firstLoad=!1,o.isError=!0,o.errInfo="没有数据~",o.hasMore=!1;else o.isError=!0,o.errInfo="数据错误",o.hasMore=!1,o.noMoreLiveFeed=!1;e.setData(o)},fail:function(t){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),e.setData({isError:!0,noMoreLiveFeed:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})},getExpFeeds:function(e){var t=this;if(1===e)this.getLiveFeed();else{n.showLoading({title:"加载中"});var i={mixBannerNum:this.data.mixBannerNum};k({url:C.getApiUrl(this.cidUrl[e]),data:i,success:function(i){var o=i.data;if(e===t.data.isCheckedId){n.hideLoading();var a={};if(0===o.errno||0===o.errNo){var s=o.data;if(s.list&&s.list.length>0||s.feed&&s.feed.list&&s.feed.list.length){for(var r=s.list||s.feed.list,c=0;c<r.length;c++)r[c].browserTimes=C.countFormatter(r[c].browserTimes);t.data.mixBannerNum=s.mixBannerNum||0,t.handleDoubleFeedList(r),a.isError=!1,a.hasMore=!0}else a.firstLoad=!1,a.isError=!0,a.errInfo="没有数据~",a.hasMore=!1;t.sendLog({pos:"after",action:"pv"})}else a.isError=!0,a.errInfo="数据错误",a.hasMore=!1;t.setData(a)}},fail:function(e){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),t.setData({isError:!0,noMoreLiveFeed:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})}},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"}),n.setPageInfo&&n.setPageInfo({title:"解决你所有生活难题",keywords:"百度,百度经验,经验小程序",description:"百度经验小程序首页"})},onReachBottom:function(){this.getExpFeeds(this.data.isCheckedId),this.sendLog({pos:"pull-up-refresh",action:"success"})},onShareAppMessage:function(){return{title:"百度经验",content:"百度经验，解决你生活中的所有难题",path:C.getPagePath(I.PageName.Home),imgUrl:F.globalData.imgUrl}},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},oneItemClick:function(e){var t=this,i=e.currentTarget.dataset.cid;this.data.isCheckedId!==i&&(this.sendLog({pos:"tag",action:"click",cid:i}),this.intervalFeedList=[],this.setData({isCheckedId:i,feedList:null,pn:0},(function(){1===i?t.setData({firstLoad:!0}):t.getExpFeeds(i),t.scrolledHeight>t.homeTabTop&&n.pageScrollTo({scrollTop:t.homeTabTop,duration:0})})))},onPageScroll:function(e){var t=this;this.scrolledHeight=e.scrollTop;var i={},o=this.scrolledHeight+this.winHeight;Math.floor(e.scrollTop/(this.winHeight/2))!==this.prevScreen&&(this.prevScreen=Math.floor(e.scrollTop/(this.winHeight/2)),this.sendLog({pos:"user-action",action:"new-screen"})),this.homeTabTop||n.createSelectorQuery().select("#head-wrap").boundingClientRect().exec((function(e){t.homeTabTop=(e[0]?e[0].top:0)+t.scrolledHeight})),this.setBgColor(),!this.data.shouldFixed&&e.scrollTop>this.homeTabTop?i.shouldFixed=!0:this.data.shouldFixed&&e.scrollTop<=this.homeTabTop&&(i.shouldFixed=!1),this.sendMixBannerShowLog(o),this.setData(i),!this.grassViewLogShown&&this.grassListTop<o&&this.checkGrassVisible()},setBgColor:function(){var e={};this.data.shouldBackColorShow&&this.scrolledHeight<this.data.backColorHeight||!this.data.shouldBackColorShow&&this.scrolledHeight<this.data.backColorHeight?(e.shouldBackColorShow=!0,this.isSwiperBgShow=!0,this.setNavigationBgColor()):(e.shouldBackColorShow=!1,this.setNavigationBgColor("#ffffff"),this.isSwiperBgShow=!1),this.setData(e)},sendMixBannerShowLog:function(e){var t=this;this.mixBannerInfoList.forEach((function(i,o){var a=i.top,n=i.id;!i.isShow&&a<e&&(t.sendLog({pos:"home-feed-mix-banner",action:"show",id:n}),t.mixBannerInfoList[o].isShow=!0)}))},onUpdateMixBannerOffset:function(e){var t=e.detail,i=t.id,o=t.top;this.mixBannerInfoList.push({id:i,top:o,isShow:!1}),this.sendMixBannerShowLog(this.winHeight)},searchClick:function(e){if(this.sendLog({pos:"search-home",action:"click"}),this.data.searchBanner&&this.data.searchBanner.length){var t=this.selectComponent("#search-words-banner-wrap");t&&t.itemClickTrigger()}else C.jumpTo(I.PageName.Search);this.isSwiperBgShow=!1},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.pageStartTime)/1e3)})},childlog:function(e){this.sendLog(e.detail)},livetablog:function(e){var t=e.detail;t.cid=this.data.isCheckedId,this.sendLog(t)},sendLog:function(e){E(Object.assign({page:"home",url:C.getPagePath(I.PageName.Home),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3),from:this.from},e))},handleHeadItemClick:function(e){var t=parseInt(e.currentTarget.dataset.index,10),i=this.data.headImgList[t];if(i){var o=i.appKey,a=i.appPath,n=i.appParam,s=i.url,r=i.cover,c=i.roomId,d=i.type,l=i.onlyIos,h=i.notWebview;this.sendLog({pos:"head-swiper",type:d,index:t,url:r,action:"click"});var p={appKey:o,appPath:a,appParam:n,url:s,cover:r,roomId:c,type:d,onlyIos:l,notWebview:h,logData:{pos:"head-swiper",item:JSON.stringify(i)}};C.resourceJumpHandler(p)}},headSwiperItemShowLog:function(e){var t=this.data.headImgList[e];!this.headSwiperLogMap[e]&&t&&(this.headSwiperLogMap[e]=!0,this.sendLog({pos:"head-swiper",type:t.type,index:e,url:t.cover,action:"show"}))},handleHeadSwiperItemChange:function(e){var t=parseInt(e.detail.current,10),i=this.data.headImgList&&this.data.headImgList[t]?this.data.headImgList[t].bgColorRgb:"#ffffff";this.setData({currentSwiperIndex:t,topWrapBgColor:i}),this.setNavigationBgColor(i),this.headSwiperItemShowLog(t)},setNavigationBgColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.isSwiperBgShow&&!this.data.shouldGray){var t=e||(this.data.headImgList&&this.data.headImgList[this.data.currentSwiperIndex]?this.data.headImgList[this.data.currentSwiperIndex].bgColorRgb:"#ffffff"),i="#ffffff"===t?"#000000":"#ffffff";n.setNavigationBarColor({backgroundColor:t,frontColor:i}),n.setBackgroundColor({backgroundColorTop:t})}},handleDoubleFeedList:function(e){var t=e.map((function(e){var t=P({},e);return t.picUrl=C.procBosImg(t.picUrl,{w:498,h:798}),t}));this.intervalFeedList=this.intervalFeedList.concat(t),this.updateFeedInterval()},updateFeedInterval:function(){var e=this;if(clearTimeout(this.intervalFeedListId),this.intervalFeedList.length){var t=this.intervalFeedList.splice(0,8);t.length&&(this.setData({feedList:(this.data.feedList||[]).concat(t)}),this.intervalFeedListId=i((function(){e.updateFeedInterval()}),1e3))}}})})),window.define("108",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36"),P=e("24");Component({cacheStorageKey:"",properties:{jumpTo:{type:Object,value:null,observer:function(e,t){var i=this;e&&a.getStorage({key:this.getStorageKey(),success:function(e){e&&!e.data&&(i.setData({isShow:!0}),i.data.isBrand?i.sendLog({pos:"btn-goto-zhihuijinnang",action:"show"}):i.sendLog({pos:"spot",action:"render"}))}})}},bizSlotName:{type:String,value:"fixed-spot"},isBrand:{type:Boolean,value:!1}},externalClasses:["fix-bottom-bar"],data:{isShow:!1,platform:""},methods:{getStorageKey:function(){return this.cacheStorageKey||(this.cacheStorageKey=D.stringBuilder(P.fixedSpotPrefix,this.data.bizSlotName)),this.cacheStorageKey},onTap:function(){this.data.isBrand?this.sendLog({pos:"btn-goto-zhihuijinnang",action:"click"}):this.sendLog({pos:"spot-text",action:"click"});var e=this.data.jumpTo;e.logData={pos:"fixed-spot",item:JSON.stringify(e)},D.resourceJumpHandler(e)},close:function(){this.setData({isShow:!1}),this.data.jumpTo.showType!==P.fixedSpotShowTimes&&a.setStorage({key:this.getStorageKey(),data:!0}),this.sendLog({action:"click",pos:"close-btn"})},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"fixed-spot",bizSlotName:this.data.bizSlotName},e))}},pageLifetimes:{show:function(){var e=this,t=D.getSysInfoSync();this.data.platform=t.platform,a.getStorage({key:this.getStorageKey(),success:function(t){t&&(t.data||e.data.isShow?t.data&&e.data.isShow&&e.setData({isShow:!1}):e.setData({isShow:!0}))}})}}})})),window.define("115",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var P=e("24"),I=e("36"),C=e("34"),O=C.request;C.sendLog,n();Component({properties:{pageParams:{type:Object,value:null,observer:function(e,t){e&&e!==t&&this.getTopicDetail(e)}},page:String,minHeight:{type:String,value:""},liveFeedData:{type:Array,value:[],observer:function(e){if(e.length){var t=this.data.recommend;this.setData({recommend:t.concat(this.processRecommendData(e))})}}}},data:{constCardType:P.liveCardType,noMoreFeed:!1,live:[],schedule:[],recommend:[],subject:[]},methods:{getTopicDetail:function(e){var t=this;a.showLoading({title:"加载中"});var i=D({},e);O({url:I.getApiUrl(P.PageName.Live),data:i,success:function(e){a.hideLoading();var i=e.data;if(0===i.errNo){var o=i.data;o?t.setPageData(o):a.showToast({title:"数据获取失败,请返回重试",icon:"none",duration:4e3})}else a.showToast({title:"服务器繁忙,请返回重试",icon:"none",duration:4e3})},fail:function(e){a.hideLoading(),a.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3})}})},setPageData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={live:(t.live||[]).map((function(e,t){return D(D({},e),{},{index:t,browserTimes:I.countFormatter(e.browserTimes)})})),schedule:(t.schedule||[]).map((function(t,i){return t.schedule=I.countFormatter(t.schedule),D(D({},t),{},{index:i,formatDate:e.timestampToTime(t.date),type:P.liveStatus.subscribe})})),subject:(t.subject||[]).map((function(e,t){var i=e.list.map((function(e,t){return D(D({},e),{},{index:t,type:e.type||P.liveStatus.subscribe,browserTimes:I.countFormatter(e.browserTimes)})}));return D(D({},e),{},{list:i,index:t})})),recommend:this.processRecommendData(t.recommend),showPage:!0};this.setData(i,(function(){e.notifyRendered()}))},processRecommendData:function(e){return e&&e.length?e.map((function(e,t){return D(D({},e),{},{index:t,type:P.liveStatus.playback,browserTimes:I.countFormatter(e.browserTimes)})})):[]},timestampToTime:function(e){var t=new Date(1e3*e);return t.getMonth()+1+"-"+(this.formatNumber(t.getDate())+" ")+(this.formatNumber(t.getHours())+":")+this.formatNumber(t.getMinutes())},formatNumber:function(e){return e<10?"0"+e:e},notifyRendered:function(){this.triggerEvent("ready")},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["live-list"];e.component&&t.push(e.component),this.triggerEvent("sendlog",D(D({},e),{},{component:t.join("_")}))},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("113",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var P=e("24"),I=e("36");Component({properties:{cardType:{type:String,value:P.liveCardType.doubleFeed},item:{type:Object,value:null,observer:function(e){if(e){var t={};e.type===P.liveStatus.playback||"home-top-live"!==this.data.cardPosition&&e.type===P.liveStatus.live&&"single"!==e.showType?t.showPlayIcon=!0:e.type===P.liveStatus.subscribe&&(t.showSubscribeInfo=!0),t&&this.setData(t)}}},cardPosition:{type:String,value:"liveComp"}},data:{constCardType:P.liveCardType,constLiveStatus:P.liveStatus,supportSubscribe:!0,showPlayIcon:!1,showSubscribeInfo:!1},attached:function(){I.checkSDKVersionNotLessThan("3.150.1")||this.setData({supportSubscribe:!1})},methods:{itemClick:function(){var e=this.data.item,t=e.type,i=e.roomid,o=e.liveSrcType,a=e.encEid;switch(t){case P.liveStatus.live:this.jumpToLiveRoom(i,o);break;case P.liveStatus.playback:o===P.liveSrcType.enterRoom?this.jumpToLiveRoom(i,o):this.jumpToPlaybackPage(a)}},jumpToLiveRoom:function(e,t){this.sendLog(),I.jumpTo(P.PageName.LiveRoom,{roomid:e,liveSrcType:t,type:"live"})},jumpToPlaybackPage:function(e){this.sendLog(),I.jumpTo(P.PageName.Article,{eid:e})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.data.item,i=t.roomid,o=t.liveSrcType,a=t.encEid,n=["live-item-card"];e.component&&n.push(e.component);var s=this.data.cardPosition;"home-top-live"===s&&(s="live"),this.triggerEvent("sendlog",D(D({pos:s,action:"click",liveSrcType:o,roomid:i,eid:a},e),{},{component:n.join("_")}))},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("114",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("24"),P=e("36"),I=e("34"),C=I.request;I.sendLog,n();Component({isNV228Newer:!1,properties:{item:{type:Object,value:{browserTimes:0},observer:function(e){e&&e.subscribe&&this.setData({isSubscribed:!!e.subscribe})}},subscribeTemplateId:{type:String,value:"BD0307"}},data:{showLoading:!1,isSubscribed:!1,constLiveStatus:D.liveStatus},lifetimes:{attached:function(){this.isNV228Newer=P.checkSwanNativeVersionNotLessThan("2.27.0")}},methods:{getTemplateId:function(){return this.data.item.templateId||this.data.subscribeTemplateId},formSubmit:function(e){},checkLogin:function(e){var t=this,i=this.data.item.liveDataId,o=this.getTemplateId();a.checkSession({success:function(a){a.result?t.doLogin(i,e,o):t.showSubscribeFailToast(!0)},fail:function(a){if(a&&10009===a.errCode)t.doLogin(i,e,o);else{var n={liveDataIds:i,formId:e,templateId:o,authorizationCode:"",type:"add"};t.subscribLive(!0,n)}}})},doLogin:function(e,t,i){var o=this;a.login({success:function(a){if(a.code&&a.code.length>0){var n={liveDataIds:e,formId:t,templateId:i,authorizationCode:a.code,type:"add"};o.subscribLive(!0,n)}else o.showSubscribeFailToast(!0)},fail:function(e){o.showSubscribeFailToast(!0)}})},subscribLive:function(e,t){var i=this,o=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),a=t.formId,n=void 0===a?"":a,s=t.liveDataId,r=t.authorizationCode,c=t.templateId;n.endsWith(".1")&&""===r?this.doLogin(s,n,c):C({url:P.getApiUrl("subscribeLive"),data:o,success:function(t){0===t.data.errNo?e?i.changeSubscribeBtnStatus(!0,s):i.changeSubscribeBtnStatus(!1,s):i.showSubscribeFailToast(e)},fail:function(t){i.showSubscribeFailToast(e)},complete:function(){i.showLoading(!1)}})},cancelSubscribe:function(e,t){var i=this;a.subscribeService({templateId:t,subscribeId:e,type:"cancel",success:function(t){var o={liveDataId:e,type:"del"};i.subscribLive(!1,o)},fail:function(e){i.showSubscribeFailToast(!1)}})},onSubscribeTap:function(e){},changeSubscribeBtnStatus:function(e,t){this.setData({isSubscribed:e}),this.sendLog({pos:"subscribe-live",action:"click",liveDataId:t,liveType:e?"add":"del"})},showLoading:function(e){this.setData({showLoading:e})},showSubscribeFailToast:function(e){this.showLoading(!1),a.showToast({title:e?"预约失败，请重试":"取消预约失败，请重试",icon:"none",duration:4e3})},sendLog:function(e){this.triggerEvent("sendlog",e)}}})})),window.define("92",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I={home:0,feedBig:1,feedSmall:2,article:3,fullscreen:4,fullscreenAvatar:5,grassArticle:6,smallVideo:7},C=e("36"),O=e("24"),k=e("34"),E=k.request,F=(k.sendLog,s());Component({isFollowFirst:!0,authorViewFixedTop:-1,fixedHeight:50,isFirstFixed:!0,selfRect:null,viewType:{isArticle:!1,isGrassArticle:!1},properties:{viewNumData:{type:String,value:"",observer:function(e){if(e){this.viewNumDataReady=!0;var t=this.data.summary;2===this.authorInfoStatus&&(t.length>0?t+=" | "+e+"人看过":t=e+"人看过"),this.setData({summary:t})}}},updateTimeData:{type:String,value:"",observer:function(e){if(e){var t=this.data.summary;t=t.length>0?e+"更新 | "+t:e+"更新",this.setData({summary:t})}}},authorInfo:{type:Object,value:{},observer:function(e){var t={};e&&e.intro&&e.intro.length>0?(this.authorInfoStatus=1,t.summary=[this.data.summary,e.intro].join("")):(this.authorInfoStatus=2,this.viewNumDataReady&&this.data.summary&&(t.summary=[this.data.summary," | ",this.data.viewNumData,"人看过"].join("")));var i=!1,o="";if(e&&e.vType)switch(i=!0,e.vType){case 1:case 3:case 12:o="blue";break;case 2:case 13:o="yellow";break;case 11:o="red"}t.hasVType=i,t.vTypeCssColor=o,this.setData(t)}},type:{type:Number,value:I.home,observer:function(e){e&&(this.viewType=Object.assign({},this.viewType,this.getType(e)))}},isGrass:{type:Boolean,value:!1},previewFlag:{type:Boolean,value:!1},likeNum:{type:Number,value:0},eid:{type:String,value:""},riskGoUHome:{type:Boolean,value:!1},hasFollow:{type:Number,value:-1,observer:function(e){var t=1!==e;this.setData({canFollow:t}),this.updateBtnTipVisibility(t)}}},authorInfoStatus:0,viewNumDataReady:!1,data:{authorIntro:null,summary:"",hasVType:!1,vTypeCssColor:"",canFollow:!1,isLoading:!1,authorViewFixedTop:-1,isShowTip:!1},lifetimes:{ready:function(){this.triggerEvent("componentready",{component:"author-view"})}},methods:{updateBtnTipVisibility:function(e){var t=this;if(this.isFollowFirst&&e){var o=C.stringBuilder(O.followBtnTipPrefix,F.globalData.uniqueIds.SWANID);n.getStorageSync(o)||(this.setData({isShowTip:!0}),this.isFollowFirst=!1,n.setStorageSync(o,1),i((function(){t.setData({isShowTip:!1})}),3e3))}},onAvatarTap:function(){var e=this.data,t=e.previewFlag,i=e.authorInfo,o=e.riskGoUHome,a=e.type;if(!t&&i&&o&&i.uhome&&i.uhome.length>0){this.sendLog({pos:"author-avatar",action:"click",position:this.authorViewFixedTop>-1?"fixed":"normal"});var n={upgrade:"1",type:"hybrid",tplpath:"profile",tpl_id:"profile.html",newbrowser:"1",context:encodeURIComponent(JSON.stringify(i.uhome_info)),slog:encodeURIComponent(JSON.stringify({from:"swan",page:this.findKey(a),source:"jingyan_swan"}))};C.jumpTo(O.PageName.UserHomeNAPage,P({},n))}},findKey:function(e){return e=parseInt(e,10),Object.keys(I).find((function(t){return I[t]===e}))},onFollowBtnTap:function(){this.data.previewFlag||(this.followAuthor(),this.isFollowFirst=!1)},followAuthor:function(){var e=this;if(!this.data.isLoading&&this.data.authorInfo&&this.data.authorInfo.uid){var t=this.data.authorInfo;this.showLoading(!0);var i={eid:this.data.eid,bjhAppId:"uid|"+t.uid,type:this.data.canFollow?"follow":"unfollow"};E({url:C.getApiUrl("followAuthor"),data:i,method:"POST",success:function(i){if(e.showLoading(!1),i.data){if(0===i.data.errNo){var o=e.data.canFollow?"关注成功":"已取消关注";return e.setData({canFollow:!e.data.canFollow}),e.triggerEvent("followchanged",{uid:t.uid,canFollow:e.data.canFollow,position:e.authorViewFixedTop>-1?"fixed":"normal"}),void n.showToast({title:o,icon:"none"})}if(10000006===i.data.errNo)return void n.showToast({title:"关注用户已超上限",icon:"none"});if(10000004===i.data.errNo)return void n.showToast({title:"请登录后再重试",icon:"none"})}n.showToast({title:"关注失败请重试",icon:"none"})},fail:function(t){e.showLoading(!1),n.showToast({title:"关注失败请重试",icon:"none"})}})}},showLoading:function(e){this.setData({isLoading:e})},sendLog:function(e){this.triggerEvent("sendlog",P({component:"author-view",encEid:this.data.eid},e))},pageScroll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(this.viewType.isArticle||this.viewType.isGrassArticle)&&(this.selfRect?this.selfRect.top&&this.updateViewRectPosition(e,t):this.getBoundingRect(e))},updateViewRectPosition:function(e,t){var i=t;this.viewType.isArticle&&this.authorViewFixedTop>-1&&(i-=this.fixedHeight);var o=i+e;this.authorViewFixedTop<0&&o>=this.selfRect.top?(this.authorViewFixedTop=t,this.setData({authorViewFixedTop:this.authorViewFixedTop}),this.triggerEvent("childpositionchange",{component:O.fixedElementIdentName.authorView,position:"fixed",height:this.fixedHeight}),this.isFirstFixed&&(this.sendLog({pos:"author-view",action:"position-change",position:"fixed"}),this.isFirstFixed=!1)):this.authorViewFixedTop>-1&&(o<this.selfRect.top?(this.authorViewFixedTop=-1,this.setData({authorViewFixedTop:-1}),this.triggerEvent("childpositionchange",{component:O.fixedElementIdentName.authorView,position:"absolute",height:this.fixedHeight})):this.authorViewFixedTop<i&&(this.authorViewFixedTop=i,this.setData({authorViewFixedTop:this.authorViewFixedTop})))},getType:function(e){var t={};switch(e){case I.article:t.isArticle=!0;break;case I.grassArticle:t.isGrassArticle=!0}return t},getBoundingRect:function(e){var t=this;this.selfRect={},C.poll((function(e,i){n.createSelectorQuery().in(t).select(".js-author-article").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(i,o){i||(t.selfRect=o,t.selfRect.top+=e,t.viewType.isArticle&&(t.selfRect.top-=5))}))}}})})),window.define("97",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=(e("24"),{1:"article-bottom-mix-banner",2:"step-bottom-mix-banner",3:"rel-exp-item-mix-banner",4:"home-feed-mix-banner"});Component({properties:{option:{type:Object,value:null},type:{type:String,value:""}},data:{},methods:{onTap:function(){var e=x[this.data.type],t=this.data.option.id,i=this.data.option;this.sendLog({pos:e,id:t,action:"click"}),this.data.option.logData={pos:"mix-banner",item:JSON.stringify(i)},L.resourceJumpHandler(i)},sendLog:function(e){this.triggerEvent("sendlog",e)}},lifetimes:{attached:function(){var e=this,t=this;t.sendLog({pos:"mix-banner",action:"render"});var i=["#mix-banner-"+t.data.option.id].join("");L.poll((function(e,t){a.createSelectorQuery().select(i).boundingClientRect((function(i){i?e(i):t()})).exec()}),(function(i,o){i||a.createSelectorQuery().selectViewport().scrollOffset((function(i){var a=0;i&&i.scrollTop>0&&(a=i.scrollTop),e.triggerEvent("updateoffset",{top:o.top+a,id:t.data.option.id})})).exec()}))}}})})),window.define("101",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{picUrl:String,title:String,authorInfo:Object,browserTimes:{type:Number,value:0}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("89",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("24"),P=e("36"),I=e("28");Component({behaviors:[I],properties:{list:{type:Array,value:[],observer:function(e,t){if(this.data.directionRow){if(e&&e.length){var i=e.length,o=this.compData.winWidth,a={normalSpanVw:.019,lastSpanVw:.041,widthVw:.449};this.data.sameAuthor&&(a={normalSpanVw:.0217,lastSpanVw:.041,widthVw:.4219});var n=o*a.normalSpanVw*(i-1),s=o*a.lastSpanVw,r=o*a.widthVw*i+n+s+1;this.setData({rowWidth:r})}}else this.renderFeedList(e,t)}},directionRow:{type:Boolean,value:!1},sameAuthor:{type:Boolean,value:!1},shadow:{type:Boolean,value:!1},noMore:{type:Boolean,value:!1},isGrass:{type:Boolean,value:!0},from:String,scene:String},compData:{heightL:0,heightR:0,index:0,flag:"",heightRate:1.31115,winWidth:0,winHeight:0,maxFontLen:0,realHeight:0,titleLineHeight:21},data:{rowWidth:0,leftFeeds:[],rightFeeds:[],shownRecommendIds:[],encEid:"",likeNum:0,status:0},attached:function(){if(!this.compData.winWidth){this.compData.winWidth=a.getSystemInfoSync().windowWidth;var e=Math.floor((this.compData.winWidth-34-9)/2);this.compData.maxFontLen=Math.floor((e-14)/14),this.compData.realHeight=this.compData.heightRate*e}},detached:function(){},methods:{gotoGrassDetail:function(e){var t=e.currentTarget.dataset,i=t.eid,o=t.coverImage,a=t.isVideoGrass;P.jumpTo(D.PageName.Article,{eid:i,coverImage:o,from:this.data.from,scene:this.data.scene}),this.sendLog({action:"click",isVideoGrass:a,eid:i})},grassLikeHandler:function(e){var t=e.currentTarget.dataset,i=t.index,o=t.flag;this.compData.index=i,this.compData.flag=o;var a=this.data[o][i];this.setData({encEid:a.eid,likeNum:a.likeNum,status:a.hasLike})},likeSuccessHandler:function(e){this.changeLikeData({data:e}),this.sendLog({pos:"grass-feed-like",action:"click",isCancel:0})},cancelLikeSuccessHandler:function(e){this.changeLikeData({cancelLike:!0,data:e}),this.sendLog({pos:"grass-feed-like",action:"click",isCancel:1})},changeLikeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.compData,i=t.index,o=t.flag,a={},n="".concat(o,"[").concat(i,"].hasLike"),s="".concat(o,"[").concat(i,"].likeNum");e.cancelLike?a[n]=0:a[n]=1,a[s]=e.data.likeNum,this.setData(a)},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},clearData:function(){this.setData({leftFeeds:[],rightFeeds:[],shownRecommendIds:[]}),this.compData.heightL=0,this.compData.heightR=0},renderFeedList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0!==t.length){var o=t.slice(i.length),a=this.data.leftFeeds.slice(0),n=this.data.rightFeeds.slice(0),s=this.compData.heightL,r=this.compData.heightR;o.forEach((function(i,o){var c=e.compData.realHeight;Math.floor(e.getLength(t[o].title)/2)>e.compData.maxFontLen?c+=2*e.compData.titleLineHeight:c+=e.compData.titleLineHeight,s>r?(r+=c,i.flag="rightFeeds",i.index=n.length,n.push(i)):(s+=c,i.flag="leftFeeds",i.index=a.length,a.push(i))})),this.setData({leftFeeds:a,rightFeeds:n}),this.compData.heightL=s,this.compData.heightR=r}else this.clearData()},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"zhongcao-feed",pos:"grass-feed-item",sameAuthor:this.data.sameAuthor?1:0},e))},checkVisible:function(){var e=this;if(!(this.data.shownRecommendIds.length>=this.data.list.length)){this.compData.winHeight||(this.compData.winHeight=a.getSystemInfoSync().windowHeight);var t=this.compData,i=t.winHeight,o=t.winWidth;a.createSelectorQuery().in(this).selectAll(".exp-card-list-item").boundingClientRect((function(t){var a=e.data.shownRecommendIds.slice(0);(t||[]).forEach((function(t,n){var s=t.dataset.eid;a.includes(s)||t.left>=o||t.top>=i||(a.push(s),e.triggerEvent("onvisible",{ids:a}),e.sendLog({action:"show",index:n,eid:s}),e.setData({shownRecommendIds:a}))}))})).exec()}},emptyFn:function(){}}})})),window.define("28",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24"),D=e("34").request;n();t.exports=Behavior({behaviors:[],properties:{likeNum:{type:Number,observer:function(e,t){this.likeNumHandler(e)}},commentNum:{type:Number,value:0,observer:function(e,t){this.commentNumHandler(e)}},status:Number,encEid:String,isGrass:{type:Boolean,value:!1},from:String,scene:String,isBottomBar:Boolean},data:{log:"",likeData:"",commentData:"",versionSupportComment:!1,hideLeftBtn:!0,likeNumShowFlag:!1},attached:function(){this.data.likeNum&&this.likeNumHandler(this.data.likeNum);var e=!1,t=!0;this.data.from===x.From.baobaoApp&&(t=!1);var i=!1;t&&L.checkSDKVersionNotLessThan("3.180.3")&&L.checkSwanNativeVersionNotLessThan("2.27.0")&&(i=!0,this.data.isBottomBar&&this.sendLog({pos:"can-use-comment",action:"render"})),this.data.isGrass&&(e=!0),this.setData({likeNumShowFlag:!0,hideLeftBtn:e,versionSupportComment:i})},methods:{debuglog:function(e){this.setData({log:this.data.log+"-------"+e})},likeNumHandler:function(e){this.data.isBottomBar?this.setData({likeData:L.countFormatterSmall(e)}):this.setData({likeData:L.countFormatter(e)})},commentNumHandler:function(e){this.data.isBottomBar?this.setData({commentData:L.countFormatterSmall(e)}):this.setData({commentData:L.countFormatter(e)})},likeHandler:L.throttle((function(){var e=this;0===this.data.status||2===this.data.status||3===this.data.status?D({url:L.getApiUrl("feedback"),method:"POST",data:{eid:this.data.encEid,type:1},onBduss:function(){var t={status:1,likeNum:e.data.likeNum+1};switch(e.triggerEvent("feedback",t),e.data.status){case 0:case 3:e.likeSuccessHandler(t);break;case 2:e.likeAfterDislikeSuccessHandler()}e.data.isGrass?a.showToast({title:"感谢点赞~",icon:"none"}):a.showToast({title:"收到你的点赞，感谢支持",icon:"none"})}},!0):1===this.data.status&&D({url:L.getApiUrl("feedback"),method:"POST",data:{eid:this.data.encEid,type:5},onBduss:function(){var t={status:3,likeNum:e.data.likeNum-1};e.triggerEvent("feedback",t),e.cancelLikeSuccessHandler(t)}},!0)}),800),likeSuccessHandler:function(){},likeAfterDislikeSuccessHandler:function(){},cancelLikeSuccessHandler:function(){},dislikeHandler:function(){},shareHandler:function(){this.triggerEvent("share")},addCommentHandler:function(){this.selectComponent("#commentPopup").addComment(),this.addCommentClickLog()},openCommentHandler:function(){this.selectComponent("#commentPopup").showListPopup(),this.openCommentClickLog()},addCommentClickLog:function(){},openCommentClickLog:function(){}}})})),window.define("124",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24");Component({properties:{type:{type:Number,value:x.needLoginCompType.login},data:{type:Object,value:void 0}},data:{isNV228Newer:!1,needLoginCompType:x.needLoginCompType},lifetimes:{attached:function(){var e=L.checkSwanNativeVersionNotLessThan("2.27.0");e&&this.setData({isNV228Newer:e})}},methods:{loginHandler:function(e){e&&e.detail&&"login:ok"===e.detail.errMsg?this.triggerEvent("success",this.data.data):this.triggerEvent("fail",e.detail)},loginViewHandler:function(e){this.checkSeesion()},checkSeesion:function(){var e=this;a.checkSession({success:function(t){e.triggerEvent("success",e.data.data)},fail:function(t){e.doLogin()}})},doLogin:function(){var e=this;a.login({success:function(t){e.triggerEvent("success",e.data.data)},fail:function(t){e.triggerEvent("fail",t)}})},viewTapHandler:function(){this.triggerEvent("success",this.data.data)}}})})),window.define("99",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36");Component({swiperLogMap:{},currentSwiperIndex:0,properties:{list:{type:Array,value:[]}},externalClasses:["search-words-class"],lifetimes:{ready:function(){this.swiperItemShowLog(0)}},methods:{itemClickHandler:function(e){var t=this.data.list[e];t.logData={pos:"search-words-banner",item:JSON.stringify(t)},this.sendLog({pos:"search-words-banner-swiper",index:e,itemId:t.id,wd:t.title,action:"click"}),D.resourceJumpHandler(t)},itemClick:function(e){var t=e.currentTarget.dataset.index;this.itemClickHandler(t)},itemClickTrigger:function(){this.itemClickHandler(this.currentSwiperIndex)},swiperItemShowLog:function(e){var t=this.data.list[e];!this.swiperLogMap[e]&&t&&(this.swiperLogMap[e]=!0,this.sendLog({pos:"search-words-banner-swiper",index:e,itemId:t.id,wd:t.title,action:"show"}))},swiperChange:function(e){var t=parseInt(e.detail.current,10);this.currentSwiperIndex=t,this.swiperItemShowLog(t)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"search-words-banner"},e))}}})})),window.define("94",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("36"),I=e("24");s();Component({feedItemPvMap:[],calcOffsetTimeout:!1,feedOffset:[],leftFeedHeight:0,rightFeedHeight:0,properties:{feedsData:{type:Array,value:null,observer:function(e){if(e&&e.length){var t=this.data.leftFeeds.length+this.data.rightFeeds.length;this.dataSplitHandler(e.slice(t))}else this.clearFeeds()}},tabFixedTop:{type:Number,value:0},tabViewHeight:{type:Number,value:0},topBarHeight:{type:Number,value:0},extra:{type:String,value:""},pageName:{type:String,value:""},minHeight:{type:Number,value:0}},data:{leftFeeds:[],rightFeeds:[]},lifetimes:{attached:function(){var e=P.getSysInfoSync(),t=e.windowWidth,i=e.windowHeight;this.winWidth=t,this.winHeight=i},ready:function(){this.triggerEvent("componentready")}},methods:{clearFeeds:function(){this.feedItemPvMap=[],this.leftFeedHeight=0,this.rightFeedHeight=0,this.setData({leftFeeds:[],rightFeeds:[]})},itemClick:function(e){var t=e.currentTarget.dataset.id,i=e.currentTarget.dataset.sid,o=e.currentTarget.dataset.type,a=e.currentTarget.dataset.coverImage||"";if("showlist"===o)this.sendLog({itemType:"showlist",action:"click",sidEnc:i}),P.jumpTo({appKey:I.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:i,extra:this.data.extra}});else if("article"===o)this.sendLog({itemType:"article",action:"click",encEid:t}),P.jumpTo(I.PageName.Article,{eid:t,coverImage:a,extra:this.data.extra});else if("video"===o||"smallVideo"===o)this.sendLog({itemType:"video",action:"click",encEid:t}),P.jumpTo(I.PageName.Article,{eid:t,coverImage:a,extra:this.data.extra});else if("live"===o){var n=e.currentTarget.dataset.roomid,s=e.currentTarget.dataset.liveSrcType;this.sendLog({itemType:"live",action:"click",roomid:n}),P.jumpTo(I.PageName.LiveRoom,{roomid:n,liveSrcType:s,type:this.data.pageName,extra:this.data.extra})}},dataSplitHandler:function(e){for(var t=this,o=this.leftFeedHeight,a=this.rightFeedHeight,n=this.data.leftFeeds.slice(0),s=this.data.rightFeeds.slice(0),r=Math.floor(.487*(this.winWidth-34)),c=0;c<e.length;c++){var d=e[c].rate*r;d>248?d=248:d<104&&(d=104),"video"===e[c].type&&(2===e[c].screen_vh?(e[c].type="smallVideo",d=1.626*r):d=.5625*r),"mixBanner"===e[c].type&&(d=.7608*r),"live"===e[c].type&&(d=1.56*r),e[c].height=d,"showlist"===e[c].type&&(d=r+32),this.getLength(e[c].title)>18?d+=90:d+=70,o>a?(a+=d,s.push(e[c])):(o+=d,n.push(e[c]))}this.leftFeedHeight=o,this.rightFeedHeight=a,this.setData({leftFeeds:n,rightFeeds:s},(function(){i((function(){t.calcFeedItemRectBounding()}),1e3)}))},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"double-feed",pos:"double-feed-item"},e))},calcFeedItemRectBounding:function(e,t){var o=this;this.calcOffsetTimeout||(this.calcOffsetTimeout=i((function(){o.calcOffsetTimeout=!1,n.createSelectorQuery().in(o).selectAll(".feed-item").boundingClientRect().exec((function(a){var s=o.feedItemPvMap.length;if(a&&a[0]&&a[0][s]){var r=a[0].slice(s);n.createSelectorQuery().selectViewport().scrollOffset((function(a){var n=0;a&&a.scrollTop>0&&(n=a.scrollTop);var c=r.map((function(e,t){var i=e.top+n,a=o.data.feedsData[s+t];return{logged:!1,top:i,bottom:i+e.height,eidEnc:a.eidEnc,type:a.type}}));o.feedItemPvMap=o.feedItemPvMap.concat(c),i((function(){o.calcFeedItemShowLog(n,o.data.topBarHeight)}),50),"function"==typeof t&&t(e)})).exec()}else o.calcFeedItemRectBounding(e,t)}))}),10))},pageScroll:function(e,t){this.calcFeedItemShowLog(e,t)},calcFeedItemShowLog:function(e,t){for(var i=(e>this.data.tabFixedTop?e+this.data.tabViewHeight:e)+t,o=e+this.winHeight,a=this.feedItemPvMap.length,n=0;n<a;n++){var s=this.feedItemPvMap[n];if(!s.logged&&(s.top>i&&s.top<o||s.bottom<o)){var r=this.data.feedsData[n];r&&(this.sendLog({action:"show",index:n,feedEid:r.eidEnc,itemType:r.type,isFirstShow:!0}),s.logged=!0)}}}}})})),window.define("149",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L,x=e("7")(e("6")),D=e("24"),P=e("36"),I=e("34"),C=I.request,O=I.sendLog,k=n();Page((L={topCardResultBannerStyle:{itemWidthPercentage:.29307,itemPadded:8,padding:14},winWidth:0,winHeight:0,prevScreen:0,pageStartTime:0,data:{pageName:D.PageName.Search,getDataUrl:D.PageName.Search,autoFocus:!1,arraySug:[],arrayHistory:[],searchTermList:[],showDefaultSection:!0,emptyStr:"",keyword:"",placeholder:"",page:0,scrollTop:0,noData:!1,isError:!1,errInfoObj:{btnEvtType:D.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},errInfo:"",startTime:0,firstLoad:!0,list:[],topCardResultBanner:[],hilights:"",pageUUID:""},onLoad:function(e){var t=e.placeholder,i=P.getSysInfoSync(D.PageName.Search);this.winWidth=i.windowWidth,this.winHeight=i.windowHeight;var o={startTime:Date.now(),autoFocus:!0};t&&(o.placeholder=t),this.setData(o),this.getSearchTerm(),a.setBackgroundColor({backgroundColor:"#f5f5f5"})},onShow:function(){this.setData({startTime:Date.now()})},onHide:function(){this.setData({autoFocus:!1}),this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.data.startTime)/1e3)})},calcTopCardMediaListWidth:function(e){var t=this.topCardResultBannerStyle,i=t.itemWidthPercentage,o=t.itemPadded,a=t.padding;return e*(i*this.winWidth)+2*a+o*(e-1)},sendResultBannerShowLog:function(e){var t=this;e.forEach((function(e){t.sendLog({pos:"top-card-result-banner",wd:t.data.keyword,eid:e.eid,action:"show"})}))},getExpFeeds:function(){var e=this;a.showLoading({title:"加载中"}),C({url:P.getApiUrl(this.data.getDataUrl),data:{wd:this.data.keyword,page:this.data.page},success:function(t){a.hideLoading();var i=t.data;if(0===i.errno){var o=i.data,n=o.resultBanner,s=o.searchList;if(n&&n.length&&(n.forEach((function(t){t.mediaListWidth=e.calcTopCardMediaListWidth(t.content.count)})),e.setData({topCardResultBanner:n}),e.sendResultBannerShowLog(n)),s&&s.length>0){for(var r=s,c=0;c<r.length;c++)r[c].browserTimes>=1e4&&(r[c].browserTimes=Math.floor(r[c].browserTimes/1e4)+"w");e.setData({noData:!1,list:e.data.list.concat(r)})}else e.setData({noData:!0,errInfo:"没有数据~"})}else e.setData({isError:!0,errInfo:"数据错误"})},fail:function(t){a.hideLoading(),e.setData({isError:!0,errInfoObj:{btnEvtType:D.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})},getSug:function(){var e=this;C({url:P.getApiUrl("getSug"),data:{wd:this.data.keyword,noData:!1},success:function(t){var i=t.data;0===i.errno?i.data.contentRes&&i.data.contentRes.length>0&&e.setData({arraySug:i.data.contentRes}):e.setData({isError:!0,errInfo:"数据错误"})}})},getSearchTerm:function(){var e=this;C({url:P.getApiUrl("getSearchTerm"),success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.bannerTerm;if(o&&o.length>0){e.setData({searchTermList:o});var a=o.map((function(e){return e.id}));e.sendLog({pos:"search-term",action:"show",itemIds:a.join(",")})}}}})},searchTermClick:function(e){var t=e.currentTarget.dataset.index,i=this.data.searchTermList[t];this.sendLog({pos:"search-term",action:"click",itemId:i.id}),P.resourceJumpHandler(i)},onReady:function(){var e=(new Date).getTime();this.pageStartTime=e,this.setData({pageUUID:e+Math.random()}),this.sendLog({pos:"before",action:"pv"});var t=a.getStorageSync(k.globalData.uniqueIds.SWANID);""===this.data.keyword&&this.setData({arrHistory:t,noData:!1})},hideDefaultSection:function(){this.data.showDefaultSection&&this.setData({showDefaultSection:!1})},showDefaultSectionHandler:function(){this.setData({arrHistory:a.getStorageSync(k.globalData.uniqueIds.SWANID),arraySug:[],showDefaultSection:!0})},gotoSearch:function(e){e&&(this.setData({emptyStr:e,keyword:e,hilights:e,arraySug:[],page:0,getDataUrl:D.PageName.Search}),this.clearData(),this.hideDefaultSection(),this.getExpFeeds(),this.setStorageHistory(),e===this.data.placeholder&&this.sendLog({pos:"search-words-banner",wd:e,action:"search"}))},searchClick:function(e){var t=e.detail.value||this.data.placeholder;this.gotoSearch(t),this.sendLog({pos:"search-input",action:"click"})},searchBtnClick:function(){var e=this.data.keyword||this.data.placeholder;this.gotoSearch(e)},setStorageHistory:function(){var e=a.getStorageSync(k.globalData.uniqueIds.SWANID),t=[];if(e.length>0&&(t=e),""!==this.data.keyword.trim()){var i=t.indexOf(this.data.keyword);i>-1&&t.splice(i,1),t.unshift(this.data.keyword),t.length>10&&t.splice(10,1)}try{a.setStorageSync(k.globalData.uniqueIds.SWANID,t)}catch(e){}},delClick:function(e){this.setData({emptyStr:"",keyword:"",autoFocus:!0,noData:!1}),this.showDefaultSectionHandler(),this.clearData()},searchFocus:function(e){this.setData({noData:!1}),this.clearData()},searchBlur:function(e){this.setData({autoFocus:!1})},searchInput:P.throttle((function(e){var t=e.detail.value.trim();this.setData({keyword:t}),t?(this.getSug(),this.hideDefaultSection(),this.clearData()):this.showDefaultSectionHandler()}),300),onReachBottom:function(){this.setData({page:this.data.page+1,getDataUrl:"getSearchData",noData:!1}),this.data.list.length>0&&this.getExpFeeds(),this.sendLog({pos:"pull-up-refresh",action:"success"})},onShareAppMessage:function(){return{title:"百度经验",content:"百度经验，解决你生活中的所有难题",path:P.getPagePath(D.PageName.Search),imgUrl:k.globalData.imgUrl}},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},clearData:function(){var e=this.data,t=e.list,i=e.topCardResultBanner;(t.length||i.length)&&this.setData({list:[],topCardResultBanner:[]})},cancelClick:function(e){a.navigateBack()}},(0,x.default)(L,"onShareAppMessage",(function(){return{title:"百度经验",content:"百度经验，解决你生活中的所有难题",path:"pages/home/home",imgUrl:k.globalData.imgUrl}})),(0,x.default)(L,"topCardResultClick",(function(e){var t=e.currentTarget.dataset.eid;P.jumpTo(D.PageName.Article,{eid:t}),this.sendLog({pos:"top-card-result-banner",wd:this.data.keyword,eid:t,action:"click"})})),(0,x.default)(L,"clearClick",(function(e){this.setData({arrHistory:[]});try{a.removeStorageSync(k.globalData.uniqueIds.SWANID)}catch(e){}})),(0,x.default)(L,"sugClick",(function(e){var t=e.currentTarget.dataset,i=t.content,o=t.type;this.gotoSearch(i),this.sendLog({pos:"search-"+o,action:"click"})})),(0,x.default)(L,"onPageScroll",(function(e){Math.floor(e.scrollTop/(this.winHeight/2))!==this.prevScreen&&(this.prevScreen=Math.floor(e.scrollTop/(this.winHeight/2)),this.sendLog({pos:"user-action",action:"new-screen"}))})),(0,x.default)(L,"onUnload",(function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round(((new Date).getTime()-this.pageStartTime)/1e3)})})),(0,x.default)(L,"sendLog",(function(e){O(Object.assign({page:"search",url:P.getPagePath(D.PageName.Search),pageUUID:this.data.pageUUID,TimeOnPage:Math.round(((new Date).getTime()-this.pageStartTime)/1e3)},e))})),L))})),window.define("116",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36");Component({properties:{errData:{type:Object,value:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"\b\b重新加载",url:"",is404Error:!1,btnText2:"搜索其他经验"},observer:function(e,t){}},url:{type:String,value:"pages/home/home"}},data:{winHeight:0},attached:function(){var e=x.getSysInfoSync();this.setData({winHeight:e.windowHeight})},detached:function(){},methods:{onTapHandler:function(){switch(this.data.errData.btnEvtType){case L.ELoadFailBtnType.goHome:this.goHome();break;case L.ELoadFailBtnType.reLoad:this.goReload();break;case L.ELoadFailBtnType.goBack:this.goBack();break;default:this.goReload()}},onTapHandlerGoSearch:function(){this.goSearch()},goBack:function(){a.navigateBack()},goReload:function(){a.redirectTo({url:/^\//.test(this.data.url)?this.data.url:"/"+this.data.url})},goHome:function(){a.reLaunch({url:L.PagePath[L.PageName.Home]})},goSearch:function(){a.navigateTo({url:L.PagePath[L.PageName.Search]})}}})})),window.define("95",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{hilights:{type:String,value:""},content:{type:String,value:"",observer:function(e){e&&this.renderContent()}}},externalClasses:["high-light-class","content-class"],data:{newContentArr:[]},methods:{keywordsHighLight:function(e,t){var i="%%",o=/(\[|\]|[*.?+$^(){}|\\\/])/g,a=t;o.test(t)&&(a=t.replace(o,"\\$1"));var n=new RegExp("("+a+")","gi");return e.replace(n,"".concat(i,"$1").concat(i)).split(i)},renderContent:function(){var e=this.data,t=e.content,i=e.hilights,o=this.keywordsHighLight(t,i);this.setData({newContentArr:o})}}})})),window.define("40",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("36"),I=e("24"),C=e("27"),O=0,k=0,E=744/558,F=315/558,A=0,B="article",j="videoFeed",H="txtAd",N="imgAd",M=0,V=1;Component({feedsCount:0,winWidth:0,winHeight:0,feedItemPvMap:[],feedOffset:[],leftFeedHeight:0,rightFeedHeight:0,behaviors:[C],properties:{encEid:{type:String,value:""},feedsData:{type:Array,value:null,observer:function(e){if(e&&e.length){var t=this.data.leftFeeds.length+this.data.rightFeeds.length;this.dataSplitHandler(e.slice(t))}else this.clearFeeds()}},topBarHeight:{type:Number,value:0},bottomBarHeight:{type:Number,value:0},pageName:{type:String,value:"article"},query:{type:String,value:""},experimentId:{type:String,value:""},scene:{type:String,value:""},from:{type:String,value:""}},data:{leftFeeds:[],rightFeeds:[],isDynamicLibAd:!1},lifetimes:{attached:function(){var e=P.getSysInfoSync("double-feed");this.winWidth=e.windowWidth,this.winHeight=e.windowHeight-this.data.bottomBarHeight,O=.4895*(e.windowWidth-34),k=(O-20)/16*2,A=(O-24)/16*2},ready:function(){var e=this;this.data.feedsData&&this.data.feedsData.length&&(n.createSelectorQuery().in(this).select(".rel-exp").boundingClientRect((function(t){t&&e.triggerEvent("componentready",{top:t.top})})),this.addEventBusListener("pagescroll",(function(t,i){e.pageScroll(i.scrollTop)})),this.addEventBusListener("foodListHeightChange",(function(t,i){e.updateFeedItemPvMap(e.feedItemPvMap,i.value)})),this.addEventBusListener("ad947HeightChange",(function(t,i){e.updateFeedItemPvMap(e.feedItemPvMap,i.value)})))}},methods:{clearFeeds:function(){this.feedItemPvMap=[],this.leftFeedHeight=0,this.rightFeedHeight=0,this.setData({leftFeeds:[],rightFeeds:[]})},itemClick:function(e){var t=e.currentTarget.dataset,i=t.eid,o=t.type,a=t.coverImage,n=t.index;o===B?(this.sendLog({itemType:B,action:"click",index:n,feedEid:i}),P.jumpTo(I.PageName.Article,{eid:i,coverImage:a})):o===j&&(this.sendLog({itemType:j,index:n,action:"click"}),P.jumpTo(I.PageName.VideoFeed,{eid:this.data.encEid,index:0,query:this.data.query,scene:this.data.scene,from:this.data.from,fromAnchor:this.data.fromAnchor,extra:JSON.stringify({experimentId:this.data.experimentId,fromPage:this.data.pageName,fromPosition:"rel-exp-double-feed"})}))},calcImgHeight:function(e){return O*e},calcItemHeight:function(e){if(e.type===B){var t=50,i=e.picRate;return i>E?i=E:i<F&&(i=F),e.paddingTop=100*i,t+=this.calcImgHeight(i),t+=23,this.getLength(e.title)>k&&(t+=23),t}if(H===e.type)return 0;if(N===e.type)return 0;if(e.type===j){var o=58;return o+=this.calcImgHeight(.7964),o+=23,this.getLength(e.title)>A&&(o+=23),o}},shouldInsertIntoLeft:function(e,t,i){return e<=t+40},preconditionItemDataHandler:function(e){return!e.picRate&&e.rate&&(e.picRate=e.rate),"video"===e.type&&(e.type=B,e.hasVideo=1),e},dataSplitHandler:function(e){for(var t=this,o=this.leftFeedHeight,a=this.rightFeedHeight,n=this.data.leftFeeds.slice(0),s=this.data.rightFeeds.slice(0),r=0;r<e.length;r++){var c=this.preconditionItemDataHandler(e[r]);c.index=this.feedsCount;var d=this.calcItemHeight(c);this.shouldInsertIntoLeft(o,a,d)?(c.dfPos=M,n.push(c),o+=d):(c.dfPos=V,s.push(c),a+=d),this.feedsCount++}this.leftFeedHeight=o,this.rightFeedHeight=a,this.setData({leftFeeds:n,rightFeeds:s},(function(){i((function(){t.calcFeedItemRectBounding()}),1e3)}))},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"double-feed",pos:"double-feed-item",encEid:this.data.encEid},e))},calcFeedItemRectBounding:function(){var e=this;P.poll((function(t,i){n.createSelectorQuery().in(e).selectAll(".feed-item").boundingClientRect((function(o){var a=e.feedItemPvMap.length;o&&o.length?t(o.slice(a)):i()})).exec()}),(function(t,o){t||n.createSelectorQuery().selectViewport().scrollOffset((function(t){var a=0;t&&t.scrollTop>0&&(a=t.scrollTop),o.forEach((function(t){var i=t.top+a,o=e.data.feedsData[t.dataset.index];e.feedItemPvMap.push({logged:!1,top:i,bottom:i+t.height,eidEnc:o.eidEnc,type:o.type,index:o.index,dfPos:o.dfPos})})),i((function(){e.calcFeedItemShowLog(a)}),50)})).exec()}))},pageScroll:function(e){this.calcFeedItemShowLog(e)},calcFeedItemShowLog:function(e){var t=this,i=this.data.topBarHeight,o=(e>this.data.tabFixedTop?e+this.data.tabViewHeight:e)+i,a=e+this.winHeight;this.feedItemPvMap.forEach((function(e){e.logged||(e.top>o&&e.top<a||e.bottom<a)&&(t.sendLog({action:"show",index:e.index,feedEid:e.eidEnc,itemType:e.type,isFirstShow:!0}),e.logged=!0)}))},updateFeedItemPvMap:function(e,t){e.forEach((function(e){e.top+=t,e.bottom+=t}))},adHeightUpdate:function(e){var t=e.height,i=e.dfPos;i===M?this.leftFeedHeight+=t:this.rightFeedHeight+=t;var o=this.feedItemPvMap.filter((function(t){return t.dfPos===i&&t.index>e.index}));this.updateFeedItemPvMap(o,t)},feedAdLoadHlr:function(e){var t=this;this.sendLog({pos:"feedAd",action:"load",index:e.currentTarget.dataset.index});var i=e.currentTarget.dataset,o=i.index,a=i.dfPos,s=["#double-feed-ad-"+o].join("");P.poll((function(e,i){n.createSelectorQuery().in(t).select(s).boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(e,i){e||n.createSelectorQuery().selectViewport().scrollOffset((function(e){var n=0;e&&e.scrollTop>0&&(n=e.scrollTop),t.adHeightUpdate({top:i.top+n,height:i.height,index:o,dfPos:a})})).exec()}))},feedAdErrHlr:function(e){this.sendLog({pos:"feedAd",action:"error",index:e.currentTarget.dataset.index})},feedAdClickHlr:function(e){this.sendLog({pos:"feedAd",action:"click",index:e.currentTarget.dataset.index})}}})})),window.define("27",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=n().globalData.eventBus;t.exports=Behavior({behaviors:[],properties:{pageUUID:Number},eventPrefixUnique:"",eventBusNames:[],data:{},lifetimes:{attached:function(){this.eventPrefixUnique=this.getUniquePageID(),this.eventBusNames=[]},detached:function(){this.destroyEventBusListener()}},methods:{getUniquePageID:function(){var e=this.data.pageUUID;if(!e){var t=getCurrentPages();e=t[t.length-1].data.pageUUID}return e},getUniqueEventName:function(e){return"".concat(this.eventPrefixUnique,"_").concat(e)},addEventBusListener:function(e,t){var i=this.getUniqueEventName(e);L.on(i,(function(e,i){"function"==typeof t&&t(e,i)})),this.eventBusNames.push(i)},triggerEventBusListener:function(e,t){var i=this.getUniqueEventName(e);L.emit(i,t)},destroyEventBusListener:function(){this.eventBusNames.forEach((function(e){L.off(e)}))}}})})),window.define("38",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I={articleTopAuthor:1,articleBottomAuthor:2,doubleFeed:3},C=e("36"),O=e("24"),k=e("34"),E=k.request,F=(k.sendLog,s());Component({isFollowFirst:!0,properties:{viewCount:{type:String,value:"",observer:function(e){if(e)if(this.data.type===I.articleTopAuthor){var t=this.data.summary;this.setData({summary:[t,t.length?" | ":"",C.countFormatter(e),"人看过"].join("")})}else this.data.type===I.doubleFeed&&("string"==typeof e&&e.indexOf("w")||(e=C.countFormatter(e)),this.setData({viewCountStr:e}))}},updateTime:{type:String,value:"",observer:function(e){if(e&&this.data.type===I.articleTopAuthor){var t=this.data.summary;this.setData({summary:[C.timespanFormatter(e),"更新"].concat(t.length?[" | ",t]:[]).join("")})}}},authorInfo:{type:Object,value:{},observer:function(e){var t={};if(e&&e.vType)switch(e.vType){case 1:case 3:case 12:t.vType="blue";break;case 2:case 13:t.vType="yellow";break;case 11:t.vType="red"}this.data.type===I.articleBottomAuthor&&(e.expNum>=5?t.summary=C.stringBuilder("共贡献了",C.countFormatter(e.expNum),"篇经验，关注我吧！"):t.vType?t.summary=e.desc:t.summary="觉得有用的话就动动小手关注我吧！"),this.setData(t)}},type:{type:Number,value:I.articleTopAuthor},eid:{type:String,value:""},hasFollow:{type:Number,value:-1,observer:function(e){var t=1!==e;this.setData({canFollow:t}),this.updateBtnTipVisibility(t)}},withStyle:{type:String,value:""},riskGoUHome:{type:Boolean,value:!1}},data:{summary:"",vType:"",canFollow:!1,isLoading:!1,isShowTip:!1,viewCountStr:""},lifetimes:{ready:function(){this.sendLog({pos:"author-view",action:"render"})}},methods:{updateBtnTipVisibility:function(e){var t=this;if(this.isFollowFirst&&e){var o=C.stringBuilder(O.followBtnTipPrefix,F.globalData.uniqueIds.SWANID);n.getStorageSync(o)||(this.setData({isShowTip:!0}),this.isFollowFirst=!1,n.setStorageSync(o,1),i((function(){t.setData({isShowTip:!1})}),3e3))}},onAvatarTap:function(){var e=this.data,t=e.authorInfo,i=e.riskGoUHome,o=e.type;if(t&&i&&t.uhome&&t.uhome.length>0){this.sendLog({pos:"author-avatar",action:"click"});var a={upgrade:"1",type:"hybrid",tplpath:"profile",tpl_id:"profile.html",newbrowser:"1",context:encodeURIComponent(JSON.stringify(t.uhome_info)),slog:encodeURIComponent(JSON.stringify({from:"swan",page:this.findKey(o),source:"jingyan_swan"}))};C.jumpTo(O.PageName.UserHomeNAPage,P({},a))}},findKey:function(e){return e=parseInt(e,10),Object.keys(I).find((function(t){return I[t]===e}))},onFollowBtnTap:function(){this.followAuthor(),this.isFollowFirst=!1},followAuthor:function(){var e=this;if(!this.data.isLoading&&this.data.authorInfo&&this.data.authorInfo.uid){var t=this.data.authorInfo;this.showLoading(!0);var i={eid:this.data.eid,bjhAppId:"uid|"+t.uid,type:this.data.canFollow?"follow":"unfollow"};E({url:C.getApiUrl("followAuthor"),data:i,method:"POST",success:function(i){if(e.showLoading(!1),i.data){if(0===i.data.errNo){var o=e.data.canFollow?"关注成功":"已取消关注";return e.setData({canFollow:!e.data.canFollow}),e.triggerEvent("followchanged",{viewType:e.data.type,uid:t.uid,canFollow:e.data.canFollow}),void n.showToast({title:o,icon:"none"})}if(10000006===i.data.errNo)return void n.showToast({title:"关注用户已超上限",icon:"none"});if(10000004===i.data.errNo)return void n.showToast({title:"请登录后再重试",icon:"none"})}n.showToast({title:"关注失败请重试",icon:"none"})},fail:function(t){e.showLoading(!1),n.showToast({title:"关注失败请重试",icon:"none"})}})}},showLoading:function(e){this.setData({isLoading:e})},sendLog:function(e){this.triggerEvent("sendlog",P({component:"author-view",encEid:this.data.eid,viewType:this.data.type},e))}}})})),window.define("128",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6")),D=e("36"),P=e("24"),I=e("34");function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var k=s();Page({extraTopFixedHeight:0,extra:"",processedOption:null,isOnInitRequested:!1,hasRecipeEntry:0,spotFixedGap:10,logCache:[],pageTmpl:null,articleLayerVisible:!1,articleLayerUsageTime:{},newScreenShowLog:[],stepIndexSpotTop:10,startTime:0,topBarHeight:64,topBrandHeight:57,halfWinHeight:0,fixedScrollTop:0,experimentId:"",navigationBarColor:{white:{frontColor:"#ffffff",backgroundColor:"#000000"},black:{frontColor:"#000000",backgroundColor:"#ffffff"}},canChangeTopBarBgColor:!1,showStyleMap:{standard:1,vertical:2,zhongcao:3,food:4,business:5},data:{shouldGray:!1,pageName:P.PageName.Article,fixedSpotBizSlotName:"",fixedSpotJumpTo:null,coverImage:"",encEid:"",query:"",jyapid:"974",article:null,jyclientParams:"",adParams:{},isError:!1,errInfoObj:{btnEvtType:P.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},pageUUID:0,pageStartTime:0,isWeb:!1,tmplType:-1,showStyle:1,fromJingyanSwan:!1,topBarHeight:0,stepIndexSpot:{isShow:!1,spotClass:"absolute",fixedNumTop:67,curNum:1,stepCount:0},topBar:{bgColor:"transparent"},fr:"",from:"",fromAnchor:"",abTest:{},scene:"",hasFollow:0,hasBrandAd:!1,articleFollowChange:{},pdExpGroup:"",zhjnJumpTo:null,isZhjnTeacher:!1,canTopTipsRender:!1,isSelectMaskShow:!1,showPlatform:!1,riskShowComment:!1,riskGoUHome:!1,scrollTop:0,prevScreen:0,canGetAsp1713Data:!1,selectMask:{},answerMaxHeight:1300,isFolderAnswer:!1},onInit:function(e){this.sendArticleRequest(e)},onLoad:function(e){this.processedOption||(this.sendArticleRequest(e),n.showLoading({title:"加载中"}))},onShow:function(e){this.startTime=Date.now();var t={};if(t.scene=k.globalData.scene||this.data.scene,t.isWeb="web"===k.globalData.platform,this.articleLayerUsageTime.visible&&(this.articleLayerUsageTime.ts=Date.now()),k.globalTmplData.followSyncData&&k.globalTmplData.followSyncData.uid&&void 0!==k.globalTmplData.followSyncData.canFollow){var i=this.data.article;i&&i.expAll&&i.expAll.authorInfo&&i.expAll.authorInfo.uid===k.globalTmplData.followSyncData.uid&&(t.hasFollow=k.globalTmplData.followSyncData.canFollow?0:1),k.globalTmplData.followSyncData.canFollow=void 0}this.setData(t)},onHide:function(e){var t={pos:"page",action:"lasting-time",sappStruct:this.data.article&&void 0!==this.data.article.sappStruct?this.data.article.sappStruct:0,lastingTime:Math.round((Date.now()-this.startTime)/1e3)};3===this.data.showStyle&&(t.component="zhongcao-page"),this.sendLog(t),this.articleLayerUsageTime.visible&&this.logArticleLayerUsageTime()},onReady:function(){var e=Date.now();this.setData({pageStartTime:e,pageUUID:e+Math.random()})},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.data.pageStartTime)/1e3)}),k.globalTmplData.followSyncData=void 0},onPageScroll:function(e){var t=e.scrollTop,i=this.showStyleMap;this.data.scrollTop=t,this.topBarComp&&this.topBarComp.pageScroll&&this.topBarComp.pageScroll(t),this.pageTmpl&&this.pageTmpl.pageScroll&&this.pageTmpl.pageScroll(t,this.data.topBarHeight+this.extraTopFixedHeight),this.canChangeTopBarBgColor&&this.changeTopBarBgColor(t,40),[i.standard,i.food,i.business].includes(this.data.showStyle)&&this.sendNewScreenLog(t)},changeTopBarBgColor:function(e,t){var i="transparent",o=this.navigationBarColor.white;e>=t&&(i="rgba(255, 255, 255, 1)",o=this.navigationBarColor.black),i!==this.data.topBar.bgColor&&(this.setData({"topBar.bgColor":i}),n.setNavigationBarColor(o))},processOption:function(e){var t=(0,D.getSysInfoSync)(),i=t.statusBarHeight+t.navigationBarHeight;this.topBarHeight=i,this.halfWinHeight=t.windowHeight/2,this.extra=(0,D.decodeUriComponent)(e.extra||""),this.stepIndexSpotTop+=i;var o={fromJingyanSwan:"1"===e.fromJingyanSwan,encEid:(0,D.decodeUriComponent)(e.eid),extra:this.extra,scene:e.scene||k.globalData.scene,winHeight:t.windowHeight,winWidth:t.windowWidth,topBarHeight:i};e.fr&&(o.fr=e.fr),e.from&&(o.from=e.from),e.word&&(o.query=e.word);var a=O(O({},o),{},{tabAnchor:"video_poster"===e.click_from?"video_feed":"img_article"});return this.setData(o),a},onReachBottom:function(){this.pageTmpl&&this.pageTmpl.reachBottom&&this.pageTmpl.reachBottom()},childReady:function(){this.pageTmpl||(this.pageTmpl=this.selectComponent("#page-tmpl")),this.topBarComp||(this.topBarComp=this.selectComponent("#top-bar-id"))},onShareAppMessage:function(){var e=this,t=this.data.article||{expAll:{},pageInfo:{}},i=t.expAll,o=t.pageInfo,a="来自百度经验小程序，帮你解决生活中的所有难题";return i.isGrass&&(a=i.content.brief[0]),{title:i.title,content:a,path:(0,D.getPagePath)(P.PageName.Article,{eid:this.data.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:o.image||k.globalData.imgUrl,success:function(){e.sendLog({pos:"swan-share",action:"success"}),e.onShareFeedback()}}},onShareFeedback:function(){(0,I.request)({url:(0,D.getApiUrl)("feedback"),method:"POST",data:{eid:this.data.article.expAll.encEid,requestTimeInt:(new Date).getTime(),type:3},onBduss:function(){},success:function(e){var t=e.data;t.errno?n.showToast({icon:"none",title:t.errmsg}):n.showToast({title:"分享成功~"})}},!0)},isStandardTmpl:function(e,t){return 1===e&&(1===t||0===t)},needFmpOptimiziTmpl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showStyle,i=e.tmplType;return 1===t&&(1===i||0===i)||4===t},sendArticleRequest:function(e){this.processedOption=this.processOption(e),(0,I.getArticlePageData)({query:e,scene:k.globalData.scene}).then(this.articleDetailSuccessCallBack()).catch(this.articleDetailFailCallBack())},articleDetailSuccessCallBack:function(){var e=this;return function(t){if(n.hideLoading(),404===t.statusCode)e.setData({isError:!0,errInfoObj:{is404Error:!0,btnEvtType:P.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}},(function(){e.removeSkeleton()}));else{var o=t.data,a={},s={};if(0===o.errNo){var r=o.data,c=r.expAll,d=r.abTest||{},l=r.expAll.isGrass,h=r.extra.expRiskControl||{},p=!!h.sappJingyanComment,u=!!h.sappJingyanUHome,g=!1,f=l?3:r.extra.showStyle;if(d.showStyle=f,e.experimentId=r.experimentId||"",f===P.ArticleShowStyle.businessTmpl&&(e.canChangeTopBarBgColor=!0),r.extra&&r.extra.toGray&&1==+r.extra.toGray.sappArticle&&(g=!0),c){c.content&&c.content.special&&1===c.content.special.type&&(c.content.tools=c.content.special),e.hasRecipeEntry=c.recipeFoodList&&c.recipeFoodList.length?1:0;var m=(0,D.getTrackParams)();e.sendLog(O({pos:"after",action:"pv",hasVideo:c.hasVideo,hasVideoFeed:c.hasVideoFeed,videoProducer:"jingyan",screenVH:c.videoData?c.videoData.screenVH:0,sappStruct:r.sappStruct,showStyle:f},m));var v=c.hasVideo?c.videoData.screenVH:0,w=c.hasFollow;a={experimentId:e.experimentId,showStyle:f,tmplType:v,article:r,abTest:d,hasFollow:w,coverImage:r.pageInfo.image,riskShowComment:p,riskGoUHome:u,shouldGray:g,pdExpGroup:c.pdExpGroup};var y=d.asp1713Async||"";if(!e.isStandardTmpl(f,v)||"exp1"!==y&&"exp2"!==y||(a.canGetAsp1713Data=!0),2===f||2===v?a.pageName=P.PageName.FullScreenVideo:l&&(a.pageName=P.PageName.GrassArticle),e.setPageInfo(c,r.pageInfo),r.multiAnswer&&r.multiAnswer.tools&&!Array.isArray(r.multiAnswer.tools)&&(a.showPlatform=!0),r.loginUser&&(a.jyclientParams=JSON.stringify({eid:c.encEid,uid:r.loginUser.uidEnc,query:e.data.query,scene:e.data.scene,from:e.data.from}),a.adParams={eid:c.encEid,uid:r.loginUser.uidEnc,cuid:k.globalData.uniqueIds.cuid,baiduid:k.globalData.uniqueIds.BAIDUID,bdenvmode:k.globalData.privacyMode,iadLDL:k.globalData.iadLDL,query:e.data.query,scene:e.data.scene,from:e.data.from}),2!==v&&r.extra){var b=r.extra;if(b.spot&&b.spot.type){var T=encodeURIComponent(JSON.stringify(b.spot));e.data.fixedSpotBizSlotName!==T&&(a.fixedSpotBizSlotName=T,a.fixedSpotJumpTo=b.spot)}b.brandAd&&(a.hasBrandAd=!0)}2!==v&&r.extra&&r.extra.brand&&r.extra.brand.status&&(r.extra.brand.tplName===P.zhjnTplName.teacher&&(a.isZhjnTeacher=!0),a.zhjnJumpTo={type:"2",url:["https://jingyan.baidu.com/brand/",r.extra.brand.id,"?name=",r.extra.brand.tplName].join("")}),c.authorInfo&&c.authorInfo.uid&&(k.globalTmplData.followSyncData={uid:c.authorInfo.uid},e.sendLog({action:"show",pos:"follow-btn"}));var S=r.topTips,L=S&&S.title&&!a.zhjnJumpTo;if(a.canTopTipsRender=L,L&&e.sendLog({pos:"top-tips",action:"show",roomid:S.roomid,liveSrcType:S.liveSrcType,liveType:S.type}),a.article.extra={showStyle:r.extra.showStyle},c.isFormat&&e.needFmpOptimiziTmpl({showStyle:f,tmplType:v})){if(s.panAttachment=c.panAttachment,s.notice=c.content.notice,s.feedback=c.feedback,s.foodInfo=c.foodInfo,s.recipeFoodList=c.recipeFoodList,s.extra=r.extra,s.mixBanner=r.mixBanner,s.structPage=r.structPage,s.steps=JSON.parse(JSON.stringify(c.content.steps)),c.content.steps&&c.content.steps[0]&&c.content.steps[0].step&&c.content.steps[0].step.length>1){var x=JSON.parse(JSON.stringify(c.content.steps));a.article.expAll.content.steps=x.slice(0,1),c.images.length>1&&(a.article.expAll.content.steps[0].step=x.slice(0,1)[0].step.slice(0,2))}a.article.expAll.panAttachment=null,a.article.expAll.content.notice=[],a.article.mixBanner={},a.article.structPage={},a.article.expAll.feedback=null,a.article.expAll.foodInfo={},a.article.expAll.recipeFoodList=null}else if(3===f&&(s.steps=JSON.parse(JSON.stringify(c.content.steps)),c.content.steps&&c.content.steps.length>1)){var I=JSON.parse(JSON.stringify(c.content.steps));a.article.expAll.content.steps=I.slice(0,1)}}r.searchBanner&&r.searchBanner.length&&(a.searchBanner=r.searchBanner),a.topBarHeight=e.data.topBarHeight,"pass"===d.aspContentFold&&(a.answerMaxHeight=400)}else a=10100001===o.errNo?{isError:!0,errInfoObj:{btnEvtType:P.ELoadFailBtnType.goHome,errMsg:"经验不存在或者被删除,可稍后重试",btnText:"\b\b返回首页"}}:{isError:!0,errInfoObj:{btnEvtType:P.ELoadFailBtnType.goHome,errMsg:"数据错误",btnText:"\b\b返回首页"}};var C=Date.now();e.setData(a,(function(){var t=Date.now()-C;e.removeSkeleton(),e.sendLog({pos:"perf-analyze",action:"set-data",resErrNo:o.errno,setDataTime:t}),a.isError||i((function(){var t=e.data.article.expAll.isGrass?3:e.data.article.extra.showStyle,i=e.data.article.expAll.hasVideo?e.data.article.expAll.videoData.screenVH:0;e.data.article.expAll.isFormat&&e.needFmpOptimiziTmpl({showStyle:t,tmplType:i})?e.setData({"article.expAll.content.steps":s.steps,"article.expAll.panAttachment":s.panAttachment,"article.expAll.content.notice":s.notice,"article.expAll.feedback":s.feedback,"article.expAll.foodInfo":s.foodInfo,"article.expAll.recipeFoodList":s.recipeFoodList,"article.extra":s.extra,"article.mixBanner":s.mixBanner,"article.structPage":s.structPage},(function(){})):3===t&&e.setData({"article.expAll.content.steps":s.steps})}))}))}}},articleDetailFailCallBack:function(){var e=this;return function(t){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),e.setData({isError:!0,errInfoObj:{btnEvtType:P.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}},sendNewScreenLog:function(e){var t=Math.floor(e/this.halfWinHeight);t!==this.data.prevScreen&&(this.setData({prevScreen:t}),this.sendLog({pos:"user-action",action:"new-screen",index:t,isFirstShow:this.newScreenShowLog[t]?0:1}),this.newScreenShowLog[t]=!0)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.data.tmplType>0&&(e.videoProducer="jingyan");var t=this.data.article,i=0;t&&(void 0!==t.sappStruct&&(i=t.sappStruct),!e.tplId&&t.businessTplInfo&&t.businessTplInfo.tplId&&(e.tplId=t.businessTplInfo.tplId)),(0,I.sendLog)(Object.assign({page:"article",url:(0,D.getPagePath)(P.PageName.Article),encEid:this.data.encEid,pageUUID:this.data.pageUUID,recFeedGroup:"recFeedExp",relateGroup:"feedRelate",screenVH:this.data.tmplType,showStyle:this.data.showStyle,experimentId:this.experimentId,pdExpGroup:this.data.pdExpGroup,from:this.data.from,TimeOnPage:Math.round((Date.now()-this.data.pageStartTime)/1e3),scene:this.data.scene,hasRecipeEntry:this.hasRecipeEntry,extra:this.extra,sappStruct:i},e))},changeFeedbackData:function(e){var t=this.data.article.expAll.feedback,i=Object.assign({likeNum:t.likeNum,status:t.status},e.detail);this.setData({"article.expAll.feedback.status":i.status,"article.expAll.feedback.likeNum":i.likeNum}),this.pageTmpl&&this.pageTmpl.feedbackUpdate&&this.pageTmpl.feedbackUpdate(this.data.article.expAll.encEid,{status:i.status,likeNum:i.likeNum})},setArticleStepSpot:function(e){var t=Object.assign({},this.data.stepIndexSpot,e);this.setData({stepIndexSpot:t})},stepIndexSpotUpdate:function(e){var t=e.detail,i={};"stepIndex"in t&&(i.curNum=t.stepIndex+1),"stepCount"in t&&(i.stepCount=t.stepCount),"spotClass"in t&&(i.spotClass=t.spotClass),"fixedNumTop"in t&&(i.fixedNumTop=t.fixedNumTop),this.setArticleStepSpot(i)},articleLayerVisibilityChange:function(e){var t=e.detail.visible,i=e.detail.encEid,o=e.detail.encVid;this.articleLayerVisible=t,t?this.articleLayerUsageTime={visible:t,encEid:i,encVid:o,ts:Date.now()}:(this.articleLayerUsageTime.visible=!1,this.logArticleLayerUsageTime())},logArticleLayerUsageTime:function(){this.sendLog({pos:"article-layer",action:"browse",encEid:this.articleLayerUsageTime.encEid,encVid:this.articleLayerUsageTime.encVid,usageTimespan:Math.round((Date.now()-this.articleLayerUsageTime.ts)/1e3)})},setPageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{n.setPageInfo&&n.setPageInfo(Object.assign({title:e.title+"-百度经验",keywords:"百度,百度经验,经验小程序,"+e.title,description:e.title+",百度经验小程序",articleTitle:e.title,releaseDate:(0,D.format)(new Date(1e3*e.updateTime),"yyyy-MM-dd hh:mm:ss")},t))}catch(e){}},switchExp:function(e){var t=e.detail.article;t&&t.expAll.encEid!==this.data.article.expAll.encEid&&this.setData({article:t})},childCallPageScrolling:function(e){var t=Object.assign({duration:300},e.detail);n.pageScrollTo(t)},onFollowChanged:function(e){if(e&&e.detail&&e.detail.uid){var t=e.detail,i=t.from,o=t.uid,a=t.canFollow,n=a?0:1;"video-feed"===i?this.data.article.expAll&&this.data.article.expAll.authorInfo&&this.data.article.expAll.authorInfo.uid===o&&this.setData({hasFollow:n}):this.setData({hasFollow:n,articleFollowChange:{uid:o,canFollow:a}}),this.sendLog({action:"click",pos:"follow-btn",clickFrom:i,cancleFollow:a?1:0,viewType:t.viewType,authorViewPosition:t.position||"normal"})}},childPositionChange:function(e){if(e&&e.detail){var t=e.detail,i=t.component,o=t.position,a=t.height;switch(i){case P.fixedElementIdentName.videoFeedTabView:case P.fixedElementIdentName.authorView:case P.fixedElementIdentName.headerZhjnTitle:"fixed"===o?this.extraTopFixedHeight+=a:this.extraTopFixedHeight-=a}}},jumpToKnowledge:function(e){var t=e.detail;t.eid=this.data.encEid,(0,D.jumpTo)(P.PageName.Knowledge,t)},jumpToMultiAnswer:function(){var e={encEid:this.data.encEid,clusterId:this.data.article.multiAnswer.clusterId};(0,D.jumpTo)(P.PageName.MultiAnswer,e)},queryReplyNodeInfo:function(){var e=this;i((function(){var t=n.createSelectorQuery();t.select("#article-page-top")&&t.select("#article-page-top").boundingClientRect().exec((function(t){t&&t[0]&&t[0].height>e.data.answerMaxHeight&&e.setData({isFolderAnswer:!0})}))}),1e3)},showRemainMore:function(){this.setData({isFolderAnswer:!1})}})})),window.define("102",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24");Component({properties:{searchBanner:{type:Array,value:null},title:{type:String,value:""},opacity:{type:Number,value:1},bgColor:{type:String,value:"#fff",observer:function(e,t){/transparent|rgba\(0,\s*0,\s*0,\s*0\)|rgb\(0,\s*0,\s*0\)/gi.test(e)?(this.setData({showBottomBorder:!1}),a.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"})):this.setData({showBottomBorder:!0})}},isTabPage:{type:Boolean,value:!1},showHomeIcon:{type:Boolean,value:!0},pageName:{type:String,value:"",observer:function(e){e&&e===x.PageName.Article&&this.setData({shouldSwitchTitleSearch:!0})}},fromJingyanSwan:{type:Boolean,value:!1}},data:{showBottomBorder:!0,statusBarHeight:0,navBarHeight:0,contentHeight:0,contentPaddingTop:0,contentPaddingBottom:0,titleWrapWidth:0,isNV228Newer:!0,isShowSearchInput:!1,shouldSwitchTitleSearch:!1},lifetimes:{created:function(){},attached:function(){var e=a.getMenuButtonBoundingClientRect(),t=L.getSysInfoSync();if(t){var i,o,n,s=t.statusBarHeight,r=t.navigationBarHeight;n=o=(r-e.height)/2,i=r;var c=t.windowWidth-e.right,d=e.width+2*c,l=t.windowWidth-2*d,h=L.checkSwanNativeVersionNotLessThan("2.28.0");this.setData({titleWrapWidth:l,statusBarHeight:s,navBarHeight:r,contentHeight:i,contentPaddingTop:o,contentPaddingBottom:n,isNV228Newer:h})}},ready:function(){this.triggerEvent("componentready"),this.sendLog({pos:"top-bar",action:"render"})}},methods:{searchInputClick:function(e){if(this.data.isShowSearchInput)if(this.sendLog({pos:"top-bar-search",action:"click"}),this.data.searchBanner&&this.data.searchBanner.length){var t=this.selectComponent("#search-words-banner-wrap");t&&t.itemClickTrigger()}else L.jumpTo(x.PageName.Search)},pageScroll:function(e){this.data.shouldSwitchTitleSearch&&(e>=40?this.data.isShowSearchInput||this.setData({isShowSearchInput:!0}):this.data.isShowSearchInput&&this.setData({isShowSearchInput:!1}))},getTopBarHeight:function(){return this.data.contentHeight+this.data.statusBarHeight},gotoHome:function(){this.sendLog({pos:"goto-home-btn",action:"click"}),L.jumpTo(x.PageName.Home)},goBack:function(){this.sendLog({pos:"goback-btn",action:"click"}),this.data.fromJingyanSwan?a.navigateBack():a.exit()},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",Object.assign({component:"top-bar",isNV228Newer:this.data.isNV228Newer?1:0},e))},emptyFn:function(){}}})})),window.define("103",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=n(),x=e("36"),D=e("24");Component({properties:{topBarTips:{type:Object,value:{}}},externalClasses:["top-tips-fix","top-tips-width"],data:{isShow:!1},lifetimes:{created:function(){this.hasCloseTips()||this.setData({isShow:!0})},attached:function(){},ready:function(){this.triggerEvent("componentready",{component:"top-tips"})},detached:function(){}},methods:{hasCloseTips:function(){var e=this.data.topBarTips.roomid;return a.getStorageSync(L.globalData.uniqueIds.SWANID+"_"+e)},setStorageHistory:function(){var e=this.data.topBarTips.roomid;try{a.setStorageSync(L.globalData.uniqueIds.SWANID+"_"+e,1)}catch(e){}},sendLog:function(e){this.triggerEvent("sendlog",Object.assign({component:"top-bar"},e))},closeTips:function(){var e=this.data.topBarTips.roomid;this.setData({isShow:!1}),this.triggerEvent("changetabtop"),a.getStorageSync(L.globalData.uniqueIds.SWANID+"_"+e)||this.setStorageHistory()},gotoLive:function(){var e=this.data.topBarTips.type,t=this.data.topBarTips.roomid,i=this.data.topBarTips.liveSrcType;this.sendLog({pos:"top-tips",action:"click",roomid:t,liveType:e}),"livepage"===e?x.jumpTo(D.PageName.Live):"livestream"===e&&x.jumpTo(D.PageName.LiveRoom,{roomid:t,liveSrcType:i,type:"top-tips"})}}})})),window.define("132",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("36"),C=e("24"),O=e("34"),k=O.request,E=(O.sendLog,s());Component({isArticleRendered:!1,fixedCompExtraTopValue:[0],authorViewFixedHeight:50,videoFeedTabViewFixedHeight:41,authorViewFixed:!1,articleHeaderComp:null,feedVideoPlayingIndex:-1,tabSwitchTimeoutId:0,vfpsTimeoutId:0,notExecPageScroll:!1,feedVideoPositionGap:10,minHeightDelta:10,pageScrollTop:0,extraTopBarHeight:0,tabViewTop:0,eachTabContentScrollTop:[0,0],spotClass:"absolute",videoFeedComp:null,renderLogViewHeight:0,formatContentNComp:null,isNomoreRelrecData:!1,isAjaxGetRelrec:!1,showAdOneFlag:!0,articleBottomTop:0,isArticleBottomShow:!1,isMultiAnswerItemShow:[],multiAnswerItemOffset:[],adOneTop:0,headVideoComp:null,knowledgePopupTmpl:null,panAttachmentViewTop:0,isPanAttachmentViewShow:!1,adZhihuijinnangViewTop:0,adZhihuijinnangViewShow:!1,mixBannerInfoList:[],properties:{coverImage:{type:String},query:{type:String},jyapid:{type:String,value:"974"},answerMaxHeight:{type:Number,value:450},isFolderAnswer:{type:Boolean,value:!1},article:{type:Object,value:null,observer:function(e){var t=this;if(e&&e.expAll){var o={};e.expAll.panAttachment&&e.expAll.panAttachment.link&&(o.hasPan=!0),e.expAll.content&&e.expAll.content.notice&&e.expAll.content.notice.length&&(o.hasNotice=!0),this.setData(o,(function(){e.expAll.content&&!t.isArticleRendered&&i((function(){t.articleRendered()}))}))}}},experimentId:{type:String,value:""},jyclientParams:{type:String,value:""},adParams:{type:Object,value:{}},abTest:{type:Object,value:{},observer:function(e){e&&"pass"===e.adComponent&&this.setData({isDynamicLibAd:!0})}},usedAsComp:{type:Boolean,value:!1},pageUUID:{type:Number,value:""},pageStartTime:{type:Number,value:0},topBarHeight:{type:Number,value:0},isWeb:{type:Boolean,value:!1},showBrief:{type:Boolean,value:!0},showPlatform:{type:Boolean,value:!1},hideStepEntry:{type:Boolean,value:!1},jumpTo:{type:Object,value:null},isZhjnTeacher:{type:Boolean,value:!1},canGetAsp1713Data:{type:Boolean,value:!1},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1},fromAnchor:{type:String,value:"",observer:function(e){"video_poster"===e&&(this.sendLog({pos:"fromTop1Video",action:"pv"}),this.data.article.expAll&&this.data.article.expAll.hasVideoFeed&&this.setData({tabIndex:1,autoTapped:!0,loopPlaying:!1}))}},fr:{type:String,value:""},from:{type:String,value:"",observer:function(e){var t,o=this;this.data.article.expAll&&this.data.article.expAll.hasVideoFeed&&("search_top1"===e||"minifood"===e)&&(t={isNewTabAndHasFeed:!0,isExperiment:!0,tabItemMinHeightStr:I.stringBuilder("min-height: ",this.renderLogViewHeight-this.authorViewFixedHeight-this.videoFeedTabViewFixedHeight+this.minHeightDelta,"px;")}),t&&(this.setData(t),i((function(){o.getTabViewTop()}),50))}},scene:{type:String,value:"",observer:function(e,t){e!==t&&(I.blockOpenApp(e)?this.setData({allowOpenApp:!1}):this.setData({allowOpenApp:!0}))}}},data:{isExperiment:!1,isDynamicLibAd:!1,bottomBarHeight:50,screenHeight:0,winHeight:0,winWidth:0,spreadHeight:0,adRequestUrl:I.getApiUrl("besRequest"),adOneCalc:!0,adOneLoad:!1,prevScreen:0,pn:0,pageSize:20,relrecTip:"",multiAnswerFeedList:[],multiFeedHasData:!1,tabIndex:0,isVideoTabRendered:!1,loopPlaying:!0,isNewTabAndHasFeed:!1,autoTapped:!1,tabPosition:{position:"absolute",bottom:0,top:"auto"},tabItemMinHeightStr:"",logs:[],hasNotice:!1,hasPan:!1,liveData:[],adResponseData:null,asp1713Data:null,showAdGoodsIdxMap:{},mixBannerData:[],allowOpenApp:!0,isContructionExp:!1,showTipList:!1,showTopicEntry:!1,showMultiAnswerEntry:!1,knowledgeTipList:[],knowledgeResData:{},showKnowledgePopup:!1,guessYouLike:[]},externalClasses:["fix-bottom-bar"],lifetimes:{created:function(){},attached:function(){var e=I.getSysInfoSync(C.PageName.Article);this.renderLogViewHeight=e.screenHeight-this.data.topBarHeight-this.data.bottomBarHeight;var t={screenHeight:e.screenHeight,winHeight:e.windowHeight,winWidth:e.windowWidth},i=this.data.scene;if(i&&I.blockOpenApp(i)&&(t.allowOpenApp=!1),!this.data.usedAsComp&&this.data.article.sappStruct){if(t.isContructionExp=!0,t.article=this.data.article,t.article.structPage&&t.article.structPage.relate&&t.article.structPage.level){var o=t.article.structPage.level,a=t.article.structPage.relate,n=o.concat(a);n.length&&(t.knowledgeResData=P(P({},o[0]),{},{eid:t.article.expAll.encEid}),t.showTipList=!0,t.knowledgeTipList=n)}t.article.structPage&&t.article.structPage.level&&t.article.structPage.level.length&&t.article.structPage.level[0].name&&(t.showTopicEntry=!0),t.article.multiAnswer&&void 0!==t.article.multiAnswer.expNums&&(t.showMultiAnswerEntry=!0),this.data.showPlatform&&t.article&&t.article.expAll&&t.article.expAll.content&&t.article.expAll.content.tools&&t.article.expAll.content.tools.content&&t.article.expAll.content.tools.content.length&&(t.article.expAll.content.tools.content=[]),this.sendLog({pos:"sapp-construction-relate",action:"render",showTopicEntry:t.showTopicEntry,showPlatform:t.showPlatform,showMultiAnswerEntry:t.showMultiAnswerEntry,showTipList:t.showTipList})}this.setData(t)},ready:function(){this.triggerEvent("componentready"),this.triggerEvent("queryReplyNodeInfo")},detached:function(){}},pageLifetimes:{show:function(){E.globalData.feedback&&(this.setData({"article.expAll.feedback.status":E.globalData.feedback.status,"article.expAll.feedback.likeNum":E.globalData.feedback.likeNum}),E.globalData.feedback=null,delete E.globalData.feedback)},hide:function(){}},methods:{showRemainMore:function(){this.triggerEvent("showRemainMore")},articleRendered:function(){var e=this;this.isArticleRendered=!0,this.getArticleBottomTop(),this.getPanAttachmentViewTop(),this.getAdZhihuijinnangTop(),this.getArticleClassicData(),this.data.canGetAsp1713Data&&this.getAsp1713Data(),n.createSelectorQuery().selectViewport().scrollOffset((function(t){if(t){var o=t.scrollTop,a=e.data.tabIndex;0===a?i((function(){e.pageScroll(o,e.data.topBarHeight)})):(e.pageScrollTop=o,e.eachTabContentScrollTop[a]=o)}})).exec(),this.data.usedAsComp||i((function(){e.getMultiAnswerFeed()}))},getTabViewTop:function(){var e=this;this.data.isNewTabAndHasFeed&&!this.tabViewTop&&i((function(){I.poll((function(t,i){n.createSelectorQuery().in(e).select("#tab-view").boundingClientRect((function(e){e?t(e):i()})).exec()}),(function(t,i){t||(e.tabViewTop=Math.ceil(i.top),e.sendLog({pos:"tab-view",action:"show"}))}))}))},onPreview:function(e){n.previewImage({current:e.detail.url,urls:this.data.article.expAll.images})},onFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},adLoadHlr:function(e){var t=this;"adOne"===e.currentTarget.dataset.id&&(this.setData({adOneLoad:!0}),I.poll((function(e,i){n.createSelectorQuery().in(t).select(".adOne").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(e,i){e||(t.adOneTop+=i.top,t.onSpread({detail:{deltaHeight:i.height}}))})),this.sendLog({pos:"ad-adOne",action:"load"}))},adRequestHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"request"})},adRenderHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"render"})},adErrHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"error"})},launchFail:function(e){this.sendLog({pos:"app-banner",action:"error",msgInfo:"launchFail, "+JSON.stringify(e.detail)}),n.showToast({title:e.detail.errMsg||"打开失败",icon:"none"})},onBottomShare:function(e){var t=this,i={};this.data.article&&this.data.article.expAll&&(i=this.data.article.expAll),n.openShare({title:i.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:I.getPagePath(C.PageName.Article,{eid:i.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:this.data.coverImage||E.globalData.imgUrl,success:function(){t.sendLog({pos:"bottom-bar-share",action:"success"}),t.triggerEvent("sharefeedback")}})},picClick:function(e){var t=e.currentTarget.dataset.id,i=e.currentTarget.dataset.index;this.sendLog({pos:"rec-pd",action:"click",sidEid:t,index:i}),I.jumpTo({appKey:C.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:t}})},adClick:function(e){var t=e.currentTarget.dataset.id;this.sendLog({pos:"ad-"+t,action:"click"})},horzVideoNonStructuredExperience:function(e,t){var i=e+t;if(this.data.isNewTabAndHasFeed&&this.tabViewTop)if("fixed"===this.data.tabPosition.position&&(i-=this.videoFeedTabViewFixedHeight,t-=this.videoFeedTabViewFixedHeight),"absolute"===this.data.tabPosition.position&&i>=this.tabViewTop){var o={"tabPosition.position":"fixed","tabPosition.bottom":"auto"};o["tabPosition.top"]=t-1+"px",this.fixedCompExtraTopValue[0]=this.videoFeedTabViewFixedHeight,this.triggerEvent("childpositionchange",{component:C.fixedElementIdentName.videoFeedTabView,position:"fixed",height:this.videoFeedTabViewFixedHeight}),this.setData(o)}else if("fixed"===this.data.tabPosition.position)if(i<this.tabViewTop){var a={"tabPosition.position":"absolute","tabPosition.bottom":"0","tabPosition.top":"auto"};this.fixedCompExtraTopValue[0]=0,this.triggerEvent("childpositionchange",{component:C.fixedElementIdentName.videoFeedTabView,position:"absolute",height:this.videoFeedTabViewFixedHeight}),this.setData(a)}else this.data.tabPosition.top!==t-1&&this.setData({"tabPosition.top":t-1+"px"});return null},pageScroll:function(e,t){if(!this.notExecPageScroll){this.extraTopBarHeight=t-this.data.topBarHeight,this.extraTopBarHeight<0&&(this.extraTopBarHeight=0),this.pageScrollTop=e;var i=e+t,o=this.data.tabIndex;if(this.eachTabContentScrollTop[o]=e,this.headVideoComp&&this.headVideoComp.pageScroll(e,t),this.articleHeaderComp&&this.articleHeaderComp.pageScroll(e,t-this.fixedCompExtraTopValue[0]),this.horzVideoNonStructuredExperience(e,t),0===o){this.formatContentNComp&&this.formatContentNComp.pageScroll&&this.formatContentNComp.pageScroll(e,t);var a=i+this.renderLogViewHeight;this.sendArticleBottomLog(a),this.sendAd974Log(a),this.sendMixBannerShowLog(a+this.data.bottomBarHeight),this.sendPanAttachmentViewShowLog(a),this.sendAdZhihuijinnangShowLog(a),this.sendMultiAnswerItemShowLog(this.multiAnswerItemOffset,a)}else 1===o&&this.callVideoFeedPageScroll(e,t)}},callVideoFeedPageScroll:function(e,t){var o=this;clearTimeout(this.vfpsTimeoutId),this.vfpsTimeoutId=i((function(){o.videoFeedComp&&o.videoFeedComp.pageScroll&&o.videoFeedComp.pageScroll(e,t)}))},sendAd974Log:function(e){this.showAdOneFlag&&this.data.adOneLoad&&0!==this.adOneTop&&e>this.adOneTop&&(this.showAdOneFlag=!1,this.sendLog({pos:"ad-adOne",action:"show"}))},sendArticleBottomLog:function(e){0!==this.articleBottomTop&&!this.isArticleBottomShow&&e>this.articleBottomTop&&(this.isArticleBottomShow=!0,this.sendLog({pos:"article-bottom",action:"show"}))},sendMultiAnswerItemShowLog:function(e,t){for(var i=e.length,o=0;o<i;o++){var a=e[o];if(a){if(!(t>a))break;if(!this.isMultiAnswerItemShow[o]){this.isMultiAnswerItemShow[o]=!0;var n="";this.data.multiAnswerFeedList&&this.data.multiAnswerFeedList[o]&&(n=this.data.multiAnswerFeedList[o].type);var s=void 0;s="mixbanner"===n?{pos:"rel-exp-item-mix-banner",action:"show",id:this.data.multiAnswerFeedList[o].data.id}:"live"===n?{pos:"rel-exp-live",action:"show",liveSrcType:this.data.multiAnswerFeedList[o].liveSrcType,roomid:this.data.multiAnswerFeedList[o].roomid}:{pos:"rel-exp-item",action:"show",index:o,itemType:n},this.sendLog(s)}}}},sendMixBannerShowLog:function(e){var t=this;this.mixBannerInfoList.forEach((function(i,o){var a=i.top,n=i.id;!i.isShow&&a<e&&(t.sendLog({pos:"article-bottom-mix-banner",action:"show",id:n}),t.mixBannerInfoList[o].isShow=!0)}))},onUpdateMixBannerOffset:function(e){var t=e.detail,i=t.id,o=t.top;this.mixBannerInfoList.push({id:i,top:o,isShow:!1}),this.sendMixBannerShowLog(this.data.winHeight+this.data.bottomBarHeight)},updateMultiAnswerItemOffset:function(e){var t=e.detail,i=t.index;if(this.multiAnswerItemOffset[i]=t.top,"height"in t){var o=t.height;this.updateAfterStepOffset(o,i)}},updateAfterStepOffset:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=this.multiAnswerItemOffset.length,o=0;o<i;o++)o>t&&void 0!==this.multiAnswerItemOffset[o]&&(this.multiAnswerItemOffset[o]+=e)},onSpread:function(e){var t=e.detail,i=t.deltaHeight;this.updateAfterStepOffset(i),"goods"===t.position&&this.data.adOneLoad&&(this.adOneTop+=i),"brief"===t.position&&(this.setData({spreadHeight:i}),this.data.adOneLoad&&(this.adOneTop+=i),this.sendLog({pos:"brief-spread-btn",action:"click"}))},multiAnswerFeedAdSpread:function(e){var t=e.detail,i=t.index,o=t.adHeight;this.updateAfterStepOffset(o,i)},getArticleBottomTop:function(){var e=this;n.createSelectorQuery().select("#article-bottom-id").boundingClientRect((function(t){t&&(e.articleBottomTop=t.top)})).exec()},setNoMoreRelrecData:function(){this.isNomoreRelrecData=!0,this.setData({relrecTip:"~没有更多了~"})},getMultiAnswerFeed:function(){this.getMultiAnswerFeedExp()},getMultiAnswerFeedExp:function(){var e=this;this.isAjaxGetRelrec=!0,this.setData({relrecTip:"加载中..."}),k({url:I.getApiUrl("articleMultiAnswerFeed"),data:{experimentId:this.data.experimentId,eid:this.data.article.expAll.encEid,bdenvmode:E.globalData.privacyMode,iadLDL:E.globalData.iadLDL,pn:this.data.pn,rn:this.data.pageSize,fromAnchor:this.data.fromAnchor,from:this.data.from},success:function(t){e.isAjaxGetRelrec=!1,n.hideLoading();var i=t.data;if(0===i.errNo||0===i.errno){var o=i.data.relateList;o&&o.length?(o.forEach((function(e,t){var i=e.cardType;"mixbanner"===i?o[t]={type:"mixbanner",data:e}:"ad"===i?o[t]={type:"ad",apid:1246,data:e}:e.type=e.cardType})),e.setData({multiAnswerFeedList:e.data.multiAnswerFeedList.slice(0).concat(o),pn:e.data.pn+e.data.pageSize,relrecTip:""})):e.setNoMoreRelrecData(),e.data.multiAnswerFeedList.length||o.length?e.data.multiFeedHasData||e.setData({multiFeedHasData:!0}):(e.setNoMoreRelrecData(),e.setData({multiFeedHasData:!1}))}else 506===i.errno||702===i.errno?(e.setNoMoreRelrecData(),0===e.data.pn&&e.setData({multiFeedHasData:!1})):e.setData({relrecTip:"数据错误"})},fail:function(t){e.isAjaxGetRelrec=!1,n.hideLoading(),e.setData({relrecTip:"Wi-Fi和移动网络已断开"})}})},reachBottom:function(){0===this.data.tabIndex?(this.sendLog({pos:"page-bottom",action:"show"}),this.isAjaxGetRelrec||this.isNomoreRelrecData||(this.sendLog({pos:"feed-bottom",action:"load-more"}),this.getMultiAnswerFeed())):1===this.data.tabIndex&&this.videoFeedComp&&this.videoFeedComp.reachBottom&&this.videoFeedComp.reachBottom()},tabSwitch:function(e){var t=this;clearTimeout(this.tabSwitchTimeoutId),this.notExecPageScroll=!0;var o=e.target.dataset,a=parseInt(o.index,10),n={};if(this.tabViewTop){var s=this.pageScrollTop+this.extraTopBarHeight,r=this.tabViewTop-this.authorViewFixed-this.data.topBarHeight-this.videoFeedTabViewFixedHeight;s+this.data.topBarHeight<=this.tabViewTop?this.eachTabContentScrollTop[a]=s:this.eachTabContentScrollTop[a]<=r&&(this.eachTabContentScrollTop[a]=r)}switch(a){case 0:n.tabIndex=a,n.loopPlaying=!0,this.videoFeedComp&&this.videoFeedComp.getPlayingIndex&&(this.feedVideoPlayingIndex=this.videoFeedComp.getPlayingIndex()),this.pauseFeedVideo(),i((function(){t.sendLog({pos:"tab-view",action:"click",index:0})}));break;case 1:this.data.isVideoTabRendered||(n.isVideoTabRendered=!0),n.tabIndex=a,n.loopPlaying=!1,i((function(){t.sendLog({pos:"tab-view",action:"click",index:1})}))}this.setData(n,(function(){t.getArticleBottomTop(),t.tabSwitchTimeoutId=i((function(){t.childReady(),t.handleSpotPositionRestore(a),t.requestPageScrollTo({duration:0,scrollTop:t.eachTabContentScrollTop[a]}),t.tabSwitchTimeoutId=i((function(){t.requestPageScrollTo({duration:0,scrollTop:t.eachTabContentScrollTop[a]}),t.tabSwitchTimeoutId=i((function(){t.notExecPageScroll=!1,1===t.data.tabIndex&&t.feedVideoPlayingIndex>-1&&t.playFeedVideo(t.feedVideoPlayingIndex)}),50)}),100)}),50)}))},handleSpotPositionRestore:function(e){0===e&&"fixed"===this.spotClass?(this.triggerEvent("stepindexspotupdate",{spotClass:"fixed"}),0===this.data.tabIndex&&this.formatContentNComp&&this.formatContentNComp.pageScroll&&this.formatContentNComp.pageScroll(this.eachTabContentScrollTop[0],this.data.topBarHeight+this.extraTopBarHeight)):1===e&&this.triggerEvent("stepindexspotupdate",{spotClass:"absolute"})},handleGotoSteps:function(e){I.jumpTo(C.PageName.Steps,{eid:this.data.article.expAll.encEid,from:C.EArticleStepsFrom.fromArticleDetail,word:this.data.query,coverImage:this.data.coverImage})},childReady:function(){this.videoFeedComp=this.selectComponent("#video-feed-comp-id"),this.formatContentNComp=this.selectComponent("#format-n-comp-id"),this.headVideoComp=this.selectComponent("#head-video-comp-id"),this.articleHeaderComp=this.selectComponent("#article-header-comp-id"),this.knowledgePopupTmpl||(this.knowledgePopupTmpl=this.selectComponent("#knowledgePopup"))},knowledgeFixSpotClick:function(){this.sendLog({pos:"knowledge-union-relate",action:"click",knowledgeUnionType:"entry"}),this.knowledgePopupTmpl&&this.knowledgePopupTmpl.showListPopup()},onChangeTTS:function(e){this.sendLog({pos:"tts",action:e.action})},childlog:function(e){this.sendLog(e.detail)},goodsRender:function(){},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.component?e.component="standard-tmpl_"+e.component:e.component="standard-tmpl";var t=Object.assign({tabIndex:this.data.tabIndex},e);this.triggerEvent("sendlog",t)},requestPageScrollTo:function(e){this.triggerEvent("requestpagescrollto",e)},playFeedVideo:function(e){this.videoFeedComp&&this.videoFeedComp.play&&this.videoFeedComp.play(e)},stopHeadVideo:function(){this.headVideoComp&&this.headVideoComp.stopVideo&&this.headVideoComp.stopVideo()},pauseFeedVideo:function(){this.videoFeedComp&&this.videoFeedComp.pauseVideo&&this.videoFeedComp.pauseVideo()},stopFeedVideo:function(){this.videoFeedComp&&this.videoFeedComp.stopVideo&&this.videoFeedComp.stopVideo()},playHeadVideo:function(){this.headVideoComp&&this.headVideoComp.playVideo&&this.headVideoComp.playVideo()},clearLog:function(){this.setData({logs:[]})},debugLog:function(e){var t={};t["logs["+this.data.logs.length+"]"]=JSON.stringify(e),this.setData(t)},onFollowChanged:function(e){this.triggerEvent("followchanged",e.detail)},onPanAttachmentTap:function(e){if(this.data.article.expAll&&this.data.article.expAll.panAttachment){var t=this.data.article.expAll.panAttachment;t.link&&t.link.length>0&&(1===t.hasPwd?n.setClipboardData({data:t.pwd,complete:function(){I.jumpTo(C.PageName.Webview,{url:t.link})}}):I.jumpTo(C.PageName.Webview,{url:t.link})),this.sendLog({pos:"pan-attachment",action:"click"})}},getPanAttachmentViewTop:function(){var e=this;this.data.article.expAll&&this.data.article.expAll.panAttachment&&n.createSelectorQuery().select("#pan-attachment-id").boundingClientRect((function(t){t&&(e.panAttachmentViewTop=t.top)})).exec()},sendPanAttachmentViewShowLog:function(e){this.panAttachmentViewTop>0&&!this.isPanAttachmentViewShow&&e>this.panAttachmentViewTop&&(this.isPanAttachmentViewShow=!0,this.sendLog({pos:"pan-attachment",action:"show"}))},getAdZhihuijinnangTop:function(){var e=this;this.data.article.extra&&this.data.article.extra.brandAd&&n.createSelectorQuery().select("#wgt-ad-zhihuijinnang").boundingClientRect((function(t){t&&(e.adZhihuijinnangViewTop=t.top)})).exec()},sendAdZhihuijinnangShowLog:function(e){this.adZhihuijinnangViewTop>0&&!this.adZhihuijinnangViewShow&&e>this.adZhihuijinnangViewTop&&(this.adZhihuijinnangViewShow=!0,this.sendLog({pos:"ad-zhihuijinnang",action:"show"}))},getAsp1713Data:function(){var e=this;k({url:I.getApiUrl("asp1713Request"),data:P({fr:this.data.fr},this.data.adParams),success:function(t){var i=t.data||{};if(0==+i.errNo){var o=i.data,a=o.asp1713Data,n=o.showAdGoodsIdxMap;e.setData({asp1713Data:a,showAdGoodsIdxMap:n})}}})},getArticleClassicData:function(){var e=this,t={data:{}};k({url:I.getApiUrl("besRequest"),data:this.data.adParams,success:function(i){var o=i.data,a=[];if(o.res.guessyoulike&&(a=o.res.guessyoulike),0==+o.error){var n=Object.assign({},o.res.mix_banner);delete o.res.mix_banner,t.data.res=o.res,e.setData({adResponseData:t,mixBannerData:n,guessYouLike:a})}}})},childPositionChange:function(e){e&&e.detail&&this.triggerEvent("childpositionchange",e.detail)},handlePlatformChange:function(e){this.triggerEvent("platformChange",e.detail)},tapTip:function(e){var t=e.currentTarget.dataset,i=t.firstlevel,o=t.secondlevel,a=t.type,n=t.index,s={pos:"knowledge-union-relate",action:"click",knowledgeUnionType:a};"tip"===a&&(s.index=n),this.sendLog(s);var r={firstLevel:i,secondLevel:o};this.triggerEvent("jumpToKnowledge",r)},tapMultiAnswerEntry:function(){this.triggerEvent("jumpToMultiAnswer"),this.sendLog({pos:"multi-answer-entry",action:"click"})}},messages:{stepIndexSpotUpdate:function(e){var t=e.value;"spotClass"in t&&(this.spotClass=t.spotClass),this.triggerEvent("stepindexspotupdate",t)},feedcallpagescrollto:function(e){var t=this;e.value.scrollTop=e.value.scrollTop-this.data.topBarHeight-this.authorViewFixedHeight-this.videoFeedTabViewFixedHeight-this.extraTopBarHeight-this.feedVideoPositionGap,e.value.scrollTop<this.eachTabContentScrollTop[1]||(this.notExecPageScroll=!0,this.requestPageScrollTo(e.value),i((function(){t.notExecPageScroll=!1,i((function(){t.requestPageScrollTo(P(P({},e.value),{},{duration:0}))}),100)}),300))},feedvideoplay:function(e){this.stopHeadVideo()},headvideoplay:function(e){this.feedVideoPlayingIndex=-1,this.stopFeedVideo()},headvideoended:function(e){1!==this.data.tabIndex||this.data.loopPlaying||this.playFeedVideo(0)},feedvideocannotplay:function(){this.playHeadVideo()}}})})),window.define("63",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("36"),I=e("24");s();Component({headElemBoundingPvMap:{height:0,logged:!1},headScrollImgPvMap:[{left:17,right:17,logged:!1}],videoLogMap:[],winWidth:0,videoFeedSmallLen:0,videoPosterElemQuery:null,validFlag:!1,percent80Flag:!1,percent30Flag:!1,percent100Flag:!1,videoContext:null,playStartTime:0,validPlayTime:0,properties:{videoData:Object,topBarHeight:Number,pageName:{type:String,value:"article"},singleVideo:{type:Boolean,value:!1},query:{type:String,value:""},scene:{type:String,value:""},loopPlaying:{type:Boolean,value:!0,observer:function(e,t){"boolean"==typeof e&&e!==t&&this.setData({loop:e})}},fromAnchor:{type:String,value:""},from:{type:String,value:""},experimentId:{type:String,value:""},isExperiment:{type:Boolean,value:!1,observer:function(e,t){var o=this;this.data.videoData.hasVideo&&(!0===e&&this.setData({isExperimentAndHasVideo:!0}),!e&&this.data.videoData.hasVideoFeed||i((function(){o.playVideo()})))}}},data:{isExperimentAndHasVideo:!1,autoplay:!1,isShow:!1,durationData:"",durData:[],loop:!0},methods:{pageScroll:function(e,t){(this.data.videoData.hasVideoFeed&&this.data.isExperiment||this.data.singleVideo||this.data.videoData.hasVideo)&&this.headElemBoundingPvMap.logged&&e>this.headElemBoundingPvMap.height&&(this.headElemBoundingPvMap.logged=!1)},feedTap:function(){this.sendVideoLog({action:"click",encVid:this.data.videoData.videoFeed.seedVid}),P.jumpTo(I.PageName.VideoFeed,{eid:this.data.videoData.encEid,query:this.data.query,scene:this.data.scene,from:this.data.from,fromAnchor:this.data.fromAnchor,extra:JSON.stringify({experimentId:this.data.experimentId})})},feedSmallTap:function(e){var t=e.currentTarget.dataset.index;this.headScrollImgPvMap[t]&&this.sendVideoLog({action:"click",index:t,seedVid:this.headScrollImgPvMap[t].seedVid}),P.jumpTo(I.PageName.VideoFeed,{eid:this.data.videoData.encEid,index:t,query:this.data.query,scene:this.data.scene,from:this.data.from,fromAnchor:this.data.fromAnchor,extra:JSON.stringify({experimentId:this.data.experimentId,fromPage:this.data.pageName,fromPosition:"head-video-comp"})})},videoTap:function(){this.playVideo("click-play")},tryToPlay:function(){var e=this;if(!this.videoPosterElemQuery){var t=n.createSelectorQuery();this.videoPosterElemQuery=t.in(this).select(".img")}this.videoPosterElemQuery.boundingClientRect((function(t){t&&t.top>=e.data.topBarHeight-2&&e.playVideo()}))},playVideo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto-play";this.setData({autoplay:!0,isShow:!0},(function(){i((function(){e.videoContext||(e.videoContext=n.createVideoContext("exp-video")),e.videoContext&&"function"==typeof e.videoContext.play&&(e.videoContext.play(),e.sendVideoPlay(t))}),100)}))},stopVideo:function(){this.videoContext&&"function"==typeof this.videoContext.pause&&(this.videoContext.pause(),this.setData({isShow:!1}),this.videoContext=null,this.sendValidPlayLog())},endedHandler:function(e){var t=this;this.data.loop||i((function(){t.setData({isShow:!1}),t.videoContext=null,t.dispatch("headvideoended")}),500)},errorHandler:function(e){this.sendVideoLog({action:"play-err",encVid:this.data.videoData.videoFeed.seedVid,errObj:JSON.stringify(e||{})})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="head-video";this.data.videoData.hasVideoFeed&&!this.data.isExperiment&&(t="head-feed-video");var i=Object.assign({pos:t,component:"head-video"},e);this.triggerEvent("sendlog",i)},playHandler:function(e){this.playStartTime=(new Date).getTime(),this.dispatch("headvideoplay")},pauseHandler:function(){this.sendLog({action:"video-stop",playedTime:this.getPlayedTime(),encVid:this.data.videoData.videoData.encVid}),this.validPlayTime=this.validPlayTime+(new Date).getTime()-this.playStartTime,this.playStartTime=0},timeupdateHandler:function(e){var t,i=e.detail,o=i.currentTime,a=i.duration;t=this.data.videoData.videoData&&this.data.videoData.videoData.playUrl?this.data.videoData.videoData.encVid:this.data.videoData.videoFeed.seedVid,o>=3&&!this.validFlag?this.validFlag=!0:o<3&&this.validFlag&&(this.validFlag=!1);var n=.3*a,s=.8*a;o>n&&!this.percent30Flag?(this.percent30Flag=!0,this.sendLog({action:"play-end-30",encVid:t})):this.percent30Flag&&o<n&&(this.percent30Flag=!1),o>s&&!this.percent80Flag?(this.percent80Flag=!0,this.sendLog({action:"play-end-80",encVid:t})):this.percent80Flag&&o<s&&(this.percent80Flag=!1);var r=.99*a;o>r&&!this.percent100Flag?(this.percent100Flag=!0,this.sendLog({action:"play-end-100",encVid:t}),this.sendValidPlayLog(),this.data.loop&&(this.sendLog({action:"video-stop",playedTime:this.getPlayedTime(),encVid:t}),this.playStartTime=(new Date).getTime(),this.sendVideoPlay("auto-play"))):this.percent100Flag&&o<r&&(this.percent100Flag=!1)},sendVideoPlay:function(e){this.sendVideoLog({action:e,encVid:this.data.videoData.videoData.encVid,videoDuration:this.data.videoData.videoData.duration})},sendValidPlayLog:function(){this.validFlag&&this.getValidPlayTime()>=3&&this.sendVideoLog({action:"valid-play",encVid:this.data.videoData.videoData.encVid}),this.validPlayTime=0},getPlayedTime:function(){return this.playStartTime>0?Math.round(((new Date).getTime()-this.playStartTime)/1e3):0},getValidPlayTime:function(){return this.playStartTime>0?(this.validPlayTime+(new Date).getTime()-this.playStartTime)/1e3:this.validPlayTime/1e3},sendVideoLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.action&&"show"!==e.action||(e.isFirstShow=!0),this.sendLog(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({action:"show",videoProducer:"jingyan"},e))},scrollingHandler:function(e){for(var t=e.detail.scrollLeft,i=t+this.winWidth,o=0;o<this.videoFeedSmallLen;o++){var a=this.headScrollImgPvMap[o];a.logged||(a.left>t&&a.left<i||a.right>t&&a.right<i)&&(this.sendVideoLog({index:o,seedVid:a.seedVid}),a.logged=!0)}}},lifetimes:{attached:function(){if(this.data.videoData.hasVideoFeed)if(this.data.singleVideo)this.setData({durationData:P.timeFormatter(this.data.videoData.videoFeed.duration)}),this.sendVideoLog({encVid:this.data.videoData.videoFeed.seedVid});else{var e=this.data.videoData.videoFeedSmall,t=[],i=e.length;this.videoFeedSmallLen=i;for(var o=0;o<i;o++){t.push(P.timeFormatter(e[o].duration));var a={seedVid:e[o].seedVid};if(0===o)a.left=17,a.right=332;else{var n=this.headScrollImgPvMap[o-1];a.left=n.right+8,a.right=a.left+315}this.headScrollImgPvMap[o]=a}this.setData({durData:t}),this.winWidth=P.getSysInfoSync().windowWidth}else this.data.videoData.hasVideo&&(this.setData({durationData:P.timeFormatter(this.data.videoData.videoData.duration)}),this.sendVideoLog({encEid:this.data.videoData.videoData.encEid}))},ready:function(){var e=this;this.sendLog({action:"render"}),!this.data.videoData.hasVideo||!this.data.isExperiment&&this.data.videoData.hasVideoFeed?(i((function(){e.data.videoData.hasVideoFeed&&(e.data.isExperiment?e.data.videoData.hasVideo&&e.sendVideoLog({encEid:e.data.videoData.videoData.encEid}):e.scrollingHandler({detail:{scrollLeft:0}})),n.createSelectorQuery().in(e).select(".head-video-container").boundingClientRect().exec((function(t){t&&t[0]&&(e.headElemBoundingPvMap={height:t[0].height,logged:!0})}))}),1e3),this.triggerEvent("componentready")):i((function(){e.playVideo()}))},detached:function(){this.playStartTime>0&&(this.sendLog({action:"video-stop",playedTime:this.getPlayedTime(),encVid:this.data.videoData.videoData.encVid}),this.sendValidPlayLog())}}})})),window.define("64",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24");Component({isBrandTitleFirstFixed:!0,isBrandTitleFixed:!1,authorComp:null,fixedBrandTitleHeight:57,fixedBrandTitleScrollTop:0,properties:{topBarHeight:{type:Number,value:0},title:{type:String,value:""},viewNum:{type:Number,value:0,observer:function(e,t){e!==t&&this.convertViewNum(e)}},updateTime:{type:Number,value:0,observer:function(e,t){e!==t&&this.convertUpdateTime(e)}},serverTime:{type:Number,value:0},highQualityExp:{type:Number,value:0},hasVideo:{type:Boolean,value:!1},hasMultiVideo:{type:Boolean,value:!1},hasFollow:{type:Number,value:-1},jumpTo:{type:Object,value:null,observer:function(e,t){e&&!t&&this.sendBrandBtnShow()}},isZhjnTeacher:{type:Boolean,value:!1},author:{type:Object,value:null},riskGoUHome:{type:Boolean,value:!1}},data:{viewNumData:"",updateTimeData:"",maxHeight:54,isShow:!1,hasMax:!0,isBrandTitleFixed:!1},lifetimes:{attached:function(){this.convertViewNum(this.data.viewNum),this.convertUpdateTime(this.data.updateTime)},ready:function(){this.triggerEvent("componentready",{component:"header"})}},methods:{sendBrandBtnShow:function(){this.sendLog({pos:"btn-goto-zhihuijinnang",action:"show"}),this.getBrandFixedScrollTop()},getBrandFixedScrollTop:function(){var e=this;a.createSelectorQuery().in(this).select("#see-all-exp-button").boundingClientRect((function(t){e.fixedBrandTitleScrollTop=t.top})).exec()},convertViewNum:function(e){e&&this.setData({viewNumData:L.countFormatter(e)})},convertUpdateTime:function(e,t){e&&this.setData({updateTimeData:L.timespanFormatter(e,t)})},onFollowChanged:function(e){this.triggerEvent("followchanged",e.detail)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)},onTapBrandTips:function(){this.sendLog({pos:"btn-goto-zhihuijinnang",action:"click",position:this.isBrandTitleFixed?"fixed":"normal"});var e=this.data.jumpTo;if(e)switch(e.type){case x.jumpToPageType.webview:L.jumpTo(x.PageName.Webview,{url:e.url});case x.jumpToPageType.smartprogram:}},childReady:function(e){if(e&&e.detail&&"author-view"===e.detail.component)this.authorComp=this.selectComponent("#author-comp-id")},pageScroll:function(e,t){this.updateBrandTitlePosition(e+t),this.authorComp&&this.authorComp.pageScroll(e,t)},updateBrandTitlePosition:function(e){if(this.data.jumpTo){var t=this.fixedBrandTitleScrollTop;this.isBrandTitleFixed&&(e-=this.fixedBrandTitleHeight),!this.isBrandTitleFixed&&t<=e?(this.isBrandTitleFixed=!0,this.setData({isBrandTitleFixed:!0}),this.childPositionChange({detail:{component:x.fixedElementIdentName.headerZhjnTitle,position:"fixed",height:this.fixedBrandTitleHeight}}),this.isBrandTitleFirstFixed&&(this.isBrandTitleFirstFixed=!1,this.sendLog({pos:"btn-goto-zhihuijinnang",action:"position-change",position:"fixed"}))):this.isBrandTitleFixed&&t>e&&(this.isBrandTitleFixed=!1,this.setData({isBrandTitleFixed:!1}),this.childPositionChange({detail:{component:x.fixedElementIdentName.headerZhjnTitle,position:"normal",height:this.fixedBrandTitleHeight}}))}},childPositionChange:function(e){this.triggerEvent("childpositionchange",e.detail)}}})})),window.define("55",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");Component({properties:{brief:{type:Array,value:[]}},data:{briefHeight:0,maxHeight:54,isShow:!1,hasMax:!0},methods:{onSpread:function(){this.setData({isShow:!1,hasMax:!1}),this.triggerEvent("spread",{deltaHeight:this.data.briefHeight-this.data.maxHeight,position:"brief"})},sendLog:function(e){e.component="brief",this.triggerEvent("sendlog",e)}},lifetimes:{ready:function(){var e=this;this.data.brief&&this.data.brief.length&&L.poll((function(t,i){a.createSelectorQuery().in(e).select(".brief-text").boundingClientRect((function(e){e?t(e):i()})).exec()}),(function(t,i){t||i.height>e.data.maxHeight&&(e.setData({isShow:!0,briefHeight:i.height}),e.sendLog({pos:"brief-spread-btn",action:"render"}))}))}}})})),window.define("81",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36"),P=e("24");Component({extra:"",properties:{showlistCardData:{type:Object,value:null}},lifetimes:{ready:function(){this.data.showlistCardData.sidEnc?(this.sendLog({action:"render",sid:this.data.showlistCardData.sidEnc}),this.extra=JSON.stringify({fromPage:"article",fromPosition:"head-card-comp"})):this.sendLog({action:"error",info:"showlist-head-card rendered, but sidEnc is empty"})}},methods:{userTap:function(){this.sendLog({action:"click",sid:this.data.showlistCardData.sidEnc}),D.jumpTo({appKey:P.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:this.data.showlistCardData.sidEnc,extra:this.extra}})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({pos:"showlist-head-card",component:"showlist-head-card"},e))}}})})),window.define("83",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P="is_article_recipe_entry_tip_shown";Component({extra:"",properties:{eid:{type:String,value:""},foodList:{type:Array,value:null,observer:function(e,t){e&&e.length&&e!==t&&(this.sendLog({pos:"recipe-entry-btn",action:"show"}),this.procRecipeEntryTip())}},toolData:{type:Object,value:null,observer:function(e){e&&1===e.type&&this.setData({specialTool:this.processSpecialTool(e.content)})}}},data:{showRecipe:!1,showReciptTip:!1,specialTool:[]},methods:{processSpecialTool:function(e){var t=[];return e.forEach((function(e){e.brand&&e.brand.name&&t.push(["品牌型号：",e.brand.name]),e.system&&e.system.name&&t.push(["系统版本：",e.system.name]),e.app&&e.app.name&&t.push(["软件版本：",e.app.name])})),t},procRecipeEntryTip:function(){var e=this;n.getStorage({key:P,success:function(t){t.data||(n.setStorage({key:P,data:"1"}),e.setData({showReciptTip:!0},(function(){i((function(){e.setData({showReciptTip:!1})}),3e3)})))}})},recipeEntryClick:function(){this.sendLog({action:"click",pos:"recipe-entry-btn"}),this.setData({showRecipe:!0})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({pos:"tools-area",component:"tools-area-comp",eid:this.data.eid},e))}},messages:{recipemsg:function(e){var t=e.value,i=t.action;t.data;if("close-layer"===i)this.setData({showRecipe:!1})}}})})),window.define("80",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("24"),I=e("36");s();Component({scrollIntoViewBase:0,scrollPaddingLeft:9,tipTimeout:0,properties:{eid:{type:String,value:""},foodList:{type:Array,value:null,observer:function(e){e&&e.length&&this.setFoodList(e)}}},data:{foodItemWidth:129,list:[],showAddCard:!1,intoViewItemLeft:-1},methods:{emptyFn:function(){},removeFoodClick:function(e){var t=parseInt(e.currentTarget.dataset.index,10),i=this.data.list;i.splice(t,1),this.setData({list:i})},closeLayer:function(){this.dispatch("recipemsg",{action:"close-layer"})},layerWrapClick:function(){this.sendLog({pos:"mask-layer",action:"click"}),this.closeLayer()},closeClick:function(){this.sendLog({pos:"close-btn",action:"click"}),this.closeLayer()},setFoodList:function(e){e?this.setData({list:e.slice(0)}):this.setData({list:[]})},addFoodClick:function(){this.sendLog({pos:"add-food-btn",action:"click"}),this.setData({showAddCard:!0})},produceClick:function(){if(this.data.list&&this.data.list.length){this.sendLog({pos:"produce-btn",action:"click"});var e=this.data.list;e&&e.length&&I.jumpTo(P.PageName.FoodMenu,{extra:JSON.stringify({baseEid:this.data.eid}),foods:e.map((function(e){return e.name})).join(",")})}},getFoodIndex:function(e){return this.data.list.findIndex((function(t){return t.name===e}))},processAddFood:function(e){var t=this,o=this.getFoodIndex(e),a=this.data.list.slice(0);if(o>-1){var n=a.splice(o,1);n.length&&a.unshift(n[0])}else a.unshift({name:e});this.setData({list:a}),i((function(){var i=t.getFoodIndex(e);i>-1&&t.setData({intoViewItemLeft:t.foodItemWidth*i+t.scrollIntoViewBase})}),150)},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"recipe-comp"},e))}},messages:{addfoodmsg:function(e){var t=e.value,i=t.action,o=t.data;switch(i){case"close":break;case"confirm":this.processAddFood(o.foodName)}this.setData({showAddCard:!1})}},lifetimes:{created:function(){},attached:function(){var e=I.getSysInfoSync();this.scrollIntoViewBase=-e.windowWidth/2+this.foodItemWidth/2+this.scrollPaddingLeft},ready:function(){}}})})),window.define("79",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("24"),e("36"),n();Component({foodName:"",properties:{},data:{},methods:{inputHandler:function(e){var t=e.detail.value;t&&(this.foodName.length<6&&(this.foodName=t))},cancelHandler:function(){this.dispatch("addfoodmsg",{action:"close"})},confirmHandler:function(){this.inputConfirmHandler({detail:{value:this.foodName}})},inputConfirmHandler:function(e){var t=e.detail.value;t&&this.dispatch("addfoodmsg",{action:"confirm",data:{foodName:t}})},emptyFn:function(){}},lifetimes:{created:function(){},attached:function(){},ready:function(){},detached:function(){}}})})),window.define("60",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");n();Component({fixedGap:10,stepOffset:[],rawOffset:[],imgPadding:87,minHeight:205,maxHeight:418,minTop:0,maxTop:0,numHeight:39,winHeight:0,imgLoadedFlag:{},properties:{steps:{type:Array,observer:function(e){e&&e.length&&this.calStepTop()}},showAdGoodsIdxMap:{type:Object,value:{}},asp1713Data:{type:Object,value:null},hasAlbum:{type:Boolean,value:!1},abTest:{type:Object,value:{},observer:function(e){e&&"pass"===e.adComponent&&this.setData({isDynamicLibAd:!0})}},spreadHeight:{type:Number,value:0,observer:function(e,t){e>0&&this.updateOffset(e)}},winWidth:Number,isWeb:Boolean,hasNotice:{type:Boolean,value:!1},hasPan:{type:Boolean,value:!1},hideStepEntry:{type:Boolean,value:!1},scene:{type:String,value:""}},data:{spotClass:"absolute",curIndex:-1,curModule:-1,opaIndex:-1,opaModule:-1,fixedNumTop:67,imgPadding:87,isDynamicLibAd:!1},methods:{setFixedHandlerCondition:function(){var e=this.rawOffset;e[0]&&(this.minTop=e[0].top);var t=e.length-1;e[t]&&(this.maxTop=e[t].bottom-1.5*this.numHeight)},clickImage:function(e){var t=e.currentTarget.dataset,i=t.src,o=t.fromSwiper;this.triggerEvent("clickimage",{url:i}),this.sendLog({pos:"format-image",action:"click",fromSwiper:o})},swiperChange:function(e){var t=e.detail.current;this.setData({swiperCurrent:t}),this.sendLog({pos:"step-swiper",action:"swipe",index:t})},imgLoadHandler:function(e){var t=e.currentTarget.dataset,i=t.fromSwiper,o=t.stepId;this.imgLoadedFlag[o]||(this.sendLog({pos:"format-image",action:"render",fromSwiper:i}),this.imgLoadedFlag[o]=!0)},pageScroll:function(e,t){if(0!==this.rawOffset.length){var i=t+this.fixedGap,o=i+e;"absolute"===this.data.spotClass&&this.minTop<o&&o<this.maxTop?(this.dispatch("stepIndexSpotUpdate",{spotClass:"fixed",fixedNumTop:i}),this.setData({spotClass:"fixed",fixedNumTop:i})):"fixed"===this.data.spotClass&&(this.minTop>=o||o>=this.maxTop?(this.dispatch("stepIndexSpotUpdate",{spotClass:"absolute",fixedNumTop:67}),this.setData({spotClass:"absolute",fixedNumTop:67})):this.data.fixedNumTop<i&&(this.dispatch("stepIndexSpotUpdate",{spotClass:"fixed",fixedNumTop:i}),this.setData({fixedNumTop:i})));var a=0,n=this.stepOffset;for(a=0;a<n.length;a++){var s=n[a],r=0;for(r=0;r<s.length;r++){var c=s[r],d=c.top-i,l=c.bottom-i;if(e>=d&&e<=l){this.data.curIndex===r&&this.data.curModule===a&&this.data.opaIndex===r&&this.data.opaModule===a||(this.dispatch("stepIndexSpotUpdate",{stepIndex:r,stepCount:this.data.steps[a].step.length}),this.setData({curIndex:r,curModule:a,opaIndex:r,opaModule:a}));break}}if(r<s.length)break}a===n.length&&-1!==this.data.opaModule&&this.setData({opaIndex:-1,opaModule:-1})}},calStepTop:function(){var e=this;a.createSelectorQuery().in(this).selectAll(".step-step-container").boundingClientRect((function(t){t&&t.length>0&&a.createSelectorQuery().selectViewport().scrollOffset((function(i){var o=0;i&&i.scrollTop>0&&(o=i.scrollTop),e.rawOffset=t.map((function(e){return{top:e.top+o,bottom:e.bottom+o,left:e.left,right:e.right}})),e.stepOffset=e.changeStruct(e.rawOffset.slice(0)),e.setFixedHandlerCondition()})).exec()})).exec()},changeStruct:function(e){for(var t=[],i=0,o=0;o<this.data.steps.length;o++){var a=this.data.steps[o].step.length;t.push(e.slice(i,i+a)),i+=a}return t},updateOffset:function(e){this.rawOffset.forEach((function(t){t.top+=e,t.bottom+=e})),this.stepOffset=this.changeStruct(this.rawOffset.slice(0)),this.setFixedHandlerCondition()},handleGotoSteps:function(e){this.sendLog({pos:"goto-steps",action:"click"}),this.triggerEvent("gotosteps")},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({pos:"format-content",component:"format-content-n"},e);this.triggerEvent("sendlog",t)}},lifetimes:{created:function(){},attached:function(){var e=L.getSysInfoSync();this.winHeight=e.windowHeight},ready:function(){this.triggerEvent("componentready")},detached:function(){}}})})),window.define("77",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({})})),window.define("84",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("34"),x=(L.request,L.sendLog);n();Component({properties:{content:String},methods:{clickImg:function(e){this.triggerEvent("clickimg",{url:e.currentTarget.dataset.src}),this.sendLog({pos:"unformat-image",action:"click"})},sendLog:function(e){x(Object.assign({page:this.data.pageName,url:this.data.pageUrl,encEid:this.data.encEid,pos:"unformat-content",pageUUID:this.data.pageUUID,TimeOnPage:Math.round(((new Date).getTime()-this.data.pageStartTime)/1e3)},e))}}})})),window.define("57",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24"),P=e("34"),I=P.request,C=(P.sendLog,s(),e("28"));Component({behaviors:[C],properties:{tmpl:{type:String,value:"standard"},status:Number,encEid:String},dislikePending:!1,popupTmpl:null,data:{hasLikeAnimation:!1,likeData:"",needLoginCompType:D.needLoginCompType},methods:{childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)},dislikeLog:function(){if(!this.dislikePending){var e={pos:"dislike",action:"user-click",isCancel:2===this.data.status?1:0};this.sendLog(e)}},dislikeClick:function(){this.dislikePending||(2!==this.data.status?this.popupTmpl&&this.popupTmpl.showListPopup():this.dislikeHandler())},likeAnimationHandler:function(){var e=this;this.setData({hasLikeAnimation:!0},(function(){i((function(){e.likeHandler()}),300)}))},removeLikeAnimation:function(){this.setData({hasLikeAnimation:!1})},likeSuccessHandler:function(){this.sendLog({pos:"article-bottom-like",action:"click",isCancel:0}),this.removeLikeAnimation()},cancelLikeSuccessHandler:function(){this.sendLog({pos:"article-bottom-like",action:"click",isCancel:1}),this.removeLikeAnimation()},dislikeHandler:function(e){var t=this;0===this.data.status||3===this.data.status?I({url:x.getApiUrl("feedback"),method:"POST",data:{eid:this.data.encEid,type:2},onBduss:function(){t.dislikePending=!0,i((function(){n.showToast({title:"感谢反馈，我们将努力提供更优质的内容",icon:"none"})}),300),i((function(){t.dislikePending=!1,t.setData({status:2}),t.triggerEvent("feedback",{status:2,likeNum:t.data.likeNum})}),2300),t.sendLog({pos:"dislike",action:"click",isCancel:0})}},!0):1===this.data.status?I({url:x.getApiUrl("feedback"),method:"POST",data:{eid:this.data.encEid,type:2},onBduss:function(){var e=t.data.likeNum-1;i((function(){n.showToast({title:"感谢反馈，我们将努力提供更优质的内容",icon:"none"})}),300),i((function(){t.setData({status:2,likeNum:e}),t.triggerEvent("feedback",{status:2,likeNum:e})}),2300),t.sendLog({action:"click",pos:"dislike",isCancel:0,likeStatus:1,dislikeStatus:0})}},!0):2===this.data.status&&I({url:x.getApiUrl("feedback"),method:"POST",data:{eid:this.data.encEid,type:5},onBduss:function(){t.triggerEvent("feedback",{status:3}),n.showToast({title:"已取消",icon:"none"}),t.sendLog({pos:"dislike",action:"click",isCancel:1})}},!0)}},lifetimes:{attached:function(){this.data.likeNum&&this.setData({likeData:x.countFormatter(this.data.likeNum)}),this.popupTmpl=this.selectComponent("#dislikePopup")}}})})),window.define("65",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36");Component({properties:{jubaoStyle:{type:String,value:"btn"}},feedbackUrl:"https://ufosdk.baidu.com/ufosdk/postview/GX0dSidgPPS6o1Q2ainIQg%3D%3D/222561",data:{},attached:function(){},detached:function(){},methods:{gotoFeedback:function(){this.triggerEvent("jubaoEvt",{pos:"jubao",action:"click"}),x.jumpTo(L.PageName.Webview,{url:this.feedbackUrl})}}})})),window.define("56",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";s(),e("36");Component({popupTmpl:null,data:{reasonType:0,popupListAni:!0,reasonList:[{reasonType:1,reasonDesc:"方法无效"},{reasonType:2,reasonDesc:"内容过时"},{reasonType:3,reasonDesc:"方案不全"},{reasonType:4,reasonDesc:"营销广告"}]},attached:function(){},detached:function(){},methods:{reasonClickLog:function(e){var t=e.currentTarget.dataset.type;this.sendLog({pos:"dislike-reason",reasonType:t,action:"click"}),this.setData({reasonType:t})},reasonClick:function(e){var t=this;this.popupTmpl||(this.popupTmpl=this.selectComponent("#dislike-popup")),i((function(){t.popupTmpl&&t.popupTmpl.hide()}),300),this.triggerEvent("dislikehandler")},showListPopup:function(){this.setData({showList:!0,reasonType:0})},hideListPopup:function(){this.setData({showList:!1}),this.sendLog({pos:"dislike-list-close",action:"click"})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({component:"dislike-popup"},e);this.triggerEvent("sendlog",t)}}})})),window.define("98",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";Component({properties:{title:{type:String,value:""},top:{type:Number,value:117},mask:{type:Boolean,value:!0},hasAnimate:{type:Boolean,value:!1},transDuration:{type:Number,value:300},custom:{type:Boolean,value:!1}},externalClasses:["font-weight"],data:{isPopupShow:!0,popupAnimateHide:!0},attached:function(){var e=this;this.data.hasAnimate&&i((function(){e.setData({popupAnimateHide:!1})}))},detached:function(){},methods:{emptyFn:function(){},show:function(){this.setData({isPopupShow:!0})},hide:function(){var e=this;this.data.hasAnimate?this.setData({popupAnimateHide:!0},(function(){i((function(){e.triggerEvent("close")}),e.data.transDuration)})):this.triggerEvent("close")},headClick:function(){this.triggerEvent("headclick")}}})})),window.define("54",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24"),D=e("29"),P=e("28");n();Component({behaviors:[D,P],properties:{pageName:{type:String,value:"article"},coverImage:{type:String,value:""},encEid:String,title:{type:String,value:""},word:String,hasAlbum:Boolean,isBottomBar:{type:Boolean,value:!0},timestp:{type:Number,value:0},commentTips:{type:String,value:"发表你的评论"},showCommentIcon:{type:Boolean,value:!1},hideLeftBtn:{type:Boolean,value:!0},disableTTS:{type:Boolean,value:!1},riskShowComment:{type:Boolean,value:!1}},externalClasses:["fix-bottom-bar"],data:{likeData:"",path:"",canUseComment:!1,isPlaying:!1},methods:{sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({component:"bottom-bar"},e);this.triggerEvent("sendlog",t)},childlog:function(e){this.sendLog(e.detail)},toSteps:function(){this.sendLog({pos:"to-steps",action:"click"}),L.jumpTo(x.PageName.Steps,{eid:this.data.encEid,word:this.data.word,coverImage:this.data.coverImage})},toArticle:function(){this.sendLog({pos:"to-article",action:"click"}),L.jumpTo(x.PageName.Article,{eid:this.data.encEid,word:this.data.word,coverImage:this.data.coverImage})},likeSuccessHandler:function(){this.sendLog({pos:"bottom-bar-like",action:"click",isCancel:0})},cancelLikeSuccessHandler:function(){this.sendLog({pos:"bottom-bar-like",action:"click",isCancel:1})},addCommentClickLog:function(){this.sendLog({pos:"bottom-bar-comment-add",action:"click"})},openCommentClickLog:function(){this.sendLog({pos:"bottom-bar-comment-open",action:"click"})}},lifetimes:{attached:function(){var e="",t=this.data,i=t.pageName,o=t.encEid,a=t.word,n=t.riskShowComment,s=t.versionSupportComment,r={eid:o,word:a},c=n&&s;"steps"===i?e=L.getPagePath(x.PageName.Steps,r):"article"===i&&(e=L.getPagePath(x.PageName.Article,r)),this.setData({canUseComment:c,path:e})},ready:function(){this.data.canUseTTS&&this.sendLog({pos:"tts",action:"show"})}}})})),window.define("29",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7"),D=x(e("24")),P=(x(e("36")),null),I={index:0,letterCount:0};t.exports=Behavior({behaviors:[],properties:{encEid:{type:String,value:""},title:{type:String,value:""},coverImage:{type:String,value:""},playIndex:{type:Number,value:0,observer:function(e,t){e<this.data.pCount&&this.setData({currIndex:e})}},info:{type:Object,value:{},observer:function(e,t){}},unformatContent:{type:Array,value:[],observer:function(e,t){e&&e.length&&(this.data.info.unformatContent=e.slice(0))}}},ttsStatusTimeId:null,data:{streamStatus:"",streamTTSManager:"",voiceData:[],pCount:0,letterCount:0,currIndex:0,isInit:!1,isPlaying:!1,canUseTTS:!0,log:"",onPlay:"",onPause:"",onEnded:"",onStop:"",isLoading:!1},attached:function(){var e=this;I={index:0,letterCount:0},n.canIUse("getStreamTTSManager")?((P=n.getStreamTTSManager()).streamStatus((function(t){"playing"===t.ttsStatus&&e.voiceUpdate()})),this.setData({canUseTTS:!0})):this.setData({canUseTTS:!1})},detached:function(){},pageLifetimes:{show:function(){var e=this;this.data.canUseTTS&&(this.ttsStatusTimeId=i((function(t){n.getStreamTTSManager().streamStatus((function(t){"playing"===t.ttsStatus||"paused"===t.ttsStatus?e.data.isInit&&(e.onEvent(),e.setData({currIndex:t.index}),"playing"===t.ttsStatus&&e.setData({isPlaying:!0})):e.data.isInit&&e.resetTTS()}))}),500))},hide:function(){this.data.canUseTTS&&(this.setData({isPlaying:!1}),this.offEvent(),this.ttsStatusTimeId&&clearTimeout(this.ttsStatusTimeId))}},methods:{playHandler:function(){this.data.canUseTTS&&(this.data.isInit?this.data.isPlaying?(P.pause(),this.triggerEvent("onChangeTTS",{action:"pause-click"})):this.playStream(this.data.currIndex):this.data.isLoading||(this.setData({isLoading:!0}),this.voiceInit(),this.playStream()))},voiceInit:function(){this.handleVoiceData(this.data.info),this.initTTS()},voiceUpdate:function(){var e=this;this.handleVoiceData(this.data.info),this.initTTS(),P.streamStatus((function(t){"playing"!==t.ttsStatus||e.data.isPlaying||e.setData({isPlaying:!0}),e.data.currIndex!==t.index&&e.setData({currIndex:t.index})}))},debuglog:function(e){this.setData({log:this.data.log+"-------"+e})},initTTS:function(){P||(P=n.getStreamTTSManager()),this.onEvent(),this.setData({isInit:!0})},onEvent:function(){var e=this;P||(P=n.getStreamTTSManager()),P.onPlay((function(t){e.data.isLoading&&e.setData({isLoading:!1}),e.setData({isPlaying:!0,onPlay:JSON.stringify(t),currIndex:t.index})})),P.onPause((function(t){e.data.isLoading&&e.setData({isLoading:!1}),e.setData({isPlaying:!1,onPause:JSON.stringify(t)})})),P.onStop((function(t){e.data.isLoading&&e.setData({isLoading:!1}),e.setData({isPlaying:!1,onStop:JSON.stringify(t)}),e.triggerEvent("onChangeTTS",{action:"stop"})})),P.onEnded((function(t){e.data.isLoading&&e.setData({isLoading:!1}),e.setData({isPlaying:!1,onEnded:JSON.stringify(t)}),e.triggerEvent("onChangeTTS",{action:"ended"}),e.resetTTS()}))},offEvent:function(){P||(P=n.getStreamTTSManager()),P.onPlay((function(e){})),P.onPause((function(e){})),P.onStop((function(e){})),P.onEnded((function(e){}))},playStream:function(e){var t={title:this.data.title,context:{paragraphCount:this.data.pCount,letterCount:this.data.letterCount,imageUrl:this.data.coverImage,iconImageUrl:this.data.coverImage},content:this.data.voiceData};void 0!==e&&parseInt(e,10)>=-1&&(t.index=parseInt(e,10)),P.playStream(t),this.triggerEvent("onChangeTTS",{action:"play-click"})},returnContext:function(e){var t=e.length;if(t){var i={data:e,type:"text",index:I.index,encEid:this.data.encEid,varter:t};return I.index++,I.letterCount+=t,i}},handleFormartContent:function(e){var t=this.data.voiceData.slice(0);if(e.brief&&e.brief.length&&t.push(this.returnContext(e.brief.join(","))),e.tools&&e.tools.type){var i=[],o="";o=e.tools.type===D.default.ToolsType.food?"食材":"工具原料",i.push(o);for(var a=e.tools.content,n=0,s=a.length;n<s;n++)o=a[n].name?a[n].name+a[n].content:a[n],i.push(o);t.push(this.returnContext(i.join(",")))}if(e.steps&&e.steps.length)for(var r=0,c=e.steps.length;r<c;r++){var d=e.steps[r].step,l=[],h=e.steps[r].title;e.type&&e.type===D.default.PageType.album?h&&l.push(h):h&&t.push(this.returnContext(h));for(var p=0,u=d.length;p<u;p++){var g=d[p].text;e.type&&e.type===D.default.PageType.album?l.push(g.join(",")):t.push(this.returnContext(g.join(",")))}e.type&&e.type===D.default.PageType.album&&t.push(this.returnContext(l.join(",")))}if(e.notice&&e.notice.length){var f=[];f.push("注意事项");for(var m=0,v=e.notice.length;m<v;m++)e.notice[m]&&f.push(e.notice[m]);t.push(this.returnContext(f.join(",")))}return t},handleVoiceData:function(e){var t=[],i=e.unformatContent;if(i&&i.length)for(var o=0,a=i.length;o<a;o++)"text"===i[o].type&&i[o].text&&t.push(this.returnContext(i[o].text));else t=this.handleFormartContent(e);this.setData({voiceData:t.slice(0),pCount:t.length,letterCount:I.letterCount})},resetTTS:function(){I={index:0,letterCount:0},this.setData({voiceData:[],pCount:0,letterCount:0,currIndex:0,isInit:!1})}}})})),window.define("93",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";n();var L=e("36");Component({properties:{encEid:{type:String,value:"",observer:function(e){e&&this.setCommentParam()}},title:{type:String,value:""},path:{type:String,value:""}},externalClasses:["fix-bottom-bar"],isInitPopupTop:!1,data:{popupListTop:136,popupDetailTop:31,commentParam:{},isOpen:!1,addReplyCommentFlag:!1,showList:!1,showDetail:!1,showCommentList:!0,popupListAni:!0,popupDetailAni:!0,srid:""},detached:function(){},methods:{setCommentParam:function(){var e=this.data,t=e.title,i=e.encEid,o=[this.data.path,"&snid=",i].join(""),a={snid:i,path:o,title:t};this.setData({commentParam:a})},setCommentPopupTop:function(){var e=this,t=L.getSysInfoSync(),i=t.statusBarHeight+t.navigationBarHeight,o=t.screenHeight-i-94;this.setData({commentListHeight:o-this.data.popupListTop,commentDetailHeight:o-this.data.popupDetailTop},(function(){e.isInitPopupTop=!0}))},clickComment:function(e){this.setData({srid:e.data.srid,showDetail:!0,showCommentList:!1}),this.sendLog({pos:"comment-detail-open",action:"click"})},doCaptureCatch:function(){},addComment:function(){var e=this;this.isInitPopupTop||this.setCommentPopupTop(),this.setData({showList:!0,isOpen:!1},(function(){e.setData({isOpen:!0})}))},deleteComment:function(e){this.showListPopup()},addReplyComment:function(){var e=this;this.setData({addReplyCommentFlag:!0},(function(){e.setData({addReplyCommentFlag:!1})}))},showListPopup:function(){this.isInitPopupTop||this.setCommentPopupTop(),this.setData({showList:!0,showCommentList:!0,showDetail:!1})},hideListPopop:function(){this.setData({showList:!1,showDetail:!1}),this.sendLog({pos:"comment-list-close",action:"click"})},hideDetailPopup:function(){this.showListPopup(),this.sendLog({pos:"comment-detail-close",action:"click"})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({component:"comment-popup"},e);this.triggerEvent("sendlog",t)}}})})),window.define("70",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36");Component({properties:{feedList:{type:Array,value:[],observer:function(e,t){if(e&&e.length){var i=this.exchangeDataStructure(e.slice(this.data.list.length));this.setData({list:this.data.list.slice(0).concat(i)})}}},abTest:{type:Object,value:{}}},data:{list:[]},methods:{exchangeDataStructure:function(e){if(e&&e.length){var t=this.data.list.length;return e.map((function(e,i){var o=t+i;if("ad"===e.type||"mixbanner"===e.type||"live"===e.type)return e.index=o,"live"===e.type&&(e.originType="live"),e;var a="pureText",n=e.eidEnc;return"article"===e.type?e.video&&e.video.cover?(a="videoText",e.video.cover=D.procBosImg(e.video.cover,{w:1050,h:600})):e.img&&e.img.length>2?(a="multiImg",e.img=e.img.map((function(e){return D.procBosImg(e)}))):e.img&&e.img.length>0&&e.img.length<3?(a="singleImg",e.img=e.img.map((function(e){return D.procBosImg(e)}))):a="pureText":"showlist"===e.type?(a="videoSheet",n=e.sidEnc):"wenku"===e.type?(a="wenkuCourse",n=e.videoId):"zhuanti"===e.type&&(a="chosenTopic",n=e.ztidEnc),{index:o,title:e.title,text:e.text||"",viewCount:D.countFormatter(e.view)||0,itemId:n,imgList:e.img instanceof Array?e.img.map((function(e){return{url:e}})):null,videoInfo:e.video||null,sheetInfo:"videoSheet"===a?{cover:e.img[0],videoCount:e.videoCount}:null,courseInfo:"wenkuCourse"===a?{cover:e.img,courseNum:e.courseNum,price:e.price}:null,topicInfo:"chosenTopic"===a?{cover:e.img}:null,type:a,originType:e.type}}))}},onUpdateItemOffset:function(e){this.triggerEvent("updateitemoffset",e.detail)}},messages:{sendlog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"multi-answer"},e.value))}}})})),window.define("68",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36"),P=e("24");n();Component({properties:{itemData:{type:Object,value:{}},abTest:{type:Object,value:{},observer:function(e){(e&&"pass"===e.adComponent&&6!=+e.showStyle||e&&"pass"===e.aspImageText&&6==+e.showStyle)&&this.setData({isDynamicLibAd:!0})}}},data:{adLoaded:!0,isDynamicLibAd:!1},methods:{feedAdLoadHlr:function(e){var t=this,i=["#rel-exp-item-"+this.data.itemData.index].join("");D.poll((function(e,t){a.createSelectorQuery().select(i).boundingClientRect((function(i){i?e(i):t()})).exec()}),(function(e,i){e||a.createSelectorQuery().selectViewport().scrollOffset((function(e){var o=0;e&&e.scrollTop>0&&(o=e.scrollTop),t.triggerEvent("updateoffset",{top:i.top+o,height:i.height,index:t.data.itemData.index})})).exec()})),this.sendLog({pos:"feedAd",action:"load"})},feedAdRenderHlr:function(e){this.sendLog({pos:"feedAd",action:"render"})},feedAdErrHlr:function(e){this.setData({adLoaded:!1}),this.sendLog({pos:"feedAd",action:"error"})},feedAdClickHlr:function(){this.sendLog({pos:"feedAd",action:"click"})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dispatch("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({itemType:this.data.itemData.type,index:this.data.itemData.index},e))},childlog:function(e){this.sendLog(e.detail)},itemClick:function(e){this.sendLog({pos:"rel-exp-item",action:"click"});var t=this.data.itemData.originType;if("showlist"===t)D.jumpTo({appKey:P.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:this.data.itemData.itemId}});else if("wenku"===t)D.jumpTo({appKey:P.APPKEY.wenku,appPath:"/pages/coursePlay/coursePlay",appParam:{videoId:this.data.itemData.itemId,wkFrom:"jingyan"}});else if("article"===t){var i="";this.data.itemData.imgList&&this.data.itemData.imgList[0]?i=this.data.itemData.imgList[0]:this.data.itemData.videoInfo&&this.data.itemData.videoInfo.cover&&(i=this.data.itemData.videoInfo.cover),D.jumpTo(P.PageName.Article,{eid:this.data.itemData.itemId,coverImage:i})}else if("live"===t){var o=this.data.itemData.liveSrcType,a=this.data.itemData.roomid;this.sendLog({pos:"rel-exp-live",action:"click",liveSrcType:o,roomid:a}),D.jumpTo(P.PageName.LiveRoom,{roomid:a,liveSrcType:o,type:"rel-exp"})}else"zhuanti"===t&&D.jumpTo(P.PageName.Topic,{id:this.data.itemData.itemId})}},lifetimes:{attached:function(){var e=this;if(this.sendLog({pos:"rel-exp-item",action:"render"}),"ad"!==this.data.itemData.type){var t=["#rel-exp-item-"+this.data.itemData.index].join("");D.poll((function(e,i){a.createSelectorQuery().select(t).boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(t,i){t||a.createSelectorQuery().selectViewport().scrollOffset((function(t){var o=0;t&&t.scrollTop>0&&(o=t.scrollTop),e.triggerEvent("updateoffset",{top:i.top+o,height:i.height,index:e.data.itemData.index})})).exec()}))}}}})})),window.define("72",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36"),n();Component({properties:{text:{type:String,value:""},title:{type:String,value:""},viewCount:{type:Number,value:0},videoCount:{type:Number,value:0},type:{type:String,value:"pureText"}},data:{viewData:"",classNameStr:[]},lifetimes:{attached:function(){var e=[];switch(this.data.type){case"singleImg":e.push("sii");break;case"videoSheet":e.push("vsi");break;case"videoText":e.push("vti");break;case"multiImg":e.push("mii")}e.length&&this.setData({classNameStr:" "+e.join(" ")})}}})})),window.define("71",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{text:{type:String,value:""},viewCount:{type:Number,value:0},imgList:{type:Array,value:[]}}})})),window.define("73",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36"),n();Component({properties:{title:{type:String,value:""},text:{type:String,value:""},viewCount:{type:Number,value:0},imgInfo:{type:Object,value:{}}}})})),window.define("75",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");Component({properties:{title:{type:String,value:""},viewCount:{type:Number,value:0},videoInfo:{type:Object,value:{}}},data:{durationData:""},lifetimes:{attached:function(){this.data.videoInfo.duration&&this.setData({durationData:L.timeFormatter(this.data.videoInfo.duration)})}}})})),window.define("69",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36");Component({properties:{title:{type:String,value:""},viewCount:{type:Number,value:0},liveInfo:{type:Object,value:{}}},data:{durationData:""},lifetimes:{}})})),window.define("74",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{title:{type:String,value:""},viewCount:{type:Number,value:0},sheetInfo:{type:Object,value:{}}}})})),window.define("76",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{title:{type:String,value:""},viewCount:{type:Number,value:0},courseInfo:{type:Object,value:{}}}})})),window.define("67",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{title:{type:String,value:""},topicInfo:{type:Object,value:{}}}})})),window.define("86",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("24"),C=e("36"),O=e("34"),k=O.request,E=(O.sendLog,s());Component({extraTopBarHeight:0,adEnded:!0,viewPortHeight:0,winWidth:0,calcOffsetTimeout:!1,videoPaused:!0,firstItemPaddingTop:11,paddingTop:15,validFlag:!1,scrollingDuration:350,scrollTop:0,scrollingTimeoutId:0,feedOffset:[],feedPosterPvMap:[],videoLogMap:[],videoContext:null,topAreaHeight:0,playStartTime:0,validPlayTime:0,nextVideoListOffset:0,totalVideosLength:0,seedVid:"",videosSet:new Set,properties:{encEid:String,spreadHeight:{type:Number,value:0,observer:function(e,t){e>0&&this.updateOffset(e)}},autoTapped:{type:Boolean,value:!1},topBarHeight:Number,tabViewHeight:Number,tabFixedTop:Number,bottomBarHeight:Number,hasVideo:{type:Boolean,value:!0},query:{type:String,value:""},scene:{type:String,value:""},fromAnchor:{type:String,value:""},from:{type:String,value:""},articleFollowChange:{type:Object,value:{},observer:function(e){this.updateAllItemFollowState(e.uid,e.canFollow)}},riskGoUHome:{type:Boolean,value:!1}},data:{bottomEmptyAreaHeight:0,userTaped:!1,list:[],videoSrc:"",videoPoster:"",playingIdx:-1,top:-999,videoHeight:0,winHeight:0,systemInfo:{},hasMore:!0,adUpdateTime:Date.now(),hasFollowList:[],jyclientParams:"",videoAdRequest:C.getApiUrl("videoAdRequest")},methods:{getPlayingIndex:function(){return this.videoPaused?-1:this.data.playingIdx},play:function(e){if(e>-1&&e<this.data.list.length){var t=this.data.list[e];this.sendLog({action:"auto-play",index:e,feedVid:t.feedVid,videoDuration:t.duration||0}),this.playIndexWithScroll(e)}},exchangeDataStructure:function(e){return e.map((function(e,t){return P(P({},e),{},{index:t,poster:e.coverUrl,src:e.playUrl})}))},playIndexWithScroll:function(e){var t=this;this.feedOffset.length?(this.data.userTaped||this.setData({userTaped:!0}),this.dispatch("feedcallpagescrollto",{scrollTop:this.feedOffset[e]}),i((function(){t.changePlay(e)}),this.scrollingDuration)):this.calcVideoPosterRectBounding(e,this.playIndexWithScroll.bind(this))},getFeedList:function(){var e=this;if(this.data.hasMore){var t={eid:this.data.encEid,from:this.data.from,fromAnchor:this.data.fromAnchor,offset:this.nextVideoListOffset,isPv:0};k({url:C.getApiUrl(I.PageName.VideoFeed),data:t,success:function(t){n.hideLoading();var o=t.data;if(0===o.errNo)if(o.data.videoList&&o.data.videoList.length>0){e.nextVideoListOffset=o.data.offset+o.data.limit,0===o.data.offset&&(e.seedVid=o.data.seedVid,e.totalVideosLength=o.data.total,e.videosSet=new Set);var a=!0;e.nextVideoListOffset>=e.totalVideosLength&&(a=!1);var s=[];o.data.videoList.forEach((function(t){e.videosSet.has(t.feedVid)||(s.push(t),e.videosSet.add(t.feedVid))}));var r=e.data.list.concat(e.exchangeDataStructure(s)),c=s.map((function(e){return{uid:e.authorInfo?e.authorInfo.uid:"",hasFollow:e.hasFollow,canShow:e.authorInfo&&e.authorInfo.uid}})),d=e.data.hasFollowList.concat(c);e.setData({list:r,hasFollowList:d,hasMore:a},(function(){i((function(){o.data.offset>0&&(e.calcOffsetTimeout=!1),e.calcVideoPosterRectBounding()}),500)}))}else n.showToast({title:"没有数据,请重试",icon:"none",duration:4e3});else n.showToast({title:"数据错误,请重试",icon:"none",duration:4e3})},fail:function(e){n.hideLoading(),n.showToast({title:"请检查网络连接",icon:"none",duration:4e3})}})}},calcVideoPosterRectBounding:function(e,t){var o=this;this.calcOffsetTimeout&&this.feedOffset.length||(this.calcOffsetTimeout=!0,i((function(){n.createSelectorQuery().in(o).selectAll(".feed-item-comp").boundingClientRect().exec((function(a){a&&a[0]&&a[0].length?n.createSelectorQuery().selectViewport().scrollOffset((function(n){var s=0;n&&n.scrollTop>0&&(s=n.scrollTop);var r=o.data.videoHeight;o.feedOffset=a[0].map((function(e,t){var i=e.top+o.paddingTop+s;return o.feedPosterPvMap[t]={logged:!1,followBtnLogged:!1,top:i,bottom:i+r},i})),o.feedOffset[0]=o.feedOffset[0]-(o.paddingTop-o.firstItemPaddingTop),o.feedPosterPvMap[0]={logged:!1,followBtnLogged:!1,top:o.feedOffset[0],bottom:o.feedOffset[0]+r},i((function(){o.calcVideoShowLog(s,o.data.topBarHeight+o.extraTopBarHeight)}),50),"function"==typeof t&&t(e)})).exec():i((function(){o.calcOffsetTimeout=!1,o.calcVideoPosterRectBounding(e,t)}))}))})))},reachBottom:function(e){this.getFeedList()},onClickCover:function(e){var t=e.detail.index;this.pauseVideo();var i=this.data.list[t];this.data.list[this.data.playingIdx];this.sendLog({action:"click-play",index:t,feedVid:i.feedVid,videoDuration:i.duration}),this.playIndexWithScroll(t)},stopVideo:function(){this.setData({playingIdx:-1}),this.pauseVideo()},playVideo:function(){this.videoContext||(this.videoContext=n.createVideoContext("feed-player-id")),this.videoContext&&"function"==typeof this.videoContext.play&&this.videoContext.play()},pauseVideo:function(){this.videoContext&&"function"==typeof this.videoContext.pause&&this.videoContext.pause()},errorHandler:function(e){var t=this.data.playingIdx,i=this.data.feeds[t];this.sendLog({action:"play-err",index:t,feedVid:i?i.feedVid:"",errObj:JSON.stringify(e||{})})},playHandler:function(e){this.videoPaused=!1,this.videoContext||(this.videoContext=n.createVideoContext("feed-player-id")),this.adEnded&&(this.playStartTime=(new Date).getTime()),this.dispatch("feedvideoplay")},pauseHandler:function(){this.videoPaused=!0;var e=this.data.playingIdx,t=this.data.list[e];t&&this.sendLog({action:"video-stop",index:e,playedTime:this.getPlayedTime(),feedVid:t.feedVid,videoDuration:t.duration||0}),this.validPlayTime=this.validPlayTime+(new Date).getTime()-this.playStartTime,this.playStartTime=0},timeupdateHandler:function(e){if(this.adEnded){var t=e.detail,i=t.currentTime,o=t.duration,a=this.data.playingIdx;i>=3&&!this.validFlag?this.validFlag=!0:this.validFlag&&i<3&&(this.validFlag=!1);var n=this.data.list[a].feedVid;this.logPlayedPercent(i,o,a,n)}},endedHandler:function(){if(this.adEnded){var e=this.data.playingIdx,t=this.data.list[e];this.sendLog({action:"play-end-100",index:e,feedVid:t.feedVid,playedTime:this.getPlayedTime(),videoDuration:t.duration||0}),this.sendValidPlayLog(e),this.adEnded=!1,this.playStartTime=0}},adEndAutoPlay:function(){this.adEnded=!0,this.videoPaused=!0;var e=this.data.playingIdx+1;if(e<this.data.list.length){var t=this.data.list[e];this.sendLog({action:"auto-play",index:e,feedVid:t.feedVid,videoDuration:t.duration||0}),this.playIndexWithScroll(e)}else this.setData({playingIdx:-1})},changePlay:function(e){var t=this;this.adEnded=!0;var i=this.feedOffset[e],o=this.data.list[e],a=this.data.playingIdx,n=JSON.stringify({eid:this.data.encEid,feedVid:o.feedVid,title:o.title,bdenvmode:E.globalData.privacyMode,iadLDL:E.globalData.iadLDL,query:this.data.query,scene:this.data.scene});this.videoLogMap[e]||(this.videoLogMap[e]={});var s={videoSrc:o.src,videoPoster:o.poster,top:i,playingIdx:e,adUpdateTime:Date.now(),jyclientParams:n};this.setData(s,(function(){a>=0&&t.sendValidPlayLog(a),t.playVideo(),t.validFlag=!1}))},logPlayedPercent:function(e,t,i,o){var a=this.videoLogMap[i],n=e/t,s={index:i,feedVid:o};a&&(!a.percent30&&n>=.3?(a.percent30=!0,this.sendLog(P(P({},s),{},{action:"play-end-30"}))):a.percent30&&n<.3&&(a.percent30=!1),!a.percent80&&n>=.8?(a.percent80=!0,this.sendLog(P(P({},s),{},{action:"play-end-80"}))):a.percent80&&n<.8&&(a.percent80=!1))},sendValidPlayLog:function(e){if(this.validFlag&&this.getValidPlayTime()>=3){var t=this.data.list[e];t&&this.sendLog({action:"valid-play",feedVid:t.feedVid})}this.validPlayTime=0},calcVideoShowLog:function(e,t){for(var i=e+t,o=e+this.data.winHeight,a=this.feedPosterPvMap.length,n=0;n<a;n++){var s=this.feedPosterPvMap[n];s.logged||(s.top>i&&s.top<o||s.bottom<o)&&(this.sendLog({action:"show",index:n,isFirstShow:!0,feedVid:this.data.list[n].feedVid}),this.sendFollowBtnShowIfNeed(n),s.logged=!0)}},pageScroll:function(e,t){var o=this,a=this.data.userTaped;this.data.autoTapped&&!a&&(a=!0,this.setData({userTaped:!0},(function(){o.calcVideoPosterRectBounding()}))),this.extraTopBarHeight=t-this.data.topBarHeight,a?(clearTimeout(this.scrollingTimeoutId),this.scrollingTimeoutId=i((function(){o.debounceScrolling(e,t)}),70),this.calcVideoShowLog(e,t)):this.calcFollowBtnShowLog(e,t)},debounceScrolling:function(e,t){var i=this.feedOffset.length;if(!(i<1)){this.scrollTop=e;for(var o=this.data.playingIdx,a=0;a<i;a++)if(this.calcItemCanPlay(a,e)){if(this.videoPaused||a!==o){var n=this.data.list[a],s=this.data.list[o];a!==o&&this.sendLog({action:"auto-play",index:a,playedTime:this.getPlayedTime(),prevFeedVid:s?s.feedVid:"",feedVid:n.feedVid,videoDuration:n.duration}),this.changePlay(a)}return}this.dispatch("feedvideocannotplay")}},calcItemCanPlay:function(e,t){var i=this.feedOffset[e],o=t+this.topAreaHeight,a=this.data.winHeight+t;return i>o&&i+this.data.videoHeight<a},onRelOffset:function(e){var t=e.detail;this.feedOffset[t.index]=t.top},updateOffset:function(e){for(var t=this.feedOffset.length,i=0;i<t;i++)this.feedOffset[i]+=e},getPlayedTime:function(){return this.playStartTime>0?Math.round(((new Date).getTime()-this.playStartTime)/1e3):0},getValidPlayTime:function(){return this.playStartTime>0?(this.validPlayTime+(new Date).getTime()-this.playStartTime)/1e3:this.validPlayTime/1e3},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){var t=Object.assign({pos:"video-feed-item",component:"video-feed",videoProducer:"jingyan"},e);this.triggerEvent("sendlog",t)},adErrorHandler:function(e){},adLoadHandler:function(e){},adCloseHandler:function(e){},adStatusHandler:function(e){this.playStartTime=0,"videoend"===e.status&&this.adEndAutoPlay()},onFollowChanged:function(e){e&&(this.triggerEvent("followchanged",P({from:"video-feed"},e.detail)),e.detail&&e.detail.uid&&this.updateAllItemFollowState(e.detail.uid,e.detail.canFollow))},updateAllItemFollowState:function(e,t){var i=this.data.hasFollowList;i.length>0&&(i.forEach((function(i,o,a){i.uid&&i.uid===e&&(i.hasFollow=t?0:1)})),this.setData({hasFollowList:i}))},sendFollowBtnShowIfNeed:function(e){var t=this.feedPosterPvMap[e];t.followBtnLogged||(this.data.hasFollowList[e]&&this.data.hasFollowList[e].canShow&&this.sendLog({pos:"follow-btn",action:"show",index:e,isFirstShow:!0,feedVid:this.data.list[e].feedVid}),t.followBtnLogged=!0)},calcFollowBtnShowLog:function(e,t){for(var i=e+t,o=e+this.data.winHeight,a=this.feedPosterPvMap.length,n=0;n<a;n++){var s=this.feedPosterPvMap[n];s.followBtnLogged||(s.top>i&&s.top<o||s.bottom<o)&&this.sendFollowBtnShowIfNeed(n)}}},lifetimes:{created:function(){n.showLoading({title:"加载中"}),this.getFeedList()},attached:function(){var e=C.getSysInfoSync();if(e){var t={systemInfo:e,winHeight:e.windowHeight,videoHeight:Math.ceil(.5625*(e.windowWidth-34))};this.topAreaHeight=this.data.topBarHeight+this.data.tabViewHeight;var i=e.windowHeight-this.topAreaHeight;this.viewPortHeight=i;var o=.64*e.windowWidth,a=(i/o-2)*o-50;a<0&&(a=0),t.bottomEmptyAreaHeight=a,this.setData(t)}},ready:function(){var e=this;this.triggerEvent("componentready"),this.data.hasVideo||i((function(){e.play(0)}),500)},detached:function(){var e=this.data.playingIdx,t=this.data.list[e];t&&(this.playStartTime>0&&this.sendLog({action:"video-stop",index:e,playedTime:this.getPlayedTime(),feedVid:t.feedVid,videoDuration:t.duration||0}),this.sendValidPlayLog(e))}}})})),window.define("85",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");Component({properties:{itemData:{type:Object},itemIndex:{type:Number},riskGoUHome:{type:Boolean,value:!1},itemHasFollow:Object},data:{durationStr:"",viewStr:""},methods:{clickCover:function(e){this.triggerEvent("clickcover",{index:this.data.itemIndex})},onFollowChanged:function(e){this.triggerEvent("followchanged",e)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)}},lifetimes:{attached:function(){this.setData({durationStr:L.timeFormatter(this.data.itemData.duration),viewStr:L.countFormatter(this.data.itemData.videoView)})}}})})),window.define("59",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{foodInfo:{type:Object,value:{},observer:function(e){var t={};e.duration&&e.duration>0&&(t.foodDuration=this.timeFormatter(e.duration)),e.flavor&&e.flavor.length>0&&(t.foodFlavor=e.flavor),e.difficulty&&e.difficulty.length>0&&(t.foodDifficulty=e.difficulty),"{}"!==JSON.stringify(t)&&(t.hasFoodInfo=!0,this.setData(t))}}},data:{hasFoodInfo:!1,foodDuration:"",foodFlavor:"",foodDifficulty:""},attached:function(){},detached:function(){},methods:{timeFormatter:function(e){if(e>0){var t=Math.floor(e/3600),i="";t>0&&(e-=3600*t,i=t);var o=Math.floor(e/60);return t>=24?i+"小时":t>0?i+"小时"+o+"分钟":o>0?o+"分钟":"1分钟"}return"1分钟"}}})})),window.define("53",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36"),P=e("24");Component({properties:{brandAd:{type:Object,value:null}},data:{},attached:function(){},detached:function(){},methods:{onTap:function(){this.sendLog({pos:"ad-zhihuijinnang",action:"click"});var e=this.data.brandAd;if(e)switch(e.type){case P.jumpToPageType.webview:D.jumpTo(P.PageName.Webview,{url:e.url});case P.jumpToPageType.smartprogram:}},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"comp-ad-zhihuijinnang"},e))}}})})),window.define("78",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("36"),P=e("24");Component({properties:{tools:{type:Object,value:{}},encEid:{type:String,value:""},clusterId:{type:Number}},data:{platforms:[],isSelectMaskShow:!1,selectMask:{}},attached:function(){var e=[],t=this.data.tools.tools||[],i={model:{index:0,type:P.toolsList[0].value},system:{index:1,type:P.toolsList[1].value},software:{index:2,type:P.toolsList[2].value}};P.toolsList.forEach((function(o){var a=o.key;if(t[a]){var n=t[a],s=n.noChoice,r=n.id,c=n.name,d=t["".concat(a,"No")],l=d?d.id:"",h=d?d.name:"",p="".concat(c).concat(h);e.push({noChoice:s,index:i[a].index,type:i[a].type,id:r,name:c,noId:l,noName:h,displayName:p})}})),this.setData({platforms:e})},detached:function(){},methods:{onTapChange:function(e){this.sendLog({pos:"platform-change-button",action:"click"});var t=e.currentTarget.dataset,i={parentId:t.index+1,curId:t.id,curName:t.name,curNoId:t.noId,curNoName:t.noName};this.setData({isSelectMaskShow:!0,selectMask:i})},handleTapMask:function(){this.setData({isSelectMaskShow:!1})},handelToolsChange:function(e){this.sendLog({pos:"multi-answer-popup-gotosee",action:"click"});var t=e.detail,i=t.clusterId,o=this.data.encEid,a=t.parentId,n=t.id,s=t.name,r=t.noId,c=t.noName,d={encEid:o,clusterId:i},l=P.toolsList[a-1].key;d["".concat(l,"Id")]=n,d["".concat(l,"Name")]=s,d["".concat(l,"NoId")]=r,d["".concat(l,"NoName")]=c,D.jumpTo(P.PageName.MultiAnswer,d)},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"platform"},e))}}})})),window.define("100",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("34"),D=x.request,P=(x.sendLog,e("36")),I=(n(),[{id:0,name:"不限"}]);Component({properties:{encEid:{type:String,value:""},clusterId:{type:Number},parentId:{type:Number},curId:{type:Number},curName:{type:String,value:""},curNoId:{type:Number},curNoName:{type:String,value:""},from:{type:String,value:""}},data:{title:"",leftOptions:[],rightOptions:[],optionsUnion:[],loadSuccess:!0},allOptions:[],attached:function(){this.getToolsInfo()},detached:function(){},methods:{onTapItem:function(e){var t=e.currentTarget.dataset,i=t.id,o=t.name;if("left"===t.type){if(i!==this.data.optionsUnion[0].curId){var a=I.concat(this.allOptions[i]),n=this.data.optionsUnion;n[1].list=a,n[0].curId=i,n[1].curId=null,this.setData({optionsUnion:n}),this.data.curName=o,this.data.curNoName=""}}else if(i!==this.data.optionsUnion[1].curNoId){var s=this.data.optionsUnion;s[1].curId=i,this.setData({optionsUnion:s}),this.data.curNoName=o}},onTapMask:function(){this.triggerEvent("tapMask")},goToSee:function(){var e={parentId:this.data.parentId,id:this.data.optionsUnion[0].curId,name:this.data.curName,noId:this.data.optionsUnion[1].curId,noName:this.data.curNoName,clusterId:this.data.clusterId};this.triggerEvent("toolsChange",e)},getAllOptions:function(e){var t={};return e.forEach((function(e){e&&void 0!==e.id&&(t[e.id]=e.next)})),t},getToolsInfo:function(){var e=this,t=L.toolsList[this.data.parentId-1].value,i={clusterId:this.data.clusterId,eid:this.data.encEid};D({url:P.getApiUrl("getToolsMap"),method:"POST",data:i,success:function(i){var o=i.data;if(0===o.errNo){var a=o.data.toolsMap[L.toolsList[e.data.parentId-1].key]||[],n=I.concat(a),s=e.getAllOptions(n);e.allOptions=s;var r=I.concat(s[e.data.curId]),c=[{type:"left",list:n,curId:e.data.curId},{type:"right",list:r,curId:e.data.curNoId}],d={title:t,optionsUnion:c};e.setData(d)}else e.setData({loadSuccess:!1})},fail:function(){e.setData({loadSuccess:!1})}})}}})})),window.define("66",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}n();var D=e("36"),P=e("24"),I=e("34"),C=I.request;I.sendLog;Component({requestFlag:!0,properties:{requestParams:{type:Object,value:null},shouldShowList:{type:Boolean,value:!1}},data:{reasonType:0,popupListAni:!0,knowledgeFeedData:[],noMoreFeed:!1,shouldFixed:!1,fixedTop:0,scrollTop:0,headData:{},pn:0},attached:function(){},detached:function(){},methods:{lowerHandler:function(){this.getKnowledgeFeed(this.data.headData)},getKnowledgeFeed:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.eid,o=t.firstLevel,n=t.secondLevel,s=t.resetPn,r=this.data.pn;s&&(r=0,this.setData({scrollTop:0,pn:0,noMoreFeed:!1})),this.requestFlag&&!this.data.noMoreFeed&&(C({url:D.getApiUrl("knowledgeFeed"),data:{pn:r,eid:i,firstLevel:o,secondLevel:n},complete:function(){e.requestFlag=!0},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.expList;o&&o.length>0?e.setData({knowledgeFeedData:o,pn:i.data.pn,noMoreFeed:!i.data.hasMore}):e.setData({isError:!0,noMoreFeed:!0})}else e.setData({isError:!0,noMoreFeed:!0}),a.showToast({title:"数据错误,请重试",icon:"none",duration:4e3})},fail:function(t){e.setData({isError:!0,noMoreFeed:!0,errInfo:"加载失败"}),a.showToast({title:"请检查网络连接",icon:"none",duration:4e3})}}),this.requestFlag=!1)},scrollHandler:D.throttle((function(e){this.setData({scrollTop:e.detail.scrollTop})}),300),scrollToTop:function(){this.setData({scrollTop:0})},setPageHeadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setData({headData:e,pn:e.pn})},popupHeadClick:function(){this.sendLog({pos:"knowledge-popup-head",action:"click"}),D.jumpTo(P.PageName.Knowledge,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.data.requestParams))},showListPopup:function(){this.setData({shouldShowList:!0}),this.sendLog({pos:"knowledge-popup",action:"show"})},hideListPopup:function(){this.setData({shouldShowList:!1}),this.sendLog({pos:"knowledge-popup-close",action:"click"})},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({component:"knowledge-popup"},e);this.triggerEvent("sendlog",t)},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("112",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("24"),C=e("36");s();Component({properties:{pageParams:{type:Object,value:null,observer:function(e,t){e&&e!==t&&this.getKnowledgeDetail(e)}},page:String,knowledgeFeedData:{type:Array,value:[],observer:function(e){var t=this.data.expList;e.length&&this.setData({expList:t.concat(this.processListData(e))})}},pn:{type:Number,value:0},noMoreFeed:{type:Boolean,value:!1},fromPopup:{type:Boolean,value:!1},noRadius:{type:Boolean,value:!0},shouldFixed:{type:Boolean,value:!1},fixedTop:{type:Number,value:64},pageTabHeight:{type:Number,value:0},showTopBanner:{type:Boolean,value:!1}},data:{noMoreFeed:!1,bannerBgHeight:0,eid:"",firstLevel:1,secondLevel:12,secondLevels:[],expList:[],header:{}},attached:function(){var e=this;i((function(){n.createSelectorQuery().select("#knowledge-wrap").boundingClientRect().exec((function(t){t&&t.length&&e.setData({bannerBgHeight:Math.ceil(t[0].top)})}))}),100)},methods:{getKnowledgeDetail:function(e){var t=this,i=P({},e);request({url:C.getApiUrl(I.PageName.Knowledge),data:i,complete:function(){t.triggerEvent("removeskeleton")},success:function(i){var o=i.data;if(0===o.errNo){var a=o.data;if(a.expList&&a.expList.length>0){var s=a.header,r=a.firstLevel,c=a.secondLevel,d=a.secondLevels,l=a.expList,h=a.pn,p=a.hasMore;s.expsCount=C.countFormatter(s.expsCount);var u={header:s,firstLevel:r,secondLevel:c,secondLevels:d,expList:l,noMoreFeed:!p,pn:h,eid:e.eid};t.setPageData(u)}else t.setData({noMoreFeed:!0}),n.showToast({title:"数据获取失败,请返回重试",icon:"none",duration:4e3})}else t.setData({noMoreFeed:!0}),n.showToast({title:"服务器繁忙,请返回重试",icon:"none",duration:4e3})},fail:function(e){n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3})}})},setPageData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=P(P({},e),{},{expList:this.processListData(e.expList),showPage:!0}),i=e.eid,o=e.firstLevel,a=e.secondLevel,n=e.pn;this.triggerEvent("setpageheaddata",P({eid:i,pn:n,firstLevel:o,secondLevel:a},t.header)),this.setData(t)},getKnowledgeFeed:function(){var e=this.data,t={eid:e.eid,firstLevel:e.firstLevel,secondLevel:e.secondLevel,resetPn:!0};this.triggerEvent("getknowledgefeed",t)},tabClick:C.throttle((function(e){var t=this,o=e.target.dataset.id,a=this.data,s=a.secondLevel,r=a.shouldFixed,c=a.bannerBgHeight,d=a.fixedTop,l=a.fromPopup,h=c-d;o!==s&&(this.setData({secondLevel:o,noMoreFeed:!1,expList:[]}),r&&!l?(n.pageScrollTo({scrollTop:h,duration:0}),i((function(){t.getKnowledgeFeed()}),0)):this.getKnowledgeFeed())}),800),processListData:function(e){return e&&e.length?e.map((function(e,t){return P(P({},e),{},{index:t,time:C.format(new Date(1e3*e.time),"yyyy.MM.dd"),browserTimes:C.countFormatter(e.browserTimes)})})):[]},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["knowledge-list"];e.component&&t.push(e.component),this.triggerEvent("sendlog",P(P({},e),{},{component:t.join("_")}))},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("111",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36");Component({properties:{eid:{type:String,value:""},time:{type:String,value:""},browserTimes:{type:Number,value:0},title:{type:String,value:""},imgurl:{type:String,value:""},text:{type:Array,value:[]},type:{type:Number,value:4}},data:{},attached:function(){},methods:{itemClick:function(){this.sendLog(),x.jumpTo(L.PageName.Article,{eid:this.data.eid})},sendLog:function(){this.triggerEvent("sendlog",{pos:"knowledge-item",action:"click",eid:this.data.eid})},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("117",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({})})),window.define("87",(function(e,t,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L,x){"use strict";var D=e("36"),P=e("24");Component({extra:"",properties:{title:{type:String,value:""},expert:{type:Object,value:{}},bubbleAvatar:{type:Object,value:{}},marqueeData:{type:Object,value:{}}},screenWidth:0,timer:0,data:{transY:0,cssTransition:"",reastAniFlag:!1},lifetimes:{attached:function(){this.marqueeListAutoScroll()}},pageLifetimes:{show:function(){!this.timer&&this.marqueeListAutoScroll()},hide:function(){this.marqueePause()}},methods:{marqueePause:function(){this.timer&&clearInterval(this.timer),this.setData({reastAniFlag:!0}),this.timer=0},marqueeListAutoScroll:function(){var e=this,t=this,a=this.data.reastAniFlag,n=s.createSelectorQuery();n.select("#marquee-wrapper").boundingClientRect(),n.exec((function(n){if(n&&n[0]&&n[0].width){var s=n[0].height,r=t.data.transY||0;t.timer=o((function(){(r-=42)-84<-s?(t.setData({transY:r,cssTransition:".5s all ease-out"}),r=0,i((function(){t.setData({transY:r,cssTransition:""})}),500)):t.setData({transY:r,cssTransition:".5s all ease-out"}),a&&e.setData({reastAniFlag:!1})}),3e3)}}))},goAskHome:function(){D.jumpTo({appKey:P.APPKEY.zhidao,appPath:"/askonline/pages/askhome/askhome",appParam:{fr:"pay_zd_wenjycard",cate:"office"}})},postQuestion:function(){D.jumpTo({appKey:P.APPKEY.zhidao,appPath:"/askonline/pages/paychatAsk/paychatAsk",appParam:{fr:"pay_zd_jycard_order",scene:"payOrderSpec",cate:"office",spamBehindExp:1,title:this.data.title}},{},!0)}}})})),window.define("58",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{isFolderAnswer:{type:Boolean,value:!1}},attached:function(){},detached:function(){},methods:{showRemainMore:function(){this.triggerEvent("showRemainMore")}}})})),window.define("62",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("14"));n();Component({properties:{needMarginTop:{type:Boolean,value:!1},list:{type:Array,value:[],observer:function(e){if(e&&e.length){var t=(0,L.default)(e);t=(t=(t=t.filter((function(e){return e.title}))).slice(0,8)).length%2!=0?t.slice(0,t.length-1):t,this.setData({computedList:t})}}}},data:{computedList:[]},ready:function(){},methods:{onTap:function(e){var t={url:e.target.dataset.url,newbrowser:1,hide_state_view:!0};a.openBdboxWebview({module:"easybrowse",action:"open",parameters:t})}}})})),window.define("14",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("2"),x=e("8"),D=e("16"),P=e("11");t.exports=function(e){return L(e)||x(e)||D(e)||P()},t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("2",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("0");t.exports=function(e){if(Array.isArray(e))return L(e)},t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("8",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("11",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("130",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24"),P=s(),I=e("27"),C=e("34"),O=C.request;C.sendLog;Component({behaviors:[I],properties:{winWidth:Number,coverImage:{type:String},query:{type:String},answerMaxHeight:{type:Number,value:450},isFolderAnswer:{type:Boolean,value:!1},article:{type:Object,value:null,observer:function(e){var t=this;e&&e.expAll&&e.expAll.content&&e.expAll.content.steps&&e.expAll.content.steps.length&&!this.isArticleRendered&&(this.handlerFixedTabAboutToolsAndSteps(e.expAll.content),this.isArticleRendered=!0,i((function(){t.articleRendered()}),500))}},experimentId:{type:String,value:""},jyapid:{type:String,value:"974"},jyclientParams:{type:String,value:""},adParams:{type:Object,value:{}},abTest:{type:Object,value:{},observer:function(e){e&&"pass"===e.adComponent&&this.setData({isDynamicLibAd:!0})}},usedAsComp:{type:Boolean,value:!1},pageUUID:{type:Number,value:""},pageStartTime:{type:Number,value:0},topBarHeight:{type:Number,value:0},isWeb:{type:Boolean,value:!1},fromJingyanSwan:{type:Boolean,value:!1},from:{type:String,value:"",observer:function(e){}},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1},scene:{type:String,value:"",observer:function(e){var t=this.data,i=t.from,o=t.fromJingyanSwan,a=!x.canNotMutedWhiteList({scene:e,from:i,fromJingyanSwan:o});this.setData({needVideoMuted:a})}}},isAjaxGetRelrec:!1,isNomoreRelrecData:!1,isArticleRendered:!1,hasSteps:!1,tempFixedItemIdx:{},tempFixedTab:[],tabNames:{tools:"tools",steps:"steps",relExp:"relExp"},adOneTop:0,showAdOneFlag:!0,articleBottomTop:0,isArticleBottomShow:!1,renderLogViewHeight:0,mixBannerInfoList:[],relExpFail:!1,data:{bottomBarHeight:48,adResponseData:null,mixBannerData:[],needVideoMuted:!0,canAutoplay:!0,hasFixedTab:!0,fixedTabList:[],fixedTabsIdx:{tools:-1,steps:-1,relExp:-1},isSingleFeed:!1,isDynamicLibAd:!1,recFeedList:[],relrecTip:"",pageSize:20,pn:0,guessYouLike:[]},externalClasses:["fix-bottom-bar"],lifetimes:{attached:function(){var e=x.getSysInfoSync(D.PageName.Article);this.renderLogViewHeight=e.screenHeight-this.data.topBarHeight-this.data.bottomBarHeight},ready:function(){var e=this;this.getArticleClassicData(),this.addEventBusListener("foodListHeightChange",(function(t,i){var o=i.value;e.updateAdOneViewTop(o),e.updateArticleBottomTop(o)})),this.triggerEvent("queryReplyNodeInfo")},detached:function(){}},methods:{showRemainMore:function(){this.triggerEvent("showRemainMore")},pageScroll:x.throttle((function(e,t){var i=e+t+this.renderLogViewHeight;this.triggerEventBusListener("pagescroll",{scrollTop:e,viewPortBottomLine:i}),this.sendArticleBottomLog(i),this.sendMixBannerShowLog(i),this.sendAd974Log(i)}),60),articleRendered:function(){var e=this;this.data.usedAsComp||i((function(){e.getMultiAnswerFeed()})),this.calcArticleBottomTop()},getArticleClassicData:function(){var e=this,t={data:{}};O({url:x.getApiUrl("besRequest"),data:this.data.adParams,success:function(i){var o=i.data,a=[];if(o.res.guessyoulike&&(a=o.res.guessyoulike),0==+o.error){var n=Object.assign({},o.res.mix_banner);delete o.res.mix_banner,t.data.res=o.res,e.setData({adResponseData:t,mixBannerData:n,guessYouLike:a})}}})},updateTempFixedTab:function(e){this.tempFixedTab.push(e);var t=this.tempFixedTab.length-1;this.tempFixedItemIdx[e.name]=t},clearTempFixedTab:function(){this.tempFixedTab=[],this.tempFixedItemIdx=null},getFixedTablist:function(){return{fixedTabList:this.tempFixedTab.slice(0),fixedTabsIdx:this.tempFixedItemIdx}},destroyFixedTab:function(){this.setData({hasFixedTab:!1}),this.clearTempFixedTab()},handlerFixedTabAboutToolsAndSteps:function(e){this.tempFixedTab=[],e.tools&&"food"===e.tools.type&&e.tools.content&&e.tools.content.length&&this.updateTempFixedTab({name:this.tabNames.tools,text:"食材用料"}),e.steps.length?(this.hasSteps=!0,this.updateTempFixedTab({name:this.tabNames.steps,text:"方法步骤"})):(this.hasSteps=!1,this.destroyFixedTab())},handlerFixedTabAboutRelExp:function(){var e=this;if(this.hasSteps)if(this.data.recFeedList&&this.data.recFeedList.length){this.updateTempFixedTab({name:this.tabNames.relExp,text:"相关推荐"});var t=this.getFixedTablist(),i=t.fixedTabList,o=t.fixedTabsIdx;this.setData({fixedTabList:i},(function(){e.setData({fixedTabsIdx:o})}))}else this.destroyFixedTab()},handleGotoSteps:function(e){x.jumpTo(D.PageName.Steps,{eid:this.data.article.expAll.encEid,from:D.EArticleStepsFrom.fromArticleDetail,word:this.data.query,coverImage:this.data.coverImage})},onBottomShare:function(e){var t=this,i={};this.data.article&&this.data.article.expAll&&(i=this.data.article.expAll),n.openShare({title:i.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:x.getPagePath(D.PageName.Article,{eid:i.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:this.data.coverImage||P.globalData.imgUrl,success:function(){t.sendLog({pos:"bottom-bar-share",action:"success"}),t.triggerEvent("sharefeedback")}})},onChangeTTS:function(e){this.sendLog({pos:"tts",action:e.action})},onPreview:function(e){n.previewImage({current:e.detail.url,urls:this.data.article.expAll.images})},onFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},onFollowChanged:function(e){e&&e.detail&&e.detail.uid&&this.triggerEvent("followchanged",e.detail)},getMultiAnswerFeed:function(){var e=this;this.isAjaxGetRelrec=!0,this.setData({relrecTip:"加载中..."});var t=this.data.pn,i=0===t;O({url:x.getApiUrl("articleMultiAnswerFeed"),data:{experimentId:this.data.experimentId,eid:this.data.article.expAll.encEid,bdenvmode:P.globalData.privacyMode,iadLDL:P.globalData.iadLDL,pn:t,rn:this.data.pageSize,fromAnchor:this.data.fromAnchor,from:this.data.from},success:function(o){e.isAjaxGetRelrec=!1,n.hideLoading();var a=o.data;if(0===a.errNo||0===a.errno){var s=a.data.relateList,r=0===a.data.doubleFeed;s&&s.length?(r&&s.forEach((function(e,t){var i=e.cardType;"mixbanner"===i?s[t]={type:"mixbanner",data:e}:"ad"===i?s[t]={type:"ad",apid:1246,data:e}:e.type=e.cardType})),e.setData({isSingleFeed:r,recFeedList:e.data.recFeedList.slice(0).concat(s),pn:t+e.data.pageSize,relrecTip:""})):e.setNoMoreRelrecData(),e.data.recFeedList.length||s.length||e.setNoMoreRelrecData()}else 506===a.errno||702===a.errno?e.setNoMoreRelrecData():e.setData({relrecTip:"数据错误"});i&&e.handlerFixedTabAboutRelExp()},fail:function(t){e.isAjaxGetRelrec=!1,e.relExpFail=!0,n.hideLoading(),e.setData({relrecTip:"Wi-Fi和移动网络已断开"}),i&&e.handlerFixedTabAboutRelExp()}})},reachBottom:function(){this.sendLog({pos:"page-bottom",action:"show"}),this.isAjaxGetRelrec||this.isNomoreRelrecData||this.relExpFail||(this.sendLog({pos:"feed-bottom",action:"load-more"}),this.getMultiAnswerFeed())},setNoMoreRelrecData:function(){this.isNomoreRelrecData=!0,this.setData({relrecTip:"~没有更多了~"})},calcBoundingRectAndScrollTop:function(e,t){n.createSelectorQuery().in(this).selectViewport().scrollOffset().select(e).boundingClientRect().exec((function(e){if(e&&2===e.length){var i=0;e[0]&&(i=e[0].scrollTop),e[1]&&"function"==typeof t&&t(e[1],i)}}))},calcArticleBottomTop:function(){var e=this;this.calcBoundingRectAndScrollTop("#article-bottom-id",(function(t,i){e.articleBottomTop=t.top+i}))},sendArticleBottomLog:function(e){0!==this.articleBottomTop&&!this.isArticleBottomShow&&e>this.articleBottomTop&&(this.isArticleBottomShow=!0,this.sendLog({pos:"article-bottom",action:"show"}))},updateAdOneViewTop:function(e){this.adOneTop>0&&(this.adOneTop+=e)},updateArticleBottomTop:function(e){this.articleBottomTop+=e},calcAdOneViewTop:function(e){var t=this;this.calcBoundingRectAndScrollTop(".adOne",(function(i,o){t.adOneTop=i.top+o,"function"==typeof e&&e(i)}))},sendMixBannerShowLog:function(e){var t=this;this.mixBannerInfoList.forEach((function(i,o){var a=i.top,n=i.id;!i.isShow&&a<e&&(t.sendLog({pos:"article-bottom-mix-banner",action:"show",id:n}),t.mixBannerInfoList[o].isShow=!0)}))},onUpdateMixBannerOffset:function(e){var t=e.detail,i=t.id,o=t.top;this.mixBannerInfoList.push({id:i,top:o,isShow:!1}),this.sendMixBannerShowLog(this.renderLogViewHeight+this.data.topBarHeight)},adLoadHlr:function(e){var t=this;"adOne"===e.currentTarget.dataset.id&&(this.setData({adOneLoad:!0},(function(){t.calcAdOneViewTop((function(e){var i=e.height+5;t.triggerEventBusListener("ad947HeightChange",{value:i})}))})),this.sendLog({pos:"ad-adOne",action:"load"}))},adRequestHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"request"})},adRenderHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"render"})},adErrHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"error"})},adClick:function(e){var t=e.currentTarget.dataset.id;this.sendLog({pos:"ad-"+t,action:"click"})},sendAd974Log:function(e){this.showAdOneFlag&&this.data.adOneLoad&&0!==this.adOneTop&&e>this.adOneTop&&(this.showAdOneFlag=!1,this.sendLog({pos:"ad-adOne",action:"show"}))},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.component?e.component="food-tmpl_"+e.component:e.component="food-tmpl";var t=Object.assign({},e);this.triggerEvent("sendlog",t)}}})})),window.define("47",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}Component({validFlag:!1,percent80Flag:!1,percent30Flag:!1,percent100Flag:!1,videoContext:null,playStartTime:0,validPlayTime:0,properties:{coverInfo:{type:String,value:""},videoData:{type:Object,value:{}},canAutoplay:{type:Boolean,value:!1,observer:function(e){e&&this.playVideo()}},objectFit:{type:String,value:"contain"},muted:{type:Boolean,value:!1}},data:{isShowVideo:!1,autoplay:!1},attached:function(){},detached:function(){this.playStartTime>0&&this.sendLog({action:"video-stop",playedTime:this.getPlayedTime()})},methods:{sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({pos:"video",component:"single-video",encVid:this.data.videoData.encVid},e);this.triggerEvent("sendlog",t)},sendVideoLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.action&&"show"!==e.action||(e.isFirstShow=!0),this.sendLog(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({action:"show",videoProducer:"jingyan"},e))},playHandler:function(){this.playStartTime=(new Date).getTime()},pauseHandler:function(){this.sendLog({action:"video-stop",playedTime:this.getPlayedTime()}),this.validPlayTime=this.validPlayTime+(new Date).getTime()-this.playStartTime,this.playStartTime=0},timeupdateHandler:function(e){var t=e.detail,i=t.currentTime,o=t.duration;i>=3&&!this.validFlag?(this.validFlag=!0,this.sendValidPlayLog()):i<3&&this.validFlag&&(this.validFlag=!1);var a=.3*o,n=.8*o;i>a&&!this.percent30Flag?(this.percent30Flag=!0,this.sendLog({action:"play-end-30"})):this.percent30Flag&&i<a&&(this.percent30Flag=!1),i>n&&!this.percent80Flag?(this.percent80Flag=!0,this.sendLog({action:"play-end-80"})):this.percent80Flag&&i<n&&(this.percent80Flag=!1);var s=.99*o;i>s&&!this.percent100Flag?(this.percent100Flag=!0,this.sendLog({action:"play-end-100"})):this.percent100Flag&&i<s&&(this.percent100Flag=!1)},sendVideoPlay:function(e){var t=this.data.videoData.duration;this.sendVideoLog({action:e,videoDuration:t})},sendValidPlayLog:function(){this.validFlag&&this.getValidPlayTime()>=3&&(this.sendVideoLog({action:"valid-play"}),this.validPlayTime=0)},getPlayedTime:function(){return this.playStartTime>0?Math.round(((new Date).getTime()-this.playStartTime)/1e3):0},getValidPlayTime:function(){return this.playStartTime>0?(this.validPlayTime+(new Date).getTime()-this.playStartTime)/1e3:this.validPlayTime/1e3},playVideo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto-play";this.setData({autoplay:!0,isShowVideo:!0},(function(){i((function(){e.videoContext||(e.videoContext=n.createVideoContext("exp-video")),e.videoContext&&"function"==typeof e.videoContext.play&&(e.videoContext.play(),e.sendVideoPlay(t))}),100)}))},endedHandler:function(){this.setData({isShowVideo:!1}),this.videoContext=null},coverImageTap:function(){this.playVideo("click-play")}}})})),window.define("42",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P="is_article_recipe_entry_tip_shown",I=e("36"),C=e("26");Component({behaviors:[C],properties:{pageUUID:Number,eid:{type:String,value:""},toolData:{type:Object,value:null,observer:function(e){var t=this;e&&e.content&&e.content.length&&(this.renderShowMore(e.content,(function(){t.calcToolsAreaHeight((function(e){t.toolsAreaHeight=e.height}))})),this.sendRenderLog())}},foodList:{type:Array,value:null,observer:function(e,t){e&&e.length&&e!==t&&(this.sendLog({pos:"recipe-entry-btn",action:"show"}),this.procRecipeEntryTip())}}},toolsAreaHeight:0,data:{showRecipe:!1,showReciptTip:!1,opened:!1,maxItems:4,moreItems:0},attached:function(){},detached:function(){},methods:{procRecipeEntryTip:function(){var e=this;n.getStorage({key:P,success:function(t){t.data||(n.setStorage({key:P,data:"1"}),e.setData({showReciptTip:!0},(function(){i((function(){e.setData({showReciptTip:!1})}),3e3)})))}})},recipeEntryClick:function(){this.sendLog({action:"click",pos:"recipe-entry-btn"}),this.setData({showRecipe:!0})},renderShowMore:function(){var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length-this.data.maxItems;t>0?(this.setData({moreItems:t},(function(){"function"==typeof e&&e()})),this.sendLog({pos:"btn-show-more",action:"render"})):"function"==typeof e&&e()},calcToolsAreaHeight:function(e){var t=this;I.poll((function(e,i){t.createSelectorQuery().select(".tools-list-wrap").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(t,i){t||i&&"function"==typeof e&&e(i)}))},showMoreClick:function(){var e=this;this.setData({opened:!this.data.opened},(function(){e.calcToolsAreaHeight((function(t){var i=t.height,o=i-e.toolsAreaHeight;e.toolsAreaHeight=i,e.triggerEventBusListener("foodListHeightChange",{value:o})}))})),this.sendLog({pos:"btn-show-more",action:"click",opened:this.data.opened?1:0})},sendRenderLog:function(){this.sendLog({pos:"tool-list",action:"render"})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({pos:"tools-area",component:"tools-area-comp",eid:this.data.eid},e))}},messages:{recipemsg:function(e){if("close-layer"===e.value.action)this.setData({showRecipe:!1})}}})})),window.define("26",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("27");t.exports=Behavior({behaviors:[x],properties:{fixedTabIdx:{type:Number,value:-1,observer:function(){this.calcViewOffset()}}},sectionViewOffset:{},data:{},methods:{updateSectionViewOffset:function(e){var t=this.sectionViewOffset||{},i=t.top,o=t.bottom;o&&(Object.assign(this.sectionViewOffset,{top:i+e,bottom:o+e}),this.triggerEventBusListener("calcedTitleTop",this.sectionViewOffset))},calcViewOffset:function(){var e=this,t=a.createSelectorQuery().in(this),i=0;L.poll((function(e,i){t.select(".js-calc-section-offset").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(o,a){o||t.selectViewport().scrollOffset((function(t){i=t?t.scrollTop:0,e.sectionViewOffset={idx:e.data.fixedTabIdx,top:a.top+i,bottom:a.bottom+i},e.triggerEventBusListener("calcedTitleTop",e.sectionViewOffset)})).exec()}))}}})})),window.define("46",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{title:{type:String,value:""}},externalClasses:["custom-title-icon"],data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("45",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{noticeData:{type:Array,value:[]}}})})),window.define("41",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("27");Component({behaviors:[x],properties:{topBarHeight:{type:Number,value:0},tabList:{type:Array,value:[],observer:function(e){e.length&&(this.offsetViewTop=e.slice(0))}}},fixedTabHeight:45,offsetViewTop:[],autoScrollFlag:!1,data:{currTabIndex:0},attached:function(){var e=this,t=this.fixedTabHeight+this.data.topBarHeight;this.addEventBusListener("calcedTitleTop",(function(i,o){var a=o.idx,n=o.top,s=o.bottom,r=e.offsetViewTop[a],c=Math.floor(n-t),d=Math.floor(s-t);Object.assign(r,{top:c,bottom:d})})),this.addEventBusListener("pagescroll",(function(t,i){e.pageScrollHandler(i.scrollTop)}))},methods:{changeTabCurrIdx:function(e){e!==this.data.currTabIndex&&this.setData({currTabIndex:e})},changeFixedTabShow:function(e){var t=this.offsetViewTop[0];if(t){var i=!1;e>=t.top&&(i=!0),this.setData({show:i})}},onTabItemClick:function(e){var t=this,o=e.currentTarget.dataset.index,a=this.offsetViewTop[o].top;this.changeTabCurrIdx(o),this.autoScrollFlag=!0,n.pageScrollTo({scrollTop:a,complete:function(){i((function(){t.autoScrollFlag=!1}),500)}})},pageScrollHandler:function(e){if(!this.autoScrollFlag){for(var t=this.offsetViewTop.length,i=-1,o=0;o<t;o++){e>=this.offsetViewTop[o].top&&(i=o)}this.changeTabCurrIdx(i),this.changeFixedTabShow(e)}}}})})),window.define("48",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{isHighQualityExp:{type:Number,value:0},isOriginal:{type:Boolean,value:!1}},data:{}})})),window.define("50",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=e("26");Component({behaviors:[D],properties:{fixedTabIdx:{type:Number,value:-1,observer:function(){var e=this;this.calcViewOffset(),this.addEventBusListener("ad947HeightChange",(function(t,i){e.updateSectionViewOffset(i.value)})),this.addEventBusListener("foodListHeightChange",(function(t,i){e.updateSectionViewOffset(i.value)}))}},recFeedList:{type:Array,value:null},isSingleFeed:{type:Boolean,value:!1},relrecTip:{type:String,value:""},encEid:{type:String,value:""},topBarHeight:{type:Number,value:0},bottomBarHeight:{type:Number,value:0},pageName:{type:String,value:"article"},abTest:{type:Object,value:{}},query:{type:String,value:""},experimentId:{type:String,value:""},scene:{type:String,value:""},from:{type:String,value:""}},isMultiAnswerItemShow:[],multiAnswerItemOffset:[],lifetimes:{ready:function(){var e=this;this.data.isSingleFeed&&(this.addEventBusListener("pagescroll",(function(t,i){e.pageScroll(i)})),this.addEventBusListener("foodListHeightChange",(function(t,i){e.updateAfterStepOffset(i.value,0)})),this.addEventBusListener("ad947HeightChange",(function(t,i){e.updateAfterStepOffset(i.value,0)})))}},methods:{updateAfterStepOffset:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=this.multiAnswerItemOffset.length,o=0;o<i;o++)o>t&&void 0!==this.multiAnswerItemOffset[o]&&(this.multiAnswerItemOffset[o]+=e)},updateMultiAnswerItemOffset:function(e){var t=e.detail,i=t.index;if(this.multiAnswerItemOffset[i]=t.top,"height"in t){var o=t.height;this.updateAfterStepOffset(o,i)}},sendMultiAnswerItemShowLog:function(e,t){for(var i=e.length,o=0;o<i;o++){var a=e[o];if(a){if(!(t>a))break;if(!this.isMultiAnswerItemShow[o]){this.isMultiAnswerItemShow[o]=!0;var n="";this.data.recFeedList&&this.data.recFeedList[o]&&(n=this.data.recFeedList[o].type);var s=void 0;s="mixbanner"===n?{pos:"rel-exp-item-mix-banner",action:"show",id:this.data.recFeedList[o].data.id}:"live"===n?{pos:"rel-exp-live",action:"show",liveSrcType:this.data.recFeedList[o].liveSrcType,roomid:this.data.recFeedList[o].roomid}:{pos:"rel-exp-item",action:"show",index:o,itemType:n},this.sendLog(s)}}}},pageScroll:function(e){e.scrollTop;var t=e.viewPortBottomLine;this.sendMultiAnswerItemShowLog(this.multiAnswerItemOffset,t)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"rec-list",encEid:this.data.encEid},e))}}})})),window.define("43",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("26");Component({behaviors:[x],properties:{fixedTabIdx:{type:Number,value:-1,observer:function(){var e=this;this.calcViewOffset(),this.addEventBusListener("foodListHeightChange",(function(t,i){e.updateSectionViewOffset(i.value)}))}},winWidth:Number,stepList:{type:Array,value:null},hideStepEntry:{type:Boolean,value:!1},scene:{type:String,value:""}},data:{imgPadding:34},externalClasses:["content-padded"],attached:function(){},detached:function(){},methods:{handleGotoSteps:function(e){this.sendLog({pos:"goto-steps",action:"click"}),this.triggerEvent("gotosteps")},clickImage:function(e){this.triggerEvent("clickimage",e.detail)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({pos:"format-content",component:L.stringBuilder("format-content-n",e.component?"_"+e.component:"")},e);this.triggerEvent("sendlog",t)}}})})),window.define("39",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{imageWidth:{type:Number,value:380},images:{type:Array,value:[]}},imgLoadedFlag:!1,data:{swiperCurrent:0},externalClasses:["custom-swiper-class"],attached:function(){},detached:function(){},methods:{swiperChange:function(e){var t=e.detail.current;this.setData({swiperCurrent:t}),this.sendLog({pos:"custom-swiper",action:"swipe",index:t})},imgLoadHandler:function(e){var t=e.currentTarget.dataset.fromSwiper;this.imgLoadedFlag||(this.sendLog({pos:"format-image",action:"render",fromSwiper:t}),this.imgLoadedFlag=!0)},clickImage:function(e){var t=e.currentTarget.dataset,i=t.src,o=t.fromSwiper;this.triggerEvent("clickimage",{url:i}),this.sendLog({pos:"format-image",action:"click",fromSwiper:o})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)}}})})),window.define("131",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24"),P=s(),I=e("27"),C=e("34").request;Component({behaviors:[I],properties:{winWidth:Number,coverImage:{type:String},answerMaxHeight:{type:Number,value:450},isFolderAnswer:{type:Boolean,value:!1},query:{type:String},article:{type:Object,value:null},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1},experimentId:{type:String,value:""},jyapid:{type:String,value:"974"},jyclientParams:{type:String,value:""},adParams:{type:Object,value:{}},abTest:{type:Object,value:{},observer:function(e){e&&"pass"===e.aspImageText&&this.setData({isDynamicLibAd:!0})}},pageUUID:{type:Number,value:""},pageStartTime:{type:Number,value:0},topBarHeight:{type:Number,value:0},isWeb:{type:Boolean,value:!1},fromJingyanSwan:{type:Boolean,value:!1},from:{type:String,value:"",observer:function(e){}},scene:{type:String,value:""}},isAjaxGetRelrec:!1,isNomoreRelrecData:!1,articleBottomTop:0,isArticleBottomShow:!1,renderLogViewHeight:0,data:{isArticleRendered:!1,isDynamicLibAd:!1,bottomBarHeight:48,adResponseData:null,mixBannerData:[],recFeedList:[],relrecTip:"",pageSize:20,pn:0,guessYouLike:[]},externalClasses:["fix-bottom-bar"],lifetimes:{attached:function(){var e=x.getSysInfoSync(D.PageName.Article);this.renderLogViewHeight=e.screenHeight-this.data.topBarHeight-this.data.bottomBarHeight},ready:function(){this.triggerEvent("componentready"),this.getArticleClassicData(),this.triggerEvent("queryReplyNodeInfo")},detached:function(){}},methods:{showRemainMore:function(){this.triggerEvent("showRemainMore")},pageScroll:x.throttle((function(e,t){var i=e+t+this.renderLogViewHeight;this.triggerEventBusListener("pagescroll",{scrollTop:e,viewPortBottomLine:i}),this.sendArticleBottomLog(i)}),60),articleRendered:function(){var e=this;i((function(){e.getMultiAnswerFeed()})),this.calcArticleBottomTop()},getArticleClassicData:function(){var e=this,t={data:{}};C({url:x.getApiUrl("besRequest"),data:this.data.adParams,success:function(i){var o=i.data,a=[];o.res.guessyoulike&&(a=o.res.guessyoulike),0==+o.error&&(delete o.res.mix_banner,t.data.res=o.res,e.setData({adResponseData:t,guessYouLike:a}))}})},onBottomShare:function(e){var t=this,i={};this.data.article&&this.data.article.expAll&&(i=this.data.article.expAll),n.openShare({title:i.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:x.getPagePath(D.PageName.Article,{eid:i.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:this.data.coverImage||P.globalData.imgUrl,success:function(){t.sendLog({pos:"bottom-bar-share",action:"success"}),t.triggerEvent("sharefeedback")}})},onChangeTTS:function(e){this.sendLog({pos:"tts",action:e.action})},onPreview:function(e){n.previewImage({current:e.detail.url,urls:this.data.article.expAll.images})},onFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},onFollowChanged:function(e){e&&e.detail&&e.detail.uid&&this.triggerEvent("followchanged",e.detail)},longArticleTmplRender:function(){this.setData({isArticleRendered:!0}),this.articleRendered()},getMultiAnswerFeed:function(){var e=this;this.isAjaxGetRelrec=!0,this.setData({relrecTip:"加载中..."});var t=this.data.pn;C({url:x.getApiUrl("articleMultiAnswerFeed"),data:{experimentId:this.data.experimentId,eid:this.data.article.expAll.encEid,bdenvmode:P.globalData.privacyMode,iadLDL:P.globalData.iadLDL,pn:t,rn:this.data.pageSize,fromAnchor:this.data.fromAnchor,from:this.data.from},success:function(i){e.isAjaxGetRelrec=!1,n.hideLoading();var o=i.data;if(0===o.errNo||0===o.errno){var a=o.data.relateList;a&&a.length?(a.forEach((function(e,t){"ad"===e.cardType?a[t]={type:"ad",apid:1246,data:e}:e.type=e.cardType})),e.setData({recFeedList:e.data.recFeedList.slice(0).concat(a),pn:t+e.data.pageSize,relrecTip:""})):e.setNoMoreRelrecData(),e.data.recFeedList.length||a.length||e.setNoMoreRelrecData()}else 506===o.errno||702===o.errno?e.setNoMoreRelrecData():e.setData({relrecTip:"数据错误"})},fail:function(t){e.isAjaxGetRelrec=!1,n.hideLoading(),e.setData({relrecTip:"Wi-Fi和移动网络已断开"})}})},reachBottom:function(){this.sendLog({pos:"page-bottom",action:"show"}),this.isAjaxGetRelrec||this.isNomoreRelrecData||(this.sendLog({pos:"feed-bottom",action:"load-more"}),this.getMultiAnswerFeed())},setNoMoreRelrecData:function(){this.isNomoreRelrecData=!0,this.setData({relrecTip:"~没有更多了~"})},calcBoundingRectAndScrollTop:function(e,t){n.createSelectorQuery().in(this).selectViewport().scrollOffset().select(e).boundingClientRect().exec((function(e){if(e&&2===e.length){var i=0;e[0]&&(i=e[0].scrollTop),e[1]&&"function"==typeof t&&t(e[1],i)}}))},calcArticleBottomTop:function(){var e=this;this.calcBoundingRectAndScrollTop("#article-bottom-id",(function(t,i){e.articleBottomTop=t.top+i}))},sendArticleBottomLog:function(e){0!==this.articleBottomTop&&!this.isArticleBottomShow&&e>this.articleBottomTop&&(this.isArticleBottomShow=!0,this.sendLog({pos:"article-bottom",action:"show"}))},updateArticleBottomTop:function(e){this.articleBottomTop+=e},adLoadHlr:function(e){"adOne"===e.currentTarget.dataset.id&&(this.setData({adOneLoad:!0}),this.sendLog({pos:"ad-adOne",action:"load"}))},adRequestHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"request"})},adRenderHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"render"})},adErrHlr:function(e){"adOne"===e.currentTarget.dataset.id&&this.sendLog({pos:"ad-adOne",action:"error"})},adClick:function(e){var t=e.currentTarget.dataset.id;this.sendLog({pos:"ad-"+t,action:"click"})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.component?e.component="long-article-tmpl_"+e.component:e.component="long-article-tmpl";var t=Object.assign({},e);this.triggerEvent("sendlog",t)}}})})),window.define("44",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("26"),D=e("19");Component({behaviors:[x],properties:{articleHTML:{type:String,value:""}},data:{},externalClasses:["content-padded"],attached:function(){try{D.bdParse("article","html",this.data.articleHTML,this,17),this.triggerEvent("longarticletmpl")}catch(e){this.sendLog({area:"text-rich",action:"fail",info:JSON.stringify(e)})}},detached:function(){},methods:{bdParseImgLoadCb:function(e){this.sendLog({pos:"long-article-content-image",action:"render"})},bdParseImgTapCb:function(e){var t=e.currentTarget.dataset.src;this.triggerEvent("clickimage",{url:t}),this.sendLog({pos:"long-article-content-image",action:"click"})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({pos:"long-article-content",component:L.stringBuilder("long-article-content",e.component?"_"+e.component:"")},e);this.triggerEvent("sendlog",t)}}})})),window.define("19",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7"),x=L(e("6")),D=L(e("22")),P=L(e("20"));function I(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){r=!0,n=e},f:function(){try{s||null==i.return||i.return()}finally{if(r)throw n}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var O=0,k=0;function E(e){var t=this,i=e.target.dataset.src,o=e.target.dataset.from;"function"==typeof t.bdParseImgTapCb&&t.bdParseImgTapCb(e),void 0!==o&&o.length>0&&a.previewImage({current:i,urls:t.data[o].imageUrls})}function F(e){var t=this,i=e.target.dataset.from,o=e.target.dataset.idx;"function"==typeof t.bdParseImgLoadCb&&t.bdParseImgLoadCb(e),void 0!==i&&i.length>0&&function(e,t,i,o){var a,n=i.data[o];if(!n||0==n.images.length)return;var s,r=n.images,c=function(e,t,i,o){var a=0,n=0,s=0,r={},c=i.data[o].view.imagePadding;k,e>(a=O-2*c)?(s=(n=a)*t/e,r.imageWidth=n,r.imageheight=s):(r.imageWidth=e,r.imageheight=t);return r}(e.detail.width,e.detail.height,i,o),d=r[t].index,l="".concat(o),h=I(d.split("."));try{for(h.s();!(s=h.n()).done;){var p=s.value;l+=".nodes[".concat(p,"]")}}catch(e){h.e(e)}finally{h.f()}var u=l+".width",g=l+".height";i.setData((a={},(0,x.default)(a,u,c.imageWidth),(0,x.default)(a,g,c.imageheight),a))}(e,o,t,i)}a.getSystemInfo({success:function(e){O=e.windowWidth,k=e.windowHeight}}),t.exports={bdParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bdParseData",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'<div class="color:red;">数据不能为空</div>',o=arguments.length>4?arguments[4]:void 0,a=arguments.length>3?arguments[3]:void 0,n={};if("html"==t)n=P.default.html2json(i,e);else if("md"==t||"markdown"==t){var s=(new D.default.Converter).makeHtml(i);n=P.default.html2json(s,e)}n.view={},n.view.imagePadding=0,void 0!==o&&(n.view.imagePadding=o);var r={};r[e]=n,a.setData(r),a.bdParseImgLoad=F,a.bdParseImgTap=E},bdParseTemArray:function(e,t,i,o){for(var a=[],n=o.data,s=null,r=0;r<i;r++){var c=n[t+r].nodes;a.push(c)}e=e||"bdParseTemArray",(s=JSON.parse('{"'+e+'":""}'))[e]=a,o.setData(s)},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/bdParse/emojis/",i=arguments.length>2?arguments[2]:void 0;P.default.emojisInit(e,t,i)}}})),window.define("22",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("15"));function x(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix identation in es6 strings",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o].defaultValue);return i}var D={},P={},I={},C=x(!0),O={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:x(!0)};function k(e,t){var i=t?"Error in "+t+" extension->":"Error in unnamed extension",o={valid:!0,error:""};D.helper.isArray(e)||(e=[e]);for(var a=0;a<e.length;++a){var n=i+" sub-extension "+a+": ",s=e[a];if("object"!==(0,L.default)(s))return o.valid=!1,o.error=n+"must be an object, but "+(0,L.default)(s)+" given",o;if(!D.helper.isString(s.type))return o.valid=!1,o.error=n+'property "type" must be a string, but '+(0,L.default)(s.type)+" given",o;var r=s.type=s.type.toLowerCase();if("language"===r&&(r=s.type="lang"),"html"===r&&(r=s.type="output"),"lang"!==r&&"output"!==r&&"listener"!==r)return o.valid=!1,o.error=n+"type "+r+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',o;if("listener"===r){if(D.helper.isUndefined(s.listeners))return o.valid=!1,o.error=n+'. Extensions of type "listener" must have a property called "listeners"',o}else if(D.helper.isUndefined(s.filter)&&D.helper.isUndefined(s.regex))return o.valid=!1,o.error=n+r+' extensions must define either a "regex" property or a "filter" method',o;if(s.listeners){if("object"!==(0,L.default)(s.listeners))return o.valid=!1,o.error=n+'"listeners" property must be an object but '+(0,L.default)(s.listeners)+" given",o;for(var c in s.listeners)if(s.listeners.hasOwnProperty(c)&&"function"!=typeof s.listeners[c])return o.valid=!1,o.error=n+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+(0,L.default)(s.listeners[c])+" given",o}if(s.filter){if("function"!=typeof s.filter)return o.valid=!1,o.error=n+'"filter" must be a function, but '+(0,L.default)(s.filter)+" given",o}else if(s.regex){if(D.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!s.regex instanceof RegExp)return o.valid=!1,o.error=n+'"regex" property must either be a string or a RegExp object, but '+(0,L.default)(s.regex)+" given",o;if(D.helper.isUndefined(s.replace))return o.valid=!1,o.error=n+'"regex" extensions must implement a replace string or function',o}}return o}function E(e,t){return"~E"+t.charCodeAt(0)+"E"}D.helper={},D.extensions={},D.setOption=function(e,t){return C[e]=t,this},D.getOption=function(e){return C[e]},D.getOptions=function(){return C},D.resetOptions=function(){C=x(!0)},D.setFlavor=function(e){if(O.hasOwnProperty(e)){var t=O[e];for(var i in t)t.hasOwnProperty(i)&&(C[i]=t[i])}},D.getDefaultOptions=function(e){return x(e)},D.subParser=function(e,t){if(D.helper.isString(e)){if(void 0===t){if(P.hasOwnProperty(e))return P[e];throw Error("SubParser named "+e+" not registered!")}P[e]=t}},D.extension=function(e,t){if(!D.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=D.helper.stdExtName(e),D.helper.isUndefined(t)){if(!I.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return I[e]}"function"==typeof t&&(t=t()),D.helper.isArray(t)||(t=[t]);var i=k(t,e);if(!i.valid)throw Error(i.error);I[e]=t},D.getAllExtensions=function(){return I},D.removeExtension=function(e){delete I[e]},D.resetExtensions=function(){I={}},D.validateExtension=function(e){var t=k(e,null);return!!t.valid||(console.warn(t.error),!1)},D.hasOwnProperty("helper")||(D.helper={}),D.helper.isString=function(e){return"string"==typeof e||e instanceof String},D.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},D.helper.forEach=function(e,t){if("function"==typeof e.forEach)e.forEach(t);else for(var i=0;i<e.length;i++)t(e[i],i,e)},D.helper.isArray=function(e){return e.constructor===Array},D.helper.isUndefined=function(e){return void 0===e},D.helper.stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()},D.helper.escapeCharactersCallback=E,D.helper.escapeCharacters=function(e,t,i){var o="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(o="\\\\"+o);var a=new RegExp(o,"g");return e=e.replace(a,E)};var F=function(e,t,i,o){var a,n,s,r,c,d=o||"",l=d.indexOf("g")>-1,h=new RegExp(t+"|"+i,"g"+d.replace(/g/g,"")),p=new RegExp(t,d.replace(/g/g,"")),u=[];do{for(a=0;s=h.exec(e);)if(p.test(s[0]))a++||(r=(n=h.lastIndex)-s[0].length);else if(a&&!--a){c=s.index+s[0].length;var g={left:{start:r,end:n},match:{start:n,end:s.index},right:{start:s.index,end:c},wholeMatch:{start:r,end:c}};if(u.push(g),!l)return u}}while(a&&(h.lastIndex=n));return u};D.helper.matchRecursiveRegExp=function(e,t,i,o){for(var a=F(e,t,i,o),n=[],s=0;s<a.length;++s)n.push([e.slice(a[s].wholeMatch.start,a[s].wholeMatch.end),e.slice(a[s].match.start,a[s].match.end),e.slice(a[s].left.start,a[s].left.end),e.slice(a[s].right.start,a[s].right.end)]);return n},D.helper.replaceRecursiveRegExp=function(e,t,i,o,a){if(!D.helper.isFunction(t)){var n=t;t=function(){return n}}var s=F(e,i,o,a),r=e,c=s.length;if(c>0){var d=[];0!==s[0].wholeMatch.start&&d.push(e.slice(0,s[0].wholeMatch.start));for(var l=0;l<c;++l)d.push(t(e.slice(s[l].wholeMatch.start,s[l].wholeMatch.end),e.slice(s[l].match.start,s[l].match.end),e.slice(s[l].left.start,s[l].left.end),e.slice(s[l].right.start,s[l].right.end))),l<c-1&&d.push(e.slice(s[l].wholeMatch.end,s[l+1].wholeMatch.start));s[c-1].wholeMatch.end<e.length&&d.push(e.slice(s[c-1].wholeMatch.end)),r=d.join("")}return r},D.helper.isUndefined(console)&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),D.Converter=function(e){var t={},i=[],o=[],a={};function n(e,t){if(t=t||null,D.helper.isString(e)){if(t=e=D.helper.stdExtName(e),D.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new D.Converter));D.helper.isArray(e)||(e=[e]);var a=k(e,t);if(!a.valid)throw Error(a.error);for(var n=0;n<e.length;++n)switch(e[n].type){case"lang":i.push(e[n]);break;case"output":o.push(e[n]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(D.extensions[e],e);if(D.helper.isUndefined(I[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=I[e]}"function"==typeof e&&(e=e()),D.helper.isArray(e)||(e=[e]);var n=k(e,t);if(!n.valid)throw Error(n.error);for(var r=0;r<e.length;++r){switch(e[r].type){case"lang":i.push(e[r]);break;case"output":o.push(e[r])}if(e[r].hasOwnProperty(a))for(var c in e[r].listeners)e[r].listeners.hasOwnProperty(c)&&s(c,e[r].listeners[c])}}function s(e,t){if(!D.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+(0,L.default)(e)+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+(0,L.default)(t)+" given");a.hasOwnProperty(e)||(a[e]=[]),a[e].push(t)}!function(){for(var i in e=e||{},C)C.hasOwnProperty(i)&&(t[i]=C[i]);if("object"!==(0,L.default)(e))throw Error("Converter expects the passed parameter to be an object, but "+(0,L.default)(e)+" was passed instead.");for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.extensions&&D.helper.forEach(t.extensions,n)}(),this._dispatch=function(e,t,i,o){if(a.hasOwnProperty(e))for(var n=0;n<a[e].length;++n){var s=a[e][n](e,t,this,i,o);s&&void 0!==s&&(t=s)}return t},this.listen=function(e,t){return s(e,t),this},this.makeHtml=function(e){if(!e)return e;var a={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:i,outputModifiers:o,converter:this,ghCodeBlocks:[]};return e=(e=(e=(e=e.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,i=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(i,"")}(e)),e=D.subParser("detab")(e,t,a),e=D.subParser("stripBlankLines")(e,t,a),D.helper.forEach(i,(function(i){e=D.subParser("runExtension")(i,e,t,a)})),e=D.subParser("hashPreCodeTags")(e,t,a),e=D.subParser("githubCodeBlocks")(e,t,a),e=D.subParser("hashHTMLBlocks")(e,t,a),e=D.subParser("hashHTMLSpans")(e,t,a),e=D.subParser("stripLinkDefinitions")(e,t,a),e=D.subParser("blockGamut")(e,t,a),e=D.subParser("unhashHTMLSpans")(e,t,a),e=(e=(e=D.subParser("unescapeSpecialChars")(e,t,a)).replace(/~D/g,"$$")).replace(/~T/g,"~"),D.helper.forEach(o,(function(i){e=D.subParser("runExtension")(i,e,t,a)})),e},this.setOption=function(e,i){t[e]=i},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){n(e,t=t||null)},this.useExtension=function(e){n(e)},this.setFlavor=function(e){if(O.hasOwnProperty(e)){var i=O[e];for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}},this.removeExtension=function(e){D.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var a=e[t],n=0;n<i.length;++n)i[n]===a&&i[n].splice(n,1);for(;0<o.length;++n)o[0]===a&&o[0].splice(n,1)}},this.getAllExtensions=function(){return{language:i,output:o}}},D.subParser("anchors",(function(e,t,i){var o=function(e,t,o,a,n,s,r,c){D.helper.isUndefined(c)&&(c=""),e=t;var d=o,l=a.toLowerCase(),h=n,p=c;if(!h)if(l||(l=d.toLowerCase().replace(/ ?\n/g," ")),h="#"+l,D.helper.isUndefined(i.gUrls[l])){if(!(e.search(/\(\s*\)$/m)>-1))return e;h=""}else h=i.gUrls[l],D.helper.isUndefined(i.gTitles[l])||(p=i.gTitles[l]);var u='<a href="'+(h=D.helper.escapeCharacters(h,"*_",!1))+'"';return""!==p&&null!==p&&(p=p.replace(/"/g,"&quot;"),u+=' title="'+(p=D.helper.escapeCharacters(p,"*_",!1))+'"'),u+=">"+d+"</a>"};return e=(e=(e=(e=i.converter._dispatch("anchors.before",e,t,i)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,o)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,o)).replace(/(\[([^\[\]]+)])()()()()()/g,o),e=i.converter._dispatch("anchors.after",e,t,i)})),D.subParser("autoLinks",(function(e,t,i){function o(e,t){var i=t;return/^www\./i.test(t)&&(t=t.replace(/^www\./i,"http://www.")),'<a href="'+t+'">'+i+"</a>"}function a(e,t){var i=D.subParser("unescapeSpecialChars")(t);return D.subParser("encodeEmailAddress")(i)}return e=(e=(e=i.converter._dispatch("autoLinks.before",e,t,i)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,o)).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,a),t.simplifiedAutoLink&&(e=(e=e.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,o)).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,a)),e=i.converter._dispatch("autoLinks.after",e,t,i)})),D.subParser("blockGamut",(function(e,t,i){e=i.converter._dispatch("blockGamut.before",e,t,i),e=D.subParser("blockQuotes")(e,t,i),e=D.subParser("headers")(e,t,i);var o=D.subParser("hashBlock")("<hr />",t,i);return e=(e=(e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,o)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,o)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,o),e=D.subParser("lists")(e,t,i),e=D.subParser("codeBlocks")(e,t,i),e=D.subParser("tables")(e,t,i),e=D.subParser("hashHTMLBlocks")(e,t,i),e=D.subParser("paragraphs")(e,t,i),e=i.converter._dispatch("blockGamut.after",e,t,i)})),D.subParser("blockQuotes",(function(e,t,i){return e=(e=i.converter._dispatch("blockQuotes.before",e,t,i)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,o){var a=o;return a=(a=(a=a.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),a=D.subParser("githubCodeBlocks")(a,t,i),a=(a=(a=D.subParser("blockGamut")(a,t,i)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var i=t;return i=(i=i.replace(/^  /gm,"~0")).replace(/~0/g,"")})),D.subParser("hashBlock")("<blockquote>\n"+a+"\n</blockquote>",t,i)})),e=i.converter._dispatch("blockQuotes.after",e,t,i)})),D.subParser("codeBlocks",(function(e,t,i){e=i.converter._dispatch("codeBlocks.before",e,t,i);return e=(e=(e+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,o,a){var n=o,s=a,r="\n";return n=D.subParser("outdent")(n),n=D.subParser("encodeCode")(n),n=(n=(n=D.subParser("detab")(n)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(r=""),n="<pre><code>"+n+r+"</code></pre>",D.subParser("hashBlock")(n,t,i)+s}))).replace(/~0/,""),e=i.converter._dispatch("codeBlocks.after",e,t,i)})),D.subParser("codeSpans",(function(e,t,i){return void 0===(e=i.converter._dispatch("codeSpans.before",e,t,i))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,i,o){var a=o;return a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),t+"<code>"+(a=D.subParser("encodeCode")(a))+"</code>"})),e=i.converter._dispatch("codeSpans.after",e,t,i)})),D.subParser("detab",(function(e){return e=(e=(e=(e=(e=e.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,(function(e,t){for(var i=t,o=4-i.length%4,a=0;a<o;a++)i+=" ";return i}))).replace(/~A/g,"    ")).replace(/~B/g,"")})),D.subParser("encodeAmpsAndAngles",(function(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")})),D.subParser("encodeBackslashEscapes",(function(e){return e=(e=e.replace(/\\(\\)/g,D.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,D.helper.escapeCharactersCallback)})),D.subParser("encodeCode",(function(e){return e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=D.helper.escapeCharacters(e,"*_{}[]\\",!1)})),D.subParser("encodeEmailAddress",(function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=(e='<a href="'+(e=(e="mailto:"+e).replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else if(":"!==e){var i=Math.random();e=i>.9?t[2](e):i>.45?t[1](e):t[0](e)}return e})))+'">'+e+"</a>").replace(/">.+:/g,'">')})),D.subParser("escapeSpecialCharsWithinTagAttributes",(function(e){return e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=D.helper.escapeCharacters(t,"\\`*_",!1)}))})),D.subParser("githubCodeBlocks",(function(e,t,i){return t.ghCodeBlocks?(e=i.converter._dispatch("githubCodeBlocks.before",e,t,i),e=(e=(e+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,(function(e,o,a){var n=t.omitExtraWLInCodeBlocks?"":"\n";return a=D.subParser("encodeCode")(a),a="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(a=(a=(a=D.subParser("detab")(a)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+n+"</code></pre>",a=D.subParser("hashBlock")(a,t,i),"\n\n~G"+(i.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}))).replace(/~0/,""),i.converter._dispatch("githubCodeBlocks.after",e,t,i)):e})),D.subParser("hashBlock",(function(e,t,i){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(i.gHtmlBlocks.push(e)-1)+"K\n\n"})),D.subParser("hashElement",(function(e,t,i){return function(e,t){var o=t;return o=(o=(o=o.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),o="\n\n~K"+(i.gHtmlBlocks.push(o)-1)+"K\n\n"}})),D.subParser("hashHTMLBlocks",(function(e,t,i){for(var o=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],a=function(e,t,o,a){var n=e;return-1!==o.search(/\bmarkdown\b/)&&(n=o+i.converter.makeHtml(t)+a),"\n\n~K"+(i.gHtmlBlocks.push(n)-1)+"K\n\n"},n=0;n<o.length;++n)e=D.helper.replaceRecursiveRegExp(e,a,"^(?: |\\t){0,3}<"+o[n]+"\\b[^>]*>","</"+o[n]+">","gim");return e=(e=(e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,D.subParser("hashElement")(e,t,i))).replace(/(<!--[\s\S]*?-->)/g,D.subParser("hashElement")(e,t,i))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,D.subParser("hashElement")(e,t,i))})),D.subParser("hashHTMLSpans",(function(e,t,i){for(var o=D.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),a=0;a<o.length;++a)e=e.replace(o[a][0],"~L"+(i.gHtmlSpans.push(o[a][0])-1)+"L");return e})),D.subParser("unhashHTMLSpans",(function(e,t,i){for(var o=0;o<i.gHtmlSpans.length;++o)e=e.replace("~L"+o+"L",i.gHtmlSpans[o]);return e})),D.subParser("hashPreCodeTags",(function(e,t,i){return e=D.helper.replaceRecursiveRegExp(e,(function(e,t,o,a){var n=o+D.subParser("encodeCode")(t)+a;return"\n\n~G"+(i.ghCodeBlocks.push({text:e,codeblock:n})-1)+"G\n\n"}),"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")})),D.subParser("headers",(function(e,t,i){e=i.converter._dispatch("headers.before",e,t,i);var o=t.prefixHeaderId,a=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),n=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function r(e){var t,a=e.replace(/[^\w]/g,"").toLowerCase();return i.hashLinkCounts[a]?t=a+"-"+i.hashLinkCounts[a]++:(t=a,i.hashLinkCounts[a]=1),!0===o&&(o="section"),D.helper.isString(o)?o+t:t}return e=(e=(e=e.replace(n,(function(e,o){var n=D.subParser("spanGamut")(o,t,i),s=t.noHeaderId?"":' id="'+r(o)+'"',c="<h"+a+s+">"+n+"</h"+a+">";return D.subParser("hashBlock")(c,t,i)}))).replace(s,(function(e,o){var n=D.subParser("spanGamut")(o,t,i),s=t.noHeaderId?"":' id="'+r(o)+'"',c=a+1,d="<h"+c+s+">"+n+"</h"+c+">";return D.subParser("hashBlock")(d,t,i)}))).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,(function(e,o,n){var s=D.subParser("spanGamut")(n,t,i),c=t.noHeaderId?"":' id="'+r(n)+'"',d=a-1+o.length,l="<h"+d+c+">"+s+"</h"+d+">";return D.subParser("hashBlock")(l,t,i)})),e=i.converter._dispatch("headers.after",e,t,i)})),D.subParser("images",(function(e,t,i){function o(e,t,o,a,n,s,r,c){var d=i.gUrls,l=i.gTitles,h=i.gDimensions;if(o=o.toLowerCase(),c||(c=""),""===a||null===a){if(""!==o&&null!==o||(o=t.toLowerCase().replace(/ ?\n/g," ")),a="#"+o,D.helper.isUndefined(d[o]))return e;a=d[o],D.helper.isUndefined(l[o])||(c=l[o]),D.helper.isUndefined(h[o])||(n=h[o].width,s=h[o].height)}t=t.replace(/"/g,"&quot;"),t=D.helper.escapeCharacters(t,"*_",!1);var p='<img src="'+(a=D.helper.escapeCharacters(a,"*_",!1))+'" alt="'+t+'"';return c&&(c=c.replace(/"/g,"&quot;"),p+=' title="'+(c=D.helper.escapeCharacters(c,"*_",!1))+'"'),n&&s&&(p+=' width="'+(n="*"===n?"auto":n)+'"',p+=' height="'+(s="*"===s?"auto":s)+'"'),p+=" />"}return e=(e=(e=i.converter._dispatch("images.before",e,t,i)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g,o)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o),e=i.converter._dispatch("images.after",e,t,i)})),D.subParser("italicsAndBold",(function(e,t,i){return e=i.converter._dispatch("italicsAndBold.before",e,t,i),e=t.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e=i.converter._dispatch("italicsAndBold.after",e,t,i)})),D.subParser("lists",(function(e,t,i){function o(e,o){i.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var a=/\n[ \t]*\n(?!~0)/.test(e+="~0");return e=(e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,(function(e,o,n,s,r,c,d){d=d&&""!==d.trim();var l=D.subParser("outdent")(r,t,i),h="";return c&&t.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',l=l.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return d&&(e+=" checked"),e+=">"}))),o||l.search(/\n{2,}/)>-1?(l=D.subParser("githubCodeBlocks")(l,t,i),l=D.subParser("blockGamut")(l,t,i)):(l=(l=D.subParser("lists")(l,t,i)).replace(/\n$/,""),l=a?D.subParser("paragraphs")(l,t,i):D.subParser("spanGamut")(l,t,i)),l="\n<li"+h+">"+l+"</li>\n"}))).replace(/~0/g,""),i.gListLevel--,o&&(e=e.replace(/\s+$/,"")),e}function a(e,t,i){var a="ul"===t?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,n=[],s="";if(-1!==e.search(a)){!function e(n){var r=n.search(a);-1!==r?(s+="\n\n<"+t+">"+o(n.slice(0,r),!!i)+"</"+t+">\n\n",a="ul"===(t="ul"===t?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(n.slice(r))):s+="\n\n<"+t+">"+o(n,!!i)+"</"+t+">\n\n"}(e);for(var r=0;r<n.length;++r);}else s="\n\n<"+t+">"+o(e,!!i)+"</"+t+">\n\n";return s}e=i.converter._dispatch("lists.before",e,t,i),e+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i.gListLevel?e=e.replace(n,(function(e,t,i){return a(t,i.search(/[*+-]/g)>-1?"ul":"ol",!0)})):(n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(n,(function(e,t,i,o){return a(i,o.search(/[*+-]/g)>-1?"ul":"ol")}))),e=e.replace(/~0/,""),e=i.converter._dispatch("lists.after",e,t,i)})),D.subParser("outdent",(function(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")})),D.subParser("paragraphs",(function(e,t,i){for(var o=(e=(e=(e=i.converter._dispatch("paragraphs.before",e,t,i)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),a=[],n=o.length,s=0;s<n;s++){var r=o[s];r.search(/~(K|G)(\d+)\1/g)>=0||(r=(r=D.subParser("spanGamut")(r,t,i)).replace(/^([ \t]*)/g,"<p>"),r+="</p>"),a.push(r)}for(n=a.length,s=0;s<n;s++){for(var c="",d=a[s],l=!1;d.search(/~(K|G)(\d+)\1/)>=0;){var h=RegExp.$1,p=RegExp.$2;c=(c="K"===h?i.gHtmlBlocks[p]:l?D.subParser("encodeCode")(i.ghCodeBlocks[p].text):i.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),d=d.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(d)&&(l=!0)}a[s]=d}return e=(e=(e=a.join("\n\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),i.converter._dispatch("paragraphs.after",e,t,i)})),D.subParser("runExtension",(function(e,t,i,o){if(e.filter)t=e.filter(t,o.converter,i);else if(e.regex){var a=e.regex;!a instanceof RegExp&&(a=new RegExp(a,"g")),t=t.replace(a,e.replace)}return t})),D.subParser("spanGamut",(function(e,t,i){return e=i.converter._dispatch("spanGamut.before",e,t,i),e=D.subParser("codeSpans")(e,t,i),e=D.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,i),e=D.subParser("encodeBackslashEscapes")(e,t,i),e=D.subParser("images")(e,t,i),e=D.subParser("anchors")(e,t,i),e=D.subParser("autoLinks")(e,t,i),e=D.subParser("encodeAmpsAndAngles")(e,t,i),e=D.subParser("italicsAndBold")(e,t,i),e=(e=D.subParser("strikethrough")(e,t,i)).replace(/  +\n/g," <br />\n"),e=i.converter._dispatch("spanGamut.after",e,t,i)})),D.subParser("strikethrough",(function(e,t,i){return t.strikethrough&&(e=(e=i.converter._dispatch("strikethrough.before",e,t,i)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=i.converter._dispatch("strikethrough.after",e,t,i)),e})),D.subParser("stripBlankLines",(function(e){return e.replace(/^[ \t]+$/gm,"")})),D.subParser("stripLinkDefinitions",(function(e,t,i){return e=(e=(e+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,(function(e,o,a,n,s,r,c){return o=o.toLowerCase(),i.gUrls[o]=D.subParser("encodeAmpsAndAngles")(a),r?r+c:(c&&(i.gTitles[o]=c.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&n&&s&&(i.gDimensions[o]={width:n,height:s}),"")}))).replace(/~0/,"")})),D.subParser("tables",(function(e,t,i){if(!t.tables)return e;function o(e,o){return"<td"+o+">"+D.subParser("spanGamut")(e,t,i)+"</td>\n"}return e=(e=i.converter._dispatch("tables.before",e,t,i)).replace(/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm,(function(e){var a,n=e.split("\n");for(a=0;a<n.length;++a)/^[ \t]{0,3}\|/.test(n[a])&&(n[a]=n[a].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(n[a])&&(n[a]=n[a].replace(/\|[ \t]*$/,""));var s,r,c,d,l=n[0].split("|").map((function(e){return e.trim()})),h=n[1].split("|").map((function(e){return e.trim()})),p=[],u=[],g=[],f=[];for(n.shift(),n.shift(),a=0;a<n.length;++a)""!==n[a].trim()&&p.push(n[a].split("|").map((function(e){return e.trim()})));if(l.length<h.length)return e;for(a=0;a<h.length;++a)g.push((s=h[a],/^:[ \t]*--*$/.test(s)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(s)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(s)?' style="text-align:center;"':""));for(a=0;a<l.length;++a)D.helper.isUndefined(g[a])&&(g[a]=""),u.push((r=l[a],c=g[a],d=void 0,d="",r=r.trim(),t.tableHeaderId&&(d=' id="'+r.replace(/ /g,"_").toLowerCase()+'"'),"<th"+d+c+">"+(r=D.subParser("spanGamut")(r,t,i))+"</th>\n"));for(a=0;a<p.length;++a){for(var m=[],v=0;v<u.length;++v)D.helper.isUndefined(p[a][v]),m.push(o(p[a][v],g[v]));f.push(m)}return function(e,t){for(var i="<table>\n<thead>\n<tr>\n",o=e.length,a=0;a<o;++a)i+=e[a];for(i+="</tr>\n</thead>\n<tbody>\n",a=0;a<t.length;++a){i+="<tr>\n";for(var n=0;n<o;++n)i+=t[a][n];i+="</tr>\n"}return i+"</tbody>\n</table>\n"}(u,f)})),e=i.converter._dispatch("tables.after",e,t,i)})),D.subParser("unescapeSpecialChars",(function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var i=parseInt(t);return String.fromCharCode(i)}))})),t.exports=D})),window.define("20",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L="",x="",D={},P=e("23"),I=e("21"),C=(E("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),E("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),O=E("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),k=E("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");E("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),E("wxxxcode-style,script,style,view,scroll-view,block");function E(e){for(var t={},i=e.split(","),o=0;o<i.length;o++)t[i[o]]=!0;return t}function F(e){var t=[];if(0==L.length||!D)return(s={node:"text"}).text=e,o=[s];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var i=new RegExp("[:]"),o=e.split(i),a=0;a<o.length;a++){var n=o[a],s={};D[n]?(s.node="element",s.tag="emoji",s.text=D[n],s.baseSrc=x):(s.node="text",s.text=n),t.push(s)}return t}t.exports={html2json:function(e,t){e=function(e){return e.replace(/\r?\n+/g,"").replace(/<!--.*?-->/gi,"").replace(/\/\*.*?\*\//gi,"").replace(/[ ]+</gi,"<")}(e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}(e)),e=P.strDiscode(e);var i=[],o={node:t,nodes:[],images:[],imageUrls:[]},a=0;return I(e,{start:function(e,n,s){var r,c={node:"element",tag:e};0===i.length?(c.index=a.toString(),a+=1):(void 0===(r=i[0]).nodes&&(r.nodes=[]),c.index=r.index+"."+r.nodes.length);if(C[e]?c.tagType="block":O[e]?c.tagType="inline":k[e]&&(c.tagType="closeSelf"),0!==n.length&&(c.attr=n.reduce((function(e,t){var i=t.name,o=t.value;return"class"==i&&(c.classStr=o),"style"==i&&(c.styleStr=o),o.match(/ /)&&(o=o.split(" ")),e[i]?Array.isArray(e[i])?e[i].push(o):e[i]=[e[i],o]:e[i]=o,e}),{})),"img"===c.tag){c.imgIndex=o.images.length;var d=c.attr.src;""==d[0]&&d.splice(0,1),d=P.urlToHttpUrl(d,"https"),c.attr.src=d,c.from=t,o.images.push(c),o.imageUrls.push(d)}if("font"===c.tag){var l=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],h={color:"color",face:"font-family",size:"font-size"};if(console.log(c.attr),void 0!==c.attr&&"null"!=c.attr&&""!=c.attr&&(c.attr.style||(c.attr.style=[])),void 0!==c.styleStr&&"null"!=c.styleStr&&""!=c.styleStr&&(c.styleStr||(c.styleStr="")),void 0!==c.attr&&"null"!=c.attr&&""!=c.attr)for(var p in h)if(c.attr[p]){var u="size"===p?l[c.attr[p]-1]:c.attr[p];c.attr.style.push(h[p]),c.attr.style.push(u),c.styleStr+=h[p]+": "+u+";"}}("source"===c.tag&&(o.source=c.attr.src),s)?(void 0===(r=i[0]||o).nodes&&(r.nodes=[]),r.nodes.push(c)):i.unshift(c)},end:function(e){var t=i.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&o.source&&(t.attr.src=o.source,delete o.source),0===i.length)o.nodes.push(t);else{var a=i[0];void 0===a.nodes&&(a.nodes=[]),a.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:F(e)};if(0===i.length)t.index=a.toString(),a+=1,o.nodes.push(t);else{var n=i[0];void 0===n.nodes&&(n.nodes=[]),t.index=n.index+"."+n.nodes.length,n.nodes.push(t)}},comment:function(e){}}),o},emojisInit:function(){L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",D=arguments.length>2?arguments[2]:void 0}}})),window.define("23",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";t.exports={strDiscode:function(e){return e=function(e){return(e=(e=e.replace(/\r\n/g,"")).replace(/\n/g,"")).replace(/code/g,"wxxxcode-style")}(e=function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&OElig;/g,"Œ")).replace(/&oelig;/g,"œ")).replace(/&Scaron;/g,"Š")).replace(/&scaron;/g,"š")).replace(/&Yuml;/g,"Ÿ")).replace(/&fnof;/g,"ƒ")).replace(/&circ;/g,"ˆ")).replace(/&tilde;/g,"˜")).replace(/&ensp;/g,"")).replace(/&emsp;/g,"")).replace(/&thinsp;/g,"")).replace(/&zwnj;/g,"")).replace(/&zwj;/g,"")).replace(/&lrm;/g,"")).replace(/&rlm;/g,"")).replace(/&ndash;/g,"–")).replace(/&mdash;/g,"—")).replace(/&lsquo;/g,"‘")).replace(/&rsquo;/g,"’")).replace(/&sbquo;/g,"‚")).replace(/&ldquo;/g,"“")).replace(/&rdquo;/g,"”")).replace(/&bdquo;/g,"„")).replace(/&dagger;/g,"†")).replace(/&Dagger;/g,"‡")).replace(/&bull;/g,"•")).replace(/&hellip;/g,"…")).replace(/&permil;/g,"‰")).replace(/&prime;/g,"′")).replace(/&Prime;/g,"″")).replace(/&lsaquo;/g,"‹")).replace(/&rsaquo;/g,"›")).replace(/&oline;/g,"‾")).replace(/&euro;/g,"€")).replace(/&trade;/g,"™")).replace(/&larr;/g,"←")).replace(/&uarr;/g,"↑")).replace(/&rarr;/g,"→")).replace(/&darr;/g,"↓")).replace(/&harr;/g,"↔")).replace(/&crarr;/g,"↵")).replace(/&lceil;/g,"⌈")).replace(/&rceil;/g,"⌉")).replace(/&lfloor;/g,"⌊")).replace(/&rfloor;/g,"⌋")).replace(/&loz;/g,"◊")).replace(/&spades;/g,"♠")).replace(/&clubs;/g,"♣")).replace(/&hearts;/g,"♥")).replace(/&diams;/g,"♦")).replace(/&#39;/g,"'")}(e=function(e){return(e=(e=(e=(e=(e=e.replace(/&nbsp;/g," ")).replace(/&quot;/g,"'")).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#8226;/g,"•")}(e=function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&Alpha;/g,"Α")).replace(/&Beta;/g,"Β")).replace(/&Gamma;/g,"Γ")).replace(/&Delta;/g,"Δ")).replace(/&Epsilon;/g,"Ε")).replace(/&Zeta;/g,"Ζ")).replace(/&Eta;/g,"Η")).replace(/&Theta;/g,"Θ")).replace(/&Iota;/g,"Ι")).replace(/&Kappa;/g,"Κ")).replace(/&Lambda;/g,"Λ")).replace(/&Mu;/g,"Μ")).replace(/&Nu;/g,"Ν")).replace(/&Xi;/g,"Ν")).replace(/&Omicron;/g,"Ο")).replace(/&Pi;/g,"Π")).replace(/&Rho;/g,"Ρ")).replace(/&Sigma;/g,"Σ")).replace(/&Tau;/g,"Τ")).replace(/&Upsilon;/g,"Υ")).replace(/&Phi;/g,"Φ")).replace(/&Chi;/g,"Χ")).replace(/&Psi;/g,"Ψ")).replace(/&Omega;/g,"Ω")).replace(/&alpha;/g,"α")).replace(/&beta;/g,"β")).replace(/&gamma;/g,"γ")).replace(/&delta;/g,"δ")).replace(/&epsilon;/g,"ε")).replace(/&zeta;/g,"ζ")).replace(/&eta;/g,"η")).replace(/&theta;/g,"θ")).replace(/&iota;/g,"ι")).replace(/&kappa;/g,"κ")).replace(/&lambda;/g,"λ")).replace(/&mu;/g,"μ")).replace(/&nu;/g,"ν")).replace(/&xi;/g,"ξ")).replace(/&omicron;/g,"ο")).replace(/&pi;/g,"π")).replace(/&rho;/g,"ρ")).replace(/&sigmaf;/g,"ς")).replace(/&sigma;/g,"σ")).replace(/&tau;/g,"τ")).replace(/&upsilon;/g,"υ")).replace(/&phi;/g,"φ")).replace(/&chi;/g,"χ")).replace(/&psi;/g,"ψ")).replace(/&omega;/g,"ω")).replace(/&thetasym;/g,"ϑ")).replace(/&upsih;/g,"ϒ")).replace(/&piv;/g,"ϖ")).replace(/&middot;/g,"·")}(e=function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&forall;/g,"∀")).replace(/&part;/g,"∂")).replace(/&exists;/g,"∃")).replace(/&empty;/g,"∅")).replace(/&nabla;/g,"∇")).replace(/&isin;/g,"∈")).replace(/&notin;/g,"∉")).replace(/&ni;/g,"∋")).replace(/&prod;/g,"∏")).replace(/&sum;/g,"∑")).replace(/&minus;/g,"−")).replace(/&lowast;/g,"∗")).replace(/&radic;/g,"√")).replace(/&prop;/g,"∝")).replace(/&infin;/g,"∞")).replace(/&ang;/g,"∠")).replace(/&and;/g,"∧")).replace(/&or;/g,"∨")).replace(/&cap;/g,"∩")).replace(/&cap;/g,"∪")).replace(/&int;/g,"∫")).replace(/&there4;/g,"∴")).replace(/&sim;/g,"∼")).replace(/&cong;/g,"≅")).replace(/&asymp;/g,"≈")).replace(/&ne;/g,"≠")).replace(/&le;/g,"≤")).replace(/&ge;/g,"≥")).replace(/&sub;/g,"⊂")).replace(/&sup;/g,"⊃")).replace(/&nsub;/g,"⊄")).replace(/&sube;/g,"⊆")).replace(/&supe;/g,"⊇")).replace(/&oplus;/g,"⊕")).replace(/&otimes;/g,"⊗")).replace(/&perp;/g,"⊥")).replace(/&sdot;/g,"⋅")}(e)))))},urlToHttpUrl:function(e,t){return new RegExp("^//").test(e)&&(e=t+":"+e),e}}})),window.define("21",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,x=/^<\/([-A-Za-z0-9_]+)[^>]*>/,D=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,P=F("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),I=F("a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),C=F("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),O=F("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),k=F("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),E=F("wxxxcode-style,script,style,view,scroll-view,block");function F(e){for(var t={},i=e.split(","),o=0;o<i.length;o++)t[i[o]]=!0;return t}t.exports=function(e,t){var i,o,a,n=[],s=e;for(n.last=function(){return this[this.length-1]};e;){if(o=!0,n.last()&&E[n.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+n.last()+"[^>]*>"),(function(e,i){return i=i.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(i),""})),d("",n.last());else if(0==e.indexOf("\x3c!--")?(i=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,i)),e=e.substring(i+3),o=!1):0==e.indexOf("</")?(a=e.match(x))&&(e=e.substring(a[0].length),a[0].replace(x,d),o=!1):0==e.indexOf("<")&&(a=e.match(L))&&(e=e.substring(a[0].length),a[0].replace(L,c),o=!1),o){i=e.indexOf("<");for(var r="";0===i;)r+="<",i=(e=e.substring(1)).indexOf("<");r+=i<0?e:e.substring(0,i),e=i<0?"":e.substring(i),t.chars&&t.chars(r)}if(e==s)throw"Parse Error: "+e;s=e}function c(e,i,o,a){if(i=i.toLowerCase(),I[i])for(;n.last()&&C[n.last()];)d("",n.last());if(O[i]&&n.last()==i&&d("",i),(a=P[i]||!!a)||n.push(i),t.start){var s=[];o.replace(D,(function(e,t){var i=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:k[t]?t:"";s.push({name:t,value:i,escaped:i.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(i,s,a)}}function d(e,i){if(i){i=i.toLowerCase();for(o=n.length-1;o>=0&&n[o]!=i;o--);}else var o=0;if(o>=0){for(var a=n.length-1;a>=o;a--)t.end&&t.end(n[a]);n.length=o}}d()}})),window.define("129",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24"),P=e("27"),I=e("34"),C=I.request,O=(I.sendLog,s());Component({behaviors:[P],properties:{article:{type:Object,value:null,observer:function(e){var t=this;e&&e.expAll&&e.expAll.content&&e.expAll.content.steps&&e.expAll.content.steps.length&&!this.isArticleRendered&&i((function(){t.articleRendered()}),500)}},coverImage:{type:String,value:""},pageUUID:{type:Number,value:0},pageStartTime:{type:Number,value:0},topBarHeight:{type:Number,value:0},isWeb:{type:Boolean,value:!1},fromJingyanSwan:{type:Boolean,value:!1},from:{type:String,value:""},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1},scene:{type:String,value:"",observer:function(e){var t=this.data,i=t.from,o=t.fromJingyanSwan,a=!x.canNotMutedWhiteList({scene:e,from:i,fromJingyanSwan:o});this.setData({needVideoMuted:a})}}},externalClasses:["fix-bottom-bar"],isAjaxGetRelrec:!1,isNomoreRelrecData:!1,isArticleRendered:!1,renderLogViewHeight:0,navExpressItemPvMap:[],data:{bottomBarHeight:48,needVideoMuted:!0,canAutoplay:!0,doubleFeedList:[],relrecTip:"",pageSize:20,pn:0},lifetimes:{attached:function(){var e=x.getSysInfoSync(D.PageName.Article);this.renderLogViewHeight=e.screenHeight-this.data.topBarHeight-this.data.bottomBarHeight}},methods:{pageScroll:x.throttle((function(e,t){var i=e+t+this.renderLogViewHeight;this.sendNavExpressLog(i),this.triggerEventBusListener("pagescroll",{scrollTop:e})}),60),articleRendered:function(){this.isArticleRendered=!0,this.getMultiAnswerFeed(),this.calcNavExpressItemBounding()},handleGotoSteps:function(){x.jumpTo(D.PageName.Steps,{eid:this.data.article.expAll.encEid,from:D.EArticleStepsFrom.fromArticleDetail,word:this.data.query,coverImage:this.data.coverImage})},onBottomShare:function(){var e=this,t={};this.data.article&&this.data.article.expAll&&(t=this.data.article.expAll),n.openShare({title:t.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:x.getPagePath(D.PageName.Article,{eid:t.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:this.data.coverImage||O.globalData.imgUrl,success:function(){e.sendLog({pos:"bottom-bar-share",action:"success"}),e.triggerEvent("sharefeedback")}})},onChangeTTS:function(e){this.sendLog({pos:"tts",action:e.action})},onPreview:function(e){n.previewImage({current:e.detail.url,urls:this.data.article.expAll.images})},onFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},onFollowChanged:function(e){e&&e.detail&&e.detail.uid&&this.triggerEvent("followchanged",e.detail)},handlePageClick:function(){this.triggerEventBusListener("pageClicked")},getMultiAnswerFeed:function(){var e=this;this.isAjaxGetRelrec=!0,this.setData({relrecTip:"加载中..."});var t=this.data.pn;C({url:x.getApiUrl("articleMultiAnswerFeed"),data:{eid:this.data.article.expAll.encEid,bdenvmode:O.globalData.privacyMode,iadLDL:O.globalData.iadLDL,pn:t,rn:this.data.pageSize,fromAnchor:this.data.fromAnchor,from:this.data.from},success:function(i){e.isAjaxGetRelrec=!1,n.hideLoading();var o=i.data;if(0===o.errNo||0===o.errno){var a=o.data.relateList;a&&a.length?e.setData({doubleFeedList:e.data.doubleFeedList.slice(0).concat(a),pn:t+e.data.pageSize,relrecTip:""}):e.setNoMoreRelrecData(),e.data.doubleFeedList.length||a.length||e.setNoMoreRelrecData()}else 506===o.errno||702===o.errno?e.setNoMoreRelrecData():e.setData({relrecTip:"数据错误"})},fail:function(){e.isAjaxGetRelrec=!1,n.hideLoading(),e.setData({relrecTip:"Wi-Fi和移动网络已断开"})}})},reachBottom:function(){this.sendLog({pos:"page-bottom",action:"show"}),this.isAjaxGetRelrec||this.isNomoreRelrecData||(this.sendLog({pos:"feed-bottom",action:"load-more"}),this.getMultiAnswerFeed())},setNoMoreRelrecData:function(){this.isNomoreRelrecData=!0,this.setData({relrecTip:"~没有更多了~"})},handleButtonClick:function(e){this.bizNavJumpTo(e.detail)},bizNavJumpTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.eidEnc?x.jumpTo(D.PageName.Article,{eid:e.eidEnc}):e.url?x.jumpTo(D.PageName.Webview,{url:e.url}):e.phone?n.makePhoneCall({phoneNumber:e.phone}):n.showToast({title:"页面打开失败",icon:"none"})},onNavExpressTap:function(e){var t=e.currentTarget.dataset.index,i=this.data.article.businessTplInfo.navigation[t];this.sendLog({pos:"nav-express-item",action:"click",index:t}),this.bizNavJumpTo(i)},calcNavExpressItemBounding:function(){var e=this,t=this.data.article.businessTplInfo;if(t&&t.navigation&&t.navigation.length){var o=n.createSelectorQuery().in(this);x.poll((function(e,t){o.selectAll(".nav-item").boundingClientRect((function(i){i&&i.length?e(i):t()})).exec()}),(function(t,a){t||o.selectViewport().scrollOffset((function(t){var o=0;t&&t.scrollTop>0&&(o=t.scrollTop),a.forEach((function(t){var i=t.top+o;e.navExpressItemPvMap.push({logged:!1,top:i,bottom:i+t.height})})),i((function(){var t=o+e.data.topBarHeight+e.renderLogViewHeight;e.sendNavExpressLog(t)}),50)})).exec()}))}},sendNavExpressLog:function(e){var t=this;this.navExpressItemPvMap.forEach((function(i,o){i.logged||e>i.top&&(t.sendLog({pos:"nav-express-item",action:"show",index:o}),i.logged=!0)}))},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.component?e.component="business-tmpl_"+e.component:e.component="business-tmpl";var t=Object.assign({},e);this.triggerEvent("sendlog",t)}}})})),window.define("37",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("27");Component({behaviors:[P],externalClasses:["fix-bottom-bar"],properties:{buttons:{type:Array,value:[]},tplId:{type:Number,value:0},pageUUID:{type:Number,value:0}},data:{isFold:!1},attached:function(){var e=this;this.sendLog({pos:"float-button",action:"show"}),this.data.buttons.length>1&&i(this.handleFoldButtons.bind(this),2e3),this.addEventBusListener("pageClicked",(function(){e.handlePageClicked()}))},methods:{handleClickButtonItem:function(e){var t=e.currentTarget.dataset.index,i=this.data.buttons[t];this.sendLog({pos:"float-button",tplId:this.data.tplId,index:t,action:"click"}),this.triggerEvent("buttonClick",i)},handleFoldButtons:function(){this.setData({isFold:!0})},handleUnfoldButtons:function(){this.setData({isFold:!1})},handlePageClicked:function(){this.data.buttons.length>1&&!this.data.isFold&&this.handleFoldButtons()},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"business-float-button"},e))}}})})),window.define("49",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}Component({properties:{eid:{type:String,value:""},toolData:{type:Object,value:null,observer:function(e){e&&1===e.type&&this.setData({specialTool:this.processSpecialTool(e.content)})}}},data:{specialTool:[]},methods:{processSpecialTool:function(e){var t=[];return e.forEach((function(e){e.brand&&e.brand.name&&t.push(["品牌型号",e.brand.name]),e.system&&e.system.name&&t.push(["系统版本",e.system.name]),e.app&&e.app.name&&t.push(["软件版本",e.app.name])})),t},childlog:function(e){this.sendLog(e.detail)},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({pos:"tools-area",component:"tools-area-comp",eid:this.data.eid},e))}}})})),window.define("133",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("24"),D=e("36"),P=e("34"),I=P.request,C=(P.sendLog,s()),O=e("28");Component({firstListRequested:!1,behaviors:[O],userTapPaused:!1,networkChangePaused:!1,videoLoadedErrRetry:!1,videoLoadedErrRetryTimeoutId:0,pageTmpl:null,videoAreaComp:null,standardTmplTop:0,isRequested:!1,pn:0,videoPvMap:[],externalClasses:["fix-bottom-bar"],articleLayerTop:133,initAricleLayer:!1,properties:{baseEncEid:{type:String,value:"",observer:function(e,t){e===t||t||this.firstListRequested||(this.firstListRequested=!0,this.getVideoList(1,1))}},coverImage:{type:String},query:{type:String},jyapid:{type:String,value:"974"},baseExpArticle:{type:Object,value:null,observer:function(e){if(e&&!this.data.articleList[0]){var t={},i=e.expAll;t["articleList[0]"]=e,t.articleInfo=e,t.coverInfo={expInfo:{encEid:i.encEid,title:i.title,feedback:i.feedback,hasFollow:i.hasFollow,hasStep:!1}},t["coverList[0]"]=t.coverInfo,t["videoList[0]"]=i.videoData,t.currPath=this.getCurrPagePath(i.encEid),this.setData(t)}}},topBarHeight:{type:Number,value:0},pageUUID:{type:Number,value:""},pageStartTime:{type:Number,value:0},isWeb:{type:Boolean,value:!1},isShowStyleVideo:{type:Boolean,value:!1},isHorizontalVideo:{type:Boolean,value:!1},scene:{type:String,value:""},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1}},data:{isArticleShow:!1,networkType:"",videoTipType:"",showGuide:!1,hasMore:!0,canUseComment:!1,coverList:[],articleList:[],videoList:[],articleInfo:{},coverInfo:{},videoInfo:{},videoIndex:0,logs:[],isError:!1,isArticleLayerReady:!1,errInfoObj:{btnEvtType:x.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},currPath:"",articleLayerHeight:0},lifetimes:{created:function(){},attached:function(){var e=this.data,t=e.versionSupportComment,i=e.riskShowComment;this.pageTmpl=this.selectComponent("#standard-tmpl"),this.videoAreaComp=this.selectComponent("#video-area-comp"),this.data.baseEncEid&&!this.firstListRequested&&(this.firstListRequested=!0,this.getVideoList(1,1));var o=i&&t;this.setData({canUseComment:o})},ready:function(){var e=this;this.triggerEvent("componentready");try{n.getStorageSync("vertical_video_visited")||(this.setData({showGuide:!0},(function(){i((function(){e.setData({showGuide:!1})}),2500)})),n.setStorage({key:"vertical_video_visited",data:"1"}))}catch(e){}this.registNetworkChange()},detached:function(){}},pageLifetimes:{show:function(){},hide:function(){}},methods:{setArticleScrollViewH:function(){var e=this;if(!this.initAricleLayer){var t=D.getSysInfoSync(x.PageName.VerticalVideo).screenHeight-this.data.topBarHeight-this.articleLayerTop-48;this.setData({articleLayerHeight:t},(function(){e.initAricleLayer=!0}))}},getCurrPagePath:function(e){return D.getPagePath(x.PageName.Article,{eid:e,scene:this.data.scene})},getVideoInfo:function(){return this.videoAreaComp&&this.videoAreaComp.getCurVideoInfo?this.videoAreaComp.getCurVideoInfo():null},feedbackUpdate:function(e,t){for(var i=this.data.articleList.length,o=0;o<i;o++){if(this.data.articleList[o].expAll.encEid===e){var a={};a["articleList["+o+"].expAll.feedback.status"]=t.status,a["articleList["+o+"].expAll.feedback.likeNum"]=t.likeNum,a["coverList["+o+"].expInfo.feedback.status"]=t.status,a["coverList["+o+"].expInfo.feedback.likeNum"]=t.likeNum,e===this.data.articleInfo.expAll.encEid&&(a["articleInfo.expAll.feedback.status"]=t.status,a["articleInfo.expAll.feedback.likeNum"]=t.likeNum),e===this.data.coverInfo.expInfo.encEid&&(a["coverInfo.expInfo.feedback.status"]=t.status,a["coverInfo.expInfo.feedback.likeNum"]=t.likeNum),this.setData(a);break}}},registNetworkChange:function(){var e=this;n.getNetworkType({success:function(t){var i=t.networkType,o={networkType:i};if("none"===i)o.videoTipType=x.VideoTip.VideoLoadError,e.pauseVideo();else if(/\d/gi.test(i)){o.videoTipType=x.VideoTip.NetWorkChange;var a=e.data.baseExpArticle;a&&a.expAll&&a.expAll.videoData&&a.expAll.videoData.fileSize&&(o.videoInfo={durationStr:D.timeFormatter(a.expAll.videoData.duration),sizeStr:(a.expAll.videoData.fileSize/1024/1024).toFixed(2)+"MB"}),e.networkChangePaused=!0,e.pauseVideo()}e.setData(o)}}),n.onNetworkStatusChange((function(t){return e.networkStatusChange(t)}))},networkStatusChange:function(e){var t,i,o=this.data.networkType,a=e.networkType;"none"===a?(t={videoTipType:x.VideoTip.VideoLoadError,networkType:a},i=this.pauseVideo.bind(this)):(t={videoTipType:"",networkType:a},/wifi|unknown|none/gi.test(o)&&/\d/gi.test(a)?(t.videoTipType=x.VideoTip.NetWorkChange,t.videoInfo=this.getVideoInfo(),this.userTapPaused||(this.networkChangePaused=!0),i=this.pauseVideo.bind(this)):this.networkChangePaused&&(i=this.playVideo.bind(this))),i?this.setData(t,(function(){i()})):this.setData(t)},emptyFn:function(){},scrollViewScrollToLower:function(e){},scrollViewScrollToUpper:function(e){},scrollViewScrolling:function(e){this.pageTmpl&&this.pageTmpl.pageScroll&&this.pageTmpl.pageScroll(e.detail.scrollTop,this.standardTmplTop)},hideArticleLayer:function(){var e=this;this.triggerEvent("stepindexspotupdate",{spotClass:"absolute"}),this.setData({isArticleShow:!1},(function(){e.playVideo()}));var t=this.data.videoIndex,i=this.data.coverList[t].expInfo.encEid,o=this.data.videoList[t].encVid;this.triggerEvent("changearticlelayervisibility",{visible:!1,encEid:i,encVid:o}),this.sendLog({pos:"article-layer-close-btn",action:"click"})},userconfirm:function(e){switch(e.detail.type){case x.VideoTip.NetWorkChange:case x.VideoTip.VideoLoadError:case x.VideoTip.VideoPlayError:}this.setData({videoTipType:""})},pageScroll:function(e,t){this.pageTmpl&&this.pageTmpl.pageScroll&&this.pageTmpl.pageScroll(e,t)},reachBottom:function(){this.pageTmpl&&this.pageTmpl.reachBottom&&this.pageTmpl.reachBottom()},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){e.component?e.component="vertical-video_"+e.component:e.component="vertical-video";var t=this.data.videoIndex;e.encEid=this.data.coverList[t].expInfo.encEid,e.encVid=this.data.videoList[t].encVid,e.videoProducer="jingyan",this.triggerEvent("sendlog",e)},onVerticalVideoShare:function(){var e=this,t=this.data.articleList[this.data.videoIndex].expAll;n.openShare({title:t.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:D.getPagePath(x.PageName.Article,{eid:t.encEid,scene:this.data.scene}),imageUrl:t.images[0]||C.globalData.imgUrl,success:function(){e.sendLog({pos:"vertical-video-share",action:"success"}),e.triggerEvent("sharefeedback")}})},showArticleLayer:function(){var e=this;this.setArticleScrollViewH(),this.pauseVideo(),this.data.articleInfo.isLoading&&n.showLoading({title:"加载中"}),this.setData({isArticleShow:!0,isArticleLayerReady:!1},(function(){e.pageTmpl=e.selectComponent("#standard-tmpl"),e.standardTmplTop||n.createSelectorQuery().in(e).select(".scrollview").boundingClientRect((function(t){t&&(e.standardTmplTop=t.top+10)})).exec(),e.sendLog({pos:"article-layer",action:"pv"})}));var t=this.data.videoIndex,i=this.data.coverList[t].expInfo.encEid,o=this.data.videoList[t].encVid;this.triggerEvent("changearticlelayervisibility",{visible:!0,encEid:i,encVid:o})},articleLayerReady:function(){this.setData({isArticleLayerReady:!0})},pauseVideo:function(){this.videoAreaComp&&this.videoAreaComp.pauseVideo&&this.videoAreaComp.pauseVideo()},playVideo:function(){this.data.videoTipType||this.videoAreaComp&&this.videoAreaComp.playVideo&&this.videoAreaComp.playVideo()},stopVideo:function(){this.videoAreaComp&&this.videoAreaComp.stopVideo&&this.videoAreaComp.stopVideo()},changeFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},clearVideoLoadedErrRetry:function(){this.videoLoadedErrRetry&&(n.hideLoading(),this.videoLoadedErrRetry=!1,clearTimeout(this.videoLoadedErrRetryTimeoutId))},stepIndexSpotUpdate:function(e){this.triggerEvent("stepindexspotupdate",e.detail)},getVideoList:function(e,t){var i=this,o={baseEid:this.data.baseEncEid,pn:this.pn};this.data.isShowStyleVideo&&(o.screenVH=this.data.isHorizontalVideo?1:2),I({url:D.getApiUrl("getvideofeedlist"),data:o,success:function(e){var o={hasMore:e.data.data.hasMore},a=t;if(e.data.data.list&&e.data.data.list.length){if((0===i.pn?e.data.data.list.slice(1):e.data.data.list).forEach((function(e){o["videoList["+a+"]"]=e.videoInfo,o["coverList["+a+"]"]={expInfo:e.expInfo,showlistInfo:e.showlistInfo},a++})),0===i.pn){var n=e.data.data.list[0];o["coverList[0].expInfo.author"]=n.expInfo.author,o["coverList[0].expInfo.hasStep"]=n.expInfo.hasStep,o["coverList[0].showlistInfo"]=n.showlistInfo,i.sendMaskItemLog({showlistInfo:n.showlistInfo,articleBtn:n.expInfo.hasStep}),i.sendVideoShowLog(0)}i.pn=e.data.data.pn}!o.hasMore&&a>0&&(o["coverList["+(a-1)+"].hideCMTip"]=!0),i.setData(o,(function(){i.endVideoListRequest()}))},fail:function(e){i.endVideoListRequest()}})},beginVideoListRequest:function(){this.isRequested=!0},endVideoListRequest:function(){this.isRequested=!1},getArticleDetail:function(e,t){var i=this,o={eid:e.eid};I({url:D.getApiUrl(x.PageName.Article),data:o,success:function(e){if(i.data.articleInfo.isLoading&&n.hideLoading(),404!==e.statusCode){var o=e.data,a={},s="articleList["+t+"]";if(0===o.errNo){var r=o.data.expAll;if(r){a[s]=o.data,a.articleInfo=o.data;var c=i.data.coverList[t];c.expInfo.hasFollow=r.hasFollow,c.expInfo.feedback.commentNum=r.feedback.commentNum;var d={};d["coverList["+t+"]"]=c,i.setData(d),i.triggerEvent("switchexp",{article:o.data})}}else 10100001===o.errNo?a[s]={dataError:!0,errMsg:"经验不存在或者被删除"}:a[s]={dataError:!0,errMsg:"数据错误"};i.setData(a)}else i.setData({isError:!0,errInfoObj:{is404Error:!0,btnEvtType:x.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}})},fail:function(e){n.hideLoading(),i.setData({isError:!0,errInfoObj:{btnEvtType:x.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})},sendMaskItemLog:function(e){var t={component:"video-mask",action:"show"},i=[],o=[],a=[];e.showlistInfo&&e.showlistInfo.forEach((function(e){i.push("showlist-item"),o.push(e.encSid)})),e.articleBtn&&i.push("open-article-btn"),i.length&&(t.pos=i.join(","),i.length>1&&a.push({field:"pos",delimiter:","})),o.length&&(t.sid=o.join(","),o.length>1&&a.push({field:"sid",delimiter:","})),t.pos&&(a.length&&(t.mergeInfo=JSON.stringify(a)),this.sendLog(t))},sendShowlistLog:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){e.sendLog({pos:"vertical-video-showlist-item",action:"show",sid:t.encSid})}))},sendHasStepLog:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hasStep&&this.sendLog({pos:"open-article-btn",aciton:"show"})},sendVideoShowLog:function(e){(!this.videoPvMap[e]||this.videoPvMap[e]&&!this.videoPvMap[e].logged)&&(this.sendLog({pos:"video-player",action:"show",videoIndex:e,isFirstShow:!0,encVid:this.data.videoList[e].encVid}),this.videoPvMap[e]={logged:!0})},addCommentClickLog:function(){this.sendLog({pos:"vertical-video-comment-add",action:"click"})},openCommentClickLog:function(){this.sendLog({pos:"vertical-video-comment-open",action:"click"})}},messages:{progressbar:function(e){var t=e.value.action,i={pos:"progress-bar",component:e.value.component,action:t};this.sendLog(i)},videoplaychange:function(e){var t=this,o=e.value.index,a=e.value.direction,n={videoIndex:o,coverInfo:this.data.coverList[o]},s=n.coverInfo.expInfo.encEid;!this.isRequested&&o>this.data.videoList.length-4&&(this.isRequested=!0,i((function(){t.getVideoList(o,t.data.videoList.length)}))),this.data.articleList[o]?(n.articleInfo=this.data.articleList[o],this.triggerEvent("switchexp",{article:n.articleInfo})):(n.articleInfo={isLoading:!0,errMsg:"正在加载图文步骤..."},i((function(){t.getArticleDetail({eid:s},o)}))),n.currPath=this.getCurrPagePath(s),this.setData(n);var r=-1===a?"switch-prev-video":"switch-next-video";this.sendLog({pos:"video-player",action:r,videoIndex:o,playedTime:e.value.playedTime,prevEncVid:this.data.videoList[o-a].encVid,encVid:this.data.videoList[o].encVid}),this.sendMaskItemLog({showlistInfo:n.coverInfo.showlistInfo,articleBtn:n.coverInfo.expInfo.hasStep}),this.sendVideoShowLog(o)},videotipconfirm:function(e){var t=this;switch(e.value.type){case x.VideoTip.NetWorkChange:this.setData({videoTipType:""},(function(){t.playVideo()}));break;case x.VideoTip.VideoLoadError:this.videoLoadedErrRetry=!0,this.setData({videoTipType:""}),n.showLoading({title:"重试中",mask:!0}),this.videoLoadedErrRetryTimeoutId=i((function(){n.hideLoading(),t.videoLoadedErrRetry=!1,t.setData({videoTipType:x.VideoTip.VideoLoadError})}),3e3);break;case x.VideoTip.VideoPlayError:this.setData({videoTipType:""}),this.stopVideo(),i((function(){t.playVideo()}),500)}},videostatus:function(e){var t=e.value.status,i=e.value.index,o=e.value.errType,a={pos:e.value.pos,videoIndex:i,component:e.value.component,videoDuration:this.data.videoList[i].duration};switch(t){case"playing":this.data.videoTipType?this.pauseVideo():(this.networkChangePaused&&(this.networkChangePaused=!1),this.userTapPaused=!1),this.clearVideoLoadedErrRetry();break;case"ended":case"waiting":this.clearVideoLoadedErrRetry();break;case"play-vv":a.action="play-vv",this.sendLog(a);break;case"percent5":a.action="play-percent5",this.sendLog(a);break;case"percent30":a.action="play-percent30",this.sendLog(a);break;case"percent80":a.action="play-percent80",this.sendLog(a);break;case"percent100":a.action="play-percent100",a.playedTime=e.value.playedTime,this.sendLog(a),this.sendLog(Object.assign({},a,{action:"video-stop"}));break;case"close":a.action="video-stop",a.playedTime=e.value.playedTime,this.sendLog(a);break;case"validPlay":a.action="valid-play",this.sendLog(a);break;case"error":if(a.action=o,this.stopVideo(),o===x.VideoError.VideoPlayError)a.errObj=JSON.stringify(e.value.errObj||{}),this.sendLog(a);this.setData({videoTipType:o})}},uservideotap:function(e){var t=e.value.type,i={pos:"video-player",action:"user-"+t,videoIndex:e.value.index,component:e.value.component};"pause"===t?(this.userTapPaused=!0,i.playedTime=e.value.playedTime):this.userTapPaused=!1,this.sendLog(i)},videoComment:function(e){if(e&&e.value&&e.value.action){var t=e.value.action;"add"===t?this.addCommentHandler():"open"===t&&this.openCommentHandler()}}}})})),window.define("105",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36");var L=e("24");Component({properties:{tipType:{type:String,value:"",observer:function(e,t){var i=!1,o=!1,a=!1;switch(e){case L.VideoTip.NetWorkChange:o=!0;break;case L.VideoTip.VideoLoadError:a=!0;break;case L.VideoTip.VideoPlayError:i=!0}this.setData({isPlayErr:i,isNetworkChange:o,isLoadErr:a})}},videoInfo:{type:Object}},data:{isPlayErr:!1,isNetworkChange:!1,isLoadErr:!1},methods:{userClick:function(){this.dispatch("videotipconfirm",{type:this.data.tipType})}}})})),window.define("104",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36"),e("24");Component({properties:{opacity:{type:Number,value:1},bgColor:{type:String,value:"rgba(0, 0, 0, .7)"}},data:{},lifetimes:{created:function(){}},methods:{}})})),window.define("109",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";e("36");var x=e("24").GestureDirection;Component({isMoveTouch:!1,deltaX:0,startX:0,deltaY:0,startY:0,startTime:0,isHorzMove:null,lastTriggerClientX:0,lastTriggerClientY:0,properties:{direction:{type:String,value:x.Vertical},useCapture:{type:Boolean,value:!1}},data:{},methods:{start:function(e){if(!(e.touches.length>1)){var t=e.touches[0];this.deltaX=t.clientX,this.deltaY=t.clientY,this.triggerEvent("gesturetouchstart",{target:e.target,clientX:this.deltaX,clientY:this.deltaY}),this.isMoveTouch=!0,this.startX=this.deltaX,this.startY=this.deltaY,this.startTime=Date.now()}},move:function(e){if(!(e.touches.length>1)||this.isMoveTouch){var t=e.touches[0],i=t.clientX,o=t.clientY,a=i-this.deltaX,n=o-this.deltaY,s=Math.abs(a),r=Math.abs(n);null===this.isHorzMove&&(this.data.direction===x.Vertical?r>4&&(this.isHorzMove=!1,this.triggerEvent("gesturemovestart",{target:e.target,clientX:i,clientY:o})):this.data.direction===x.Horizontal?s>4&&(this.isHorzMove=!0,this.triggerEvent("gesturemovestart",{target:e.target,clientX:i,clientY:o})):(this.isHorzMove=s>=r,(s>4||r>4)&&this.triggerEvent("gesturemovestart",{target:e.target,clientX:i,clientY:o}))),!0===this.isHorzMove?Math.abs(this.lastTriggerClientX-a)>1.5&&(this.lastTriggerClientX=a,this.triggerEvent("gesturehorizontalmove",{target:e.target,x:a,clientX:i,clientY:o})):!1===this.isHorzMove&&Math.abs(this.lastTriggerClientY-n)>1.5&&(this.lastTriggerClientY=n,this.triggerEvent("gestureverticalmove",{target:e.target,y:n,clientX:i,clientY:o}))}},end:function(e){var t=this;if(this.isMoveTouch){this.isMoveTouch=!1;var o=e.changedTouches[0],a=o.clientX-this.startX,n=o.clientY-this.startY,s=Math.abs(a),r=Math.abs(n);Date.now(),this.startTime;s<3&&r<3?i((function(){t.triggerEvent("gesturetouchend",{target:e.target,clientX:o.clientX,clientY:o.clientY})}),25):(!0===this.isHorzMove?a>100?this.triggerEvent("gesturemoveright",{target:e.target}):a<-100?this.triggerEvent("gesturemoveleft",{target:e.target}):this.triggerEvent("gesturehorizontalrestore",{target:e.target}):!1===this.isHorzMove&&(n>100?this.triggerEvent("gesturemovedown",{target:e.target}):n<-100?this.triggerEvent("gesturemoveup",{target:e.target}):this.triggerEvent("gestureverticalrestore",{target:e.target})),this.triggerEvent("gesturetouchend",{target:e.target,clientX:o.clientX,clientY:o.clientY}),this.isHorzMove=null)}},cancel:function(e){this.end(e)},gestureTap:function(e){var t=e.detail,i=t.x,o=t.y;this.triggerEvent("gesturetap",{target:e.target,clientX:i,clientY:o})}}})})),window.define("110",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24");Component({transitionDuration:".45s",sysInfo:null,videoSwipeChanging:!1,progressTouchMoved:!1,videoSeekTime:-1,brightBarCut:5,brightBarRight:0,windowWidth:0,progressBarTimeout:0,progressAvaliableWidth:0,videoContext:null,videoTimingLogMap:[],vvRepeatCount:!0,videoZIndexTimeoutId:0,isFirstRender:!0,playStartTime:0,validPlayTime:0,properties:{topBarHeight:{type:Number,value:0,observer:function(e,t){0!==e&&this.setData({ready:!0})}},videoList:{type:Array,value:null,observer:function(e,t){if(e&&e.length){var i=this.data.list.length,o=this.exchangeDataStructure(e.slice(i)),a={};0===this.data.list.length&&(a.videoSrc=o[0].src,a.videoPoster=o[0].poster),o.forEach((function(e){var t="list["+i+++"]";a[t]=e})),this.setData(a)}}},hasMore:{type:Boolean,value:!0},theme:{type:String,value:"dark"},isHorizontalVideo:{type:Boolean,value:!1},canUseComment:{type:Boolean,value:!1,observer:function(e,t){if(e&&e!==t){if(this.getSysInfo(),!this.sysInfo||!this.sysInfo.screenHeight)return;var i=this.sysInfo;"iPhone"===i.brand&&"web"!==i.platform&&i.pixelRatio>=2&&i.screenHeight>=812&&this.data.canUseComment&&this.setData({progressBottom:"78px"})}}}},externalClasses:["fix-bottom-bar"],data:{ready:!1,videoHeight:0,list:[],transitionDuration:0,transitionFunction:"ease",videoIndex:0,translateY:0,videoTranslateY:0,videoSrc:"",videoPoster:"",isPaused:!1,autoplay:!0,loop:!0,videoZIndex:-1,videoOpactiy:0,isProgressBarTouched:!1,bothDirection:D.GestureDirection.All,horzDirection:D.GestureDirection.Horizontal,progressPercent:"0px",videoDurationStr:"",seekTimeStr:"",isSeekTimeTipShow:!1,isProgressSDKVerMatch:!0,progressBottom:"44px",logs:[]},lifetimes:{created:function(){this.getSysInfo()},attached:function(){if(this.getSysInfo(),this.sysInfo&&this.sysInfo.windowWidth){var e=this.sysInfo;this.videoContext=n.createVideoContext("video-id");var t=9*e.screenWidth/16+5;this.windowWidth=e.windowWidth,this.brightBarRight=e.windowWidth-this.brightBarCut,this.progressAvaliableWidth=this.brightBarRight-this.brightBarCut;var i={videoHeight:t};this.setData(i)}},ready:function(){},detached:function(){this.sendValidPlayLog(this.data.videoIndex),this.playStartTime>0&&this.dispatchMsg("videostatus",{status:"close",playedTime:this.getPlayedTime()}),this.videoTimingLogMap=[]}},methods:{getSysInfo:function(){this.sysInfo&&this.sysInfo.windowHeight||(this.sysInfo=x.getSysInfoSync(D.PageName.VerticalVideo))},getCurVideoInfo:function(){var e=this.data.videoIndex,t=this.data.list[e];return t?{index:e,encVid:t.encVid,src:t.playUrl,poster:t.coverUrl,durationStr:t.duration,sizeStr:t.size}:null},dispatchMsg:function(e,t){var i={component:"video-area"+(t.component?"_"+t.component:""),index:this.data.videoIndex,pos:"video-player"};delete t.component,this.dispatch(e,Object.assign(i,t))},playVideo:function(){this.videoContext&&"function"==typeof this.videoContext.play&&(this.videoContext.play(),this.setData({isPaused:!1}))},pauseVideo:function(){this.videoContext&&"function"==typeof this.videoContext.pause&&(this.videoContext.pause(),this.setData({isPaused:!0}))},stopVideo:function(){this.videoContext&&"function"==typeof this.videoContext.stop&&this.videoContext.stop()},videoPlay:function(){var e=this;this.dispatchMsg("videostatus",{status:"playing"}),this.playStartTime=Date.now(),this.setData({isPaused:!1}),this.videoTimingLogMap[this.data.videoIndex]||(this.videoTimingLogMap[this.data.videoIndex]={},this.dispatchMsg("videostatus",{status:"play-vv"})),this.isFirstRender&&(this.isFirstRender=!1,i((function(){e.setData({videoZIndex:3,videoOpactiy:1})}),100))},videoPause:function(){this.validPlayTime=this.validPlayTime+Date.now()-this.playStartTime,this.playStartTime=0},checkVideoPaused:function(){return this.data.isPaused},videoTimeUpdate:function(e){var t=this,o=this.videoTimingLogMap[this.data.videoIndex],a=e.detail,n=a.currentTime,s=n/a.duration;(this.progressTouchMoved||this.videoSwipeChanging||(this.updateProgress(s),this.updateSeekTimeTip(n)),o)&&(!o.percent5&&s>=.05?(o.percent5=!0,this.dispatchMsg("videostatus",{status:"percent5"})):o.percent5&&s<.05&&(o.percent5=!1),!o.percent30&&s>=.3?(o.percent30=!0,this.dispatchMsg("videostatus",{status:"percent30"})):o.percent30&&s<.3&&(o.percent30=!1),!o.percent80&&s>=.8?(o.percent80=!0,this.dispatchMsg("videostatus",{status:"percent80"})):o.percent80&&s<.8&&(o.percent80=!1),s>=.99?(o.percent100||(o.percent100=!0,this.dispatchMsg("videostatus",{status:"percent100",playedTime:this.getPlayedTime()}),this.sendValidPlayLog(this.data.videoIndex)),this.data.loop&&i((function(){t.dispatchMsg("videostatus",{status:"play-vv"}),o.validPlay=!1,t.playStartTime=Date.now()}))):o.percent100&&(o.percent100=!1))},videoEnded:function(){this.dispatchMsg("videostatus",{status:"ended"}),this.setData({isPaused:!this.data.loop})},videoWaiting:function(){this.dispatchMsg("videostatus",{status:"waiting"}),this.setData({isPaused:!1})},videoError:function(e){this.dispatchMsg("videostatus",{status:"error",errType:D.VideoError.VideoPlayError,errObj:e}),this.setData({isPaused:!1})},transitionEnd:function(){var e=this,t={transitionDuration:0,videoTranslateY:"0"},o=this.data.list[this.data.videoIndex];o.src===this.data.videoSrc&&o.poster===this.data.videoPoster||(t.videoSrc=o.src,t.videoPoster=o.poster),this.setData(t,(function(){clearTimeout(e.videoZIndexTimeoutId),e.videoZIndexTimeoutId=i((function(){e.setData({videoZIndex:3,videoOpactiy:1})}),150)})),this.videoContext||(this.videoContext=n.createVideoContext("video-id")),this.playVideo(),this.videoSwipeChanging=!1},exchangeDataStructure:function(e){return this.data.list[0]||this.setData({videoDurationStr:x.timeFormatter(e[0].duration)}),e.map((function(e){return{encVid:e.encVid,src:e.playUrl,poster:e.coverUrl,duration:x.timeFormatter(e.duration),size:(e.fileSize/1024/1024).toFixed(2)+"MB"}}))},gestureMoveStart:function(e){this.setData({transitionDuration:0})},gestureVerticalMove:function(e){var t=e.detail.y,i="calc("+-100*this.data.videoIndex+"vh + "+t+"px)";this.setData({translateY:i,videoTranslateY:t+"px"})},gestureTap:function(e){this.videoContext||(this.videoContext=n.createVideoContext("video-id")),this.data.isPaused?(this.dispatchMsg("uservideotap",{type:"play"}),this.playVideo(),this.hideBrightBar(0)):(this.dispatchMsg("uservideotap",{type:"pause",playedTime:this.getPlayedTime()}),this.pauseVideo(),this.sendValidPlayLog(this.data.videoIndex),this.showBrightBar())},gestureMovedown:function(e){var t=this,o=this.data.videoIndex;if(clearTimeout(this.videoZIndexTimeoutId),o>0){this.videoSwipeChanging=!0;var a=o-1,n={progressPercent:"0px",isProgressBarTouched:!1,isSeekTimeTipShow:!1,transitionDuration:this.transitionDuration,videoIndex:a,translateY:-100*a+"vh",videoTranslateY:"100vh"};this.setData(n),this.sendValidPlayLog(o),this.videoZIndexTimeoutId=i((function(){t.setData({videoZIndex:-1,videoOpactiy:0})}),100),this.vvRepeatCount&&(this.videoTimingLogMap[o]=void 0),this.dispatchMsg("videoplaychange",{direction:-1,index:a,playedTime:this.getPlayedTime()}),this.updateDurationShowTip(a)}else this.gestureVerticalRestore()},gestureMoveup:function(e){var t=this,o=this.data.videoIndex;if(clearTimeout(this.videoZIndexTimeoutId),o<this.data.list.length-1){this.videoSwipeChanging=!0;var a=o+1,n={progressPercent:"0px",isProgressBarTouched:!1,isSeekTimeTipShow:!1,transitionDuration:this.transitionDuration,videoIndex:a,translateY:-100*a+"vh",videoTranslateY:"-100vh"};this.setData(n),this.sendValidPlayLog(o),this.videoZIndexTimeoutId=i((function(){t.setData({videoZIndex:-1,videoOpactiy:0})}),100),this.vvRepeatCount&&(this.videoTimingLogMap[o]=void 0),this.dispatchMsg("videoplaychange",{direction:1,index:a,playedTime:this.getPlayedTime()}),this.updateDurationShowTip(a)}else this.gestureVerticalRestore()},gestureVerticalRestore:function(e){clearTimeout(this.videoZIndexTimeoutId),this.setData({transitionDuration:this.transitionDuration,translateY:-100*this.data.videoIndex+"vh",videoTranslateY:"0"})},sendValidPlayLog:function(e){var t=this.videoTimingLogMap[e];t&&!t.validPlay&&this.getValidPlayTime()>=3&&(this.dispatchMsg("videostatus",{status:"validPlay"}),t.validPlay=!0,this.validPlayTime=0)},getPlayedTime:function(){return this.playStartTime>0?Math.round((Date.now()-this.playStartTime)/1e3):0},getValidPlayTime:function(){return this.playStartTime>0?Math.round((this.validPlayTime+Date.now()-this.playStartTime)/1e3):Math.round(this.validPlayTime/1e3)},emptyFn:function(){},updateProgress:function(e){if(this.checkBrightBarShowing()){var t=e*this.windowWidth;t<=this.brightBarCut?t=this.brightBarCut:t>=this.brightBarRight&&(t=this.brightBarRight),e=t/this.windowWidth}this.setData({progressPercent:100*e+"%"})},updateSeekTimeTip:function(e){this.setData({seekTimeStr:e<1?"00:00":x.timeFormatter(Math.round(e))})},calcSeekTimeByPercent:function(e){return this.data.videoList[this.data.videoIndex].duration*e},seekVideoTo:function(e){if(x.isNumber(e)&&(this.videoContext||(this.videoContext=n.createVideoContext("video-id")),this.videoContext&&"function"==typeof this.videoContext.seek)){var t=e,i=this.data.videoList[this.data.videoIndex].duration;e<=0?t=0:e>=i&&(t=i-.5),this.videoContext.seek(t)}},updateProgressBarAndUpdateSeekTip:function(e){var t=this.calcPercentOfWidth(e);this.updateProgress(t);var i=this.calcSeekTimeByPercent(t);this.videoSeekTime=i,this.updateSeekTimeTip(i)},checkBrightBarShowing:function(){return this.data.isProgressBarTouched},showBrightBar:function(){clearTimeout(this.progressBarTimeout),this.setData({isProgressBarTouched:!0})},hideBrightBar:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;clearTimeout(this.progressBarTimeout),this.progressBarTimeout=i((function(){e.setData({isProgressBarTouched:!1}),e.dispatchMsg("progressbar",{action:"inactive"})}),t)},updateDurationShowTip:function(e){var t=this.data.list[e];this.setData({videoDurationStr:t.duration,seekTimeStr:"00:00"})},calcPercentOfWidth:function(e){return e<0?0:e>this.windowWidth?1:e/this.windowWidth},progressBarHorizatalMove:function(e){this.checkBrightBarShowing()&&this.updateProgressBarAndUpdateSeekTip(e.detail.clientX)},progressBarTouchStart:function(e){this.progressTouchMoved=!1},progressBarMoveStart:function(e){this.progressTouchMoved=!0,this.showBrightBar(),this.showSeekTimeTip()},progressBarTouchEnd:function(e){this.checkBrightBarShowing()&&(this.hideSeekTimeTip(),this.hideBrightBar(),this.progressTouchMoved&&this.videoSeekTime>-1&&(this.seekVideoTo(this.videoSeekTime),this.videoSeekTime=-1),this.progressTouchMoved=!1,this.checkVideoPaused()&&this.playVideo())},progressBarTap:function(e){this.checkBrightBarShowing()?(this.updateProgressBarAndUpdateSeekTip(e.detail.clientX),this.videoSeekTime>-1&&(this.seekVideoTo(this.videoSeekTime),this.videoSeekTime=-1),this.dispatchMsg("progressbar",{action:"click"})):(this.showBrightBar(),this.dispatchMsg("progressbar",{action:"active"}))},showSeekTimeTip:function(){this.setData({isSeekTimeTipShow:!0}),this.dispatchMsg("progressbar",{action:"drag"})},hideSeekTimeTip:function(){this.setData({isSeekTimeTipShow:!1})}}})})),window.define("52",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24");Component({properties:{expInfo:{type:Object,value:{}},showlist:{type:Array,value:[]},hideCMTip:{type:Boolean,value:!1},canUseComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1}},externalClasses:["fix-bottom-bar"],data:{},attached:function(){},detached:function(){},methods:{openPopupArticle:function(){this.triggerEvent("showArticle"),this.sendLog({pos:"open-article-btn",aciton:"click"})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)},onFeedback:function(e){this.triggerEvent("feedback",e.detail)},shareEvt:function(){this.triggerEvent("share")},openPdPage:function(e){var t=e.currentTarget.dataset.sid;this.sendLog({pos:"vertical-video-showlist-item",aciton:"click",sid:t}),L.jumpTo({appKey:x.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:t,from:"jingyan_sapp_vertical"}})},vertAddCommentHandler:function(){this.dispatch("videoComment",{action:"add"})}}})})),window.define("51",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("28");Component({behaviors:[L],properties:{canUseComment:{type:Boolean,value:!1}},data:{},attached:function(){},detached:function(){},methods:{sendLog:function(e){this.triggerEvent("sendlog",e)},likeSuccessHandler:function(){this.sendLog({pos:"vertical-video-like",action:"click",isCancel:0})},cancelLikeSuccessHandler:function(){this.sendLog({pos:"vertical-video-like",action:"click",isCancel:1})},vertCommentHandler:function(){this.dispatch("videoComment",{action:"open"})},emptyFn:function(){}}})})),window.define("134",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var P=e("24"),I=e("36"),C=e("34"),O=C.request,k=(C.sendLog,s());Component({properties:{article:{type:Object,value:null,observer:function(e){if(e){var t=e.expAll.viewNum,i=e.expAll.updateTime,o=e.expAll.serverTime,a=null;t&&(a={viewNumData:I.countFormatter(t)}),i&&(a||(a={}),a.updateTimeData=I.timespanFormatter(i,o)),a&&this.setData(a)}}},steps:{type:Array,value:[],observer:function(e){var t=this;if(e&&e.length){var o={},a=[];e.forEach((function(e,t){var i=e.step[0];1===i.images.length?(o[t]=[],o[t].push(i.images[0].imgUrl)):i.images.length>1&&(o[t]=[],i.images.forEach((function(e){return o[t].push(e.imgUrl)}))),i.goods&&i.goods.forEach((function(e){return a.push(e)}))})),this.setData({imgUrlList:o,goodsList:a},(function(){!t.data.feedList.length&&t.data.article&&t.data.article.expAll&&t.data.article.expAll.encEid&&(t.encEid=t.data.article.expAll.encEid,t.getAuthorGrassList(),t.getRecommentList({firstLoad:!0}),i((function(){t.calGoodsInfoPos()}),1200))}))}}},previewFlag:{type:Boolean,value:!1},scene:String,from:String,topBarHeight:{type:Number,value:0},riskShowComment:{type:Boolean,value:!1},riskGoUHome:{type:Boolean,value:!1}},winHeight:0,halfWinHeight:0,goodsRectsMap:[],externalClasses:["fix-bottom-bar"],loadingFlag:!1,noFeedData:!1,encEid:"",sameAuthorViewLogShown:!1,sameAuthorGrassTop:0,scrolledHeight:0,authorComp:null,data:{viewNumData:"",updateTimeData:"",swiperCurrent:0,favorOffsetRight:0,canUseTTS:!1,showFavorMaskTip:!1,showFavorBtn:!1,likeMotion:"",timestp:0,prevScreen:0,goodsList:[],imgUrlList:{},feedList:[],authorGrassList:[],noMore:!1,images:[]},lifetimes:{attached:function(){var e=I.getSysInfoSync();this.halfWinHeight=e.windowHeight/2,this.winHeight=e.windowHeight,this.setData({showFavorBtn:"baiduboxapp"===k.globalData.hostPlatform})},ready:function(){this.triggerEvent("componentready")}},methods:{pageScroll:function(e,t){var i=t+e,o=e+this.winHeight;this.scrolledHeight=i,this.sendNewScreenLog(e),this.checkVisible(),this.calcCompGoodInfoViewLog(e,t),!this.sameAuthorViewLogShown&&this.sameAuthorGrassTop<o&&this.checkAuthorGrassVisible(),this.authorComp?this.authorComp.pageScroll(e,t):this.authorComp=this.selectComponent("#grass-author-comp-id")},sendNewScreenLog:function(e){var t=Math.floor(e/this.halfWinHeight);t!==this.data.prevScreen&&(this.setData({prevScreen:t}),this.sendLog({pos:"user-action",action:"new-screen"}))},calcCompGoodInfoViewLog:function(e,t){this.calcGoodInfoViewLog(e,t)},calcGoodInfoViewLog:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.winHeight),o=this.goodsRectsMap.length,a=0;a<o;a++){var n=this.goodsRectsMap[a];if(n&&!n.logged&&(n.top>t&&n.top<i||n.bottom<i)){var s=this.data.goodsList[a],r=s.user_id,c=s.from;this.sendLog({pos:"step-goods-info",action:"show",goodsFrom:c,userId:r}),n.logged=!0}}},calGoodsInfoPos:function(){var e=this,t=n.createSelectorQuery().in(this),i=0;t.selectViewport().scrollOffset().selectAll(".exp-goods-info-area").boundingClientRect().exec((function(t){if(t&&2===t.length){i=0;var o=[];t[0]&&(i=t[0].scrollTop),t[1]&&(t[1].map&&t[1].map((function(e,t){o[t]={top:e.top+i,bottom:e.bottom+i,logged:!1}})),e.goodsRectsMap=o)}}))},goToActivePage:function(){this.sendLog({pos:"active-entrance",action:"click"}),I.jumpTo(P.PageName.WebviewZC,{url:"https://jingyan.baidu.com/activity/static/grass"})},goToEditor:function(){this.sendLog({pos:"editor-entrance",action:"click"}),I.jumpTo(P.PageName.Editor)},onFollowChanged:function(e){this.triggerEvent("followchanged",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({from:"zhongcao"},e.detail))},getPageInfo:function(){},onFeedback:function(e){this.triggerEvent("changefeedback",e.detail)},onBottomShare:function(e){var t=this,i={};this.data.article&&this.data.article.expAll&&(i=this.data.article.expAll),this.sendLog({pos:"bottom-bar-share",action:"click"}),n.openShare({title:i.title,content:i.content.brief[0],path:I.getPagePath(P.PageName.Article,{eid:i.encEid,scene:this.data.scene,from:this.data.from}),imageUrl:i.content.briefImage[0].imgUrl,success:function(){t.sendLog({pos:"bottom-bar-share",action:"success"}),t.triggerEvent("sharefeedback")}})},reachBottom:function(){this.getRecommentList()},getAuthorGrassListViewTop:function(){var e=this,t=n.createSelectorQuery();I.poll((function(e,i){t.select("#js-same-author-grass").boundingClientRect((function(t){t?e(t):i()})).exec()}),(function(t,i){t||(e.sameAuthorGrassTop=i.top+e.scrolledHeight)}))},checkAuthorGrassVisible:I.throttle((function(){var e=this.selectComponent("#author-grass-list");e&&e.checkVisible()})),changeSameAuthorGrassShown:function(e){var t=e.detail;this.sameAuthorViewLogShown||(this.sameAuthorViewLogShown=!(!t.ids||!t.ids.length))},getAuthorGrassList:function(){var e=this,t=this.encEid;t&&O({url:I.getApiUrl("authorGrassList"),data:{eid:t},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.grassList||[];o&&o.length&&(o.forEach((function(e){delete e.authorInfo})),e.setData({authorGrassList:o},(function(){e.getAuthorGrassListViewTop()})))}},fail:function(){}})},getRecommentList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.encEid;this.loadingFlag||this.data.noMore||this.noFeedData||!i||(this.loadingFlag=!0,O({url:I.getApiUrl("grassRecommendList"),data:{eid:i},complete:function(){e.loadingFlag=!1},success:function(i){var o=i.data;if(0===o.errNo){var a=o.data.recommendList||[];a&&a.length?e.changeFeedList(a):t.firstLoad?e.noFeedData=!0:e.setData({noMore:!0})}},fail:function(){}}))},changeFeedList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setData({feedList:this.data.feedList.concat(e.slice(0))})},gotoGrassHome:function(){this.sendLog({pos:"goto-grass-home-btn",action:"click"}),I.jumpTo(P.PageName.HomeGrass)},favorGrassHandler:function(){var e={showFavorMaskTip:!0};if(!this.data.favorOffsetRight){var t=I.getTopBarMenuInfoCache();t&&t.width&&t.menuMarginRight&&(e.favorOffsetRight=t.menuMarginRight+t.width/2+5)}this.setData(e),this.sendLog({pos:"favor-grass-btn",action:"click"})},hideFavorMaskTip:function(){this.setData({showFavorMaskTip:!1})},checkVisible:function(){var e=this.selectComponent("#card-list");e&&e.checkVisible()},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){e.component?e.component="zhongcao-page_"+e.component:e.component="zhongcao-page",this.triggerEvent("sendlog",e)}},messages:{}})})),window.define("90",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36"),e("24");Component({properties:{images:{type:Array,value:[]}},externalClasses:["no-radius","class-margin"],data:{swiperCurrent:0},lifetimes:{attached:function(){},ready:function(){}},methods:{swiperChange:function(e){var t=e.detail.current;this.setData({swiperCurrent:t}),this.sendLog({pos:"grass-swiper",action:"swipe",index:t})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)},clickImage:function(e){a.previewImage({current:e.currentTarget.dataset.src,urls:this.data.images})}}})})),window.define("88",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";e("36"),e("24");Component({properties:{desc:{type:String,value:""}},data:{},methods:{}})})),window.define("61",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("36"),C=e("24");Component({properties:{goods:{type:Object,value:null,observer:function(e,t){e&&e.length&&this.setData({goodsList:e.map((function(e){var t=["tbopen://m.taobao.com/tbopen/index.html?&action=ali.open.nav&module=h5&bootImage=0&source=alimama&packageName=com.baidu.searchbox&h5Url=",encodeURIComponent(e.clickUrl),"&bc_fl_src=baidu_jingyan_smartapp"];return P(P({},e),{},{tbAppSchemeUrl:t.join("")})}))})}},tpl:{type:String,value:""},scene:{type:String,value:"",observer:function(e,t){e!==t&&(I.blockOpenApp(e)?this.setData({isOpenTbApp:!1}):this.setData({isOpenTbApp:!0}),this.checkIsAndroidInstallApp())}}},winHeight:0,goodsRectsMap:[],isAndroid:!1,data:{launchAppInfo:{},downloadAppUrlIos:"https://apps.apple.com/cn/app/%E6%89%8B%E6%9C%BA%E6%B7%98%E5%AE%9D-%E6%B7%98%E5%88%B0%E4%BD%A0%E8%AF%B4%E5%A5%BD/id387682726",isOpenTbApp:!0,goodsList:[]},attached:function(){var e=this,t=I.getSysInfoSync();this.winHeight=t.windowHeight,this.isAndroid="android"===t.platform,I.blockOpenApp(this.data.scene)&&this.setData({isOpenTbApp:!1}),this.checkIsAndroidInstallApp(),I.checkAPPVersionNotLessThan("12.0")&&I.checkSDKVersionNotLessThan("3.230.2")&&this.setData({launchAppInfo:{appkey:"baichuanAppKey",appName:"baichuanAppName",packageName:"packageName",backURL:"pageScheme"}}),i((function(){e.calGoodsInfoPos()}),1e3)},methods:{launchFail:function(e){this.sendLog({action:"error",msgInfo:"launchFail, "+JSON.stringify(e.detail)}),n.showToast({title:"打开失败",content:e.detail.errMsg})},clickForLog:function(e){var t=e.currentTarget.dataset.index,i=this.data.goods[t],o=i.user_id,a=i.from,n=i.gid;this.sendLog({action:"click",goodsFrom:a,userId:o,gid:n})},clickGoodsLink:function(e){var t=e.currentTarget.dataset.link;t=I.decodeUriComponent(t),this.clickForLog(e),I.jumpTo(C.PageName.Webview,{url:t})},calcGoodInfoViewLog:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.winHeight),o=this.goodsRectsMap.length,a=0;a<o;a++){var n=this.goodsRectsMap[a];if(!n.logged&&(n.top>t&&n.top<i||n.bottom<i)){var s=this.data.goods[a],r=s.user_id,c=s.from;this.sendLog({action:"show",goodsFrom:c,userId:r}),n.logged=!0}}},calGoodsInfoPos:function(){var e=this,t=n.createSelectorQuery().in(this),i=0;t.selectViewport().scrollOffset().selectAll(".js-exp-goods-info-box").boundingClientRect().exec((function(t){if(t&&2===t.length&&(i=0,t[0]&&(i=t[0].scrollTop),t[1]&&t[1].map)){var o=t[1].map((function(e){return{top:e.top+i,bottom:e.bottom+i,logged:!1}}));e.goodsRectsMap=o}}))},checkIsAndroidInstallApp:function(){var e=this;this.isAndroid&&n.isAppInstalled({name:"com.taobao.taobao",success:function(t){t.hasApp||e.setData({isOpenTbApp:!1})},fail:function(e){}})},sendLog:function(){var e=P({pos:"step-goods-info"},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});this.data.isOpenTbApp&&(e.isOpenTbApp="1"),this.triggerEvent("sendlog",e)}}})})),window.define("91",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x=e("24");Component({properties:{title:{type:String,value:"百度经验·西番"},opacity:{type:Number,value:1},bgColor:{type:String,value:"#fff",observer:function(e,t){/transparent|rgba\(0,\s*0,\s*0,\s*0\)|rgb\(0,\s*0,\s*0\)/gi.test(e)?(this.setData({showBottomBorder:!1}),a.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"})):this.setData({showBottomBorder:!0})}},isTabPage:{type:Boolean,value:!1},isEdit:{type:Boolean,value:!0},topBarTips:{type:Object,value:{}},showSearch:{type:Boolean,value:!0},exitXcx:{type:Boolean,value:!1},fromJingyanSwan:{type:Boolean,value:!0,observer:function(e,t){}}},data:{showBottomBorder:!0,statusBarHeight:0,navBarHeight:0,contentHeight:0,contentPaddingTop:0,contentPaddingBottom:0,titleWrapWidth:0,isNV228Newer:!0,isGotoHomeShow:!1},lifetimes:{created:function(){},attached:function(){var e=a.getMenuButtonBoundingClientRect(),t=L.getSysInfoSync("app");if(t){var i,o,n,s=t.statusBarHeight,r=t.navigationBarHeight;n=o=(r-e.height)/2,i=r;var c=t.windowWidth-e.right,d=e.width+2*c,l=t.windowWidth-2*d,h=L.checkSwanNativeVersionNotLessThan("2.28.0");this.setData({titleWrapWidth:l,statusBarHeight:s,navBarHeight:r,contentHeight:i,contentPaddingTop:o,contentPaddingBottom:n,isNV228Newer:h}),this.updateBarIcon(this.data.isTabPage),e.menuMarginRight=c,L.setTopBarMenuComputedInfo(e)}},ready:function(){this.triggerEvent("componentready")},detached:function(){}},methods:{updateBarIcon:function(e){var t=!1,i=[],o={action:"show"},a=getCurrentPages().map((function(e,t){return"/"+e.route})),n=[x.PagePath.HomeGrass,x.PagePath.Home];e||a.some((function(e){return n.includes(e)}))||(t=!0,i.push("goto-home-btn")),this.setData({isGotoHomeShow:t}),i.length&&(o.mergeInfo=JSON.stringify([{field:"pos",delimiter:","}]),o.pos=i.join(","),this.sendLog(o))},getTopBarHeight:function(){return this.data.contentHeight+this.data.statusBarHeight},gotoHome:function(){this.sendLog({pos:"goto-grass-home-btn",action:"click"}),L.jumpTo(x.PageName.HomeGrass)},goBack:function(){this.sendLog({pos:"goback-btn",action:"click"}),this.data.exitXcx?a.exit():a.navigateBack()},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",Object.assign({component:"zhongcao-top-bar",isNV228Newer:this.data.isNV228Newer?1:0},e))}}})})),window.define("82",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{isWeb:{type:Boolean,value:!1},spotClass:{type:String,value:"absolute"},fixedNumTop:{type:Number,value:67},curNum:{type:Number,value:1},stepCount:{type:Number,value:0},isVerticalVideo:{type:Boolean,value:!1}}})})),window.define("153",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("24"),C=e("36"),O=e("34"),k=O.request,E=O.sendLog,F=s();Page({kmAdHeight:55,kmAdShowLogMap:[],processedOption:null,extra:"",adEnded:!0,offset:[],finishFlag:!1,videoLogMap:[],feedItemPostPvMap:[],feedIndex:0,fromAnchor:"",from:"",query:"",scene:"",startTime:0,pageStartTime:0,playStartTime:0,validPlayTime:0,validFlag:!1,nextVideoListOffset:0,totalVideosLength:0,seedVid:"",itemHeight:0,videosSet:new Set,hasLive:!1,videoHeight:0,winHeight:0,data:{feeds:[],src:"",playingIdx:-1,top:-999,noMoreHeight:0,encEid:"",isError:!1,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},currPageURL:"",pageUUID:"",prevScreen:0,isShowFeedVideoFlag:!1,riskGoUHome:!1,systemInfo:{},hasMore:!0,hasFollowList:[],adUpdateTime:Date.now(),jyclientParams:"",videoAdRequest:C.getApiUrl("videoAdRequest")},onShow:function(){this.startTime=(new Date).getTime()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round(((new Date).getTime()-this.startTime)/1e3)})},onInit:function(e){this.processedOption||(this.processedOption=this.processOption(e),this.getFeedList({hasMore:!0,encEid:this.processedOption.encEid}))},onLoad:function(e){this.processedOption||(this.processedOption=this.processOption(e),n.showLoading({title:"加载中"}),this.getFeedList({hasMore:!0,encEid:this.processedOption.encEid}));var t=C.getSysInfoSync(I.PageName.VideoFeed);this.winHeight=t.windowHeight,this.setData({encEid:this.processedOption.encEid,currPageURL:C.getPagePath(I.PageName.VideoFeed,{eid:this.processedOption.encEid}),systemInfo:{isIOS:t.system.toLowerCase().indexOf("ios")>-1,isFixVersion:!!/^11\.(\d)+/.test(t.version)}})},onReady:function(){var e=(new Date).getTime();this.pageStartTime=e,this.setData({pageUUID:e+Math.random()}),this.sendLog({pos:"before",action:"pv"})},processOption:function(e){var t={encEid:e.eid};return e.index&&(this.feedIndex=+e.index),e.query&&(this.query=e.query),e.scene&&(this.scene=e.scene),e.fromAnchor&&(this.fromAnchor=e.fromAnchor),e.from&&(this.from=e.from),e.extra&&(this.extra=C.decodeUriComponent(e.extra)),t},getFeedList:function(e){var t=this;if((e=e||this.data).hasMore){var i={eid:e.encEid};this.fromAnchor&&(i.fromAnchor=this.fromAnchor),this.from&&(i.from=this.from),this.extra&&(i.extra=this.extra),i.offset=this.nextVideoListOffset,0===i.offset&&(i.isPv=1),k({url:C.getApiUrl(I.PageName.VideoFeed),data:i,success:function(e){if(n.hideLoading(),404!==e.statusCode){var i=e.data;if(0===i.errNo){if(i.data.videoList&&i.data.videoList.length>0){t.nextVideoListOffset=i.data.offset+i.data.limit,0===i.data.offset&&(t.seedVid=i.data.seedVid,t.totalVideosLength=i.data.total,t.videosSet=new Set);var o=!0;t.nextVideoListOffset>=t.totalVideosLength&&(o=!1);var a=[],s=0;i.data.videoList.forEach((function(e,o){if(i.data.liveData.length&&0===i.data.offset&&2===o){var a=i.data.liveData[0];a.type="live",i.data.videoList.splice(2,0,a),t.hasLive=!0}})),i.data.videoList.forEach((function(e,i){t.videosSet.has(e.feedVid)||(a.push(e),t.videosSet.add(e.feedVid),s++)}));var r=t.data.feeds.concat(a),c=a.map((function(e){return{uid:e.authorInfo?e.authorInfo.uid:"",hasFollow:e.hasFollow,canShow:e.authorInfo&&e.authorInfo.uid}})),d=t.data.hasFollowList.concat(c);t.setData({feeds:r,hasMore:o,hasFollowList:d}),0===i.data.offset?t.successHandler():t.uiOffsetHandler(s),t.sendLog({pos:"after",action:"pv"})}else 0===i.data.offset&&t.setData({isError:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}});if(i.data.expRiskControl){var l=!!i.data.expRiskControl.sappJingyanUHome;t.setData({riskGoUHome:l})}}else t.setData({isError:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}})}else t.setData({isError:!0,errInfoObj:{is404Error:!0,btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}})},fail:function(e){n.hideLoading(),t.setData({isError:!0,errInfoObj:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})}},successHandler:function(){var e=this.data.feeds[0],t=JSON.stringify({eid:this.data.encEid,feedVid:e.feedVid,title:e.title,bdenvmode:F.globalData.privacyMode,iadLDL:F.globalData.iadLDL,query:this.query,scene:this.scene});this.videoLogMap[0]||(this.videoLogMap[0]={}),this.setData({isShowFeedVideoFlag:!0,src:e.playUrl,top:0,playingIdx:0,adUpdateTime:Date.now(),jyclientParams:t}),this.initFeedOffset(),this.sendLog({pos:"video-feed-item",action:"auto-play",index:0,feedVid:e.feedVid,videoDuration:e.duration||0})},initFeedOffset:function(){var e=this;C.poll((function(e,t){n.createSelectorQuery().selectAll(".video-feed").boundingClientRect((function(i){i&&i.length?e(i):t()})).exec()}),(function(t,o){if(t);else{var a,s,r=[],c=e.feedIndex;o.forEach((function(e,t){0===t&&(a=e.bottom-e.top),r.push(e.top)})),e.itemHeight=a,e.offset=r,s=e.winHeight-1.5*a,e.setData({noMoreHeight:s}),e.initFeedLogMap(),e.hasLive&&c>=2&&c++,i((function(){n.pageScrollTo({scrollTop:e.offset[c]})}),60)}}))},changeVideoOffsetList:function(e){for(var t=this.offset.length,i=e+1;i<t;i++)this.offset[i]+=this.kmAdHeight},initFeedLogMap:function(){var e=this;C.poll((function(e,t){n.createSelectorQuery().select(".feed-video-container").boundingClientRect((function(i){i?e(i):t()})).exec()}),(function(t,o){t||(e.videoHeight=o.height,e.feedItemPostPvMap=e.offset.map((function(e){return{top:e,bottom:e+o.height,logged:!1}})),i((function(){e.calcVideoShowLog(e.offset[e.feedIndex])}),50))}))},uiOffsetHandler:function(e){if(this.offset&&this.offset.length>2)for(var t=0;t<e;t++){var i=this.offset[this.offset.length-1]+this.itemHeight;this.offset.push(i),this.feedItemPostPvMap.push({top:i,bottom:i+this.videoHeight,logged:!1})}},onReachBottom:function(e){this.getFeedList()},onPageScroll:C.throttle((function(e){var t=this.offset.length;if(!(t<1)){for(var i=e.scrollTop,o=this.winHeight,a=this.data,n=a.playingIdx,s=a.prevScreen,r=a.feeds,c=0;c<t;c++)if(this.calcItemCanPlay(c,i)){"live"===r[c].type&&c++,c!==n&&(this.sendLog({pos:"video-feed-item",action:"auto-play",index:c,playedTime:this.getPlayedTime(),prevFeedVid:r[n].feedVid,feedVid:r[c].feedVid,videoDuration:r[c].duration}),this.changePlay(c));break}Math.floor(i/(o/2))!==s&&(this.setData({prevScreen:Math.floor(i/(o/2))}),this.sendLog({pos:"user-action",action:"new-screen"})),this.calcVideoShowLog(i)}}),100),onClickCover:function(e){var t=this.data.playingIdx,i=e.detail.index;n.pageScrollTo({scrollTop:this.offset[i]});var o=this.data.feeds[i],a=this.data.feeds[t];this.sendLog({pos:"video-feed-item",action:"click-play",index:i,playedTime:this.getPlayedTime(),prevFeedVid:a.feedVid,feedVid:o.feedVid,videoDuration:o.duration})},onClickLiveCover:function(e){var t=e.detail.index,i=this.data.feeds[t];this.sendLog({pos:"video-feed-item-live",action:"click",liveSrcType:i.liveSrcType,roomid:i.roomid}),C.jumpTo(I.PageName.LiveRoom,{roomid:i.roomid,liveSrcType:i.liveSrcType,type:"videofeed"})},playHandler:function(){this.adEnded&&(this.playStartTime=(new Date).getTime())},pauseHandler:function(){var e=this.data.playingIdx,t=this.data.feeds[e];this.sendLog({pos:"video-feed-item",action:"video-stop",index:e,playedTime:this.getPlayedTime(),videoDuration:t.duration||0,feedVid:t.feedVid}),this.validPlayTime=this.validPlayTime+(new Date).getTime()-this.playStartTime,this.playStartTime=0},timeupdateHandler:function(e){if(this.adEnded){var t=e.detail;t.currentTime>=3&&!this.validFlag?this.validFlag=!0:this.validFlag&&t.currentTime<3&&(this.validFlag=!1);var i=this.data.playingIdx,o=this.data.feeds[i],a=o.feedVid;if(this.logPlayedPercent(t.currentTime,t.duration,i,a),o.kmAd&&t.currentTime>3&&!this.kmAdShowLogMap[i]){this.kmAdShowLogMap[i]=!0;var n={};n["feeds[".concat(i,"].kmAd.canKmAdShow")]=!0,this.setData(n),this.changeVideoOffsetList(i);var s="video-feeds-item-kmad";"live"===o.type&&(s="video-feed-item-live-item-kmad"),this.sendLog({pos:s,action:"show",index:i,feedVid:a,hasKmAd:o.kmAd?1:0,uid:o.authorInfo&&o.authorInfo.uid})}}},endedHandler:function(){if(this.adEnded){var e=this.data.playingIdx,t=this.data.feeds[e];this.sendLog({pos:"video-feed-item",action:"play-end-100",index:e,playedTime:this.getPlayedTime(),feedVid:t.feedVid,videoDuration:t.duration||0}),this.sendValidPlayLog(e),this.adEnded=!1,this.playStartTime=0}},adEndAutoPlay:function(){this.adEnded=!0;var e=this.data.playingIdx+1;if(e<this.data.feeds.length){n.pageScrollTo({scrollTop:this.offset[e]});var t=this.data.feeds[e];this.sendLog({pos:"video-feed-item",action:"auto-play",index:e,feedVid:t.feedVid,videoDuration:t.duration||0})}},calcItemCanPlay:function(e,t){var i=this.videoHeight,o=this.winHeight,a=this.offset[e]+i/2;return a>t&&a+i<o+t},logPlayedPercent:function(e,t,i,o){var a=this.videoLogMap[i],n=e/t,s={pos:"video-feed-item",index:i,feedVid:o};a&&(!a.percent30&&n>=.3?(a.percent30=!0,this.sendLog(P(P({},s),{},{action:"play-end-30"}))):a.percent30&&n<.3&&(a.percent30=!1),!a.percent80&&n>=.8?(a.percent80=!0,this.sendLog(P(P({},s),{},{action:"play-end-80"}))):a.percent80&&n<.8&&(a.percent80=!1))},sendValidPlayLog:function(e){if(this.validFlag&&this.getValidPlayTime()>=3){var t=this.data.feeds[e];t&&this.sendLog({action:"valid-play",feedVid:t.feedVid})}this.validPlayTime=0},calcVideoShowLog:function(e){var t=e+this.winHeight,i=this.feedItemPostPvMap,o=i.length;if(o)for(var a=0;a<o;a++){var n=i[a],s="video-feeds";if(!n.logged&&(n.top>e&&n.top<t||n.bottom>e&&n.bottom<t)){var r=this.data.feeds[a];"live"===r.type&&(s="video-feed-item-live"),this.sendLog({pos:s,action:"show",index:a,isFirstShow:!0,feedVid:r.feedVid,liveSrcType:r.liveSrcType,roomid:r.roomid,hasKmAd:r.kmAd?1:0,uid:r.authorInfo&&r.authorInfo.uid}),this.sendFollowBtnShowIfNeed(a),n.logged=!0}}},errorHandler:function(e){var t=this.data.playingIdx,i=this.data.feeds[t];this.sendLog({action:"play-err",index:t,feedVid:i?i.feedVid:"",errObj:JSON.stringify(e||{})})},changePlay:function(e){var t=this;this.adEnded=!0;var i=this.data.playingIdx;this.videoLogMap[e]||(this.videoLogMap[e]={});var o=JSON.stringify({eid:this.data.encEid,feedVid:this.data.feeds[e].feedVid,title:this.data.feeds[e].title,iadLDL:F.globalData.iadLDL,query:this.query,scene:this.scene});this.data.feeds[e].playUrl&&this.setData({src:this.data.feeds[e].playUrl,top:this.offset[e],playingIdx:e,adUpdateTime:Date.now(),jyclientParams:o},(function(){t.sendValidPlayLog(i),t.validFlag=!1})),this.data.systemInfo.isIOS&&this.data.systemInfo.isFixVersion&&this.setData({isShowFeedVideoFlag:!1},(function(){t.setData({isShowFeedVideoFlag:!0})}))},onShareAppMessage:function(){return{title:this.data.feeds[0].title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:C.getPagePath(I.PageName.VideoFeed,{eid:this.data.encEid}),imgUrl:this.data.feeds[0].coverUrl}},onUnload:function(){var e=this.data.playingIdx,t=this.data.feeds[e];this.sendLog({pos:"page",action:"user-time",index:e,playedTime:this.getPlayedTime(),videoDuration:t?t.duration:0,feedVid:t?t.feedVid:"",userTime:Math.round(((new Date).getTime()-this.pageStartTime)/1e3)}),this.sendValidPlayLog(e)},getPlayedTime:function(){return this.playStartTime>0?Math.round(((new Date).getTime()-this.playStartTime)/1e3):0},getValidPlayTime:function(){return this.playStartTime>0?(this.validPlayTime+(new Date).getTime()-this.playStartTime)/1e3:this.validPlayTime/1e3},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){E(Object.assign({page:"videoFeed",url:C.getPagePath(I.PageName.VideoFeed),encEid:this.data.encEid,seedVid:this.seedVid,pageUUID:this.data.pageUUID,fromAnchor:this.fromAnchor,from:this.from,TimeOnPage:Math.round(((new Date).getTime()-this.pageStartTime)/1e3),videoProducer:"jingyan",pos:"video-feed-item",extra:this.extra},e))},adErrorHandler:function(e){},adLoadHandler:function(e){},adCloseHandler:function(e){},adStatusHandler:function(e){this.playStartTime=0,"videoend"===e.status&&this.adEndAutoPlay()},onFollowChanged:function(e){if(e&&e.detail){if(e.detail.uid){var t=this.data.hasFollowList;t.length>0&&(t.forEach((function(t,i,o){t.uid&&t.uid===e.detail.uid&&(t.hasFollow=e.detail.canFollow?0:1)})),this.setData({hasFollowList:t})),this.syncFollowData(e.detail.uid,e.detail.canFollow)}this.sendLog({action:"click",pos:"follow-btn",cancleFollow:e.detail.canFollow?1:0})}},syncFollowData:function(e,t){F.globalTmplData.followSyncData&&F.globalTmplData.followSyncData.uid&&F.globalTmplData.followSyncData.uid===e&&(F.globalTmplData.followSyncData.canFollow=t)},sendFollowBtnShowIfNeed:function(e){this.data.hasFollowList[e]&&this.data.hasFollowList[e].canShow&&this.sendLog({pos:"follow-btn",action:"show",index:e,isFirstShow:!0,feedVid:this.data.feeds[e].feedVid})}})})),window.define("126",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36"),x={left:"left",right:"right"};Component({properties:{itemData:{type:Object},itemIndex:{type:Number},riskGoUHome:{type:Boolean,value:!1},itemHasFollow:Object},data:{durationData:"",viewData:""},methods:{btnClick:function(e){var t=e.currentTarget.dataset.pos,i=e.currentTarget.dataset.link;this.sendLog({pos:"kmad-btn",component:"video-feed-item",action:"click",uid:this.data.itemData&&this.data.itemData.authorInfo&&this.data.itemData.authorInfo.uid,vid:this.data.itemData&&this.data.itemData.feedVid,btnPos:x[t]}),L.resourceJumpHandler({url:i})},clickCover:function(e){"live"===(e.currentTarget.dataset.type||"")?this.triggerEvent("clicklivecover",{index:this.data.itemIndex}):this.triggerEvent("clickcover",{index:this.data.itemIndex})},onFollowChanged:function(e){this.triggerEvent("followchanged",e.detail)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){this.triggerEvent("sendlog",e)}},lifetimes:{attached:function(){this.setData({durationData:L.timeFormatter(this.data.itemData.duration),viewData:L.countFormatter(this.data.itemData.videoView)})}}})})),window.define("150",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";n();var L=e("24"),x=e("36"),D=e("34"),P=(D.request,D.sendLog);Page({data:{url:"",encSid:"",startTime:0,winHeight:0,pageStartTime:0,pageUUID:"",prevScreen:0},onLoad:function(e){var t=x.getSysInfoSync();this.setData({encSid:e.sid,url:"https://jingyan.baidu.com/showlist/detail/"+e.sid,winHeight:t.windowHeight})},onShow:function(){this.setData({startTime:(new Date).getTime()})},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round(((new Date).getTime()-this.data.startTime)/1e3)})},onReady:function(){var e=(new Date).getTime();this.setData({pageStartTime:e,pageUUID:e+Math.random()})},onPageScroll:function(e){Math.floor(e.scrollTop/(this.data.winHeight/2))!==this.data.prevScreen&&(this.setData({prevScreen:Math.floor(e.scrollTop/(this.data.winHeight/2))}),this.sendLog({pos:"user-action",action:"new-screen"}))},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round(((new Date).getTime()-this.data.pageStartTime)/1e3)})},sendLog:function(e){P(Object.assign({page:"showlist",url:x.getPagePath(L.PageName.Showlist),encSid:this.data.encSid,pageUUID:this.data.pageUUID,TimeOnPage:Math.round(((new Date).getTime()-this.data.pageStartTime)/1e3)},e))}})})),window.define("151",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7"),D=x(e("14")),P=x(e("6")),I=e("24"),C=e("36"),O=e("34");function k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(Object(i),!0).forEach((function(t){(0,P.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var F=s();Page({promiseList:[],extraTopFixedHeight:0,scrollTabShouldFixed:!1,articleHeaderComp:null,tabScrollToFixedDistance:0,hasNoAd:[],fixedMixBannerHeight:0,processedOption:null,tabItemRect:null,tabScrollLeftMap:{},tabItemMarginLeft:48,scrollTopMap:{},forceScrollId:0,pageScrollTopValue:0,videoHeight:0,imgFullscreenListMapCache:{},isTouching:!1,touchMoveBeginY:0,touchHideBackToDetailTimeoutId:0,isPrefetchRelrecList:!1,isNomoreRelrecData:!1,isAjaxGetRelrec:!1,relrecTime:0,prevScreen:0,startTime:0,isTabTap:!1,stepContentViewportH:0,disabledMoreRelrec:!0,maxGoodsTop:0,stepWrapHeight:[],mixBannerInfoList:[],bottomBarHeight:50,minHeight:0,data:{shouldGray:!1,canTopTipsRender:!1,scrollTabFixedTop:0,mixBannerStep:null,isFirstBannerLog:!0,scene:"",fixedSpotBizSlotName:"",fixedSpotJumpTo:null,isWeb:!1,hasVideo:!1,pageStartTime:0,pageUUID:"",expAll:{},mixBanner:{},encEid:"",isArticleErr:!1,articleErrInfo:null,currPageRoute:"",winHeight:0,winWidth:0,showIndex:0,shouldBackToDetailRender:!0,backToDetailHide:!1,scrollTabShouldFixed:!1,stepTabBeforeMaskShow:!1,stepTabAfterMaskShow:!0,fixedScrollTop:0,stepTabList:[],scrollTabLeft:0,stepList:[],rightPicHeight:0,leftPicHeight:0,leftFeeds:[],rightFeeds:[],maxHeight:0,relrecTip:"正在加载数据",adData:[],topTips:{},picindex:0,word:"",initialIndex:0,imgCanShow:!1,riskShowComment:!1,riskGoUHome:!1,isDynamicLibAd:!1,voiceInfo:{},coverImage:"",playIndex:0},onInit:function(e){this.sendStepsRequest(e),this.getStepAsyncData()},onLoad:function(e){this.processedOption||(this.sendStepsRequest(e),n.showLoading({title:"加载中"}));var t=(0,C.getSysInfoSync)(I.PageName.Steps);this.setData({scene:F.globalData.scene,winHeight:t.windowHeight,winWidth:t.windowWidth,currPageRoute:(0,C.getPagePath)(I.PageName.Steps)}),this.videoHeight=Math.ceil(9*t.windowWidth/16),this.stepContentViewportH=t.windowHeight-89;this.fixedMixBannerHeight=.5526*(t.windowWidth-34),this.minHeight=this.stepContentViewportH},onShow:function(e){this.startTime=(new Date).getTime(),this.setData({scene:F.globalData.scene,isWeb:"web"===F.globalData.platform})},onHide:function(e){n.hideLoading(),n.hideToast(),this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round(((new Date).getTime()-this.startTime)/1e3)})},onUnload:function(e){n.hideLoading(),n.hideToast(),this.relrecTime&&(this.sendLog({pos:"relrec-tab",action:"user-time",userTime:Math.round(((new Date).getTime()-this.relrecTime)/1e3)}),this.relrecTime=0),this.sendLog({pos:"page",action:"user-time",userTime:Math.round(((new Date).getTime()-this.data.pageStartTime)/1e3)})},onReady:function(){var e=(new Date).getTime();this.setData({pageStartTime:e,pageUUID:String(e+Math.random())}),this.sendLog({pos:"before",action:"pv"})},sendStepsRequest:function(e){this.processedOption=this.processOption(e),(0,O.getStepsPageData)({query:e,scene:F.globalData.scene}).then(this.stepDataSuccessCallBack()).catch(this.stepDataFailCallBack())},stepDataSuccessCallBack:function(){var e=this;return function(t){if(n.hideLoading(),404===t.statusCode)e.setData({isArticleErr:!0,articleErrInfo:{is404Error:!0,btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"来晚一步，这篇经验已经消失了",btnText:"返回首页",btnText2:"搜索其他经验"}},(function(){e.removeSkeleton()}));else{var o=t.data;if(0===o.errno){var a=o.data,s=a.ExpAll;if(s&&a.AlbumStep){var r=s.videoFeed&&!!s.videoFeed.seedVid||s.hasVideo,c=(0,C.getTrackParams)();e.sendLog(E({pos:"after",action:"pv",hasVideo:r,hasVideoFeed:s.hasVideoFeed,showTabIndex:e.data.showIndex,videoProducer:"jingyan"},c)),e.videoHeight=r?e.videoHeight:0;var d=e.changeDataStruct(a.AlbumStep),l=a.expRiskControl||{},h=!!l.sappJingyanComment,p=!!l.sappJingyanUHome;e.minHeight=e.minHeight-e.videoHeight;var u=a.AlbumStep.currentTabIndex,g=u>0?u-1:0,f={hasVideo:r,riskShowComment:h,riskGoUHome:p,isDynamicLibAd:"pass"===(a.abTest||{}).adComponent,expAll:s,stepTabList:d.stepTabList,stepList:d.stepList.slice(0,g+1)},m=Date.now();if(e.setData(f,(function(){var t=Date.now()-m;e.removeSkeleton(),e.sendLog({pos:"perf-analyze",action:"set-data",setDataTime:t});var o={stepList:d.stepList};if(u>0){var s=u-1;o.showIndex=s,o.initialIndex=s,o.scrollTabIntoView=0===s?"":(0,C.stringBuilder)("t",s)}e.setData(o,(function(){var t=E(E({},a.adData&&a.adData.length&&{adData:a.adData}),a.mixBanner&&a.mixBanner.cover&&{mixBanner:a.mixBanner});if(a.extra&&a.extra.spot&&a.extra.spot.type){var o=encodeURIComponent(JSON.stringify(a.extra.spot));e.data.fixedSpotBizSlotName!==o&&(t.fixedSpotBizSlotName=o,t.fixedSpotJumpTo=a.extra.spot)}a.extra&&a.extra.toGray&&1==+a.extra.toGray.sappAlbum&&(t.shouldGray=!0),e.setData(t,(function(){var t=a.topTips,o=!1;if(t&&t.title){var s=t.roomid,r=n.getStorageSync((0,C.stringBuilder)(F.globalData.uniqueIds.SWANID,"_",s));o=!(a.extra&&a.extra.brand&&a.extra.brand.status)&&!r,e.sendLog({pos:"top-tips",action:"show",roomid:a.topTips.roomid,liveSrcType:a.topTips.liveSrcType,liveType:a.topTips.type})}o?e.updateTabScrollToFixedDistance(t):e.updateTabScrollToFixedDistance({}),i((function(){e.stepItemHeightCalc(d)}),500)}))}))})),e.sendLog({pos:"step-tab",action:"render",count:d.stepTabList.length}),e.data.shouldBackToDetailRender&&e.sendLog({pos:"backto-detail",action:"render"}),n.setPageInfo){var v=e.getImgsForPageInfo(a.AlbumStep.stepItem.slice(0)),w={title:(0,C.stringBuilder)(s.title,"-百度经验"),keywords:(0,C.stringBuilder)("百度,百度经验,经验小程序,",s.title),description:(0,C.stringBuilder)(s.title,",百度经验小程序"),articleTitle:s.title,releaseDate:(0,C.format)(new Date(1e3*s.updateTime),"yyyy-MM-dd hh:mm:ss")};s.hasVideo&&s.videoData&&s.videoData.playUrl&&(w.video={url:s.videoData.playUrl,duration:s.videoData.duration,image:s.videoData.coverUrl}),v.length&&(w.image=v.slice(0,3)),n.setPageInfo(w)}}}else 10100001===o.errno?(n.showToast({title:"经验不存在或者被删除",icon:"none",duration:4e3}),e.data.shouldBackToDetailRender?e.setData({isArticleErr:!0,articleErrInfo:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"经验不存在或者被删除,可稍后重试",btnText:"重新加载"}}):e.setData({isArticleErr:!0,articleErrInfo:{btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"经验不存在或者被删除,可稍后重试",btnText:"\b\b返回首页"}})):10000002===o.errno?n.showToast({title:"参数错误,请重试",icon:"none",duration:4e3}):(n.showToast({title:"数据错误,请重试",icon:"none",duration:4e3}),e.setData({isArticleErr:!0,articleErrInfo:{btnEvtType:I.ELoadFailBtnType.goHome,errMsg:"数据错误",btnText:"\b\b返回首页"}}))}}},stepDataFailCallBack:function(){var e=this;return function(t){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),e.setData({isArticleErr:!0,articleErrInfo:{btnEvtType:I.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}},processOption:function(e){var t={showIndex:parseInt(e.step,10)||0,encEid:e.eid,shouldBackToDetailRender:e.from!==I.EArticleStepsFrom.fromArticleDetail,picindex:e.picindex||0,word:(0,C.decodeUriComponent)(e.word||""),coverImage:(0,C.decodeUriComponent)(e.coverImage||"")};return this.setData(t),t},getStepAsyncData:function(){var e=this;(0,O.request)({url:(0,C.getApiUrl)("getStepAsyncData"),data:{bdenvmode:F.globalData.privacyMode,iadLDL:F.globalData.iadLDL,scene:F.globalData.scene,eid:this.processedOption.encEid,word:this.processedOption.word},success:function(t){var i=t.data||{};if(0==+i.errNo){var o=i.data,a=o.asp1089Data,n=o.mixBanner,s=!(!a||!a.length),r=!(!n||!n.cover);e.setData(E(E(E({},s&&{adData:a}),r&&{mixBanner:n}),!s&&r&&e.data.maxHeight&&{maxHeight:e.data.maxHeight+e.fixedMixBannerHeight}))}}})},stepItemHeightCalc:function(e){var t=this,i=E({stepList:this.data.stepList.slice(0)},this.data.adData&&this.data.adData.length&&{adData:this.data.adData}),o=this.data.initialIndex;this.calcTabScrollLeft(this.data.showIndex);var a=this.minHeight,s=this.data.winWidth-34,r=(Math.ceil(.5625*s),this.hasNoAd),c=0;n.createSelectorQuery().selectAll(".child-step-wrap").boundingClientRect((function(e){e.forEach((function(e,a){var n=0;i.stepList[a].childStep.forEach((function(e){e.imgList.forEach((function(e){n+=13+(Math.ceil(s/e.width*e.height)||0)}))}));var d=!1;i.adData&&i.adData.length>=1&&(o+i.adData.length<=i.stepList.length&&a>=o&&a<o+i.adData.length||o+i.adData.length>i.stepList.length&&a>=i.stepList.length-i.adData.length)&&(d=!0),!d&&t.data.mixBanner&&t.data.mixBanner.cover&&(r[a]=!0,c=t.fixedMixBannerHeight);var l=e.height+40+n+c;t.stepWrapHeight[a]=l})),(a=Math.max.apply(Math,(0,D.default)(t.stepWrapHeight).concat([a])))>t.minHeight&&(a+=50),t.setData({maxHeight:a+100,imgCanShow:!0,hasNoAd:r})})).exec();var d=e.stepList.map((function(e){var t={};return t.step=e.childStep.map((function(e){var t={text:[]};return e.title&&(t.title=e.title),t.text=e.text.slice(0),t})),t}));this.setData({voiceInfo:{type:I.PageType.album,steps:d}})},handleFeedback:function(e){this.data.expAll.feedback.likeNum!==e.detail.likeNum&&(F.globalData.feedback={likeNum:e.detail.likeNum,status:e.detail.status}),this.setData({"expAll.feedback.status":e.detail.status,"expAll.feedback.likeNum":e.detail.likeNum})},handleBottomShare:function(e){var t=this;n.openShare({title:this.data.expAll.title,content:"百度经验，解决你生活中的所有难题",path:(0,C.getPagePath)(I.PageName.Steps,{eid:this.data.encEid,step:this.data.showIndex}),imageUrl:this.data.coverImage||F.globalData.imgUrl,success:function(){t.sendLog({pos:"bottom-bar-share",action:"success"})}})},onShareAppMessage:function(){var e=this;return{title:this.data.expAll.title,content:"百度经验，解决你生活中的所有难题",path:(0,C.getPagePath)(I.PageName.Steps,{eid:this.data.encEid,step:this.data.showIndex}),imgUrl:F.globalData.imgUrl,success:function(){e.sendLog({pos:"swan-share",action:"success"})}}},handleRelrecItemTap:function(e){var t=e.currentTarget.dataset.id,i=e.currentTarget.dataset.sid,o=e.currentTarget.dataset.type,a=e.currentTarget.dataset.coverImage;"showlist"===o?(this.sendLog({pos:"showlist",action:"click",sidEnc:i}),(0,C.jumpTo)({appKey:I.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:i}})):"article"===o?(this.sendLog({pos:"article",action:"click",encEid:t}),(0,C.jumpTo)(I.PageName.Article,{eid:t,coverImage:a})):"video"===o&&(this.sendLog({pos:"video",action:"click",encEid:t}),(0,C.jumpTo)(I.PageName.Article,{eid:t,coverImage:a}))},getImgsForPageInfo:function(e){var t=[];return e.forEach((function(e){t=t.concat(e.step.images.map((function(e){return e.image})))})),t},onChangeTTS:function(e){this.sendLog({pos:"tts",action:e.action})},childlog:function(e){this.sendLog(e.detail)},changeTabTop:function(){n.showToast({title:"本场直播将不再提醒",icon:"none"}),this.setData({topTips:{}})},onFollowChanged:function(e){if(e&&e.detail&&e.detail.uid){var t=e.detail,i=t.canFollow?0:1;this.setData({hasFollow:i}),this.sendLog({action:"click",pos:"follow-btn",clickFrom:t.from,cancleFollow:t.canFollow?1:0,position:t.position})}},sendLog:function(e){(0,O.sendLog)(Object.assign({page:"steps",url:(0,C.getPagePath)(I.PageName.Steps),encEid:this.data.encEid,pageUUID:this.data.pageUUID,stepsCount:this.data.stepList.length,TimeOnPage:Math.round(((new Date).getTime()-this.data.pageStartTime)/1e3)},e))},childReady:function(e){if(this.headVideoComp=this.selectComponent("#head-video-comp-id"),e&&e.detail)switch(e.detail.component){case"top-tips":break;case"header":this.articleHeaderComp=this.selectComponent("#article-header-comp-id")}},onPageScroll:function(e){var t=e.scrollTop;this.pageScrollTopValue=t,this.updateScrollTabPosition(t,this.extraTopFixedHeight),Math.floor(t/(this.data.winHeight/2))!==this.prevScreen&&(this.prevScreen=Math.floor(t/(this.data.winHeight/2)),this.sendLog({pos:"user-action",action:"new-screen"})),this.headVideoComp&&this.headVideoComp.pageScroll(t,this.extraTopFixedHeight),this.articleHeaderComp&&this.articleHeaderComp.pageScroll(t,this.extraTopFixedHeight),this.sendMixBannerShowLog(t+this.data.winHeight+this.bottomBarHeight,this.data.showIndex)},updateScrollTabPosition:function(e,t){var i=e+t;!this.scrollTabShouldFixed&&i>=this.tabScrollToFixedDistance?(this.scrollTabShouldFixed=!0,this.setData({scrollTabShouldFixed:!0,scrollTabFixedTop:t})):this.scrollTabShouldFixed&&i<this.tabScrollToFixedDistance&&(this.scrollTabShouldFixed=!1,this.setData({scrollTabShouldFixed:!1}))},sendMixBannerShowLog:function(e,t){var i=this;this.mixBannerInfoList.forEach((function(o,a){if(t===a){var n=o.top,s=o.id;!o.isShow&&n<e&&(i.sendLog({pos:"step-bottom-mix-banner",action:"show",id:s,index:a}),i.mixBannerInfoList[a].isShow=!0)}}))},onUpdateMixBannerOffset:function(e){var t=e.detail,i=t.id,o=t.top;this.mixBannerInfoList.push({id:i,top:o,isShow:!1}),this.sendMixBannerShowLog(this.data.winHeight+this.bottomBarHeight,this.data.showIndex)},onReachBottom:function(){this.isAjaxGetRelrec||this.isNomoreRelrecData||this.data.showIndex!==this.data.stepTabList.length||(this.sendLog({pos:"relrec-tab",action:"pull-up-refresh"}),this.setData({relrecTip:"正在加载数据"}),this.getAjaxRelrecList())},handleTabScrollTap:function(e){this.isTabTap=!0;var t=parseInt(e.currentTarget.dataset.index,10);this.doStepSwitch(t),t!==this.data.stepTabList.length?(this.sendLog({pos:"step-tab",action:"click",index:t}),this.relrecTime&&(this.sendLog({pos:"relrec-tab",action:"user-time",userTime:Math.round(((new Date).getTime()-this.relrecTime)/1e3)}),this.relrecTime=0)):(this.sendLog({pos:"relrec-tab",action:"click"}),this.relrecTime=(new Date).getTime())},handleScrollToUpper:function(e){this.setData({stepTabAfterMaskShow:!0,stepTabBeforeMaskShow:!1})},handleScrollToLower:function(e){0!==this.data.leftFeeds.length||this.isPrefetchRelrecList||this.getRelrecListSilently(),this.setData({stepTabAfterMaskShow:!1,stepTabBeforeMaskShow:!0})},handleCatchBackToDetailTap:function(e){this.sendLog({pos:"backto-detail",action:"click"}),(0,C.jumpTo)(I.PageName.Article,{eid:eid})},handleCatchHideBackToDetailTap:function(e){this.sendLog({pos:"hide-backto-detail",action:"click"}),this.setData({backToDetailHide:!0})},handleTouchStart:function(e){this.isTouching=!0,this.touchMoveBeginY=e.touches[0].clientY},handleTouchMove:function(e){var t=this;this.isTouching&&(this.data.backToDetailHide&&e.touches[0].clientY-this.touchMoveBeginY>0?(clearTimeout(this.touchHideBackToDetailTimeoutId),this.touchHideBackToDetailTimeoutId=i((function(){t.setData({backToDetailHide:!1})}),15)):!this.data.backToDetailHide&&e.touches[0].clientY-this.touchMoveBeginY<0&&(clearTimeout(this.touchHideBackToDetailTimeoutId),this.touchHideBackToDetailTimeoutId=i((function(){t.setData({backToDetailHide:!0})}),15)),this.touchMoveBeginY=e.touches[0].clientY)},handleTouchEnd:function(e){this.isTouching=!1},handleTouchCancel:function(e){this.isTouching=!1},handleFullscreenView:function(e){var t=e.currentTarget.dataset.sindex,i=[];t in this.imgFullscreenListMapCache?i=this.imgFullscreenListMapCache[t].slice(0):(this.data.stepList[t].childStep.forEach((function(e){e.imgList&&e.imgList.length&&(i=i.concat(e.imgList.map((function(e){return e.image}))))})),this.imgFullscreenListMapCache[t]=i.slice(0)),n.previewImage({current:e.currentTarget.dataset.src,urls:i})},stepAdLoadHlr:function(e){var t=this,i=this.data.adData.length,o=e.currentTarget.dataset.adIndex,a=this.data.stepTabList.length;this.promiseList.push(new Promise((function(e,t){var i=".step-ad-container.ad-step-"+o;n.createSelectorQuery().select(i).boundingClientRect((function(t){e(t&&t.height?t.height+40:0)})).exec()})));var s=this.promiseList.length;s===Math.min(a,i)&&Promise.all(this.promiseList).then((function(e){for(var i=0;i<s;i++)t.stepWrapHeight[i]+=e[i];var o=Math.max.apply(Math,(0,D.default)(t.stepWrapHeight).concat([t.data.maxHeight]));o+=100,t.setData({maxHeight:o})})),this.sendLog({pos:"stepAd",action:"load"})},stepAdRenderHlr:function(){this.sendLog({pos:"stepAd",action:"render"})},stepAdErrHlr:function(){this.sendLog({pos:"stepAd",action:"error"})},stepAdClickHlr:function(){this.sendLog({pos:"stepAd",action:"click"})},splitPTag:function(e){var t=e.replace(/<p>/g,"").split(/<\/p>|<br \/>/),i=[];return t.forEach((function(e){e&&i.push((0,C.entityToString)((0,C.deleteHtmlTag)(e)))})),i},updateTabScrollToFixedDistance:function(e){var t,i=this;e&&e.title&&(this.videoHeight?this.tabScrollToFixedDistance+=58:this.tabScrollToFixedDistance+=46,t={topTips:e,canTopTipsRender:!0}),(0,C.poll)((function(e,t){n.createSelectorQuery().in(i).select(".steps-tab-wrap").boundingClientRect((function(i){i?e(i):t()})).exec()}),(function(e,o){e||(i.tabScrollToFixedDistance+=o.top,t&&i.setData(t))}))},changeDataStruct:function(e){var t=this,i=[],o=[];if(e.multiStep&&e.multiStep.length)if(1===e.multiStep.length){var a=e.multiStep[0],n=1;e.stepItem.forEach((function(e){t.isStepType(e.type)&&e.stepPageIndex>=a.startPageIndex&&e.stepPageIndex<a.stepCount+a.startPageIndex&&(o.push("步骤"+n++),i.push({childStep:[{text:t.splitPTag(e.step.text),imgList:e.step.images.slice(0)}]}))}))}else e.multiStep.length>1?i=e.multiStep.map((function(i){var a=[],n=1,s=1;e.stepItem.forEach((function(e){t.isStepType(e.type)&&e.stepPageIndex>=i.startPageIndex&&e.stepPageIndex<i.stepCount+i.startPageIndex&&a.push({title:"步骤"+n++,text:t.splitPTag(e.step.text),imgList:e.step.images.slice(0)})})),i.paraTitle=i.paraTitle.replace(/&nbsp;/g," ");var r=i.paraTitle?i.paraTitle.length>15?i.paraTitle.slice(0,15)+"...":i.paraTitle:"步骤"+s++;o.push(r);var c=a.length;return 1===c?a[0].title="":a.forEach((function(e){e.title+="/"+c})),{title:r,childStep:a}})):o=[];else{var s=1;e.stepItem.forEach((function(e){t.isStepType(e.type)&&(o.push("步骤"+s++),i.push({childStep:[{text:t.splitPTag(e.step.text),imgList:e.step.images.slice(0)}]}))})),i.length<2&&(o=[])}return{stepList:i,stepTabList:o}},getRelrecListSilently:function(){var e=this;this.isPrefetchRelrecList=!0,(0,O.request)({url:(0,C.getApiUrl)("stepsRelrec"),data:{bdenvmode:F.globalData.privacyMode,iadLDL:F.globalData.iadLDL,eid:this.data.encEid,word:this.data.word},success:function(t){n.hideLoading(),e.isPrefetchRelrecList=!1;var i=t.data,o=i.data;0===i.errno?o.feed&&o.feed.list&&o.feed.list.length?(e.setData({relrecTip:""}),e.successHandler(o.feed.list),e.disabledMoreRelrec&&(e.isNomoreRelrecData=!0,e.setData({relrecTip:"没有更多了"}))):(e.isNomoreRelrecData=!0,e.setData({relrecTip:"没有更多了"})):e.setData({relrecTip:"数据错误"})},fail:function(t){n.hideLoading(),e.isPrefetchRelrecList=!1,e.setData({relrecTip:"Wi-Fi和移动网络已断开"})}})},getRelrecList:function(){n.showLoading({title:"加载中"}),this.isPrefetchRelrecList||this.getRelrecListSilently()},getAjaxRelrecList:function(){var e=this;this.isAjaxGetRelrec=!0,n.showLoading({title:"加载中"}),(0,O.request)({url:(0,C.getApiUrl)("homeFeed"),data:{cid1:0,pos:"stepRecFeed",word:this.data.word},success:function(t){e.isAjaxGetRelrec=!1,n.hideLoading();var i=t.data,o=i.data;0===i.errno?o.list&&o.list.length?(e.setData({relrecTip:""}),e.successHandler(o.list)):(e.isNomoreRelrecData=!0,e.setData({relrecTip:"没有更多了"})):e.setData({relrecTip:"数据错误"})},fail:function(t){e.isAjaxGetRelrec=!1,n.hideLoading(),e.setData({relrecTip:"Wi-Fi和移动网络已断开"})}})},successHandler:function(e){for(var t=this.data.leftPicHeight,i=this.data.rightPicHeight,o=this.data.leftFeeds.slice(0),a=this.data.rightFeeds.slice(0),n=this.data.winWidth,s=Math.floor(.487*(n-34)),r=0;r<e.length;r++){var c=e[r],d=(c.rate||0)*s;d>248?d=248:d<104&&(d=104),"video"===c.type&&(d=.5625*s),c.height=d,"showlist"===c.type&&(d=s+32),this.getLength(c.title)>18?d+=94:d+=72,c.browserTimes>=1e4&&(c.browserTimes=Math.floor(c.browserTimes/1e4)+"w"),t>i?(i+=d,a.push(c)):(t+=d,o.push(c))}this.setData({leftPicHeight:t,leftFeeds:o,rightPicHeight:i,rightFeeds:a})},calcTabScrollLeft:function(e){var t=this;if(this.tabItemRect){if(void 0===this.tabScrollLeftMap[e]){var i=this.tabItemRect[e];if(i){var o=i.width;this.tabItemRect.slice(0,e).forEach((function(e){o+=e.width+t.tabItemMarginLeft})),this.tabScrollLeftMap[e]=o-this.data.winWidth/2}}this.setData({scrollTabLeft:this.tabScrollLeftMap[e]})}else n.createSelectorQuery().selectAll(".step-tab").boundingClientRect((function(i){t.tabItemRect=i;var o=i[e];if(o){var a=o.width;i.slice(0,e).forEach((function(e){a+=e.width+t.tabItemMarginLeft})),t.tabScrollLeftMap[e]=a-t.data.winWidth/2,t.setData({scrollTabLeft:t.tabScrollLeftMap[e]})}})).exec()},handleSwiperItemChange:function(e){if(this.isTabTap)this.isTabTap=!1;else{var t=e.detail.current;t!==this.data.showIndex&&(this.doStepSwitch(t),this.calcTabScrollLeft(t),this.sendMixBannerShowLog(this.data.winHeight,t),this.sendLog({pos:"step-content",action:"swipe",index:t}))}},doStepSwitch:function(e){var t=this,i=this.data.showIndex,o=i!==e;if(e===this.data.stepTabList.length&&0===this.data.leftFeeds.length&&this.getRelrecList(),o){var a=(0,C.stringBuilder)("t",i);this.calcTabScrollLeft(e),this.scrollTopMap[a]=this.pageScrollTopValue,this.setData({playIndex:e,showIndex:e},(function(){var e=t.tabScrollToFixedDistance-t.extraTopFixedHeight;if(t.scrollTopMap[a]>=e){var i=e;n.pageScrollTo({scrollTop:i,duration:0})}}))}},isStepType:function(e){return/^(?:step|common)$/.test(e)},getLength:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},childPositionChange:function(e){if(e&&e.detail){var t=e.detail,i=t.component,o=t.position,a=t.height;if(i===I.fixedElementIdentName.authorView)"fixed"===o?this.extraTopFixedHeight+=a:this.extraTopFixedHeight-=a}}})})),window.define("137",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Page({data:{url:"https://iwenjuan.baidu.com/?code=h87rxp"},onLoad:function(){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("155",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");Page({data:{url:""},onLoad:function(e){e.url&&this.setData({url:L.decodeUriComponent(e.url)})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})})),window.define("154",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=(D.request,D.sendLog);n();Page({data:{url:""},onLoad:function(e){e.url&&this.setData({url:x.decodeUriComponent(e.url)})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{title:"PICK西番好物，千元红包去长草",content:"助力喜欢好物冲上TOP1，留下神评论，千元红包等你拿",imageUrl:"https://exp-picture.cdn.bcebos.com/87c8bf46b7b1eef9358954cabfb33c4132ba328e.jpg",path:x.getPagePath(L.PageName.WebviewZC,{url:encodeURIComponent(this.data.url)}),success:function(){P({page:"webview-zc",pos:"share",action:"success"})}}}})})),window.define("152",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var D=n(),P=e("24"),I=e("36"),C=e("34"),O=C.request,k=C.sendLog;Page({processedOption:null,shouldSkeletonRemove:!0,data:{isSkeletonShow:!0,toView:"",scrollTop:0,title:"",topElement:{},tabList:[],shareInfo:{},content:[],fromJingyanSwan:!1},onInit:function(e){this.processedOption||(this.processedOption=this.processOption(e),this.getTopicDetail({id:this.processedOption.id}))},onLoad:function(e){this.processedOption||(this.processedOption=this.processOption(e),a.showLoading({title:"加载中"}),this.getTopicDetail({id:this.processedOption.id}))},processOption:function(e){var t={id:e.id};return this.setData({fromJingyanSwan:"1"===e.fromJingyanSwan}),t},onShareAppMessage:function(){var e=this,t=this.data.shareInfo,i=D.globalData.shareInfo,o=t.title||i.title,a=t.text||i.content,n=t.img||i.imgUrl,s=t.id;return{title:o,content:a,path:I.getPagePath(P.PageName.Topic,Object.assign({},{id:s})),imageUrl:n,success:function(){e.onShareFeedback()}}},onShareFeedback:function(){},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){k(Object.assign({page:"topic"},e))},tap:function(e){var t="t"+e.currentTarget.dataset.index;this.scrollToTopicTitle(t)},onReady:function(){var e=a.createSelectorQuery();this.selectorQuery=e},scrollToTopicTitle:function(e){this.selectorQuery.select("#"+e).boundingClientRect(),this.selectorQuery.exec((function(e){var t={duration:300,scrollTop:(e[e.length-1].top||0)-90};a.pageScrollTo(t)}))},getTopicDetail:function(e){var t=this,i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);O({url:I.getApiUrl(P.PageName.Topic),data:i,success:function(e){a.hideLoading();var i=e.data;if(0===i.errNo){var o=i.data;o&&t.setPageInfo(o)}},fail:function(e){a.hideLoading(),a.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3})}})},setPageInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};i.title=t.title,i.topElement=t.topElement,i.tabList=t.tabList,i.shareInfo=t.shareInfo,i.content=t.content,i.liveContent=t.liveContent,this.shouldSkeletonRemove?(i.isSkeletonShow=!1,this.setData(i,(function(){e.shouldSkeletonRemove&&(e.shouldSkeletonRemove=!1,e.removeSkeleton())}))):this.setData(i)}})})),window.define("125",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var P=e("24"),I=e("36");n();Component({properties:{itemId:String,topicTitle:String,topicDesc:String,articleList:{type:Array,value:[]},liveList:{type:Array,value:[],observer:function(e){if(e&&e.length){var t=e.filter((function(e){return"single"===e.showType}));this.setData({bigLiveList:t,doubleFeedLiveList:e.slice(t.length)})}}},authorDesc:String},data:{constCardType:P.liveCardType,bigLiveList:[],doubleFeedLiveList:[]},methods:{picClick:function(e){var t=e.currentTarget.dataset.id,i=e.currentTarget.dataset.type;i===P.PageType.showlist?(this.sendLog({pos:"showlist",action:"click",sidEnc:t}),I.jumpTo({appKey:P.APPKEY.showlist,appPath:"pages/detail/index",appParam:{sidEnc:t}})):i===P.PageType.article?(this.sendLog({pos:"article",action:"click",encEid:t}),I.jumpTo(P.PageName.Article,{eid:t})):i===P.PageType.video&&(this.sendLog({pos:"video",action:"click",encEid:t}),I.jumpTo(P.PageName.Article,{eid:t}))},sendLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["topic-item"];e.component&&t.push(e.component),this.triggerEvent("sendlog",D(D({},e),{},{component:t.join("_")}))},childlog:function(e){this.sendLog(e.detail)}}})})),window.define("143",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=n(),x=e("24"),D=e("36"),P=e("34"),I=P.request,C=P.sendLog;Page({shouldSkeletonRemove:!0,data:{showPage:!1,scrollTop:0,title:"百度经验",shareInfo:{},content:[],topBarHeight:0,from:"",bgColor:"rgb(255,255,255,0)",setColorFlag:0,requestParams:{},liveFeedData:[],noMoreFeed:!1,fromJingyanSwan:!1,pn:0,pageSize:20},onLoad:function(e){"{}"===JSON.stringify(e)&&(e.a=1);var t=D.getSysInfoSync(),i=t.statusBarHeight+t.navigationBarHeight;e.from&&(e.from=D.decodeUriComponent(e.from));var o={topBarHeight:i,from:e.from,requestParams:e,fromJingyanSwan:"1"===e.fromJingyanSwan};this.setData(o)},onShareAppMessage:function(){var e=L.globalData.shareInfo.imgUrl;return{title:"百度经验直播",content:"互联网上的实用生活指南",path:D.getPagePath(x.PageName.Live),imageUrl:e,success:function(){}}},onPageScroll:function(e){var t=e.scrollTop,i=this.data.setColorFlag,o={};t>30&&0===i?(o.bgColor="rgb(255,255,255,1)",o.setColorFlag=1,this.setData(o)):t<=30&&1===i&&(o.bgColor="rgb(255,255,255,0)",o.setColorFlag=0,this.setData(o))},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){C(Object.assign({page:"live",from:this.data.from},e))},removeskeleton:function(e){var t=this;this.setData({showPage:!0},(function(){t.shouldSkeletonRemove&&(t.shouldSkeletonRemove=!1,t.removeSkeleton())}))},onReachBottom:function(){this.getLiveFeed(),this.sendLog({pos:"pull-up-refresh",action:"success"})},getLiveFeed:function(){var e=this;I({url:D.getApiUrl("liveFeed"),data:{pn:this.data.pn,rn:this.data.pageSize},success:function(t){a.hideLoading();var i=t.data;if(0===i.errNo)if(i.data.list&&i.data.list.length>0){var o=i.data.list;e.setData({liveFeedData:o,pn:i.data.pn})}else e.setData({isError:!0,noMoreFeed:!0,errInfo:"没有数据~"});else e.setData({isError:!0,noMoreFeed:!0,errInfo:"数据错误"})},fail:function(t){a.hideLoading(),e.setData({isError:!0,noMoreFeed:!0,errInfo:"加载失败"})}})}})})),window.define("138",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("24"),D=e("36"),P=e("34"),I=P.request,C=P.sendLog,O=s();Page({extra:"",startTime:0,processedOption:null,prevScreen:0,halfWinHeight:0,winHeight:0,winWidth:0,doubleFeedComp:null,leftPicHeight:0,rightPicHeight:0,shouldSkeletonRemove:!0,data:{pageName:x.PageName.FoodMenu,showBottomTip:!1,pageStartTime:0,pageUUID:"",isSkeletonShow:!0,isError:!1,noData:!1,errInfoObj:{btnEvtType:x.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},errInfo:"",list:[],hasMore:!0,extra:"",pn:0,foodList:[]},onInit:function(e){if(!this.processedOption){this.processedOption=this.processOption(e);var t=this.processedOption.foods;t&&this.requestData(t)}},onLoad:function(e){Date.now();if(!this.processedOption){this.processedOption=this.processOption(e);var t=this.processedOption.foods;t&&(n.showLoading({title:"加载中"}),this.requestData(t))}var i=D.getSysInfoSync();this.winWidth=i.windowWidth,this.winHeight=i.windowHeight,this.halfWinHeight=i.windowHeight/2;var o=this.processedOption.foods;o&&this.setData({foodList:o.split(","),extra:this.extra})},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.data.pageStartTime)/1e3)})},onShow:function(){this.startTime=Date.now()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onReady:function(){var e=Date.now();this.setData({pageStartTime:e,pageUUID:e+Math.random()}),this.sendLog({pos:"before",action:"pv"}),n.setPageInfo&&n.setPageInfo({title:"解决你所有生活难题",keywords:"百度,百度经验,经验小程序",description:"百度经验小程序首页"})},onReachBottom:function(){this.data.noData||(n.showLoading({title:"加载中"}),this.requestData(this.processedOption.foods),this.sendLog({pos:"pull-up-refresh",action:"success"}))},onShareAppMessage:function(){return{title:"百度经验：在家也能吃出花",content:"告诉我有什么食材，剩下的交给我们",path:D.getPagePath(x.PageName.FoodMenu,{foods:this.processedOption.foods}),imgUrl:O.globalData.imgUrl}},processOption:function(e){var t={foods:D.decodeUriComponent(e.foods)||""};return e.extra&&(this.extra=e.extra),t},requestData:function(e){var t=this;if(this.data.hasMore){var o={food:e,pn:this.data.pn};this.extra&&(o.extra=this.extra),I({url:D.getApiUrl(x.PageName.FoodMenu),data:o,success:function(e){Date.now();var o=e.data;n.hideLoading();var a={};if(0===o.errNo){var s=o.data;if(s.list&&s.list.length>0){for(var r=s.list,c=0;c<r.length;c++)r[c].browserTimes>=1e4&&(r[c].browserTimes=Math.floor(r[c].browserTimes/1e4)+"w");a.pn=s.pn,a.list=t.data.list.concat(r)}else 0===t.data.pn&&(a.noData=!0),a.isError=!0,a.errInfo="没有数据~";a.hasMore=s.hasMore}else 0===t.data.pn&&(a.noData=!0),a.isError=!0,a.errInfo="数据错误";var d=Date.now();t.shouldSkeletonRemove?(a.isSkeletonShow=!1,t.setData(a,(function(){var e=Date.now()-d;t.shouldSkeletonRemove&&(t.shouldSkeletonRemove=!1,t.removeSkeleton()),i((function(){t.setData({showBottomTip:!0})}),50),t.sendLog({pos:"perf-analyze",action:"set-data",setDataTime:e})}))):t.setData(a)},fail:function(e){n.hideLoading(),n.showToast({title:"加载失败,请检查网络",icon:"none",duration:4e3}),t.setData({isError:!0,errInfoObj:{btnEvtType:x.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}})}else this.setData({hasMore:!1})},childReady:function(){this.doubleFeedComp=this.selectComponent("#double-feed-comp-id")},onPageScroll:function(e){var t=e.scrollTop,i=Math.floor(t/this.halfWinHeight);i!==this.prevScreen&&(this.prevScreen=i,this.sendLog({pos:"user-action",action:"new-screen"})),this.doubleFeedComp&&this.doubleFeedComp.pageScroll&&this.doubleFeedComp.pageScroll(t,0)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){C(Object.assign({page:"foodMenu",url:D.getPagePath(x.PageName.FoodMenu),pageUUID:this.data.pageUUID,TimeOnPage:Math.round((Date.now()-this.data.pageStartTime)/1e3),extra:this.extra},e))}})})),window.define("136",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7")(e("6"));function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){(0,x.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=e("24"),C=e("36"),O=e("34"),k=O.request,E=O.sendLog,F=s(),A="edit",B="preview",j="submitSuccess";Page({data:{topBarHeight:64,maxLen:{title:30,brief:60,list:30},feedCoverRatio:{w:3,h:2},feedCoverExt:["png","jpg","jpeg"],grassExp:{title:"",brief:"",cover:[],feedCover:Array(3).fill({src:"",url:"",uploadStatus:""}),list:[]},oldDraft:{},coverImage:"",coverImageUploading:"",briefPlaceHolder:"点击添加种草说明，恰当的说明会吸引更多关注哦",url:"",imageList:[],horizImgList:[],remoteImages:[],mode:A,showAddSectionFixed:!1,showGrassExpFreshTips:!1,uploadStatusFail:!1,draftStorageKey:"",scene:"",isWeb:"",canEdit:0,isVersion:!1,canModifyTitle:!0,fromJingyanSwan:!1,grassArticle:{expAll:{title:"",updateTime:"",viewNum:0,isGrass:1,hideGrassActivity:1,authorInfo:{avatar:"",displayName:""},content:{brief:[],briefImage:[],steps:[]},feedback:{commentNum:0,likeNum:0,status:0}}},resultButtons:[{type:"gradient-plain",text:"去首页逛逛",clickFn:"gotoHome"},{type:"primary",text:"再写一篇",clickFn:"showGrassForm"}],previewButtons:[{type:"gradient-plain",text:"修 改",clickFn:"backToEditForm"},{type:"primary",text:"提 交",clickFn:"saveGrassExp"}],submitButtons:[{type:"gradient-plain",text:"预 览",clickFn:"previewGrassExp"},{type:"primary",text:"提 交",clickFn:"saveGrassExp"}]},scrollTop:0,addSectionViewTop:0,gotoSectionFlag:!1,gotoSectionIdx:-1,selectorQuery:null,startTime:0,pageUUID:0,pageStartTime:0,autoSaveTimer:null,autoSaveTimeSpan:5e3,onIniting:!1,eid:"",vid:"",draftStorageKey:I.StorageKey.grassDraft,onInit:function(e){this.onIniting=!0,this.pageInit(e)},onLoad:function(e){this.onIniting||this.pageInit(e);var t=C.getSysInfoSync();if(t){var i=t.statusBarHeight+t.navigationBarHeight;this.setData({topBarHeight:i})}this.setData({scene:F.globalData.scene,isWeb:"web"===F.globalData.platform}),this.removeSkeleton&&this.removeSkeleton()},onReady:function(){this.calAddSectionTop(),this.showFreshTips(),this.selectorQuery=n.createSelectorQuery();var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"page",action:"pv"})},onShow:function(){var e=this;this.gotoSectionFlag?(this.loadGrassDraft((function(){e.selectorQuery.selectViewport().scrollOffset().selectAll(".section-list-item").boundingClientRect().exec((function(t){if(t&&t.length>1&&t[1].length){var i=t[0].scrollTop,o=e.gotoSectionIdx;-1===o&&(o=t[1].length-1);var a=i+t[1][o].top-e.data.topBarHeight-72;n.pageScrollTo({scrollTop:a})}}))})),this.gotoSectionFlag=!1):this.data.coverImageUploading&&n.checkSession({fail:function(t){e.setData({coverImageUploading:!1,uploadStatusFail:I.UploadStatus.fail})}}),this.eid||this.autoSaveDraft(),this.startTime=Date.now()},onHide:function(){this.saveDraft(),this.stopAutoSaveDraft(),this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onUnload:function(){this.stopAutoSaveDraft(),this.eid&&this.clearGrassTempDraft(),this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.data.pageStartTime)/1e3)})},onShareAppMessage:function(){return F.globalData.grassShareInfo},pageInit:function(e){var t=this,i=e.eid,o=e.vid,a=e.isPreview,n=a?0:1;this.setData({fromJingyanSwan:"1"===e.fromJingyanSwan,canEdit:n,horizImgList:this.getEmptyFeedCover(),isVersion:!!i}),i?(this.eid=i,this.vid=o,this.draftStorageKey=I.StorageKey.grassTempDraft,this.loadEditGrassExp({eid:i,vid:o,isPreview:a})):this.loadGrassDraft((function(){t.setData({oldDraft:t.cloneData(t.data.grassExp)})}))},childReady:function(){},showDisabledTips:function(){n.showToast({icon:"none",title:"已通过的标题不支持修改哦~"})},renderGrassInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.list.map((function(e){e.imgArr=e.image.map((function(e){return e.url}))}));var o={};if(e.cover&&e.cover.length){var a=e.cover[0];o.coverImage=a.url||a.localImg}e.feedCover&&e.feedCover.length?o.horizImgList=this.cloneData(e.feedCover):e.feedCover=this.getEmptyFeedCover(),this.setData(P(P({},o),{},{grassExp:Object.assign({},this.data.grassExp,e)}),(function(){"function"==typeof t&&i((function(){t()}),300)}))},loadGrassDraft:function(e){var t=n.getStorageSync(this.draftStorageKey);t&&this.renderGrassInfo(t,e)},showFreshTips:function(){var e=n.getStorageSync("grassExpEditorVisited");this.data.isVersion||e||this.setData({showGrassExpFreshTips:!0})},hideFreshTips:function(){this.data.showGrassExpFreshTips&&(this.setData({showGrassExpFreshTips:!1}),n.setStorage({key:"grassExpEditorVisited",data:"1"}))},changeExpTitle:function(e){var t=e.detail.value;this.setData({"grassExp.title":t})},changeExpBrief:function(e){var t=e.detail.value;this.setData({"grassExp.brief":t})},addSectionClick:function(e){this.sendLog({pos:"add-section-btn",action:"click"}),this.hideFreshTips(),this.data.grassExp.list.length!==this.data.maxLen.list?this.gotoSection(e):n.showToast({icon:"none",title:"最多只能添加".concat(this.data.maxLen.list,"个好物哦~")})},gotoSection:function(e){var t=e.currentTarget.dataset,i={};"index"in t?(i={index:t.index},this.gotoSectionIdx=t.index,this.sendLog({pos:"edit-section-btn",action:"click"})):this.gotoSectionIdx=-1,this.eid&&(i.eid=this.eid),this.gotoSectionFlag=!0,C.jumpTo(I.PageName.EditorSection,i)},deleteSectionConfirm:function(e){var t=this;this.sendLog({pos:"delete-section-btn",action:"click"}),n.showModal({title:"确认删除这条好物吗?",content:"一旦确认删除，内容将无法恢复",showCancel:!0,cancelText:"取消",confirmText:"删除",confirmColor:"#F7534F",success:function(i){if(i.confirm){var o=parseInt(e.currentTarget.dataset.index,10);t.deleteSection(o),t.sendLog({pos:"delete-section-success",action:"success"})}}})},deleteSection:function(e){var t=this.data.grassExp.list.slice(0);t.splice(e,1),this.setData({"grassExp.list":t}),this.saveDraft(),n.showToast({icon:"none",title:"已删除"})},goBack:function(){var e=this;this.data.mode!==j?this.eid?this.data.canEdit?n.showModal({title:"提示",content:"确认放弃本次修改吗？",showCancel:!0,cancelText:"取消",confirmText:"放弃",success:function(t){t.confirm&&e.backHandler()}}):this.backHandler():n.showModal({title:"提示",content:"是否保存本次编辑？",showCancel:!0,cancelText:"不保存",confirmText:"保存",success:function(t){t.confirm?e.saveDraft():e.cancelSaveNewDraft(),e.backHandler()}}):this.backHandler()},backHandler:function(){getCurrentPages().length>1?n.navigateBack():n.exit()},saveDraft:function(){n.setStorage({key:this.draftStorageKey,data:this.data.grassExp})},autoSaveDraft:function(){var e=this;this.data.mode!==j&&(this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=i((function(){e.saveDraft(),e.autoSaveDraft()}),this.autoSaveTimeSpan))},stopAutoSaveDraft:function(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer)},clearGrassDraft:function(){n.removeStorageSync(this.draftStorageKey)},clearGrassTempDraft:function(){n.removeStorageSync(I.StorageKey.grassTempDraft)},cancelSaveNewDraft:function(){n.setStorage({key:I.StorageKey.grassDraft,data:this.data.oldDraft})},onButtonTap:function(e){var t=e.detail.clickFn;"function"==typeof this[t]&&this[t]()},gotoHome:function(){C.jumpTo(I.PageName.HomeGrass)},showGrassForm:function(){var e=this;this.draftStorageKey!==I.StorageKey.grassDraft&&(this.draftStorageKey=I.StorageKey.grassDraft,this.loadGrassDraft((function(){e.setData({oldDraft:e.cloneData(e.data.grassExp)})}))),this.setData({mode:A})},resetGrassForm:function(){this.eid="",this.vid="",this.setData({isVersion:!1,canModifyTitle:!0,coverImage:"",grassExp:{title:"",brief:"",cover:[],feedCover:this.getEmptyFeedCover(),list:[]},horizImgList:this.getEmptyFeedCover()})},getEmptyFeedCover:function(){return Array(3).fill({src:"",url:"",uploadStatus:""})},validGrassForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.cloneData(this.data.grassExp);i.feedCover=i.feedCover.filter((function(e){return!!e.src}));var o={cover:[{require:!0,message:"请选择头图"}],title:[{require:!0,message:"请填写种草标题"},{min:10,max:this.data.maxLen.title,message:"种草标题字数限制为10-".concat(this.data.maxLen.title,"字")}],brief:[{require:!0,message:"请填写种草说明"},{min:10,max:this.data.maxLen.brief,message:"种草说明字数限制为10-".concat(this.data.maxLen.brief,"字")}],list:[{require:!0,message:"请添加至少1件好物"}]};t.preview||(o.feedCover=[{require:!0,min:3,message:"请上传3张推送封面"}]),C.validForm(o,i,(function(t){t&&"function"==typeof e&&e()}))},saveGrassExp:function(){var e=this;this.validGrassForm((function(){e.submitGrassExpConfirm()})),this.sendLog({pos:"submit-btn",action:"click",mode:this.data.mode})},backToEditForm:function(){this.setData({mode:A}),this.sendLog({pos:"back-to-edit-btn",action:"click"})},previewGrassExp:function(){var e=this;this.validGrassForm((function(){e.showPreViewGrassExp(e.data.grassExp)}),{preview:!0}),this.sendLog({pos:"preview-btn",action:"click"})},showPreViewGrassExp:function(e){var t=this.formatPreviewData(e);this.setData({mode:B,grassArticle:t})},formatPreviewData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.data.grassArticle,i=e.list.map((function(e){var t=e.image.map((function(e){return{imgUrl:e.url}}));return{title:e.name,step:[{text:e.description,images:t.slice(0),goods:e.goods.slice(0)}]}})),o={};return e.brief&&(o.brief=[e.brief]),e.cover.length&&(o.briefImage=[{imgUrl:e.cover[0].url}]),i&&i.length&&(o.steps=i.slice(0)),{expAll:Object.assign({},t.expAll,{title:e.title,updateTime:Date.now(),content:Object.assign({},t.expAll.content,o)})}},submitGrassExpConfirm:function(){var e=this;n.showModal({title:"提示",content:"确认提交吗？",showCancel:!0,cancelText:"取消",confirmText:"提交",success:function(t){if(t.confirm){var i=e.cloneData(e.data.grassExp),o=0;i.list.forEach((function(e){e.goods=e.goods.map((function(e){return e.gid})),e.goods.length&&(o+=e.goods.length)})),i.goodsNum=o,e.submitGrassExp(i)}}})},cloneData:function(e){return JSON.parse(JSON.stringify(e))},submitGrassExp:function(e){var t=this,i=C.getApiUrl("commitGrassExp");this.eid&&(i=C.getApiUrl("updateGrassExp")),n.showLoading({title:"提交中",mask:!0}),k({url:i,method:"POST",data:P({},e),complete:function(){n.hideLoading()},success:function(i){var o=i.data;o.errNo?n.showToast({icon:"none",title:o.errStr}):(t.clearGrassDraft(),t.setData({mode:j}),t.sendLog({pos:"submit-btn-success",listNum:e.list.length,goodsNum:e.goodsNum,action:"success"}),t.resetGrassForm())}},!0)},calAddSectionTop:function(){var e=this;n.createSelectorQuery().select("#js-section-operate").boundingClientRect((function(t){t&&(e.addSectionViewTop=t.top+e.scrollTop)})).exec()},changeAddSectionFixed:function(e){var t=!1;e>this.addSectionViewTop&&(t=!0),this.data.showAddSectionFixed!==t&&this.setData({showAddSectionFixed:t})},onPageScroll:function(e){var t=e.scrollTop+this.data.topBarHeight;this.scrollTop=e.scrollTop,this.changeAddSectionFixed(t)},chooseImage:function(e){var t=e.detail.imageList;t.length&&this.setData({coverImage:t[0].localImg,coverImageUploading:!0,uploadStatusFail:!1})},uploadResult:function(e){var t=e.detail;if(t&&t.imgData){var i=t.imgData,o=[{src:i.src,url:i.url,localImg:this.data.coverImage}],a=!1;i.uploadStatus===I.UploadStatus.fail&&(a=!0),this.setData({coverImageUploading:!1,uploadStatusFail:a,"grassExp.cover":o})}},chooseFeedCover:function(e){var t=e.detail.imageList[0],i=t.id,o={};o["horizImgList[".concat(i,"]")]=t,this.setData(o)},uploadFeedCoverResult:function(e){var t=e.detail.imgData,i="grassExp.feedCover[".concat(t.id,"]"),o={};if(t.url){o[i]={src:t.src,url:t.url,width:t.width,height:t.height,type:t.type},o["horizImgList[".concat(t.id,"].uploadStatus")]=t.uploadStatus,this.setData(o)}else{var a=Object.assign({},this.data.horizImgList[t.id],{uploadStatus:t.uploadStatus,uploadFail:!0}),n={};n["horizImgList[".concat(t.id,"]")]=a,this.setData(n)}},loadEditGrassExp:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k({url:C.getApiUrl(I.PageName.Editor),data:P({},t),success:function(t){var o=t.data||{};if(0===o.errNo){var a=o.data,n=a.expInfo,s=a.canEdit,r=a.canModifyTitle;s?e.renderGrassInfo(n):e.showPreViewGrassExp(n),e.setData({canEdit:s,canModifyTitle:r})}else C.showErrorMsg(o.errNo),i((function(){e.backHandler()}),2e3)},fail:function(){C.showErrorMsg("","网络异常，请稍候再试"),i((function(){e.backHandler()}),2e3)}},!0)},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){E(Object.assign({page:"editor",url:C.getPagePath(I.PageName.Editor),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3)},e))}})})),window.define("96",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7"),x=L(e("17")),D=L(e("3")),P=(n(),e("35")),I=e("24"),C=e("34"),O=C.request,k=(C.sendLog,e("36"));Component({ratioWH:0,properties:{idx:{type:Number,value:0},minWidth:{type:Number,value:0},minHeight:{type:Number,value:0},allowExt:{type:Array,value:[]},ratio:{type:Object,value:null,observer:function(e){e&&e.w&&e.h&&(this.ratioWH=e.w/e.h)}},pictureLimit:{type:Number,value:9},pictureSelectLimit:{type:Number,value:9}},data:{imageList:[]},attached:function(){},detached:function(){},methods:{chooseImage:function(){var e,t=this;a.chooseImage({count:this.data.pictureLimit,sizeType:["original"],sourceType:["album"],success:(e=(0,D.default)(x.default.mark((function e(i){var o,a,n,s,r,c,d,l,h,p,u,g;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i.tempFilePaths,a={},n=[],s=[],r=0,c=t.data,d=c.minWidth,l=c.minHeight,h=c.allowExt;case 6:if(!(r<o.length)){e.next=24;break}if(p=!0,u=o[r],!(d||l||h||t.ratioWH)){e.next=14;break}return e.next=12,t.getImageInfo(u);case 12:g=e.sent,p=t.checkImageInfo(g);case 14:if(p){e.next=18;break}return e.abrupt("break",24);case 18:a={id:t.data.idx+r,uploadStatus:I.UploadStatus.waiting,localImg:u},n.push(a),s.push(u);case 21:r++,e.next=6;break;case 24:n.length&&(t.setData("imageList",n.slice(0)),t.triggerEvent("chooseimg",{imageList:n}),t.batchUpload(s));case 26:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},getImageInfo:function(e){return(0,D.default)(x.default.mark((function t(){return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject().catch((function(){})));case 2:return t.next=4,new Promise((function(t,i){a.getImageInfo({src:e,success:function(e){t(e)},fail:function(e){i(e)}})})).catch((function(){}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()},checkImageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,i=e.height,o=e.type.toLowerCase(),n=this.data,s=n.ratio,r=n.minHeight,c=n.minWidth,d=n.allowExt;if(d.length&&!d.includes(o))return a.showToast({icon:"none",title:"请上传".concat(d.join(", "),"类型的图片")}),!1;if(this.ratioWH){var l=s.w*i-s.h*t;if(Math.abs(l)>s.w)return a.showToast({icon:"none",title:"请上传尺寸为".concat(s.w,":").concat(s.h,"的图片")}),!1}return!(r&&i<r||c&&t<c)||(a.showToast({icon:"none",title:"图片最小尺寸为".concat(c,"*").concat(r)}),!1)},batchUpload:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=new P({taskList:[],delay:0,isConcurrent:!1});return t.forEach((function(t,o){i.add((function(){return e.uploadImage(o,t)}))})),i.start()},uploadImage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;if(i){var o=Object.assign({},this.data.imageList[t]);O({swanMethod:"uploadFile",url:k.getApiUrl("uploadPicture"),filePath:i,name:"file",header:{"content-type":"multipart/form-data"},formData:{file:i},success:function(t){var i=t.data,n=i.data;0===i.errNo&&n.pid?(o.uploadStatus=I.UploadStatus.success,o.src=n.pid,o.url=n.url,o.width=n.width,o.height=n.height,o.type=n.type):(a.showToast({icon:"none",title:t.errStr||"上传失败"}),o.uploadStatus=I.UploadStatus.fail),e.triggerEvent("uploadimg",{imgData:o})},fail:function(t){o.uploadStatus=I.UploadStatus.fail,e.triggerEvent("uploadimg",{imgData:o}),a.showToast({title:"上传失败",icon:"none"})}},!0)}else a.showToast({title:"请先上传图片",icon:"none"})}}})})),window.define("17",(function(e,i,o,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L,x){"use strict";var D=e("7")(e("15")),P=e("12")();i.exports=P;try{regeneratorRuntime=P}catch(e){"object"===(void 0===a?"undefined":(0,D.default)(a))?a.regeneratorRuntime=P:t("r","regeneratorRuntime = r")(P)}})),window.define("12",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("15").default;function x(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=x=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function d(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,i){return e[t]=i}}function l(e,t,i,o){var n=t&&t.prototype instanceof u?t:u,s=Object.create(n.prototype),r=new C(o||[]);return a(s,"_invoke",{value:S(e,i,r)}),s}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function u(){}function g(){}function f(){}var m={};d(m,s,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(O([])));w&&w!==i&&o.call(w,s)&&(m=w);var y=f.prototype=u.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function i(a,n,s,r){var c=h(e[a],e,n);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==L(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,s,r)}),(function(e){i("throw",e,s,r)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return i("throw",e,s,r)}))}r(c.arg)}var n;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,a){i(e,o,t,a)}))}return n=n?n.then(a,a):a()}})}function S(e,t,i){var o="suspendedStart";return function(a,n){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===a)throw n;return k()}for(i.method=a,i.arg=n;;){var s=i.delegate;if(s){var r=D(s,i);if(r){if(r===p)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===o)throw o="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o="executing";var c=h(e,t,i);if("normal"===c.type){if(o=i.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o="completed",i.method="throw",i.arg=c.arg)}}}function D(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,D(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=h(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(o.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=f,a(y,"constructor",{value:f,configurable:!0}),a(f,"constructor",{value:g,configurable:!0}),g.displayName=d(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(T.prototype),d(T.prototype,r,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,o,a,n){void 0===n&&(n=Promise);var s=new T(l(t,i,o,a),n);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),d(y,c,"Generator"),d(y,s,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var o in t)i.push(o);return i.reverse(),function e(){for(;i.length;){var o=i.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,o){return s.type="throw",s.arg=e,t.next=i,o&&(t.method="next",t.arg=void 0),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],s=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc");if(r&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(r){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),I(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var o=i.completion;if("throw"===o.type){var a=o.arg;I(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:O(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=x,t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("3",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";function L(e,t,i,o,a,n,s){try{var r=e[n](s),c=r.value}catch(e){return void i(e)}r.done?t(c):Promise.resolve(c).then(o,a)}t.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(o,a){var n=e.apply(t,i);function s(e){L(n,o,a,s,r,"next",e)}function r(e){L(n,o,a,s,r,"throw",e)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports})),window.define("35",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7"),D=x(e("15")),P=x(e("14")),I=x(e("4")),C=x(e("5")),O=0;var k="done",E="running",F="pause",A={taskList:[],isConcurrent:!0,maxQueueSize:1e4,maxConcurrentSize:5,delay:0},B=function(){function e(t){(0,I.default)(this,e),this._options=Object.assign({},A,t),this._concurrentSize=0,this._state=k,this._isAutoPause=!1,this._queue=[],this._allRes=[],this._allErrs=[],this._taskSum=0,this._callbackQueue=[],this._options.isConcurrent||(this._options.maxConcurrentSize=1),this.add.apply(this,(0,P.default)(this._options.taskList))}return(0,C.default)(e,[{key:"_exec",value:function(){var e=this,t=this._options.maxConcurrentSize;if(!this._isAutoPause&&this._state!==F){if(this._queue.length)this._state=E;else if(!this._concurrentSize){if(this._state=k,this._onAllDone){var o=this._onAllDone(this._allRes);this._runCallbacks(o)}return void(this._onFinally&&this._onFinally(this._allRes,this._allErrs))}if(this._queue.length&&!(this._concurrentSize>=t))for(var a=function(){if(!e._queue.length)return{v:void 0};e._concurrentSize++;var t=e._queue.shift();if("function"!=typeof t.taskFn)return console.error("task must be a function"),"continue";Promise.resolve(t.taskFn()).then((function(i){e._allRes[t.idx]=i})).catch((function(i){delete e._onAllDone,e._onError&&e._onError(i,t),e._allErrs[t.idx]=i})).finally((function(){e._concurrentSize--,e._options.delay?i((function(){return e._exec()}),e._options.delay):e._exec()}))},n=this._concurrentSize+1;n<=t;n++){var s=a();if("continue"!==s&&"object"===(0,D.default)(s))return s.v}}}},{key:"_createTaskObj",value:function(e,t){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=Math.ceil(Math.random()*i),a=Math.floor(Math.random()*i),n="_"+ +new Date+"_"+o+a+"_"+O+"_";return O>=9999999999999?O=0:O++,e+n+t}("task");return"object"===(0,D.default)(e)&&(i=e.tid||i,e=e.fn),{idx:t,tid:i,taskFn:e}}},{key:"_autoPause",value:function(){this._isAutoPause=!0}},{key:"_autoStart",value:function(){this._isAutoPause=!1}},{key:"_pushCallback",value:function(e,t){var i={};"function"==typeof e&&(i.resolve=e),"function"==typeof t&&(i.reject=t),this._callbackQueue.push(i)}},{key:"_runCallbacks",value:function(e){var t=this,i=this._callbackQueue.shift();i&&Promise.resolve(e).then((function(e){var o=i.resolve(e);t._runCallbacks(o)})).catch((function(e){i.reject(e),t._onError(e)}))}},{key:"add",value:function(){for(var e=this,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(i&&i.length){if(this._autoPause(),i.length+this._queue.length>this._options.maxQueueSize)throw new Error("任务总数超过最大队列数，当前任务数："+this._queue.length+",对大队列数："+this._options.maxQueueSize);return i.forEach((function(t,i){e._queue.push(e._createTaskObj(t,i+e._taskSum))})),this._taskSum+=i.length,this._autoStart(),this._state!==F&&this.start(),this}}},{key:"unshift",value:function(){for(var e=this,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(i&&i.length){if(i.reverse(),this._autoPause(),i.length+this._queue.length>this._options.maxQueueSize)throw new Error("任务总数超过最大队列数，当前任务数："+this._queue.length+",对大队列数："+this._options.maxQueueSize);return i.forEach((function(t,i){e._queue.unshift(e._createTaskObj(t,i+e._taskSum))})),this._taskSum+=i.length,this._autoStart(),this.start(),this}}},{key:"pop",value:function(){return this._autoPause(),this._queue.pop(),this._taskSum--,this._autoStart(),this}},{key:"shift",value:function(){return this._autoPause(),this._queue.shift(),this._taskSum--,this._autoStart(),this}},{key:"remove",value:function(){for(var e=this,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(i&&i.length)return this._autoPause(),this._queue.forEach((function(t,o){i.includes(t.tid)&&e._queue.splice(o,1)})),this._taskSum=this._taskSum-i.length,this._autoStart(),this}},{key:"clear",value:function(){return this._autoPause(),this._queue=[],this._autoStart(),this._taskSum=0,this}},{key:"abort",value:function(){return this.clear()}},{key:"pause",value:function(){return this._state=F,this}},{key:"start",value:function(){return this._state=E,this._exec(),this}},{key:"getQueue",value:function(){return this._queue}},{key:"getState",value:function(){return this._state}},{key:"setConfig",value:function(e){return this._autoPause(),this._options=Object.assign({},this._options,e),this._autoStart(),this}},{key:"done",value:function(e){return"function"==typeof e&&(this._onAllDone=e),this}},{key:"finally",value:function(e){return"function"==typeof e&&(this._onFinally=e),this}},{key:"catch",value:function(e){return"function"==typeof e&&(this._onError=e),this}},{key:"then",value:function(e,t){return this._pushCallback(e,t),this}}]),e}();t.exports=B})),window.define("106",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("36");Component({properties:{maxlength:{type:Number,value:0},value:{type:String,value:"",observer:function(e,t){this.setData({currLen:e.length})}},placeholder:{type:String,value:""},autoHeight:{type:Boolean,value:!0},confirmType:{type:String,value:"done"},cursorSpacing:{type:Number,value:0}},needTrigger:!0,data:{currLen:0},externalClasses:["placeholder-class","custom-class","num-class"],attached:function(){},detached:function(){},methods:{inputChange:L.throttle((function(e){var t=e.detail.value;this.setData({currLen:t.length}),this.triggerEvent("input",{value:t}),this.data.maxlength&&(t.length?this.needTrigger&&(this.heightChange(),this.needTrigger=!1):(this.heightChange(),this.needTrigger=!0))})),heightChange:function(){this.triggerEvent("heightchange")},focusHandler:function(){this.triggerEvent("focus")},blurHandler:function(){this.triggerEvent("blur")}}})})),window.define("107",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{buttons:{type:Array,value:[],observer:function(e,t){}}},externalClasses:["fix-bottom-bar"],data:{},attached:function(){},detached:function(){},methods:{onTap:function(e){var t=e.currentTarget.dataset.clickFn;t&&this.triggerEvent("buttontap",{clickFn:t})}}})})),window.define("135",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({data:{topBarTitle:"",topBarHeight:64,section:{image:[],name:"",description:"",goods:[]},maxLen:{name:30,description:300,image:9},pictureAreaWidth:0,picScrollLeft:0,imageList:[],pictureLimit:9,currLimit:9,guideImgList:[{title:"发帖带货上线了",des:"我的好物添加商品",img:"https://exp-picture.cdn.bcebos.com/static/grass-guide-1.png"},{title:"发帖带货上线了",des:"商品库挑选种草好物",img:"https://exp-picture.cdn.bcebos.com/static/grass-guide-2.png"},{title:"发帖带货上线了",des:"种草带货更容易被pick哦",img:"https://exp-picture.cdn.bcebos.com/static/grass-guide-3.png"}],submitButtons:[{type:"gradient-plain",text:"删 除",clickFn:"deleteSetcion"},{type:"primary",text:"确 定",clickFn:"saveSection"}],showGoodsGuide:!1,currSwiperIdx:0,hasNextSwiper:!0,fromJingyanSwan:!1,isAgree:!1},tempSwiperIdx:0,sectionIndex:-1,itemWidth:97,startTime:0,pageUUID:0,pageStartTime:0,goodsCacheKey:"",draftStorageKey:L.StorageKey.grassDraft,loadingFlag:!1,onInit:function(){},onLoad:function(e){var t=this;if(e.eid&&(this.draftStorageKey=L.StorageKey.grassTempDraft),"index"in e){this.sectionIndex=parseInt(e.index,10);var i=a.getStorageSync(this.draftStorageKey).list[this.sectionIndex],o=i.image.length,n=o;o<this.data.maxLen.image&&(n+=1);var s=this.itemWidth*n;this.setData({imageList:i.image,section:i,pictureAreaWidth:s},(function(){t.removeSkeleton&&t.removeSkeleton()}))}else this.removeSkeleton&&this.removeSkeleton();var r=x.getSysInfoSync();if(r){var c=r.statusBarHeight+r.navigationBarHeight;this.setData({topBarHeight:c})}this.setData({fromJingyanSwan:"1"===e.fromJingyanSwan})},onReady:function(){var e=this,t=Date.now();this.pageStartTime=t,this.pageUUID=t+Math.random(),this.getCurrUserKey(),this.sendLog({pos:"page",action:"pv"}),a.getStorage({key:"grassAgreementAgreed",success:function(t){t.data&&e.setData({isAgree:!0})}})},onShow:function(){this.startTime=Date.now(),this.goodsCacheKey&&this.getGoodsList()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.pageStartTime)/1e3)})},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return C.globalData.grassShareInfo},changeName:function(e){var t=e.detail.value;this.setData({"section.name":t})},changeDes:function(e){var t=e.detail.value;this.setData({"section.description":t})},updateChooseImage:function(e){var t=e.detail.imageList[0],i=t.id,o={};o["imageList[".concat(i,"]")]=t,this.setData(o)},chooseImage:function(e){var t=this,i=e.detail.imageList,o=this.data.imageList.concat(i),a=o.length,n=a,s=this.data.pictureLimit-a;a<this.data.maxLen.image&&(n+=1);var r=this.itemWidth*n;this.setData({imageList:o,pictureAreaWidth:r,currLimit:s},(function(){t.setData({picScrollLeft:r})}))},uploadResult:function(e){var t=e.detail.imgData,i="section.image[".concat(t.id,"]"),o={};if(t.url){o[i]={src:t.src,url:t.url},o["imageList[".concat(t.id,"].uploadStatus")]=t.uploadStatus,this.setData(o)}else{var a=Object.assign({},this.data.imageList[t.id],{uploadFail:!0}),n={};n["imageList[".concat(t.id,"]")]=a,this.setData(n)}},deletePictureConfirm:function(e){var t=this;a.showActionSheet({itemList:["删除"],itemColor:"#F7534F",success:function(i){if(0===i.tapIndex){var o=e.currentTarget.dataset;"index"in o&&t.deletePicture(o.index)}}})},deletePicture:function(e){var t=this.data.section.image.slice(0),i=this.data.imageList.slice(0),o=0;o=i.length===this.data.maxLen.image?this.data.pictureAreaWidth:this.data.pictureAreaWidth-this.itemWidth,t.splice(e,1),i.splice(e,1),this.setData({imageList:i,"section.image":t,pictureAreaWidth:o})},onButtonTap:function(e){var t=e.detail.clickFn;"function"==typeof this[t]&&this[t]()},deleteSetcion:function(){var e=this;a.showModal({title:"确认删除这条好物吗?",content:"一旦确认删除，内容将无法恢复",showCancel:!0,cancelText:"取消",confirmText:"删除",confirmColor:"#F7534F",success:function(t){if(t.confirm){var i=a.getStorageSync(e.draftStorageKey),o=e.sectionIndex;o>-1&&(i.list.splice(o,1),a.setStorageSync(e.draftStorageKey,i)),a.navigateBack()}}})},goBack:function(){a.showModal({title:"是否放弃编辑的内容",content:"选择放弃后当前编辑的内容将丢失",showCancel:!0,cancelText:"取消",confirmText:"放弃",confirmColor:"#F7534F",success:function(e){e.confirm&&a.navigateBack()}})},saveSection:function(){var e=this;if(!this.loadingFlag&&!this.data.imageList.some((function(e){return e.uploadStatus===L.UploadStatus.waiting}))){var t=this.data.section,i={image:[{require:!0,message:"请至少添加一张图片"}],name:[{require:!0,message:"请填写好物名称"},{min:1,max:this.data.maxLen.name,message:"好物名称字数限制为1-".concat(this.data.maxLen.name,"字")}],description:[{require:!0,message:"请填写好物介绍"},{min:10,max:this.data.maxLen.description,message:"好物介绍字数限制为10-".concat(this.data.maxLen.description,"字")}]};x.validForm(i,t,(function(t){t&&(e.data.section.goods.length?e.data.isAgree?(e.submit(),a.setStorageSync("grassAgreementAgreed",1)):a.showModal({title:"提示",content:"请先阅读并同意协议"}):e.submit())}))}},submit:function(){var e=a.getStorageSync(this.draftStorageKey)||{},t=this.sectionIndex,i=this.data.section;t>-1?e.list[t]=this.data.section:e.list?e.list.push(i):e.list=[i],a.setStorageSync(this.draftStorageKey,e),a.navigateBack()},getCurrUserKey:function(){return new Promise((function(e,t){var i=C.globalData.user.uk;i?e(i):P({url:x.getApiUrl("currUserKey"),data:{},success:function(i){var o=i.data.data;o&&o.uk?(C.globalData.user.uk=o.uk,e(o.uk)):t(i)},fail:function(e){t(e)}},!0)}))},addGoodsHandler:function(){a.getStorageSync("grass_goods_guide_shown")?this.gotoChooseGoods():this.showGrassGoodsGuide(),this.sendLog({pos:"add-goods-btn",action:"click"})},changeGoodsHandler:function(){this.gotoChooseGoods(),this.sendLog({pos:"change-goods-btn",action:"click"})},showGrassGoodsGuide:function(){this.setData({showGoodsGuide:!0})},gotIt:function(){this.closeGrassGoodsGuide(),this.gotoChooseGoods()},changeSwiperCurrent:function(){var e=this.tempSwiperIdx+1,t=this.data.guideImgList.length-1;e>=t&&(e=t),this.setData({currSwiperIdx:e})},changeGuideBtn:function(e){var t=e.detail.current,i=!1;t<this.data.guideImgList.length-1&&(i=!0),this.tempSwiperIdx=t,this.setData({hasNextSwiper:i})},closeGrassGoodsGuide:function(){this.setData({showGoodsGuide:!1}),a.setStorageSync("grass_goods_guide_shown",1)},gotoChooseGoods:function(){var e=this,t=Math.random().toString(36).substr(2);this.goodsCacheKey="jingyan_".concat(t),this.getCurrUserKey().then((function(t){x.jumpTo({appKey:L.APPKEY.shopwindow,appPath:"pages/shop-manage/index",appParam:{uk:t,subentry:"1_3_1",max:1,ids:[],cacheKey:e.goodsCacheKey}})}))},getGoodsList:function(){var e=this;this.createGoods({cacheKey:this.goodsCacheKey}).then((function(t){if(t&&t.length){var i=t.map((function(e){var t=e.imageList.map((function(e){return e.src}));return{title:e.title,imageList:t,pic:t,price:e.price,from:e.platform,coupon:e.coupon,gid:e.gid,clickUrl:e.clickUrl}}));e.setData({"section.goods":i})}e.goodsCacheKey=""})).catch((function(e){var t="";e&&e.errNo&&(t=e.errNo),x.showErrorMsg(t,"商品获取失败")}))},createGoods:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(i,o){a.showLoading({title:"商品获取中"}),e.loadingFlag=!0,P({url:x.getApiUrl("createGoods"),data:t,complete:function(){a.hideLoading(),e.loadingFlag=!1},success:function(e){var t=e.data||{};0===t.errNo?i(t.data.goodsList):o(t)},fail:function(){o()}},!0)}))},deleteGoods:function(){var e=this;a.showModal({title:"提示",content:"确认删除商品吗?",showCancel:!0,cancelText:"取消",confirmText:"删除",confirmColor:"#F7534F",success:function(t){t.confirm&&e.setData({"section.goods":[]})}}),this.sendLog({pos:"delete-goods-btn",action:"click"})},gotoAgreementDetail:function(){x.jumpTo(L.PageName.WebviewZC,{url:"https://jingyan.baidu.com/nstatic/exp-mobile/more/html/agreement-grass.html"})},changeAgreeStatus:function(e){var t=e.detail.value.length;this.setData({isAgree:!!t})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){I(Object.assign({page:"editor-section",url:x.getPagePath(L.PageName.EditorSection),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3)},e))}})})),window.define("139",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("36"),D=e("24"),P=e("34"),I=P.request,C=P.sendLog,O=s();Page({loadingFlag:!1,feedFirstLoad:!0,prevScreen:0,shouldSkeletonRemove:!0,hasRequest:!1,pageStartTime:0,pageUUID:"",data:{tabList:[],checkedId:0,feedList:[],topBarHeight:64,noMore:!1,isError:!1,fromJingyanSwan:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},from:"",scene:"",pagePath:D.PagePath.HomeGrass,showFixMenu:!1,showGrassManageTips:!1},onInit:function(e){this.pageInit(e)},onLoad:function(e){this.pageInit(e)},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"}),this.showGrassManageTips();try{n.setPageInfo&&n.setPageInfo({title:"西番好物种草社区",keywords:"西番，种草",description:"在这里与大家一起分享好物，让生活更美好"})}catch(e){}},onShow:function(){},onHide:function(){},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.pageStartTime)/1e3)})},onPullDownRefresh:function(){},onReachBottom:function(){this.getGrassFeedList()},onShareAppMessage:function(){return O.globalData.grassShareInfo},onPageScroll:function(e){e.scrollTop-this.prevScreen>100&&(this.prevScreen=e.scrollTop,this.checkVisible())},setTopBarHeight:function(){var e=x.getSysInfoSync(),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},reloadCurrPage:function(){var e=this;this.setData({feedList:[],noMore:!1},(function(){e.getGrassFeedList({firstLoad:!0})}))},processOption:function(e){var t={};e.from&&(t.from=e.from),e.scene&&(t.scene=e.scene),t.fromJingyanSwan="1"===e.fromJingyanSwan,this.setData(t)},pageInit:function(e){this.hasRequest||(this.hasRequest=!0,this.processOption(e),this.getGrassFeedList({firstLoad:!0}),this.setTopBarHeight())},changeTab:function(e){var t=e.currentTarget.dataset,i=t.tid,o=t.label;i!==this.data.checkedId&&(this.setData({checkedId:i,feedList:[]}),this.getGrassFeedList({firstLoad:!0,tab:i}),n.pageScrollTo({scrollTop:0,duration:0}),this.sendLog({pos:"home-grass-tab",action:"click",tab:i,tabName:o}))},getGrassFeedList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loadingFlag||this.data.noMore||(this.loadingFlag=!0,n.showLoading({title:"加载中"}),I({url:x.getApiUrl("grassFeedList"),data:{isPv:this.feedFirstLoad?1:0,tab:t.tab||this.data.checkedId},complete:function(){e.loadingFlag=!1,n.hideLoading()},success:function(i){e.feedFirstLoad=!1;var o=i.data;if(0===o.errNo){var a=o.data.grassList||[],n=o.data.channelList||[];!e.data.tabList.length&&n.length&&e.setData({tabList:n}),a&&a.length?(e.changeFeedList(a,t),e.setData({isError:!1})):t.firstLoad?e.setData({isError:!0,errInfoObj:{btnEvtType:D.ELoadFailBtnType.reLoad,errMsg:"暂无数据",btnText:"重新加载"}},(function(){e.removeGrassHomeSkeleton()})):e.setData({noMore:!0})}else e.setData({isError:!0,errInfoObj:{btnEvtType:D.ELoadFailBtnType.reLoad,errMsg:"暂无数据",btnText:"重新加载"}},(function(){e.removeGrassHomeSkeleton()}))},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:D.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}},(function(){e.removeGrassHomeSkeleton()}))}}))},changeFeedList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.data.feedList.concat(t.slice(0));o.firstLoad?this.setData({feedList:a.slice(0,6)},(function(){e.setData({feedList:a},(function(){e.removeGrassHomeSkeleton()})),i((function(){e.checkVisible()}),800)})):this.setData({feedList:a})},checkVisible:function(){this.selectComponent("#card-list").checkVisible()},removeGrassHomeSkeleton:function(){this.shouldSkeletonRemove&&(this.shouldSkeletonRemove=!1,this.removeSkeleton())},goToEditor:function(){this.sendLog({pos:"editor-upload",action:"click"}),x.jumpTo(D.PageName.Editor)},goToMyGrass:function(){this.sendLog({pos:"editor-manage",action:"click"}),x.jumpTo(D.PageName.MyGrass)},openFixMenu:function(){this.setData({showFixMenu:!0}),this.sendLog({pos:"editor-entrance",action:"click"})},closeFixMenu:function(){this.setData({showFixMenu:!1})},showGrassManageTips:function(){var e=this;n.getStorage({key:"grassManageTipsShown",success:function(t){t.data||e.setData({showGrassManageTips:!0})}})},hideGrassManageTips:function(){this.data.showGrassManageTips&&(this.setData({showGrassManageTips:!1}),n.setStorageSync("grassManageTipsShown",1))},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){C(Object.assign({page:"home-grass",url:x.getPagePath(D.PageName.HomeGrass),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3),tab:this.data.checkedId,from:this.data.from,scene:this.data.scene},e))}})})),window.define("145",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({data:{shouldFixed:!1,isCheckedId:1,topBarHeight:64,noMore:!1,isError:!1,fromJingyanSwan:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},from:"",scene:"",pagePath:L.PagePath.MyGrass,tabList:[{id:1,name:"已通过"},{id:2,name:"待审核"},{id:3,name:"未通过"}],qualityList:[{value:0,text:"全部"},{value:1,text:"优质种草帖"},{value:2,text:"普通种草帖"}],quality:0,qualityText:"全部",showFilterList:!1,total:0,myList:[]},startTime:0,pageUUID:0,pageStartTime:0,loadingFlag:!1,initing:!1,pn:0,rn:10,shouldSkeletonRemove:!0,onInit:function(e){this.initing=!0,this.pageInit(e)},onLoad:function(e){this.initing||this.pageInit(e)},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"page",action:"pv"})},onShow:function(){this.startTime=Date.now()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){this.data.myList.length&&this.getMyGrassList()},onShareAppMessage:function(){return C.globalData.grassShareInfo},pageInit:function(e){this.getMyGrassList({firstLoad:!0}),this.setTopBarHeight(),this.setData({fromJingyanSwan:"1"===e.fromJingyanSwan})},removeMyGrassSkeleton:function(){this.shouldSkeletonRemove&&(this.shouldSkeletonRemove=!1,this.removeSkeleton())},setTopBarHeight:function(){var e=x.getSysInfoSync(),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},changeTab:function(e){var t=e.currentTarget.dataset.id;t!==this.data.isCheckedId&&(this.setData({isCheckedId:t}),this.getMyGrassList({firstLoad:!0}),this.sendLog({pos:"my-grass-tab",action:"click",tid:t}))},getMyGrassList:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).firstLoad;if(t&&(this.setData({noMore:!1,isError:!1}),this.pn=0),!this.loadingFlag&&!this.data.noMore){this.loadingFlag=!0,a.showLoading({title:"加载中"});var i={pn:this.pn,rn:this.rn,tab:this.data.isCheckedId};1===this.data.isCheckedId&&(i.quality=this.data.quality),P({url:x.getApiUrl("getMyGrassList"),method:"POST",data:i,complete:function(){e.loadingFlag=!1,a.hideLoading()},onBduss:function(){},success:function(i){var o=i.data;if(0===o.errNo){var a=o.data,n=a.myList,s=a.total;if(n&&n.length){e.pn=a.pn;var r={total:s};s<=e.rn&&(r.noMore=!0),r.myList=t?n.slice(0):e.data.myList.concat(n),e.setData(r,(function(){e.removeMyGrassSkeleton()}))}else t?(e.pn=0,e.setData({isError:!0,total:0,myList:[],errInfoObj:{errMsg:"暂无数据"}},(function(){e.removeMyGrassSkeleton()}))):e.setData({noMore:!0})}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}},(function(){e.removeMyGrassSkeleton()}))},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}},(function(){e.removeMyGrassSkeleton()}))}},!0)}},gotoEditor:function(e){var t=e.currentTarget.dataset,i=t.eid,o=t.vid,a=t.canEdit?0:1;t.isPass?x.jumpTo(L.PageName.Article,{eid:i}):x.jumpTo(L.PageName.Editor,{eid:i,vid:o,isPreview:a})},learnHowToPass:function(){x.jumpTo(L.PageName.Article,{eid:"dca1fa6fb9810bb0a5405246"})},editBtnTap:function(e){this.gotoEditor(e),this.sendLog({pos:"can-edit-btn",action:"click"})},deleteGrassExp:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.loadingFlag){this.loadingFlag=!0,a.showLoading({title:"处理中"});var i=t.eid,o=t.vid,n=t.index;P({url:x.getApiUrl("deleteGrassExp"),method:"POST",data:{eid:i,vid:o},complete:function(){e.loadingFlag=!1,a.hideLoading()},success:function(t){if(0===t.data.errNo){var i=e.data.myList.slice(0);i.splice(n,1),e.setData({myList:i})}else x.showErrorMsg("","操作失败")},fail:function(){x.showErrorMsg("","网络异常，请稍候再试")}})}},deleteBtnTap:function(e){var t=this;a.showModal({title:"确定删除？",content:"内容删除后不可恢复，请确认是否删除？",success:function(i){if(i.confirm){var o=e.currentTarget.dataset,a=o.eid,n=o.vid,s=o.index;t.deleteGrassExp({eid:a,vid:n,index:s})}}})},changeShowFilter:function(){this.setData({showFilterList:!this.data.showFilterList})},chooseQuality:function(e){var t=e.currentTarget.dataset,i=t.quality,o=t.text;this.setData({quality:parseInt(i,10),qualityText:o,showFilterList:!1}),this.getMyGrassList({firstLoad:!0})},sendLog:function(e){I(Object.assign({page:"my-grass",url:x.getPagePath(L.PageName.MyGrass),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3)},e))}})})),window.define("144",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({data:{pagePath:L.PagePath.MultiAnswer,shouldFixed:!1,isContentFixed:!1,isCheckedId:1,noMore:!1,isError:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},from:"",scene:"",topBarHeight:0,topBar:{bgColor:"transparent"},header:{},tabItems:["推荐","最热","最新"],curTabId:0,count:0,multiAnswerItems:[],recommendMultiAnswerItems:[],hasContent:void 0,selectItems:[],isSelectMaskShow:!1,selectMask:{},scrollTop:0,encEid:"",clusterId:"",hasNoMore:!1,relateHasNoMore:!1,fromJingyanSwan:!1,contentMinHeight:0},startTime:0,pageUUID:0,pageStartTime:0,loadingFlag:!1,initing:!1,pn:0,shouldSkeletonRemove:!0,selectBarTop:0,onInit:function(e){this.initing=!0,this.pageInit(e)},onLoad:function(e){this.initing||this.pageInit(e)},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"page",action:"pv"})},onShow:function(){this.startTime=Date.now()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){1!==this.data.hasContent||this.data.hasNoMore||this.getMultiAnswerList(),0!==this.data.hasContent||this.data.relateHasNoMore||this.getRelateFeed()},onShareAppMessage:function(){return C.globalData.shareInfo},onPageScroll:function(e){var t=this;this.data.scrollTop=e.scrollTop;var i={};this.selectBarTop||a.createSelectorQuery().select("#select-item-wrap").boundingClientRect().exec((function(e){t.selectBarTop=e[0].top+t.data.scrollTop})),!this.data.shouldFixed&&this.selectBarTop&&e.scrollTop>this.selectBarTop-this.data.topBarHeight?(i.shouldFixed=!0,i.topBar={bgColor:"rgba(255, 255, 255, 1)",title:"百度经验"},a.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})):this.data.shouldFixed&&this.selectBarTop&&e.scrollTop<=this.selectBarTop-this.data.topBarHeight&&(i.shouldFixed=!1,i.topBar={bgColor:"transparent",title:""},a.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"})),this.setData(i)},pageInit:function(e){this.setInitialPage(e),this.getPageInfo()},setInitialPage:function(e){var t=this,i={},o=x.getSysInfoSync(),a=o.screenHeight,n=o.screenWidth;i.contentMinHeight=a+1-.6957*n- -41;var s=o.statusBarHeight,r=o.navigationBarHeight;i.topBarHeight=s+r,i.fromJingyanSwan="1"===e.fromJingyanSwan,this.data.encEid=e.encEid,this.data.clusterId=Number(e.clusterId);var c=[{type:L.toolsList[0].key,id:Number(e.modelId),name:e.modelName,noId:Number(e.modelNoId),noName:e.modelNoName},{type:L.toolsList[1].key,id:Number(e.systemId),name:e.systemName,noId:Number(e.systemNoId),noName:e.systemNoName},{type:L.toolsList[2].key,id:Number(e.softwareId),name:e.softwareName,noId:Number(e.softwareNoId),noName:e.softwareNoName}];c.forEach((function(e,i){e.displayName=t.calcDisplayName(e,i)})),i.selectItems=c,this.setData(i)},calcDisplayName:function(e,t){var i=e.id&&e.name||"",o=e.noId&&e.noName?" ".concat(e.noName):"";return i?"".concat(i).concat(o):L.toolsList[t].value},removeSktn:function(){this.shouldSkeletonRemove&&(this.shouldSkeletonRemove=!1,this.removeSkeleton())},handleTapMask:function(){this.setData({isSelectMaskShow:!1})},handelToolsChange:function(e){var t=e.detail,i=t.parentId-1,o=this.calcDisplayName(t,i),a=this.data.selectItems;a[i]={type:this.data.selectItems[i].type,id:t.id,name:t.name,noId:t.noId,noName:t.noName,displayName:o},this.setData({selectItems:a,isSelectMaskShow:!1}),this.getMultiAnswerList({isToolsChange:!0})},selectItemTap:function(e){var t=e.currentTarget.dataset;this.data.shouldFixed;this.sendLog({pos:"select-item",action:"click",item:L.toolsList[t.index].key});var i={isSelectMaskShow:!0,encEid:this.data.encEid,clusterId:this.data.clusterId,selectMask:{parentId:t.index+1,curId:t.id,curName:t.name,curNoId:t.noId,curNoName:t.noName}};this.setData(i)},onTapTab:function(e){var t=this,i=e.currentTarget.dataset.id;i!==this.data.curTabId&&this.setData({curTabId:i,hasNoMore:!1},(function(){t.getMultiAnswerList({isTabChange:!0})}))},suggest:function(){var e={clusterId:this.data.clusterId,model:this.data.selectItems[0].id||0,modelNo:this.data.selectItems[0].noId||0,system:this.data.selectItems[1].id||0,systemNo:this.data.selectItems[1].noId||0,software:this.data.selectItems[2].id||0,softwareNo:this.data.selectItems[2].noId||0};P({url:x.getApiUrl("multiAnswerFeedback"),method:"POST",data:e,success:function(e){0===e.data.errNo?a.showToast({title:"反馈成功",icon:"success",duration:2e3}):a.showToast({title:"反馈失败",icon:"none",duration:2e3})},fail:function(){a.showToast({title:"反馈失败",icon:"none",duration:2e3})}})},processList:function(e){return e.forEach((function(e){e.time=x.format(new Date(1e3*e.time),"yyyy.MM.dd"),e.browserTimes=x.countFormatter(e.browserTimes)})),e},getPageInfo:function(){var e=this;a.showLoading({title:"加载中"});var t={eid:this.data.encEid,clusterId:this.data.clusterId,model:this.data.selectItems[0].id,modelNo:this.data.selectItems[0].noId,system:this.data.selectItems[1].id,systemNo:this.data.selectItems[1].noId,software:this.data.selectItems[2].id,softwareNo:this.data.selectItems[2].noId,sort:this.data.curTabId,pn:this.pn};P({url:x.getApiUrl(L.PageName.MultiAnswer),method:"POST",data:t,complete:function(){a.hideLoading()},onBduss:function(){},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data,a=o.list,n=o.count,s=o.header,r=o.relateList,c=o.pn,d={header:s};a&&a.length?(e.pn=c,d.multiAnswerItems=e.processList(a),d.count=n,d.hasContent=1):(d.hasContent=0,r&&r.length?(e.pn=c,d.recommendMultiAnswerItems=e.processList(r)):d.relateHasNoMore=!1),e.setData(d,(function(){e.removeSktn()}))}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}},(function(){e.removeSktn()}))},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}},(function(){e.removeSktn()}))}})},getMultiAnswerList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.isToolsChange,o=t.isTabChange;(i||o)&&(this.pn=0);var a={eid:this.data.encEid,clusterId:this.data.clusterId,model:this.data.selectItems[0].id,modelNo:this.data.selectItems[0].noId,system:this.data.selectItems[1].id,systemNo:this.data.selectItems[1].noId,software:this.data.selectItems[2].id,softwareNo:this.data.selectItems[2].noId,sort:this.data.curTabId,pn:this.pn},n=this.data.curTabId;this.data.recommendMultiAnswerItems=[],P({url:x.getApiUrl("getMultiAnswerList"),method:"POST",data:a,success:function(t){if(e.data.curTabId===n){var a=t.data;if(0===a.errNo){var s=a.data,r=s.list,c=s.count,d=s.pn,l={isError:!1,count:c};r&&r.length?(l.hasContent=1,e.pn=d,l.multiAnswerItems=i||o?e.processList(r):e.data.multiAnswerItems.concat(e.processList(r))):i?(l.hasContent=0,e.getRelateFeed()):l.hasNoMore=!0,e.setData(l)}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})}},fail:function(){e.data.curTabId===n&&e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}})},getRelateFeed:function(){var e=this,t={eid:this.data.encEid,clusterId:this.data.clusterId,pn:this.pn};P({url:x.getApiUrl("getMultiAnswerList"),method:"POST",data:t,success:function(t){var i=t.data;if(0===i.errNo){var o=i.data,a=o.list,n={},s=o.pn;if(a&&a.length){e.pn=s;var r=e.data.recommendMultiAnswerItems;n.recommendMultiAnswerItems=r.concat(e.processList(a))}else n.relateHasNoMore=!0;e.setData(n)}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){I(Object.assign({encEid:this.data.encEid,page:"multi-answer",url:x.getPagePath(L.PageName.MultiAnswer),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3)},e))}})})),window.define("119",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}n();var D=e("24"),P=e("36");Component({properties:{item:{type:Object,value:{}}},data:{},methods:{tapItem:function(e){this.sendLog({pos:"multi-answer-item",action:"click"});var t=e.currentTarget.dataset.eid;P.jumpTo(D.PageName.Article,{eid:t})},sendLog:function(e){this.triggerEvent("sendlog",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({component:"multi-answer-item"},e))}}})})),window.define("122",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{content:{type:Object,value:{}},isVideo:{type:Boolean,value:!0}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("121",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{text:{type:Array,value:[]}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("118",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{content:{type:Object,value:{}},isVideo:{tyep:Boolean,value:!0}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("123",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{content:{type:Object,value:{}},isVideo:{type:Boolean,value:!0}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("120",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";Component({properties:{content:{type:Object,value:{}}},data:{},attached:function(){},detached:function(){},methods:{}})})),window.define("141",(function(e,t,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S,L){"use strict";var x=e("7"),D=x(e("17")),P=x(e("3")),I=e("24"),C=e("36"),O=e("34"),k=O.request,E=O.sendLog,F=s();Page({onIniting:!1,cacheOrderConfig:{},from:"",pageStartTime:0,pageUUID:0,goodsId:"",data:{topBarHeight:64,fromJingyanSwan:!1,showTabContentTeacher:!1,currentCardItemIdx:0,tabActivedIdx:0,tabList:[{text:"我是求职者"},{text:"我是导师"}],localData:{serviceAdvantage:[{text:"平台审核，保障导师经历真实"},{text:"定制辅导，挖掘个人亮点"},{text:"加倍用心，导师奖金与你offer挂钩"}],teacherRules:[{text:"订单分成：每笔服务订单导师分成85%，次月统一结算。"},{text:"奖金激励：若学员成功获得offer，平台额外奖励导师每个订单30～100元不等的奖金，鼓励优质导师脱颖而出。"},{text:"如发现导师作弊、态度不端正等行为，平台将撤销导师资格不予结算。"}]},pageData:{teacherList:[],goodsList:[],broadcastList:[]}},onInit:function(e){this.onIniting=!0,this.pageInit(e)},onLoad:function(e){this.onIniting||this.pageInit(e)},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"}),n.setPageInfo&&n.setPageInfo({title:"互联网求职辅导",keywords:"百度,百度经验,经验小程序,面试,求职辅导,春招",description:"大厂导师一对一"})},onShow:function(){this.startTime=Date.now()},onHide:function(){this.sendLog({pos:"page",action:"lasting-time",lastingTime:Math.round((Date.now()-this.startTime)/1e3)})},onUnload:function(){this.sendLog({pos:"page",action:"user-time",userTime:Math.round((Date.now()-this.pageStartTime)/1e3)})},onShareAppMessage:function(){return F.globalData.interviewGoodsShareInfo},pageInit:function(e){this.setTopBarHeight(),this.getPageInfo(),this.setData({fromJingyanSwan:"1"===e.fromJingyanSwan}),e.from&&(this.from=C.decodeUriComponent(e.from))},removePageSkeleton:function(){this.shouldSkeletonRemove&&(this.shouldSkeletonRemove=!1,this.removeSkeleton())},setTopBarHeight:function(){var e=C.getSysInfoSync("app"),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},changeTabContent:function(e){var t=e.currentTarget.dataset.index;t!==this.data.tabActivedIdx&&(this.setData({tabActivedIdx:t,showTabContentTeacher:1===t}),n.pageScrollTo({scrollTop:0,duration:0}))},getPageInfo:function(){var e=this;k({url:C.getApiUrl(I.PageName.InterviewGoods),success:function(t){var i=t.data.data;e.setData({pageData:i}),e.sendLog({pos:"after",action:"pv"})},fail:function(){}})},gotoOrderDetail:function(e){C.jumpTo(I.PageName.MyOrderDetail,{tpOrderId:e})},getCommitOrderConf:function(e){var t=this;return new Promise((function(i,o){var a=t.cacheOrderConfig[e];a?i(a):k({url:C.getApiUrl("commitFudaoOrder"),data:{goodsId:e,from:t.from},success:function(a){var n=a.data;if(0===n.errNo){var s=n.data.orderData;t.cacheOrderConfig[e]=s,i(s)}else o(a)},fail:function(e){n.showToast({title:"订单创建失败",icon:"none"}),o(e)}},!0)}))},requestPolymerPaymentClick:function(e){var t=e.currentTarget.dataset.goodsId;this.goodsId=t,this.sendLog({pos:"footer-btn-buy",action:"click",goodsId:t})},requestPolymerPayment:function(){var e=this;return(0,P.default)(D.default.mark((function t(){var o,a;return D.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.goodsId,t.next=3,e.getCommitOrderConf(o);case 3:a=t.sent,n.requestPolymerPayment({orderInfo:a,success:function(){n.showToast({title:"支付成功",icon:"success"}),delete e.cacheOrderConfig[o],i((function(){e.gotoOrderDetail(a.tpOrderId)}),1e3)},fail:function(t){n.showToast({title:t.errMsg,icon:"none"}),e.sendLog({pos:"pay-fail",errCode:t.errCode,goodsId:o})}});case 5:case"end":return t.stop()}}),t)})))()},gotoQAList:function(){this.sendLog({pos:"footer-btn-qa",action:"click"}),C.jumpTo(I.PageName.FudaoQAList)},gotoMyOrder:function(){this.sendLog({pos:"footer-btn-order",action:"click"}),C.jumpTo(I.PageName.MyOrder)},changeTeacherSwiper:function(e){var t=e.detail.current;this.sendLog({pos:"teacher-swiper",action:"show",current:t})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){E(Object.assign({page:"interview-goods",url:C.getPagePath(I.PageName.InterviewGoods),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3),from:this.from},e))}})})),window.define("147",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({onIniting:!1,loadingFlag:!1,shouldSkeletonRemove:!0,firstLoadFlag:!0,pageStartTime:0,pageUUID:0,pn:0,rn:10,currPage:0,data:{topBarHeight:64,isError:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},pagePath:L.PagePath.MyOrder,noMore:!1,orderList:[]},onInit:function(){this.onIniting=!0,this.pageInit()},onLoad:function(){this.onIniting||this.pageInit()},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"})},onReachBottom:function(){this.data.orderList.length&&this.getMyOrderList()},onShareAppMessage:function(){return C.globalData.interviewGoodsShareInfo},pageInit:function(){this.setTopBarHeight(),this.getMyOrderList()},setTopBarHeight:function(){var e=x.getSysInfoSync("app"),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},getCurrStatus:function(e){var t=L.payStatus,i={};for(var o in t){var a=t[o];if(e===a.status){i=a;break}}return i},formatOrderListData:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0);return t.map((function(t){var i=e.getCurrStatus(t.status),o=i.text,a=i.className,n=x.format(new Date(1e3*t.payTime),"yyyy-MM-dd hh:mm:ss");return Object.assign(t,{price:t.amount/100,statusText:o,className:a,payTime:n})})),t},changeOrderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.formatOrderListData(e);return this.data.orderList.concat(t)},getMyOrderList:function(){var e=this;if(!this.loadingFlag&&!this.data.noMore){this.loadingFlag=!0,a.showLoading({title:"加载中"});var t={pn:this.pn,rn:this.rn};P({url:x.getApiUrl("getFudaoOrderlist"),data:t,complete:function(){e.loadingFlag=!1,a.hideLoading()},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data,a=o.list,n={};a&&a.length?(e.currPage+=1,e.pn=e.currPage*e.rn,n.orderList=e.changeOrderList(a),o.hasMore||(n.noMore=!0),e.firstLoadFlag&&(e.sendLog({pos:"after",action:"pv"}),e.firstLoadFlag=!1)):e.firstLoadFlag&&(n={isError:!0,noMore:!1,errInfoObj:{errMsg:"暂无数据"}}),e.setData(n)}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}},!0)}},gotoOrderDetail:function(e){var t=e.currentTarget.dataset.tpOrderId;x.jumpTo(L.PageName.MyOrderDetail,{tpOrderId:t}),this.sendLog({pos:"order-list-item",action:"click"})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){I(Object.assign({page:"my-order",url:x.getPagePath(L.PageName.MyOrder),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3),from:this.from},e))}})})),window.define("146",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({pageUUID:0,pageStartTime:0,onIniting:!1,loadingFlag:!1,properties:{orderId:{type:Number}},data:{topBarHeight:64,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},pagePath:L.PagePath.MyOrderDetail,orderDetail:{}},onInit:function(e){this.onIniting=!0,this.pageInit(e)},onLoad:function(e){this.onIniting||this.pageInit(e)},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"})},onShareAppMessage:function(){return C.globalData.interviewGoodsShareInfo},setTopBarHeight:function(){var e=x.getSysInfoSync("app"),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},pageInit:function(e){var t=e.tpOrderId;this.getMyOrderDetail({tpOrderId:t}),this.setTopBarHeight()},setClipboardData:function(e){a.setClipboardData({data:e,success:function(){a.showToast({title:"复制成功",icon:"none"})},fail:function(){a.showToast({title:"复制失败",icon:"none"})}})},copyOrderId:function(){var e=this.data.orderDetail.bdOrderId;this.setClipboardData(e)},getMyOrderDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tpOrderId&&(this.loadingFlag=!0,a.showLoading({title:"加载中"}),P({url:x.getApiUrl("getFudaoOrderDetail"),data:t,complete:function(){e.loadingFlag=!1,a.hideLoading()},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.detail,a=x.format(new Date(1e3*o.ctime),"yyyy-MM-dd hh:mm:ss");o.ctime=a,o.price=o.amount/100,e.setData({orderDetail:o}),e.sendLog({pos:"after",action:"pv"})}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}},!0))},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){I(Object.assign({page:"my-order-detail",url:x.getPagePath(L.PageName.MyOrderDetail),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3)},e))}})})),window.define("148",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("24"),x=e("36"),D=e("34"),P=D.request,I=D.sendLog,C=n();Page({pageStartTime:0,pageUUID:0,data:{topBarHeight:64,isError:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},qaList:[]},onInit:function(){this.onIniting=!0,this.pageInit()},onLoad:function(){this.onIniting||this.pageInit()},onReady:function(){var e=Date.now();this.pageStartTime=e,this.pageUUID=e+Math.random(),this.sendLog({pos:"before",action:"pv"})},onShareAppMessage:function(){return C.globalData.interviewGoodsShareInfo},pageInit:function(){this.setTopBarHeight(),this.getQAList()},setTopBarHeight:function(){var e=x.getSysInfoSync("app"),t=e.statusBarHeight+e.navigationBarHeight;this.topBarHeight=t,this.setData({topBarHeight:t})},getQAList:function(){var e=this;P({url:x.getApiUrl(L.PageName.FudaoQAList),success:function(t){var i=t.data;if(0===i.errNo){var o=i.data.qaList;e.setData({qaList:o}),e.sendLog({pos:"after",action:"pv"})}else e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})},fail:function(){e.setData({isError:!0,errInfoObj:{btnEvtType:L.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}})},childlog:function(e){this.sendLog(e.detail)},sendLog:function(e){I(Object.assign({page:"qa-list",url:x.getPagePath(L.PageName.FudaoQAList),pageUUID:this.pageUUID,TimeOnPage:Math.round((Date.now()-this.pageStartTime)/1e3),from:this.from},e))}})})),window.define("142",(function(e,t,i,o,a,n,s,r,c,d,l,h,p,u,g,f,m,v,w,y,b,T,S){"use strict";var L=e("7")(e("6"));function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,L.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}n();var P=e("24"),I=e("36"),C=e("34"),O=C.request,k=C.sendLog;Page({shouldSkeletonRemove:!0,knowledgeWrapTop:100,firstScroll:!1,requestFlag:!0,startTime:0,encEid:"",data:{shouldFixed:!1,showPage:!1,isError:!1,errInfoObj:{btnEvtType:"RELOAD",errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"},pagePath:"",scrollTop:0,title:"",headData:{},content:[],topBarHeight:64,bannerHeight:0,pageTabHeight:0,statusBarHeight:0,from:"",bgColor:"transparent",borderBottom:"",setColorFlag:0,requestParams:null,knowledgeFeedData:[],noMoreFeed:!1,fromJingyanSwan:!1,pn:0},onLoad:function(e){this.sendLog({pos:"before",action:"pv"});var t=I.getSysInfoSync(),i=t.statusBarHeight+t.navigationBarHeight,o=Math.floor(.571*t.windowWidth)-i;e.from&&(e.from=I.decodeUriComponent(e.from)),this.encEid=e.eid;var a={topBarHeight:i,bannerHeight:o,winHeight:t.screenHeight,statusBarHeight:t.statusBarHeight,pageTabHeight:t.screenHeight-i,from:e.from,requestParams:e,pagePath:I.getPagePath(P.PageName.Knowledge,D({},e)),fromJingyanSwan:"1"===e.fromJingyanSwan};this.setData(a)},onShow:function(e){this.startTime=Date.now()},onHide:function(e){this.sendLog({action:"lasting-time"})},setPageHeadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendLog({pos:"after",action:"pv"}),this.setData({headData:e,pn:e.pn,showPage:!0})},removeskeleton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setData({isError:e.isError}),this.shouldSkeletonRemove&&(this.shouldSkeletonRemove=!1,this.removeSkeleton())},onShareAppMessage:function(){var e=this.data,t=e.headData,i=e.requestParams;return{title:t.title,content:"来自百度经验小程序，帮你解决生活中的所有难题",path:I.getPagePath(P.PageName.Article,D({},i))}},onPageScroll:function(e){var t=this,i=this.data,o=i.setColorFlag,n=i.topBarHeight,s=(i.headData,{});this.firstScroll||(this.firstScroll=!0),a.createSelectorQuery().select("#knowledge-wrap").boundingClientRect().exec((function(e){e&&e.length&&(t.knowledgeWrapTop=e[0].top,n>t.knowledgeWrapTop&&0===o?(s.bgColor="rgba(255,255,255,1)",s.borderBottom="1px solid #ddd",s.setColorFlag=1,s.shouldFixed=!0,s.title="百度经验",a.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"}),t.setData(s)):n<t.knowledgeWrapTop&&1===o&&(s.bgColor="transparent",s.borderBottom="none",s.setColorFlag=0,s.shouldFixed=!1,s.title="",a.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"}),t.setData(s)))}))},onReachBottom:function(){this.getKnowledgeFeed(D(D({},this.data.headData),{},{resetPn:!1})),this.sendLog({pos:"pull-up-refresh",action:"success"})},getKnowledgeFeed:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.eid,o=t.firstLevel,a=t.secondLevel,n=t.resetPn,s=this.data.pn;n&&(s=0,this.setData({pn:0,noMoreFeed:!1})),this.requestFlag&&!this.data.noMoreFeed&&(O({url:I.getApiUrl("knowledgeFeed"),data:{pn:s,eid:i,firstLevel:o,secondLevel:a},complete:function(){e.requestFlag=!0},success:function(t){var i=t.data;if(0===i.errNo){var o=i.data;o.expList&&o.expList.length?e.setData({expList:o.expList,pn:o.pn,noMoreFeed:!o.hasMore}):e.setData({isError:!1,noMoreFeed:!0,errInfoObj:{errMsg:"暂无数据"}})}else e.setData({isError:!0,noMoreFeed:!0,errInfoObj:{btnEvtType:P.ELoadFailBtnType.reLoad,errMsg:"Wi-Fi和移动网络已断开",btnText:"重新加载"}})},fail:function(t){e.setData({isError:!0,noMoreFeed:!0,errInfoObj:{btnEvtType:P.ELoadFailBtnType.reLoad,errMsg:"加载失败",btnText:"重新加载"}})}}),this.requestFlag=!1)},sendLog:function(e){k(Object.assign({encEid:this.encEid,page:"knowlegde",from:this.data.from,TimeOnPage:Math.round((Date.now()-this.startTime)/1e3)},e))},childlog:function(e){this.sendLog(e.detail)}})})),window.__swanRoute="pages/article/article",window.usingComponents=["components/common/top-bar/top-bar","pages/article/standard-tmpl/standard-tmpl","pages/article/food-tmpl/food-tmpl","pages/article/long-article-tmpl/long-article-tmpl","pages/article/business-tmpl/business-tmpl","pages/article/vertical-video/vertical-video","pages/article/zhongcao/zhongcao","components/article/zhongcao-top-bar/zhongcao-top-bar","components/article/step-index-spot/step-index-spot","components/fixed-spot/fixed-spot","components/load-status/load-fail/load-fail","components/common/top-tips/top-tips"],window.usingPluginComponents=[],require("128"),window.__swanRoute="pages/editor-section/editor-section",window.usingComponents=["components/article/zhongcao-top-bar/zhongcao-top-bar","components/common/image-uploader/image-uploader","components/editor/exp-textarea/exp-textarea","components/editor/form-bottom-bar/form-bottom-bar","components/load-status/load-fail/load-fail","components/article/goods-info/goods-info"],window.usingPluginComponents=[],require("135"),window.__swanRoute="pages/editor/editor",window.usingComponents=["components/article/zhongcao-top-bar/zhongcao-top-bar","components/common/image-uploader/image-uploader","components/editor/exp-textarea/exp-textarea","components/article/zhongcao-swiper/zhongcao-swiper","components/editor/form-bottom-bar/form-bottom-bar","components/load-status/load-fail/load-fail","components/article/goods-info/goods-info","pages/article/zhongcao/zhongcao"],window.usingPluginComponents=[],require("136"),window.__swanRoute="pages/feedback-web/feedback-web",window.usingComponents=[],window.usingPluginComponents=[],require("137"),window.__swanRoute="pages/food-menu/food-menu",window.usingComponents=["components/common/double-feed/double-feed"],window.usingPluginComponents=[],require("138"),window.__swanRoute="pages/home-grass/home-grass",window.usingComponents=["components/article/zhongcao-top-bar/zhongcao-top-bar","components/article/zhongcao-feed/zhongcao-feed","components/need-login/need-login","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("139"),window.__swanRoute="pages/home/home",window.usingComponents=["components/fixed-spot/fixed-spot","components/live-list/live-list","components/common/author-view/author-view","components/common/mix-banner/mix-banner","components/common/small-video/small-video","components/live-item-card/live-item-card","components/article/zhongcao-feed/zhongcao-feed","components/common/search-words-banner/search-words-banner","components/common/double-feed/double-feed"],window.usingPluginComponents=[],require("140"),window.__swanRoute="pages/interview-goods/interview-goods",window.usingComponents=["components/common/top-bar/top-bar","components/need-login/need-login"],window.usingPluginComponents=[],require("141"),window.__swanRoute="pages/knowledge/knowledge",window.usingComponents=["components/common/top-bar/top-bar","components/knowledge-list/knowledge-list","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("142"),window.__swanRoute="pages/live/live",window.usingComponents=["components/common/top-bar/top-bar","components/live-list/live-list"],window.usingPluginComponents=[],require("143"),window.__swanRoute="pages/multi-answer/multi-answer",window.usingComponents=["components/common/top-bar/top-bar","components/multi-answer/item/item","components/common/select-mask/select-mask","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("144"),window.__swanRoute="pages/my-grass/my-grass",window.usingComponents=["components/article/zhongcao-top-bar/zhongcao-top-bar","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("145"),window.__swanRoute="pages/my-order-detail/my-order-detail",window.usingComponents=["components/common/top-bar/top-bar","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("146"),window.__swanRoute="pages/my-order/my-order",window.usingComponents=["components/common/top-bar/top-bar","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("147"),window.__swanRoute="pages/qa-list/qa-list",window.usingComponents=["components/common/top-bar/top-bar","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("148"),window.__swanRoute="pages/search/search",window.usingComponents=["components/load-status/load-fail/load-fail","components/common/author-view/author-view","components/common/high-light/high-light","components/article-common/double-feed/double-feed"],window.usingPluginComponents=[],require("149"),window.__swanRoute="pages/showlist/showlist",window.usingComponents=[],window.usingPluginComponents=[],require("150"),window.__swanRoute="pages/steps/steps",window.usingComponents=["components/article/head-video/head-video","components/article/bottom-bar/bottom-bar","components/fixed-spot/fixed-spot","components/load-status/load-fail/load-fail","components/common/author-view/author-view","components/common/top-tips/top-tips","components/common/mix-banner/mix-banner","components/article/header/header","dynamicLib://swan-ad-render/swan-ad-render"],window.usingPluginComponents=[],require("151"),window.__swanRoute="pages/topic/topic",window.usingComponents=["components/common/top-bar/top-bar","components/topic/topic-item/topic-item"],window.usingPluginComponents=[],require("152"),window.__swanRoute="pages/videoFeed/videoFeed",window.usingComponents=["components/video-feed/feed-item/feed-item","components/load-status/load-fail/load-fail"],window.usingPluginComponents=[],require("153"),window.__swanRoute="pages/webview-zc/webview-zc",window.usingComponents=[],window.usingPluginComponents=[],require("154"),window.__swanRoute="pages/webview/webview",window.usingComponents=[],window.usingPluginComponents=[],require("155"),window.__swanRoute="components/article-business/float-button/float-button",window.usingComponents=[],window.usingPluginComponents=[],require("37"),window.__swanRoute="components/article-common/author-info/author-info",window.usingComponents=[],window.usingPluginComponents=[],require("38"),window.__swanRoute="components/article-common/custom-swiper/custom-swiper",window.usingComponents=[],window.usingPluginComponents=[],require("39"),window.__swanRoute="components/article-common/double-feed/double-feed",window.usingComponents=["components/article-common/author-info/author-info"],window.usingPluginComponents=[],require("40"),window.__swanRoute="components/article-common/fixed-tab/fixed-tab",window.usingComponents=[],window.usingPluginComponents=[],require("41"),window.__swanRoute="components/article-common/food-list/food-list",window.usingComponents=["components/article/recipe/recipe","components/article-common/section-title/section-title"],window.usingPluginComponents=[],require("42"),window.__swanRoute="components/article-common/format-content/format-content",window.usingComponents=["components/article-common/custom-swiper/custom-swiper"],window.usingPluginComponents=[],require("43"),window.__swanRoute="components/article-common/long-article-content/long-article-content",window.usingComponents=[],window.usingPluginComponents=[],require("44"),window.__swanRoute="components/article-common/notice/notice",window.usingComponents=[],window.usingPluginComponents=[],require("45"),window.__swanRoute="components/article-common/section-title/section-title",window.usingComponents=[],window.usingPluginComponents=[],require("46"),window.__swanRoute="components/article-common/single-video/single-video",window.usingComponents=[],window.usingPluginComponents=[],require("47"),window.__swanRoute="components/article-common/title/title",window.usingComponents=[],window.usingPluginComponents=[],require("48"),window.__swanRoute="components/article-common/tools-list/tools-list",window.usingComponents=["components/article-common/section-title/section-title"],window.usingPluginComponents=[],require("49"),window.__swanRoute="components/article-food/rec-list/rec-list",window.usingComponents=["components/article-common/section-title/section-title","components/article-common/double-feed/double-feed","components/article/multi-answer/multi-answer"],window.usingPluginComponents=[],require("50"),window.__swanRoute="components/article-vertical/interaction-area/interaction-area",window.usingComponents=["components/need-login/need-login"],window.usingPluginComponents=[],require("51"),window.__swanRoute="components/article-vertical/video-mask/video-mask",window.usingComponents=["components/common/author-view/author-view","components/article-vertical/interaction-area/interaction-area"],window.usingPluginComponents=[],require("52"),window.__swanRoute="components/article/ad-zhihuijinnang/ad-zhihuijinnang",window.usingComponents=[],window.usingPluginComponents=[],require("53"),window.__swanRoute="components/article/bottom-bar/bottom-bar",window.usingComponents=["components/common/comment-popup/comment-popup","components/need-login/need-login"],window.usingPluginComponents=[],require("54"),window.__swanRoute="components/article/brief/brief",window.usingComponents=[],window.usingPluginComponents=[],require("55"),window.__swanRoute="components/article/dislike-popup/dislike-popup",window.usingComponents=["components/common/popup/popup","components/need-login/need-login"],window.usingPluginComponents=[],require("56"),window.__swanRoute="components/article/feedback/feedback",window.usingComponents=["components/article/jubao/jubao","components/article/dislike-popup/dislike-popup","components/need-login/need-login"],window.usingPluginComponents=[],require("57"),window.__swanRoute="components/article/fold-cmp/fold-cmp",window.usingComponents=[],window.usingPluginComponents=[],require("58"),window.__swanRoute="components/article/food-line/food-line",window.usingComponents=[],window.usingPluginComponents=[],require("59"),window.__swanRoute="components/article/format-content-n/format-content-n",window.usingComponents=["dynamicLib://swan-ad-render/swan-ad-render"],window.usingPluginComponents=[],require("60"),window.__swanRoute="components/article/goods-info/goods-info",window.usingComponents=[],window.usingPluginComponents=[],require("61"),window.__swanRoute="components/article/guess-you-like/guess-you-like",window.usingComponents=[],window.usingPluginComponents=[],require("62"),window.__swanRoute="components/article/head-video/head-video",window.usingComponents=[],window.usingPluginComponents=[],require("63"),window.__swanRoute="components/article/header/header",window.usingComponents=["components/article/brief/brief","components/common/author-view/author-view"],window.usingPluginComponents=[],require("64"),window.__swanRoute="components/article/jubao/jubao",window.usingComponents=[],window.usingPluginComponents=[],require("65"),window.__swanRoute="components/article/knowledge-popup/knowledge-popup",window.usingComponents=["components/common/popup/popup","components/knowledge-list/knowledge-list"],window.usingPluginComponents=[],require("66"),window.__swanRoute="components/article/multi-answer/chosen-topic/chosen-topic",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("67"),window.__swanRoute="components/article/multi-answer/item/item",window.usingComponents=["components/article/multi-answer/pure-text/pure-text","components/article/multi-answer/multi-img/multi-img","components/article/multi-answer/single-img/single-img","components/article/multi-answer/video-text/video-text","components/article/multi-answer/live/live","components/article/multi-answer/video-sheet/video-sheet","components/article/multi-answer/wenku-course/wenku-course","components/common/mix-banner/mix-banner","components/article/multi-answer/chosen-topic/chosen-topic","dynamicLib://swan-ad-render/swan-ad-render"],window.usingPluginComponents=[],require("68"),window.__swanRoute="components/article/multi-answer/live/live",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("69"),window.__swanRoute="components/article/multi-answer/multi-answer",window.usingComponents=["components/article/multi-answer/item/item"],window.usingPluginComponents=[],require("70"),window.__swanRoute="components/article/multi-answer/multi-img/multi-img",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("71"),window.__swanRoute="components/article/multi-answer/pure-text/pure-text",window.usingComponents=[],window.usingPluginComponents=[],require("72"),window.__swanRoute="components/article/multi-answer/single-img/single-img",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("73"),window.__swanRoute="components/article/multi-answer/video-sheet/video-sheet",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("74"),window.__swanRoute="components/article/multi-answer/video-text/video-text",window.usingComponents=["components/article/multi-answer/pure-text/pure-text"],window.usingPluginComponents=[],require("75"),window.__swanRoute="components/article/multi-answer/wenku-course/wenku-course",window.usingComponents=[],window.usingPluginComponents=[],require("76"),window.__swanRoute="components/article/notice/notice",window.usingComponents=[],window.usingPluginComponents=[],require("77"),window.__swanRoute="components/article/platform/platform",window.usingComponents=["components/common/select-mask/select-mask"],window.usingPluginComponents=[],require("78"),window.__swanRoute="components/article/recipe/add-food/add-food",window.usingComponents=[],window.usingPluginComponents=[],require("79"),window.__swanRoute="components/article/recipe/recipe",window.usingComponents=["components/article/recipe/add-food/add-food"],window.usingPluginComponents=[],require("80"),window.__swanRoute="components/article/showlist-head-card/showlist-head-card",window.usingComponents=[],window.usingPluginComponents=[],require("81"),window.__swanRoute="components/article/step-index-spot/step-index-spot",window.usingComponents=[],window.usingPluginComponents=[],require("82"),window.__swanRoute="components/article/tools/tools",window.usingComponents=["components/article/recipe/recipe"],window.usingPluginComponents=[],require("83"),window.__swanRoute="components/article/unformat-content/unformat-content",window.usingComponents=[],window.usingPluginComponents=[],require("84"),window.__swanRoute="components/article/video-feed/feed-item/feed-item",window.usingComponents=["components/common/author-view/author-view"],window.usingPluginComponents=[],require("85"),window.__swanRoute="components/article/video-feed/video-feed",window.usingComponents=["components/article/video-feed/feed-item/feed-item"],window.usingPluginComponents=[],require("86"),window.__swanRoute="components/article/zd-payask-card/zd-payask-card",window.usingComponents=[],window.usingPluginComponents=[],require("87"),window.__swanRoute="components/article/zhongcao-desc/zhongcao-desc",window.usingComponents=[],window.usingPluginComponents=[],require("88"),window.__swanRoute="components/article/zhongcao-feed/zhongcao-feed",window.usingComponents=["components/need-login/need-login"],window.usingPluginComponents=[],require("89"),window.__swanRoute="components/article/zhongcao-swiper/zhongcao-swiper",window.usingComponents=[],window.usingPluginComponents=[],require("90"),window.__swanRoute="components/article/zhongcao-top-bar/zhongcao-top-bar",window.usingComponents=["components/common/top-tips/top-tips"],window.usingPluginComponents=[],require("91"),window.__swanRoute="components/common/author-view/author-view",window.usingComponents=[],window.usingPluginComponents=[],require("92"),window.__swanRoute="components/common/comment-popup/comment-popup",window.usingComponents=["components/common/popup/popup"],window.usingPluginComponents=[],require("93"),window.__swanRoute="components/common/double-feed/double-feed",window.usingComponents=["components/common/author-view/author-view","components/common/mix-banner/mix-banner","components/common/small-video/small-video"],window.usingPluginComponents=[],require("94"),window.__swanRoute="components/common/high-light/high-light",window.usingComponents=[],window.usingPluginComponents=[],require("95"),window.__swanRoute="components/common/image-uploader/image-uploader",window.usingComponents=[],window.usingPluginComponents=[],require("96"),window.__swanRoute="components/common/mix-banner/mix-banner",window.usingComponents=[],window.usingPluginComponents=[],require("97"),window.__swanRoute="components/common/popup/popup",window.usingComponents=[],window.usingPluginComponents=[],require("98"),window.__swanRoute="components/common/search-words-banner/search-words-banner",window.usingComponents=[],window.usingPluginComponents=[],require("99"),window.__swanRoute="components/common/select-mask/select-mask",window.usingComponents=[],window.usingPluginComponents=[],require("100"),window.__swanRoute="components/common/small-video/small-video",window.usingComponents=["components/common/author-view/author-view"],window.usingPluginComponents=[],require("101"),window.__swanRoute="components/common/top-bar/top-bar",window.usingComponents=["components/common/search-words-banner/search-words-banner","components/common/top-tips/top-tips"],window.usingPluginComponents=[],require("102"),window.__swanRoute="components/common/top-tips/top-tips",window.usingComponents=[],window.usingPluginComponents=[],require("103"),window.__swanRoute="components/common/topest-full-layer/topest-full-layer",window.usingComponents=[],window.usingPluginComponents=[],require("104"),window.__swanRoute="components/common/video-tip/video-tip",window.usingComponents=["components/common/topest-full-layer/topest-full-layer"],window.usingPluginComponents=[],require("105"),window.__swanRoute="components/editor/exp-textarea/exp-textarea",window.usingComponents=[],window.usingPluginComponents=[],require("106"),window.__swanRoute="components/editor/form-bottom-bar/form-bottom-bar",window.usingComponents=[],window.usingPluginComponents=[],require("107"),window.__swanRoute="components/fixed-spot/fixed-spot",window.usingComponents=[],window.usingPluginComponents=[],require("108"),window.__swanRoute="components/fullscreen-video/gesture-layer/gesture-layer",window.usingComponents=[],window.usingPluginComponents=[],require("109"),window.__swanRoute="components/fullscreen-video/video-area/video-area",window.usingComponents=["components/fullscreen-video/gesture-layer/gesture-layer"],window.usingPluginComponents=[],require("110"),window.__swanRoute="components/knowledge-list/knowledge-item/knowledge-item",window.usingComponents=[],window.usingPluginComponents=[],require("111"),window.__swanRoute="components/knowledge-list/knowledge-list",window.usingComponents=["components/knowledge-list/knowledge-item/knowledge-item"],window.usingPluginComponents=[],require("112"),window.__swanRoute="components/live-item-card/live-item-card",window.usingComponents=["components/live-item-card/status/status"],window.usingPluginComponents=[],require("113"),window.__swanRoute="components/live-item-card/status/status",window.usingComponents=[],window.usingPluginComponents=[],require("114"),window.__swanRoute="components/live-list/live-list",window.usingComponents=["components/live-item-card/live-item-card"],window.usingPluginComponents=[],require("115"),window.__swanRoute="components/load-status/load-fail/load-fail",window.usingComponents=[],window.usingPluginComponents=[],require("116"),window.__swanRoute="components/loading-fmp/loading-fmp",window.usingComponents=[],window.usingPluginComponents=[],require("117"),window.__swanRoute="components/multi-answer/img-cover/img-cover",window.usingComponents=[],window.usingPluginComponents=[],require("118"),window.__swanRoute="components/multi-answer/item/item",window.usingComponents=["components/multi-answer/single-img-multi-step/single-img-multi-step","components/multi-answer/single-img-single-step/single-img-single-step","components/multi-answer/multi-img-multi-step/multi-img-multi-step"],window.usingPluginComponents=[],require("119"),window.__swanRoute="components/multi-answer/multi-img-multi-step/multi-img-multi-step",window.usingComponents=[],window.usingPluginComponents=[],require("120"),window.__swanRoute="components/multi-answer/multi-step-text/multi-step-text",window.usingComponents=[],window.usingPluginComponents=[],require("121"),window.__swanRoute="components/multi-answer/single-img-multi-step/single-img-multi-step",window.usingComponents=["components/multi-answer/multi-step-text/multi-step-text","components/multi-answer/img-cover/img-cover"],window.usingPluginComponents=[],require("122"),window.__swanRoute="components/multi-answer/single-img-single-step/single-img-single-step",window.usingComponents=["components/multi-answer/img-cover/img-cover"],window.usingPluginComponents=[],require("123"),window.__swanRoute="components/need-login/need-login",window.usingComponents=[],window.usingPluginComponents=[],require("124"),window.__swanRoute="components/topic/topic-item/topic-item",window.usingComponents=["components/live-item-card/live-item-card"],window.usingPluginComponents=[],require("125"),window.__swanRoute="components/video-feed/feed-item/feed-item",window.usingComponents=["components/common/author-view/author-view"],window.usingPluginComponents=[],require("126"),window.__swanRoute="pages/article/business-tmpl/business-tmpl",window.usingComponents=["components/article-business/float-button/float-button","components/article-common/author-info/author-info","components/article-common/single-video/single-video","components/article-common/food-list/food-list","components/article-common/tools-list/tools-list","components/article-common/format-content/format-content","components/article-common/notice/notice","components/article/jubao/jubao","components/article-common/section-title/section-title","components/article-common/double-feed/double-feed","components/article/bottom-bar/bottom-bar"],window.usingPluginComponents=[],require("129"),window.__swanRoute="pages/article/food-tmpl/food-tmpl",window.usingComponents=["components/article-common/author-info/author-info","components/article-common/single-video/single-video","components/article-common/food-list/food-list","components/article/feedback/feedback","components/article/jubao/jubao","components/article-common/notice/notice","components/article-common/fixed-tab/fixed-tab","components/article/bottom-bar/bottom-bar","components/article-common/title/title","components/article-food/rec-list/rec-list","components/common/mix-banner/mix-banner","components/article/ad-zhihuijinnang/ad-zhihuijinnang","components/loading-fmp/loading-fmp","components/article-common/format-content/format-content","components/article/fold-cmp/fold-cmp","dynamicLib://swan-ad-render/swan-ad-render","components/article/guess-you-like/guess-you-like"],window.usingPluginComponents=[],require("130"),window.__swanRoute="pages/article/long-article-tmpl/long-article-tmpl",window.usingComponents=["components/article/multi-answer/multi-answer","components/article-common/author-info/author-info","components/article/feedback/feedback","components/article/jubao/jubao","components/article-common/notice/notice","components/article/bottom-bar/bottom-bar","components/article-common/title/title","components/article-food/rec-list/rec-list","components/loading-fmp/loading-fmp","components/article-common/long-article-content/long-article-content","components/article/fold-cmp/fold-cmp","dynamicLib://swan-ad-render/swan-ad-render","components/article/guess-you-like/guess-you-like"],window.usingPluginComponents=[],require("131"),window.__swanRoute="pages/article/standard-tmpl/standard-tmpl",window.usingComponents=["components/article/head-video/head-video","components/article/header/header","components/article/showlist-head-card/showlist-head-card","components/article/brief/brief","components/article/tools/tools","components/article/format-content-n/format-content-n","components/article/notice/notice","components/article/unformat-content/unformat-content","components/article/feedback/feedback","components/article/bottom-bar/bottom-bar","components/article/multi-answer/multi-answer","components/article/jubao/jubao","components/article/video-feed/video-feed","components/article/food-line/food-line","components/article/ad-zhihuijinnang/ad-zhihuijinnang","components/common/mix-banner/mix-banner","components/article/platform/platform","components/article/knowledge-popup/knowledge-popup","components/loading-fmp/loading-fmp","components/article/zd-payask-card/zd-payask-card","components/article/fold-cmp/fold-cmp","dynamicLib://swan-ad-render/swan-ad-render","components/article/guess-you-like/guess-you-like"],window.usingPluginComponents=[],require("132"),window.__swanRoute="pages/article/vertical-video/vertical-video",window.usingComponents=["components/common/video-tip/video-tip","components/fullscreen-video/gesture-layer/gesture-layer","components/fullscreen-video/video-area/video-area","components/common/topest-full-layer/topest-full-layer","pages/article/standard-tmpl/standard-tmpl","components/article-vertical/video-mask/video-mask","components/common/comment-popup/comment-popup","components/load-status/load-fail/load-fail","components/common/popup/popup"],window.usingPluginComponents=[],require("133"),window.__swanRoute="pages/article/zhongcao/zhongcao",window.usingComponents=["components/common/author-view/author-view","components/article/zhongcao-swiper/zhongcao-swiper","components/article/zhongcao-desc/zhongcao-desc","components/article/bottom-bar/bottom-bar","components/article/goods-info/goods-info","components/article/zhongcao-feed/zhongcao-feed"],window.usingPluginComponents=[],require("134")}(__hacked);
//# sourceMappingURL=otherPagesCommon.js.map