!function(e){e.global,e.Function;var t=e.setTimeout,o=e.setInterval,i=(e.setImmediate,e.requestAnimationFrame);e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis;window.define("98",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.generalShare=o.DEFAULT_INFO_TYPE=o.DEFAULT_CMD_CHANNEL=o.getDKLKey=void 0;var w=o.getDKLKey=function(){var e=_(regeneratorRuntime.mark((function e(t,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.stringify({activity_id:t,url:o}),e.next=3,(0,P.b64EnDecode)({operateContent:i});case 3:return a=e.sent,e.abrupt("return",a.data&&a.data.algorithmResult);case 5:case"end":return e.stop()}}),e,this)})));return function(t,o){return e.apply(this,arguments)}}(),P=e(99);function _(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,o){return function i(a,n){try{var r=t[a](n),s=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(s)}("next")}))}}var C,D=o.DEFAULT_CMD_CHANNEL=["weixin_friend","weixin_timeline","qqfriend","qqdenglu","baiduhi","sinaweibo"],x=o.DEFAULT_INFO_TYPE=0;o.generalShare=(C=_(regeneratorRuntime.mark((function e(t){var o,i,n,r,s,c,u,p,d,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.klParams,i=t.shareParams,!o){e.next=14;break}if(n=o.activityId,r=o.klUrl,n&&r){e.next=6;break}return console.warn("配置度口令，参数activityId、klUrl都不能为空。"),e.abrupt("return");case 6:return s=i.command||{},c=s.cmd_pannel,u=s.info,p=(u=void 0===u?{}:u).type,d=u.title,l=u.content,e.next=12,w(n,r);case 12:h=e.sent,i.command={cmd_pannel:c||D,info:{type:p||x,title:d||i.title,content:l||i.content,key:h}};case 14:a.openShare(Object.assign({},i));case 15:case"end":return e.stop()}}),e,void 0)}))),function(e){return C.apply(this,arguments)})})),window.define("99",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.b64EnDecode=void 0;var w=e(92),P=e(51),_=e(4),C=e(100);o.b64EnDecode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.operateType,o=void 0===t?0:t,i=e.operateContent,a=void 0===i?"":i,n=(0,C.AESencrypt)(JSON.stringify({operateContent:a,timestamp:Date.now()})),r=P.API.b64EnDecode,s=(0,_.performanceLogTime)({},"start_request");return(0,w.request)({url:r,data:{token:n,operateType:o,operateContent:a}}).then((function(e){return s=(0,_.performanceLogTime)(s,"end_request"),Object.assign({},e,{_reqLogTime:s})}))}})),window.define("100",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.AESencrypt=function(e){return w.AES.encrypt(e,P,{iv:_,mode:w.mode.CBC,padding:w.pad.Pkcs7}).toString()};var w=e(101),P="1ngvdxjggnp11js8",_="9709m6tb1bbid6cu";P=w.enc.Utf8.parse(P),_=w.enc.Utf8.parse(_)})),window.define("101",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w,P,_=_||function(e,t){var o={},i=o.lib={},a=function(){},n=i.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var a=0;a<e;a++)t[i+a>>>2]|=(o[a>>>2]>>>24-a%4*8&255)<<24-(i+a)%4*8;else if(65535<o.length)for(a=0;a<e;a+=4)t[i+a>>>2]=o[a>>>2];else t.push.apply(t,o);return this.sigBytes+=e,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o=[],i=0;i<t;i+=4)o.push(4294967296*e.random()|0);return new r.init(o,t)}}),s=o.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++){var a=t[i>>>2]>>>24-i%4*8&255;o.push((a>>>4).toString(16)),o.push((15&a).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new r.init(o,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++)o.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new r.init(o,t)}},p=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,i=o.words,a=o.sigBytes,n=this.blockSize,s=a/(4*n);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*n,a=e.min(4*t,a),t){for(var c=0;c<t;c+=n)this._doProcessBlock(i,c);c=i.splice(0,t),o.sigBytes-=a}return new r.init(c,a)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new l.HMAC.init(e,o).finalize(t)}}});var l=o.algo={};return o}(Math);P=(w=_).lib.WordArray,w.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,i=this._map;e.clamp(),e=[];for(var a=0;a<o;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,r=0;4>r&&a+.75*r<o;r++)e.push(i.charAt(n>>>6*(3-r)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,o=this._map;(i=o.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],a=0,n=0;n<t;n++)if(n%4){var r=o.indexOf(e.charAt(n-1))<<n%4*2,s=o.indexOf(e.charAt(n))>>>6-n%4*2;i[a>>>2]|=(r|s)<<24-a%4*8,a++}return P.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,o,i,a,n,r){return((e=e+(t&o|~t&i)+a+r)<<n|e>>>32-n)+t}function o(e,t,o,i,a,n,r){return((e=e+(t&i|o&~i)+a+r)<<n|e>>>32-n)+t}function i(e,t,o,i,a,n,r){return((e=e+(t^o^i)+a+r)<<n|e>>>32-n)+t}function a(e,t,o,i,a,n,r){return((e=e+(o^(t|~i))+a+r)<<n|e>>>32-n)+t}for(var n=_,r=(c=n.lib).WordArray,s=c.Hasher,c=n.algo,u=[],p=0;64>p;p++)u[p]=4294967296*e.abs(e.sin(p+1))|0;c=c.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var r=0;16>r;r++){var s=e[c=n+r];e[c]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}r=this._hash.words;var c=e[n+0],p=(s=e[n+1],e[n+2]),d=e[n+3],l=e[n+4],h=e[n+5],g=e[n+6],m=e[n+7],f=e[n+8],v=e[n+9],b=e[n+10],y=e[n+11],I=e[n+12],S=e[n+13],T=e[n+14],w=e[n+15],P=t(P=r[0],D=r[1],C=r[2],_=r[3],c,7,u[0]),_=t(_,P,D,C,s,12,u[1]),C=t(C,_,P,D,p,17,u[2]),D=t(D,C,_,P,d,22,u[3]);P=t(P,D,C,_,l,7,u[4]),_=t(_,P,D,C,h,12,u[5]),C=t(C,_,P,D,g,17,u[6]),D=t(D,C,_,P,m,22,u[7]),P=t(P,D,C,_,f,7,u[8]),_=t(_,P,D,C,v,12,u[9]),C=t(C,_,P,D,b,17,u[10]),D=t(D,C,_,P,y,22,u[11]),P=t(P,D,C,_,I,7,u[12]),_=t(_,P,D,C,S,12,u[13]),C=t(C,_,P,D,T,17,u[14]),P=o(P,D=t(D,C,_,P,w,22,u[15]),C,_,s,5,u[16]),_=o(_,P,D,C,g,9,u[17]),C=o(C,_,P,D,y,14,u[18]),D=o(D,C,_,P,c,20,u[19]),P=o(P,D,C,_,h,5,u[20]),_=o(_,P,D,C,b,9,u[21]),C=o(C,_,P,D,w,14,u[22]),D=o(D,C,_,P,l,20,u[23]),P=o(P,D,C,_,v,5,u[24]),_=o(_,P,D,C,T,9,u[25]),C=o(C,_,P,D,d,14,u[26]),D=o(D,C,_,P,f,20,u[27]),P=o(P,D,C,_,S,5,u[28]),_=o(_,P,D,C,p,9,u[29]),C=o(C,_,P,D,m,14,u[30]),P=i(P,D=o(D,C,_,P,I,20,u[31]),C,_,h,4,u[32]),_=i(_,P,D,C,f,11,u[33]),C=i(C,_,P,D,y,16,u[34]),D=i(D,C,_,P,T,23,u[35]),P=i(P,D,C,_,s,4,u[36]),_=i(_,P,D,C,l,11,u[37]),C=i(C,_,P,D,m,16,u[38]),D=i(D,C,_,P,b,23,u[39]),P=i(P,D,C,_,S,4,u[40]),_=i(_,P,D,C,c,11,u[41]),C=i(C,_,P,D,d,16,u[42]),D=i(D,C,_,P,g,23,u[43]),P=i(P,D,C,_,v,4,u[44]),_=i(_,P,D,C,I,11,u[45]),C=i(C,_,P,D,w,16,u[46]),P=a(P,D=i(D,C,_,P,p,23,u[47]),C,_,c,6,u[48]),_=a(_,P,D,C,m,10,u[49]),C=a(C,_,P,D,T,15,u[50]),D=a(D,C,_,P,h,21,u[51]),P=a(P,D,C,_,I,6,u[52]),_=a(_,P,D,C,d,10,u[53]),C=a(C,_,P,D,b,15,u[54]),D=a(D,C,_,P,s,21,u[55]),P=a(P,D,C,_,f,6,u[56]),_=a(_,P,D,C,w,10,u[57]),C=a(C,_,P,D,g,15,u[58]),D=a(D,C,_,P,S,21,u[59]),P=a(P,D,C,_,l,6,u[60]),_=a(_,P,D,C,y,10,u[61]),C=a(C,_,P,D,p,15,u[62]),D=a(D,C,_,P,v,21,u[63]);r[0]=r[0]+P|0,r[1]=r[1]+D|0,r[2]=r[2]+C|0,r[3]=r[3]+_|0},_doFinalize:function(){var t=this._data,o=t.words,i=8*this._nDataBytes,a=8*t.sigBytes;o[a>>>5]|=128<<24-a%32;var n=e.floor(i/4294967296);for(o[15+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),o[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(o.length+1),this._process(),o=(t=this._hash).words,i=0;4>i;i++)a=o[i],o[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),n.MD5=s._createHelper(c),n.HmacMD5=s._createHmacHelper(c)}(Math),function(){var e,t=_,o=(e=t.lib).Base,i=e.WordArray,a=(e=t.algo).EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=(s=this.cfg).hasher.create(),a=i.create(),n=a.words,r=s.keySize,s=s.iterations;n.length<r;){c&&o.update(c);var c=o.update(e).finalize(t);o.reset();for(var u=1;u<s;u++)c=o.finalize(c),o.reset();a.concat(c)}return a.sigBytes=4*r,a}});t.EvpKDF=function(e,t,o){return a.create(o).compute(e,t)}}(),_.lib.Cipher||function(e){var t=(h=_).lib,o=t.Base,i=t.WordArray,a=t.BufferedBlockAlgorithm,n=h.enc.Base64,r=h.algo.EvpKDF,s=t.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,o,i){return("string"==typeof o?g:l).encrypt(e,t,o,i)},decrypt:function(t,o,i){return("string"==typeof o?g:l).decrypt(e,t,o,i)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=h.mode={},u=function(e,t,o){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var a=0;a<o;a++)e[t+a]^=i[a]},p=(t.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();p.Encryptor=p.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize;u.call(this,e,t,i),o.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),p.Decryptor=p.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,a=e.slice(t,t+i);o.decryptBlock(e,t),u.call(this,e,t,i),this._prevBlock=a}}),c=c.CBC=p,p=(h.pad={}).Pkcs7={pad:function(e,t){for(var o,a=(o=(o=4*t)-e.sigBytes%o)<<24|o<<16|o<<8|o,n=[],r=0;r<o;r+=4)n.push(a);o=i.create(n,o),e.concat(o)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:c,padding:p}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=t.createEncryptor;else o=t.createDecryptor,this._minBufferSize=1;this._mode=o.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(c=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t=(e=n.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var o=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:o})}},t.SerializableCipher=o.extend({cfg:o.extend({format:c}),encrypt:function(e,t,o,i){i=this.cfg.extend(i);var a=e.createEncryptor(o,i);return t=a.finalize(t),a=a.cfg,d.create({ciphertext:t,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(o,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),h=(h.kdf={}).OpenSSL={execute:function(e,t,o,a){return a||(a=i.random(8)),e=r.create({keySize:t+o}).compute(e,a),o=i.create(e.words.slice(t),4*o),e.sigBytes=4*t,d.create({key:e,iv:o,salt:a})}},g=t.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:h}),encrypt:function(e,t,o,i){return o=(i=this.cfg.extend(i)).kdf.execute(o,e.keySize,e.ivSize),i.iv=o.iv,(e=l.encrypt.call(this,e,t,o.key,i)).mixIn(o),e},decrypt:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),o=i.kdf.execute(o,e.keySize,e.ivSize,t.salt),i.iv=o.iv,l.decrypt.call(this,e,t,o.key,i)}})}(),function(){for(var e=_,t=e.lib.BlockCipher,o=e.algo,i=[],a=[],n=[],r=[],s=[],c=[],u=[],p=[],d=[],l=[],h=[],g=0;256>g;g++)h[g]=128>g?g<<1:g<<1^283;var m=0,f=0;for(g=0;256>g;g++){var v=(v=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&v^99;i[m]=v,a[v]=m;var b=h[m],y=h[b],I=h[y],S=257*h[v]^16843008*v;n[m]=S<<24|S>>>8,r[m]=S<<16|S>>>16,s[m]=S<<8|S>>>24,c[m]=S,S=16843009*I^65537*y^257*b^16843008*m,u[v]=S<<24|S>>>8,p[v]=S<<16|S>>>16,d[v]=S<<8|S>>>24,l[v]=S,m?(m=b^h[h[h[I^b]]],f^=h[h[f]]):m=f=1}var T=[0,1,2,4,8,16,32,64,128,27,54];o=o.AES=t.extend({_doReset:function(){for(var e=(o=this._key).words,t=o.sigBytes/4,o=4*((this._nRounds=t+6)+1),a=this._keySchedule=[],n=0;n<o;n++)if(n<t)a[n]=e[n];else{var r=a[n-1];n%t?6<t&&4==n%t&&(r=i[r>>>24]<<24|i[r>>>16&255]<<16|i[r>>>8&255]<<8|i[255&r]):(r=i[(r=r<<8|r>>>24)>>>24]<<24|i[r>>>16&255]<<16|i[r>>>8&255]<<8|i[255&r],r^=T[n/t|0]<<24),a[n]=a[n-t]^r}for(e=this._invKeySchedule=[],t=0;t<o;t++)n=o-t,r=t%4?a[n]:a[n-4],e[t]=4>t||4>=n?r:u[i[r>>>24]]^p[i[r>>>16&255]]^d[i[r>>>8&255]]^l[i[255&r]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,r,s,c,i)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,l,a),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,i,a,n,r,s){for(var c=this._nRounds,u=e[t]^o[0],p=e[t+1]^o[1],d=e[t+2]^o[2],l=e[t+3]^o[3],h=4,g=1;g<c;g++){var m=i[u>>>24]^a[p>>>16&255]^n[d>>>8&255]^r[255&l]^o[h++],f=i[p>>>24]^a[d>>>16&255]^n[l>>>8&255]^r[255&u]^o[h++],v=i[d>>>24]^a[l>>>16&255]^n[u>>>8&255]^r[255&p]^o[h++];l=i[l>>>24]^a[u>>>16&255]^n[p>>>8&255]^r[255&d]^o[h++],u=m,p=f,d=v}m=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[h++],f=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[h++],v=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^o[h++],l=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^o[h++],e[t]=m,e[t+1]=f,e[t+2]=v,e[t+3]=l},keySize:8});e.AES=t._createHelper(o)}(),t.exports=_})),window.define("256",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(51);Component({options:{addGlobalClass:!0},properties:{__id__:{type:String},__name__:{type:String},__title__:{type:String},__type__:{type:String},groupMsg:{type:Object,value:{},observer:function(){this.setTransform()}},isShow:{type:Boolean,value:!1},countDownTime:{type:String,value:"0"}},data:{transformStyle:""},attached:function(){},methods:{onPopupCloseClick:function(){this.triggerOutEvent("toggleGroupLayer",{isOpen:!1})},onJoinGroupLayer:function(){var e=this.data.groupMsg.groupId;this.triggerOutEvent("toggleGroupLayer",{groupId:e,isOpen:!1}),(0,w.bdxdAddLog)(this,{compTargetId:"ssv_280",userExtra:{}})},triggerOutEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.triggerEvent(e,t)},setTransform:function(){var e="transform:translateX("+5*((this.properties.groupMsg&&this.properties.groupMsg.headPortraits&&this.properties.groupMsg.headPortraits.length||0)-1)*P.rpx/2+"rpx);";this.setData({transformStyle:e})}}})})),window.define("276",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(48),_=e(51),C=e(277);Component({options:{addGlobalClass:!0},properties:{bestShopCoupon:{type:Object,value:{},observer:function(e){if(e&&e[0]&&e[0].promotionType===_.promotionTypeMap.mPriceN)this.setData({showCouponBar:!0,promotionList:e});else if(e&&e.batchId&&e.remainingTime&&e.remainingTime>0){var t=!1;+e.remainingTime<"86400000"&&(t=!0),this.addCouponShowLog(),this.setData({showCouponBar:!0,showCountDownBar:t,countDownTime:e.remainingTime})}}},from:{type:String,value:""}},data:{countDownTime:0,showCouponBar:!1,showCountDownBar:!1,promotionList:[]},methods:{addCouponShowLog:function(){(0,w.bdxdAddLog)(this,{compTargetId:"ssv_607",logType:P.bdtjLogType.elemShow})},closeCouponBar:function(){this.setData({showCouponBar:!1}),(0,w.bdxdAddLog)(this,{compTargetId:"ssv_606"}),this.triggerEvent("setBottomCoupon")},gotoActive:function(){var e=this.data.promotionList[0].promotionId;(0,C.jumpToDuTab)({promotionId:e,pos:"bottomBanner",log:{compTargetId:"ssv_639"}})}}})})),window.define("277",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jumpToDuTab=void 0;var w=e(58),P={bottomBanner:"ozxj_6_223-113__na",couponLayer:"ozxj_6_224-113__na",cart:"ozxj_6_225-113__na"};o.jumpToDuTab=function(e){var t=e.promotionId,o=e.pos,i=e.log,a=void 0===i?{}:i,n={routerInfo:{url:"/sf/talos/cartactivity",data:{action:{type:"anchor",value:t}}},ext:{sa:P[o]}};(0,w.openBdboxWebview)({module:"browser",action:"invokeTalosBeeLandingPage",parameters:{startparams:JSON.stringify({mainBizName:"box.rnplugin.searchmanifest",subBizName:"SearchDuhuasuan",bundleName:"SearchDuhuasuan",moduleName:"SearchDuhuasuan"}),bizparams:JSON.stringify(n)},log:a})}})),window.define("279",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Component({properties:{couponInfo:{type:Object,value:{}}}})})),window.define("281",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(277);Component({options:{addGlobalClass:!0},properties:{couponInfo:{type:Object,value:{}}},methods:{gotoActive:function(){var e=this.properties.couponInfo.promotionId;(0,w.jumpToDuTab)({promotionId:e,pos:"couponLayer",log:{compTargetId:"ssv_638"}}),this.triggerEvent("gotoActive")}}})})),window.define("283",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(59),_=e(284),C=e(285),D=e(286),x={1:"去使用",2:"已使用",3:"已失效",4:"立即领取",5:"立即领取",6:"已失效"},k={1:{name:"去使用",value:""},2:{name:"已使用",value:"iconcoupon-used"},3:{name:"已失效",value:"iconcoupon-invalid"},4:{name:"立即领取",value:""},5:{name:"已领取",value:"iconcoupon-got"},6:{name:"已失效",value:"iconcoupon-lose"}};Component({options:{addGlobalClass:!0},externalClasses:["custom-class"],properties:{couponClassify:{type:Number,observer:function(e){this.setData({btnText:x[e],couponIcon:k[e].value||""})}},couponInfo:{type:Object,value:{},observer:function(e){e&&this.setCouponData(e)}},status:{type:Number,value:1,observer:function(e){this.setData({btnText:x[e],couponIcon:k[e].value||""})}},showRulerArea:{type:Boolean,value:!1},couponBizType:{type:Number,value:2},couponType:{type:Number,value:1},currentSelect:{type:Boolean,value:!1},couponFuncType:{type:String,value:P.COUPON_FUNC_TYPE_MAP.ENABLE_TAKE},isMyRedPacketType:{type:Boolean,value:!1}},data:{btnText:"去使用",couponTypeText:"",couponIcon:"",useRulerOpen:!1,couponFuncTypeMap:P.COUPON_FUNC_TYPE_MAP,couponData:{},isMutiLineContent:!1,mutiLineStyle:!1,isRedPacketType:!1},methods:{onCouponClick:function(){var e=this.properties,t=e.couponClassify,o=e.couponInfo,i=e.couponFuncType;e.isMyRedPacketType||-1!==[P.COUPON_FUNC_TYPE_MAP.ENABLE_TAKE,P.COUPON_FUNC_TYPE_MAP.ENABLE_SELECT,P.COUPON_FUNC_TYPE_MAP.ENABLE_USE].indexOf(i)&&this.dispatch("onCouponClick",{couponClassify:t,couponInfo:o})},onUseRuler:function(e){this.setData({useRulerOpen:!this.data.useRulerOpen})},setCouponData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.salePrice,o=e.rangeType,i=e.newPersonCoupon,a=e.useStart,n=e.useEnd,r=e.useTimeRange,s=e.platformCouponDesc,c=e.promotionBizType,u=e.redPacketDesc,p=e.subTitle,d=e.promotionType,l=e.perPromotionUseDesc,h=this.properties,g=h.couponFuncType,m=h.couponBizType,f=h.couponType,v=h.isMyRedPacketType,b=(0,D.isRedPacket)(g),y=(0,D.isMultiplePromotion)(d),I={inited:!0,couponPriceLen:t.toString().length>7?7:t.toString().length,rangeText:(0,D.getCouponRangeText)(m,o,g,v,y,l),couponRootClass:(0,D.getCouponThemeClass)(m,g,d),couponTypeText:(0,_.getCouponTypeText)({couponBizType:m,promotionBizType:c,newPersonCoupon:i,subTitle:p,isForceEmpty:b||v}),couponUseTime:(0,D.getCouponUseTime)({useStart:a,useEnd:n,useTimeRange:r}),couponMainText:(0,D.getCouponMainText)({couponInfo:e,couponType:f,isMyRedPacketType:v,couponFuncType:g}),platformCouponDesc:(0,D.getCouponDesc)(s,u)};this.setData({couponData:I,isRedPacketType:b})},handRuleIconTap:function(){this.data.isMutiLineContent&&this.setData({mutiLineStyle:!this.data.mutiLineStyle})}},lifetimes:{ready:function(){var e=this,o=this.properties,i=o.showRulerArea,a=o.isMyRedPacketType,n=(o.couponInfo||{}).platformCouponDesc;i&&((void 0===n?"":n)||a)&&t((function(){var t={compContext:e,hiddenElement:".coupon-rule-hidden-text",normalElement:".coupon-rule-text"};(0,C.checkTextOverflow)(t).then((function(t){e.setData({isMutiLineContent:t})}))}),100)}}})})),window.define("284",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getPromotionTitle=o.getCouponTypeText=void 0;var w=e(51);o.getCouponTypeText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.promotionBizType,o=e.couponBizType,i=e.newPersonCoupon,a=e.isForceEmpty,n=void 0!==a&&a,r=e.subTitle,s="";return n?s:r||(1===t?s="平台活动":2===t?s="店铺活动":1===i?s="新人专属":1===o?s="平台优惠券":2===o&&(s="店铺优惠券"),s)},o.getPromotionTitle=function(e){var t=e.promotionType,o=e.limitCondition,i=e.discountPrice,a="";return t===w.promotionTypeMap.fullPromotion?a="满"+Number(o)+"减"+Number(i):t===w.promotionTypeMap.multiplePromotion?a="每满"+Number(o)+"减"+Number(i):t===w.promotionTypeMap.mPriceN&&(a=Number(i)+"元"+Number(o)+"件"),a}})),window.define("285",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};o.checkTextOverflow=function(e){var t=e.compContext,o=e.hiddenElement,i=e.normalElement,n=e.compareKey,r=void 0===n?"width":n;return new Promise((function(e){var n=a.createSelectorQuery().in(t);n.select(o).boundingClientRect().exec(),n.select(i).boundingClientRect().exec((function(t){var o=w(t||[],2),i=o[0],a=o[1];if(i&&a){var n=i[r]>a[r];e(n)}}))}))}})),window.define("286",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w;Object.defineProperty(o,"__esModule",{value:!0}),o.getCouponDesc=o.getCouponMainText=o.getCouponUseTime=o.getCouponThemeClass=o.getCouponRangeText=o.isMultiplePromotion=o.isRedPacket=void 0;var P=e(59),_=e(51);function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var D={1:(w={},C(w,-1,"平台通用"),C(w,2,"指定商品可用"),C(w,3,"指定店铺可用"),C(w,4,"指定品类可用"),w),2:{1:"全场通用",2:"部分商品可用"}},x=o.isRedPacket=function(e){return e===P.COUPON_FUNC_TYPE_MAP.RED_PACKET_USE||e===P.COUPON_FUNC_TYPE_MAP.RED_PACKET_UNABLE_USE||e===P.COUPON_FUNC_TYPE_MAP.RED_PACKET_USE_DETAIL};o.isMultiplePromotion=function(e){return e===_.promotionTypeMap.multiplePromotion},o.getCouponRangeText=function(e,t,o,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return a?n:x(o)?P.RED_PACKET_RANGE_MAP[o]:i?P.MY_RED_PACKET_RANGE_MAP[P.COUPON_FUNC_TYPE_MAP.MY_RED_PACKET]:D[e]&&D[e][t]},o.getCouponThemeClass=function(e,t,o){return[P.COUPON_FUNC_TYPE_MAP.PROMOTION_COUPON,P.COUPON_FUNC_TYPE_MAP.ALREADY_USED,P.COUPON_FUNC_TYPE_MAP.UNABLE_USE,P.COUPON_FUNC_TYPE_MAP.RED_PACKET_USE,P.COUPON_FUNC_TYPE_MAP.RED_PACKET_UNABLE_USE,P.COUPON_FUNC_TYPE_MAP.RED_PACKET_USE_DETAIL,P.COUPON_FUNC_TYPE_MAP.MY_RED_PACKET,P.COUPON_FUNC_TYPE_MAP.UNABLE_LOSE].includes(t)?"coupon-card-func-type-"+t:"coupon-card-type-"+e},o.getCouponUseTime=function(e){var t=e.useStart,o=e.useEnd,i=e.useTimeRange;return t&&o?t+"-"+o:i||void 0},o.getCouponMainText=function(e){var t=e.couponInfo,o=e.couponType,i=e.isMyRedPacketType,a=e.couponFuncType,n=t.promotionType;return o===_.COUPON_TYPE.NPRICE?t.salePrice+"元购优惠券":1!==t.isNoThreshold?n===_.promotionTypeMap.multiplePromotion?"每满"+t.fullPrice+"元可用":"满"+t.fullPrice+"元可用":i||x(a)?i||x(a)?"无使用门槛":void 0:"无门槛"},o.getCouponDesc=function(e,t){return e||(t||P.DEFAULT_MY_REDPACT_DESC)}})),window.define("288",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w,P=e(92),_=e(51),C=e(59),D=e(4),x=e(126),k=(w=x)&&w.__esModule?w:{default:w};var L=1,A=n().globalData.siteData.appId;Component({options:{addGlobalClass:!0},properties:{couponPopupShow:{type:Boolean,value:!1,observer:function(e){this.setData({isVisiable:e})}},couponList:{type:Array,value:[],observer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return 1!==e.newPersonCoupon})),o=e.filter((function(e){return 1===e.newPersonCoupon}));this.setData({formatCouponList:t.map((function(e){return Object.assign({isHad:!1},e)})),newPersonCouponList:o.map((function(e){return Object.assign({isHad:!1},e)}))})}},promotionList:{type:Array,value:[],observer:function(e){this.formatPromotion(e)}},spuId:{type:String,value:0}},data:{isVisiable:!1,formatCouponList:[],newPersonCouponList:[],couponTypeMap:C.COUPON_FUNC_TYPE_MAP,popupCloseStyle:C.POPUP_CLOSE_STYLE,closeWrapStyle:C.CLOSE_WRAP_STYLE,formatPromotionList:[],mPriceN:8},logicData:{generalParams:{id:"coupon-take",name:"coupon-take",type:"coupon-take",title:"领券"}},attached:function(){},methods:{formatPromotion:function(e){e&&e.length&&this.setData({formatPromotionList:e.map((function(e){var t=e.endTime,o=e.startTime,i=e.discountPrice,a=e.limitCondition,n=o.split(" ")[0].replace(/-/g,"."),r=t.split(" ")[0].replace(/-/g,".");return Object.assign({},e,{originStartTime:o,originEndTime:t,startTime:n,endTime:r,useStart:n,useEnd:r,salePrice:i,fullPrice:a})}))})},takeCoupon:function(e){var t=this,o=e.couponInfo,i=e.antiCheatVo,a=n().globalData.pageData[o.shopId],r="",s="";if((0,D.parsePageQuery)().directCouponId||(0,D.parsePageQuery)().directTaskId?(r=(0,D.parsePageQuery)().directCouponId||"",s=(0,D.parsePageQuery)().directTaskId||""):a&&(a.directCouponId||a.directTaskId)&&(r=a.directCouponId||"",s=a.directTaskId||""),!this.isTaking){this.isTaking=!0;var c=function(){t.data.newPersonCouponList.forEach((function(e){e.batchId===o.batchId&&(e.takeStatus=L)})),t.setData({formatCouponList:t.data.formatCouponList.map((function(e){return e.batchId===o.batchId?Object.assign({},e,{takeStatus:L}):e})),newPersonCouponList:t.data.newPersonCouponList})},u={appId:A,batchId:o.batchId,shopId:o.shopId};this.properties.spuId&&(u.spuId=this.properties.spuId),i&&(u.antiCheatVo=i),(r||s)&&(u.directCouponInfo={directCouponId:r,directTaskId:s}),(0,P.request)({url:_.API.couponTake,data:u}).then((function(e){c(),(0,D.normalToast)({title:"优惠券领取成功"})})).catch((function(e){e&&700004==+e.status&&c(),e.statusCode!==_.RESPONSE_STATUS.LIMIT&&(0,D.normalToast)({title:_.errorTips[_.API.couponTake][e.status]||e.statusInfo||_.errorTips[_.API.couponTake][500]})})).finally((function(){t.isTaking=!1})),(0,D.bdxdAddLog)(this,{compTargetId:"ssv_152",userExtra:{batch_id:o.batchId,spu_id:this.properties.spuId,comp_material_id:o.batchId}})}},onClosePopup:function(){this.dispatch("onClosePopup")}},messages:{onCouponClick:function(e){var t=this;this.dispatch("onCouponClick",Object.assign({},e.value));var o=e.value.couponInfo;return k.default.hgzAs(_.antifraudConfig.userGrowth).then((function(e){t.takeCoupon({couponInfo:o,antiCheatVo:e})})).catch((function(){t.takeCoupon({couponInfo:o})}))}}})})),window.define("290",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P,_=e(92),C=e(51),D=e(284),x=e(4);function k(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var L="优惠",A="领券",E=(k(P={},"platform",1),k(P,"shop",2),P),O={todaySpecial:"todaySpecial",newPersonCoupon:"newPersonCoupon",platformActivity:"platformActivity",shopActivity:"shopActivity",platformCoupon:"platformCoupon",shopCoupon:"shopCoupon"},R=[O.todaySpecial,O.newPersonCoupon,O.platformActivity,O.shopActivity,O.platformCoupon,O.shopCoupon];Component({options:{addGlobalClass:!0},properties:{couponList:{type:Array,value:[],observer:function(e){e&&e.length&&this.initCouponBarList(e)}},promotionList:{type:Array,value:[],observer:function(e){e&&e.length&&this.initPromotionList(e)}},platformRedPacket:{type:Object,value:null,observer:function(e){e&&e.salePrice&&this.initPlatformRedPacket(e)}},wrapStyle:{type:Object,value:{}},theme:{type:String,value:"dark"},spuId:{type:String,value:""},spuRestStock:{type:Number,value:0}},data:{couponBarList:[],couponPopupShow:!1,isShowTodaySpecial:!0,isShowPlatfromRedPacket:!0,couponText:"",todaySpecialTipText:"",newPersonTipText:"",isShowNewPersonTip:!0,platformRedPacketTipText:"",redPacketImg:"https://mall-static.cdn.bcebos.com/dxdjx/xcx/image/smallRedPacket.png"},logicData:{couponBarMap:{}},messages:{onClosePopup:function(){this.setData({couponPopupShow:!1}),this.triggerEvent("changeCouponLayer",!1)},onLogin:function(e){var t=this;n.canIUse("button.open-type.login")?e&&e.value&&e.value.errMsg===C.LOGIN_SUCCESS_TEXT&&(0,x.isExistBduss)().then((function(){t.conponBarClick(),t.dispatch("productDetailLoginSuccess")})):(0,_.goToLogin)((function(){t.conponBarClick(),t.dispatch("productDetailLoginSuccess")}))}},attached:function(){this.initCouponBarList(),this.initPromotionList()},methods:{closeNewPersonTip:function(){this.setData({isShowNewPersonTip:!1})},getNewCouponTipText:function(e){var t=e[0];return t&&t.couponType===O.newPersonCoupon?t.tip:""},getTodaySpecialTipText:function(e){var o=this,i=e[0];return i&&i.couponType===O.todaySpecial?(t((function(){o.setData({isShowTodaySpecial:!1})}),3e3),i.tip):""},getPlatfromRedPacketTipText:function(e){return e&&e.salePrice?"您有一个¥"+parseFloat(e.salePrice)+"红包，现在下单立即使用":""},initPlatformRedPacket:function(e){this.setData({platformRedPacketTipText:this.getPlatfromRedPacketTipText(e)})},initCouponBarList:function(){var e=this,t=this.logicData.couponBarMap;[O.newPersonCoupon,O.platformCoupon,O.shopCoupon].forEach((function(e){t[e]=[]})),this.properties.couponList.forEach((function(o){1==+o.newPersonCoupon?t[O.newPersonCoupon].push(Object.assign({},e.getCouponBarItem(o),{couponType:O.newPersonCoupon,tag:"新人券",tip:e.getNewPersonTipText(o)})):o.couponBizType===E.platform?t[O.platformCoupon].push(e.getCouponBarItem(o)):t[O.shopCoupon].push(e.getCouponBarItem(o))})),t.newPersonCoupon.sort((function(e,t){return t.source.fullPrice-e.source.fullPrice})),this.setData({couponText:this.properties.couponList.length?A:L}),this.setCouponBarList()},initPromotionList:function(){var e=this,t=this.logicData.couponBarMap;[O.todaySpecial,O.platformActivity,O.shopActivity].forEach((function(e){t[e]=[]})),this.properties.promotionList.forEach((function(o){1===o.promotionTopicType&&e.isInActivityProcessing(o)?t[O.todaySpecial].push(Object.assign({},e.getPromotionBarItem(o),{couponType:O.todaySpecial,tag:"今日特惠",tip:"此商品正在参与特惠，下单再减"+Number(o.discountPrice)+"元"})):o.promotionBizType===E.platform?t[O.platformActivity].push(e.getPromotionBarItem(o)):o.promotionBizType===E.shop&&t[O.shopActivity].push(e.getPromotionBarItem(o))})),this.setCouponBarList()},setCouponBarList:function(){var e=this.logicData.couponBarMap,t=[],o=new Set;R.forEach((function(i){(e[i]||[]).forEach((function(e){var i=e.subTitle,a=void 0===i?"":i;o.has(a)||(o.add(a),-1===e.text.indexOf(a)&&(e.text=a+e.text)),t[0]&&t[0].tag?t.length<2&&t.push(e):t.length<3&&t.push(e)}))})),this.setData({couponBarList:t,newPersonTipText:this.getNewCouponTipText(t),todaySpecialTipText:this.getTodaySpecialTipText(t)})},getCouponBarItem:function(e){var t=e.couponType,o=e.isNoThreshold,i=e.salePrice,a=void 0===i?"":i,n=e.fullPrice,r=void 0===n?"":n,s=e.couponBizType,c=e.subTitle,u=void 0===c?"":c;return{text:15===t?Number(a)+"元购优惠券":1===o?"直减"+Number(a)+"元":"满"+Number(r)+"减"+Number(a),subTitle:u,type:s===E.platform?"platform":"shop",tag:"",source:e}},getPromotionBarItem:function(e){var t=(0,D.getPromotionTitle)(e),o=e.subTitle,i=void 0===o?"":o,a=e.promotionBizType;return{type:(void 0===a?1:a)===E.platform?"platform":"shop",text:t,subTitle:i,tag:"",source:e}},getNewPersonTipText:function(e){var t=e.isNoThreshold,o=e.fullPrice,i=e.salePrice,a=e.useEnd,n=e.useTimeType,r=e.useTimeRange,s=n&&{1:"有效期至"+a,2:void 0===r?"":r}[n];return"新人"+(1===t?"直减"+Number(i)+"元":"满"+Number(o)+"减"+Number(i))+"优惠券 "+s},isInActivityProcessing:function(e){var t=new Date(e.currentSystemTime.replace(/-/g,"/")).getTime(),o=new Date(e.startTime.replace(/-/g,"/")).getTime(),i=new Date(e.endTime.replace(/-/g,"/")).getTime();return!(t<o||t>i)},conponBarClick:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,x.isExistBduss)().then((function(){e.setData({couponPopupShow:!0}),e.triggerEvent("changeCouponLayer",!0)})).catch((function(o){t&&e.triggerEvent("changeCouponLayer",!1),(0,x.addErrorLog)(o,{compTargetId:"bdxd-log-req-coupon-list"},[C.logTypeMap.error])})),(0,x.bdxdAddLog)(this,{compTargetId:"ssv_277",userExtra:{spu_id:this.properties.spuId,comp_material_id:this.properties.spuId}})}}})})),window.define("292",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(51),_=2e3,C={width:160*P.rpx+"rpx",height:36*P.rpx+"rpx"},D="decrease",x="increase";Component({options:{addGlobalClass:!0},externalClasses:["custom-class","custom-number","custom-iconfont"],properties:{min:{type:Number,value:-1/0},max:{type:Number,value:1/0,observer:function(e){this.setInputNum(0)}},step:{type:Number,value:1},minDiabledText:{type:String,value:""},maxDiabledText:{type:String,value:""},precision:{type:Number,value:0},disabled:{type:Boolean,value:!1},placeholder:{type:String,value:""},model:{type:Number,value:1,observer:function(e){this.setInputNum(0)}},inputNumberStyle:{type:Object,value:C},debounceTime:{type:Number,value:80}},data:{disabledMin:!1,disabledMax:!1,value:1},methods:{decreaseNum:function(){var e=this;this.data.disabled||(0,w.debounce)((function(){e.setInputNum(-e.data.step,D)}),this.properties.debounceTime).bind(this)()},increaseNum:function(){var e=this;this.data.disabled||(0,w.debounce)((function(){e.setInputNum(e.data.step,x)}),this.properties.debounceTime).bind(this)()}},financial:function(e){return+Number.parseFloat(e).toFixed(this.data.precision)},setInputNum:function(e,t){if(e&&(e===this.data.step?this.data.disabledMax:this.data.disabledMin))t===D?this.data.disabledMin&&this.showDisable(this.properties.minDiabledText):t===x&&this.data.disabledMax&&this.showDisable(this.properties.maxDiabledText);else{var o=this.data,i=o.min,a=o.max,n=parseInt(this.data.model,10)+e;+a<+i?this.setData({value:this.financial(n)}):n<+i?this.setData({value:this.financial(+i)}):n>+a?this.setData({value:this.financial(+a)}):this.setData({value:this.financial(n)}),0!==e&&this.triggerEvent("change",{val:this.data.value}),this.updateDisabledStatus()}},updateDisabledStatus:function(){var e=void 0,t=void 0,o=this.data,i=o.model,a=o.min,n=o.max;+n<+a||i===+a&&i===+n?(e=!0,t=!0):i===+a?(e=!0,t=!1):i===+n?(e=!1,t=!0):(e=!1,t=!1),this.setData({disabledMin:e,disabledMax:t})},showDisable:function(e){e&&a.showToast({icon:"none",duration:_,title:e})},ready:function(){this.setInputNum(0)}})})),window.define("294",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_=e(92),C=e(51),D=e(4);function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var k="有货",L="请选择规格",A=3e3,E="onAttrItemChange",O="onAttrNumberChange",R="onSubmitBtnClick",N="onCommentSpuChange",B=1,j=99,M=50;Component({options:{addGlobalClass:!0},externalClasses:["custom-class","attr-number-class","submit-btn-class","attr-select-class","attr-info-class"],observers:{allData:function(e){this.initAllData()}},properties:{allData:{type:Object,default:{}},discountArr:{type:Array,value:[]},defaultPrice:{type:Number,default:0},defaultImage:{type:String,default:""},btnText:{type:String,value:"立即购买"},minDiabledText:{type:String,value:"最少买一件, 不能再减了"},maxDiabledText:{type:String,value:"宝贝已不能购买更多了"},selectSpecData:{type:Object,value:null},groupbookPromotion:{type:Object,value:null},scene:{type:Number,value:1,observer:function(e){this.updateSkuSelect(),this.setData({isSceneHasCar:[C.ATTR_LAYER_MAP.GROUP_BOOK_SINGLE_BUY,C.ATTR_LAYER_MAP.NORMAL].includes(e)})}},hasCar:{type:Boolean,value:!1},isCarlistSpu:{type:Boolean,value:!1},isLogin:{type:Boolean,value:null},isShow:{type:Boolean,value:!1,observer:function(){this.setScrollViewHeight()}},hasSkuDiscount:{type:Boolean,value:!1},isSkuSelect:{type:Boolean,value:!1,observer:function(e){"请选择商品规格"===this.data.selectedChangeText&&this.initAllData()}},name:{type:String,value:""},skuIdText:{type:String,value:""},isBjhColumn:{type:Boolean,value:!1},isHalfScreen:{type:Boolean,value:!1},titleHeight:{type:Number,value:0},bestShopCoupon:{type:Object,value:{},observer:function(e){(e&&e[0]&&e[0].promotionType===promotionTypeMap.mPriceN||e&&e.batchId&&e.remainingTime&&e.remainingTime>0)&&this.setData({defaultHeight:"height: 250px"})}},isDelivery:{type:Boolean,value:!1}},data:{allData:{},skuInfo:{},packList:[],specOptionInfo:{},selectedSkuInfo:{},selectedText:"",count:1,min:B,max:B,price:0,stockTip:"",goodsTypeMap:C.goodsTypeMap,specOptionInfoList:[],spikeIcon:"https://mall-static.cdn.bcebos.com/doujin%2FC%2Fimage%2Fxcx%2Fseckill.png",attrLayerMap:C.ATTR_LAYER_MAP,customMaxDisabledText:"",hasSkuSelected:!0,formatNPrice:{integer:"",decimals:""},formatPrice:{start:"",startFix:"",concat:"",end:"",endFix:""},isSceneHasCar:!1,selectedChangeText:"请选择商品规格",scrollAreaHeight:0,defaultHeight:"height: 270px",seckilling:C.beltTypeMap.seckilling},logicData:{picUrlList:[],selectedPackInfo:{},selectedSkuKeysInfo:{},defaultMax:j,isReload:!1},messages:{onLogin:function(e){n.canIUse("button.open-type.login")?e&&e.value&&e.value.errMsg===C.LOGIN_SUCCESS_TEXT&&this.clickConfirm("addressScene"):(0,_.goToLogin)(this.clickConfirm.bind(this))}},methods:{catchMove:function(){},isPackage:function(){return this.properties.allData.packages&&this.properties.allData.packages.length},initAllData:function(){this.properties.allData.goodsType===C.goodsTypeMap.virtualCard&&(this.logicData.defaultMax=20),this.properties.allData.goodsType===C.goodsTypeMap.recharge&&(this.logicData.defaultMax=1),6==+this.properties.allData.scene&&(this.logicData.defaultMax=M),this.getPicUrls(),this.isPackage()?(this.logicData.selectedPackInfo={},this.initPackData()):this.initSkuData("",!0)},getPicUrls:function(){var e=[],t=[],o=[],i=this.properties.defaultImage;e.push(i),this.isPackage()?this.properties.allData.packages.forEach((function(e){t=t.concat(e.skuList)})):t=this.properties.allData.skuList||[],(t=t.filter((function(e){return+e.restStock>0}))||[]).some((function(e){return e.picUrl!==i}))&&(o=t.map((function(e){return e.picUrl+"?skuId="+e.skuId})),e=e.concat(o)),this.logicData.picUrlList=e},previewClick:function(e){var t=e.currentTarget.dataset.url,o=e.currentTarget.dataset.id;this.logicData.picUrlList.length>1&&(t=t+"?skuId="+o),n.previewImage({current:t,urls:this.logicData.picUrlList})},initPackData:function(){var e=this,t=this.properties.allData.packages,o=this.properties.selectSpecData,i=o&&o.packageId,a=void 0;i&&(a=t.some((function(e){var t=!(e.skuList&&e.skuList.length>0);if(+i==+e.id&&!t)return!0})));var n=t.map((function(t,o){var n=!1,r=!(t.skuList&&t.skuList.length>0);return a?+i==+t.id&&(n=!0,e.selectPack(t)):r||Object.keys(e.logicData.selectedPackInfo).length||(n=!0,e.selectPack(t)),Object.assign({},t,{isSelected:n,isDisabled:r})}));this.setData({packList:n})},selectPack:function(e){this.logicData.selectedPackInfo={id:e.id,name:e.name},this.initSkuData({skuList:e.skuList,specifications:e.specifications},!0)},clickPackSelect:function(e){var t=this,o=e.target.dataset,i=o.id,a=o.pack,n=a.isDisabled,r=a.isSelected;if(!n&&!r){var s=this.data.packList;s.map((function(e){e.isSelected=i===e.id,e.isSelected&&(t.logicData.selectedPackInfo={id:i,name:e.name},t.initSkuData({skuList:e.skuList,specifications:e.specifications}))})),this.setData({packList:s})}},initSkuData:function(e,t){var o=e&&e.skuList?e:{skuList:this.properties.allData.skuList||[],specifications:this.properties.allData.specifications||[]};this.initSpecifications(o.specifications),this.initSkuList(o),this.initSkuSelect(o.skuList,t)},initSpecifications:function(e){var t=0,o=e.reduce((function(e,o){var i=o.name,a=o.key,n=o.values.map((function(e){return{optionId:e.optionId,optionValue:e.optionValue,isDisabled:!1,isSelected:!1}}));return e[a]={name:i,values:n,index:t++},e}),{});this.setData({specOptionInfo:o,specOptionInfoList:this.formatSpecOptionInfo(o)})},formatSpecOptionInfo:function(e){var t=Object.keys(e),o=[];return t.map((function(t){o[e[t].index]={key:t,values:e[t].values,name:e[t].name}})),o},initSkuList:function(e){var t=this,o={},i=e.skuList.filter((function(e){return+e.restStock>0}))||[];1===e.specifications.length?i.map((function(e){var t=[],i=void 0,a=void 0,n=void 0,r=void 0;if(e.predictPrice){var s=(String(e.predictPrice)||"").split("."),c=P(s,2),u=c[0];i=void 0===u?"":u;var p=c[1];a=void 0===p?"":p}if(e.groupPredictPrice){var d=(String(e.groupPredictPrice)||"").split("."),l=P(d,2),h=l[0];n=void 0===h?"":h;var g=l[1];r=void 0===g?"":g}e.specifications.map((function(s){t.push(s.optionValue);var c={spikeInfoVO:e.spikeInfoVO,groupSkuInfo:e.groupSkuInfo};o[s.optionId]=Object.assign({},c,{restStock:!e.spikeInfoVO&&e.restStockNoSpike?+e.restStockNoSpike:+e.restStock,price:e.price,longPrice:e.longPrice,skuId:e.skuId,image:e.picUrl,predictPrice:e.predictPrice,predictPriceInteger:i,predictPriceFloat:a,groupPredictText:e.groupPredictText,groupPredictPrice:e.groupPredictPrice,groupPredictPriceInteger:n,groupPredictPriceFloat:r,optionValues:t,predictText:e.predictText,beltType:e.beltType,salePrice:e.salePrice,showSeckill:e.showSeckill})}))})):i.map((function(e,i){var a=t.handleSkuItem(e);for(var n in a)o[n]?o[n].restStock+=+a[n].restStock:o[n]=a[n]})),this.setData({skuInfo:o})},handleSkuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.restStockNoSpike,a=e.restStock,n=e.price,r=e.longPrice,s=e.skuId,c=e.specifications,u=e.picUrl,p=e.spikeInfoVO,d=e.groupSkuInfo,l=e.predictText,h=e.predictPrice,g=e.groupPredictText,m=e.groupPredictPrice,f=e.beltType,v=e.salePrice,b=e.showSeckill,y=c.length,I=c[t],S=I.optionId,T=I.optionValue,w=[T],_=void 0,C=void 0,D=void 0,k=void 0;if(h){var L=(String(h)||"").split("."),A=P(L,2),E=A[0];_=void 0===E?"":E;var O=A[1];C=void 0===O?"":O}if(m){var R=(String(m)||"").split("."),N=P(R,2),B=N[0];D=void 0===B?"":B;var j=N[1];k=void 0===j?"":j}for(var M=x({},S,{restStock:+a,price:this.properties.defaultPrice,image:this.properties.defaultImage,optionValues:w.concat()}),U=Object.keys(o),F=0;F<U.length;F++){var G=U[F],V=this.sortOptionIds(G,S),q=[].concat(G,S).join(";");w=this.sortOptionValues(q,M,o);var H=null;H=V.split(";").length===y?{skuId:s,price:n,image:u}:{price:this.properties.defaultPrice,image:this.properties.defaultImage};var z={spikeInfoVO:p,groupSkuInfo:d};Object.assign(M,x({},V,Object.assign({},H,{restStock:!p&&i?+i:+a,optionValues:w},z,{predictPrice:h,predictPriceInteger:_,predictPriceFloat:C,predictText:l,groupPredictPrice:m,groupPredictPriceInteger:D,groupPredictPriceFloat:k,groupPredictText:g,beltType:f,salePrice:v,longPrice:r,showSeckill:b})))}return Object.assign(o,M),t>=y-1?o:this.handleSkuItem(e,t+1,o)},sortOptionValues:function(e,t,o){var i=e?e.split(";"):[],a={},n=[];return Object.assign(a,t,o),i.map((function(e){n.push.apply(n,a[e].optionValues)})),n},sortOptionIds:function(e,t){var o=e?e.split(";"):[];return t&&o.push(t),o.sort((function(e,t){return e.length===t.length?e.localeCompare(t):e.length-t.length})).join(";")},objectValues:function(e){return Object.keys(e).map((function(t){return e[t]}))},initSkuSelect:function(e,t){if(e.length){var o=!this.properties.isSkuSelect||this.properties.isSkuSelect&&"选款式"!==this.properties.skuIdText;if(t){var i=this.properties.selectSpecData,a=i&&i.skuId,n=i&&i.count,r={},s=void 0;a&&(s=e.some((function(e,t){if(+a==+e.skuId&&+e.restStock>0)return!0}))),s&&e.some((function(e,t){if(+a==+e.skuId)return n=Math.min(+e.restStock,n),!0})),e.some((function(e,t){if(s){if(+a==+e.skuId)return e.specifications.map((function(e,t){r[e.key]=e.optionId})),!0}else if(+e.restStock>0)return e.specifications.map((function(e,t){r[e.key]=e.optionId})),!0})),this.logicData.selectedSkuKeysInfo=r,o&&this.updateSkuSelect(s?n:B)}else{var c={};e.some((function(e,t){if(+e.restStock>0)return e.specifications.map((function(e,t){c[e.key]=e.optionId})),!0})),this.logicData.selectedSkuKeysInfo=c,o&&this.updateSkuSelect()}}},clickSkuSelect:function(e){var t=e.target.dataset,o=t.option,i=t.key,a=o.isDisabled,n=o.isSelected,r=o.optionId;a||(n?delete this.logicData.selectedSkuKeysInfo[i]:this.logicData.selectedSkuKeysInfo[i]=r,this.updateSkuSelect())},updateSkuSelect:function(e){this.updateSpecOptions(),this.updateSelectedText();var t=this.isSelectAll(),o=this.getSkuSelectedSpikeInfo(),i=o.spikeStock,a=o.spikePrice,n=this.getSkuSelectedGroupbookInfo(),r=n.groupbookPrice,s=n.groupbookRemainStock;if(t){var c=Math.min(this.logicData.defaultMax,this.data.selectedSkuInfo.restStock,s,i),u=this.properties.maxDiabledText;r&&this.properties.groupbookPromotion&&this.properties.groupbookPromotion.groupLimitNum&&c===s&&(u="拼团商品限购"+this.properties.groupbookPromotion.groupLimitNum+"件"),c=c<1?1:c,this.updatePriceStock(r||a||this.data.selectedSkuInfo.price,e||B,B,c,k,u)}else this.updatePriceStock(this.properties.defaultPrice,B,B,B,"","");this.setData({hasSkuSelected:t}),this.triggerOuterEvent(E)},getSkuSelectedSpikeInfo:function(){var e=void 0,t=void 0,o=void 0;return this.data.selectedSkuInfo.spikeInfoVO&&(t=this.data.selectedSkuInfo.spikeInfoVO.spikeLimitNum-(this.data.selectedSkuInfo.spikeInfoVO.userUsedNum||0),e=Math.min(this.data.selectedSkuInfo.spikeInfoVO.spikeRestStock,t),o=this.data.selectedSkuInfo.salePrice),{spikeStock:e||j,spikePrice:o}},getSkuSelectedGroupbookInfo:function(){if(this.properties.scene!==C.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY||!this.properties.groupbookPromotion)return{groupbookPrice:"",groupbookRemainStock:j};var e=(this.data.selectedSkuInfo.groupSkuInfo||{}).promotionPrice||"",t=j;return this.properties.groupbookPromotion&&(t=this.properties.groupbookPromotion.groupLimitNum-this.properties.groupbookPromotion.userUsedNum),{groupbookPrice:e,groupbookRemainStock:t||j}},updateSpecOptions:function(){var e=this;this.resetSpecOptions();var t=this.data,o=t.specOptionInfo,i=t.skuInfo,a=this.objectValues(this.logicData.selectedSkuKeysInfo),n=this.sortOptionIds(a.join(";"));this.setData({selectedSkuInfo:i[n]||{}}),Object.keys(o).map((function(t){var n=e.logicData.selectedSkuKeysInfo[t],r=o[t].values.map((function(e){return e.optionId})),s=a.concat();n&&s.splice(s.indexOf(n),1),s=s.join(";"),r.map((function(o){if(n&&o===n)e.handleOptionStatus(t,o,"isSelected",!0);else{var a=e.sortOptionIds(s,o);i[a]&&i[a].restStock||e.handleOptionStatus(t,o,"isDisabled",!0)}}))}))},resetSpecOptions:function(){var e=this.data.specOptionInfo;this.objectValues(e).map((function(e){e.values.map((function(e){e.isDisabled=!1,e.isSelected=!1}))})),this.setData({specOptionInfo:e,specOptionInfoList:this.formatSpecOptionInfo(e)})},handleOptionStatus:function(e,t,o,i){var a=this.data.specOptionInfo,n=Object.assign({},a);n[e].values.map((function(e){e.optionId===t&&(e[o]=i)})),this.setData({specOptionInfo:n,specOptionInfoList:this.formatSpecOptionInfo(n)})},updateSelectedText:function(){var e=this.data.selectedSkuInfo,t="";this.isPackage()&&(t+=this.logicData.selectedPackInfo.name),t&&(t+="，"),t+=e.optionValues&&e.optionValues.length?e.optionValues.join("，"):"";var o=this.properties.isSkuSelect;this.setData(Object.assign({selectedText:t},o?{selectedChangeText:t||"请选择商品规格"}:{}))},updatePriceStock:function(e,t,o,i,a,n){var r=this.properties.isBjhColumn?1:i,s=this.formatPriceFunc(e);this.setData({price:e,formatPrice:s,count:t,min:o,max:r,stockTip:a,customMaxDisabledText:n})},formatPriceFunc:function(e){if(e.includes("-")){var t=e.split("-"),o=P(t,2),i=o[0],a=o[1],n=i.split("."),r=P(n,2),s=r[0],c=void 0===s?"":s,u=r[1],p=void 0===u?"":u,d=a.split("."),l=P(d,2),h=l[0],g=void 0===h?"":h,m=l[1];return{prevPrice:i,nextPrice:a,start:c,startFix:p,concat:"-",end:g,endFix:void 0===m?"":m}}var f=e.split("."),v=P(f,2),b=v[0],y=void 0===b?"":b,I=v[1];return{prevPrice:e,start:y,startFix:void 0===I?"":I,concat:"",end:"",endFix:""}},isSelectAll:function(){var e=this.data.specOptionInfo;return Object.keys(e).length&&Object.keys(this.logicData.selectedSkuKeysInfo).length===Object.keys(e).length},triggerOuterEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.data,i=o.selectedSkuInfo,a=o.selectedText,n=o.count,r=this.isSelectAll(),s={isSelectAll:r,subScene:t.subScene,text:a,selectedList:this.logicData.selectedSkuKeysInfo};if(r){var c={salePrice:i.price,longPrice:i.longPrice,skuId:i.skuId,count:n};this.isPackage()&&Object.assign(c,{packageId:this.logicData.selectedPackInfo.id}),s.info=c}this.triggerEvent(e,s)},clickConfirm:(0,D.debounce)((function(e){"addressScene"===e&&this.properties.isDelivery||(this.isSelectAll()?this.triggerOuterEvent(R,{subScene:e&&e.target&&e.target.dataset.subScene||""}):this.showErrorTip())}),200),changeNumber:function(e){this.setData({count:e.val}),this.triggerOuterEvent(O)},showErrorTip:function(){n.showToast({icon:"none",duration:A,title:L})},setScrollViewHeight:function(){var e=this;this.properties.isHalfScreen?0===this.data.scrollAreaHeight&&t((function(){var t=n.createSelectorQuery().in(e);t.select(".custom-attributes-select").boundingClientRect(),t.select(".head-content").boundingClientRect(),t.select(".bottom-content").boundingClientRect(),t.exec((function(t){var o=e.properties.titleHeight;if(t&&t[0]&&t[0].height){var i=t[0].height-t[1].height-t[2].height-15-o;e.setData({scrollAreaHeight:"height: "+i+"px"})}}))}),200):t((function(){var t=n.createSelectorQuery().in(e);t.select(".custom-attributes-select-info").boundingClientRect(),t.exec((function(t){t&&t[0]&&t[0].height&&e.setData({scrollAreaHeight:"height: "+t[0].height+"px"})}))}),150)},clickReload:function(){this.logicData.isReload=!0,this.setData({selectedChangeText:"请选择商品规格"}),this.resetSpecOptions()},clickSpuComment:function(){var e=this.data,t=(e.specOptionInfo,e.selectedText),o={};o.optionId=this.data.selectedSkuInfo&&this.data.selectedSkuInfo.skuId||"",this.triggerEvent(N,{spuCommentItem:Object.assign({},o,{selectedText:t,isReload:this.logicData.isReload,isSelectAll:"请选择商品规格"!==this.data.selectedChangeText&&this.isSelectAll()})}),this.logicData.isReload=!1}}})})),window.define("296",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(4),_=e(51),C=e(59),D="onPackageChange",x="onAttrItemChange",k="onAttrNumberChange",L="onSubmitBtnClick",A="closeLayer",E="onCommentSpuChange";Component({properties:{isShow:{type:Boolean,value:!1},productData:{type:Object,value:{},observer:function(e){if(1===this.properties.productType){var t,o=e.skuList.map((function(e){return Object.assign({},e,{restStock:+e.restStock?"1":e.restStock})}));t=Object.assign({},e,{skuList:o}),this.setData({productFormatData:t})}}},selectSpecData:{type:Object,value:null},productType:{type:Number,value:_.PRODUCTTYPE.ORDINARY,observer:function(e){1===e&&this.setData({orderMax:1})}},btnText:{type:String,value:""},minDiabledText:{type:String,value:"最少买一件, 不能再减了"},maxDiabledText:{type:String,value:"宝贝已不能购买更多了"},containerStyle:{type:Object,value:{}},scene:{type:Number,value:1},groupbookPromotion:{type:Object,value:null},hasCar:{type:Boolean,value:!1},isCarlistSpu:{type:Boolean,value:!1},discountArr:{type:Array,value:[]},serviceText:{type:String,value:""},hasSkuDiscount:{type:Boolean,value:!1},isSkuSelect:{type:Boolean,value:!1,observer:function(e){e&&this.getTitleHeight()}},spuTitle:{type:String,value:""},name:{type:String,value:""},skuIdText:{type:String,value:""},isNft:{type:Boolean,value:!1},isBjhColumn:{type:Boolean,value:!1},spuId:{type:String,value:""},shopId:{type:String,value:""},couponList:{type:Array,value:[]},promotionList:{type:Array,value:[]},spuStatus:{type:Object,value:{}},bestShopCoupon:{type:Object,value:{}},bottomCouponClose:{type:Boolean,value:!1},isHalfScreen:{type:Boolean,value:!1},isDelivery:{type:Boolean,value:!1}},data:{productFormatData:{},popupCloseStyle:C.POPUP_CLOSE_STYLE,closeWrapStyle:C.CLOSE_WRAP_STYLE,titleHeight:0,skuInfo:[]},methods:{onClickAttrChange:function(e){this.setSelectedSku(e.detail),this.triggerOutEvent(x,Object.assign({},e.detail,{useScene:this.properties.scene}))},onPackageChange:function(e){this.setSelectedSku(e.detail),this.triggerOutEvent(D,Object.assign({},e.detail,{useScene:this.properties.scene}))},onClickNumChange:function(e){this.triggerOutEvent(k,Object.assign({},e.detail,{useScene:this.properties.scene}))},onClickConfirmBtnChange:function(e){var t=e.subScene||this.properties.scene;this.triggerOutEvent(L,Object.assign({},e.detail,{useScene:t}));var o=e.detail&&e.detail.info&&e.detail.info.skuId||"";(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_288":"ssv_333",userExtra:{useScene:t,scene:this.properties.scene,sku_id:o}})},onCommentSpuChange:function(e){var t=e.detail.spuCommentItem;this.triggerOutEvent(E,{spuCommentItem:t})},setSelectedSku:function(e){var t=e.info||{};(e||{}).isSelectAll&&this.setData({skuInfo:[{price:t.longPrice,num:t.count,skuId:t.skuId}]})},onClickCloseChange:function(){this.closeLayer()},triggerOutEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.triggerEvent(e,t)},closeLayer:function(){this.triggerOutEvent(A,{isOpen:!1})},changeCouponLayer:function(e){var t=e.detail;this.triggerEvent("changeCouponLayer",t)},setBottomCoupon:function(){this.triggerEvent("setBottomCoupon")},getTitleHeight:function(){var e=this;t((function(){var t=n.createSelectorQuery().in(e);t.select(".spu-title").boundingClientRect(),t.exec((function(t){if(t&&t[0]&&t[0].height){var o=t[0].height;e.setData({titleHeight:o})}}))}),150)}}})})),window.define("298",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4);function P(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Component({options:{addGlobalClass:!0},externalClasses:["card-border-style","card-wrapper-class"],properties:{__id__:{type:String},__name__:{type:String},__title__:{type:String},__type__:{type:String},groupMsg:{type:Object,value:{},observer:function(e){this.formatGroupMsg(e)}},countDownTime:{type:String,value:"0",observer:function(){this.formatTime()}},isFriend:{type:Boolean,value:!1}},data:{timeArr:["00","00","00"],headPortraits:[]},attached:function(){},methods:{formatTime:function(){var e=(0,w.timeStampConvert)(this.properties.countDownTime).slice(1);this.setData({timeArr:e})},formatGroupMsg:function(e){var t=e.headPortraits,o=e.haveJoin,i=e.canJoinPersons;if(o+i>2){var a=new Array(o+i-t.length).fill("https://mall-static.cdn.bcebos.com/dxdjx/xcx/image/groupDefaultAvatar.png");this.setData({headPortraits:[].concat(P(t),P(a))})}else this.setData({headPortraits:t})},joinGroupClick:function(e){if(this.properties.countDownTime){var t=e.currentTarget.dataset.groupId,o=this.properties.isFriend;this.dispatch("groupLayerSwitch",{groupId:t,isFriend:o,isOpen:!0})}else this.triggerEvent("handleTimeOver")}},messages:{imgLoaded:function(){}}})})),window.define("300",(function(e,t,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(4),_=1,C={HAVE_STYLE:1,NO_STYLE:2};Component({options:{addGlobalClass:!0},externalClasses:["common-class"],properties:{start:{type:Number,value:0,observer:function(){this.run()}},end:{type:Number,value:0,observer:function(){this.run()}},timeStamp:{type:Number,value:0,observer:function(){this.run()}},inputStyle:{type:Number,value:_},outputStyle:{type:Number,value:C.HAVE_STYLE},theme:{type:Number,value:0},useCountDown:{type:Boolean,value:!0}},staticData:{timer:null},data:{day:0,timeArr:["00","00","00"],outputStyleMap:C},attached:function(){this.run()},detached:function(){this.staticData.timer&&clearInterval(this.staticData.timer)},methods:{run:function(){var e=this,t=this.properties.inputStyle===_?this.properties.end-this.properties.start:this.properties.timeStamp;t<=0||(this.setTimeNum(t),!this.staticData.timer&&this.properties.useCountDown&&(this.staticData.timer=o((function(){if((t-=1e3)<0)return e.staticData.timer&&clearInterval(e.staticData.timer),e.staticData.timer=null,void e.dispatch("onEnd");e.setTimeNum(t)}),1e3)))},setTimeNum:function(e){var t=(0,P.timeStampConvert)(e),o=t[0],i=t.slice(1);o>0&&this.dispatch("onDayExist"),this.setData({day:o>0?o:0,timeArr:i})}}})})),window.define("314",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(51),P=e(58),_=e(4);Component({options:{addGlobalClass:!0},properties:{addressDelivery:{type:Object,value:{},observer:function(e){this.setAddressText(e)}}},data:{addressText:""},methods:{setAddressText:function(e){(0,_.bdxdAddLog)(this,{compTargetId:"ssv_651"});var t=e.provinceName,o=e.cityName,i=e.districtName,a=e.detailAddr,n=""+(t.substring(0,1)===o.substring(0,1)?"":t)+o+i+a,r=n.length>12?n.substring(0,12)+"...":n;this.setData({addressText:r})},jumpAddressList:function(){(0,_.bdxdAddLog)(this,{compTargetId:"ssv_650"}),(0,P.jumpToInnerSwan)({path:w.PAGES.ADDRESS_LIST,params:{from:"productBottomBar"}})}}})})),window.define("316",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Component({properties:{coupons:{type:Array,value:[]},buttonPredictPrice:{type:String,value:""}}})})),window.define("321",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P,_,C,D=e(4),x=e(81),k=e(92),L=e(58),A=e(322),E=e(51),O=e(59),R=e(3),N=(C=R)&&C.__esModule?C:{default:C};e(323);function B(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var j=(B(P={},E.ATTR_LAYER_MAP.BUY_ATTR,"ssv_159"),B(P,E.ATTR_LAYER_MAP.BUY_CAR_ATTR,"ssv_160"),B(P,E.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY,"ssv_161"),B(P,E.ATTR_LAYER_MAP.GROUP_BOOK_SINGLE_BUY,"ssv_162"),P),M=(B(_={},E.ATTR_LAYER_MAP.BUY_ATTR,"ssv_328"),B(_,E.ATTR_LAYER_MAP.BUY_CAR_ATTR,"ssv_324"),B(_,E.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY,"ssv_325"),B(_,E.ATTR_LAYER_MAP.GROUP_BOOK_SINGLE_BUY,"ssv_326"),_);Component({options:{addGlobalClass:!0},data:{visitParamExt:{},carAmountOver:!1,showAmount:!1,ballStyle:{},ballInnerStyle:{},showBall:!1,isAdr:r().globalData.siteData.isAdr,attrLayerMap:E.ATTR_LAYER_MAP,groupActivityState:E.groupActivityState,groupBooking:E.beltTypeMap.groupbooking},properties:{carAmount:{type:Number,value:"",observer:function(e){e>=10?this.setData({carAmountOver:!0,showAmount:!0}):e>0&&e<10?this.setData({carAmountOver:!1,showAmount:!0}):this.setData({carAmountOver:!1,showAmount:!1})}},hasCar:{type:Boolean,value:!1},isBlockCar:{type:Boolean,value:!1},showConsult:{type:Boolean,value:!1},phone:{type:String,value:""},consult:{type:String,value:""},spuStatus:{type:Object,value:{}},spuId:{type:String,value:"",observer:function(){this.initConsultVisit()}},name:{type:String,value:""},coupons:{type:Array,value:[]},ucId:{type:String,value:""},shopUrl:{type:String,value:""},shopId:{type:Number,value:0,observer:function(){this.initConsultVisit()}},isNft:{type:Boolean,value:!1},notUseSDK:{type:Boolean,value:!1},spikeIsOnReady:{type:Boolean,value:!1},bjhInfo:{type:Object,value:null},predictPrice:{type:Number,value:0},isFrom:{type:String,value:""},isSingleSku:{type:Boolean,value:!1},bestShopCoupon:{type:Object,value:{}},bottomCouponClose:{type:Boolean,value:!1},isHalfScreen:{type:Boolean,value:!1},beltType:{type:Number,value:0},salePrice:{type:String,value:""},groupPrice:{type:String,value:""},buttonPredictPrice:{type:String,value:""},isDelivery:{type:Boolean,value:!1},addressDelivery:{type:Object,value:{}}},logicData:{generalParams:{id:"mip-bdxd-product-bottom-bar",name:"mip-bdxd-product-bottom-bar",type:"mip-bdxd-product-bottom-bar",title:"商详底部bar"}},lifetimes:{created:function(){N.default.clearEvents(["onBallFall"])},attached:function(){var e=this;N.default.addHandler("onBallFall",(function(){return e.onBallFall()}))},detached:function(){N.default.clearEvents(["onBallFall"])}},messages:{onLogin:function(e){var t=this,o=(e.target||{dataset:{}}).dataset,i=o.loginScene,a=o.scene;n.canIUse("button.open-type.login")?e&&e.value&&e.value.errMsg===E.LOGIN_SUCCESS_TEXT&&(0,D.isExistBduss)().then((function(){t.dispatch("productDetailLoginSuccess"),"singleSku"===i&&t.onBuyClick(e,a)})):(0,k.goToLogin)((function(){t.dispatch("productDetailLoginSuccess"),"singleSku"===i?t.onBuyClick(e,a):N.default.trigger("onBcpUserLogin")}))}},methods:{resetFallBall:function(){this.setData({showBall:!1,ballStyle:{transform:"translateX(0)"},ballInnerStyle:{transform:"translateY(0)"}})},onShopClick:function(){(0,D.bdxdAddLog)(this,{compTargetId:"ssv_284",userExtra:{spu_id:this.properties.spuId,comp_material_id:this.properties.spuId}}),(0,x.generalJump)({url:this.properties.shopUrl})},onConsultClick:function(e){var t=this;if((0,D.bdxdAddLog)(this,{compTargetId:"ssv_285",actionId:"site_bar_click",userExtra:{spu_id:this.properties.spuId,target:this.properties.consult,comp_material_id:this.properties.spuId}}),this.properties.notUseSDK){var o=O.JD_KEFU_INFO.find((function(e){return+e.shopId==+t.properties.shopId}));(0,L.jumpToInnerSwan)({path:E.PAGES.COMMUNICATE_WEB_VIEW,params:{url:o.kefuUrlInSpu+"?productId="+this.properties.spuId+"&shopId="+this.properties.shopId+"&shopName="+o.shopName+"&userid="+this.properties.ucId+"&productLineAppid=5"}})}else r().globalData.siteData.isClickedImpl=!0},onPhoneClick:function(e){(0,D.bdxdAddLog)(this,{compTargetId:"ssv_286",actionId:"site_bar_click",userExtra:{spu_id:this.properties.spuId,target:this.properties.phone,comp_material_id:this.properties.spuId}});var t=this.properties.phone;t?n.makePhoneCall({phoneNumber:t,fail:function(){n.showModal({title:"拨打失败",content:"商家电话号码有误",showCancel:!1})}}):n.showToast({title:"商家电话号码有误"})},onBuyClick:function(e,t){var o=this.properties,i=o.spuStatus,a=o.spikeIsOnReady,n=o.spuId,s=o.isNft,c=o.bjhInfo,u=o.isSingleSku,p=o.isDelivery;if(i&&1===i.state&&i.restStock>=1&&!(i&&1===i.state&&s&&a)){var d=e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.scene||t;if(!p||d===this.data.attrLayerMap.BUY_CAR_ATTR){var l=r().globalData.siteData.ocpcInfo||{},h=l.bdVid,g=void 0===h?"":h,m=l.fid,f=g||(void 0===m?"":m);if(!("baiduhaokan"===r().globalData.siteData.host)&&!f&&c&&c.dxdClassMode===E.COLUMNTYPE.COLUMN&&c.bjhColumnId)return c.source="duxd_syd_column",void(0,A.jumpToColumn)(c);u&&d===this.data.attrLayerMap.BUY_ATTR?this.triggerEvent("orderConfirmHandler"):this.triggerEvent("togglespeclayer",{isOpen:!0,scene:d,isResetGroup:!0}),(0,D.bdxdAddLog)(this,{compTargetId:(0,D.isInProductPage)()?j[d]:M[d],actionId:"site_bar_click",userExtra:{spu_id:n,comp_material_id:n}})}}},onCarListClick:function(e){(0,D.bdxdAddLog)(this,{compTargetId:"ssv_287",userExtra:{}}),(0,L.jumpToInnerSwan)({path:E.PAGES.SHOP_CART_DETAIL})},initConsultVisit:function(){this.setData({visitParamExt:{init_cards:[{service:10,value:{clientType:"smart-app",spuId:this.properties.spuId,appId:r().globalData.siteData.appId,shopId:this.properties.shopId,url:(0,D.getCurUrl)()}}],init_msg:{msg:"商品："+this.properties.name+" 商品详情页咨询按钮",type:3}}})},onBallFall:function(){var e=this;this.setData({showBall:!0}),t((function(){e.setData({ballStyle:{transform:"translateX(-240rpx)"},ballInnerStyle:{transform:"translateY(200rpx)"}}),t((function(){e.resetFallBall()}),550)}),200)},setBottomCoupon:function(){this.triggerEvent("setBottomCoupon")}}})})),window.define("325",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(51),_=e(59);Component({properties:{spuId:{type:String,required:!0},spuStatus:{type:Object,value:{}},shopRedPacket:{type:Object,value:null},platformRedPacket:{type:Object,value:null}},observers:{"shopRedPacket, platformRedPacket":function(){this.handleRedPacket()}},data:{hasSale:!1,salePrice:0,isSalePriceOverFlow:!1,redPacketInfo:null,hasRedPacket:!1,couponFuncTypeMap:_.COUPON_FUNC_TYPE_MAP,couponIconMap:P.COUPON_ICON_MAP},logicData:{generalParams:{id:"mip-bdxd-sale-activity-bar",name:"mip-bdxd-sale-activity-bar",type:"mip-bdxd-sale-activity-bar",title:"立减活动bar"}},methods:{handleRedPacket:function(){this.clearData();var e=this.properties,t=e.shopRedPacket,o=e.platformRedPacket;o&&o.batchId?this.handlePlatformRedPacket(o):this.handleShopRedPacket(t)},useNow:function(){this.properties.spuStatus&&1===this.properties.spuStatus.state&&this.properties.spuStatus.restStock>=1&&(this.triggerEvent("usenowclick",{isOpen:!0,scene:P.ATTR_LAYER_MAP.NORMAL}),(0,w.bdxdAddLog)(this,{compTargetId:"ssv_278",userExtra:{spu_id:this.properties.spuId,comp_material_id:this.properties.spuId}}))},handlePlatformRedPacket:function(e){this.setData({redPacketInfo:e,hasRedPacket:!0})},handleShopRedPacket:function(e){this.setData({hasSale:e.switcher||!1,salePrice:Math.floor(+e.amount)||0,isSalePriceOverFlow:Math.floor(+e.amount)>999||!1})},clearData:function(){this.setData({hasSale:!1,salePrice:0,redPacketInfo:null,hasRedPacket:!1})}}})})),window.define("327",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(92),P=e(4),_=e(51);Component({options:{addGlobalClass:!0},properties:{collectStatus:{type:Number},shopId:{type:String,value:""},isLogin:{type:Boolean,value:null}},logicData:{generalParams:{id:"mip-bdxd-product-collection",name:"mip-bdxd-product-collection",type:"mip-bdxd-product-collection",title:"商详收藏"}},messages:{onLogin:function(e){var t=this;a.canIUse("button.open-type.login")?e&&e.value&&e.value.errMsg===_.LOGIN_SUCCESS_TEXT&&(0,P.isExistBduss)().then((function(){t.onStoresClick(),t.dispatch("productDetailLoginSuccess",{from:"collect"})})):(0,w.goToLogin)((function(){t.onStoresClick(),t.dispatch("productDetailLoginSuccess",{from:"collect"})}))}},methods:{handleStoresClick:function(e){var t=this,o=n().globalData.siteData.ocpcInfo,i=o.fid,r=void 0===i?"":i,s=o.bdVid,c=void 0===s?"":s,u=n().globalData.siteData.channelInfo.ch,p=void 0===u?"":u,d=_.API.getCollectInfo,l={shopId:this.properties.shopId,appId:n().globalData.siteData.appId||"",spuId:(0,P.parsePageQuery)().spuId,extVo:{fid:r,bdVid:c,ch:p}},h=this.properties.collectStatus?0:1;(0,w.request)({url:d,data:Object.assign({},l,{operateType:h})}).then((function(e){(e.data||{}).operateResult&&(t.dispatch("collectChange",h?1:0),a.showToast({title:h?"商品收藏成功":"取消商品收藏成功",icon:"none"}),(0,P.bdxdAddLog)(t,{compTargetId:"ssv_279",userExtra:{operateType:h,spu_id:(0,P.parsePageQuery)().spuId,comp_material_id:(0,P.parsePageQuery)().spuId}}))})).catch((function(e){console.log(e.statusInfo||"获取收藏状态失败")}))},onStoresClick:function(){var e=this;(0,P.isExistBduss)().then((function(){e.handleStoresClick()}))}}})})),window.define("329",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=e(51),_=e(4);Component({options:{addGlobalClass:!0},properties:{beltInfo:{type:Object,value:null,observer:function(e){e&&this.handleBeltInfo(e)}},saleCount:{type:Number,value:0}},data:{isGroupbook:!1,groupPrice:"",groupPriceFloat:"",hasDay:!1,start:0,end:0,isGroupbooking:P.beltTypeMap.groupbooking,totalMember:0},messages:{onEnd:function(){this.setData({beltType:0}),this.triggerEvent("refreshMarketingInfo")},onDayExist:function(){this.setData("hasDay",!0)}},methods:{handleBeltInfo:function(e){var t=e.beltType,o=void 0===t?0:t,i=e.totalMember,a=e.beltSalePrice,n=e.beltPredictPrice,r=e.predictText,s=void 0===r?"":r,c=e.startTime,u=void 0===c?"":c,p=e.endTime,d=void 0===p?"":p,l=e.currentSystemTime,h=void 0===l?"":l,g=P.GROUPBOOK_MAP.includes(o),m=(0,_.formatPrice)(String(a)),f=w(m,2),v=f[0],b=void 0===v?"":v,y=f[1],I=void 0===y?"":y,S=(0,_.formatPrice)(String(n)),T=w(S,3),C=T[0],D=void 0===C?"":C,x=T[1],k=void 0===x?"":x,L=T[2],A=function(e){return+new Date(e.replace(/-/g,"/"))},E=A(h),O=A(o===this.data.isGroupbooking?d:u);this.setData({beltType:o,isGroupbook:g,totalMember:i,groupPrice:b,groupPriceFloat:I,predictPrice:n?D:"",predictPriceFloat:k,ispredictPriceRange:L,predictText:s,start:E,end:O})}}})})),window.define("331",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w,P=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_=e(51),C=e(4);function D(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var x=(D(w={},_.beltTypeMap.atmospherePre,"https://mall-static.cdn.bcebos.com/doujin/C/image/dxdjx/activity618yaodaiPre.png"),D(w,_.beltTypeMap.atmosphereing,"https://mall-static.cdn.bcebos.com/doujin/C/image/dxdjx/activity618yaodaiIn.png"),w);Component({options:{addGlobalClass:!0},properties:{beltInfo:{type:Object,value:null,observer:function(e){e&&this.handleBeltInfo(e)}},saleCount:{type:String,value:"0"}},data:{status:0,beltType:0,isAtmosphere:!1,isSeckill:!1,beltSalePriceInteger:0,beltSalePriceFloat:0,beltPredictPriceInteger:0,beltPredictPriceFloat:0,isRangeBeltPrice:!1,isRangeBeltPredictPrice:!1,beltSalePrice:0,beltPredictPrice:0,predictText:"",hasDay:!1,start:0,end:0,percent:"0%",seckillPre:_.beltTypeMap.seckillPre,seckilling:_.beltTypeMap.seckilling,beltImage:"",atmosphereing:_.beltTypeMap.atmosphereing,isAtmosphereEasy:!1},methods:{handleBeltInfo:function(e){var t=this.data,o=t.atmosphereing,i=t.seckilling,a=e.beltType,n=void 0===a?0:a,r=e.beltImage,s=e.beltSalePrice,c=e.beltPredictPrice,u=void 0===c?"":c,p=e.predictText,d=e.currentSystemTime,l=void 0===d?"":d,h=e.startTime,g=void 0===h?"":h,m=e.endTime,f=void 0===m?"":m,v=e.stock,b=void 0===v?0:v,y=e.restStock,I=void 0===y?0:y,S=e.preheatStartTime,T=_.ATMOSPHERE_MAP.includes(n),w=n===_.beltTypeMap.atmosphereEasy,D=_.SECKILL_MAP.includes(n),k={"background-image":"url("+(r||x[n])+")"},L=(0,C.formatPrice)(String(s)),A=P(L,2),E=A[0],O=void 0===E?"":E,R=A[1],N=void 0===R?"":R,B=(0,C.formatPrice)(String(u)),j=P(B,2),M=j[0],U=void 0===M?"":M,F=j[1],G=void 0===F?"":F,V=s.includes("-"),q=u.includes("-"),H=function(e){return+new Date(e.replace(/-/g,"/"))},z=H(S||"")?1:2,Y=H(n===o||n===i?f:g),K=b?Math.floor((b-I)/b*100)+"%":"0%";this.setData({status:z,isAtmosphere:T,isSeckill:D,beltType:n,atmosphereConfig:k,beltSalePriceInteger:O,beltSalePriceFloat:N,beltPredictPriceInteger:U,beltPredictPriceFloat:G,isRangeBeltPrice:V,isRangeBeltPredictPrice:q,beltSalePrice:V?s.split("-")[0]:s,beltPredictPrice:q?u.split("-")[0]:u,predictText:p,start:H(l),end:Y,percent:K,beltImage:r,isAtmosphereEasy:w})}},messages:{onEnd:function(){var e=this.data.beltType,t=!1;e.beltType===e.seckillPre&&(t=!0),this.setData({beltType:0}),this.triggerEvent("refreshMarketingInfo",{showSeckill:t})},onDayExist:function(){this.setData("hasDay",!0)}}})})),window.define("333",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=e(51),_=e(92),C=e(4),D=[P.beltTypeMap.seckilling,P.beltTypeMap.groupbooking,P.beltTypeMap.atmosphereing,P.beltTypeMap.atmosphereEasy],x="dark",k="weak";Component({options:{addGlobalClass:!0},properties:{spuId:{type:String,value:""},spuStatus:{type:Object,value:{}},name:{type:String,value:""},isOverseas:{type:Number,value:0},qualityTag:{type:Number,value:0},isBrandProduct:{type:Boolean,value:!1},saleCount:{type:String,value:"0"},showCollect:{type:Boolean,value:!1},collectStatus:{type:Number,value:0},shopId:{type:String,value:"",observer:function(e){e&&this.getMarketingInfo()}},showTopBar:{type:Boolean,value:!0},labels:{type:Array,value:[]},supportPayType:{type:String,value:""},isLogin:{type:Boolean,observer:function(e,t){!0===e&&!1===t&&this.getMarketingInfo()}},productPriceMsg:{type:Object,value:{}},secondShow:{type:Boolean,value:!1,observer:function(e){e&&this.getMarketingInfo()}}},data:{hasCheckActivityStatus:!1,salePriceFormat:{},shopRedPacket:null,platformRedPacket:null,beltType:P.beltTypeMap.noBelt,coupons:[],promotionList:[],beltInfoVo:{},iconImage:"",isAtmosphere:!1,isSeckill:!1,isGroupbook:!1,isGroupbooking:!1,isBelting:!0,couponTakenStyle:k,isAtmosphereEasy:!1},logicData:{priceRequestFlag:!0},lifetimes:{attached:function(){var e=(0,C.parsePageQuery)().spuId;this.setData({spuId:e}),this.getMarketingInfo()}},methods:{getMarketingInfo:function(e){var t=this;if(this.properties.shopId&&this.logicData.priceRequestFlag){var o=!1;e&&(o=e.detail.showSeckill),this.logicData.priceRequestFlag=!1;var i=[this.getSpuPriceInfo(),Promise.resolve({})];Promise.all(i).then((function(e){var i=w(e,2),a=i[0],n=void 0===a?{}:a,r=(i[1],n.data||{}),s=r.redPackageComp||{},c="{}"!==JSON.stringify(s),u=c?s:null,p=r.reducePromotionComp,d=void 0===p?{}:p,l=d.switcher?d:null,h=r.beltInfoVo,g=void 0===h?{}:h,m=r.coupons,f=void 0===m?[]:m,v=r.promotions,b=void 0===v?[]:v,y=r.salePrice,I=r.groupPrice,S=r.predictPrice,T=r.buttonPredictPrice,_=r.skuPriceList,C=void 0===_?[]:_,x=g.beltType||P.beltTypeMap.noBelt,k=g.iconImage||"";t.handleGroupPromotion(g),t.handlePrice(r),t.setCouponTakeStyle(r,x,f);var L=f,A=b.filter((function(e){return e.promotionBizType===P.promotionBizTypeMap.platform&&P.ACTIVE_PROMOTION_TYPES.includes(e.promotionType)||e.promotionBizType===P.promotionBizTypeMap.business&&P.ACTIVE_PROMOTION_TYPES.includes(e.promotionType)&&"-1"===e.shopId})),E=t.setBestShopCoupon(L,A);t.triggerEvent("setPriceInfo",{beltType:x,salePrice:y,groupPrice:I,coupons:f,predictPrice:S,buttonPredictPrice:T,platformRedPacket:u,promotionList:A,bestShopCoupon:E,skuPriceList:C,showSeckill:o}),t.setData({beltType:x,coupons:f,promotionList:A,shopRedPacket:l,platformRedPacket:u,beltInfoVo:g,iconImage:k,isAtmosphere:P.ATMOSPHERE_MAP.includes(x),isSeckill:P.SECKILL_MAP.includes(x),isGroupbook:P.GROUPBOOK_MAP.includes(x),isGroupbooking:+P.beltTypeMap.groupbooking==+x,isBelting:D.includes(x),isAtmosphereEasy:x===P.beltTypeMap.atmosphereEasy}),c&&t.triggerEvent("setShopCartHide"),t.sendPromotionLog({coupons:f,promotions:b,beltInfoVo:g})})).catch((function(){t.handleFailRes()})).finally((function(){t.logicData.priceRequestFlag=!0,t.setData({hasCheckActivityStatus:!0},(function(){t.dispatch("responseDone")}))}))}},getSpuPriceInfo:function(){var e=this;return new Promise((function(t,o){(0,_.request)({url:P.API.getSpuPriceInfo,data:{sourceScene:2,promotionTypes:[P.promotionTypeMap.orderDown,P.promotionTypeMap.productDown,P.promotionTypeMap.limitSeckill,P.promotionTypeMap.fullPromotion,P.promotionTypeMap.groupPromotion,P.promotionTypeMap.mPriceN,P.promotionTypeMap.multiplePromotion],shopId:e.properties.shopId,appId:n().globalData.siteData.appId,spuId:e.data.spuId,supportPayType:e.properties.supportPayType,cpsInfo:n().globalData.siteData.channelInfo}}).then((function(e){t(e)})).catch((function(e){o(e)}))}))},getPlatformRedPackets:function(){var e=this;return new Promise((function(t,o){var i={spuId:e.data.spuId,cpsInfo:n().globalData.siteData.channelInfo},a=P.API.getRedPacket;(0,_.request)({url:a,data:i}).then((function(e){t(e)})).catch((function(e){o(e)}))}))},handleFailRes:function(){var e=this.properties.productPriceMsg,t=(void 0===e?{}:e).salePrice,o=void 0===t?"":t,i=(0,C.formatPrice)(String(o)||""),a=w(i,2),n=a[0],r=a[1];this.setData({salePrice:o,salePriceFormat:{salePriceInteger:n,salePriceFloat:r,isSalePriceRange:o.includes("-")}})},handleGroupPromotion:function(e){var t=e.beltType,o=void 0===t?0:t,i={groupLimitNum:e.groupLimitNum,userUsedNum:e.userUsedNum,promotionId:e.promotionId,totalMember:e.totalMember};o===P.beltTypeMap.groupbooking&&this.triggerEvent("setGroupbookPromotion",i)},handlePrice:function(e){var t=e.salePrice,o=void 0===t?"":t,i=e.predictPrice,a=void 0===i?"":i,n=e.predictText,r=void 0===n?"":n,s=(0,C.formatPrice)(String(o)||""),c=w(s,2),u=c[0],p=c[1],d=(0,C.formatPrice)(String(a)||""),l=w(d,2),h=l[0],g=l[1];this.setData({salePrice:o,salePriceFormat:{salePriceInteger:u,salePriceFloat:p,isSalePriceRange:o.includes("-")},predictPrice:a,predictPriceFormat:{predictPriceInteger:h,predictPriceFloat:g,ispredictPriceRange:a.includes("-")},predictText:r})},setCouponTakeStyle:function(e,t,o){var i=e.predictPrice,a=void 0===i?"":i,n=k;n=o.length?D.includes(t)?x:a?k:x:k,this.setData({couponTakeStyle:n})},setBestShopCoupon:function(e,t){var o=e.find((function(e){var t=e.couponBizType,o=e.remainingTime,i=void 0===o?0:o;return t===P.COUPON_BIZ_TYPE.SHOP&&i>0}))||{};return o=t.length&&t[0].promotionType===P.promotionTypeMap.mPriceN?t:o},changeCouponLayer:function(e){var t=e.detail;this.triggerEvent("changeCouponLayer",t)},toggleSpecLayer:function(e){e&&this.triggerEvent("usenowclick",e)},sendPromotionLog:function(e){var t=e.coupons,o=void 0===t?[]:t,i=e.promotions,a=void 0===i?[]:i,n=e.beltInfoVo,r=void 0===n?{}:n,s=o.map((function(e){return[e.couponBizType,e.couponType,e.rangeType].join("-")})),c=a.map((function(e){return[e.promotionBizType,e.promotionType,e.scopeType].join("-")})),u={beltType:r.beltType,groupState:r.groupState,startTime:r.startTime,endTime:r.endTime,currentSystemTime:r.currentSystemTime};(0,C.bdxdAddLog)(this,{compTargetId:"dxdjx_promotion_log",userExtra:{from:"spuOneApp",couponsStr:s.join(","),promotionsStr:c.join(","),beltInfoVo:u}})}}})})),window.define("342",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.productDetailBehavior=void 0;var P=e(4),_=R(e(3)),C=e(92),D=e(51),x=e(59),k=e(93),L=R(e(126)),A=e(81),E=(R(e(49)),e(58)),O=R(e(343));function R(e){return e&&e.__esModule?e:{default:e}}var N=(r().globalData.siteData||{}).appId,B=45,j=46,M=47,U=r().globalData.siteData.ocpcInfo&&(r().globalData.siteData.ocpcInfo.fid||r().globalData.siteData.ocpcInfo.bd_vid);i.productDetailBehavior=Behavior({data:{productPriceMsg:{originPrice:"",salePrice:""},spuId:"",isCommentListsExpHit:!1,hasGetSuccessGoodsData:!1,labels:[],hasCar:!1,productType:D.PRODUCTTYPE.ORDINARY,spuStatus:{restStock:1},saleInfo:{},shopId:"",ucId:"",isLogin:null,shopDetail:{},useFuncs:{collect:!0,shop:!0},spuInfo:{},productData:{},hasGetGoodsData:!1,showTopBar:!0,isBlockCar:!1,carAmount:0,groupbookPromotion:null,countDownMap:{},recommendGroups:[],groupFriend:null,scene:D.ATTR_LAYER_MAP.BUY_ATTR,specLayerIsOpen:!1,currentGroupIndex:0,currentGroupId:"",specSelectStatus:{},selectSpecData:null,bannerAtmosphere:{},isSkuSelect:!1,isBjhColumn:!1,finalPrice:-1,isBrandShop:!1,isGroupbooking:D.beltTypeMap.groupbooking},lifetimes:{attached:function(){console.warn("立即购买、优惠券、规格弹窗逻辑在评价列表有复用，修改逻辑，请check是否有影响!!!")}},methods:{getServiceText:function(e){if(0===e.length)return"";e=e.slice(0,3);var t,o=[],i=[];return e.map((function(e){i.push(e.id),o.push(e.value)})),t=o.join(" · "),this.logicData.protectIds=i.join(","),t},getShopDetail:function(){var e=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=D.API.queryBriefShopDetail,a={appId:N,shopId:this.data.shopId,scene:2};return(0,C.request)({url:i,data:a}).then((function(i){var a=i.data||{};(0,P.bdxdAddLog)(e,{compTargetId:"ssv_615",userExtra:{shopServiceLevel:a.shopDsr&&a.shopDsr.shopServiceLevel}});var n=!!~(a.shopLabels||[]).findIndex((function(e){return 21==+e.id}));return n&&(0,P.bdxdAddLog)(e,{compTargetId:"ssv_646"}),e.setData({shopDetail:a,isBrandShop:n}),(0,P.isInProductPage)()&&t((function(){e.logicData.hasLogin&&e.trackAdd()}),1e3),a.showEvaluateInfo&&o&&e.getCommnetList&&e.getCommnetList(),i})).catch((function(t){t&&t.status===D.RESPONSE_STATUS.DOWN_GRADE&&e.setData({"useFuncs.shop":!1})}))},setSpikePromotion:function(e){var t=this,o=!!e,i=this.data.spikeInfoVO||{},a=i.spikeLimitNum,n=void 0===a?0:a,r=i.userUsedNum,s=n-(void 0===r?0:r),c=this.data.spuStatus;this.setData({spuStatus:Object.assign({},c,{restStock:o&&s||!+c.restStockNoSpike?c.restStock:c.restStockNoSpike})},(function(){t.getCartCountBefore()}))},getCartCountBefore:function(){var e=this.data,t=e.hasCar,o=e.isBlockCar;t&&!o&&this.getCartCount()},getCartCount:function(){var e=this,t=D.API.getCartCount;(0,C.request)({url:t}).then((function(t){var o=t&&t.data||{};e.setData({carAmount:+o.totalNum})}))},setGroupbookPromotion:function(e){var t=e.detail;t&&(!t.groupLimitNum||t.groupLimitNum-t.userUsedNum>0)&&Number(this.data.spuStatus.totalRestStock)&&D.spuStateMap.up===this.data.spuStatus.state&&this.getSpuGroup(),this.setData({groupbookPromotion:t})},getSpuGroup:function(){var e=this,t=D.API.getSpuGroup,o=(0,P.parsePageQuery)().groupId,i=void 0===o?"":o,a={spuId:this.data.spuId,appId:N,shopId:this.data.shopId,groupId:i};(0,C.request)({url:t,data:a}).then((function(t){var o=t&&t.data||{},i=o.recommendGroups||[],a=o.inviteGroup||null;i.forEach((function(t){e.addCountDown(t.groupId,t.countDownTime)})),a&&e.addCountDown(a.groupId,a.countDownTime),e.setData({recommendGroups:i,groupFriend:a}),Object.keys(e.data.countDownMap).length&&e.initCountDown&&e.initCountDown()}))},addCountDown:function(e,t){var o=Object.assign({},this.data.countDownMap);o[e]=t,this.setData({countDownMap:o})},toggleSpecLayer:function(e){var t=this,o=Boolean(e.isOpen||e.detail&&e.detail.isOpen||e.currentTarget&&e.currentTarget.dataset.isOpen),i=e.scene||e.detail&&e.detail.scene||e.currentTarget&&e.currentTarget.dataset.scene||D.ATTR_LAYER_MAP.BUY_ATTR,a=e.detail&&e.detail.isResetGroup||!1,n={specLayerIsOpen:o,scene:i},r=this.data,s=r.spuId,c=void 0===s?"":s,u=r.shopId,p=void 0===u?"":u,d=r.spuInfo;r.isSkuSelect&&(n.isSkuSelect=!1),o&&(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_289":"ssv_334",userExtra:{serviceTextShow:d&&d.serviceText?1:0,spu_id:this.properties.spuId}}),e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.isSpu&&(0,P.bdxdAddLog)(this,{compTargetId:"ssv_295",actionId:"site_bar_click",userExtra:{spuId:c,shopId:p,comp_material_id:c}}),a&&(n.currentGroupId="",n.currentGroupIndex=0),this.changeNavBarColor(o),o?(0,k.delayFunc)((function(){t.setData(n)})):this.setData(n)},changeCouponLayer:function(e){this.changeNavBarColor(e.detail)},getSpecSelectStatus:function(){var e=this;n.getStorage({key:"specSelectStatus",success:function(t){var o=t&&t.data;o&&(e.setData({selectSpecData:JSON.parse(o)}),n.removeStorage({key:"specSelectStatus"}))}})},onClickAttrChange:function(e){var t=this.data.productData.packages,o=this.data.productData.skuList||[];t&&t.length&&t.forEach((function(e){e.skuList&&e.skuList.length&&o.push.apply(o,function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(e.skuList))}));var i=(o.find((function(t){return e.info&&e.info.skuId===t.skuId}))||{}).Discount||[];this.setData({discountArr:i}),this.updateSelectedData(e)},updateSelectedData:function(e){var t=e.detail;this.setData({specSelectStatus:t||{}})},onClickNumChange:function(e){this.updateSelectedData(e)},onClickConfirmBtnChange:function(e){var t=this;n.canIUse("onError")&&n.onError((function(e){(0,P.addErrorLog)(e,{compTargetId:"order-confirm-err",name:"商品详情-立即购买-jsError"},[D.logTypeMap.error])}));var o=e.useScene,i=this.data.spuStatus,a=i&&1===i.state&&i.restStock>=1;return this.updateSelectedData(e),!!a&&((this.data.specSelectStatus||{}).isSelectAll?o===D.ATTR_LAYER_MAP.BUY_CAR_ATTR?this.orderConfirmHandler(e):void(0,P.isExistBduss)().then((function(){t.orderConfirmHandler(e)})):void 0)},autoTakeCoupon:function(e){var t=e.couponInfo,o=e.antiCheatVo,i=e.scene,a=e.skus,n=void 0===a?[]:a;return new Promise((function(e,a){var s=r().globalData.pageData[t.shopId],c="",u="";(0,P.parsePageQuery)().directCouponId||(0,P.parsePageQuery)().directTaskId?(c=(0,P.parsePageQuery)().directCouponId||"",u=(0,P.parsePageQuery)().directTaskId||""):s&&(s.directCouponId||s.directTaskId)&&(c=s.directCouponId||"",u=s.directTaskId||"");var p={skus:n,scene:i};o&&(p.antiCheatVo=o),(c||u)&&(p.directCouponInfo={directCouponId:c,directTaskId:u}),(0,C.request)({url:D.API.couponAutoTake,data:p}).then((function(t){e(t)})).catch((function(e){a(e),(0,P.addErrorLog)(e,{url:D.API.couponAutoTake,param:p,errType:"api_req_error",compTargetId:"api-take-coupon-err",name:"商品详情-自动领券"},[D.logTypeMap.apiError])}))}))},groupOrderCheck:function(){var e=this;return this.logicData.isOrderCheckLoaded?(this.logicData.isOrderCheckLoaded=!1,new Promise((function(o){var i=e.data,a=i.specSelectStatus,n=void 0===a?{}:a,r=i.groupbookPromotion,s=void 0===r?{}:r,c=i.currentGroupId,u={promotionId:s.promotionId,groupType:D.groupTypeMap.launch};c&&(u.groupId=c,u.groupType=D.groupTypeMap.partake),(0,C.request)({url:D.API.caculateCheck,data:{skus:[Object.assign({spuId:e.properties.spuId,shopId:e.data.shopId},n.info)],groupPromotionInfo:u}}).then((function(){e.logicData.isOrderCheckLoaded=!0,o({groupPromotionInfo:Object.assign({},u)})})).catch((function(o){e.logicData.isOrderCheckLoaded=!0;var i=~[3508,3509,3510,3514].indexOf(o&&o.status);(0,P.normalToast)({title:o.statusInfo||"活动校验失败",success:function(){i&&t((function(){(0,P.refreshCurPage)({isOpenSpec:"0"})}),D.duration)}})}))}))):Promise.reject(new Error)},autoTakeAndJump:function(e){var t=this,o=this.data.specSelectStatus,i=this.data,a=i.discountArr,n=i.shopId,r={batchId:a.map((function(e){return e.batchId})).join(","),shopId:Number(n)},s=this.data.coupons,c=(void 0===s?[]:s).length;L.default.hgzAs(D.antifraudConfig.userGrowth).then((function(i){if(!t.logicData.isAutoTakeCoupon){t.logicData.isAutoTakeCoupon=!0;var a="";t.autoTakeCoupon({couponInfo:c?r:{},antiCheatVo:i,scene:c?13:10,skus:[Object.assign({spuId:t.properties.spuId,shopId:t.data.shopId},o.info)]}).then((function(e){var t=((e.data||{}).promptWord||{}).promptContext||"领取成功";a=c?t:"已为您成功领取优惠券"})).catch((function(e){e&&e.statusCode===D.RESPONSE_STATUS.LIMIT&&(a=e.statusInfo)})).finally((function(){t.setData({specLayerIsOpen:!1}),!P.isInProductPage&&t.changeNavBarColor(!1),"function"==typeof e&&e(a)}))}}))},orderConfirmHandler:function(e){var t=this;try{var o=e.useScene,i=this.data.specSelectStatus;if(o===D.ATTR_LAYER_MAP.BUY_CAR_ATTR){(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_164":"ssv_329",actionId:"site_bar_click",userExtra:{spu_id:this.properties.spuId}});var a=Object.assign({url:(0,P.parsePageQuery)().url},r().globalData.siteData.ocpcInfo);(r().globalData.siteData.bdVidShopId!==this.data.shopId||(0,O.default)())&&(a.bdVid="",a.fid="");var s=(0,P.objToUrl)(a),c="baiduboxapp://swan/"+r().globalData.siteData.appKey+"/wjz/bdxd/product-detail/product-detail?"+s,u=D.API.addCart,p=Object.assign({},i.info,{spuId:this.properties.spuId,shopId:this.data.shopId,amount:i.info.count,extData:JSON.stringify({cpsInfo:r().globalData.siteData.channelInfo,ocpcInfo:{pageUrl:c,pageUrlParams:s,bdVid:a.bdVid}})});if(this.logicData.isAddingCart)return;return this.logicData.isAddingCart=!0,void(0,C.request)({url:u,data:p}).then((function(e){t.logicData.isAddingCart=!1,(e&&e.data||"")&&(n.showToast({icon:"none",title:"添加成功！在购物车等您~"}),t.setData({specLayerIsOpen:!1}),_.default.trigger("onBallFall"),t.getCartCount(),(0,P.bdxdAddLog)(t,{compTargetId:"ssv_296",actionId:"site_bar_click",userExtra:Object.assign({spu_id:t.properties.spuId,comp_material_id:t.properties.spuId},i.info)}))})).catch((function(e){t.logicData.isAddingCart=!1,n.showToast({title:e.statusInfo,icon:"none"})}))}var d=[Object.assign({},i.info,{spuId:this.properties.spuId,cpsInfo:r().globalData.siteData.channelInfo})],l=this.data.coupons,h=(void 0===l?[]:l).length;if(o===D.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY)return this.groupOrderCheck().then((function(e){t.setData({specLayerIsOpen:!1}),!(0,P.isInProductPage)()&&t.changeNavBarColor(!1);var o=e.groupPromotionInfo||{};h?t.autoTakeAndJump((function(e){(0,E.jumpToInnerSwan)({path:D.PAGES.ORDER_SUBMIT,params:{skus:JSON.stringify(d),url:(0,P.parsePageQuery)().url,groupType:o.groupType,groupId:o.groupId||"",shopId:t.data.shopId},fail:function(){t.logicData.isAutoTakeCoupon=!1,(0,P.normalToast)({title:e,duration:3e3})},success:function(){(0,P.normalToast)({title:e,duration:3e3})}})})):(0,E.jumpToInnerSwan)({path:D.PAGES.ORDER_SUBMIT,params:{skus:JSON.stringify(d),url:(0,P.parsePageQuery)().url,groupType:o.groupType,groupId:o.groupId||"",shopId:t.data.shopId}})})),void(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_165":"ssv_331",actionId:"site_bar_click"});if(h)return(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_166":"ssv_332",actionId:"site_bar_click"}),this.autoTakeAndJump((function(e){(0,A.generalJump)({url:D.PAGES.ORDER_SUBMIT,params:{skus:JSON.stringify(d),url:(0,P.parsePageQuery)().url,shopId:t.data.shopId},fail:function(){t.logicData.isAutoTakeCoupon=!1,(0,P.normalToast)({title:e,duration:3e3})},success:function(){(0,P.normalToast)({title:e,duration:3e3})}})}));(0,P.bdxdAddLog)(this,{compTargetId:(0,P.isInProductPage)()?"ssv_163":"ssv_327",actionId:"site_bar_click",userExtra:Object.assign({spu_id:this.properties.spuId,comp_material_id:this.properties.spuId},i.info)}),this.setData({specLayerIsOpen:!1}),!P.isInProductPage&&this.changeNavBarColor(!1),(0,A.generalJump)({url:D.PAGES.ORDER_SUBMIT,params:{skus:JSON.stringify(d),url:(0,P.parsePageQuery)().url,shopId:this.data.shopId}})}catch(e){(0,P.addErrorLog)(e,{compTargetId:"order-confirm-err",name:"商品详情-立即购买"},[D.logTypeMap.error])}},setPriceInfo:function(e){var t=e.detail,o=t.beltType,i=void 0===o?0:o,a=t.salePrice,n=t.groupPrice,r=t.coupons,s=void 0===r?[]:r,c=t.predictPrice,u=t.buttonPredictPrice,p=t.platformRedPacket,d=void 0===p?{}:p,l=t.promotionList,h=void 0===l?[]:l,g=t.bestShopCoupon,m=void 0===g?{}:g,f=t.skuPriceList,v=void 0===f?[]:f,b=t.showSeckill,y=void 0!==b&&b,I=this.data.productData||{},S=!1,T=I.packages,w=I.skuList,_=void 0===w?[]:w;T&&T.length?(T.forEach((function(e){(e.skuList||[]).forEach((function(e){v.forEach((function(t){t.skuId===e.skuId&&(e.predictPrice=t.predictPrice,e.predictText=t.predictText,e.groupPredictPrice=t.groupPredictPrice,e.groupPredictText=t.groupPredictText,e.Discount=t.couponVos||[],e.Discount.length&&(S=!0),e.salePrice=t.salePrice,e.beltType=i,i===D.beltTypeMap.seckilling&&(e.price=t.salePrice,e.showSeckill=y))}))}))})),I.packages=T):(_.forEach((function(e){v.forEach((function(t){t.skuId===e.skuId&&(e.predictPrice=t.predictPrice,e.predictText=t.predictText,e.groupPredictPrice=t.groupPredictPrice,e.groupPredictText=t.groupPredictText,e.Discount=t.couponVos||[],e.Discount.length&&(S=!0),e.salePrice=t.salePrice,e.beltType=i,i===D.beltTypeMap.seckilling&&(e.price=t.salePrice,e.showSeckill=y))}))})),I.skuList=_);var C=!0,x=!0;Object.keys(m).length&&(C=!1,x=!1),"wjz/bdxd/product-detail/product-detail"!==(0,P.getCurrentPage)().route||this.data.secondShow||this.getRecommendData(e.detail);var k={productData:I,beltType:i,salePrice:a,groupPrice:n,coupons:s,predictPrice:c,buttonPredictPrice:u,platformRedPacket:d,promotionList:h,bestShopCoupon:m,noTopCoupon:C,bottomCouponClose:x,hasSkuDiscount:S},L=!this.data.secondShow&&!!(0,P.parsePageQuery)().specLayerIsOpen;(0,P.parsePageQuery)().specLayerIsOpen&&(k.specLayerIsOpen=L),this.setData(k)},setShopCartHide:function(){return{isBlockCar:!1,hasCar:!1}},recommendDataReq:function(e){return(0,C.request)({url:x.API.getShopRecommend,data:e})},getRecommendData:function(e){var t=this,o=e&&e.coupons||[],i=o.length?o.map((function(e){return{batchId:e.batchId,couponBizType:e.couponBizType}})):[],a=this.data,n=a.spuId,r=a.shopId,s=a.saleInfo,c=void 0===s?{}:s,u={spuId:n,shopId:r,price:c.price,originPrice:c.originPrice,sales:c.saleCount,couponInfo:i},p=Object.assign({},u,{channelId:B}),d=Object.assign({},u,{channelId:j}),l=Object.assign({},u,{channelId:M});this.recommendDataReq(p).then((function(e){var o=e.data.spuRecommendVoList||[];t.setData({shopRecommendData:o})})),Promise.all([this.recommendDataReq(d),this.recommendDataReq(l)]).then((function(e){var o={sameData:e[0].data.spuRecommendVoList||[],newProData:e[1].data.spuRecommendVoList||[]},i=!U&&(o.sameData.length>6||o.newProData.length>6);t.setData({showRecommend:i,otherRecommend:o})}))},isSingleSku:function(e){var t=e.skuList,o=void 0===t?[]:t,i=e.packages,a=void 0===i?[]:i;return 1===o.length||1===a.length&&1===a[0].skuList.length},getSkusInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skuList,o=void 0===t?[]:t,i=e.packages,a=void 0===i?[]:i,n=[];if(o&&o.length){var r=!0,s=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(r=(u=p.next()).done);r=!0){var d=u.value;n.push({skuId:d.skuId,num:"1",price:d.longPrice})}}catch(e){s=!0,c=e}finally{try{!r&&p.return&&p.return()}finally{if(s)throw c}}}if(a&&a.length){var l=!0,h=!1,g=void 0;try{for(var m,f=a[Symbol.iterator]();!(l=(m=f.next()).done);l=!0){var v=m.value,b=!0,y=!1,I=void 0;try{for(var S,T=v.skuList[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var w=S.value;n.push({skuId:w.skuId,num:"1",price:w.longPrice})}}catch(e){y=!0,I=e}finally{try{!b&&T.return&&T.return()}finally{if(y)throw I}}}}catch(e){h=!0,g=e}finally{try{!l&&f.return&&f.return()}finally{if(h)throw g}}}return n}}})})),window.define("343",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=e(4);o.default=function(){var e=n().globalData.siteData,t=(0,w.parsePageQuery)()||{},o="",i="";try{o=JSON.parse(JSON.parse(t.skus)[0].cpsInfo.zhiboParams).zhiboExt.room_id,i=JSON.parse(t.skus)[0].cpsInfo.contentId}catch(e){console.log(e)}return(e.contentIdBdVid||i||"")!==(e.roomIdBdVid||o||"")}})),window.define("402",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=e(4);Component({options:{addGlobalClass:!0},properties:{componentData:{type:Object,value:{},observer:function(e){e&&e.indicatprs&&this.formatData(e)}}},data:{score:0,fullStars:[],halfStars:[],emptyStars:[],customStyle:{color:"#858585"}},methods:{formatData:function(e){var t=e.indicatprs,o=void 0===t?"0":t,i=e.style,a=void 0===i?{color:"#858585"}:i;try{var n,r=String(o).split("."),s=w(r,2),c=s[0],u=void 0===c?"0":c,p=s[1],d=void 0===p?"0":p,l=Number(u)>5?5:Number(u),h=0;d>"0"&&d<"8"&&l<5&&(h=1),d>="8"&&l<5&&l++,n=5-l-h,this.setData({score:Number(o).toFixed(1),fullStars:new Array(l).fill(""),halfStars:new Array(h).fill(""),emptyStars:new Array(n).fill("")})}catch(e){console.log(e)}this.setData({customStyle:a})},handleClick:function(){(0,P.bdxdAddLog)(this,{compTargetId:"ssv_663"})}}})})),window.define("404",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,n=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=e(58),_=e(51),C=e(4),D=e(48);Component({properties:{maxShowNum:{type:Number,value:3},recommendData:{type:Array,value:[],observer:function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(e)).map((function(e){var t=(e.realPrice||"").split("."),o=w(t,2),i=o[0],a=void 0===i?"":i,n=o[1],r=void 0===n?"":n;return e.pricePre=a,e.priceFix=r,e}));this.setData({swiperData:this.handelSwiperData(t)})}},ssv:{type:String,value:""}},data:{isShow:!1,spuInfos:[],swiperData:[],swiperCurrent:0,swiperStyle:{}},lifetimes:{attached:function(){this.setSwiperStyle(),this.addProductLogShow()}},methods:{addProductLogShow:function(){(0,C.bdxdAddLog)(this,{compTargetId:this.data.ssv,logType:D.bdtjLogType.elemShow})},handelSwiperData:function(e){for(var t=this.properties.maxShowNum,o=e.slice(0,3*t),i=o.length,a=t,n=[],r=0;r<i;r+=a){var s=o.slice(r,r+a);s.length===a&&n.push(s)}return n},setSwiperStyle:function(){var e=this.properties.maxShowNum/3,t={height:189*1.81*e+42*(e-1)+"rpx"};this.setData({swiperStyle:t})},swiperChangeCustom:function(e){this.setData({swiperCurrent:e.detail.current})},jumpToDetail:function(e){var t=e.currentTarget.dataset.item.spuId;(0,P.jumpToInnerSwan)({path:_.PAGES.PRODUCT_DETAIL,params:{spuId:t,subSceneValue:this.data.ssv},log:{ctx:this}})}}})})),window.define("406",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(59),_=e(51),C=e(58);Component({options:{addGlobalClass:!0},properties:{isShow:{type:Boolean,value:!1},qualityScoreExperienceInfo:{type:Object,value:{}},shopLogo:{type:String,value:""},shopName:{type:String,value:"",observer:function(e){var t=this,o=this.properties.shopPageShow&&e.length>10?e.substring(0,10)+"...":e;this.setData({shopNameShow:o}),a.nextTick((function(){var e=a.createSelectorQuery().in(t);e.select(".shop-name-ruler").boundingClientRect(),e.exec((function(e){if(e&&e[0]){var o=e[0].width;switch(+(t.properties.shopServiceLevel>2)+t.properties.qualityTag){case 1:o>430&&t.setData({tagOverflow:!0});break;case 2:o>378&&t.setData({tagOverflow:!0})}}}))}))}},shopIntro:{type:String,value:"",observer:function(e){var t=this.properties.shopPageShow&&e.length>14?e.substring(0,14)+"...":e;this.setData({shopIntroShow:t})}},shopIndicatprs:{type:String,value:""},shopAuthType:{type:Number,value:0},shopPageShow:{type:Boolean,value:!1},shopInfoIconShow:{type:Boolean,value:!1},authIcon:{type:String,value:"http://bj.bcebos.com/fcmall/0/pic/1efb38d0fd50b562f3071b7bb1848988.png"},bgColor:{type:String,value:""},customStyle:{type:Object,value:{}},qualityTag:{type:Number,value:0},brandPosition:{type:Number,value:1},styleType:{type:Number,value:1},shopRecommend:{type:Array,value:[],observer:function(e){var t=e;this.setData({shopRecommendData:t})}},consult:{type:String,value:""},ucId:{type:String,value:""},showConsult:{type:Boolean,value:!1},shopId:{type:Number,value:0,observer:function(){this.initConsultVisit()}},spuId:{type:String,value:"",observer:function(){this.initConsultVisit()}},shopServiceLevel:{type:Number,value:0},name:{type:String,value:""},isHalfScreen:{type:Boolean,value:!1},notUseSDK:{type:Boolean,value:!1},isBrandProduct:{type:Boolean,value:!1}},data:{shopNameShow:"",shopIntroShow:"",shopRecommendData:[],visitParamExt:{},shopSsv:"ssv_534",tagOverflow:!1},methods:{shopLogoClick:function(e){this.triggerEvent("clickend","SHOP_LOGO")},jumpToShopIndex:function(){!this.properties.isHalfScreen&&this.triggerEvent("clickend","SHOP_INDEX")},jumpToShopInfo:function(){this.triggerEvent("clickend","SHOP_INFO")},initConsultVisit:function(){this.setData({visitParamExt:{init_cards:[{service:10,value:{clientType:"smart-app",spuId:this.properties.spuId,appId:n().globalData.siteData.appId,shopId:this.properties.shopId,url:(0,w.getCurUrl)()}}],init_msg:{msg:"商品："+this.properties.name+" 商品详情页咨询按钮-中部",type:3}}})},onConsultClick:function(e){var t=this;if((0,w.bdxdAddLog)(this,{compTargetId:"ssv_539",actionId:"site_bar_click",userExtra:{spu_id:this.properties.spuId,comp_material_id:this.properties.spuId,target:this.properties.consult}}),this.properties.notUseSDK){var o=P.JD_KEFU_INFO.find((function(e){return+e.shopId==+t.properties.shopId}));(0,C.jumpToInnerSwan)({path:_.PAGES.COMMUNICATE_WEB_VIEW,params:{url:o.kefuUrlInSpu+"?productId="+this.properties.spuId+"&shopId="+this.properties.shopId+"&shopName="+o.shopName+"&userid="+this.properties.ucId+"&productLineAppid=5"}})}},shopLevelTagClick:function(){a.showModal({content:"系统根据店铺的商品销量、发货效率、服务质量等因素对店铺进行综合打分，取分值较高的店铺划分为银牌、金牌、钻石级进行展示。",confirmText:"确定",showCancel:!1})}}})})),window.define("513",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=e(4);o.default=function(e){var t=(0,w.parsePageQuery)()||{},o=n().globalData.siteData;try{var i=t._cecom_ext;try{i&&0!==Object.keys(JSON.parse(i)).length||(i=JSON.parse(t.skus)[0].cpsInfo.zhiboParams||{})}catch(e){i=t._cecom_ext}var a=i&&JSON.parse(i);if(!(t.fid||t.bd_vid||a&&a.ext&&a.ext.bd_vid||a&&a.zhiboExt&&a.zhiboExt.bd_vid))return;var r=t.room_id||a&&a.ext&&a.ext.room_id||a&&a.zhiboExt&&a.zhiboExt.room_id,s=t.contentId||o.channelInfo&&o.channelInfo.contentId;r&&(o.contentIdBdVid=s,o.roomIdBdVid=r),o.bdVidShopId=e}catch(e){console.log(e)}}})),window.define("655",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(51);Component({data:{btnGroupData:[],btnGroupContainerClass:""},properties:{componentData:{type:Object,value:{isLogin:!0,isTakeSuccess:!1,isCouponShareable:!1,isFromShareScene:!1,shareTakeCoupon:!1,isShowErrorMsg:!1},observer:function(e){this.initBtnGroupData()}}},lifetimes:{attached:function(){this.initBtnGroupData()}},methods:{initBtnGroupData:function(){var e=this.properties.componentData,t=e.isLogin,o=e.isCouponShareable,i=e.isFromShareScene,a=e.isShowErrorMsg,n=e.shareTakeCoupon,r=i?this.initShareCouponBtnGroupData():this.initTakeCouponBtnGroupData(),s=void 0;s=!t&&n?"button-group-container-type1":o&&!a?"button-group-container-type3":"button-group-container-type2",this.setData({btnGroupData:r,btnGroupContainerClass:s})},initTakeCouponBtnGroupData:function(){var e=this.properties.componentData,t=e.isTakeSuccess,o=e.isCouponShareable,i=e.isFromShareScene;return e.isLogin?t?o?[{label:"立即使用",emitEvent:"onUseCoupon"},{label:"分享膨胀",emitEvent:"onShare",type:"share"}]:[{label:"立即使用",emitEvent:"onUseCoupon"}]:[{label:"好的",emitEvent:"onClose"}]:i?[{label:"助力好友",emitEvent:"onLogin",type:"login"}]:[{label:"登录并领取",emitEvent:"onLogin",type:"login"}]},initShareCouponBtnGroupData:function(){var e=this.properties.componentData,t=e.isTakeSuccess,o=e.isLogin,i=e.shareTakeCoupon;return o?i?t?[{label:"立即使用",emitEvent:"onUseCoupon"}]:[{label:"好的",emitEvent:"onClose"}]:[{label:"助力好友",emitEvent:"onTakeCoupon"}]:[{label:"助力好友",emitEvent:"onLogin",type:"login"}]},handleBtnTap:function(e){var t=e&&e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.emitEvent;this.dispatch(t,e)},handleFormSubmit:function(e){var t=e&&e.detail&&e.detail.formId;this.dispatch("onShare",{formId:t})}},messages:{onLogin:function(e){e&&e.value&&e.value.errMsg===w.LOGIN_SUCCESS_TEXT&&this.dispatch("onLogin",e)}}})})),window.define("657",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Component({options:{addGlobalClass:!0},properties:{componentData:{type:Object,value:{shareNum:1,isCouponShareable:!1,couponCardList:[]}}},data:{rangeTypes:{"-1":"平台通用",1:"全场通用",2:"指定商品可用",3:"指定店铺可用"}}})})),window.define("659",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(81),P=e(92),_=e(93),C=e(51),D=E(e(126)),x=e(4),k=e(119),L=e(98),A=E(e(82));function E(e){return e&&e.__esModule?e:{default:e}}var O="offline"===A.default.currentEnv?"https://activity.baidu.com/mbox/preview/4a81a19c64/matrixShareSimple":"https://activity.baidu.com/mbox/4a81a19c64/matrixShareSimple",R={success:200,fail:3526,unlogin:8e3},N={nickName:"你的好友",avatar:"https://mall-static.cdn.bcebos.com/doujin/C/image/dxdjx/couponModalDefaultUserAvatar.png"},B={title:"点击助力领优惠",content:"正品补贴领福利，点击助力享多倍优惠，更多好物等你买！",imageUrl:"https://mall-static.cdn.bcebos.com/doujin/C/image/dxdjx/couponModalShareImg.jpg"};Component({behaviors:[(0,k.loginBehavior)()],options:{addGlobalClass:!0},properties:{batchId:{type:String,observer:function(e){e&&2===this.properties.type&&this.takeCoupon()}},scene:{type:Number,value:0,observer:function(e){var t="9"===e;this.setData({isFromShareScene:t,shareTakeCoupon:!t})}},extInfo:{type:Object,value:{},observer:function(e){var t=e.nickName,o=e.avatar;this.setData({userInfo:Object.assign({},N,{nickName:t,avatar:o})})}},type:{type:Number,value:1,observer:function(e){2===e&&this.setData({isUserLogin:!0})}},compData:{type:Object,value:{downgrade:!1,isFromSearch:!1}}},data:{visiable:!1,couponInfo:{},isShowErrorMsg:!1,isTakeSuccess:!1,shareNum:1,relatedCouponInfos:{},shopInfo:{},shareUser:{},userInfo:{},shareUserInfo:"",isFromShareScene:!1,didShowInflateCouponModal:!1,shareTakeCoupon:!0,isUserLogin:!1},logicData:{firstReq:!0,jumpForward:null,logCouponInfo:{}},methods:{catchPoptap:function(){},handleClose:function(e){this.setData({visiable:!1}),this.dispatch("onClose")},handleJumpToBenefitsCenter:function(){(0,w.generalJump)({url:"/wjz/dxdjx/benefits-center/benefits-center?activeTab=myCoupon"})},$loginSuccessCb:function(e){2!==this.properties.type&&(this.setData({isUserLogin:!0}),this.takeCoupon())},checkLoginCb:function(e){2!==this.properties.type&&(this.data.isFromShareScene?this.setData({isShowErrorMsg:!0,visiable:!0,isUserLogin:e}):(this.setData({isUserLogin:e}),this.takeCoupon()))},$checkLoginSuccessCb:function(){this.checkLoginCb(!0)},$checkLoginFailCb:function(){this.checkLoginCb(!1)},takeCoupon:function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,o,i,n,r,s,c,u,p,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.properties,o=t.scene,i=t.batchId,n=t.type,r=t.extInfo,s=(r=void 0===r?{}:r).formId,c=r.shareUserInfo,2===n&&a.showLoading({title:"加载中..."}),u={scene:o,batchId:i},this.data.isFromShareScene&&Object.assign(u,{extInfo:JSON.stringify({formId:s,shareUserInfo:c})}),e.next=8,D.default.hgzAs(C.antifraudConfig.userGrowth);case 8:p=e.sent,u.antiCheatVo=p,(0,P.request)({url:C.API.couponTake,data:u}).then((function(e){e&&e.data&&d.handleTakeCouponReqResponse(e)})).catch((function(e){e&&e.data&&d.handleTakeCouponReqResponse(e)})).finally((function(){d.logicData.firstReq&&(d.logicData.firstReq=!1),d.logicData.takeCouponByBtnPending=!1,a.hideLoading()}));case 11:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,o){return function i(a,n){try{var r=t[a](n),s=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(s)}("next")}))});return function(){return t.apply(this,arguments)}}(),handleTakeCouponReqResponse:function(e){var t=e.status,o=e.data,i=void 0===o?{}:o,a=e._downgradeHeader,n=void 0===a?{}:a;if(Object.values(R).includes(t)){var r=t===R.fail||t===R.unlogin&&this.data.isFromShareScene,s=t===R.success,c=i.couponInfo,u=void 0===c?{}:c,p=i.promptWord,d=void 0===p?{}:p,l=void 0;try{l=JSON.parse(i.extInfo)}catch(e){l={}}var h=l,g=h.shop,m=void 0===g?{}:g,f=h.shareUserInfo,v=h.shareUser,b=void 0===v?{}:v,y=u.tag,I=u.isShared,S=void 0===I?0:I,T=u.shareNum,w=u.jumpForward,P=u.relatedCouponInfos,_=(void 0===P?[]:P)[0]||{},C=_.batchId,D=_.fullPrice,k=_.salePrice,L=6===y&&1===S,A=this.setCouponCardListData(u,L);this.setData({visiable:!0,shopInfo:m,shareUserInfo:f,shareUser:b,isShowErrorMsg:r,isTakeSuccess:s,prompt:d,couponInfo:{couponCardList:A,isCouponShareable:L,shareNum:T},relatedCouponInfos:{batchId:C,fullPrice:D,salePrice:k}}),this.logicData.jumpForward=w,this.logicData.logCouponInfo={tag:y,isShared:S,batch_id:u.batchId,comp_material_id:u.batchId};var E=void 0;try{E=JSON.parse(n.Comp)}catch(e){E=[]}finally{this.logicData.headerComp=E}this.data.isFromShareScene&&this.setData({shareTakeCoupon:!0}),this.dispatch("onTakeSuccess",Object.assign({},e.data,{isTakeSuccess:s}))}else(0,x.normalToast)({title:"活动太火爆了，待会儿再来看看吧"})},setCouponCardListData:function(e,t){var o=e.useStart,i=e.useEnd,a=e.fullPrice,n=e.salePrice,r=e.expandFullPrice,s=e.expandSalePrice,c=e.rangeType,u=e.takeStatus,p=[];return p.push({useStart:o,useEnd:i,fullPrice:a,salePrice:n,rangeType:c,takeStatus:u}),t&&p.push({useStart:o,useEnd:i,fullPrice:r,salePrice:s,rangeType:c}),p}},messages:{onLogin:function(e){this.childLoginHandle(e.value)},onClose:function(){this.handleClose()},onTakeCoupon:function(){this.logicData.takeCouponByBtnPending||((0,x.bdxdAddLog)(this,{compTargetId:"ssv_293"}),this.logicData.takeCouponByBtnPending=!0,this.takeCoupon())},onUseCoupon:function(e){var t=this.logicData,o=t.jumpForward,i=void 0===o?"":o,a=(t.logCouponInfo,this.properties.compData);(a=void 0===a?{}:a).isFromSearch?this.handleClose():(0,w.generalJump)({url:i,params:{subSceneValue:"ssv_84",sch:"n830"}})},onShare:function(e){var t=this.logicData.logCouponInfo,o=void 0===t?{}:t;(0,x.bdxdAddLog)(this,{compTargetId:"ssv_294",userExtra:Object.assign({},o)});var i=e.value&&e.value.formId,a=this.data,n=a.shopInfo.pageUrl,r=void 0===n?"":n,s=a.shareUser,c=s.avatar,u=s.nickName,p=a.shareUserInfo,d=this.properties,l=d.batchId,h=(d.compData,Object.assign({},B)),g=null,m={avatar:c,batchId:l,formId:i,nickName:u,shareSceneValue:"9",shareUserInfo:p},f=r+"&"+(0,x.objToQueryString)(m);if((0,_.getUseFuncs)(_.downgradeFeature.expandCoupon,this.logicData.headerComp).share){var v=O+"?appName=baiduboxapp&scheme="+encodeURIComponent(f);h.shareUrl=v}else g={activityId:863,klUrl:f.replace("baiduboxapp://swan/","")};(0,L.generalShare)({klParams:g,shareParams:h})}}})})),window.define("661",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(51),_="5",C="23",D="42",x="7",k="9";Component({options:{addGlobalClass:!0},properties:{batchId:{type:String,observer:function(e){this.setData({batchId:e})}},scene:{type:Number,value:0,observer:function(e){this.setData({scene:e})}},type:{type:Number,value:1}},data:{showInnerModal:!1,scene:"",batchId:"",extInfo:{}},lifetimes:{attached:function(){if(1===this.properties.type)this.checkCurrentPage();else{var e=this.properties,t=e.scene,o=e.batchId;this.setData({showInnerModal:!0,scene:t,batchId:o})}}},methods:{checkIsFromHotCards:function(e){var t=e.sceneValue,o=e.batchId;return t===C&&o},checkIsFromLuckyFish:function(e){var t=e.sceneValue,o=e.batchId;return t===D&&o},checkIsFromCouponShare:function(e){var t=e.sceneValue,o=e.batchId;return e.shareSceneValue===k&&o&&t!==P.ON_SHARE_APP_SCENE_VALUE},checkShopIndexTakeCouponRights:function(){var e=this;return new Promise((function(t){var o=(0,w.parsePageQuery)(),i=o.sceneValue,a=o.batchId,n=o.shareSceneValue;if(e.checkIsFromLuckyFish({sceneValue:i,batchId:a}))t({scene:x,batchId:a,isFromSearch:!0});else if(e.checkIsFromCouponShare({sceneValue:i,batchId:a,shareSceneValue:n})){var r=o.avatar,s=o.nickName,c=o.formId,u=o.shareUserInfo;t({scene:n,batchId:a,extInfo:{avatar:r,nickName:s,formId:c,shareUserInfo:decodeURIComponent(decodeURIComponent(u))}})}}))},checkPageDetailTakeCouponRights:function(){var e=this;return new Promise((function(t){var o=(0,w.parsePageQuery)(),i=o.sceneValue,a=o.batchId;e.checkIsFromHotCards({sceneValue:i,batchId:a})?t({batchId:a,scene:_,isFromSearch:!0}):e.checkIsFromLuckyFish({sceneValue:i,batchId:a})&&t({batchId:a,scene:x,isFromSearch:!0})}))},checkProductGroupTakeCouponRights:function(){var e=this;return new Promise((function(t){var o=(0,w.parsePageQuery)(),i=o.sceneValue,a=o.batchId;e.checkIsFromLuckyFish({sceneValue:i,batchId:a})&&t({batchId:a,scene:x,isFromSearch:!0})}))},checkCurrentPage:function(){if(n().globalData.siteData.appKey===P.dxdjxAppkey){var e=void 0;switch((getCurrentPages()[0]||{}).route){case"wjz/bdxd/shop-index/shop-index":e=this.checkShopIndexTakeCouponRights;break;case"wjz/bdxd/product-detail/product-detail":e=this.checkPageDetailTakeCouponRights;break;case"wjz/dxdjx/product-group/product-group":e=this.checkProductGroupTakeCouponRights}"function"==typeof e&&this.checkPageHasTakeCouponRights(e)}},checkPageHasTakeCouponRights:function(e){var t=this;e.call(this).then((function(e){var o=e.scene,i=e.batchId,a=e.extInfo,n=void 0===a?{}:a,r=e.isFromSearch;t.setData({scene:o,batchId:i,extInfo:n,isFromSearch:r,showInnerModal:!0})}))}},messages:{onTakeSuccess:function(e){this.dispatch("onTakeSuccess",e.value)},onClose:function(){this.dispatch("onClose")}}})})),window.define("729",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getExpIdFn=void 0;var P=e(92),_=e(59),C=e(4);i.getExpIdFn=function(e){var o=(0,C.parsePageQuery)()&&(0,C.parsePageQuery)().spuId||"",i=r().globalData.siteData.wid||"",a=r().globalData.requestConfig.apiOrigin+_.API.getExpId,n=(0,C.getCurrentPage)(),s={url:"baiduboxapp://swan/eRSS2NhafvwzibGY2oFcNN98DFSPfujf/"+(n.privateProperties&&n.privateProperties.accessUri),userId:"",pageId:o,channelPage:"litchic#5#"+e};return new Promise((function(e){(0,P.request)({url:a,completeUrl:!0,data:s,downGradeOpts:{wid:i,isGetExpId:!0}}).then((function(t){e(t)})).catch((function(t){(0,C.addErrorLog)(t,{compTargetId:"getExpId-err",errType:"api_getExpId_err"},[_.logTypeMap.apiError]),e(t)})),t((function(){e({status:"timeOut"})}),3e3)}))}})),window.define("731",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(119);Component({options:{addGlobalClass:!0},behaviors:[(0,w.loginBehavior)()],properties:{imgUrl:{type:String,value:""},nikename:{type:String,value:""},specsInfo:{type:String,value:""},isSingleSku:{type:Boolean,value:!1}},data:{},methods:{buyRightNow:function(){this.triggerEvent("onHandleBuy")},$loginSuccessCb:function(e){var t=e.value.extra;"buyRightNow"===(void 0===t?{}:t).target&&this.buyRightNow()}},messages:{onLogin:function(e){this.loginHandle(e)}}})})),window.define("733",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w,P=e(4),_=e(51),C=e(92),D=e(3),x=(w=D)&&w.__esModule?w:{default:w},k=e(170);var L={sale:1,uv:2};Component({options:{addGlobalClass:!0},properties:{shopId:{type:String,value:"",observer:function(){this.getMarquee()}},spuId:{type:String,value:""},spuStatus:{type:Object,value:null},isSingleSku:{type:Boolean,value:!1}},data:{marqueeRollAreaStyle:{height:"130px",width:"95%"},marqueeList:[],titleType:1,titleTypeMap:L,personCount:0,gapConfig:_.GAP_CONFIG},logicData:{isFirstRender:!0,isHadShow:!1,screenHeight:0},attached:function(){var e=this;this.getMarquee(),n().globalData.siteData.systemInfoPromise.then((function(t){t&&t.screenHeight&&(e.logicData.screenHeight=t.screenHeight)}))},methods:{getMarquee:function(){var e=this;if(this.properties.shopId){var t=_.API.getMarqueeListUrl,o={spuId:this.properties.spuId,shopId:this.properties.shopId};(0,C.request)({url:t,data:o}).then((function(t){var o=t.data,i=void 0===o?{}:o,a=i.marqueeList,n=i.title,r=void 0===n?"":n;if(a.length&&(e.logicData.isFirstRender&&(e.addPageScrollListener(),e.logicData.isFirstRender=!1),e.setData({marqueeList:a})),"爆品热销中"!==r){var s=r.match(/[0-9]+/g);e.setData({titleType:L.uv,personCount:s&&s[0]})}}))}},onHandleBuy:function(){this.properties.spuStatus&&1===this.properties.spuStatus.state&&this.properties.spuStatus.restStock>=1&&(this.properties.isSingleSku?this.triggerEvent("orderConfirmHandler"):this.triggerEvent("togglespeclayer",{isOpen:!0,scene:_.ATTR_LAYER_MAP.BUY_ATTR}),(0,P.bdxdAddLog)(this,{compTargetId:"ssv_508",userExtra:{spu_id:this.properties.spuId,comp_material_id:this.properties.spuId}}))},addPageScrollListener:function(){var e=this;x.default.addHandler("onPageScroll",(function(t){e.listenScroll(t.scrollTop)}))},listenScroll:function(){var e=this;(0,k.getFeedNodeRect)(".cta-title",this).then((function(e){return(e||{}).top||0})).then((function(t){var o=t-e.logicData.screenHeight+100;e.logicData.screenHeight>0&&o<0&&!e.logicData.isHadShow&&(e.logicData.isHadShow=!0)}))}}})})),window.define("735",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4),P=e(59),_=e(92),C=e(81),D=e(48),x={1:"直播中",2:"直播讲解",3:"直播中",4:"直播讲解"};Component({options:{addGlobalClass:!0},properties:{top:{type:Number,value:116,observer:function(e){this.setData({ballStyle:{top:14+e+"px"}})}},spuId:{type:String,value:"",observer:function(e){e&&this.getLiveBallData()}},xiaodian:{type:String,value:""}},data:{ballStyle:{},ballLabel:x[1],isShowLiveBall:!1,liveScheme:""},logicData:{roomId:"",liveStatus:1},attached:function(){n().globalData.siteData.host===P.BAIDU_APP_HOST&&this.setData({isShowLiveBall:!0})},methods:{getLiveBallData:function(){var e=this;(0,_.request)({url:P.API.getLiveBall,data:{spuId:this.properties.spuId,appSource:P.BAIDU_APP_HOST},method:"GET"}).then((function(t){if(t&&t.data){var o=t.data,i=o.live_scheme,a=void 0===i?"":i,n=o.room_id,r=void 0===n?"":n,s=o.live_status,c=void 0===s?1:s;e.logicData.roomId=r,e.logicData.liveStatus=c,e.setData({ballLabel:x[c],liveScheme:a}),(0,w.bdxdAddLog)(e,{compTargetId:"ssv_175",userExtra:{live_status:c},logType:D.bdtjLogType.elemShow})}}))},handleLiveBallClick:function(){var e=this.logicData,t=e.roomId,o=e.liveStatus,i=this.data.liveScheme;if(i&&t){var a={xiaodian:this.properties.xiaodian},n={roomId:t},r={compTargetId:"ssv_175",userExtra:{live_status:o,room_id:t}};(0,C.goToLive)(i,n,2,a,r)}}}})})),window.define("737",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Component({options:{addGlobalClass:!0},properties:{rankName:{type:String,value:""},ranking:{type:Number,value:-1},spuId:{type:Number,value:-1},isShowRanking:{type:Boolean,value:!1}},data:{},methods:{jumpToRankingList:function(){this.dispatch("jumpToRankingList")}}})})),window.define("739",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(51);Component({options:{addGlobalClass:!0},externalClasses:["anchor-active-style","acnhor-item-style","anchor-style","anchor-active-bottom"],properties:{activeAnchor:{type:Number,value:0,observer:function(e){this.getBottomBarPos(e)}},anchorList:{type:Array,value:[]},beginDistance:{type:Number,value:0},scrollDistance:{type:Number,value:0,observer:function(e){this.setAnchorOpacity(e)}},fixed:{type:Boolean,value:!0},endDistance:{type:Number,value:0},bottomBarWidth:{type:Number,value:18,observer:function(){this.initAnchor()}},windowWidth:{type:Number,value:380,observer:function(){this.initAnchor()}}},data:{curOpacity:0,activePos:0,moveDistance:0,rootStyle:{},beginPos:0},attached:function(){this.initAnchor()},methods:{getBottomBarPos:function(e){var t=this.data,o=t.beginPos+e*t.moveDistance*w.rpx-0;this.setData({activePos:o})},onAnchorClick:function(e){if(!(this.properties.scrollDistance<=0)){var t=e.currentTarget.dataset.index-0;this.triggerEvent("onAnchorChange",{activeAnchor:t})}},setAnchorOpacity:function(){var e=this.properties.activeAnchor;this.getBottomBarPos(e)},initAnchor:function(){var e=this.properties,t=e.bottomBarWidth,o=(e.windowWidth/this.properties.anchorList.length).toFixed(2),i=((o-t)/2*w.rpx).toFixed(2);this.setData({activePos:i-0,moveDistance:o-0,beginPos:i-0})}}})})),window.define("741",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(51),P=e(4),_=e(58),C=e(59),D=e(81);Component({options:{addGlobalClass:!0},properties:{dataList:{type:Object,value:[]},showPopupLayer:{type:Boolean,value:!1},popupType:{type:String,value:""},popupTitle:{type:String,value:""},shopId:{type:Number,value:0}},data:{closeWrapStyleService:{height:"101.36rpx","line-height":"101.36rpx"},closeWrapStyle:C.CLOSE_WRAP_STYLE,closeStyle:C.POPUP_CLOSE_STYLE,closeStyleService:{color:"#fff","font-weight":"bold"},serviceIconMap:w.SERVICE_ICON_MAP},methods:{onClosePopup:function(){this.dispatch("onShowPopupLayerChange",{showPopupLayer:!1})},serviceJump:function(e){var t=e.currentTarget.dataset,o=t.id,i=t.url;(0,P.bdxdAddLog)(this,{compTargetId:"ssv_290",userExtra:{itemId:o}}),10!==o?i&&(0,D.jumpToH5PageByEasyBrowseFirst)({url:i}):(0,_.jumpToInnerSwan)({path:w.PAGES.SHOP_RELATED_CERTIFICATION,params:{shopId:this.properties.shopId}})}}})})),window.define("743",(function(e,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w,P,_){"use strict";var C=e(92),D=e(4),x=e(51);function k(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Component({properties:{marqueeIsShow:{type:Boolean,value:!1},direction:{type:Number,value:-1},duration:{type:Number,value:3e3},marqueeStyle:{type:Number,value:1},limitLen:{type:Number,value:1},shopId:{type:String,value:""},navHeight:{type:Number,value:64,observer:function(e){this.setData({rootStyle:{top:10+e+"px"}})}}},data:{boxTop:"-37px",currentIndex:0,currentStyle:1,nextStyle:0,list:[],rootStyle:{}},observers:{"marqueeIsShow,shopId":function(){this.getMarqueeList()}},lifetimes:{detached:function(){cancelAnimationFrame(this.timer),this.timer=null,clearInterval(this.intervalId)}},methods:{getMarqueeList:function(){var e=this,t=(0,D.parsePageQuery)().spuId;if(this.properties.marqueeIsShow&&t&&this.properties.shopId){var o={spuId:t,shopId:this.properties.shopId},i=x.API.getMarqueeListUrl;(0,C.request)({url:i,data:o}).then((function(t){var o=t.data,i=void 0===o?{}:o,a=i&&i.marqueeList||[];a.length&&e.handleList(a)}))}},handleList:function(e){var t=e[e.length-1],o=e.slice(0,2);e=[t].concat(k(e),k(o)),this.setData({list:e}),this.renderAnnimate()},requestAnimationFrameFn:function(e){return i?i(e):t((function(){e()}),1e3/60)},cancelAnimationFrameFn:function(e){return cancelAnimationFrame?cancelAnimationFrame(e):clearTimeout(e)},renderAnnimate:function(){var e=this,t=0,i=this.properties.direction,a=37*i/36,n=this.data.list.length-2,r=this.data.currentIndex,s=this.data.currentStyle,c=this.data.nextStyle,u=this.data.boxTop;this.intervalId&&clearInterval(this.intervalId),this.intervalId=o((function o(){e.timer=e.requestAnimationFrameFn(o),0===(t=++t%37)?(c=0,e.setData({currentStyle:s,boxTop:u,nextStyle:c,currentIndex:r})):t<36?(u=(r*i*37+a*t).toFixed(4)-37+"px",s=1-t/36*1,c=1*t/36,e.setData({currentStyle:s,boxTop:u,nextStyle:c,currentIndex:r})):36===t&&(s=1-t/36*1,c=t/36*1,e.setData({currentStyle:s,boxTop:u,nextStyle:c,currentIndex:r}),r=++r%n,u=(r*i*37).toFixed(4)-37+"px",0===r&&(s=1,c=0,e.setData({currentStyle:s,boxTop:u,nextStyle:c,currentIndex:r})),e.timer&&(e.cancelAnimationFrameFn(e.timer),e.timer=null))}),this.properties.duration)}},messages:{imgLoaded:function(){}}})})),window.define("745",(function(e,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w,P){"use strict";e(51);var _=e(4);function C(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var D="mip-bdxd-recommend-group-move-wrapper",x="mip-bdxd-recommend-group-move-wrapper-none";Component({options:{addGlobalClass:!0},properties:{__id__:{type:String},__name__:{type:String},__title__:{type:String},__type__:{type:String},groupRecommend:{type:Array,value:[],observer:function(){this.initGroupList()}},groupFriend:{type:Object,value:{}},direction:{type:Number,value:-1},countDownMap:{type:Object,value:{}}},data:{groupMoveList:[],boxTop:0,moveStyle:"mip-bdxd-recommend-group-move-wrapper",count:0},logicData:{moveDistance:236.5,intervalTimer:null},attached:function(){this.initGroupList()},detached:function(){clearInterval(this.logicData.intervalTimer)},methods:{handleTimeOver:function(){r.showToast({title:"该团已不存在，请重新选择",icon:"none"}),t((function(){(0,_.refreshCurPage)()}),1e3)},groupMove:function(){var e=this;this.logicData.intervalTimer=o((function(){var o=e.data.boxTop,i=e.data.count;e.setData({boxTop:o-e.logicData.moveDistance,count:++i},(function(){var o=e.data.groupMoveList.length/2-1;i===o&&t((function(){e.setData({boxTop:0,count:0,moveStyle:x},(function(){e.setData({moveStyle:D})}))}),600)}))}),5e3)},initGroupList:function(){if(this.properties.groupRecommend.length&&!this.logicData.intervalTimer){var e=this.properties.groupRecommend.slice(0,2),t=[].concat(C(this.properties.groupRecommend),C(e));this.setData("groupMoveList",t),this.groupMove()}}}})})),window.define("747",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(748),P=e(749),_=55;Component({properties:{livingUrl:{type:String},liveComponentInfo:{type:Object},generalParam:{type:Object}},data:{prefixCls:"live-streaming-video",liveStyle:{},screenHeight:0,screenWidth:0,startTime:0,LIVE_CONFIG:{text:"直播中",icon:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-small-living.gif"},showLiveStreaming:!0,liveCloseIcon:"https://wutong.cdn.bcebos.com/sjh-live%2Flive-close.png"},lifetimes:{attached:function(){this.getScreenInfo(),n().globalData.siteData.isIpx&&(this.setData("isPx",!0),_=90),this.ctx=a.createLivePlayerContext("myLive")}},getScreenInfo:function(){var e=a.getSystemInfoSync(),t=e.windowWidth,o=e.windowHeight;this.setData({screenWidth:t,screenHeight:o})},handleAdsorb:function(e,t,o){var i={},a=this.data.screenWidth/2-44.5;return e>=a&&(i.left="3vw"),e<a&&(i.right="3vw"),t<=_?i.bottom=_+"px":o<120?i.top="20vw":i.bottom=t+"px",i},methods:{handleTouchstart:function(){var e=(new Date).getTime();this.setData({startTime:e})},handleTouchMove:function(e){var t=e.touches[0],o=t.clientX,i=t.clientY,a=this.data.screenWidth-o-44.5,n=this.data.screenHeight-i-79;return this.setData({liveStyle:{bottom:n+"px",right:a+"px"}}),!0},handleTouchEnd:function(e){var t=this.data,o=t.startTime,i=t.liveStyle,a=t.screenWidth,n=t.screenHeight,r=(new Date).getTime(),s=e.changedTouches[0],c=s.clientX,u=s.clientY,p=a-c-44.5,d=n-u-79,l=this.handleAdsorb(p,d,u);r-o<300&&(l.bottom=i.bottom,l.top=i.top),this.setData({liveStyle:l})},handleLiveClick:function(){var e=this.properties.generalParam,t=this.properties.liveComponentInfo,o=t.liveState,i=t.replayUrl,n=t.roomId;o!==w.LIVE_STATE.END?o===w.LIVE_STATE.LIVING&&(this.closeLive(),(0,P.goToLive)(n,e,"video")):a.navigateTo({url:"/wjz/bdxd/communicate/common-web-view/common-web-view?url="+encodeURIComponent(i)})},closeLive:function(){this.ctx.stop(),this.setData({showLiveStreaming:!1})}}})})),window.define("748",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w;function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(o,"__esModule",{value:!0});var _=o.SECOND=1e3,C=(o.THIRTY_SECOND=30*_,o.FIVE_MINUTES=60*_*5,o.LIVE_STATE={NO:0,LIVING:1,END:2,SOON:3,BUFFER:4,LATE:5,BACKING:"backing"});o.LIVE_STATE_MAPS={0:"no",1:"living",2:"end",3:"soon",backing:"backing"},o.LIVE_STATE_CONFIG=(P(w={},C.NO,{text:"开播还有",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-count-down.gif"}),P(w,C.LIVING,{text:"直播中",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-living.gif",btnText:"去围观"}),P(w,C.END,{text:"直播讲解",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-play-back.gif"}),P(w,C.SOON,{text:"主播赶来中",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-shop.png"}),P(w,C.BACKING,{text:"回放生成中",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-backing.gif"}),P(w,C.BUFFER,{text:"回放生成中",imgUrl:"https://fe-resource.cdn.bcebos.com/mip%2Fstore%2Fmip-sjh-store-live-backing.gif"}),w)})),window.define("749",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.goToLive=void 0;var w,P=e(5),_=(w=P)&&w.__esModule?w:{default:w};o.goToLive=function(e,t,o){!function(e,t){var o=_.default.configOfLogAction.actionIdForDeveloper;_.default.logActions.addUserDefinedLog(Object.assign({},e,{actionId:o.SITE_COMP_CLICK,compTargetId:"sjh-live-store-jump-"+t+"-smart"}))}(t,o),a.openBdboxWebview({module:"live",action:"enterRoom",parameters:{params:{roomId:e,source:{livesource:"jimuyu"}}},fail:function(e){console.log("openBdboxWebview fail",e)}})}})),window.define("751",(function(e,t,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";Component({properties:{startTime:{type:[String,Number]}},data:{prefixCls:"store-live-count-down",hours:"00",mins:"00",seconds:"00"},lifetimes:{attached:function(){var e=this;this.diffTime()>0&&(this.setTime(),this.countDownTimer=o((function(){e.setTime()}),1e3))},detached:function(){clearInterval(this.countDownTimer)},methods:{setTime:function(){var e=this.diffTime();if(e<=0)clearInterval(this.countDownTimer);else{var t=Math.floor(e/36e5),o=e%36e5,i=Math.floor(o/6e4),a=Math.floor(o%6e4/1e3);this.setData({hours:t<10?"0"+t:t.toString(),mins:i<10?"0"+i:i.toString(),seconds:a<10?"0"+a:a.toString()})}},diffTime:function(){var e=(new Date).getTime(),t=+this.properties.startTime-e;return t}}}})})),window.define("753",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Component({properties:{imgUrl:{type:String}},data:{prefixCls:"store-live-emojis",bubbingGif:"https://fe-resource.bd.bcebos.com/mip%2Fmip-video%2Flive_zan_zuizhong.gif"}})})),window.define("755",(function(e,t,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(756),_=e(749),C=e(748);Component({properties:{__id__:{type:String},__type__:{type:String},__name__:{type:String},__title__:{type:String},spuId:{type:[String,Number],value:"",observer:function(e){var t=this;e&&(this.getRoomInfo(),this.timeDiffTimer=o((function(){t.setDiffTime()}),C.SECOND))}}},data:{generalParam:{},showComponent:!1,liveComponentInfo:{liveStatus:C.LIVE_STATE.NO,liveId:"",roomId:"",streamerId:"",startTime:"",replayUrl:"",playUrl:"",diffTime:""},prefixCls:"mip-sjh-store-live",showPendant:!0,pendantClass:"",currentLiveConfig:C.LIVE_STATE_CONFIG[C.LIVE_STATE.NO],showBtn:!1,showCountDown:!1,showMinVideo:!1,isFirstGoLive:!0,userId:r().globalData.siteData.ucId},lifetimes:{attached:function(){this.setData({generalParam:{id:this.properties.__id__,type:this.properties.__type__,name:this.properties.__name__,title:this.properties.__title__}}),this.changeLiveState()},detached:function(){clearInterval(this.roomInfoTimer),clearInterval(this.replayInfoTimer),clearInterval(this.timeDiffTimer)}},methods:{setDiffTime:function(){var e=this,t=(new Date).getTime();this.data.liveComponentInfo.startTime-t<C.FIVE_MINUTES&&(clearInterval(this.timeDiffTimer),this.getRoomInfo(),this.roomInfoTimer=o((function(){e.getRoomInfo()}),C.THIRTY_SECOND))},getRoomInfo:function(){var e=this,t=this.data,i=t.liveComponentInfo,a=t.generalParam,r=t.showComponent,s={bindId:+this.properties.spuId,source:1};(0,P.post)("/hummer/live/queryLive",s,{},a).then((function(t){var a=t&&t.data,s=a.liveStatus,c=a.hlsUrl,u=a.roomId,p=a.replayVideoUrl,d=a.alaId;if(0===t.status&&d&&(u||p)){i=Object.assign({},i,a),s===C.LIVE_STATE.LIVING&&(i=Object.assign({},i,{playUrl:c}));var l="android"===n.getSystemInfoSync().platform;s!==C.LIVE_STATE.BUFFER&&s!==C.LIVE_STATE.END||!l?s!==C.LIVE_STATE.LATE&&(r=!0):r=!1,e.setData({showComponent:r,liveComponentInfo:i}),e.changeLiveState(),s===C.LIVE_STATE.END&&(clearInterval(e.roomInfoTimer),e.getPlaybackInfo(),e.replayInfoTimer=o((function(){e.getPlaybackInfo()}),C.FIVE_MINUTES))}else e.triggerEvent("triggerNoShopLiveData")})).catch((function(e){throw e}))},getPlaybackInfo:function(){var e=this,t=this.data,o=t.liveComponentInfo,i=t.generalParam,a={bindId:+this.properties.spuId,source:1};(0,P.post)("/hummer/live/queryLive",a,{},i).then((function(t){if(0===t.status){var i=(t&&t.data).replayVideoUrl;i?(o=Object.assign({},o,{liveStatus:C.LIVE_STATE.END,replayUrl:i}),clearInterval(e.replayInfoTimer)):o=Object.assign({},o,{liveStatus:C.LIVE_STATE.BACKING}),e.setData({liveComponentInfo:o,showPendant:"android"!==n.getSystemInfoSync().platform}),e.changeLiveState()}})).catch((function(e){throw e}))},openLiveRoom:function(){var e=this.data.generalParam,t=this.data.liveComponentInfo,o=t.liveStatus,i=t.replayUrl,a=t.roomId;o!==C.LIVE_STATE.END?o===C.LIVE_STATE.LIVING&&(this.setData({showMinVideo:!1,isFirstGoLive:!1}),(0,_.goToLive)(a,e,"icon")):n.navigateTo({url:"/wjz/bdxd/communicate/common-web-view/common-web-view?url="+encodeURIComponent(i)})},changeLiveState:function(){var e=this.data,t=e.prefixCls,o=e.isFirstGoLive,i=this.data.liveComponentInfo,a=i.liveStatus,n=i.startTime,r=[t+"-pendant",t+"-pendant-"+C.LIVE_STATE_MAPS[a]],s=C.LIVE_STATE_CONFIG[a],c=a===C.LIVE_STATE.LIVING,u=a===C.LIVE_STATE.NO&&n>0,p=a===C.LIVE_STATE.LIVING&&o;this.setData({pendantClass:r,currentLiveConfig:s,showBtn:c,showCountDown:u,showMinVideo:p})}}})})),window.define("756",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.post=void 0;var w,P=e(5),_=(w=P)&&w.__esModule?w:{default:w};function C(e,t,o,i,a){_.default.logActions.addReqLog({isFirstScreen:a,time:new Date-i,path:e,type:t.type,id:t.id,name:t.name,title:t.title,compTargetId:o})}o.post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments[4],s=arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return new Promise((function(u,p){var d=new Date,l=n().globalData.requestConfig.apiOrigin;a.request({url:""+l+e,method:o.method||"POST",data:t,header:{"content-type":o.contentType||"application/json"},success:function(t){0==+t.data.status?(C(e,i,r,d,c),u(t.data)):(C(e,i,s,d,c),p(t.data))},fail:function(t){C(e,i,s,d,c),p(t)}})}))}})),window.define("758",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(4);Component({properties:{otherRecommend:{type:Object,value:{},observer:function(e){this.handelRecommend(e)}},spuId:{type:String,value:""}},data:{tabs:[],maxShowNum:6,isFirstClick:!0},methods:{handelRecommend:function(e){var t=this.data.maxShowNum,o=e.sameData,i=void 0===o?[]:o,a=e.newProData,n=void 0===a?[]:a,r=[];if(i.length>=t&&r.push({name:"sameRecommend",label:"相似推荐",active:!0,content:i,ssv:"ssv_533"}),n.length>=t){var s=i.length<t,c=s?"ssv_532":"";r.push({name:"newRecommend",label:"新品推荐",active:s,content:n,ssv:c})}this.setData({tabs:r})},onTabClick:function(e){var t=this.data.tabs,o=e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.name||e.name,i=e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.ssv||e.ssv;t.forEach((function(e){e.active=e.name===o}));var a=this.data.isFirstClick;a&&!i&&((0,w.bdxdAddLog)(this,{compTargetId:"ssv_532"}),a=!1),this.setData({tabs:t,isFirstClick:a})}}})})),window.define("760",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=e(51),P=e(4),_=e(58);Component({options:{addGlobalClass:!0},data:{},properties:{praiseRate:{type:String,value:""},showRate:{type:Number,value:0},commnetTotal:{type:Number,value:0},commentList:{type:Array,value:[]},spuId:{type:String,value:""},shopId:{type:String,value:""},nLimit:{type:Number,value:5}},methods:{handleImgClick:function(e){(0,P.bdxdAddLog)(this,{compTargetId:"ssv_281",userExtra:{}})},handleCardClick:function(e){var t=Boolean(e.currentTarget.dataset.isBar);(0,P.bdxdAddLog)(this,{compTargetId:"ssv_282",userExtra:{is_bar:t}}),(0,_.jumpToInnerSwan)({path:w.PAGES.COMMENT_LIST_PAGE,params:{shopId:this.properties.shopId,spuId:this.properties.spuId}})}}})})),window.define("762",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(4),_=e(61);Component({options:{addGlobalClass:!0},properties:{spuStatus:{type:Object,value:{}},afterSales:{type:Array,value:[]},attributes:{type:Array,value:[]},isOverseas:{type:Number,value:0},description:{type:Array,value:[]},spuId:{type:String},warning:{type:String,value:""},isNft:{type:Boolean,value:!1},bottomCouponClose:{type:Boolean,value:!0}},data:{curConsult:-1},logicData:{generalParams:{id:"mip-bdxd-product-detail-consult",name:"mip-bdxd-product-detail-consult",type:"mip-bdxd-product-detail-consult",title:"商详咨询"}},ready:function(){var e=this;this.intersectionObserver=(0,_.observerElementShown)({context:this,selector:".no-content",callback:function(){(0,P.bdxdAddLog)(e,{compTargetId:"p_d_bottom_show"})}})},detached:function(){this.intersectionObserver=null},methods:{handleImgClick:function(e){var t=e.currentTarget.dataset.index,o=e.currentTarget.dataset.key,i=this.properties.description[o];n.previewImage({current:i&&i.list[t],urls:[].concat(i&&i.list[t])})},handleConsultClick:function(e){var o=e.currentTarget.dataset.index;o===this.data.curConsult-1?this.setData({curConsult:-1}):this.setData({curConsult:o+1}),t((function(){n.pageScrollTo({scrollTop:e.currentTarget.offsetTop})}),100)}}})})),window.define("764",(function(e,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w){"use strict";var P=e(51),_=e(4),C=e(48);Component({options:{addGlobalClass:!0},properties:{bestShopCoupon:{type:Object,value:{},observer:function(e){var o=this;e&&e.batchId&&e.remainingTime&&e.remainingTime>0?(this.setData({showCouponBarArea:!0}),this.addCouponShowLog(),t((function(){o.closeCouponCard("ssv_611")}),5e3)):(this.setData({showCouponBarArea:!1}),this.dispatch("hideTopCoupon",!0))}},isSingleSku:{type:Boolean,value:!1},navHeight:{type:Number,value:64,observer:function(e){this.setData({rootStyle:{top:10+e+"px"}})}}},data:{couponMoveOut:!1,showCouponBarArea:!1,rootStyle:{}},methods:{addCouponShowLog:function(){(0,_.bdxdAddLog)(this,{compTargetId:"ssv_610",logType:C.bdtjLogType.elemShow})},useBestCoupon:function(){this.closeCouponCard(),(0,_.bdxdAddLog)(this,{compTargetId:"ssv_605"}),this.properties.isSingleSku?this.triggerEvent("orderConfirmHandler"):this.triggerEvent("togglespeclayer",{isOpen:!0,scene:P.ATTR_LAYER_MAP.BUY_ATTR})},closeCouponCard:function(e){var o=this,i="ssv_609";"string"==typeof e&&(i=e),this.setData({couponMoveOut:!0}),t((function(){o.data.showCouponBarArea&&(o.setData({showCouponBarArea:!1}),(0,_.bdxdAddLog)(o,{compTargetId:i}),o.dispatch("hideTopCoupon",!1))}),230)},oneItemTouchMove:function(){this.closeCouponCard("ssv_608")}}})})),window.define("766",(function(e,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T,w,P){"use strict";var _=H(e(3)),C=e(92),D=e(51),x=H(e(767)),k=e(93),L=e(58),A=e(88),E=e(4),O=H(e(768)),R=e(81),N=e(342),B=e(340),j=e(341),M=e(729),U=e(352),F=e(769),G=e(59),V=H(e(513)),q=e(323);function H(e){return e&&e.__esModule?e:{default:e}}function z(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var Y,K,J=s().globalData.currentAppBuildTime||"",Q=(s().globalData.siteData||{}).appId,W={0:"ssv_453",1:"ssv_452",2:"ssv_451"};Component({behaviors:[N.productDetailBehavior],options:{addGlobalClass:!0},properties:{componentData:{type:Object,value:{}}},data:{afterSaleTextStatic:x.default,firstGoodsTitle:"",showRate:0,praiseRate:"",showComment:!1,commentTotal:0,commentList:[],videoSrc:"",videoPoster:"",defaultSelectText:"请选择商品规格",couponPopupVisible:!1,appBuildTime:J,oCarouselInfo:null,spikeInfo:null,groupActivityState:D.groupActivityState,groupStage:0,isGroupLayerShow:!1,recommendDeadline:3e5,screenWidth:0,isOverseas:0,collectStatus:0,showCarouselPlace:!0,showFisrtImage:!0,firstImg:"",showPopupLayer:!1,popupLayerInfo:{},anchorList:["商品","详情"],anchorIdList:["product","detail"],activeAnchor:0,scrollDistance:0,anchorTopList:[],isShowActivityLogo:!1,rootStyle:{},couponBottomTip:"",redPacketInfo:null,ballImg:"",ballIsShow:!1,anchorOpacity:0,anchorHiddenStyle:"",skeletonVisiable:!0,finalSkuPriceList:[],anchorHeight:38,storeRankingDetail:{},isShowRanking:!1,isFromOrchard:!1,nPriceBuyType:D.N_PRICE_BUY_TYPE.NORMAL,discountArr:[],attrLayerMap:D.ATTR_LAYER_MAP,showPage:!0,gapConfig:D.GAP_CONFIG,showTopBar:!0,xiaodian:"ssv_175",isShowLiveBall:!1,warning:"",bjhInfo:null,isNft:!1,shopRecommendData:[],showRecommend:!1,otherRecommend:{},isJDProduct:!1,cuid:"",isShowLikeList:!0,hitMayYouLike:!1,meaninglessFlag:"1",isBrandProduct:!1,isDelivery:!1,skuInfo:[]},logicData:{changeData:{},countDownTimer:-1,isOrderCheckLoaded:!0,shouldScrollAnchor:-1,currentPageHeight:0,generalParams:{id:"mip-bdxd-product-page",name:"mip-bdxd-product-page",type:"mip-bdxd-product-page",title:"商品详情页组件"},isAddingCart:!1,isAutoTakeCoupon:!1,hasFirstImg:!1,mediaLoaded:!1,hasLogin:!1,navHeight:64,lastNavBarColorFlag:!0,isPrefetch:!1,isPrefetchImg:!1,protectIds:"",productDetailData:{},isFirstShow:!0},lifetimes:{created:function(){_.default.clearEvents(["getNavHeight"]),this.getSpecSelectStatus(),this.changeNavBarColor(!0),this.performancefLogExtra=(0,E.performanceLogTime)({},"created")},attached:function(){var e=this;(0,C.checkLoginStatus)().then((function(){e.logicData.hasLogin=!0,e.setData("isLogin",!0)})).catch((function(){e.setData("isLogin",!1)}));var t=(0,E.parsePageQuery)(),o=t.spuId;(0,E.getNetworkType)().then((function(t){t&&"wifi"===t&&e.setData({oCarouselInfo:Object.assign({},e.data.oCarouselInfo,{muted:!0,videoAutoplay:!0})})}));var i={},a=!!s().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+o],n=!!s().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_PREIMAGE_"+o],r=s().globalData.pageReqPrefetchData&&s().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+o]||"{}",c=JSON.parse(r),u=(c.data&&c.data.images||[])[0]||"";(t.firstImg||u)&&(i.firstImg=(0,O.default)(t.firstImg||u),i.showFisrtImage=!0,this.logicData.hasFirstImg=!0,i.firstGoodsTitle=t.firstGoodsTitle||""),this.getProductDetail(),this.setData(Object.assign({spuId:o},i,{screenWidth:(s().globalData.siteData.systemInfo||{}).screenWidth||414,isHalfScreen:(0,A.isHalfScreenOpen)()})),(0,E.isDxdjx)()&&this.getStoreRanking(),this.logicData.isPrefetch=a,this.logicData.isPrefetchImg=n,_.default.addHandler("getNavHeight",(function(t){return e.handleStyle(t)}))},ready:function(){var e=this;Page.after({url:"wjz/bdxd/product-detail/product-detail",methods:{onPageScroll:function(t){e.listenScroll(t.args.e.scrollTop)}}})},detached:function(){_.default.clearEvents(["getNavHeight"])}},pageLifetimes:{show:function(){var e=this.data,t=e.hasGetGoodsData,o=e.hasCar,i=e.isBlockCar,a=e.isNft,n=e.isHalfScreen,r=this.logicData,s=r.isAutoTakeCoupon,c=r.isFirstShow;if(t&&o&&!i&&!a&&this.getCartCount(),t&&this.getCollectStatus(),s&&(this.logicData.isAutoTakeCoupon=!1),!c){if(n){var u=(0,A.getDisplayModeCur)(),p=(0,A.navigationBarHeight)()||44,d=(0,A.getStatusBarHeight)(u)+p;this.handleStyle(d+"px"),this.changeMode()}this.getProductDetail(),this.setData({secondShow:!0})}this.handleTask()},hide:function(){var e={secondShow:!1};(0,E.parsePageQuery)().specLayerIsOpen&&(e.specLayerIsOpen=!1),this.setData(e)}},methods:{handleTask:function(){var e=this,t=s().globalData,o=t.isFromOrchard,i=t.browsedSpuList,a=void 0===i?[]:i;o&&-1===a.indexOf(this.data.spuId)&&this.setData({isFromOrchard:o},(function(){U.taskSupplier.execute({command:"action",aid:[G.taskId.orchard]}),a.push(e.data.spuId)}))},handleStyle:function(e){var t={position:"fixed",top:e,left:0,right:0};this.logicData.navHeight=+e.replace("px",""),this.setData({rootStyle:t,navHeight:this.logicData.navHeight})},toggleGroupLayer:function(e){var o=this,i=e.groupId||e.detail.groupId||e.currentTarget.dataset.groupId||"",a=Boolean(e.isFriend)||!1,n=Boolean(e.isOpen||e.detail.isOpen||e.currentTarget.dataset.isOpen);if(n&&i)this.findCurrentGroup({groupId:i,isFriend:a});else if(i){var r=D.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY;t((function(){o.toggleSpecLayer({isOpen:!0,scene:r})}),D.modalDuration)}this.setData({isGroupLayerShow:n}),this.changeNavBarColor(n)},findCurrentGroup:function(e){var t=this,o=e.groupId;e.isFriend?this.setData({currentGroupId:o,currentGroupIndex:-1}):this.data.recommendGroups.some((function(e,i){if(e.groupId===o)return t.setData({currentGroupId:o,currentGroupIndex:i}),!0}))},getAnchorTop:function(){var e=this,t=r.createSelectorQuery().in(this);this.data.anchorIdList.forEach((function(e){t.select("#"+e).boundingClientRect()})),t.exec((function(t){var o=e.data.anchorHeight,i=[0],a=0;t.forEach((function(t){a+=t.height,i.push(a-o-e.logicData.navHeight)})),e.setData({anchorTopList:i},(function(){~e.logicData.shouldScrollAnchor&&e.onRefreshTop({activeAnchor:e.logicData.shouldScrollAnchor})}))}))},onRefreshTop:function(e){var t=e.activeAnchor;!(this.data.anchorTopList[t]<=this.logicData.currentPageHeight)&&r.pageScrollTo({scrollTop:this.data.anchorTopList[t]})},onAnchorChange:function(e){var t=e.detail&&e.detail.activeAnchor;this.logicData.shouldScrollAnchor=t,r.pageScrollTo({scrollTop:this.data.anchorTopList[t]}),(0,E.bdxdAddLog)(this,{compTargetId:W[t],userExtra:{spu_id:this.data.spuId||"",comp_material_id:this.data.spuId||""}})},listenScroll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this.logicData.shouldScrollAnchor;~o&&t===this.data.anchorTopList[o]&&(this.logicData.shouldScrollAnchor=-1);var i=this.data.anchorTopList;this.logicData.currentPageHeight=t;var a=i.length?this.data.anchorList.length-1:0;i.some((function(e,o){if(t<e-10)return a=o-1,!0}));var n=void 0;new Promise((function(t){r.createSelectorQuery().in(e).select(".bdxd-product-detail-consult").boundingClientRect((function(e){n=(e||{}).top||0,t(n)})).exec()})).then((function(o){var i=t>=0?t:0,n=i/120<.5;n!==e.logicData.lastNavBarColorFlag&&e.changeNavBarColor(n),e.setData({scrollDistance:i,activeAnchor:a})}))},changeDirection:function(e){if(-1!==(s().globalData.siteData.systemInfo.system||"").toLowerCase().indexOf("ios")){var t=!0;"horizontal"===e.detail&&(t=!1),this.setData({showTopBar:t})}},getCommnetList:function(){var e=this,t=this.data.spuId;if(t){var o=D.API.getCommnetListNew,i={appId:Q,evaluateType:1,shopId:this.data.shopId,spuId:t,pageSize:2,pageNum:1,meaninglessFlag:this.data.meaninglessFlag};(0,C.request)({url:o,data:i,downGradeOpts:{isFromSDK:!0}}).then((function(t){var o=t&&t.data||{},i=o.evaluates.map((function(e){return e.evaluatePics=e.evaluatePics&&e.evaluatePics.slice(0,4)||[],e})),a=!!o.total;e.setData({showComment:a,commentTotal:o.total,praiseRate:o.praiseRate,showRate:o.showRate,commentList:i},(function(){var t=e.data.anchorIdList,i=e.data.anchorList;o.total&&(t.splice(1,0,"comment"),i.splice(1,0,"评价")),e.setData({anchorIdList:[].concat(z(new Set(t))),anchorList:[].concat(z(new Set(i)))})})),e.data.commentList.length<2&&o.meaninglessCount&&(e.setData({meaninglessFlag:"2"}),e.getCommnetList())}))}},changeNavBarColor:function(e){this.data.scrollDistance/120<.5&&(e=!0),r.setNavigationBarColor({frontColor:e?"#ffffff":"#000000",backgroundColor:e?"#3388FF":"#ffffff",animation:{duration:500,timingFunc:"linear"}}),this.logicData.lastNavBarColorFlag=e},jumpToShopIndex:function(e){"SHOP_INDEX"===e.detail&&((0,E.bdxdAddLog)(this,{compTargetId:"ssv_283",userExtra:{spu_id:this.data.spuId,comp_material_id:this.data.spuId}}),(0,R.generalJump)({url:this.data.shopDetail.pageUrl}))},handleHomeClick:function(){(0,L.jumpToInnerSwan)({path:D.PAGES.SHOP_HOME,type:L.innerJumpType.switchTab})},closeCouponPopup:function(){this.setData({couponPopupVisible:!1})},getDeliveryDayText:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",n="";return n=e<=3?"预计"+24*Math.ceil(e<=0?1:e)+"小时内发货":t?"受"+D.EXEMP_AREA_MARK_MAP[o]+i+"，下单后预计"+e+"天内发货":"预计"+e+"天内发货",a&&(n=a),n},getDeliverStyle:function(e){var t=1;return e<=3&&(t=2),t},getProductDetail:(Y=regeneratorRuntime.mark((function e(){var o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.getExpIdFn)(D.SUB_APPID.productDetail);case 2:if(o=e.sent,i=o.data&&o.data.samplingId||"",s().globalData.siteData.wid=i,(0,E.isInProductPage)()){e.next=7;break}return e.abrupt("return");case 7:(0,j.getProductDetail)().then((function(e){var t=e.data||{};if(t.goodsLabels&&t.goodsLabels.some((function(e){return[18,19].includes(e.id)})))return a.setData({showPage:!1}),(0,E.showModal)({title:"提示",content:"当前商品仅可在直播间购买"},E.smartGoBack);a.logicData.productDetailData=t,(0,E.judgeShopStatus)({status:t.programStatus,normalProcess:function(){var e=(0,A.isHalfScreenOpen)(),o=s().globalData.siteData.channelInfo.sceneValue,n=e&&D.FEED_SCENE_VALUE.includes(+o)?[]:(t.video&&JSON.parse(t.video)||[]).map((function(e){return{type:"video",videoSrc:e.files&&e.files[0]&&e.files[0].url||"",videoPoster:e.thumbanial||""}})),c=(t.images||[]).map((function(e,t){return{type:"image",imageUrl:e,src:e,id:t}})),u={};a.logicData.hasFirstImg||n.length||!c.length||(u.firstImg=(0,O.default)(c[0].imageUrl));var p=(t.sellingPoints||[]).map((function(e){return{text:e.name}})),d=t.goodsType,l=t.supportPayType,h=2!=+l&&d!==D.goodsTypeMap.virtualCard&&d!==D.goodsTypeMap.recharge&&6!=+t.scene,g=t.freeShipping,m=t.isExempt||0,f=t.goodsLabels||[],v=t.attributes||[],b=n.concat(c),y=!!~(t.spuDefineLabels||[]).findIndex((function(e){return 21==+e.id}));y&&(0,E.bdxdAddLog)(a,{compTargetId:"ssv_647"}),a.setData(Object.assign({isBrandProduct:y,productPriceMsg:{originPrice:t.originPrice||"",salePrice:t.price||""},isNft:Boolean(t.isNft),isBlockCar:6==+t.scene,spikeIsOnReady:t.spikeIsOnReady,hasGetSuccessGoodsData:!0,labels:p,hasCar:h,productType:t.productActivityType,couponPopupVisible:t.productActivityType&&3!==t.productActivityType,spuStatus:{state:t.state,restStock:t.restStock,totalRestStock:t.restStock,restStockNoSpike:t.restStockNoSpike},saleInfo:{name:t.name,originPrice:t.originPrice,price:t.price,saleCount:t.saleCount},oCarouselInfo:Object.assign({},a.data.oCarouselInfo,{interval:t.interval&&+t.interval||4e3,productActivityVo:t.productActivityVo,carouselList:b,isPreview:!0,theme:1,autoPlay:!1,objectFit:"contain",direction:0}),spikeInfoVO:t.spikeInfoVO||{},supportPayType:l},u,{showCarouselPlace:!a.logicData.mediaLoaded&&(a.logicData.hasFirstImg||!n.length),showFisrtImage:!a.logicData.mediaLoaded&&(a.logicData.hasFirstImg||!n.length),isJDProduct:6==+t.scene}),(function(){if(a.performancefLogExtra=(0,E.performanceLogTime)(a.performancefLogExtra,"end_data"),a.setSpikePromotion(t.spikeInfoVO),a.setData({shopId:t.shopId}),(0,V.default)(t.shopId),a.getShopDetail(),a.getFloatBallItem(),(0,C.checkLoginStatus)().then((function(){a.logicData.hasLogin=!0,a.setData({isLogin:!0}),a.getCollectStatus()})).catch((function(){a.setData({isLogin:!1})})),a.data.hitMayYouLike){var e=a.data.anchorList;a.data.isShowLikeList&&e.push("推荐"),a.setData({anchorList:[].concat(z(new Set(e)))})}(0,q.hasHitExp)(q.EXP_LIST.isAddressExpHit1.expNumber,1,(0,E.parsePageQuery)().forceExpId)&&a.getAddressFreight(t);var o="[]";try{o=JSON.parse(t.description||"[]")}catch(e){}var i=t.bjhInfo&&t.bjhInfo.dxdClassMode?{isBjhColumn:!0,bjhInfo:t.bjhInfo}:{};a.setData(Object.assign({useFuncs:Object.assign({},a.data.useFuncs,(0,k.getUseFuncs)(k.downgradeFeature.productDetail)),ucId:t.ucId,isOverseas:t.isOverseas,warning:t.warning||"",skuInfo:a.getSkusInfo(t),spuInfo:{afterSalesText:1===t.isOverseas?D.overSeaNotify.concat(t.afterSalesText):t.afterSalesText,description:o,attributes:v,freeShipping:g,goodsLabels:f,deliveryShow:t.deliveryShow,predictDeliveryDay:a.getDeliveryDayText(t.predictDeliveryDay,m,t.exemptAreaMark,t.exemptReason,t.deliveryDelayTip),deliverStyle:a.getDeliverStyle(t.predictDeliveryDay),attributesText:a.getAttributeText(v),serviceText:a.getServiceText(f),singlePrice:(t.price||"").split("-")[0]},productData:{price:t.price,goodsType:d,goodsPictureUrl:t.goodsPictureUrl,skuList:t.skuList,packages:t.packages,specifications:t.specifications,virtualCodeStartTime:t.virtualCodeStartTime,virtualCodeEndTime:t.virtualCodeEndTime,isSingleSku:!1,scene:+t.scene}},i),(function(){a.data.spuInfo.serviceText&&(0,E.bdxdAddLog)(a,{compTargetId:"product-detail_protect_show",userExtra:{itemId:a.logicData.protectIds}})}))}));var I=(0,E.parsePageQuery)().isOpenSpec||0;if(Number(I)){var S=(0,E.parsePageQuery)().groupId;a.setData({currentGroupId:S,currentGroupIndex:-1}),a.toggleSpecLayer({isOpen:!0,scene:D.ATTR_LAYER_MAP.GROUP_BOOK_NORMAL_BUY})}var T={title:t.name,content:"我在度小店发现了不错的商品，分享给你哦~",imageUrl:t.goodsPictureUrl};s().globalData.siteData.shareInfo=T,r.setPageInfo({title:t.name,keywords:t.name,description:t.name,image:t.goodsPictureUrl}),(0,E.sendTongjiLog)({appId:Q,ucId:t.ucId,wid:i,extData:{bizInfo:{spuId:a.data.spuId,shopId:t.shopId}}}),r.nextTick((function(){(0,E.bdxdAddLog)(a,{actionId:"site_comp_show",compTargetId:"page_req_success"})}))}})})).catch((function(e){if(e&&6106===e.status){var t={errTitle:"商品详情",errTip:"别着急，去店铺首页看看其他商品",errText:"商品已失效",errBtn:"店铺首页",errBackUrl:"/wjz/bdxd/shop-index/shop-index"};return(0,E.isDxdjx)()&&(t.errTip="别着急，去看看其他商品",t.errBtn="返回",t.errBackType=1,t.errBackUrl=""),void(0,E.jumpErrorPageUrl)(t)}e&&"商品不存在"!==e.message&&e.statusCode!==D.RESPONSE_STATUS.LIMIT&&(0,E.addErrorLog)(e,{compTargetId:"bdxd-log-req-product-detail",errType:"api_productdetail_err"},[D.logTypeMap.error,D.logTypeMap.apiError]),(0,E.jumpErrorPageUrl)({errTitle:"商品详情"})})).finally((function(){a.logicData.isFirstShow=!1,a.logicData.isPrefetch?a.getProductFinally():t((function(){a.getProductFinally()}),50),a.setData({hasGetGoodsData:!0,skeletonVisiable:!1})}));case 8:case"end":return e.stop()}}),e,this)})),K=function(){var e=Y.apply(this,arguments);return new Promise((function(t,o){return function i(a,n){try{var r=e[a](n),s=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(s)}("next")}))},function(){return K.apply(this,arguments)}),getProductFinally:function(){var e=(0,E.parsePageQuery)().spuId;(0,E.getCurrentPage)().removeSkeleton&&(0,E.getCurrentPage)().removeSkeleton(),(0,E.isDxdjx)()&&t((function(){r.loadSubPackage({root:"wjz/bdxd/comment"}),r.loadSubPackage({root:"wjz/bdxd/communicate"}),r.loadSubPackage({root:"wjz/dxdjx/activity"})}),1e3),s().globalData.pageReqCache[B.GET_PRODUCT_DETAIL]=null,s().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+e]=null,s().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_PREIMAGE_"+e]=!1},initCountDown:function(){var e=this;~this.logicData.countDownTimer&&clearInterval(this.logicData.countDownTimer),this.logicData.countDownTimer=o((function(){var t=Object.assign({},e.data.countDownMap);Object.keys(t).forEach((function(e){t[e]=t[e]-1e3>0?t[e]-1e3:0})),e.setData({countDownMap:t})}),1e3)},getAttributeText:function(e){if(0===e.length)return"";var t=[],o="";return e.map((function(e){t.push(e.name)})),o=t.slice(0,2).join(" "),t.length>2&&(o+="..."),o},handleAttributeClick:function(){var e=this.data.spuInfo;this.setData({popupLayerInfo:{dataList:e.attributes,popupType:"attribute",popupTitle:"商品参数"},showPopupLayer:!0}),this.changeNavBarColor(!0),(0,E.bdxdAddLog)(this,{compTargetId:"ssv_297",userExtra:{spu_id:this.data.spuId,comp_material_id:this.data.spuId}})},handleServiceClick:function(){var e=this.data.spuInfo;this.setData({popupLayerInfo:{dataList:e.goodsLabels,popupType:"service",popupTitle:"百度保障 平台先行赔付"},showPopupLayer:!0}),this.changeNavBarColor(!0),(0,E.bdxdAddLog)(this,{compTargetId:"ssv_298",userExtra:{itemId:this.logicData.protectIds}})},trackAdd:function(){var e=this,t=D.API.trackAdd,o={spuId:this.data.spuId};(0,C.request)({url:t,data:o}),this.logicData.hasLogin=!0,s().globalData.siteData.systemInfoPromise.then((function(t){var o="baiduboxapp"===t.host,i=t.version,a=(0,E.compareVersion)({version:i,lowVersionPart:"12.25".split(".")});if(o&&a){var n=e.logicData.productDetailData,r=n.spuId,s=n.name,c=n.goodsPictureUrl,u=n.price,p=n.state,d=n.goodsLabels,l=n.restStock,h=e.data.shopDetail,g={spuId:r,name:s,goodsPictureUrl:c,price:u,shopName:h.name,shopUrl:h.pageUrl,state:p,goodsLabels:d,restStock:l};(0,F.syncAddBdbox)(g)}})).catch((function(e){(0,E.addErrorLog)(e,{compTargetId:"bdxd-product-detail-trackadd"},[D.logTypeMap.apiError])}))},getCollectStatus:function(){var e=this,t=D.API.getCollectStatus,o=this.data.spuId,i=this.data.shopId;if(o&&i){var a={spuId:o,shopId:i};(0,C.request)({url:t,data:a}).then((function(t){var o=t&&t.data||"";o&&e.setData({collectStatus:o.collected})})).catch((function(t){t&&t.status===D.RESPONSE_STATUS.DOWN_GRADE&&e.setData("useFuncs.collect",!1)}))}},fristPlaceImgLoad:function(){var e=this;this.performancefLogExtra=Object.assign({},(0,E.performanceLogTime)(this.performancefLogExtra,"img_loaded"),{img_src:this.data.firstImg,isPrefetch:this.logicData.isPrefetch,isPrefetchImg:this.logicData.isPrefetchImg}),t((function(){(0,E.bdxdAddLog)(e,{compTargetId:"m-vision-log-image-load",userExtra:Object.assign({},e.performancefLogExtra)}),e.logicData.isPrefetch=!1,e.logicData.isPrefetchImg=!1}),1e3)},getFloatBallItem:function(){var e=this;(0,C.request)({url:D.API.generalImage,data:{pageType:15},method:"GET"}).then((function(t){if(t&&t.data){var o=t.data||{};e.logicData.jumpUrl=o.bizJumpUrl||"";var i=o.dayImage||"";e.setData({ballImg:i,ballIsShow:!0})}}))},onClickBallOpen:function(){(0,E.bdxdAddLog)(this,{compTargetId:"ssv_299"});var e=this.logicData.jumpUrl;(0,R.generalJump)({url:e})},onClickBallClose:function(){(0,E.bdxdAddLog)(this,{compTargetId:"ssv_300"}),this.setData({ballIsShow:!1})},getStoreRanking:function(){var e=this,t=D.API.getStoreRanking,o=this.data.spuId;if(o){var i={spuIds:[o]};(0,C.request)({url:t,data:i}).then((function(t){var o=t&&t.data||[];o.length>0?e.setData({storeRankingDetail:o[0],isShowRanking:!0}):e.setData({isShowRanking:!1})})).catch((function(t){t&&t.status===D.RESPONSE_STATUS.DOWN_GRADE&&e.setData("useFuncs.collect",!1)}))}},triggerNoShopLiveData:function(){this.setData({isShowLiveBall:!0})},setBottomCoupon:function(){this.setData({bottomCouponClose:!0})},changeMode:function(){var e=this;(0,A.changeDisplayMode)((function(t){var o=t.newValue.displayMode,i=(0,A.navigationBarHeight)()||44,a=(0,A.getStatusBarHeight)(o)+i;e.handleStyle(a+"px")}))},getAddressFreight:function(e){var t=this,o=s().globalData.siteData.addrId||"",i=o?{}:s().globalData.siteData.addressSelected||{},a=e.spuId,n=e.freightTemplateId,r=void 0===n?"":n,c=e.goodsType,u=void 0===c?0:c,p=[];e.packages&&e.packages[0]&&e.packages[0].skuList?p=e.packages[0].skuList:e.skuList&&(p=e.skuList);var d=p[0]||{},l=d.skuId,h=void 0===l?"":l,g=d.longPrice,m={spuId:a,skuId:h,longPrice:void 0===g?"":g,addrId:o,address:i,freightTemplateId:r,goodsType:u};return(0,C.request)({url:D.API.spuFreight,data:m}).then((function(e){var o=e.data,i=void 0===o?{}:o,a=!i.isDelivery,n=i.address,r={addrId:n.addrId,telNumber:n.realPhone,userName:n.name,provinceName:n.provinceName,provinceCode:n.provinceId,cityName:n.cityName,cityCode:n.cityId,countyName:n.districtName,countyCode:n.districtId,townName:n.townName,townCode:n.townId,detailInfo:n.detailAddr};s().globalData.siteData.addressSelected=r,s().globalData.siteData.addrId=n.addrId||"",t.setData({isDelivery:a,addressDelivery:n})})).catch((function(e){t.setData({isDelivery:!1,addressDelivery:{}})}))}},messages:{jumpToRankingList:function(){var e=this.data.storeRankingDetail||{};(0,E.bdxdAddLog)(this,{compTargetId:"ssv_301"}),(0,R.generalJump)({url:"/wjz/dxdjx/activity/rank-page/rank-page",params:{cate:e.tabConfig,rank:e.rankingIndex,spuId:e.spuId}})},groupLayerSwitch:function(e){this.toggleGroupLayer(e.value)},imgLoaded:function(e){var o=this;e.target&&e.target.dataset&&"product-detail"===e.target.dataset.pageType&&0===e.target.dataset.index?this.data.showCarouselPlace&&(this.setData({showCarouselPlace:!1}),this.logicData.mediaLoaded=!0,t((function(){o.setData({showFisrtImage:!1})}),100),this.data.oCarouselInfo&&1===(this.data.oCarouselInfo.carouselList||[]).length&&this.getAnchorTop()):(0,E.debounce)((function(){o.getAnchorTop()}),100).bind(this)()},responseDone:function(){this.getAnchorTop()},videoLoaded:function(e){var o=this,i=e.value.target;i&&i.dataset&&"product-detail"===i.dataset.pageType&&0===i.dataset.index&&this.data.showCarouselPlace&&(this.setData({showCarouselPlace:!1}),this.logicData.mediaLoaded=!0,t((function(){o.setData({showFisrtImage:!1})}),100))},collectChange:function(e){var t=e.value;this.setData({collectStatus:t})},onShowPopupLayerChange:function(e){e&&e.value&&this.setData({showPopupLayer:e.value.showPopupLayer}),this.changeNavBarColor(e.value.showPopupLayer)},showActivityLogo:function(e){this.setData({isShowActivityLogo:e.value.isShow})},productDetailLoginSuccess:function(e){this.logicData.hasLogin||(this.setData({isLogin:!0}),this.logicData.hasLogin=!0,e&&e.value&&e&&e.value&&"collect"===e.value.from||this.getCollectStatus(),this.trackAdd(),this.getCartCountBefore())},noLikeList:function(){var e=this.data.anchorList.filter((function(e){return"推荐"!==e}));this.setData({isShowLikeList:!1,anchorList:e})},hideTopCoupon:function(e){this.setData({noTopCoupon:e})}}})})),window.define("767",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=[{type:"title",content:"价格说明"},{type:"text",content:"价格说明：商品的实时标价：商品的实时标价为商品销售价，是您最终决定是否购买商品的依据。\n划线价：商品展示的划横线价格为商品参考价，该价格可能是品牌的专柜标价、商品的吊牌价或由品牌供应商所提供的正品零售价（如厂商指导价、建议零售价等）或商品在度小店上曾经展示过的销售价；因存在地区、时间的差异性和市场行情上的波动，品牌的专柜标价、商品的吊牌价等可能会与您购物时展示的不一致，该价格仅供您参考。\n折扣：如无特殊说明，折扣指销售商在商品划线价（如品牌的专柜标价、商品的吊牌价、厂商指导价、建议零售价）等某一价格基础之上计算出的优惠比例或优惠金额；如有疑问，建议您在购买前联系商家客服进行咨询。\n异常问题：活动商品的售价以商品详情页中显示的商品销售价为准，商品的具体售价以订单结算页显示的价格为准；如您发现活动商品的售价或促销信息存在异常，建议您在购买前联系商家客服进行咨询。"},{type:"title",content:"如何退换货？"},{type:"text",content:"商品收到7日之内，您可以选申请无忧退换货。\n选择您要退换货的商品，点击订单列表的该商品进入订单详情页，在订单详情页选择“退款”或“退货”，按照指定的流程进行操作即可。\n退款成功后，您的资金将原路返还，因不同银行处理时间不同，预计1-5个工作日内到账。"},{type:"title",content:"如何查询订单？"},{type:"text",content:"进入小程序后，点击底部的“个人中心”进入个人中心页面，在订单模块可以查看订单信息和订单状态。"},{type:"title",content:"如何查找小程序？"},{type:"text",content:"打开百度APP，您可以在搜索框中输入店铺名称，直接搜索小程序。如果您之前曾经访问过店铺，也可以在百度APP“我的>最近使用”中找到。"}]})),window.define("768",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=["gss0","bdstatic"],P={PNG:"png",JPG:"jpg",JPEG:"jpeg",WEBP:"webp"},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.lastIndexOf("."),o=e.substr(t+1).split("?").shift();return o},C=function(e){var t=_(e);return-1!==[P.PNG,P.JPG,P.JPEG].indexOf(t.toLowerCase())},D=function(e,t){var o=e.split("?"),i=o.shift(),a=i.indexOf("@")>-1?i+","+t:i+"@"+t;return a=o.length>0?a+"?"+o[0]:a,t?a:e},x=function(e){return-1!==[P.PNG].indexOf(e.toLowerCase())},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=_(e);return x(t)?"f_"+t.toLowerCase():""},L=function(e){return!!w.filter((function(t){return e&&e.indexOf(t)>-1})).length};o.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"q_70",o=t,i=e;return!L(i)&&o&&C(i)?(i=D(i,k(i)),D(i,o)):i}})),window.define("769",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.syncAddBdbox=void 0;var w=e(51),P=e(4),_=e(59),C=e(58);o.syncAddBdbox=function(e){var t=e.goodsLabels,o=(t=t.length<=3?t:t.slice(0,3)).map((function(e){return e.value})),i=w.dxdjxAppkey,a=(0,P.getCurrentPage)(),n="baiduboxapp://swan/"+i+"/"+(a&&a.__pageData__&&a.__pageData__.xcxPath||"").split("&").map((function(e){return e.includes("ch=")&&!e.includes("sch=")&&(e="ch="+_.CHANNEL_INFO.bdboxHistory.ch),e.includes("sch=")&&(e="sch="+_.CHANNEL_INFO.bdboxHistory.sch),e})).join("&"),r={authority:"",module:"history",action:"addHistory",parameters:{params:{uKey:"baiduapp_duxiaodian://"+e.spuId,tplId:"product",title:e.name,image:e.goodsPictureUrl,price:e.price,productId:e.spuId,shopName:e.shopName,shopUrl:e.shopUrl,cmd:n,statusTag:1===e.state&&"0"!==e.restStock?"0-有效":"3-已失效",saleTag:o}}};(0,C.openBdboxWebview)(r)}})),window.define("882",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=C(e(5)),P=C(e(883)),_=e(239);function C(e){return e&&e.__esModule?e:{default:e}}var D=w.default.configOfLogAction.actionIdForDeveloper||{};o.default={onInit:{before:function(e){n().globalData.pageData.initTimestamp=(new Date).getTime(),this.isInitPage=!0,w.default.initPageData()},after:function(){}},onLoad:{before:function(){var e=this.__pageData__||{},t=e.pageId,o=e.htmlUrl;t||(t=(0,_.getExtCurrentPageInfo)().pageId||(0,_.getCurrentPage)().options.pageId),o||(o=(0,_.getExtCurrentPageInfo)().htmlUrl||(0,_.getCurrentPage)().options.url),this.__pageData__={pageId:t,htmlUrl:o,xcxPath:(0,_.getCurrentPage)().privateProperties.accessUri},Object.assign(n().globalData.pageData,this.__pageData__)}},onShow:{before:function(){Object.assign(n().globalData.pageData,this.__pageData__),!this.isInitPage&&w.default.initPageData(),(0,P.default)(),w.default.addHeartBeatLog(),!this.__pageData__||this.__pageData__&&void 0===this.__pageData__.siteid||w.default.logActions.addUserDefinedLog({actionId:D.SITE_PAGE_SHOW,userExtra:{xcxTiming:"onShow"}})}},pageConfigGot:{before:function(e){var t=(0,_.normalizePageData)(e,this.__pageData__);Object.assign(this.__pageData__,t),Object.assign(n().globalData.pageData,this.__pageData__),e.staticInDynamic||((0,P.default)(),w.default.logActions.addUserDefinedLog({actionId:w.default.configOfLogAction.actionIdForDeveloper.SITE_PAGE_SHOW,userExtra:{xcxTiming:"pageConfigGot"}}))}},pageError:{before:function(e){}},onPageScroll:{before:function(e){5!==n().globalData.siteData.appId&&w.default.addPageScrollLog(e)}},onHide:{before:function(){w.default.addPageQuitLog(),this.isInitPage=!1}},onUnload:{before:function(){w.default.addPageQuitLog()}}}})),window.define("883",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w,P=e(871),_=e(5),C=(w=_)&&w.__esModule?w:{default:w};o.default=function(){var e=n().globalData.siteData||{},t=e.sPvId,o=e.zjopen,i=e.searchEndParams,a=e.scene;C.default.initSiteData({appId:(0,P.getAppId)(),ucId:(0,P.getUcId)(),siteId:(0,P.getSiteId)(),sPvId:t,productName:(0,P.getProductName)(),zjopen:o,searchEndParams:i,scene:a}),C.default.setPageData({subAppId:(0,P.getSubAppId)(),pageId:(0,P.getPageId)(),tplId:(0,P.getTplId)(),pageType:(0,P.getPageType)(),pageName:(0,P.getPageName)(),pageInfo:(0,P.getPageInfo)(),htmlUrl:(0,P.getUrl)(),expIdList:(0,P.getExpIdList)(),extData:(0,P.getExtData)()})}})),window.define("885",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.onUnloadBefore=o.onHideBefore=o.onShowBefore=o.onLoadBefore=o.onInitBefore=void 0;var w=e(4),P=e(48),_=e(61);o.onInitBefore=function(){n().globalData.curPagePath=(0,w.getCurPath)()},o.onLoadBefore=function(){n().globalData.curPagePath=(0,w.getCurPath)()},o.onShowBefore=function(e){n().globalData.curPagePath=(0,w.getCurPath)(),n().globalData.pageData.showTime=(new Date).getTime(),(0,w.bdxdAddLog)({},Object.assign({compTargetId:P.bdtjLogType.pageShow,logType:P.bdtjLogType.pageShow},e))},o.onHideBefore=function(e){(0,_.pageUnloadObserverLog)(e),(0,w.bdxdAddLog)({},{compTargetId:P.bdtjLogType.pageQuit,logType:P.bdtjLogType.pageQuit,userExtra:{stayed_millsecond:(new Date).getTime()-n().globalData.pageData.showTime,curPage:e.route}})},o.onUnloadBefore=function(e){(0,_.pageUnloadObserverLog)(e),(0,w.bdxdAddLog)({},{compTargetId:P.bdtjLogType.pageQuit,logType:P.bdtjLogType.pageQuit,userExtra:{stayed_millsecond:(new Date).getTime()-n().globalData.pageData.showTime,curPage:e.route}}),n().globalData.curPagePath=""}})),window.define("937",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";var w=D(e(938)),P=D(e(882)),_=e(872),C=D(e(3));function D(e){return e&&e.__esModule?e:{default:e}}var x={data:{},pageConfigGot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.setNavigationBarTitle({title:e.title||""})},onInit:function(e){},onLoad:function(e){},onShow:function(e){},onHide:function(e){n().globalData.siteData.launchTimestamp=0},onShareAppMessage:function(e){},onPageScroll:function(e){},onReachBottom:function(){C.default.trigger("detailPageReachBottom")},onUnload:function(e){},onPrefetch:function(e){}};(0,_.watch)(w.default,x),(0,_.watch)(P.default,x),Page(x)})),window.define("938",(function(e,t,o,i,a,n,r,s,c,u,p,d,l,h,g,m,f,v,b,y,I,S,T){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var w=e(341),P=e(340),_=N(e(49)),C=e(60),D=e(57),x=N(e(3)),k=e(885),L=e(4),A=e(64),E=e(59),O=N(e(768)),R=e(51);function N(e){return e&&e.__esModule?e:{default:e}}var B="",j="";o.default={onInit:{before:function(e){(0,k.onInitBefore)(this),x.default.clearEvents(["onPageScroll"]),this.isInitPage=!0,n().globalData.pageData.initTimestamp=(new Date).getTime();var t=e.spuId,o=e.shopId;B=t,j=o;var i=n().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+t];i||n().globalData.pageReqCache[P.GET_PRODUCT_DETAIL]?i&&(n().globalData.pageReqCache[P.GET_PRODUCT_DETAIL]=(0,w.getProductDetail)(i)):n().globalData.pageReqCache[P.GET_PRODUCT_DETAIL]=(0,w.getProductDetail)("",{},"init")}},onPageScroll:{before:function(e){x.default.trigger("onPageScroll",e)}},onUnload:{before:function(){(0,k.onUnloadBefore)(this)}},onLoad:{before:function(e){(0,k.onLoadBefore)(this);var t=n().globalData.siteData.channelInfo;if((0,L.isDxdjx)()){var o=Object.assign({},e);if(e&&e.serverlessOptions)try{var i=JSON.parse(o.serverlessOptions),a=i.from,r=i.tab,s=i.query,c=R.CHANNEL_INFO.searchBox;o._cecom_ext=JSON.stringify({ext:{searchboxTab:r,searchboxQuery:encodeURIComponent(s)}}),o.sch=c[a].sch}catch(e){(0,L.addErrorLog)(null,{compTargetId:"parse_serverless_options_fail"},[E.logTypeMap.error])}(0,A.setChannelInfo)(o),(0,C.convertSubSceneValue)(t,o)}n().globalData.tradePop.trackLog||(n().globalData.tradePop=requireDynamicLib("tradePop")),n().globalData.tradePop.init({appOptions:{query:e},version:"0.0.1"}),e.taskToken&&(n().globalData.siteData.taskToken=e.taskToken),n().globalData.tradePop.trackLog({appOptions:e}),!(0,L.getRouteStack)().length||_.default[t.subSceneValue]||(0,D.getMarketingPageSSVName)(t.subSceneValue)||(0,L.addErrorLog)(null,{compTargetId:"product_detail_subSceneValue_err"},[E.logTypeMap.error])}},onHide:{before:function(e){this.isInitPage=!1,"{}"!==JSON.stringify(n().globalData.tradePop)&&"function"==typeof n().globalData.tradePop.clear&&n().globalData.tradePop.clear(),(0,k.onHideBefore)(this)}},onShareAppMessage:{around:function(){var e=(0,L.getShareParams)((0,L.getCurrentPage)().route),t=n().globalData.siteData.shareInfo||{};return Object.assign({path:e},t)}},onShow:{before:function(){if(((0,L.getRouteStack)()||[]).length||(0,A.setChannelInfo)({subSceneValue:"ssv_0"}),(0,L.isDxdjx)()){this.isInitPage?(0,L.blockTongjiLog)():(0,L.sendTongjiLog)();var e=(0,L.getCurPath)();(0,L.sdkSetPageData)({subAppId:R.SUB_APPID_MAP[e]}),(0,L.bdxdAddLog)({},{actionId:"site_page_show",compTargetId:"product_detail_page_show",userExtra:{spuId:B,shopId:j,comp_material_id:B}}),(0,k.onShowBefore)({userExtra:{spuId:B,shopId:j,comp_material_id:B}})}else this.isInitPage||(0,L.sendTongjiLog)()}},onPrefetch:{before:function(e){if("click"!==e.trigger){var t=e.query,o=t&&t.spuId;(0,L.isDxdjx)()&&!n().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+o]&&(0,w.prefetchGetProductDetail)(t,(function(e){var t=e.data;n().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_"+o]=JSON.stringify(t),a.getNetworkType({success:function(e){var i=e.networkType;if("wifi"===i||"5g"===i){var r=t.data.images;a.prefetchResources({image:[{url:(0,O.default)(r[0])}],success:function(){n().globalData.pageReqPrefetchData["GET_PRODUCT_DETAIL_PREIMAGE_"+o]=!0}})}}})}))}}}}})),window.__swanRoute="widgets/mip-bdxd-join-group-pop-up/mip-bdxd-join-group-pop-up",window.usingComponents=["components/avatar-list/avatar-list","components/popup/popup","components/count-down/count-down"],window.usingPluginComponents=[],require("256"),window.__swanRoute="widgets/gt-dxdjx-h5-coupon-count-down-bar/gt-dxdjx-h5-coupon-count-down-bar",window.usingComponents=["components/count-down/count-down"],window.usingPluginComponents=[],require("276"),window.__swanRoute="widgets/mip-bdxd-activity-card/mip-bdxd-activity-card",window.usingComponents=[],window.usingPluginComponents=[],require("279"),window.__swanRoute="components/coupon-card/coupon-ten/index",window.usingComponents=["components/format-price/format-price"],window.usingPluginComponents=[],require("281"),window.__swanRoute="components/coupon-card/coupon-three/index",window.usingComponents=["components/format-price/format-price"],window.usingPluginComponents=[],require("283"),window.__swanRoute="widgets/mip-bdxd-product-coupon/components/coupon-take",window.usingComponents=["components/popup/popup","components/coupon-card/coupon-three/index","components/coupon-card/coupon-ten/index","widgets/mip-bdxd-activity-card/mip-bdxd-activity-card"],window.usingPluginComponents=[],require("288"),window.__swanRoute="widgets/mip-bdxd-product-coupon/mip-bdxd-product-coupon",window.usingComponents=["widgets/mip-bdxd-product-coupon/components/coupon-take","components/login-button/login-button","components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("290"),window.__swanRoute="components/input-number/input-number",window.usingComponents=[],window.usingPluginComponents=[],require("292"),window.__swanRoute="components/attributes-select/attributes-select",window.usingComponents=["components/input-number/input-number","components/optimize-image/optimize-image","components/login-button/login-button","components/format-price/format-price"],window.usingPluginComponents=[],require("294"),window.__swanRoute="widgets/mip-bdxd-product-spectifications-layer/mip-bdxd-product-spectifications-layer",window.usingComponents=["components/attributes-select/attributes-select","widgets/mip-bdxd-product-coupon/mip-bdxd-product-coupon","components/popup/popup","widgets/gt-dxdjx-h5-coupon-count-down-bar/gt-dxdjx-h5-coupon-count-down-bar","widgets/mip-dxdjx-guarantee-sdk/mip-dxdjx-guarantee-sdk"],window.usingPluginComponents=[],require("296"),window.__swanRoute="widgets/mip-bdxd-recommend-group-card/mip-bdxd-recommend-group-card",window.usingComponents=["components/avatar-list/avatar-list","components/count-down/count-down"],window.usingPluginComponents=[],require("298"),window.__swanRoute="components/count-down/count-down",window.usingComponents=[],window.usingPluginComponents=[],require("300"),window.__swanRoute="widgets/mip-dxdjx-address-bottom-bar/mip-dxdjx-address-bottom-bar",window.usingComponents=[],window.usingPluginComponents=[],require("314"),window.__swanRoute="widgets/mip-bdxd-product-bottom-bar/components/buy-btn",window.usingComponents=[],window.usingPluginComponents=[],require("316"),window.__swanRoute="widgets/mip-bdxd-product-bottom-bar/mip-bdxd-product-bottom-bar",window.usingComponents=["widgets/mip-bdxd-consult-sdk/mip-bdxd-consult-sdk","components/login-button/login-button","components/optimize-image/optimize-image","widgets/mip-bdxd-product-bottom-bar/components/buy-btn","widgets/gt-dxdjx-h5-coupon-count-down-bar/gt-dxdjx-h5-coupon-count-down-bar","widgets/mip-dxdjx-address-bottom-bar/mip-dxdjx-address-bottom-bar"],window.usingPluginComponents=[],require("321"),window.__swanRoute="widgets/mip-bdxd-sale-activity-bar/mip-bdxd-sale-activity-bar",window.usingComponents=["components/coupon-card/coupon-three/index"],window.usingPluginComponents=[],require("325"),window.__swanRoute="widgets/mip-bdxd-product-collection/mip-bdxd-product-collection",window.usingComponents=["components/login-button/login-button"],window.usingPluginComponents=[],require("327"),window.__swanRoute="widgets/mip-bdxd-activity-groupbook/mip-bdxd-activity-groupbook",window.usingComponents=["components/count-down/count-down"],window.usingPluginComponents=[],require("329"),window.__swanRoute="widgets/mip-bdxd-activity-seckill/mip-bdxd-activity-seckill",window.usingComponents=["components/count-down/count-down","components/format-price/format-price"],window.usingPluginComponents=[],require("331"),window.__swanRoute="widgets/mip-bdxd-product-price-info/mip-bdxd-product-price-info",window.usingComponents=["widgets/mip-bdxd-product-coupon/mip-bdxd-product-coupon","widgets/mip-bdxd-activity-seckill/mip-bdxd-activity-seckill","widgets/mip-bdxd-activity-groupbook/mip-bdxd-activity-groupbook","widgets/mip-bdxd-product-collection/mip-bdxd-product-collection","widgets/mip-bdxd-sale-activity-bar/mip-bdxd-sale-activity-bar","components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("333"),window.__swanRoute="widgets/gt-dxdjx-h5-score-tag/gt-dxdjx-h5-score-tag",window.usingComponents=[],window.usingPluginComponents=[],require("402"),window.__swanRoute="widgets/mip-dxdjx-shop-good-product/mip-dxdjx-shop-good-product",window.usingComponents=["components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("404"),window.__swanRoute="widgets/mip-bdxd-shop-card/mip-bdxd-shop-card",window.usingComponents=["widgets/mip-bdxd-consult-sdk/mip-bdxd-consult-sdk","widgets/mip-dxdjx-shop-good-product/mip-dxdjx-shop-good-product","widgets/gt-dxdjx-h5-score-tag/gt-dxdjx-h5-score-tag","components/login-button/login-button"],window.usingPluginComponents=[],require("406"),window.__swanRoute="widgets/mip-dxdjx-inflate-coupon-modal/components/button-group/button-group",window.usingComponents=["components/login-button/login-button"],window.usingPluginComponents=[],require("655"),window.__swanRoute="widgets/mip-dxdjx-inflate-coupon-modal/components/coupon-card/coupon-card",window.usingComponents=[],window.usingPluginComponents=[],require("657"),window.__swanRoute="widgets/mip-dxdjx-inflate-coupon-modal/components/inflate-coupon-modal/inflate-coupon-modal",window.usingComponents=["widgets/mip-dxdjx-inflate-coupon-modal/components/coupon-card/coupon-card","widgets/mip-dxdjx-inflate-coupon-modal/components/button-group/button-group","components/popup/popup","components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("659"),window.__swanRoute="widgets/mip-dxdjx-inflate-coupon-modal/mip-dxdjx-inflate-coupon-modal",window.usingComponents=["widgets/mip-dxdjx-inflate-coupon-modal/components/inflate-coupon-modal/inflate-coupon-modal"],window.usingPluginComponents=[],require("661"),window.__swanRoute="widgets/gt-dxdjx-h5-cta/components/cta-item/cta-item",window.usingComponents=["components/optimize-image/optimize-image","components/login-button/login-button"],window.usingPluginComponents=[],require("731"),window.__swanRoute="widgets/gt-dxdjx-h5-cta/gt-dxdjx-h5-cta",window.usingComponents=["widgets/gt-dxdjx-h5-cta/components/cta-item/cta-item","components/gap/gap"],window.usingPluginComponents=[],require("733"),window.__swanRoute="widgets/gt-dxdjx-h5-live-ball/gt-dxdjx-h5-live-ball",window.usingComponents=["components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("735"),window.__swanRoute="widgets/mip-bdxd-spu-rank/mip-bdxd-spu-rank",window.usingComponents=[],window.usingPluginComponents=[],require("737"),window.__swanRoute="components/anchor-navigator/anchor-navigator",window.usingComponents=[],window.usingPluginComponents=[],require("739"),window.__swanRoute="widgets/mip-bdxd-product-attribute-layer/mip-bdxd-product-attribute-layer",window.usingComponents=["components/cell/cell","components/popup/popup"],window.usingPluginComponents=[],require("741"),window.__swanRoute="widgets/mip-bdxd-marquee-container/mip-bdxd-marquee-container",window.usingComponents=["components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("743"),window.__swanRoute="widgets/mip-bdxd-recommend-group/mip-bdxd-recommend-group",window.usingComponents=["widgets/mip-bdxd-recommend-group-card/mip-bdxd-recommend-group-card"],window.usingPluginComponents=[],require("745"),window.__swanRoute="widgets/mip-sjh-live/components/live-streaming/live-streaming",window.usingComponents=[],window.usingPluginComponents=[],require("747"),window.__swanRoute="widgets/mip-sjh-live/components/count-down/count-down",window.usingComponents=[],window.usingPluginComponents=[],require("751"),window.__swanRoute="widgets/mip-sjh-live/components/dynamic-picture/dynamic-picture",window.usingComponents=[],window.usingPluginComponents=[],require("753"),window.__swanRoute="widgets/mip-sjh-live/mip-sjh-live",window.usingComponents=["widgets/mip-sjh-live/components/dynamic-picture/dynamic-picture","widgets/mip-sjh-live/components/count-down/count-down","widgets/mip-sjh-live/components/live-streaming/live-streaming"],window.usingPluginComponents=[],require("755"),window.__swanRoute="widgets/mip-dxdjx-product-recommend/mip-dxdjx-product-recommend",window.usingComponents=["widgets/mip-dxdjx-shop-good-product/mip-dxdjx-shop-good-product"],window.usingPluginComponents=[],require("758"),window.__swanRoute="widgets/mip-bdxd-product-comment/mip-bdxd-product-comment",window.usingComponents=["components/comment-card/comment-card"],window.usingPluginComponents=[],require("760"),window.__swanRoute="widgets/mip-bdxd-product-detail-consult/mip-bdxd-product-detail-consult",window.usingComponents=["components/optimize-image/optimize-image"],window.usingPluginComponents=[],require("762"),window.__swanRoute="widgets/mip-dxdjx-product-coupon-top/mip-dxdjx-product-coupon-top",window.usingComponents=[],window.usingPluginComponents=[],require("764"),window.__swanRoute="widgets/mip-bdxd-product-page/mip-bdxd-product-page",window.usingComponents=["widgets/mip-dxdjx-product-coupon-top/mip-dxdjx-product-coupon-top","widgets/mip-doujin-carousel/mip-doujin-carousel","widgets/mip-bdxd-product-price-info/mip-bdxd-product-price-info","widgets/mip-bdxd-product-spectifications-layer/mip-bdxd-product-spectifications-layer","widgets/mip-bdxd-product-detail-consult/mip-bdxd-product-detail-consult","widgets/mip-bdxd-product-bottom-bar/mip-bdxd-product-bottom-bar","widgets/mip-bdxd-shop-card/mip-bdxd-shop-card","components/gap/gap","widgets/mip-bdxd-product-comment/mip-bdxd-product-comment","widgets/mip-dxdjx-product-recommend/mip-dxdjx-product-recommend","widgets/mip-dxdjx-like-list/mip-dxdjx-like-list","components/optimize-image/optimize-image","widgets/mip-sjh-live/mip-sjh-live","widgets/mip-bdxd-recommend-group/mip-bdxd-recommend-group","widgets/mip-bdxd-join-group-pop-up/mip-bdxd-join-group-pop-up","widgets/mip-bdxd-marquee-container/mip-bdxd-marquee-container","widgets/mip-bdxd-product-attribute-layer/mip-bdxd-product-attribute-layer","components/anchor-navigator/anchor-navigator","components/float-ball/float-ball","widgets/gt-dxdjx-h5-navigation/gt-dxdjx-h5-navigation","widgets/mip-dxdjx-inflate-coupon-modal/mip-dxdjx-inflate-coupon-modal","widgets/mip-bdxd-spu-rank/mip-bdxd-spu-rank","widgets/gt-dxdjx-h5-marketing-anchor/gt-dxdjx-h5-marketing-anchor","widgets/gt-dxdjx-h5-live-ball/gt-dxdjx-h5-live-ball","widgets/gt-dxdjx-h5-cta/gt-dxdjx-h5-cta","widgets/mip-dxdjx-guarantee-sdk/mip-dxdjx-guarantee-sdk","node_modules/@baidu/ug-task-supplier/dist/swan/ui/src/index"],window.usingPluginComponents=[],require("766"),window.__swanRoute="wjz/bdxd/product-detail/product-detail",window.usingComponents=["widgets/mip-bdxd-product-page/mip-bdxd-product-page"],window.usingPluginComponents=[],require("937")}(__hacked);
//# sourceMappingURL=/output/wjz/bdxd/product-detail/product-detail.js.map