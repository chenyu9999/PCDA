window.defineDynamicLib("dynamicLib://swan-eshop",(function(t,e,n,r){t("1",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x=j(t(2)),L=t(4),T=j(t(5)),D=t(15),O=j(D);function j(t){return t&&t.__esModule?t:{default:t}}function k(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var R=(0,L.promisifyAll)(o),C=o.getEnvInfoSync().appKey,M=T.default.getRequestUrl(O.default.DOSEARCH,C),A=o.getSystemInfoSync();Component({properties:{appKey:{type:String,value:""},pageTitle:{type:String,value:"搜索商品"},searchBoxConf:{type:Object,value:{},observer:function(t){var e=this;t.searchQuery&&this.setData({searchQuery:t.searchQuery},(function(){e.doSearch()})),t.searchByPlaceHolder&&this.setData({searchBtnReady:!0}),this.setData({searchBoxConfResult:Object.assign(this.data.searchBoxConfResult,t)})}},showHistory:{type:Boolean,value:!1,observer:function(t){t&&this.sendSearchPageLog("showHistory","history","show")}},recommendConf:{type:Object,value:{},observer:function(t){this.setData({recommendConfResult:Object.assign(this.data.recommendConfResult,t)})}},searchMode:{type:String,value:"normal"},historyMode:{type:String,value:""},useCustomNav:{type:Boolean,value:!1},themeColor:{type:String,value:"#fd503e"}},data:{showInputClear:!1,showSearchBtn:!0,showEmptyState:!1,status:"searching",showResult:!1,searchBtnReady:!1,history:[],recommend:[],resultList:[],resultListLeft:[],resultListRight:[],resultTab:[{name:"综合",select:1,sortKey:"default"},{name:"信用",select:0,sortKey:"credit"},{name:"销量",select:0,sortKey:"salesnum"},{name:"价格",select:0,sortKey:"price"},{name:"新品",select:0,sortKey:"updatetime"}],hotSearchSync:!1,recommendPn:2,resultPn:2,searchBoxConfResult:{backgroundColor:"#fff",searchBoxColor:"#fff",placeHolder:"搜索商品",border:!1,needVoice:!1,searchByPlaceHolder:!1,autoFocus:!1},recommendConfResult:{show:!1,mode:"text",title:"大家都在搜"}},attached:function(){var t=T.default.ubcLogger,e=t.init,n=t.sendLog;this.firstUse="launch",this.sendLog=n,e(),this.sendLog({app_key:this.data.appKey?this.data.appKey:C},"show",{value:"launch"}),this.sendSearchPageLog("showSearch","searchBox","show",this.data.searchQuery),this.setConf(),this.getHistory(),this.getRecommend(),this.setDefaultStatus()},options:{addGlobalClass:!0},methods:{setConf:function(){o.setNavigationBarTitle({title:this.data.pageTitle});var t=this.data.useCustomNav?A.navigationBarHeight+A.statusBarHeight:0;this.setData({mainTop:t})},doSearch:function(t){var e=this,n=this.data,r=n.searchQuery,a=n.searchBoxConfResult;if(r){if(!r.trim())return void o.showToast({title:"请输入搜索内容",icon:"none",duration:2e3})}else{if(!a.searchByPlaceHolder)return void o.showToast({title:"请输入搜索内容",icon:"none",duration:2e3});this.setData({searchQuery:a.placeHolder})}if(!t||"timely"!==this.data.searchMode||a.searchByPlaceHolder){this.setData({showInputClear:!1,showSearchBtn:!1,showResult:!0,status:"searching",showEmptyState:!0,loadAllGoods:!1,resultPn:2}),this.setHistory(this.data.searchQuery),this.resetResultTab();var i={type:"eshop",action:"search",appkey:this.data.appKey?this.data.appKey:C,query:this.data.searchQuery};(0,D.request)({url:M,data:i,method:"POST"},{isUseBdtls:!1}).then((function(t){e.requestId=x.default.get(t,"data.request_id"),e.handleAfterSearch(t)})).catch((function(t){e.onRequestErr(t,i)}))}else this.setData({showInputClear:!1,showSearchBtn:!1})},handleAfterSearch:function(t){var e=x.default.get(t,"data.data.data"),n=x.default.get(t,"data.data.total",0);this.sendResultPageLog("searchResultCount","resultList","show",this.data.searchQuery,{total:n}),x.default.get(e,"length")?e&&(this.sendGoodsShowLog(e),this.handleSearchData(e,n)):this.setData({status:"noresult",showEmptyState:!0})},handleSearchData:function(t,e){var n=this;this.setData({resultList:[],resultTotal:e,status:"searching"},(function(){n.setData({resultList:t,showEmptyState:!1}),n.data.resultList.length<10&&e>10&&n.scrollToLower()}))},showInputClearIcon:function(t){if(t.length||this.data.searchQuery)this.setData({showInputClear:!0,searchBtnReady:!0});else{if(this.data.searchBtnReady)return;this.setData({showInputClear:!1,searchBtnReady:!1})}},getHistory:function(){var t=this;R.getStorage({key:this.data.historyMode+"history"}).then((function(e){"string"!=typeof e.data?e.data&&e.data.value&&e.data.value.length?t.setData({history:e.data.value.slice(0,10)}):t.setData({history:e.data.slice(0,10)}):o.removeStorage({key:"history"})}))},setHistory:function(t){var e=this;if(x.default.isArray(t))o.setStorage({key:this.data.historyMode+"history",data:t.slice(0,10)});else{var n=this.data.history,r=n.findIndex((function(e){return e.name===t}));if(r>=0){var a=n.splice(r,1)[0];n.unshift(a)}else n.unshift({name:t});n.length>10&&(n=n.slice(0,10)),this.setData({history:n},(function(){o.setStorage({key:e.data.historyMode+"history",data:n})}))}},removeAllHistoryTap:function(){this.setData({inRemoveMode:!0}),this.sendSearchPageLog("removeAll","history","click")},removeAllHistory:function(){var t=this;R.showModal({content:"确认删除全部历史搜索记录？"}).then((function(e){e.confirm&&(t.setData({history:[]},(function(){t.setHistory([])})),t.sendSearchPageLog("removeAllDone","history","click"))}))},removeHistoryDone:function(){this.setData({inRemoveMode:!1})},historyItemLongTap:function(t){var e=t.detail.index;this.setData({removeItemIndex:e}),this.sendSearchPageLog("hisItemLongTap","history","click")},historyItemTap:function(t){var e=this,n=t.detail,r=n.index,o=n.value,a=this.data,i=a.removeItemIndex,s=a.inRemoveMode;i===r||s?this.removeHistoryItem(r):(this.resultFrom="history",this.setData({searchQuery:o},(function(){e.resetResultTab(),e.doSearch(),e.sendSearchPageLog("hisItemTapToSearch","history","click",e.data.searchQuery)})))},removeHistoryItem:function(t){var e=this,n=this.data.history;n.splice(t,1),this.setData({history:n,removeItemIndex:NaN},(function(){e.setHistory(n)})),this.sendSearchPageLog("hisItemRemove","history","click")},setDefaultStatus:function(){this.setData({removeItemIndex:NaN,inRemoveMode:!1})},getRecommend:function(){var t=this;(0,D.request)({url:M,data:{type:"eshop",action:"keyword",appkey:this.data.appKey?this.data.appKey:C},method:"POST"},{isUseBdtls:!1}).then((function(e){if(e.errno)t.setData({recommend:[]});else{var n=x.default.get(e,"data.data.data"),r=x.default.get(e,"data.data.total");t.setData({recommend:n,recommendTotal:r}),t.sendSearchPageLog("getRecommend","recommend","show")}}))},recommendTap:function(t){var e=this,n=t.detail.value;this.setData({searchQuery:n},(function(){e.resultFrom="hot",e.resetResultTab(),e.doSearch(),e.sendSearchPageLog("recommendItemTap","recommend","click",e.data.searchQuery)}))},updateHotSearch:function(){var t=this;if(!this.updateHotSearchIng){this.updateHotSearchIng=!0;var e=this.data,n=e.recommendPn,r=e.recommendTotal;this.setData({hotSearchSync:!0}),10*n>r+10&&this.setData({recommendPn:1}),(0,D.request)({url:M,data:{type:"eshop",action:"keyword",appkey:this.data.appKey?this.data.appKey:C,pn:this.data.recommendPn},method:"POST"},{isUseBdtls:!1}).then((function(e){if(t.updateHotSearchIng=!1,e.errno)o.showToast({icon:"none",title:"网络异常,请稍后重试"});else{var n=x.default.get(e,"data.data.data");t.setData({recommend:n.length?n:t.data.recommend,recommendPn:t.data.recommendPn+1,hotSearchSync:!1}),t.sendSearchPageLog("updateRecommend","recommend","click")}}))}},resetResultTab:function(){var t=this.data.resultTab.map((function(t,e){return t.select=0===e?1:0,t}));this.setData({resultTab:t})},resultModeChange:function(t){var e=this,n=this.data,r=n.searchQuery,o=n.tabSelect,a=n.sortType,i=n.showEmptyState,s=n.status,u=t.detail,c=u.mode,l=u.sortKey;if(this.chooseResultTab(c),o&&o===l){if("price"!==l)return;this.setData({sortType:a?0:1})}else this.setData({sortType:["salesnum","credit"].includes(l)?1:0,tabSelect:l});var d={type:"eshop",action:"search",appkey:this.data.appKey?this.data.appKey:C,query:r,sortkey:l,sorttype:this.data.sortType||0};i&&"err"===s?this.onRequestErr(!0,d):(this.setData({showEmptyState:!0}),this.sendResultPageLog("tabItemTap-"+l+"-"+this.data.sortType,"resultTab","click",r),(0,D.request)({url:M,data:d,method:"POST"},{isUseBdtls:!1}).then((function(t){e.handleAfterSearch(t)})).catch((function(t){e.onRequestErr(t,d)})))},chooseResultTab:function(t){var e=this.data.resultTab.map((function(e){return e.name===t?(e.select=1,e):(e.select=0,e)}));this.setData({resultTab:e,loadAllGoods:!1,resultPn:2,resultListTop:0})},scrollToLower:function(){var t=this,e=this.data,n=e.searchQuery,r=e.sortType,o=e.resultPn,a=e.resultTotal,i=e.resultList,s=e.tabSelect;10*o-10>a?this.setData({loadAllGoods:!0}):(this.setData({showResultBottomLoading:!0}),this.sendResultPageLog("scrollToLower","resultList","click",n),(0,D.request)({url:M,data:{type:"eshop",action:"search",appkey:this.data.appKey?this.data.appKey:C,query:n,sortkey:s,sorttype:r,pn:o},method:"POST"},{isUseBdtls:!1}).then((function(e){if(e.data.errno)3==+e.data.errno&&t.setData({loadAllGoods:!0,showResultBottomLoading:!1,resultPn:a+1});else{var n=x.default.get(e,"data.data.data",[]);t.sendGoodsShowLog(n);var r=[].concat(k(i),k(n));t.setData({resultList:r,showResultBottomLoading:!1,resultPn:o+1})}})))},goToShop:function(t){var e=this,n=t.detail,r=n.linkkey,a=n.linkpath,i=n.title,s=this.data.appKey?this.data.appKey:C,u=this.data.tabSelect||"default",c=this.data.sortType||0,l=x.default.parseURL(a);l.query=x.default.assign({serverlessOptions:{from:this.resultFrom,tab:"tabItem-"+u+"-"+c,query:this.data.searchQuery}},l.query),a=x.default.stringifyURL(l),r&&a?r===s?R.navigateTo({url:a}).then((function(t){e.sendResultPageLog("goToShop","resultList","click",{title:i,jumpUrl:""+r+a})})).catch((function(t){o.showToast({icon:"none",title:"网络不给力，请稍后重试",duration:2e3}),e.sendResultPageLog("goToShopFail","resultList","click",{title:i,jumpUrl:""+r+a})})):R.navigateToSmartProgram({appKey:r,path:a}).then((function(t){e.sendResultPageLog("goToShop","resultList","click",{title:i,jumpUrl:""+r+a})})).catch((function(t){o.showToast({icon:"none",title:"网络不给力，请稍后重试",duration:2e3}),e.sendResultPageLog("goToShopFail","resultList","click",{title:i,jumpUrl:""+r+a})})):o.showToast({icon:"none",title:"网络不给力，请稍后重试",duration:2e3})},onErrReload:function(){var t=this;(0,D.request)({url:M,data:this.reloadParams,method:"POST"},{isUseBdtls:!1}).then((function(e){t.handleAfterSearch(e),t.sendResultPageLog("onErrReload","resultList","click",t.data.searchQuery)})).catch((function(t){o.showToast({icon:"none",title:"网络不给力，请稍后重试",duration:2e3})}))},onRequestErr:function(t,e){t&&(this.reloadParams=e,this.setData({status:"err",showEmptyState:!0}),this.sendResultPageLog("requestErr","resultList","show",this.data.searchQuery))},sendSearchPageLog:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.sendLog({app_key:this.data.appKey?this.data.appKey:C,component_info:Object.assign({page_type:"search",action:t,module:e,query:r},o)},n,{value:this.firstUse}),"focus"!==t&&"blur"!==t&&"show"!==n&&(this.firstUse="")},sendResultPageLog:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.sendLog({app_key:this.data.appKey?this.data.appKey:C,component_info:Object.assign({page_type:"result",action:t,module:e,query:r},o)},n)},sendGoodsShowLog:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(x.default.isArray(e)),x.default.isArray(e)&&e.forEach((function(e,n){var r=t.data.tabSelect||"default",o=t.data.sortType||0,a=x.default.get(t.data,"resultList.length",0)+n;t.sendSearchPageLog("goodsShow","resultList","show",t.data.searchQuery,{requestId:t.requestId,data:Object.assign({tab:"tabItem-"+r+"-"+o,showIndex:a},e)})}))},searchBoxDoSearch:function(t){var e=this;this.resultFrom="search",this.setData({searchQuery:t.detail},(function(){e.doSearch(),e.sendSearchPageLog("doSearch","searchBox","click",e.data.searchQuery)}))},handleInput:function(t){},inputChange:function(t){},inputFocus:function(){var t=this.data.showResult?this.sendResultPageLog:this.sendSearchPageLog;this.setData({showResult:!1}),t.call(this,"focus","searchBox","click")},inputBlur:function(){this.sendSearchPageLog("blur","searchBox","click")},clearInput:function(){this.sendSearchPageLog("clearInput","searchBox","click")}},observers:{resultList:function(t){if(t.length){var e=[],n=[];t.forEach((function(t,r){r%2==0?e.push(t):n.push(t)})),this.setData({resultListLeft:e,resultListRight:n})}else this.setData({resultListLeft:[],resultListRight:[]})},showResult:function(t){t&&this.sendResultPageLog("showResult","resultList","show",this.data.searchQuery),!t&&this.sendSearchPageLog("showSearch","searchBox","show",this.data.searchQuery)}}})})),t("2",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){(function(t){var e,r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":i(t))&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){var r=n(2),o=n(3),a=n(4),i=n(6);t.exports=function(t,e){return r(t)||o(t,e)||a(t,e)||i()}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?t.exports=n=function(t){return void 0===t?"undefined":i(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"isSymbol",(function(){return h})),n.d(r,"isObject",(function(){return f})),n.d(r,"isEmptyObject",(function(){return p})),n.d(r,"isString",(function(){return g})),n.d(r,"isPlainObject",(function(){return m})),n.d(r,"isKey",(function(){return y})),n.d(r,"isFunction",(function(){return v})),n.d(r,"isArray",(function(){return b})),n.d(r,"toString",(function(){return w})),n.d(r,"tagTester",(function(){return _})),n.d(r,"isTelephoneNum",(function(){return S})),n.d(r,"compareVersion",(function(){return x}));var o={};n.r(o),n.d(o,"assign",(function(){return L})),n.d(o,"pickKeysInObject",(function(){return T}));var a={};n.r(a),n.d(a,"deepAssign",(function(){return E}));var i={};n.r(i),n.d(i,"stringifyQuery",(function(){return Q})),n.d(i,"stringifyURL",(function(){return G})),n.d(i,"parseQuery",(function(){return W})),n.d(i,"parseURL",(function(){return Y}));var s={};n.r(s),n.d(s,"formatDecimal",(function(){return Z}));var u=n(1),c=n.n(u),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function h(t){return"symbol"===c()(t)||f(t)&&"[object Symbol]"===Object.prototype.toString(t)}function f(t){return"object"===c()(t)&&null!==t}function p(t){return m(t)&&0===Object.keys(t).length}function g(t){return"[object String]"===Object.prototype.toString.call(t)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("[object Object]"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&t instanceof n}function y(t,e){if(Array.isArray(t))return!1;var n=c()(t);return!("number"!==n&&"symbol"!==n&&"boolean"!==n&&null!==t&&!h(t))||d.test(t)||!l.test(t)||null!==e&&t in Object(e)}function v(t){return"function"==typeof t}function b(t){return Array.isArray(t)}var w=Object.prototype.toString;function _(t,e){return w.call(e)==="[object "+t+"]"}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^1[3-9][0-9]{9}$/.test(t)||/^\*{7}[0-9]{4}$/.test(t)}function x(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var r=0;r<n;r++){var o=parseInt(t[r],10),a=parseInt(e[r],10);if(o>a)return 1;if(o<a)return-1}return 0}function L(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[0]=e[0]||{},Object.assign.apply(Object,e)}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return e.forEach((function(e){"string"==typeof e&&Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})),n}function D(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{mapObject:!1},o=r.mapObject;if(!b(t)&&!f(t))return t;var a=b(t)?t:Object.keys(t),i=b(t)?function(t){return t}:function(t,e){return e[t]},s={},u=[],c=f(t)&&o?function(t,e){s[e]=t}:function(t){u.push(t)};return Array.prototype.forEach.call(a,(function(r){var o=i.call(n,r,t);o=v(e)?e.call(n,o,r,t):o,c.call(n,o,r)})),f(t)&&o?s:u}var O=Symbol.prototype.toString;function j(t){if("string"==typeof t)return t;if(b(t))return D(t,j).toString();if(null==t)return"";if(m(t))return JSON.stringify(t);if(h(t))return O?O.call(t):"";var e="".concat(t);return"0"===e&&1/t==-1/0?"-0":e}var k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g;function C(t){if("string"==typeof t||h(t))return t;var e=t+"";return"0"===e&&1/t==-1/0?"-0":e}function M(t,e){for(var n=0,r=(e=function(t,e){return b(t)?t:y(t,e)?[t]:(n=j(t),r=[],46===n.charCodeAt(0)&&r.push(""),n.replace(k,(function(t,e,n,o){r.push(n?o.replace(R,"$1"):e||t)})),r);var n,r}(e,t)).length;null!=t&&n<r;)t=t[C(e[n++])];return n&&n===r?t:void 0}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=M(t,e);return null==r?n:r}function I(t,e,n){var r,o,a,i,s,u,c=0,l=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,a=o;return r=o=void 0,c=e,i=t.apply(a,n)}function p(t){return c=t,s=setTimeout(y,e),l?f(t):i}function g(t){var n=t-u;return void 0===u||n>=e||n<0||d&&t-c>=a}function y(){var t=Date.now();if(g(t))return v(t);s=setTimeout(y,function(t){var n=t-c,r=e-(t-u);return d?Math.min(r,a-n):r}(t))}function v(t){return s=void 0,h&&r?f(t):(r=o=void 0,i)}function b(){for(var t=Date.now(),n=g(t),a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];if(r=Array.prototype.slice.call(c),o=this,u=t,n){if(void 0===s)return p(u);if(d)return s=setTimeout(y,e),f(u)}return void 0===s&&(s=setTimeout(y,e)),i}return e=+e||0,m(n)&&(l=!!n.leading,a=(d="maxWait"in n)?Math.max(+n.maxWait||0,e):a,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},b.flush=function(){return void 0===s?i:v(Date.now())},b}function P(t,e){if(t||(t=b(e)?[]:{}),f(e))for(var n in e)e.hasOwnProperty(n)&&(t[n]=f(e[n])?P(t[n],e[n]):e[n]);return t}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(P,e[0])}var B=n(0),U=n.n(B);function $(t){return g(t)&&1===t.length}function q(t,e){return t=j(t),e.encode?encodeURIComponent(t):t}function F(t,e){return e.decode&&null!=t?(t=t.replace(/\+/g," "),decodeURIComponent(t)):t}function H(t,e){return void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n=t.indexOf(e);return""===e||-1===n?[t]:[t.substring(0,n),t.substring(n+1)]}function N(t,e,n,r){return t.filter((function(t){return!H(t,r)})).map((function(t,o){return n(e,t,o,r)})).join("&")}function z(t,e,n){return null!==e?"".concat(q(t,n),"=").concat(q(e,n)):"".concat(q(t,n))}function K(t,e){return e.parseBoolean&&null!=t&&["true","false"].includes(t.toLowerCase())&&(t="true"===t.toLowerCase()),e.parseNumber&&null!=t&&!Number.isNaN(Number(t))&&Number.isFinite(Number(t))&&"string"==typeof t&&""!==t.trim()&&(t=+t),t}function Q(t,e){if(!f(t))throw new TypeError("Expect a Object");if(!$((e=Object.assign({encode:!0,queryFormat:"none",queryFormatSeparator:",",parseFormat:"array",parseFormatSeparator:",",skipNull:!1,skipEmptyString:!1},e)).queryFormatSeparator)||!$(e.parseFormatSeparator))throw new TypeError("Separator should be a single character");for(var n=[],r=function(t){var e,n=t.queryFormat,r=t.queryFormatSeparator,o=t.parseFormat,a=t.parseFormatSeparator;switch(n){case"bracket":e=function(t,e,n,r){return null===e?"".concat(q(t,r),"[]"):"".concat(q(t,r),"[]=").concat(q(e,r))};break;case"index":e=function(t,e,n,r){return null===e?"".concat(q(t,r),"[").concat(n,"]"):"".concat(q(t,r),"[").concat(n,"]=").concat(q(e,r))};break;case"separator":return"string"===o?function(e,n){var o=g(n)?n.split(a):[];if(o.length>1){var i=o.filter((function(t){return null!=t&&""!==t})).map((function(e){return q(e,t)})).join(r);return"".concat(q(e,t),"=").concat(i)}return z(e,n,t)}:function(e,n){if(Array.isArray(n)){var o=n.filter((function(t){return null!=t&&""!==t})).map((function(e){return q(e,t)})).join(r);return o?"".concat(q(e,t),"=").concat(o):""}return z(e,n,t)};default:e=function(t,e,n,r){return null===e?"".concat(q(t,r)):"".concat(q(t,r),"=").concat(q(e,r))}}return"string"===o?function(t,e){return function(n,r){var o=g(r)?r.split(e.parseFormatSeparator):[];return o.length>1?N(o,n,t,e):z(n,r,e)}}(e,t):function(t,e){return function(n,r){return Array.isArray(r)?N(r,n,t,e):z(n,r,e)}}(e,t)}(e),o=0,a=Object.entries(t);o<a.length;o++){var i=U()(a[o],2),s=i[0],u=i[1];if(!H(u,e)&&null!=s){var c=r(s,u);c&&n.push(c)}}return n.join("&")}function G(t,e){if(!f(t))throw new TypeError("Expect a Object");e=Object.assign({encode:!0},e);var n,r,o=t.url,a=t.query,i=t.hash,s=void 0===i?"":i,u=V(o,"#"),c=U()(u,2);o=c[0],r=c[1];var l=V(o,"?"),d=U()(l,2);if(o=d[0],void 0!==(n=d[1])){var h=W(n);a=f(a)?Object.assign({},h,a):h}return f(a)&&(a=Q(a,e)),a=a?"?".concat(a):"",s?s=e.encode?"#".concat(q(s,{encode:!0})):"#".concat(s):r&&(s="#".concat(r)),"".concat(o).concat(a).concat(s)}function W(t,e){if(!g(t))throw new TypeError("Expected a string");if(!$((e=Object.assign({decode:!0,queryFormat:"none",queryFormatSeparator:",",parseFormat:"array",parseFormatSeparator:",",rewrite:!1,parseNumber:!1,parseBoolean:!1},e)).queryFormatSeparator)||!$(e.parseFormatSeparator))throw new TypeError("Separator should be a single character");var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!g(t))return"";var e=(t=J(t)).indexOf("?");return-1!==e?t.substring(e+1):t}(t),r={},o=function(t){var e=t.queryFormat,n=t.queryFormatSeparator;switch(e){case"bracket":return function(e,n,r){var o=/(\[\])$/.exec(e);if(n=F(n,t),o){var a=r[e=e.replace(/(\[\])$/,"")];r[e]=a?[].concat(a,n):[n]}else r[e]=n};case"index":return function(e,n,r){var o=/\[(\d*)\]$/.exec(e);if(n=F(n,t),o)return r[e=e.replace(/\[(\d*)\]$/,"")]=r[e]||[],void(r[e][o[1]]=n);r[e]=n};case"separator":return function(e,r,o){var a=r?r.split(n):[""];a.length>1?o[e]=a.map((function(e){return F(e,t)})):o[e]=F(r,t)};default:return function(e,n,r){var o=r[e];n=F(n,t),r[e]=void 0!==o?[].concat(o,n):n}}}(e);n.split("&").forEach((function(t){var n,a=V(t,"="),i=U()(a,2),s=i[0],u=i[1],c=void 0===u?null:u;(g(n=s)?""!==n.trim():n)&&(s=F(s,e),o(s,c,r))}));var a=function(t){var e=t.parseFormat,n=t.parseFormatSeparator,r=t.rewrite;switch(e){case"array":return function(e,n,r){Array.isArray(n)?r[e]=n.filter((function(t){return void 0!==t})).map((function(e){return K(e,t)})):r[e]=K(n,t)};case"string":return function(e,o,a){if(Array.isArray(o))return o=o.filter((function(t){return void 0!==t})),void(a[e]=r?K(o.pop(),t):o.join(n));a[e]=K(o,t)}}}(e);return Object.entries(r).forEach((function(t){var e=U()(t,2),n=e[0],o=e[1];a(n,o,r)})),r}function Y(t,e){if(!g(t))throw new TypeError("Expected a string");e=Object.assign({decode:!0},e);var n=V(t,"#"),r=U()(n,2),o=r[0],a=r[1],i=void 0===a?"":a,s=V(o,"?"),u=U()(s,2),c=u[0],l=u[1],d=void 0===l?"":l;return{url:c,path:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!g(t))return"";var e=t.replace(/(http|https)?:?\/\//,""),n=e.indexOf("/");return-1!==n?e.substring(n):""}(c),query:d=W(d,e),hash:F(i,e)}}function J(t){return V(t,"#")[0]}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t=parseFloat(t),isNaN(t))throw"TypeError";if(n)return Number(t.toFixed(e));var r=(t=t.toString()).indexOf(".");return t=-1!==r?t.substring(0,e+r+1):t.substring(0),Number(parseFloat(t).toFixed(e))}e.default=Object.assign({},r,o,i,a,s,{get:A,throttle:function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return m(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),I(t,e,{leading:r,maxWait:e,trailing:o})},debounce:I,forEach:function(t,e){var n=this;if(!b(t)&&!f(t))return t;var r=b(t)?t:Object.keys(t),o=b(t)?function(t){return t}:function(t,e){return e[t]};return Array.prototype.forEach.call(r,(function(r){var a=o.call(n,r,t);v(e)&&e.call(n,a,r,t)})),t},map:D,unset:function(t,e){if(!t||!e)return!0;var n=e in t?[e]:e.match(/[^.[\]]+/g),r=n.length<2?t:A(t,n.slice(0,-1),null),o=n[n.length-1];return null===r||delete r[o]},toString:j})}])},"object"==i(n)&&"object"==i(t)?t.exports=a():(r=[],void 0===(o="function"==typeof(e=a)?e.apply(n,r):e)||(t.exports=o))}).call(this,t(3)(e))})),t("3",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){e.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}})),t("4",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function L(t){return(L="function"==typeof Symbol&&"symbol"==x(Symbol.iterator)?function(t){return void 0===t?"undefined":x(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":x(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0});var T,D=(T={},["request","uploadFile","downloadFile","connectSocket","sendSocketMessage","closeSocket","ai.ocrIdCard","ai.ocrBankCard","ai.ocrDrivingLicense","ai.ocrVehicleLicense","ai.textReview","ai.textToAudio","ai.imageAudit","ai.advancedGeneralIdentify","ai.objectDetectIdentify","ai.carClassify","ai.dishClassify","ai.animalClassify","ai.plantClassify","ai.faceDetect","ai.faceMatch","ai.faceSearch","ai.facePersonVerify","ai.facePersonIdmatch","ai.faceLivenessSessioncode","ai.nlpLexerCustom","setInnerAudioOption","chooseVideo","saveVideoToPhotosAlbum","saveFile","getFileInfo","getSavedFileList","getSavedFileInfo","removeSavedFile","openDocument","setStorage","getStorage","getStorageInfo","removeStorage","clearStorage","getLocation","chooseLocation","openLocation","canvasGetImageData","canvasPutImageData","canvasToTempFilePath","showToast","showLoading","showModal","showActionSheet","setNavigationBarTitle","setNavigationBarColor","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","setTabBarStyle","setTabBarItem","showTabBar","hideTabBar","navigateTo","redirectTo","switchTab","reLaunch","pageScrollTo","setBackgroundColor","setBackgroundTextStyle","startPullDownRefresh","showFavoriteGuide","getSystemInfo","getNetworkType","startAccelerometer","stopAccelerometer","startCompass","stopCompass","startDeviceMotionListening","stopDeviceMotionListening","getBatteryInfo","scanCode","setScreenBrightness","getScreenBrightness","setKeepScreenOn","vibrateLong","vibrateShort","addPhoneContact","makePhoneCall","setClipboardData","getClipboardData","login","checkSession","authorize","getSwanId","getUserInfo","openSetting","getSetting","openShare","shareFile","chooseAddress","requestPolymerPayment","openCommunityEditor","closeCommunityEditor","openReplyEditor","closeReplyEditor","chooseInvoiceTitle","navigateToSmartProgram","navigateBackSmartProgram","setPageInfo","setMetaDescription","setMetaKeywords","setDocumentTitle","loadSubPackage"].forEach((function(t){T[t]=!0})),T);function O(t){return function(e){for(var n,r=arguments.length,o=new Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];e=e||{};var i=Object.assign({},e),s=new Promise((function(r,a){["fail","success","complete"].forEach((function(t){i[t]=function(n){try{e[t]&&e[t](n)}catch(n){}"success"===t?r(n):"fail"===t&&a(n)}})),n=t.apply(null,[i].concat(o))}));return s.returnValue=n,s}}function j(t,e,n,r){n="function"==typeof r&&D[n],t[e]=n?O(r):r}n.addAsyncAPIs=function(t){t.forEach((function(t){D[t]=!0}))},n.promisify=O,n.promisifyAll=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){var r=t[n];"object"===L(r)?(e[n]=e[n]||{},Object.keys(r).forEach((function(t){var o=r[t],a="".concat(n,".").concat(t);j(e[n],t,a,o)}))):j(e,n,n,r)})),e},n.removeAsyncAPIs=function(t){t.forEach((function(t){delete D[t]}))}})),t("5",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0});var x,L=(x=t(6))&&x.__esModule?x:{default:x},T=t(14);n.default={ubcLogger:L.default,getRequestUrl:T.getRequestUrl}})),t("6",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0});var x,L,T=t(7),D=(0,t(4).promisifyAll)(o),O=void 0,j=o.getSystemInfoSync();n.default={sendLog:(x=regeneratorRuntime.mark((function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Object,t.t1=Date.now(),t.t2=O,t.t2){t.next=7;break}return t.next=6,D.getSwanId();case 6:t.t2=t.sent.data.swanid;case 7:return t.t3=t.t2,t.next=10,D.getNetworkType();case 10:t.t4=t.sent.networkType,t.t5={timestamp:t.t1,swan_id:t.t3,network:t.t4},t.t6=e,n=t.t0.assign.call(t.t0,t.t5,t.t6),O||(O=n.swan_id),n.hostname||(n.hostname=j.host),T.ubcLogger.send(Object.assign({},o,{type:r,ext:n}));case 17:case"end":return t.stop()}}),t,this)})),L=function(){var t=x.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then((function(t){r("next",t)}),(function(t){r("throw",t)}));e(s)}("next")}))},function(t){return L.apply(this,arguments)}),init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({swan_name:"smt-serverless",testMode:!1,version:"2.0",serverId:"11792",from:"eshop",type:"show",page:"search-component",value:""},t);T.ubcLogger.set(Object.assign({},e))}}})),t("7",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0}),n.ubcLogger=n.UbcLogger=void 0;var x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T=j(t(8)),D=j(t(9)),O=j(t(13));function j(t){return t&&t.__esModule?t:{default:t}}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then((function(t){r("next",t)}),(function(t){r("throw",t)}));t(s)}("next")}))}}var C=void 0;try{o&&(C=o,console.log("手百内"))}catch(t){C=wx,console.log("微信内")}var M=C,A={tiebaclient:"tieba",baidubox:"baiduboxapp",mapmnp:"baidumap"};function I(){if(M.getEnvInfoSync){var t=M.getEnvInfoSync().scheme;return A[t]||t||"baiduboxapp"}if(wx)return"weixin"}var P=(0,T.default)((function(){return Object.assign({},M.getSystemInfoSync(),{appname:I()})})),E={cuid:"BAIDUCUID",bduss:"BDUSS",baidu_id:"BAIDUID"},B=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n]&&e.push(E[n]+"="+t[n])})),e.join("; ")};function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t)return"";var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null==r?r="":"object"===(void 0===r?"undefined":L(r))&&(r=JSON.stringify(r)),e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(r)}return e.slice(1)}var $,q,F,H=function(t,e){if(!e||"[object Object]"!==Object.prototype.toString.call(e)||Object.keys(e).length<1)return!1;var n=Object.keys(e),r=!1;return n.forEach((function(n){t[n]&&t[n]!==e[n]&&(r=!0)})),r},V=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){if(!M[t])return r();M[t](Object.assign({},e,{success:n,fail:r}))}))}},N={getCommonSysInfo:V("getCommonSysInfo"),getBDUSS:V("getBDUSS"),request:V("request")},z=P().appname,K=(0,T.default)(R(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e={}).cuid,r=e.baidu_id,t.prev=1,t.next=4,N.getCommonSysInfo();case 4:o=t.sent,n=o.cuid,r=o.baidu_id,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:return t.abrupt("return",{cuid:n,baidu_id:r});case 12:case"end":return t.stop()}}),t,void 0,[[1,9]])})))),Q=($=R(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",t.prev=1,t.next=4,N.getBDUSS();case 4:n=t.sent,e=n.bduss,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:return t.abrupt("return",{bduss:e});case 11:case"end":return t.stop()}}),t,void 0,[[1,8]])}))),function(){return $.apply(this,arguments)}),G=(q=R(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",t.prev=1,n=Date.now(),t.next=5,N.request({method:"GET",url:"https://www.baidu.com/favicon.ico?from=ubcloggergetbaiduid&_="+n});case 5:r=t.sent,(e=Y(r.header["Set-Cookie"]))&&M.setStorageSync("_ug-swan-logger_baiduid",e),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,void 0,[[1,10]])}))),function(){return q.apply(this,arguments)}),W=(0,T.default)(R(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=M.getStorageSync("_ug-swan-logger_baiduid")||"")){t.next=3;break}return t.abrupt("return",{baidu_id:e});case 3:return t.next=5,G();case 5:return e=t.sent,t.abrupt("return",{baidu_id:e});case 7:case"end":return t.stop()}}),t,void 0)})))),Y=function(t){var e="";return t&&(e=/BAIDUID=(.*?);/.exec(t)[1]),e},J=(F=R(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("weixin"!==z){t.next=8;break}return t.next=3,W();case 3:return(e=t.sent).baidu_id||G.then((function(t){t&&W.cache.set(void 0,{baidu_id:t})})).catch((function(t){console.log("retry saveOutsideUserID err",t)})),t.abrupt("return",e);case 8:return t.t0=Object,t.t1={},t.next=12,K();case 12:return t.t2=t.sent,t.next=15,Q();case 15:return t.t3=t.sent,t.abrupt("return",t.t0.assign.call(t.t0,t.t1,t.t2,t.t3));case 17:case"end":return t.stop()}}),t,void 0)}))),function(){return F.apply(this,arguments)}),Z=function(t,e){var n=+t.rate;if(isNaN(n)||!e)return!0;if(1===n)return!0;if(0===n)return!1;try{var r=(0,D.default)(e);return parseInt(r.substr(-6).toLowerCase(),16)%1e4/1e4<=n}catch(t){return!0}},X={iqiyi:12016,baiduboxapp:1,baiduboxlite:10001,baiduhaokan:11e3,bdminivideo:12002,tieba:11001,baidumap:11006,bdnetdisk:11005,askmybaby:11007,xifan:12006,baiduboxmission:10006,weixin:19999},tt={1:{UBC_URL:"https://mbd.baidu.com/tcbox",TEST_UBC_URL:"http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/tcbox",DEFAULT_LOG_DATA:{appid:"1",dataid:"2",cateid:"99",actionid:"1",actiontype:"0",actiondata:{id:"0",type:"0",timestamp:0,content:{boxVersion:"-",platform:"-",inBox:1,page:"-",type:"-",value:"-",source:"default",from:"act",ext:{apptype:"-"}}}},DEFAULT_QUERY:{action:"pblog"}},2:{UBC_URL:"https://mbd.baidu.com/ztbox",TEST_UBC_URL:"http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/ztbox",DEFAULT_LOG_DATA:{cateid:"99",actiondata:{id:"0",type:"0",timestamp:0,content:{swan_name:"-",page:"-",type:"-",value:"-",source:"default",from:"act",ext:{}}}},DEFAULT_QUERY:{action:"zpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:"",sid:"",sn:""}}},et={cateid:"101",data:[]},nt={action:"mpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:"",sid:"",sn:""},rt={request:V("request")};J().then().catch();var ot=function(){if(a()){var t=a().globalData;if(t&&t.query&&t.query.idfrom)return t.query.idfrom;if(t&&t.entryType)return t.entryType;if(M.getURLQuery&&getCurrentPages&&getCurrentPages().length>0){var e=M.getURLQuery();if(e&&(e.idfrom||e.source))return e.idfrom||e.source}}},at=function(t,e){var n={};return Object.keys(e).forEach((function(t){e[t]&&(n[t]=e[t])})),0===Object.keys(n).length?t:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t+(~t.indexOf("?")?"&":"?")+U(e)}(t,n)},it=function(){var t=getCurrentPages();return t[t.length-1].uri},st=function(t){for(var e=getCurrentPages(),n=0;n<e.length-1;n++)if(t===e[n].uri)return!0;return!1},ut=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.ubcParams={},this.logInited=!1,this.sendJobsArr=[],this.sampleConf=(0,O.default)({},n.sample),this.timerMap={},this.timerPagesOpt={},this.pageTimingLogBegin=0,this.pageTimingLogEnd=1,this.ubcVersion=+n.version||2,this.logMergeOpt=(0,O.default)({ifAutoMerge:!1,mergeInterval:5,mergeNumMax:5},n.logMergeOpt||{}),2!=+this.ubcVersion&&this.logMergeOpt.ifAutoMerge&&(console.log("[ug-swan-logger-waring] 日志合并配置失败: ubcVersion为2时，支持日志合并"),this.logMergeOpt.ifAutoMerge=!1),this.mergeLogsList={auto:[],manual:[]},this._defineMergeLogListProxy("auto"),this._defineMergeLogListProxy("manual"),M.onAppHide((function(){e._logAutoMergeEnd("auto"),e._logAutoMergeEnd("manual")})),this._initUbcParamsWithVersion(),this._initUbcUrlWithVersion(n),(0,O.default)(this.ubcParams,{actiondata:{id:n.serverId,content:{source:n.source||n.idfrom||ot(),page:n.page,from:n.from,swan_name:n.swan_name}}}),this._ifSwanReport=!(!1===n.ifSwanReport),this._checkServerId()}var e,n,r,o,a,i,s,u;return x(t,[{key:"_defineMergeLogListProxy",value:function(t){var e=this;this.mergeLogsList[t]=new Proxy([],function(t){return{set:function(n,r,o,a){return n.length===a.length&&0==+r&&(e.logMergeOpt[t+"Timer"]||(e.logMergeOpt[t+"Timer"]=setInterval((function(){e._sendMergeLogInterval(t)}),1e3*e.logMergeOpt.mergeInterval))),n.length===a.length&&"length"===r&&0==+o&&e.logMergeOpt[t+"Timer"]&&(clearInterval(e.logMergeOpt[t+"Timer"]),e.logMergeOpt[t+"Timer"]=null),"length"===r&&+o>=e.logMergeOpt.mergeNumMax&&e._sendMergeLogInterval(t),Reflect.set(n,r,o,a)}}}(t))}},{key:"_swanReport",value:function(t){var e=t.actiondata.content,n={page:e.page,type:e.type,value:e.value,source:e.source};try{M.reportAnalytics&&M.reportAnalytics("ubc",n)}catch(t){console.log(t)}}},{key:"_initUbcParamsWithVersion",value:function(){var t=tt[this.ubcVersion];this.ubcParams={},this.ubcDefaultLogData=t.DEFAULT_LOG_DATA,(0,O.default)(this.ubcParams,this.ubcDefaultLogData,this._getDeviceInfo())}},{key:"_initUbcUrlWithVersion",value:function(t){var e=tt[this.ubcVersion],n=t.queryParams||{},r={appname:n.appname,from:n.from,cfrom:n.cfrom,smfw:n.smfw,sid:n.sid,sn:n.sn};this.ubcUrl=at(t.testMode?t.testUrl?t.testUrl:e.TEST_UBC_URL:e.UBC_URL,(0,O.default)(e.DEFAULT_QUERY,r)),this.ubcMergeUrl=at(t.testMode?t.testUrl?t.testUrl:"http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/ztbox":"https://mbd.baidu.com/ztbox",(0,O.default)(nt,r))}},{key:"_getDeviceInfo",value:function(){var t=P(),e=t.version,n=t.platform,r=t.appname,o={actiondata:{content:{ext:{apptype:X[r]}}}};return 1===this.ubcVersion?(0,O.default)({},o,{actiondata:{content:{boxVersion:e,platform:n}}}):o}},{key:"_checkServerId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"0"===this.ubcParams.actiondata.id?(t&&console.log("[ug-swan-logger] serverId 未设置"),!1):(this.logInited=!0,!0)}},{key:"_checkSampleHit",value:(u=R(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.sampleConf||{},!(Object.keys(e).length>0)){t.next=7;break}return t.next=4,J();case 4:return n=t.sent,r=n.cuid,t.abrupt("return",Z(e,r));case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"set",value:(s=R(regeneratorRuntime.mark((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sampleConf=(0,O.default)(this.sampleConf,e.sample),e.version&&+e.version!==this.ubcVersion&&(this.ubcVersion=+e.version||2,this._initUbcParamsWithVersion()),H(this.logMergeOpt,e.logMergeOpt)&&(this._logAutoMergeEnd("auto"),this._logAutoMergeEnd("manual"),this.logMergeOpt=(0,O.default)(this.logMergeOpt,e.logMergeOpt||{}),1==+this.ubcVersion&&e.logMergeOpt.ifAutoMerge&&(console.log("[ug-swan-logger-waring] 日志合并配置失败: ubcVersion为2时，支持日志合并"),this.logMergeOpt.ifAutoMerge=!1)),(e.testMode||e.version||Object.keys(e.queryParams||{}).length>0)&&this._initUbcUrlWithVersion(e),(0,O.default)(this.ubcParams,{actiondata:{id:e.serverId,content:{source:e.source||e.idfrom||ot(),page:e.page,from:e.from,swan_name:e.swan_name}}}),this._ifSwanReport=!(!1===e.ifSwanReport),this._checkServerId(!0)&&this.sendJobsArr.length>0&&(Promise.all(this.sendJobsArr.map((function(t){return t()}))),this.sendJobsArr=[]);case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_realSend",value:(i=R(regeneratorRuntime.mark((function t(){var e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._checkSampleHit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return",Promise.resolve());case 4:return t.next=6,J();case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:return e=t.t0,n={},r=Date.now(),"flow"===a?this._getFlowData((0,O.default)(n,this.ubcParams,{actiondata:{timestamp:r,content:Object.assign({},o)}})):((0,O.default)(n,this.ubcParams,{actiondata:{timestamp:r,content:Object.assign({},o)}}),this._ifSwanReport&&this._swanReport(n)),t.abrupt("return",rt.request({method:"GET",url:this.ubcUrl,data:{data:JSON.stringify(n),uid:e.cuid,_:r},header:{"content-type":"application/x-www-form-urlencoded",cookie:B(e)}}));case 14:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"send",value:(a=R(regeneratorRuntime.mark((function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.logMergeOpt.ifAutoMerge||"event"!==r){t.next=4;break}return t.next=3,this.mergeLogsList.auto.push(e);case 3:return t.abrupt("return",Promise.resolve());case 4:if(this.logInited){t.next=6;break}return t.abrupt("return",new Promise((function(t,o){n.sendJobsArr.push((function(){n._realSend(Object.assign({},e),r).then((function(e){t(e)})).catch((function(t){o(t)}))}))})));case 6:return t.abrupt("return",this._realSend(e,r));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_getFlowData",value:function(t){var e=(0,O.default)({},t.actiondata.content),n=e.swan_name,r=e.timing,o=r.starttime,a=r.endtime,i=r.duration;delete t.actiondata.content,delete e.timing,delete e.swan_name,(0,O.default)(t.actiondata,{starttime:o,endtime:a}),(0,O.default)(t.actiondata,{type:1,content:{duration:i,swan_name:n,option:e}})}},{key:"setPageTimingLog",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.pageTimingLogBegin,r={flag:n,begin:Date.now()},o=it();if(this.timerPagesOpt[o]=Object.assign({},e,{timing:{}}),!st(o)){var a=function(e){var o=e.args.accessUri;t.timerMap[o]=(0,O.default)(r,{begin:Date.now(),end:-1,flag:n})},i=function(e){t.stopPageTimingLog(e)};Page.after({url:o,methods:{onShow:a,onUnload:i,onHide:i}})}}},{key:"stopPageTimingLog",value:function(t){var e=this.pageTimingLogBegin,n=this.pageTimingLogEnd,r=it(),o=t&&t.args.accessUri||r;this.timerMap[o]&&this.timerMap[o].flag===e&&(this.timerMap[o].flag=n,this.timerMap[o].end=Date.now(),this.send((0,O.default)(this.timerPagesOpt[r],{timing:{duration:(this.timerMap[o].end-this.timerMap[o].begin)/1e3,starttime:this.timerMap[o].begin,endtime:this.timerMap[o].end}}),"flow"))}},{key:"_mergeRealSend",value:(o=R(regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._checkSampleHit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return",Promise.resolve());case 4:return t.next=6,J();case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:return n=t.t0,r=Date.now(),o=[],e.map((function(t){t&&o.push(t)})),a=o.map((function(t){var e=(0,O.default)({},s.ubcParams.actiondata.content),n=(0,O.default)(e,Object.assign({},t));return Object.assign({},s.ubcParams.actiondata,{timestamp:r,content:n})})),i=(0,O.default)({},et,{data:a}),t.abrupt("return",rt.request({method:"POST",url:this.ubcMergeUrl+"&uid="+n.cuid+"&_="+r,data:{data:JSON.stringify(i)},header:{"content-type":"application/x-www-form-urlencoded",cookie:B(n)}}));case 16:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_sendMergeLogInterval",value:(r=R(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=this.mergeLogsList[e]).length>0)){t.next=5;break}return r=n.splice(0),this._defineMergeLogListProxy(e),t.abrupt("return",this._mergeRealSend(r));case 5:return t.abrupt("return",Promise.resolve());case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"sendMergeLog",value:(n=R(regeneratorRuntime.mark((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2==+this.ubcVersion){t.next=3;break}return console.log("[ug-swan-logger-waring] sendMergeLog调用失败！请配置ubcVersion为2"),t.abrupt("return",this.send(e));case 3:this.mergeLogsList.manual.push(e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_logAutoMergeEnd",value:(e=R(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mergeLogsList[e].length>0&&(n=this.mergeLogsList[e].splice(0)).length>0&&n[n.length-1]&&this._mergeRealSend(n);case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),ct=new ut;n.UbcLogger=ut,n.ubcLogger=ct})),t("8",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T=/^\[object .+?Constructor\]$/,D="object"==("undefined"==typeof global?"undefined":L(global))&&global&&global.Object===Object&&global,O="object"==(void 0===c?"undefined":L(c))&&c&&c.Object===Object&&c,j=D||O||Function("return this")(),k=Array.prototype,R=Function.prototype,C=Object.prototype,M=j["__core-js_shared__"],A=(x=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",I=R.toString,P=C.hasOwnProperty,E=C.toString,B=RegExp("^"+I.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=k.splice,$=K(j,"Map"),q=K(Object,"create");function F(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function H(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function V(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function N(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function z(t,e){var n,r,o=t.__data__;return("string"==(r=void 0===(n=e)?"undefined":L(n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function K(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!G(t)||(e=t,A&&A in e))&&(function(t){var e=G(t)?E.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?B:T).test(function(t){if(null!=t){try{return I.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}(n)?n:void 0}function Q(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i),i};return n.cache=new(Q.Cache||V),n}function G(t){var e=void 0===t?"undefined":L(t);return!!t&&("object"==e||"function"==e)}F.prototype.clear=function(){this.__data__=q?q(null):{}},F.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},F.prototype.get=function(t){var e=this.__data__;if(q){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(e,t)?e[t]:void 0},F.prototype.has=function(t){var e=this.__data__;return q?void 0!==e[t]:P.call(e,t)},F.prototype.set=function(t,e){return this.__data__[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this},H.prototype.clear=function(){this.__data__=[]},H.prototype.delete=function(t){var e=this.__data__,n=N(e,t);return!(n<0||(n==e.length-1?e.pop():U.call(e,n,1),0))},H.prototype.get=function(t){var e=this.__data__,n=N(e,t);return n<0?void 0:e[n][1]},H.prototype.has=function(t){return N(this.__data__,t)>-1},H.prototype.set=function(t,e){var n=this.__data__,r=N(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},V.prototype.clear=function(){this.__data__={hash:new F,map:new($||H),string:new F}},V.prototype.delete=function(t){return z(this,t).delete(t)},V.prototype.get=function(t){return z(this,t).get(t)},V.prototype.has=function(t){return z(this,t).has(t)},V.prototype.set=function(t,e){return z(this,t).set(t,e),this},Q.Cache=V,e.exports=Q})),t("9",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L,T,D,O;x=t(10),L=t(11).utf8,T=t(12),D=t(11).bin,(O=function t(e,n){e.constructor==String?e=n&&"binary"===n.encoding?D.stringToBytes(e):L.stringToBytes(e):T(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=x.bytesToWords(e),o=8*e.length,a=1732584193,i=-271733879,s=-1732584194,u=271733878,c=0;c<r.length;c++)r[c]=16711935&(r[c]<<8|r[c]>>>24)|4278255360&(r[c]<<24|r[c]>>>8);r[o>>>5]|=128<<o%32,r[14+(o+64>>>9<<4)]=o;var l=t._ff,d=t._gg,h=t._hh,f=t._ii;for(c=0;c<r.length;c+=16){var p=a,g=i,m=s,y=u;a=l(a,i,s,u,r[c+0],7,-680876936),u=l(u,a,i,s,r[c+1],12,-389564586),s=l(s,u,a,i,r[c+2],17,606105819),i=l(i,s,u,a,r[c+3],22,-1044525330),a=l(a,i,s,u,r[c+4],7,-176418897),u=l(u,a,i,s,r[c+5],12,1200080426),s=l(s,u,a,i,r[c+6],17,-1473231341),i=l(i,s,u,a,r[c+7],22,-45705983),a=l(a,i,s,u,r[c+8],7,1770035416),u=l(u,a,i,s,r[c+9],12,-1958414417),s=l(s,u,a,i,r[c+10],17,-42063),i=l(i,s,u,a,r[c+11],22,-1990404162),a=l(a,i,s,u,r[c+12],7,1804603682),u=l(u,a,i,s,r[c+13],12,-40341101),s=l(s,u,a,i,r[c+14],17,-1502002290),a=d(a,i=l(i,s,u,a,r[c+15],22,1236535329),s,u,r[c+1],5,-165796510),u=d(u,a,i,s,r[c+6],9,-1069501632),s=d(s,u,a,i,r[c+11],14,643717713),i=d(i,s,u,a,r[c+0],20,-373897302),a=d(a,i,s,u,r[c+5],5,-701558691),u=d(u,a,i,s,r[c+10],9,38016083),s=d(s,u,a,i,r[c+15],14,-660478335),i=d(i,s,u,a,r[c+4],20,-405537848),a=d(a,i,s,u,r[c+9],5,568446438),u=d(u,a,i,s,r[c+14],9,-1019803690),s=d(s,u,a,i,r[c+3],14,-187363961),i=d(i,s,u,a,r[c+8],20,1163531501),a=d(a,i,s,u,r[c+13],5,-1444681467),u=d(u,a,i,s,r[c+2],9,-51403784),s=d(s,u,a,i,r[c+7],14,1735328473),a=h(a,i=d(i,s,u,a,r[c+12],20,-1926607734),s,u,r[c+5],4,-378558),u=h(u,a,i,s,r[c+8],11,-2022574463),s=h(s,u,a,i,r[c+11],16,1839030562),i=h(i,s,u,a,r[c+14],23,-35309556),a=h(a,i,s,u,r[c+1],4,-1530992060),u=h(u,a,i,s,r[c+4],11,1272893353),s=h(s,u,a,i,r[c+7],16,-155497632),i=h(i,s,u,a,r[c+10],23,-1094730640),a=h(a,i,s,u,r[c+13],4,681279174),u=h(u,a,i,s,r[c+0],11,-358537222),s=h(s,u,a,i,r[c+3],16,-722521979),i=h(i,s,u,a,r[c+6],23,76029189),a=h(a,i,s,u,r[c+9],4,-640364487),u=h(u,a,i,s,r[c+12],11,-421815835),s=h(s,u,a,i,r[c+15],16,530742520),a=f(a,i=h(i,s,u,a,r[c+2],23,-995338651),s,u,r[c+0],6,-198630844),u=f(u,a,i,s,r[c+7],10,1126891415),s=f(s,u,a,i,r[c+14],15,-1416354905),i=f(i,s,u,a,r[c+5],21,-57434055),a=f(a,i,s,u,r[c+12],6,1700485571),u=f(u,a,i,s,r[c+3],10,-1894986606),s=f(s,u,a,i,r[c+10],15,-1051523),i=f(i,s,u,a,r[c+1],21,-2054922799),a=f(a,i,s,u,r[c+8],6,1873313359),u=f(u,a,i,s,r[c+15],10,-30611744),s=f(s,u,a,i,r[c+6],15,-1560198380),i=f(i,s,u,a,r[c+13],21,1309151649),a=f(a,i,s,u,r[c+4],6,-145523070),u=f(u,a,i,s,r[c+11],10,-1120210379),s=f(s,u,a,i,r[c+2],15,718787259),i=f(i,s,u,a,r[c+9],21,-343485551),a=a+p>>>0,i=i+g>>>0,s=s+m>>>0,u=u+y>>>0}return x.endian([a,i,s,u])})._ff=function(t,e,n,r,o,a,i){var s=t+(e&n|~e&r)+(o>>>0)+i;return(s<<a|s>>>32-a)+e},O._gg=function(t,e,n,r,o,a,i){var s=t+(e&r|n&~r)+(o>>>0)+i;return(s<<a|s>>>32-a)+e},O._hh=function(t,e,n,r,o,a,i){var s=t+(e^n^r)+(o>>>0)+i;return(s<<a|s>>>32-a)+e},O._ii=function(t,e,n,r,o,a,i){var s=t+(n^(e|~r))+(o>>>0)+i;return(s<<a|s>>>32-a)+e},O._blocksize=16,O._digestsize=16,e.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=x.wordsToBytes(O(t,e));return e&&e.asBytes?n:e&&e.asString?D.bytesToString(n):x.bytesToHex(n)}})),t("10",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L;x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&L.rotl(t,8)|4278255360&L.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=L.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var r=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?e.push(x.charAt(r>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,r=0;n<t.length;r=++n%4)0!=r&&e.push((x.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|x.indexOf(t.charAt(n))>>>6-2*r);return e}},e.exports=L})),t("11",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x={utf8:{stringToBytes:function(t){return x.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(x.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};e.exports=x})),t("12",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){function x(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */e.exports=function(t){return null!=t&&(x(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&x(t.slice(0,0))}(t)||!!t._isBuffer)}})),t("13",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=/^\[object .+?Constructor\]$/,o=/^(?:0|[1-9]\d*)$/,a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var i="object"==("undefined"==typeof global?"undefined":e(global))&&global&&global.Object===Object&&global,s="object"==(void 0===c?"undefined":e(c))&&c&&c.Object===Object&&c,u=i||s||Function("return this")(),l="object"==e(n)&&n&&!n.nodeType&&n,d=l&&"object"==e(t)&&t&&!t.nodeType&&t,h=d&&d.exports===l,f=h&&i.process,p=function(){try{return d&&d.require&&d.require("util").types||f&&f.binding&&f.binding("util")}catch(t){}}(),g=p&&p.isTypedArray;function m(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var y,v,b,w=Array.prototype,_=Function.prototype,S=Object.prototype,x=u["__core-js_shared__"],L=_.toString,T=S.hasOwnProperty,D=(y=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",O=S.toString,j=L.call(Object),k=RegExp("^"+L.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=h?u.Buffer:void 0,C=u.Symbol,M=u.Uint8Array,A=(R&&R.allocUnsafe,v=Object.getPrototypeOf,b=Object,function(t){return v(b(t))}),I=Object.create,P=S.propertyIsEnumerable,E=w.splice,B=C?C.toStringTag:void 0,U=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$=R?R.isBuffer:void 0,q=Math.max,F=Date.now,H=rt(u,"Map"),V=rt(Object,"create"),N=function(){function t(){}return function(e){if(!gt(e))return{};if(I)return I(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function G(t){var e=this.__data__=new K(t);this.size=e.size}function W(t,e,n){(void 0!==n&&!ut(t[e],n)||void 0===n&&!(e in t))&&Z(t,e,n)}function Y(t,e,n){var r=t[e];T.call(t,e)&&ut(r,n)&&(void 0!==n||e in t)||Z(t,e,n)}function J(t,e){for(var n=t.length;n--;)if(ut(t[n][0],e))return n;return-1}function Z(t,e,n){"__proto__"==e&&U?U(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}z.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},z.prototype.get=function(t){var e=this.__data__;if(V){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(e,t)?e[t]:void 0},z.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:T.call(e,t)},z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=V&&void 0===e?"__lodash_hash_undefined__":e,this},K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(t){var e=this.__data__,n=J(e,t);return!(n<0||(n==e.length-1?e.pop():E.call(e,n,1),--this.size,0))},K.prototype.get=function(t){var e=this.__data__,n=J(e,t);return n<0?void 0:e[n][1]},K.prototype.has=function(t){return J(this.__data__,t)>-1},K.prototype.set=function(t,e){var n=this.__data__,r=J(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Q.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(H||K),string:new z}},Q.prototype.delete=function(t){var e=nt(this,t).delete(t);return this.size-=e?1:0,e},Q.prototype.get=function(t){return nt(this,t).get(t)},Q.prototype.has=function(t){return nt(this,t).has(t)},Q.prototype.set=function(t,e){var n=nt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},G.prototype.clear=function(){this.__data__=new K,this.size=0},G.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},G.prototype.get=function(t){return this.__data__.get(t)},G.prototype.has=function(t){return this.__data__.has(t)},G.prototype.set=function(t,e){var n=this.__data__;if(n instanceof K){var r=n.__data__;if(!H||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Q(r)}return n.set(t,e),this.size=n.size,this};function X(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":B&&B in Object(t)?function(t){var e=T.call(t,B),n=t[B];try{t[B]=void 0;var r=!0}catch(t){}var o=O.call(t);return r&&(e?t[B]=n:delete t[B]),o}(t):function(t){return O.call(t)}(t)}function tt(t){return mt(t)&&"[object Arguments]"==X(t)}function et(t,e,n,r,o){t!==e&&function(t,e,n){for(var r=-1,o=Object(t),a=n(t),i=a.length;i--;){var s=a[++r];if(!1===e(o[s],s,o))break}}(e,(function(a,i){if(o||(o=new G),gt(a))!function(t,e,n,r,o,a,i){var s=it(t,n),u=it(e,n),c=i.get(u);if(c)W(t,n,c);else{var l,d,h,f,p,g=a?a(s,u,n+"",t,e,i):void 0,m=void 0===g;if(m){var y=lt(u),v=!y&&ht(u),b=!y&&!v&&yt(u);g=u,y||v||b?lt(s)?g=s:mt(p=s)&&dt(p)?g=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(s):v?(m=!1,g=function(t,e){return t.slice()}(u)):b?(m=!1,f=new(h=(l=u).buffer).constructor(h.byteLength),new M(f).set(new M(h)),d=f,g=new l.constructor(d,l.byteOffset,l.length)):g=[]:function(t){if(!mt(t)||"[object Object]"!=X(t))return!1;var e=A(t);if(null===e)return!0;var n=T.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&L.call(n)==j}(u)||ct(u)?(g=s,ct(s)?g=function(t){return function(t,e,n,r){var o=!n;n||(n={});for(var a=-1,i=e.length;++a<i;){var s=e[a],u=void 0;void 0===u&&(u=t[s]),o?Z(n,s,u):Y(n,s,u)}return n}(t,vt(t))}(s):gt(s)&&!ft(s)||(g=function(t){return"function"!=typeof t.constructor||at(t)?{}:N(A(t))}(u))):m=!1}m&&(i.set(u,g),o(g,u,r,a,i),i.delete(u)),W(t,n,g)}}(t,e,i,n,et,r,o);else{var s=r?r(it(t,i),a,i+"",t,e,o):void 0;void 0===s&&(s=a),W(t,i,s)}}),vt)}function nt(t,n){var r,o,a=t.__data__;return("string"==(o=void 0===(r=n)?"undefined":e(r))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?a["string"==typeof n?"string":"hash"]:a.map}function rt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!gt(t)||function(t){return!!D&&D in t}(t))&&(ft(t)?k:r).test(function(t){if(null!=t){try{return L.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(n)?n:void 0}function ot(t,n){var r=void 0===t?"undefined":e(t);return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&o.test(t))&&t>-1&&t%1==0&&t<n}function at(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||S)}function it(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var st=function(t){var e=0,n=0;return function(){var r=F(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(U?function(t,e){return U(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:_t);function ut(t,e){return t===e||t!=t&&e!=e}var ct=tt(function(){return arguments}())?tt:function(t){return mt(t)&&T.call(t,"callee")&&!P.call(t,"callee")},lt=Array.isArray;function dt(t){return null!=t&&pt(t.length)&&!ft(t)}var ht=$||function(){return!1};function ft(t){if(!gt(t))return!1;var e=X(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function gt(t){var n=void 0===t?"undefined":e(t);return null!=t&&("object"==n||"function"==n)}function mt(t){return null!=t&&"object"==(void 0===t?"undefined":e(t))}var yt=g?function(t){return function(e){return t(e)}}(g):function(t){return mt(t)&&pt(t.length)&&!!a[X(t)]};function vt(t){return dt(t)?function(t,e){var n=lt(t),r=!n&&ct(t),o=!n&&!r&&ht(t),a=!n&&!r&&!o&&yt(t),i=n||r||o||a,s=i?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!T.call(t,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ot(c,u))||s.push(c);return s}(t,!0):function(t){if(!gt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=at(t),n=[];for(var r in t)("constructor"!=r||!e&&T.call(t,r))&&n.push(r);return n}(t)}var bt,wt=(bt=function(t,e,n){et(t,e,n)},function(t,e){return st(function(t,e,n){return e=q(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=q(r.length-e,0),i=Array(a);++o<a;)i[o]=r[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=r[o];return s[e]=n(i),m(t,this,s)}}(t,e,_t),t+"")}((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=bt.length>3&&"function"==typeof a?(o--,a):void 0,i&&function(t,n,r){if(!gt(r))return!1;var o=void 0===n?"undefined":e(n);return!!("number"==o?dt(r)&&ot(n,r.length):"string"==o&&n in r)&&ut(r[n],t)}(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var s=n[r];s&&bt(t,s,r)}return t})));function _t(t){return t}t.exports=wt}).call(this,t(3)(e))})),t("14",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0});var x=o.getSystemInfoSync();n.getRequestUrl=function(t,e){var n,r=function(t){return{host_os:x.platform,host_os_ver:x.system,host_app:x.host,host_app_ver:x.version,sdk_ver:x.swanNativeVersion,swan_ver:x.SDKVersion,network:"",bundle_Id:t,source:"severless-component",timestamp:"",service:"search.query"}}(e);return r.timestamp=(new Date).getTime(),t+"?"+(n=r,Object.keys(n).reduce((function(t,e){return t.push(encodeURIComponent(e)+"="+n[e]),t}),[]).join("&"))}})),t("15",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0}),n.request=void 0;var x=t(16);Object.defineProperty(n,"request",{enumerable:!0,get:function(){return x.request}});var L="https://minipro.baidu.com";n.default={DOSEARCH:L+"/ma/call",LEADS:(0,x.getRequestUrl)(L+"/ma/call")}})),t("16",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Object.defineProperty(n,"__esModule",{value:!0}),n.request=n.getRequestUrl=void 0;var x=(0,t(4).promisifyAll)(o),L=o.getSystemInfoSync();n.getRequestUrl=function(t,e){var n,r=function(t){return{host_os:L.platform,host_os_ver:L.system,host_app:L.host,host_app_ver:L.version,sdk_ver:L.swanNativeVersion,swan_ver:L.SDKVersion,network:"",bundle_Id:t,source:"severless-component",timestamp:""}}(e);return r.timestamp=(new Date).getTime(),t+"?"+(n=r,Object.keys(n).reduce((function(t,e){return t.push(encodeURIComponent(e)+"="+n[e]),t}),[]).join("&"))},n.request=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=e.isUseBdtls,o=void 0!==r&&r;o&&(n.ext={serviceId:"component-codeless",enableBdtls:!0,customHost:"https://minipro.baidu.com"});var a=Object.assign(n,t);return x.request(a)}})),t("18",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L=(x=t(5))&&x.__esModule?x:{default:x},T=o.getEnvInfoSync(),D=T.appKey,O=T.appName;Component({options:{addGlobalClass:!0},properties:{mode:{type:String,value:"modal"},showModal:{type:Boolean,value:!0},theme:{type:String,value:"default"},solutionId:{type:String},defaultValues:{type:Array,value:[]}},attached:function(){var t=L.default.ubcLogger,e=t.init,n=t.sendLog;this.sendLog=n,e({swan_name:"swan-eshop",from:"swan-eshop",page:"leads-components-sales-leads"}),this.sendLog({app_key:D,app_name:O,component_info:{action:"sales_leads_pv"}},"show")},data:{showVerify:!1,sessionData:{}},messages:{leadsSubmitHandler:function(t){var e=t.value,n=e.resData,r=e.phone;this.triggerEvent("leadssubmithandler",n),0==+n.errno&&"verify"===n.data.submission_check_result&&this.setData({showVerify:!0,sessionData:n.data,phone:r})}},methods:{closeVerify:function(){this.setData({showVerify:!1})},goBackForm:function(){var t=this.data,e=t.mode,n=t.showModal;this.setData({showVerify:!1,showModal:"modal"===e||n})}}})})),t("20",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({properties:{history:{type:Array},removeItemIndex:{type:Number},showHistory:{type:Boolean}},data:{},methods:{removeAllHistoryTap:function(){this.triggerEvent("removeAllHistoryTap")},removeAllHistory:function(){this.triggerEvent("removeAllHistory")},removeHistoryDone:function(){this.triggerEvent("removeHistoryDone")},historyItemLongTap:function(t){var e=t.currentTarget.dataset.index;this.triggerEvent("historyItemLongTap",{index:e})},historyItemTap:function(t){var e=t.currentTarget.dataset,n=e.index,r=e.value;this.triggerEvent("historyItemTap",{index:n,value:r})}}})})),t("22",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({properties:{recommendConfResult:{type:Object},recommend:{type:Array},hotSearchSync:{type:Boolean}},methods:{recommendTap:function(t){var e=t.currentTarget.dataset.value;this.triggerEvent("recommendTap",{value:e})},updateHotSearch:function(t){this.triggerEvent("updateHotSearch")}}})})),t("24",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({properties:{resultTab:{type:Array},sortType:{type:String},showEmptyState:{type:Boolean},status:{type:String,value:"searching"},resultListTop:{type:Number},resultListLeft:{type:Array,value:[]},resultListRight:{type:Array,value:[]}},options:{addGlobalClass:!0},methods:{resultModeChange:function(t){var e=t.currentTarget.dataset,n=e.mode,r=e.sortKey;this.triggerEvent("resultModeChange",{mode:n,sortKey:r})},onErrReload:function(){this.triggerEvent("onErrReload")},scrollToLower:function(){this.triggerEvent("scrollToLower")},goToShop:function(t){var e=t.currentTarget.dataset,n=e.linkkey,r=e.linkpath;this.triggerEvent("goToShop",{linkkey:n,linkpath:r})}}})})),t("26",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({properties:{searchBoxConfResult:{type:Object},searchMode:{type:String,value:"normal"},searchQuery:{type:String,value:"",observer:function(t){this.setData({inputValue:t})}},searchBtnReady:{type:Boolean,value:!1},showInputClear:{type:Boolean,value:!1},showSearchBtn:{type:Boolean},themeColor:{type:String,value:"#fd503e"}},methods:{handleInput:function(t){var e=t.detail.value;this.triggerEvent("handleInput",{value:e})},handleChange:function(t){var e=this,n=t.detail.value;this.setData({inputValue:n},(function(){e.triggerEvent("inputChange",{value:n}),e.showInputClearIcon(n)}))},handleFocus:function(t){var e=t.detail.value;this.showInputClearIcon(e),this.setData({showSearchBtn:!0}),this.triggerEvent("inputFocus")},handleBlur:function(){this.setData({showInputClear:!1}),this.triggerEvent("inputBlur")},clearInput:function(){var t=this;this.setData({inputValue:"",showInputClear:!1},(function(){t.triggerEvent("clearInput")})),o.nextTick((function(){t.setData({"searchBoxConfResult.autoFocus":!0})}))},doSearch:function(){this.setData({showSearchBtn:!1}),this.triggerEvent("searchboxdosearch",this.data.inputValue||this.data.searchQuery)},showInputClearIcon:function(t){if(t.length||this.data.inputValue)this.setData({showInputClear:!0,searchBtnReady:!0});else{if(this.data.searchBtnReady)return;this.setData({showInputClear:!1,searchBtnReady:!1})}}}})})),t("28",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({options:{addGlobalClass:!0},properties:{theme:{type:String,value:"default"},solutionId:{type:String},defaultValues:{type:Array,value:[]},showModal:{type:Boolean,value:!0}},methods:{modalHander:function(t){var e=t.detail;this.setData({showModal:e})}}})})),t("30",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x=t(15),L=O(x),T=O(t(31)),D=O(t(5));function O(t){return t&&t.__esModule?t:{default:t}}function j(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var k=o.getEnvInfoSync(),R=k.appKey,C=k.appName,M={name:"input",phone:"auto-get-phone-number",email:"input",number:"input",city:"area",date:"date",datetime:"time",input:"textarea",linkage:"selector",multiselect:"multi-select",radio:"radio",checkbox:"checkbox",idcard:"input"};Component({options:{addGlobalClass:!0},properties:{theme:{type:String,value:"default"},solutionId:{type:String},defaultValues:{type:Array,value:[]},showClose:{type:Boolean,value:!1}},data:{isAgreed:!1,errorMap:{},detailAddress:""},checkAllPassed:!0,requiredMap:{},rulesMap:{},encryptInputData:[],phoneData:{},attached:function(){this.fetchData();var t=D.default.ubcLogger,e=t.init,n=t.sendLog;this.sendLog=n,e({swan_name:"swan-eshop",from:"swan-eshop",page:"leads-components-form"}),this.sendLog({app_key:R,app_name:C,component_info:{action:"leads_form_pv"}},"show")},methods:{fetchData:function(){var t=this;(0,x.request)({url:L.default.LEADS+"&service=solution.get&solution_id="+this.data.solutionId},{isUseBdtls:!1}).then((function(e){var n=e.data,r=n.data,o=n.errno,a=n.errmsg;if(0!=+o)return t.showLeadsToast(a);var i=r.controls,s=r.title,u=r.rules;t.rulesMap=u,t.handleFormData(i),t.setData({loaded:!0,title:s||r.solution_name,submitText:r.submit_button_label})})).catch((function(e){t.showLeadsToast(JSON.stringify(e))}))},handleFormData:function(t){var e=this,n=this.data.defaultValues;t=t.map((function(t,r){var o=t,a=o.type,i=o.options,s=o.label,u=o.code,c=o.required;switch(t.formType=M[a],"[object Array]"===Object.prototype.toString.call(n)?t.value=n[r]:"[object Object]"===Object.prototype.toString.call(n)&&(t.value=n[a]),t.formType){case"input":t.inputType=["number","idcard"].includes(t.type)?"number":"text";break;case"selector":t.options=i&&i.slice(1).map((function(t){return{id:t,name:t}}))||[];var l=t.options.findIndex((function(e){return e.name===t.value}));t.arrIndex=~l?l:0;break;case"radio":t.options=i.map((function(e,n){return{value:e,text:e,checked:t.value?t.value===e:!n}}));var d=t.options.find((function(t){return t.checked}));d?t.value||(t.value=d.value):(t.options[0].checked=!0,t.value=t.options[0].value);break;case"checkbox":t.options=i.map((function(e){return{value:e,text:e,checked:t.value&&t.value.includes(e)}}));break;case"date":t.value&&(dayjsDate=(0,T.default)(t.value).format("YYYY-MM-DD"),t.date="Invalid Date"!==dayjsDate?dayjsDate:"");break;case"time":t.value&&(dayjsTime=(0,T.default)("2021-01-01 "+t.value).format("HH:mm"),t.time="Invalid Date"!==dayjsTime?dayjsTime:"");break;case"multi-select":(t={code:t.code,label:t.label,options:t.options,placeholder:t.placeholder,required:t.required,type:t.type,formType:t.formType,value:t.value}).options=i.map((function(e){return{value:e,text:e,checked:t.value&&t.value.split(",").includes(e)}}));break;case"area":t={address:t.address,code:t.code,label:t.label,options:t.options,placeholder:t.placeholder,required:t.required,type:t.type,formType:t.formType,value:t.value}}return e.requiredMap[u]={required:c,label:s,type:a,options:t.options},t})),this.setData("formList",t)},formSubmit:function(t){if(!this.data.submitFlag){this.sendLog({app_key:R,app_name:C,component_info:{action:"leads_form_submit_button_touch"}},"click"),this.setData("submitFlag",!0);var e=t.detail.value,n=this.data,r=n.solutionId,o=n.isAgreed,a=n.detailAddress,i={solution_id:r+"",input:[],encrypt_input:[]};for(var s in this.requiredMap)if(s){var u=this.requiredMap[s],c=u.required,l=u.label,d=u.type,h=u.options,f=e[s];switch(d){case"linkage":f=h[f].id;break;case"checkbox":Array.isArray(f)&&(f=f.join(","));break;case"city":a&&(f=f+" "+a);break;case"date":case"datetime":f=f||""}var p=this.checkRules({required:c,label:l,value:f,type:d});i.input.push({code:s,value:f,type:d}),p||(this.checkAllPassed=!1,this.setData({submitFlag:!1}))}this.checkAllPassed?(o&&(i.encrypt_input=this.encryptInputData),this.postSubmitData(i)):this.checkAllPassed=!0}},blurHandler:function(t){var e=t.currentTarget,n=t.detail,r=t.phoneEvent,o=r?r.currentTarget.dataset.item:e.dataset.item,a=o.code,i=o.label,s=o.type,u=this.requiredMap[a].required,c=r?r.detail.value:n.value;r&&(this.phoneData={main_phone:c}),this.checkRules({required:u,value:c,type:s,label:i})},checkRules:function(t){var e=t.required,n=t.value,r=t.label,o=t.type,a="",i=this.rulesMap[o]&&this.rulesMap[o][0];return e&&!n?a="请输入您的"+r:i&&n&&(i.pattern&&!RegExp(i.pattern).test(n)?a=i.message:i.max&&n.length>i.max?a="最大长度为"+i.max:i.min&&n.length<i.min&&(a="最小长度为"+i.min)),a?(this.showLeadsToast(a),this.setData("errorMap."+o,!0),!1):(this.setData("errorMap."+o,!1),!0)},changeHandler:function(t){var e=t.currentTarget.dataset,n=e.index,r=e.formType,o="value",a=t.detail.value;switch(r){case"date":case"time":o=r;break;case"selector":o="arrIndex"}this.setData("formList["+n+"]."+o,a)},postSubmitData:function(t){var e=this;(0,x.request)({url:L.default.LEADS+"&service=solution.submit",data:t,method:"POST"},{isUseBdtls:!1}).then((function(t){var n=t.data,r=n.errmsg,o=n.errno,a=n.data;if(0==+o){var i=a.verification&&a.verification.type,s=a.submission_check_result;if("succ"===s)e.showLeadsToast("提交成功");else{if("reject"===s){var u=a.submission_reject_message;return void e.showLeadsToast(u)}"verify"===s&&"sms"===i&&e.showLeadsToast("验证码发送成功")}e.triggerEvent("leadsmodal",!1),e.dispatch("leadsSubmitHandler",{resData:t.data,phone:e.phoneData})}else e.showLeadsToast(r);e.setData("submitFlag",!1)})).catch((function(t){e.showLeadsToast(JSON.stringify(t)),e.setData("submitFlag",!1)}))},closeHandler:function(){this.triggerEvent("leadsmodal",!1)},showLeadsToast:function(t){o.showToast({title:t,icon:"none",duration:2e3})},encryptDataHandler:function(t){this.encryptInputData=[].concat(j(this.encryptInputData),j(t.detail)),this.phoneData={encrypt_data:t.detail[0].encrypt_data}},changeIsAgreedHandler:function(t){this.setData({isAgreed:t.detail})},changeDetailAddressHandler:function(t){this.setData({detailAddress:t.detail})}}})})),t("31",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r,o){"object"==T(n)&&void 0!==e?e.exports=o():void 0===(L="function"==typeof(x=o)?x.call(n,t,n,e):x)||(e.exports=L)}(0,(function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",o="minute",a="hour",i="day",s="week",u="month",c="quarter",l="year",d="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,u),a=n-o<0,i=e.clone().add(r+(a?-1:1),u);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:l,w:s,d:i,D:d,h:a,m:o,s:r,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",b={};b[v]=g;var w=function(t){return t instanceof L},_=function t(e,n,r){var o;if(!e)return v;if("string"==typeof e){var a=e.toLowerCase();b[a]&&(o=a),n&&(b[a]=n,o=a);var i=e.split("-");if(!o&&i.length>1)return t(i[0])}else{var s=e.name;b[s]=e,o=s}return!r&&o&&(v=o),o||!r&&v},S=function(t,e){if(w(t))return t.clone();var n="object"==(void 0===e?"undefined":T(e))?e:{};return n.date=t,n.args=arguments,new L(n)},x=y;x.l=_,x.i=w,x.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var L=function(){function g(t){this.$L=_(t.locale,null,!0),this.parse(t)}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(f);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return x},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return S(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<S(t)},m.$g=function(t,e,n){return x.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,c=!!x.u(e)||e,h=x.p(t),f=function(t,e){var r=x.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?r:r.endOf(i)},p=function(t,e){return x.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case l:return c?f(1,0):f(31,11);case u:return c?f(1,m):f(0,m+1);case s:var b=this.$locale().weekStart||0,w=(g<b?g+7:g)-b;return f(c?y-w:y+(6-w),m);case i:case d:return p(v+"Hours",0);case a:return p(v+"Minutes",1);case o:return p(v+"Seconds",2);case r:return p(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var s,c=x.p(t),h="set"+(this.$u?"UTC":""),f=(s={},s[i]=h+"Date",s[d]=h+"Date",s[u]=h+"Month",s[l]=h+"FullYear",s[a]=h+"Hours",s[o]=h+"Minutes",s[r]=h+"Seconds",s[n]=h+"Milliseconds",s)[c],p=c===i?this.$D+(e-this.$W):e;if(c===u||c===l){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[x.p(t)]()},m.add=function(n,c){var d,h=this;n=Number(n);var f=x.p(c),p=function(t){var e=S(h);return x.w(e.date(e.date()+Math.round(t*n)),h)};if(f===u)return this.set(u,this.$M+n);if(f===l)return this.set(l,this.$y+n);if(f===i)return p(1);if(f===s)return p(7);var g=(d={},d[o]=t,d[a]=e,d[r]=1e3,d)[f]||1,m=this.$d.getTime()+n*g;return x.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=x.z(this),a=this.$H,i=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=function(t,n,o,a){return t&&(t[n]||t(e,r))||o[n].substr(0,a)},d=function(t){return x.s(a%12||12,t,"0")},f=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:x.s(s+1,2,"0"),MMM:l(n.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:x.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:x.s(i,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:o};return r.replace(p,(function(t,e){return e||g[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,d,h){var f,p=x.p(d),g=S(n),m=(g.utcOffset()-this.utcOffset())*t,y=this-g,v=x.m(this,g);return v=(f={},f[l]=v/12,f[u]=v,f[c]=v/3,f[s]=(y-m)/6048e5,f[i]=(y-m)/864e5,f[a]=y/e,f[o]=y/t,f[r]=y/1e3,f)[p]||y,h?v:x.a(v)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=_(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return x.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),D=L.prototype;return S.prototype=D,[["$ms",n],["$s",r],["$m",o],["$H",a],["$W",i],["$M",u],["$y",l],["$D",d]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,L,S),t.$i=!0),S},S.locale=_,S.isDayjs=w,S.unix=function(t){return S(1e3*t)},S.en=b[v],S.Ls=b,S.p={},S}))})),t("33",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L=t(15),T=(x=L)&&x.__esModule?x:{default:x},D={sms:/^\d{6}$/,picture:/^[a-zA-Z0-9]{4}$/};Component({options:{addGlobalClass:!0},properties:{data:{type:Object,value:{}},phone:{type:Object,value:{}}},data:{verifyType:"",verifyCode:"",errorMessage:"",submitFlag:!1,buttonStatus:{disabled:!0,message:"60"}},intervalId:null,lifetimes:{attached:function(){var t=this.data.data,e=t&&t.verification.type||"sms";this.setData("verifyType",e),"sms"===e&&this.setSendVerifyBtnStatus()},detached:function(){this.intervalId&&clearInterval(this.intervalId)}},methods:{submitVerifyCode:function(){var t=this.data,e=t.verifyCode,n=t.verifyType;D[n].test(e)?(this.setData({errorMessage:""}),this.postSubmitVerifyCode(e)):this.setData({errorMessage:"验证码格式错误"})},postSubmitVerifyCode:function(t){var e=this;if(!this.data.submitFlag){var n=this.data.data,r=n.verification,o={session_code:n.session_code+"",verification_ordinal:r&&r.verification_ordinal+"",checkVerificationReq:{answer:t}};this.setData("submitFlag",!0),(0,L.request)({url:T.default.LEADS+"&service=solution.verficationsubmit",data:o,method:"POST"},{isUseBdtls:!1}).then((function(t){var n=t.data,r=n.errmsg,o=n.errno,a=n.data;if(e.setData("submitFlag",!1),0==+o){var i=a.pass;e.showLeadsToast(i?"表单提交成功":"校验不通过"),i&&e.triggerEvent("close")}else e.showLeadsToast(r)})).catch((function(t){e.showLeadsToast(JSON.stringify(t)),e.setData("submitFlag",!1)}))}},verficationCreate:function(){var t=this,e=this.data,n=e.data,r=e.phone,o=e.verifyType,a=e.buttonStatus,i={session_code:n.session_code,_embedded:r};"sms"===o&&a.disabled||(0,L.request)({url:T.default.LEADS+"&service=solution.verficationcreate",data:i,method:"POST"},{isUseBdtls:!1}).then((function(e){var n=e.data,r=n.errmsg,a=n.errno,i=n.data;0==+a?(t.setData({data:i._embedded,verifyCode:""}),"sms"===o&&(t.showLeadsToast("短信发送成功"),t.setSendVerifyBtnStatus())):t.showLeadsToast(r)})).catch((function(e){t.showLeadsToast(JSON.stringify(e))}))},closeVerify:function(t){this.triggerEvent("close",t)},goBackForm:function(t){this.triggerEvent("back",t)},inputHandler:function(t){var e=t.detail.value;this.setData({verifyCode:e})},setSendVerifyBtnStatus:function(){var t=this;this.setData({buttonStatus:{disabled:!0,message:60}}),this.intervalId=setInterval((function(){var e=t.data.buttonStatus.message;t.setData({buttonStatus:{disabled:!!e,message:e?e-1:"发送验证码"}}),e||(clearInterval(t.intervalId),t.intervalId=null)}),1e3)},showLeadsToast:function(t){o.showToast({title:t,icon:"none",duration:2e3})}}})})),t("35",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L,T,D=t(15),O=(x=D)&&x.__esModule?x:{default:x},j=o.getEnvInfoSync().appKey;Component({options:{addGlobalClass:!0},properties:{item:{type:Object},isAgreed:{type:Boolean,observer:function(t){this.triggerEvent("changeisagreed",t)}},error:{type:Boolean,value:!1}},encryptInputData:[],methods:{blurHandler:function(t){this.triggerEvent("leadsblur",{phoneEvent:t})},getLoginCode:function(){return new Promise((function(t,e){o.getLoginCode({success:function(e){console.log("getLoginCode success",e),t(e)},fail:function(t){console.log("getLoginCode fail",t),e(t)}})}))},getPhoneNumber:(L=regeneratorRuntime.mark((function t(e){var n,r,o,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.detail,r=n.iv,!(o=n.encryptedData)){t.next=8;break}return t.next=4,this.getLoginCode();case 4:a=t.sent,this.postDecryptPhone({encryptedData:o,loginCode:a.code,iv:r,code:this.data.item.code}),t.next=12;break;case 8:i=this.data.item,(s=i&&i.value)&&this.triggerEvent("leadsblur",{phoneEvent:{currentTarget:{dataset:{item:i}},detail:{value:s}}}),this.setData({isRefused:!0});case 12:case"end":return t.stop()}}),t,this)})),T=function(){var t=L.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then((function(t){r("next",t)}),(function(t){r("throw",t)}));e(s)}("next")}))},function(t){return T.apply(this,arguments)}),postDecryptPhone:function(t){var e=this,n=t.encryptedData,r=t.loginCode,o=t.code,a=t.iv;(0,D.request)({url:O.default.LEADS+"&service=solution.decryptmobile",data:{app_key:j,encrypt_data:n,code:r,iv:a},method:"POST"},{isUseBdtls:!1}).then((function(t){var n=t.data,r=n.data,a=n.errmsg;if(0!=+n.errno)return e.showLeadsToast(a);e.setData({isAgreed:!0,"item.value":r.insensitive_data}),e.encryptInputData.push({code:o,encrypt_data:r.encrypt_data,type:"phone"}),e.triggerEvent("changeencryptdata",e.encryptInputData)})).catch((function(t){e.showLeadsToast(JSON.stringify(t)),e.modifyPhoneNumber()}))},modifyPhoneNumber:function(){this.setData({isAgreed:!1,isRefused:!0}),this.setData("item.value","")},showLeadsToast:function(t){o.showToast({title:t,icon:"none",duration:2e3})}}})})),t("37",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x,L=t(4),T=t(15),D=(x=T)&&x.__esModule?x:{default:x},O=(0,L.promisifyAll)(o),j=["110000000000","120000000000","310000000000","500000000000","710000000000","810000000000","820000000000"];Component({options:{addGlobalClass:!0},properties:{item:{type:Object,value:{address:"false",code:"",label:"",options:"",placeholder:"",value:""}}},data:{showRegionSelector:!1,showSearchResult:!1,showClearIcon:!1,provinces:[],cities:[],areas:[],selectAreas:[],regionName:{},searchCity:"",searchResults:[]},regionMap:{},regionSearchListMap:{},lifetimes:{attached:function(){this.fetchRegionData()}},methods:{clearSearch:function(){this.setData({showSearchResult:!1,showClearIcon:!1,searchCity:"",searchResults:[]})},getLocation:function(){var t=this;O.getLocation().then((function(e){var n=e.province,r=e.city,o=e.district,a=n+" "+r+" "+o;t.regionSearchListMap[a]?(t.setRegionSelectorIndex(a),t.setData({"item.value":n+" "+r+" "+o})):t.showLeadsToast("地域解析失败")})).catch((function(){t.showLeadsToast("获取失败,请检查位置授权是否开启")}))},setRegionSelectorIndex:function(t){var e=this.regionMap,n=this.regionSearchListMap[t];if(n){var r=e[998]||[],o=this.getCitiesList(n[0],e),a=e[n[1]]||[];this.setData({provinces:r,cities:o,areas:a,selectAreas:[r.indexOf(n[0]),o.indexOf(n[1]),a.indexOf(n[2])]})}},selectorRegion:function(t){var e=t.currentTarget.dataset.region;this.setRegionSelectorIndex(e),this.setData({showSearchResult:!1,showRegionSelector:!1,showClearIcon:!1,searchCity:"",searchResults:[],"item.value":e})},searchInput:function(t){var e=this.regionSearchListMap,n=t.detail.value;n&&this.setData({searchResults:Object.keys(e).filter((function(t){return t.includes(n)}))})},addressBlurHandler:function(t){var e=t.detail.value;this.triggerEvent("changedetailaddress",e)},searchFocus:function(){this.setData({showSearchResult:!0,showClearIcon:!0})},switchRegionSelector:function(){this.setData({showRegionSelector:!this.data.showRegionSelector})},tapButton:function(){var t=this.data,e=t.selectAreas,n=t.regionName,r=t.provinces,o=t.cities,a=t.areas,i=n[r[e[0]]]+" "+n[o[e[1]]]+" "+n[a[e[2]]];this.setData({showRegionSelector:!1,"item.value":i})},fetchRegionData:function(){var t=this;(0,T.request)({url:D.default.LEADS+"&service=solution.districtmeta"},{isUseBdtls:!1}).then((function(e){var n=e.data.data,r=n.region_map,o=n.region_name,a=n.errors;if(a)return t.showLeadsToast(a);var i=t.handleRegionMap(r),s=t.getRegionSearchListMap(i,o);t.setData({regionName:o}),t.regionMap=i,t.regionSearchListMap=s;var u=t.data.item.value;u&&s[u]?t.setRegionSelectorIndex(u):t.changeAreas([0,0,0])})).catch((function(e){t.showLeadsToast(JSON.stringify(e))}))},handleRegionMap:function(t){var e=this.data.item.options;if(!e)return t;var n={};e.forEach((function(t){n[t]=!0}));var r={};Object.keys(t).forEach((function(e){var o=[];t[e].forEach((function(e){(n[e]||t[e]&&t[e].find((function(t){return n[t]})))&&o.push(e)})),o.length&&(r[e]=o)}));var o=t[998].filter((function(t){if(r[t])return t}));return r[998]=o,r},getRegionSearchListMap:function(t,e){var n=this,r={};return t[998].forEach((function(o){var a=e[o],i=n.getCitiesList(o,t);i?i.forEach((function(n){var i=e[n],s=t[n];s?s.forEach((function(t){var s=e[t];r[a+" "+i+" "+s]=[o,n,t]})):r[a+" "+i]=[o,n]})):r[""+a]=[o]})),r},getCitiesList:function(t,e){return j.includes(t)?[t]:e[t]},changeAreas:function(t){for(var e=this.data.selectAreas,n=this.regionMap,r=0,o=0;o<t.length;o++)if(t[o]!==e[o]){r=o;break}var a=n[998],i=a[t[0]],s=this.getCitiesList(i,n),u=n[s[t[1]]],c={};switch(e.length||(c.provinces=a),r){case 0:i=a[t[0]],s=this.getCitiesList(i,n),t[1]=0,c.cities=s;case 1:u=n[s[t[1]]]||[],t[2]=0,c.areas=u}c.selectAreas=t,this.setData(c)},bindChange:function(t){this.changeAreas(t.detail.value)},showLeadsToast:function(t){o.showToast({title:t,icon:"none",duration:2e3})}}})})),t("39",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){Component({options:{addGlobalClass:!0},properties:{item:{type:Object,value:{code:"",label:"",options:[],placeholder:"",value:""}}},data:{showMultiSelect:!1},lifetimes:{attached:function(){var t=this.data.item.value;t&&(this.multiSelectValue=t.split(","))}},multiSelectValue:[],methods:{switchMultiSelect:function(){this.setData({showMultiSelect:!this.data.showMultiSelect})},tapButton:function(){this.setData({showMultiSelect:!1,"item.value":this.multiSelectValue.join(",")})},changeHandler:function(t){var e=t.detail.value;this.multiSelectValue=e}}})})),t("41",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x=t(42).initSearchConf;e.exports={initSearchConf:x}})),t("42",(function(t,e,n,r,o,a,i,s,u,c,l,d,h,f,p,g,m,y,v,b,w,_,S){var x={pageTitle:"搜索商品",searchBoxConf:{backgroundColor:"#fff",searchBoxColor:"#fff",searchBtnTextColor:"#f7534f",placeholder:"搜索商品",border:!1,borderColor:"#f7534f",needVoice:!1},showHistory:!1,recommendConf:{show:!1,mode:"text",title:"大家都在搜"},searchMode:"normal"};e.exports={initSearchConf:function(t){var e=Object.assign(x,t);o.setStorage({key:"searchConf",data:e})}}})),window.__swanRoute="dynamicLib://swan-eshop/components/search-components/search-page/page",window.usingComponents=["components/search-components/search-page/components/history/index","components/search-components/search-page/components/recommend/index","components/search-components/search-page/components/result/index","components/search-components/search-page/components/search-box/index"],window.usingPluginComponents=[],e("1"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/sales-leads/index",window.usingComponents=["components/leads-components/modal/index","components/leads-components/form/index","components/leads-components/components/verify/index"],window.usingPluginComponents=[],e("18"),window.__swanRoute="dynamicLib://swan-eshop/components/search-components/search-page/components/history/index",window.usingComponents=[],window.usingPluginComponents=[],e("20"),window.__swanRoute="dynamicLib://swan-eshop/components/search-components/search-page/components/recommend/index",window.usingComponents=[],window.usingPluginComponents=[],e("22"),window.__swanRoute="dynamicLib://swan-eshop/components/search-components/search-page/components/result/index",window.usingComponents=[],window.usingPluginComponents=[],e("24"),window.__swanRoute="dynamicLib://swan-eshop/components/search-components/search-page/components/search-box/index",window.usingComponents=[],window.usingPluginComponents=[],e("26"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/modal/index",window.usingComponents=["components/leads-components/form/index"],window.usingPluginComponents=[],e("28"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/form/index",window.usingComponents=["components/leads-components/components/phone/index","components/leads-components/components/area/index","components/leads-components/components/multi-select/index"],window.usingPluginComponents=[],e("30"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/components/verify/index",window.usingComponents=[],window.usingPluginComponents=[],e("33"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/components/phone/index",window.usingComponents=[],window.usingPluginComponents=[],e("35"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/components/area/index",window.usingComponents=[],window.usingPluginComponents=[],e("37"),window.__swanRoute="dynamicLib://swan-eshop/components/leads-components/components/multi-select/index",window.usingComponents=[],window.usingPluginComponents=[],e("39"),n.exports=function(){return e("41")}}),{"dynamicLib://swan-eshop/search-page":"components/search-components/search-page/page","dynamicLib://swan-eshop/sales-leads":"components/leads-components/sales-leads/index"}),window.__swanRoute="dynamicLib://swan-eshop";
//# sourceMappingURL=/output/__dynamicLib__/swan-eshop/app.js.map