var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(t){t.global,t.Function;var a=t.setTimeout,n=t.setInterval;t.setImmediate,t.requestAnimationFrame,t.swanGlobal,t.jsNative,t.masterManager,t._openSourceDebugInfo,t.System,t.Bdbox_aiapps_jsbridge,t.Bdbox_android_jsbridge,t.Bdbox_android_utils,t._naFile,t._naInteraction,t._naNetwork,t._naRouter,t._naSetting,t._naStorage,t._naUtils,t.globalThis;window.define("81",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(82),S=e(83),T={},k={properties:{src:{type:String,value:""},mode:{type:String,value:"scaleToFill"},directShow:{type:Boolean,value:!1},imgClass:{type:String,value:""}},data:{status:0},created:function(){(this.properties.directShow||T[this.properties.src])&&this.setData({status:3});var e=getCurrentPages(),t=e[e.length-1];t&&(t.__lazyImage?t.__lazyImage.push(this):(t.__lazyImage=[this],r().env.register(40044,x,t),r().env.register(20012,A,t)),this.ownerPage=t)},attached:function(){P(this)},detached:function(){if(this.ownerPage&&this.ownerPage.__lazyImage){var e=this.ownerPage.__lazyImage.indexOf(this);this.ownerPage.__lazyImage.splice(e,1),this.ownerPage=null}this.checker&&(this.checker.dispose&&this.checker.dispose(),this.checker=null)},methods:{}};function x(e,t,a,n){if(n===t.page)for(var i=n.__lazyImage,o=0;o<i.length;o++){var r=i[o];r.data.status>=1||P(r,t)}}function P(e,t){e.checker||(e.checker=S.createChecker(e)),e.checker.check(t)&&e.setData({status:1})}function A(e,t,a,n){if(n===t.page){var i=n;i&&i.__lazyImage&&(r().env.unregister(40044,x,i),r().env.unregister(20012,A,i),delete i.__lazyImage)}}k.methods.onImageLoad=function(){var e=this;T[e.data.imgSrc]=1,e.setData({status:2});var t=a((function(){clearTimeout(t),e.setData({status:3})}),600)},k.methods.onImageError=function(e){r().env.notify(35001,{content:"图片加载失败:"+JSON.stringify(e),reason:"IMAGE_LOAD_ERROR",level:"error"})},C(k)})),window.define("82",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports=function(e){Component(e)}})),window.define("83",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={createChecker:function(e){return{check:function(){return!0},dispose:null}}}})),window.define("85",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(86),S=e(87),T=e(89);e(82)({externalClasses:["my-midas-class"],properties:{env:{type:String,value:T.ENV.PRODUCT},serverType:{type:String,value:T.SERVER_TYPE.DIANPING},ishttps:{type:Boolean,value:!0},sendLoadPoint:{type:Boolean,value:!1},sendReachPoint:{type:Boolean,value:!1},adidx:{type:String,value:""},feedback:{type:String,value:"",observer:"_feedbackChange"},extra:{type:String,value:""},callbackParams:{type:String,value:""},jumpLink:{type:String,value:""},paddingTop:{type:String,value:""},paddingRight:{type:String,value:""},paddingBottom:{type:String,value:""},paddingLeft:{type:String,value:""}},data:{},methods:{onClick:function(){var e=this,t=function(t){e.triggerEvent("clickend",e.data.callbackParams),e.data.jumpLink&&r().navigation.forwardTo({url:e.data.jumpLink,success:function(){e.data.sendReachPoint&&e.data.feedback&&S.sendReachPoint(e.data.feedback,e.data.adidx,e.data.extra,e.data)},fail:function(t){t&&t.errMsg&&(t.errMsg.indexOf("webview count limit exceed")>-1||t.errMsg.indexOf("page limit")>-1)&&r().navigation.redirectTo({url:e.data.jumpLink,success:function(){e.data.sendReachPoint&&e.data.feedback&&S.sendReachPoint(e.data.feedback,e.data.adidx,e.data.extra,e.data)}})}})};e.data.feedback&&S.sendClickPoint(this.data.feedback,this.data.adidx,this.data.extra,e.data).then(t).catch(t)},_feedbackChange:function(e,t){e&&e!==t&&(this.isSendImpression=!1,this.isSendLoadPoint=!1,this.data.sendLoadPoint&&!this.isSendLoadPoint&&this.data.feedback&&(this.isSendLoadPoint=!0,S.sendLoadPoint(this.data.feedback,this.data.adidx,this.data.extra,this.data)))}},created:function(){this.isSendLoadPoint=!1,this.isSendImpression=!1},attached:function(){},ready:function(){var e=this;this.data.sendLoadPoint&&!e.isSendLoadPoint&&e.data.feedback&&(e.isSendLoadPoint=!0,S.sendLoadPoint(this.data.feedback,this.data.adidx,this.data.extra,e.data));var t=e.createSelectorQuery();t.selectViewport().fields({size:!0});var n=t.select(".midas-wraper").boundingClientRect(),i=this.data.paddingTop&&parseFloat(this.data.paddingTop)||0,o=this.data.paddingRight&&parseFloat(this.data.paddingRight)||0,r=this.data.paddingBottom&&parseFloat(this.data.paddingBottom)||0,s=this.data.paddingLeft&&parseFloat(this.data.paddingLeft)||0;this.__scroll=function(){e.isSendImpression||n.exec((function(t){if(!e.isSendImpression){var a=t[0],n=t[1];if(n&&a){var d=n.top<a.height-r&&n.bottom>0+i,c=n.left<a.width-s&&n.right>0+o;d&&c&&e.data.feedback&&(e.isSendImpression=!0,S.sendImpressionPoint(e.data.feedback,e.data.adidx,e.data.extra,e.data))}}}))},C.onScroll(this.__scroll),a((function(){e.__scroll()}),10)},moved:function(){},detached:function(){C.offScroll(this.__scroll)}})})),window.define("86",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b={};function C(e,t){e&&t&&(b[e]=b[e]||[]).push(t)}function S(e,t){if(e)if(void 0!==t)for(var a=b[e]=b[e]||[],n=100;n--;){var i=a.indexOf(t);if(-1===i)break;a.splice(i,1)}else b[e]=[]}function T(e,t,a){(b[e]=b[e]||[]).forEach((function(e){e.call(a,t)}))}a.on=C,a.off=S,a.emit=T,a.onScroll=function(e){C("scroll",e)},a.offScroll=function(e){S("scroll",e)},a.triggerScroll=function(e){T("scroll",e)}})),window.define("87",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C,S=e(88),T=e(89),k=e(90),x=e(92),P=e(93);function A(e,t,a){return function(e,t,a,n){return new Promise((function(i,o){C.request({url:e,method:t,data:n,success:function(){a(),i(!0)},fail:function(e){a(),o(e)}})})).catch((function(){}))}(k.getBaseUrl(t)+"?"+e,"get",a)}function O(e,t,a){return function(e,t,a){return new Promise((function(n,i){C.request({url:e,data:{data:JSON.stringify(t)},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(){a(),n(!0)},fail:function(e){a(),i(e)}})})).catch((function(){}))}(k.getBaseUrl(t),e,a)}function E(){var e,t=[],n=S.config.maxSendSize||10;function i(){e=a((function(){o()}),200)}function o(){if(t.length){var e=t.slice(0);t=[],O(e.map((function(e){return e[0]})),e[0][1],e[0][2])}}return function(){t.length>n&&o(),e&&clearTimeout(e),t.push(arguments),i()}}C=o;var L=E(),N=E();n.sendClickPoint=function(e,t,a,n){var i=k.getJoinKey();return A(k.buildActionUrl(decodeURIComponent(e)+"&join_key="+i+(a?"&"+a:""),t,T.ACT_TYPE.CLICK_POINT,n),n,(function(){P.moduleClick(x.lxParam.clickLx.bid,{join_key:i,ad_feedback:e})}))},n.sendLoadPoint=function(e,t,a,n){var i=k.getJoinKey();return L(encodeURIComponent(k.buildActionUrl(decodeURIComponent(e)+"&join_key="+i+(a?"&"+a:""),t,T.ACT_TYPE.LOAD_POINT,n)),n,(function(){P.moduleView(x.lxParam.loadLx.bid,{join_key:i,ad_feedback:e})}))},n.sendImpressionPoint=function(e,t,a,n){var i=k.getJoinKey();return N(encodeURIComponent(k.buildActionUrl(decodeURIComponent(e)+"&join_key="+i+(a?"&"+a:""),t,T.ACT_TYPE.IMPRESSION_POINT,n)),n,(function(){P.moduleView(x.lxParam.impressionLx.bid,{join_key:i,ad_feedback:e})}))},n.sendReachPoint=function(e,t,a,n){var i=k.getJoinKey();return A(k.buildActionUrl(decodeURIComponent(e)+"&join_key="+i+(a?"&"+a:""),t,T.ACT_TYPE.REACH_POINT,n),n,(function(){P.pageView(x.lxParam.reachLX.cid,{join_key:i,ad_feedback:e})}))}})),window.define("88",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";a.defaultConfig=function(){return{maxSendSize:10}},a.config=a.defaultConfig()})),window.define("89",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";a.ENV={BETA:"beta",PPE:"ppe",PRODUCT:"product"},a.ACT_TYPE={LOAD_POINT:1,CLICK_POINT:2,IMPRESSION_POINT:3,REACH_POINT:4},a.SERVER_TYPE={DIANPING:"dianping",MEITUAN:"meituan"},a.SERVER_TYPE_URL={},a.SERVER_TYPE_URL[a.SERVER_TYPE.DIANPING]={},a.SERVER_TYPE_URL[a.SERVER_TYPE.DIANPING][a.ENV.BETA]="//m.51ping.com/adp/log",a.SERVER_TYPE_URL[a.SERVER_TYPE.DIANPING][a.ENV.PPE]="//m.51ping.com/adp/log",a.SERVER_TYPE_URL[a.SERVER_TYPE.DIANPING][a.ENV.PRODUCT]="//m.dianping.com/adp/log",a.SERVER_TYPE_URL[a.SERVER_TYPE.MEITUAN]={},a.SERVER_TYPE_URL[a.SERVER_TYPE.MEITUAN][a.ENV.BETA]="//mlog.test.meituan.com/log",a.SERVER_TYPE_URL[a.SERVER_TYPE.MEITUAN][a.ENV.PPE]="//mlog.test.meituan.com/log",a.SERVER_TYPE_URL[a.SERVER_TYPE.MEITUAN][a.ENV.PRODUCT]="//mlog.meituan.com/log"})),window.define("90",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=e(89),C=e(91);var S=/(?:^|&)act=[^?&=]*/gi,T=/(?:^|&)openid=([^?&=]*)/i,k=/(?:^|&)dpid=[^?&=]*/gi,x=/(?:^|&)adidx=[^?&=]*/gi,P="",A="",O="",E="";function L(){try{return P||(P=decodeURIComponent(C.getLocalStorageSync("_lx_sdk_lxcuid")||""))}catch(e){}}function N(){try{return A||(A=decodeURIComponent(C.getLocalStorageSync("uuid")||""))}catch(e){}}function M(){try{return O||(O=decodeURIComponent(C.getLocalStorageSync("openid")||""))}catch(e){}}function R(){try{return E||(E=decodeURIComponent(C.getLocalStorageSync("unionid")||""))}catch(e){}}var U=0;function B(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}))}function V(){return(new Date).getTime()}a.buildActionUrl=function(e,t,a,n){var i=L(),o=N(),r=M(),s="";s+="&unionid="+R()+"&adidx="+t;var d=(e=e.replace(x,"")).match(T),c=d&&d[1]||"";return r&&c.length<10&&(e.match(T)&&(e=e.replace(T,"")),s+="&openid="+r),e.replace(S,""),e=e.replace(k,""),e+="&adClient=miniapp",n.serverType===b.SERVER_TYPE.MEITUAN?e+"&act="+a+(s+="&mtdpid="+i+"&iuuid="+o)+"&t="+(new Date).valueOf()+"&i=v1_"+ ++U:e+"&act="+a+(s+="&dpid="+i)+"&t="+(new Date).valueOf()+"&i=v1_"+ ++U},a.generateMillisecondTimestamp=V,a.generateUUID=B,a.getBaseUrl=function(e){var t=e.serverType,a=e.env,n=b.SERVER_TYPE_URL[t]||b.SERVER_TYPE_URL[b.SERVER_TYPE.DIANPING];return(e.ishttps?"https:":"http:")+(n[a]||n[b.ENV.PRODUCT])},a.getJoinKey=function(){try{return B()+"-"+V()}catch(e){return""}}})),window.define("92",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";a.lxParam={loadLx:{eventName:"灵犀加载点",type:"moduleView",bid:"b_ad_load_mv"},impressionLx:{eventName:"灵犀曝光点",type:"moduleView",bid:"b_ad_launch_mv"},clickLx:{eventName:"灵犀点击点",type:"moduleClick",bid:"b_ad_launch_mc"},reachLX:{eventName:"灵犀到达点",type:"pageView",cid:"c_ad_adbase"}}})),window.define("110",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(91),C=e(93),S={wxp:o().tools.wxp,pageBase:function(e){return e},domain:{get:function(t){var a=e(111);return"dp"===t?a.DOMAIN:"mapi"===t?a.MAPI_DOMAIN:void 0}},url:o().tools.url,cache:{setStorage:function(e,t){return o().cache.setStorage(e,t)},setStorageSync:function(e,t){return o().cache.setStorageSync(e,t)},getStorage:function(e,t){return o().cache.getStorage(e)},getStorageSync:function(e,t){return b.getLocalStorageSync(e)},removeStorage:function(e,t){return b.setLocalStorageAsync(e,void 0)},removeStorageSync:function(e,t){return b.setLocalStorageSync(e,void 0)}},lxmina:{get:function(e){C.get(e)},set:function(e,t){C.set(e,t)},pageView:function(e,t,a){C.pageView(e,t,a)},pageDisappear:function(e){C.pageDisappear(e)},moduleClick:function(e,t){C.moduleClick(e,t)},moduleView:function(e,t){C.moduleView(e,t)},setTag:function(e,t){C.setTag(e,t)},getLxData:function(){return C.getLxData()},setUTM:function(e){C.setUTM(utm)},setTagWithCtx:function(e,t,a){C.setTagWithCtx(e,t,a)},getLxCUID:function(){return C.get("lxcuid")||""},getUtmSource:function(){return C.get("utm")||{}}},env:{get:function(){var e="production"===o().appConfig.ENV?"product":"production";return"dev"===e?"test":e},set:function(e){"test"===e&&(e="dev"),o().appConfig.ENV=e},trigger:function(e,t){o().env.notify("_SPARROW_EVENT_"+e,t)},on:function(e,t){getCurrentPages().length,o().env.register("_SPARROW_EVENT_"+e,t)},off:function(e,t){o().env.unregister("_SPARROW_EVENT_"+e,t)}},event:{trigger:function(e,t){o().env.notify("_SPARROW_EVENT_"+e,t)},on:function(e,t){getCurrentPages().length,o().env.register("_SPARROW_EVENT_"+e,t)},off:function(e,t){o().env.unregister("_SPARROW_EVENT_"+e,t)}},request:{mina:function(t){var a=Object.assign({},t),n=e(113);return n.spRequest(a)},custom:function(t){var a=e(113);return a.spRequest(t)},mapi:function(t){var a=e(113);return t.header||(t.header={}),t.header.isMicroMessenger=!0,a.spRequest(t)},base:function(t){return e(113).spRequest(t)}},navigation:{redirectTo:function(e){o().navigation.redirectTo(e)},navigateTo:function(e){o().navigation.forwardTo(e)},navigateBack:function(e){o().navigation.back(e)},reLaunch:function(e){"undefined"!=typeof wx&&wx.reLaunch}},geo:{getLocation:function(){return o().bridge.getLbsAsync()},getLocationSync:function(){return o().bridge.getLbsSync()||{latitude:"",longitude:""}},getLocationNoReject:function(){var e=this;return new Promise((function(t){e.getLocation().then((function(e){t(e)})).catch((function(e){t(e)}))}))},getLocationCache:function(){return this.getLocationNoReject()},getLocationCacheSync:function(){return this.getLocationSync()},getLocCity:function(){return o().bridge.getLocCityAsync()},getLocCitySync:function(){return o().bridge.getLocCitySync()},getLocCityCache:function(){return this.getLocCity()},getLocCityCacheSync:function(){return this.getLocCitySync()},getCity:function(){return o().bridge.getCityAsync()},getCitySync:function(){return o().bridge.getCitySync()},getCityCache:function(){return this.getCity()},getCityCacheSync:function(){return this.getCitySync()},setCity:function(e){e&&e&&o().bridge.setCitySync(e)}},login:e(135),pageUtil:{getCurrentPage:function(){var e={};if("function"==typeof getCurrentPages){var t=getCurrentPages();e=t[t.length-1]}return e}},appEntry:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o().init(e)}},config:{data:{},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.data=Object.assign({},S.data,e)},getConfig:function(e){return e?S.data[e]:S.data}},getSparrow:function(){return S}};t.exports=S})),window.define("111",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(112),k=e(99),x=function(){function e(){(0,C.default)(this,e),this.VERSION=k.APP_VERSION,this.DEBUG=!1,this.API=T,this.APP_NAME=k.APP_NAME,this.APPID=k.APP_ID}return(0,S.default)(e,[{key:"DOMAIN",get:function(){return k.DOMAIN}},{key:"MAPI_DOMAIN",get:function(){return k.MAPI_DOMAIN}},{key:"ENV",get:function(){return k.ENV}}]),e}();t.exports=new x})),window.define("112",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={GUESS_YOU_LIKE:"/wxmapi/index/cnxh",SHOP_INFO:"/wxmapi/shop/shopinfo",BAIDU_SHOP_INFO:"/wxmapi/shop/bdshopinfo",SHOP_OTHERS:"/wxmapi/shop/shopother",BAIDU_SHOP_OTHERS:"/wxmapi/shop/bdshopother",SHOP_REVIEW:"/ugc/bd/review/shop/shopreview",SHOP_ALBUM:"/wxmapi/shop/album",SHOP_PHOTO:"/wxmapi/shop/photo",SHOP_SEARCH:"/wxmapi/search",BAIDU_SHOP_SEARCH:"/wxmapi/baidu/search",SEARCH_CATEGORY:"/wxmapi/search/searchcategory",SEARCH_CONFIG:"/wxmapi/search/searchconfig",SHOP_BRANCH_INFO:"/wxmapi/shop/shopbranchinfo",SHOP_BRANCH:"/wxmapi/shop/branch",SHOP_ID:"/shopservice/shopid",SUGGEST_KEYWORD:"/wxmapi/search/suggestkeyword",BAIDU_SUGGEST_KEYWORD:"/wxmapi/baidu/search/suggestkeyword",SEARCH_SUGGEST:"/wxmapi/search/searchsuggest",BAIDU_SEARCH_SUGGEST:"/wxmapi/baidu/search/searchsuggest",CITY_LIST:"/wxmapi/city/citylistwx",CITY_SEARCH:"/wxmapi/city/citysearch",LOCATE_CITY:"/wxmapi/city/locatecity",INDEX_CATEGORY:"/wxmapi/index/index",INDEX_POPUP:"/wxmapi/index/popup",SHOP_MAP:"/wxmapi/shop/shopmapinfo",BAIDU_SHOP_MAP:"/wxmapi/shop/bdshopmapinfo",LOGIN:"/thirdlogin/ajax/auth",PHONE_CODE:"/account/ajax/mobileVerifySend",CHECK_IMAGE_CODE:"/account/ajax/captchaShow",IMAGE_CODE:"/account/ajax/getCaptcha",VERIFY_CODE:"/account/ajax/checkCaptcha",BIND_PHONE:"/ajax/json/account/mobiledynamiclogin/98",UUID:"/wxmapi/login/wxuuid",TUAN_DETAIL:"/wxmapi/tuan/dealgroupinfo",TUAN_PREORDER:"/general/platform/mtorder/prepareorder.json",TUAN_ORDERLIST:"/wxmapi/order/tgorderlist",USER_INFO:"/wxmapi/login/userinfo",ORDER_DETAIL:"/wxmapi/order/tgorderdetailinfo",APPLY_REFUND:"/tuan/uc/applyrefund.json",SUBMIT_REFUND:"/tuan/uc/submitrefund.json",ORDER_CREATE:"/wxmapi/order/tgcreateorder",TUAN_SHOP_LIST:"/wxmapi/tuan/suitshop",MOBILE_LOGIN:"/thirdlogin/ajax/bindWxMobile",SHOP_RANK:"/wxmapi/wxnotify/rank",SEARCH_WIDGET:"/wxmapi/landing",WX_SHOP_SEARCH:"/wxmapi/wxnotify/shopsearch",M_INDEX:"/index/api/module",KTV_BOOKING:"/mapi/fun/shopdetailktvbooktable2.json2",GET_ORDER:"/wxmapi/order/uniorderlist",DELETE_ORDER:"/wxmapi/order/unideleteorder",GET_COUPON:"/wxmapi/coupon/unicouponlist",COUPON_DETAIL:"/wxmapi/coupon/unicoupondetail",PAYMENT_COUPON_DETAIL:"/wxmapi/coupon/paymentcoupondetail",WRITE_TOKEN:"/wxmapi/redirect",NAV_CONTEXT_AWARE:"/orderdish/wxm/ajax/contextAware",CANCEL_QUEUE:"/orderdish/wxm/ajax/cancelQueue",PARSE_SHOPID:"/orderdish/wxm/ajax/shopInfo",MAPI_SHOP_INFO:"/mapi/wechat/shop.bin",BAIDU_MAPI_SHOP_INFO:"/mapi/baidu/shop.bin",MTSHOP_PARSE:"/wxmapi/shop/mtshopinfo",PROMPT_SWITCH:"/wxmapi/promptapp",REVIEW_LIST:"/ugc/bd/review/reviewlist",DECRYPT_GID:"/wxmapi/login/shareinfo",ALL_CATEGORY:"/wxmapi/allcategory",INDEX_ACTIVITY:"/wxmapi/index/activity",TUAN_PROMODESK:"/pay/generalpromo/v1/getgeneralpromodesk.jsonp",ADD_GROUP_SHOP:"/wxmapi/vote/addgroupshop",QUERY_GROUP_SHOP:"/wxmapi/vote/querygroupshop",QUERY_LATEST_VOTE:"/wxmapi/vote/querylatestvote",FAVORITE_LIST:"/wxmapi/favorite/favoritelist",QUICK_SHOPID:"/wxmapi/quick/quick",QUICK_CONFIG:"/wxmapi/quick/config",BONUS_PAYMENT:"/wxmapi/bonus/payment",REMOVE_FAVORITE:"/wxmapi/favorite/remove",PIKE_PROXY:"/wxmapi/proxy/pike",PERSONAL_INFO:"/wxmapi/user/userinfo",USER_FOLLOW:"/wxmapi/user/follow",TABBAR_CONFIG:"/wxmapi/tabbar/config",MYMINI_TIP:"/wxmapi/tip/mymini",POI_SHARE_INFO:"/wxmapi/share/info",INDEX_WELFARE:"/wxmapi/index/welfare",COUPON_CENTER:"/wxmapi/couponcenter",COLLECT_COUPON:"/wxmapi/collectcoupon",USER_ACTION_UPLOAD:"/wxmapi/popup/useraction",SCENE_RECOMMEND:"/wxmapi/index/scene",MY_VOTE_LIST:"/wxmapi/vote/myvote",CREATE_VOTE:"/wxmapi/vote/createvote",QUERY_SHOP_INFO:"/wxmapi/vote/queryshop",QUERY_VOTE:"/wxmapi/vote/queryvote",DELETE_SHOP:"/wxmapi/vote/delshop",HANDEL_VOTE:"/wxmapi/vote/addvote",REC_FOLLOW_LIST:"/wxmapi/follow/recommend",FOLLOW_LIST:"/wxmapi/follow/list",SIGN_LIST:"/wxmapi/follow/simplesign",INDEX_TUAN:"/group/v1/deal/pintuans",GROUP_FEEDS:"/wxmapi/group/feeds",NEW_PROFILE_INFO:"/wxmapi/user/userinfo",NEW_PROFILE_FEED:"/wxmapi/user/feeds",QUICK_CLIPBOARD:"/wxmapi/bdquick/clipboard",APP_INFO:"/wxmapi/bdquick/appinfo"}})),window.define("113",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7)(e(26)),C=e(114),S=e(134),T=(0,b.default)({page:function(e){S(e)},get owl(){return C.owl},request:C.request,spRequest:function(e){return new Promise((function(t,a){var n=Object.assign({},e);n.callback=function(n){e.complete&&e.complete(n.serverData),0===n.errorCode?(e.success&&e.success(n.serverData),t&&t(n.serverData)):10==~~(Math.abs(n.errorCode)/100)?(e.fail&&e.fail(n.serverData),a&&a(n.serverData)):(e.success&&e.success(n.serverData),t&&t(n.serverData))},n.dispose=function(){};var i=n.url,r=i.indexOf("://"),s=i.indexOf("?",r+3);n.protocol||(n.protocol={path:i.substring(i.indexOf("/",r+3),-1===s?void 0:s)}),o().h.request(n)}))}},"owl",C.owl);t.exports=T})),window.define("135",(function(t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";t(91);var C,S={getOpenId:function(){return new Promise((function(e){var t=r().bridge.getIdSync()||{},a=t.openId,n=t.openIdPlt;a&&n?e({code:200,openId:a,openIdPlt:n}):r().bridge.getIdAsync().then((function(t,a){e({openId:t,openIdPlt:a,code:t?200:500,msg:t?"":"获取openid失败"})}))}))},getOpenIdSync:function(){return r().bridge.getIdSync().openId},getOpenIdCacheSync:function(){return r().bridge.getIdSync().openId},getOpenIdPltSync:function(){return r().bridge.getIdSync().openIdPlt},getOpenIdPltCacheSync:function(){return r().bridge.getIdSync().openIdPlt},getUnionIdCacheSync:function(){return r().bridge.getUnionIdSync()},getDPUserSync:function(){return r().bridge.getUserSync()},getDPUser:function(){return r().bridge.getUserAsync()},getUserInfo:function(){return r().bridge.getUserInfo()},parseToken:function(e){return new Promise((function(e){e({code:500,msg:"非小程序环境"})}))},niceToHave:function(){return C||(C=new Promise((function(e){e({code:500,msg:"非小程序环境"})})))},goToLoginPage:function(){r().navigation.forwardTo({url:"stlk://login"})},must:function(e){return new Promise((function(e,a){S.niceToHave().then((function(n){if(200===n.code)e(t());else{var i=function(e,a,n,o){"login"===a.pageName&&(r().env.unregister(e,i,o),i=null,r().userData.dpAccessToken?o.resolve&&o.resolve(t()):o.reject&&o.reject({code:500,msg:"登录未成功，请稍后再试"}))};r().env.register(20013,i,{resolve:e,reject:a}),S.goToLoginPage()}}))}));function t(){return{code:200,token:r().userData.dpAccessToken,openId:r().userData.wxmpEncryptedOpenId,unionId:r().userData.wxmpEncryptedUnionId}}},ensure:function(t){return new Promise((function(a,n){r().userData.dpAccessToken?a&&a({code:200,token:r().userData.dpAccessToken,openId:r().userData.wxmpEncryptedOpenId,unionId:r().userData.wxmpEncryptedUnionId}):S.must(t).then((function(t){200===t.code?a&&a(t):n&&n({code:500,msg:"登录失败了，请稍后再试"+e.message})})).catch((function(e){n&&n({code:500,msg:e.message||e.msg||"登录失败，请稍后再试"})}))}))},getTokenSync:function(){return r().bridge.getToken()},getTokenCacheSync:function(){return r().bridge.getToken()},getUnionIdSync:function(){return r().bridge.getUnionIdSync()},logout:function(){return r().bridge.loginout()}};a.exports=S})),window.define("137",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(88),C=e(86);a.triggerScroll=C.triggerScroll,a.config=function(e){b.config=Object.assign(b.config,e)};var S=function(){this[T]&&this[T].apply(this,arguments),a.triggerScroll()},T="__$$curOnPageScroll$$__",k="__$$curOnHide$$__",x=function e(){this[T]&&(this.onPageScroll=this[T],this[T]=null),this.onPageScroll===S&&(this.onPageScroll=null),this[k]&&(this[k].apply(this,arguments),this.onHide=this[k],this[k]=null),this.onHide===e&&(this.onHide=null)};a.init=function(){var e=getCurrentPages(),t=e[e.length-1];t.onPageScroll!=S&&(t[T]=t.onPageScroll,t.onPageScroll=S),t.onHide!=x&&(t[k]=t.onHide,t.onHide=x)}})),window.define("191",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(176)),k=C(e(178)),x=C(e(180)),P=C(e(26));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,x.default)(e);if(t){var i=(0,x.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,k.default)(this,a)}}var O=e(101),E=e(103),L=e(99),N=new O("/thirdlogin/user/minigram/getmobilelogin",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:(b={appName:"main_wxapp",version:L.APP_VERSION,app:-1,partner:26,platform:18},(0,P.default)(b,"app",232),(0,P.default)(b,"loginSource",0),(0,P.default)(b,"minigram_appid",L.SWAN_APP_KEY),(0,P.default)(b,"minigram_type","dp_miniapp_baidu"),(0,P.default)(b,"cx","!"),(0,P.default)(b,"thirdPart","baidu"),(0,P.default)(b,"uuid","!"),(0,P.default)(b,"openid","!"),(0,P.default)(b,"login_sdk_version",L.APP_VERSION),(0,P.default)(b,"extraFingerPrint","!"),(0,P.default)(b,"bind",!0),b),preloadCacheTime:0}),M=function(e){(0,T.default)(a,e);var t=A(a);function a(e){return(0,S.default)(this,a),e?e.domain||(e.domain=L.LOGIN_DOMAIN):e={domain:L.LOGIN_DOMAIN},t.call(this,N,e)}return a}(E);t.exports=M})),window.define("192",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(193),C=e(194);function S(e,t){!t.protocol||t.protocol.path!==b.defaultProtocol.path&&t.protocol!==C.defaultProtocol&&"/thirdlogin/user/v2/weappgetmobilelogin"!==t.protocol.path&&"/mapi/thirdlogin/user/minigram/getmobilelogin"!==t.protocol.path&&"/mapi/thirdlogin/user/minigram/inputmobilelogin"!==t.protocol.path&&"/thirdlogin/user/minigram/getmobilelogin"!==t.protocol.path&&"/thirdlogin/user/minigram/inputmobilelogin"!==t.protocol.path||t.urlWxCodeBack||(t.urlWxCodeBack=t.url,t.url=null,(0,i.getLoginCode)({success:function(e){var n=e.code;n?(t.data.hasOwnProperty("js_code")?t.data.js_code=n:t.data.code=n,t.url=t.urlWxCodeBack,o().env.notify(30001,t),delete t.urlWxCodeBack):(a(508,e),delete t.urlWxCodeBack,t.dispose())},fail:function(e){a(507,e),delete t.urlWxCodeBack,t.dispose()}}));function a(e,t){o().sc.showToast("".concat(e,": ").concat("百度","登录失败，请稍后重试"),1500,null)}}t.exports={setApp:function(e,t){e.__service_block__.__USER_WXCODE_INJECT_SERVICE_LOADED__||(e.__service_block__.__USER_WXCODE_INJECT_SERVICE_LOADED__=1,e.env.register(30003,S))},terminate:function(e){e.__service_block__.__USER_WXCODE_INJECT_SERVICE_LOADED__&&(e.__service_block__.__USER_WXCODE_INJECT_SERVICE_LOADED__=0,e.env.unregister(30003,S))}}})),window.define("193",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(101),A=e(103),O=e(99),E=new P("/thirdlogin/ajax/bindWxMobile",{domain:O.ACCOUNT_DOMIAN,method:"POST",needAccessToken:!1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:{needBind:!1,sourceType:0,cx:"!",fromSmallWX:!1,needMerge:!1},preloadCacheTime:0}),L=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),e?e.domain||(e.domain=O.ACCOUNT_DOMIAN):e={domain:O.ACCOUNT_DOMIAN},t.call(this,E,e)}return a}(A);L.defaultProtocol=E,t.exports=L})),window.define("194",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(101),A=e(103),O=new P("/thirdlogin/user/v1/weappsilentlogin",{domain:"https://accountapi.dianping.com",method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded",openidPlt:null},data:{appName:"main_wxapp",app:-1,partner:26,platform:13,loginSource:0,cx:"!",thirdPart:18,uuid:"!",openid:"!"},preloadCacheTime:0}),E=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),t.call(this,O,e)}return a}(A);t.exports=E})),window.define("208",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";e(82)({properties:{star:{type:Number,value:0},score:{type:String,value:""},textStyle:{type:Object,value:{fontSize:"26rpx",marginLeft:"6rpx"}}},data:{newScore:""},attached:function(){var e=(this.properties.score||"").split(".");this.properties.score&&(e.length>1?(this.properties.score=e[0]+"."+e[1].slice(0,1),this.setData({newScore:this.properties.score})):1==e.length&&(this.properties.score=e[0]+".0",this.setData({newScore:this.properties.score})))},methods:{onTapStar:function(e){var t=this.data.canClick,a=e.currentTarget.dataset.index;t&&(this.setData({star:a}),this.triggerEvent("tapStar",{star:a}))}}})})),window.define("228",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=o().induction.LOGAN,C=o(),S=e(99),T={"pages/detail/detail":"detail","pages/poi/poi":"detail","packages/ugc/pages/reviewlist/reviewlist":"reviewlist","packages/msdeal/pages/deal-detail/deal-detail":"reviewlist"},k="/wxmapi/bdquick/clipboard";Component({options:{multipleSlots:!0},properties:{launchUrl:{type:String},canLaunchApp:{type:Boolean,value:!0},cid:{type:String},bid:{type:String},extraData:{type:Object,value:{}}},data:{},ready:function(){var e=C.bridge.getShowOptions()&&C.bridge.getShowOptions().scene?parseInt(C.bridge.getShowOptions().scene):null,t=this.data,a=t.launchUrl,n=t.cid,i=t.bid;if(n&&i){var o="__b089i:".concat(e,":").concat(n,"-").concat(i,":bdapp"),r="__b089i_".concat(e,"_").concat(n,"-").concat(i,"_bdapp");a=-1!==a.indexOf("?")?a+"&utm="+o:a+"?utm="+o,this.setData({password:r,utm:o,launchUrl:a})}},methods:{launchAppError:function(e){b.log("<app-launch-bd> launchAppError:"+JSON.stringify(e&&e.detail?e.detail:e)),o().navigation.forwardTo({url:"/pages/downloadapp/downloadapp"})},launchAppTap:function(e){var t=getCurrentPages()||[],a=t[t.length-1],n="";a&&a.route&&(n=T[a.route]);var i=this.data,r=i.password,s=i.launchUrl;o().bridge.request({url:S.DOMAIN+k,data:{source:n,utm:r,schema:s},header:{openid:"!"}}).then((function(e){e&&200===e.statusCode&&e.data&&200===e.data.code&&e.data.data?C.sc.g.setClipboardData({data:e.data.data,success:function(e){},fail:function(e){}}):b.log("获取百度快捷导航唤起口令失败:"+JSON.stringify(e))})).catch((function(e){b.log("获取百度快捷导航唤起口令异常:"+JSON.stringify(e))})),e.extraData=this.data.extraData,this.triggerEvent("launchAppTap",e)},launchAppSucc:function(e){this.data.passwordText&&C.sc.g.setClipboardData({data:this.data.passwordText}),this.triggerEvent("launchAppSucc",e)}}})})),window.define("230",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C=e(231),S=e(82),T="b_8khz6xhm";S({properties:{reviewDish:{type:Array},lxData:{type:Object},shopId:{type:Number},shopUuid:{type:String},needLogin:{type:Boolean,value:!1}},data:{},ready:function(){},moved:function(){},detached:function(){},methods:{torecommend:function(e){C.log("跳转推荐菜");var t,a=e.currentTarget.dataset.shopid,n=e.currentTarget.dataset.shopuuid,i=e.currentTarget.dataset.id;b.moduleClick(T,this.data.lxData);var r=function(){t=n?"https://m.dianping.com/shop/".concat(n,"/dish").concat(i,"?msource=mina_food"):"https://m.dianping.com/shop/".concat(a,"/dish").concat(i,"?msource=mina_food");try{o().navigation.forwardTo({url:"/pages/webview/webview?url=".concat(encodeURIComponent(t))})}catch(e){C.log("跳转推荐菜: ".concat(JSON.stringify(e)))}};this.data.needLogin?o().bridge.login().then(r):r()}}})})),window.define("235",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C=e(82),S="b_6j5z6xfa",T="b_dianping_nova_b_0vfknrak_mv",k="b_0vfknrak",x="b_7l0ayuo7";C({behaviors:[],properties:{reviewList:{type:Object,vaule:{},observer:"_reviewListChange"},config:{type:Object,vaule:{}},reviewBid:{type:String},lxData:{type:Object},showReviewBottom:{type:Number,value:0},shopId:{type:Number},shopUuid:{type:String},pageName:{type:String},shopOptions:{type:Object},lastReview:{type:Boolean},popType:{type:String,value:""},needLogin:{type:Boolean,value:!1}},data:{imgClass:{width:"80px",height:"80px",marginRight:"5px",borderRadius:"3px"},sceneIsShare:!1,partialLength:0},ready:function(){this.updateScene()},moved:function(){},detached:function(){},pageLifetimes:{show:function(){this.updateScene()}},methods:{updateScene:function(){var e=o(),t=e.bridge.getShowOptions()&&e.bridge.getShowOptions().scene?e.bridge.getShowOptions().scene:null;this.setData({sceneIsShare:"1036"===String(t)})},_reviewListChange:function(e){var t=this;if(e){var a={width:"80px",height:"80px",marginRight:"5px",borderRadius:"3px"};1==e.length&&(a={width:"140px",height:"140px",borderRadius:"6px"});var n=e.reviewPics.length>3?3:e.reviewPics.length;this.setData({imgClass:a,partialLength:n},(function(){b.moduleView(T,t.data.lxData)}))}},previewImage:function(e){var t=this;b.moduleClick(S,this.data.lxData);var a=function(){var a=e.target.dataset.id,n=t.data.reviewList.reviewPics,r=n[a];r&&"video"==r.type?o().navigation.forwardTo({url:"".concat("/packages/video-preview/pages/index/index","?video=").concat(r.videoUrl)}):(n=n.map((function(e){return e.bigurl})),void 0!==i&&o().sc.g.previewImage({urls:n,current:n[a]}),t.triggerEvent("previewImage"))};this.data.needLogin?o().bridge.login().then(a):a()},jumpToDetail:function(e){var t=this;b.moduleClick(k,this.data.lxData);var a=function(){var a=e.currentTarget.dataset,n=a.review,i=a.url;t.gotoReviewDetail(n,i)};this.data.needLogin?o().bridge.login().then(a):a()},gotoReviewDetail:function(e,t){!t&&e&&(t=e.detailUrl||""),o().navigation.forwardTo({url:t})},navToPersonal:function(){var e=this.data,t=e.reviewList,a=e.pageName,n=e.lxData;if(void 0===i){b.moduleClick(x,n);var r=function(){var e=t.userId,n=t.anonymous,i=t.platform;if(!(n||2===i||e<=0)){var r="".concat("/packages/user/pages/personal/personal","?offuserId=").concat(e,"&msource=").concat(a);o().navigation.forwardTo({url:r})}};this.data.needLogin?o().bridge.login().then(r):r()}}}})})),window.define("237",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C=e(82),S="b_qminz5z8",T="b_4sho1bz2";C({behaviors:[],properties:{pageName:{type:String},reviewTags:{type:Array},reviewCount:{type:Number},popType:{type:String,value:""},hitTag:{type:String},moduleConfig:{type:Object,value:{headJump:!0,showHead:!0}},lxData:{type:Object},isAndroid:{type:Boolean},isList:{type:Boolean},shopOptions:{type:Object},showRightArrow:{type:Boolean,value:!0},needLogin:{type:Boolean,value:!1}},data:{},moved:function(){},detached:function(){},methods:{reviewTagAction:function(e){var t=this.data,a=t.pageName,n=t.shopOptions,i=t.lxData;if(b.moduleClick(S,i),"detail"===a){var r,s=e.currentTarget.dataset,d=s.keyword,c=s.type,u=s.hit;n&&n.shopUuid&&(r="shopUuid=".concat(n.shopUuid)),n&&n.shopId&&(r="shopId=".concat(n.shopId)),r&&o().navigation.forwardTo({url:"".concat("/packages/ugc/pages/reviewlist/reviewlist","?").concat(r,"&msource=wxappmain&hit=").concat(u,"&tagType=").concat(c,"&tag=")+encodeURIComponent(d)})}else this.triggerEvent("reviewTagAction",e)},allReviewTap:function(){var e=this,t=this.data,a=t.pageName,n=t.moduleConfig,i=n&&n.headJump;if("detail"===a||i)if(this.data.moduleConfig.gotoContact)this.triggerEvent("allReviewTap");else{b.moduleClick(T,this.data.lxData);var r=function(){var t,a=e.data.shopOptions;a&&a.shopUuid&&(t="shopUuid=".concat(a.shopUuid)),a&&a.shopId&&(t="shopId=".concat(a.shopId)),t&&o().navigation.forwardTo({url:"".concat("/packages/ugc/pages/reviewlist/reviewlist","?").concat(t,"&msource=wxappmain&tagType=").concat(1,"&tag=")+encodeURIComponent("全部")})};this.data.needLogin?o().bridge.login().then(r):r()}else this.triggerEvent("clickAllReview")}}})})),window.define("419",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(17)),S=b(e(420)),T=o().induction.LOGAN,k=e(111),x=o().induction.LX,P=o().induction.OWL,A={"pages/detail/detail":"detail","pages/poi/poi":"detail","packages/ugc/pages/reviewlist/reviewlist":"reviewlist","packages/tuan/pages/tuandetail/tuandetail":"tuan"},O="b_5h0khlcm",E=e(421);Component({properties:{launchAppUrl:{type:String,observer:"_launchAppChange"},lxData:{type:Object,observer:"_lxDataChange"},scene:{type:Number,observer:"_sceneChange"},shopOptions:{type:Object,observer:"_shopOptionChange"}},data:{appUrl:"",utmParam:"",isShow:!1,logoAppUrl:"dianping://home",appInfoDesc:"",appInfoUrl:"",platform:""},methods:{_lxDataChange:function(e){if(e&&e.pageBid){var t=o().bridge.getShowOptions(),a=t&&t.scene||"",n="__b089i:".concat(a,":").concat(e.pageBid,"-").concat(O,":bdapp");this.setData({launchUTM:"utm=".concat(n)})}},_launchAppChange:function(e,t){try{e&&this.setData({appUrl:e,utmParam:e.indexOf("?")>-1?"&":"?"})}catch(e){T.log("<open-app> 获取appurl err:"+JSON.stringify(e))}},_sceneChange:function(e,t){try{-1!==E.indexOf(parseInt(e))&&this.setData({isShow:!0})}catch(e){T.log("<open-app> 获取场景值err:"+JSON.stringify(e))}},_shopOptionChange:function(e,t){var a=this;try{if(this.data.appUrl)return;var n=e&&e.shopUuid,i=e&&e.shopId;i||n?(!i||/[0-9a-zA-Z]{16}/.test(i)?o().bridge.request({url:k.DOMAIN+k.API.QUICK_SHOPID,data:{shopUuid:n}}).then((function(e){var t;e&&200===e.data.code&&(t=e.data.shopSchema?e.data.shopSchema:e.data.shopId?"dianping://shopinfo?id=".concat(e.data.shopId):"dianping://home",a.setData({appUrl:t,utmParam:t.indexOf("?")>-1?"&":"?"}))})).catch((function(e){a.setData({appUrl:"dianping://home",utmParam:"?"}),T.log("<open-app> 获取shopid失败:"+JSON.stringify(e))})):(this.setData({appUrl:"dianping://shopinfo?id=".concat(i),utmParam:"&"}),T.log("<open-app> 已有shopid")),this._fetchAPPInfo()):this.setData({isShow:!1})}catch(e){this.setData({isShow:!1}),T.log("<open-app> observer shopid err:"+JSON.stringify(e))}},_fetchAPPInfo:function(){var e=this;return(0,S.default)(C.default.mark((function t(){var a;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.data.appInfoDesc){if(!e.data.platform){try{a=o().sc.g.getSystemInfoSync()}catch(e){}a&&a.platform&&e.setData({platform:a.platform})}"android"===e.data.platform&&o().bridge.request({url:k.DOMAIN+k.API.APP_INFO}).then((function(t){t&&200===t.data.code&&e.setData({appInfoDesc:t.data.desc,appInfoUrl:t.data.url})})).catch((function(t){T.log("<open-app> 百度小程序获取app信息失败:"+JSON.stringify(t)),e.setData({appInfoDesc:"",appInfoUrl:""})}))}case 1:case"end":return t.stop()}}),t)})))()},bdLaunchAppError:function(e){T.log("<open-app> launchAppError:"+("string"==typeof e.detail?e.detail:JSON.stringify(e.detail))),P.error.addError("<open-app> launchAppError",e),o().navigation.forwardTo({url:"/pages/downloadapp/downloadapp"})},applxclick:function(){var e=getCurrentPages()||[],t=e[e.length-1],a=this.data,n=a.appUrl,i=a.utmParam,r=a.launchUTM,s="";t&&t.route&&(s=A[t.route],"packages/notedetail/pages/index/index"===t.route&&(s=t.options&&"29"===t.options.fType?"note":"review")),o().bridge.request({url:k.DOMAIN+k.API.QUICK_CLIPBOARD,data:{source:s,utm:r?r.slice(4):"",schema:r?n+i+r:n},header:{openid:"!"}}).then((function(e){e&&200===e.statusCode&&e.data&&200===e.data.code&&e.data.data?o().sc.g.setClipboardData({data:e.data.data,success:function(e){},fail:function(e){}}):T.log("<open-app> 获取百度快捷导航唤起口令失败:"+JSON.stringify(e))})).catch((function(e){T.log("<open-app> 获取百度快捷导航唤起口令异常:"+JSON.stringify(e))})),x.moduleClick(O,this.data.lxData||{}),this.triggerEvent("launchtap")},gotoHomePage:function(){o().navigation.forwardTo({url:"/pages/index/index"})},openAppInfo:function(){o().navigation.forwardTo({url:"/pages/webview/webview?url=".concat(this.data.appInfoUrl)})}}})})),window.define("421",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports=[10810008,10810009,10810012,10810013,10810014,10810083,10810022,10810023,10810024,12010043,12010044,12010045,12010046,12110047,12110048,123e5,12910066,116e5,117e5,118e5]})),window.define("423",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Component({properties:{exceptionDetail:{type:Object,observer:"_exceptionDetailChange"}},data:{exceptionInfo:{1:{description:"哎呀，你的网络好像出问题了",handlerText:"点击重新加载"},2:{description:"哎呀，页面加载失败了",handlerText:"点击重新加载"},3:{description:"暂无数据",handlerText:""},4:{description:"您还没有任何订单哟~",handlerText:""},5:{description:"还没有评论哟~",handlerText:""},6:{description:"您还没有收藏过店铺哟~",handlerText:""},7:{description:"您还没有优惠券哟~",handlerText:""},8:{description:"获取地理位置失败",handlerText:"点击重新获取"},9:{description:"页面出错啦~",handlerText:""},10:{description:"暂无可领用的优惠券",handlerText:""},11:{description:"暂无数据",handlerText:""}},show:!0},methods:{onTap:function(){this.triggerEvent("exceptionevent")},_exceptionDetailChange:function(e){this.setData({show:e&&Object.keys(e).length})}}})})),window.define("431",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(40)),S=b(e(42)),T=e(432),k=T.getPassword,x=T.clipPassword,P=e(433).isCustomValueKeyValid,A=e(434),O=A.checkIfCanLaunchApp,E=A.updateLaunchAppTime,L=e(435),N=L.generateOpenAppTraceId,M=L.generatePasswordTraceId,R=e(436),U=R.API,B=R.TRACEID_TYPE,V=e(437).MyLog,q=o().induction.OWL,j=o().induction.LOGAN;Component({options:{multipleSlots:!0},properties:{launchName:{type:String},bid:{type:String},customValue:{type:Object},launchAppUrl:{type:String,observer:"launchAppUrlChange"},longChainUrl:{type:String},isNeedHiddenModule:{type:Boolean,observer:"isNeedHiddenModuleChange",value:!1}},ready:function(){var e=this,t=o(),a=t.bridge.getShowOptions()&&t.bridge.getShowOptions().scene?t.bridge.getShowOptions().scene:null;this.source=a;var n=getCurrentPages();this.currentPage=n[n.length-1];var i=this.getPageData("openApp").pageName;this.pageName=i,this.openAppPageName="dp_open_app_".concat(i);var r=this.getPageData("open_app_config_data");r&&this.setCurrentConfig(r),this._getConfigDataHandler=function(t,a){e.setCurrentConfig(a)},o().env.register("dp_open_app_get_config_data",this._getConfigDataHandler),this.getPageData("open_app_has_config_data")||this.getLaunchAppConfig(),this.setCanLaunchApp=function(t,a){var n=e.data,i=n.launchInterval,o=n.launchTimes;(i||o)&&e.setData({canLaunchApp:a})},o().env.register(this.openAppPageName,this.setCanLaunchApp),this.mylog=new V},detached:function(){this.setPageData("open_app_has_config_data",0),o().env.unregister("dp_open_app_get_config_data",this._getConfigDataHandler),o().env.unregister(this.openAppPageName,this.setCanLaunchApp)},pageLifetimes:{show:function(){var e=this.data,t=e.enableLaunch,a=e.launchInterval,n=e.launchTimes,i=O({enableLaunch:t,cacheKey:"".concat("dp_open_app_interval","_").concat(this.pageName),launchInterval:a,launchTimes:n});this.setData({canLaunchApp:i})}},data:{canLaunchApp:!1,enableLaunch:!1,enablePassword:!1,isAppUrlFromHaima:!1,launchAppUrl:"",finalLaunchAppUrl:"",launchInterval:0,launchTimes:1,androidUrl:"",iosUrl:"",password:"",launchAppInfo:{appPackageName:"com.dianping.v1"}},methods:{getLaunchAppConfig:function(){var e=this;this.pageName&&(this.setPageData("open_app_has_config_data",1),o().bridge.request({url:o().getConfig().DOMAIN+U.OPEN_APP_CONFIG,data:{pageKey:this.pageName,source:this.source}}).then((function(t){var a=t.data,n=a.code,i=a.data;200===n&&i&&i.length?o().env.notify("dp_open_app_get_config_data",i):401===n&&e.setData({canLaunchApp:!1}),200!==n&&(j.log("".concat(U.OPEN_APP_CONFIG," fail, response: ").concat(JSON.stringify(t))),102!==n&&e.setPageData("open_app_has_config_data",0))})).catch((function(t){e.setPageData("open_app_has_config_data",0),j.log("".concat(U.OPEN_APP_CONFIG," error: ").concat(JSON.stringify(t))),q.error.addError("".concat(U.OPEN_APP_CONFIG," error:"),t)})))},setCurrentConfig:function(e){this.setPageData("open_app_config_data",e);var t=this.data.launchName,a=e.filter((function(e){return e.launchKey===t})),n=(0,S.default)(a,1)[0];n?this.setCompData(n):j.log("<open-app> cannot find config for ".concat(t))},setCompData:function(e){var t=e.enableLaunch,a=e.launchAppUrl,n=e.launchInterval,i=e.launchTimes,o=e.androidUrl,r=e.iosUrl,s=e.enablePassword,d=e.password,c=O({enableLaunch:t,cacheKey:"".concat("dp_open_app_interval","_").concat(this.pageName),launchInterval:n,launchTimes:i});this.setData({canLaunchApp:c,enableLaunch:t,launchAppUrl:a||this.data.launchAppUrl,finalLaunchAppUrl:a?this.parseLaunchAppUrl(a):this.data.finalLaunchAppUrl,launchInterval:n,launchTimes:i,androidUrl:o,iosUrl:r,enablePassword:s,password:a?"":d,isAppUrlFromHaima:!!a})},parseLaunchAppUrl:function(e){if(!e)return e;var t=this.appendLchToSchema(e,B.LAUNCH);return j.log("<open-app> ".concat(this.data.launchName," launchAppUrlStatic: ").concat(t)),t},appendLchToSchema:function(e,t){var a=this.concatLch(t),n=o().tools.url,i=n.stringify,r=(0,n.parseUrl)(e),s=r.uri,d=r.query,c=r.hash;return i(s,(0,C.default)((0,C.default)({},d),{},{lch:a}),c)},concatLch:function(e){var t=this.getPageData("openApp").cid,a=void 0===t?"":t,n=this.data,i=n.launchName,o=n.bid,r=void 0===o?"":o,s=n.customValue;if(!a&&!r){var d="<open-app> 请在Page data openApp 中声明cid, bid，以便open-app组件使用!!! ".concat(this.pageName,"-").concat(i);return j.log(d),q.error.addError(d,""),""}var c="",u=Object.keys(s||{}).map((function(e){P(e);return"".concat(e,"_").concat(s[e])}));u&&u.length&&(c=u.join("--"));var l="";return e===B.LAUNCH?(l=N(),this.openAppTraceId=l,this.mylog.setOpenAppTraceId(l)):e===B.PASSWORD?(l=M(),this.mylog.setPasswordTraceId(l),this.passwordTraceId=l):l="",":".concat(this.source,":").concat(a,"--").concat(r,":bdapp:").concat(c,":").concat(l)},launchAppUrlChange:function(e){if(e&&!this.data.isAppUrlFromHaima){var t=this.parseLaunchAppUrl(e);this.setData({finalLaunchAppUrl:t,password:""})}},isNeedHiddenModuleChange:function(e){this.setData({isNeedHiddenModule:e})},getPageData:function(e){return this.currentPage.data[e]},setPageData:function(e,t){this.currentPage.data[e]=t},clipPassword:function(e){var t=this;this.mylog.startSetClipboard(),x(e).then((function(){o().sc.g.hideToast(),t.mylog.clipPasswordSucc()})).catch((function(e){t.mylog.clipPasswordError(e)}))},launchAppTap:function(e){var t=this,a=this.data,n=a.bid,i=a.enablePassword,r=a.password,s=a.launchName,d=a.launchAppUrl,c=a.finalLaunchAppUrl,u=a.launchTimes,l=a.launchInterval,p=a.longChainUrl;if(this.mylog.startOpenApp({source:this.source,schema:c,bid:n}),i)if(r)this.clipPassword(r);else{var h=this.appendLchToSchema(d,B.PASSWORD);this.mylog.startGeneratePassword({source:this.source,schema:h,bid:n});var f={longChainUrl:p,schema:h,utm:this.concatLch(B.LONGCHAIN)};k(f).then((function(e){if(t.mylog.getPasswordResult(e),e.data&&200===e.data.code&&e.data.result&&e.data.data){var a=e.data.data;t.setData({password:a}),t.clipPassword(a)}else t.mylog.getPasswordFail(e)})).catch((function(e){t.mylog.getPasswordError(e)}))}E({cacheKey:"".concat("dp_open_app_interval","_").concat(this.pageName),launchInterval:l,launchTimes:u},(function(e){o().env.notify(t.openAppPageName,e)})),this.triggerEvent("tap",{e:e,launchName:s,pageInstance:this.currentPage})},launchAppError:function(e){var t=this.data.launchName;j.log("<open-app> ".concat(t," 唤起app失败: ").concat(JSON.stringify(e))),this.triggerEvent("error",{e:e,launchName:t,pageInstance:this.currentPage}),o().navigation.forwardTo({url:"/pages/downloadapp/downloadapp"})}}})})),window.define("432",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=o().induction.OWL,C=o().induction.LOGAN,S=o().induction.LX,T=e(91),k="/mapi/mgw/growth/clipboardquery.bin",x=function(e){return new Promise((function(t,a){var n=e.longChainUrl,i=e.schema,r=e.utm;i&&r||a("params empty!"),-1===i.indexOf("dianping")&&a("非法schema!");var s=decodeURIComponent(T.getLocalStorageSync("_lx_sdk_lxcuid")||T.getLocalStorageSync("_lxsdk_cuid")||T.getSessionStorageSync("_lxsdk_cuid")||S.get("lxcuid")||""),d=n||"https://evt.dianping.com/synthesislink/5529985.html",c=o().tools.url.stringify(d,{params:r,lxcid:s});o().bridge.request({url:o().getConfig().MAPI_DOMAIN+k,method:"POST",data:{schema:i,longChain:c}}).then((function(e){t(e)})).catch((function(e){a(e)}))}))};t.exports={getPassword:x,clipPassword:function(e){return new Promise((function(t,a){o().sc.g.setClipboardData({data:e,success:function(e){t(e)},fail:function(e){a(e)}})}))},getAndClipPassword:function(e){return new Promise((function(t,a){x(e).then((function(e){wx.setClipboardData({data:e,success:function(e){t(e)},fail:function(e){C.log("getAndClipPassword error:".concat(JSON.stringify(e))),b.error.addError("getAndClipPassword error:",JSON.stringify(e)),a(e)}})})).catch((function(e){C.log("getAndClipPassword exception:".concat(JSON.stringify(e))),b.error.addError("getAndClipPassword exception:",JSON.stringify(e)),a(e)}))}))}}})),window.define("433",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.isCustomValueKeyValid=function(e){return/^[A-Za-z][A-Za-z0-9]*$/.test(e)}})),window.define("434",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=e(110).cache,C=o().induction.OWL,S=o().induction.LOGAN,T=function(e){var t={};try{var a=b.getStorageSync(e);if(a){var n=a.openTimes,i=a.firstModifyTime;t={openTimes:n,firstModifyTime:i,diff:Date.now()-i}}}catch(e){S.log("getLaunchAppCache error: ".concat(JSON.stringify(e))),C.error.addError("getLaunchAppCache error:",e)}return t},k=function(e){try{var t=e.cacheKey,a=e.firstModifyTime,n=e.openTimes;b.setStorage(t,{firstModifyTime:a,openTimes:n})}catch(e){S.log("setLaunchAppCache error: ".concat(JSON.stringify(e))),C.error.addError("setLaunchAppCache error:",e)}};t.exports={getLaunchAppCache:T,setLaunchAppCache:k,checkIfCanLaunchApp:function(e){var t=!0;try{var a=e.enableLaunch,n=e.cacheKey,i=e.launchInterval,o=e.launchTimes;if(!a)return!1;if(!i&&!o)return!0;var r=T(n),s=r.openTimes;r.diff<60*i*1e3&&s>=o&&(t=!1)}catch(e){S.log("checkIfCanLaunchApp error: ".concat(JSON.stringify(e))),C.error.addError("checkIfCanLaunchApp error:",e)}return t},updateLaunchAppTime:function(e,t){var a=e.cacheKey,n=e.launchInterval,i=e.launchTimes;if(n||i){var o=T(a),r=o.openTimes,s=o.firstModifyTime,d=o.diff;try{if(d)if(d<60*n*1e3){var c=r+1;k({cacheKey:a,firstModifyTime:s,openTimes:c}),c>=i&&t(!1)}else k({cacheKey:a,firstModifyTime:Date.now(),openTimes:1});else k({cacheKey:a,firstModifyTime:Date.now(),openTimes:1}),1===i&&t(!1)}catch(e){S.log("updateLaunchAppTime error: ".concat(JSON.stringify(e))),C.error.addError("updateLaunchAppTime error:",e)}}}},a.getLaunchAppCache=T,a.setLaunchAppCache=k})),window.define("435",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(110).lxmina,C=e(91),S=0;t.exports={generateOpenAppTraceId:function(){var e=decodeURIComponent(C.getLocalStorageSync("_lx_sdk_lxcuid")||C.getLocalStorageSync("_lxsdk_cuid")||C.getSessionStorageSync("_lxsdk_cuid")||b.get("lxcuid")||""),t=Date.now();return"".concat(e).concat("-").concat(t)},generatePasswordTraceId:function(){var e=decodeURIComponent(C.getLocalStorageSync("_lx_sdk_lxcuid")||C.getLocalStorageSync("_lxsdk_cuid")||C.getSessionStorageSync("_lxsdk_cuid")||b.get("lxcuid")||""),t=Date.now(),a=function(e){var t=Math.pow(16,e),a=S++;a>=t&&(a=t-1);var n=a.toString(16);return n=function(e,t){if(!e)return e;var a=e.length,n=e;if(a<t){for(var i=0;i<t-a;i++)n="0".concat(n);return n}return e}(n=n.toUpperCase(),e)}(2);return"".concat(e).concat("-").concat(t).concat("-").concat(a)}}})),window.define("436",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={API:{OPEN_APP_CONFIG:"/usergrowth/openAppConfig/swan/get"},TRACEID_TYPE:{LAUNCH:"LAUNCH",PASSWORD:"PASSWORD",LONGCHAIN:"LONGCHAIN"}}})),window.define("437",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(40)),S=b(e(102)),T=b(e(104)),k=e(438).BID_SUNDAE,x=o().induction.LX,P=o().induction.OWL,A=o().induction.LOGAN,O=e(439),E=O.openAppLogData,L=O.passwordLogData,N=function(){function e(){(0,S.default)(this,e),this.openAppTraceId="",this.passwordTraceId=""}return(0,T.default)(e,[{key:"lxLaunchSC",value:function(e){x.systemCheck(k,{custom:(0,C.default)({awake_trace_id:this.openAppTraceId},e)})}},{key:"lxPasswordSC",value:function(e){x.systemCheck(k,{custom:(0,C.default)({password_trace_id:this.passwordTraceId},e)})}},{key:"loganLog",value:function(e){var t={awake_trace_id:this.openAppTraceId,password_trace_id:this.passwordTraceId},a=(0,C.default)((0,C.default)({},t),e);A.log("".concat("[open-app-bd]"," ").concat(JSON.stringify(a)))}},{key:"owlError",value:function(e,t){P.error.addError(e,t)}},{key:"setOpenAppTraceId",value:function(e){this.openAppTraceId=e}},{key:"setPasswordTraceId",value:function(e){this.passwordTraceId=e}},{key:"startOpenApp",value:function(e){var t=e.source,a=e.bid,n=e.schema,i=E.startOpenApp;i=(0,C.default)((0,C.default)({},i),{},{awake_page_scene:t,awake_bid:a,awake_scheme:n}),this.lxLaunchSC(i),this.loganLog(i)}},{key:"startGeneratePassword",value:function(e){var t=e.source,a=e.bid,n=e.schema,i=L.startGeneratePassword;i=(0,C.default)((0,C.default)({},i),{},{awake_page_scene:t,awake_bid:a,awake_scheme:n}),this.lxPasswordSC(i),this.loganLog(i)}},{key:"getPasswordResult",value:function(e){var t=e&&e.data&&e.data.code?e.data.code:0;this.lxPasswordSC((0,C.default)((0,C.default)({},L.getPasswordResult),{},{awake_message:t})),this.loganLog((0,C.default)((0,C.default)({},L.getPasswordResult),{},{response:e}))}},{key:"getPasswordFail",value:function(e){this.owlError({name:"getPwd code fail",msg:"".concat(JSON.stringify(e))})}},{key:"getPasswordError",value:function(e){this.loganLog({error:e,msg:"getPwd error"}),this.owlError({name:"getPwd error",msg:e})}},{key:"startSetClipboard",value:function(){var e=L.startSetClipboard;this.lxPasswordSC(e),this.loganLog(e)}},{key:"clipPasswordSucc",value:function(){var e=L.clipPasswordSucc;this.lxPasswordSC(e),this.loganLog(e)}},{key:"clipPasswordError",value:function(e){var t=L.clipPasswordError;this.lxSC(t),this.loganLog((0,C.default)((0,C.default)({},t),{},{error:e,msg:"clip password error"})),this.owlError(e)}}]),e}();t.exports={MyLog:N}})),window.define("438",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={BID_SUNDAE:"b_dianping_nova_awake_monitor_m_sc"}})),window.define("439",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={openAppLogData:{startOpenApp:{awake_action:1300}},passwordLogData:{startGeneratePassword:{awake_action:1100},getPasswordResult:{awake_action:1101},startSetClipboard:{awake_action:1400},clipPasswordSucc:{awake_action:1401},clipPasswordError:{awake_action:1402}}}})),window.define("441",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(99),C=e(442),S=C.API,T=C.OPEN_APP_BAR_TYPE,k=o().induction.OWL,x=o().induction.LOGAN,P=o().induction.LX,A="b_dianping_nova_8nvunrmd_mv",O="b_dianping_nova_cs03955h_mc",E="b_dianping_nova_5l4i2dqa_mc",L="b_dianping_nova_f4c3gcu9_mv",N="b_dianping_nova_f4c3gcu9_mc";Component({properties:{openAppBarInfo:{type:Object}},data:{isShowTopBar:!1,isShowBottomBar:!1,topBarBid:O,bottomBarBid:N},ready:function(){var e=o(),t=e.bridge.getShowOptions()&&e.bridge.getShowOptions().scene?e.bridge.getShowOptions().scene:null;this.source=t;var a=getCurrentPages();this.currentPage=a[a.length-1];var n=this.getPageData("openApp").pageName;this.pageName=n,this.getOpenAppBarconfig()},methods:{getOpenAppBarconfig:function(){var e=this;o().bridge.request({url:b.DOMAIN+S.OPEN_APP_BAR_CONFIG,data:{pageKey:this.pageName,source:this.source}}).then((function(t){var a,n,i=t.data,o=i.code,r=i.data;200===o&&r&&r.length?(r.forEach((function(e){switch(e.type){case T.TOP_BAR:a=e.showBar;break;case T.BOTTOM_BAR:n=e.showBar}})),a&&P.moduleView(A),n&&P.moduleView(L),e.setData({isShowTopBar:a,isShowBottomBar:n})):(x.log("".concat(S.OPEN_APP_BAR_CONFIG," error: ").concat(JSON.stringify(t))),k.error.addError("".concat(S.OPEN_APP_BAR_CONFIG," error:"),t))})).catch((function(e){x.log("".concat(S.OPEN_APP_BAR_CONFIG," exception: ").concat(JSON.stringify(e))),k.error.addError("".concat(S.OPEN_APP_BAR_CONFIG," exception:"),e)}))},getPageData:function(e){return this.currentPage.data[e]},gotoHomePage:function(){P.moduleClick(E),o().navigation.forwardTo({url:"/pages/index/index"})},onTopBarBtnClick:function(){P.moduleClick(O)},onBottomBarBtnClick:function(){P.moduleClick(N)}}})})),window.define("442",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={API:{OPEN_APP_BAR_CONFIG:"/usergrowth/swanconfig/openAppBarConfig/get"},OPEN_APP_BAR_TYPE:{TOP_BAR:1,BOTTOM_BAR:2}}})),window.define("517",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C,S=e(93),T=e(91),k="b_dianping_nova_8bgigzjh_mv",x="b_dianping_nova_v61oul2j_mc";Component({properties:{remainingText:{type:String,value:""},isIndex:{type:Boolean,value:!1}},data:{showPopUp:!1,top:"3px",right:"54px",sceneIsWallet:!1},ready:function(){var t=r(),n=t.bridge.getShowOptions()&&t.bridge.getShowOptions().scene?parseInt(t.bridge.getShowOptions().scene):null,i=!1,o=Date.now();if(1001!==n){var s=T.getLocalStorageSync("dp_show_pop_up");if(s){var d=s.lastModifyTime,c=s.deltaTime;o-d>60*c*1e3&&(i=!0)}else i=!0;if(i){var u=t.runtimeInfo||new(e(138)),l=u.statusBarHeight,p=u.deviceSystem.indexOf("iOS")>-1?40:44;this.data.isIndex&&this.setData({top:"".concat(l+p+8,"px"),right:"".concat(76*.7,"px")}),S.moduleView(k);var h=this;C=a((function(){T.setLocalStorageAsync("dp_show_pop_up",{lastModifyTime:o,deltaTime:30}),h.setData({showPopUp:!1})}),5e3)}}this.setData({showPopUp:i,sceneIsWallet:1019===n})},methods:{closePopUp:function(){var e=Date.now();T.setLocalStorageAsync("dp_show_pop_up",{lastModifyTime:e,deltaTime:720}),C&&clearTimeout(C),S.moduleClick(x),this.setData({showPopUp:!1})}}})})),window.define("530",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";e(82)({properties:{card:Object},created:function(){},data:{},methods:{}})})),window.define("585",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=k(e(586)),C=k(e(587)),S=e(589),T=e(82);function k(e){return e&&e.__esModule?e:{default:e}}var x=o();T({properties:{title:{type:String,value:"验证"},imgTitle:{type:String,value:"请输入图片中的内容"},imgButton:{type:String,value:"验证"}},data:{isShow:!1},methods:{showSlider:function(e){var t=this,a=e.requestCode;S.rohr.i(S.rohrConfig.i),C.default.getPageData(a).then((function(e){var n=new b.default({requestCode:a,pageData:e});x.$loginPage=t,t.setData({sdk:n,moveWidth:0,codeImage:"",requestCode:a,sliderCode:"",isShow:!0,validStep:"slider",slideStatusClass:"",animationData:{},pageData:e})})).catch((function(e){t.triggerEvent("sliderEvent",{status:0,code:99999,error:e&&e.errMsg||"slider API.getPageData error"},{bubbles:!0,composed:!0})}));var n=wx.createAnimation({transformOrigin:"50% 50%",duration:500,timingFunction:"ease",delay:0});this.animation=n},sliderVerifySuccess:function(e){var t=o().$loginPage,a=e&&e.response_code||"",n=t.data.requestCode;wx.showToast({title:"验证成功",complete:function(){t.setData({isShow:!1}),t.triggerEvent("sliderEvent",{status:1,requestCode:n,responseCode:a},{bubbles:!0,composed:!0})}})},sliderTouchStart:function(e){this.data.sdk.sliderTouchStart(e)},sliderTouchMove:function(e){var t=this.data.sdk.sliderTouchMove(e),a=t.deltaX,n="";t.isDone&&(n="slider-boxLoading"),this.setData({moveWidth:a,slideStatusClass:n})},sliderTouchEnd:function(e){var t=this.data.sdk;t.isDone?this.setData({slideStatusClass:"slider-boxLoading"}):(t.sliderTouchEnd(e),this.setData({moveWidth:0}))},sliderClose:function(){this.setData({isShow:!1}),this.triggerEvent("sliderEvent",{status:0,code:33333},{bubbles:!0,composed:!0})},sliderValideCode:function(e){var t=this,a=this.data,n=a.sliderCode,i=a.pageData,o=a.sdk.requestCode;C.default.verfiyCode({captchacode:n,action:i.action,id:1,requestCode:o}).then((function(e){var a=e.status,n=e.error,i=e.data;1===a?t.sliderVerifySuccess(i):0===a&&121020===n.code?(wx.showToast({title:n.message,icon:"loading"}),t.sliderUpdataCaptch()):wx.showToast({title:n.message,icon:"none",duration:2e3,complete:function(){t.triggerEvent("sliderEvent",{status:0,code:n.code},{bubbles:!0,composed:!0})}})}),(function(e){t.triggerEvent("sliderEvent",{status:0,code:99999,error:JSON.stringify(e)||"slider API.verfiyCode error"},{bubbles:!0,composed:!0})}))},sliderUpdataCaptch:function(){var e=this.data,t=e.requestCode,a=e.pageData;this.setData({codeImage:"".concat(S.baseUrl,"/v2/captcha?request_code=").concat(t,"&action=").concat(a.action,"&captchaHash=").concat(Number(new Date)),sliderCode:""})},sliderValideCodeInput:function(e){var t=e.detail.value;this.setData({sliderCode:t})},bindSliderInputFocus:function(e){var t=this.data.animationData;this.animation.top(200).step(),t=this.animation.export(),this.setData({animationData:t})},bingSliderInputBlur:function(e){var t=this.data.animationData;this.animation.top(300).step(),t=this.animation.export(),this.setData({animationData:t})},onTapPage:function(e){S.rohr.t(e)},onTouchMovePage:function(e){S.rohr.m(e)}}})})),window.define("586",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(42)),S=b(e(102)),T=b(e(104));Object.defineProperty(a,"__esModule",{value:!0});var k,x=e(587),P=(k=x)&&k.__esModule?k:{default:k},A=e(589);var O=function(){function e(t){var a=t.requestCode,n=t.pageData;(0,S.default)(this,e);var i=(P.default.getSystemInfo()||{}).windowWidth,o=void 0===i?375:i,r=o/375,s=[50*r,50*r],d=[270*r,52*r],c=[50*r,50*r],u=Date.now(),l=d[0]-s[0];Object.assign(this,{requestCode:a,windowWidth:o,zoom:r,btn:s,initTime:u,slideWidth:l,isDone:!1,zone:d,client:c,Timestamp:[u],count:0,timeout:0,points:null,trajectory:[],pageData:n})}return(0,T.default)(e,[{key:"sliderTouchStart",value:function(e){this.Timestamp.push(Date.now()),this.count+=1,this.points=[],this.addPoint(e)}},{key:"sliderTouchMove",value:function(e){var t=this.isDone,a=this.slideWidth;if(t)return{isDone:t,deltaX:a,slideWidth:a};var n=this.addPoint(e);return this.getPosition(n)}},{key:"sliderTouchCancel",value:function(e){this.slidEnd()}},{key:"sliderTouchEnd",value:function(e){}},{key:"getPoint",value:function(e){var t=e.touches[0]||{};return[t.clientX,t.clientY]}},{key:"addPoint",value:function(e){var t=this.points,a=this.initTime,n=this.getPoint(e),i=(0,C.default)(n,2),o=i[0],r=i[1];return this.points=t||[],this.points.push([0,o,r,Date.now()-a]),[o,r]}},{key:"getPosition",value:function(e){var t=(0,C.default)(e,2),a=t[0],n=(t[1],this.slideWidth),i=(0,C.default)(this.points,1)[0],o=this.isDone,r=a-i[1];return r<0&&(r=0),r>=n&&(r=n,this.isDone=!0,this.slidEnd()),{deltaX:r,slideWidth:n,isDone:o}}},{key:"slidEnd",value:function(){var e=this,t=e.trajectory,a=e.points,n=void 0===a?[]:a,i=e.Timestamp,r=e.pageData,s=void 0===r?{}:r,d=e.requestCode;(t=t.slice(-3,t.length)).push({point:n,vector:{orientation:"h"}}),e.trajectory=t,e.points=null,i[i.length-1]-i[0]>3e3&&(e.timeout+=1),e.setData();var c=s.action,u=s.id,l={action:c,id:u,requestCode:d,behavior:e.behavior};P.default.verfiySlide(l).then((function(e){var t=o().$loginPage,a=t.data.requestCode,n=e.data,i=e.status,r=e.error;if(1===i)wx.showToast({title:"验证成功",complete:function(){t.setData({isShow:!1});var e=n&&n.response_code||"";t.triggerEvent("sliderEvent",{status:1,requestCode:a,responseCode:e},{bubbles:!0,composed:!0})}});else if(0===i&&121048===r.code){var s=r.request_code;t.setData({"sdk.requestCode":s}),t.setData({codeImage:"".concat(A.baseUrl,"/v2/captcha?request_code=").concat(a,"&action=").concat(c),validStep:"code"})}else t.triggerEvent("sliderEvent",{status:0,code:r.code},{bubbles:!0,composed:!0})})).catch((function(e){o().$loginPage.triggerEvent("sliderEvent",{status:0,code:99999},{bubbles:!0,composed:!0})}))}},{key:"setData",value:function(){var e=this.zone,t=this.client,a=this.Timestamp,n=this.count,i=this.timeout,o=this.trajectory,r={env:{zone:e,client:t,Timestamp:a.slice(0,2),count:n,timeout:i},trajectory:o};this.behavior=r}}]),e}();a.default=O})),window.define("587",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104));Object.defineProperty(a,"__esModule",{value:!0});var T,k=e(588),x=(T=k)&&T.__esModule?T:{default:T},P=e(589);var A=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,null,[{key:"getSystemInfo",value:function(){return wx.getSystemInfoSync()}},{key:"getPageData",value:function(e){var t={requestCode:e,feVersion:P.feVersion.slider,source:P.source};return t._token=P.rohr.r(t),new Promise((function(e,a){wx.request({url:"".concat(P.baseUrl,"/v2/ext_api/page_data"),method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:t,success:function(t){var a=t.data.data||{},n=a.action,i=a.type,o=a.request_code,r=a.notifyUrl;e({action:n,id:i,request_code:o,notifyUrl:r})},fail:function(e){a(e)}})}))}},{key:"getNotifyUrl",value:function(e,t,a){var n=-1===e.indexOf("?")?"?":"&";return new Promise((function(i,o){wx.request({url:"".concat(e).concat(n,"request_code=").concat(t,"&response_code=").concat(a),header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){e.data;i()},fail:function(e){i()}})}))}},{key:"verfiySlide",value:function(e){var t=e.action,a=e.id,n=e.requestCode,i=e.behavior,r=void 0===i?null:i,s=e.captchacode,d=void 0===s?"":s,c={id:a,request_code:n,fingerprint:""},u=this;return r&&(c.behavior=x.default.Kaito(JSON.stringify(r),n)),d&&(c.captchacode=d),c._token=P.rohr.r(c),new Promise((function(e,n){wx.request({url:"".concat(P.baseUrl,"/v2/ext_api/").concat(t,"/verify?id=").concat(a),method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:c,success:function(t){var a=o().$loginPage.data.pageData,n=t.data,i=n.data,r=n.status,s=n.error;if(1===r&&a.notifyUrl){var d=a.notifyUrl;u.getNotifyUrl(d,a.request_code,i.response_code).then((function(t){e({status:r,error:s,data:i})}))}else e({status:r,error:s,data:i})},fail:function(e){n(e)}})}))}},{key:"verfiyCode",value:function(e){var t=e.action,a=e.id,n=e.requestCode,i=e.captchacode;return this.verfiySlide({action:t,id:a,requestCode:n,captchacode:i})}}]),e}();a.default=A})),window.define("588",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";function b(e,t){return null==e||0===e.length?e:(e=C(e),t=C(t),function(e,t){var a=e.length,n=a<<2;if(t){var i=e[a-1];if(i<(n-=4)-3||i>n)return null;n=i}for(var o=0;o<a;o++)e[o]=String.fromCharCode(255&e[o],e[o]>>>8&255,e[o]>>>16&255,e[o]>>>24&255);var r=e.join("");if(t)return r.substring(0,n);return r}(function(e,t){var a,n,i,o,r,s,d=e.length,c=d-1;for(n=e[c],i=0,s=0|Math.floor(6+52/d);s>0;--s){for(o=(i=i+2654435769&4294967295)>>>2&3,r=0;r<c;++r)a=e[r+1],n=e[r]=e[r]+((n>>>5^a<<2)+(a>>>3^n<<4)^(i^a)+(t[3&r^o]^n))&4294967295;a=e[0],n=e[c]=e[c]+((n>>>5^a<<2)+(a>>>3^n<<4)^(i^a)+(t[3&c^o]^n))&4294967295}return e}(S(e,!0),function(e){e.length<4&&(e.length=4);return e}(S(t,!1))),!1))}function C(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var t=[],a=e.length,n=0,i=0;n<a;++n,++i){var o=e.charCodeAt(n);if(o<128)t[i]=e.charAt(n);else if(o<2048)t[i]=String.fromCharCode(192|o>>6,128|63&o);else if(o<55296||o>57343)t[i]=String.fromCharCode(224|o>>12,128|o>>6&63,128|63&o);else if(n+1<a){var r=e.charCodeAt(n+1);if(o<56320&&56320<=r&&r<=57343){var s=65536+((1023&o)<<10|1023&r);t[i]=String.fromCharCode(240|s>>18&63,128|s>>12&63,128|s>>6&63,128|63&s),++n;continue}}}return t.join("")}function S(e,t){var a,n=e.length,i=n>>2;0!=(3&n)&&++i,t?(a=new Array(i+1))[i]=n:a=new Array(i);for(var o=0;o<n;++o)a[o>>2]|=e.charCodeAt(o)<<((3&o)<<3);return a}Object.defineProperty(a,"__esModule",{value:!0});var T,k=(T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),function(e){var t,a,n,i,o,r,s;for(a=n=0,i=e.length,r=(i-=o=i%3)/3<<2,o>0&&(r+=4),t=new Array(r);a<i;)s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++),t[n++]=T[s>>18]+T[s>>12&63]+T[s>>6&63]+T[63&s];return 1==o?(s=e.charCodeAt(a++),t[n++]=T[s>>2]+T[(3&s)<<4]+"=="):2==o&&(s=e.charCodeAt(a++)<<8|e.charCodeAt(a++),t[n++]=T[s>>10]+T[s>>4&63]+T[(15&s)<<2]+"="),t.join("")});var x={Kaito:function(e,t){return k(b(e,t))}};a.default=x})),window.define("589",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.closeStatus=a.rohr=a.rohrConfig=a.source=a.embedModule=a.modules=a.feVersion=a.baseUrl=void 0;var b=e(582);a.baseUrl="https://verify.meituan.com",a.feVersion={slider:"0.1.0",sms:"0.1.0",image:"0.1.0",voice:"0.1.0",lbs:"0.1.0",buying:"0.1.0"},a.modules={1:"图片",4:"短信",40:"语音",69:"历史购买",71:"滑块",79:"地址位置"},a.embedModule=[1,4,12,15,40,71],a.source=13,a.rohrConfig={i:100019},a.rohr=b,a.closeStatus={RISK_DEFAULT_ERROR:"121000",RISK_NO_SUCH_ACTION:"121001",RISK_COMMON_PARAMS_LOST:"121002",RISK_NO_SUCH_SCENE:"121003",RISK_USER_NOT_LOAD:"121004",RISK_PARAMS_INVALID_FORMART:"121005",RISK_NO_SUCH_METHOD:"121006",RISK_NOT_VERIFY_BY_ORDER:"121007",RISK_GET_VERIFYINFO_LIMIT:"121009",RISK_VERIFY_ERROR_TIMES_LIMIT:"121010",RISK_USER_NOT_BINDED:"121011",RISK_PARAMS_LOST:"121018",RISK_USER_RESETPWD_CODE_EXPIRE:"121036",RISK_MOBILE_NOT_EXIST:"121040",RISK_GET_VERIFY_INFO_ERROR:"121042",RISK_AUTHORIZE_CODE_FAIL:"121043",RISK_AUTHORIZE_CODE_EXPIRE:"121044",RISK_RISK_LEVEL_NOT_VALID:"121045",RISK_GET_VERIFY_CODE_CNT_REACH_LIMIT:"121046",RISK_LEVEL_DENY:"121051",RISK_VERIFY_REQUEST_TIME_OUT:"121052",RISK_FAKE_REQUEST:"121053",RISK_VOICE_SEND_TIMES_LIMIT_ONE_DAY:"121055",RISK_BOOM_PROOF_DENY:"121056",RISK_VERIFY_INFO_LOSE_EFFICACY:"121057",RISK_SLIDER_VERIFY_FAILED:"121058",RISK_GET_VERIFYINFO_TIMES_LIMIT_ONE_DAY:"121061",RISK_VERIFY_PAYPWD_USE_PAY_ERROR_LIMIT:"121064",RISK_VERIFY_ERROR_TIMES_LIMIT_ONE_DAY:"121065",RISK_KLINGON_OUT_OF_SERVICE:"121066",RISK_GET_VERIFY_INFO_ERROR_RETRY:"121067",RISK_NO_AUTH:"121999"}})),window.define("591",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";e(82)({properties:{subVM:Array,id:String,text:String,className:String,styleString:String,mvvmName:String,renderTime:Number},data:{},methods:{onTapMVVMElement:function(e){}}})})),window.define("593",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(93),S=e(91),T=e(101),k=e(103),x=!0,P=["historycity","hotcity"],A={pageBid:"c_b8vafcnn",innerMCBid:"b_ii9gepfp",overseaMCBid:"b_evy8kgbd",searchMCBid:"b_8y8rbuyg",locationMCBid:"b_3l2y11bb",historyMCBid:"b_cqdomdam",hotMCBid:"b_kmg5zldc",listMCBid:"b_dvlq8kzw"},O="/wxmapi/city/citysearch",E="/wxmapi/city/citylistwx",L=[void 0,void 0];Component({properties:{cityDomain:{type:String,value:"https://m.dianping.com"},initCity:{type:Boolean,value:!1,observer:"_initCity"},cityArea:{type:Number,value:0},cityAnimation:{type:Boolean,value:!0},citySearch:{type:Boolean,value:!0},cityTab:{type:Number,value:0}},data:{tabs:null,tabActive:0,toView:"",historyCity:[],cityData:[],alphabetas:[],isSearching:!1,isHidden:!1},methods:{_initCity:function(){var e=r(),t={cityId:e.userData.dpLocCityId,cityName:e.userData.dpLocCityName,isOverseasCity:1===e.userData.dpLocIsOverseasCity},a=0;if(0==this.data.cityArea){this.data.tabs=["国内（含港澳台）","海外"];var n=this.data.cityTab;n?a=1==n?0:1:t.isOverseasCity&&(a=1)}else 2==this.data.cityArea?(a=1,this.data.tabs=["国内（含港澳台）"]):1==this.data.cityArea&&(this.data.tabs=["海外"]);this.setData({city:t,tabs:this.data.tabs,cityAnimation:this.data.cityAnimation,citySearch:this.data.citySearch,tabActive:a}),this.getHistoryCity(a),this.fetchCities(a),x&&r().sc.g.getSetting({success:function(e){e.authSetting["scope.userLocation"]||(x=!1)}})},getHistoryCity:function(e){var t=this;S.getLocalStorageAsync("dp_city_history").then((function(a){var n=a;n&&(e=!!e,t.setData({historyCity:n}))}))},toggleSearch:function(){var e=this.data.isSearching;this.setData({isSearching:!e}),C.moduleClick(A.searchMCBid)},handleInput:function(e){var t=this,n=e.detail.value.trim();this.setData({keyword:n}),n?a((function(){r().h.request(new k(new T(t.data.cityDomain+O,{data:{keyword:n}}),{callback:function(e){(e=e.serverData)&&200==e.statusCode&&n===t.data.keyword&&t.setData({searchSuggest:e.data.records})}}))}),0):this.setData({searchSuggest:[]})},switchCityType:function(e){var t=parseInt(e.target.dataset.index);this.setData({isAnchor:!1,tabActive:t,hotCity:[],cityData:[]}),this.getHistoryCity(t),L[t]?this.parseAndSetViewData(L[t]):this.fetchCities(t),0===parseInt(t)?C.moduleClick(A.innerMCBid):C.moduleClick(A.overseaMCBid)},bindCityTap:function(e){var t=e.currentTarget.dataset;if(t.name){var a=t.type,n=t.name.split(",")[0],i=parseInt(t.cityid),o=!!parseInt(t.oversea);this.addCity2History({cityId:i,cityName:n,isOverseasCity:o},a),C.moduleClick(A["".concat(a,"MCBid")])}},addCity2History:function(e,t){for(var a=this,n=this.data.historyCity,i=0;i<n.length;i++)n[i].cityId===e.cityId&&n.splice(i,1);n.unshift(e),n.length>3&&(n=n.splice(0,3)),this.setData({historyCity:n}),S.setLocalStorageAsync("dp_city_history",n).then((function(){r().navigation.back();var n=Object.assign({},e,{type:t});a.triggerEvent("cityselect",n)}))},bindViewTap:function(e){var t=this,a=e.target.dataset.id,n=-1===P.indexOf(a),i=[];S.getLocalStorageAsync("dp_all_cities").then((function(e){n?(i=e[t.data.tabActive].cityData.filter((function(e){return e.firstChar==a})),t.setData({cityData:i,toView:a})):t.setData({toView:a})})).catch((function(e){}))},bindTouchmove:function(e){var t=e.touches[0].clientY-e.currentTarget.offsetTop,a=e.touches[0].clientX-e.currentTarget.offsetLeft,n=Math.ceil(t/18);if(a>=0&&t>=0){var i=this.data.alphabetas[n-1];this.setData({toView:i})}},catchTouchmove:function(e){},fetchCities:function(e){var t=this,a=function(t){var a=L;a[e]={hotCity:t.hotCity,cityData:t.cityData,lastUpdate:(new Date).getTime()},L=a,S.setLocalStorageAsync("dp_all_cities",L)},n=function(e){r().sc.g.showNavigationBarLoading(),r().h.request(new k(new T(t.data.cityDomain+E,{data:{type:e}}),{callback:function(e){if(e=e.serverData,r().sc.g.hideNavigationBarLoading(),e&&200==e.statusCode){var n=e.data;a(n),t.parseAndSetViewData(n)}}}))};S.getLocalStorageAsync("dp_all_cities").then((function(a){var i=a;i.length>=e&&i[e]?((new Date).getTime()-i[e].lastUpdate>864e5&&n(e),t.parseAndSetViewData(i[e])):n(e)})).catch((function(t){n(e)}))},parseAndSetViewData:function(e){var t=e.cityData.map((function(e){return e.firstChar})),a=[e.cityData[0]];this.setData({hotCity:e.hotCity,alphabetas:t,cityData:a})}}})})),window.define("595",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(17)),T=C(e(40)),k=C(e(596)),x=C(e(420)),P=C(e(102)),A=C(e(104)),O=new(function(){function e(){(0,P.default)(this,e),this.bridge=this.getApp().bridge,this.induction=this.getApp().induction}return(0,A.default)(e,[{key:"getApp",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=r();return e||{bridge:null,induction:null,userData:{code:-1,dpCityId:"",wxmpEncryptedOpenId:"",dpAccessToken:""},navigation:{forwardTo:function(){}},getConfig:function(){}}}))},{key:"getConfig",value:function(){var e=this.getApp().getConfig();return e||{APP_VERSION:"",APP_ID:"",APP_NAME:"",ENV:"",DOMAIN:"",MAPI_DOMAIN:""}}},{key:"getBridge",value:function(){return this.bridge?this.bridge:{getUserInfo:function(){return{}},request:function(){return Promise.reject(new Error("bridge.request 方法未实现"))}}}},{key:"getInduction",value:function(){return this.induction?this.induction:{LX:{}}}}]),e}()),E=new(function(){function e(){(0,P.default)(this,e),this._lx=O.getInduction().LX}return(0,A.default)(e,[{key:"mv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._lx.moduleView(e,t)}},{key:"mc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._lx.moduleClick(e,t)}}]),e}()),L=new(function(){function e(){(0,P.default)(this,e),this._bridge=O.getBridge()}return(0,A.default)(e,[{key:"getUserInfo",value:function(){return this._bridge.getUserInfo()}}]),e}()),N="https://mapi.dianping.com",M="/mapi/joy/massagereservation.joy",R="/mapi/joy/serviceselecttime.joy",U=new(function(){function e(){(0,P.default)(this,e)}var t;return(0,A.default)(e,[{key:"_joinUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t||"";return 0===e.indexOf("http")?e:"".concat(a).concat(e)}},{key:"request",value:(t=(0,x.default)(S.default.mark((function e(t,a,n){var i,o,r,s,d,c,u,l,p,h,f=arguments;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]?f[3]:{},r=(o=i||{}).domain,s=void 0===r?N:r,d=o.resFilter,c=void 0===d||d,u=o.header,l=void 0===u?{}:u,p=(0,k.default)(o,["domain","resFilter","header"]),e.next=4,O.getBridge().request((0,T.default)((0,T.default)({},p),{},{url:this._joinUrl(t,s),method:a,data:n,header:(0,T.default)({"content-type":"application/json"},l)}));case 4:if(h=e.sent,!c){e.next=9;break}if(!h||200!==h.statusCode||!h.data){e.next=8;break}return e.abrupt("return",h.data);case 8:throw new Error(h?h.errMsg||h.errmsg:"请求失败");case 9:return e.abrupt("return",h);case 10:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})},{key:"get",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,"GET",t,a)}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,"POST",t,a)}}]),e}()),B=e(598),V=O.getApp(),q="b_m7rml9y9",j="b_7et5hfzv",F="b_6cb013s2",H="b_3kum0fvk",G="b_oz2b9iml",z="b_03q2kehe",K="b_cqvzleom",J="b_jrminwyb",Y=[],W=[];B({properties:{options:{type:Object,value:{shopId:0,shopUuid:""},observer:function(e,t){!e||!e.shopId||t&&e.shopId===t.shopId||this.init()}},lxData:{type:Object,value:{}},moduleConfig:{type:Object,value:{}}},data:{LifeReserveData:null,LifeReserveList:[],LifeToMore:!1,LifeToMoreText:"",LifeCurrentTimePrice:null,LifeCurrentTimePriceIndex:null,LifeLatestCurrentTimeItem:"",LifeCurrentDayIndex:0,LifeCurrentDayItem:null,LifeCurrentHalfDayIndex:0,lifeShowClose:!0,lifeSelectTimeVisible:!1,lifeServiceData:null},methods:{init:function(){var e=this;return(0,x.default)(S.default.mark((function t(){var a,n;return S.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.data.options,t.next=4,i={token:"*",shopId:a.shopId?Number(a.shopId):0,shopuuid:a.shopUuid||"",cityid:V.userData.dpCityId||0},U.get(M,i);case 4:if((n=t.sent).list&&n.list.forEach((function(e){e.firstAvailableDate=JSON.parse(e.firstAvailableDate),e.joyMassageBookingBlocks&&e.joyMassageBookingBlocks[0]&&e.joyMassageBookingBlocks[0].joyBookDisplayPrice&&(e.memberPriceText=(e.joyMassageBookingBlocks[0].joyBookDisplayPrice.price||"").replace("¥",""))})),n.refundTip&&(n.refundTip=JSON.parse(n.refundTip)),n.joyIconTips&&(n.joyIconTips.forEach((function(e){e.tip&&(e.tip=JSON.parse(e.tip))})),n.joyIconTips=n.joyIconTips.slice(0,3)),E.mv(q),Y=n.list){t.next=12;break}return t.abrupt("return");case 12:Y&&Y.length&&(W=Y.slice(0,2)),e.setData({LifeReserveData:n,LifeReserveList:W,LifeToMore:Y.length>2,LifeToMoreText:Y.length>2?"查看其他"+(Y.length-2)+"项服务":""}),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:case"end":return t.stop()}var i}),t,null,[[0,16]])})))()},lifeToMoreOrLess:function(){this.data.lifeShowClose?(E.mc(H),this.setData({lifeShowClose:!1,LifeToMoreText:"收起",LifeReserveList:Y})):this.setData({lifeShowClose:!0,LifeToMoreText:"查看其他"+(this.data.LifeReserveData.list.length-2)+"项服务",LifeReserveList:W})},lifeOpenSpuPage:function(e){E.mc(F);var t=e.currentTarget.dataset.serviceid,a=V.userData.dpCityId||0,n=this.data.options;V.navigation.forwardTo({url:"".concat("/pages/detail/detail","?shopid=").concat(n.shopId,"&shopuuid=").concat(n.shopUuid,"&serviceid=").concat(t,"&cityid=").concat(a)})},lifeChangHalfDayIndex:function(e){var t=e.currentTarget.dataset.halfdayindex;E.mc(K),this.setData({LifeCurrentHalfDayIndex:t,LifeCurrentTimePriceIndex:null})},lifeChangeDayIndex:function(e){var t=e.currentTarget.dataset.dayindex;E.mc(z),this.setData({LifeCurrentDayIndex:t,LifeCurrentDayItem:this.data.lifeServiceData.list[t],LifeCurrentHalfDayIndex:0,LifeCurrentTimePriceIndex:null})},lifeSelectTime:function(e){var t=e.currentTarget.dataset.timeprice,a=e.currentTarget.dataset.latestcurrenttimeitem;if(t.status){var n=e.currentTarget.dataset.timepriceindex;this.setData({LifeCurrentTimePrice:t,LifeCurrentTimePriceIndex:n,LifeLatestCurrentTimeItem:a})}},lifeGoNextStep:function(){E.mc(J);var e=this.data,t=e.LifeCurrentTimePrice,a=e.LifeCurrentDayItem;if(t&&t.status){var n=t.nextDayText?"true":"false",i=new Date(t.actualTime).getTime(),o=V.userData.dpCityId||0,r=L.getUserInfo();if(r&&200===r.code){var s=this.data.options,d=V.userData.dpAccessToken,c=V.userData.wxmpEncryptedOpenId,u=V.userData.wxmpEncryptedOpenId,l=O.getConfig().APP_ID,p="?utm_source=dianping-wxapp&arriveTime=".concat(i,"&productitemid=").concat(a&&a.scheduledId||"","&shopid=").concat(s.shopId,"&shopuuid=").concat(s.shopUuid,"&token=").concat(d,"&crossday=").concat(n,"&openId=").concat(u,"&appId=").concat(l,"&cityId=").concat(o,"&uuid=").concat(c);this.lifeCloseModal(),V.navigation.forwardTo({type:"h5",url:"".concat("https://m.dianping.com/dz-trade-client-web/universal-preorder-page-next/unified-booking-pedicures-order-page/index.html").concat(p)})}}},lifeCloseModal:function(){this.triggerEvent("hideMask"),this.setData({lifeSelectTimeVisible:!1,LifeCurrentDayIndex:0,LifeCurrentHalfDayIndex:0,LifeCurrentTimePrice:{},LifeCurrentDayItem:{},LifeCurrentTimePriceIndex:null})},lifeShowModal:function(e){var t=this;return(0,x.default)(S.default.mark((function n(){var i,o,r;return S.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return E.mc(j),a((function(){t.setData({lifeSelectTimeVisible:!0})}),120),t.triggerEvent("promptMask"),i=e.currentTarget.dataset.serviceid,n.prev=4,o=t.data.options,n.next=8,s={token:"*",shopId:Number(o.shopId)||0,shopuuid:o.shopUuid||"",cityid:V.userData.dpCityId||0,serviceId:i},U.get(R,s);case 8:r=n.sent,E.mv(G),t.setData({lifeServiceData:r,LifeCurrentDayItem:r.list[t.data.LifeCurrentDayIndex]}),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(4);case 15:case"end":return n.stop()}var s}),n,null,[[4,13]])})))()}}})})),window.define("596",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){var b=e(597);t.exports=function(e,t){if(null==e)return{};var a,n,i=b(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}})),window.define("597",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){t.exports=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}})),window.define("598",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b;b=e(82),t.exports=b})),window.define("600",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Component({behaviors:[],properties:{},data:{},ready:function(){},methods:{}})})),window.define("602",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Component({})})),window.define("604",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Component({behaviors:[],properties:{wechatFingerprint:{type:String},dealid:{type:Number},cityid:{type:Number},shopid:{type:String},shopuuid:{type:String},sourcecode:{type:String},biztag:{type:String},orderstatus:{type:String},orderid:{type:String},env:{type:String},platform:{type:String},swimlane:{type:String},token:{type:String}},data:{scenetype:1,messageShow:!1,messageShowStyle:!1,modelShow:!1,modelShowStyle:!1,isShow:!1,isEdit:!1,isValidate:!1,phonenumber:"",subTitle:"将使用该号码进行加密呼出",btnText:"立即呼叫",remark:[],title:"号码保护",hasBackupPhone:!1,shopBackupPhonePromptVO:{},userPhoneEmptyPrompt:""},ready:function(){this.getVirtualPhoneNumber()},moved:function(){},detached:function(){},observers:{phonenumber:function(e){this.setData({isValidate:/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)})}},methods:{_reqwest:function(e){var t=this,a=e.url,n=e.data,i=e.method;return new Promise((function(e,o){var r="dianping";"meituan"===t.data.platform&&(r="meituan");var s={url:a,data:n,header:{token:t.data.token,isMicroMessenger:"true",appName:r},method:i};t.data.swimlane&&(s.header["x-gw-mock"]="true",s.header.swimlane=t.data.swimlane),wx.request(C({success:function(t){var a=t.statusCode,n=t.data;200===a?e(n):o({code:a,msg:"Server Exception"})},fail:function(){o({code:404,msg:"WeiXin/Network Exception"})}},s))}))},_getDomain:function(){var e="beta";"prod"===this.data.env&&(e="prod");var t="dianping";return"meituan"===this.data.platform&&(t="meituan"),{prod:{dianping:"mapi.dianping.com",meituan:"mapi.meituan.com"},beta:{dianping:"mapi.51ping.com",meituan:"beta.mapi.meituan.com"}}[e][t]},getVirtualPhoneNumber:function(){var e=this;try{this._reqwest({url:"https://".concat(this._getDomain(),"/dzgm/vn/checkvirtualnumber.bin"),data:{scenetype:this.data.scenetype,shopid:this.data.shopid,shopuuid:this.data.shopuuid,sourcecode:this.data.sourcecode},method:"get"}).then((function(t){if(t.data&&t.data.useVirtualNumber){var a=t.data.virtualNumberDialPopUpVO,n=a.userPhone,i=a.subTitle,o=a.btnText,r=a.remark,s=a.title,d=a.shopBackupPhonePromptVO,c=void 0===d?{}:d,u=a.hasBackupPhone,l=void 0!==u&&u,p=a.userPhoneEmptyPrompt,h=void 0===p?"":p,f=a.promptUnderUserPhone,g=void 0===f?"请确保使用该号码进行呼叫":f,m={isShow:!0,modelShow:!0,modelShowStyle:!0,phonenumber:n,isValidate:/^1(3|4|5|6|7|8|9)\d{9}$/.test(n),subTitle:i,btnText:o,remark:r||[],title:s,hasBackupPhone:l,shopBackupPhonePromptVO:c||{},userPhoneEmptyPrompt:h,promptUnderUserPhone:g};e.setData(m)}else e.continue()})).catch((function(){e.continue()}))}catch(e){this.continue()}},getRiskManagementParams:function(){var e=this.data;return{wechatFingerprint:e.wechatFingerprint,cityid:e.cityid,dealid:e.dealid}},checkRiskManagement:function(e){return e.code&&502===e.code},dialNormalNumber:function(){this.callback(0)},dialBackupNumber:function(){this.callback(1)},callback:function(e){var t=this;this.data.isValidate?this._reqwest({url:"https://".concat(this._getDomain(),"/dzgm/vn/getvirtualnumber.bin"),data:C({scenetype:this.data.scenetype,shopid:this.data.shopid,shopuuid:this.data.shopuuid,sourcecode:this.data.sourcecode,userphone:this.data.phonenumber,biztag:this.data.biztag,orderstatus:this.data.orderstatus,orderid:this.data.orderid,shopphoneindex:e},this.getRiskManagementParams()),method:"POST"}).then((function(e){e.success?(t.close(),t.triggerEvent("resolve",e.data.virtualNumber,{})):t.checkRiskManagement(e)?wx.showToast({title:e.message,duration:2e3,icon:"none"}):t.setData({modelShow:!1,modelShowStyle:!1,messageShow:!0,messageShowStyle:!0})})).catch((function(){t.setData({modelShow:!1,modelShowStyle:!1,messageShow:!0,messageShowStyle:!0})})):wx.showToast({title:"请输入正确的11位手机号码",duration:1500,icon:"none"})},close:function(){var e=this;this.setData({modelShowStyle:!1,messageShowStyle:!1});var t=a((function(){e.setData({modelShow:!1,messageShow:!1,isShow:!1}),e.triggerEvent("close",!1,{}),clearTimeout(t)}),400)},edit:function(){this.setData({isEdit:!0})},continue:function(){this.close(),this.triggerEvent("reject",!1,{})}}})})),window.define("606",(function(e,t,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b,C){"use strict";var S=e(7)(e(40)),T=e(93),k=e(114),x=e(231),P=e(101),A=e(103),O=e(476),E=e(91),L="/wxmapi/favorite/favorite",N="/wxmapi/favorite/remove",M="/wxmapi/shop/shopim",R="/wxmapi/shop/initbooking",U="/wxmapi/shop/commonbooking",B="/nibmp/mva/api/leads/sendyodaverificationcode",V="b_kqkc0qtz",q="b_p28sod8l",j="b_epsdh96o",F="b_idgiqluy",H="b_ng1kujrn",G="b_w8dj8v5s",z="b_uudr4u1y",K="b_qfdt8sn0",J="b_c28iufqj",Y="b_k8y5lx3o",W="b_zk3s8frw",Q="b_3xh8v8om",X="b_e6tsqitg",Z="b_ook87x94";Component({properties:{shopOptions:{type:Object,value:{},observer:"_OptionsChange"},moduleConfig:{type:Object,value:{}},notCoopration:{type:Boolean,value:!1},imData:{type:Object,value:{},observer:"_imDataChange"},lxData:{type:Object},isFavorite:{type:Boolean},categoryId:{type:Number},reviewCount:{type:Number},shopName:{type:String},shopType:{type:Number},branchName:{type:String},shopPic:{type:Array},shopGeo:{type:Object}},data:{showCommentBubble:!1,showModule:0,showBookModule:!1,showModalStatus:!1,tel:"",showCodeModalStatus:!1,showTimeout:!1,time:60,title:"",inputScrollHeight:53,infoList:[],requestCode:""},code:"",timer:null,requestCode:"",limitNum:3,ready:function(){this.setData({moduleNums:this.data.moduleConfig.moduleNums}),this.data.moduleConfig.hasBook&&this.pageInit()},methods:{handleCommentClose:function(){this.setData({showCommentBubble:!1})},_OptionsChange:function(e){var t=E.getLocalStorageSync("__CACHE:poiconment_bubble_times")||0;if(t<2&&(E.setLocalStorageSync("__CACHE:poiconment_bubble_times",++t),this.setData({showCommentBubble:!0})),e){var a=e.shopUuid,n=e.shopId,i={appId:"wxd2dc491d7e28fe28",path:a?"pages/index/index?shopUuid=".concat(a,"&utm_source=dianping-wxapp&from=").concat(e.utm_source):"pages/index/index?shopId=".concat(n,"&utm_source=dianping-wxapp&from=").concat(e.utm_source),extraData:{referType:"0",referId:"0",source:"dianping-wxapp"}};this.setData({miniData:i,isNewNav:!0})}},gotoCommentWxApp:function(){if(this.data.isNewNav)T.moduleClick(V,this.data.lxData);else{var e=this.data.shopOptions;e.shopUuid,e.shopId;T.moduleClick(V,this.data.lxData)}},_imDataChange:function(e){if(e){var t=s().sc.g.getSystemInfoSync()||{},a=!1;if(t.model&&-1!=t.model.indexOf("iPhone X")&&(a=!0),e.hasIM){var n=this.data.moduleConfig;n.moduleNums=n.moduleNums+1,this.setData({showModule:1,imData:e,isIpx:a,moduleConfig:n})}else this.setData({showModule:1,isIpx:a})}},triggerFavor:function(){var e=this.data.preventFavorite,t=this.data.shopOptions&&(this.data.shopOptions.shopUuid||this.data.shopOptions.shopId),a=s().userData.dpCityId;!e&&t&&(this.setData({preventFavorite:!0}),this.favorShop(t,a,this.data.isFavorite))},favorShop:function(t,a,n){var i=this;n?s().h.request(new A(new P(N,{data:{cityId:s().userData.dpCityId,shopUuid:t,token:"!"}}),{callback:function(e){var a=e.serverData||null;x.log("detail unfavorite resCode: "+(a&&a.data&&a.data.code).toString()),a&&200===a.statusCode&&a.data&&200===a.data.code?(s().sc.showToast({title:"取消收藏成功",icon:"none"}),i.setData({isFavorite:!1,preventFavorite:!1})):a&&200===a.statusCode&&a.data&&100===a.data.loginCode?O.getDataAsync((function(e){e?(i.setData({preventFavorite:!1}),i.triggerFavor()):i.setData({preventFavorite:!1})})):(s().sc.showToast({title:"取消收藏失败",icon:"none"}),i.setData({preventFavorite:!1}),k.addError("detail page => unfavorite shop error: ",a)),T.moduleClick(j,Object.assign(i.data.lxData,{shop_id:t}))}})):e(607).getDataAsync((function(e){s().h.request(new A(new P(L,{method:"POST",data:{cx:e,cityId:s().userData.dpCityId,shopUuid:t,token:"!"}}),{callback:function(e){var a=e.serverData||null;x.log("detail favorite resCode: "+(a&&a.data&&a.data.code).toString()),a&&200===a.statusCode&&a.data&&200===a.data.code?(s().sc.showToast({title:"收藏店铺成功",icon:"none"}),i.setData({isFavorite:!0,preventFavorite:!1}),T.moduleClick(q,Object.assign(i.data.lxData,{shop_id:t}))):a&&200===a.statusCode&&a.data&&100===a.data.loginCode?O.getDataAsync((function(e){e?(i.setData({preventFavorite:!1}),i.triggerFavor()):i.setData({preventFavorite:!1})})):(s().sc.showToast({title:"收藏店铺失败",icon:"none"}),i.setData({preventFavorite:!1}),x.log("detail favorite resCode: "+JSON.stringify(a)),k.addError("detail page => favorite shop error: ",JSON.stringify(e))),T.moduleClick(j,Object.assign(i.data.lxData,{shop_id:t}))}}))}))},formSubmit:function(e){if(!this.data.preventIM){this.setData({preventIM:!0});var t={},a=e.detail.formId,n=this.data.shopOptions,i=n.shopUuid,o=n.shopId;t.formId=a,i?t.shopUuid=i:t.shopId=o,t.token="!",this.fetchIM(t),T.moduleClick(F,Object.assign(this.data.lxData,{poi_id:t.shopUuid||t.shopId}))}},fetchIM:function(e){var t=this;s().h.request(new A(new P(M,{data:e}),{callback:function(e){var a=e.serverData||null;if(x.log("detail im resCode: "+(a&&a.data&&a.data.code).toString()),a&&200===a.statusCode&&a.data&&200===a.data.code){t.setData({preventIM:!1});var n=a.data.redirectUrl;n&&s().navigation.forwardTo({url:n})}else a&&200===a.statusCode&&rres.data&&100==a.data.loginCode?O.getDataAsync():(s().sc.showToast({title:"咨询服务失败",icon:"none"}),t.setData({preventIM:!1}),x.log("detail shopim resCode: "+JSON.stringify(e)))}}))},promptMask:function(){this.tiggerEvent("promptMask")},hideMask:function(){this.triggerEvent("hideMask")},triggerSharePanel:function(){this.data.showSharePanel||T.moduleView(z,this.data.lxData),T.moduleClick(G,this.data.lxData),this.setData({showSharePanel:!this.data.showSharePanel})},navToShare:function(){var e=this.data.shopOptions&&(this.data.shopOptions.shopId||this.data.shopOptions.shopUuid);this.setData({showSharePanel:!1}),T.moduleClick(H,this.data.lxData),s().navigation.forwardTo({url:"/packages/share/pages/share/share?shopUuid=".concat(e,"&reviewCount=").concat(this.data.reviewCount)})},shareFriends:function(){var e=this.data.lxData||{};T.moduleClick(K,(0,S.default)((0,S.default)({},e),{},{from:"share_panel"})),this.setData({showSharePanel:!this.data.showSharePanel})},pageInit:function(){var e=this,t=this.data.shopOptions.shopUuid||this.data.shopOptions.shopId;t&&s().h.request(new A(new P(R,{data:{shopUuid:t}}),{callback:function(a){var n=a.serverData||null;if(x.log("fetchinit params:".concat(t,", fetchinit result ").concat(n&&JSON.stringify(n.data))),n&&200===n.statusCode&&n.data&&200===n.data.code){var i=n.data,o=i.shopbooking;if(i.hasBook){T.moduleView(J,e.data.lxData);var r=o.infoList||[];e.setData({showBookModule:!0,infoList:r,tel:i.userPhone||"",title:o.bookingTitle||"大众点评特别礼遇",jumph5:i.jumph5})}}else x.log("init booking error ".concat(JSON.stringify(n)))}}))},bindCodeOp:function(e){this.code=e.detail.value},bindTelOp:function(e){this.setData({tel:e.detail.value})},timeoutOp:function(){var e=this;this.setData({showTimeout:!0,time:60});var t=n((function(){var a=e.data.time-1;a<=0?(e.setData({showTimeout:!1}),clearInterval(t)):e.setData({time:a})}),1e3);this.timer=t},closeCodeModal:function(){this.setData({showCodeModalStatus:!1})},openCodeModal:function(){this.setData({showCodeModalStatus:!0})},submitOp:function(){var e=this;T.moduleClick(X,this.data.lxData);var t=this.data,a=this;/^1\d{2}(\d{4}|\*{4})\d{4}$/.test(t.tel)?s().h.request(new A(new P(U,{data:{userPhone:t.tel,shopUuid:this.data.shopOptions.shopUuid||this.data.shopOptions.shopId,verifyCode:this.code}}),{callback:function(t){var n=t.serverData||null;if(T.order(Z,e.data.lxData),n&&200===n.statusCode&&n.data&&200===n.data.code&&n.data.success){a.closeCodeModal(),a.hideModal();var i=n.data&&n.data.errorMsg||"预约成功";a._modalText(i)}else if(n&&200===n.statusCode&&n.data&&201===n.data.code)a.openCodeModal();else{var o=n.data&&n.data.errorMsg||"系统繁忙,请稍后再试v5";a._modalText(o),x.log("booking error ".concat(JSON.stringify(n)))}}})):a._modalText("请输入正确的手机号码")},showModal:function(){T.moduleClick(Y,this.data.lxData);var e=this.data.jumph5;if(e)s().navigation.forwardTo({url:e,type:"h5"});else{var t=s().sc.g.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=t,t.translateY(300).step(),this.setData({animationData:t.export(),showModalStatus:!0}),T.moduleView(W,this.data.lxData),a(function(){t.translateY(0).step(),this.setData({animationData:t.export()})}.bind(this),200)}},hideModal:function(){var e=s().sc.g.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=e,e.translateY(300).step(),this.setData({animationData:e.export()}),a(function(){e.translateY(0).step(),this.setData({animationData:e.export(),showModalStatus:!1})}.bind(this),200)},_modalText:function(e){s().sc.showModal({title:"提示",content:e,showCancel:!1})},showSlider:function(){var e=this.requestCode;this.Slider.showSlider({requestCode:e})},startYodaVerfy:function(){T.moduleClick(Q,this.data.lxData);var e=this.data,t=this;/^1\d{10}/.test(e.tel)?s().h.request(new A(new P(B,{data:{sceneId:3,phone:e.tel},method:"POST"}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&0===a.data.code&&1===a.data.status)t.timeoutOp(),t.requestCode&&(t.showModal(),t.requestCode="");else if(0===a.data.code&&0===a.data.status)t.requestCode=a.data.requestCode,t.hideModal(),t.showSlider();else{var n=a&&a.data&&a.data.msg||"系统繁忙,请稍后再试";t._modalText(n)}}})):this._modalText("请输入正确的手机号码")},yodaverifyEvent:function(e){var t=e.detail;1===t.status?this.startYodaVerfy():0===t.status&&this.limitNum>0?(this.startYodaVerfy(),this.limitNum=this.limitNum-1):this._modalText("系统错误")}}})})),window.define("614",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";Component({})})),window.define("616",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C="b_j9xbozbj",S="b_seqlceiw",T="b_8q972yu9",k="/wxmapi/shop/crafts";Component({behaviors:[],properties:{shopOptions:{type:Object,observer:"_shopOptionsChange"},moduleConfig:{type:Object},lxData:{type:Object}},data:{imgClass:"width: 200rpx;height: 200rpx;border-radius: 7rpx 7rpx 0 0"},moved:function(){},detached:function(){},methods:{carftsListTap:function(e){var t=this.data.craftData.listUrl;b.moduleClick(S,this.data.lxData),t&&o().navigation.forwardTo({url:t})},carftsDetailTap:function(e){b.moduleClick(T,this.data.lxData);var t=e.currentTarget.dataset.url;t&&o().navigation.forwardTo({url:t})},_shopOptionsChange:function(t,a){var n=this,i=e(101),r=e(103);if(t){var s=t.shopId,d=t.shopUuid,c={};d?c.shopUuid=d:c.shopId=s,o().h.request(new r(new i(k,{data:c}),{callback:function(e){var t=e.serverData||null;if(t&&200===t.statusCode&&t.data&&t.data.craftData){var a=t.data.craftData;n.setData({craftData:a}),b.moduleView(C,{shopType:a.shopType})}}}))}}}})})),window.define("618",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C="/api/dzviewscene/productshelf/dzproductshelf";Component({properties:{poiid:{type:Number|String,observer:"getProductShelf"},sceneCode:{type:String,observer:"lXData"}},data:{mainTitle:{},filters:[],subFilters:[],filterProducts:[],productList:[],activeTab:0,activeSubTab:0,showNum:0,moreInfo:{},lxBid:{},Observer:null,lxRecord:{}},detached:function(){this.data.Observer&&this.data.Observer.disconnect()},methods:{getProductShelf:function(t){var a=e(101),n=e(103);if(t){var i=this,r={shopuuid:"",shopid:t,cityid:o().userData.dpCityId||1,platform:102,lng:o().userData.longitude||"",lat:o().userData.latitude||"",sceneCode:i.data.sceneCode};o().h.request(new n(new a(C,{domain:"https://mapi.dianping.com",header:{Cookie:"token=".concat(o().userData.dpAccessToken||"")},data:r}),{callback:function(e){var t=e.serverData||null;if(t&&200===t.statusCode&&t.data&&200===t.data.code&&t.data.msg&&t.data.msg.shelfComponent){var a=t.data.msg.shelfComponent;i.setData({mainTitle:a&&a.mainTitle,filters:a&&a.filter&&a.filter.filterBtns,filterProducts:a&&a.filterIdAndProductAreas}),i.setData({subFilters:i.data.filters&&i.data.filters.length>0&&i.data.filters[0].children||[],activeTab:i.data.filters&&i.data.filters.length>0&&i.data.filters[0].filterBtnId||0,activeSubTab:i.data.filters&&i.data.filters.length>0&&i.data.filters[0].children&&i.data.filters[0].children.length>0&&i.data.filters[0].children[0].filterBtnId||0}),i.getProductInfo(),i.data.filterProducts&&i.data.filterProducts.length>0&&i.data.filterProducts.forEach((function(e){(e.filterBtnId===i.data.activeTab||e.filterBtnId===i.data.activeSubTab)&&e.productAreas&&e.productAreas[0].itemArea&&e.productAreas[0].itemArea.productItems&&e.productAreas[0].itemArea.productItems.length>0&&b.moduleView(i.data.lxBid.moduleMVBid)})),i.data.filters&&i.data.filters.length>0&&b.moduleView(i.data.lxBid.tabMVBid)}else o().sc.showToast({title:err,icon:"none"})}}))}},getProductInfo:function(){var e=this;this.data.filterProducts&&this.data.filterProducts.length>0&&(this.data.filterProducts.forEach((function(t){var a=e.data.activeSubTab||e.data.activeTab;t.filterBtnId===a&&e.setData({productList:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].itemArea&&t.productAreas[0].itemArea.productItems,showNum:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].itemArea&&t.productAreas[0].itemArea.defaultShowNum,moreInfo:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].more})})),this.data.lxRecord={},this.intersectionObserver(),this.data.moreInfo&&this.data.moreInfo.text&&b.moduleView(this.data.lxBid.moreMVBid))},changeTab:function(e){var t=e.currentTarget.dataset.tab;this.setData({activeTab:t.filterBtnId,subFilters:t.children,activeSubTab:t.children&&t.children.length>0&&t.children[0].filterBtnId}),b.moduleClick(this.data.lxBid.tabMCBid),this.getProductInfo()},changeSubTab:function(e){var t=e.currentTarget.dataset.tab;this.setData({activeSubTab:t.filterBtnId}),this.getProductInfo()},goDetail:function(e){var t=e.currentTarget.dataset.tab;b.moduleClick(this.data.lxBid.goodMCBid),o().navigation.forwardTo({url:t.jumpUrl})},goJump:function(){b.moduleClick(this.data.lxBid.moreMCBid),o().navigation.forwardTo({url:this.data.moreInfo.jumpUrl})},lXData:function(e){var t={moduleMVBid:"b_gc_xrjjnnne_mv",tabMVBid:"b_gc_oxj4g96s_mv",tabMCBid:"b_gc_oxj4g96s_mc",goodMVBid:"b_gc_1rq8uhsn_mv",goodMCBid:"b_gc_1rq8uhsn_mc",moreMVBid:"b_gc_bksxb4l0_mv",moreMCBid:"b_gc_bksxb4l0_mc"};"beauty_poi_wx_cosmetic_delivery_shelf"===e&&(t={moduleMVBid:"b_gc_g98y6h9m_mv",tabMVBid:"b_gc_8y5mbd3f_mv",tabMCBid:"b_gc_8y5mbd3f_mc",goodMVBid:"b_gc_gk85hx4j_mv",goodMCBid:"b_gc_gk85hx4j_mc",moreMVBid:"b_gc_gow7iywc_mv",moreMCBid:"b_gc_gow7iywc_mc"}),this.setData({lxBid:t})},intersectionObserver:function(){var e=this,t=this.data.observe;t||(t=this.createIntersectionObserver({thresholds:[0,.2,.3,.9,1],observeAll:!0}).relativeToViewport(),this.data.observer=t),t.observe(".shelf-list-item",(function(t){t.intersectionRatio>=0&&!e.data.lxRecord[t.dataset.tab.itemId]&&(b.moduleView(e.data.lxBid.goodMVBid),e.data.lxRecord[t.dataset.tab.itemId]=!0)}))}},ready:function(){}})})),window.define("620",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(621),C=e(622).getInduction().LX;b({externalClasses:["lx-class"],properties:{lxViewBid:{type:String,value:""},lxClickBid:{type:String,value:""},lxExtend:{type:String,value:"{}"},isObserver:{type:Boolean,value:!0},options:{type:Object,value:{}}},data:{observer:null},lifetimes:{ready:function(){this.data.lxViewBid&&this.moduleView()},detached:function(){this.data.observer&&this.data.observer.disconnect()}},methods:{moduleView:function(){var e=this,t=this.data,a=t.lxClickBid,n=t.lxViewBid,o=t.options;if(1!==this.viewCount&&n)if(this.setLxModule(),this.data.isObserver){var r=i.createIntersectionObserver(this);r.relativeToViewport().observe("#lx-".concat(a||n),(function(t){t.intersectionRatio>0&&(e.viewCount=1,C.moduleView(n,e._lxExtend,o),r.disconnect())})),this.data.observer=r}else C.moduleView(n,this._lxExtend,o)},setLxModule:function(){if(!this._lxExtend)try{var e=this.data.lxExtend;if(-1===e.indexOf("{")){var t=e.split("&"),a={};t&&t.length&&t.forEach((function(e){var t=e.split("=");a[t[0]]=t[1]})),this._lxExtend=a}else e=e.replace(/'/g,'"'),e=JSON.parse(e),this._lxExtend=e}catch(e){}},moduleClick:function(){var e=this.data,t=e.lxClickBid,a=e.options;t&&(this.setLxModule(),C.moduleClick(t,this._lxExtend,a),this.triggerEvent("click"))}}})})),window.define("621",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b;b=e(82),t.exports=b})),window.define("622",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(17)),S=b(e(420)),T=b(e(102)),k=b(e(104)),x={platform:2,clientType:202},P={platform:1,clientType:102},A={platform:1,clientType:101100},O=new(function(){function e(){(0,T.default)(this,e),this.bridge=this.getApp().bridge,this.induction=this.getApp().induction}return(0,k.default)(e,[{key:"getApp",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=o();return e||{bridge:null,induction:null,userData:{code:-1,dpCityId:"",wxmpEncryptedOpenId:"",dpAccessToken:""},navigation:{forwardTo:function(){}},getConfig:function(){return null}}}))},{key:"getConfig",value:function(){var e=this.getApp().getConfig();return e||{APP_VERSION:"",APP_ID:"",APP_NAME:"",ENV:"",DOMAIN:"",MAPI_DOMAIN:""}}},{key:"getBridge",value:function(){return this.bridge?this.bridge:{getUserInfo:function(){return{}},request:function(){return Promise.reject(new Error("bridge.request 方法未实现"))},getSystemInfo:function(){return(0,S.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})))()}}}},{key:"getInduction",value:function(){return this.induction?this.induction:{LX:{}}}},{key:"getEnv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0!==i?A:e?x:P}}]),e}());t.exports=O})),window.define("624",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";e(621)({properties:{item:{type:null}}})})),window.define("626",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(40)),S=b(e(596)),T=b(e(19)),k=b(e(17)),x=b(e(420)),P=b(e(102)),A=b(e(104)),O="/api/dzviewscene/productshelf/dzbookshelf",E="/api/dzviewscene/other/dzpopup",L={platform:2,clientType:202},N={platform:1,clientType:102},M={platform:1,clientType:101100},R=new(function(){function e(){(0,P.default)(this,e),this.bridge=this.getApp().bridge,this.induction=this.getApp().induction}return(0,A.default)(e,[{key:"getApp",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=o();return e||{bridge:null,induction:null,userData:{code:-1,dpCityId:"",wxmpEncryptedOpenId:"",dpAccessToken:""},navigation:{forwardTo:function(){}},getConfig:function(){return null}}}))},{key:"getConfig",value:function(){var e=this.getApp().getConfig();return e||{APP_VERSION:"",APP_ID:"",APP_NAME:"",ENV:"",DOMAIN:"",MAPI_DOMAIN:""}}},{key:"getBridge",value:function(){return this.bridge?this.bridge:{getUserInfo:function(){return{}},request:function(){return Promise.reject(new Error("bridge.request 方法未实现"))},getSystemInfo:function(){return(0,x.default)(k.default.mark((function e(){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})))()}}}},{key:"getInduction",value:function(){return this.induction?this.induction:{LX:{}}}},{key:"getEnv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0!==i?M:e?L:N}}]),e}()),U=new(function(){function e(){(0,P.default)(this,e)}var t;return(0,A.default)(e,[{key:"_joinUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===e.indexOf("http")?e:"".concat(R.getConfig().MAPI_DOMAIN).concat(e)}},{key:"_filterEmpty",value:function(e){return"object"!==(0,T.default)(e)||null===e?{}:Object.keys(e||{}).reduce((function(t,a){var n=e[a];return null!=n&&""!==n&&(t[a]=n),t}),{})}},{key:"request",value:(t=(0,x.default)(k.default.mark((function e(t,a,n){var i,o,r,s,d,c,u,l,p=arguments;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>3&&void 0!==p[3]?p[3]:{},r=(o=i||{}).resFilter,s=void 0===r||r,d=o.header,c=void 0===d?{}:d,u=(0,S.default)(o,["resFilter","header"]),e.next=4,R.getBridge().request((0,C.default)((0,C.default)({},u),{},{url:this._joinUrl(t),method:a,data:this._filterEmpty(n),header:(0,C.default)({"content-type":"application/json"},c)}));case 4:if(l=e.sent,!s){e.next=9;break}if(!l||200!==l.statusCode||!l.data){e.next=8;break}return e.abrupt("return",l.data);case 8:throw new Error(l?l.errMsg||l.errmsg:"请求失败");case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})},{key:"get",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,"GET",t,a)}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,"POST",t,a)}}]),e}()),B=function(e){return U.get(O,e,{header:{"content-type":"application/x-www-form-urlencoded"}})},V=function(e){return U.get(E,e,{header:{"content-type":"application/x-www-form-urlencoded"}})},q=e(621),j=R.getApp();q({properties:{shopId:{type:String,value:"",observer:function(e){this.init(e)}},isMT:{type:Boolean,value:!1}},data:{dpShopid:"",saleCountInfo:"",refundTip:"",showKtvShelf:!1,scrollLeft:0,bookingTypeScrollLeft:0,timeItemWidth:80,timeItemDistance:60,isShowMoreActivity:!1,CAN_NOT_BOOK_STATUS:0,activityAnimationType:"",promoItems:[],activeDateIndex:0,activeTypeIndex:0,activePeriodIndex:"",isShowBookingModal:!1,bookAnimationType:"",showMore:!0,modalIntroductionConfig:{date:"",time:"",hour:""},modalSelectTipsConfig:{text:"请选择开唱时间",isShow:!0},modalState:"",modalExtendInfo:{reductions:[],warning:"",discount:"",price:"",selectedDate:"",originalPrice:""},clientType:"",platform:"",mainTitle:null,ktvBookDates:[],productItems:null,filterIdAndProductAreas:[],modalData:{},curModalItem:{},defaultModalItem:{},newKtvRoomView:"",moveParams:{scrollLeft:0,screenHalfWidth:187.5}},lifetimes:{attached:function(){var e=R.getEnv(this.data.isMT);this.setData({clientType:e.clientType,platform:e.platform})}},methods:{init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,x.default)(k.default.mark((function a(){var n,i,o,r;return k.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=10;break}return a.next=3,e.fetchKtvList(t);case 3:if((n=a.sent)&&n.shelfComponent&&n.shelfComponent.filter){a.next=6;break}return a.abrupt("return");case 6:i=n.shelfComponent.filter.filterBtns||[],o=n.shelfComponent.mainTitle,r=n.shelfComponent.filterIdAndProductAreas||[],e.setData({ktvBookDates:i,mainTitle:o,filterIdAndProductAreas:r},(function(){e.setData({productItems:e.getItemByFilterBtnId()})}));case 10:case"end":return a.stop()}}),a)})))()},resetData:function(){return{activeTypeIndex:0,activePeriodIndex:"",isShowBookingModal:!1,bookAnimationType:"",showMore:!0,bookingTypeScrollLeft:0,modalIntroductionConfig:{date:"",time:"",hour:""},modalSelectTipsConfig:{text:"请选择开唱时间",isShow:!0},modalState:"",modalExtendInfo:{reductions:[],warning:"",discount:"",price:"",selectedDate:"",originalPrice:""}}},getScrollLeft:function(e){return 140*e-345},stopScrolling:function(){return!1},handleDateChange:function(e){var t=this,a=e.currentTarget.dataset.index||0;this.data.activeDateIndex!==a&&this.setData((0,C.default)({scrollLeft:this.getScrollLeft(a),activeDateIndex:a},this.resetData()),(function(){t.setData({productItems:t.getItemByFilterBtnId()})}))},handleBookTypeSelect:function(e){var t=this,a=e.currentTarget.dataset.index||0;this.getRect("#new-ktv-room-"+a),this.setData({activeTypeIndex:a,showMore:!0},(function(){t.setData({productItems:t.getItemByFilterBtnId()})}))},showBookingModal:function(e){var t=this;return(0,x.default)(k.default.mark((function a(){var n,i,o,r,s,d,c,u,l,p;return k.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.available){a.next=2;break}return a.abrupt("return");case 2:if(t.setData({isShowBookingModal:!0,modalState:"loading"}),a.prev=3,n=JSON.parse(e.jumpUrl||"{}"),i=j.bridge.getShowOptions(),o=i.query,r=void 0===o?{}:o,s=(0,C.default)({platform:t.data.platform,clientType:t.data.clientType},n),t.data.clientType!==M.clientType){a.next=17;break}return a.next=10,R.getBridge().getSystemInfo();case 10:if(a.t0=a.sent,a.t0){a.next=13;break}a.t0={};case 13:d=a.t0,"baiduboxapp"!==(c=d.host)&&"bdmap"!==c||(u=r&&r.da_param?r.da_param:"other",s.pagesource="baiDuChannel=map|amusebook|".concat(u)),s.scenecode="joy_poi_ktv_book_popup_baidu_map_xcx";case 17:return a.next=19,V(s);case 19:200===(l=a.sent).code&&l.msg&&l.msg.dzPopupComponent&&(p=l.msg.dzPopupComponent)&&t.setData({modalState:"normal",bookAnimationType:"flyin",curModalItem:p.defaultItem,defaultModalItem:p.defaultItem,modalData:p}),a.next=26;break;case 23:a.prev=23,a.t1=a.catch(3),t.setData({modalState:"error"});case 26:case"end":return a.stop()}}),a,null,[[3,23]])})))()},handleSelectPeriod:function(e){var t=e.currentTarget.dataset.index,a=this.data.modalData.filterComponent.filterBtns[t].filterBtnId,n=this.findItemByKey(this.data.modalData.filterIdAndItemAreas,"filterBtnId",a);this.setData({activePeriodIndex:t,curModalItem:n.itemArea.itemList[0]})},handleNextStep:function(e){var t=e.currentTarget.dataset.url;j.navigation.forwardTo({url:t})},fetchKtvList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,x.default)(k.default.mark((function a(){var n;return k.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B({sceneCode:"joy_poi_ktv_book_shelf",clientType:e.data.clientType,platform:e.data.platform,shopid:t});case 3:if(200!==(n=a.sent).code){a.next=6;break}return a.abrupt("return",n.msg);case 6:a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:return a.abrupt("return",null);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},getBookingReportCommonParams:function(e,t){return{poi_id:this.data.shopId,product_id:e.defaultItemId,index:t+1}},handleBookItemClick:function(e){var t=e.currentTarget.dataset.roomitem,a=void 0===t?{}:t;this.showBookingModal(a)},findItemByKey:function(e,t,a){var n=e.filter((function(e){return e[t]===a})),i=null;return n.length&&(i=n[0]),i},showMoreActivity:function(){this.setData({isShowMoreActivity:!0,activityAnimationType:"fadein"})},hideMoreActivity:function(){this.setData({activityAnimationType:"fadeout"})},handleActivityAnimationEnd:function(){"fadeout"===this.data.activityAnimationType&&this.setData({activityAnimationType:"",isShowMoreActivity:!1})},toggleViewMore:function(){this.setData({showMore:!this.data.showMore})},closeBookingDialog:function(){this.setData({bookAnimationType:"flyout",activePeriodIndex:"",modalSelectTipsConfig:{text:"请选择开唱时间",isShow:!0}})},handleAnimationend:function(){"flyout"===this.data.bookAnimationType&&this.setData({isShowBookingModal:!1,bookAnimationType:""})},handleBtnClick:function(e){var t=e.currentTarget.dataset.roomitem;this.showBookingModal(t)},getItemByFilterBtnId:function(){var e=this.data.ktvBookDates&&this.data.ktvBookDates[this.data.activeDateIndex]&&this.data.ktvBookDates[this.data.activeDateIndex].children&&this.data.ktvBookDates[this.data.activeDateIndex].children[this.data.activeTypeIndex]&&this.data.ktvBookDates[this.data.activeDateIndex].children[this.data.activeTypeIndex].filterBtnId,t=(this.data.filterIdAndProductAreas||[]).filter((function(t){return t.filterBtnId===e})),a={};return t.length&&(a=t[0].productAreas&&t[0].productAreas[0]&&t[0].productAreas[0].itemArea&&t[0].productAreas[0].itemArea.productItems),a},getRect:function(e){var t=this;this.createSelectorQuery().select(e).boundingClientRect((function(e){var a=t.data.moveParams;a.subLeft=e.left,a.subHalfWidth=e.width/2,t.moveTo()})).exec()},moveTo:function(){var e=this.data.moveParams.subLeft,t=this.data.moveParams.screenHalfWidth,a=this.data.moveParams.subHalfWidth,n=this.data.moveParams.scrollLeft;n+=e-t+a,this.setData({bookingTypeScrollLeft:n})},scrollMove:function(e){var t=this.data.moveParams;t.scrollLeft=e.detail.scrollLeft,this.setData({moveParams:t})}}})})),window.define("628",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(19)),S=b(e(596));Component({properties:{page:{type:String,value:"poi"},shopId:{type:String,value:""},shopUuid:{type:String,value:""},header:{type:String,value:""},cardNo:{type:String,value:""},title:{type:String,value:"",observer:"_getTitle"},subtitle:{type:String,value:""},cardPriceDesc:{type:String,value:"",observer:"_getCardPriceDesc"},originalCardPrice:{type:String,value:28,observer:"_originalCardPrice"},promoDesc:{type:String,value:""},userCardDesc:{type:String,value:""},userHasCard:{type:Boolean,value:!0},button:{type:String,value:"https://p0.meituan.net/dprainbow/5e74de336a3474deda4ada7ffca2dfcd18715.png",observer:"_getBtn"},saleCount:{type:String,value:"持卡会员1人"},bigBackgroundPic:{type:String,value:"https://p0.meituan.net/dprainbow/c4725350925949d4cd181fb44a2b8277247282.png"},linkUrl:{type:String,value:""},cardExpiredTips:{type:String,value:"",observer:"_getCardExpiredTips"},cardExpiredTipsUrl:{type:String,value:""},cardBottomTipsDo:{type:Object,observer:"__getCardExpiredTipList",value:{}}},data:{titleArr:[],cardPriceDescArr:[],originalCardPriceArr:[],btnArr:[],cardExpiredTipsArr:[],cardExpiredTipsList:[],launchAppUrl:""},ready:function(){var e=this.data||{},t=e.title,a=void 0===t?"":t,n=e.cardPriceDesc,i=void 0===n?"":n,o=e.button,r=void 0===o?"":o,s=e.cardExpiredTips,d=void 0===s?"":s,c=e.cardBottomTipsDo;this._getTitle(a),this._getCardPriceDesc(i),this._getBtn(r),this._getCardExpiredTips(d),this.__getCardExpiredTipList(c)},methods:{click:function(){this.redirectDetail()},redirectDetail:function(){var e=o().userData.wxmpEncryptedOpenId,t=decodeURIComponent(this.data.linkUrl)||"",a=o().userData.dpAccessToken,n=t.split("index.html")||[];t=n[0]+"index.html?dpId=".concat(e,"&token=").concat(a,"&appId=wx734c1ad7b3562129&openId=!&utm_source=dianping-wxapp")+n[1],o().navigation.forwardTo({url:t,type:"h5"})},_getTitle:function(e){var t=this.getJsonArray(e);this.setData({titleArr:t})},_getCardPriceDesc:function(e){var t=this.getJsonArray(e);this.setData({cardPriceDescArr:t})},_originalCardPrice:function(e){var t=this.getJsonArray(e);this.setData({originalCardPriceArr:t})},_getBtn:function(e){var t=this.getJsonArray(e);this.setData({btnArr:t})},_getCardExpiredTips:function(e){var t=this.getJsonArray(e);this.setData({cardExpiredTipsArr:t})},__getCardExpiredTipList:function(e){var t=this,a=e||{},n=a.tipList,i=a.cardTip,o=n&&n.length?n:i?[i]:[],r=[];o.forEach((function(e){var a=[];if(t.isJsonStr(e)){var n=JSON.parse(e);if(n&&n.length)n.forEach((function(e){var n=e.text,i=(0,S.default)(e,["text"]);a.push({text:n,styles:t.parseStyle(i)})}));else{var i=n.text,o=(0,S.default)(n,["text"]);a.push({text:i,styles:t.parseStyle(o)})}}else a.push({text:jsonStr,styles:{}});r.push(a)})),this.setData({cardExpiredTipsList:r})},isJsonStr:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!==(0,C.default)(t)||!t)}catch(e){return!1}return!1},parseStyle:function(e){var t=Object.keys(e);if(!t||!t.length)return null;var a="";return t.forEach((function(t){var n=e[t];"textsize"===t?a+="font-size: ".concat(n,"px;"):"textcolor"===t?a+="color: ".concat(n,";"):"backgroundcolor"===t||(a+="opacity"===t?"opacity: ".concat(opacity,";"):"".concat(t,": ").concat(n,";"))})),a},getJsonArray:function(e){var t=this;return function(e){var a=[];if(t.isJsonStr(e)){var n=JSON.parse(e);if(n&&n.length)n.forEach((function(e){var n=e.text,i=(0,S.default)(e,["text"]);a.push({text:n,styles:t.parseStyle(i)})}));else{var i=n.text,o=(0,S.default)(n,["text"]);a.push({text:i,styles:t.parseStyle(o)})}}else a.push({text:e,styles:{}});return a}(e)}}})})),window.define("630",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(101),C=e(103),S=e(99),T="/merchantcard/timescard/navigation/membercards.json",k="/api/vc/merchantcard/discountcard/navigation/querycards.json";Component({properties:{options:{type:Object,observer:"init"},page:{type:String,value:"poi"}},data:{cardInfo:null,scene:1001,loaded:!1},methods:{init:function(e){if(e&&!this.data.loaded){var t=o().getShowOptions,a=((void 0===t?function(){}:t)()||{}).scene,n=void 0===a?1001:a;this.setData({scene:n,loaded:!0}),"poi"===this.data.page?this.initPoi(e):"spu"===this.data.page&&this.initTuanOrSpu(e,this.data.page)}},initPoi:function(t){var a=this,n=e(105),i=o().userData.wxmpEncryptedOpenId;n.getDataAsync((function(e){if(e){var n={platform:1,clientType:106,cityId:o().userData.dpCityId,clientVersion:S.APP_VERSION,dpId:i,userId:o().userData.userid||""};t.shopId&&(n.shopid=t.shopId),t.shopUuid&&(n.shopuuid=t.shopUuid),n.token="!",o().h.request(new C(new b(T,{header:{"content-type":"application/x-www-form-urlencoded"},data:n}),{callback:function(e){var t=e.serverData||null;if(t&&200===t.statusCode&&t.data){var n=t.data;200==n.code&&n.msg&&n.msg.memberCardList&&n.msg.memberCardList[0]&&a.setData({cardInfo:n.msg.memberCardList[0]||null})}}}))}}))},initTuanOrSpu:function(e,t){var a=this,n=o().userData.wxmpEncryptedOpenId,i={platform:1,clientType:106,cityId:e.cityId,clientVersion:S.APP_VERSION,dpId:n,userId:o().userData.userid||""};"tuan"===t&&(i.dealgroupid=e.dealId),e.shopId&&(i.shopid=e.shopId),e.shopUuid&&(i.shopuuid=e.shopUuid),i.token="!",o().h.request(new C(new b(k,{header:{"content-type":"application/x-www-form-urlencoded"},data:i}),{callback:function(e){var t=e.serverData||null;if(t&&200===t.statusCode&&t.data){var n=t.data;200==n.code&&n.msg&&a.setData({cardInfo:n.msg})}}}))},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=n<10?"0".concat(n):n,r=i<10?"0".concat(i):i;return"".concat(a,"-").concat(o,"-").concat(r)}}})})),window.define("632",(function(e,t,a,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(93),S="b_et2lvx3l",T="b_4687gd6y",k="/wxmapi/shop/rainbow";Component({behaviors:[],properties:{loadOptions:{type:Object,vaule:null},rainBowData:{type:Object,vaule:null,observer:"_rainBowDataChange"}},ready:function(){var e=this;this.data.rainBowData?this._dealRainBowData(this.data.rainBowData):this.data.loadOptions&&this.fetchData(this.data.loadOptions||{}).then((function(t){t&&e._dealRainBowData(t)}))},methods:{_rainBowDataChange:function(e){this._dealRainBowData(e)},fetchData:function(t){var a=this,n=e(105),i={};if(i=this._dealParams(t))return new Promise((function(e){n.getDataAsync((function(t){t&&(i.cityId=r().userData.dpCityId,a.getRainBowData(i).then((function(t){e(t)})).catch((function(t){e()})))}))}))},getRainBowData:function(t){var a=e(101),n=e(103);return new Promise((function(e,i){r().h.request(new n(new a(k,{header:{openidPlt:""},data:t}),{callback:function(t){var a=t.serverData||null;a&&200===a.statusCode&&a.data&&a.data.rainBowData?e(a.data.rainBowData):i(t)}}))}))},_dealParams:function(e){var t={},a=e.shopId,n=e.shopUuid;if(e.dealGroupId)t.dealGroupId=e.dealGroupId;else if(n)t.shopUuid=n;else{if(!t.shopId)return null;t.shopId=a}return t},_dealRainBowData:function(e){if(e.showModule=!1,e.endTime&&e.urls&&e.urls.length>0){var t=(Date.parse(new Date(e.endTime))-Date.parse(new Date))/1e3;if(t>0){e.showModule=!0,this.initSeconds(t,e),C.moduleView(S);var a=n(function(){var n=t;this.updateSeconds(n),--t<=0&&(clearInterval(a),e.showModule=!1,this.setData({rainBowData:e}))}.bind(this),1e3)}}},initSeconds:function(e,t){var a=this._dealSecond(e),n=a.dayStr,i=a.hrStr,o=a.minStr,r=a.secStr;e>86400?this.setData({rainBowData:t,dayStr:n,hrStr:i,dayModel:!0,hourModel:!1,minModel:!1}):e>3600?this.setData({rainBowData:t,hrStr:i,minStr:o,dayModel:!1,hourModel:!0,minModel:!1}):this.setData({rainBowData:t,minStr:o,secStr:r,dayModel:!1,hourModel:!1,minModel:!0})},updateSeconds:function(e){var t=this._dealSecond(e),a=t.dayStr,n=t.hrStr,i=t.minStr,o=t.secStr;e>=86400?e%3600==0&&this.setData({dayStr:a,hrStr:n,dayModel:!0,hourModel:!1,minModel:!1}):e>=3600&&e<86400?(e+1)%60==0&&this.setData({hrStr:n,minStr:i,dayModel:!1,hourModel:!0,minModel:!1}):this.setData({minStr:i,secStr:o,dayModel:!1,hourModel:!1,minModel:!0})},_dealSecond:function(e){var t=Math.floor(e/3600/24),a=t.toString();1==a.length&&(a="0"+a);var n=Math.floor((e-3600*t*24)/3600),i=n.toString();1==i.length&&(i="0"+i);var o=Math.floor((e-3600*t*24-3600*n)/60),r=o.toString();1==r.length&&(r="0"+r);var s=(e-3600*t*24-3600*n-60*o).toString();return 1==s.length&&(s="0"+s),{dayStr:a,hrStr:i,minStr:r,secStr:s}},rainBowTap:function(){C.moduleClick(T)}}})})),window.define("633",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";e(634);var b,C=e(134),S=e(91),T=e(105),k=e(686),x=k.cid,P=k.bid_c;C({pageName:"home",data:{pageProtocol:"https:",supportNavStyle:e(687)(o().runtimeInfo),feedTabIndex:0,selCityId:1,openAppBarInfo:{bottomBarBid:P.openapp_bottom_bar,bottomBarLaunchAppUrl:"dianping://home",bottomBarLongChainUrl:"https://m.dianping.com"},openApp:{pageName:"home",cid:x.home}},onPageScroll:function(){e(137).triggerScroll()},onLoad:function(t){if(o().sc.logPV("home"),T.getDataAsync((function(e){})),!this.init){this.init=function(){var t,a=S.getLocalStorageSync("city");if(a&&a.city&&(t=a.city.cityId),void 0!==t&&o().userData.dpCityId!==t){o().userData.dpCityId=t;var n=e(688);o().h.request(new n({data:{cityId:t},callback:function(e){var t=e&&e.serverData&&e.serverData.data;t&&200===t.code&&t.data&&t.data.cityName&&(o().userData.dpCityName=t.data.cityName)}}))}t&&this.setData({selCityId:t})}.bind(this)}this.init(t);this.options=t,this.swapData=e(689)(o().env,this,"main.swapdata",{feedTabIndex:this.data.feedTabIndex}),b||(b=[,e(699),e(701),e(707),e(709),e(710),e(711),e(712),e(713),null,null,null,null,null,null].filter((function(e){return!!e}))),e(698).onLoad(b,this,t),this._onCityChange||(this._onCityChange=function(e,a,n,i){var o={isDefault:!1,lastModify:+new Date,city:{cityId:a.dpCityId,cityName:a.dpCityName,isOverseasCity:1===a.dpIsOverseasCity}};S.setLocalStorageSync("city",o),i.init(),i.widgetInstanceArray&&i.widgetInstanceArray.forEach((function(e){e.onCityChange&&e.onCityChange(i,t)}))}.bind(this),o().env.register(60001,this._onCityChange,this))},onUnload:function(){this.swapData&&(this.swapData.dispose(),this.swapData=null),this._onCityChange&&(o().env.unregister(60001,this._onCityChange,this),this._onCityChange=null),this.init=null,e(698).onUnload(this)}})})),window.define("687",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports=function(e){return!0,!0}})),window.define("688",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(103),A=new(e(101))("/an/gear/dpmapp/api/readLionConfig/loadCity",{domain:e(99).DOMAIN,method:"GET",retryMax:0,priority:2,skipPreload:!1,header:{"content-type":"application/json"}}),O=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),t.call(this,a.defaultProtocol,e)}return a}(P);O.defaultProtocol=A,t.exports=O})),window.define("689",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7)(e(26));t.exports=function(t,a,n,i){var o,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=e(690),c=d.createSwapData(t,n,i,r,s),u=i?Object.keys(i):[];function l(e,t){u&&a&&c&&t.swapData===c&&-1!==u.indexOf(t.field)&&a.setData((0,b.default)({},t.field,t.newData))}return r&&(u=u.concat(Object.keys(r))),t.register(43002,l,null),c.dispose=(o=c.dispose,function(){t.unregister(43002,l,null),o.apply(c),c=null,a=null,u=null}),c}})),window.define("698",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=e.map((function(e){return new e(t)}));t.specWidgetInstanceArray?(t.widgetInstanceArray=t.specWidgetInstanceArray.concat(n),t.specWidgetInstanceArray=null):t.widgetInstanceArray=n;var i={};t.widgetInstanceArray.forEach((function(e){if(e.getPrivateData){var a=e.getPrivateData(t);return Object.assign(i,a)}})),t.setData(i),i=null,t.widgetInstanceArray.forEach((function(e){e.injectPrivateFunction&&e.injectPrivateFunction(t)})),t.widgetInstanceArray.forEach((function(e){e.onPageInit&&e.onPageInit(t,a)}))},onUnload:function(e){e.widgetInstanceArray&&e.widgetInstanceArray.length&&(e.widgetInstanceArray.forEach((function(t){t&&t.dispose&&t.dispose(e)})),e.widgetInstanceArray=null)},forEachWidget:function(e,t){e&&e.widgetInstanceArray&&t&&e.widgetInstanceArray.forEach(t)}}})),window.define("699",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(700),k=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{title:"大众点评",navHeightPx:0,navTopPx:0,navRightPaddingRpx:0,acctratHeight:0,searchInputWidth:0}}},{key:"injectPrivateFunction",value:function(e){var t=this;e.gotoMyInfo=function(e){o().navigation.forwardTo({url:"stlk://my"})},e.tapOpenApp=function(){t.launchAppBtn.openAndDownload()}}},{key:"onPageInit",value:function(e){var t,a,n=750/o().runtimeInfo.windowWidth,r=12;if(e.data.supportNavStyle?(t="IOS"===o().runtimeInfo.deviceSystem?40:44,a="IOS"===o().runtimeInfo.deviceSystem?44:20):(t=Math.floor(56/n),a=0),e.data.supportNavStyle&&void 0!==i&&i.getMenuButtonBoundingClientRect){var s=i.getMenuButtonBoundingClientRect();a=s.top,t=s.height;var d=o().runtimeInfo.windowWidth-s.right;r+=(s.width+d+2)*n}e.setData({navTopPx:a,navHeightPx:t,navRightPaddingRpx:T(r),searchInputWidth:260})}},{key:"dispose",value:function(e){e.gotoMyInfo=null,e.tapOpenApp=null}}]),e}();t.exports=k})),window.define("701",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k=C(e(642)),x=C(e(176)),P=C(e(178)),A=C(e(180));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,A.default)(e);if(t){var i=(0,A.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,P.default)(this,a)}}var E=e(700),L=e(702),N=-1,M=function(t){(0,x.default)(i,t);var n=O(i);function i(){return(0,S.default)(this,i),n.call(this,"ViewMainKK")}return(0,T.default)(i,[{key:"getPrivateData",value:function(e){return this.kkDataPrepared=!1,Object.assign({channelX:0,channelH:E(312),secondPagePercent:0},(0,k.default)((0,A.default)(i.prototype),"getPrivateData",this).call(this,e))}},{key:"injectPrivateFunction",value:function(e){(0,k.default)((0,A.default)(i.prototype),"injectPrivateFunction",this).call(this,e);var t,a=this,n=-1,s=-1,d=-1,c=-1,u=0,l=0,p=-1,h=750/r().runtimeInfo.windowWidth;t={takeaway:{appKey:"OH9cGOCgFeij1gmQ8B4TP2pLL3NVLP1n",path:"/pages/index/index?scene=dianping",envVersion:"release"}};var f,g,m,v,w=1,_=2,y=3,I=w;function D(e,t){var n=t.delta;if((v-=n)<=0)a.updateInterpolation&&(r().env.unregister(21007,a.updateInterpolation),a.updateInterpolation=null),l=g;else{var i=v/m,o=Math.sin((1-i)*Math.PI/2);l=f+(g-f)*o}b()}function b(){if(e.data.gearViewMainKKArray&&!(e.data.gearViewMainKKArray.length<11))if(l<0){var t=150*Math.max(2,Math.ceil((e.data.gearViewMainKKArray.length-10)/5))-300+12,a=1-(750+l)/750;a>1&&(a=1),e.setData({secondPagePercent:a,channelX:E(l),channelH:E(312+a*t)})}else e.setData({secondPagePercent:0,channelX:E(l),channelH:E(312)})}a.setInterpolation=function(e,t){0!==e?(a.updateInterpolation||(a.updateInterpolation=D.bind(a),r().env.register(21007,a.updateInterpolation)),g=t,m=v=1===e?180:Math.max(180,Math.abs(t-l)/175*120),f=l):a.updateInterpolation&&(r().env.unregister(21007,a.updateInterpolation),a.updateInterpolation=null)}.bind(a),e.gotoMiniProgram=function(e){if(t.hasOwnProperty(e.target.dataset.uid)){var a=e.target.dataset.uid;o.navigateToSmartProgram({appKey:t[a].appKey||"",path:t[a].path||"",envVersion:t[a].envVersion||"release",success:function(){},fail:function(e){}})}},e.onTouchChannel=function(i){switch(i.type){case"touchstart":!function(e){var t,i=e.changedTouches;-1===N&&(t=o(i))&&(N=t.identifier,d=n=t.pageX,c=s=t.pageY,u=l,p=Date.now(),a.setInterpolation(0,0))}(i);break;case"touchmove":r(i);break;default:!function(i,o){if(I=w,-1!==N&&i){N=-1;var r=(d-n)*h,f=Date.now()-p,g=0;f&&f<350&&(g=r/f),d=n=-1,c=s=-1;var m=g*g/400,v=l;if(Math.abs(g)>.001){var _=Math.abs(g)/m;v+=g/2*_}else v=l,Math.abs(r)<=5&&f<312&&o.target.dataset&&o.target.dataset.uid&&(t.hasOwnProperty(o.target.dataset.uid)||e.onTapViewMainKK({type:"tap",target:o.target,currentTarget:o.target}));v<=-750?a.setInterpolation(1,-750):v<(l<u?120:-120)*(f<350?1:.5)-350?a.setInterpolation(2,-750):v<0?a.setInterpolation(2,0):a.setInterpolation(1,0)}}(r(i),i)}function o(e,t){if(!e)return null;if(void 0===t||-1===t)return e[0];for(var a=0;a<e.length;a++)if(e[a].identifier===t)return e[a];return null}function r(e){var t,i=e.changedTouches,r=e.preventDefault;if(-1!==N&&(t=o(i,N))){d=t.pageX,c=t.pageY;var p=d-n,f=Math.abs(p),g=Math.abs(c-s),m=h*(p*p+g*g);if((!a.rawDataFull||a.rawDataFull.length<10)&&(p=f=0),(l=u+h*p)<-750){var v=-(l+750);l=-750-3*Math.sqrt(v)}else if(l>0){var D=l;l=3*Math.sqrt(D)}I===w&&m>800&&(I=g>f?y:_),I===_&&(b(),r&&r())}return t}}}},{key:"onPageInit",value:function(t){var n=this;this.onCityChange=function(){h.call(n)},this.onPageHomeShow||(this.onPageHomeShow=function(){N=-1}.bind(this),r().env.register(20017,this.onPageHomeShow));var o=e(91),s="__CACHE@PAGE_MAIN:CHANNEL_ICON_RECENT __";this.rawDataFull=o.getLocalStorageSync(s);var d=a((function(){clearTimeout(d);for(var e=Math.min(t.data.gearViewMainKKArray.length,11),a=[],n=0;n<e;n++){var i=t.data.gearViewMainKKArray[n];i.label&&a.push({instanceUID:i.instanceUID,label:i.label})}o.setLocalStorageSync(s,a)}),1e3);this.rawDataFull||(this.rawDataFull=[]);var c=[{instanceUID:"food",label:"美食"},{instanceUID:"takeaway",label:"美团外卖"},{instanceUID:"fun",label:"休闲/玩乐"},{instanceUID:"hotel",label:"酒店/民宿"},{instanceUID:"travel",label:"景点/周边游"},{instanceUID:"foot",label:"按摩/足疗"},{instanceUID:"ktv",label:"KTV"},{instanceUID:"sport",label:"健身/运动"}];if(0===this.rawDataFull.length)this.rawDataFull=c;else for(var u=0;u<c.length;u++){for(var l=c[u],p=0;p<this.rawDataFull.length;p++)if(this.rawDataFull[p].instanceUID===l.instanceUID){l=null;break}l&&this.rawDataFull.push(l)}function h(){this.seqArray=null;var a=e(703);r().h.request(new a({data:{sourceId:0,cityId:t.data.selCityId||1},callback:function(a){var n=this,i=a&&a.serverData&&a.serverData.data&&a.serverData.data.data;if(i&&200===i.code){if(this.seqArray=i.result.map((function(e){return e.contentId})),this.rawDataFull.length>20){var o=!1,s=e(704).getGearInfo("rf_syjgwlb");s&&(o=3===s.status||4===s.status);var d=function(){var e=c.map((function(e){return e.instanceUID}));n.rawDataFull.forEach((function(t){-1===e.indexOf(t.instanceUID)||t.gear||(t.showPrority=1/0)}))};o?d():this.onGearLoaded||(this.onGearLoaded=function(e,t){t.gearInfo&&"rf_syjgwlb"===t.gearInfo.id&&d()},r().env.register("__ON_A_GEAR_SCRIPT_LOEADED_",this.onGearLoaded)),function(){this.seqArray=null;var a=e(703);r().h.request(new a({data:{sourceId:0,cityId:t.data.selCityId||1},callback:function(t){var a=this,n=t&&t.serverData&&t.serverData.data&&t.serverData.data.data;if(n&&200===n.code){this.seqArray=n.result.map((function(e){return e.contentId}));var i=!1,o=e(704).getGearInfo("rf_syjgwlb");if(o&&(i=3===o.status||4===o.status),i){for(var r=0;r<this.rawDataFull.length;r++){var s=this.rawDataFull[r];s.gear&&s.gear.contentId&&("string"==typeof s.gear.contentId&&(s.gear.contentId=s.gear.contentId.split(",").map((function(e){return parseInt(e)}))),s.showPrority=1/0)}this.seqArray.forEach((function(e,t){for(var n=0;n<a.rawDataFull.length;n++){var i=a.rawDataFull[n];if(i.gear)if(i.gear.contentId){if(-1!==i.gear.contentId.indexOf(e)){i.showPrority===1/0&&(i.sortPrority=50+(t<10?4*t:40+.25*(t-10)),i.showPrority=i.gear.commonConfig.showPrority);break}}else;}})),this._isSetData=!0,this.updatePageData()}}}.bind(this)}))}.call(this)}}}.bind(this)}))}this.onGearViewAddPrority||(this.onGearViewAddPrority=function(e,n){var i=this;if(!n.gear)return;if(n.gear&&"ViewMainKK"!==n.gear.className)return;if(this.seqArray){var o=n.gear;if(o.contentId){for(var r=o.contentId.split(",").map((function(e){return parseInt(e)})),s=0;s<this.seqArray.length;s++)if(-1!==r.indexOf(this.seqArray[s]))return o.commonConfig.sortPrority=50+(s<10?4*s:40+.25*(s-10)),void(this._delayUpdateIcon||(this._isSetData=!1,this._delayUpdateIcon=a((function(){clearTimeout(i._delayUpdateIcon),i._delayUpdateIcon=0,t.onTouchChannel&&(i._isSetData=!0,i.updatePageData())}),0)));o.commonConfig.showPrority=1/0}}else this._isSetData=!1}.bind(this),r().env.register("__ON_GEAR_VIEW_ADD__",this.onGearViewAddPrority)),(0,k.default)((0,A.default)(i.prototype),"onPageInit",this).call(this,t),h.call(this)}},{key:"dispose",value:function(e){this.onCityChange=null,this.seqArray=null,e.onTouchChannel=null,this.updateInterpolation&&(r().env.unregister(21007,this.updateInterpolation),this.updateInterpolation=null),this.onGearViewAddPrority&&(r().env.unregister("__ON_GEAR_VIEW_ADD__",this.onGearViewAddPrority),this.onGearViewAddPrority=null),this.onGearLoaded&&(r().env.unregister("__ON_A_GEAR_SCRIPT_LOEADED_",this.onGearLoaded),this.onGearLoaded=null),this.onPageHomeShow&&(r().env.unregister(20017,this.onPageHomeShow),this.onPageHomeShow=null),(0,k.default)((0,A.default)(i.prototype),"dispose",this).call(this,e)}}]),i}(L);t.exports=M})),window.define("702",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(26)),S=b(e(102)),T=b(e(104)),k=e(700);t.exports=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];(0,S.default)(this,e),this._delgateViewName=t,this._maxIcon=a,this._widthBound=n,this._heightBound=i,this._isSetData=r,this._useDataUpdateFunction=o,"function"==typeof o&&(this.onViewNeedUpdate=o.bind(this),this._useDataUpdateFunction=1)}return(0,T.default)(e,[{key:"getPrivateData",value:function(e){return(0,C.default)({},"gear"+this._delgateViewName+"Array",[])}},{key:"injectPrivateFunction",value:function(e){var t=this;e["onTap"+this._delgateViewName]=function(e){for(var a,n=e.currentTarget.dataset,i=n.uid,r=n.issidebar,s=0;s<t.rawDataFull.length;s++)if((a=t.rawDataFull[s]).instanceUID===i){if(a.gear){if(r&&o().env.notify(36001,{behaviorType:"moduleClick",data:{bid:"b_dianping_nova_auyqsd03_mc",activity_id:a.gear.activityId}}),a.gear.commonConfig.preventMultiClick&&a._isTapping)return;var d=o().workflow.createGearImpl(a.gear.commonConfig.clickAction);d&&(a._isTapping?a._isTapping++:a._isTapping=1,d.completeFunction=function(){a._isTapping--},d.doAction())}return}}}},{key:"onPageInit",value:function(e){var t=this;if(!this.onGearViewAddRemove){this.onGearViewAddRemove=function(e,t){if(t.gear&&t.gear.className!==a._delgateViewName)return;var n=this.rawDataFull;if("__ON_GEAR_VIEW_ADD__"===e)r(n,t.gear);else if("__ON_GEAR_VIEW_REMOVE__"===e){for(var i=0;i<n.length;i++){var o=n[i];if(o.instanceUID===t.gear.instanceUID){n.splice(i,1);break}if(o.instanceUID===t.gear.imageUrl){delete o.gear;break}}s(n)}}.bind(this),o().env.register("__ON_GEAR_VIEW_ADD__",this.onGearViewAddRemove),o().env.register("__ON_GEAR_VIEW_REMOVE__",this.onGearViewAddRemove);var a=this;this.rawDataFull||(this.rawDataFull=[]),this.rawDataFull.forEach((function(e,t){void 0===e.showPrority&&(e.showPrority=50),void 0===e.sortPrority&&(e.sortPrority=50),e.index=t}));var n=o().gearViewMgr.getExistGearView(this._delgateViewName);if(n){this._isSetData=!1;var i=Object.keys(n).length;n.forEach((function(e,a){a===i-1&&(t._isSetData=!0),r(t.rawDataFull,e)}))}return this.updatePageData=function(e){e&&(t.rawDataFull=e),s(t.rawDataFull)},void s(this.rawDataFull)}function r(t,a){for(var n,i=!1,o=0;o<t.length;o++){var r=t[o];if(r.gear===a||r.gear&&r.gear.instanceUID===a.instanceUID)return;r.gear||(a.imageUrl!==r.instanceUID&&a.instanceUID!==r.instanceUID||(i=!0,n=r))}if(n||(n={instanceUID:a.instanceUID,index:t.length,gear:a.commonConfig.clickAction?a:null}),n.gear=a.commonConfig.clickAction?a:null,n.showPrority=a.commonConfig.showPrority,n.sortPrority=a.commonConfig.sortPrority,a.label&&(n.label=a.label),a.imageUrl)if("//"===a.imageUrl.substr(0,2)){var d=e.data.pageProtocol||"https";n.imageUrl=d+a.imageUrl}else("data:image"===a.imageUrl.substr(0,10)||a.imageUrl.length>10)&&(n.imageUrl=a.imageUrl);a.contentId&&(n.contentId=a.contentId),a.hasOwnProperty("imageWidth")&&(n.imageWidth=a.imageWidth,n.imageHeight=a.imageHeight),i||t.push(n),s(t)}function s(t){var n,i=t.slice();i.sort((function(e,t){return e.showPrority===t.showPrority&&e.sortPrority===t.sortPrority?e.index-t.index:e.showPrority===t.showPrority?e.sortPrority-t.sortPrority:e.showPrority-t.showPrority})),(i=i.filter((function(t){if(!(t.showPrority>=0&&t.showPrority<65535))return!1;if(!t.gear||!t.gear.hasOwnProperty("pageList"))return!0;var a=t.gear.pageList||"",i=!0;33===a.charCodeAt(0)&&(a=a.substr(0),i=!1);var o=a.split(",").map((function(e){return e.trim()}));n||"mvvm"===(n=e.pageName)&&(n=e.pageMVVMName);var r=-1!==o.indexOf(n);return r&&i||!r&&!i}))).length>a._maxIcon&&(i.length=a._maxIcon),i.sort((function(e,t){return e.sortPrority===t.sortPrority?e.index-t.index:e.sortPrority-t.sortPrority}));var o=i.map((function(e){var t=Object.assign({},e);return void 0!==a._widthBound&&(void 0===a._heightBound?t.imageHeight=a._widthBound*t.imageHeight/t.imageWidth:(t.imageWidth=a._widthBound,t.imageHeight=a._heightBound)),void 0!==a._heightBound&&void 0===a._widthBound&&(t.imageWidth=a._heightBound*t.imageWidth/t.imageHeight),void 0!==t.imageWidth&&(t.imageWidth=k(t.imageWidth),t.imageHeight=k(t.imageHeight)),e.gear&&e.gear.commonConfig&&(e.gear.commonConfig.lxmc&&(t.lxmc=e.gear.commonConfig.lxmc),e.gear.commonConfig.lxmv&&(t.lxmv=e.gear.commonConfig.lxmv)),delete t.showPrority,delete t.sortPrority,delete t.index,delete t.gear,t})),r={};r["gear"+a._delgateViewName+"Array"]=o,a._isSetData&&(a._useDataUpdateFunction?a.onViewNeedUpdate&&a.onViewNeedUpdate(e,r):e.setData(r))}}},{key:"dispose",value:function(e){this.onGearViewAddRemove&&(o().env.unregister("__ON_GEAR_VIEW_ADD__",this.onGearViewAddRemove),o().env.unregister("__ON_GEAR_VIEW_REMOVE__",this.onGearViewAddRemove),this.onGearViewAddRemove=null),this._delgateViewName&&(null!==e&&(e["onTap"+this._delgateViewName]=null),this._delgateViewName=null),this.updatePageData=null,this.useDataUpdateFunction&&(this.onViewNeedUpdate=null)}}]),e}()})),window.define("703",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(103),A=new(e(101))("/an/gear/dpmapp/api/readLionConfig/queryIndexTabIcon",{domain:e(99).DOMAIN,method:"GET",retryMax:0,priority:2,skipPreload:!1,header:{"content-type":"application/json"}}),O=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),t.call(this,a.defaultProtocol,e)}return a}(P);O.defaultProtocol=A,t.exports=O})),window.define("707",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(700),k=e(91),x=[],P=[],A=0,O=0,E=o().runtimeInfo.windowWidth,L=750/E,N=E-2*(parseInt(20/750*E)+parseInt(350/750*E)),M="__CACHE@PAGE_MAIN:FEEDS_RECENT __",R=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{feedCenterDataL:k.getLocalStorageSync(M+"_L")||[],feedCenterDataR:k.getLocalStorageSync(M+"_R")||[],loadMore:!1,isEnd:!1,pageError:!1,pageNo:0,feedItemMargin:N}}},{key:"injectPrivateFunction",value:function(e){e.jumpContentDetail=function(e){if(e.currentTarget.dataset.schema){var t="/"===e.currentTarget.dataset.schema[0]?e.currentTarget.dataset.schema:"/"+e.currentTarget.dataset.schema;o().navigation.forwardTo({url:t})}}}},{key:"onPageInit",value:function(t){var a=this;this.onCityChange=function(){t.setData({feedCenterDataL:[],feedCenterDataR:[],loadMore:!1,isEnd:!1,pageError:!1,pageNo:0}),a.onPageInit(t)},x=[],P=[],A=0,O=0,this.updateNextFeedList||(this.updateNextFeedList=function(e,n){if(n.page===t){var i=t.data,o=i.isEnd,r=i.loadMore,s=i.pageError;if(!(o||r||s))if((A>O?A:O)/L+Number(t.data.channelH.substr(0,t.data.channelH.indexOf("rpx")))/L+64-n.scrollViewBottom<=5){var d=t.data.pageNo;if(d>9)return;t.setData({pageNo:d+1}),a.queryContentList()}}},o().env.register(40044,this.updateNextFeedList)),this.queryContentList=function(){t.setData({loadMore:!0});var n=t.data.pageNo,i=e(708);o().h.request(new i({data:{selCityId:t.data.selCityId,pageStart:n,pageSize:10,sourceId:0,os:"ios",cityId:"*",latitude:"*",longitude:"*",lxCuid:decodeURIComponent(k.getLocalStorageSync("_lx_sdk_lxcuid")||k.getLocalStorageSync("_lxsdk_cuid")||k.getSessionStorageSync("_lxsdk_cuid")||"")},callback:function(e){var a=e&&e.serverData&&e.serverData.data&&e.serverData.data.data;if(a&&200===a.code&&a.result&&a.result.feedsRecordDTOS&&a.result.feedsRecordDTOS.length){var i=a.result.feedsRecordDTOS,r=function(e,t){return e.forEach((function(e,a){o().sc.logV("home.feed",{content_id:e.contentId,feed_type:e.bizType,index:e.bizId});var n=parseFloat(e.picWidth),i=350*((parseFloat(e.picHeight)||1)/n),r=i+(e.title&&e.title.length>13?165:116),s={showAd:e.extraInfo&&"广告"===e.extraInfo.adtag,adFeedback:e.extraInfo&&e.extraInfo.cpmfeedback,contentId:e.contentId,bizId:e.bizId,titleInfo:{title:e.title},headPic:e.picKey,schema:e.schema,authorInfo:{avatar:e.userFace,name:e.userNickName},width:T(350),imageHeight:T(i),likeCount:e.likeCount,num:10*t+a};A<=O?(A+=r,x.push(s)):(O+=r,P.push(s))})),{leftList:x,rightList:P}}(i=i.filter((function(e){return 7!==e.bizType})),n),s=r.leftList,d=r.rightList;t.setData({feedItemMargin:N,loadMore:!1,isEnd:!(i&&i.length),feedCenterDataL:s,feedCenterDataR:d}),k.setLocalStorageSync(M+"_L",t.data.feedCenterDataL.slice(0,2)),k.setLocalStorageSync(M+"_R",t.data.feedCenterDataR.slice(0,2))}else{var c=t.data.pageNo;t.setData({feedItemMargin:N,loadMore:!1,pageError:1===c,pageNo:1===c?1:c-1})}}.bind(a)}))},this.queryContentList()}},{key:"dispose",value:function(e){this.onCityChange=null,e.jumpContentDetail=null,this.updateNextFeedList&&(o().env.unregister(40044,this.updateNextFeedList),this.updateNextFeedList=null)}}]),t}();t.exports=R})),window.define("708",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(103),A=new(e(101))("/an/gear/dpmapp/api/readLionConfig/listFeeds",{domain:e(99).DOMAIN,method:"GET",retryMax:0,priority:2,skipPreload:!1,header:{"content-type":"application/json"}}),O=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),t.call(this,a.defaultProtocol,e)}return a}(P);O.defaultProtocol=A,t.exports=O})),window.define("709",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=(e(99),function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{cityName:""}}},{key:"injectPrivateFunction",value:function(e){e.changeCity=function(){o().sc.g.pageScrollTo({scrollTop:0,duration:0}),o().navigation.forwardTo({url:"/pages/city/city?cityFrom=home"})}}},{key:"onPageInit",value:function(t){var a=this;this.onCityChange=function(){a.onPageInit(t)};var n=t.data.selCityId||1;if(n){this.hasUseCookieCity=!0,this.cityId=n;var i=e(688);o().h.request(new i({data:{cityId:n},callback:function(e){var a=e&&e.serverData&&e.serverData.data;a&&200==a.code&&(t.setData({cityName:a.data&&a.data.cityName||""}),o().userData.cityEnName=a.data&&a.data.cityEnName||"")}.bind(this)}))}}},{key:"dispose",value:function(e){e.changeCity=null,this.onCityChange=null}}]),t}());t.exports=T})),window.define("710",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{}}},{key:"injectPrivateFunction",value:function(e){e.onSearchShow=function(){o().navigation.forwardTo({url:"/pages/websearch/websearch"})}}},{key:"dispose",value:function(e){e.onSearchShow=null}}]),e}();t.exports=T})),window.define("711",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k=C(e(642)),x=C(e(176)),P=C(e(178)),A=C(e(180));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,A.default)(e);if(t){var i=(0,A.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,P.default)(this,a)}}var E=e(702),L=e(700),N=function(e){(0,x.default)(a,e);var t=O(a);function a(){return(0,S.default)(this,a),t.call(this,"ViewSideIcon",8,80,80,M)}return(0,T.default)(a,[{key:"getPrivateData",value:function(e){return Object.assign({sidebarAnime:"",sidebarHeight:""},(0,k.default)((0,A.default)(a.prototype),"getPrivateData",this).call(this))}},{key:"onPageInit",value:function(e){(0,k.default)((0,A.default)(a.prototype),"onPageInit",this).call(this,e),this._lastNum=this.rawDataFull.length,this._lastNum&&this.updatePageData()}}]),a}(E);function M(e,t){if(e){var n=this.rawDataFull.length,i=0;if(this._lastNum===n?t.sidebarAnime="init-exist":(this._lastNum<n?(t.sidebarAnime=0===this._lastNum?"slide-in":"grow",i=1):(i=-1,t.sidebarAnime=0===n?"slide-out":"degrade"),this._lastNum=n),t.gearViewSideIconArray.forEach((function(e,t){e.y=L(90*t+15)})),t.sidebarHeight=L(30+90*Math.max(1,t.gearViewSideIconArray.length)-10),i<0){var o=t.gearViewSideIconArray.map((function(e){return e.instanceUID})),r=[];e.data.gearViewSideIconArray.forEach((function(e,a){-1===o.indexOf(e.instanceUID)&&(e.isDegrade=1,t.gearViewSideIconArray.splice(a,0,e),r.push(e.instanceUID))})),e.setData(t);var s=a((function(){clearTimeout(s);for(var t=e.data.gearViewSideIconArray,a=0;a<t.length;)-1!==r.indexOf(t[a].instanceUID)?t.splice(a,1):a++;e.setData({gearViewSideIconArray:t})}),450)}else if(i>0){var d=e.data.gearViewSideIconArray.map((function(e){return e.instanceUID}));t.gearViewSideIconArray.forEach((function(e){-1===d.indexOf(e.instanceUID)&&(e.isGrow=1)})),e.setData(t)}else e.setData(t)}}t.exports=N})),window.define("712",(function(e,t,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b,C){"use strict";var S=e(7),T=S(e(102)),k=S(e(104)),x=S(e(642)),P=S(e(176)),A=S(e(178)),O=S(e(180));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,O.default)(e);if(t){var i=(0,O.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,A.default)(this,a)}}var L=e(700),N=function(e){(0,P.default)(i,e);var t=E(i);function i(){return(0,T.default)(this,i),t.call(this,"ViewMainMidThrough")}return(0,k.default)(i,[{key:"getPrivateData",value:function(e){return Object.assign({currentBannerNum:0,ulWidth:0,carouselListAnimation:"",isShowCarouselList:!0,carouselList:[]},(0,x.default)((0,O.default)(i.prototype),"getPrivateData",this).call(this,e))}},{key:"injectPrivateFunction",value:function(e){(0,x.default)((0,O.default)(i.prototype),"injectPrivateFunction",this).call(this,e);var t,a=this,o=-1,r=-1,s=-1,d=-1;function c(t,a,n){var i=e.data.carouselList;i[t]&&(i[t].translateX=L(n),i[t].transition="transition: transform ".concat(a,"ms ease"),e.setData({carouselList:i}))}function u(){clearInterval(a.timer)}function l(e,t){if(!e)return null;if(void 0===t)return e[0];for(var a=0;a<e.length;a++)if(e[a].identifier===t)return e[a];return null}function p(){return e.data.currentBannerNum+1>=e.data.carouselList.length?0:e.data.currentBannerNum+1}function h(){return e.data.currentBannerNum-1<0?e.data.carouselList.length-1:e.data.currentBannerNum-1}function f(){e.data.carouselList&&e.data.carouselList.length>1&&(u(),a.timer=n((function(){for(var t=0;t<e.data.carouselList.length;t++)t!==e.data.currentBannerNum&&c(t,0,730);c(e.data.currentBannerNum,400,-730),c(p(),400,0),e.setData({currentBannerNum:e.data.currentBannerNum+1}),e.data.currentBannerNum>=e.data.carouselList.length&&e.setData({currentBannerNum:0})}),2500))}e.onTouchCarouselBanner=function(a){if(e.data.carouselList&&e.data.carouselList.length>1)switch(a.type){case"touchstart":!function(e){var a=e.changedTouches;-1===d&&(t=l(a))&&(d=t.identifier,r=o=t.pageX,u())}(a);break;case"touchmove":!function(a){var n=a.changedTouches,i=a.preventDefault;if(-1!==d&&(t=l(n,d))){r=t.pageX,s=r-o;var c=p(),u=h(),f=e.data.carouselList;f[e.data.currentBannerNum].translateX=L(s),f[e.data.currentBannerNum].transition="transition: transform 0ms ease",c==u?s>0?(f[u].translateX=L(s-730),f[u].transition="transition: transform 0ms ease"):(f[c].translateX=L(s+730),f[c].transition="transition: transform 0ms ease"):(f[c].translateX=L(s+730),f[c].transition="transition: transform 0ms ease",f[u].translateX=L(s-730),f[u].transition="transition: transform 0ms ease"),e.setData({carouselList:f})}i&&i()}(a);break;default:!function(a){var n=a.changedTouches;-1!==d&&(t=l(n,d))&&(Math.abs(s)>=146?s>0?(p()==h()?c(h(),400,0):(c(h(),400,0),c(p(),0,730)),c(e.data.currentBannerNum,400,730),e.setData({currentBannerNum:e.data.currentBannerNum-1})):(p()==h()||c(h(),0,730),c(p(),400,0),c(e.data.currentBannerNum,400,-730),e.setData({currentBannerNum:e.data.currentBannerNum+1})):(c(e.data.currentBannerNum,400,0),c(p(),400,730),c(h(),400,-730)),e.data.currentBannerNum<0?e.setData({currentBannerNum:e.data.carouselList.length-1}):e.data.currentBannerNum>=e.data.carouselList.length&&e.setData({currentBannerNum:0}),f());d=-1}(a)}},this._autoPlay=f}},{key:"onPageInit",value:function(e){function t(){var t=e.data.gearViewMainMidThroughArray.slice();if(t&&t.length){for(var a=730*t.length,n=0;n<t.length;n++)t[n].left=L(-730*n),t[n].translateX=L(730);t[0].translateX=L(0),t.length&&t.length>=3&&(t[t.length-1].translateX=L(-730)),e.setData({carouselList:t,ulWidth:L(a)})}}(0,x.default)((0,O.default)(i.prototype),"onPageInit",this).call(this,e),t(),this.onGearViewMainMidThroughAddRemove||(this.onGearViewMainMidThroughAddRemove=function(n,i){if(i.gear&&"ViewMainMidThrough"!==i.gear.className)return;"__ON_GEAR_VIEW_ADD__"===n?e.data.carouselList&&e.data.carouselList.length||e.setData({isShowCarouselList:!0,carouselListAnimation:"zoomIn"}):"__ON_GEAR_VIEW_REMOVE__"===n&&e.data.carouselList&&1===e.data.carouselList.length&&(e.setData({carouselListAnimation:"zoomOut"}),a((function(){e.setData({isShowCarouselList:!1})}),700));t()}.bind(this),s().env.register("__ON_GEAR_VIEW_ADD__",this.onGearViewMainMidThroughAddRemove),s().env.register("__ON_GEAR_VIEW_REMOVE__",this.onGearViewMainMidThroughAddRemove)),this._autoPlay()}},{key:"dispose",value:function(e){e.onTouchCarouselBanner=null,this.handleAnimate&&(s().env.unregister(21007,this.handleAnimate,this),this.handleAnimate=null),this.onGearViewMainMidThroughAddRemove&&(s().env.unregister("__ON_GEAR_VIEW_ADD__",this.onGearViewMainMidThroughAddRemove),s().env.unregister("__ON_GEAR_VIEW_REMOVE__",this.onGearViewMainMidThroughAddRemove),this.onGearViewMainMidThroughAddRemove=null),(0,x.default)((0,O.default)(i.prototype),"dispose",this).call(this,e)}}]),i}(e(702));t.exports=N})),window.define("713",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C,S,T=e(7),k=T(e(102)),x=T(e(104)),P=e(714).setHistory,A=e(93),O=e(107),E=e(101),L=e(103),N=e(99),M=e(91),R="b_ztsiyl1p",U="b_dianping_nova_qqy5tp5m_mc",B="b_tw1jj5tn",V="b_6hihj7im",q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j=function(){function e(){(0,k.default)(this,e)}return(0,x.default)(e,[{key:"getPrivateData",value:function(e){return{searchSuggest:[],currKeyword:"",notLoading:!1,keyword:"",from:"",lxData:{}}}},{key:"injectPrivateFunction",value:function(e){e.handleTap=function(){A.moduleClick(V,e.data.lxData)},e.clearSearch=function(){},e.handleSearch=function(t){var a=e.data.keyword&&e.data.keyword.trim()||"";P(a),a&&"shop"===a.type?r().navigation.redirectTo({url:"/pages/detail/detail?shopUuid=".concat(a.shopUuid||a.shopId)}):a?r().navigation.redirectTo({url:"/pages/list/list?keyword=".concat(a)}):r().navigation.redirectTo({url:"/pages/list/list"})},e.handleInput=function(t){var a=t.target.value||t.detail.value;e.setData({keyword:a,currKeyword:a||""}),e.addSearchQueue(a.trim())},e.dealSuggestList=function(e){return(M.getLocalStorageSync("keyword_history")||[]).map((function(t){e.map((function(a,n){a.keyword===t&&(e.splice(n,1),a.isInHistory=!0,e.unshift(a))}))})),e},e.addSearchQueue=function(t){S=t;var n,i=(new Date).getTime(),o=e.data.selCityId||r().userData.dpCityId||1;O.isDataPrepared()&&(n={latitude:r().userData.latitude,longitude:r().userData.longitude});var s=function(t){var a={keyword:t};void 0!==o&&(a.cityId=o),n&&n.latitude&&n.longitude&&(a.lat=n.latitude,a.lng=n.longitude);var s="".concat(N.DOMAIN).concat("/wxmapi/search/searchsuggest");r().h.request(new L(new E(s,{data:a}),{callback:function(a){if((a=a.serverData&&a.serverData.data)&&200==a.code){if(t===e.data.currKeyword){C=i;var n=e.dealSuggestList&&e.dealSuggestList(a.suggestList),o=q({},r().induction.LX.getLxData(),{query_id:a.queryId});e.setData({searchSuggest:n,notLoading:!0,lxData:o}),A.moduleView(B,o)}}else e.setData({notLoading:!0})}}))};i-C<1e3?a((function(){S===t&&s(t)}),1e3+C-i):s(t)},e.navURL=function(t){var a=t.currentTarget.dataset,n=a.url,i=a.keyword;e.data.from;if(i=i||e.data.currKeyword,n&&-1===n.indexOf("dianping://")){P(i);var o={url:n};0===n.indexOf("http")&&(o.type="h5");var s=t.currentTarget.dataset,d=q({},e.data.lxData,{keyword:e.data.currKeyword,title:i,index:s.index});s.direct?A.moduleClick(U,d):A.moduleClick(R,d),r().navigation.redirectTo(o)}}}},{key:"onPageInit",value:function(e){var t=this;this.onCityChange=function(){t.onPageInit(e)};var a=e.data.keyword;a&&(e.setData({currKeyword:a}),e.addSearchQueue(e.data.keyword))}},{key:"dispose",value:function(e){e.handleTap=null,e.handleInput=null,e.clearSearch=null,e.handleSearch=null,e.dealSuggestList=null,e.addSearchQueue=null,e.navURL=null,this.onCityChange=null}}]),e}();t.exports=j})),window.define("714",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7)(e(19)),C=e(91);t.exports={setHistory:function(e){var t=C.getLocalStorageSync("__KEYWORD_HISTORY__")||[];if("string"==typeof e){var a=t.indexOf(e);-1!==a&&t.splice(a,1),""!==e&&t.unshift(e)}else{for(var n=-1,i=0;i<t.length;i++)"object"===(0,b.default)(t[i])&&t[i].shopId==e.shopId&&(n=i);-1!==n&&t.splice(n,1),t.unshift(e)}t.length>7&&(t=t.splice(0,7)),C.setLocalStorageSync("__KEYWORD_HISTORY__",t)}}})),window.define("717",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(134),C=e(97);b({pageName:"page_detail",onLoad:function(e){o().navigation.redirectTo({url:C("/pages/poi/poi",e)})}})})),window.define("719",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7)(e(40)),S=e(134),T=(e(105),e(231)),k=e(114),x=e(93),P=e(720),A=e(101),O=e(103),E=e(99),L=e(722),N=(e(95),e(97)),M=e(721),R=e(91),U=e(137),B=e(111),V="pages/detail/detail",q=[{name:"shop-head"},{name:"shop-info"},{name:"shop-map"},{name:"info-err"}],j={pageBid:"c_1ilqz4n8",shareBid:"b_1w9q56h1",openAppTopBarMc:"b_dianping_nova_cs03955h_mc",openAppBottomBarMc:"b_dianping_nova_f4c3gcu9_mc"},F=["shop-branch","shop-mall","shop-nearby"];S({pageName:"poi",data:{slotItems:[{name:"shop-head"}],shopModules:{"shop-head":{}},mSource:"mina_default",online:1,utm_medium:"online",offuserId:null,pageUrl:"pages/detail/detail",hasPopup:!1,onShowCallCounter:0,reviewListParams:{},scopeDataList:[],shouldShowShopInfoBar:!1,showShopInfoBar:!1,showBottomVoteList:!1,showVoteListLayer:!1,shouldShowDinvote:!0,showGuide:!1,chatGroupId:"",shopIdList:"",description:"",addToVoteType:1,bottomVoteList:[],commandData:{},downLoadReviewData:{},downLoadDishData:{},isDownLoadPop:!1,paySubsidyShow:!1,notCoop:!1,isMapiError:!1,mapiError:{},isInfoError:!1,isShopOffline:!1,infoError:{isError:!1,iconType:"1",description:"哎呀，页面加载失败了"},hasMask:!1,mApiShopInfo:null,lxdata:{pageBid:j.pageBid},loadOptions:{},otherShopInfo:{},bigPics:[],route:"",picIndex:0,openAppBarInfo:{topBarBid:j.openAppTopBarMc,topBarLaunchAppUrl:"",topBarLongChainUrl:"https://m.dianping.com",bottomBarBid:j.openAppBottomBarMc,bottomBarLaunchAppUrl:"",bottomBarLongChainUrl:"https://m.dianping.com"},openApp:{pageName:"shopdetail",cid:j.pageBid}},onLoad:function(t){var a=this;this.env=new(e(723)),T.log("".concat(V," load options: ").concat(JSON.stringify(t)));try{if(t.from&&"list"===t.from)k.createFirstContentfulPaint(["shopInfo","mapiHeader"],10);else if(t.from&&"default"===t.from)k.createFirstContentfulPaint(["shopInfo","mapiHeader"],1);else{var n=o().bridge.getShowOptions();n&&1036==n.scene?k.createFirstContentfulPaint(["shopInfo","mapiHeader"],11):k.createFirstContentfulPaint(["shopInfo","mapiHeader"],1)}}catch(e){console.addError("detail pageSpeed error =>",JSON.stringify(e))}if(this.shopUuid=t&&t.shopUuid,this.shopId=t&&t.shopId,60==t.shopType){this.setData({slotItems:[],shopModules:{}})}var i="offline-qrcode"==t.utm_medium?0:1;t.online=i,this.defaultSlots=q;var r=Date.now(),s=P.getCache(t);if(k.addPoint({position:6,duration:Date.now()-r}),s){var d=s.shopInfo&&s.shopInfo.loadOptions;d&&(this.setLaunchAppUrl(d),this.setData({loadOptions:d,slotItems:s.slotItems||[],mApiShopInfo:s.mApiShopInfo||{},isShopOffline:s.mApiShopInfo&&1===s.mApiShopInfo.validateStatus,shopInfo:s.shopInfo||{},shopId:s.shopInfo&&s.shopInfo.shopId,shopModules:this.slot2Module(s.slotItems),isCache:s.isCache||"",islistcache:s.islistcache||"",bigPics:s.bigPics||""},(function(){s.isCache&&(k.addFirstContentfulPaint("mapiHeader"),k.addFirstContentfulPaint("shopInfo"))})),this.env.notify("__poi_data_change__",{loadOptions:d,dishTags:s.shopInfo&&s.shopInfo.dishTags}))}function c(e){a.shopUuid=e&&e.shopUuid,a.shopId=e&&e.shopId,a.params=e||t;var n={},i="dianping://shopinfo";a.shopUuid?i+="?shopuuid="+a.shopUuid:a.shopId&&(i+="?id="+a.shopId),a.params.launchAppUrl=i,a.params.cid=j.pageBid,n={launchAppUrl:i,cid:j.pageBid},n={shopUuid:a.shopUuid},a.shopUuid||(n.shopId=a.shopId),e.pageName="shop";var o=t.scopeDataList||"[]";try{o=JSON.parse(o)||[]}catch(e){o=[],T.log("JSON.parse error",e)}a.init(e),a.setData({lxdata:{poi_id:t.shopId||t.shopUuid,offuser_id:t.offuserId},utm_medium:e.utm_medium||"",offuserId:t.offuserId||"",description:t.guideTitle?decodeURIComponent(t.guideTitle):"",reviewListParams:n,scopeDataList:o},(function(){a.aduInit(t)}))}this.options=t,t.shopUuid||t.shopuuid?(t.shopuuid=t.shopUuid||t.shopuuid,t.shopUuid=t.shopUuid||t.shopuuid,t.shopId=this.shopId||t.shopUuid||t.shopuuid,c(t)):t.shopId?(t.shopUuid=t.shopId,t.shopuuid=t.shopId,c(t)):this.dealOptions(t).then(c).catch((function(e){k.addError("parseShopId error => ",JSON.stringify(e))})),b||(b=[e(724),e(725),e(726),e(729),e(730),e(731),e(732),e(733),e(735),e(736),e(737),e(738),e(739),e(740),e(741),e(742),e(743),e(744),e(745),e(746),e(747),e(748),e(749)]),e(698).onLoad(b,this,t)},onShow:function(){this.hasLoad;var e=o().bridge.getShowOptions(),t=o().userData.userid,a=1;if(t&&e&&e.offuserId&&t==e.offuserId&&(a=0),this.data.lxdata.iscustomer=a,x.pageView(j.pageBid,this.data.lxdata),"offline-qrcode"===this.data.utm_medium&&this.setData({onShowCallCounter:this.data.onShowCallCounter+1}),e&&e.scene){var n=e.scene;if(1036==n||1==e.canLaunchApp&&-1!==["1038","1089","1090"].indexOf(n)){var i=this.updateAppLaunch(),r=this.data.shopInfo&&this.data.shopInfo.appLaunchSwitch;r&&(i="off"!==r&&i),this.setData({scene:n,canLaunchApp:i})}else this.setData({scene:n})}},updateAppLaunch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!0,a=this.data.shopInfo&&this.data.shopInfo.appLaunchSwitch;if(a&&"off"===a)return a=!1;try{var n=(new Date).getDay(),o=i.getStorageSync("dp_launch_switch")||"";if(o){var r=o.lastModifyDay;Math.abs(r-n)<e&&(t=o.canLaunchApp)}}catch(e){}return t},dealOptions:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(750),i=a.shopId,r=a.mtShopId;a.shopUuid||a.shopuuid;return new Promise((function(e){if(a.scene){var s=n.parse(a.scene);i=parseInt(s.id||s.shopId),a.shopId=i,e(a)}else{if(!(r=parseInt(a.mtShopId)))return void t.setData({isError:!0});o().h.request(new O(new A(L.MTSHOP_PARSE,{domain:E.DOMAIN,method:"GET",data:{mtShopId:r}}),{callback:function(n){var i=n.serverData||null;i&&200===i.statusCode&&i.data&&200===i.data.code?(a.shopUuid=i.data.shopUuid,a.shopuuid=i.data.shopUuid,a.shopId=i.data.shopUuid,e(a)):(t.setData({isError:!0}),k.addError("MTShop解析出错",JSON.stringify(i)))}}))}}))},aduInit:function(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=e(751);var n={adshop_id:this.shopUuid||this.shopId,pageName:V};t&&t.init(a,n)},slot2Module:function(e){e=e||this.defaultSlots;var t={};return e.map((function(e){e&&e.name&&(t[e.name]=e.config||e.name)})),t},onPullDownRefresh:function(){this.init(this.params),o().sc.g.stopPullDownRefresh()},onShareAppMessage:function(){x.moduleClick(j.shareBid);var e={};this.shopUuid?e.shopUuid=this.shopUuid:e.shopId=this.shopId;var t=o().userData.userid;e.offuserId=t||"";var a=x.getSharePath(N("/pages/detail/detail",e)),n=this.data.mApiShopInfo,i=n&&n.name?n.name:"";return n&&n.branchName&&(i+="(".concat(n.branchName,")")),{title:this.data.shareTitle||i,path:a,imageUrl:this.data.sharePicPath||""}},handleReLoad:function(e){var t=e.detail||e.currentTarget.dataset.module;"mapiError"===t?this.fetchMapiShopInfo(this.params):"shopinfo"!==t||this.data.islistcache?this.init(this.params):this.fetchShopInfo(this.params)},init:function(e){this.fetchShopInfo(e),this.fetchMapiShopInfo(e),this.fetchShopOther(e),this.fetchShopCooperation(e)},fetchShopInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.shopUuid,n=t.shopId,i=t.online,r=this.defaultSlots,s={isError:!1,iconType:"1",description:"哎呀，页面加载失败了"},d=this.slot2Module(r);if("subpackage"===t.mode)try{var c=this.shopId||this.shopUuid,u=R.getLocalStorageSync("__CACHE@PAGE_DETEAIL:_dp_shopinfo");if(u&&u.cacheShopId==c&&u.data){var l=u.data;return void this.dealShopInfo(l,d,r,{noCache:!0})}}catch(e){T.log("get storage shopinfo fail",e)}var p={online:i},h=Date.now();t.shopUuid?p.shopUuid=a:p.shopId=n;var f=x.get("utm")||{};p.utm_source=f.utm_source||"",t.from&&(p.from=t.from),p.mtsiReferrer=encodeURIComponent(N(V,this.options)),T.log("".concat("detail"," fetchShopInfo params: ").concat(JSON.stringify(p))),o().h.request(new O(new A(L.SHOP_INFO,{domain:E.DOMAIN,header:null,method:"GET",data:p}),{callback:function(t){k.addPoint({position:4,duration:Date.now()-h}),T.log("detail shopinfo resCode: ".concat(t.serverData.statusCode));var a=t.serverData&&t.serverData.data||null;if(0===t.errorCode&&a&&200===a.code){a.redirectData;e.dealShopInfo(a,d,r),e.shopInfoCallBack(a.shopInfo||{})}else k.addPoint({position:4,duration:Date.now()-h}),e.setData({isInfoError:!0,infoError:s,slotItems:r,shopModules:d}),T.log("detail shopinfo 数据出错: ".concat(JSON.stringify(a)))}}))},dealShopInfo:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.shopInfo,s=r.slotItems,d=t,c=r.mSource;s?(M.MODULES_MOCK&&(s=M.SHOP_SLOTS),d=this.slot2Module(s)):s=a;var u=Date.now(),l=r.shopType,p=r.shopIdDTO||{},h=Object.assign(x.getLxData(),{abtest:{dot:r.dot},mSource:this.data.mSource,online:this.params.online,shopType:l,poi_id:this.shopUuid||this.shopId}),f=this.options,g=o().userData.userid;g&&f&&f.offuserId&&f.offuserId,x.pageView(j.pageBid,(0,C.default)((0,C.default)({},h),{},{query:f}));var m=Object.assign({},this.params,p,{shopType:l});r.loadOptions=m,this.setLaunchAppUrl(m),this.setData({loadOptions:m,lxdata:h,isInfoError:!1,slotItems:s,shopModules:d,shopInfo:r,shopId:r.shopId,mSource:c},(function(){k.addPoint({position:5,duration:Date.now()-u}),n.data.isCache||k.addFirstContentfulPaint("shopInfo")})),this.env.notify("__poi_data_change__",{loadOptions:m,dishTags:r&&r.dishTags}),this.params=m,this.hasLoad=!0,i.noCache||(P.setShopStyleCache(c,s),P.setStorageShop(this.shopUuid||this.shopId,{shopInfo:r}));var v={};F.map((function(e,t){v[e]=n.data.shopModules[e]})),this.setData({dyShowModule:v,dyShopInfo:JSON.stringify({dyLxData:Object.assign({},h),dyLoadOptions:Object.assign({},this.params),moduleConfig:Object.assign({},v)})})},shopInfoCallBack:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.slotItems;a.forEach((function(a){"shop-info"===a.name?e.shopInfoMv&&e.shopInfoMv():"shop-map"===a.name?e.shopMapMv&&e.shopMapMv():"shop-oversea-businesshours"===a.name?e.shopOverSeaBusinessHoursInit&&e.shopOverSeaBusinessHoursInit(t):"coupon-bag"===a.name?e.couponBagMv&&e.couponBagMv():"dz-banner"===a.name?e.dzBannerMv&&e.dzBannerMv():"shop-times-card"===a.name?e.shopTimesCardMv&&e.shopTimesCardMv():"shop-service"===a.name?e.shopServiceMv&&e.shopServiceMv():"shop-food-mai"===a.name?e.shopFoodMaiMv&&e.shopFoodMaiMv():"shop-life-reserve"===a.name?e.shopLifeReserveMv&&e.shopLifeReserveMv():"shop-quality"===a.name?e.shopQualityMv&&e.shopQualityMv():"shop-mall"===a.name?e.shopMallMv&&e.shopMallMv():"shop-branch"===a.name&&e.shopBranchMv&&e.shopBranchMv()}))},fetchMapiShopInfo:function(t){var a=this,n=e(107),i=(0,C.default)({},t);i.shopUuid?delete i.shopId:i.shopid=t.shopId,T.log("".concat("detail"," shopMapi params: ").concat(JSON.stringify(t)));var r=Date.now();n.getDataAsync((function(){o().userData.latitude&&o().userData.longitude?(i.lat=o().userData.latitude||0,i.lng=o().userData.longitude||0,a.fetchData(i,{hasLocation:!0}),k.addApi({name:"geo",responseTime:Date.now()-r,networkCode:200}),a.setData({hasLocation:!0})):(k.addApi({name:"geo",responseTime:Date.now()-r,networkCode:500}),i.lat=0,i.lng=0,a.fetchData(i))}))},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now();this.params=Object.assign({},t,this.params||{}),t.mtsiReferrer=encodeURIComponent(N(V,this.options)),t.cookieid=o().userData&&o().userData.wxmpEncryptedOpenId;var i={isError:!1,iconType:"1",description:"哎呀，页面加载失败了"},r=this;o().h.request(new O(new A(L.MAPI_SHOP_INFO,{domain:E.MAPI_DOMAIN,method:"GET",data:t,header:{isMicroMessenger:"true"}}),{callback:function(s){k.addPoint({position:3,duration:Date.now()-n});var d=s.serverData&&s.serverData.data||null;if(T.log("detail mapiheader: ".concat(s.serverData.statusCode)),s.serverData&&401===s.serverData.statusCode)return o().userData.dpAccessToken=null,void o().bridge.login().then((function(e){r.init(r.params)})).catch((function(e){o().navigation.back()}));if(0===s.errorCode&&d&&1===d.validateStatus)return e.setData({isShopOffline:!0}),void P.setStorageShop(e.shopUuid||e.shopId,null);0===s.errorCode&&d?(e.parseMapiShopInfo(d,a),i.isError=!1,e.setData({isMapiError:!1,mapiError:i})):(i.isError=!0,e.setData({isMapiError:!0,mapiError:i}),k.addError("mapiheader服务出错:",JSON.stringify(s)),T.log("detail mapi服务出错: ".concat(JSON.stringify(s))));d&&d.code&&-1!==[77,150,223,296,369].indexOf(d.code)&&(t.openId=o().userData&&o().userData.openId,t.token=o().userData&&o().userData.dpAccessToken,k.addError("mapiheader命中反扒:",JSON.stringify(t)))}}))},fetchShopOther:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.shopUuid,n=t.shopId,i={};t.shopUuid?i.shopUuid=a:i.shopId=n;var r={latitude:o().userData.latitude,longitude:o().userData.longitude};r&&(i.lat=r&&r.latitude||"",i.lng=r&&r.longitude||""),i.mtsiReferrer=encodeURIComponent(N(V,this.options)),T.log("detail shopother: ".concat(JSON.stringify(i))),o().h.request(new O(new A(L.SHOP_OTHERS,{domain:E.DOMAIN,method:"GET",data:i}),{callback:function(t){var a=t.serverData||null;if(T.log("detail shopothers:".concat(a.statusCode)),a&&200==a.statusCode&&a.data&&200==a.data.code){var n=a.data.otherShopInfo,i=n.isFavorite;e.setData({otherShopInfo:n,isFavorite:i}),e.shopOtherCallBack(n)}else T.log("shopother请求数据出错: ".concat(JSON.stringify(a)))}}))},shopOtherCallBack:function(e){var t=(e||{}).promoData;t&&t.showModule&&this.shopPromoMv&&this.shopPromoMv()},fetchShopCooperation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.shopUuid,n=t.shopId,i={};t.shopUuid?i.shopUuid=a:i.shopId=n,o().h.request(new O(new A(L.SHOP_COOP,{domain:E.DOMAIN,data:i}),{callback:function(t){var a=t.serverData||null;T.log("detail shopcooperation:".concat(a.statusCode)),a&&200==a.statusCode&&a.data&&200==a.data.code?a.data.data&&!1===a.data.data.isCoop&&e.setData({notCoop:!0}):T.log("shopcooperation请求数据出错: ".concat(JSON.stringify(a)))}}))},parseMapiShopInfo:function(e,t){var a=this;e.doFetch=!0;var n,i=[],o=2;if(e.recentBizTime){var r=e.recentBizTime.title;o=r.length<=15?2:r.length<=20?1:0,i[0]=e.recentBizTime,n=e.cruxFeatures&&e.cruxFeatures.filter((function(e,t){return t<o}))}else n=e.cruxFeatures&&e.cruxFeatures.filter((function(e,t){return t<3}));if(i=n&&n.length>0?i.concat(n):i,e.keyServices=i,e.shopServeInfoUrl){var s=e.shopServeInfoUrl.split("="),d=s.length>=2?decodeURIComponent(s[1]):void 0;e.shopServeInfoUrl=d}i.length>0&&(e.hasKeyService=!0),e.address&&e.address.length>0&&(e.hasShopMap=!0),e.hasLocation=t.hasLocation;var c=e.geoPoint&&e.geoPoint.coordType,u=e.geoPoint&&e.geoPoint.lat,l=e.geoPoint&&e.geoPoint.lng,p=e.id||e.shopuuid,h=encodeURIComponent(e.name),f=encodeURIComponent(e.address);e.mapSchema="dianping://mapnavigation?shopid=".concat(p,"&shopname=").concat(h,"&coordertype=").concat(c,"&tolocation=").concat(u,",").concat(l,"&toaddress=").concat(f),e.listPic=this.data.mApiShopInfo&&this.data.mApiShopInfo.listPic||M.DEFAULT_PIC,this.setData({mApiShopInfo:e,route:e.route||""},(function(){a.data.isCache||k.addFirstContentfulPaint("mapiHeader")})),this._headDataChange(e),P.setStorageShop(this.shopUuid||this.shopId,{mApiShopInfo:e})},_headDataChange:function(e){var t=this;if(e&&e.doFetch){var a;e.picCount&&e.picCount>1&&(e.showPics=!0);try{a=JSON.parse(e.shopStyle||""),e.shopStyle=a}catch(e){}if(e.advancedPics=e.advancedPics&&e.advancedPics.length?e.advancedPics:[{thumbUrl:e.defaultPic}],a&&"bigpic"==a.picMode){var n=e.advancedPics&&e.advancedPics.length?e.advancedPics:[{url:e.defaultPic,picLoad:!0}];n=n.map((function(e,t){return e.picLoad=!0,e})),t.setData({bigPics:n||[]})}e.voteTotal=e.voteTotal?parseInt(e.voteTotal)+"条":"";var i=!(e.scoreText&&e.scoreText.length>21);if(!i)i=!((e.regionName?e.regionName.length:0)+(e.categoryName?e.categoryName.length:0)>7);e.showRegion=i,t.setData({hasLoad:!0,headData:e},(function(){t.intersectionObserver()}));var o=t.data.lxData||{};o.picMode=t.data.headData&&t.data.headData.shopStyle&&t.data.headData.shopStyle.picMode,x.moduleView(j.headPicMVBid,o)}e&&e.fromListCache&&t.setData({headData:e,bigPics:e.bigPics||[]})},promptMask:function(){this.setData({hasMask:!0})},hideMask:function(){this.setData({hasMask:!1})},onPageScroll:function(e){U.triggerScroll()},onTapPage:function(e){},onTouchMovePage:function(e){},getShareTitle:function(e){var t=e.detail.shareTitle;t&&this.setData({shareTitle:t})},saveCanvas:function(e){var t=e.detail.url;t?this.setData({sharePicPath:t}):this.setData({sharePicPath:""})},headHide:function(){o().sc.g.setNavigationBarTitle({title:this.data.mApiShopInfo&&this.data.mApiShopInfo.name||"大众点评"});var e=this.data&&this.data.mApiShopInfo;this.data.shouldShowShopInfoBar&&this.setData({showShopInfoBar:!0,shopName:e&&e.name||"",shopIntro:e&&e.address&&e.categoryName&&"".concat(e.address," ").concat(e.categoryName)||""})},headShow:function(){o().sc.g.setNavigationBarTitle({title:"大众点评"}),this.data.shouldShowShopInfoBar&&this.setData({showShopInfoBar:!1})},noop:function(){},onReady:function(){var t=o().runtimeInfo||new(e(138)),a=!1;t.deviceModel&&-1!=t.deviceModel.indexOf("iPhone X")&&(a=!0),this.setData({isIpx:a})},onSideTap:function(){this.setData({paySubsidyShow:!0})},handleClickShopCenterPass:function(){this.setData({paySubsidyShow:!0})},onUnload:function(){e(698).onUnload(this),this.env&&(this.env.dispose(),this.env=null)},setLaunchAppUrl:function(e){var t=this;try{var a=e.shopUuid,n=e.shopId;(a||n)&&(!n||/[0-9a-zA-Z]{16}/.test(n)?o().bridge.request({url:B.DOMAIN+B.API.QUICK_SHOPID,data:{shopUuid:a}}).then((function(e){var a;e&&200===e.data.code&&(a=e.data.shopSchema?e.data.shopSchema:e.data.shopId?"dianping://shopinfo?id=".concat(e.data.shopId):"dianping://home",t.setData({"openAppBarInfo.topBarLaunchAppUrl":a,"openAppBarInfo.bottomBarLaunchAppUrl":a}))})).catch((function(e){t.setData({"openAppBarInfo.topBarLaunchAppUrl":"dianping://home","openAppBarInfo.bottomBarLaunchAppUrl":"dianping://home"}),T.log("".concat("detail","-setLaunchAppUrl：获取shopid失败 | ").concat(e.message))})):(this.setData({"openAppBarInfo.topBarLaunchAppUrl":"dianping://shopinfo?id=".concat(n),"openAppBarInfo.bottomBarLaunchAppUrl":"dianping://shopinfo?id=".concat(n)}),T.log("".concat("detail","-setLaunchAppUrl：已有shopid | ").concat(n))))}catch(e){T.log("".concat("detail","-setLaunchAppUrl：方法执行错误 | ").concat(e.message))}}})})),window.define("720",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(91),C=e(231),S=e(721),T="__CACHE@PAGE_DETAIL:__dp_shop_style",k={getCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shopUuid||e.shopId,a=this.getStorageShop(t);if(a&&a.shopInfo){this.hitCache=!0;var n=a.shopInfo,i=n.slotItems,o=a.mApiShopInfo;return{slotItems:i,mApiShopInfo:o,shopInfo:n,isCache:!0}}var r=this.getListCache(e);if(r)return{mApiShopInfo:r.mApiShopInfo,slotItems:r.slotItems,islistcache:!0,bigPics:r.bigPics}},getListCache:function(e){var t,a=e.shopUuid||e.shopId;try{var n=b.getLocalStorageSync("__CACHE@PAGE_DETAIL:__dp_shop");if((n&&n.shopInfo&&(n.shopInfo.id||n.shopInfo.shopUuid))==a){t=(n=n.shopInfo).msource,n=this.parseShopInfo(n);var i=e&&e.shopStyle;if(n.shopStyle={picMode:i},"bigpic"===i&&(n.bigPics=[{url:n.defaultPic,picLoad:!0}]),"multipic"===i){var o=S.DEFAULT_PIC;n.advancedPics=[{thumbUrl:n.defaultPic},{thumbUrl:o},{thumbUrl:o}]}return n.fromListCache=!0,t?{mApiShopInfo:n,slotItems:this.getShopStyleCache(t).slotItems||[],bigPics:[{url:n.defaultPic,picLoad:!0}],islistcache:!0}:{mApiShopInfo:n,islistcache:!0}}}catch(e){}},parseShopInfo:function(e){var t={},a=e&&e.tagList||[];a.length&&(t.dishItems=a.map((function(e){return e.text})));var n={name:"name",branchName:"branchName",shopPower:"shopPower",voteTotal:"reviewCount",regionName:"regionName",categoryName:"categoryName",priceText:"priceText",scoreText:"scoreText",defaultPic:"defaultPic",listPic:"defaultPic"};for(var i in n)n.hasOwnProperty(i)&&(t[i]=e[n[i]]);return t.scoreText||(t.scoreText=" "),t},getStorageShop:function(e){e+="";try{return this.findCacheById(e).shopData.data}catch(e){C.log("".concat("detail"," getStorageShop error: ").concat(JSON.stringify(e)))}},setStorageShop:function(e,t){e+="";try{var a=this.findCacheById(e),n=a.shopData,i=a.shopsCache,o=n&&n.data;if(o){var r=n.index;i[r]={shopId:e,index:r,data:Object.assign(o,t)}}else i.length<10||i.shift(),i.push({shopId:e,data:t});b.setLocalStorageSync("__CACHE@PAGE_DETAIL:__dp_shop_list",JSON.stringify(i))}catch(e){C.log("".concat("detail"," setStorageShop error: ").concat(JSON.stringify(e)))}},findCacheById:function(e){var t,a={};try{if((t=JSON.parse(b.getLocalStorageSync("__CACHE@PAGE_DETAIL:__dp_shop_list")||"[]")).length)a=t.filter((function(t,a){return t.shopId==e?(t.index=a,t):null}))[0]}catch(e){C.log("".concat("detail"," findCacheById error: ").concat(JSON.stringify(e)))}return{shopData:a,shopsCache:t||[]}},getShopStyleCache:function(e){var t=b.getLocalStorageSync(T);return t&&t[e]?{slotItems:t[e]}:{}},setShopStyleCache:function(e,t){var a;b.getLocalStorageAsync(T).then((function(n){(a=n||{})[e]=t,b.setLocalStorageAsync(T,a)}))}};t.exports=k})),window.define("721",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={BOOKING:[10,15,30,50,60],DEFAULT_PIC:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAYAAACLz2ctAAAABmJLR0QA/wD/AP+gvaeTAAALy0lEQVR42u2ba3ei2tJGH1AQES/xEhOT7L3//6/qsTva3hLvinI7HzLWOqDG1kS73vGeZ37pIRGBxVy1qgra+PHjRwJChDClT4D8b0MBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIkv8TB9lsNthsNkiSBLZto1wu/7ELHAwG8H0fANBoNOB53tV+ezqdIgxDAEC5XEahUPj2b76+viKKIuRyOTw/P3/pN5IkOdhmGManfzsHtf+1ubmA4/EYi8Uis20+n6PdbiOfv73/URQhjmMA0P9eg8Vigclkoj+v12u8vLx8+0aFYfhlSYCPSTGbzQ62t9ttOI6Df//99+Bv6XM+dmzP89BoNK42dmluasBsNjuQDwB2ux36/T6enp70xW+3W2w2G+Tz+atGKdP8b5ZxrVm82WwwHo8z26Iowq9fv9DpdL59vlEUIUkSjEajs/ap1WqwLAvAh8DHJloURQC+NgmDILjKuB3j5gKeuqggCGDbNnq9HrbbLQCgWCxeVcBr4/s++v2+/lwul7HdbrHb7bDdbjEYDNBut799nCRJsFwuz/puqVTSAtZqtcz4GYahUx8A6HQ6yOVyAP4bbSeTiR7/ZrOJfD6PfD6v9/1ORP4dNxXwdyeu/q4uHshGrGuQjnpq4L/Ker3GYDDQn13XRbPZRBiG+Pnzp/5Ov99Hu93+VsQ1DAOlUums7yr5AGh5PqNQKOjxdhwHwEc6obZ5ngfDMBDHMYIggGEYWt5bcFMBHcfBer3+9O/HLuwSAWezGXa73cnvpOWeTqdYr9cnJ4brukdv/Gw2w/v7u/5cLBZ1pMvn83h8fMSvX78AfCzR3W4X7XY7I8c5KGnz+TxardbFYz6fzzMrj4pijUYDrutisVjo9KHVasHzvMyyHIYhLMtCt9tFGIYwTRN///33xedxLlcTcLvdIggCrFYrJEmCh4cHNJtNvL6+Hs07Go0GDMPAfD7PbL9kts3nc12FnnuOaSE/Iy1gkiR4e3vL5LKu6x4ss47j4PHxEf1+H0mSIAgCdLtd3N/fw3Xdg2OosQKyFaoaqyiKTqYwaTzP09F9u90eHROVA6Yr9WOTVwUA9RsqSt6Kqwk4mUyw2Wz059lshmq1ipeXF4zHY/i+jyRJYFkWarUaXNdFGIZ4e3s7GMxzsSzrIgFVNDhFepnebrcYjUaZJLxaraJerx/d13EcPD09YTAYIAgCJEmCwWCASqWCer2eWZJ3u12mit4njuNMxD2FbdsoFosAgEqlgkKhAMMwsF6v9Qqkjm1ZFkzTRBzHeuzS56WKoPRv35KrCViv19HtdvXn9/d3JEmCWq2G+/v7g+/7vp/JpwDg7u7uoiW41WqdrOoMw8BwOMwUOI1G46SEpmkiSRKMx+NMEWAYBlqt1m/zMsuy8Pz8jNFopPefz+dYrVZoNps6Gu7f9Evz03R7Kf1bhUJBR7kkSQ5SIJXT+b6v+6Pp/Q3DyKwS1+htnuJqAtq2jXq9npm1k8kEq9UKpVIJhUIBpmlit9ths9no5UfhOA5qtdpFx8zlcr+9cenZHIbhWb3HJEkyN0EVG5dI0mq14DgO3t/fEcdxRph9vtJnO9ZfPXXt6UlXqVQy0u8XS6Zp6olyLH24JlctQqrVKuI4xnQ61dt2u91vCwXbtvH4+Hj1i9vPh3a73VkSGoaBTqeD4XAI13VRqVSQJAmGwyGAjxt4LDeK41gn+J7noVwuo1QqYTweX72/eSnplkqpVNKRXE0Ohe/7KBQKOsdV+1y7O6G4ehV8d3cH27YxmUzObmBGUYR+vw/btnW0vAbHkvjZbHZWtDFNEw8PD/rzarXSUdu27aMChmGYKSxc14VpmkdTkDRfaddcuo9lWVgulzrnThc+6ejY7/cPnoyYpom//vrr4nM8h5u0YdQMWywWCIIAy+UyM8v2iaJIPy+ezWZ6SfrOrNuXQQ3mYrG4ONcEshXjZrM5mi6onAq47OlBFEVnP4JTPbpzqvn9/dLH+OxYxxrPp+7dd7lpH7BcLmO3253d0Vcsl0v4vo92u/3lKixd4NTrdeRyOQyHQ72UpqPbOaSTed/3sd1uDyJ1Oq/dbrf6pYJzrvfSMUpzTjQMwxCe58GyrIPvT6dTPcHq9XomRUmS5GYvIgA3FnCz2WQeWyk8z0OhUNAXGgSBjoDpAev1enh6erq4mTsajfSAGoaBSqUC4KNoUdF2Mpng7u7urN9bLpcHEW0wGKDT6WSuIR0B1Xl8Jvq1Hm85jnPWJI2iCK7rHh3L1Wqlx6tSqdxUuH1uJmAcxwfyFQoFNJvNowNWrVax2WwwGo10yFd9tEteS0q3PwBk8q92u41erwfgY9YbhvHbyjuKIl1YmKaJYrGI1WqFKIrw8+dPPD8/w7Ksg5YSgJOiu66Ll5cXPVZhGGaq+iiKEEURTNPUkqd7d6qfd25lfkqqdHWuns//KW72Qup+g7lYLKLT6Zy8uGKxiOfn58wSEATBwdOSY/i+j263m5Hv7u4u00ZQE0AxmUzQ7/c/zdfCMES329XRqlwu4/7+HtVqFcBHtIjjGL1eT/9GqVTKSD+dTjEajQ4iXhzHuhenopNpmnqbZVlwXRf5fF5vU4WN67rwfV/nzLd8WeDW3CQCxnGcEWG/ojyF+u7r66veNplM9DK6f5zNZoPFYpFZvoEP+Y5Ft3K5rB+vAR9R6vX1FZ7n6acIwMeyNB6PdXTI5/P6CUi9XofneQiCAIPBQEds0zTRbDZhmiaq1aquwlVOq3qDQPZ9Qtu28fT0hMViofcpl8toNptYr9eZyvWff/7R56/Ey+VyR1s8t2qdXJObnOF+k/nSBrNlWfrREoCjVV+SJOh2uxgOhxn51BOLU8esVCq4v7/PLEvL5RK9Xk9HW9VABj5u5H6fMgxDDIdDLV8ul0On09E3vV6vZyZNGIaZ80xfjzrX9DWrpVa9naKuWb2hkn4c+FkBc8ljSiluEgH3l7T0wJ5LrVbTOZfjOAe5TpIkBwNcKpUOqrjPUP3Gt7e3TIWrhFI33bZtPDw8HBw/3ZZxXRetVusg4jQaDX2MOI71b8ZxrI+ZfuqQPm91baZpwrZtLWwQBLAsC6VSKRPFVcU9m830JEqPzzXfBr8mN1uC03xlKXAc5+SbGOnlp1gsolqtXpw85/N5tNtt+L6P2WyG9Xqtz109MfisiawKhN/9PxPP8+C6rn6KAiDzNrVt21rMtOTqZQbDMJDP57WAi8UCrusil8tl3u2bTqdoNBr6ac+x8fyM9Pf/dD55EwH3K65bzD7DMPDw8ADHcb7dNlCyp6Paw8PDyfZPuVxGrVY7qwpVea26uY7j6FwzvTqoHDI9CVSlrr6fPl6z2dTLuoqelUolI7U63qnJWa/X9ar1J/6fThrjx48fV1d+/+XNRqNxtIgg5Ca6qxln2zYKhcKXckDyv8FNIiAh5/J/v1FE/l9DAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCIQgGJKBSQiEIBiSgUkIhCAYkoFJCI8h/593Za7c4MiwAAAABJRU5ErkJggg==",MODULES_MOCK:!1,SHOP_SLOTS:[{name:"shop-follow",config:{margin:"0 0 20rpx 0"}},{name:"shop-head",config:{}},{name:"shop-oversea-businesshours",config:{}},{name:"shop-map",config:{}},{name:"shop-operate",config:{margin:"20rpx 0 0 0"}},{name:"shop-tuan",config:{}},{name:"shop-beauty-shelf ",config:{}},{name:"shop-craftsman",config:{margin:"20rpx 0 0 0"}},{name:"shop-review-tag",config:{margin:"30rpx 0 0 0"}},{name:"shop-review",config:{showAllReviewTag:!0}},{name:"shop-info",config:{showHead:!0}},{name:"shop-branch",config:{}},{name:"shop-mall",config:{margin:"30rpx 0 0 0"}},{name:"shop-friendlike",config:{}},{name:"shop-comment",config:{}},{name:"shop-base-info",config:{}},{name:"shop-brand-info",config:{}},{name:"shop-new-retail",config:{}},{name:"mall-poi-nav",config:{}}]}})),window.define("722",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports={SHOP_INFO:"/wxmapi/shop/bdshopinfo",SHOP_OTHERS:"/wxmapi/shop/bdshopother",MAPI_SHOP_INFO:"/mapi/baidu/shop.bin",MTSHOP_PARSE:"/wxmapi/shop/mtshopinfo",SHOP_COOP:"/wxmapi/shop/cooperation"}})),window.define("724",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k="b_dianping_nova_POI_yingyexinxi_mv",x="b_dianping_nova_POI_yingyexinxi_mc",P=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(){}},{key:"injectPrivateFunction",value:function(e){e.shopInfoTap=function(){T.moduleClick(x,e.data.lxData)},e.shopInfoMv=function(){T.moduleView(k,e.data.lxData)}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.shopInfoTap=null,e.shopInfoMv=null}}]),e}();t.exports=P})),window.define("725",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104));function k(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=e(231),A="/mapi/wechat/shoptelephone.overseas",O=function(){function t(){(0,S.default)(this,t)}return(0,T.default)(t,[{key:"getPrivateData",value:function(){return{isIpx:!1,animationData:{},showPop:!1,popEnd:!1,moduleData:{showModule:!1,hasDetail:!1,title:"营业时间"},detailData:{title:"营业时间",tipTitle:"温馨提示",timeList:[],tipList:[]}}}},{key:"injectPrivateFunction",value:function(t){t.showDetailInfoTap=function(){if(this.data.moduleData.hasDetail){var e=wx.createAnimation({duration:200});this.animationContent=e;var n=this.data.isIpx?1002:934;e.translateY(n).step(),this.setData({showPop:!0,animationData:e.export()}),a(function(){e.translateY(0).step(),this.setData({animationData:e.export()})}.bind(this),100),a(function(){this.setData({popEnd:!0})}.bind(this),500),t.promptMask()}},t.closeDetailInfoTap=function(){if(this.data.popEnd){var e=wx.createAnimation({duration:200});this.animationContent=e;var n=this.data.isIpx?1002:934;e.translateY(n).step(),this.setData({animationData:e.export()}),a(function(){e.translateY(0).step(),this.setData({animationData:e.export(),showPop:!1,popEnd:!1})}.bind(this),100),t.hideMask()}},t.popContentTap=function(){},t.shopOverSeaBusinessHoursInit=function(a){var n=r().runtimeInfo||new(e(138));n.deviceModel&&-1!=n.deviceModel.indexOf("iPhone X")&&this.setData({isIpx:!0});var i=e(107),o={shopid:a.shopId};function s(e){return e?e.map((function(e){return{title:e.monthTimeUnit,dayList:d(e.dayTimeUnitList)}})):[]}function d(e){return e?e.map((function(e){var t,a=[],n=[],i=k(e.hourTimeUnitList);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push(o.timeRange),n.push(o.mealTitle)}}catch(e){i.e(e)}finally{i.f()}return{dayTime:e.dayTimeUnit,hourTime:a.join("\n"),mealTitle:n.join("\n"),needHighlight:e.needHighlight}})):[]}i.getDataAsync((function(a){r().userData.latitude&&r().userData.longitude&&(o.lat=r().userData.latitude,o.lng=r().userData.longitude,function(a){var n=e(101),i=e(103);r().h.request(new i(new n(A,{domain:"https://mapi.dianping.com",method:"GET",data:a}),{callback:function(e){var a=e.serverData||null;if(a.data.businessHour&&a.data.businessHour.show){var n=a.data.businessHour,i=n.businessHourPopDetailInfo;t.setData({moduleData:{showModule:n.show,hasDetail:n.needPopDetail,title:(n.title||"")+(n.businessHoursNew||"")},detailData:{title:i.detailTitle||"",tipTitle:i.warmTipsTitle,timeList:s(i.openTimeList),tipList:i.warmTipList}})}else t.setData({moduleData:{showModule:!1}}),P.log("获取境外营业时间失败",e)}}))}(o))}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.showDetailInfoTap=null,e.closeDetailInfoTap=null,e.popContentTap=null,e.shopOverSeaBusinessHoursInit=null}}]),t}();t.exports=O})),window.define("726",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(727),x=e(95),P=e(97),A="b_fhsmyz6u",O="b_i7ojv4l3",E="b_dianping_nova_vnizs792_mv",L="b_dianping_nova_vnizs792_mc",N=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{showVirtualCall:!1}}},{key:"injectPrivateFunction",value:function(t){t.openShopMap=function(){var a,n=t.data.shopMapInfo;if(n)a=n;else{a={};var i=t.data.loadOptions||{},o=i.shopId,r=i.shopUuid;r?a.shopUuid=r:a.shopId=o}a.mtsiReferrer=encodeURIComponent(P("pages/detail/detail",a)),e(728)(a),T.moduleClick(A,t.data.lxData)},t.useVirtualPhone=function(){t.setData({showVirtualCall:!0})},t.callVirtualPhone=function(e){var a=[{type:"phone",data:e.detail,showText:e.detail}];k(a),T.moduleClick(O,t.data.lxData)},t.closeVirtualPhone=function(){t.setData({showVirtualCall:!1})},t.callPhone=function(){var a=t.data.mApiShopInfo.phoneNos,n=t.data.mApiShopInfo.cityAreaCode;if(t.data.mApiShopInfo.isForeignShop||(a=a.map((function(t){var a=t.split("-");(t&&t.length<9||a.length>1&&a[0].length<9&&400!==a[0]&&0!==t.indexOf(n))&&(t=n?n+t:t);var i=o().runtimeInfo||new(e(138));return(i&&0===t.indexOf("400")&&t.indexOf("-")>0||i&&2===a.length&&400!==a[0]&&a[0]!==n)&&(/ios/gi.test(i.deviceSystem)?t=t.replace(/-/,",,"):/android/gi.test(i.deviceSystem)&&(t=t.replace(/-/,","))),t}))),a){var i=[],r=t.data.serviceData;if(r&&r.length){var s=r.filter((function(e){return"reserve"==e.serviceName})),d=s[0]&&s[0].phoneUrl;d&&i.push(Object.assign({type:"url",showText:"立即在线订座",data:d,name:s[0].serviceName},{showText:s[0].showText}))}a.map((function(e){return i.push({type:"phone",data:e,showText:e})})),k(i),T.moduleClick(O,t.data.lxData)}},t.callCar=function(){var e=t.data.otherShopInfo&&t.data.otherShopInfo.daCheData&&t.data.otherShopInfo.daCheData.skipUrl;if(e){var a=x(e),n=a.uri,i=a.query,r=i.url;if(r){var s={test:"c.qcs.test.sankuai.com",prod:"dache.meituan.com"};if((r=decodeURIComponent(r)).indexOf(s.test)>-1||r.indexOf(s.prod)>-1){var d=x(r),c=d.uri,u=d.query;u.finger="*",r=P(c,u)}i.url=encodeURIComponent(r)}e=P(n,i),o().navigation.forwardTo({url:e})}T.moduleClick(L,t.data.lxData)},t.shopMapMv=function(){var e=o().userData.dpAccessToken,a=o().userData.dpCityId,n=t.data.loadOptions.shopuuid;t.setData({token:e,cityId:a,shopuuid:n}),T.moduleView(E,t.data.lxData)}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.openShopMap=null,e.useVirtualPhone=null,e.callVirtualPhone=null,e.closeVirtualPhone=null,e.callPhone=null,e.callCar=null,e.shopMapMv=null}}]),t}();t.exports=N})),window.define("727",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(93),C="b_dianping_nova_9j3lwwbv_mv",S="b_dianping_nova_9j3lwwbv_mc";t.exports=function(e){var t;if(1===e.length&&"phone"===e[0].type)o().sc.g.makePhoneCall({phoneNumber:e[0].data});else{var a=[];e.forEach((function(e){"reserve"==e.name&&b.moduleView(C),a.push(e.showText)})),o().sc.g.showActionSheet({itemList:a,success:function(a){a.cancel||((t=e[a.tapIndex])&&"phone"===t.type?o().sc.g.makePhoneCall({phoneNumber:t.data}):("reserve"==t.name&&b.moduleClick(S),o().navigation.forwardTo({url:t.data})))}})}}})),window.define("728",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7)(e(19)),C=e(101),S=e(103),T="/wxmapi/shop/shopmapinfo",k={};t.exports=function(e){if(e){var t,a=e.shopId,n=e.shopUuid;"object"===(0,b.default)(e)&&e.lat&&(t=e);var i=function(e){o().sc.g.openLocation({latitude:e.lat,longitude:e.lng,name:e.shopName,address:e.address})};if(t)i(t);else if(n||a)if(k[a]||k[n])i(k[a]||k[n]);else{var r={};n?r.shopUuid=n:r.shopId=a,e.mtsiReferrer&&(r.mtsiReferrer=e.mtsiReferrer),o().h.request(new S(new C(T,{method:"GET",data:r}),{callback:function(e){var t=e.serverData||null;if(t&&200===t.statusCode&&t.data&&200===t.data.code){var o=t.data.shopInfo;k={},n?k[n]=o:k[a]=o,i(o)}}}))}}}})),window.define("729",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k="b_j4lgtq45",x="b_o1zr9s12",P=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(){}},{key:"injectPrivateFunction",value:function(e){e.promoTap=function(){var t=e.data.otherShopInfo&&e.data.otherShopInfo.promoData,a=t&&t.listUrl,n=T.getLxData();T.moduleClick(x,Object.assign({},n,{category_id:t&&t.categotyId,shopType:t&&t.shopType})),a&&o().navigation.forwardTo({url:a})},e.shopPromoMv=function(){var t=e.data.otherShopInfo&&e.data.otherShopInfo.promoData,a=T.getLxData();T.moduleView(k,Object.assign({},a,{category_id:t.categotyId,shopType:t.shopType}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.promoTap=null,e.shopPromoMv=null}}]),e}();t.exports=P})),window.define("730",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(104)),k=e(101),x=e(103),P=e(582),A="https://mapi.dianping.com",O="/pay/promo/unifiedissuecouponcomponent.bin",E="/pay/promo/unifiedissuecoupon.bin",L=1,N=function(){function t(){(0,S.default)(this,t)}return(0,T.default)(t,[{key:"getPrivateData",value:function(){return{couponBagMark:"",couponBagTitle:"",couponBagModalTitle:"",couponBagList:[],couponBagEntry:"",couponBagPopup:!1}}},{key:"injectPrivateFunction",value:function(t){t.showCouponBag=function(){t.setData({couponBagPopup:!0})},t.offCouponBag=function(){t.setData({couponBagPopup:!1})},t.couponBaghijack=function(){},t.couponBagCheck=function(a){var n=e(476),i=a.currentTarget.dataset,r=i.item;n.getDataAsync((function(e){if(e){var a={shopid:b,cityid:L,usercode:0,token:e,coupongroupid:r.couponGroupId};P.i(99),a.cx=P.r(a),o().h.request(new x(new k(E,{domain:A,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:a}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&a.data.isSuccess){r.status.status=1;var n={};n["couponBagList[".concat(i.index,"]")]=r,t.setData(n)}else o().sc.showToast({title:a.data.errorMsg.errorMsg,icon:"none"})}}))}}))},t.couponBagMv=function(){b=t.data.loadOptions.shopUuid||t.data.loadOptions.shopId,(o().userData.dpCityId||o().userData.dpLocCityId)&&(L=o().userData.dpCityId||o().userData.dpLocCityId);var e={shopid:b,cityid:L,usercode:0,token:o().userData.dpAccessToken};P.i(99),e.cx=P.r(e),o().h.request(new x(new k(O,{domain:A,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:e}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&a.data.unifiedIssueCouponLists){var n=a.data.unifiedIssueCouponLists[0]||{};t.setData({couponBagMark:a.data.icon,couponBagTitle:a.data.couponText,couponBagModalTitle:n.title||"",couponBagList:n.unifiedIssueCouponOption||[],couponBagEntry:a.data.entranceText})}}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.showCouponBag=null,e.offCouponBag=null,e.couponBaghijack=null,e.couponBagCheck=null,e.couponBagMv=null}}]),t}();t.exports=N})),window.define("731",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T="https://mapi.dianping.com",k="/general/platform/dztg/unifiedpromoactivity.json",x=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{dzBannerImg:"",dzBannerShow:!1,dzBannerContent:"",dzBannerLabel:"",dzday:"",dzhour:"",dzmin:"",dzdisDay:"",dzdisHour:"",dzdisMin:""}}},{key:"injectPrivateFunction",value:function(t){t.dzBannerMv=function(){var a=e(101),n=e(103);e(105).getDataAsync((function(){var e={cityid:o().userData.dpCityId||1,shopid:t.data.loadOptions.shopId||"",shopuuid:t.data.loadOptions.shopUuid||"",clienttype:100400};o().h.request(new n(new a(k,{domain:T,data:e}),{callback:function(e){var a=e.serverData||null;a&&200===a.statusCode&&a.data&&(t.dzBannerLink=a.data.jumperLink||"",t.calTime(a.data.countdownEndTime||""),t.setData({dzBannerShow:a.data.show||!1,dzBannerImg:a.data.img||"",dzBannerContent:a.data.content||"",dzBannerLabel:a.data.label||""}))}}))}))},t.jumpAdvertise=function(){o().navigation.forwardTo({url:t.dzBannerLink,type:"h5"})},t.calTime=function(e){var a=new Date,n=Number(e)-a.getTime(),i=Math.floor(n/1e3/60/60/24),o=Math.floor(n/1e3/60/60%24),r=Math.floor(n/1e3/60%60);t.setData({dzday:i,dzhour:0,dzmin:r,dzdisDay:t.timeAdd(i),dzdisHour:t.timeAdd(o),dzdisMin:t.timeAdd(r)})},t.timeAdd=function(e){return e>=0&&e<10?"0"+e:e}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.dzBannerMv=null,e.jumpAdvertise=null,e.calTime=null,e.timeAdd=null}}]),t}();t.exports=x})),window.define("732",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(101),k=e(103),x="/mapi/marketing/times/card/shelf/mini/poicards.json",P=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{stcShowMe:"",stcShowMore:"",stcShowMoreBtnText:"",stcCards:[],stcTitle:""}}},{key:"injectPrivateFunction",value:function(t){t.shopTimesCardMv=function(){e(105).getDataAsync((function(){var e={clienttype:"100400",cityid:o().userData.dpCityId};if(t.data.loadOptions.shopUuid)e.shopuuid=t.data.loadOptions.shopUuid;else{if(!t.data.loadOptions.shopId)return;e.poiid=t.data.loadOptions.shopId}e.token="*",o().h.request(new k(new T(x,{domain:"https://mapi.dianping.com",header:{"content-type":"application/x-www-form-urlencoded"},data:e}),{callback:function(e){var a=e.serverData||null;a&&200===a.statusCode&&a.data&&(t.setData({stcCards:a.data.cards,stcTitle:a.data.title,stcIcon:a.data.icon,stcShowMe:!0}),t.data.stcCards&&t.data.stcCards.length>2&&t.setData({stcShowMoreBtnText:"查看其他"+(t.data.stcCards.length-2)+"张会员卡"}))}}))}))},t.shopTimesCardJump=function(e){o().navigation.forwardTo({url:e.currentTarget.dataset.jumpUrl})},t.hanldeClickShowMore=function(){var e=t.data.stcShowMore?"查看其他"+(t.data.stcCards.length-2)+"张会员卡":"收起";t.setData({stcShowMore:!t.data.stcShowMore,stcShowMoreBtnText:e})}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.shopTimesCardMv=null,e.shopTimesCardJump=null,e.hanldeClickShowMore=null}}]),t}();t.exports=P})),window.define("733",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(99),x="b_mt8im0yx",P="b_pkt3biiy",A="b_gq1h78wz",O="b_t22rftv6",E="b_w3qub9nz",L="b_4i81yqw2",N="b_okxq3cp6",M="/wxmapi/shop/shopservice",R=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{shopServiceShow:!1,isNewNav:!0,miniData:null,serviceData:null}}},{key:"injectPrivateFunction",value:function(t){var a=this;t.shopServiceTap=function(e){var a,n,i,r=e.currentTarget.dataset.service||{};function s(e){e&&o().navigation.forwardTo({url:"/pages/webview/webview?url="+encodeURIComponent(e)})}"reserve"===r.serviceName?(T.moduleClick(O,t.data.lxData),s(r.redirectURL)):"queue"===r.serviceName?(T.moduleClick(N,t.data.lxData),s(r.clickUrl)):"takeaway"===r.serviceName?(T.moduleClick(E,t.data.lxData),s(r.url)):"orderfood"===r.serviceName&&(T.moduleClick(P,t.data.lxData),t.data.isNewNav||(a=r.jumpData&&r.jumpData.appId,n=r.jumpData&&r.jumpData.path,i={from:"dianping-wxapp"},o().navigation.forwardTo({appId:a,path:n,extraData:i})))},t.shopServiceMv=function(){var n=e(101),i=e(103),r=e(107),s=e(734),d={};if(t.data.loadOptions.shopUuid)d.shopUuid=t.data.loadOptions.shopUuid;else{if(!t.data.loadOptions.shopId)return;d.shopId=t.data.loadOptions.shopId}r.getDataAsync((function(r){d.lat=o().userData.latitude,d.lng=o().userData.longitude,o().h.request(new i(new n(M,{domain:k.DOMAIN,data:d}),{callback:function(n){var i=n.serverData||null;if(i&&200===i.statusCode&&i.data&&i.data.serviceData){var r=i.data.serviceData,d=!!r.length,c={},u=!0;if(r[0]&&r[0].isHobbitShop){(c=r[0].jumpData).extraData=Object.assign({},{from:"dianping-wxapp"},c.params);var l=(o().runtimeInfo||new(e(138))).wxmpVersion;s(l,"2.0.7")&&(u=!1)}t.setData({serviceData:r,shopServiceShow:d,isNewNav:u,miniData:c}),r.hasOrderFood&&T.moduleView(x,a.data.lxData),r.hasReserve&&T.moduleView(A,a.data.lxData),r.hasQueue&&T.moduleView(L,a.data.lxData)}}}))}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.shopServiceTap=null,e.shopServiceMv=null}}]),t}();t.exports=R})),window.define("734",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";t.exports=function(e,t){if(!e||!t)return!0;if(e===t)return!0;for(var a=e.split("."),n=t.split("."),i=a.length>n.length?n.length:a.length,o=0;o<i;o++){var r=parseInt(a[o]),s=parseInt(n[o]);if(r!==s)return r>s}return a.length>n.length}})),window.define("735",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(99),x="b_dianping_nova_urcvbn7l_mc",P="/hui/mm/wxapoi",A=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{shopFoodMaiShow:!1}}},{key:"injectPrivateFunction",value:function(t){t.setShowPaySubsidy=function(){t.setData({showPaySubsidy:!0})},t.goMaiton=function(){var e="/packages/msdeal/pages/maiton-order/maiton-order?poiId=".concat(t.data.loadOptions.shopId||"","&shopUuid=").concat(t.data.loadOptions.shopUuid||"");o().navigation.forwardTo({url:e})},t.shopFoodMaiMv=function(){var a=e(101),n=e(103),i=t.data.loadOptions.shopId||"",r=t.data.loadOptions.shopUuid||"";(i||r)&&o().h.request(new n(new a(P,{domain:k.DOMAIN,data:{token:"*",shopId:i,shopUuid:r}}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&0===a.data.code){var n=a.data.data;t.setData({maitonInfo:n,shopFoodMaiShow:n.huiAvailable||!1}),n.huiAvailable&&T.moduleView(x)}}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.setShowPaySubsidy=null,e.goMaiton=null,e.shopFoodMaiMv=null}}]),t}();t.exports=A})),window.define("736",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k=e(93),x=e(101),P=e(103),A="https://mapi.dianping.com",O="/mapi/joy/massagereservation.joy",E="/mapi/joy/serviceselecttime.joy",L="b_m7rml9y9",N="b_7et5hfzv",M="b_6cb013s2",R="b_3kum0fvk",U="b_oz2b9iml",B="b_03q2kehe",V="b_cqvzleom",q="b_jrminwyb",j=[],F=[],H=function(){function t(){(0,S.default)(this,t)}return(0,T.default)(t,[{key:"getPrivateData",value:function(){return{LifeReserveData:null,LifeReserveList:null,LifeToMore:!1,LifeToMoreText:"",LifeCurrentTimePrice:"",LifeCurrentTimePriceIndex:null,LifeLatestCurrentTimeItem:"",LifeCurrentDayIndex:0,LifeCurrentDayItem:null,LifeCurrentHalfDayIndex:0,lifeShowClose:!0,lifeSelectTimeVisible:!1,lifeServiceData:null}}},{key:"injectPrivateFunction",value:function(t){t.lifeToMoreOrLess=function(){t.data.lifeShowClose?(k.moduleClick(R),t.setData({lifeShowClose:!1,LifeToMoreText:"收起",LifeReserveList:j})):t.setData({lifeShowClose:!0,LifeToMoreText:"查看其他"+(t.data.LifeReserveData.list.length-2)+"项服务",LifeReserveList:F})},t.lifeOpenSpuPage=function(e){k.moduleClick(M);var a=e.currentTarget.dataset.serviceid,n=r().userData.dpCityId||0;r().navigation.forwardTo({url:"/packages/joy/pages/spu/spu?shopid=".concat(t.data.loadOptions.shopId,"&shopuuid=").concat(t.data.loadOptions.shopUuid,"&serviceid=").concat(a,"&cityid=").concat(n)})},t.lifeChangHalfDayIndex=function(e){var a=e.currentTarget.dataset.halfdayindex;k.moduleClick(V),t.setData({LifeCurrentHalfDayIndex:a,LifeCurrentTimePriceIndex:null})},t.lifeChangeDayIndex=function(e){var a=e.currentTarget.dataset.dayindex;k.moduleClick(B),t.setData({LifeCurrentDayIndex:a,LifeCurrentDayItem:t.data.lifeServiceData.list[a],LifeCurrentHalfDayIndex:0,LifeCurrentTimePriceIndex:null})},t.lifeSelectTime=function(e){var a=e.currentTarget.dataset.timeprice,n=e.currentTarget.dataset.latestcurrenttimeitem;if(a.status){var i=e.currentTarget.dataset.timepriceindex;t.setData({LifeCurrentTimePrice:a,LifeCurrentTimePriceIndex:i,LifeLatestCurrentTimeItem:n})}},t.lifeCatchEvent=function(){},t.lifeGoNextStep=function(){var a=e(99),n=e(476);k.moduleClick(q);var i=t.data.LifeCurrentTimePrice;if(i.status){var o=i.nextDayText?"true":"false",s=new Date(i.actualTime).getTime(),d=r().userData.dpCityId||0;n.getDataAsync((function(e){if(e){var n=r().userData.dpAccessToken,i=r().userData.wxmpEncryptedOpenId,c=r().userData.wxmpEncryptedOpenId,u="https://m.dianping.com/dz-trade-client-web/universal-preorder-page-next/unified-booking-pedicures-order-page/index.html"+"?utm_source=dianping-wxapp&arriveTime=".concat(s,"&productitemid=").concat(t.data.LifeCurrentDayItem&&t.data.LifeCurrentDayItem.scheduledId||"","&shopid=").concat(t.data.loadOptions.shopId,"&shopuuid=").concat(t.data.loadOptions.shopUuid,"&token=").concat(n,"&crossday=").concat(o,"&openId=").concat(c,"&appId=").concat(a.WXMP_APP_ID,"&cityId=").concat(d,"&uuid=").concat(i);t.lifeCloseModal(),r().navigation.forwardTo({type:"h5",url:u})}else r().sc.showToast({icon:"none",title:"登录失败，请稍后再试",duration:3e3})}))}},t.lifeCloseModal=function(){t.hideMask(),t.setData({lifeSelectTimeVisible:!1,LifeCurrentDayIndex:0,LifeCurrentHalfDayIndex:0,LifeCurrentTimePrice:{},LifeCurrentDayItem:{},LifeCurrentTimePriceIndex:null})},t.lifeShowModal=function(e){var n=this;k.moduleClick(N),a((function(){t.setData({lifeSelectTimeVisible:!0})}),120),t.promptMask();var i=e.currentTarget.dataset.serviceid;r().h.request(new P(new x(E,{domain:A,data:{token:"*",shopId:t.data.loadOptions.shopId-0||0,shopuuid:t.data.loadOptions.shopUuid||"",cityid:r().userData.dpCityId||0,serviceId:i}}),{callback:function(e){var a=e.serverData||null;a&&200===a.statusCode&&a.data&&(k.moduleView(U),t.setData({lifeServiceData:a.data,LifeCurrentDayItem:a.data.list[n.data.LifeCurrentDayIndex]}))}}))},t.shopLifeReserveMv=function(){r().h.request(new P(new x(O,{domain:A,data:{token:"*",shopId:t.data.loadOptions.shopId-0||0,shopuuid:t.data.loadOptions.shopUuid||"",cityid:r().userData.dpCityId||0}}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data){if(function(e){e.data&&(e.data.list&&e.data.list.forEach((function(e){e.firstAvailableDate=JSON.parse(e.firstAvailableDate),e.joyMassageBookingBlocks&&e.joyMassageBookingBlocks[0]&&e.joyMassageBookingBlocks[0].joyBookDisplayPrice&&(e.memberPriceText=(e.joyMassageBookingBlocks[0].joyBookDisplayPrice.price||"").replace("¥",""))})),e.data.refundTip&&(e.data.refundTip=JSON.parse(e.data.refundTip)),e.data.joyIconTips&&(e.data.joyIconTips.forEach((function(e){e.tip&&(e.tip=JSON.parse(e.tip))})),e.data.joyIconTips=e.data.joyIconTips.slice(0,3)))}(a),k.moduleView(L),!(j=a.data.list))return;j&&j.length&&(F=j.slice(0,2)),t.setData({LifeReserveData:a.data,LifeReserveList:F,LifeToMore:j.length>2,LifeToMoreText:j.length>2?"查看其他"+(j.length-2)+"项服务":""})}}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.lifeToMoreOrLess=null,e.lifeShowModal=null,e.lifeOpenSpuPage=null,e.lifeCloseModal=null,e.lifeGoNextStep=null,e.lifeChangHalfDayIndex=null,e.lifeChangeDayIndex=null,e.lifeSelectTime=null,e.lifeCatchEvent=null,e.shopLifeReserveMv=null}}]),t}();t.exports=H})),window.define("737",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(99),k="/wxmapi/shop/shopquality",x=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(){return{shopQualityJumpUrl:"",shopQualityShow:!1}}},{key:"injectPrivateFunction",value:function(t){t.qualityTap=function(){var t=e(477),a=this.data.shopQualityJumpUrl;a&&t.getDataAsync((function(e){var t=o().userData.dpAccessToken,n=o().userData.wxmpEncryptedOpenId;if(n&&e&&t){var i="uuid=".concat(n,"&userid=").concat(e,"&token=").concat(t,"&source=dpwxapp"),r="";r=a.lastIndexOf("?")>-1?a.lastIndexOf("?")===a.length-1?"".concat(a).concat(i):"".concat(a,"&").concat(i):"".concat(a,"?").concat(i),o().navigation.forwardTo({url:r})}}))},t.shopQualityMv=function(){var a=e(101),n=e(103),i={},r=t.shopId,s=t.shopUuid;if(s)i.shopUuid=s;else{if(!r)return;i.shopId=r}o().h.request(new n(new a(k,{domain:T.DOMAIN,data:i}),{callback:function(e){var a=e.serverData||null;a&&200===a.statusCode&&a.data&&a.data.haShopQuality?t.setData({shopQualityTitle:a.data.title,shopQualityJumpUrl:a.data.jumpUrl,shopQualityShow:!0}):t.setData({shopQualityShow:!1})}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.qualityTap=null,e.shopQualityMv=null}}]),t}();t.exports=x})),window.define("738",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(101),x=e(103),P=e(99),A="b_88eacqk1",O="b_3k3z1jky",E="/shopping/shopinfo",L="/wxmapi/shop/shopmallId",N=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(){return{shopMallData:null}}},{key:"injectPrivateFunction",value:function(e){e.shopMallTap=function(){var t=e.data.shopMallData.mallUrl;T.moduleClick(O,e.data.lxdata),t&&o().navigation.forwardTo({url:t})},e.shopMallMv=function(){var t,a=e.data.loadOptions.shopUuid||"",n=e.data.loadOptions.shopId||0;if(a)t={shopUuid:a};else{if(!n)return;t={shopId:n}}o().h.request(new x(new k(L,{domain:P.DOMAIN,data:t}),{callback:function(t){var a=t.serverData||null,n=a.data&&a.data.mallInfo;a&&200===a.statusCode&&a.data&&200==a.data.code&&n&&n.shopMallId&&function(t){o().h.request(new x(new k(E,{domain:"https://mapi.dianping.com",data:{shopid:t.shopMallId,shopIdL:t.shopMallId}}),{callback:function(a){var n=a.serverData||null;if(n&&200===n.statusCode&&n.data&&200==n.data.code&&n.data.msg){var i=Object.assign({},n.data.msg,{mallUrl:t.shopMallNativeUrl});e.setData({shopMallData:i}),T.moduleView(A,e.data.lxdata)}}}))}(n)}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.shopMallTap=null,e.shopMallMv=null}}]),e}();t.exports=N})),window.define("739",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(101),x=e(103),P=e(99),A="b_2w9wpnlj",O="b_u8hns7ep",E="/wxmapi/shop/shopbranchinfo",L=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(){return{showShopBranch:!1,shopBranchCityId:0,shopBranchBrandId:0,shopBranchBranchNum:0}}},{key:"injectPrivateFunction",value:function(e){e.shopBranchOnTap=function(){T.moduleClick(O,e.data.lxdata);var t="/packages/branch/pages/list/list?brandId=".concat(e.data.brandId,"&cityId=").concat(e.data.cityId);if(e.data.loadOptions.shopUuid)t+="&shopUuid=".concat(e.shopUuid);else{if(!e.data.loadOptions.shopId)return;t+="&shopId=".concat(e.data.loadOptions.shopId)}o().navigation.forwardTo({url:t})},e.shopBranchMv=function(){var t,a=e.data.loadOptions.shopUuid||"",n=e.data.loadOptions.shopId||0;if(a)t={shopUuid:a};else{if(!n)return;t={shopId:n}}o().h.request(new x(new k(E,{domain:P.DOMAIN,data:t}),{callback:function(t){var a=t.serverData||null;if(a&&200===a.statusCode&&a.data&&200==a.data.code){var n=a.data.branchInfo||{};n.branchNum&&(e.setData({showShopBranch:!0,shopBranchCityId:n.cityId,shopBranchBrandId:n.brandId,shopBranchBranchNum:parseInt(n.branchNum)}),T.moduleView(A,e.data.lxdata))}}}))}}},{key:"onPageInit",value:function(){}},{key:"dispose",value:function(e){e.shopBranchOnTap=null,e.shopBranchMv=null}}]),e}();t.exports=L})),window.define("740",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C,S=e(7),T=S(e(102)),k=S(e(104)),x=e(93),P=e(114),A=e(475),O=e(99),E=e(101),L=e(103),N=e(476),M="/wxmapi/user/userinfo",R="/wxmapi/user/follow",U=function(){function e(){(0,T.default)(this,e)}return(0,k.default)(e,[{key:"getPrivateData",value:function(e){return{from:"detail",contentId:0,isShow:0,hasFollowed:0,lxCustomData:{}}}},{key:"injectPrivateFunction",value:function(e){e.getUserInfo=function(){return new Promise((function(t,a){var n=e.data,i=n.offuserId,o=n.from;r().h.request(new L(new E("".concat(O.DOMAIN).concat(M),{method:"GET",needAccessToken:!0,header:{token:"!"},data:{offuserId:i,from:o,token:"!"}}),{callback:function(e){var n=e.serverData||null;n&&200===n.statusCode&&n.data&&200===n.data.code?t(n.data):a(n)}}))}))},e.followFriends=function(t){var a=this,n=e.data.offuserId;x.moduleClick("b_dianping_nova_shareinfo_follow_mc",e.data.lxCustomData),r().h.request(new L(new E("".concat(O.DOMAIN).concat(R),{method:"GET",needAccessToken:!0,data:{offuserId:n,follow:t}}),{callback:function(n){var i=n.serverData||null;if(i&&i.data&&200===i.statusCode){var o=i.data;200===o.code?0===t?(o.title&&r().sc.showToast({title:o.title,icon:"none",duration:2e3}),a.setData({hasFollowed:1})):(o.title&&r().sc.showToast({title:o.title,icon:"none",duration:2e3}),a.setData({hasFollowed:0})):201===o.code?o.title&&r().sc.showToast({title:o.title,icon:"none",duration:2e3}):222===o.code?(o.title&&r().sc.showToast({title:o.title,icon:"none",duration:2e3}),a.setData({hasFollowed:1})):223===o.code?(o.title&&r().sc.showToast({title:o.title,icon:"none",duration:2e3}),e.setData({hasFollowed:0})):200!==o.loginCode&&(r().userData.dpAccessToken=null,N.getDataAsync((function(){e.followFriends(t)})))}else r().sc.showToast({title:"网络错误, 请刷新再试",icon:"none"}),P.addError("关注/取消关注用户失败",n)}}))},e.triggerFollow=function(){var t=this,n=e.data.hasFollowed;clearTimeout(C),n?r().sc.showModal({content:"确定不再关注TA吗？",success:function(e){e.confirm?C=a((function(){t.followFriends(n)}),100):e.cancel}}):C=a((function(){t.followFriends(n)}),100)},e.closeShare=function(){x.moduleClick("b_dianping_nova_shareinfo_dislike_mc",e.data.lxCustomData),e.setData({isShow:0})},e.seeItspage=function(){var t=e.data.offuserId;t?(A.forwardTo({url:"/packages/user/pages/personal/personal?offuserId=".concat(t)}),x.moduleClick("b_dianping_nova_shareinfo_mc",e.data.lxCustomData)):r().sc.showToast({title:"获取id错误",icon:"none"})}}},{key:"onPageInit",value:function(e){var t=e.data,a=t.offuserId,n=t.loadOptions,i=t.contentId,o=n&&(n.shopId||n.shopUuid),r={custom:{offuser_id:a}};o&&(r.custom.shop_id=o),i&&(r.custom.content_id=i),e.setData({lxCustomData:r})}},{key:"dispose",value:function(e){e.getUserInfo=e.followFriends=e.triggerFollow=e.closeShare=e.seeItspage=null}}]),e}();t.exports=U})),window.define("741",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k=e(93),x=e(231),P=e(97),A=e(721).DEFAULT_PIC,O=e(99),E="b_x2m7sy95",L="b_ij3jpacs",N="b_6ylb6wg4",M="/wxmapi/shop/rankinfo",R={},U=function(){function t(){(0,S.default)(this,t)}return(0,T.default)(t,[{key:"getPrivateData",value:function(e){return{headData:{},starStyle:{width:"30rpx",height:"30rpx"},textStyle:{fontSize:"30rpx",marginLeft:"10rpx",marginRight:"10rpx"},defaultPic:A,moreTxt:"查看更多",imgClass:{width:"145px",height:"106px","border-radius":"7px"},rankInfo:{},shopShopHeadModule:!1,isAndroid:!1}}},{key:"injectPrivateFunction",value:function(e){e.defaultPicTap=function(){var t=e.data.lxData||{};if(t.picMode=e.data.headData&&e.data.headData.shopStyle&&e.data.headData.shopStyle.picMode,t.picMode&&"bigpic"!==t.picMode&&k.moduleClick(E,t),e.data.loadOptions&&(e.data.loadOptions.shopId||e.data.loadOptions.shopUuid)){var a=e.data.loadOptions,n=a.shopId,i=a.shopUuid,o={shopName:e.data.headData.name};if(e.data.headData.showPics){i?o.shopUuid=i:o.shopId=n;r().navigation.forwardTo({url:P("/packages/ugc/pages/shopalbum/shopalbum",o)})}}},e.previewShopPic=function(t){var a=t.currentTarget.dataset.index,n=e.data.headData.advancedPics;n=n.map((function(e){return e.url})),r().sc.g.previewImage({urls:n,current:n[a]});var i=e.data.lxData||{};i.picMode=e.data.headData&&e.data.headData.shopStyle&&e.data.headData.shopStyle.picMode,k.moduleClick(E,i)},e.handleShopStatusClick=function(e){},e.shopRankTap=function(t){var a=e.data.rankInfo,n=a.rankUrl;k.moduleClick(L,Object.assign(e.data.lxData||{},{type:e.data.rankInfo.rankType})),a.jumpH5?r().navigation.forwardTo({url:n,type:"h5"}):r().navigation.forwardTo({url:n})},e.intersectionObserver=function(){var t=this.observer;try{t||(t=this.createIntersectionObserver({}).relativeToViewport(),this.observer=t),this.haveObserved||(t.observe(".shop-head",(function(t){t&&t.intersectionRatio<=0?e.headHide():e.headShow()})),this.haveObserved=!0)}catch(e){x.log("Observer 失败:",e)}},e.bindchange=function(t){var a=t.detail.current;if(a&&e.data.headData.advancedPics[a+1]){var n=e.data.bigPics;n[a+1].picLoad=!0,e.setData({bigPics:n,picIndex:a+2||1})}},e.scrollToRight=function(t){var n=this;t.detail&&"right"===t.detail.direction&&(this.scrollTrigger||(e.defaultPicTap(),this.scrollTrigger=!0,a((function(){n.scrollTrigger=!1}),500)))},e._mapiErrorChange=function(t){t&&t.isError&&e.setData({mapiError:t})},e.mapiErrorHandler=function(){e.handleReLoad({detail:"mapiError"})}}},{key:"onPageInit",value:function(t){"android"===e(138).platform&&t.setData({isAndroid:!0,moreTxt:"点击查看更多"}),this.shopHeadOptionsChange||(this.shopHeadOptionsChange=function(a,n){var i=n.loadOptions;if(i){var o=i.shopId,s=i.shopUuid;if(R[o]||R[s]){var d=R[s]||R[o],c=d.shareTitle;t.setData({rankInfo:d,shopShopHeadModule:!0}),c&&t.getShareTitle({detail:c})}else{var u=e(101),l=e(103),p={};s?p.shopUuid=s:p.shopId=o,p.showPos="tag",p.locatedCityId=r().userData.dpLocCityId||1,p.appCityId=r().userData.dpCityId||1,r().h.request(new l(new u(M,{domain:O.DOMAIN,method:"GET",data:p}),{callback:function(e){var a=e.serverData||null;if(a&&a.data&&200==a.data.code&&a.data.rankInfo){var n=a.data.rankInfo,i=a.data.shareTitle;n.shareTitle=i,t.setData({rankInfo:n,shopShopHeadModule:!0});var r=Object.assign({},t.data.lxData,{type:n.rankType});k.moduleView(N,r),R[s||o]=n,i&&t.getShareTitle({detail:i})}else t.setData({shopShopHeadModule:!1}),x.log("rank error: ".concat(e))}}))}}}.bind(this),t.env.register("__poi_data_change__",this.shopHeadOptionsChange))}},{key:"dispose",value:function(e){e.handleShopStatusClick=null,e.defaultPicTap=null,e.previewShopPic=null,e.shopRankTap=null,e.intersectionObserver=null,e.bindchange=null,e.scrollToRight=null,e._mapiErrorChange=null,e.mapiErrorHandler=null,this.shopHeadOptionsChange&&(e.env.unregister("__poi_data_change__",this.shopHeadOptionsChange),this.shopHeadOptionsChange=null)}}]),t}();t.exports=U})),window.define("742",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(8)),S=b(e(102)),T=b(e(104)),k=e(101),x=e(103),P="https://mapi.dianping.com",A="/fun/getdzbooktable.json2",O="/fun/getbarbookpackages.json2",E="/dzbook/getcalendarinventory.json2",L=function(){function e(){(0,S.default)(this,e)}return(0,T.default)(e,[{key:"getPrivateData",value:function(e){return{showCommonReserveModule:!1,isFetching:!1,bookData:null,bookDate:null,bookPackageData:null,barDialogVisible:!1,inventoryData:[],inventoryTimeRange:[],currentInventoryTimeIndex:0,inventoryDialogVisible:!1,currentItemId:"",currentdate:{},periodId:"",periodIndex:"",preFlag:null,packageUrl:"",urlPrefix:"",urlSuffix:""}}},{key:"injectPrivateFunction",value:function(e){e.requestBookDate=function(t,a){var n={shopid:e.data.loadOptions.shopId||"",shopuuid:e.data.loadOptions.shopUuid||"",startdateindex:t.bookDates[a].dateIndex,clienttype:"miniprogram",channel:"dp"};e.setData({isFetching:!0}),o().h.request(new x(new k(A,{domain:P,data:n}),{callback:function(t){var n=t.serverData||null;if(n&&200===n.statusCode&&n.data&&200===n.data.code&&n.data.data){var i=n.data.data;e._parseBookData(i),e.spliceBookData(i,a)}else o().sc.showToast({title:"数据出错",icon:"none"}),e.setData({bookDate:null});e.setData({isFetching:!1})}}))},e.requestBookPackages=function(t){var a={shopid:e.data.loadOptions.shopId||e.data.loadOptions.shopUuid||"",productid:t,bookdate:e.data.bookData.dateIndex,selectid:"",clienttype:"miniprogram",channel:"dp"};o().h.request(new x(new k(O,{domain:P,data:a}),{callback:function(t){var a=t.serverData||null;a&&200===a.statusCode&&a.data&&200===a.data.code&&a.data.data?e.setData({bookPackageData:a.data.data,barDialogVisible:!0}):(o().sc.showToast({title:"套餐数据出错",icon:"none"}),e.setData({bookPackageData:null}))}}))},e.requestInventory=function(t){var a={shopid:e.data.loadOptions.shopId||e.data.loadOptions.shopUuid||"",itemid:e.data.currentItemId,begindate:e.data.currentdate.purchaseDate,enddate:e.data.currentdate.purchaseDate};o().h.request(new x(new k(E,{domain:P,data:a}),{callback:function(a){var n=a.serverData||null;if(n&&200===n.statusCode&&n.data&&200===n.data.code&&n.data.data){var i=n.data.data.periodInventories;if(!i||!i.length)return void o().sc.showToast({title:"对不起，当前时间不可预订",icon:"none"});var r=i[0].periods,s=[{name:"上午",list:[]},{name:"下午",list:[]},{name:"晚上",list:[]}];r.forEach((function(e){var t=e.periodName,a=parseInt(e.periodName.substring(0,2));a<12||"12:00"==t?s[0].list.push(e):a>12&&a<18||"12:30"==t||"18:00"==t?s[1].list.push(e):(a>18||"18:30"==t)&&s[2].list.push(e)})),e.setData({preFlag:t,inventoryTimeRange:s.filter((function(e){return e.list.length})),barDialogVisible:!1,inventoryDialogVisible:!0})}else o().sc.showToast({title:"库存数据出错",icon:"none"}),e.setData({timeRange:[]})}}))},e.inventorySelect=function(t){if(t.currentTarget.dataset.usable){var a=t.currentTarget.dataset.id,n=t.currentTarget.dataset.index;e.data.periodId==a&&(n=""),e.setData({periodId:a,periodIndex:n})}},e.inventoryTimeRangeSelect=function(t){var a=t.currentTarget.dataset.index;e.setData({currentInventoryTimeIndex:a})},e.inventoryReturn=function(){"product"==e.data.preFlag?e.setData({inventoryDialogVisible:!1}):e.setData({inventoryDialogVisible:!1,barDialogVisible:!0})},e.inventoryConfirm=function(){var t="";t="product"==e.data.preFlag?"".concat(e.data.urlPrefix).concat(e.data.urlSuffix):"".concat(e.data.packageUrl);var a=e.data.inventoryTimeRange[e.data.currentInventoryTimeIndex].list[e.data.periodIndex];o().navigation.forwardTo({url:"".concat(t).concat(encodeURIComponent("&timeslot=".concat(encodeURIComponent("".concat(e.data.currentdate.purchaseDate," ").concat(a.periodName)),"&arriveTime=").concat(a.periodBeginTime,"&leaveTime=").concat(a.periodEndTime,"&appperiodid=").concat(a.appPeriodId,"&crossday=").concat(a.isNextDay)))})},e.spliceBookData=function(t,a){var n,i=e.data.bookData&&e.data.bookData.bookDates&&e.data.bookData.bookDates.length||0,o=e.data.bookData;(n=o.bookDates).splice.apply(n,[a,t.bookDates.length].concat((0,C.default)(t.bookDates))),o.bookDates=o.bookDates.splice(0,i),e.setBookData(o,a)},e.setBookDate=function(t,a){if(t&&t.bookTableItems){t.bookTableItemIndex=a,t.displayUnitGroup=t.bookTableItems.reduce((function(e,t){return t.bookUnitGroup&&e.push(t.bookUnitGroup.displayName),e}),[]),t.displayTableUnits=t.bookTableItems[a].bookTableUnits.concat([]),t.displayTableUnits.forEach((function(e){e.description=e.descItems&&e.descItems.length?e.descItems.join(" | "):""}));var n=e.data.bookData.defaultShowUnitNum;t.displayTableUnits.length>n?(t.needViewMore=!0,t.isFolded=!0,t.displayTableUnits=t.displayTableUnits.splice(0,n)):t.needViewMore=!1,e.setData({bookDate:t})}else e.setData({bookDate:null})},e.setBookData=function(t,a){t.showable?(t.dateIndex=t.bookDates[a].dateIndex,e.setData({currentdate:t.bookDates[a],bookData:t,showCommonReserveModule:t.showable}),t.bookDates[a].needRequestData?e.requestBookDate(t,a):e.setBookDate(t.bookDates[a],0)):e.setData({bookData:null,showCommonReserveModule:!1})},e.showMore=function(){var t=e.data.bookDate;t.displayTableUnits=e.data.bookDate.bookTableItems[e.data.bookDate.bookTableItemIndex].bookTableUnits.concat([]),t.isFolded=!1,e.setData({bookDate:t})},e.hideMore=function(){var t=e.data.bookData.defaultShowUnitNum,a=e.data.bookDate;a.isFolded=!0,a.displayTableUnits=a.displayTableUnits.splice(0,t),e.setData({bookDate:a})},e.groupSelect=function(t){var a=t.currentTarget.dataset.index;a!==e.data.bookDate.bookTableItemIndex&&e.setBookDate(e.data.bookDate,a)},e.dateSelect=function(t){var a=t.currentTarget.dataset.index;t.currentTarget.dataset.dateindex!==e.data.bookData.dateIndex&&e.setBookData(e.data.bookData,a)},e.bookBtnClick=function(t){var a=e.data.bookData.bookUrlStyle||"",n=e.data.bookData.bookUrlPrefix||"",i=t.currentTarget.dataset.urlsuffix||"";if(t.currentTarget.dataset.clickable){var r=t.currentTarget.dataset.clicktype,s=t.currentTarget.dataset.productid,d=t.currentTarget.dataset.itemid;e.setData({currentItemId:d,urlPrefix:n,urlSuffix:i}),1!=r?"unify"==a?e.requestInventory("product"):n&&o().navigation.forwardTo({url:"".concat(n).concat(i)}):e.requestBookPackages(s)}},e.dialogBookBtnClick=function(t){var a=e.data.bookData.bookUrlStyle||"",n=t.currentTarget.dataset.url||"";"unify"==a?(e.setData({packageUrl:n}),e.requestInventory("package")):n&&o().navigation.forwardTo({url:n})},e.goBook=function(e){e&&o().navigation.forwardTo({url:e})},e.closeDialog=function(t){"package"!=t.currentTarget.dataset.flag?e.setData({inventoryDialogVisible:!1}):e.setData({barDialogVisible:!1})},e._parseBookData=function(e){e&&e.bookDates&&e.bookDates.length&&e.bookDates.forEach((function(e){e.week=e.displayName.split("\n")[0],e.date=e.displayName.split("\n")[1]}))},e.doNothing=function(){}}},{key:"onPageInit",value:function(e){this.shopCROptionsChange||(this.shopCROptionsChange=function(t,a){var n=a.loadOptions;if(n){var i={shopid:n.shopId||"",shopuuid:n.shopUuid||"",isinitreq:!0,clienttype:"miniprogram",channel:"dp"};o().h.request(new x(new k(A,{domain:P,data:i}),{callback:function(t){var a=t.serverData||null;if(a&&200===a.statusCode&&a.data&&200===a.data.code&&a.data.data){var n=a.data.data;e._parseBookData(n),e.setBookData(n,0)}else o().sc.showToast({title:"数据出错",icon:"none"}),e.setData({showCommonReserveModule:!1})}}))}}.bind(this),e.env.register("__poi_data_change__",this.shopCROptionsChange))}},{key:"dispose",value:function(e){e.requestBookDate=null,e.requestBookPackages=null,e.requestInventory=null,e.doNothing=null,e.inventorySelect=e.inventoryTimeRangeSelect=e.inventoryReturn=e.inventoryConfirm=e.spliceBookData=e.setBookDate=e.setBookData=e.showMore=e.hideMore=e.groupSelect=e.dateSelect=e.bookBtnClick=e.dialogBookBtnClick=e.goBook=e.closeDialog=e._parseBookData=null,this.shopCROptionsChange&&(e.env.unregister("__poi_data_change__",this.shopCROptionsChange),this.shopCROptionsChange=null)}}]),e}();t.exports=L})),window.define("743",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(231),k=e(93),x=e(99),P="b_09iatlvv",A="b_7et5hfzv",O="b_dianping_nova_sttnlwih_mv",E="b_dianping_nova_sttnlwih_mc",L="b_dianping_nova_pw0i34ft_mv",N="b_dianping_nova_pw0i34ft_mc",M={SHOP_TUAN:"/wxmapi/shop/shoptuan"};M.SHOP_TUAN="/wxmapi/shop/bdshoptuan";var R=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{isFromApp:{},showMShopTuanodule:!1,isNew:!0}}},{key:"injectPrivateFunction",value:function(e){e.tuanItemTap=function(t){var a=t.currentTarget.dataset.url;if(k.moduleClick(A,e.data.lxData),e.data.isNew){var n=t.currentTarget.dataset.type,i=t.currentTarget.dataset.index;k.moduleClick("tuan"===n?N:E,{deal_id:"tuan"===n?e.data.tuanData[i].id:e.data.couponData[i].id,custom:{is_credit:-999,item_index:i,dealSubType:-999},poi_id:-999,shopuuid:this.shopUuid})}a&&o().navigation.forwardTo({url:a})},e.toMoreOrLessTuan=function(){if(e.data.showTuanClose){if(e.setData({showTuanClose:!1,toMoreTuanText:"收起"}),e.data.isNew&&e.data.tuanData.length>=2)for(var t=2;t<e.data.tuanData.length;++t)k.moduleView(L,{deal_id:e.data.tuanData[t].id,custom:{is_credit:-999,item_index:t,dealSubType:-999},poi_id:-999,shopuuid:this.shopUuid})}else e.setData({showTuanClose:!0,toMoreTuanText:"查看其他"+(e.data.tuanData.length-2)+"个团购"})},e.toMoreOrLessCoupon=function(){if(e.data.showCouponClose){if(e.setData({showCouponClose:!1,toMoreCouponText:"收起"}),e.data.isNew&&e.data.couponData.length>=2)for(var t=2;t<e.data.couponData.length;++t)k.moduleView(O,{deal_id:e.data.couponData[t].id,custom:{is_credit:-999,item_index:t,dealSubType:-999},poi_id:-999,shopuuid:this.shopUuid})}else e.setData({showCouponClose:!0,toMoreCouponText:"查看其他"+(e.data.couponData.length-2)+"个团购"})}}},{key:"onPageInit",value:function(t){this.shopTuanOptionsChange||(this.shopTuanOptionsChange=function(a,n){var i=this,r=n.loadOptions,s=e(101),d=e(103);if(r){var c=r.shopId,u=r.shopUuid,l={};u?l.shopUuid=u:l.shopId=c;var p=o().userData.dpCityId;p&&(l.cityId=p);!function e(){o().h.request(new d(new s(M.SHOP_TUAN,{domain:x.DOMAIN,data:l}),{callback:function(a){var n=a.serverData||null;if(a.serverData&&401===a.serverData.data.statusCode)return o().userData.dpAccessToken=null,void o().bridge.login().then((function(){e()})).catch((function(){o().navigation.back()}));if(n&&200===n.statusCode&&n.data&&200===n.data.code){var r=n.data.shopTuan||[],s=[],d=!1;r.newTuan&&(d=!0,s=r.coupon,r=r.tuan),i.shopUuid=n.data.shopUuid;var c=n.data.rainBowData||{};if(c.showMShopTuanodule=!1,r.length||s.length){T.log("tuanData length:",JSON.stringify("".concat(r.length)));var u={rainBowData:c,tuanData:r,couponData:s,showMShopTuanodule:!0,isNew:d};if(r.length>2&&(u=Object.assign(u,{toMoreTuan:!0,showTuanClose:!0,toMoreTuanText:"查看其他"+(r.length-2)+"个团购"})),s.length>2&&(u=Object.assign(u,{toMoreCoupon:!0,showCouponClose:!0,toMoreCouponText:"查看其他"+(s.length-2)+"个代金券"})),t.setData(u),k.moduleView(P,t.data.lxData),d)for(var l=0;l<2;++l)s[l]&&k.moduleView(O,{deal_id:s[l].id,custom:{is_credit:-999,item_index:l,dealSubType:-999},poi_id:-999,shopuuid:i.shopUuid}),r[l]&&k.moduleView(L,{deal_id:r[l].id,custom:{is_credit:-999,item_index:l,dealSubType:-999},poi_id:-999,shopuuid:i.shopUuid})}}else T.log("tuanDat error"),t.setData({showMShopTuanodule:!1})}}))}()}}.bind(this),t.env.register("__poi_data_change__",this.shopTuanOptionsChange))}},{key:"dispose",value:function(e){e.tuanItemTap=e.toMoreOrLessTuan=e.toMoreOrLessCoupon=null,this.shopTuanOptionsChange&&(e.env.unregister("__poi_data_change__",this.shopTuanOptionsChange),this.shopTuanOptionsChange=null)}}]),t}();t.exports=R})),window.define("744",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=(e(231),e(93)),k=(e(99),e(99).DOMAIN),x=[15,20,30,45,50,55,65,70,75,80,85,90,95],P="b_09iatlvv",A="b_7et5hfzv",O="b_dianping_nova_pw0i34ft_mv",E="b_dianping_nova_pw0i34ft_mc",L=e(97),N="/api/dzviewscene/productshelf/dzdealshelf.json",M=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"injectPrivateFunction",value:function(e){e.handleShelfProducts=function(e){return e.map((function(e){return e.productAreas?(e.productAreas=e.productAreas.map((function(e){return e.itemArea||e.itemArea.productItems?(e.itemArea.productItems=e.itemArea.productItems.map((function(e){return e.pic&&e.pic.floatTags&&e.pic.floatTags.length&&(e.pic.floatTags=e.pic.floatTags.map((function(e){if(e.icon&&e.icon.picUrl){var t=e.icon.aspectRadio||2.7778,a=e.icon.picHeight||(36*t>132?132/t:36),n={height:a,width:Math.ceil(a*t)};switch(e.position||1){case 1:e.icon.n_style="headImageIconLeftTop",e.icon.n_imageSize=n;break;case 2:e.icon.n_style="headImageIconRightTop",e.icon.n_imageSize=n;break;case 3:e.icon.n_style="headImageIconRightBottom",e.icon.n_imageSize=n;break;case 4:e.icon.n_style="headImageIconLeftBottom",e.icon.n_imageSize=n}}else if(e.label&&e.label.text){switch(e.position||1){case 1:e.label.n_style="headImageIconLeftTop";break;case 2:e.label.n_style="headImageIconRightTop";break;case 3:e.label.n_style="headImageIconRightBottom";break;case 4:e.label.n_style="headImageIconLeftBottom"}}return e}))),e.bottomTags||(e.bottomTags=[]),e.bottomTags=e.bottomTags.map((function(e){if(!e.text||0===e.text.length)return e;var t;try{t=JSON.parse(e.text)}catch(e){}return e.text=t,e})),e})),e):e})),e):e}))},e.updateShelfListData=function(t){e.setData({gcshelf_productList:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].itemArea&&t.productAreas[0].itemArea.productItems,gcshelf_showNum:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].itemArea&&t.productAreas[0].itemArea.defaultShowNum,gcshelf_moreInfo:t.productAreas&&t.productAreas.length>0&&t.productAreas[0]&&t.productAreas[0].more})},e.goDetail=function(t){var a=t.currentTarget.dataset.tab;if(T.moduleClick(A,e.data.lxData),e.data.isNew){var n=t.currentTarget.dataset.index;T.moduleClick(E,{deal_id:e.data.tuanData[n].id,custom:{is_credit:-999,item_index:n,dealSubType:-999},poi_id:-999,shopuuid:this.shopUuid||""})}a.jumpUrl&&o().navigation.forwardTo({url:a.jumpUrl})},e.goJump=function(t){var a=t.currentTarget.dataset.moreInfo;a&&a.jumpUrl&&a.jumpUrl.length>0?o().navigateTo.forwardTo({url:e.data.moreInfo.jumpUrl}):e.setData({gcshelf_isFolded:!e.data.gcshelf_isFolded})}}},{key:"onPageInit",value:function(t){this.dealShelfOptionsChange||(this.dealShelfOptionsChange=function(a,n){var i=n.loadOptions,r=e(101),s=e(103);if(i){var d=i.shopId,c=i.shopUuid,u=i.shopType,l={platform:105};this.shopid=d||0,this.shopUuid=c||"",l.shopid=this.shopid,l.shopuuid=this.shopuuid;var p=o().userData.dpCityId;if(p&&(l.cityid=p),!u)return;if(x.indexOf(u)<0)return;l.mtsiReferrer=encodeURIComponent(L("pages/detail/detail",t.data.loadOptions));o().h.request(new s(new r(N,{domain:k,data:l}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&200===a.data.code){var n=a.data.msg.shelfComponent;if(!n)return;var i=t.handleShelfProducts(n.filterIdAndProductAreas),o=n.mainTitle;t.setData({gcshelf_mainTitle:o,gcshelf_isFolded:!0});var r=i[0];t.updateShelfListData(r),T.moduleView(P,t.data.lxData);var s=t.data.gcshelf_showNum;t.data.gcshelf_productList.slice(0,s-1).forEach((function(e,t){T.moduleView(O,{deal_id:e.itemId,custom:{is_credit:-999,item_index:t,dealSubType:-999},poi_id:-999,shopuuid:c||""})}))}}}))}}.bind(this),t.env.register("__poi_data_change__",this.dealShelfOptionsChange))}},{key:"dispose",value:function(e){e.tuanItemTap=e.toMoreOrLessTuan=e.toMoreOrLessCoupon=null,this.dealShelfOptionsChange&&(e.env.unregister("__poi_data_change__",this.dealShelfOptionsChange),this.dealShelfOptionsChange=null)}}]),t}();t.exports=M})),window.define("745",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(231),x="b_z5dp9z8i",P="b_r7tqnxav",A="/wxmapi/follow/shopfeed",O=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{showFCModule:!1}}},{key:"injectPrivateFunction",value:function(e){e.allFeedTap=function(){T.moduleClick(P,e.data.lxData);var t=e.data.url;t&&o().navigation.forwardTo({url:t})}}},{key:"onPageInit",value:function(t){this.shopFCOptionsChange||(this.shopFCOptionsChange=function(a,n){var i=n.loadOptions,r=e(101),s=e(103),d=e(477);if(i){var c=i.shopId,u=i.shopUuid,l={};if(u)l.shopUuid=u;else{if(!c)return;l.shopId=c}var p=d.getDataSync();if(!p)return;l.userId=p,o().h.request(new s(new r(A,{data:l}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&200===a.data.code){var n=a.data,i=n.feedList,o=n.title,r=n.count,s=n.url,d=n.showBottom;if(i&&i.length){var c={threeLine:"three-line",personalSwitch:!0};c.personalSwitch=a.data.config&&a.data.config.personalSwitch,t.setData({config:c,showBottom:d,url:s,userId:p,feedList:i,title:o,count:r,lxData:Object.assign({},t.data.lxData||{},{from:"friendscome"}),showFCModule:!0}),T.moduleView(x,t.data.lxData)}else k.log("shop friends come res: ".concat(a&&a.data))}else k.log("shop friends come error: ".concat(JSON.stringify(e)))}}))}}.bind(this),t.env.register("__poi_data_change__",this.shopFCOptionsChange))}},{key:"dispose",value:function(e){e.allFeedTap=null,this.shopFCOptionsChange&&(e.env.unregister("__poi_data_change__",this.shopFCOptionsChange),this.shopFCOptionsChange=null)}}]),t}();t.exports=O})),window.define("746",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(231),x=e(101),P=e(103),A=e(99),O="/wxmapi/shop/friendslike",E="b_6alqtrds",L="b_dmzfm5it",N=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{shopFriImgClass:{width:"165px",height:"125px",borderRadius:"7px 7px 0 0"},spImgClass:{width:"125px",height:"125px",borderRadius:"7px  0 0 7px"},recordList:[]}}},{key:"injectPrivateFunction",value:function(e){e.shopItemTap=function(t){var a=t.currentTarget.dataset.item,n=a.schema,i=a.shopId,r=a.bizId,s=t.currentTarget.dataset.index,d=n||"/pages/detail/detail?shopId=".concat(i);(d+="&from=default")&&o().navigation.forwardTo({url:d}),T.moduleClick(E,Object.assign(e.data.lxdata,{poi_id:i,biz_id:r,index:s,query_id:e.data.queryId}))},e.adShopTap=function(t){var a=t.detail,n=e.data.recordList[a],i=n.schema;(i+="&from=default")&&o().navigation.forwardTo({url:i}),T.moduleClick(E,Object.assign(e.data.lxdata,{poi_id:n&&n.shopId,biz_id:n&&n.bizId,index:a,query_id:e.data.queryId}))}}},{key:"onPageInit",value:function(t){this.shopFOptionsChange||(this.shopFOptionsChange=function(a,n){var i=n.loadOptions;if(i){var r,s=i.shopId,d=i.shopUuid,c=T.get("lxcuid")||"",u=o().userData.wxmpEncryptedOpenId,l={longitude:o().userData.longitude,latitude:o().userData.latitude},p=o().userData.dpCityId;try{r=o().runtimeInfo||new(e(138))}catch(e){}var h={cuid:c,cityId:p,openId:u,lng:l&&l.longitude||0,lat:l&&l.latitude||0,os:r&&r.deviceSystem};d?h.shopUuid=d:h.shopId=s,k.log("friendlike fetch params ".concat(h)),o().h.request(new P(new x(O,{domain:A.DOMAIN,data:h}),{callback:function(e){var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&200==a.data.code&&a.data.data&&a.data.data.recordList){var n=a.data.data.recordList,i=a.data.adMode||!1,o=a.data.data.queryId;t.setData({adMode:i,recordList:n,queryId:o}),T.moduleView(L,Object.assign(t.data.lxdata,{query_id:o}))}else t.setData({recordList:[]}),k.log("小伙伴们喜欢数据error:",JSON.stringify(a.data.data))}}))}}.bind(this),t.env.register("__poi_data_change__",this.shopFOptionsChange))}},{key:"dispose",value:function(e){e.shopItemTap=e.adShopTap=null,this.shopFOptionsChange&&(e.env.unregister("__poi_data_change__",this.shopFOptionsChange),this.shopFOptionsChange=null)}}]),t}();t.exports=N})),window.define("747",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(114),x=e(101),P=e(103),A=e(98),O="/ugc/bd/review/shop/shopreview",E="b_4sho1bz2",L=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{hasApp:{},needLogin:e.data.shopModules["shop-review"]&&e.data.shopModules["shop-review"].forceLogin,reviewTags:[],listView:{},show:!0}}},{key:"injectPrivateFunction",value:function(t){t.getData=function(){var e=t.data.reviewListParams||{},a=parseInt(e.shopId)||0,n=e.shopUuid||"";(a||n)&&(t.setData({shopId:a,shopUuid:n,listView:{firstLoading:!0},shopOptions:{shopId:a,shopUuid:n},appLaunchUrl:this.appLaunchUrl||"",pageCid:this.pageCid||""}),t.fetchReviewList({shopId:a,shopUuid:n}))},t.handleClickTag=function(e){var a=function(){var a=e.detail.target.dataset,n=a.type,i=a.keyword,o=a.hit;t.jump2List({type:n,keyword:i,hit:o})};t.data.needLogin?o().bridge.login().then(a):a()},t.handleAllReview=function(e){T.moduleClick(E,t.data.lxdata);t.data.needLogin&&o().bridge.login().then((function(){}))},t.jump2List=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.type,i=a.keyword,r=a.hit;t.data.shopUuid&&(e="shopUuid=".concat(t.data.shopUuid)),t.data.shopId&&(e="shopId=".concat(t.data.shopId)),e&&o().navigation.forwardTo({url:"".concat("/packages/ugc/pages/reviewlist/reviewlist","?").concat(e,"&msource=wxappmain&hit=").concat(r,"&tagType=").concat(n,"&tag=")+encodeURIComponent(i)})},t.fetchReviewList=function(a){var n=function(e){k.addError("fetchReviewList fail:",e,!0),t.setData({isError:!0,listView:{list:[],listError:{iconType:2},isEnd:!1}})},i={pageSize:3,cx:"*",mtsiReferrer:encodeURIComponent(A.getCurrentPageUrlWithArgs()),isNeedNewReview:1};a.shopUuid?i.shopUuid=a.shopUuid:i.shopId=a.shopId;var r=e(99);o().h.request(new P(new x(O,{domain:r.DOMAIN,data:i}),{callback:function(e){t.setData({isLoading:!1,showTagLoading:!1}),o().sc.hideToast();var a=e.serverData||null;if(a&&200===a.statusCode&&a.data&&200===a.data.code)if(a.data.shopReviewInfo){var r=a.data.shopReviewInfo,s=r.reviewTotalCount,d=r.reviewList,c=r.reviewTags,u={list:d||[],showLoading:!1,isEnd:!1,firstLoading:!1};t.setData({totalCount:s,listView:u,reviewTags:c||[],isError:!1})}else n("加载评论出错，该商户不存在评价，shopid为".concat(i.shopUuid||i.shopId,", res为").concat(JSON.stringify(a)));else n("网络出错了"+JSON.stringify(e))}}))},t.allReviewTap=function(e){T.moduleClick(E,t.data.lxdata);var a=function(){t.jump2List({type:0,keyword:"全部",hit:0})};t.data.needLogin?o().bridge.login().then(a):a()}}},{key:"onPageInit",value:function(e){this.onPageReady||(this.onPageReady=function(){e.getData()},o().env.register(20016,this.onPageReady))}},{key:"dispose",value:function(e){e.getData=e.handleClickTag=e.handleAllReview=e.jump2List=e.fetchReviewList=e.allReviewTap=null,this.onPageReady&&(o().env.unregister(20016,this.onPageReady),this.onPageReady=null)}}]),t}();t.exports=L})),window.define("748",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k="b_dianping_nova_shopdish_mv",x="b_o7m768g1",P="b_ozguly4j",A="b_dianping_nova_POI_menu_mv",O={SHOP_MENU:"/wxmapi/shop/shopmenu"},E=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{dishData:{},showModule:1,shopDishImgClass:"width: 290rpx;height: 188rpx;border-radius: 14rpx;",sceneIsShare:!1,partialLength:0,menuData:{}}}},{key:"injectPrivateFunction",value:function(t){t.updateScene=function(){var e=o(),a=e.bridge.getShowOptions()&&e.bridge.getShowOptions().scene?e.bridge.getShowOptions().scene:null;t.setData({sceneIsShare:"1036"===String(a)})},t.shopAllDishTap=function(){T.moduleClick(x,t.data.lxdata)},t.shopSingleDishTap=function(e){var a=e.currentTarget.dataset.url;T.moduleClick(P,t.data.lxdata),a&&o().navigation.forwardTo({url:a,type:"h5"})},t.fetchmenuData=function(a){var n=e(101),i=e(103);if(t.data.shopModules["shop-dish"]&&t.data.shopModules["shop-dish"].showMenu){var r={shopId:a.shopId};o().h.request(new i(new n(O.SHOP_RANK,{data:r}),{callback:function(e){var a=e.serverData||null;if(a&&a.data&&a.data.data){var n=Array.isArray(a.data.data.menuList)?a.data.data.menuList:[],i=n.length>3?n.splice(0,3):n;t.setData({menuData:{picUrls:i,count:a.data.data.total||n.length||i.length||0}},(function(){T.moduleView(A)}))}}}))}},t._dishDataChange=function(e){if(e&&(e.dishTags&&e.dishTags.length||e.tags&&e.tags.length)){e.dishTitle="推荐菜",e.recommendTitle="网友推荐";var a=e.dishTags.length>3?3:e.dishTags.length;t.setData({showModule:2,dishData:e,partialLength:a},(function(){T.moduleView(k,t.data.lxdata)}))}else t.setData({showModule:0})}}},{key:"onPageInit",value:function(e){this._updateScene,this.shopDishOptionsChange||(this.shopDishOptionsChange=function(t,a){var n=a.loadOptions;if(n){var i=n.shopUuid||n.shopuuid||n.shopId;i&&e.fetchmenuData({shopId:i})}var o=a.dishTags;if(o){if(o&&(o.dishTags&&o.dishTags.length||o.tags&&o.tags.length)){o.dishTitle="推荐菜",o.recommendTitle="网友推荐";var r=o.dishTags.length>3?3:o.dishTags.length;e.setData({showModule:2,dishData:o,partialLength:r},(function(){T.moduleView(k,e.data.lxdata)}))}else e.setData({showModule:0})}}.bind(this),e.env.register("__poi_data_change__",this.shopDishOptionsChange))}},{key:"dispose",value:function(e){e.updateScene=e.shopAllDishTap=e.shopSingleDishTap=e.fetchmenuData=e._dishDataChange=null,this._updateScene&&(o().env.unregister(20016,this._updateScene),o().env.unregister(20017,this._updateScene),this._updateScene=null),this.shopDishOptionsChange&&(e.env.unregister("__poi_data_change__",this.shopDishOptionsChange),this.shopDishOptionsChange=null)}}]),t}();t.exports=E})),window.define("749",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"dispose",value:function(e){}}]),e}();t.exports=T})),window.define("750",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(96),C={u_s:"utm_source",u_t:"utm_term",u_m:"utm_media",u_ct:"utm_content",u_cp:"utm_campaign"};t.exports={parse:function(e){if(void 0!==e&&""!==e){var t;try{t=b.queryStringToObject(decodeURIComponent(e))}catch(e){t={}}for(var a in t){if(C[a])t[C[a]]=t[a]}return t}}}})),window.define("751",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C="ppe",S="product",T={};function k(e,t){return(e||"").replace(new RegExp("(?:^|&)"+t+"=[^&=?]*","ig"),"")}T["beta"]="//m.51ping.com/adp/log",T[C]="//m.51ping.com/adp/log",T[S]="//m.dianping.com/adp/log",n.init=function(e,t,n){var i;e&&e._fb_&&(i=function(a){!function(e,t,a,n){var i=(n=n||{}).env||S,o=(n.ishttp?"http:":"https:")+(T[i]||T[S]),r="",s="";try{r=decodeURIComponent(wx.getStorageSync("_lx_sdk_lxcuid")||""),s=decodeURIComponent(wx.getStorageSync("unionid")||"")}catch(e){}var d=t._fb_;/(%253d|%253D|%3d|%3D)/.test(d)&&(d=decodeURIComponent(d)),/^(http|https)/.test(d)&&(d=decodeURIComponent(d)),d=k(d,"act"),d+="&act=4",e&&(d=(d=k(d,"openid"))+"&openid="+e),r&&(d=(d=k(d,"_lxsdk_cuid"))+"&_lxsdk_cuid="+r),s&&(d=(d=k(d,"unionid"))+"&unionid="+s),!/adshop_id/.test(d)&&a.adshop_id&&(d=d+"&adshop_id="+a.adshop_id),"tuandetail"===a.pageName&&!/addeal_id/.test(d)&&a.addeal_id&&(d=d+"&addeal_id="+a.addeal_id),t.utm&&(d=(d=k(d,"utm"))+"&utm="+t.utm),t.utm_source&&(d=(d=k(d,"utm_source"))+"&utm_source="+t.utm_source),t.sub_media&&(d=(d=k(d,"sub_media"))+"&sub_media="+t.sub_media),wx.request({url:o+"?"+d,data:{},header:{"content-type":"application/json"}})}(a,e,t,n)},function e(t){if(!(t>5)){var n=decodeURIComponent(wx.getStorageSync("openid")||"");n?i(n):a((function(){e(t+1)}),100)}}(0))}})),window.define("754",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(99),C=e(105),S=[340,341,342,2335,2336,2337,2338,2339,2340,2341,3170,3171,3172,3173,3174,3175,3177,2406,2504,15242,15243],T=e(134),k=e(91);T({pageName:"city",data:{isHidden:!1,cityFrom:""},cityCache:[void 0,void 0],onLoad:function(e){var t=o().userData||{},a=t.dpCityId,n=t.dpLocIsOverseasCity,i=e&&e.cityTab||1,r=e&&e.cityFrom||"";1===n&&-1===S.indexOf(a)&&(i=1===n?2:1);var s={initCity:!0,cityArea:0,cityAnimation:!0,citySearch:!0,cityDomain:b.DOMAIN,cityTab:i,oncityHandler:"cityHandler"};this.setData({cityConfig:s,cityFrom:r})},cityHandler:function(e){var t=e.detail,a={isDefault:!1,lastModify:+new Date,city:{cityId:t.cityId,cityName:t.cityName,isOverseasCity:t.isOverseasCity}};k.setLocalStorageSync("city",a),C.setDataSync(t.cityId,t.cityName,t.isOverseasCity?1:2),o().navigation.back()},onShow:function(){this.setData({isHidden:!1})},onHide:function(){this.setData({isHidden:!0})}})})),window.define("757",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C,S=e(7)(e(40)),T=e(134),k=e(101),x=e(103),P=e(91),A=e(476),O=e(477),E=e(99),L=e(231),N="dp_user_info",M=[1,2],R="/wxmapi/user/userinfo",U="/wxmapi/order/uniordercount",B=!1;T({pageName:"my",data:{pageProtocol:"https:",appVersion:E.APP_VERSION,debug:0,isLogin:!0,userInfo:{},orderInfo:{},myError:null,loadOptions:{}},onLoad:function(t){var n=this,i=this;this.debugCounter=0,this.debugTrigger=function(){if(n.debugCounter++,5===n.debugCounter){r().workflow._residentImplIns[4101].instance.isActiveDevMode=1;var e=!1;try{var t=r().workflow._residentImplIns[5101].instance.getConditionResult();t.isComplete&&t.bool&&(e=!0)}catch(e){}e&&r().navigation.forwardTo({url:"stlk://debug"})}var i=n,o=a((function(){clearTimeout(o),i.debugCounter=0}),2e3)};r().env.register("__apply_login__",(function(e,t){!function(e){A.getDataAsync((function(t){t&&(e&&r().navigation.forwardTo({url:e}),i.setData({hasMust:!0}),i.init())}))}(t&&t.url||"")})),this.init(t);var o=this;o.options=t,C||(C=[,e(758),e(759),e(760),e(761),e(762),e(763),e(764)]),e(698).onLoad(C,this,t),o._onDataUpdated||(o._onDataUpdated=function(e,t){var a=t.swapData;t.newData,"dpAccessToken"===t.field&&a===r().userData&&o.init()},r().env.register(43002,o._onDataUpdated))},onShow:function(){L.config({enableShake:!0,appSource:"dianping-wxapp"}),r().induction.LX.pageView("c_dianping_nova_67g8pm9y")},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,n=t;function i(e){r().h.request(new x(new k(E.DOMAIN+U,{method:"POST",betterAccessToken:!0,data:{types:M}}),{callback:function(e){(e=e.serverData)&&200===e.statusCode?200===e.data.code?a.setData({orderInfo:e.data.countInfo}):1001===e.data.code?(a.setData({orderInfo:{},isLogin:!1}),s()):a.setData({orderInfo:{}}):a.setData({myError:{iconType:2}})}}))}function o(e){P.setLocalStorageSync(N,e)}function s(){P.setLocalStorageSync(N)}function d(e){O.getDataAsync((function(t){t&&a.setData({userInfo:(0,S.default)((0,S.default)({},e),{},{userId:t})})}))}function c(){r().h.request(new x(new k(E.DOMAIN+R,{method:"GET",betterAccessToken:!0}),{callback:function(e){if((e=e.serverData)&&200===e.statusCode)if(B=!0,200===e.data.code){var t=e.data.userInfo;a.setData({myError:null,userInfo:t,isLogin:!0},(function(){d(t)})),o(t)}else 101===e.data.code?(a.setData({myError:null,userInfo:{},isLogin:!1}),s()):(a.setData({myError:{iconType:3,description:"用户不存在"}}),owl.error.addError("用户不存在",e.data.code,!0));else a.setData({myError:{iconType:2}})}}))}function u(){var t=e(91).getLocalStorageSync(N);t&&(B||a.setData({myError:null,userInfo:t,isLogin:!0}))}n&&(a.data.hasMust||n.refresh)?(c(n),i(n),r().env.notify("__dp_my_reLoad__")):(u(),A.isDataPrepared()?(c(n),i(n)):(B=!0,a.setData({userInfo:{},orderInfo:{},isLogin:!1}),s()))},onPullDownRefresh:function(){this.init({refresh:!0}),r().sc.g.stopPullDownRefresh()},onUnload:function(){e(698).onUnload(this),this._onDataUpdated&&(r().env.unregister(43002,this._onDataUpdated),this._onDataUpdated=null)}})})),window.define("758",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"injectPrivateFunction",value:function(e){e.onTap=function(t){var a=e.data.userInfo.userId||"";"/packages/user/pages/personal/personal?userId=".concat(a);e.data.isLogin||(o().env.notify("__apply_login__"),T.moduleClick("b_i1vwfphu"))}}},{key:"dispose",value:function(e){}}]),e}();t.exports=k})),window.define("759",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(91),k="dp_new_card",x=e(93),P=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{isNew:!1,isTap:!1}}},{key:"injectPrivateFunction",value:function(e){e.onTapCard=function(t){var a=e.data.userInfo.userId||"",n="/packages/user/pages/card/card?userId=".concat(a);o().navigation.forwardTo({url:n}),e.setData({isTap:!0}),e.data.isNew&&T.setLocalStorageSync(k,1),x.moduleClick("b_hp2pkg0r")}}},{key:"onPageInit",value:function(e){function t(){T.getLocalStorageAsync(k).then((function(t){e.setData({isNew:!t})}))}t(),o().env.register(20017,(function(){e.data.isTap&&e.data.isNew&&e.setData({isNew:!1})})),o().env.register("__dp_my_reLoad__",(function(){t()}))}},{key:"dispose",value:function(e){}}]),e}();t.exports=P})),window.define("760",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k={topay:"b_tzly854o",touse:"b_29opclny",refund:"b_807o7mlh",all:"b_fd76ds6s"},x=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"injectPrivateFunction",value:function(e){e.onTapOrder=function(t){var a=t.currentTarget.dataset.type,n="/packages/order/pages/myorder/myorder?currentType=".concat(a);e.data.isLogin?o().navigation.forwardTo({url:n}):o().env.notify("__apply_login__"),T.moduleClick(k[a])}}},{key:"dispose",value:function(e){}}]),e}();t.exports=x})),window.define("761",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(99),k=e(93),x=e(101),P=e(103),A=e(91),O={vote:"b_7vvsine1",eat:"b_hatt9j19",coupon:"b_cgjax98f",service:"b_dianping_nova_nobdaw4d_mc"},E="/wxmapi/tools/config",L=!1,N=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{showToolModule:!1,toolList:null,isSupportMiniPro:!1,style:null}}},{key:"injectPrivateFunction",value:function(e){e.toolTap=function(t){var a=t.currentTarget.dataset.item,n=a.toolId||"",i=a.url;e.data.isSupportMiniPro&&a.urlData.appId||!i||(e.data.isLogin?o().navigation.forwardTo({url:i}):o().env.notify("__apply_login__")),O[n]&&k.moduleClick(O[n]),"service"===n&&a.phoneNum&&o.sc.g.makePhoneCall({phoneNumber:a.phoneNum,success:function(){k.moduleClick("b_75nqwo1a")}})}}},{key:"onPageInit",value:function(e){function t(){A.getLocalStorageAsync("dp_my_tools").then((function(t){t&&(L||(Array.isArray(t)?(t=t.map((function(e){return e.itemClass="tool-item",e.iconClass="icon",e.textClass="title",e})),e.setData({showToolModule:!0,toolList:t,style:{container:"tools",mainContent:"content"}})):e.setData({showToolModule:!0,toolList:t.toolList,style:t.style})))})),o().h.request(new P(new x(T.DOMAIN+E),{callback:function(t){if((t=t.serverData)&&200==t.statusCode&&t.data&&200==t.data.code){var a=t.data.toolList,n=t.data.style;if(a&&a.length>0){L=!0;var i=a.map((function(e){return e.urlData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,a=e.type;try{if(0===t.indexOf("dpmina://")){var n=t.substring(9),i=Url.parseQuery(n),o={};return["appId","path","type"].map((function(e){i[e]&&(o[e]=decodeURIComponent(i[e]))})),t=this._checkWebview({url:o.path,type:o.type}),{appId:o.appId,url:t}}return{url:t=this._checkWebview({url:t,type:a})}}catch(e){return{url:t}}}({url:e.url}),e}));e.setData({showToolModule:!0,toolList:i,style:n}),o={toolList:a,style:n},A.setLocalStorageSync("dp_my_tools",o)}}var o}}))}t(),function(){var t,a=!1;try{t=o().sc.g.getSystemInfoSync()}catch(e){}finally{t&&t.SDKVersion&&(a=-1!==function(e,t){e=e.split("."),t=t.split(".");var a=Math.max(e.length,t.length);for(;e.length<a;)e.push("0");for(;t.length<a;)t.push("0");for(var n=0;n<a;n++){var i=parseInt(e[n]),o=parseInt(t[n]);if(i>o)return 1;if(i<o)return-1}return 0}(t.SDKVersion,"2.0.7"))}e.setData({isSupportMiniPro:a})}(),o().env.register("__dp_my_reLoad__",(function(){t()}))}},{key:"dispose",value:function(e){}}]),e}();t.exports=N})),window.define("762",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(99),k=e(93),x=e(101),P=e(103),A=e(91),O=e(476),E="/wxmapi/my/column",L="/wxmapi/coupon/unicouponstatus",N=!1,M="b_75nqwo1a",R="b_dianping_nova_x8iksgvv_mv",U="b_dianping_nova_x8iksgvv_mc",B=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{showModule:!1,columnList:null}}},{key:"injectPrivateFunction",value:function(e){e.columnTap=function(t){var a=t.currentTarget.dataset.item,n=a.clickBid||"",i=a.url;i&&~i.indexOf("dpmina://button")||("kefu"===a.type&&a.phoneNum?o().sc.g.makePhoneCall({phoneNumber:a.phoneNum,success:function(){k.moduleClick(M)}}):(k.moduleClick(U,{title:a.name}),e.data.isLogin?o().navigation.forwardTo({url:i}):o().env.notify("__apply_login__"),n&&k.moduleClick(n)))}}},{key:"onPageInit",value:function(e){function t(){A.getLocalStorageAsync("dp_my_columns").then((function(t){t&&(N||e.setData({showModule:!0,columnList:t}))})),o().h.request(new P(new x(T.DOMAIN+E),{callback:function(t){if((t=t.serverData)&&200===t.statusCode&&200===t.data.code){N=!0;var a=t.data.columnList;e.setData({showModule:!0,columnList:a}),a.forEach((function(e){k.moduleView(R,{title:e.name})})),i=a,A.setLocalStorageSync("dp_my_columns",i),n=function(t){if(t&&t.data&&t.data.couponstatus){for(var n=0;n<a.length;n++)if("优惠券"===a[n].name){a[n].status=t.data.couponstatus;break}e.setData({columnList:a})}},O.isDataPrepared()&&o().h.request(new P(new x(T.DOMAIN+L,{method:"GET",needAccessToken:!0}),{callback:function(e){var t=e.serverData;t&&200===t.data.code&&n(t)}}))}else e.setData({showModule:!1,columnList:null});var n,i}}))}t(),o().env.register("__dp_my_reLoad__",(function(){t()}))}},{key:"dispose",value:function(e){}}]),e}();t.exports=B})),window.define("763",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(104)),k=(e(93),e(99)),x=e(101),P=e(103),A={};A.LOGOUT="/thirdlogin/user/minigram/logout",b={minigram_type:"dp_miniapp_baidu",minigram_appid:k.SWAN_APP_KEY};var O=function(){function e(){(0,S.default)(this,e)}return(0,T.default)(e,[{key:"getPrivateData",value:function(e){return{showLogout:!1}}},{key:"injectPrivateFunction",value:function(e){e.logoutPop=function(){e.showLoginPopup(["确认退出登录吗"],"",[{text:"取消",cb:null},{text:"确定",cb:function(){o().h.request(new P(new x(k.LOGIN_DOMAIN+A.LOGOUT,{method:"POST",data:Object.assign(b,{token:o().userData.dpAccessToken}),header:{"content-type":"application/x-www-form-urlencoded"}}),{callback:function(e){var t=e.serverData;t.data&&t.data.data&&t.data.data.result?(o().sc.showToast("退出成功"),o().userData.dpAccessToken="",o().userData.userid=""):o().sc.showToast("退出失败")}}))}}])}}},{key:"onPageInit",value:function(e){o().userData.dpAccessToken&&e.setData({showLogout:!0}),o().env.register(43002,(function(t,a){var n=a.swapData,i=a.newData;"dpAccessToken"===a.field&&n===o().userData&&(i?e.setData({showLogout:!0}):e.setData({showLogout:!1}))}))}},{key:"dispose",value:function(e){}}]),e}();t.exports=O})),window.define("764",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104));t.exports=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{showLoginPopup:!1}}},{key:"injectPrivateFunction",value:function(e){e.onClosePopup=function(){e.setData({showLoginPopup:!1})},e.showLoginPopup=function(t,a,n){this.setData({showLoginPopup:!0,popupTitle1:t[0],popupTitle2:t[1]||"",popupExtinfo:a||"",popupButtonCancel:n[0].text||"",popupButtonOk:n[1].text||""}),e.onClickPopCancel=function(){n[0].cb&&n[0].cb(),e.setData({showLoginPopup:!1})},e.onClickPopOk=function(){n[1].cb&&n[1].cb(),e.setData({showLoginPopup:!1})}}}},{key:"dispose",value:function(e){e.onClosePopup=null,e.showLoginPopup=null,e.onClickPopCancel=null,e.onClickPopOk=null}}]),e}()})),window.define("767",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(134),S=e(93),T=e(97),k="c_lplpry3i";C({pageName:"webview",data:{showArea:0,openUrl:{},pageProtocol:"https:"},onLoad:function(t){this.options=t,b||(b=[e(768),e(770)]),e(698).onLoad(b,this,t),this._goBack||(this._goBack=function(){getCurrentPages().length>1?o().navigation.back():o().navigation.forwardTo({url:"/pages/home/home"})}.bind(this),o().env.register("__login_close_popup__",this._goBack))},onShow:function(){S.pageView(k)},onUnload:function(){var t=e(698);this._goBack&&(o().env.unregister("__login_close_popup__",this._goBack),this._goBack=null),t.onUnload(this)},onShareAppMessage:function(e){var t=e.webViewUrl,a="/pages/home/home";if(this.data.openUrl&&this.data.openUrl.url&&(a="/pages/webview/webview?url=".concat(encodeURIComponent(this.data.openUrl.url))),t){t=decodeURIComponent(t).split("#")[0];for(var n,i=this.data.shareMsgList||[],o=i.length-1;o>=0;o--)if((n=i[o].uri)&&((n=decodeURIComponent(n).split("#")[0])==t||"knb"===n)){var r=i[o].path;return/^(https?)/.test(r)?(r=encodeURIComponent(r),i[o].path="/pages/webview/webview?url=".concat(r)):r||(i[o].path=a),i[o].path=S.getSharePath(T(i[o].path)),i[o]}}return{title:"大众点评，发现品质生活",path:S.getSharePath(a),imageUrl:"https://p0.meituan.net/wxfood/e52c099a5aa0fb99f7418b9c4ac5dbbc10189.jpg"}}})})),window.define("768",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(93),k=e(95),x=e(114),P=1;o().env.register(43002,(function(e,t){var a=t.swapData,n=t.newData;"dpAccessToken"===t.field&&a===o().userData&&n&&2===P&&(P=1)})),t.exports=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"onPageInit",value:function(t){var a,n,i=this,r=t.options;function s(e){var t=o().userData||{};x.pushError({sec_category:"webviewSrc",category:"jsError",level:"info",tags:{urlDest:a,_userData:{mtUserId:t.userid,wxmpEncryptedOpenId:t.wxmpEncryptedOpenId}},content:e},!0)}function d(e){var t=o().appConfig;return t.DOMAIN+"/wxmapi/redirect?appversion=".concat(t.APP_VERSION,"&appname=").concat(t.APP_NAME,"&token=").concat(o().userData.dpAccessToken,"&originalUrl=").concat(encodeURIComponent(e))}a=r.url,(n=k(a)).query&&n.query.forbidShare&&("all"==n.query.forbidShare?o().sc.g.hideShareMenu&&o().sc.g.hideShareMenu({menus:["shareAppMessage","shareTimeline"]}):"timeline"==n.query.forbidShare?o().sc.g.hideShareMenu&&o().sc.g.hideShareMenu({menus:["shareTimeline"]}):"appmessage"==n.query.forbidShare&&o().sc.g.hideShareMenu&&o().sc.g.hideShareMenu({menus:["shareAppMessage"]})),function(){if(!a)return;var n=e(97),r=[],c=e(95)(a),u=c.uri,l=c.query,p=c.hash,h=o().appConfig;l.utm_source||(l.utm_source=h.APP_NAME);l.mina_name||(l.mina_name=h.APP_NAME);l.mina_version||(l.mina_version=h.APP_VERSION);l.__lxsdk_params=T.collectParamsToWeb(!0);var f=e(769).checkParams(l);if(f.length){var g=function(a,c){return c||(c=a),function(h){if(Array.isArray(h))for(var f=0;f<h.length;f++)if(h[f].key===c){h=h[f].value||"";break}if(l[a]=h||"","finger"===a&&(l[a]=o().userData.jsguardInstance&&o().userData.jsguardInstance.finger.d()),r.splice(r.indexOf(a),1),0===r.length){var g=n(u,l,p);1===P&&m.userData.dpAccessToken&&(P=2,g=d(g));var v=e(698);s(g),t.setData({openUrl:{url:g},showArea:2}),v.forEachWidget(t,(function(e){e!==i&&e.onPageInit(t)}))}}};o().env.notify(35001,{content:"webview开始注入参数:"+JSON.stringify(f),reason:"KEY_STEP",level:"log"});for(var m=o(),v=e(607),w=e(100),_=e(105),y=e(107),I=0;I<f.length;I++){var D=f[I];"token"===D.key?m.userData.dpAccessToken?(l.token=m.userData.dpAccessToken,l.openId=m.userData.wxmpEncryptedOpenId):"*"===D.type?l[D.key]="":-1===r.indexOf("token")&&r.push("token"):!_||"cityid"!==D.key&&"cityId"!==D.key?!y||"latitude"!==D.key&&"longitude"!==D.key?!w||"dpid"!==D.key&&"openId"!==D.key?v&&"finger"===D.key?v.isDataPrepared()?l[D.key]=o().userData.jsguardInstance&&o().userData.jsguardInstance.finger.d():"*"===D.type?l[D.key]="":"!"===D.type&&(r.push(D.key),v.getDataAsync(g("finger"),!1)):quert[D.key]="":w.isDataPrepared()?l[D.key]=o().userData.wxmpEncryptedOpenId:"*"===D.type?l[D.key]="":"!"===D.type&&(r.push(D.key),w.getDataAsync(g(D.key,"openid"),!1)):y.isDataPrepared()?l[D.key]=o().userData[D.key]:(r.push(D.key),y.getDataAsync(g(D.key),!1)):_.isDataPrepared()?l[D.key]=o().userData.dpCityId:(r.push(D.key),_.getDataAsync(g(D.key,"cityId"),!1))}if(r.length){if(-1!==r.indexOf("token")){var b,C=o();t.setData({showArea:0}),b=e(478),o().induction.LX.moduleView("b_dianping_nova_2fhd6zaq_mv",{},{cid:"c_dianping_nova_ywm2o7j5"}),o().h.request(new b({domain:h.LOGIN_DOMAIN,data:{version:C.appConfig.APP_VERSION,appid:C.appConfig.WXMP_APP_ID},callback:function(e){var a=e.serverData;if(a&&200===a.statusCode){var n=a.data;n&&n.unionId&&(n.eod,o().userData.wxmpEncryptedOpenId=n.eod,o().userData.wxmpOpenId=n.openId,o().userData.wxmpUnionId=n.unionId,o().userData.wxmpEncryptedUnionId=n.eud,l.openId||(l.openId=n.eod)),n.data&&n.data.token&&(o().induction.LX.moduleView("b_dianping_nova_wta6owfi_mv",{},{cid:"c_dianping_nova_ywm2o7j5"}),l.token=o().userData.dpAccessToken=n.data.token)}if(o().userData.dpAccessToken)g("token")(o().userData.dpAccessToken);else{t.onCompleteDelayBind=t.onCancelDelayBind=function(){g("token")(o().userData.dpAccessToken),1===t.data.showArea&&(t.setData({showArea:0}),getCurrentPages().length>1?o().navigation.back():o().navigation.forWardTo({url:"/pages/home/home"}))},t.setData({showArea:1});t._afterLogin||(t._afterLogin=function(e,a){if("login"===a.pageName){t._afterLogin&&o().env.unregister(20013,t._afterLogin),t._afterLogin=null;var n=o().userData.dpAccessToken;n?g("token")(n):t._goBack()}}.bind(t),o().env.register(20013,t._afterLogin)),o().env.notify(38001,{reason:"webview login"})}}}))}else t.setData({showArea:0})}else{
//!__lackDataField.length
var S=n(u,l,p);1===P&&m.userData.dpAccessToken&&(P=2,S=d(S)),s(S),t.setData({openUrl:{url:S},showArea:2})}}else{var k=n(u,l,p);s(k),1===P&&o().userData.dpAccessToken&&(P=2,k=d(k)),t.setData({openUrl:{url:k},showArea:2})}}()}},{key:"dispose",value:function(e){}}]),t}()})),window.define("769",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=["token","openId","wxOpenGroupId","cityid","cityId","longitude","latitude","finger","dpid"];t.exports={checkParams:function(e){var t=[];return b.forEach((function(a){var n=e[a];"!"!==n&&"*"!==n||t.push({key:a,type:n})})),t}}})),window.define("770",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(95),k=e(98),x=e(231),P=e(114);t.exports=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{}}},{key:"injectPrivateFunction",value:function(e){e.loadHander=function(e){var t=e&&e.detail&&e.detail.src||"";if(t.indexOf("mp.weixin.qq.com/mp/waerrpage")>-1){var a=T(decodeURIComponent(t)),n=k.getPageRoutes(),i=k.getCurrentPage(),o=i&&i.options&&i.options.url,r="appid:".concat(a.query.appid,", domain:").concat(a.query.domain,", routes:").concat(n.text,", webviewUrl:").concat(decodeURIComponent(o));x.log("webviewDomainError:".concat(decodeURIComponent(o))),P.addError("webviewDomainError",{name:"不支持打开非业务域名",msg:r,level:"info"})}},e.errorHander=function(e){var t=k.getCurrentPage().route,a=e&&e.detail&&e.detail.src||"";x.log("webviewLoadError, pageurl: ".concat(t,", weburl: ").concat(a))},e.onPostMessage=function(t){for(var a,n=t.detail,i=n&&n.data||[],r=[],s=0;s<i.length;s++)"share"===(a=i[s]||{}).action?r.push(a.data):"share"===a.type?r.push(Object.assign({},a.data,{uri:"knb"})):a.requestCode&&1===a.status&&o().env.notify("AFTER_YODA_VERIFY",a);e.webviewHandler({code:200,type:"share",data:r})},e.webviewHandler=function(t){200==t.code?"share"==t.type&&e.setData({shareMsgList:t.data}):301==t.code?o().navigation.forwardTo({url:"/pages/home/home"}):302==t.code&&o().sc.showToast({icon:"none",title:t.msg,duration:4e3,callback:function(){var e=getCurrentPages();e&&e.length>1?o().navigation.back({delta:1}):o().navigation.forwardTo({url:"/pages/home/home"})}})}}},{key:"onPageInit",value:function(e){2===e.data.showArea&&function(){var t=e.data.openUrl.url;if(!t){var a="缺少url参数，即将跳转首页，当前参数："+JSON.stringify(e.data.openUrl);return o().env.notify(35001,{content:a,reason:"PAGE_PARAM_ERROR",level:"error"}),e.webviewHandler({code:301,msg:a})}o().env.notify(35001,{content:"webview即将打开H5页面："+t,reason:"KEY_STEP",level:"log"})}()}},{key:"dispose",value:function(e){e.loadHander=e.errorHander=null}}]),e}()})),window.define("773",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b;e(134)({pageName:"login",data:{loginStep:1,pageProtocol:"https:",PAGE_CAN_HANDLE_TOKEN_REQUIRE:!0},onLoad:function(t){o().sc.logPV("login"),e(192).setApp(o()),b||(b=[e(774),e(775),e(764),e(779),e(781),e(852),e(853)]),e(698).onLoad(b,this,t)},onUnload:function(){e(698).onUnload(this),o().userData.dpAccessToken||o().env.notify(38002,{code:500,message:"用户退出登录页"})}})})),window.define("774",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104));t.exports=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{policyChecked:!1,showPolicyToast:!1}}},{key:"injectPrivateFunction",value:function(e){e.onClickPolicy=function(e){var t=e.currentTarget.dataset.type,a="https://rules-center.meituan.com/m/detail/guize/".concat(t,"?activeRule=1&product=dpapp&pushEnabled=1");o().navigation.forwardTo({url:"/pages/webview/webview?url="+encodeURIComponent(a)})},e.onToastClosed=function(){e.setData({showPolicyToast:!1})},e.onPolicyCheck=function(){e.data.policyChecked?e.setData({policyChecked:!1,showPolicyToast:!1}):e.setData({policyChecked:!0,showPolicyToast:!1})},e.onToastPolicy=function(){e.setData({showPolicyToast:!0})}}},{key:"dispose",value:function(e){e.onToastPolicy=null,e.onPolicyCheck=null,e.onClickPolicy=null,e.onToastClosed=null}}]),e}()})),window.define("775",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104));t.exports=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{}}},{key:"injectPrivateFunction",value:function(t){var a=o().induction.LX;t.confirmAccount=function(n){if(console.log("=====点击是我的====="),t.afterSecondaryMobile=!0,10==t.data.loginStep){var i;a.moduleClick("b_dianping_nova_ds5ravev_mc",{type:"微信授权登陆"}),i=e(191),o().h.request(new i({data:{loginAfterSecondaryMobile:!0,userTicket:t.userTicket,bind:!0},callback:t._onWechatLoginCallback})),t.setData({loginStep:1})}else{var r;a.moduleClick("b_dianping_nova_ds5ravev_mc",{type:"手机号短信登陆"}),r=e(776);var s=e(777).encode;o().h.request(new r({data:{openId:o().userData.wxmpOpenId,countryCode:t.data.regionCode,mobile:s(t.mobile),loginAfterSecondaryMobile:!0,userTicket:t.userTicket,bind:!0},callback:t._onMobileLoginCallback})),t.setData({loginStep:2})}},t.refuseAccount=function(){var n;function i(e){var n=e.serverData.data;if(console.log("=======注册新账号========",n),n&&n.data&&n.data.token){var i=o();i.userData.dpAccessToken=n.data.token,i.userData.wxmpOpenId=n.data.openId,i.userData.wxmpEncryptedOpenId=n.data.eod,i.userData.wxmpUnionId=n.data.uniqueId,i.userData.wxmpEncryptedUnionId=n.data.eud,i.sc.showToast("登录成功"),10==t.data.loginStep?(a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信授权登陆",status:1,custom:{operator_type:-999,source_page:-999}}),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信授权登陆",status:1,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"})):(a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登陆",status:1,custom:{operator_type:-999,source_page:-999}}),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登陆",status:1,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"}))}else 10==t.data.loginStep?a.moduleView("b_dianping_nova_c24czjwh_mv",{type:"微信授权登陆"}):a.moduleView("b_dianping_nova_c24czjwh_mv",{type:"手机号短信登陆"}),t.showLoginPopup(["账号生成失败","你可以尝试通过联系客服咨询解决"],"",[{text:"取消",cb:null},{text:"联系客服",cb:function(){10==t.data.loginStep?a.moduleClick("b_dianping_nova_c24czjwh_mc",{type:"微信授权登陆"}):a.moduleClick("b_dianping_nova_c24czjwh_mc",{type:"手机号短信登陆"}),o().sc.g.makePhoneCall({phoneNumber:"10100011",success:function(){}})}}])}console.log("=====点击不是我的====="),10==t.data.loginStep?(a.moduleClick("b_dianping_nova_b1h0zznq_mc",{type:"微信授权登陆"}),a.moduleView("b_dianping_nova_cqm153fq_mv",{type:"微信授权登陆"})):(a.moduleClick("b_dianping_nova_b1h0zznq_mc",{type:"手机号短信登陆"}),a.moduleView("b_dianping_nova_cqm153fq_mv",{type:"手机号短信登陆"})),n=e(778),t.showLoginPopup(["已确认不是你的账号","将为你生成新的大众点评账号"],"绑定手机号 ".concat(t.data.confirmData.mobile),[{text:"取消",cb:null},{text:"立即生成",cb:function(){10==t.data.loginStep?a.moduleClick("b_dianping_nova_cqm153fq_mc",{type:"微信授权登陆"}):a.moduleClick("b_dianping_nova_cqm153fq_mc",{type:"手机号短信登陆"}),o().h.request(new n({data:{userTicket:t.userTicket},callback:i.bind(t)}))}}])}}},{key:"onPageInit",value:function(e){o().env.notify("START_MOBILE_REUSED_VERIFY")}},{key:"dispose",value:function(e){e.confirmAccount=null,e.refuseAccount=null}}]),t}()})),window.define("776",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(176)),k=C(e(178)),x=C(e(180)),P=C(e(26));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,x.default)(e);if(t){var i=(0,x.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,k.default)(this,a)}}var O=e(101),E=e(103),L=e(99),N=new O("/thirdlogin/user/minigram/inputmobilelogin",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:(b={appName:"main_wxapp",version:L.APP_VERSION,app:-1,partner:26,platform:18},(0,P.default)(b,"app",232),(0,P.default)(b,"loginSource",0),(0,P.default)(b,"minigram_appid",L.SWAN_APP_KEY),(0,P.default)(b,"minigram_type","dp_miniapp_baidu"),(0,P.default)(b,"cx","!"),(0,P.default)(b,"thirdPart","baidu"),(0,P.default)(b,"login_sdk_version",L.APP_VERSION),(0,P.default)(b,"uuid","!"),(0,P.default)(b,"openid","!"),(0,P.default)(b,"extraFingerPrint","!"),(0,P.default)(b,"bind",!0),b),preloadCacheTime:0}),M=function(e){(0,T.default)(a,e);var t=A(a);function a(e){return(0,S.default)(this,a),e?e.domain||(e.domain=L.LOGIN_DOMAIN):e={domain:L.LOGIN_DOMAIN},t.call(this,N,e)}return a}(E);t.exports=M})),window.define("777",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",C=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t};t.exports={_utf8_encode:C,encode:function(e){var t,a,n,i,o,r,s,d="",c=0;for(e=C(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(a=e.charCodeAt(c++))>>4,r=(15&a)<<2|(n=e.charCodeAt(c++))>>6,s=63&n,isNaN(a)?r=s=64:isNaN(n)&&(s=64),d=d+b.charAt(i)+b.charAt(o)+b.charAt(r)+b.charAt(s);return d}}})),window.define("778",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(176)),k=C(e(178)),x=C(e(180)),P=C(e(26));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,x.default)(e);if(t){var i=(0,x.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,k.default)(this,a)}}var O=e(101),E=e(103),L=e(99),N=new O("/api/passport/api/v1/account/ticketlogin",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:(b={fromDp:"true",siteType:"miniApp",appName:"main_wxapp",version:L.APP_VERSION,app:-1,partner:26,platform:18},(0,P.default)(b,"app",232),(0,P.default)(b,"loginSource",0),(0,P.default)(b,"minigram_appid",L.SWAN_APP_KEY),(0,P.default)(b,"minigram_type","dp_miniapp_baidu"),(0,P.default)(b,"cx","!"),(0,P.default)(b,"thirdPart","baidu"),(0,P.default)(b,"uuid","!"),(0,P.default)(b,"openid","!"),(0,P.default)(b,"login_sdk_version",L.APP_VERSION),(0,P.default)(b,"extraFingerPrint","!"),b),preloadCacheTime:0}),M=function(e){(0,T.default)(a,e);var t=A(a);function a(e){return(0,S.default)(this,a),e?e.domain||(e.domain=L.LOGIN_DOMAIN):e={domain:L.LOGIN_DOMAIN},t.call(this,N,e)}return a}(E);t.exports=M})),window.define("779",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(114),k="c_dianping_nova_cii5zjp3";t.exports=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return{isAuthedUserInfo:!1,encrpUser:null,encrpPhone:null,confirmData:{}}}},{key:"injectPrivateFunction",value:function(t){var a=o().induction.LX;t.getUserInfo=function(){var e=wx.getUserInfo;wx.getUserProfile&&"function"==typeof wx.getUserProfile&&(e=wx.getUserProfile),t.setData({isAuthedUserInfo:!0}),e({desc:"用于完善用户信息",success:function(e){console.log("=========getUserInfoCallback========",e),e&&e.rawData&&(t.encrpUser={bind:!0,iv2:e.iv,encryptedData2:e.encryptedData,userInfo:e.userInfo,rawData:e.rawData,signature:e.signature})}})},t.onAuthPhoneNumber=function(n){var i=n.detail;if(console.log("=========getPhoneCallback========",n),!i.iv||!i.encryptedData)return o().sc.showToast("获取手机号失败"),void T.addError("百度登陆联合登陆获取手机号失败",JSON.stringify(n));o().sc.g.showLoading({title:"正在登录...",mask:!0}),function(n){var i,r;i=e(191),r={phone_iv:n.iv,phone_encryptedData:n.encryptedData,bind:!0},t.encrpUser&&!t.quitVerify&&(r=Object.assign(r,{bind:!!t.encrpUser.bind,iv2:t.encrpUser.iv2,encryptedData2:t.encrpUser.encryptedData2,userInfo:JSON.stringify(t.encrpUser.userInfo),rawData:t.encrpUser.rawData,signature:t.encrpUser.signature}));a.moduleView("b_dianping_nova_gslzk3wf_mv",{type:"微信授权登录"},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_gslzk3wf_mv",{type:"微信授权登录"},{cid:k}),o().h.request(new i({data:r,header:{},callback:function(e){t._onWechatLoginCallback(e)}}))}(i)},t._onWechatLoginCallback=function(n){var i,r;if(i=e(780),r=e(191),o().sc.g.hideLoading(),0===n.errorCode){var s=n.serverData.data;if(s.data&&s.data.token)console.log("=========微信登陆成功========",s),o().userData.dpAccessToken=s.data.token,o().userData.wxmpOpenId=s.data.openId||s.data.uniqueId,s.eod&&(o().userData.wxmpEncryptedOpenId=s.eod),o().userData.wxmpUnionId=s.data.unionId,s.eud&&(o().userData.wxmpEncryptedUnionId=s.eud),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信授权登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信授权登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:k}),o().sc.showToast("登录成功"),t.setData({loginStep:3});else if(s.error)if(101245===s.error.code){if(console.log("=========微信登陆换绑========",s),t.showLoginPopup){var d=s.error.message;t.userTicket=s.error.data.userTicket;var c=[d];t.showLoginPopup(c,null,[{text:"取消",cb:function(){o().h.request(new r({data:{loginAfterConfirm:!0,forceBind:2,userTicket:t.userTicket,bind:!0},callback:t._onWechatLoginCallback}))}},{text:"继续绑定",cb:function(){o().h.request(new r({data:{loginAfterConfirm:!0,forceBind:1,userTicket:t.userTicket,bind:!0},callback:t._onWechatLoginCallback}))}}])}}else if(101190===s.error.code)console.log("=========微信登陆一次验证========",s),a.moduleView("b_dianping_nova_lenpkklk_mv",{type:"微信一键登录"},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_lenpkklk_mv",{type:"微信一键登录"},{cid:k}),t.userTicket=s.error.data.userTicket,t.yodaVerify(s.error.data.requestCode).then((function(e){1===e.status&&e.responseCode?(a.moduleView("b_dianping_nova_90y1dl76_mv",{type:"微信一键登录"},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_90y1dl76_mv",{type:"微信一键登录"},{cid:k}),o().h.request(new r({data:{loginAfterFirstVerify:!0,requestCode:s.error.data.requestCode,responseCode:e.responseCode,userTicket:t.userTicket},callback:t._onWechatLoginCallback}))):(o().sc.showToast("验证失败"),t.quitVerify=!0)}));else if(101157===s.error.code){var u;console.log("=========微信登陆二次验证========",s),u=t.afterSecondaryMobile?{type:"微信一键登录",status:1,custom:{source:-999}}:{type:"微信一键登录",status:0,custom:{source:-999}},t.afterSecondaryMobile=!1,a.moduleView("b_dianping_nova_0ge2my88_mv",u,{cid:"c_dianping_nova_ywm2o7j5"}),t.userTicket=s.error.data.userTicket,t.yodaVerify(s.error.data.requestCode).then((function(e){console.log("=========微信登陆二次验证response========",s),1===e.status&&e.responseCode?(a.moduleView("b_dianping_nova_ah9qn0zy_mv",u,{cid:"c_dianping_nova_ywm2o7j5"}),o().h.request(new i({data:{requestCode:s.error.data.requestCode,responseCode:e.responseCode,userTicket:t.userTicket},header:{},callback:f}))):(o().sc.showToast("验证失败"),t.quitVerify=!0)}))}else 101159===s.error.code?(console.log("=========微信登陆二次放号========",s),t.userTicket=s.error.data.userTicket,t.setData({confirmData:{avatar:s.error.data.avatar,username:s.error.data.username,mobile:s.error.data.mobile},loginStep:10}),a.pageView("c_dianping_nova_nij6qrtk",{type:"微信授权登录",custom:{page_create_first_pv:-999}}),o().env.notify("START_MOBILE_REUSED_VERIFY")):101144===s.error.code?(a.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"微信授权登录"},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"微信授权登录"},{cid:k}),console.log("=========微信登陆风控拒绝========",s),o().sc.showToast(s.error.message||"当前账号行为异常，已被限制登录或注册")):404===s.error.code||403===s.error.code?(t.showLoginPopup(["你的账号存在安全隐患，为保障您的账号安全，请使用点评App登录"],null,[{text:"取消",cb:function(){}},{text:"确定",cb:function(){}}]),t.quitVerify=!0):(o().sc.showToast(s.error.message),t.quitVerify=!0)}else{var l=Math.floor(Math.abs(n.errorCode)/100);if(10===l)o().sc.showToast("505:网络出错了，请稍后重试",1500,null);else if(14===l){var p=(data||{}).resultCode,h=data&&data.msg&&data.msg.showMsg?data.msg.showMsg:"";o().sc.showToast("".concat(p,":").concat(h||"一键登录服务出现了一些故障，请稍后重试"),1500,null)}T.addError("登陆错误：微信一键登录，/thirdlogin/ajax/bindWxMobile",{name:"绑定手机号错误",msg:JSON.stringify(n),level:"info"})}function f(e){if(console.log("=========微信登陆二次验证callback========",e),e.serverData.data){var t=e.serverData.data,n=o();t.error?n.sc.showToast(t.error.message):(n.userData.dpAccessToken=t.data.token,n.userData.wxmpOpenId=t.data.openId,t.data.eod&&(n.userData.wxmpEncryptedOpenId=t.data.eod),n.userData.wxmpUnionId=t.data.uniqueId,t.data.eud&&(n.userData.wxmpEncryptedUnionId=t.data.eud),n.sc.showToast("登录成功"),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信一键登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"}),a.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"微信一键登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:k}))}}}}},{key:"onPageInit",value:function(e){1==e.data.loginStep&&o().induction.LX.pageView("c_dianping_nova_cii5zjp3")}},{key:"dispose",value:function(e){e.getUserInfo=null,e.onAuthPhoneNumber=null,e._onWechatLoginCallback=null}}]),t}()})),window.define("780",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(176)),k=C(e(178)),x=C(e(180)),P=C(e(26));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,x.default)(e);if(t){var i=(0,x.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,k.default)(this,a)}}var O=e(101),E=e(103),L=e(99),N=new O("/api/passport/api/v1/account/verifylogin",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:(b={fromDp:"true",siteType:"miniApp",appName:"main_wxapp",version:L.APP_VERSION,app:-1,partner:26,platform:18},(0,P.default)(b,"app",232),(0,P.default)(b,"loginSource",0),(0,P.default)(b,"minigram_appid",L.SWAN_APP_KEY),(0,P.default)(b,"minigram_type","dp_miniapp_baidu"),(0,P.default)(b,"cx","!"),(0,P.default)(b,"thirdPart","baidu"),(0,P.default)(b,"uuid","!"),(0,P.default)(b,"openid","!"),(0,P.default)(b,"login_sdk_version",L.APP_VERSION),(0,P.default)(b,"extraFingerPrint","!"),b),preloadCacheTime:0}),M=function(e){(0,T.default)(a,e);var t=A(a);function a(e){return(0,S.default)(this,a),e?e.domain||(e.domain=L.LOGIN_DOMAIN):e={domain:L.LOGIN_DOMAIN},t.call(this,N,e)}return a}(E);t.exports=M})),window.define("781",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(91),k={production:"https://verify.meituan.com",dev:"http://verify.inf.dev.meituan.com",test:"http://verify.inf.test.meituan.com",beta:"http://verify.inf.test.meituan.com"},x=(e(777).encode,"c_dianping_nova_fv41bunj");t.exports=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"getPrivateData",value:function(e){return e.mobile=null,this.resentTS=0,{mobileNumber:"",resendTimeRemain:-1,regionCode:"86",regionName:"中国",isFillIn:!1,isSwanLogin:!1}}},{key:"injectPrivateFunction",value:function(t){var a=this,n=o().induction.LX,i=this;t.cancelAuthPhone=function(){t.setData({loginStep:2}),n.pageView("c_dianping_nova_fv41bunj",{type:-999}),n.moduleView("b_dianping_nova_gslzk3wf_mv",{type:"手机号短信登陆"},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_gslzk3wf_mv",{type:"手机号短信登陆"},{cid:"c_dianping_nova_fv41bunj"})},t.clearMobileNumber=function(){t.setData({mobileNumber:""})},t.getInputMobile=function(e){t.mobile=e.detail.value.trim()},t.getInputVCode=function(e){i.vcode=e.detail.value.trim(),i.vcode&&t.mobile&&!t.data.isFillIn&&t.setData({isFillIn:!0})},t.getVerifycode=function(){if(!(t.data.resendTimeRemain>0))if(t.mobile)if(function(e,t){if("86"==t){var a=parseInt(e.substr(0,2));return a>=13&&a<=19&&/^\d{11}$/.test(e)}return/^\d{5,}$/.test(e)}(t.mobile,t.data.regionCode)){var a;i.resentTS=Date.now()+12e6,t.setData({resendTimeRemain:12e3}),a=e(782);var r=t.mobile;o().h.request(new a({data:{mobile:r,countryCode:t.data.regionCode},callback:function(e){var a=e.serverData;if(a&&200===a.statusCode){var n=a.data;if(n.data&&n.data.requestCode)s(n.data.requestCode);else{if(n.error&&101144===n.error.code){var r=o().induction.LX;r.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"手机号短信登录"},{cid:"c_dianping_nova_ywm2o7j5"}),r.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"手机号短信登录"},{cid:x})}o().sc.showToast(n.error.message,1500,null),i.resentTS=0,t.setData({resendTimeRemain:0})}}else i.resentTS=0,t.setData({resendTimeRemain:0})}}));var s=function(a){var r=e(784),s=e(607);o().h.request(new r({domain:k[o().appConfig.ENV||"production"],data:{requestCode:a},callback:function(r){var d=r.serverData.data;if(d&&d.status){d.data.action;var c=d.data.type;s.getDataAsync((function(r){!function a(r){var s=e(783);o().h.request(new s({domain:k[o().appConfig.ENV||"production"],data:r,callback:function(e){var s=e.serverData.data;s||(i.resentTS=0,t.setData({resendTimeRemain:0})),s&&s.status?(i.resentTS=Date.now()+6e4,t.setData({resendTimeRemain:6e4}),o().sc.showToast("已发送短信"),t.codeLoginCallbackData=r):121048==s.error.code||121060==s.error.code?(n.moduleView("b_dianping_nova_lenpkklk_mv",{type:"手机号短信登陆"},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_lenpkklk_mv",{type:"手机号短信登陆"},{cid:x}),t.yodaVerify(s.error.request_code).then((function(e){1!==e.status?(console.log("验证失败"),o().sc.showToast("验证失败"),i.resentTS=0,t.setData({resendTimeRemain:0})):(n.moduleView("b_dianping_nova_90y1dl76_mv",{type:"手机号短信登陆"},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_90y1dl76_mv",{type:"手机号短信登陆"},{cid:x}),a(r))}))):(i.resentTS=Date.now()+6e4,t.setData({resendTimeRemain:6e4}),o().sc.showToast(s.error.message))}}))}({id:c,request_code:a,fingerprint:r})}))}else o().sc.showToast(d.error.message)}}))}}else o().sc.showToast("请填写正确的手机号");else o().sc.showToast("请输入手机号码")},t.onChangeRegion=function(){if(!t.__onChangeRegionLock){t.__onChangeRegionLock=!0;var n=a;if("login"!==t.pageName)return a.onChooseCountryMoniter=function(e,a,i,r){if(a.page===t){var s=T.getSessionStorageSync("PHONE_REGION");if(s){var d=s.code,c=s.region;d&&c&&t.setData({regionCode:d,regionName:c})}t.__onChangeRegionLock=!1,n.onChooseCountryMoniter&&(o().env.unregister(20017,n.onChooseCountryMoniter),n.onChooseCountryMoniter=null)}}.bind(a),o().env.register(20017,a.onChooseCountryMoniter),void o().navigation.forwardTo({url:"stlk://choosecountry"});if(!a.ccDLCMonitor){var i=e(785);a.ccDLCMonitor=new i}a.ccDLCMonitor.openNewDLCElementInGear(t,"pd_choosecountry",null,null,(function(){var e=T.getSessionStorageSync("PHONE_REGION");if(e&&e.code&&e.region){var a=e.code,n=e.region;a&&n&&t.setData({regionCode:a,regionName:n})}t.__onChangeRegionLock=!1}),{animeType:4},{showCloseBtn:!0})}},t.codeLogin=function(){if(t.codeLoginCallbackData){n.moduleClick("b_dianping_nova_gxtxac41_mc",{type:"手机号短信登陆",custom:{operator_type:-999,source_page:-999}},{cid:x});var a=e(851);4==t.codeLoginCallbackData.id?t.codeLoginCallbackData.smscode=i.vcode:t.codeLoginCallbackData.voicecode=i.vcode,o().h.request(new a({domain:k[o().appConfig.ENV||"production"],data:t.codeLoginCallbackData,callback:function(e){var t=e.serverData.data;1===t.status?r(e):o().sc.showToast(t.error.message)}}));var r=function(a){var n,i=a.serverData.data;n=e(776),o().h.request(new n({data:{requestCode:t.codeLoginCallbackData.request_code,responseCode:i.data.response_code,openId:o().userData.wxmpOpenId,uuid:o().userData.wxmpEncryptedOpenId,countryCode:t.data.regionCode,mobile:t.mobile,forceBind:0,bind:!0},header:{},callback:t._onMobileLoginCallback}))}}},t._onMobileLoginCallback=function(a){if(0!==a.errorCode){var i=Math.floor(Math.abs(a.errorCode)/100);if(10===i)o().sc.showToast("505:网络出错了，请稍后重试",1500,null);else if(14===i){var r=(data||{}).resultCode,s=data&&data.msg&&data.msg.showMsg?data.msg.showMsg:"";return void o().sc.showToast("".concat(r,":").concat(s||"一键登录服务出现了一些故障，请稍后重试"),1500,null)}}else{var d=a.serverData.data;if(d.data&&d.data.token)console.log("=========手机号登陆成功========",d),n.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:x}),o().userData.dpAccessToken=d.data.token,o().userData.userid=d.data.userId,t.setData({loginStep:3});else if(d.error){var c;if(101245===d.error.code){if(c=e(776),console.log("=========手机号登陆换绑========",d),t.showLoginPopup){var u=d.error.message;t.userTicket=d.error.data.userTicket;var l=[u];t.showLoginPopup(l,null,[{text:"取消",cb:function(){o().h.request(new c({data:{loginAfterConfirm:!0,forceBind:2,userTicket:t.userTicket,openId:o().userData.wxmpOpenId,uuid:o().userData.wxmpEncryptedOpenId,countryCode:t.data.regionCode,mobile:t.mobile,bind:!0},callback:t._onMobileLoginCallback}))}},{text:"继续绑定",cb:function(){o().h.request(new c({data:{loginAfterConfirm:!0,forceBind:1,userTicket:t.userTicket,openId:o().userData.wxmpOpenId,uuid:o().userData.wxmpEncryptedOpenId,countryCode:t.data.regionCode,mobile:t.mobile,bind:!0},callback:t._onMobileLoginCallback}))}}])}}else if(101157===d.error.code){var p;p=t.afterSecondaryMobile?{type:"手机号短信登录",status:1,custom:{source:-999}}:{type:"手机号短信登录",status:0,custom:{source:-999}},t.afterSecondaryMobile=!1,n.moduleView("b_dianping_nova_0ge2my88_mv",p,{cid:"c_dianping_nova_ywm2o7j5"}),t.userTicket=d.error.data.userTicket,t.yodaVerify(d.error.data.requestCode).then((function(a){var i;(console.log("=========手机号登陆二次验证responce========",a),1===a.status)&&(n.moduleView("b_dianping_nova_ah9qn0zy_mv",p,{cid:"c_dianping_nova_ywm2o7j5"}),i=e(780),o().h.request(new i({data:{requestCode:d.error.data.requestCode,responseCode:a.responseCode,userTicket:t.userTicket},header:{},callback:h})))}))}else 101159===d.error.code?(console.log("=========手机号登陆二次放号========",d),t.userTicket=d.error.data.userTicket,t.setData({confirmData:{avatar:d.error.data.avatar,username:d.error.data.username,mobile:d.error.data.mobile},loginStep:20}),n.pageView("c_dianping_nova_nij6qrtk",{type:"手机号短信登录",custom:{page_create_first_pv:-999}}),o().env.notify("START_MOBILE_REUSED_VERIFY")):101144===d.error.code?(console.log("=========手机号登陆风控拒绝========",d),n.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"手机号短信登录"},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_9jv45z8m_mv",{type:"手机号短信登录"},{cid:x}),o().sc.showToast(d.error.message||"当前账号行为异常，已被限制登录或注册")):404===d.error.code||403===d.error.code?t.showLoginPopup(["你的账号存在安全隐患，为保障您的账号安全，请使用点评App登录"],null,[{text:"取消",cb:function(){}},{text:"确定",cb:function(){}}]):o().sc.showToast(d.error.message)}}function h(e){if(console.log("=========手机号登陆二次验证callback========",e),e.serverData.data){var t=e.serverData.data,a=o();t.error?a.sc.showToast(t.error.message):(a.userData.dpAccessToken=t.data.token,a.userData.wxmpOpenId=t.data.openId,a.userData.wxmpEncryptedOpenId=t.data.eod,a.userData.wxmpUnionId=t.data.uniqueId,a.userData.wxmpEncryptedUnionId=t.data.eud,a.sc.showToast("登录成功"),n.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:"c_dianping_nova_ywm2o7j5"}),n.moduleView("b_dianping_nova_b6qlbqt4_mv",{type:"手机号短信登录",status:0,custom:{operator_type:-999,source_page:-999}},{cid:x}))}}}}},{key:"onPageInit",value:function(e){i.getLoginCode({success:function(t){t.code&&e.setData({isSwanLogin:!0})}}),this.remainCountDown||(this.remainCountDown=function(t,a,n,i){if(i.resentTS){var o=i.resentTS-Date.now()+800;(o=Math.floor(o/1e3))<0&&(o=0),o!==e.data.resendTimeRemain&&e.setData({resendTimeRemain:o})}}.bind(this),o().env.register(21007,this.remainCountDown,this))}},{key:"dispose",value:function(e){e.cancelAuthPhone=null,e.clearMobileNumber=null,e.getInputMobile=null,e.getInputVCode=null,e.getVerifycode=null,e.onChangeRegion=null,e.codeLogin=null,e._onMobileLoginCallback=null,e.onMobileLogin=null,e.mobile=null,this.vcode=null,this.remainCountDown&&(o().env.unregister(21007,this.remainCountDown,this),this.remainCountDown=null),this.ccDLCMonitor&&(this.ccDLCMonitor.dispose(),this.ccDLCMonitor=null),this.onChooseCountryMoniter&&(o().env.unregister(20017,this.onChooseCountryMoniter),this.onChooseCountryMoniter=null)}}]),t}()})),window.define("782",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b,C=e(7),S=C(e(102)),T=C(e(176)),k=C(e(178)),x=C(e(180)),P=C(e(26));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,x.default)(e);if(t){var i=(0,x.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,k.default)(this,a)}}var O=e(101),E=e(103),L=e(99),N=new O("/thirdlogin/user/minigram/inputmobileloginapply",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:(b={appName:"main_wxapp",version:L.APP_VERSION,app:-1,partner:26,platform:18},(0,P.default)(b,"app",232),(0,P.default)(b,"loginSource",0),(0,P.default)(b,"minigram_appid",L.SWAN_APP_KEY),(0,P.default)(b,"minigram_type","dp_miniapp_baidu"),(0,P.default)(b,"cx","!"),(0,P.default)(b,"thirdPart",18),(0,P.default)(b,"uuid","!"),(0,P.default)(b,"openid","!"),(0,P.default)(b,"extraFingerPrint","!"),b),preloadCacheTime:0}),M=function(e){(0,T.default)(a,e);var t=A(a);function a(e){return(0,S.default)(this,a),e?e.domain||(e.domain=L.LOGIN_DOMAIN):e={domain:L.LOGIN_DOMAIN},t.call(this,N,e)}return a}(E);t.exports=M})),window.define("783",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(101),A=e(103),O=new P("/v2/ext_api/login/info",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:{fromDp:"true",siteType:"miniApp"},preloadCacheTime:0}),E=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),e?e.domain||(e.domain=appConfig.LOGIN_DOMAIN):e={domain:appConfig.LOGIN_DOMAIN},t.call(this,O,e)}return a}(A);t.exports=E})),window.define("784",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(101),A=e(103),O=new P("/v2/ext_api/page_data",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:{},preloadCacheTime:0}),E=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),e?e.domain||(e.domain=appConfig.LOGIN_DOMAIN):e={domain:appConfig.LOGIN_DOMAIN},t.call(this,O,e)}return a}(A);t.exports=E})),window.define("785",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=function(){function t(){(0,C.default)(this,t)}return(0,S.default)(t,[{key:"openNewDLCElementInGear",value:function(t,a,n,i,r,s,d){var c=e(704),u=this,l=c.getGearInfo(a);return void(l&&l.gear&&4===l.status?p(l.gear):(this.monitorGearLoaded||(this.monitorGearLoaded=function(e,t){var n=t.gearInfo;n.id===a&&(u.monitorGearLoaded&&(o().env.unregister("__ON_A_GEAR_SCRIPT_LOEADED_",u.monitorGearLoaded),u.monitorGearLoaded=null),p(n.gear))}.bind(this),o().env.register("__ON_A_GEAR_SCRIPT_LOEADED_",this.monitorGearLoaded)),"pd_"==a.substr(0,3)&&c.loadPDGear(a.substr(3))));function p(e){if(n){var a={gear:e};n(a),e=a.gear}var o=e.instancePool;for(var c in o){var l=o[c];"ActionShowHideDLCElement"===l.className&&l.isOpen&&u.openNewDLCElement(t,l.elementGlobalId,Object.assign({pageQuery:l.pageQuery,mask:l.mask,animeType:l.animeType},s),i,r,d)}}}},{key:"openNewDLCElement",value:function(t,a,n,i,r,s){var d=this,c=e(786).getSingleton().createGearImpl(Object.assign({className:"ActionShowHideDLCElement",elementGlobalId:a,isOpen:1,pageQuery:null,mask:7,animeType:0},n));if(c){i&&(this.dlcLoadedCallback=function(e,t,n,r){r===d&&t.pageName===a&&(o().env.unregister("__ON_A_DLC_ELEMENT_LOADED_",d.dlcLoadedCallback,d),d.dlcLoadedCallback=null,i(t),i=null)},o().env.register("__ON_A_DLC_ELEMENT_LOADED_",this.dlcLoadedCallback,this)),r&&(this.dlcClosingCallback=function(e,t,n,i){i===d&&t.pageName===a&&(o().env.unregister("__ON_A_DLC_ELEMENT_UNLOADING_",d.dlcClosingCallback,d),d.dlcClosingCallback=null,r(t),r=null)},o().env.register("__ON_A_DLC_ELEMENT_UNLOADING_",this.dlcClosingCallback,this));var u=c.doAction(t);u&&s&&u.setData(s)}}},{key:"dispose",value:function(){this.monitorGearLoaded&&(o().env.unregister("__ON_A_GEAR_SCRIPT_LOEADED_",this.monitorGearLoaded),this.monitorGearLoaded=null),this.dlcLoadedCallback&&(o().env.unregister("__ON_A_DLC_ELEMENT_LOADED_",this.dlcLoadedCallback,this),this.dlcLoadedCallback=null),this.dlcClosingCallback&&(o().env.unregister("__ON_A_DLC_ELEMENT_UNLOADING_",this.dlcClosingCallback,this),this.dlcClosingCallback=null)}}]),t}();t.exports=T})),window.define("851",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(176)),T=b(e(178)),k=b(e(180));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,k.default)(e);if(t){var i=(0,k.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,T.default)(this,a)}}var P=e(101),A=e(103),O=new P("/v2/ext_api/login/verify",{method:"POST",needAccessToken:!1,retryMax:1,priority:0,header:{"content-type":"application/x-www-form-urlencoded"},data:{},preloadCacheTime:0}),E=function(e){(0,S.default)(a,e);var t=x(a);function a(e){return(0,C.default)(this,a),e?e.domain||(e.domain=appConfig.LOGIN_DOMAIN):e={domain:appConfig.LOGIN_DOMAIN},t.call(this,O,e)}return a}(A);t.exports=E})),window.define("852",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k=function(){function t(){(0,S.default)(this,t)}return(0,T.default)(t,[{key:"getPrivateData",value:function(e){return{userNickName:null}}},{key:"onPageInit",value:function(t){this.onAccessToken||(this.onAccessToken=function(n,i){var o=getCurrentPages();if(!o||t!==o[o.length-1])return;if("dpAccessToken"===i.field&&i.swapData===r().userData&&i.newData){if(!("login"===t.pageName||t.data&&t.data.showLoginPopup))return;!function(){var n=getCurrentPages();if(!n||t!==n[n.length-1])return;if(t&&t.options&&"mina"===t.options.type&&t.options.minaJump){var i=r().userData.dpAccessToken;i&&function(e){wx.navigateBackMiniProgram({extraData:{token:e,minaJump:"dianping_login",minaPath:t.options.minaPath||""},complete:function(){r().navigation.redirectTo({url:"stlk://home"})}})}(i)}if(t.onCancelDelayBind)t.onCancelDelayBind();else var o=a((function(){if(clearTimeout(o),"login"===t.pageName&&t.options&&t.options.redirectUrl){var a=t.options.redirectUrl;if("h5"===t.options.type){var n=e(95),i=e(97),s=n(a);s.query||(s.query={}),s.query.token="!",a=i(s.uri,s.query,s.hash)}r().navigation.redirectTo({url:a})}else getCurrentPages().length>1?r().navigation.back():r().navigation.redirectTo({url:"stlk://home"})}),Math.max(20,400-Date.now()))}()}}.bind(this),r().env.register(43002,this.onAccessToken,this))}},{key:"dispose",value:function(e){this.onAccessToken&&(r().env.unregister(43002,this.onAccessToken,this),this.onAccessToken=null)}}]),t}();t.exports=k})),window.define("853",(function(e,t,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D,b){"use strict";var C=e(7),S=C(e(102)),T=C(e(104)),k={production:"https://verify.meituan.com",dev:"https://verify.inf.dev.meituan.com",test:"https://verify.inf.test.meituan.com",beta:"https://verify.inf.test.meituan.com"},x=e(854);t.exports=function(){function e(){(0,S.default)(this,e)}return(0,T.default)(e,[{key:"getPrivateData",value:function(e){return{}}},{key:"injectPrivateFunction",value:function(e){e.yodaVerify=function(t,n){return new Promise((function(i,o){t||i(),e._leaveYodaPage||(e._leaveYodaPage=function(t,n){"webview"===n.pageName&&(r().env.unregister(20013,e._leaveYodaPage),e._leaveYodaPage=null,a((function(){i({status:0})}),10))});var s=(n=n||{}).path||"/v2/app/general_page",d=k[r().appConfig.ENV||"production"],c=n.url||d+s;r().env.register(20013,e._leaveYodaPage),r().navigation.forwardTo({url:"/pages/webview/webview?url=".concat(encodeURIComponent(c+"?theme=dianping&succCallbackKNBFun=close&requestCode="+t))}),e.yoda=new x("AFTER_YODA_VERIFY",(function(e,t){0==t.status&&r().sc.showToast("验证失败"),i(t)}))}))}}},{key:"onPageInit",value:function(e){}},{key:"dispose",value:function(e){e.yoda&&(e.yoda.dispose(),e.yoda=null),e._leaveYodaPage&&(r().env.unregister(20013,e._leaveYodaPage),e._leaveYodaPage=null),e.yodaVerify=null}}]),e}()})),window.define("854",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=function(){function e(t,a){var n=this;(0,C.default)(this,e),this.eid=t,this.wrap=function(e,i){a&&a(e,i),o().env.unregister(t,n.wrap),n.wrap=null},o().env.register(t,this.wrap)}return(0,S.default)(e,[{key:"dispose",value:function(){this.wrap&&(o().env.unregister(this.eid,this.wrap),this.wrap)}},{key:"used",get:function(){return null===this.wrap}}]),e}();t.exports=T})),window.define("857",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b;e(134)({pageName:"websearch",data:{0:0},onLoad:function(t){this.options=t,b||(b=[e(713),e(858),e(859),e(860)]),e(698).onLoad(b,this,t)},cancelSearch:function(e){o().navigation.back()},onUnload:function(){e(698).onUnload(this)}})})),window.define("858",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(101),k=e(103),x=e(714).setHistory,P=(e(99),function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{findList:[],changeanother:""}}},{key:"injectPrivateFunction",value:function(e){e.findTag=function(t){var a=t.currentTarget.dataset.keyword;t.currentTarget.dataset.index,e.data.selCityId||o().userData.dpCityId;x(a),a&&"shop"===a.type?o().navigation.redirectTo({url:"/pages/detail/detail?shopUuid=".concat(a.shopUuid||a.shopId)}):a?o().navigation.redirectTo({url:"/pages/list/list?keyword=".concat(a)}):o().navigation.redirectTo({url:"/pages/list/list"})}}},{key:"onPageInit",value:function(e){var t={},a=(o(),{method:"GET",withCredentials:!0});function n(){o().h.request(new k(new T("https://m.dianping.com/suggest/getJsonData",a),{data:t,callback:function(t){var a=t&&t.serverData&&t.serverData.data&&t.serverData.data.data;a&&e.setData({findList:a.suggestKwList||[]})}.bind(this)}))}n(),this.applySearchFind=n.bind(this),o().env.register("__apply_search_find__",this.applySearchFind)}},{key:"dispose",value:function(e){e.findTag=null,this.applySearchFind&&(o().env.unregister("__apply_search_find__",this.applySearchFind),this.applySearchFind=null)}}]),e}());t.exports=P})),window.define("859",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(91),k=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{historyList:[]}}},{key:"injectPrivateFunction",value:function(e){e.deleteHistory=function(){T.setLocalStorageSync("__KEYWORD_HISTORY__",[]),e.setData({historyList:[]})}}},{key:"onPageInit",value:function(e){var t=T.getLocalStorageSync("__KEYWORD_HISTORY__");e.setData({historyList:t})}},{key:"dispose",value:function(e){e.deleteHistory=null}}]),e}();t.exports=k})),window.define("860",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(7),C=b(e(102)),S=b(e(104)),T=e(99),k=e(101),x=e(103),P=e(714).setHistory,A=function(){function e(){(0,C.default)(this,e)}return(0,S.default)(e,[{key:"getPrivateData",value:function(e){return{hotList:[],hotTitle:{}}}},{key:"injectPrivateFunction",value:function(e){e.hotTag=function(e){var t=e.currentTarget.dataset.keyword;P(t),t&&"shop"===t.type?o().navigation.redirectTo({url:"/pages/detail/detail?shopUuid=".concat(t.shopUuid||t.shopId)}):t?o().navigation.redirectTo({url:"/pages/list/list?keyword=".concat(t)}):o().navigation.redirectTo({url:"/pages/list/list"})}}},{key:"onPageInit",value:function(e){function t(){o().h.request(new x(new k("".concat(T.DOMAIN,"/wxmapi/search/searchhot")),{data:{cityid:o().userData.dpCityId||e.data.selCityId||1,latitude:"!",longitude:"!"},callback:function(t){var a=t&&t.serverData&&t.serverData.data;a&&200==a.code&&e.setData({hotTitle:a&&a.hotTitle||{},hotList:a&&a.hotList||[]})}.bind(this)}))}t(),this.applySearchHot=t.bind(this),o().env.register("__apply_search_hot__",this.applySearchHot)}},{key:"dispose",value:function(e){this.applySearchHot&&(o().env.unregister("__apply_search_hot__",this.applySearchHot),this.applySearchHot=null,e.hotTag=null)}}]),e}();t.exports=A})),window.define("863",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(134),C=e(97);b({pageName:"page_index",onLoad:function(e){o().navigation.redirectTo({url:C("/pages/home/home",e)})}})})),window.define("866",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(134),C=e(97);b({pageName:"page_mobile",onLoad:function(e){o().navigation.redirectTo({url:C("/pages/login/login",e)})}})})),window.define("869",(function(e,t,a,n,i,o,r,s,d,c,u,l,p,h,f,g,m,v,w,_,y,I,D){"use strict";var b=e(134),C=e(99),S=o().induction.LOGAN,T="/usergrowth/downloadConfig/get";b({pageName:"downloadapp",data:{launchUrl:"dianping://",clientType:"",appVersion:"",updateTime:"",androidDownloadUrl:"http://www.dpfile.com/pkgupdate/channel/1212/baidu_app/download.apk",iosDownloadUrl:"https://itunes.apple.com/cn/app/da-zhong-dian-ping-mei-shi/id351091731?mt=8&utm_source=__b089i"},onLoad:function(e){this.getAppInfo()},handleTapAuthority:function(){o().navigation.forwardTo({url:"/pages/webview/webview?url="+encodeURIComponent("https://i.meituan.com/awp/hfe/block/319b5a641480/87033/index.html")})},handleTapPrivacy:function(){o().navigation.forwardTo({url:"/pages/webview/webview?url="+encodeURIComponent("https://rules-center.meituan.com/m/detail/guize/605?activeRule=1")})},handleCancelDownload:function(){o().navigation.back()},getClientType:function(e){var t=this;o().sc.g.getSystemInfo({success:function(a){var n=-1!==a.model.search("iPhone")?"iPhone":"Android";t.setData({clientType:n}),e&&e(n)},fail:function(t){e&&e("")}})},getAppInfo:function(){var e=this;o().bridge.request({url:C.DOMAIN+T,header:{openid:"!"}}).then((function(t){if(t&&200===t.statusCode&&t.data&&200===t.data.code&&t.data.data){var a=t.data.data,n=a.androidAppUpdateTime,i=a.androidAppVersion,o=a.iosAppUpdateTime,r=a.iosAppVersion;e.getClientType((function(t){"iPhone"===t?e.setData({appVersion:r,updateTime:o}):e.setData({appVersion:i,updateTime:n})}))}else S.log("获取App版本等信息失败:"+JSON.stringify(t))})).catch((function(e){S.log("获取App版本等信息出错:"+JSON.stringify(e))}))}})})),window.__swanRoute="common/components/lazyload-image/lazyload-image",window.usingComponents=[],window.usingPluginComponents=[],require("81"),window.__swanRoute="common/components/midas/index",window.usingComponents=[],window.usingPluginComponents=[],require("85"),window.__swanRoute="common/components/star/star",window.usingComponents=[],window.usingPluginComponents=[],require("208"),window.__swanRoute="common/components/app-launch-bd/index",window.usingComponents=[],window.usingPluginComponents=[],require("228"),window.__swanRoute="common/components/review-dish/review-dish",window.usingComponents=[],window.usingPluginComponents=[],require("230"),window.__swanRoute="common/components/shop-review/shop-review",window.usingComponents=["common/components/review-dish/review-dish","common/components/lazyload-image/lazyload-image","common/components/star/star"],window.usingPluginComponents=[],require("235"),window.__swanRoute="common/components/shop-review-tag/shop-review-tag",window.usingComponents=[],window.usingPluginComponents=[],require("237"),window.__swanRoute="common/components/open-app/index",window.usingComponents=[],window.usingPluginComponents=[],require("419"),window.__swanRoute="common/components/wx-exception/wx-exception",window.usingComponents=[],window.usingPluginComponents=[],require("423"),window.__swanRoute="common/components/open-app-bd/index",window.usingComponents=[],window.usingPluginComponents=[],require("431"),window.__swanRoute="common/components/open-app-bar/index",window.usingComponents=["common/components/open-app-bd/index"],window.usingPluginComponents=[],require("441"),window.__swanRoute="common/components/pop-up/index",window.usingComponents=[],window.usingPluginComponents=[],require("517"),window.__swanRoute="common/components/feed-card/feed-card",window.usingComponents=[],window.usingPluginComponents=[],require("530"),window.__swanRoute="common/components/slider/slider",window.usingComponents=[],window.usingPluginComponents=[],require("585"),window.__swanRoute="common/components/mvvm-view/mvvm-view",window.usingComponents=["common/components/mvvm-view/mvvm-view"],window.usingPluginComponents=[],require("591"),window.__swanRoute="pages/city/npm/@dp/sparrow-component-city/city",window.usingComponents=[],window.usingPluginComponents=[],require("593"),window.__swanRoute="outer_components/mina-book-shelf/index",window.usingComponents=[],window.usingPluginComponents=[],require("595"),window.__swanRoute="pages/poi/components/shop-offline/shop-offline",window.usingComponents=[],window.usingPluginComponents=[],require("600"),window.__swanRoute="outer_components/show-poi-guide/show-poi-guide",window.usingComponents=[],window.usingPluginComponents=[],require("602"),window.__swanRoute="common/components/miniprogram-virtual-number/index",window.usingComponents=[],window.usingPluginComponents=[],require("604"),window.__swanRoute="pages/poi/components/shop-comment/index",window.usingComponents=["common/components/slider/slider"],window.usingPluginComponents=[],require("606"),window.__swanRoute="outer_components/shop-couponpackage/index",window.usingComponents=[],window.usingPluginComponents=[],require("614"),window.__swanRoute="pages/poi/components/shop-craftsman/index",window.usingComponents=["common/components/lazyload-image/lazyload-image"],window.usingPluginComponents=[],require("616"),window.__swanRoute="pages/poi/components/beauty-product-shelf/index",window.usingComponents=[],window.usingPluginComponents=[],require("618"),window.__swanRoute="outer_components/mina-ktv-book-shelf/lx-module/index",window.usingComponents=[],window.usingPluginComponents=[],require("620"),window.__swanRoute="outer_components/mina-ktv-book-shelf/rich-text/index",window.usingComponents=[],window.usingPluginComponents=[],require("624"),window.__swanRoute="outer_components/mina-ktv-book-shelf/index",window.usingComponents=["outer_components/mina-ktv-book-shelf/rich-text/index","outer_components/mina-ktv-book-shelf/lx-module/index"],window.usingPluginComponents=[],require("626"),window.__swanRoute="common/components/shop-dis-card/shop-dis-card-panel/index",window.usingComponents=[],window.usingPluginComponents=[],require("628"),window.__swanRoute="common/components/shop-dis-card/shop-dis-card",window.usingComponents=["common/components/shop-dis-card/shop-dis-card-panel/index"],window.usingPluginComponents=[],require("630"),window.__swanRoute="common/components/rainbow/index",window.usingComponents=[],window.usingPluginComponents=[],require("632"),window.__swanRoute="pages/home/home",window.usingComponents=["common/components/mvvm-view/mvvm-view","common/components/feed-card/feed-card","common/components/slider/slider","common/components/midas/index","common/components/open-app-bar/index"],window.usingPluginComponents=[],require("633"),window.__swanRoute="pages/detail/detail",window.usingComponents=[],window.usingPluginComponents=[],require("717"),window.__swanRoute="pages/poi/poi",window.usingComponents=["common/components/wx-exception/wx-exception","common/components/midas/index","common/components/lazyload-image/lazyload-image","common/components/shop-review-tag/shop-review-tag","common/components/shop-review/shop-review","common/components/star/star","common/components/rainbow/index","common/components/shop-dis-card/shop-dis-card","outer_components/mina-ktv-book-shelf/index","pages/poi/components/beauty-product-shelf/index","pages/poi/components/shop-craftsman/index","outer_components/shop-couponpackage/index","common/components/review-dish/review-dish","pages/poi/components/shop-comment/index","common/components/miniprogram-virtual-number/index","outer_components/show-poi-guide/show-poi-guide","common/components/open-app/index","common/components/app-launch-bd/index","pages/poi/components/shop-offline/shop-offline","common/components/open-app-bar/index","outer_components/mina-book-shelf/index"],window.usingPluginComponents=[],require("719"),window.__swanRoute="pages/city/city",window.usingComponents=["pages/city/npm/@dp/sparrow-component-city/city"],window.usingPluginComponents=[],require("754"),window.__swanRoute="pages/my/my",window.usingComponents=["common/components/wx-exception/wx-exception","common/components/pop-up/index"],window.usingPluginComponents=[],require("757"),window.__swanRoute="pages/webview/webview",window.usingComponents=["common/components/slider/slider"],window.usingPluginComponents=[],require("767"),window.__swanRoute="pages/login/login",window.usingComponents=["common/components/mvvm-view/mvvm-view","common/components/slider/slider"],window.usingPluginComponents=[],require("773"),window.__swanRoute="pages/websearch/websearch",window.usingComponents=[],window.usingPluginComponents=[],require("857"),window.__swanRoute="pages/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("863"),window.__swanRoute="pages/mobile/mobile",window.usingComponents=[],window.usingPluginComponents=[],require("866"),window.__swanRoute="pages/downloadapp/downloadapp",window.usingComponents=[],window.usingPluginComponents=[],require("869")}(__hacked);