!function(e){e.global,e.Function;var t=e.setTimeout,n=e.setInterval;e.setImmediate,e.requestAnimationFrame,e.swanGlobal,e.jsNative,e.masterManager,e._openSourceDebugInfo,e.System,e.Bdbox_aiapps_jsbridge,e.Bdbox_android_jsbridge,e.Bdbox_android_utils,e._naFile,e._naInteraction,e._naNetwork,e._naRouter,e._naSetting,e._naStorage,e._naUtils,e.globalThis,window.define("7",(function(e,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b,_,C){"use strict";(function(e){var i,r,s,u,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};u=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":c(e))&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=60)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CSDK_STORAGE_CONFIG=t.REQUEST_BAIDUID_URL=t.STORAGE_COOKIE_KEY=t.IUID_KEY=t.SessionStatus=t.PA_CONFIG=t.QUESTION_REG=t.LEVAE_WORD_TYPES=t.STORAGE_CONFIG=t.requestHeaders=t.setCustomHost=t.getApiUrl=t.API_URI=t.NET_CONFIG=void 0;var i=n(9);Object.defineProperty(t,"API_URI",{enumerable:!0,get:function(){return i.API_URI}}),t.NET_CONFIG={DEFAULT_TIMEOUT:2e4};var o={},r={hn:{"x-client":"HN"},"smart-app":{"X-CLIENT":"BAIDUBOXAPP"},h5:o,pc:o};t.requestHeaders=r,t.QUESTION_REG=/(\u597d\u4e0d\u597d|\u6709\u6ca1\u6709|\u662f\u4e0d\u662f|\u5728\u4e0d\u5728|\u0029|\uff1f|\u003f|\u5417|\u554a|\u5462|\u54c8|\u8fd8).*/;var a,s="",u=!1;t.IUID_KEY="iuid",t.CSDK_STORAGE_CONFIG={KEY:"imlp_csdk_paramsdata",CACHE_TIME:72e5},t.STORAGE_CONFIG={KEY:"imlp_save_base_data",CACHE_TIME:864e5,HISTORY_CACHE_TIME:31536e6},t.LEVAE_WORD_TYPES={phone:"电话",qq:"QQ",email:"Email",wechat:"微信",offlineForm:"离线表单"},t.getApiUrl=function(e){return(s||"https://ada.baidu.com")+(u?e+".json":e+"")},t.setCustomHost=function(e,t){s=e,u=!!t},t.PA_CONFIG={PA_TYPE:"7",SUB_PA_TYPE:"16"},t.STORAGE_COOKIE_KEY="imlpcookie",t.REQUEST_BAIDUID_URL="https://ada.baidu.com/imlp/hello",function(e){e[e.UNCONNECT=0]="UNCONNECT",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(a||(a={})),t.SessionStatus=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.util=void 0;var i=new(function(){function e(){}return e.prototype.mergeJson=function(e,t){if(!t)return e;if(!e)return t;for(var n in t)e[n]=t[n];return e},e.prototype.createOneKey=function(e){return(e=e||"key")+(new Date).getTime().toString(16)+Math.round(1e5*Math.random()).toString(16)},e.prototype.cloneJson=function(e){var t=null;try{var n=JSON.stringify(e);t=JSON.parse(n)}catch(e){}return t},e.prototype.setQueryToUrl=function(e,t){if(!t)return e;var n=e.split("?"),o={};n[1]&&n[1].split("&").forEach((function(e){var t=e.split("=");o[t[0]]=decodeURIComponent(t[1]||"")})),o=i.mergeJson(o,t);var r=[];for(var a in o)r.push(a+"="+encodeURIComponent(o[a]));if(r.length){var s=r.join("&");e=n[0]+"?"+s}return e},e.prototype.compareVersion=function(e,t){t=t||"";for(var n=(e=e||"").split("."),i=t.split("."),o=Math.max(n.length,i.length);n.length<o;)n.push("0");for(;i.length<o;)i.push("0");for(var r=0;r<o;r++){var a=parseInt(n[r],10),s=parseInt(i[r],10);if(a>s)return 1;if(a<s)return-1}return 0},e}());t.util=i},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.imlpUtil=void 0;var i=new(function(){function e(){}return e.prototype.getBaseQuery=function(e){if(!e)return null;var t={userid:e.pageParam.userid,pvKey:e.pageParam.pvKey,wsid:e.pageParam.wsid,plat:e.pageParam.plat||e.pageParam.clientType,xst:e.pageParam.xst||"",appid:e.pageParam.appid||""};return e.pageParam.paid&&(t.pa_uid=(e.pageParam.paid||"").toString()),e.pageParam.cuid&&(t.cuid=e.pageParam.cuid),t},e}());t.imlpUtil=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SdkStatusConfig=void 0,t.SdkStatusConfig={SEND_SERVER_FORBID:13,ANTI_VERIFICATION:1,TASKBEGIN_ROBOT_STATUS:0,BFE_LIMIT:1404}},function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientType=t.checkHostType=void 0,function(e){e.HN="hn",e.SAPP="smart-app",e.H5="h5",e.PC="pc"}(i||(i={})),t.ClientType=i,t.checkHostType=function(e){return e instanceof talos?i.HN:i.SAPP}},function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MsgType=void 0,function(e){e.TEXT="text",e.IMAGE="image",e.CARD="card"}(i||(i={})),t.MsgType=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=function(){function e(){this.events={}}return e.prototype.on=function(e,t){e&&t&&(this.events[e]=this.events[e]||[],this.events[e].push(t))},e.prototype.off=function(e,t){var n=this.events[e];if(n)for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1)},e.prototype.offAll=function(e){e&&this.events[e]?delete this.events[e]:this.events={}},e.prototype.getEvents=function(e){return this.events[e]},e.prototype.emit=function(e,t){var n=this.events[e];if(n){Array.isArray(t)||(t=[t]);for(var i=0;i<n.length;i++)n[i].apply(null,t)}},e}();t.EventEmitter=i},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.RequestRetry=void 0;var o=i(4),r=i(1),a=function(){function e(e,t){this.cacheRequestData={},this.request=e,this.options=t||{},this.options.retryDelay||0===this.options.retryDelay||(this.options.retryDelay=500),this.options.retryCount||0===this.options.retryCount||(this.options.retryCount=3)}return e.prototype.get=function(e,t,n){var i=this,o=r.util.createOneKey();return new Promise((function(r,a){i.requestByGet({url:e,params:t,header:n},{resolve:r,reject:a},o)}))},e.prototype.post=function(e,t,n,i){var o=this,a=r.util.createOneKey();return new Promise((function(r,s){o.requestByPost({url:e,params:n,header:i,data:t},{resolve:r,reject:s},a)}))},e.prototype.requestByPost=function(e,t,n){var i=this;this.requestStart(n),this.request.post(e.url,e.data,e.params,e.header).then((function(o){if(i.isBfeLimit(o))return i.retryEnd(n),void t.reject(o);!i.options.checkSuccess||i.options.checkSuccess(o)?(i.retryEnd(n),t.resolve(o)):i.errorProcess(o,"post",e,t,n)})).catch((function(o){i.errorProcess(o,"post",e,t,n)}))},e.prototype.requestByGet=function(e,t,n){var i=this;this.requestStart(n),this.request.get(e.url,e.params,e.header).then((function(o){if(i.isBfeLimit(o))return i.retryEnd(n),void t.reject(o);!i.options.checkSuccess||i.options.checkSuccess(o)?(i.retryEnd(n),t.resolve(o)):i.errorProcess(o,"get",e,t,n)})).catch((function(o){i.errorProcess(o,"get",e,t,n)}))},e.prototype.errorProcess=function(e,n,i,o,r){var a=this;if(this.isMaxRetry(r))this.retryEnd(r),o.reject(e);else{var s=this.options.retryDelay;t((function(){"get"===n?a.requestByGet(i,o,r):"post"===n&&a.requestByPost(i,o,r)}),s)}},e.prototype.requestStart=function(e){var t=this.cacheRequestData[e];t?t.count++:this.cacheRequestData[e]={count:0}},e.prototype.retryEnd=function(e){delete this.cacheRequestData[e]},e.prototype.isMaxRetry=function(e){var t=this.cacheRequestData[e],n=this.options.retryCount;return t.count>=n},e.prototype.isBfeLimit=function(e){return((e=e||{}).data||{}).status===o.SdkStatusConfig.BFE_LIMIT},e}();n.RequestRetry=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.API_URI=void 0,t.API_URI={CONNECT:"/imlp-message/imlp/start",DISCONNECT:"/imlp-message/imlp/leave",SEND:"/imlp-message/imlp/send",LEAVE_WORD:"/imlp-message/imlp/send",HEARTBEAT:"/imlp-message/heartbeat",USER_ACTION:"/imlp-message/imlp/action",GET_ASYNC_CARD:"/imlp/imlp/getCardMat",ENTRY_SITE:"/imlp-message/track/start",FETCH:"/imlp-message/heartbeat",SYSTEM:"/imlp-message/imlp/system",ANTY_CHECK:"/imlp-message/anti/check",ANTY_CODE:"/imlp-message/anti/captcha/code",ANTY_CODE_CHECK:"/imlp-message/anti/captcha/check",RECOMMEND:"/imlp-message/imlp/recommend",LOG:"/nclick-imlp/index"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImSdk=void 0;var i=n(7),o=n(0),r=n(1),a=n(4),s=n(11),u=function(){function e(){this.initState=!1,this.initCallbackCache=[],this.sessionData={ssid:"",connected:0,connectState:0,bcpssid:""},this.modelEventEmitter=new i.EventEmitter,this.appEventEmitter=new i.EventEmitter,this.bindEvent()}return e.prototype.init=function(e){if(this.checkSdkParam(e)){var t=e.options||{};t.apiHost&&o.setCustomHost(t.apiHost),e.pageParam.clientType=this.clientType;var n=this.getCipTrack();n&&(e.pageParam.cipTrack=n),this.siteModle.init(e),this.sessionModle.init(e),this.antiCheckModel.init(e),this.messageModel.init(e),this.historyModel.init(e),this.heartbeatModel.init(e),this.imlpLog=new s.ImlpLog(this.request,this.modelEventEmitter),this.imlpLog.init(e),t.needBlockConnect||this.entrySite()}},e.prototype.run=function(){var e=this,t=this.storageTimeLimit.get(o.IUID_KEY);t&&this.setSessionData({iuid:t}),this.siteModle.siteIn(),this.historyModel.getHistory((function(t){e.modelEventEmitter.emit("history",[t])})),this.initState=!0,this.initCallbackCache.forEach((function(e){e()})),this.initCallbackCache.length=0},e.prototype.start=function(){this.modelEventEmitter.emit("start",null)},e.prototype.stop=function(){this.modelEventEmitter.emit("stop",null)},e.prototype.entrySite=function(){this.initState=!1,this.run()},e.prototype.onInit=function(e){e&&(this.initState?e():this.initCallbackCache.push(e))},e.prototype.isInit=function(){return this.initState},e.prototype.on=function(e,t){this.appEventEmitter.on(e,t)},e.prototype.off=function(e,t){this.appEventEmitter.off(e,t)},e.prototype.antiCheck=function(){this.antiCheckModel.check()},e.prototype.getAntiCaptcha=function(){this.antiCheckModel.getCaptcha()},e.prototype.checkAntiCaptcha=function(e){this.antiCheckModel.checkCaptcha(e)},e.prototype.send=function(e){return this.messageModel.send(e)},e.prototype.resend=function(e){return this.messageModel.resend(e)},e.prototype.formatMessage=function(e){return this.messageModel.formateSendMessage(e)},e.prototype.getConnectState=function(){return this.sessionModle.getConnectStatus()},e.prototype.connect=function(e){this.sessionModle.connect(e)},e.prototype.leaveWord=function(e){this.messageModel.leaveWord(e)},e.prototype.getHistroy=function(e){this.historyModel.getHistory(e)},e.prototype.getHistory=function(e){this.historyModel.getHistory(e)},e.prototype.sendUserAction=function(e){this.siteModle.sendUserAction(e)},e.prototype.getCard=function(e){this.siteModle.getCard(e)},e.prototype.getData=function(){return r.util.cloneJson(this.sessionData)},e.prototype.addMessage=function(e,t){var n=this.formatMessage(e);return this.modelEventEmitter.emit("addMessageToHistory",[[n],t]),n},e.prototype.getRequest=function(){return this.request},e.prototype.getStorage=function(){},e.prototype.disconnect=function(){return this.sessionModle.disconnect()},e.prototype.sendLog=function(e){this.imlpLog&&this.imlpLog.sendLog(e)},e.prototype.checkSdkParam=function(e){return!!e},e.prototype.bindEvent=function(){var e=this;this.modelEventEmitter.on("error",(function(t){var n=t.result||{};"taskbegin"===t.type&&n.ssid&&(e.sessionData.ssid=n.ssid,e.modelEventEmitter.emit("sessionData",e.sessionData)),e.appEventEmitter.emit("error",t)})),this.modelEventEmitter.on("entrySite",(function(t){var n=t.iuid;e.storageTimeLimit.save(o.IUID_KEY,n,0),e.setSessionData({iuid:n}),e.appEventEmitter.emit("entrySite",t)})),this.modelEventEmitter.on("entrySiteEnd",(function(){e.setSessionData({entrySiteEnd:!0}),e.heartbeatModel.start()})),this.modelEventEmitter.on("antiCheck",(function(t){e.appEventEmitter.emit("antiCheck",t)})),this.modelEventEmitter.on("antiCaptcha",(function(t){e.appEventEmitter.emit("antiCaptcha",t)})),this.modelEventEmitter.on("checkAntiCaptcha",(function(t){e.appEventEmitter.emit("checkAntiCaptcha",t)})),this.modelEventEmitter.on("taskbegin",(function(t){e.sessionData.ssid=t.ssid,e.sessionData.connected=1,e.modelEventEmitter.emit("sessionData",e.sessionData),e.appEventEmitter.emit("taskbegin",t)})),this.modelEventEmitter.on("message",(function(t){var n=r.util.cloneJson(t);e.appEventEmitter.emit("message",[n])})),this.modelEventEmitter.on("switchToManual",(function(t){e.appEventEmitter.emit("switchToManual",[t])})),this.modelEventEmitter.on("kefuInput",(function(t){e.appEventEmitter.emit("kefuInput",[t])})),this.modelEventEmitter.on("disconnect",(function(t){e.sessionData.connected&&(e.sessionData.connected=0,e.sessionData.connectState=0,e.modelEventEmitter.emit("sessionData",e.sessionData),e.modelEventEmitter.emit("stopSdk",{type:t.from||"service"}),e.appEventEmitter.emit("disconnect",[t]))})),this.modelEventEmitter.on("readData",(function(t){e.appEventEmitter.emit("readData",[t])})),this.modelEventEmitter.on("recommend",(function(t,n){e.appEventEmitter.emit("recommend",[t,n])})),this.modelEventEmitter.on("card",(function(t,n){e.appEventEmitter.emit("card",[t,n])})),this.modelEventEmitter.on("inviteMessage",(function(t){var n=r.util.cloneJson(t);e.appEventEmitter.emit("inviteMessage",[n])})),this.modelEventEmitter.on("updateSessionData",(function(t){e.setSessionData(t)})),this.modelEventEmitter.on("storgeUpdate",(function(t){e.appEventEmitter.emit("storgeUpdate",[t])})),this.modelEventEmitter.on("send",(function(t){e.appEventEmitter.emit("send",[t])}))},e.prototype.setSessionData=function(e){for(var t in e)this.sessionData[t]=e[t];this.modelEventEmitter.emit("sessionData",this.sessionData)},e.getModel=function(e){return null},e.getStatusConfig=function(){return r.util.cloneJson(a.SdkStatusConfig)},e.prototype.getStatusConfig=function(){return e.getStatusConfig()},e.prototype.getCipTrack=function(){return null},e}();t.ImSdk=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImlpLog=void 0;var i=n(0),o=n(8),r=n(1),a=function(){function e(e,t){this.sessionData={},this.eventEmitter=t,this.requestRetry=new o.RequestRetry(e,{retryCount:3}),this.bindEvent()}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.sendLog=function(e){if(e){e=r.util.cloneJson(e);var t=this.getBaseData(),n=r.util.mergeJson(e,t)||{},o=this.sdkParam||{};(o.options||{}).dlVersion&&(n.ext=n.ext||{},n.ext.dlVersion=o.options.dlVersion),this.requestRetry.get(i.getApiUrl(i.API_URI.LOG),n)}},e.prototype.bindEvent=function(){var e=this;this.eventEmitter.on("log",(function(t){e.sendLog(t)})),this.eventEmitter.on("sessionData",(function(t){e.sessionData=t}))},e.prototype.getBaseData=function(){var e={from:"imlp",tag:"fc_imlp"};e.timestamp=Date.now();var t=this.sdkParam;return t&&(e.clientName=t.pageParam.appName,e.appKey=t.pageParam.appKey,e.params=t.pageParam.params,e.state=this.sessionData.connectState,e.sessionid=this.sessionData.ssid,e.wsid=t.pageParam.wsid,e.channel=t.pageParam.channel,e.imlpAccessId=t.pageParam.imlpAccessId,e.client=t.pageParam.client,e.pvKey=t.pageParam.pvKey,e.abTest=t.pageParam.abTest,e.im_type=t.imParam.im_type,e.imlp_id=t.pageParam.imid,e.app_id=t.pageParam.appid,e.ucid=t.pageParam.aduserid,e.xst=t.pageParam.xst,e.expidlist=t.pageParam.expidlist),e},e}();t.ImlpLog=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionModel=void 0;var i=n(0),o=n(3),r=n(4),a=n(1),s=function(){function e(e,t,n){this.sessionData={},this.storageTimeLimit=n,this.request=e,this.event=t,this.curStatus=i.SessionStatus.UNCONNECT,this.event.emit("updateSessionData",{connectState:i.SessionStatus.UNCONNECT}),this.bindEvent()}return e.prototype.init=function(e){this.sdkParam=e;var t=this.getCacheSessionId(),n=this.getCacheBcpSessionId();t&&this.event.emit("updateSessionData",{ssid:t}),n&&this.event.emit("updateSessionData",{bcpssid:n})},e.prototype.connect=function(e){var t=this;if(this.curStatus!==i.SessionStatus.CONNECTING&&this.curStatus!==i.SessionStatus.CONNECTED){if(!this.sdkParam)throw new Error("sdkParam must init");this.event.emit("sessionConnecting",null),this.curStatus=i.SessionStatus.CONNECTING,this.event.emit("updateSessionData",{connectState:i.SessionStatus.CONNECTING});var n=o.imlpUtil.getBaseQuery(this.sdkParam)||{},a=this.createConnectData(e);this.request.post(i.getApiUrl(i.API_URI.CONNECT),a,n).then((function(e){var n=e.data||{};if(0===n.status||2===n.status){n.robot=n.robot_status===r.SdkStatusConfig.TASKBEGIN_ROBOT_STATUS,t.curStatus=i.SessionStatus.CONNECTED,t.event.emit("updateSessionData",{connectState:i.SessionStatus.CONNECTED});var o=n.ssid;t.cacheSessionId(o);var s=n.bcp_ssid;t.cacheBcpSessionId(s),t.event.emit("taskbegin",n)}else t.stop(),t.sendError(n,a,"taskbegin");11===n.status&&t.event.emit("stopSdk",{type:"taskbegin",result:n})})).catch((function(e){t.stop(),t.sendError(e,a,"taskbegin")}))}},e.prototype.disconnect=function(){var e,t=this,n=o.imlpUtil.getBaseQuery(this.sdkParam)||{},r={im_type:null===(e=this.sdkParam)||void 0===e?void 0:e.imParam.im_type,ssid:this.sessionData.ssid},s=a.util.mergeJson(r,n)||{};this.request.get(i.getApiUrl(i.API_URI.DISCONNECT),s).then((function(e){var n=e.data;t.stop(),t.event.emit("disconnect",{from:"user",result:n})})).catch((function(e){t.sendError(e,r,"disconnect")}))},e.prototype.getConnectStatus=function(){return this.curStatus},e.prototype.stop=function(){this.curStatus=i.SessionStatus.UNCONNECT,this.event.emit("updateSessionData",{connectState:i.SessionStatus.UNCONNECT})},e.prototype.bindEvent=function(){var e=this;this.event.on("stopSdk",(function(){e.stop()})),this.event.on("sessionData",(function(t){e.sessionData=t}))},e.prototype.createConnectData=function(e){e=e||{};var t={},n=this.sdkParam;if(n){var i=n.pageParam||{},o=["wcWord","cardId","pt","ac","t"];Object.assign(t,n.imParam,n.pageParam),t.abTest=n.pageParam.abTest,t.ac=n.pageParam.ac||"",t.aduserid=n.pageParam.aduserid||"",t.appid=n.pageParam.appid,t.channel=n.pageParam.channel,t.dpi=n.pageParam.dpi,t.imid=n.pageParam.imid,t.params=n.pageParam.params||"",t.pvKey=n.pageParam.pvKey,t.source=n.pageParam.referrer,t.ssid=this.sessionData.ssid,t.url=n.pageParam.url,t.user_id=n.pageParam.userid,t.wsid=n.pageParam.wsid,t.xst=n.pageParam.xst||"",t.bd_bxst=n.pageParam.bd_bxst||"",t.fid=n.pageParam.fid||"",t.client_source=n.pageParam.clientSource||"",t.cuid=n.pageParam.cuid||"",n.pageParam.cuid&&(t.cuid=n.pageParam.cuid),n.pageParam.paid&&(t.pa_uid=n.pageParam.paid),i.cipTrack&&(t.cipText=i.cipTrack.cipText||"",t.cipUrl=i.cipTrack.cipUrl||""),delete t.cipTrack,delete t.clientSource;for(var r=0;r<o.length;r++){var a=o[r],s=e[a];null!=s&&(t[a]=s)}}return t},e.prototype.cacheSessionId=function(e){var t=this.getSaveSsidKey();if(t&&e)try{this.storageTimeLimit.save(t,e,i.STORAGE_CONFIG.CACHE_TIME)}catch(e){this.sendError(e,"cacheSessionId","localStorage")}},e.prototype.cacheBcpSessionId=function(e){var t=this.getSaveBcpSsidKey();if(t&&e)try{this.storageTimeLimit.save(t,e,i.STORAGE_CONFIG.CACHE_TIME)}catch(e){this.sendError(e,"cacheSessionId","localStorage")}},e.prototype.getCacheSessionId=function(){var e,t=this.getSaveSsidKey();if(!t)return"";try{e=this.storageTimeLimit.get(t)}catch(e){this.sendError(e,"getCacheSessionId","localStorage")}return e||""},e.prototype.getCacheBcpSessionId=function(){var e,t=this.getSaveBcpSsidKey();if(!t)return"";try{e=this.storageTimeLimit.get(t)}catch(e){this.sendError(e,"getCacheBcpSessionId","localStorage")}return e||""},e.prototype.getSaveSsidKey=function(){if(this.sdkParam){var e=this.sdkParam.imParam||{};return["ssid",(this.sdkParam.pageParam||{}).paid||"",e.level1,e.level2,e.level3,e.im_type].join("_")}},e.prototype.getSaveBcpSsidKey=function(){if(this.sdkParam){var e=this.sdkParam.imParam||{};return["bcpssid",(this.sdkParam.pageParam||{}).paid||"",e.level1,e.level2,e.level3,e.im_type].join("_")}},e.prototype.sendError=function(e,t,n){this.event.emit("error",{type:n,data:t,result:e})},e}();t.SessionModel=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AntiCheckModel=void 0;var i=n(0),o=n(3),r=function(){function e(e,t){this.request=e,this.eventEmitter=t}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.check=function(){var e=this;if(!this.sdkParam)throw new Error("sdkParam must init");var t=this.createParams(),n=o.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(i.getApiUrl(i.API_URI.ANTY_CHECK),t,n).then((function(n){var i=n.data;0===i.status?e.eventEmitter.emit("antiCheck",i):e.sendError(i,t,"antiCheck"),0!==i.status&&1!==i.status&&e.eventEmitter.emit("stopSdk",{type:"antiCheck",result:i})})).catch((function(n){e.sendError(n,t,"antiCheck")}))},e.prototype.getCaptcha=function(){var e=this;if(!this.sdkParam)throw new Error("sdkParam must init");var t=o.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.get(i.getApiUrl(i.API_URI.ANTY_CODE),t).then((function(n){var i=n.data;0===i.status?e.eventEmitter.emit("antiCaptcha",i):e.sendError(i,t,"antiCaptcha")})).catch((function(n){e.sendError(n,t,"antiCaptcha")}))},e.prototype.checkCaptcha=function(e){var t=this;if(!this.sdkParam)throw new Error("sdkParam must init");var n=o.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(i.getApiUrl(i.API_URI.ANTY_CODE_CHECK),e,n).then((function(e){var i=e.data;0===i.status?t.eventEmitter.emit("checkAntiCaptcha",i):t.sendError(i,n,"checkAntiCaptcha")})).catch((function(e){t.sendError(e,n,"checkAntiCaptcha")}))},e.prototype.sendError=function(e,t,n){this.eventEmitter.emit("error",{type:n,data:t,result:e})},e.prototype.createParams=function(){var e=this.sdkParam.imParam,t=this.sdkParam.pageParam;return this.sdkParam.options,{xst:t.xst||"",aduserid:t.aduserid,level1:e.level1,level2:e.level2||"",level3:e.level3||"",user_id:t.userid,appid:t.appid,abTest:t.abTest,autoConnect:t.autoConnect,pvKey:t.pvKey,client:t.client,url:t.url,imid:t.imid,channel:t.channel,im_type:e.im_type,source:t.referrer,wsid:t.wsid}},e}();t.AntiCheckModel=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StorageTimeLimit=void 0;var i=n(7),o=function(){function e(e,t){this.eventEmitter=new i.EventEmitter,this.isReady=!1,this.baseKey=e,this.storage=t}return e.prototype.onReady=function(e){this.isReady?e():this.eventEmitter.on("ready",e)},e.prototype.ready=function(){this.isReady=!0,this.eventEmitter.emit("ready",null),this.eventEmitter.offAll("ready")},e.prototype.save=function(e,t,n){var i={timestamp:n?Date.now()+n:0,data:t},o=this.getBaseData();o[e]=i,this.saveBaseData(o)},e.prototype.get=function(e){return(this.getBaseData()[e]||{}).data||null},e.prototype.getJson=function(e){var t=this.get(e),n=null;if(!t)return n;if("object"==(void 0===t?"undefined":c(t)))return t;try{n=JSON.parse(t)}catch(e){this.sendError(e,"getJson")}return n},e.prototype.setItem=function(e,t){return this.storage.setStorageItem(e,t)},e.prototype.getItem=function(e){return this.storage.getStorageItem(e)},e.prototype.removeItem=function(e){return this.storage.removeStorageItem(e)},e.prototype.clear=function(){return this.storage.clearStorage()},e.prototype.saveBaseData=function(e){var t=JSON.stringify(e);try{this.storage.setStorageItem(this.baseKey,t)}catch(e){this.sendError(e,"saveBaseData")}},e.prototype.getBaseData=function(){var e=null;try{var t=this.storage.getStorageItem(this.baseKey);"string"==typeof t&&(e=JSON.parse(t))}catch(e){this.sendError(e,"getBaseData")}return this.clearTimeoutData(e||{})},e.prototype.clearTimeoutData=function(e){var t=Date.now();for(var n in e){var i=e[n]||{};i.timestamp&&i.timestamp<t&&delete e[n]}return e},e.prototype.sendError=function(e,t){var n=["StorageTimeLimit",t].join(".");this.eventEmitter.emit("sendLog",[[n,e]])},e}();t.StorageTimeLimit=o},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageModel=void 0;var o=i(6),r=i(0),a=i(1),s=i(3),u=i(4),c=function(){function e(e,t){this.sendCount=0,this.sendList=[],this.retryCache={},this.sessionData={},this.request=e,this.eventEmitter=t,this.bindEvent()}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.send=function(e){if(!this.sdkParam)return this.sendError(new Error("sdkParam must init"),e,"send"),e;this.sendCount++;var t=this.formateSendMessage(e),n=a.util.cloneJson(t);this.eventEmitter.emit("saveHistory",[n]);var i=t.message_id;return i&&(this.retryCache[i]={retryCount:0,message:t}),this.sendMessageWithRetry(t),t},e.prototype.resend=function(e){var t=this.retryCache[e]||{};return t.message&&this.sendMessage(t.message),t.message},e.prototype.leaveWord=function(e){var t,n,i=(r.LEVAE_WORD_TYPES[e.type]||"未知")+": "+e.content,s=a.util.createOneKey(),u={ssid:this.sessionData.ssid,content:i,source:"leaveword",msgid:s,message_id:s,content_type:o.MsgType.TEXT,message_time:Date.now(),im_type:null===(t=this.sdkParam)||void 0===t?void 0:t.imParam.im_type,imid:null===(n=this.sdkParam)||void 0===n?void 0:n.pageParam.imid,seq:this.sendCount};this.sendCount++,this.sendLeaveWord(u)},e.prototype.sendLeaveWord=function(e){var t=this,n=s.imlpUtil.getBaseQuery(this.sdkParam)||{},i=a.util.mergeJson(e,n);this.request.get(r.getApiUrl(r.API_URI.LEAVE_WORD),i).then((function(n){var i=n.data||{};0===i.status?t.eventEmitter.emit("leaveWord",i):t.sendError(i,e,"leaveWord")})).catch((function(n){t.sendError(n,e,"leaveWord")}))},e.prototype.sendMessage=function(e){var t=this;if(e.content_type!==o.MsgType.CARD){var n=s.imlpUtil.getBaseQuery(this.sdkParam)||{},i=a.util.mergeJson(e,n);this.request.get(r.getApiUrl(r.API_URI.SEND),i).then((function(n){var i=n.data||{};0===i.status?t.eventEmitter.emit("send",i):t.sendError(i,e,"send")})).catch((function(n){t.sendError(n,e,"send")}))}else this.sendMessageByPost(e)},e.prototype.sendMessageByPost=function(e){var t=this,n=s.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(r.getApiUrl(r.API_URI.SEND),e,n).then((function(n){var i=n.data||{};0===i.status?t.eventEmitter.emit("send",i):t.sendError(i,e,"send")})).catch((function(n){t.sendError(n,e,"send")}))},e.prototype.sendMessageWithRetry=function(e){var t=this;if(e.content_type!==o.MsgType.CARD){var n=s.imlpUtil.getBaseQuery(this.sdkParam)||{},i=a.util.mergeJson(e,n);this.request.get(r.getApiUrl(r.API_URI.SEND),i).then((function(n){var i=n.data||{};i.status!==u.SdkStatusConfig.BFE_LIMIT?0===i.status?t.eventEmitter.emit("send",i):i.status!==u.SdkStatusConfig.SEND_SERVER_FORBID&&t.retrySendMessage(e)||t.sendError(i,e,"send"):t.sendError(i,e,"send")})).catch((function(n){t.retrySendMessage(e)||t.sendError(n,e,"send")}))}else this.sendMessageWithRetryByPost(e)},e.prototype.sendMessageWithRetryByPost=function(e){var t=this,n=s.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(r.getApiUrl(r.API_URI.SEND),e,n).then((function(n){var i=n.data||{};i.status!==u.SdkStatusConfig.BFE_LIMIT?0===i.status?t.eventEmitter.emit("send",i):i.status!==u.SdkStatusConfig.SEND_SERVER_FORBID&&t.retrySendMessage(e)||t.sendError(i,e,"send"):t.sendError(i,e,"send")})).catch((function(n){t.retrySendMessage(e)||t.sendError(n,e,"send")}))},e.prototype.retrySendMessage=function(e){var n=this,i=e.message_id||"",o=this.retryCache[i];return!!(o&&o.retryCount<3)&&(o.retryCount++,t((function(){n.sendMessageWithRetry(e)}),1e3),!0)},e.prototype.formateSendMessage=function(e){if(!this.sdkParam)return e;var t=e.message_id||e.msgid||a.util.createOneKey();return{seq:this.sendCount,message_id:t,msgid:t,message_time:e.message_time||Date.now(),imid:this.sdkParam.pageParam.imid,paid:this.sdkParam.pageParam.paid||0,im_type:this.sdkParam.imParam.im_type,source:e.source||"user",ssid:this.sessionData.ssid||"",content_type:e.content_type,content:e.content,contenttext:e.contenttext,trigger:e.trigger,fromid:e.fromid||"",source_tag:e.source_tag||e.sourceTag||"",card:e.card}},e.prototype.bindEvent=function(){var e=this;this.eventEmitter.on("sessionData",(function(t){e.sessionData=t})),this.eventEmitter.on("historyNewMessage",(function(t){var n=[];t.forEach((function(e){"service"!==e.source&&"leads-sys"!==e.source||n.push(e)})),n.length&&e.eventEmitter.emit("message",[n])})),this.eventEmitter.on("userMessageReadData",(function(t){var n=null;t.forEach((function(t){var i=t.user_message_id,o=t.is_read,r=e.retryCache[i];r&&r.isRead!==o&&(r.isRead=o,(n=n||{})[i]=o)})),n&&e.eventEmitter.emit("readData",[n])}))},e.prototype.sendError=function(e,t,n){this.eventEmitter.emit("error",{type:n,data:t,result:e})},e}();n.MessageModel=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SiteModle=void 0;var i=n(0),o=n(6),r=n(3),a=n(8),s=function(){function e(e,t,n){this.sessionData={},n=n||{},this.request=e,this.requestRetry=new a.RequestRetry(e,{retryCount:3,retryDelay:n.retryDelay||1e3,checkSuccess:function(e){return e&&e.data&&0===e.data.status}}),this.eventEmitter=t,this.bindEvent()}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.siteIn=function(){var e=this;if(!this.sdkParam)throw new Error("sdkParam must init");var t=r.imlpUtil.getBaseQuery(this.sdkParam)||{},n=this.createEntryData();this.requestRetry.post(i.getApiUrl(i.API_URI.ENTRY_SITE),n,t).then((function(t){console.log(t.data);var n=t.data;e.eventEmitter.emit("entrySite",n),e.eventEmitter.emit("entrySiteEnd",null)})).catch((function(t){var i=t;t instanceof Error||!t.data||(i=t.data),e.sendError(i,n,"entrySite"),e.eventEmitter.emit("entrySiteEnd",null)}))},e.prototype.sendUserAction=function(e){var t=this;if(!this.sdkParam)throw new Error("sdkParam must init");var n="sendUserAction",o=this.sdkParam.imParam.im_type;e.im_type=o,e.ssid=this.sessionData.ssid||"";var a=r.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(i.getApiUrl(i.API_URI.USER_ACTION),e,a).then((function(i){var o=i.data||{};0===o.status?t.eventEmitter.emit(n,o):t.sendError(o,e,n)})).catch((function(i){t.sendError(i,e,n)}))},e.prototype.getCard=function(e){var t,n=this,o=r.imlpUtil.getBaseQuery(this.sdkParam)||{};o.imid=null===(t=this.sdkParam)||void 0===t?void 0:t.pageParam.imid,this.request.post(i.getApiUrl(i.API_URI.GET_ASYNC_CARD),e,o).then((function(t){var i=t.data||{};n.cardResult(i,e)})).catch((function(t){n.sendError(t,e,"card")}))},e.prototype.cardResult=function(e,t){var n=e.data;0===e.status&&n&&n.length?this.eventEmitter.emit("card",[n,t]):this.sendError(e,t,"card")},e.prototype.sendSystem=function(e){var t=this,n=r.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(i.getApiUrl(i.API_URI.SYSTEM),e,n).then((function(n){var i=n.data||{};0===i.status?t.eventEmitter.emit("system",i):t.sendError(i,e,"system")})).catch((function(n){t.sendError(n,e,"system")}))},e.prototype.bindEvent=function(){var e=this;this.eventEmitter.on("sessionData",(function(t){e.sessionData=t})),this.eventEmitter.on("sendMessageSystem",(function(t){t.forEach((function(t){var n,i;if("service"===t.source){var o={message:t,ssid:e.sessionData.ssid,im_type:null===(n=e.sdkParam)||void 0===n?void 0:n.imParam.im_type};(null===(i=e.sdkParam)||void 0===i?void 0:i.pageParam.recommend)&&e.checkRecommend(t),e.sendSystem(o)}}))}))},e.prototype.checkRecommend=function(e){var t=i.QUESTION_REG,n=e.inputSuggest;n&&n.length||e.content_type===o.MsgType.TEXT&&"string"==typeof e.content&&t.test(e.content)&&this.getRecommend(e)},e.prototype.getRecommend=function(e){var t,n,o,a=this,s=e.content.replace(/<.*?>/g,""),u={userid:null===(t=this.sdkParam)||void 0===t?void 0:t.pageParam.userid,message_id:e.message_id,xst:(null===(n=this.sdkParam)||void 0===n?void 0:n.pageParam.xst)||"",content:s,abtest:null===(o=this.sdkParam)||void 0===o?void 0:o.pageParam.abTest},c=r.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(i.getApiUrl(i.API_URI.RECOMMEND),u,c).then((function(e){var t=e.data||{};0===t.status?a.eventEmitter.emit("recommend",[t,u]):a.sendError(t,u,"recommend")})).catch((function(e){a.sendError(e,u,"recommend")}))},e.prototype.createEntryData=function(){var e={};if(this.sdkParam){var t=this.sdkParam.imParam,n=this.sdkParam.pageParam,i=this.sdkParam.options,o={};o.dpi=n.dpi,o.ipv6=n.ipv6||"",o.pagetitle=n.title,o.pvkey=n.pvKey,o.source=n.referrer,o.url=n.url,o.wsid=n.wsid,o.xst=n.xst||"",o.bd_bxst=n.bd_bxst||"",o.manualInviteEnabled=i.manualInviteEnabled,o.fid=n.fid||"",n.cuid&&(o.cuid=n.cuid),n.paid&&(o.pa_uid=n.paid);var r=[],a={appid:n.appid,channel:n.channel,im_type:t.im_type,level1:t.level1,level2:t.level2||"",level3:t.level3||"",imid:n.imid,ucid:n.userid};r.push(a),e.client=o,e.service=r,e.f=i.f||""}return e},e.prototype.sendError=function(e,t,n){this.eventEmitter.emit("error",{type:n,data:t,result:e})},e}();t.SiteModle=s},function(e,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeat=void 0;var r=o(0),a=o(3),s=o(1),u=function(){function e(e,t){this.TIME_OUT_DELAY=1e4,this.HEART_BEAT_CHECK_RATE=1e3,this.lastServiceMessageTime=0,this.lastUserMessageReadTime=0,this.requestId=0,this.requestStart=0,this.processingHeartbeatTime=0,this.sessionData={},this.status={isStart:!1,isPending:!1,runtime:0},this.request=e,this.event=t,this.initEvent()}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.start=function(){!this.status.isStart&&this.sessionData.entrySiteEnd&&(this.status.isStart=!0,this.routine(),this.heartbeatMonitor())},e.prototype.stop=function(){this.status.isStart=!1,this.runHandle&&clearInterval(this.runHandle),this.requestHandle&&clearTimeout(this.requestHandle)},e.prototype.reset=function(){this.stop()},e.prototype.initEvent=function(){var e=this;this.event.on("sessionData",(function(t){e.sessionData=t})),this.event.on("history",(function(t){t.forEach((function(t){var n=parseInt((t.message_time||"0").toString(),10)||0;if(!(n.toString().length>10)){var i=t.content_type;("service"===t.source||"leads-sys"===t.source)&&"system"!==i&&n>e.lastServiceMessageTime&&(e.lastServiceMessageTime=n)}}))})),this.event.on("historyNewMessage",(function(t){t.forEach((function(t){var n=parseInt((t.message_time||"0").toString(),10)||0,i=t.content_type;("service"===t.source||"leads-sys"===t.source)&&"system"!==i&&n>e.lastServiceMessageTime&&(e.lastServiceMessageTime=n)}))})),this.event.on("userMessageReadData",(function(t){t.forEach((function(t){var n=parseInt(t.user_message_time,10)||0;n>e.lastUserMessageReadTime&&(e.lastUserMessageReadTime=n)}))})),this.event.on("stopSdk",(function(t){e.reset()})),this.event.on("start",(function(){e.start()})),this.event.on("stop",(function(){e.stop()}))},e.prototype.heartbeatMonitor=function(){var e=this;this.runHandle&&clearInterval(this.runHandle),this.runHandle=n((function(){if(Date.now()-e.requestStart>e.TIME_OUT_DELAY)try{e.routine()}catch(e){console.log(e)}}),1e3)},e.prototype.routine=function(){var e=this;this.requestHandle&&clearTimeout(this.requestHandle);var n=Date.now();this.requestId=n,this.requestStart=Date.now();var i=this.getHeartBeatBody(),o=a.imlpUtil.getBaseQuery(this.sdkParam)||{};this.request.post(r.getApiUrl(r.API_URI.HEARTBEAT),i,o).then((function(t){var n=t.data;if(0===n.status)try{e.heartBeatCallback(n,i)}catch(e){}else e.sendError("heartbeat",n,i)})).catch((function(t){e.sendError("heartbeat",t,i)})).finally((function(){e.requestId===n&&e.status.isStart&&(e.requestHandle=t((function(){e.routine()}),e.HEART_BEAT_CHECK_RATE))}))},e.prototype.getHeartBeatBody=function(){var e,t,n={wsid:null===(e=this.sdkParam)||void 0===e?void 0:e.pageParam.wsid,noHeartBeat:1};Date.now()-this.processingHeartbeatTime>15e3&&(delete n.noHeartBeat,this.processingHeartbeatTime=Date.now());var i=null===(t=this.sdkParam)||void 0===t?void 0:t.imParam.im_type,o="number"==typeof i?i.toString():"",r={invite:!0,main:n,system:{last_sys_time:this.lastUserMessageReadTime||""},talk:{last_mes_time:this.lastServiceMessageTime||"",connected:this.sessionData.connected,im_type:o,ssid:this.sessionData.ssid}};return this.formatHeartbeatBody(r)},e.prototype.formatHeartbeatBody=function(e){return e},e.prototype.heartBeatCallback=function(e,t){var n=e.talk||{},i=e.invite||{},o=e.system||{};this.inviteMessageHandle(i),void 0!==n.switchtomanual&&this.event.emit("switchToManual",[n.switchtomanual]),n.kefuInput&&this.event.emit("kefuInput",[n.kefuInput.timestamp]);var r=null==o?void 0:o.message;r&&r.length&&this.event.emit("userMessageReadData",[r]),this.serviceMessageHandle(n)},e.prototype.serviceMessageHandle=function(e){var t=e.message;if(t instanceof Array){var n=[],i=e.disconnect;t.forEach((function(e){var t=e.content_type,o=e.content||{};"system"!==t||"cmd"!==o.type||"close"!==o.value?n.push(e):i||(i={from:"service",result:o})})),n.length&&this.event.emit("saveHistory",[n]),i&&this.event.emit("disconnect",[i])}},e.prototype.inviteMessageHandle=function(e){var t=this;if(e.content&&e.content instanceof Array){var n=e.imType,i=e.level1,o=e.level2,r=e.level3;e.content.forEach((function(e){var a=s.util.createOneKey("invite"),u={imType:n,level1:i,level2:o,level3:r,type:"text",source:"service",content:e,msgid:a,message_id:a,msgtime:0,message_time:0,tag:"kefu"};t.event.emit("inviteMessage",u)}))}},e.prototype.sendError=function(e,t,n){this.event.emit("error",{type:e,data:n,result:t})},e}();i.HeartBeat=u},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.StorageHistory=void 0;var r=n(19),a=n(5),s=n(0),u=function(e){function t(t,n){var i=e.call(this,t)||this;return i.maxCount=50,i.stroageTimeLimit=n,i}return o(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.historyKey=this.getHistoryKey()||"",this.loadHistory()},t.prototype.loadHistory=function(){var e=this;this.stroageTimeLimit.onReady((function(){var t=e.stroageTimeLimit.getJson(e.historyKey);t instanceof Array?e.loadHistorySuccess(t):e.loadHistorySuccess([])}))},t.prototype.saveHistory=function(e){if(this.historyList){var t=this.historyList.length;t>this.maxCount&&this.historyList.splice(0,t-this.maxCount),this.stroageTimeLimit.save(this.historyKey,this.historyList,s.STORAGE_CONFIG.HISTORY_CACHE_TIME)}},t.prototype.getHistoryKey=function(){if(this.sdkParam){var e=this.sdkParam.pageParam,t=this.sdkParam.options,n=this.sdkParam.imParam,i=t.historyKey,o=e.userid||e.aduserid,r=n.im_type,s="msg"+e.imid+r,u=this.sdkParam.pageParam.paid;return u&&this.clientType===a.ClientType.HN?"paid"+u:i?"hmsg"+i:o?"uidmsg"+o:s}},t}(r.HistoryModel);t.StorageHistory=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryModel=void 0;var i=n(1),o=function(){function e(e){this.historyKeyMap={},this.messageCache=[],this.callbackCache=[],this.eventEmitter=e,this.bindEvent()}return e.prototype.init=function(e){this.sdkParam=e},e.prototype.getHistory=function(e){this.historyList?e(i.util.cloneJson(this.historyList)):this.callbackCache.push(e)},e.prototype.add=function(e){var t=i.util.cloneJson(e);t.card&&this.removeCardShowAction(t.card),this.historyList?this.addMessageToHistory([t],!0):this.messageCache.push(t)},e.prototype.removeCardShowAction=function(e){},e.prototype.bindEvent=function(){var e=this;this.eventEmitter.on("saveHistory",(function(t){t instanceof Array?t.forEach((function(t){e.add(t)})):e.add(t)})),this.eventEmitter.on("inviteMessage",(function(t){var n;null===(n=e.historyList)||void 0===n||n.push(t),e.saveHistory([t])})),this.eventEmitter.on("addMessageToHistory",(function(t,n){e.addMessageToHistory(t,n)}))},e.prototype.emitHistory=function(){var e=i.util.cloneJson(this.historyList||[]);this.callbackCache.forEach((function(t){t(e)})),this.callbackCache.length=0},e.prototype.addMessageToHistory=function(e,t){var n=this.getNewMessageList(e);if(n.length){var o=i.util.cloneJson(n);n.forEach((function(e){var t=e.content;if("image"===e.content_type&&"string"==typeof t)try{e.content=JSON.parse(e.content)}catch(e){}})),this.saveHistory(n);var r=i.util.cloneJson(n);t&&(this.eventEmitter.emit("historyNewMessage",[r]),this.eventEmitter.emit("sendMessageSystem",[o]))}return n},e.prototype.getNewMessageList=function(e){var t=this,n=[];return e.forEach((function(e){var i,o=e.message_id;o&&!t.historyKeyMap[o]&&(t.historyKeyMap[o]=o,null===(i=t.historyList)||void 0===i||i.push(e),n.push(e))})),n},e.prototype.loadHistorySuccess=function(e){var t=this;this.historyList=e||[],this.historyList.forEach((function(e){var n=e.message_id||"";t.historyKeyMap[n]=n})),this.addMessageToHistory(this.messageCache,!0),this.emitHistory()},e}();t.HistoryModel=o},,,,,,,,,,function(e,n,i){var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwanCookieManage=void 0;var s=i(62),u=i(0),c=i(30),d=function(e){function n(){var t=e.call(this,new c.SwanStorage)||this;return t.isBdAuthorize=!0,t.bduss="",t}return r(n,e),n.prototype.getCookie=function(t){var i=this;return this.getBduss((function(o){i.getBaiduid((function(o){e.prototype.getCookie.call(i,(function(e){e=e||"",o||(e=(e=[e,"BAIDUID="+n.tempBaiduid].join("; ")).replace(/^\s*;\s*/,"")),t(e)}))}))})),""},n.prototype.getBaiduid=function(e){var t=this,n=this.getCookieItem("BAIDUID");n?e(n.cookieValue):this.getBaiduidBySystem((function(n){if(n)return t.updateCookitItem({cookieKey:"BAIDUID",cookieValue:n}),void e(n);t.requestBaiduid((function(t){e(t)}))}))},n.prototype.requestBaiduid=function(e){var t=this;if(2!==n.getRequestTag)if(1!==n.getRequestTag){n.getRequestTag=1;var i="";a.request({url:u.REQUEST_BAIDUID_URL,data:{},method:"GET",success:function(e){var n=e.header["Set-Cookie"];n&&t.saveResponseCookie(n);var o=t.getCookieItem("BAIDUID");o&&(i=o.cookieValue)},fail:function(e){},complete:function(){n.getRequestTag=2,e(i),n.baiduidCallbackCache.forEach((function(e){e(i)})),n.baiduidCallbackCache.length=0}})}else n.baiduidCallbackCache.push(e);else e()},n.prototype.getBaiduidBySystem=function(e){var t=this,n=this.getCallbackResult(e,300);if(this.isBdAuthorize)try{a.getCommonSysInfo({success:function(e){var t=e.baidu_id;n(t)},fail:function(e){t.checkBdAuthorize(e),n()},complete:function(){n()}})}catch(e){n()}else n()},n.prototype.getBduss=function(e){var t=this,n=this.getCallbackResult(e,300);if(this.isBdAuthorize)try{a.getBDUSS({success:function(e){var i=e.bduss;i&&i!==t.bduss?(t.bduss=i,t.updateCookitItem({cookieKey:"BDUSS",cookieValue:i})):i=null,n(i)},fail:function(e){t.checkBdAuthorize(e),n()},complete:function(){n()}})}catch(e){n()}else n()},n.prototype.checkBdAuthorize=function(e){var t=(e=e||{}).errCode+"",n=e.status+"";return"202"!==t&&"10005"!==t&&"10005"!==n||(this.isBdAuthorize=!1,!1)},n.prototype.getCallbackResult=function(e,n){var i;n&&(i=t(r,n));var o=!1;function r(t){o||(o=!0,i&&clearTimeout(i),e.apply(null,arguments))}return r},n.tempBaiduid="baiduid"+Date.now().toString(16),n.baiduidCallbackCache=[],n.getRequestTag=0,n}(s.CookieManage);n.SwanCookieManage=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwanStorage=void 0;var i=function(){function e(){}return e.prototype.setStorageItem=function(e,t){a.setStorageSync(e,t)},e.prototype.getStorageItem=function(e){var t=a.getStorageSync(e);return"string"==typeof t?t:""},e.prototype.removeStorageItem=function(e){a.removeStorageSync(e)},e.prototype.clearStorage=function(){a.clearStorageSync()},e.prototype.setCookie=function(e,t,n){},e.prototype.getCookie=function(e){return""},e}();t.SwanStorage=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),a=n(0),s=n(12),u=n(13),c=n(16),d=n(17),l=n(15),p=n(5),f=n(61),h=n(63),m=n(18),v=n(29),y=function(e){function t(){var t=e.call(this)||this;return t.cookieManage=new v.SwanCookieManage,t.clientType=p.ClientType.SAPP,t.request=new f.SwanNet,t.storageTimeLimit=new h.SwanStorageTimeLimit(a.STORAGE_CONFIG.KEY),t.siteModle=new c.SiteModle(t.request,t.modelEventEmitter),t.heartbeatModel=new d.HeartBeat(t.request,t.modelEventEmitter),t.sessionModle=new s.SessionModel(t.request,t.modelEventEmitter,t.storageTimeLimit),t.antiCheckModel=new u.AntiCheckModel(t.request,t.modelEventEmitter),t.messageModel=new l.MessageModel(t.request,t.modelEventEmitter),t.historyModel=new m.StorageHistory(t.modelEventEmitter,t.storageTimeLimit),t}return o(t,e),t.prototype.getCookie=function(e){this.cookieManage.getCookie(e)},t.prototype.saveResponseCookie=function(e){this.cookieManage.saveResponseCookie(e)},t.getModel=function(e){var t=null;switch(e){case"Request":t=f.SwanNet}return t},t}(r.ImSdk);t.default=y},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwanNet=void 0;var i=n(29),o=n(0),r=n(1),s=function(){function e(){this.cookieManager=new i.SwanCookieManage}return e.prototype.get=function(e,t,n){var i=this;for(var o in t){var r=t[o];if(r&&"object"==(void 0===r?"undefined":c(r)))try{t[o]=JSON.stringify(r)}catch(e){}}return new Promise((function(o,r){i.getHeader(n||{},(function(n){a.request({url:e,data:t,method:"GET",header:n||{},success:function(e){i.saveResponseCookie(e.header);var t=i.convertToAxiosResponse(e);o(t)},fail:function(e){r(e)}})}))}))},e.prototype.post=function(e,t,n,i){var o=this;return e=r.util.setQueryToUrl(e,n),new Promise((function(n,r){o.getHeader(i||{},(function(i){a.request({url:e,data:t,method:"POST",header:i||{},success:function(e){o.saveResponseCookie(e.header);var t=o.convertToAxiosResponse(e);n(t)},fail:function(e){r(e)}})}))}))},e.prototype.convertToAxiosResponse=function(e){return{data:e.data,status:e.statusCode,headers:e.header}},e.prototype.saveResponseCookie=function(e){if(e&&e["Set-Cookie"]){var t=e["Set-Cookie"];this.cookieManager.saveResponseCookie(t)}},e.prototype.getHeader=function(e,t){var n=this;this.cookieManager.getCookie((function(i){e.Cookie=i||"",e=n.mergeDefaultHeader(e),t(e)}))},e.prototype.mergeDefaultHeader=function(e){var t=o.requestHeaders["smart-app"];return r.util.mergeJson(e||{},t)},e}();t.SwanNet=s},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CookieManage=void 0;var o=i(0),r=function(){function e(e){this.noReadyCallbackCache=[],this.storage=e,this.loadCookie()}return e.prototype.loadCookie=function(){var t=this;if(!e.isReady){var n=this.storage.getStorageItem(o.STORAGE_COOKIE_KEY);try{n=decodeURIComponent(n);var i=JSON.parse(n);i instanceof Array&&i.forEach((function(t){var n=t.cookieKey;e.baseCookieData[n]=t}))}catch(e){}e.baseCookieData=this.removeExpires(e.baseCookieData),e.isReady=!0,this.noReadyCallbackCache.length&&this.getCookie((function(e){t.noReadyCallbackCache.forEach((function(t){t(e)}))}))}},e.prototype.saveResponseCookie=function(e){var t=this;if(e){var n=this.parseSetCookie(e);n&&n.length&&n.forEach((function(e){t.updateCookitItem(e)}))}},e.prototype.getCookie=function(t){if(e.isReady||!t){var n=[],i=e.baseCookieData;for(var o in i){var r=i[o];r.cookieValue&&n.push(r.cookieKey+"="+r.cookieValue)}return t&&t(n.join("; ")),n.join("; ")}this.noReadyCallbackCache.push(t)},e.prototype.getCookieItem=function(t){return e.baseCookieData[t]||null},e.prototype.updateCookitItem=function(t){e.baseCookieData[t.cookieKey]=t,this.delaySaveCookie()},e.prototype.parseSetCookie=function(e){for(var t="####"+(new Date).getTime()+"####",n=(e=e.replace(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s/g,"$1"+t)).split(/,\s*/),i=new RegExp("(Mon|Tue|Wed|Thu|Fri|Sat|Sun)"+t,"g"),o=[],r=0;r<n.length;r++){var a=n[r].replace(i,"$1, "),s=this.parseSetCookieItem(a);s&&o.push(s)}return o},e.prototype.parseSetCookieItem=function(e){for(var t=null,n=e.split(/;\s?/),i=0;i<n.length;i++){t=t||{};var o=n[i],r=o.indexOf("="),a=o.substring(0,r),s=o.substring(r+1,o.length);-1===r&&(a=o,s=!0,0===i&&(s="")),0!==i?"expires"!==a.toLowerCase()||"string"!=typeof s?t[a]=s:(t.expiresStr=s,t.expires=new Date(s).getTime()):(t.cookieKey=a,t.cookieValue=s)}return t},e.prototype.removeExpires=function(e){var t=(new Date).getTime(),n=!1;for(var i in e){var o=e[i];o.expires&&o.expires<t&&(n=!0,delete e[i])}return n&&this.delaySaveCookie(),e},e.prototype.saveCookie=function(e){try{var t=[];for(var n in e)t.push(e[n]);var i=JSON.stringify(t);i=encodeURIComponent(i),this.storage.setStorageItem(o.STORAGE_COOKIE_KEY,i)}catch(e){}},e.prototype.delaySaveCookie=function(){var n=this;this.delaySaveCookieHandle&&clearTimeout(this.delaySaveCookieHandle),this.delaySaveCookieHandle=t((function(){n.saveCookie(e.baseCookieData)}),100)},e.baseCookieData={},e.isReady=!1,e}();n.CookieManage=r},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SwanStorageTimeLimit=void 0;var r=n(14),a=n(30),s=function(e){function t(t){var n=this,i=new a.SwanStorage;return(n=e.call(this,t,i)||this).ready(),n}return o(t,e),t}(r.StorageTimeLimit);t.SwanStorageTimeLimit=s}]).default},"object"==c(o)&&"object"==c(e)?e.exports=u():(r=[],void 0===(s="function"==typeof(i=u)?i.apply(o,r):i)||(e.exports=s))}).call(this,e(8)(i))})),window.define("8",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}})),window.define("11",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";try{t.exports=function(){var e={};this.on=function(t,n){t&&n&&(e[t]=e[t]||[],e[t].push(n))},this.emit=function(t,n){var i=e[t];if(i)for(var o=0;o<i.length;o++)i[o].apply(null,n)},this.off=function(t,n){var i=e[t];if(i)for(var o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)},this.offAll=function(t){t?e[t]=null:e={}},this.getEvents=function(t){return e[t]}}}catch(e){}})),window.define("14",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";try{t.exports=function(e,t){e=e||this,this.destroy=function(){},this.getCallback=function(n){if(!t)return null;var i=t[n]||{},o={onResult:function(){},onEnd:function(){},onError:function(){}};return i.onResult&&(o.onResult=function(t){i.onResult.apply(e,arguments)}),i.onEnd&&(o.onEnd=function(){i.onEnd.apply(e,arguments)}),i.onError&&(o.onError=function(){i.onError.apply(e,arguments)}),o}}}catch(e){}})),window.define("16",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};try{t.exports=function(e){function t(e){return new function e(t){var n={},i=(t=t||"").indexOf("#"),o="";-1!==i&&(o=t.substring(i),t=t.substring(0,i));for(var r=t.split("?"),a=r[0],s=(r[1]||"").split("&"),u=0;u<s.length;u++){var c=s[u];if(c){var d=c.split("="),l=d[0],p=d[1]||"";try{p=decodeURIComponent(p)}catch(e){p=d[1]||""}n[l]=p}}var f=a.replace(/\?.*/,"").replace(/^(https?:)?\/\//i,"").replace(/\/.*/,""),h=f.replace(/:\d+$/,""),m=a.replace(/:?\/\/.*/,""),v=a.replace(/^(https?:)?\/\/.*?(\/|$)/i,"");function y(){var e=(m?m+":":"")+"//"+f+v,t=this.params;if(t){var n=[];for(var i in t){var r=t[i];if(null!=r){var a=void 0===r?"undefined":_(r);if("string"!==a&&"number"!==a)try{r=JSON.stringify(r)}catch(e){continue}n.push(i+"="+encodeURIComponent(r))}}n&&n.length&&(e+="?"+n.join("&"))}return o&&(e+=o),e}v&&(v="/"+v),this.params=n,this.url=t,this.removeParam=function(e){delete this.params[e],this.url=y.call(this)},this.addParam=function(e,t){this.params[e]=t,this.url=y.call(this)},this.getHost=function(){return f},this.getHostname=function(){return h},this.getProtocol=function(){return m},this.getPathname=function(){return v},this.removeHash=function(){o="",this.url=y.call(this)},this.setOrigin=function(t){var n=new e(t);m=n.getProtocol(),h=n.getHostname(),f=n.getHost(),this.url=y.call(this)}}(e)}function n(e){try{return e()}catch(e){}}function i(e){try{return JSON.parse(e)}catch(e){}}function o(e){try{return JSON.stringify(e)}catch(e){}}function r(e){return i(o(e))}this.isMiniProgramIframe=function(e,t){return new RegExp("^https?://"+t+"/imsdk/page","i").test(e)},this.createCData=function(e,t,i){var o=[e.channel||"",e.level1||"",e.level2||"",e.level3||"",e.user_id||e.aduserid||"",e.im_type||"",e.ssid||"",e.appid||""].join("__");return t&&n((function(){o=t.encode(o,i)})),o},this.parseCData=function(e,t,i){e=e||"",t&&n((function(){e=t.decode(e,i)}));var o=e.split("__")||[];return{channel:o[0]||"",level1:o[1]||"",level2:o[2]||"",level3:o[3]||"",ucid:o[4]||"",imType:o[5]||"",ssid:o[6]||"",appid:o[7]||""}},this.isChargeLink=function(e){return-1!==e.indexOf("baidu.php?url=")||-1!==e.indexOf("link?url=")||-1!==e.indexOf("baidu.php?sc.")},this.isImlpUrl=function(e,t){for(var n=[new RegExp("^https?://"+t+"/imlp","i"),new RegExp("^https?://"+t+"/site/[^/]+/.*","i"),new RegExp("^https?://"+t+"/imsdk/page","i")],i=!1,o=0;o<n.length;o++)i=i||n[o].test(e);return i},this.getBrowser=function(e){var t=e.indexOf("Android")>-1||e.indexOf("Linux")>-1,n=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=null;t?i="android":n&&(i="ios");var o=null;return/(SogouMobileBrowser|SogouMSE)/i.test(e)&&(o="sogou"),{os:i,browser:o}},this.parseUrl=t,this.eachArray=function(e,t){if(e&&"function"==typeof t)for(var n=0;n<e.length;n++)t(e[n],n)},this.trycatch=n,this.mergeObject=function(e,t){if(!t)return e;if(!e)return t;for(var n in t)e[n]=t[n];return e},this.JSON={stringify:o,parse:i},this.bindEvent=function(t,n){e&&(e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n))},this.jsonClone=r,this.mergeJson=function(e,t,n){var i=e||{};for(var o in n&&(i=r(i)),t=t||{}){var a=i[o];a||"number"==typeof a||(i[o]=t[o])}return i},this.createOneKey=function(e){return(e=e||"key")+(new Date).getTime().toString(16)+parseInt(1e5*Math.random()).toString(16)},this.filterEmptyStr=function(e){return"undefined"===e&&(e=void 0),e},this.getPageParams=function(e,n){return{referrer:e,urlParams:t(n).params||{},pageUrl:n}},this.getValue=function(e,t,n){if(!e||"string"!=typeof t)return n;for(var i=t.split("."),o=e,r=0,a=0,s=i.length;a<s&&o;a++)o=o[i[a]],r++;return null!=o&&r===i.length||(o=n),o}}}catch(e){}})),window.define("19",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=e(20),k=e(21);t.exports=function(e,t,n){var i=!1,o=(e=e||{}).method||"POST",r=e.miniProgram,a=new C(r);function s(e,s,u,c,d){var l={};for(var p in s){var f=s[p];if(l[p]=f,"object"===(void 0===f?"undefined":_(f)))try{l[p]=JSON.stringify(f)}catch(e){}}"POST"===o&&(l=s);var h=t[e];if(!/(\?|&)wsid=/.test(h))if("POST"===o){var m="&wsid="+encodeURIComponent(k.wsid||"");-1===h.indexOf("?")&&(m="?wsid="+encodeURIComponent(k.wsid||"")),-1!==h.indexOf("#")?h=h.replace("#",m+"#"):h+=m}else l.wsid=k.wsid;var v=n?n.getCallback(e):null;r.request({url:h,data:l,method:o,dataType:"json",header:{"X-CLIENT":"BAIDUBOXAPP",Cookie:c},success:function(e){a.headerSetCookie(e.header["Set-Cookie"]),u&&u.onResult&&u.onResult(e.data,s,h),v&&v.onResult&&!i&&v.onResult(e.data,s,h,d)},fail:function(e){u&&u.onError&&u.onError(s,e,h),v&&v.onError&&!i&&v.onError(s,e,h,d)},complete:function(){u&&u.onEnd&&u.onEnd(s,h),v&&v.onEnd&&!i&&v.onEnd(s,h,d)}})}this.request=function(e,t,n,i){var o=Date.now();return i?(s(e,t,n,i,o),o):(a.getCookie((function(i){s(e,t,n,i,o)})),o)},this.startHeartbeat=function(e,t){},this.stopHeartbeat=function(){},this.destroy=function(){i=!0},this.addOrReplaceApi=function(e,n){(t=t||{})[e]=n}}})),window.define("20",(function(e,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b,_){"use strict";var C=null;n.exports=function(e){var n=!0;function i(t){try{var n=JSON.stringify(t);n=encodeURIComponent(n),e.setStorageSync("imlpcookie",n)}catch(e){}}function o(e,t){for(var n=0;n<t.length;n++)if(t[n].cookieKey===e.cookieKey)return void(t[n]=e);t.push(e)}function r(e,t){for(var n=s()||[],i=0;i<n.length;i++){var o=n[i];if(o.cookieKey===e)return t?o:o.cookieValue}}function a(e,t){var n=s();o({cookieKey:e,cookieValue:t},n=n||[]),i(n)}function s(t){if(C=C||[],!t)return C;var n=e.getStorageSync("imlpcookie");if(!n)return C;try{n=decodeURIComponent(n),C=JSON.parse(n)}catch(e){}return C=function(e){e=e||[];for(var t=(new Date).getTime(),n=[],o=[],r=!1,a=0;a<e.length;a++){var s=e[a];s.expires&&s.expires<t?r=!0:(o.push(s),n.push(s.cookieKey+"="+s.cookieValue))}return r&&i(o),o}(C=C||[])}function u(e){for(var t=null,n=e.split(/;\s?/),i=0;i<n.length;i++){t=t||{};var o=n[i],r=o.indexOf("="),a=o.substring(0,r),s=o.substring(r+1,o.length);-1===r&&(a=o,s=!0,0===i&&(s="")),0!==i?"expires"!==a?t[a]=s:(t.expiresStr=s,t.expires=new Date(s).getTime()):(t.cookieKey=a,t.cookieValue=s)}return t}C||(C=s(!0)),this.getSetCookieStr=function(e){var t=[],n=r(e,!0);if(n){t.push(n.cookieKey+"="+n.cookieValue);var i=["cookieValue","cookieKey","expires"];for(var o in n)-1===i.indexOf(o)&&("expiresStr"!==o?t.push(o+"="+n[o]):t.push("expires="+n[o]))}return t.join("; ")},this.getValue=r,this.getCookie=function(i){var o=s();o=o||[];for(var r=[],u={},c=0;c<o.length;c++){var d=o[c];u[d.cookieKey]=d.cookieValue,r.push(d.cookieKey+"="+d.cookieValue)}return i&&function(i,o){i=i||function(){};var r=!1,s=t(u,300);if(n)try{e.getBDUSS({success:function(e){var t=e.bduss;t&&t!==o?a("BDUSS",t):t=null,u(t)},fail:function(e){var t=e.errCode;202!==t&&"10005"!==t&&10005!==t||(n=!1),console.log("error",e),u()},complate:function(){u()}})}catch(e){u()}else u();function u(e){r||(r=!0,clearTimeout(s),i(e))}}((function(e){e&&(r.forEach((function(e,t){0===e.indexOf("BDUSS=")&&r.splice(t,1)})),r.push("BDUSS="+e)),i(r.join("; "))}),u.BDUSS),r.join("; ")},this.headerSetCookie=function(e){if(e){var t=s();t=t||[];var n=function(e){for(var t="####"+(new Date).getTime()+"####",n=(e=e.replace(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s/g,"$1"+t)).split(","),i=new RegExp("(Mon|Tue|Wed|Thu|Fri|Sat|Sun)"+t,"g"),o=[],r=0;r<n.length;r++){var a=u(n[r].replace(i,"$1, "));a&&o.push(a)}return o}(e);if(n&&0!==n.length){for(var r=0;r<n.length;r++)o(n[r],t);i(t)}}},this.addCookie=a}})),window.define("21",(function(e,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b,_){"use strict";var C=e(22),k={},T={isShowLog:!1,prefetchUrl:"https://ada.baidu.com/imlp/hello",nclickUrl:"https://ada.baidu.com/nclick-imlp/index"};function O(e){return(e=e||"key")+(new Date).getTime().toString(16)+parseInt(1e5*Math.random()).toString(16)}T.appStartTime=Date.now(),T.wsid=O("wsid"),T.showLog=function(){T.isShowLog&&console.log.apply(console.log,arguments)},T.createOneKey=O,T.bindChatViewScroll=function(e,t){k[e]=t},T.unbindChatViewScroll=function(e){e&&e.forEach&&(e.forEach((function(e){delete k[e]})),console.log("unbindChatViewScroll",k))},T.chatViewScroll=function(e,t){e&&e.forEach&&e.forEach((function(e){var n=k[e];if(n&&n.onChatViewScroll)try{n.onChatViewScroll(t)}catch(e){}}))},T.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i],10),r=parseInt(t[i],10);if(o>r)return 1;if(o<r)return-1}return 0},T.setData=function(e,t){"appInfo"===e?T.appInfo=t:"aop"===e&&(T.aop=t)},T.setPageStep=function(e,n){var i=Date.now();t((function(){var t=function(){if(T.aop&&T.aop.getAopData)return T.aop.getAopData()}()||{};"loadPageDataStart"===e&&t.openPage<=1?T.log("first_load_data_start",i-T.appStartTime,n):"loadPageDataResult"===e&&t.openPage<=1&&T.log("first_load_data_success",i-T.appStartTime,n)}),1e3)},T.log=function(e,t,n){n=n||{};var i=T.appInfo||{};if(t&&"string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}var o={type:e,tag:"fc_imlp",from:"imlp",timestamp:Date.now(),xst:n.xst,content:t,appKey:i.appKey||n.appKey,abTest:C.abTest,client:"native-smart-app",url:n.url,wsid:T.wsid};r.request({url:T.nclickUrl,data:o})},n.exports=T})),window.define("22",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _={aopPreload:!0},C={},k={abTest:null},T={};function O(){}k.setXst=function(e){var t=function(e){if(e){if(T[e])return T[e];var t=function(e){var t=[0,1,3,7,15,31,63],n=[32,4,1,67,80,35,23,33,56,0,52,17,60,11,53,59,2,3,12,43,21,44,33,54,36,8,38,15,25,22,13,13,43,32,46,44,23,4,21,24,11,53,39,43,24,37,11,11,0,51,10,56,57,15,32,5,46,33,36,41,63,34,3,11,25,6,34,40,4,47,9,41,19,29,42,1,55,39,21,63,13,11,20,62,28,27,45,35,30,52,7,13,12,44,5,44,47,2,36,8,53,59,16,23,38,18,3,49,58,24,12,43,26,61,14,48,60,25,54,17,31,22,50,43,50,15,0,27],i=e.length;if(i<=0||1===i&&0!==e.charCodeAt(0)||6*i%8>=6)return!1;for(var o=0;o<i;o++)if(e.charCodeAt(o)>127||-1===n[e.charCodeAt(o)])return!1;var r=6*i/8;r=parseInt(r,10);for(var a=0,s=0,u=0,c="";r--;)a>0&&(u|=(n[e.charCodeAt(s)]&t[a])<<8-a,s++),(a=8-a)>=6&&(u|=n[e.charCodeAt(s)]<<a-6,a-=6,s++),a>0&&(u|=n[e.charCodeAt(s)]>>6-a,a=6-a),c+=String.fromCharCode(255&u),u=0;return c}(e);if(!t)return null;var n=t.split(""),i={},o=!0,r=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value.split("="),d=c[0]||"",l=c[1]||"";i[d]=l}}catch(e){r=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw a}}return T[e]=i,i}}(e);if(t){var n=t.e;k.abTest=n,C[n]&&(_[C[n]]=!0)}},k.on=function(e,t,n){t=t||O,_[e]?t():n&&n()},t.exports=k})),window.define("29",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _=e(30),C={},k="";function T(e,t){this.then=function(n){return t[e]&&n&&n(),this},this.online=function(n){return!t[e]&&n&&n(),this}}var O=new function(e){var t=i(e),n=new _;function i(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}this.init=function(){var o=n.getXst();k!==o&&(k=o,t=i(e),function(e){var n=C[e];if(n&&n.endsWith(":off"))return n=n.substr(0,n.length-4),void(t[n]=!1);n&&(t[n]=!0)}((n.parseXst(o)||{}).e||""))},this.then=function(e,n){return new T(e,t).then(n)},this.isExp=function(e){return t[e]}}({newSdk:!0});t.exports=O})),window.define("30",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _=e(16),C=o.getSystemInfoSync();t.exports=function(){var e=new _,t={};this.getXst=function(){var t=(this.getEnvInfo()||{}).lastAppURL;return t&&(e.parseUrl(t).params||{}).xst||""},this.parseXst=function(e){if(!e)return null;if(t[e])return t[e];try{var n=function(e){if(!e)return"";var t=[0,1,3,7,15,31,63],n=[32,4,1,67,80,35,23,33,56,0,52,17,60,11,53,59,2,3,12,43,21,44,33,54,36,8,38,15,25,22,13,13,43,32,46,44,23,4,21,24,11,53,39,43,24,37,11,11,0,51,10,56,57,15,32,5,46,33,36,41,63,34,3,11,25,6,34,40,4,47,9,41,19,29,42,1,55,39,21,63,13,11,20,62,28,27,45,35,30,52,7,13,12,44,5,44,47,2,36,8,53,59,16,23,38,18,3,49,58,24,12,43,26,61,14,48,60,25,54,17,31,22,50,43,50,15,0,27],i=e.length;if(i<=0||1===i&&0!==e.charCodeAt(0)||6*i%8>=6)return!1;for(var o=0;o<i;o++)if(e.charCodeAt(o)>127||-1===n[e.charCodeAt(o)])return!1;var r=6*i/8;r=parseInt(r,10);for(var a=0,s=0,u=0,c="";r--;)a>0&&(u|=(n[e.charCodeAt(s)]&t[a])<<8-a,s++),(a=8-a)>=6&&(u|=n[e.charCodeAt(s)]<<a-6,a-=6,s++),a>0&&(u|=n[e.charCodeAt(s)]>>6-a,a=6-a),c+=String.fromCharCode(255&u),u=0;return c}(e);if(!n)return null;var i=n.split(""),o={},r=!0,a=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value.split("="),l=d[0]||"",p=d[1]||"";o[l]=p.trim()}}catch(e){a=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw s}}return t[e]=o,o}catch(e){}return null},this.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i],10),r=parseInt(t[i],10);if(o>r)return 1;if(o<r)return-1}return 0},this.getEnvInfo=function(){return o.getEnvInfoSync()},this.getSystemInfo=function(){return C||(C=o.getSystemInfoSync()),C}}})),window.define("31",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _="https://ada.baidu.com",C={type:"8000",source:"system",content:{text:"抱歉，目前访客较多，暂时无法接待"},status:0};O(C,"8000");var k={type:"8003",source:"service",title:null,contact:[{text:"电话",type:"phone",pattern:/.+/},{text:"微信",type:"wechat",pattern:/.+/},{text:"QQ",type:"qq",pattern:/.+/},{text:"邮箱",type:"email",pattern:/.+/}]};O(k,"8003");var T={type:"8000",source:"system",content:{title:"您的对话将会同步至",text:'百度APP-"我的"-"私信"'}};function O(e,t){e.message_time=(new Date).getTime(),t&&(e.content_type=t),e.message_id||(e.message_id="msg_"+e.message_time)}O(T,"8000");var I={dynamicLibVersion:"20220517",base64EncryptKey:"6IFz+lkbYT7mM0w5spJCPx3ZoHf9eyQDhjgOrEKANtUi2R1B/8anLvXSVcqWdG4u=",host:_,url:{help:_+"/imlp/static?page=1",statement:_+"/imlp/static?page=2&imType=##imType##&name=##name##",uploadUrl:"https://ada.baidu.com/imlp/upload",getBaiduIdUrl:_+"/imlp/hello",verificationCode:_+"/imlp/anti/captcha/code",verificationCheck:_+"/imlp/anti/captcha/check",getRecommend:_+"/imlp/imlp/recommend"},leaveWordMsg:k,openLinkUrl:_+"/imsdk/page",appConfirmClose:{title:"确定要离开当前咨询页吗？"},disconnectDialog:{id:"disconnectDialog",title:"提示",isSingle:!0,desc:"您好，由于您长时间未发言，页面已经中断您此次的访问。若您想继续访问，请刷新页面重新建立连接。",buttons:[{text:"取消",type:"cancel"},{text:"重新连接",type:"confirm"}]},defaultConnectTime:400,antiHoldBack:C,defaultImType:99999,defaultDelayConnectTime:2e4,delayConnectTimeKey:"time_before_connect",chatTipTitle:"正在接待",chatTipText:"如需医生专业建议/专业医疗诊断，请到院咨询",baozhang:{title:"已加入百度网民权益保障计划，登录百度账号",text:"如遇虚假、欺诈蒙受经济损失，可",btnText:"申请保障",tag:"baozhang",newText:"登录百度账号享受网民权益保障，如遇欺诈等可申请保障"},imTypeMap:{0:"爱番番",1:"忠仕网站商务通",2:"53快服",3:"快商通",6:"乐语",7:"美洽",8:"易聊通",9:"螳螂",10:"鱼塘",11:"live800",12:"小能",13:"安徽网新",14:"BCIC（智聊通）",15:"华韩通",16:"科瓦",17:"蜜邦",18:"一洽",19:"中联",20:"环信",21:"晓多",22:"天下商机",23:"米多客",24:"V5智能客服",25:"udesk",26:"快连通",27:"上学说",10001:"东大正保"},apps:{cip:{key:"Gz7Grjwr0GhpGSDIhtUk6RB1EiBCRmHK",name:"每日医晓"},bcp:{key:"RbA1qPRYPjA0Lxb1u0sZlET3mLssfImm",name:"极速服务"},eduZnhx:{key:"Tv397hxPNa5PYBBAHds139ymOm3v2nsQ",name:"知鸟好学"},eduZxj:{key:"pOP6hqPxQYA40Cxp5vDbVw6fooPnFO9p",name:"装馨家"},default:{key:"RbA1qPRYPjA0Lxb1u0sZlET3mLssfImm",name:"极速服务"}},appKeyMap:{Gz7Grjwr0GhpGSDIhtUk6RB1EiBCRmHK:"cip",RbA1qPRYPjA0Lxb1u0sZlET3mLssfImm:"bcp",Tv397hxPNa5PYBBAHds139ymOm3v2nsQ:"edu_znhx",pOP6hqPxQYA40Cxp5vDbVw6fooPnFO9p:"edu_zxj",default:"default"},sdkStatus:{SEND_SERVER_FORBID:13},awakeMessage:T};t.exports=I})),window.define("34",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=e(35),T=e(19),O=e(14),I=e(36),A=e(29),M=e(37);function R(){this.key="";var e="",t=null;A.then("newSdk",(function(){t=I})).online((function(){t=T}));var n=new k({miniProgram:o,Request:t,CallbackModel:O,callbacks:null,api:{log:"https://fclick.baidu.com/w.gif",click:"https://ada.baidu.com/phone-tracker/clicklog",yxtClick:"https://ada.baidu.com/phone-tracker/clicklog2yxt"}});function i(e,t){var i="log";e.indexOf("ada.baidu.com/phone-tracker/clicklog")>-1?i="click":e.indexOf("ada.baidu.com/phone-tracker/clicklog2yxt")>-1&&(i="yxtClick"),n.log(t,i)}function r(e,n,i,r){var a=e.substr(e.lastIndexOf("/")+1);new t({method:"GET",miniProgram:o},C({},a,e),new O(this,C({},a,{onResult:function(e,t){i(e)},onError:function(e){r.onError&&r.onError()}}))).request(a,n)}this.init=function(t){e=t.uid,t.requestUtil=r.bind(this),t.logUtil=i,this.key=M.init(t)},this.getCallNumber=function(t){return"object"===(void 0===t?"undefined":_(t))?(t.uid=t.uid||e,t.key=this.key||""):t={key:this.key,realPhone:t,uid:e},M.getCallNumber(t)}}t.exports=function(){return new R}})),window.define("35",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";try{t.exports=function(e){var t=e.miniProgram,n=e.Request,i=e.CallbackModel,o=new n({method:"GET",miniProgram:t},e.api,new i(this,e.callbacks||{}));this.log=function(e,t,n){t=t||"log",o.request(t,e,n)}}}catch(e){}})),window.define("36",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _,C=(_=e(7))&&_.__esModule?_:{default:_},k=e(21);t.exports=function(e,t,n){var i=!1,o=(e=e||{}).method||"POST",r=(e.miniProgram,new(C.default.getModel("Request")));this.request=function(e,a,s){!function(e,a,s){var u=k.wsid||"";a=a||{};var c={wsid:u},d=t[e],l=n?n.getCallback(e):null,p=null;"POST"===o?p=r.post(d,a,c):(a.wsid=u,"log"===e&&(d+="?type="+encodeURIComponent(a.type),delete a.type),p=r.get(d,a)),p.then((function(e){var t=e.data;s&&s.onResult&&s.onResult(t,a,d),l&&l.onResult&&!i&&l.onResult(t,a,d)})).catch((function(e){s&&s.onError&&s.onError(a,e,d),l&&l.onError&&!i&&l.onError(a,e,d)})).finally((function(){s&&s.onEnd&&s.onEnd(a,d),l&&l.onEnd&&!i&&l.onEnd(a,d)}))}(e,a,s)},this.startHeartbeat=function(e,t){},this.stopHeartbeat=function(){},this.destroy=function(){i=!0},this.addOrReplaceApi=function(e,n){(t=t||{})[e]=n}}})),window.define("37",(function(e,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b,_){"use strict";(function(e){var n,o,a,c,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};c=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":d(e))&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.setGlobalStoreFunc=n.getGlobalStoreFunc=n.globalStore=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)};n.setFuncs=function(e,t){n.getGlobalStoreFunc=e,n.setGlobalStoreFunc=t},n.init=function(e){var t=e.key;if(t)return e.status=0,e.pvt=+new Date,s[t]=e,e},n.getData=l,n.setPhone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(t){var n=l(t);if(n){"{}"===JSON.stringify(e)?n.phone=[]:n.phone=Array.isArray(e)?e:[e];for(var i=0;i<n.phone.length;i++){var o=n.phone[i];"click"===o.mode&&(c[t]=!0),o.time=+new Date,o.expiredFuncs=[],!n.uid&&o.useridInBase64&&(n.uid=o.useridInBase64),f(o)}}}},n.getPhone=p,n.setLastUser=function(e){s.lastUid=e},n.getLastUser=function(){return s.lastUid},n.setStatus=function(e,t){var n=s[t];n&&("loading"===e?n.status=1:"end"===e&&(n.status=2))},n.setExpiredTime=function(e,t,n,i){var o=p(e,t);if(!o)return!1;o.time=+new Date,o.expiredTime=n,o.hasHeart=i,f(o)},n.startCountdown=f,n.setValue=function(e,t,n){var i=s[e];if(!i)return!1;i[t]=n},n.resetPhone=function(e,t,n){if(e){var i=l(e);if(i){if(Array.isArray(i.phone)){for(var o=0;o<i.phone.length;o++)i.phone[o][t]=n;return}i.phone[t]=n}}},n.generateKeyForStore=function(e){var t=e.uid,n=e.sid;if(!t&&!n)return null;var i=t||n,o=e.solutionIds||"",r=e.realPhones||"";return i+(o.replace(/![0-9,a-z,A-z]/g,"")+r.replace(/![0-9,a-z,A-z]/g,"")+(e.mode||""))},n.checkExpired=function(e){var t=e.time,n=e.expiredTime,i=e.hasHeart,o=e.clickLeftTime||60,r=e.heartClickLeftTime||5;return+new Date-t>1e3*(n-(i?r:o))},n.isClickMode=function(e){return c[e]||c.DEFAULT},n.setGlobalStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"!==(void 0===e?"undefined":r(e))&&console.error("插入globalStore的数据格式错误"),n.globalStore=u=o({},u,e)},n.getGlobalStore=function(e){return u[e]};var a=i(4),s={},u=n.globalStore={};n.getGlobalStoreFunc=null,n.setGlobalStoreFunc=null;var c={DEFAULT:!1};function l(e){return s[e]}function p(e,t){var n=[];if(s[e]){var i=s[e]||{};n=i.phone||[],Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++)n[o].datakey=e,n[o].datafrom=i.from,n[o].datapvt=i.pvt,n[o].datapageid=i.pageid}else for(var r in s){var u=s[r];if(u.uid===e||u.sid===e){var c=u.phone||[];Array.isArray(n)||(c=[c]);for(var d=0;d<c.length;d++)c[d].datakey=r,c[d].datafrom=u.from,c[d].datapvt=u.pvt,c[d].datapageid=u.pageid;n=n.concat(c)}}for(var l=null,p=0;p<n.length;p++){var f=n[p],h=f.realPhone,m=f.virtualPhone;if((0,a.isSamePhoneNum)(h,t)||(0,a.isSamePhoneNum)(m,t)){l=f;break}}return l||(l=n[0]),l}function f(e){var n=e.dynamicPhone,i=e.hasHeart,o=e.timeoutHandle,r=e.expiredTime,a=e.time,s=e.heartClickLeftTime,u=e.clickLeftTime,c=e.expiredFuncs,d=void 0===c?[]:c;if(n){o&&(e.timeoutHandle=null,clearTimeout(o));var l=1e3*r-1e3*(i?s:u)-(+new Date-a);l>0?e.timeoutHandle=t((function(){d.forEach((function(e){e()}))}),l):d.forEach((function(e){e()}))}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORM_TYPES=t.PHONE_SYSTEMS=void 0,t.PHONE_SYSTEMS={WINDOWS_PHONE:"windows",IOS:"ios",ANDROID:"android",UNKNOWN:"unknown"},t.PLATFORM_TYPES={COMMON:"common",IOS:"ios",ANDROID:"android"}},function(e,t,n){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search",n=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)"),i=s.location[t].substr(1).match(n);return null!=i?unescape(i[2]):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=i,t.getReferrerQuery=function(e){var t=u.referrer,n=new RegExp("(\\?|&)"+e+"=[^&]*");if(n.test(t))return t.match(n)[0].split("=")[1]},t.getParam=function(e){return i(e,"search")||i(e,"hash")},t.getCookie=function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=u.cookie.match(t);return n?unescape(n[2]):null}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)};t.createId=function(){return"p"+(new Date).getTime().toString(16)+parseInt(1e6*Math.random(),10).toString(16)},t.ch2channel=function(e){var t={3:"3",4:"1"};return void 0!==t[e]?t[e]:null},t.sdkHost=function(e,t){return t&&/^https?:\/\/[^\/]+\.baidu\.com:\d+$/.test(t)?e.replace("https://ada.baidu.com",t):e},t.dataTypeTrans=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"!==(void 0===e?"undefined":i(e))||["solutionId","solutionIds","realPhone","realPhones"].forEach((function(t){e.hasOwnProperty(t)&&(e[t]=String(e[t]))})),e}},function(e,t,n){function i(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/-/g,"").replace(/\+/g,"").replace(/\s/,"")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 11===(e=a(e)).length&&0===e.indexOf("1")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===(e=a(e)).indexOf("400")&&10===e.length}function a(e){return 0===e.indexOf("86")?e.substring(2):0===e.indexOf("+86")?e.substring(3):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePhoneNum=function(e,t){if((e=a(i(e)))===(t=a(i(t))))return!0;var n=e.indexOf(t),o=t.indexOf(e);return(3===n||4===n)&&0===e.indexOf("0")||(3===o||4===o)&&0===t.indexOf("0")},t.removeSymbol=i,t.isMobileNum=o,t.is400=r,t.getNumReplaceText=function(e){if(r(e=a(e=i(e)))){var t=[e.substring(0,3),e.substring(3,6),e.substring(6,10)],n=[e.substring(0,4),e.substring(4,7),e.substring(7,10)];return[e,t.join(" "),t.join("-"),n.join(" "),n.join("-")]}if(o(e))return["+86"+e,"86"+e,e];var s=["+86"+e,"86"+e,e];if(0===e.indexOf("0")){var u=[],c=e.length;10===c?u.push(3):12===c?u.push(4):11===c&&(u=[3,4]),u.forEach((function(t){var n=[e.substring(0,t),e.substring(t)];s=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s),[n.join(" "),n.join("-"),"+86"+e.substring(t),"86"+e.substring(t),e.substring(t)])}))}return s},t.remove86=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GET_CODED_PHONE_NUMBER=t.GET_PHONE_NUMBER_ARGS=t.GET_LOCATION=t.LAUNCH_XCX=t.LAUNCH_LOGIN_COMPONENT=t.GET_ACCOUNT_PHONE=t.GET_NETWORK_TYPE=void 0,t.GET_NETWORK_TYPE="GET_NETWORK_TYPE",t.GET_ACCOUNT_PHONE="GET_ACCOUNT_PHONE",t.LAUNCH_LOGIN_COMPONENT="LAUNCH_LOGIN_COMPONENT",t.LAUNCH_XCX="LAUNCH_XCX",t.GET_LOCATION="GET_LOCATION",t.GET_PHONE_NUMBER_ARGS="GET_PHONE_NUMBER_ARGS",t.GET_CODED_PHONE_NUMBER="GET_CODED_PHONE_NUMBER"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=function(e){e.logUtil&&(o=e.logUtil)},t.click=c,t.clickStatic=function(e,t,n){c(e,t,n,"clickStatic")},t.clickDynamic=function(e,t,n){c(e,t,n,"clickDynamic")},t.clickError=function(e,t,n){c(e,t,n,"clickError")},t.show=function(e){d("show",e)},t.requestExpired=function(e){d("requestExpired",e)},t.pv=function(e){d("pv",e)},t.nomatch=function(e,t){p(e,{logtype:"nomatch",mtPhone:t})},t.requestError=function(e){d("errorLog",e)},t.log=d,t.addComputeParams=l,t.version="3.0.14";var o=null,r={ad:"ecom_virtual_phone",lp:"ec_bcp_virtualNum"},a={bcp:"https://ada.baidu.com/phone-tracker/clicklog",bcp2yxt:"https://ada.baidu.com/phone-tracker/clicklog2yxt",fclick:"https://fclick.baidu.com/w.gif"},s={show:"fclick",click:["bcp2yxt"],requestExpired:"fclick",pv:"fclick",nomatch:"fclick",clickStatic:["bcp2yxt"],clickDynamic:"fclick",errorLog:"bcp",clickError:["bcp2yxt"]},u={clickStatic:"click",clickDynamic:"click",clickError:"noRes"};function c(e,t,n,i){var o={logtype:i||"click"};"ad"===e.from&&(o.phoneNum=t),"lp"===e.from&&(o.virtualPhone=t,o.realPhone=n),p(e,o)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&s[e]&&(n.logtype=e,p(t,n))}function l(e,t){t.timestamp=+new Date;var n=e.from||"lp";t.tag=r[n];var i=(e.phone||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dynamicPhone,n=void 0===t?"":t,i=e.virtualPhone,o=void 0===i?"":i,r=e.realPhone,a=void 0===r?"":r;return n+"_"+o+"_"+a}));t.phones=i.join("|"),e.bdVid&&(t.bdVid=e.bdVid),e.pvt&&(t.duration=+new Date-e.pvt),"native-smart-app"===e.client&&(t.appName=e.appName,t.appKey=e.appKey),e.sourceType&&(t.lpFrom=e.sourceType)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o){var n={};["uid","siteid","baiduid","pageid","kDomain","fid","spid","xst","ch","status","channel","dpopen","url","referrer","lpType","sdkType","sdkVersion","query","client","expired","solutionId","busSiteId","busPageId","expInfo","fromError"].forEach((function(t){n[t]=e[t]})),n.solutionId=e.solutionId||e.solutionIds,i(n,t),l(e,n),function(e){var t=e.logtype,n=s[t]||[];"string"==typeof n&&(n=[n]),n.forEach((function(n){u[t]&&(e.logtype=u[t]),o(a[n],e)}))}(n)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.SOURCE_TYPE_MAP=t.LPTYPE=void 0,t.isJiMuYu=h,t.isJiMuYuPreview=m,t.isThird=v,t.isMedical=function(e){return[r.JMY_MEDICAL_ACCOUNT,r.JMY_MEDICAL_PAGE].includes(+e)};var i=n(2),o=t.LPTYPE={SMARTLP:1,AIPAGE:2,NA:3,JIMUYU:4,THIRD:5,PREVIEW:6,BAOZHANG:7,OTHER:0},r=t.SOURCE_TYPE_MAP={JMY:1001,CONSULT_LP:26001,BAOZHANG_PC:33001,BAOZHANG_PASS:33002,BAOZHANG_WISE:33003,JMY_MEDICAL_ACCOUNT:4003,JMY_MEDICAL_PAGE:4004},a=[33001,33002,33003];function c(e){return-1!==e.indexOf("slp.baidu.com")||-1!==e.indexOf("sp0.baidu.com/5bgWsjip0QIZ8tyhnq")}function d(e){return-1!==e.indexOf("aipage.cn")}function f(e){return-1!==e.indexOf("fix=1")&&p&&p.userAgent&&p.userAgent.match(/baiduboxapp\/([\d+.]+)/)}function h(e){for(var t=["isite.baidu.com","sjh.baidu.com","wejianzhan.com","sitei.baidu.com","shj.baidu.com","wjz.baidu.com","wzj.baidu.com","jzw.baidu.com"],n=0;n<t.length;n++){var i=t[n];if(-1!==e.indexOf(i))return!0}}function m(e){for(var t=["preview-sjh-offline.baidu.com","preview-sjh-preonline.baidu.com","preview-sjh.baidu.com","audit-sjh-offline.baidu.com","audit-sjh-preonline.baidu.com","audit-sjh.baidu.com","sjh-offline.baidu.com"],n=0;n<t.length;n++){var i=t[n];if(-1!==e.indexOf(i))return!0}}function v(e){return!(-1!==e.indexOf("baidu.com")||c(e)||d(e)||f(e)||h(e))}function y(e){return a.indexOf(e)>=0}t.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.OTHER;void 0!==e.type&&(t=e.type);var n=l.href;c(n)?t=o.SMARTLP:d(n)?t=o.AIPAGE:f(n)?t=o.NA:h(n)?t=o.JIMUYU:v(n)?t=o.THIRD:m(n)&&(t=o.PREVIEW),y(e.sourceType)&&(t=o.BAOZHANG);var r={lpType:t,url:l.href,referrer:u.referrer};(0,i.getQuery)("sdkhost","search")&&(r.sdkhost=(0,i.getQuery)("sdkhost","search"));try{if(m(n)||h(n)){var a=s.location.pathname.split("/").pop(),p=(0,i.getCookie)(a);r.expInfo=p}}catch(e){console.log(e)}return t===o.PREVIEW&&(r.previewChannel=(0,i.getQuery)("channel","search")),r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ajaxUrl=t.requestUtil=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.loadPhoneNumber=function(e){var t=p(e),n=t.params,o=t.onResult,a=t.onError,f={onResult:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.setStatus)("end",e.key);var n=t.channel,i=t.baiduid;void 0!==n&&(0,r.setValue)(e.key,"channel",n),i&&(0,r.setValue)(e.key,"baiduid",i),o(t)},onError:function(t){(0,r.setStatus)("end",e.key),a(t)}};if(d){n.mode=e.mode,n.expInfo=e.expInfo;var h=e.realPhones||"",m=h.split("|").map((function(e){return(0,u.removeSymbol)((0,u.remove86)(e))}));h=m.join("|"),(0,s.default)().then((function(t){d(l+"getNumber",i({},n,{realPhones:h,extraInfo:t}),f.onResult,f,c.requestError),(0,r.setLastUser)(e.key),(0,r.setStatus)("loading",e.key)})).catch((function(){d(l+"getNumber",i({},n,{realPhones:h}),f.onResult,f,c.requestError),(0,r.setLastUser)(e.key),(0,r.setStatus)("loading",e.key)}))}},t.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.requestUtil&&(t.requestUtil=d=e.requestUtil),t.ajaxUrl=l=(0,a.sdkHost)(l,e.sdkhost)},t.delayPhoneTime=function(e,t){var n=p(e)||{},o=n.params,r=n.onResult,a=n.onError;o.dynamicPhone=e.phone.dynamicPhone,o.reqMd5=e.phone.reqMd5,o.clicklog=1,o.ch=e.ch,o.status=e.status,o.referrer=e.referrer,o.lpType=e.lpType,o.sdkType=e.sdkType,o.expired=e.expired,(0,c.addComputeParams)(i({},e,{phone:[e.phone]}),o),o.rand=o.timestamp,"ad"===e.from&&(o.phoneNum=o.dynamicPhone),"lp"===e.from&&(o.virtualPhone=o.dynamicPhone,o.realPhone=t),d(l+"delayPhoneTime",o,r,{onResult:r,onError:a})},t.startHeart=function(e){var t=p(e)||{},n=t.params,i=t.onResult,o=t.onError;n.dynamicPhone=e.phone.dynamicPhone,n.reqMd5=e.phone.reqMd5,d(l+"startHeart",n,i,{onResult:i,onError:o})};var o,r=n(0),a=n(3),s=(o=n(15))&&o.__esModule?o:{default:o},u=n(4),c=n(6),d=t.requestUtil=null,l=t.ajaxUrl="https://ada.baidu.com/phone-tracker/";function p(e){var t=e.uid,n=e.sid,i=e.baiduid,o=e.channel,r=e.dpopen,a=e.kDomain,s=e.fid,u=e.spid,c=e.query,d=(e.from,e.lpType,e.xst),l=e.sdkVersion,p=e.client;return{params:{useridInBase64:t,siteid:n,baiduid:i,channel:o,dpopen:r,query:c,kDomain:a,fid:s,spid:u,xst:d,sdkVersion:l,url:e.url,client:p,pageid:e.pageid,sourceType:e.sourceType,solutionIds:e.solutionIds,busSiteId:e.busSiteId,busPageId:e.busPageId},onResult:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.errors,i=t.status,o=t.data;200===i?e.onResult(o):e.onError&&e.onError(n)},onError:function(t){e.onError&&e.onError(t)}}}},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=i(19),a=i(20),c=(o=i(21))&&o.__esModule?o:{default:o};var d=function(e){return"JMY_CAPABILITIES_CALLBACK_".concat(e)},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o={duration:2e3,withCb:!0,platform:(0,a.getMobileOperatingSystem)(),useCache:!1,dynamicPath:""};this.opts=Object.assign(o,i),this.params=n,this.schemaName=t,this.isLoading=!1,this.cbName=d(t)}var n;return(n=[{key:"generalSchema",value:function(){var e=(c.default[this.opts.platform]||c.default.default)[this.schemaName]||"",t=this.getParams(),n=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&"),i=this.opts.dynamicPath,o=void 0===i?"":i;return"".concat(e).concat(o,"?").concat(n)}},{key:"getParams",value:function(){return this.opts.withCb?Object.assign({},this.params,{callback:this.cbName}):Object.assign({},this.params)}},{key:"execute",value:function(){var e=this;return this.isLoading=!0,this.response=new Promise((function(n,i){var o=u.createElement("iframe"),a=e.generalSchema(),c=t((function(){e.isLoading=!1,o&&o.parentNode===u.body&&u.body.removeChild(o),n(r.timeOutError)}),e.opts.duration);s[e.cbName]=function(t){clearTimeout(c),e.isLoading=!1,o&&o.parentNode===u.body&&u.body.removeChild(o);try{n(JSON.parse(t))}catch(e){n(t)}},o.style.display="none",o.src=a,(u.body||u.getElementsByTagName("body")[0]).appendChild(o)})),this.response}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,n),e}();n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s[e]&&s[e].isLoading&&n.useCache)return s[e].response;var i=new l(e,t,n);return n.useCache&&(s[e]=i),i.execute()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isFromAd=a,t.isChargeUrl=c,t.initAdParams=function(e){var t={uid:e.uid||s.bdDataLayer.uid||(0,i.getReferrerQuery)("cegduid")||(0,i.getReferrerQuery)("cegduid","search")||(0,i.getReferrerQuery)("cegduid","hash")||(0,i.getReferrerQuery)("BD_FC_UID"),sid:s.bdDataLayer.sid,baiduid:(0,i.getCookie)("BAIDUID"),dpopen:e.dpopen||s.bdDataLayer.dpopen||(0,i.getReferrerQuery)("dpopen")||1,bdRank:e.bdRank||(0,i.getReferrerQuery)("bdrank"),kDomain:e.kDomain||d(),channel:e.channel,query:e.query};if(e.solutionId&&!e.solutionIds&&(t.solutionIds=e.solutionId,delete e.solutionId),e.realPhone&&!e.realPhones&&(t.realPhones=e.realPhone),"lp"===e.from){t.siteid=t.sid,t.busSiteId=e.busSiteId;for(var n=["fid","ch","spid","xst"],a=0;a<n.length;a++){var u=n[a];t[u]=e[u]||(0,i.getParam)(u)}void 0!==t.channel||t.kDomain||(4===e.lpType&&t.ch&&t.fid?t.channel=(0,o.ch2channel)(t.ch):e.previewChannel?t.channel=e.previewChannel:6===e.lpType?t.channel="5":t.channel="4")}return t.fromAd=!!("ad"===e.from||t.kDomain||t.fid||t.spid||t.xst||e.sourceType===r.SOURCE_TYPE_MAP.CONSULT_LP||4===e.lpType||6===e.lpType||e.lpType===r.LPTYPE.BAOZHANG||(0,r.isThird)(l.href)&&(0,i.getQuery)("bd_vid","search")),t.pageid=(0,o.createId)(),t.busPageId=e.busPageId||"",t};var i=n(2),o=n(3),r=n(7);function a(){return c(u.referrer)}function c(){return-1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").indexOf("baidu.php")}function d(){if(!a())return"";var e=u.referrer,t=/url=([^\.]+\.)([^\.]+\.)([^&]+)/,n=/sc\.([^\.]+\.)([^\.]+\.)([^&]+)/;return t.test(e)?t.exec(e)[3]:n.test(e)?n.exec(e)[3]:void 0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};try{var r=function(e){u.getElementsByTagName("head")&&u.getElementsByTagName("head")[0]&&u.getElementsByTagName("head")[0].removeChild(m),delete s[a],i.onEnd&&(i.onEnd(t),o())};if(!e||!t)return;n=n||function(){};var a="bcpDynamic",c=1e7;a+=(new Date).getTime()%c,a+=(Math.random()*c).toFixed(0),s[a]=n,t.callback=a;var d=[],l=Object.prototype.toString;for(var p in t){var f="",h=void 0;if("number"==typeof t[p]&&(f=0),"[object Object]"===l.call(t[p])){try{h=JSON.stringify(t[p])}catch(e){h="{}"}d.push(p+"="+encodeURIComponent(h))}else d.push(p+"="+encodeURIComponent(t[p]||f))}delete t.callback,d=d.join("&"),-1!==e.indexOf("?")?e+="&"+d:e+="?"+d;var m=u.createElement("script");m.setAttribute("async","true"),m.addEventListener("load",r,!1),m.addEventListener("error",(function(e){u.getElementsByTagName("head")&&u.getElementsByTagName("head")[0]&&u.getElementsByTagName("head")[0].removeChild(m),delete s[a],i.onError&&i.onError(t)}),!1),i.onLoad&&"function"==typeof i.onLoad&&i.onLoad(),u.getElementsByTagName("head")[0].appendChild(m),m.src=e}catch(e){console.error(e)}},t.log=function(e,t){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i+"="+encodeURIComponent(void 0===t[i]?"":t[i]));n.push("rand="+(new Date).getTime()),e+="?"+n.join("&");var o=new Image,r=0;o.onload=o.onerror=o.onabort=function(t){if("error"===t.type&&r<2)return r++,void(o.src=e+"&retryCount="+r);o.onload=o.onerror=o.onabort=null,o=null},o.src=e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VERIFY_TYPES=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.userCheck=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,o=e.onError,r=void 0===o?function(){}:o,u=e.uid,c=e.appId,d=e.siteId,l=e.pageId,p=e.lpUrl,f=(new Date).getTime(),h=a.ajaxUrl+"identityUserCheck",m={onResult:function(e){var t=e.data,i=void 0===t?{}:t,o=e.status;0===o?n({passCheck:i.passCheck,status:o}):r({passCheck:!0,status:2})},onFail:function(){r({passCheck:!0,status:2})}},v=i({useridInBase64:u,appId:c,siteId:d,pageId:l,lpUrl:p,clickTime:f},(0,s.default)());(0,a.requestUtil)(h,v,m.onResult,{onError:m.onFail})},t.createVerify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,n=void 0===t?function(){}:t,i=e.onLoad,o=void 0===i?function(){}:i,s=e.onError,c=void 0===s?function(){}:s,d=e.uid,l=(void 0===d?"":d)||(0,r.getGlobalStoreFunc)("uid"),p={userId:l,verify:"slide-picture"},f=a.ajaxUrl+"identityCreateVerify";if("function"==typeof n){var h={onResult:function(e){var t,i=e.data,o=void 0===i?{}:i,a=e.status,s=(o.verifyIdentifyCode,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(o,["verifyIdentifyCode"]));0===a?((0,r.setGlobalStoreFunc)((u(t={},l+"Code",o.verifyIdentifyCode||""),u(t,l+"Image",o.pictureBase64||""),u(t,l+"BackgroundImage",o.bkPictureBase64||""),t)),(0,r.setGlobalStoreFunc)(u({},l+"CodePulled",!0)),n({data:s,status:a})):((0,r.setGlobalStoreFunc)(u({},l+"CodePulled",!1)),c({data:{},status:2}))},onFail:function(){(0,r.setGlobalStoreFunc)(u({},l+"CodePulled",!1)),c({data:{},status:2})}};(0,a.requestUtil)(f,p,h.onResult,{onError:h.onFail,onLoad:o})}else n({data:{},status:2,errors:"onSuccess has to be type of Function"})},t.checkVerify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,n=void 0===t?function(){}:t,i=e.onLoad,o=void 0===i?function(){}:i,s=e.onError,c=void 0===s?function(){}:s,d=e.coordinate,l=e.uid,p=void 0===l?"":l;if("function"==typeof n){var f=p||(0,r.getGlobalStoreFunc)("uid"),h={userId:f,verifyIdentifyCode:(0,r.getGlobalStoreFunc)(f+"Code")||"",coordinate:d},m=a.ajaxUrl+"identityCheckVerify",v={onResult:function(e){var t=e.data,i=void 0===t?{}:t;e.status?n({result:!1}):((0,r.setGlobalStoreFunc)(u({},p+"Result",!!i.result)),n({result:!!i.result}))},onFail:function(){(0,r.setGlobalStoreFunc)(u({},p+"Result",!1)),c({result:!1,status:2})}};(0,a.requestUtil)(m,h,v.onResult,{onError:v.onFail,onLoad:o})}else n({result:!1,errors:"onSuccess has to be type of Function"})};var o,r=n(0),a=n(8),s=(o=n(25))&&o.__esModule?o:{default:o};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.VERIFY_TYPES={ERROR_VERIFY:2,ALL_VERIFY:1,PASS:0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PHONE_TYPE_MAP={0:"STATIC",1:"PRIVATE",2:"EXT400",STATIC:0,PRIVATE:1,EXT400:2},t.STATUS_MAP={STATIC:0,DYNAMIC:1,TIMEOUT:4,SUCCESS_ONLY_REAL:2,REQUEST_ERROR:5,VERIFY:100}},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.version=void 0;var o="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};n.init=b,n.getCallNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={};return"object"===(void 0===e?"undefined":o(e))?(n=(0,s.dataTypeTrans)(e)).key=n.key||n.uid||n.sid:(n.realPhone=String(e),t||(t=(0,l.getLastUser)()),n.key=t),((0,l.getData)(n.key)||{}).useIdentity&&n.key.endsWith("show")?function(e){var t={status:100},n=(0,l.getPhone)(e.key,e.realPhone)||{},i=(0,l.getData)(e.key)||{},o=n.phoneAntiCheatConf&&n.phoneAntiCheatConf.beforeShow||g.VERIFY_TYPES.PASS,r=e.uid||i.uid,a=function(t){var n=t.passCheck;void 0===n||n?_(e):(0,l.getGlobalStoreFunc)(r+"CodePulled")?e.onVerify({data:{pictureBase64:(0,l.getGlobalStoreFunc)(r+"Image"),bkPictureBase64:(0,l.getGlobalStoreFunc)(r+"BackgroundImage")},status:P.IMG_EXIST}):(0,g.createVerify)({uid:r,onSuccess:function(t){e.onVerify(t)},onError:function(t){e.onVerify(t)},onLoad:e.onLoad})},s=(0,l.getGlobalStoreFunc)(r+"Result"),u=(0,l.getGlobalStoreFunc)(r+"CodePulled")||!1;return o!==g.VERIFY_TYPES.ERROR_VERIFY||s?o!==g.VERIFY_TYPES.ALL_VERIFY||s?([g.VERIFY_TYPES.ERROR_VERIFY,g.VERIFY_TYPES.ALL_VERIFY].includes(o)&&((0,l.setGlobalStoreFunc)(E({},r+"Result",!0)),(0,l.setGlobalStoreFunc)(E({},r+"CodePulled",!1))),_(e)):u?(e.onVerify({data:{pictureBase64:(0,l.getGlobalStoreFunc)(r+"Image"),bkPictureBase64:(0,l.getGlobalStoreFunc)(r+"BackgroundImage")},status:P.IMG_EXIST}),t):((0,g.createVerify)({uid:r,onSuccess:function(t){e.onVerify(t)},onError:function(t){e.onVerify(t)},onLoad:e.onLoad}),t):((0,g.userCheck)({uid:i.uid,appId:i.appId||"",siteId:i.busSiteId||"",pageId:i.busPageId||"",lpUrl:i.url,onSuccess:function(e){return a(e)},onError:function(e){return a(e)}}),t)}(n):_(n)},n.getShowCallNumber=C,n.delayTime=function(e,t,n){var i=(0,l.getData)(e),o=(0,l.getPhone)(e,n)||{};if(o.dynamicPhone&&(0,y.isSamePhoneNum)(t,o.dynamicPhone)){var a={onResult:function(t){(0,l.setExpiredTime)(e,n,t.expiredTime,t.hasHeart),o.hasHeart=t.hasHeart,k(e,o)},onError:function(e){}};(0,c.delayPhoneTime)(r({},i,a,{phone:o}),n)}},n.checkHeart=k;var a,s=i(3),c=i(8),l=i(0),p=i(6),f=i(7),h=i(10),m=i(11),v=(a=m)&&a.__esModule?a:{default:a},y=i(4),g=i(12);function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=n.version="3.0.21",P={IMG_EXIST:-1};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,s.dataTypeTrans)(e),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageInitFunc?e.pageInitFunc(e):{},n=e.adInitFunc?e.adInitFunc(r({},e,t)):{pageid:(0,s.createId)()},i=r({},e,t,n);i.key=(0,l.generateKeyForStore)(i),i.sdkVersion=S,(0,c.init)(i),(0,p.init)(i);var o=i.uid,a=void 0===o?"":o,u=i.key;return(void 0===u?"click":u).endsWith("show")&&((0,l.setFuncs)(e.getGlobalData||l.getGlobalStore,e.setGlobalData||l.setGlobalStore),(0,l.setGlobalStoreFunc)({uid:a})),!!i.fromAd&&!!i.key&&((0,l.init)(i),i)}(n);if(i){var o=(0,l.getData)(i.key);return o&&o.status?(t((function(){n.callback&&n.callback()}),10),i.key):((0,p.pv)(i),function(e,t){var n=e.key,i=(0,l.getData)(n),o={onResult:function(t){if((0,l.setPhone)(t,n),e.replaceFunc)e.replaceFunc(e);else{var o=!1;(Array.isArray(t)&&t[0]&&(t[0].virtualPhone||t[0].dynamicPhone)||t.virtualPhone||t.dynamicPhone)&&(o=!0),o&&(k(n),(0,p.show)(i),e.callback&&e.callback())}},onError:function(e){}};(0,c.loadPhoneNumber)(r({},i,o,{mode:t}))}(i,n.mode||"show"),i.key)}}function _(e){var t=(0,l.isClickMode)(e.key)||"click"===e.mode,n=C(e.realPhone,e.key);if(e.callback&&(n.type="show",e.callback(n)),t&&e.callback)var i=b(r({from:e.from||"lp",mode:"click",requestUtil:v.default,logUtil:m.log,sdkType:e.sdkType||"api",client:e.client||"h5",pageInitFunc:f.init,adInitFunc:h.initAdParams},e,{callback:function(){var t=C(e.realPhone,i);1===t.status&&(t.type="click",e.callback(t))}}));return n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,l.getPhone)(t,e)||{},i=(0,l.getData)(t)||{},o=(0,f.isMedical)(i.sourceType)&&!e?n.realPhone:e,a={phoneAntiCheatConf:n.phoneAntiCheatConf&&n.phoneAntiCheatConf.beforeShow||null};return n||(a=r({},a,{status:4,key:t,virtualPhone:o,realPhone:null,openPopUps:null})),!t||!String(t).endsWith("show")||t&&(0,l.getData)(t)&&(0,l.getData)(t).phone&&(Array.isArray((0,l.getData)(t).phone)?(0,l.getData)(t).phone.length:"{}"!==JSON.stringify((0,l.getData)(t).phone))?t&&(n.dynamicPhone||n.virtualPhone)?"ad"===n.datafrom||(0,y.isSamePhoneNum)(o,n.realPhone)?n.dynamicPhone?(0,l.checkExpired)(n)?((0,l.setValue)(t,"expired",1),a=r({},a,{status:0,virtualPhone:n.virtualPhone?(0,y.remove86)(n.virtualPhone):o,realPhone:o,key:n.datakey,openPopUps:n.openPopUps})):a=r({},a,{status:1,virtualPhone:(0,y.remove86)(n.dynamicPhone),realPhone:o,time:n.time,expiredTime:n.expiredTime,backPhone:n.virtualPhone?(0,y.remove86)(n.virtualPhone):o,key:n.datakey,openPopUps:n.openPopUps}):n.virtualPhone&&(a=r({},a,{status:0,virtualPhone:(0,y.remove86)(n.virtualPhone),realPhone:o,key:n.datakey,openPopUps:n.openPopUps})):a=r({},a,{status:3,virtualPhone:o,realPhone:null,key:n.datakey,openPopUps:null}):a=r({},a,{status:2,virtualPhone:o,realPhone:null,key:n.datakey,openPopUps:!1}):a=r({},a,{status:5,virtualPhone:o,realPhone:o,key:t,openPopUps:!1}),a.pageid=n.datapageid,n.datapvt&&(a.duration=+new Date-n.datapvt),-1===[0,1,5].indexOf(a.status)&&a.key&&(a.status=0),0!==a.status&&1!==a.status||(a.success=!0),!a.virtualPhone&&o&&(a.virtualPhone=o),a}function k(e,n){var i=(0,l.getData)(e);(n?[n]:i.phone||[]).forEach((function(n){var o=n.dynamicPhone,a=n.hasHeart,s=n.heartHandle,d=n.time,p=n.expiredTime,f=n.heartLeftTime,h=void 0===f?10:f,m=n.heartClickLeftTime,v=void 0===m?5:m,y=n.needHeart;if(o&&a&&!1!==y){s&&(clearTimeout(s),n.heartHandle=null);var g=+new Date-d;if(1e3*(p-v)>g){var E=1e3*(p-h)-g;n.heartHandle=t((function(){n.heartHandle=null;var t={onResult:function(t){(0,l.setExpiredTime)(e,n.realPhone,t.expiredTime,t.hasHeart),k(e,n)},onError:function(e){}};u&&u.visibilityState&&"visible"!==u.visibilityState||(0,c.startHeart)(r({},i,{phone:n},t))}),E>0?E:0)}}else s&&(clearTimeout(s),i.heartHandle=null)}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=void 0;var i=n(16),o=n(24),r=t.getLocation=function(){var e=(0,o.getEnv)();return(0,o.isBaiduApp)()&&"swan"!==e?i.capabilities.getLocation({configs:{useCache:!0}}):Promise.resolve({data:{location:""},status:-1,message:"非手百环境"})};t.default=function(){var e={};return r().then((function(t){var n=t.data,i=void 0===n?{}:n;if(0!=+t.status)return e;var r={clientType:(0,o.isIOS)()?"ios":"android",ip:"0.0.0.0"};return(0,o.isIOS)()?(r.longitude=i.location.split(",")[0],r.latitude=i.location.split(",")[1]):r.encryption=i.location,r}))}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.capabilities=t.videoUtils=void 0;var o=s(n(17));t.videoUtils=o;var r=s(n(18));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}t.capabilities=r},function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getSingleVideoInstance=t.SjhVideo=void 0;var a=function(){function e(t,n){i(this,e),this.videoId=t.videoId||"6666666",this.actions=n}return r(e,[{key:"onPushOut",value:function(){this.actions.onPushOut&&this.actions.onPushOut()}},{key:"onPushIn",value:function(){this.actions.onPushIn&&this.actions.onPushIn()}}]),e}();t.SjhVideo=a;var u=function(){function e(){i(this,e),this.instance=null}return r(e,[{key:"checkInstance",value:function(e){for(var t=["videoId","onPushOut"],n=0;n<t.length;n++)if(!e[t[n]])return!1;return!0}},{key:"employInstance",value:function(e){this.checkInstance(e)&&(this.instance&&String(this.instance.videoId)===String(e.videoId)||(this.instance&&this.instance.onPushOut(),this.instance=e,this.instance.onPushIn()))}},{key:"releaseInstance",value:function(e){var t=this.instance&&String(this.instance.videoId)===String(e);e&&!t||(this.instance&&this.instance.onPushOut(),this.instance=null)}}]),e}();t.getSingleVideoInstance=function(){return s.SingletonVideoInstance||(s.SingletonVideoInstance=new u),s.SingletonVideoInstance}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNetworkType",{enumerable:!0,get:function(){return a.default}}),t.getCodedPhoneNumber=t.getPhoneNumArgs=t.getLocation=t.launchXcx=t.launchLoginComponent=t.getAccountPhone=void 0;var i=s(n(9)),o=n(5),r=n(1),a=s(n(23));function s(e){return e&&e.__esModule?e:{default:e}}t.getAccountPhone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{upgrade:0}:t,a=e.configs,s=void 0===a?{}:a;return(0,i.default)(o.GET_ACCOUNT_PHONE,n,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!0},s))},t.launchLoginComponent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{upgrade:0}:t,a=e.configs,s=void 0===a?{}:a;return(0,i.default)(o.LAUNCH_LOGIN_COMPONENT,n,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!0},s))},t.launchXcx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.configs,a=void 0===n?{}:n,s=e.path;return(0,i.default)(o.LAUNCH_XCX,t,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!1,dynamicPath:s},a))},t.getLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t,a=e.configs,s=void 0===a?{}:a;return(0,i.default)(o.GET_LOCATION,n,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!1},s))},t.getPhoneNumArgs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t,a=e.configs,s=void 0===a?{}:a;return(0,i.default)(o.GET_PHONE_NUMBER_ARGS,n,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!1},s))},t.getCodedPhoneNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t,a=e.configs,s=void 0===a?{}:a;return(0,i.default)(o.GET_CODED_PHONE_NUMBER,n,Object.assign({platform:r.PLATFORM_TYPES.COMMON,useCache:!1},s))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.timeOutError=void 0,t.timeOutError={status:4080,data:{}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getMobileOperatingSystem=void 0;var i=n(1);t.getMobileOperatingSystem=function(){var e=p.userAgent||p.vendor||s.opera;return/windows phone/i.test(e)?i.PHONE_SYSTEMS.WINDOWS_PHONE:/android/i.test(e)?i.PHONE_SYSTEMS.ANDROID:/iPad|iPhone|iPod/.test(e)&&!s.MSStream?i.PHONE_SYSTEMS.IOS:i.PHONE_SYSTEMS.UNKNOWN}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,r=(i=n(22))&&i.__esModule?i:{default:i},a=n(1);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={},c=(s(o={},a.PLATFORM_TYPES.COMMON,r.default),s(o,a.PLATFORM_TYPES.ANDROID,u),s(o,a.PLATFORM_TYPES.IOS,{}),s(o,"default",u),o);t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=n(5);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=(r(i={},o.GET_NETWORK_TYPE,"baiduboxapp://v19/utils/getNetworkType"),r(i,o.GET_ACCOUNT_PHONE,"baiduboxapp://account/getPhoneNumArgs"),r(i,o.LAUNCH_LOGIN_COMPONENT,"baiduboxapp://account/launchLoginComponent"),r(i,o.LAUNCH_XCX,"baiduboxapp://swan"),r(i,o.GET_LOCATION,"baiduboxapp://v20/location/getLocation"),r(i,o.GET_PHONE_NUMBER_ARGS,"baiduboxapp://account/getPhoneNumArgs"),r(i,o.GET_CODED_PHONE_NUMBER,"baiduboxapp://account/getCodedPhoneNumber"),i);t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(9))&&i.__esModule?i:{default:i},r=n(5),a=n(1);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t,i=e.configs,s=void 0===i?{}:i;return(0,o.default)(r.GET_NETWORK_TYPE,n,Object.assign({platform:a.PLATFORM_TYPES.COMMON,useCache:!0},s))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=function(){return void 0!==r&&r.getSystemInfo?"swan":"undefined"!=typeof groot?"loki":"h5"},t.isBaiduApp=function(){return!(void 0===s||!s)&&s.navigator.userAgent.indexOf("baiduboxapp")>-1},t.isIOS=function(){return!(void 0===s||!s)&&/iPhone|iPad|iPod/i.test(s.navigator.userAgent)},t.isAndroid=function(){return!(void 0===s||!s)&&/Android/i.test(s.navigator.userAgent)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(2);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.getCookie)("BAIDUID")||"",n=(0,o.getCookie)("BCLID")||"",r=(0,o.getCookie)("BIDUPSID")||"",a=(0,o.getCookie)("BAIDUCUID")||"",s=(0,o.getCookie)("BA_HECTOR")||"",c=(0,o.getCookie)("BAIDULOC")||"",d=u.referrer||"",l=p.userAgent;return i({baiduId:t,logId:n,baiduPsId:r,cuid:a,baHector:s,baiduloc:c,referrer:d,ua:l},e)}},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(13),r=n(14),a=n(6),s=n(0);t.default={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof e&&(e={uid:e});var t=i({from:"lp",sdkType:"api",client:"native-smart-app",mode:"show",adInitFunc:function(e){var t={feed:"3",fc:"1",other:"4"},n=e.channel,i=void 0===n?"other":n;return t[i]&&(i=t[i]),{channel:i,fromAd:!("4"!==i&&"3"!==i&&"1"!==i&&!e.xst&&!e.spid),baiduid:e.baiduid||+new Date,dpopen:void 0===e.dpopen?"1":e.dpopen}}},e);return(0,r.init)(t)},getCallNumber:function(){var e=r.getCallNumber.apply(void 0,arguments);return e&&e.status===o.STATUS_MAP.REQUEST_ERROR&&clickError(i({},(0,s.getData)(e.key),{fromError:1}),e.virtualPhone,e.realPhones),0!==e.status&&1!==e.status||(1===e.status&&(0,r.delayTime)(e.key,e.virtualPhone),(0,a.click)((0,s.getData)(e.key),e.virtualPhone,e.realPhone)),4===e.status&&(0,a.requestExpired)((0,s.getData)(e.key)),e},version:r.version}}]).default},"object"==d(i)&&"object"==d(e)?e.exports=c():(o=[],void 0===(a="function"==typeof(n=c)?n.apply(i,o):n)||(e.exports=a))}).call(this,e(8)(n))})),window.define("67",(function(e,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b,_){"use strict";var C=null,k=!1,T=[];n.exports=function(e,n,i,o){var r=!0,a=null,s=new i(e);try{a=new n({miniProgram:e,method:"GET"},{baiduid:o.url.getBaiduIdUrl})}catch(e){}function u(t){if(T.push(t),!k){k=!0;var n=c((function(e){k=!1,T.forEach((function(t){t(e)})),T.length=0}),1e4);!function(t){var n=c(t,300);if(r)try{e.getCommonSysInfo({success:function(e){var t=e.baidu_id;n(t)},fail:function(e){202===e.errCode&&(r=!1),n()},complate:function(){n()}})}catch(e){n()}else n()}((function(e){e?n(e):C?n(C):a.request("baiduid",null,{onResult:function(){var e=s.getValue("BAIDUID");C=e,n(e)},onEnd:function(){n()}})}))}}function c(e,n){var i=0;n&&(i=t(r,n));var o=!1;function r(){o||(o=!0,clearTimeout(i),e.apply(null,arguments))}return r}this.getBaiduid=u,this.syncBaiduidCookie=function(e,t){var n=s.getValue("BAIDUID");return e?(e!==n&&s.addCookie("BAIDUID",e),void t(e)):n?void t(n):void u((function(e){s.addCookie("BAIDUID",e),t(e)}))}}})),window.define("78",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=e(31),k=e(19),T=e(20),O=e(16),I=e(67),A=(e(79),e(22),new T(o)),M=(new O,{}),R={},D={},w=new I(o,k,T,C);function N(e){var t=x(e);if(t)return t;var n=L(e),i=Date.now(),o=i+48e4;return M[n]={inputData:e,status:0,startTime:i,endTime:o},M[n]}function U(e,t,n){var i=N(e);return i.result=t,i.status=1,n&&(i.status=-1),i}function x(e){var t=L(e),n=M[t],i=Date.now();return n&&n.endTime&&n.endTime<i&&(delete M[t],n=null),n}function L(e){var t=[e.type||"",e.url||""];return e.xst&&t.push(e.xst),encodeURIComponent(t.join(""))}function j(e){var t=x(e),n=L(e),i=R[n];i&&t&&0!==t.status&&(R[n]=[],i.forEach((function(e){var n=e.callback;n&&n(t)})),R[n]=[],function(e){var t=L(e);delete M[t]}(e))}D.run=function(){},D.onData=function(e,t){var n=x(e);if(n){var i=L(e);R[i]=R[i]||[],R[i].push({inputData:e,callback:t}),n&&0!==n.status&&j(e)}else t({inputData:e,status:-2})},D.loadImlpData=function(e){!function(e){if(!x(e)){N(e);var t=function(e){var t=e.url,n={xst:e.xst},i=[];for(var o in n){var r=n[o];(r||0===r)&&i.push(o+"="+encodeURIComponent(r))}if(i.push("preload=1"),i=i.join("&")){var a=-1===t.indexOf("?")?"?":"&";t=t+a+i}return t}(e);w.syncBaiduidCookie(null,(function(n){new k({method:"GET",miniProgram:o},{pageData:t}).request("pageData",null,{onResult:function(t){U(e,t),j(e)},onError:function(){U(e,null,!0),j(e)}})}))}}(e)},D.addPrefetchData=function(e){if(e){var t={xst:e.xst,url:e.url},n=e.result;if(n||"object"===(void 0===n?"undefined":_(n))){var i=e.setCookie;A.headerSetCookie(i);var o=e.baiduid,r=A.getValue("BAIDUID");o&&o!==r&&A.addCookie("BAIDUID",o),U(t,n)}}},t.exports=D})),window.define("79",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _=e(21),C=e(11),k=e(22),T=new function(){_.setData("aop",this);var e=!0,t=new C,n=null,i={openPage:0};try{App.after({methods:{onLogin:function(e){},onLaunch:function(e){!function(e){r(e);var i=n||{};t.emit("onAppLaunch",[i])}(e)},onShow:function(i){!function(i){r(i);var o=n||{};e?t.emit("appFirstShow",[o]):t.emit("appShow",[o]),e=!1}(i)},onHide:function(i){!function(i){e=!1,r(i);var o=n||{};t.emit("appHide",[o])}(i)},onError:function(e){},onPageNotFound:function(e){},onPrefetch:function(e){o(e)}}}),Page.after({methods:{onLoad:function(e){i.openPage++},onReady:function(e){},onShow:function(e){},onHide:function(e){},onUnload:function(e){},onForceReLaunch:function(e){},onPullDownRefresh:function(e){},onReachBottom:function(e){},onShareAppMessage:function(e){},onPageScroll:function(e){},onTabItemTap:function(e){},onURLQueryChange:function(e){}}})}catch(e){}function o(e){var n=(e=e||{}).path,i=e.query||{},o=e.state;if(i.url&&/^https?%3a%2f%2f/i.test(i.url))for(var r in i)i[r]=decodeURIComponent(i[r]||"");i.xst&&k.setXst(i.xst);var a={path:n,state:o,query:i};t.emit("onPrefetch",[a])}function r(e){n||(n=function(e){var t=e.args;if(t){var n={appId:t.appId,appLaunchScheme:t.appLaunchScheme,appURL:t.appURL,appid:t.appid,appname:t.appname,clkid:t.clkid,cuid:t.cuid,mtjCuid:t.mtjCuid,path:t.path,srcAppId:t.srcAppId,scene:t.scene},i=n.appLaunchScheme;if(i){var o=/^(.*):\/\/swan\/([^\/]+)([^\?]+)\??(.*)?/.exec(i),r=((o=o||[])[1],o[2]||""),a=o[3]||"",s=function(e){var t=e?e.split("&"):[],n={};if(t.forEach((function(e){var t=e.split("="),i=t[1]||"";n[t[0]]=decodeURIComponent(i)})),n.url&&/^https?%3a%2f%2f/i.test(n.url))for(var i in n)n[i]=decodeURIComponent(n[i]);return n}(o[4]);n.appKey=r,n.launchParams=s,n.launchPath=a,n.searchInfo={spid:s.spid},s.xst&&k.setXst(s.xst)}return n}}(e)),n&&!_.appInfo&&_.setData("appInfo",n)}this.onPrefetch=o,this.getAopData=function(){return i},this.on=function(e,n){t.on(e,n)}};t.exports=T})),window.define("159",(function(e,t,n,i,o,r,a,s,u,c,d,l,p,f,h,m,v,y,g,E,S,P,b){"use strict";var _=e(34),C=e(21),k=e(79),T=e(78);T.run(),function(){try{o.request({url:C.prefetchUrl})}catch(e){}}(),t.exports={getSdk:function(e){if("phone"===e)return _()},onPrefetch:function(e){try{k.onPrefetch(e)}catch(e){}},addPrefetchData:function(e){try{T.addPrefetchData(e)}catch(e){}}}}))}(__hacked);