var __hacked=window.__hacked||{global:window.global,Function:Function,setTimeout:setTimeout,setInterval:setInterval,setImmediate:setImmediate,eval:eval,requestAnimationFrame:requestAnimationFrame};!function(t){var e=t.global,n=t.Function,a=t.setTimeout,o=t.setInterval;t.setImmediate,t.requestAnimationFrame,t.swanGlobal,t.jsNative,t.masterManager,t._openSourceDebugInfo,t.System,t.Bdbox_aiapps_jsbridge,t.Bdbox_android_jsbridge,t.Bdbox_android_utils,t._naFile,t._naInteraction,t._naNetwork,t._naRouter,t._naSetting,t._naStorage,t._naUtils,t.globalThis;window.define("2",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";Component({properties:{enableOpacity:{type:Boolean,value:!0},delay:{type:Number,value:400},hideLoading:{type:Boolean,value:!1,observer:function(t){var e=this,n=this.data.enableOpacity;t&&n&&a((function(){e.setData({hidePageLoading:!0})}),this.data.delay||400)}}}})})),window.define("4",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{background:{type:String,value:"#fff"},contentBackground:{type:String,value:"#F2F3F5"},btnBackground:{type:String,value:"rgba(255, 255, 255, 0.6)"},btnColor:{type:String,value:"#525252"},isBtnBorder:{type:Boolean,value:!0},topBarOpacity:{type:Number,value:0},isContentBottom:{type:Boolean,value:!1},isContentPadding:{type:Boolean,value:!0},btnList:{type:Array,value:[]},isShowHome:{type:Boolean,value:!1},homeImg:{type:String,value:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3644746484,4268945824&fm=179&app=35&f=PNG?w=66&h=66&s=29417A6E9FABB3724E75910E0300E0C1"},locationIcon:{type:String,value:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3572542105,1282684257&fm=179&app=35&f=PNG?w=18&h=12"},city:{type:String,value:""},uniformStyle:{type:Object,value:null}},data:{statusBarHeight:0,navigationBarHeight:0},lifetimes:{ready:function(){var t=o.getSystemInfoSync(),e=t.statusBarHeight,n=t.navigationBarHeight;this.setData({statusBarHeight:e,navigationBarHeight:n})}},methods:{handleBtnTap:function(t){var e=t.currentTarget.dataset.eventType;this.triggerEvent("btnTap",{eventType:e})},handleHomeTap:function(t){this.triggerEvent("homeTap",t)},handleLocationTap:function(t){this.triggerEvent("locationTap",t)}}})})),window.define("6",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{}})})),window.define("8",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(9),C=(0,I.isLogin)();Component({properties:{eventName:{type:String,value:""},type:{type:String,value:"login"},dataset:{type:Object,value:""},dataMod:{type:String,value:""},ubcFrom:{type:String,value:""},autoMod:{type:Boolean,value:!0},position:{type:String,value:"relative"},needFlex:{type:Boolean,value:!1},zIndex:{type:[String,Number],value:"1"},needNewLog:{type:Boolean,value:!1}},methods:{baseHandle:function(t){var e=this.data,n=e.dataMod,a=e.autoMod,i=e.ubcFrom,r=e.needNewLog,s=this.data.dataset;n&&(s=Object.assign({},s||{},{mod:n}));var c={};try{c=JSON.parse(n)||{}}catch(t){c={}}if(a&&n&&c&&Object.keys(c).length){var u=i?{from:i}:{};r?o.$log.sendNew(c,"click",u):o.$log.send(c,"click",u)}return t.currentTarget.dataset=s,t.target.dataset=s,t},loginHandle:function(t){var e=this;if(t.eventName=this.data.eventName,t=this.baseHandle(t),"button"===this.data.type)return Object.assign(t,{isLogin:C}),void(this.data.eventName?this.dispatch("loginhandle",t):this.triggerEvent("loginhandle",t));(0,I.getLoginCode)().then((function(n){Object.assign(t,n,{isLogin:!0,change:!0!==C}),C=!0,e.data.eventName?(e.dispatch("loginsuccess",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginsuccess",t),e.triggerEvent("loginhandle",t))})).catch((function(n){Object.assign(t,n,{isLogin:!1}),e.data.eventName?(e.dispatch("loginfail",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginfail",t),e.triggerEvent("loginhandle",t))}))}}})})),window.define("13",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14)),C=t(42),x=t(40),_=t(9),D=i();Component({data:{isFromSecondFloor:D.globalData.isFromSecondFloor,isFromSearch:D.globalData.isFromSearch,isShowBack:!1,isShowHome:!1,isHeightVersion:!1},options:{addGlobalClass:!0},properties:{showCancel:{type:Boolean,value:!1},statusBarHeight:{type:Number,value:0},navigationBarHeight:{type:Number,value:0},backgroundImgTop:{type:String,value:""},backgroundImgAll:{type:String,value:""},background:{type:String,value:""},backType:{type:String,value:""},titleColor:{type:String,value:"#FFF"},customHeight:{type:Number,value:0},topBarOpacity:{type:Number,value:0},opacity:{type:Number,value:1},isAnimation:{type:Boolean,value:!1},isShowBackBg:{type:Boolean,value:!1},needPlace:{type:Boolean,value:!0},alwaysShowShare:{type:Boolean,value:!1},showShare:{type:Boolean,value:!1},shareImg:{tyue:String,value:"https://scenter.cdn.bcebos.com/operation_page/share-icon.png"},bigShare:{tyue:Boolean,value:!1},hideHome:{type:Boolean,value:!1},titleOpacity:{type:Number,value:1},isDarkBackBg:{type:Boolean,value:!1},isIos:!1},attached:function(){var t=getCurrentPages(),e=this.data.isFromSecondFloor,n=1===t.length&&!/^pages\/index\/index/.test(t[0].uri)&&!this.data.hideHome,a="ios"===(0,_.getSystemInfo)().platform;this.setData({isShowHome:!e&&n,isShowBack:!(!e&&n),isHeightVersion:(0,C.isHeightVersion)(),isIos:a})},methods:{onLeftTap:function(t){var e=t.target.dataset.action;"back"===e&&this.onBackClick(t),"home"===e&&this.onHomeClick(t),"cancel"===e&&this.onCancelClick()},onBackClick:function(){this.data.isFromSecondFloor&&1===getCurrentPages().length?o.exit():I.default.back()},onHomeClick:function(){var t,e=((null===(t=D.globalData)||void 0===t?void 0:t.systemInfo)||{}).host;(0,x.sendCount)({homeClick:1}),"baiduboxapp"===e&&(0,C.isGreaterVersion)("13.2.0")?o.openBdboxWebview({module:"appTab",action:"select",parameters:{item:"service"}}):I.default.goHome()},onCancelClick:function(){this.triggerEvent("cancel")},onShareTap:function(){this.triggerEvent("share")}}})})),window.define("14",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=I(t(15)),x=I(t(17)),_=I(t(33)),D=t(26),k={LOC_CITY_CODE:"cityCode",LOC_CITY_NAME:"city",LOC_LATITUDE:"latitude",LOC_LONGITUDE:"longitude",BD_LOC_LATITUDE:"mc_latitude",BD_LOC_LONGITUDE:"mc_longitude"};function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("?"),n=(0,D.queryString)(e[1]),a=(0,D.cloneDeep)(i().globalData.location),o=new RegExp("\\$\\{(".concat(Object.keys(k).join("|"),")\\}"));function r(t){for(;o.exec(t);)t=t.replace(new RegExp("\\$\\{".concat(RegExp.$1,"\\}"),"g"),"");return t}function s(t){for(;o.exec(t);)t=t.replace(new RegExp("\\$\\{".concat(RegExp.$1,"\\}"),"g"),a[k[RegExp.$1]]||"");return t}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.cityCode=e,e.length?/is_self_site=1/.test(t)?s(t):a.longitude?r(t):r(t=t.replace("${LOC_CITY_CODE}",a.cityCode).replace("${LOC_CITY_NAME}",a.city)):r(t)}return new Promise((function(t,e){n.bd_fw_com&&n.bd_fw_service?x.default.get(_.default.SWITCH_CITY_CODE,{data:{com:n.bd_fw_com,service:n.bd_fw_service,city_code:a.cityCode}}).then((function(e){e&&e.newcode?t(c(e.newcode)):t(c(""))})).catch((function(e){t(c(""))})):t(c(a.cityCode))}))}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"browser",s=i().globalData,c=s.xfrom,u=s.sfrom,d=t.split("?"),l=d[0],h=(0,D.queryString)(d[1])||{};2==+a?h.unencode=!1:"xcx"!==e&&1!=+a||(h.unencode=!0),Object.assign(h,{xfrom:c});var p=d[1]?"?".concat((0,D.urlParams)(h)):"";return new Promise((function(t,a){var i=Date.now();if("local"!==e){if("h5"===e){var s="?url=".concat(encodeURIComponent(l+p));return h.navBar&&(s+="&navBar=".concat(h.navBar)),void o.navigateTo({url:"/homes/webview/webview".concat(s),success:function(e){return t(e)},fail:function(t){return a((0,C.default)({url:s,type:"h5"},t))}})}if("xcx"===e){var d=l.slice(0,l.indexOf("/")),f=l.slice(l.indexOf("/"))+p;f="".concat(f+(p?"&":"?"),"enterT=").concat(i),-1===p.indexOf("xfrom")&&(f="".concat(f,"&xfrom=").concat(c));var g={};if(h.extraData)try{g=JSON.parse(h.extraData)}catch(t){g={}}if(!n){var m=getCurrentPages();n=m[m.length-1].xcxFrom}return g=Object.assign({},g,{xfrom:c,sfrom:u}),void o.navigateToSmartProgram({path:f,appKey:d,from:c,extraData:g,success:function(e){return t(e)},fail:function(t){return(0,D.textToast)(t.errMsg)}})}if("box"===e||"na"===e){var v={},w=l+p;if(w.startsWith("http"))v.module=r,v.action="open",v.parameters={url:w,forbidautorotate:1,simple:1,newbrowser:1};else{var b=l.replace(/^\w+:\/\//,"").split("/"),y=b[0],T="/".concat(b.slice(1).join("/"));v.parameters=h,v.authority=y,v.path=T}o.openBdboxWebview(Object.assign({},v,{success:function(e){return t(e)},fail:function(t){return(0,D.textToast)(t.errMsg)}}))}}else{var S="".concat(l+p+(p?"&":"?"));o.navigateTo({url:S,success:function(e){return t(e)},fail:function(t){return a((0,C.default)({url:S,type:"local"},t))}})}}))}var L=function(t){o.$log.send({url:t.url,code:t.errCode,msg:t.errMsg,type:t.type,module:"jump_error"},"system")},A={withEvent:function(t){var e=t.currentTarget.dataset.jumpUrl||"",n=t.currentTarget.dataset.jumpType||"",a=t.currentTarget.dataset.canalName||"",o=t.currentTarget.dataset.bubble||"",i=t.currentTarget.dataset.unencode||0;if(o&&x.default.get(_.default.AJAX_INDEX,{data:{src:t.currentTarget.dataset.icon,act:"bubble_click_note",channel_id:t.currentTarget.dataset.channelId}}),e&&n)return P(e).then((function(t){return E(t,n,a,i).catch(L)}))},to:function(t,e,n,a){return P(t).then((function(t){return E(t,e,n,0,a).catch(L)}))},back:function(){o.navigateBack()},goHome:function(){E("/pages/index/index","local").catch(L)},openNA:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};""!==t&&(t=(0,D.dataUrlPatch)(t),o.openNASmartProgram&&o.openNASmartProgram({path:t,query:e}))},openAppByURL:function(t){return new Promise((function(e,n){o.openAppByURL({url:t,success:function(t){return e(t)},fail:function(t){return n(t)}})}))}};n.default=A})),window.define("42",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isHeightVersion=function(){return C(o.getSystemInfoSync().swanNativeVersion,"2.28.0")>=0},n.isGreaterVersion=function(t){return C((0,I.getSystemInfo)().version,t)>=0};var I=t(9);function C(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var a=0;a<n;a++){var o=parseInt(t[a],10),i=parseInt(e[a],10);if(o>i)return 1;if(o<i)return-1}return 0}})),window.define("44",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{isSimpleMode:{type:Boolean,value:!1},orderInfo:{type:Object,value:null}}})})),window.define("46",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{meals:{type:Array,value:[],observer:function(t){var e=t.length>1?"可选团购":"团购详情";null==t||t.forEach((function(t){var e;null==t||null===(e=t.htmlStruct)||void 0===e||e.forEach((function(t){var e;null==t||null===(e=t.info)||void 0===e||e.forEach((function(t){t.priceFormat=(0,I.formatPrice)(null==t?void 0:t.price)}))}))})),this.setData({title:e,meals:t})}}},data:{title:"",selectedIndex:0},methods:{changeMeal:function(t){var e,n,a=null==t||null===(e=t.currentTarget)||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.index;!a&&0!==a||a===this.data.selectedIndex||(this.setData({selectedIndex:a}),this.triggerEvent("change",this.data.meals[a]))}}})})),window.define("48",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(49);Component({properties:{refundInfo:{type:Object,value:{},observer:function(t){var e=t.operatePeriod;e.forEach((function(t){t.operateTime&&(t.operateTime=(0,I.formatDate)(1e3*t.operateTime,"MM-DD hh:mm"))})),this.setData({refund:Object.assign(t,{operatePeriod:e})})}}}})})),window.define("49",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(50),C=t(51),x=t(52),_=t(53),D=t(54),k=t(55),P=t(56),E=t(57),L=t(58),A=t(59),O=t(60),N=t(61),R=t(63),B=t(64),j=t(65),U=t(66),M=t(67),F=t(62),H=t(68),G=t(69),$=t(70),q=t(71),V=t(72),Y=t(73),z=t(74),W=t(75),K=t(76),J=t(77);e.exports={isIos:I.isIos,getSystemInfo:C.getSystemInfo,isFullScreen:x.isFullScreen,getNavBarHeight:_.getNavBarHeight,tempFileToBase64:D.tempFileToBase64,isFunction:k.isFunction,isArray:P.isArray,isBoolean:E.isBoolean,debounce:L.debounce,throttle:A.throttle,makeUrl:O.makeUrl,cloneDeep:N.cloneDeep,get:R.get,getDateDiff:B.getDateDiff,getUrlQuery:j.getUrlQuery,promiseRetry:U.promiseRetry,delay:M.delay,isObject:F.isObject,dataType:H.dataType,compareVersion:G.compareVersion,formatDate:$.formatDate,deepAssign:q.deepAssign,promiseAllSettled:V.promiseAllSettled,runUntilMaxTime:Y.runUntilMaxTime,pxToRpx:z.pxToRpx,colorToRgba:W.colorToRgba,isNonEmptyObject:K.isNonEmptyObject,versionLessThan:J.versionLessThan}})),window.define("50",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(51).getSystemInfo;e.exports={isIos:function(){if(o)return-1<I().model.toLowerCase().indexOf("iphone");throw new Error("The isIos function must be used in the SWAN environment")}}})),window.define("51",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={getSystemInfo:function(){if(!o)throw new Error("The getSystemInfo function must be used in the SWAN environment");var t={};try{var e=i().globalData||{};t=e.sUSystemInfo||{};if(Object.keys(t).length)return t;if(t=o.getStorageSync("SU_SYSTEM_INFO")||{},Object.keys(t).length)return e.sUSystemInfo=t;try{(t=o.getSystemInfoSync()||{}).isWeb="web"===t.platform,t.isIos=-1<t.model.toLowerCase().indexOf("iphone")}catch(e){t={}}e.sUSystemInfo=t,o.setStorage({key:"SU_SYSTEM_INFO",data:t})}catch(e){}return t}}})),window.define("52",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(51).getSystemInfo;e.exports={isFullScreen:function(){if(!o)throw new Error("The isFullScreen function must be used in the SWAN environment");try{var t=I().model.toLowerCase();return["iphone x","iphone xr","iphone xs","iphone xs max","iphone 11","iphone 11 pro","iphone 11 pro max","iphone 12 mini","iphone 12","iphone 12 pro","iphone 12 pro max","iphone 13","iphone 13pro","iphone 13promax"].some((function(e){return t.includes(e)}))}catch(t){console.error("设备信息获取失败",t)}return!1}}})),window.define("53",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(51).getSystemInfo;e.exports={getNavBarHeight:function(){if(!o)throw new Error("The getNavBarHeight function must be used in the SWAN environment");var t=I();return t.statusBarHeight+t.navigationBarHeight}}})),window.define("54",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={tempFileToBase64:function(t){if(!o)return console.error("The tempFileToBase64 function must be used in the SWAN environment"),"";if("string"!=typeof t)return console.error("Type Error: tempFile must be a string"),"";if(!(n=t.split("/").pop()))return console.error("The Format Error: tempFile should be the local temporary file path"),"";var e=o.getFileSystemManager(),n="".concat(o.env.USER_DATA_PATH,"/").concat(n);try{return e.copyFileSync(t,n),e.readFileSync(n,"base64")}catch(t){return console.error(t,"copyFile fail)"),""}}}})),window.define("55",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={isFunction:function(t){return"function"==typeof t}}})),window.define("56",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={isArray:function(t){return Array.isArray(t)}}})),window.define("57",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={isBoolean:function(t){return"boolean"==typeof t}}})),window.define("58",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(55).isFunction;e.exports={debounce:function(t){var e,n,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,i=2<arguments.length?arguments[2]:void 0;if(!t||!C(t))throw new Error("The func argument cannot be empty and must be a function");function r(){for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return e&&clearTimeout(e),i&&s?(s=!1,n=t.apply(this,c)):e=a((function(){n=t.apply(this,c)}),o),n}var s=!0;return r.cancel=function(){clearTimeout(e),e=null},r}}})),window.define("59",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(55).isFunction;e.exports={throttle:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(!t||!I(t))throw new Error("The func argument cannot be empty and must be a function");var a=Date.now();return function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];if(n)return n=!1,t.apply(this,i);var s=Date.now();return e<=s-a&&(a=s,t.apply(this,i))}}}})),window.define("60",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={makeUrl:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=encodeURIComponent;return(""!==t?t.includes("?")?"".concat(t,"&"):"".concat(t,"?"):"")+Object.keys(e).map((function(t){return a(t)+"="+(n?a(e[t]):e[t])})).join("&").replace(/%20/g,"+")}}})),window.define("61",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,i=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var x=t(62).isObject;e.exports={cloneDeep:function t(e){if(!x(e))return e;var n=Array.isArray(e)?[]:{};return Object.entries(e).forEach((function(a){var o=(a=I(a,2))[0];a=a[1];x(e[o])?n[o]=t(a):n[o]=a})),n}}})),window.define("62",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(18));function C(t){return(C="function"==typeof Symbol&&"symbol"==(0,I.default)(Symbol.iterator)?function(t){return(0,I.default)(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":(0,I.default)(t)})(t)}e.exports={isObject:function(t){return"object"===C(t)&&null!==t}}})),window.define("63",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={get:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return(Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")).reduce((function(t,e){return(t||{})[e]}),t)||n}}})),window.define("64",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=[["seconds",1,"秒前"],["minutes",60,"分钟前"],["hours",3600,"小时前"],["day",86400,"天前"],["month",2592e3,"个月前"],["years",31104e3,"年前"]];e.exports={getDateDiff:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"day";if(!+t)return!1;var n=(Date.now()-t)/1e3;t=I.findIndex((function(t){return t[0]===e}))||4,t=(t=I.slice(0,t+1).filter((function(t){return n>=t[1]})))[t.length-1];return"".concat(Math.floor(n/t[1])).concat(t[2])}}})),window.define("65",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={getUrlQuery:function(t){try{var e=t.split("?")[1].split("&"),n={};return e.forEach((function(t){t=t.split("="),n[t[0]]=t[1]||""})),n}catch(t){return{}}}}})),window.define("66",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(27));function C(t,e,n,a,o,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,o)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function r(t){C(i,a,o,r,s,"next",t)}function s(t){C(i,a,o,r,s,"throw",t)}r(void 0)}))}}var _=t(67).delay;e.exports={promiseRetry:function(t){var e=Object.assign({num:0,time:0,context:void 0,resultValidator:function(){return!0}},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),n=e.num,a=e.time,o=e.context,i=e.resultValidator;return x(I.default.mark((function e(){var r,s,c,u,d=arguments;return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=d.length,s=new Array(r),c=0;c<r;c++)s[c]=d[c];case 1:return e.prev=1,e.next=4,t.apply(o,s);case 4:if(u=e.sent,i(u)){e.next=7;break}throw u;case 7:return e.abrupt("return",u);case 10:if(e.prev=10,e.t0=e.catch(1),n){e.next=16;break}throw e.t0;case 16:if(a)return e.next=19,_(a);e.next=19;break;case 19:if(n--){e.next=1;break}case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[1,10]])})))}}})),window.define("67",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";e.exports={delay:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){return a(e,t)}))}}})),window.define("68",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={dataType:function(t,e){return null===t&&"null"===e||void 0===t&&"undefined"===e||null!=t&&t.constructor.name.toLocaleLowerCase()===e.toLocaleLowerCase()}}})),window.define("69",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={compareVersion:function(){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split("."),n=(t=t.split("."),Math.max(e.length,t.length));e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var a=0;a<n;a++){var o=parseInt(e[a],10),i=parseInt(t[a],10);if(i<o)return 1;if(o<i)return-1}return 0}}})),window.define("70",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={formatDate:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"YYYY.MM.DD hh:mm:ss",a={"M+":(t=new Date(t)).getMonth()+1,"d+":t.getDate(),"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(e in/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("(".concat(e,")")).test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return n}}})),window.define("71",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(68).dataType,C=function t(e,n){if(e=e||(I(n,"array")?[]:{}),I(n,"object"))for(var a in n)n.hasOwnProperty(a)&&(e[a]=I(n[a],"object")?t(e[a],n[a]):n[a]);return e};e.exports={deepAssign:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(C,e[0])}}})),window.define("72",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(68).dataType;e.exports={promiseAllSettled:function(t){return I(t,"array")?Promise.all(t.map((function(t){return I(t,"promise")?new Promise((function(e){t.then((function(t){e({status:"fulfilled",value:t})})).catch((function(t){e({status:"rejected",value:t})}))})):Promise.resolve(new TypeError("Expected a promise"))}))):Promise.reject(new TypeError("arguments must be an iterator"))}}})),window.define("73",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(68).dataType;e.exports={runUntilMaxTime:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3e3;if(C(t,"promise"))return Promise.race([(e=n,new Promise((function(t,n){a((function(){n({code:99999,errMsg:"运行超时"})}),e)}))),t]);throw new TypeError("Expected a promise")}}})),window.define("74",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={pxToRpx:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1242,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;if("number"!=typeof t||"number"!=typeof e||"number"!=typeof t)throw new Error("param should be number");return+(750/e*parseInt(t,10)).toFixed(n)}}})),window.define("75",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={colorToRgba:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(t=t.toLowerCase(),!/^#([0-9a-f]{3}|[0-9a-f]{6})$/.test(t))throw new Error(t+"is not color");if("number"!=typeof e||e<0||1<e)throw new Error("opacity should be number, less than or equal to 1 and more then or equal to 0");if(4===t.length){for(var n="#",a=1;a<4;a+=1){var o=t.slice(a,a+1);n+=o+o}t=n}for(var i=[],r=1;r<7;r+=2)i.push(parseInt("0x".concat(t.slice(r,r+2)),16));return"RGBA(".concat(i.join(","),", ").concat(e,")")}}})),window.define("76",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={isNonEmptyObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)&&0<Object.keys(t).length}}})),window.define("77",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports={versionLessThan:function(t,e){for(var n=t.split(".").map((function(t){return parseInt(t,10)})),a=e.split(".").map((function(t){return parseInt(t,10)})),o=n.length,i=a.length,r=0;r<o||r<i;r++){var s=n[r]||0,c=a[r]||0;if(s!==c)return s<c}return!1}}})),window.define("79",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{order:{type:Object,value:{},observer:function(t){var e=t.origMoney,n=t.saleMoney,a=t.payMoney;this.setData({orderInfo:Object.assign(t,{origMoney:(0,I.formatPrice)(e),saleMoney:(0,I.formatPrice)(n),payMoney:(0,I.formatPrice)(a)})})}}},data:{orderInfo:{}},methods:{copy:function(t){var e=t.currentTarget.dataset.orderId;o.setClipboardData({data:e,success:function(){o.showToast({title:"内容已复制",icon:"none"})}})}}})})),window.define("81",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{notes:{type:String,value:""}}})})),window.define("83",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=t(49);Component({properties:{show:{type:Boolean,value:!1,observer:function(t,e){t!==e&&(t?this.show():this.close())}},zIndex:{type:Number,value:100},showCloseIcon:{type:Boolean,value:!0}},data:{showMask:!1,showPanel:!1},methods:{show:function(){this.setData({showMask:!0,showPanel:!0})},close:function(){var t=this;this.setData({showPanel:!1},(0,x.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.delay)(300);case 2:t.setData({showMask:!1});case 3:case"end":return e.stop()}}),e)}))))},closePanel:function(){this.triggerEvent("close")},handleTouchmove:function(){}}})})),window.define("85",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{showPanel:{type:Boolean,value:!1},phone:{type:String}},data:{phoneList:[]},methods:{handleNumber:function(t){var e=t.currentTarget.dataset.phone;this.handleCall(e)},handleCall:function(t){this.closePanel(),o.makePhoneCall({phoneNumber:t})},handlePhone:function(){o.$log.sendNew({module:"storephone"},"click");var t=this.properties.phone;if(t){var e=t.split(",");1!==e.length?this.setData({showPanel:!0,phoneList:e}):this.handleCall(t)}},closePanel:function(){this.setData({showPanel:!1})}}})})),window.define("87",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(19)),D=t(26),k=I(t(17)),P=I(t(33));Component({properties:{shop:{type:Object,value:{},observer:function(t){this.setData({shopInfo:t})}},params:{type:Object,value:{}}},data:{shopInfo:{},shopList:[],isShow:!1,showPanel:!1,phoneList:[]},lifetimes:{created:function(){var t;null!==(t=this.properties.shop)&&void 0!==t&&t.shopName||this.fetchShopList()}},methods:{handleNumber:function(t){var e=t.currentTarget.dataset.phone;this.handleCall(e)},handleCall:function(t){this.closePanelPhone(),o.makePhoneCall({phoneNumber:t})},handlePhone:function(t){o.$log.sendNew({module:"storephone"},"click");var e=t.currentTarget.dataset.phone;if(e){var n=e.split(",");1!==n.length?this.setData({showPanel:!0,phoneList:n}):this.handleCall(e)}},closePanelPhone:function(){this.setData({showPanel:!1})},handleLocation:function(t){var e=t.currentTarget.dataset.shopId,n=e?this.data.shopList.find((function(t){return t.shopId===e})):this.data.shopInfo,a=n.shopName,i=n.shopAddress,r=n.locationGCJ02,s=null==r?void 0:r.split("_"),c=(0,_.default)(s,2),u=c[0],d=c[1];o.openLocation({latitude:Number(d),longitude:Number(u),name:a,address:i})},handleShop:function(){o.$log.sendNew({module:"storelist"},"click"),this.fetchShopList(),this.setData({isShow:!0})},closePanel:function(){this.setData({shopList:[],isShow:!1})},fetchShopList:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,o,i,r,s,c,u,d,l,h,p;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.properties.params,a=n.appKey,o=n.skuId,i=n.isNeedLocation,r=t.properties.params,s=r.crd,c=r.cityCode,!i){e.next=8;break}return e.next=5,(0,D.getLocation)();case 5:u=e.sent,s="".concat(u.longitude,"_").concat(u.latitude),c="";case 8:return d={appKey:a,skuId:o,crd:s,cityCode:c},l=function(t){(0,D.textToast)(t.msg)},e.next=12,k.default.get(P.default.GOODS_NEARBY,{data:d}).catch(l);case 12:if(h=e.sent,null!=(p=h.shop_list)&&p.length){e.next=16;break}return e.abrupt("return");case 16:t.setData({shopList:p,shopInfo:Object.assign(p[0],{total:p.length},t.data.shopInfo)});case 17:case"end":return e.stop()}}),e)})))()}}})})),window.define("89",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{ticketInfo:{type:Array,value:[],observer:function(t){var e=t[0],n=e.expireTime,a=e.passStatus;this.setData({ticket:Object.assign(e,{expireTime:n}),isDisabled:a>10})}}},data:{isDisabled:!1,ticket:{}},methods:{copy:function(t){var e=t.currentTarget.dataset.uniqueStr;o.setClipboardData({data:e,success:function(){o.showToast({title:"内容已复制",icon:"none"})}})}}})})),window.define("91",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{detail:{type:String,value:"",observer:function(t){this.setData({htmlSnip:t.replace(/<br>/g,"").replace(/height: auto;/g,"max-width: 100vw;height: auto;").replace(/width: auto;/g,"max-width: 100vw;")})}}},data:{htmlSnip:""}})})),window.define("93",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";Component({properties:{show:{type:Boolean,observer:function(t){t&&this.setData({isShow:t})},value:!1},bgColor:{type:String,value:"#fff"},title:{type:String,value:""},isClose:{type:Boolean,value:!0},scrollMaxHeight:{type:Number,value:750},toast:{type:Object,observer:function(t){var e=this;t&&this.setData({toastInfo:Object.assign({},this.defaultToast,t)});var n=this.data.toastInfo,o=n.show,i=n.time;o?this.toastTimer=a((function(){e.setData({toastInfo:{show:!1}}),e.triggerEvent("toastend")}),i):clearTimeout(this.toastTimer)},value:{}}},defaultToast:{show:!1,text:"",time:4e3},toastTimer:null,data:{isShow:!1,toastInfo:{}},methods:{closeTap:function(){this.triggerEvent("close")},animationEndHandle:function(){var t=this.data.show;t||this.setData({isShow:t})}}})})),window.define("95",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{style:{type:Boolean,value:!0},show:{type:Boolean,value:!1},boxStyle:{type:String,value:"background-color:transparent"},titleStyle:{type:String,value:""},title:{type:String,value:"优惠券详情"},status:{type:Number,value:10},jumpType:{type:String,value:""},jumpUrl:{type:String,value:""},bottomPopUpData:{type:Object,value:{useTips:{},validTime:{},useRules:{}}},useTips:{type:Object,value:{title:"有效期",infoList:[{text:"xxxx",isShowCircle:!0}]}},validTime:{type:Object,value:{title:"过期时间1",infoList:[{text:"xxxx",isShowCircle:!0}]}},useRules:{type:Object,value:{title:"使用规则1",infoList:[{text:"xxxx1",isShowCircle:!0},{text:"xxxx",isShowCircle:!0}]}}},data:{},methods:{handleUse:function(t){this.triggerEvent("handleUse",{data:this.properties})},handlePopupBoxClose:function(){this.triggerEvent("handlePopupBoxClose",{data:this.properties})}}})})),window.define("97",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{style:{type:String,value:""},title:{type:String,value:""},status:{type:Number,value:10},couponList:{type:Object,value:{status:10}},jumpType:{type:String,value:""},jumpUrl:{type:String,value:""}},data:{jumpIcon:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2451391501,3745639509&fm=179&app=35&f=PNG?w=42&h=42&s=29413A6EBECE07740B54EC1A0300E091"},methods:{handleClickLeft:function(t){this.triggerEvent("handleClickCouponLeft",{data:t.data.coupon})},handleClickRight:function(t){this.triggerEvent("handleClickCouponRight",{data:t.data.coupon})},handleClickHeadRight:function(t){console.log(2222),this.triggerEvent("handleClickHeadRight",{data:t})}}})})),window.define("99",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26),C={10:"WAIT_USE",20:"USED",30:"EXPIRED"},x={WAIT_USE:(0,I.gzipImg)("https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png"),USED:(0,I.gzipImg)("https://scenter.cdn.bcebos.com/operation_page/coupon-bg-gray.png"),EXPIRED:(0,I.gzipImg)("https://scenter.cdn.bcebos.com/operation_page/coupon-bg-gray.png")},_={WAIT_USE:"",USED:(0,I.gzipImg)("https://b.bdstatic.com/searchbox/icms/searchbox/img/used.png"),EXPIRED:(0,I.gzipImg)("https://b.bdstatic.com/searchbox/icms/searchbox/img/expired.png")};Component({properties:{propName:{type:String,value:"val"},couponBgImage:{type:String,value:""},desc:{type:String,value:"满99减2"},tips:{type:String,value:""},tips1:{type:String,value:""},tipsImg:{type:String,value:(0,I.gzipImg)("https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=339565198,1198751094&fm=179&app=35&f=PNG?w=118&h=68&s=F9A15B7CC98367745CA3AFAE03003009")},tipsText:{type:String,value:""},discount:{type:Number,value:0},rightText:{type:String,value:""},priceText:{type:String,value:""},isShowButton:{type:Boolean,value:!1},sealImg:{type:String,value:""},status:{type:Number,value:10}},data:{STATUS_CONFIG:C,SEAL_IMAGE:_,COUPON_BG_IMAGE:x},methods:{handleClickRight:function(t){this.triggerEvent("handleClickRight",{data:this.properties})},handleClickLeft:function(t){this.triggerEvent("handleClickLeft",{data:this.properties})}}})})),window.define("101",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{propName:{type:String,value:"val"}}})})),window.define("103",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{propName:{type:String,value:"val",observer:function(t,e){console.log(t,e)}},title:{type:String,value:"如何使用券-测试"},info:{type:Array,value:[{symbol:"02",text:"",img:"",height:(0,I.vwUnit)(1264)},{symbol:"01",text:"",img:"",height:(0,I.vwUnit)(1922)}]}}})})),window.define("105",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{titleStyle:{type:String,value:""},useGuidData:{type:Object,value:{title:"",info:[]}},remindTitle:{type:String,value:"温馨提示"},remindInfoList:{type:Object,value:[{text:"",isShowCircle:!0}]},useRuleTitle:{type:Array,value:"使用规则"},useRuleInfoList:{type:Object,value:[{text:""},{text:""}]}}})})),window.define("107",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{title:{type:String,value:"订单信息"},titleStyle:{type:String,value:""},infoList:{type:Array,value:[{text:"",isShowCopy:!0,isShowCircle:!0,right:""},{text:"",isShowCircle:!0},{text:"",isShowCircle:!0}]}},methods:{setClipboardData:function(t){o.setClipboardData({data:t.target.dataset.text,success:function(t){o.showToast({title:"复制成功",icon:"none"})},fail:function(t){o.showToast({title:"复制失败",icon:"none"})}})}}})})),window.define("109",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{style:{type:String,value:""},rightSlot:{type:Boolean,value:!1},boxStyle:{type:String,value:""}}})})),window.define("111",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{title:{type:String,value:""},infoList:{type:Array,value:[{text:"",isShowCopy:!0},{text:""}]}},data:{},methods:{setClipboardData:function(t){o.setClipboardData({data:t.target.dataset.text,success:function(t){o.showToast({title:"复制成功",icon:"none"})},fail:function(t){o.showToast({title:"复制失败",icon:"none"})}})}}})})),window.define("113",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{propName:{type:String,value:"val",observer:function(t,e){console.log(t,e)}},symbol:{type:null,value:""},lists:{type:Array,value:[]},title:{type:String,value:""}}})})),window.define("115",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({})})),window.define("117",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{test:{type:String,value:1,observer:function(t){return"共计".concat(t,"商品 合计:")}},image:{type:String,value:""},title:{type:String,value:""},orderExplanation:{type:String,value:""},refundExplanation:{type:String,value:""},salePrice:{type:String,value:""},orderCount:{type:String,value:""},priceDesc:{type:String,value:""},originPrice:{type:String,value:""},price:{type:String,value:""}}})})),window.define("119",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{status:{type:String,value:"loading"},noMoreText:{type:String,value:""},needSecurityPadding:{type:Boolean,value:!1}}})})),window.define("121",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{src:{type:String,observer:function(t){this.setData({url:(0,I.gzipImg)(t)})}},fallback:{type:String,value:"",observer:function(t){this.setData({defaultImg:(0,I.gzipImg)(t)})}},mode:{type:String,value:"aspectFill"},lazyLoad:{type:Boolean,value:!0},imageMenuPrevent:{type:Boolean,value:!0},preview:{type:Boolean,value:!1}},data:{url:"",defaultImg:(0,I.gzipImg)("https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1429913406,3649347793&fm=179&app=35&f=PNG?w=180&h=180&s=398C3C724B6247201EFC91CE0300E0B1")}})})),window.define("123",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({options:{addGlobalClass:!0},properties:{title:{type:String,value:""},showTitle:{type:String,value:"0"},titleColor:{type:String,value:"#000"},jumpType:{type:String,value:""},jumpUrl:{type:String,value:""},withPadding:{type:Boolean,value:!1},withBottomPadding:{type:Boolean,value:!0},canalName:{type:String,value:""},linkTexts:{type:Array,value:[]},bgImg:{type:String,value:""},ubcType:{type:String,value:"newHsh"}},attached:function(){this.setData({defaultTitleLog:JSON.stringify({module:this.data.channel,title:this.data.title,apptype:this.data.jumpType,url:this.data.jumpUrl,pos:"title"})})},methods:{onTitleClick:function(t){I.default.withEvent(t)}}})})),window.define("125",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({externalClasses:["external-class"],properties:{perImgList:{type:Array,value:[]}}})})),window.define("127",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{title:{type:String,value:""},tag:{type:String,value:""},salePrice:{type:Number,value:0},saleNum:{type:String,value:""},symbol:{type:String,value:"¥"}}})})),window.define("129",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{src:{type:String,value:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png"},desc:{type:String,value:""},tips:{type:String,value:""},tipsImg:{type:String,value:(0,I.gzipImg)("https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=339565198,1198751094&fm=179&app=35&f=PNG?w=118&h=68&s=F9A15B7CC98367745CA3AFAE03003009")},tipsText:{type:"",value:""},discount:{type:Number,value:9},bgImg:{type:Number,value:(0,I.gzipImg)("http://t10.baidu.com/it/u=2567865867,193434292&fm=179&app=35&f=PNG?w=540&h=271&s=BD2E777E4B23472418C1D9DA0300E030")}}})})),window.define("131",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{src:{type:String,value:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png"},desc:{type:String,value:"111"},tips:{type:String,value:""},tipsImg:{type:String,value:(0,I.gzipImg)("https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=339565198,1198751094&fm=179&app=35&f=PNG?w=118&h=68&s=F9A15B7CC98367745CA3AFAE03003009")},tipsText:{type:String,value:""},discount:{type:Number,value:9},rightText:{type:Number,value:""}}})})),window.define("133",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14)),C=t(26),x=t(134);Component({properties:{show:{type:Boolean,default:!0},bgImage:{type:String,value:""},rightArrowImg:{type:String,value:(0,C.gzipImg)(x.RIGHT_ARROW)},leftArrowImg:{type:String,value:(0,C.gzipImg)(x.LEFT_ARROW)}},data:{opacity:1,visibility:"hidden",translateY:"100%",rightArrowImg:"https://b.bdstatic.com/searchbox/icms/searchbox/img/used.png",leftArrowImg:"https://b.bdstatic.com/searchbox/icms/searchbox/img/used.png",title:""},observers:{show:function(t){t&&this.setData({visibility:"visible",opacity:1,translateY:0})}},methods:{commonJump:function(t){I.default.withEvent(t)}}})})),window.define("134",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RIGHT_ARROW=n.LEFT_ARROW=void 0;n.LEFT_ARROW="http://t10.baidu.com/it/u=1251670953,3461103886&fm=179&app=35&f=PNG?w=48&h=24";n.RIGHT_ARROW="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=255196168,3858078965&fm=179&app=35&f=PNG?w=48&h=24"})),window.define("136",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({options:{addGlobalClass:!0},properties:{banner:{type:Object,value:{}},style:{type:String,value:"padding: 0 2.415vw; height: 23.833vw"}},data:{defaultLog:JSON.stringify({module:"bann"})},methods:{itemClick:function(t){this.data.banner.preview?this.previewImage(t):I.default.withEvent(t)},onSwiperChange:function(t){var e=t.detail.current,n=t.currentTarget.dataset.dataPath;this.setData(n+".selected",e)},previewImage:function(t){var e,n,a=null===(e=t.currentTarget)||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.index,i=this.data.banner.value,r=i.map((function(t){return t.img}));o.previewImage({urls:r,current:i[a].img})}}})})),window.define("138",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},methods:{toTop:function(){o.pageScrollTo({scrollTop:0,duration:300})}}})})),window.define("140",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(14)),D=I(t(141)),k=t(144),P=t(31),E=t(26),L={"homes/coupon_page/index":"mt","channels/recharge/pages/index/index":"recharge","homes/half-price-day/index":"dpch","homes/fresh-focus/index":""};Component((0,D.default)({properties:{isRepurchase:{type:String,value:"0",observer:function(t){"1"===t&&(this.setData({isRepurchase:t}),this.initData())}}},data:{showRepurchasePopup:!1,redPacketImg:"https://search-operate.cdn.bcebos.com/1a79a14fe59c35dc94c9cca9b8eab054.png",close:"https://search-operate.cdn.bcebos.com/6429e77e593f45d1299cd0b9a4fea489.png",coupon:null},attr:{show:!1},initData:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,o,i;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,k.getZidReTry)(),(0,k.getJtData)(P.FENGKONG_PARAMS.HSH)]).catch((function(){return(0,E.textToast)("请求失败，请稍后再试哦~")}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return a={zid:n[0],jt:n[1]},o=(0,E.getCurrentPagePath)(),i=L[o],e.abrupt("return",t.$http.post(t.$api.GET_COUPON,{data:{receive_source:i,zid:a.zid||"",jt:a.jt||""}}).then((function(e){e?(t.setData({showRepurchasePopup:!0,coupon:e}),t.sendLog("fresh_fugouquan_pop","show")):t.triggerEvent("close")})).catch((function(e){t.triggerEvent("close"),10604!==e.code&&(0,E.textToast)(e.msg)})));case 9:case"end":return e.stop()}}),e)})))()},methods:{clickModalClose:function(){this.sendLog("fresh_fugouquan_pop_close","click"),this.setData({showRepurchasePopup:!1}),this.triggerEvent("close")},commonJump:function(t){var e=t.currentTarget.dataset,n=e.jumpType,a=e.jumpUrl;this.sendLog("fresh_fugouquan_pop","click"),_.default.to(a,n),_.default.withEvent(t)},sendLog:function(t,e){o.$log.sendNew({module:t},e)}}}))})),window.define("141",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O(t),N(t),R(t),t};var C=I(t(14)),x=I(t(17)),_=I(t(33)),D=I(t(11)),k=I(t(142)),P=t(26),E=t(40),L=i(),A=function(t,e,n){o.$log.sendNew(t,e,{value:n})};function O(t){var e=L.globalData.systemInfo,n=e.statusBarHeight,a=e.navigationBarHeight;t.data=Object.assign({},{statusBarHeight:n,navigationBarHeight:a},t.data||{})}function N(t){t.$app=L,t.$api=_.default,t.$http=x.default,t.$jump=C.default,t.$storage=D.default,t.$location=k.default,t.commonJump=(0,P.throttle)((function(t){C.default.withEvent(t)}),500),t.commonJumpBack=function(t){C.default.back()},t.$showErrorPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.setData({rendered:!0,showErrorPage:!0,errType:t})},t.$showLogin=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setData({showLogin:t})},t.commonImageError=function(t){var e=t.target.dataset.src||"",n=t.detail.errMsg;o.$log.send({module:"image_error",url:e,msg:n},"system")},t.commonObserver=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.9],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.createIntersectionObserver(this,{thresholds:e,selectAll:!0}).relativeToViewport();a&&a.disconnect(),a.observe(t,(function(t){var e=t.dataset,a=e.ubcShow,o=e.id,i={};try{i=JSON.parse(a)||{}}catch(t){(0,E.reportError)({type:E.errorType.UBC_JSON_FAIL,msg:"埋点数据json格式不对",extra:{mod:a}})}var r=i.module;delete i.module;var s=o||t.id;n[s]||(n[s]=!0,A(i,"show",r))}))}}function R(t){t.mixins&&t.mixins.length&&t.mixins.forEach((function(e){Object.keys(e).forEach((function(n){"function"==typeof e[n]&&(void 0===t[n]?t[n]=e[n]:console.log("[".concat(n,"] 已经被用户声明，mixins中的无法生效！")))}))}))}})),window.define("144",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getZidReTry=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Promise((function(e,n){!function t(o){i.getCommonSysInfo({success:function(t){e(null==t?void 0:t.zid)},fail:function(e){o>0?a((function(){t(o-1)}),0):n(e)}})}(t)}))},n.getJtData=function(t){x||function(t){C.init(t),x=!0}(t);return new Promise((function(t){C.getDataV2((function(e){t(e.Token)}))}))};var C=t(145),x=!1})),window.define("145",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x,_,D=t(10)(t(18)),k=["hasOwnProperty","propertyIsEnumerable","DataView","constructor","ver","appKey","000","ios","dataApp","getCommonSysInfo","cuid","zid","getZidInfo","slice","route","1.0","floor","random","pow","assign","imei","hgzAs","type","swanInfo","startAccelerometer","onAccelerometerChange","onDeviceMotionChange","gamma","shift","aid","Token","getData","getDataV2","defineProperty","length","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","forEach","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=","charCodeAt","keyStr","charAt","indexOf","fromCharCode","utf8Decode","replace","concat","40$","setStorageSync","test","testValue","removeStorageSync","substr","getStorageSync","toString","encrypt","decode","time","toLocaleLowerCase","now","0000","string","app_key","action_url","browserURL","stringify","encode","request","POST","application/x-www-form-urlencoded","data","undefined","error","abort","CODED--v20","ens","then","oct","catch","browser_url","app_view","send_interval","getSystemInfoSync","platform","https://sfp.safe.baidu.com/sfp/v1/rd","getTime","zidAndCuid","$1,$2,$3,$4,$5,$6,$7,$8","split","push","join","Geckodriver","prototype"];x=k,_=417,function(t){for(;--t;)x.push(x.shift())}(++_);var P=function(t,e){return k[t-=0]};function E(t,e,n){return e in t?Object[P("0x0")](t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(t){for(var e=1;e<arguments[P("0x1")];e++){var n=null!=arguments[e]?arguments[e]:{},a=Object[P("0x2")](n);"function"==typeof Object[P("0x3")]&&(a=a.concat(Object.getOwnPropertySymbols(n)[P("0x4")]((function(t){return Object[P("0x5")](n,t)[P("0x6")]})))),a[P("0x7")]((function(e){E(t,e,n[e])}))}return t}var A={keyStr:P("0x8"),encode:function(t){var e,n,a,o,i,r,s,c="",u=0;for(t=A.utf8Encode(t);u<t[P("0x1")];)o=(e=t[P("0x9")](u++))>>2,i=(3&e)<<4|(n=t[P("0x9")](u++))>>4,r=(15&n)<<2|(a=t.charCodeAt(u++))>>6,s=63&a,isNaN(n)?r=s=64:isNaN(a)&&(s=64),c=c+this[P("0xa")][P("0xb")](o)+this[P("0xa")][P("0xb")](i)+this.keyStr[P("0xb")](r)+this[P("0xa")][P("0xb")](s);return c},decode:function(t){var e,n,a,o,i,r,s="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t[P("0x1")];)e=this.keyStr.indexOf(t[P("0xb")](c++))<<2|(o=this[P("0xa")][P("0xc")](t.charAt(c++)))>>4,n=(15&o)<<4|(i=this[P("0xa")][P("0xc")](t[P("0xb")](c++)))>>2,a=(3&i)<<6|(r=this[P("0xa")][P("0xc")](t.charAt(c++))),s+=String.fromCharCode(e),64!==i&&(s+=String[P("0xd")](n)),64!==r&&(s+=String[P("0xd")](a));return A[P("0xe")](s)},utf8Encode:function(t){t=t[P("0xf")](/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var a=t[P("0x9")](n);a<128?e+=String[P("0xd")](a):(127<a&&a<2048?e+=String.fromCharCode(a>>6|192):(e+=String[P("0xd")](a>>12|224),e+=String[P("0xd")](a>>6&63|128)),e+=String[P("0xd")](63&a|128))}return e},utf8Decode:function(t){for(var e="",n=0,a=0,o=0,i=0;n<t.length;)(a=t[P("0x9")](n))<128?(e+=String[P("0xd")](a),n++):191<a&&a<224?(o=t[P("0x9")](n+1),e+=String[P("0xd")]((31&a)<<6|63&o),n+=2):(o=t[P("0x9")](n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&i),n+=3);return e}};function O(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function N(t,e,n,a,o,i){return O((r=O(O(e,t),O(a,i)))<<(s=o)|r>>>32-s,n);var r,s}function R(t,e,n,a,o,i,r){return N(e&n|~e&a,t,e,o,i,r)}function B(t,e,n,a,o,i,r){return N(e&a|n&~a,t,e,o,i,r)}function j(t,e,n,a,o,i,r){return N(e^n^a,t,e,o,i,r)}function U(t,e,n,a,o,i,r){return N(n^(e|~a),t,e,o,i,r)}function M(t,e){var n,a,o,i,r;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,c=-271733879,u=-1732584194,d=271733878;for(n=0;n<t.length;n+=16)c=U(c=U(c=U(c=U(c=j(c=j(c=j(c=j(c=B(c=B(c=B(c=B(c=R(c=R(c=R(c=R(o=c,u=R(i=u,d=R(r=d,s=R(a=s,c,u,d,t[n],7,-680876936),c,u,t[n+1],12,-389564586),s,c,t[n+2],17,606105819),d,s,t[n+3],22,-1044525330),u=R(u,d=R(d,s=R(s,c,u,d,t[n+4],7,-176418897),c,u,t[n+5],12,1200080426),s,c,t[n+6],17,-1473231341),d,s,t[n+7],22,-45705983),u=R(u,d=R(d,s=R(s,c,u,d,t[n+8],7,1770035416),c,u,t[n+9],12,-1958414417),s,c,t[n+10],17,-42063),d,s,t[n+11],22,-1990404162),u=R(u,d=R(d,s=R(s,c,u,d,t[n+12],7,1804603682),c,u,t[n+13],12,-40341101),s,c,t[n+14],17,-1502002290),d,s,t[n+15],22,1236535329),u=B(u,d=B(d,s=B(s,c,u,d,t[n+1],5,-165796510),c,u,t[n+6],9,-1069501632),s,c,t[n+11],14,643717713),d,s,t[n],20,-373897302),u=B(u,d=B(d,s=B(s,c,u,d,t[n+5],5,-701558691),c,u,t[n+10],9,38016083),s,c,t[n+15],14,-660478335),d,s,t[n+4],20,-405537848),u=B(u,d=B(d,s=B(s,c,u,d,t[n+9],5,568446438),c,u,t[n+14],9,-1019803690),s,c,t[n+3],14,-187363961),d,s,t[n+8],20,1163531501),u=B(u,d=B(d,s=B(s,c,u,d,t[n+13],5,-1444681467),c,u,t[n+2],9,-51403784),s,c,t[n+7],14,1735328473),d,s,t[n+12],20,-1926607734),u=j(u,d=j(d,s=j(s,c,u,d,t[n+5],4,-378558),c,u,t[n+8],11,-2022574463),s,c,t[n+11],16,1839030562),d,s,t[n+14],23,-35309556),u=j(u,d=j(d,s=j(s,c,u,d,t[n+1],4,-1530992060),c,u,t[n+4],11,1272893353),s,c,t[n+7],16,-155497632),d,s,t[n+10],23,-1094730640),u=j(u,d=j(d,s=j(s,c,u,d,t[n+13],4,681279174),c,u,t[n],11,-358537222),s,c,t[n+3],16,-722521979),d,s,t[n+6],23,76029189),u=j(u,d=j(d,s=j(s,c,u,d,t[n+9],4,-640364487),c,u,t[n+12],11,-421815835),s,c,t[n+15],16,530742520),d,s,t[n+2],23,-995338651),u=U(u,d=U(d,s=U(s,c,u,d,t[n],6,-198630844),c,u,t[n+7],10,1126891415),s,c,t[n+14],15,-1416354905),d,s,t[n+5],21,-57434055),u=U(u,d=U(d,s=U(s,c,u,d,t[n+12],6,1700485571),c,u,t[n+3],10,-1894986606),s,c,t[n+10],15,-1051523),d,s,t[n+1],21,-2054922799),u=U(u,d=U(d,s=U(s,c,u,d,t[n+8],6,1873313359),c,u,t[n+15],10,-30611744),s,c,t[n+6],15,-1560198380),d,s,t[n+13],21,1309151649),u=U(u,d=U(d,s=U(s,c,u,d,t[n+4],6,-145523070),c,u,t[n+11],10,-1120210379),s,c,t[n+2],15,718787259),d,s,t[n+9],21,-343485551),s=O(s,a),c=O(c,o),u=O(u,i),d=O(d,r);return[s,c,u,d]}function F(t){var e,n="",a=32*t[P("0x1")];for(e=0;e<a;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function H(t){var e,n=[];for(n[(t[P("0x1")]>>2)-1]=void 0,e=0;e<n[P("0x1")];e+=1)n[e]=0;var a=8*t[P("0x1")];for(e=0;e<a;e+=8)n[e>>5]|=(255&t[P("0x9")](e/8))<<e%32;return n}function G(t){var e,n,a="";for(n=0;n<t.length;n+=1)e=t[P("0x9")](n),a+="0123456789abcdef"[P("0xb")](e>>>4&15)+"0123456789abcdef"[P("0xb")](15&e);return a}function $(t){return unescape(encodeURIComponent(t))}function q(t){return F(M(H(e=$(t)),8*e.length));var e}function V(t,e){return function(t,e){var n,a,o=H(t),i=[],r=[];for(i[15]=r[15]=void 0,16<o.length&&(o=M(o,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],r[n]=1549556828^o[n];return a=M(i[P("0x10")](H(e)),512+8*e[P("0x1")]),F(M(r[P("0x10")](a),640))}($(t),$(e))}function Y(t,e,n){return e?n?V(e,t):G(V(e,t)):n?q(t):G(q(t))}var z,W,K={},J={},Q=P("0x11"),X="",Z=function(){try{if(!r)return!1;try{return r[P("0x12")](P("0x13"),P("0x14")),r[P("0x15")]("test"),!0}catch(t){return!1}}catch(t){return!1}}(),tt=function(t){for(var e="";e[P("0x1")]<t;)e+=Math.ceil(9*Math.random());return e[P("0x16")](0,t)},et=function(){var t=Z?r[P("0x17")]("s"):J.s;return t||(t=Date.now()[P("0x18")]()+tt(11),Z?r[P("0x12")]("s",t):J.s=t),t},nt=function(){return Z?r[P("0x17")]("um"):J.um},at=function(){return Z?r[P("0x17")](P("0x19")):X},ot=function(t){return t[P("0x1")]?JSON.parse(A[P("0x1a")](t)):{}},it=function(t){var e=t.um,n=t[P("0x1b")],a=t.rm,o=t[P("0x19")],i=n+a;return e&&(i+=e),o&&(i+=o),Y(Y(i)[P("0x1c")]()).toLocaleLowerCase().slice(0,10)},rt=function(t,e){var n=nt(),a=at(),o=e?e+"":Date[P("0x1d")]()[P("0x18")](),i=tt(4),r=Q+(t||P("0x1e"))+et()+o+i;return r[P("0x1")],n&&(r+=P("0x1f")==(0,D.default)(n)?n:""),a&&(r+="string"==typeof a?a:""),r+it(L({um:n,time:o,rm:i},a?{encrypt:a}:{}))},st=function(t){var e=ot(t||""),n=e[P("0x20")],a=e[P("0x21")],o=e.browser_url,i=e.app_view,r=e.send_interval,s=rt(n);return K={Token:s,appKey:n,actionURL:a,browserURL:o,appView:i,sendIntervals:r}},ct=function(t,e,n){var a=n[P("0x19")],o=n.um,i=t,r=tt(4),s=Q+(e||P("0x1e"))+et()+i+r;return s[P("0x1")],o&&(s+=P("0x1f")==(0,D.default)(o)?o:""),a&&(s+=P("0x1f")==(0,D.default)(a)?a:""),s+it(L({um:o,time:i,rm:r},a?{encrypt:a}:{}))},ut=function(t){for(var e="",n=0;n<t[P("0x1")];n++){var a=t.charCodeAt(n),o=n%32;e+=a<=122&&41<=a?122<a+o?String[P("0xd")](40+a-122+o):String.fromCharCode(a+o):String[P("0xd")](t.charCodeAt(n))}return e},dt=function(t,e,n){(function(t){var e=K[P("0x22")],n=JSON[P("0x23")](t),o=ut(A.encode(n));if(r)return new Promise((function(t,n){clearTimeout(W),W=a((function(){z&&z[P("0x2b")](),t()}),3e3),z=r[P("0x25")]({url:e,method:P("0x26"),data:"c="+encodeURIComponent(P("0x2c")+o),header:{"content-type":P("0x27")},success:function(e){var n=e.data[P("0x28")];if(n&&null!==n.id&&P("0x29")!==n.id&&void 0!==n.id){var a=n.id,o=n[P("0x2d")]||at();Z?r.setStorageSync("um",a):J.um=a,Z?r[P("0x12")]("encrypt",o):X=o,t({um:a,encrypt:o})}else t()},fail:function(t){console.error(t),n()}})}))})(t)[P("0x2e")]((function(a){n(ct(t[P("0x2f")],e,a||{encrypt:at(),um:nt()}))}))[P("0x30")]((function(){n(ct(t.oct,e,{encrypt:at(),um:nt()}))}))},lt=function(t,e){var n,a,o=ot(e||""),i=o[P("0x20")],r=o[P("0x21")],s=o[P("0x31")],c=o[P("0x32")],u=o[P("0x33")];n=i,a=function(e){t(K={Token:e,appKey:i,actionURL:r,browserURL:s,appView:c,sendIntervals:u})},xt()[P("0x2e")]((function(t){var e=_t(t);dt(e,n,a)}))[P("0x30")]((function(){var t=_t({});dt(t,n,a)}))},ht=function(){if(r)return"ios"===r[P("0x34")]()[P("0x35")]?"1":"0"};var pt={};pt.startLoadTime=(new Date)[P("0x37")](),pt[P("0x38")]={},pt.BI={},pt.b={ios:function(){}},pt.BI[40]=pt.b.ios();var ft=function(t){var e,n,a=[];e=(n=t,n+function(t,e){var n="";if(t<e)for(var a=0;a<e-t;a++)n+="0";return n}(n[P("0x1")],32)+"")[P("0xf")](/^(\S{4})(\S{4})(\S{4})(\S{4})(\S{4})(\S{4})(\S{4})(\S{4})$/,P("0x39"))[P("0x3a")](",");for(var o=0;o<e[P("0x1")];o++)a[P("0x3b")](parseInt(e[o],2)[P("0x18")](16));return a[P("0x3c")]("")},gt=function(t){var e=ft(function(){var t=[],e="";e+=p&&(p.webdriver||p[P("0x3d")]||p.geckodriver)?"1":"0";var n=function(t,e){Object[P("0x3e")][P("0x3f")].call(t,e)&&Object[P("0x3e")][P("0x40")].call(t,e)},a=function(t,e){return Object[P("0x5")](t,e).writable},o=function(t,e){return Object[P("0x5")](t,e).configurable};t[P("0x3b")]((function(){var t=P("0x41");n(this,t)&&a(this,t)&&o(this,t)})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){})),t[P("0x3b")]((function(){Int8Array[P("0x3e")][P("0x42")]!==Int8Array&&n(Int8Array.prototype,P("0x42"))&&!a(Int8Array[P("0x3e")],P("0x42"))&&o(Int8Array[P("0x3e")],P("0x42"))})),t[P("0x3b")]((function(){})),t[P("0x3b")]((function(){Uint16Array[P("0x3e")][P("0x42")]!==Uint16Array&&n(Uint16Array[P("0x3e")],P("0x42"))&&!a(Uint16Array[P("0x3e")],P("0x42"))&&o(Uint16Array.prototype,P("0x42"))})),t[P("0x3b")]((function(){})),t[P("0x3b")]((function(){Uint32Array[P("0x3e")][P("0x42")]!==Uint32Array&&n(Uint32Array[P("0x3e")],P("0x42"))&&!a(Uint32Array[P("0x3e")],P("0x42"))&&o(Uint32Array[P("0x3e")],"constructor")})),t[P("0x3b")]((function(){})),t[P("0x3b")]((function(){Uint8Array[P("0x3e")][P("0x42")]!==Uint8Array&&n(Uint8Array[P("0x3e")],P("0x42"))&&!a(Uint8Array.prototype,"constructor")&&o(Uint8Array[P("0x3e")],P("0x42"))})),t.push((function(){})),t[P("0x3b")]((function(){Uint8ClampedArray.prototype[P("0x42")]!==Uint8Array&&n(Uint8ClampedArray[P("0x3e")],"constructor")&&!a(Uint8ClampedArray[P("0x3e")],P("0x42"))&&o(Uint8ClampedArray.prototype,P("0x42"))})),t[P("0x3b")]((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t[P("0x3b")]((function(){return"0"})),t.push((function(){return"0"})),t[P("0x3b")]((function(){return"0"}));for(var i=0;i<t[P("0x1")];i++)try{var r;e+="0"===(r=t[i]())?r:"1"}catch(t){e+="0"}return e}())||"",n=t.ak||"",a=t[P("0x43")]||"",o=t[P("0x44")]||"",i=function(t,e){for(var n=0;n<e;n++)t+="0";return t.substr(0,e)},r=function(t,e,n){if(n&&n<t)return n+"";for(var a=0;a<e;a++)t="0"+t;return t[P("0x16")](-e)},s=["02",P("0x45"),r(pt.b[P("0x46")](),1),r(o[P("0x1")],1,9),i(o,9),r(n.length,2,20),i(n,20),r(a[P("0x1")],2,16),i(a,16),r(e[P("0x1")],1,8),i(e,8),r(""[P("0x1")],2,50),i("",50),r(""[P("0x1")],3),""],c=s[P("0x3c")]("")[P("0x1")];return s[1]=(P("0x45")+c)[P("0x16")](-3),s[P("0x3c")]("")},mt={},vt={},wt={},bt=0,yt=[],Tt=[],St=0,It=function(){var t=st(wt[P("0x47")])[P("0x44")];return gt({appKey:t,ak:wt.ak})},Ct=function(t,e){r[P("0x48")]({success:function(e){e[P("0x49")]!==mt[P("0x49")]||(e[P("0x4a")],P("0x4a")),Object.assign(mt,e),t(e)},fail:function(t){console[P("0x2a")]("getCommonSysInfo",t),e(t)}})},xt=function(){return new Promise((function(t,e){r[P("0x4b")]?r[P("0x4b")]({eventId:2040,eventInfo:"",success:function(n){var a;(a=P("0x1f")==(0,D.default)(n)?{zid:n}:n).zid,P("0x4a"),Object.assign(mt,a),a[P("0x4a")]?t(a):Ct(t,e)},fail:function(n){console[P("0x2a")]("getZidInfo",n),Ct(t,e)}}):r[P("0x48")]?Ct(t,e):e()}))},_t=function(t){var e,n,a={17:"",24:"",25:"",40:ht(),42:It(),53:"1",54:"",ve:P("0x4e"),ap:"",to:"",ovisit:(e=getCurrentPages(),n=[],e[P("0x4c")](e[P("0x1")]-20).forEach((function(t,e){n[P("0x3b")](E({},t[P("0x4d")],e))})),n),osa:yt,osm:Tt,oct:(new Date).getTime(),ononce:Math[P("0x4f")](Math[P("0x50")]()*Math[P("0x51")](10,6))+""};return Object[P("0x52")](vt,wt,t),Object[P("0x2")](vt).map((function(t){if(-1!==t.indexOf("cuid")||"c"===t)a[25]=vt[P("0x49")]||vt.c||"";else if(-1!==t.indexOf(P("0x4a")))a[24]=vt.zid||"";else if(-1!==t[P("0xc")](P("0x53")))a[54]=vt[P("0x53")]||"";else if("dataApp"===t){var e=st(vt.dataApp)[P("0x44")];a.ap=e,a.to=rt(e,a.oct)}else a[t]=vt[t]})),a},Dt=function(t){var e,n,a,o;e=t,n=K[P("0x22")],a=JSON[P("0x23")](e),o=ut(A[P("0x24")](a)),r&&r[P("0x25")]({url:n,method:P("0x26"),data:"c="+encodeURIComponent("CODED--v20"+o),header:{"content-type":P("0x27")},success:function(t){var e=t[P("0x28")][P("0x28")];if(e&&null!==e.id&&P("0x29")!==e.id&&void 0!==e.id){var n=e.id,a=e.ens||at();Z?r[P("0x12")]("um",n):J.um=n,Z?r[P("0x12")](P("0x19"),a):X=a}return!0},fail:function(t){return console[P("0x2a")](t),!1}})},kt=function(t){if(5<(bt+=1))return null;var e=_t(t);Dt(e),bt<2&&function(t,e){if(r){var n=JSON[P("0x23")](t),a=ut(A[P("0x24")](n));r.request({url:P("0x36"),method:P("0x26"),data:"c="+encodeURIComponent(P("0x2c")+a),header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var n=t[P("0x28")];e&&e(n)},fail:function(t){return console[P("0x2a")](t),!1}})}}(e,(function(t){return t}))},Pt=function(t,e,n){P("0x54")===e&&n(t.zid||""),kt(t)};function Et(t){var e=t[P("0x55")],n=t.cb,a=t[P("0x56")];e&&P("0x54")===e?Pt(a,P("0x54"),n):Pt(a)}var Lt=function(t,e){var n,a;n=t,a=e,xt()[P("0x2e")]((function(t){Et({type:n,cb:a,swanInfo:L({},t)})})).catch((function(){Et({type:n,cb:a,swanInfo:{}})}))},At=function(t){a((function(){mt.cuid&&mt[P("0x4a")]||Lt()}),t)},Ot={init:function(t){return!(!t||!t[P("0x5c")]||(r[P("0x57")]({interval:"ui"}),r[P("0x58")]((function(t){var e=t.x,n=t.y,a=t.z;yt[P("0x3b")](""[P("0x10")](e,",")[P("0x10")](n,",")[P("0x10")](a,",")[P("0x10")](Date[P("0x1d")]()[P("0x18")]())),200<yt.length&&yt.shift()})),r.startDeviceMotionListening({interval:"ui",success:function(){r[P("0x59")]((function(t){var e=t.alpha,n=t.beta,a=t[P("0x5a")];Tt[P("0x3b")](""[P("0x10")](e,",")[P("0x10")](n,",")[P("0x10")](a,",").concat(Date[P("0x1d")]()[P("0x18")]())),200<Tt[P("0x1")]&&Tt[P("0x5b")]()}))}}),e=0,clearInterval(St),St=o((function(){30===(e+=1)&&clearInterval(St),bt=0}),6e5),Object[P("0x52")](wt,t),Lt(),At(500),At(1e3),0));var e},hgzAs:function(t,e){if(!e||"function"!=typeof e)return"";Lt(P("0x54"),e)},getData:function(){return{Token:st(wt[P("0x47")])[P("0x5d")],view:It()}},getDataV2:function(t){lt((function(e){var n,a,o={Token:e[P("0x5d")],view:(n=e,a=n[P("0x44")],gt({appKey:a,ak:wt.ak}))};t(o)}),wt[P("0x47")])}},Nt={init:Ot.init,setInfo:Ot.setInfo,hgzAs:Ot[P("0x54")],getData:Ot[P("0x5e")],getDataV2:Ot[P("0x5f")]};e.exports=Nt})),window.define("147",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29));Component({externalClasses:["tab-item-selected-img-custom","tab-item-name-custom-class"],properties:{tabs:{type:Array,default:[]},current:{type:Number,default:0,observer:function(t,e){var n=this.data.tabs.length;this.setData({currentTab:t,scrollLeft:(t-n/2+1)*this.attr.tabItemWidth}),this.triggerEvent("change",t),this.triggerEvent("click",{tap:!1,index:t})}},seckillFinish:{type:Boolean,default:!1,observer:function(t,e){t!==e&&this.resetTabHeaderTop()}},fixedTop:{type:Boolean,default:!0},fixedTopDiff:{type:Number,default:0},alwaysFixedTop:{type:Boolean,default:!0},customBackground:{type:String,default:""},radiusStyle:{type:String,default:""},alwaysShowFixedLine:{type:Boolean,value:!1},modModule:{type:String,value:"common_home_tab_item_click"},ubcType:{type:String,value:""},flexCenter:{type:Boolean,value:!1},tabDecorate:{type:String,value:"https://b.bdstatic.com/searchbox/icms/searchbox/img/fuwuzhongxin_coupon_home_no_fixed_line.png"},tabFixedDecorate:{type:String,value:"https://b.bdstatic.com/searchbox/icms/searchbox/img/fuwuzhongxin_coupon_home_fixed_line.png"}},data:{currentTab:0,scrollLeft:0,fixed:!1},attr:{tabItemWidth:0,tabHeaderTop:0},attached:function(){var t=this;return(0,x.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTabItemWidth("#c-tab-item","width");case 2:return t.attr.tabItemWidth=e.sent,e.next=5,t.getTabItemWidth("#c-tabs-header","top");case 5:t.attr.tabHeaderTop=e.sent,t.data.fixedTop&&t.setFixedTop();case 7:case"end":return e.stop()}}),e)})))()},methods:{resetTabHeaderTop:function(t){var e=this;return(0,x.default)(C.default.mark((function t(){return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTabItemWidth("#c-tabs-header","top");case 2:e.attr.tabHeaderTop=t.sent;case 3:case"end":return t.stop()}}),t)})))()},tabChange:function(t){var e=t.target.dataset.index,n=this.data.tabs.length;this.setData({scrollLeft:(e-n/2+1)*this.attr.tabItemWidth}),this.triggerEvent("change",e),this.triggerEvent("click",{tap:!0,index:e})},getTabItemWidth:function(t,e){return new Promise((function(n){var a=o.createSelectorQuery();a.select(t).boundingClientRect(),a.exec((function(t){t&&t[0]&&t[0][e]&&n(t[0][e])}))}))},setFixedTop:function(){var t=this;Page.after({methods:{onPageScroll:function(e){var n=e.args,a=t.attr.tabHeaderTop-t.data.fixedTopDiff,o=n.e.scrollTop,i=t.data.fixed,r=o>=a-2;!i&&r?t.setData({fixed:!0},(function(){t.triggerEvent("fixed",{fixed:!0})})):i&&!r&&t.setData({fixed:!1},(function(){t.triggerEvent("fixed",{fixed:!1})}))}}})},tabScrollEnd:function(){this.triggerEvent("scrollend")}}})})),window.define("149",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(150);Component({externalClasses:["external-coupon-container-class","external-coupon-mid-content-class","external-coupon-btn-text-class","external-countdown-text"],properties:{couponId:{type:String,value:""},index:{type:Number,value:""},isLoading:{type:Boolean,value:!1},opacity:{type:Number,value:1},btnBg:{type:String,value:""},btnTextColor:{type:String,value:"#fff"},btnBorderColor:{type:String,value:"transparent"},btnOpenType:{type:String,value:"login"},status:{type:String,value:""},statusName:{type:String,value:""},bgImg:{type:String,value:""},bgColor:{type:String,value:""},discountTitleText:{type:String,value:""},discountTitleShow:{type:Boolean,value:!0},discountTitleColor:{type:String,value:"#fff"},title:{type:String,value:""},timeRange:{type:String,value:""},timeRangeColor:{type:String,value:"#fff"},fullReduction:{type:String,value:""},fullReductionColor:{type:String,value:"#858585"},isToast:{type:Boolean,value:!1},tipsIcon:{type:String,value:"https://b.bdstatic.com/searchbox/icms/searchbox/img/smart-kit-coupon-tips.png"},tipText:{type:String,value:""},toastTime:{type:Number,value:4e3},needLogin:{type:Boolean,value:!1},isButtonShow:{type:Boolean,value:!0},statusImg:{type:String,value:""},statusImgUrl:{type:String,value:""},showProgress:{type:Boolean,value:!1},progress:{type:Number,value:0},midSlot:{type:Boolean,value:!1},countdown:{type:Boolean,value:!1},timeLeft:{type:Number,value:0}},data:{tip:!1,currentTime:""},attr:{timer:null,show:!0},lifetimes:{attached:function(){this.data.countdown&&(this.setData({currentTime:this.formatTime(this.data.timeLeft)}),this.startCountdown())},detached:function(){this.data.countdown&&this.attr.timer&&clearInterval(this.attr.timer)}},pageLifetimes:{show:function(){this.startCountdown(),this.attr.show=!0},hide:function(){this.attr.show=!1}},loginInfo:{},methods:{startCountdown:function(){var t=this;this.data.countdown&&(this.attr.timer&&clearInterval(this.attr.timer),this.attr.timer=o((function(){if(t.data.timeLeft<=0)return clearInterval(t.attr.timer),void(t.attr.timer=null);t.data.timeLeft--,t.attr.show&&t.setData({currentTime:t.formatTime(t.data.timeLeft)})}),1e3))},btnClick:function(){var t=this.data,e=t.couponId,n=t.index,a=t.status;this.triggerEvent("btnclick",{couponId:e,index:n,status:a,loginInfo:this.loginInfo})},tipsHandle:function(){var t=this,e=this.data,n=e.toastTime,o=e.isToast,i=e.tip,r=e.tipText,s=e.couponId;i||(o?this.setData({tip:!0},(function(){a((function(){t.setData({tip:!1})}),n)})):this.triggerEvent("tipsclick",{tipText:r,toastTime:n,couponId:s}))},loginHandle:function(t){this.loginInfo=t.detail,this.btnClick()},getPhoneNumber:function(t){t.couponData=this.data,this.triggerEvent("getPhoneNumber",t)},stop:function(){},formatTime:function(t){return"".concat(Math.floor(t/86400),"天").concat((0,x.calcTime)(t))}}})})),window.define("150",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";function I(t){return 2===t.toString().length?t:"0"+t}Object.defineProperty(n,"__esModule",{value:!0}),n.isEmptyArray=function(t){if(!Array.isArray(t))throw new TypeError("param data is not Array");return!(t&&t.length)},n.addZero=I,n.calcTime=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=t%86400,a=I(Math.floor(n/3600));n%=3600;var o=I(Math.floor(n/60)),i=I(n%60);return a+e+o+e+i}})),window.define("152",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(26);Component({properties:{couponId:{type:String,value:""},index:{type:Number,value:""},bgImg:{type:String,value:""},contentTextColor:{type:String,value:""},title:{type:String,value:""},status:{type:String,value:""},descriptiveText:{type:String,value:""},countdown:{type:Boolean,value:!1},timeLeft:{type:Number,value:0},statusName:{type:String,value:""},price:{type:Number,value:0},buttonText:{type:String,value:""}},data:{currentTime:""},attr:{timer:null,show:!0},attached:function(){this.data.countdown&&(this.setData({currentTime:this.formatTime(this.data.timeLeft)}),this.startCountDown())},detached:function(){this.data.countdown&&this.attr.timer&&clearInterval(this.attr.timer)},pageLifetimes:{show:function(){this.startCountDown(),this.attr.show=!0},hide:function(){this.attr.show=!1}},loginInfo:{},methods:{startCountDown:function(){var t=this;this.data.countdown&&(this.attr.timer&&clearInterval(this.attr.timer),this.attr.timer=o((function(){if(t.data.timeLeft<=0)return clearInterval(t.attr.timer),void(t.attr.timer=null);t.data.timeLeft--,t.attr.show&&t.setData({currentTime:t.formatTime(t.data.timeLeft)})}),1e3))},btnClick:function(){var t=this.data,e=t.couponId,n=t.index,a=t.status;this.triggerEvent("btnclick",{couponId:e,index:n,status:a})},loginHandle:function(t){this.loginInfo=t.detail,this.btnClick()},formatTime:function(t){return"".concat(Math.floor(t/86400),"天").concat((0,C.calcTime)(t))}}})})),window.define("154",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14)),C=t(26);Component({externalClasses:["custom-round-style"],properties:{items:{type:Object,default:{}},tabName:{type:String,default:""},index:{type:Number,default:0},module:{type:String,default:""}},data:{src:""},attached:function(){this.setData({src:this.data.items.img})},methods:{navTo:(0,C.throttle)((function(){var t=this.data,e=t.tabName,n=t.index,a=t.items,i=t.module;if(a.url&&a.url.length>0){var r=a.url[0].jumpUrl,s=a.url[0].jumpType;s="h5"===s?"box":s,o.$log.sendNew({module:i||"goods_card",jumpUrl:r,jumpType:s,tabName:e,tab:e,title:a.title,rank:n,sku_id:a.id},"click"),I.default.to(r,s)}else{var c=a.url.jumpUrl,u=a.url.jumpType;u="h5"===u?"box":u,o.$log.sendNew({module:i||"sku",jumpUrl:c,jumpType:u,tabName:e,tab:e,title:a.title,rank:n,sku_id:a.id},"click"),I.default.to(c,u)}}),500),imageError:function(t){this.setData({src:"http://static.open.baidu.com/media/ch1000/png/no-image.png"})}}})})),window.define("156",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(15)),_=I(t(17)),D=I(t(33)),k=I(t(14)),P=t(26);Component({properties:{tabs:{type:Array,value:[]},currentTab:{type:Number,value:0,observer:function(t,e){t!==e&&this.data.content[t]&&(this.resetReported(),this.reportTabShow()),t===e||this.data.content[t]||this.requestData(t)}},content:{type:Array,value:[]},fixedTop:{type:Boolean,value:!0},urlQuery:{type:Object,value:{}},screenMinContentHeight:{type:Number,value:0}},data:{loadingStatusMap:[],contentMinHeight:0,duration:500,tabCotainerHeight:"auto"},attr:{tabsHeaderInstance:null,pageScrollTop:0,moreList:[],firstPaint:!0,intersectionObserver:null,reported:{skusShow:[],packetShow:!1,onlineorderShow:!1,brandxcxShow:!1,tabShow:!1}},attached:function(){var t=this;this.init(),Page.after({url:/channels\/brand\/pages\/index\/index/,methods:{onReachBottom:function(){t.loadMore()}}})},pageLifetimes:{show:function(){this.attr.firstPaint?this.attr.firstPaint=!1:(this.resetReported(),this.reportTabShow())}},methods:{init:function(){this.initContent()},initContent:function(){var t,e=this.data,n=e.content,a=e.currentTab;this.setContentLoading(a,n&&(null===(t=n[a])||void 0===t?void 0:t.hasMore)),this.getContentHeight()},loadMore:function(){var t=this.data,e=t.loadingStatusMap,n=t.currentTab;"loading"===e[n]?this.requestData(n):this.attr.moreList[n]||(this.attr.moreList[n]=!0)},requestData:function(t){var e=this;this.setContentLoading(t,1);var n=this.data,a=n.content,o=n.urlQuery,i=n.tabs,r=o.city_name,s=void 0===r?"":r,c=o.city_code,u=void 0===c?"":c,d=a[t]&&a[t].pn||0;_.default.get(D.default.FOOD_SPECIALS,{data:{init_req:2,serviceId:"105",paramIndex:1,query:i[t].text,city_name:s,city_code:u,rn:10,pn:d}}).then((function(n){var o=n||{},i=o.foodsList,r=void 0===i?[]:i,s=o.hasMore,c=o.pn,u=o.brandInfo,d=o.baoInfo,l=o.onlineOrder;if(r||u||d||l){var h=!!a[t],p={};p=a[t]?(0,x.default)((0,x.default)({},a[t]),{},{pn:c,foodsList:[].concat((0,C.default)(a[t].foodsList),(0,C.default)(r))}):n,a[t]=(0,x.default)((0,x.default)({},p),{},{hasData:r.length||d.isShow||l.isShow,rendered:!0}),e.setData({content:a},(function(){e.setContentLoading(t,s),e.getContentHeight(),h||e.resetReported(),e.reportTabShow()}))}}))},contentChange:function(t){var e=this,n=t.detail.current;this.setData({currentTab:n,duration:500},(function(){e.getContentHeight()})),this.triggerEvent("change",{currentTab:n}),this.setContentScroll()},getContentHeight:function(){var t=this,e=o.createSelectorQuery();e.select("#brand-content-item-".concat(this.data.currentTab)).boundingClientRect(),e.exec((function(e){e&&e[0]&&e[0].height&&t.setData({contentMinHeight:Math.max(e[0].height,t.data.screenMinContentHeight)})}))},setContentLoading:function(t,e){var n=this,a=this.data.tabs.map((function(a,o){return void 0===+t?"loading":+t===o?+e?"loading":"complete":n.data.loadingStatusMap[o]}));this.setData({loadingStatusMap:a})},setContentScroll:function(){o.pageScrollTo({scrollTop:0,duration:0})},navTo:(0,P.throttle)((function(t){var e=t.currentTarget.dataset,n=e.jumpType,a=e.jumpUrl,i=e.title,r=e.module;if(0!==e.isJump){var s=this.data,c=s.tabs,u=s.currentTab;n="h5"===n?"box":n,o.$log.sendNew({module:r,jumpUrl:a,jumpType:n,title:i,tab:c[u].text,appkey:(0,P.getAppKey)(n,a)},"click"),a&&k.default.to(a,n)}}),500),resetReported:function(){this.attr.reported={skusShow:[],packetShow:!1,onlineorderShow:!1,brandxcxShow:!1,tabShow:!1}},reportTabShow:function(){var t=this.data,e=t.tabs,n=t.currentTab,a=t.content,i=e[n].text,r=a[n]||{},s=r.baoInfo,c=r.onlineOrder,u=r.brandInfo,d=r.foodsList,l=this.attr.reported;if(l.tabShow||(o.$log.sendNew({tab:i},"display"),l.tabShow=!0),!l.packetShow&&s&&s.isShow&&(o.$log.sendNew({tab:i,module:"packet"},"show"),l.packetShow=!0),!l.onlineorderShow&&c&&c.isShow&&(o.$log.sendNew({tab:i,module:"onlineorder"},"show"),l.onlineorderShow=!0),!l.brandxcxShow&&u){var h=u.jumpType,p=u.jumpUrl;o.$log.sendNew({tab:i,module:"brandxcx",appkey:(0,P.getAppKey)(h,p)},"show"),l.brandxcxShow=!0}this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=o.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport();var f=l.skusShow||[];this.attr.intersectionObserver.observe(".brand-content-item",(function(t){var a=t.dataset.index;!f[a]&&d&&d[a]&&(o.$log.sendNew({tab:e[n].text,module:"sku",sku_id:d[a].id,rank:a},"show"),f[a]=!0)}))}}})})),window.define("157",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(158),C=t(159),x=t(22),_=t(160);e.exports=function(t){return I(t)||C(t)||x(t)||_()}})),window.define("158",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(23);e.exports=function(t){if(Array.isArray(t))return I(t)}})),window.define("159",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){e.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}})),window.define("160",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),window.define("162",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=(0,t(9).getSystemInfo)(),D=_.windowWidth,k=_.windowHeight,P=_.navigationBarHeight,E=_.statusBarHeight,L=.75*(k-P-E);Component({properties:{tabs:{type:Array,default:[]},current:{type:Number,default:0,observer:function(t,e){this.setData({currentTab:t}),t!==e&&this.attr.allTabPosition.length&&this.setScrollPosition(t),this.triggerEvent("click",{tap:!1,index:t})}},fixedTop:{type:Boolean,default:!0},alwaysFixedTop:{type:Boolean,default:!0},customBackground:{type:String,default:""},fixedTopDiff:{type:Number,default:0}},data:{currentTab:0,scrollLeft:0,fixed:!1,showFilterBtn:!1,filterImageTopDiff:0,filterBoxVisible:!1,filterMaxHeight:0,rendered:!0,scrollIntoView:0},attr:{tabHeaderTop:0,allTabsWidth:0,allTabPosition:[]},attached:function(){var t=this;return(0,x.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTabItemPositionArr();case 2:return e.next=4,t.getMinContentHeight();case 4:return e.next=6,t.getTabItemWidth("#brand-tabs-header","top");case 6:t.attr.tabHeaderTop=e.sent,t.setData({showFilterBtn:D<t.attr.allTabsWidth,filterImageTopDiff:t.attr.scrollViewHeight,filterMaxHeight:L},(function(){t.setScrollPosition(t.data.currentTab)}));case 8:case"end":return e.stop()}}),e)})))()},methods:{tabChange:function(t){var e=t.target.dataset.index;this.setScrollPosition(e);var n=this.data.tabs;o.$log.send({module:"tehui_tab",type:"tab_click",tabName:n[e]},"click"),this.triggerEvent("click",{tap:!0,index:e})},setScrollPosition:function(t){var e=this,n="brand-tab-item-".concat(0);this.attr.allTabPosition[t].left>D/2&&(n="brand-tab-item-".concat(t-1)),this.setData({rendered:!1,scrollIntoView:n},(function(){e.setData({rendered:!0})}))},selectFliterItem:function(t){var e=this;this.setData({filterBoxVisible:!1},(function(){e.tabChange(t)}))},closeFilterBox:function(){this.setData({filterBoxVisible:!1})},getTabItemWidth:function(t,e){return new Promise((function(n){var a=o.createSelectorQuery();a.select(t).boundingClientRect(),a.exec((function(t){t&&t[0]&&t[0][e]&&n(t[0][e])}))}))},getTabItemPositionArr:function(){var t=this,e=o.createSelectorQuery();this.data.tabs.map((function(n,a){n.id,n.text;e.select("#brand-tab-item-".concat(a)).boundingClientRect(),e.exec((function(e){return t.attr.allTabPosition=e,e.map((function(e){e.left;var n=e.width;t.attr.allTabsWidth+=n})),new Promise((function(t,e){t()}))}))}))},getMinContentHeight:function(){var t=this,e=o.createSelectorQuery();e.select("#brand-scroll-view").boundingClientRect(),e.exec((function(e){if(e&&e[0]){var n=k-e[0].top-e[0].height;return new Promise((function(e,a){t.triggerEvent("getMinContentHeight",{minContentHeight:n}),e()}))}}))},handelFilterVis:function(){this.setData({filterBoxVisible:!0},(function(){o.$log.send({module:"tehui_more_show"},"display")})),o.$log.send({module:"tehui_more"},"click")}}})})),window.define("164",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({externalClasses:["custom-round-style"],properties:{items:{type:Object,default:{}},log:{type:Object,default:{}}},methods:{navTo:function(){var t=this.data.items.url,e=t.jumpType,n=t.jumpUrl;I.default.to(n,e)}}})})),window.define("166",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29));Component({properties:{tabs:{type:Array,default:[]},current:{type:Number,default:0,observer:function(t){this.setData({currentTab:t,scrollLeft:(t-1)*this.attr.tabItemWidth}),this.triggerEvent("change",t)}},fixedTop:{type:Boolean,default:!0},fixedTopDiff:{type:Number,default:0}},data:{currentTab:0,scrollLeft:0,fixed:!1},attr:{tabItemWidth:0,tabHeaderTop:0},attached:function(){var t=this;return(0,x.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTabItemWidth("#tab-item","width");case 2:return t.attr.tabItemWidth=e.sent,e.next=5,t.getTabItemWidth("#tabs-header","top");case 5:t.attr.tabHeaderTop=e.sent,t.data.fixedTop&&t.setFixedTop();case 7:case"end":return e.stop()}}),e)})))()},methods:{tabChange:function(t){var e=t.target.dataset.index;this.setData({scrollLeft:(e-1)*this.attr.tabItemWidth}),this.triggerEvent("change",e)},getTabItemWidth:function(t,e){return new Promise((function(n){var a=o.createSelectorQuery();a.select(t).boundingClientRect(),a.exec((function(t){t&&t[0]&&t[0][e]&&n(t[0][e])}))}))},setFixedTop:function(){var t=this,e=this.attr.tabHeaderTop-this.data.fixedTopDiff;Page.after({url:/channels\/coupon\/pages\/index\/index/,methods:{onPageScroll:function(n){var a=n.args.e.scrollTop;t.setData({fixed:a>=e-2})}}})},tabScrollEnd:function(){o.$log.send({module:"coupon_channel_tabs_scroll"},"scroll")}}})})),window.define("168",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(15)),_=I(t(17)),D=I(t(33)),k=t(169),P=i();Component({properties:{tabs:{type:Array,value:[]},currentTab:{type:Number,value:0},content:{type:Array,value:[]},fixedTop:{type:Boolean,value:!0},fixedTopDiff:{type:Number,value:0},urlQuery:{type:Object,value:{}}},data:{currentContent:0,loadingStatusMap:[],contentMinHeight:0,duration:0,tabCotainerHeight:"auto"},attr:{tabsHeaderInstance:null,pageScrollTop:0,moreList:[]},attached:function(){var t=this;this.init(),Page.after({url:/channels\/coupon\/pages\/index\/index/,methods:{onReachBottom:function(){t.loadMore()}}})},methods:{init:function(){this.initContent(),this.initContentScroll()},initContent:function(){var t=this,e=this.data,n=e.content,a=e.currentTab,o=e.tabs;!a&&this.setData("duration",500),this.setContentLoading(a,n[a].hasMore),o.forEach((function(e,n){+a!==n&&t.requestData(n)})),this.getContentHeight()},loadMore:function(){var t=this.data,e=t.loadingStatusMap,n=t.currentTab;"loading"===e[n]?(this.requestData(n,!0),this.sendLog({module:"load_more_data",tab:this.data.tabs[n].text||""})):this.attr.moreList[n]||(this.attr.moreList[n]=!0,this.sendLog({module:"no_more_data",tab:this.data.tabs[n].text||""}))},requestData:function(t,e){var n=this,a=this.data,o=a.content,i=a.urlQuery,r=i.city_name,s=void 0===r?"北京":r,c=i.query,u=void 0===c?"":c,d=o[t]&&o[t].pn||0;_.default.get(D.default.GET_COMMON_PAGE,{data:{serviceId:"103",paramIndex:2,query:u,city_name:s,pn:d,rn:10,tab:(0,k.getTabId)(this.data.tabs,t)},isShowToast:e}).then((function(t){var e=t.welfare_page.discountList,a=e.selectTag,i=e.list,r=e.hasMore,s=e.pn,c=(0,k.getTabIndex)(n.data.tabs,+a),u={};u=o[a]?(0,x.default)((0,x.default)({},o[c]),{},{pn:s,list:[].concat((0,C.default)(o[c].list),(0,C.default)(i))}):t.welfare_page.discountList,o[c]=u,n.setData({content:o},(function(){n.getContentHeight(),n.setContentLoading(c,r)}))}))},tabHeaderChange:function(t){var e=t.detail;this.setData({currentContent:e})},contentChange:function(t){this.setData({currentTab:t.detail.current,duration:500}),this.setContentScroll(),this.getContentHeight()},getContentHeight:function(){var t=this,e=o.createSelectorQuery();e.select("#content-item-".concat(this.data.currentTab)).boundingClientRect(),e.exec((function(e){if(e&&e[0]&&e[0].height){var n=t.attr.tabsHeaderInstance,a=n.data,o=n.attr,i=void 0===o?{tabHeaderTop:0}:o,r=P.globalData.systemInfo,s=r.windowHeight,c=r.navigationBarHeight,u=t.attr.pageScrollTop;t.setData({contentMinHeight:e[0].height,tabCotainerHeight:a&&a.fixed?"calc(".concat(s,"px - ").concat(c,"px)"):"calc(".concat(s,"px - ").concat(i.tabHeaderTop-u,"px)")})}}))},setContentLoading:function(t,e){var n=this,a=this.data.tabs.map((function(a,o){return void 0===+t?"loading":+t===o?+e?"loading":"complete":n.data.loadingStatusMap[o]}));this.setData({loadingStatusMap:a})},initContentScroll:function(){var t=this;this.attr.tabsHeaderInstance=this.selectComponent("#tabs-header")||{},Page.after({methods:{onPageScroll:function(e){var n=e.args;t.attr.pageScrollTop=n.e.scrollTop}}})},setContentScroll:function(){var t=this.attr,e=t.pageScrollTop,n=t.tabsHeaderInstance.attr.tabHeaderTop-this.data.fixedTopDiff;o.pageScrollTo({scrollTop:e>n?n:e,duration:0})},sendLog:function(t,e){o.$log.send(t,e||"display")}}})})),window.define("169",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTabId=n.getTabIndex=void 0;n.getTabIndex=function(t,e){var n=0;return t.forEach((function(t,a){return e===+t.id&&(n=a)})),n};n.getTabId=function(t,e){return t.filter((function(t,n){return n===e}))[0].id}})),window.define("171",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(26);Component({properties:{isEllipsis:{type:Boolean,value:!1},listItem:{type:Object,value:{evaluateId:"",content:"",images:[],productScore:"",nickName:"",avatar:"",evaluateTime:""}}},data:{scoreStarsWidth:0,score:""},attached:function(){var t=(0,I.transScoreToStarsWidth)(this.properties.listItem.productScore),e=t.score,n=t.scoreStarsWidth;this.setData({score:e,scoreStarsWidth:n})},methods:{previewImage:function(t){var e=t.currentTarget.dataset.index,n=this.data.listItem.images;o.previewImage({current:n[e],urls:n})},stopMoveTouch:function(){}}})})),window.define("173",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{data:{type:Object,default:{}}}})})),window.define("175",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I,C=t(41)(t(9));Component({properties:{couponInfo:{type:Object,value:null},from:{type:String,value:"",observer:function(t,e){this.setData({isSurprise:"stay"===t})}},isInShopPage:{type:Boolean,value:!0},isYiKouJia:{type:Boolean,value:!0}},data:{animationPlay:!1,isSurprise:!1,isAndroid:"android"===(null===(I=i().globalData.systemInfo)||void 0===I?void 0:I.platform),getButtonText:"立即领取",tailDesc:"请立即领取"},created:function(){if(!this.data.isInShopPage){var t={getButtonText:"领券预约",tailDesc:"请尽快领取"};this.data.isYiKouJia||(t.tailDesc="付尾款时可用"),this.setData(t)}},attached:function(){this.myAnimationVideo=o.createAnimationVideo("myAnimationVideo")},methods:{animationEnd:function(){var t=this;this.setData({animationPlay:!0,test:this.myAnimationVideo},(function(){t.myAnimationVideo&&t.myAnimationVideo.play()}))},close:function(){this.triggerEvent("close")},clickLeave:function(){this.triggerEvent("clickLeave")},clickMask:function(){this.triggerEvent("clickLeave")},handleGetCoupon:function(){var t=this;C.getLoginCode().then((function(e){e.code&&t.triggerEvent("getCoupon")}))}},pageLifetimes:{show:function(){this.myAnimationVideo&&this.myAnimationVideo.play()}}})})),window.define("177",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({data:{title:"联系商家提示",tip:"请勿私下交易！百度在线支付，维权有保障",btnTip:{confirm:"立即拨打",cancel:"取消"}},methods:{confirm:function(){this.triggerEvent("confirm")},cancel:function(){this.triggerEvent("cancel")},drawCouponOrder:function(){this.triggerEvent("drawCouponOrder")}}})})),window.define("179",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10)(t(14));Component({options:{addGlobalClass:!0},externalClasses:["custom-scroll-height","custom-popup-box"],properties:{show:{type:Boolean,default:!0},zIndex:{type:String,default:"921"},safeAreaBottom:{type:Number,default:0},stopMaskTap:{type:Boolean,default:!1},data:{type:Object,default:{}},custom:{type:Boolean,default:!1}},data:{opacity:1,visibility:"hidden",translateY:"100%"},observers:{show:function(t){var e=this;t?this.setData({visibility:"visible",opacity:1,translateY:0}):(this.setData({opacity:0,translateY:"100%"}),a((function(){e.setData({visibility:"hidden"})}),300))}},methods:{handleMaskTap:function(){this.stopMaskTap||(this.triggerEvent("masktap"),this.triggerEvent("close"))},onCloseTap:function(){this.triggerEvent("close")},ensureLinkFn:function(t){var e=t.currentTarget.dataset.jumpUrl.split("?"),n=e[0],a="?url="+encodeURIComponent("".concat(n,"?").concat(e[1]));i.navigateTo({url:"/homes/webview/webview"+a})},commonJump:function(t){C.default.withEvent(t)}}})})),window.define("181",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{voucher:{type:String,value:""},color:{type:String,value:""},bgColor:{type:String,value:""}},options:{addGlobalClass:!0}})})),window.define("183",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{list:{type:Array,value:[]}},options:{addGlobalClass:!0},methods:{showEnsurePop:function(){this.triggerEvent("showEnsurePop")}}})})),window.define("185",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{list:{type:Array,observer:function(t){Array.isArray(t)&&(t=t.map((function(t){var e=t.price||0;return t.value>=0&&(e=t.value),e=(e/100).toString().split("."),t.integer=e[0],t.decimal=e[1]?"."+(1===e[1].length?e[1]+"0":e[1]):".00",t.title=t.title?t.title:t.text,t})),this.setData({arr:t}))}},from:{type:String,value:""},status:{type:Number}},data:{arr:[]},options:{addGlobalClass:!0}})})),window.define("187",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=i();Component({properties:{text:{type:String,value:""},url:{type:String,value:""},background:{type:String,value:""},border:{type:String,value:""},from:{type:String,value:""}},methods:{imlpCSdkEvent:function(t){var e=t.detail;"sdk"===e.type&&(this.sdk=e.sdk,this.initSdk())},initSdk:function(){if(this.sdk&&this.data.url){var t={imParam:{ucid:I.loginData.cuid,channel:"other",appid:"service_mall",imUrl:this.data.url}};this.sdk.init({im1:t},{imlpPath:"/channels/shop/pages/imlp/index"})}},handleClick:function(){this.sdk.openIM("im1")}},attached:function(){}})})),window.define("189",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(157));Component({properties:{list:{type:Array,default:[],observer:function(t,e){this.setData({imgList:t})}}},data:{MAX_IMG_LEN:5,imgList:[]},created:function(){this.setData({imgList:this.data.list})},methods:{chooseImage:function(){var t=this,e=5-this.data.imgList.length;o.chooseImage({count:e,success:function(e){var n=e.tempFilePaths;t.triggerEvent("listChange",{list:[].concat((0,I.default)(t.data.imgList),(0,I.default)(n))}),t.setData({imgList:[].concat((0,I.default)(t.data.imgList),(0,I.default)(n))})}})},deleteImage:function(t){var e=t.currentTarget.dataset.index;this.data.imgList.splice(e,1),this.triggerEvent("listChange",{list:this.data.imgList}),this.setData({imgList:this.data.imgList})}}})})),window.define("191",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(15)),_=I(t(29)),D=t(9),k=I(t(17)),P=I(t(33)),E=I(t(14));Component({properties:{couponList:{type:Array,value:[],observer:function(t,e){this.setData({mycouponList:t})}}},data:{statusMap:{60:"type-expired",30:"type-received",50:"type-soldout",40:"type-used"}},methods:{closeCouponPop:function(){this.triggerEvent("closeCouponPop")},couponItemClick:function(t){var e=t.currentTarget.dataset,n=e.isShare,a=e.jumpType,i=e.jumpUrl,r=t.detail,s=r.status,c=r.index,u=r.couponId;50===s||60===s?o.showToast({title:"券已抢光，请之后再来哦",icon:"none"}):20===s||55===s?n?E.default.to(i,a):(this.handleCouponBtnStatus(c),this.drawCoupon(u,c),o.$log.send({module:"yhq".concat(c)},"click")):30===s&&this.triggerEvent("useCoupon")},drawCoupon:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,_.default)(C.default.mark((function a(){var i,r;return C.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.length){a.next=24;break}return i={act:"takeCoupon",couponList:[]},Array.isArray(t)?i.couponList=t:i.couponList.push(t),a.prev=3,a.next=6,(0,D.getSysData)();case 6:return r=a.sent,a.next=9,k.default.post(P.default.ORDER_INDEX,{data:(0,x.default)({zid:r.zid||""},i),noTry:!0});case 9:if(!a.sent){a.next=16;break}return o.hideLoading(),o.showToast({title:"领取优惠券成功",icon:"none"}),e.handleCouponBtnStatus(n),e.triggerEvent("reloadCouponList"),a.abrupt("return",Promise.resolve());case 16:a.next=24;break;case 18:return a.prev=18,a.t0=a.catch(3),e.handleCouponBtnStatus(n),n&&o.showToast({title:"领取优惠券失败，请您重新尝试",icon:"none"}),o.hideLoading(),a.abrupt("return",Promise.reject());case 24:case"end":return a.stop()}}),a,null,[[3,18]])})))()},handleCouponBtnStatus:function(t){if(t){var e=this.data.mycouponList;e[t].isLoading=!e[t].isLoading,this.setData({mycouponList:e})}},commonJump:function(t){E.default.withEvent(t)}}})})),window.define("193",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(9),C=t(26);Component({properties:{eventName:{type:String,value:""},showLogin:{type:Boolean,value:!1},forceClose:{type:Boolean,value:!0},closeMsg:{type:String,value:"登录才能使用服务哦"},title:{type:String,value:"登录提示"},desc:{type:String,value:"登录惠生活，使用精选服务"},btnText:{type:String,value:"一键登录"},zIndex:{type:String,value:"999"}},methods:{loginHandle:function(t){var e=this;(0,I.getLoginCode)().then((function(n){Object.assign(t,n,{isLogin:!0}),e.data.eventName?(e.dispatch("loginsuccess",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginsuccess",t),e.triggerEvent("loginhandle",t))})).catch((function(n){Object.assign(t,n,{isLogin:!1}),e.data.eventName?(e.dispatch("loginfail",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginfail",t),e.triggerEvent("loginhandle",t))}))},tapMaskLogin:function(){var t=this,e=this.data,n=e.closeMsg,a=e.forceClose;n&&(0,C.textToast)(n),!a&&n||this.setData({showLogin:!1},(function(){t.data.eventName?(t.dispatch("tapmasklogin"),t.dispatch("closelogin")):(t.triggerEvent("tapmasklogin"),t.triggerEvent("closelogin"))}))},tapCloseLogin:function(){var t=this,e=this.data,n=e.closeMsg,a=e.forceClose;n&&(0,C.textToast)(n),!a&&n||this.setData({showLogin:!1},(function(){t.data.eventName?(t.dispatch("tapcloselogin"),t.dispatch("closelogin")):(t.triggerEvent("tapcloselogin"),t.triggerEvent("closelogin"))}))}}})})),window.define("195",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{tabData:{type:Array,value:[]}}})})),window.define("197",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=t(9),_=I(t(17)),D=I(t(33)),k=I(t(14)),P="https://wappass.baidu.com/v6/shippingAddress",E=i();Component({properties:{addressData:{type:Object,value:{},observer:function(t,e){var n=t.sender,a=t.receiver,o=t.norms,i=t.time,r=t.service,s={};this.data.isMoveFamily?s.useAdd=n:s.useAdd=r,this.setData((0,C.default)({receiver:a,norms:o,time:i},s))}},skuIsDel:{type:Boolean,value:!1},isPop:{type:Boolean,value:!1},isMoveFamily:{type:Boolean,value:!1},showTimeQuickly:{type:Boolean,value:!1},extCommonData:{type:Object,value:{}},cityDiffText:{type:String,value:""},serviceTwo:{type:String,value:""},serviceThree:{type:String,value:""}},data:{useAdd:{},isShowSendAddress:!1,isShowReceiveAddress:!1},options:{addGlobalClass:!0},attached:function(){this.setData({userLogin:(0,x.isLogin)()})},observers:{"isPop, isMoveFamily":function(t,e){this.showAddress(e,t)}},methods:{showAddress:function(t,e){var n=!1,a=!1;!t&&e&&(n=!0,a=!1),t&&e&&(n=!0,a=!0),this.setData({isShowSendAddress:n,isShowReceiveAddress:a})},checkSkuIsDel:function(){return!!this.data.skuIsDel&&(o.showToast({mask:!0,icon:"none",title:"商品已下架,请选择其他商品"}),!0)},getPhoneNumber:function(t){var e=this;if(this.setData({userLogin:(0,x.isLogin)()}),!this.checkSkuIsDel()){var n=t.currentTarget.dataset,a=n.addtype,i=n.type;t.detail.encryptedData?("add"===a?this.getAddressInfo(t,"".concat(P,"/add")):"book"===a?this.getAddressInfo(t,P):"norms"===a?this.chooseNorms(t):_.default.get(D.default.SHOP_ADDRESS_INFO).then((function(n){0==+n.addr_type?e.getAddressInfo(t,"".concat(P,"/add")):3==+n.addr_type?e.getAddressInfo(t,P):e.triggerEvent("checkAddress")})),this.setLogs(i)):o.showToast({mask:!0,icon:"none",title:"请登录您的百度账号"})}},getAddressInfo:function(t,e,n){var a=t.currentTarget.dataset,i=a.type,r=a.addrId;E.addressType=i;var s="".concat(e,"?adapter=3&select=1&client=bdSpecialPhoenix&tplt=g4X7FfGEDt7G1ksLibU22o0wB2p49W0D&u=").concat(encodeURIComponent("https://wappass.baidu.com"),"&appid=18431756&tpl=baidu_scenter&backProduct=1");n&&(s+="&paste=".concat(this.clipboardDeatil)),s+=r?"&type=edit&attrId=".concat(r):"&type=add",E.addrid="",o.navigateTo({url:"/homes/webview/webview?url=".concat(encodeURIComponent(s))})},chooseAddress:function(t){var e=t.currentTarget.dataset,n=e.addtype,a=e.type;this.setLogs(a),this.checkSkuIsDel()||("add"===n?this.getAddressInfo(t,"".concat(P,"/add")):this.getAddressInfo(t,P))},chooseNorms:function(t){var e=t.currentTarget.dataset.type;this.setLogs(e),this.checkSkuIsDel()||(this.data.isPop?this.triggerEvent("chooseNorms",{isPop:!0}):this.triggerEvent("chooseNorms"))},chooseTime:function(t){var e=t.currentTarget.dataset.type;this.setLogs(e),this.checkSkuIsDel()||(this.data.isPop?this.triggerEvent("chooseTime",{isPop:!0}):this.triggerEvent("chooseTime"))},sendLog:function(t,e){o.$log.sendNew((0,C.default)({module:e},this.data.extCommonData),t,{},"shangMen")},setLogs:function(t){switch(t){case"sender":this.sendLog("click",this.data.isPop?"sender-addr-popup":"sender-addr");break;case"receiver":this.sendLog("click",this.data.isPop?"receiver-addr-popup":"receiver-addr");break;case"service":this.sendLog("click",this.data.isPop?"service-addr-popup":"service-addr");break;case"norms":this.sendLog("click","specs");break;case"time":this.sendLog("click",this.data.isPop?"time-popup":"time")}},noServiceJump:function(t){k.default.withEvent(t)}}})})),window.define("199",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(17)),_=C(t(33)),D=C(t(14)),k=t(9),P=t(26),E="火爆景区门票1元抢！",L="五一敞开玩，低价酒店捡漏，现金红包等你来领！",A="https://b.bdstatic.com/searchbox/icms/searchbox/img/fenxiang0422.png",O="channels/travel-special-offer/pages/index/index?activity=1&sfrom=shareUrl&source=shareUrl",N=null;Component({data:{startTime:0,untilTime:0,differTime:0},properties:{currentCity:{type:String,value:"",observer:function(t,e){t&&t!==e&&this.initData(t)}},currentCityCode:{type:Number,value:""}},commonJump:function(t){D.default.withEvent(t)},bendEvent:function(t){if("web"!==(0,k.getSystemInfo)().platform){var e=t.currentTarget.dataset,n=e.status,a=e.duration,o=e.text,i=e.index;if(1!=+n)switch(+n){case 5:this.getPopup(i,t);break;default:this.showCoupon(a,o)}else this.commonJump(t)}else D.default.openNA(O)},onShareClick:function(){var t=this.data.header.share_info,e=(0,P.shareAppMessageUrlPatch)({title:t.title||E,content:t.content||L,imageUrl:t.icon||A});i.openShare(e)},initData:function(){var t=this,e=this.data.currentCity,n=this.data.currentCityCode;x.default.get(_.default.GET_COMMON_PAGE,{data:{action:"activity_coupon",serviceId:"102",paramIndex:"1",cityName:e,cityCode:n}}).then((function(e){if(e.travel_activity.banner&&e.travel_activity.coupon){t.setData({header:e.travel_activity.banner,scenic:e.travel_activity.lowGoods,coupon:"tomas"===(0,k.getSystemInfo)().host?"":e.travel_activity.coupon,theme:e.travel_activity.activity,special:e.travel_activity.specialTitleImg,hotScene:e.travel_activity.hotScene});var n=e.travel_activity.lowGoods.startTime,a=e.travel_activity.lowGoods.time,o=e.travel_activity.lowGoods.endTime,i=n-a,r=o-a;e.travel_activity.lowGoods.list.every((function(e){(0==+e.btnStatus&&i<=60&&i>0||1==+e.btnStatus&&r>0&&r<60)&&t.couponLoop(2e3)}))}else t.triggerEvent("activityEvent")})).catch((function(e){t.triggerEvent("activityEvent")}))},couponLoop:function(t){var e=this;return N&&clearTimeout(N),N=a((function(){e.initData()}),t),!0},showToastEvent:function(t){var e=t.currentTarget.dataset,n=e.duration,a=e.text;this.showCoupon(n,a)},showCoupon:function(t,e){i.showToast({icon:"none",title:e,duration:t||2e3})},getPopup:function(t,e){e.isLogin&&e.change?(this.getDraw(t),this.initData()):e.isLogin?this.getDraw(t):i.showToast({title:"请登录您的百度账号",icon:"none"})},getDraw:function(t){var e=this;(0,k.getSysData)().then((function(n){var a=e.data.coupon.list[t];x.default.get(_.default.GET_COMMON_PAGE,{data:{id:a.id,type:a.type,zid:n.zid,serviceId:"102",paramIndex:"2"}}).then((function(t){e.initData();var n=t.activity_coupon_draw.msg;n&&i.showToast({icon:"none",title:n,duration:1e3});var a=t.activity_coupon_draw.data.toast;a&&i.showToast({icon:"none",title:a.text,duration:a.duration})})).catch((function(t){(0,P.textToast)(t.msg)}))}))}})})),window.define("201",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(16)),_=I(t(14)),D="",k=0,P=0,E=null;Component({options:{addGlobalClass:!0},properties:{list:{type:Array,value:[],observer:function(t){var e=this;if(P<+this.data.dataLength||P>=t.length){0!==P&&(P=0);for(var n=0,a=[];n<this.data.col;)a[n]=[],n++;this.setData({newList:a},(function(){e.waterfallRefresh(t).then((function(){P=t.length,e.triggerEvent("watefallEnd")}))}))}else this.waterfallRefresh(t)}},dataLength:{type:[String,Number],value:"20"},col:{type:String,value:"2"}},data:{newList:[]},methods:{waterfallRefresh:function(t){var e=this,n=o.createSelectorQuery();return E=n.selectAll(".waterfall-content-list"),new Promise((function(n){e.waterfallRender(t,P,(function(){n()}))}))},waterfallRender:function(t,e,n){var a=this;t.length>e&&E?E.boundingClientRect().exec((function(o){var i=t[e],r=o[0];r&&r.length>0&&(k=a.getMinIndex(r),a.setData((0,x.default)({},"newList[".concat(k,"]"),a.data.newList[k].concat(i)),(function(){a.waterfallRender(t,++e,n)})))})):n&&n()},getMinIndex:function(t){var e=t.map((function(t){return t.height}));return D=Math.min.apply(Math,(0,C.default)(e)),this.findIndex(t,D)},findIndex:function(t,e){return t.findIndex((function(t){return t.height===e}))},onClick:function(t){_.default.withEvent(t)}}})})),window.define("203",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({options:{addGlobalClass:!0},properties:{list:{type:Array,value:[]}},methods:{onClick:function(t){I.default.withEvent(t)}}})})),window.define("205",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{column:{type:Number,value:1,observer:function(t,e){for(var n=[],a=0;a<t;a++)n[a]=a;this.setData({columArr:n})}},options:{type:Array,value:[],observer:function(t,e){this.initData(t)}},defaultValue:{type:String,value:"",observer:function(t,e){var n=this,a=[],o=t.split(",");this.data.list.forEach((function(t,e){t&&t[0]&&t[0].length>=0?t.forEach((function(t,i){t[0].forEach((function(t,i){if(t.value===o[e])return a[e]=i,n.setData({selectedGroup:a[0]}),void n.setData({secondList:n.data.list[1][a[0]][0]})}))})):t&&t[0]&&t[0].text&&t.forEach((function(t,n){t.value!==o[e]||(a[e]=n)}))})),this.setData({defaultValArr:a,selectedValArr:a})}},outKey:{type:String,value:"",observer:function(t,e){}},selectIndex:{type:Number,value:-1}},data:{columArr:{type:Array,value:[0]},selectedIndex:{type:Number,value:-1},selectedGroup:{type:Number,value:-1},secondList:{type:Array,value:[]},selectedResult:[],defaultValArr:{type:Array,value:[]},selectedValArr:{type:Array,value:[]}},methods:{initData:function(t){var e;e=function t(e,n){for(var a=[],o=0;o<n;o++)a[o]=[];return a[0]=[],e.forEach((function(e,n){e.options?(a[0].push({text:e.text,value:e.value}),a[1].push(t(e.options))):a[0].push(e)})),a}(t,this.data.column),this.setData({list:e})},selectOption:function(t){1===this.data.column?(this.setData({selectedIndex:t.currentTarget.dataset.index,selectedValArr:[t.currentTarget.dataset.index,0]}),this.data.selectedResult=[{item:this.data.list[0][this.data.selectedIndex],filterKey:this.data.selections[t.currentTarget.dataset.col].key,column:this.data.column}],this.dispatch("getSelectItem",{selectedResult:this.data.selectedResult}),this.data.selectedResult=[]):2===this.data.column&&(0===t.currentTarget.dataset.col?(this.setData({selectedValArr:[t.currentTarget.dataset.index,null]}),this.data.selectedResult=[],this.setData({selectedGroup:t.currentTarget.dataset.index}),this.setData({secondList:this.data.list[1][this.data.selectedGroup][0]}),this.data.selectedResult[0]={item:this.data.list[0][t.currentTarget.dataset.index],filterKey:this.data.outKey,column:this.data.column}):1===t.currentTarget.dataset.col&&(this.setData({selectedValArr:[this.data.selectedValArr[0],t.currentTarget.dataset.index]}),this.data.selectedResult[1]={item:t.currentTarget.dataset.item,column:this.data.column,filterKey:this.data.selections[this.data.selectIndex].options[t.currentTarget.dataset.group].key},this.data.selectedResult[0]||(this.data.selectedResult[0]={item:this.data.list[0][this.data.defaultValArr[0]],filterKey:this.data.outKey,column:this.data.column}),this.dispatch("getSelectItem",{selectedResult:this.data.selectedResult})))}}})})),window.define("207",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(15));Component({options:{addGlobalClass:!0},properties:{filters:{type:Array,value:[]}},data:{newFilters:null,filterIndex:null,isShow:!1,newData:null,provinceIndex:0,provinceIntoIndex:0},attached:function(){var t=this;this.setData({newFilters:this.data.filters});var e=!1;this.data.newFilters.forEach((function(n){if(!e&&"city"===n.type){if(!n.selectValue||!n.selectValue.name)return;n.options.forEach((function(a,o){e||a.list.forEach((function(a){e||a.name===n.selectValue.name&&(e=!0,t.setData({provinceIndex:o,provinceIntoIndex:o}))}))}))}}))},methods:{onFilter:function(t){var e=t.target.dataset;e.index!==this.data.filterIndex&&this.data.isShow||this.setData({isShow:!this.data.isShow}),this.setData({filterIndex:e.index,newData:this.data.newFilters[e.index]})},onClose:function(){this.setData({isShow:!1})},onClick:function(t){var e=t.target.dataset;this.data.newData.selectValue&&e.data.name===this.data.newData.selectValue.name||(this.initFilters(e.data),this.onClose(),this.triggerEvent("change",(0,I.default)((0,I.default)({},e),{},{filterIndex:this.data.filterIndex})))},onProvince:function(t){var e=t.target.dataset;e.index!==this.data.provinceIndex&&this.setData({provinceIndex:e.index})},onCity:function(t){var e=t.target.dataset,n=this.data.newData.selectValue;n&&n.name===e.data.name||(this.setData({provinceIntoIndex:this.data.provinceIndex}),this.initFilters(e.data),this.onClose(),this.triggerEvent("change",(0,I.default)((0,I.default)({},e),{},{filterIndex:this.data.filterIndex})))},initFilters:function(t){var e=this,n=this.data.newFilters.map((function(n,a){return a===e.data.filterIndex&&(n.selectValue=t),n}));this.setData({newFilters:n})},catchmove:function(){}}})})),window.define("209",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{tabs:{type:Array,value:[]},selected:{type:Number,value:0}},data:{selectIndex:null},attached:function(){this.setData({selectIndex:this.data.selected})},methods:{changeTab:function(t){var e=t.target.dataset;e&&e.index!==this.data.selectIndex&&(this.setData({selectIndex:e.index}),this.triggerEvent("change",{name:e.name,id:e.id,index:e.index}))}}})})),window.define("211",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{},options:{addGlobalClass:!0},methods:{showEnsurePop:function(){this.triggerEvent("showEnsurePop")}}})})),window.define("213",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10)(t(14)),x=t(26);Component({properties:{propName:{type:String,value:"val"}},options:{addGlobalClass:!0},data:{isShow:!1,timerLen:0},cusData:{timer:null,events:{}},pageLifetimes:{hide:function(){this.hide()}},methods:{show:function(){this.setData("isShow",!0)},hide:function(){this.setData("isShow",!1),this.cusData.timer&&(clearTimeout(this.cusData.timer),this.cusData.timer=null,r().taskData={})},addEndEvent:function(t,e){return this.cusData.events[t]||(this.cusData.events[t]=e),this},start:function(){var t=this,e=0;if(this.cusData.timer)return(0,x.textToast)("已有任务正在进行中~"),void this.show();this.show(),this.cusData.timer=a((function n(){1e3*e>15e3?(t.cusData.timer=null,t.end()):(t.setData({taskEnd:!1,timerLen:1e3*e/15e3*17.794}),t.cusData.timer=a(n,1e3)),e++}),1e3)},end:function(){var t=this;Object.keys(this.cusData.events).forEach((function(e){t.cusData.events[e](),delete t.cusData.events[e]}))},gotoDraw:function(){C.default.back()},channelStart:function(t){var e=this;t.taskDoing&&(this.options=t,this.addEndEvent(t.taskId,(function(){e.setData("taskEnd",!0)})).start())}}})})),window.define("215",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{serviceList:{type:Array,value:[]}},methods:{onTap:function(t){var e=t.currentTarget.dataset.item;this.triggerEvent("onTap",e)}}})})),window.define("217",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{autoplay:{type:Boolean,value:!0},bannerList:{type:Array,value:[],observer:function(t){t.length<=1&&this.setData({indicatorDots:!1})}},interval:{type:Number,value:3e3},style:{type:Object,value:{}},indicatorDots:{type:Boolean,value:!0},indicatorColor:{type:String,value:"rgba(0, 0, 0, .30)"},indicatorActiveColor:{type:String,value:"#fff"},isCustomIndicator:{type:Boolean,value:!1},circular:{type:Boolean,value:!0}},data:{canvasStyle:"width:100%; height:100%",resourceWidth:2212,resourceHeight:2212,alphaDirection:"left",animationAutoplay:!0,loop:!0},methods:{bannerChange:function(t){this.triggerEvent("bannerChange",t)},onTap:function(t){this.triggerEvent("onTap",t)}}})})),window.define("219",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{bannerList:{type:Array,value:[]},interval:{type:Number,value:3e3},type:{type:String,value:""}},data:{bannerCurrent:0},methods:{bannerChange:function(t){this.setData({bannerCurrent:t.detail.current}),this.triggerEvent("bannerChange",t)},onTap:function(t){var e=t.currentTarget.dataset.item;this.triggerEvent("onTap",e)}}})})),window.define("221",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{couponType:{type:Number,value:1},bgColor:{type:String,value:""},bgImg:{type:String,value:""},discountColor:{type:String,value:""},discountUnit:{type:String,value:""},discount:{type:String,value:""},nameColor:{type:String,value:""},name:{type:String,value:""},btnBgColor:{type:String,value:""},btnTextColor:{type:String,value:""},btnText:{type:String,value:""},describe:{type:String,value:""},describeColor:{type:String,value:""},limitColor:{type:String,value:""},limit:{type:String,value:""}},methods:{onBtnTap:function(t){this.triggerEvent("onBtnTap")},loginSuccess:function(t){this.triggerEvent("loginSuccess")}}})})),window.define("223",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10)(t(15)),x=t(224);Component({properties:{zIndex:{type:String,value:"999"},toastBottom:{type:String,value:"8vw"},layerPosition:{type:String,value:"right"},layerBottom:{type:String,value:"20vw"}},data:{page:"",toast:null,layer:null,modal:null,isLayerClosed:!1,noJump:!1},created:function(){var t=this,e=getCurrentPages();this.page=e[e.length-1].route,x.eventCenter.on("taskUi",this.eventHandler.bind(this)),x.eventCenter.on("taskUiInit",(function(){t.setData({isLayerClosed:!1})})),x.eventCenter.on("clearUi",(function(){t.setData({modal:null,layer:null,toast:null})}))},methods:{eventHandler:function(t){var e=this,n=t.page,o=t.uiType,i=t.ui,r=t.noJump;this.setData({noJump:!!r}),n&&n!==this.page||(o===x.uiTypes.TOAST&&this.setData({toast:{backcolor:(0,x.transToRgba)(i.backcolor),message:(i.message||"").split("\n"),duration:i.duration,txtColor:i.txtColor,backBtn:i.backBtn}},(function(){clearTimeout(e.toastTimer),e.toastTimer=a((function(){e.setData({toast:null})}),1e3*e.data.toast.duration)})),o===x.uiTypes.LAYER&&((i.isStart||i.isCompolete)&&(this.data.isLayerClosed=!1),this.data.isLayerClosed||this.setData({layer:{message:(i.message||"").split("\n"),txtColor:i.txtColor,bgUrl:i.bgUrl,closeBg:i.closeBg,progress:i.progress,backBtn:i.backBtn,proportion:i.proportion}})),o===x.uiTypes.MODAL&&this.setData({modal:{modalType:i.modalType,txtColor:i.txtColor,closeBg:i.closeBg,bgUrl:i.bgUrl,progress:i.progress,backBtn:i.backBtn,cancelBtn:i.cancelBtn}}))}},closeLayerHandle:function(){this.data.isLayerClosed=!0,this.setData({layer:null})},closeModalHandle:function(){this.setData({modal:null})},stayHandle:function(t){var e=t.currentTarget.dataset.type,n=this.data[e];this.triggerEvent("stayBtnClk",{data:n}),this.closeModalHandle()},jumpHandle:function(t){var e=t.currentTarget.dataset.type,n=this.data[e];if(n&&n.backBtn){if(this.triggerEvent("backBtnClk",{data:n}),!this.data.noJump)if(n.backBtn.inside&&n.backBtn.options){var a={};try{a=JSON.parse(n.backBtn.options)}catch(t){}!!a.appKey&&!!a.path?i.navigateToSmartProgram((0,C.default)((0,C.default)({},a),{},{fail:function(t){}})):i.openBdboxWebview((0,C.default)((0,C.default)({},a),{},{fail:function(t){}}))}else i.openAppByURL({url:n.backBtn.schema,fail:function(t){}});this.setData({modal:null,layer:null,toast:null})}}})})),window.define("224",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.transToRgba=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7,n=parseInt("0x".concat(t.substring(1,3)),16),a=parseInt("0x".concat(t.substring(3,5)),16),o=parseInt("0x".concat(t.substring(5)),16);return"rgba(".concat(n,", ").concat(a,", ").concat(o,", ").concat(e,")")},n.uiTypes=n.taskSupplier=n.eventTypes=n.eventCenter=void 0;var _,D=x(t(225)),k=x(t(228)),P=x(t(230)),E=x(t(227)),L=x(t(15)),A=x(t(232)),O=x(t(233)),N=x(t(16)),R=x(t(234)),B=x(t(236));function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,E.default)(t);if(e){var o=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,P.default)(this,n)}}var U={TOAST:1,LAYER:2,MODAL:3};n.uiTypes=U;var M={};(0,N.default)(M,U.TOAST,"toast"),(0,N.default)(M,U.LAYER,"layer"),(0,N.default)(M,U.MODAL,"modal");n.eventTypes={GUIDE:1,UPDATE:2,DONE:3};var F=7,H=6,G=["baiduboxapp"],$=new(function(){function t(){(0,A.default)(this,t),this.clientMap=new Map}return(0,O.default)(t,[{key:"on",value:function(t,e){this.clientMap.has(t)||this.clientMap.set(t,[]),this.clientMap.get(t).push(e)}},{key:"emit",value:function(t,e){var n=this.clientMap.get(t);if(n&&n.length)for(var a=0,o=n.length;a<o;a++)n[a].call(null,e)}},{key:"off",value:function(t,e){if(this.clientMap.has(t)){var n=this.clientMap.get(t);if(e)for(var a=n.length;a>-1;a--)n[a]===e&&n.splice(a,1);else n=[]}}}]),t}());n.eventCenter=$;var q="https://efe-h2.cdn.bcebos.com/ceug/resource/res/2020-07/1594974129596/n5v18h4a8yzf.png?x-bce-process=image/quality,q_90";function V(t,e){var n=e.total,a=e.left,o=e.complete;if(!t)return"";return t.replace(/\!\(left\)/g,a).replace(/\!\(total\)/g,n).replace(/\!\(complete\)/g,o)}function Y(t){return"[object Array]"===Object.prototype.toString.call(t)}var z=!0,W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{z||console.log(t,JSON.stringify(e))}catch(t){console.log("console catch",JSON.stringify(t))}},K=function(){function t(){(0,A.default)(this,t),this.candoTask=!1}return(0,O.default)(t,[{key:"init",value:function(t){var e=t.id,n=t.aid,a=t.type,o=t.token,i=t.guide,r=t.completeUI,s=t.meter,c=t.rule,u=t.outside,d=t.sdkConfig,l=t.sdkParams;this.id=e,this.aid=n||e,this.type=a,this.token=o,this.outside=u||!1,this.sdkParams=l||{},this.sdkConfig=d||{},this.completeUI=r,this.guided=!1,this.doing=!1,this.uiGuide=i&&i.uiType?{uiType:i.uiType,ui:i.ui}:null,W("TaskSupplier 引导组件信息",this.uiGuide),this.uiMeter=s&&s.uiType?{uiType:s.uiType,ui:s.ui}:null,this.rule=c,this.candoTask=!0,$.emit("taskUiInit")}},{key:"guide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.guided&&this.doing||(this.guided=!0,this.showUi((0,R.default)({},this.uiGuide,t)))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doing=!0,this.showUi((0,R.default)({},this.uiMeter,t))}},{key:"compolete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showUi((0,R.default)({},t))}},{key:"showUi",value:function(t){$.emit("taskUi",t)}},{key:"clear",value:function(t){var e=t.isClearUi,n=void 0!==e&&e;this.candoTask=!1,n&&$.emit("clearUi")}},{key:"getCando",value:function(){return this.candoTask}},{key:"isActionMatch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Y(e)?e.some((function(e,n){return e.toString()===t.aid})):e.toString()===this.aid}},{key:"isIdMatch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Y(e)?e.some((function(e,n){return e.toString()===t.id})):e.toString()===this.id}}]),t}(),J=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(0,A.default)(this,t),this.timer=null,this.total=e,this.left=e,this.callback=n}return(0,O.default)(t,[{key:"start",value:function(){var t=this;clearInterval(this.timer),this.callback.call(null,{total:this.total,left:this.left}),this.timer=o((function(){t.left--,t.callback.call(null,{total:t.total,left:t.left}),t.left<=0&&t.clear()}),1e3)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"clear",value:function(){clearInterval(this.timer),this.left=this.total}}]),t}(),Q=function(t){(0,k.default)(n,t);var e=j(n);function n(){return(0,A.default)(this,n),e.apply(this,arguments)}return(0,O.default)(n,[{key:"init",value:function(t){var e=this;(0,D.default)((0,E.default)(n.prototype),"init",this).call(this,t);var o=this.rule.stay;this.timer=new J(o,(function(t){var n=t.total,a=t.left;a>0?e.uiMeter&&e.update({ui:{message:e.uiMeter?V(e.uiMeter.ui.message,{total:n,left:a,complete:n-a}):"",left:a,isStart:n-a==1,proportion:parseInt((n-a)/n*100,10)}}):e.compolete()})),this.delayTimer=null;var i=this.rule,r=i.delay,s=void 0===r?200:r,c=i.auto;void 0!==c&&c&&(s?this.delayTimer=a((function(){e.guide(),e.start()}),s):(this.guide(),this.start()))}},{key:"start",value:function(){this.timer.start()}},{key:"pause",value:function(){this.timer.pause()}},{key:"clear",value:function(t){var e=t.isDone,a=void 0===e||e,o=t.isClearUi,i=void 0!==o&&o;a&&(0,D.default)((0,E.default)(n.prototype),"clear",this).call(this,{isClearUi:i}),this.timer.clear(),clearTimeout(this.delayTimer)}}]),n}(K),X=function(t){(0,k.default)(n,t);var e=j(n);function n(){return(0,A.default)(this,n),e.apply(this,arguments)}return(0,O.default)(n,[{key:"init",value:function(t){(0,D.default)((0,E.default)(n.prototype),"init",this).call(this,t);var e=this.rule.repeat;this.left=e}},{key:"action",value:function(t){this.left--;var e=this.rule.repeat;this.left>0?this.uiMeter&&this.update({ui:{message:this.uiMeter?V(this.uiMeter.ui.message,{total:e,left:this.left,complete:e-this.left}):"",left:this.left,isStart:e-this.left==1,proportion:parseInt((e-this.left)/e*100,10)}}):this.compolete(t)}},{key:"clear",value:function(t){var e=t.isDone,a=void 0===e||e,o=t.isClearUi,i=void 0!==o&&o;a&&(0,D.default)((0,E.default)(n.prototype),"clear",this).call(this,{isClearUi:i});var r=this.rule.repeat;this.left=r}}]),n}(K);function Z(t,e){return t(e={exports:{}},e.exports),e.exports}var tt=Z((function(t,e){var n;t.exports=n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},o=a.lib={},i=o.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,a=this.sigBytes,o=t.sigBytes;if(this.clamp(),a%4)for(var i=0;i<o;i++){var r=n[i>>>2]>>>24-i%4*8&255;e[a+i>>>2]|=r<<24-(a+i)%4*8}else for(i=0;i<o;i+=4)e[a+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,a=[],o=function(e){e=e;var n=987654321,a=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&a)<<16)+(e=18e3*(65535&e)+(e>>16)&a)&a;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var s=o(4294967296*(n||t.random()));n=987654071*s(),a.push(4294967296*s()|0)}return new r.init(a,e)}}),s=a.enc={},c=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,a=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;a.push((i>>>4).toString(16)),a.push((15&i).toString(16))}return a.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a+=2)n[a>>>3]|=parseInt(t.substr(a,2),16)<<24-a%8*4;return new r.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,a=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;a.push(String.fromCharCode(i))}return a.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a++)n[a>>>2]|=(255&t.charCodeAt(a))<<24-a%4*8;return new r.init(n,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,a=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),c=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*i,u=t.min(4*c,o);if(c){for(var d=0;d<c;d+=i)this._doProcessBlock(a,d);var l=a.splice(0,c);n.sigBytes-=u}return new r.init(l,u)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(o.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math)})),et=Z((function(t,e){var n,a,o;t.exports=(a=(n=o=tt).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,a=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var r=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(a.charAt(r>>>6*(3-s)&63));var c=a.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var r=n.charAt(64);if(r){var s=t.indexOf(r);-1!==s&&(e=s)}return function(t,e,n){for(var o=[],i=0,r=0;r<e;r++)if(r%4){var s=n[t.charCodeAt(r-1)]<<r%4*2,c=n[t.charCodeAt(r)]>>>6-r%4*2;o[i>>>2]|=(s|c)<<24-i%4*8,i++}return a.create(o,i)}(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)})),nt=(Z((function(t,e){var n;t.exports=(n=tt,function(t){var e=n,a=e.lib,o=a.WordArray,i=a.Hasher,r=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=r.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var a=e+n,o=t[a];t[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,r=t[e+0],c=t[e+1],p=t[e+2],f=t[e+3],g=t[e+4],m=t[e+5],v=t[e+6],w=t[e+7],b=t[e+8],y=t[e+9],T=t[e+10],S=t[e+11],I=t[e+12],C=t[e+13],x=t[e+14],_=t[e+15],D=i[0],k=i[1],P=i[2],E=i[3];D=u(D,k,P,E,r,7,s[0]),E=u(E,D,k,P,c,12,s[1]),P=u(P,E,D,k,p,17,s[2]),k=u(k,P,E,D,f,22,s[3]),D=u(D,k,P,E,g,7,s[4]),E=u(E,D,k,P,m,12,s[5]),P=u(P,E,D,k,v,17,s[6]),k=u(k,P,E,D,w,22,s[7]),D=u(D,k,P,E,b,7,s[8]),E=u(E,D,k,P,y,12,s[9]),P=u(P,E,D,k,T,17,s[10]),k=u(k,P,E,D,S,22,s[11]),D=u(D,k,P,E,I,7,s[12]),E=u(E,D,k,P,C,12,s[13]),P=u(P,E,D,k,x,17,s[14]),D=d(D,k=u(k,P,E,D,_,22,s[15]),P,E,c,5,s[16]),E=d(E,D,k,P,v,9,s[17]),P=d(P,E,D,k,S,14,s[18]),k=d(k,P,E,D,r,20,s[19]),D=d(D,k,P,E,m,5,s[20]),E=d(E,D,k,P,T,9,s[21]),P=d(P,E,D,k,_,14,s[22]),k=d(k,P,E,D,g,20,s[23]),D=d(D,k,P,E,y,5,s[24]),E=d(E,D,k,P,x,9,s[25]),P=d(P,E,D,k,f,14,s[26]),k=d(k,P,E,D,b,20,s[27]),D=d(D,k,P,E,C,5,s[28]),E=d(E,D,k,P,p,9,s[29]),P=d(P,E,D,k,w,14,s[30]),D=l(D,k=d(k,P,E,D,I,20,s[31]),P,E,m,4,s[32]),E=l(E,D,k,P,b,11,s[33]),P=l(P,E,D,k,S,16,s[34]),k=l(k,P,E,D,x,23,s[35]),D=l(D,k,P,E,c,4,s[36]),E=l(E,D,k,P,g,11,s[37]),P=l(P,E,D,k,w,16,s[38]),k=l(k,P,E,D,T,23,s[39]),D=l(D,k,P,E,C,4,s[40]),E=l(E,D,k,P,r,11,s[41]),P=l(P,E,D,k,f,16,s[42]),k=l(k,P,E,D,v,23,s[43]),D=l(D,k,P,E,y,4,s[44]),E=l(E,D,k,P,I,11,s[45]),P=l(P,E,D,k,_,16,s[46]),D=h(D,k=l(k,P,E,D,p,23,s[47]),P,E,r,6,s[48]),E=h(E,D,k,P,w,10,s[49]),P=h(P,E,D,k,x,15,s[50]),k=h(k,P,E,D,m,21,s[51]),D=h(D,k,P,E,I,6,s[52]),E=h(E,D,k,P,f,10,s[53]),P=h(P,E,D,k,T,15,s[54]),k=h(k,P,E,D,c,21,s[55]),D=h(D,k,P,E,b,6,s[56]),E=h(E,D,k,P,_,10,s[57]),P=h(P,E,D,k,v,15,s[58]),k=h(k,P,E,D,C,21,s[59]),D=h(D,k,P,E,g,6,s[60]),E=h(E,D,k,P,S,10,s[61]),P=h(P,E,D,k,p,15,s[62]),k=h(k,P,E,D,y,21,s[63]),i[0]=i[0]+D|0,i[1]=i[1]+k|0,i[2]=i[2]+P|0,i[3]=i[3]+E|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(a/4294967296),r=a;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var d=c[u];c[u]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function u(t,e,n,a,o,i,r){var s=t+(e&n|~e&a)+o+r;return(s<<i|s>>>32-i)+e}function d(t,e,n,a,o,i,r){var s=t+(e&a|n&~a)+o+r;return(s<<i|s>>>32-i)+e}function l(t,e,n,a,o,i,r){var s=t+(e^n^a)+o+r;return(s<<i|s>>>32-i)+e}function h(t,e,n,a,o,i,r){var s=t+(n^(e|~a))+o+r;return(s<<i|s>>>32-i)+e}e.MD5=i._createHelper(c),e.HmacMD5=i._createHmacHelper(c)}(Math),n.MD5)})),Z((function(t,e){var n,a,o,i,r,s,c,u;t.exports=(a=(n=u=tt).lib,o=a.WordArray,i=a.Hasher,r=n.algo,s=[],c=r.SHA1=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,a=n[0],o=n[1],i=n[2],r=n[3],c=n[4],u=0;u<80;u++){if(u<16)s[u]=0|t[e+u];else{var d=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=d<<1|d>>>31}var l=(a<<5|a>>>27)+c+s[u];l+=u<20?1518500249+(o&i|~o&r):u<40?1859775393+(o^i^r):u<60?(o&i|o&r|i&r)-1894007588:(o^i^r)-899497514,c=r,r=i,i=o<<30|o>>>2,o=a,a=l}n[0]=n[0]+a|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+r|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;return e[a>>>5]|=128<<24-a%32,e[14+(a+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(a+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=i._createHelper(c),n.HmacSHA1=i._createHmacHelper(c),u.SHA1)})),Z((function(t,e){var n,a,o;t.exports=(a=(n=tt).lib.Base,o=n.enc.Utf8,void(n.algo.HMAC=a.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,a=4*n;e.sigBytes>a&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),r=this._iKey=e.clone(),s=i.words,c=r.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=r.sigBytes=a,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),Z((function(t,e){var n,a,o,i,r,s,c,u;t.exports=(o=(a=(n=u=tt).lib).Base,i=a.WordArray,s=(r=n.algo).MD5,c=r.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,a=n.hasher.create(),o=i.create(),r=o.words,s=n.keySize,c=n.iterations;r.length<s;){u&&a.update(u);var u=a.update(t).finalize(e);a.reset();for(var d=1;d<c;d++)u=a.finalize(u),a.reset();o.concat(u)}return o.sigBytes=4*s,o}}),n.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},u.EvpKDF)})),Z((function(t,e){var n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y;t.exports=void((n=tt).lib.Cipher||(a=n,o=a.lib,i=o.Base,r=o.WordArray,s=o.BufferedBlockAlgorithm,c=a.enc,c.Utf8,u=c.Base64,d=a.algo.EvpKDF,l=o.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?y:w}return function(e){return{encrypt:function(n,a,o){return t(a).encrypt(e,n,a,o)},decrypt:function(n,a,o){return t(a).decrypt(e,n,a,o)}}}}()}),o.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=a.mode={},p=o.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),f=h.CBC=function(){var t=p.extend();function e(t,e,n){var a=this._iv;if(a){var o=a;this._iv=void 0}else o=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=o[i]}return t.Encryptor=t.extend({processBlock:function(t,n){var a=this._cipher,o=a.blockSize;e.call(this,t,n,o),a.encryptBlock(t,n),this._prevBlock=t.slice(n,n+o)}}),t.Decryptor=t.extend({processBlock:function(t,n){var a=this._cipher,o=a.blockSize,i=t.slice(n,n+o);a.decryptBlock(t,n),e.call(this,t,n,o),this._prevBlock=i}}),t}(),g=(a.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,a=n-t.sigBytes%n,o=a<<24|a<<16|a<<8|a,i=[],s=0;s<a;s+=4)i.push(o);var c=r.create(i,a);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:g}),reset:function(){l.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=n.createEncryptor;else a=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==a?this._mode.init(this,e&&e.words):(this._mode=a.call(n,this,e&&e.words),this._mode.__creator=a)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4}),m=o.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(a.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var a=r.create([1398893684,1701076831]).concat(n).concat(e);else a=e;return a.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var a=r.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return m.create({ciphertext:e,salt:a})}},w=o.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,n,a){a=this.cfg.extend(a);var o=t.createEncryptor(n,a),i=o.finalize(e),r=o.cfg;return m.create({ciphertext:i,key:n,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:a.format})},decrypt:function(t,e,n,a){return a=this.cfg.extend(a),e=this._parse(e,a.format),t.createDecryptor(n,a).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=(a.kdf={}).OpenSSL={execute:function(t,e,n,a){a||(a=r.random(8));var o=d.create({keySize:e+n}).compute(t,a),i=r.create(o.words.slice(e),4*n);return o.sigBytes=4*e,m.create({key:o,iv:i,salt:a})}},y=o.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:b}),encrypt:function(t,e,n,a){var o=(a=this.cfg.extend(a)).kdf.execute(n,t.keySize,t.ivSize);a.iv=o.iv;var i=w.encrypt.call(this,t,e,o.key,a);return i.mixIn(o),i},decrypt:function(t,e,n,a){a=this.cfg.extend(a),e=this._parse(e,a.format);var o=a.kdf.execute(n,t.keySize,t.ivSize,e.salt);return a.iv=o.iv,w.decrypt.call(this,t,e,o.key,a)}})))})),Z((function(t,e){var n;t.exports=(n=tt,function(){var t=n,e=t.lib.BlockCipher,a=t.algo,o=[],i=[],r=[],s=[],c=[],u=[],d=[],l=[],h=[],p=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,a=0;for(e=0;e<256;e++){var f=a^a<<1^a<<2^a<<3^a<<4;f=f>>>8^255&f^99,o[n]=f,i[f]=n;var g=t[n],m=t[g],v=t[m],w=257*t[f]^16843008*f;r[n]=w<<24|w>>>8,s[n]=w<<16|w>>>16,c[n]=w<<8|w>>>24,u[n]=w,w=16843009*v^65537*m^257*g^16843008*n,d[f]=w<<24|w>>>8,l[f]=w<<16|w>>>16,h[f]=w<<8|w>>>24,p[f]=w,n?(n=g^t[t[t[v^g]]],a^=t[t[a]]):n=a=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=a.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,a=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],r=0;r<a;r++)if(r<n)i[r]=e[r];else{var s=i[r-1];r%n?n>6&&r%n==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=f[r/n|0]<<24),i[r]=i[r-n]^s}for(var c=this._invKeySchedule=[],u=0;u<a;u++)r=a-u,s=u%4?i[r]:i[r-4],c[u]=u<4||r<=4?s:d[o[s>>>24]]^l[o[s>>>16&255]]^h[o[s>>>8&255]]^p[o[255&s]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,r,s,c,u,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,d,l,h,p,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,a,o,i,r,s){for(var c=this._nRounds,u=t[e]^n[0],d=t[e+1]^n[1],l=t[e+2]^n[2],h=t[e+3]^n[3],p=4,f=1;f<c;f++){var g=a[u>>>24]^o[d>>>16&255]^i[l>>>8&255]^r[255&h]^n[p++],m=a[d>>>24]^o[l>>>16&255]^i[h>>>8&255]^r[255&u]^n[p++],v=a[l>>>24]^o[h>>>16&255]^i[u>>>8&255]^r[255&d]^n[p++],w=a[h>>>24]^o[u>>>16&255]^i[d>>>8&255]^r[255&l]^n[p++];u=g,d=m,l=v,h=w}g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[p++],m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[p++],v=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++],w=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^n[p++],t[e]=g,t[e+1]=m,t[e+2]=v,t[e+3]=w},keySize:8});t.AES=e._createHelper(g)}(),n.AES)}))),at=(Z((function(t,e){var n;t.exports=(n=tt,function(t){var e=n,a=e.lib,o=a.WordArray,i=a.Hasher,r=e.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),a=2;a<=n;a++)if(!(e%a))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var a=2,o=0;o<64;)e(a)&&(o<8&&(s[o]=n(t.pow(a,.5))),c[o]=n(t.pow(a,1/3)),o++),a++}();var u=[],d=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,a=n[0],o=n[1],i=n[2],r=n[3],s=n[4],d=n[5],l=n[6],h=n[7],p=0;p<64;p++){if(p<16)u[p]=0|t[e+p];else{var f=u[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=u[p-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[p]=g+u[p-7]+v+u[p-16]}var w=a&o^a&i^o&i,b=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),y=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&d^~s&l)+c[p]+u[p];h=l,l=d,d=s,s=r+y|0,r=i,i=o,o=a,a=y+(b+w)|0}n[0]=n[0]+a|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+r|0,n[4]=n[4]+s|0,n[5]=n[5]+d|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(a/4294967296),n[15+(o+64>>>9<<4)]=a,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(d),e.HmacSHA256=i._createHmacHelper(d)}(Math),n.SHA256)})),Z((function(t,e){t.exports=tt.HmacSHA256}))),ot={aes:nt,hmacSHA256:at,base64:et,hex:Z((function(t,e){t.exports=tt.enc.Hex})),utf8:Z((function(t,e){t.exports=tt.enc.Utf8})),padPkcs7:Z((function(t,e){t.exports=tt.pad.Pkcs7}))},it=ot.aes,rt=ot.hmacSHA256,st=ot.base64,ct=ot.hex,ut=ot.utf8,dt=ot.padPkcs7;function lt(t,e){if(!e)return"";var n,a=[];return Object.keys((n=t,(0,B.default)(n,(function(t){return void 0!==t})))).sort().forEach((function(e){var n,o=t[e];n=o,"[object String]"!==Object.prototype.toString.call(n)&&(o=JSON.stringify(o)),a.push("".concat(e,"=").concat(o))})),rt(a.join("&"),e).toString()}var ht=(_={},(0,N.default)(_,F,Q),(0,N.default)(_,H,X),_),pt={taskExecutor:void 0,init:function(t){var e=t.query,n=void 0===e?{}:e,a=t.reqParams,o=void 0===a?{}:a,i=t.sdkConfig,s=void 0===i?{}:i;s.debug&&(z=!1);var c=n.taskInfo,u=n.ttId;if(W("TaskSupplier 初始化开始 query:",n),c){if(!u)try{c=JSON.parse((d=c,l=[219,74,195,53,166,242,116,193,174,134,57,176,41,16,150,94,233,21,62,77,117,76,201,232,66,209,249,34,66,113,52,203].reduce((function(t,e){return t.toString(16)+e.toString(16)})),h=d,p={iv:ct.parse(h.slice(0,32)),padding:dt},it.decrypt(st.stringify(ct.parse(h.slice(32))),ct.parse(l),p).toString(ut)))}catch(t){(c=JSON.parse(decodeURIComponent(c))).outside||W("TaskSupplier Error: taskInfo解析失败",c)}var d,l,h,p;c.outside&&(c=function(t){var e=t.meter&&t.meter.ui||{},n=t.guide&&t.guide.ui||{},a=t.completeUI&&t.completeUI.ui||{},o=t.rule||{},i=t.guide&&t.guide.uiType||2,r=(0,L.default)((0,L.default)({},t),{},{completeUI:{uiType:i,ui:(0,L.default)({txtColor:n.txtColor||e.txtColor||"#FFFFFF",bgUrl:n.bgUrl||e.bgUrl,closeBg:q,message:"任务完成\n领取奖励",backBtn:{}},a)},rule:(0,L.default)({repeat:1,style:10,auto:!1},o)});return t.guide&&(r.guide={uiType:i,ui:(0,L.default)({txtColor:e.txtColor||"#FFFFFF",bgUrl:e.bgUrl,closeBg:q},n)}),t.meter&&(r.meter={uiType:i,ui:(0,L.default)({txtColor:n.txtColor||"#FFFFFF",bgUrl:n.bgUrl},e)}),r}(c));var f=c.rule,g=void 0===f?{}:f;if(g.expire&&Date.now()>g.expire)W("TaskSupplier Error: 任务已过期!");else{this.taskExecutor&&(this.taskExecutor.clear({isDone:!0,isClearUi:!0}),this.taskExecutor=void 0);var m=c.type,v=function(t){(0,k.default)(n,t);var e=j(n);function n(){return(0,A.default)(this,n),e.apply(this,arguments)}return(0,O.default)(n,[{key:"guide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.pages=this.getCurrentPage(),(0,D.default)((0,E.default)(n.prototype),"guide",this).call(this,t)}},{key:"compolete",value:function(t){var e,a,o,i,s,c,u=this,d=this,l={method:"POST",data:(0,L.default)({token:this.token},this.sdkConfig.reqParams)},h={taskId:this.id};if(this.outside&&(l.data=(0,L.default)({taskId:this.id,timestamp:Date.parse(new Date)},this.sdkParams),this.sdkConfig.extDomain&&(h.extDomain=this.sdkConfig.extDomain),l.header={"content-type":"application/x-www-form-urlencoded"}),this.sdkConfig.domain&&(h.domain=this.sdkConfig.domain),l.url=(e=h,a=this.outside,o=e.taskId,i=e.domain,s=void 0===i?"https://eopa.baidu.com":i,c=e.extDomain,a?"".concat(void 0===c?"https://activity.baidu.com":c,"/incentive/biztask/external/complete"):"".concat(s,"/api/task/external/").concat(o,"/complete")),this.sdkConfig.useBdtls&&!this.outside){var p=r.getEnvInfoSync().scheme;G.includes(p)&&(l.ext={serviceId:"ug_task",enableBdtls:!0,customHost:"https://ug.baidu.com"})}var f=this.sdkConfig.callBackMap;f&&f[this.id]&&f[this.id].reqCallback&&(l=f[this.id].reqCallback(l)),l.data.sign=lt(l.data,this.sdkConfig.secretMap[this.id]),W("TaskSupplier 发送请求",l),r.request((0,L.default)((0,L.default)({},l),{},{success:function(e){var a=e.data,o=e.statusCode;if(d.clear({isDone:!0,isClearUi:!0}),W("TaskSupplier 请求成功",a),f&&f[u.id]&&f[u.id].resCallback&&(a=f[u.id].resCallback(a)),200===o&&0===a.errno){var i,r;u.outside&&((null===(i=a.data)||void 0===i?void 0:i.schema)&&(u.completeUI.ui.backBtn.schema=null===(r=a.data)||void 0===r?void 0:r.schema),a.data=(0,L.default)((0,L.default)({},a.data),u.completeUI));var s=a.data,c=s.progress,l=s.ui,h=s.uiType;d.clear({isDone:!c||c.done});var p=t&&t.compolete&&t.compolete.allPages;(0,D.default)((0,E.default)(n.prototype),"compolete",u).call(u,{uiType:h,ui:(0,L.default)((0,L.default)({},l),{},{message:V(l.message,{total:c&&c.total,complete:c&&c.complete,left:c&&c.total-c&&c.complete}),proportion:100,isCompolete:!0}),page:p?"":d.getCurrentPage(),noJump:!!d.sdkConfig.noJump})}},fail:function(t){d.clear({isDone:!0,isClearUi:!0}),W("TaskSupplier 请求异常",t)}}))}},{key:"getCurrentPage",value:function(){var t=getCurrentPages();return t[t.length-1].route}}]),n}(ht[+m]);this.taskExecutor=new v,this.taskExecutor.init((0,L.default)((0,L.default)({},c),{},{reqParams:o,sdkConfig:s})),this.taskExecutor.getCando()?W("TaskSupplier 初始化成功!"):W("TaskSupplier 初始化失败!")}}else W("TaskSupplier Error: taskInfo 不存在")},isTaskUser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!!this.taskExecutor&&this.taskExecutor.getCando();return e&&t.id&&(e=this.taskExecutor.isIdMatch(t.id)),e},execute:function(t){var e=t.command,n=t.aid,a=t.params,o=t.id;if(this.taskExecutor)if("clear"===e&&o&&this.taskExecutor.isIdMatch(o))this.taskExecutor.clear({isDone:!0,isClearUi:!0});else if(this.taskExecutor.isActionMatch(n)&&this.taskExecutor.getCando()&&this.taskExecutor[e])return this.taskExecutor[e](a)}};n.taskSupplier=pt})),window.define("225",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(226);function C(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=C=Reflect.get:e.exports=C=function(t,e,n){var a=I(t,e);if(a){var o=Object.getOwnPropertyDescriptor(a,e);return o.get?o.get.call(n):o.value}},C(t,n,a||t)}e.exports=C})),window.define("226",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(227);e.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}})),window.define("227",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){function I(t){return e.exports=I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}e.exports=I})),window.define("228",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(229);e.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}})),window.define("229",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){function I(t,n){return e.exports=I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,n)}e.exports=I})),window.define("230",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){var I=t(18),C=t(231);e.exports=function(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?C(t):e}})),window.define("231",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){e.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}})),window.define("236",(function(t,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";(function(a){var i=t(10)(t(18)),r="[object Arguments]",s="[object Map]",c="[object Object]",u="[object Set]",d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,p=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,m=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[r]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object Boolean]"]=w["[object DataView]"]=w["[object Date]"]=w["[object Error]"]=w["[object Function]"]=w[s]=w["[object Number]"]=w[c]=w["[object RegExp]"]=w[u]=w["[object String]"]=w["[object WeakMap]"]=!1;var b="object"==(void 0===e?"undefined":(0,i.default)(e))&&e&&e.Object===Object&&e,y="object"==(void 0===l?"undefined":(0,i.default)(l))&&l&&l.Object===Object&&l,T=b||y||n("return this")(),S="object"==(0,i.default)(o)&&o&&!o.nodeType&&o,I=S&&"object"==(0,i.default)(a)&&a&&!a.nodeType&&a,C=I&&I.exports===S&&b.process,x=function(){try{return C&&C.binding("util")}catch(t){}}(),_=x&&x.isTypedArray;function D(t,e){for(var n=-1,a=e.length,o=t.length;++n<a;)t[o+n]=e[n];return t}function k(t,e){for(var n=-1,a=t?t.length:0;++n<a;)if(e(t[n],n,t))return!0;return!1}function P(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function E(t){var e=-1,n=Array(t.size);return t.forEach((function(t,a){n[++e]=[a,t]})),n}function L(t,e){return function(n){return t(e(n))}}function A(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var O,N=Array.prototype,R=n.prototype,B=Object.prototype,j=T["__core-js_shared__"],U=(O=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",M=R.toString,F=B.hasOwnProperty,H=B.toString,G=RegExp("^"+M.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=T.Symbol,q=T.Uint8Array,V=L(Object.getPrototypeOf,Object),Y=B.propertyIsEnumerable,z=N.splice,W=Object.getOwnPropertySymbols,K=L(Object.keys,Object),J=Dt(T,"DataView"),Q=Dt(T,"Map"),X=Dt(T,"Promise"),Z=Dt(T,"Set"),tt=Dt(T,"WeakMap"),et=Dt(Object,"create"),nt=Ut(J),at=Ut(Q),ot=Ut(X),it=Ut(Z),rt=Ut(tt),st=$?$.prototype:void 0,ct=st?st.valueOf:void 0,ut=st?st.toString:void 0;function dt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}function lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}function ht(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}function pt(t){var e=-1,n=t?t.length:0;for(this.__data__=new ht;++e<n;)this.add(t[e])}function ft(t){this.__data__=new lt(t)}function gt(t,e){var n=Gt(t)||Ht(t)?function(t,e){for(var n=-1,a=Array(t);++n<t;)a[n]=e(n);return a}(t.length,String):[],a=n.length,o=!!a;for(var i in t)!e&&!F.call(t,i)||o&&("length"==i||Lt(i,a))||n.push(i);return n}function mt(t,e){for(var n=t.length;n--;)if(Ft(t[n][0],e))return n;return-1}function vt(t,e){for(var n=0,a=(e=At(e,t)?[e]:It(e)).length;null!=t&&n<a;)t=t[jt(e[n++])];return n&&n==a?t:void 0}function wt(t,e){return null!=t&&e in Object(t)}function bt(t,e,n,a,o){return t===e||(null==t||null==e||!Yt(t)&&!zt(e)?t!=t&&e!=e:function(t,e,n,a,o,i){var d=Gt(t),l=Gt(e),h="[object Array]",p="[object Array]";d||(h=(h=Et(t))==r?c:h);l||(p=(p=Et(e))==r?c:p);var f=h==c&&!P(t),g=p==c&&!P(e),m=h==p;if(m&&!f)return i||(i=new ft),d||Jt(t)?Ct(t,e,n,a,o,i):function(t,e,n,a,o,i,r){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new q(t),new q(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ft(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case s:var c=E;case u:var d=2&i;if(c||(c=A),t.size!=e.size&&!d)return!1;var l=r.get(t);if(l)return l==e;i|=1,r.set(t,e);var h=Ct(c(t),c(e),a,o,i,r);return r.delete(t),h;case"[object Symbol]":if(ct)return ct.call(t)==ct.call(e)}return!1}(t,e,h,n,a,o,i);if(!(2&o)){var v=f&&F.call(t,"__wrapped__"),w=g&&F.call(e,"__wrapped__");if(v||w){var b=v?t.value():t,y=w?e.value():e;return i||(i=new ft),n(b,y,a,o,i)}}if(!m)return!1;return i||(i=new ft),function(t,e,n,a,o,i){var r=2&o,s=Qt(t),c=s.length,u=Qt(e).length;if(c!=u&&!r)return!1;var d=c;for(;d--;){var l=s[d];if(!(r?l in e:F.call(e,l)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var p=!0;i.set(t,e),i.set(e,t);var f=r;for(;++d<c;){l=s[d];var g=t[l],m=e[l];if(a)var v=r?a(m,g,l,e,t,i):a(g,m,l,t,e,i);if(!(void 0===v?g===m||n(g,m,a,o,i):v)){p=!1;break}f||(f="constructor"==l)}if(p&&!f){var w=t.constructor,b=e.constructor;w==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,n,a,o,i)}(t,e,bt,n,a,o))}function yt(t){return!(!Yt(t)||(e=t,U&&U in e))&&(qt(t)||P(t)?G:m).test(Ut(t));var e}function Tt(t){return"function"==typeof t?t:null==t?Zt:"object"==(0,i.default)(t)?Gt(t)?function(t,e){if(At(t)&&Nt(e))return Rt(jt(t),e);return function(n){var a=function(t,e,n){var a=null==t?void 0:vt(t,e);return void 0===a?n:a}(n,t);return void 0===a&&a===e?function(t,e){return null!=t&&function(t,e,n){e=At(e,t)?[e]:It(e);var a,o=-1,i=e.length;for(;++o<i;){var r=jt(e[o]);if(!(a=null!=t&&n(t,r)))break;t=t[r]}if(a)return a;return!!(i=t?t.length:0)&&Vt(i)&&Lt(r,i)&&(Gt(t)||Ht(t))}(t,e,wt)}(n,t):bt(e,a,void 0,3)}}(t[0],t[1]):function(t){var e=function(t){var e=Qt(t),n=e.length;for(;n--;){var a=e[n],o=t[a];e[n]=[a,o,Nt(o)]}return e}(t);if(1==e.length&&e[0][2])return Rt(e[0][0],e[0][1]);return function(n){return n===t||function(t,e,n,a){var o=n.length,i=o,r=!a;if(null==t)return!i;for(t=Object(t);o--;){var s=n[o];if(r&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var c=(s=n[o])[0],u=t[c],d=s[1];if(r&&s[2]){if(void 0===u&&!(c in t))return!1}else{var l=new ft;if(a)var h=a(u,d,c,t,e,l);if(!(void 0===h?bt(d,u,a,3,l):h))return!1}}return!0}(n,t,e)}}(t):At(e=t)?(n=jt(e),function(t){return null==t?void 0:t[n]}):function(t){return function(e){return vt(e,t)}}(e);var e,n}function St(t){if(!Yt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Ot(t),n=[];for(var a in t)("constructor"!=a||!e&&F.call(t,a))&&n.push(a);return n}function It(t){return Gt(t)?t:Bt(t)}function Ct(t,e,n,a,o,i){var r=2&o,s=t.length,c=e.length;if(s!=c&&!(r&&c>s))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var d=-1,l=!0,h=1&o?new pt:void 0;for(i.set(t,e),i.set(e,t);++d<s;){var p=t[d],f=e[d];if(a)var g=r?a(f,p,d,e,t,i):a(p,f,d,t,e,i);if(void 0!==g){if(g)continue;l=!1;break}if(h){if(!k(e,(function(t,e){if(!h.has(e)&&(p===t||n(p,t,a,o,i)))return h.add(e)}))){l=!1;break}}else if(p!==f&&!n(p,f,a,o,i)){l=!1;break}}return i.delete(t),i.delete(e),l}function xt(t){return function(t,e,n){var a=e(t);return Gt(t)?a:D(a,n(t))}(t,Xt,Pt)}function _t(t,e){var n,a,o=t.__data__;return n=e,("string"==(a=(0,i.default)(n))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Dt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return yt(n)?n:void 0}dt.prototype.clear=function(){this.__data__=et?et(null):{}},dt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},dt.prototype.get=function(t){var e=this.__data__;if(et){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return F.call(e,t)?e[t]:void 0},dt.prototype.has=function(t){var e=this.__data__;return et?void 0!==e[t]:F.call(e,t)},dt.prototype.set=function(t,e){return this.__data__[t]=et&&void 0===e?"__lodash_hash_undefined__":e,this},lt.prototype.clear=function(){this.__data__=[]},lt.prototype.delete=function(t){var e=this.__data__,n=mt(e,t);return!(n<0)&&(n==e.length-1?e.pop():z.call(e,n,1),!0)},lt.prototype.get=function(t){var e=this.__data__,n=mt(e,t);return n<0?void 0:e[n][1]},lt.prototype.has=function(t){return mt(this.__data__,t)>-1},lt.prototype.set=function(t,e){var n=this.__data__,a=mt(n,t);return a<0?n.push([t,e]):n[a][1]=e,this},ht.prototype.clear=function(){this.__data__={hash:new dt,map:new(Q||lt),string:new dt}},ht.prototype.delete=function(t){return _t(this,t).delete(t)},ht.prototype.get=function(t){return _t(this,t).get(t)},ht.prototype.has=function(t){return _t(this,t).has(t)},ht.prototype.set=function(t,e){return _t(this,t).set(t,e),this},pt.prototype.add=pt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},pt.prototype.has=function(t){return this.__data__.has(t)},ft.prototype.clear=function(){this.__data__=new lt},ft.prototype.delete=function(t){return this.__data__.delete(t)},ft.prototype.get=function(t){return this.__data__.get(t)},ft.prototype.has=function(t){return this.__data__.has(t)},ft.prototype.set=function(t,e){var n=this.__data__;if(n instanceof lt){var a=n.__data__;if(!Q||a.length<199)return a.push([t,e]),this;n=this.__data__=new ht(a)}return n.set(t,e),this};var kt=W?L(W,Object):te,Pt=W?function(t){for(var e=[];t;)D(e,kt(t)),t=V(t);return e}:te,Et=function(t){return H.call(t)};function Lt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||v.test(t))&&t>-1&&t%1==0&&t<e}function At(t,e){if(Gt(t))return!1;var n=(0,i.default)(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Wt(t))||(h.test(t)||!d.test(t)||null!=e&&t in Object(e))}function Ot(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||B)}function Nt(t){return t==t&&!Yt(t)}function Rt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(J&&"[object DataView]"!=Et(new J(new ArrayBuffer(1)))||Q&&Et(new Q)!=s||X&&"[object Promise]"!=Et(X.resolve())||Z&&Et(new Z)!=u||tt&&"[object WeakMap]"!=Et(new tt))&&(Et=function(t){var e=H.call(t),n=e==c?t.constructor:void 0,a=n?Ut(n):void 0;if(a)switch(a){case nt:return"[object DataView]";case at:return s;case ot:return"[object Promise]";case it:return u;case rt:return"[object WeakMap]"}return e});var Bt=Mt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Wt(t))return ut?ut.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return p.test(t)&&n.push(""),t.replace(f,(function(t,e,a,o){n.push(a?o.replace(g,"$1"):e||t)})),n}));function jt(t){if("string"==typeof t||Wt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ut(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Mt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var a=arguments,o=e?e.apply(this,a):a[0],i=n.cache;if(i.has(o))return i.get(o);var r=t.apply(this,a);return n.cache=i.set(o,r),r};return n.cache=new(Mt.Cache||ht),n}function Ft(t,e){return t===e||t!=t&&e!=e}function Ht(t){return function(t){return zt(t)&&$t(t)}(t)&&F.call(t,"callee")&&(!Y.call(t,"callee")||H.call(t)==r)}Mt.Cache=ht;var Gt=Array.isArray;function $t(t){return null!=t&&Vt(t.length)&&!qt(t)}function qt(t){var e=Yt(t)?H.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function Vt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Yt(t){var e=(0,i.default)(t);return!!t&&("object"==e||"function"==e)}function zt(t){return!!t&&"object"==(0,i.default)(t)}function Wt(t){return"symbol"==(0,i.default)(t)||zt(t)&&"[object Symbol]"==H.call(t)}var Kt,Jt=_?(Kt=_,function(t){return Kt(t)}):function(t){return zt(t)&&Vt(t.length)&&!!w[H.call(t)]};function Qt(t){return $t(t)?gt(t):function(t){if(!Ot(t))return K(t);var e=[];for(var n in Object(t))F.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function Xt(t){return $t(t)?gt(t,!0):St(t)}function Zt(t){return t}function te(){return[]}a.exports=function(t,e){return null==t?{}:function(t,e,n){for(var a=-1,o=e.length,i={};++a<o;){var r=e[a],s=t[r];n(s,r)&&(i[r]=s)}return i}(t,xt(t),Tt(e))}}).call(this,t(235)(a))})),window.define("238",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{showPop:{type:Boolean,value:!1},toastStyle:{type:Object,value:null},coupon:{type:Object,value:null},liebianCoupon:{type:Object,value:null},drawCouponToast:{type:Object,value:null},finishToast:{type:Object,value:null},invalidToast:{type:Object,value:null}},methods:{tapShareBtn:function(t){var e=t.currentTarget.dataset,n=e.canalName,a=e.position;this.triggerEvent("tapShareBtn",{canalName:n,position:a})},tapPopClose:function(t){var e=t.currentTarget.dataset.position;this.triggerEvent("tapPopClose",{position:e})},tapPopBtn:function(t){this.triggerEvent("tapPopBtn",t)},tapPopGo:function(t){this.triggerEvent("tapPopGo",t)}}})})),window.define("240",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=t(241),x=I(t(242)),_=(0,C.isLogin)();Component({properties:{eventName:{type:String,value:""},type:{type:String,value:"login"},dataset:{type:Object,value:""},dataMod:{type:String,value:""},ubcFrom:{type:String,value:""},autoMod:{type:Boolean,value:!0},position:{type:String,value:"relative"},needFlex:{type:Boolean,value:!1},zIndex:{type:[String,Number],value:"1"}},methods:{baseHandle:function(t){var e=this.data,n=e.dataMod,a=e.autoMod,o=e.ubcFrom,i=this.data.dataset;n&&(i=Object.assign({},i||{},{mod:n}));var r={};try{r=JSON.parse(n)||{}}catch(t){r={}}return a&&n&&Object.keys(r).length&&(o?x.default.sendLog(r,"click",{from:o}):x.default.sendLog(r,"click")),t.currentTarget.dataset=i,t.target.dataset=i,t},loginHandle:function(t){var e=this;if(t.eventName=this.data.eventName,t=this.baseHandle(t),"button"===this.data.type)return Object.assign(t,{isLogin:_}),console.log("button: ",t),void(this.data.eventName?this.dispatch("loginhandle",t):this.triggerEvent("loginhandle",t));(0,C.getLoginCode)().then((function(n){Object.assign(t,n,{isLogin:!0,change:!0!==_}),_=!0,e.data.eventName?(e.dispatch("loginsuccess",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginsuccess",t),e.triggerEvent("loginhandle",t))})).catch((function(n){Object.assign(t,n,{isLogin:!1}),e.data.eventName?(e.dispatch("loginfail",t),e.dispatch("loginhandle",t)):(e.triggerEvent("loginfail",t),e.triggerEvent("loginhandle",t))}))},getPhoneNumber:function(t){this.triggerEvent("getPhoneNumber",t)}}})})),window.define("241",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isLogin=function(){if(i&&i().loginData&&i().loginData.bduss)return!0;return o.isLoginSync().isLogin},n.getLoginCode=function(){return new Promise((function(t,e){o.getLoginCode({success:function(e){t(e)},fail:function(t){e(t)}})}))}})),window.define("242",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var x=C(t(15)),_=t(243),D={sendLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_.ubcLogger.send((0,x.default)((0,x.default)({},n),{},{type:e,ext:t}))},set:function(t){a((function(){_.ubcLogger.set((0,x.default)({},t))}),200)}};n.default=D})),window.define("246",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(15)),_=C(t(247)).default.calcTime,D=null;Component({countDownTime:null,properties:{position:{type:String,value:"absolute"},canalName:{type:String,value:""},shareAjaxLock:{type:Boolean,value:!1},isLogin:{type:Boolean,value:!0},entryPageInfo:{type:Object,value:null},couponNum:{type:Number,value:3},coupon:{type:Object,value:null},liebianCoupon:{type:Object,value:null,observer:function(t){var e=t.remainTime;e&&e>=0&&this.data.isLogin?(this.setData({remainTimeNum:_(e)}),this.countDown(e-1)):e<0&&this.setData({remainTimeNum:0})}},vipCoupon:{type:Object,value:null},hideDetail:{type:Boolean,value:!1}},pageLifetimes:{show:function(){this.handleHideToast()},hide:function(){clearInterval(this.countDownTime)}},data:{remainTimeNum:"",currentCouponTipsType:"",entryImgKeyArr:["entryBigImg","entryImg","entrySmallImg"]},observers:{},methods:{handleTapTips:function(t){var e=this,n=this.data.currentCouponTipsType,a=t.currentTarget.dataset.couponType;n!==a&&this.setData({currentCouponTipsType:a},(function(){e.handleHideToast()}))},handleHideToast:function(){var t=this;clearTimeout(D),D=a((function(){t.setData({currentCouponTipsType:""})}),3e3)},loginHandle:function(t){this.triggerEvent("loginhandle",t)},countDown:function(t){var e=this;t<=0?this.triggerEvent("refresh"):(clearTimeout(this.countDownTime),this.countDownTime=a((function(){e.setData({remainTimeNum:_(t)},(function(){t--,e.countDown(t)}))}),1e3))},toRedPacket:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpType,o=e.canalName;this.triggerEvent("toRedPacket",{jumpUrl:n,jumpType:a,canalName:o})},tapCommonBtn:function(t){var e=t.currentTarget.dataset,n=e.item,a=e.canalName;this.triggerEvent("tapCommonBtn",(0,x.default)((0,x.default)({},n),{},{canalName:a}))},tapToDetail:function(t){var e=t.currentTarget.dataset,n=e.item,a=e.canalName;this.triggerEvent("tapToDetail",(0,x.default)((0,x.default)({},n),{},{canalName:a}))},tapShareBtn:function(t){var e=t.currentTarget.dataset,n=e.canalName,a=e.position;this.triggerEvent("tapShareBtn",{canalName:n,position:a})},tapVipBtn:function(t){var e=t.currentTarget.dataset,n=e.item,a=e.canalName;this.triggerEvent("tapVipBtn",(0,x.default)((0,x.default)({},n),{},{canalName:a}))},tapDesc:function(t){var e=t.currentTarget.dataset.item;this.triggerEvent("tapDesc",(0,x.default)({},e))}}})})),window.define("247",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(41),C=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var x=C(t(248)),_=I(t(150)),D=I(t(249)),k=I(t(250));k.request.get=k.default.get,k.request.post=k.default.post;var P=Object.assign({},x.default,_,D,{request:k.request});n.default=P})),window.define("248",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";(function(e){var o,i,r,s,c=t(10)(t(18));s=function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==(0,c.default)(t)&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){var a=n(2),o=n(3),i=n(4),r=n(6);t.exports=function(t,e){return a(t)||o(t,e)||i(t,e)||r()}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==(0,c.default)(Symbol.iterator)?t.exports=n=function(t){return(0,c.default)(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":(0,c.default)(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return n}}},function(t,e,n){var a=n(5);t.exports=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){n.r(e);var o={};n.r(o),n.d(o,"isSymbol",(function(){return p})),n.d(o,"isObject",(function(){return f})),n.d(o,"isEmptyObject",(function(){return g})),n.d(o,"isString",(function(){return m})),n.d(o,"isPlainObject",(function(){return v})),n.d(o,"isKey",(function(){return w})),n.d(o,"isFunction",(function(){return b})),n.d(o,"isArray",(function(){return y})),n.d(o,"toString",(function(){return T})),n.d(o,"tagTester",(function(){return S})),n.d(o,"isTelephoneNum",(function(){return I})),n.d(o,"compareVersion",(function(){return C}));var i={};n.r(i),n.d(i,"assign",(function(){return x})),n.d(i,"pickKeysInObject",(function(){return _}));var r={};n.r(r),n.d(r,"deepAssign",(function(){return j}));var s={};n.r(s),n.d(s,"stringifyQuery",(function(){return W})),n.d(s,"stringifyURL",(function(){return K})),n.d(s,"parseQuery",(function(){return J})),n.d(s,"parseURL",(function(){return Q}));var c={};n.r(c),n.d(c,"formatDecimal",(function(){return Z}));var u=n(1),d=n.n(u),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/;function p(t){return"symbol"===d()(t)||f(t)&&"[object Symbol]"===Object.prototype.toString(t)}function f(t){return"object"===d()(t)&&null!==t}function g(t){return v(t)&&0===Object.keys(t).length}function m(t){return"[object String]"===Object.prototype.toString.call(t)}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("[object Object]"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&t instanceof n}function w(t,e){if(Array.isArray(t))return!1;var n=d()(t);return!("number"!==n&&"symbol"!==n&&"boolean"!==n&&null!==t&&!p(t))||h.test(t)||!l.test(t)||null!==e&&t in Object(e)}function b(t){return"function"==typeof t}function y(t){return Array.isArray(t)}var T=Object.prototype.toString;function S(t,e){return T.call(e)==="[object "+t+"]"}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^1[3-9][0-9]{9}$/.test(t)||/^\*{7}[0-9]{4}$/.test(t)}function C(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var a=0;a<n;a++){var o=parseInt(t[a],10),i=parseInt(e[a],10);if(o>i)return 1;if(o<i)return-1}return 0}function x(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[0]=e[0]||{},Object.assign.apply(Object,e)}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return e.forEach((function(e){"string"==typeof e&&Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})),n}function D(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{mapObject:!1},o=a.mapObject;if(!y(t)&&!f(t))return t;var i=y(t)?t:Object.keys(t),r=y(t)?function(t){return t}:function(t,e){return e[t]},s={},c=[],u=f(t)&&o?function(t,e){s[e]=t}:function(t){c.push(t)};return Array.prototype.forEach.call(i,(function(a){var o=r.call(n,a,t);o=b(e)?e.call(n,o,a,t):o,u.call(n,o,a)})),f(t)&&o?s:c}var k=Symbol.prototype.toString;function P(t){if("string"==typeof t)return t;if(y(t))return D(t,P).toString();if(null==t)return"";if(v(t))return JSON.stringify(t);if(p(t))return k?k.call(t):"";var e="".concat(t);return"0"===e&&1/t==-1/0?"-0":e}var E=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,L=/\\(\\)?/g;function A(t){if("string"==typeof t||p(t))return t;var e=t+"";return"0"===e&&1/t==-1/0?"-0":e}function O(t,e){for(var n=0,a=(e=function(t,e){return y(t)?t:w(t,e)?[t]:(n=P(t),a=[],46===n.charCodeAt(0)&&a.push(""),n.replace(E,(function(t,e,n,o){a.push(n?o.replace(L,"$1"):e||t)})),a);var n,a}(e,t)).length;null!=t&&n<a;)t=t[A(e[n++])];return n&&n===a?t:void 0}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=O(t,e);return null==a?n:a}function R(t,e,n){var o,i,r,s,c,u,d=0,l=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=o,a=i;return o=i=void 0,d=e,s=t.apply(a,n)}function g(t){return d=t,c=a(w,e),l?f(t):s}function m(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-d>=r}function w(){var t=Date.now();if(m(t))return b(t);c=a(w,function(t){var n=t-d,a=e-(t-u);return h?Math.min(a,r-n):a}(t))}function b(t){return c=void 0,p&&o?f(t):(o=i=void 0,s)}function y(){for(var t=Date.now(),n=m(t),r=arguments.length,d=new Array(r),l=0;l<r;l++)d[l]=arguments[l];if(o=Array.prototype.slice.call(d),i=this,u=t,n){if(void 0===c)return g(u);if(h)return c=a(w,e),f(u)}return void 0===c&&(c=a(w,e)),s}return e=+e||0,v(n)&&(l=!!n.leading,r=(h="maxWait"in n)?Math.max(+n.maxWait||0,e):r,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==c&&clearTimeout(c),d=0,o=u=i=c=void 0},y.flush=function(){return void 0===c?s:b(Date.now())},y}function B(t,e){if(t||(t=y(e)?[]:{}),f(e))for(var n in e)e.hasOwnProperty(n)&&(t[n]=f(e[n])?B(t[n],e[n]):e[n]);return t}function j(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(B,e[0])}var U=n(0),M=n.n(U);function F(t){return m(t)&&1===t.length}function H(t,e){return t=P(t),e.encode?encodeURIComponent(t):t}function G(t,e){return e.decode&&null!=t?(t=t.replace(/\+/g," "),decodeURIComponent(t)):t}function $(t,e){return void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n=t.indexOf(e);return""===e||-1===n?[t]:[t.substring(0,n),t.substring(n+1)]}function V(t,e,n,a){return t.filter((function(t){return!$(t,a)})).map((function(t,o){return n(e,t,o,a)})).join("&")}function Y(t,e,n){return null!==e?"".concat(H(t,n),"=").concat(H(e,n)):"".concat(H(t,n))}function z(t,e){return e.parseBoolean&&null!=t&&["true","false"].includes(t.toLowerCase())&&(t="true"===t.toLowerCase()),e.parseNumber&&null!=t&&!Number.isNaN(Number(t))&&Number.isFinite(Number(t))&&"string"==typeof t&&""!==t.trim()&&(t=+t),t}function W(t,e){if(!f(t))throw new TypeError("Expect a Object");if(!F((e=Object.assign({encode:!0,queryFormat:"none",queryFormatSeparator:",",parseFormat:"array",parseFormatSeparator:",",skipNull:!1,skipEmptyString:!1},e)).queryFormatSeparator)||!F(e.parseFormatSeparator))throw new TypeError("Separator should be a single character");for(var n=[],a=function(t){var e,n=t.queryFormat,a=t.queryFormatSeparator,o=t.parseFormat,i=t.parseFormatSeparator;switch(n){case"bracket":e=function(t,e,n,a){return null===e?"".concat(H(t,a),"[]"):"".concat(H(t,a),"[]=").concat(H(e,a))};break;case"index":e=function(t,e,n,a){return null===e?"".concat(H(t,a),"[").concat(n,"]"):"".concat(H(t,a),"[").concat(n,"]=").concat(H(e,a))};break;case"separator":return"string"===o?function(e,n){var o=m(n)?n.split(i):[];if(o.length>1){var r=o.filter((function(t){return null!=t&&""!==t})).map((function(e){return H(e,t)})).join(a);return"".concat(H(e,t),"=").concat(r)}return Y(e,n,t)}:function(e,n){if(Array.isArray(n)){var o=n.filter((function(t){return null!=t&&""!==t})).map((function(e){return H(e,t)})).join(a);return o?"".concat(H(e,t),"=").concat(o):""}return Y(e,n,t)};default:e=function(t,e,n,a){return null===e?"".concat(H(t,a)):"".concat(H(t,a),"=").concat(H(e,a))}}return"string"===o?function(t,e){return function(n,a){var o=m(a)?a.split(e.parseFormatSeparator):[];return o.length>1?V(o,n,t,e):Y(n,a,e)}}(e,t):function(t,e){return function(n,a){return Array.isArray(a)?V(a,n,t,e):Y(n,a,e)}}(e,t)}(e),o=0,i=Object.entries(t);o<i.length;o++){var r=M()(i[o],2),s=r[0],c=r[1];if(!$(c,e)&&null!=s){var u=a(s,c);u&&n.push(u)}}return n.join("&")}function K(t,e){if(!f(t))throw new TypeError("Expect a Object");e=Object.assign({encode:!0},e);var n,a,o=t.url,i=t.query,r=t.hash,s=void 0===r?"":r,c=q(o,"#"),u=M()(c,2);o=u[0],a=u[1];var d=q(o,"?"),l=M()(d,2);if(o=l[0],void 0!==(n=l[1])){var h=J(n);i=f(i)?Object.assign({},h,i):h}return f(i)&&(i=W(i,e)),i=i?"?".concat(i):"",s?s=e.encode?"#".concat(H(s,{encode:!0})):"#".concat(s):a&&(s="#".concat(a)),"".concat(o).concat(i).concat(s)}function J(t,e){if(!m(t))throw new TypeError("Expected a string");if(!F((e=Object.assign({decode:!0,queryFormat:"none",queryFormatSeparator:",",parseFormat:"array",parseFormatSeparator:",",rewrite:!1,parseNumber:!1,parseBoolean:!1},e)).queryFormatSeparator)||!F(e.parseFormatSeparator))throw new TypeError("Separator should be a single character");var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!m(t))return"";var e=(t=X(t)).indexOf("?");return-1!==e?t.substring(e+1):t}(t),a={},o=function(t){var e=t.queryFormat,n=t.queryFormatSeparator;switch(e){case"bracket":return function(e,n,a){var o=/(\[\])$/.exec(e);if(n=G(n,t),o){var i=a[e=e.replace(/(\[\])$/,"")];a[e]=i?[].concat(i,n):[n]}else a[e]=n};case"index":return function(e,n,a){var o=/\[(\d*)\]$/.exec(e);if(n=G(n,t),o)return a[e=e.replace(/\[(\d*)\]$/,"")]=a[e]||[],void(a[e][o[1]]=n);a[e]=n};case"separator":return function(e,a,o){var i=a?a.split(n):[""];i.length>1?o[e]=i.map((function(e){return G(e,t)})):o[e]=G(a,t)};default:return function(e,n,a){var o=a[e];n=G(n,t),a[e]=void 0!==o?[].concat(o,n):n}}}(e);n.split("&").forEach((function(t){var n,i=q(t,"="),r=M()(i,2),s=r[0],c=r[1],u=void 0===c?null:c;(m(n=s)?""!==n.trim():n)&&(s=G(s,e),o(s,u,a))}));var i=function(t){var e=t.parseFormat,n=t.parseFormatSeparator,a=t.rewrite;switch(e){case"array":return function(e,n,a){Array.isArray(n)?a[e]=n.filter((function(t){return void 0!==t})).map((function(e){return z(e,t)})):a[e]=z(n,t)};case"string":return function(e,o,i){if(Array.isArray(o))return o=o.filter((function(t){return void 0!==t})),void(i[e]=a?z(o.pop(),t):o.join(n));i[e]=z(o,t)}}}(e);return Object.entries(a).forEach((function(t){var e=M()(t,2),n=e[0],o=e[1];i(n,o,a)})),a}function Q(t,e){if(!m(t))throw new TypeError("Expected a string");e=Object.assign({decode:!0},e);var n=q(t,"#"),a=M()(n,2),o=a[0],i=a[1],r=void 0===i?"":i,s=q(o,"?"),c=M()(s,2),u=c[0],d=c[1],l=void 0===d?"":d;return{url:u,path:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!m(t))return"";var e=t.replace(/(http|https)?:?\/\//,""),n=e.indexOf("/");return-1!==n?e.substring(n):""}(u),query:l=J(l,e),hash:G(r,e)}}function X(t){return q(t,"#")[0]}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t=parseFloat(t),isNaN(t))throw"TypeError";if(n)return Number(t.toFixed(e));var a=(t=t.toString()).indexOf(".");return t=-1!==a?t.substring(0,e+a+1):t.substring(0),Number(parseFloat(t).toFixed(e))}e.default=Object.assign({},o,i,s,r,c,{get:N,throttle:function(t,e,n){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return v(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),R(t,e,{leading:a,maxWait:e,trailing:o})},debounce:R,forEach:function(t,e){var n=this;if(!y(t)&&!f(t))return t;var a=y(t)?t:Object.keys(t),o=y(t)?function(t){return t}:function(t,e){return e[t]};return Array.prototype.forEach.call(a,(function(a){var i=o.call(n,a,t);b(e)&&e.call(n,i,a,t)})),t},map:D,unset:function(t,e){if(!t||!e)return!0;var n=e in t?[e]:e.match(/[^.[\]]+/g),a=n.length<2?t:N(t,n.slice(0,-1),null),o=n[n.length-1];return null===a||delete a[o]},toString:P})}])},"object"==(0,c.default)(n)&&"object"==(0,c.default)(e)?e.exports=s():(i=[],void 0===(r="function"==typeof(o=s)?o.apply(n,i):o)||(e.exports=r))}).call(this,t(235)(e))})),window.define("249",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getSystemInfo=function(){var t="SYSTEM_INFO",e=o.getStorageSync(t)||"";if(Object.keys(e).length)return e;var n=o.getSystemInfoSync();return o.setStorage({key:t,data:n}),n},n.textToast=void 0;n.textToast=function(t){o.showToast({icon:"none",title:t})}})),window.define("250",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.request=C,n.default=void 0;var I={get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.method="GET",C(t,e)},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.method="POST",C(t,e)}};function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){o.request({url:t,data:e.data||{},header:e.header||{},method:e.method||"GET",success:function(t){200===t.statusCode?n(t.data):a({code:"-9999",msg:t.statusCode,type:"requestCase"})},fail:function(t){a({code:t.errCode,msg:t.errMsg,type:"faild"})}})}))}n.default=I})),window.define("252",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(253)),C=t(26),x=["weixin_friend","weixin_timeline","qqfriend","qqdenglu","baiduhi","sinaweibo"],_={title:"惠生活",content:"吃喝玩乐购，真实惠生活",imageUrl:"https://scenter.cdn.bcebos.com/logo/updatelogo.png",path:"/pages/index/index?sfrom=shareUrl&source=shareUrl",shareType:0};Component({properties:{shareInfoData:{type:Object,value:{},observer:function(t){var e=this;t&&this.setData({generateConfig:"baseConfig"in this.data.generateConfig?this.data.generateConfig:I.default},(function(){e.setShareInfo(t)}))}},generateConfig:{type:Object,value:{}},defaultShareInfo:{type:Object,value:{},observer:function(t){t&&(t=Object.keys(t).length?Object.assign({},_,t):_,this.setData({defaultShareInfo:t}))}},isDefaultHomePage:{type:Boolean,value:!1}},data:{startGenerate:!1,shareInfo:{}},methods:{handleGenerate:function(t,e){this.setData({startGenerate:!0,"generateConfig.replaceText.qrCodeUrl":e,"generateConfig.baseConfig.backgroundImg":t})},handleGenerateSuccess:function(t){var e=this,n=t.data.url,a={startGenerate:!1};if(3==+this.data.shareInfo.shareType){var o=this.data.shareInfo.shareImageInfo.command.info.imgShowUrl;a["shareInfo.shareImageInfo.imageUrl"]=n,a["shareInfo.shareImageInfo.command.info.img_show"]=o||n,a["shareInfo.shareImageInfo.command.info.img_save"]=n}else 4==+this.data.shareInfo.shareType&&(a["shareInfo.imageUrl"]=n);this.setData(a,(function(){e.triggerEvent("handleGenerateSuccess",e.getShareInfo())}))},handleGenerateError:function(t){var e=this;this.setData({startGenerate:!1,"shareInfo.shareType":2},(function(){e.triggerEvent("handleGenerateError",e.getShareInfo())}))},setShareInfo:function(t){var e=this,n=t.duShare,a=t.h5Share,o=t.imgShare.imgUrl,i=t.shareType,r=t.shareUrl;i=Number(i)||0;var s=Object.assign({},a||{},{shareUrl:r,imageUrl:a.img,pannel:x}),c={pannel:x,command:{cmd_pannel:x,info:n}},u=Object.assign({},(0,C.cloneDeep)(s),(0,C.cloneDeep)(c)),d=Object.assign({},(0,C.cloneDeep)(u),{shareType:4});d.command.info.type=1,this.setData({"shareInfo.shareType":i,"shareInfo.shareBaseInfo":s,"shareInfo.shareImageInfo":d,"shareInfo.shareCommandInfo":u},(function(){3==+i||4==+i?e.handleGenerate(o,r):e.getShareInfo()}))},getShareInfo:function(t){var e=this.data,n=e.defaultShareInfo,a={};if(!e.isDefaultHomePage){var o="?sfrom=shareUrl&source=shareUrl&",r=getCurrentPages(),s="/"+r[r.length-1].uri;s=s.match(/\?/)?s.replace(/\?/,o):"".concat(s).concat(o),_.path=s}if(t){var c=_.path;_.path=c.match(/\?/)?c.replace(/\?/,"?".concat((0,C.urlParams)(t),"&")):"".concat(c,"?").concat((0,C.urlParams)(t))}try{var u="shareType"in this.data.shareInfo?this.data.shareInfo:"shareUrl"in n||"path"in n?n:_;u.shareType||(u.shareType=0),4!==u.shareType||u.imageUrl||(u.shareType=2),0===u.shareType?a=u:1===u.shareType?a=u.shareBaseInfo:3===u.shareType?a=u.shareImageInfo:2===u.shareType?a=u.shareCommandInfo:4===u.shareType&&(a.type="image",a.imageUrl=u.imageUrl,a.pannel=x)}catch(t){a=Object.keys(n).length?Object.assign({},_,n):_}var d=getCurrentPages();return"homes/rebate/rebate"===d[d.length-1].uri&&(i().globalData.rebateShareInfo=a),this.triggerEvent("getShareInfo",a),a}}})})),window.define("253",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";e.exports=JSON.parse('{"baseConfig":{"backgroundImg":"https://b.bdstatic.com/searchbox/icms/searchbox/img/%E5%88%86%E4%BA%AB%E6%B5%B7%E6%8A%A5.jpg","width":750,"height":1333,"quality":1,"fileType":"jpeg","isCrossOrigin":true},"qrCode":{"width":230,"height":230,"text":"{qrCodeUrl}","x":260,"y":795,"correctLevel":1,"foreground":"#f97446"},"dynamicConfig":[],"replaceText":{"qrCodeUrl":""}}')})),window.define("255",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(16)),D=I(t(17)),k=I(t(33)),P=t(9),E=t(256),L=t(26);Component({options:{addGlobalClass:!0},properties:{info:{type:Object,value:function(){return{}}}},data:{preloadImgList:[],isBeforeUse:!1,isAfterUse:!1,status:-1,statusClass:"",jumpMap:{},statusConfigMap:{}},OPEN_NA_URL:"channels/recharge/pages/index/index?"+(0,E.getCommonShareParams)(),isLoading:!1,observers:{info:function(){this.initData()}},lifetimes:{ready:function(){o.$log.send({module:"ny_recharge_activity"},"display")}},methods:{initData:function(){this.data.info&&(this.update(this.data.info.button),this.checkHelper())},update:function(t){var e=this,n=+t.status;if(n!==this.data.status){var a=[E.NY_ACTIVITY_STATUS.TOMORROW_COME,E.NY_ACTIVITY_STATUS.NOT_START,E.NY_ACTIVITY_STATUS.NO_GET_A,E.NY_ACTIVITY_STATUS.GET_SUCCESS_A,E.NY_ACTIVITY_STATUS.NO_STOCK].includes(n),o=[E.NY_ACTIVITY_STATUS.SHARE_UNLOCK,E.NY_ACTIVITY_STATUS.UNLOCK_SUCCESS].includes(n),i=Object.keys(E.NY_ACTIVITY_STATUS).find((function(t){return E.NY_ACTIVITY_STATUS[t]===n})).toLocaleLowerCase();return t.buttonTextArr=t.buttonText.match(new RegExp(".{1,".concat(t.buttonText.length%2?3:2,"}"),"g")),new Promise((function(r){e.setData((0,_.default)({isBeforeUse:a,isAfterUse:o,statusClass:i,status:n},"statusConfigMap.".concat(n),t),(function(){r(),e.triggerButtonEvent("display")}))}))}},triggerButtonEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click",e=this.data.info.startHour;switch(this.data.status){case E.NY_ACTIVITY_STATUS.NOT_START:"click"===t&&o.showToast({title:"".concat(e,"开抢，即将开始"),icon:"none"});break;case E.NY_ACTIVITY_STATUS.TOMORROW_COME:"click"===t&&o.showToast({title:"请明天".concat(e,"再来"),icon:"none"});break;case E.NY_ACTIVITY_STATUS.NO_GET_A:"click"===t&&this.getCoupon();break;case E.NY_ACTIVITY_STATUS.GET_SUCCESS_A:o.$log.send({module:"ny_recharge_recharge_a"},t);break;case E.NY_ACTIVITY_STATUS.SHARE_UNLOCK:"click"===t&&this.triggerEvent("clickCustomShare"),o.$log.send({module:"ny_recharge_invite"},t);break;case E.NY_ACTIVITY_STATUS.UNLOCK_SUCCESS:o.$log.send({module:"ny_recharge_recharge_b"},t);break;case E.NY_ACTIVITY_STATUS.ALREADY_USED:o.$log.send({module:"ny_recharge_other_recharge"},t);break;case E.NY_ACTIVITY_STATUS.NO_STOCK:"click"===t&&o.showToast({title:"已经抢光啦",icon:"none"}),o.$log.send({module:"ny_recharge_no_stock"},t)}},getCoupon:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,i,r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLoading){e.next=2;break}return e.abrupt("return");case 2:return o.$log.send({module:"ny_recharge_get"}),e.prev=3,e.next=6,(0,P.getSysData)();case 6:return n=e.sent,a=n.zid,t.isLoading=!0,e.next=11,D.default.get(k.default.GET_ACTIVITY_DRAW,{data:{zid:a,activity_id:"ChargeActivity"}});case 11:return i=e.sent,r=i.button,t.isLoading=!1,e.next=16,t.update(r);case 16:o.showToast({title:"领取成功!",icon:"none"}),o.$log.send({module:"ny_recharge_get_success"},"display"),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),t.isLoading=!1,o.showToast({title:e.t0.msg||"领取失败，请稍后再试",icon:"none"}),o.$log.send({module:"ny_recharge_get_fail"},"display");case 25:t.triggerEvent("initNewYear");case 26:case"end":return e.stop()}}),e,null,[[3,20]])})))()},checkHelper:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,i,r,s,c,u,d,l;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data.info,a=n.totalWindow.helpNo,i=void 0===a?{}:a,r=n.shareTokenOther,s=void 0===r?"":r,c=n.can_send_prize,1==+i.status&&o.showToast({title:i.text||"助力失败，请稍后再试",icon:"none"}),0!=+c){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,P.getSysData)();case 6:return u=e.sent,d=u.zid,e.prev=8,e.next=11,D.default.get(k.default.GET_ACTIVITY_DRAW,{data:{zid:d,shareToken:s,cmd:"sendCouponB",activity_id:"ChargeActivity"}});case 11:if(l=e.sent,1===l.button.helpOk){e.next=15;break}throw 0;case 15:o.showToast({title:"助力成功!",icon:"none"}),o.$log.send({module:"ny_recharge_help_success"},"display"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),o.showToast({title:"助力失败，请稍后再试",icon:"none"}),o.$log.send({module:"ny_recharge_help_fail"},"display");case 23:case"end":return e.stop()}}),e,null,[[8,19]])})))()},onClickButton:function(t){var e=this;return(0,x.default)(C.default.mark((function n(){return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.checkWebify)(e.OPEN_NA_URL);case 2:e.data.status===E.NY_ACTIVITY_STATUS.NO_GET_A?(o.$log.send({module:"ny_recharge_get"}),t.isLogin&&t.change?e.triggerEvent("initNewYear"):t.isLogin?e.getCoupon():(0,L.textToast)("请登录~")):e.triggerButtonEvent();case 3:case"end":return n.stop()}}),n)})))()}}})})),window.define("256",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.getCommonShareParams=k,n.formatNewYearData=function(t){var e=t.shareInfo,n=e.normalShare,a=e.duShare,o=e.h5Share,i=e.shareUrl,r=t.shareToken,s=k();n=Object.assign(n,{imageUrl:n.imgUrl,path:"channels/recharge/pages/index/index?".concat(s)}),o.img=o.imgUrl,a.imgShowUrl=a.imgShowUrl||"https://scenter.cdn.bcebos.com/2020newyear/fenxiangtu2.png",i&&r&&(t.shareInfo.shareUrl+="".concat(i.includes("?")?"&":"?","shareToken=").concat(r,"&").concat(s));return t},n.checkWebify=function(t){return new Promise((function(e,n){if("web"===(0,D.getSystemInfo)().platform)return x.default.openNA(t),n();e()}))},n.countDown=function(t,e){P&&clearTimeout(P);P=a(e,t)},n.NY_SHARE_GEN_CONFIG=n.SUBSCRIBE_CONFIG=n.NY_UG_FROM=n.NY_ACTIVITY_STATUS=void 0;var x=C(t(14)),_=t(26),D=t(9);n.NY_ACTIVITY_STATUS={NOT_START:6,TOMORROW_COME:7,NO_GET_A:99,GET_SUCCESS_A:1,SHARE_UNLOCK:2,UNLOCK_SUCCESS:3,ALREADY_USED:4,NO_STOCK:5};n.NY_UG_FROM={GOLD_CARD_BACK:"jinkabeimian",TASK_GUIDE:"renwuyindao",DIAMOND_CARD:"zuanshika",BANNER_ENTRY:"banner3",REUNION:"tuanyuanhongbao"};n.SUBSCRIBE_CONFIG={templateId:"BD2352",subscribeId:"scenter_newyear_20210203_20210211"};function k(){var t=r().globalData.source||"",e={sfrom:t,source:t,sActivity:"ny_2021"};return(0,_.urlParams)(e)}n.NY_SHARE_GEN_CONFIG={baseConfig:{backgroundImg:"https://scenter.cdn.bcebos.com/2020newyear/fenxiangtu2.png",width:750,height:1333,quality:.9,fileType:"jpeg",isCrossOrigin:!0},qrCode:{width:233,height:238,text:"{qrCodeUrl}",x:255,y:846,correctLevel:1,foreground:"#f97446"},dynamicConfig:[],replaceText:{qrCodeUrl:""}};var P=null})),window.define("258",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(26);Component({options:{addGlobalClass:!0},properties:{title:{type:String,value:"通讯录"},isShow:{type:Boolean,value:!1,observer:function(t){var e=this;t&&a((function(){i.createSelectorQuery().in(e).select(".search-box").boundingClientRect((function(t){e.setData({scrollBottom:t.bottom+20})})).exec()}),500)}},topBarHeight:{type:Number,value:64},titleRightText:{type:String,value:"完成"},placeholder:{type:String,value:"请输入"},letterList:{type:Array,value:null,observer:function(t){this.formatData(t),this.setData({anchorSelected:0})}},loadingTip:{type:String,value:"数据加载中..."},listEmptyTip:{type:String,value:"暂无数据"},searchEmptyTip:{type:String,value:"无结果"},searchFromFirst:{type:Boolean,value:!1},movingIndex:{type:Number,value:0,observer:function(t){this.setData({anchorSelected:t})}},anchors:{type:Array,observer:function(){var t=this;a((function(){t.getScrollTops()}),500)}}},data:{value:"",isLoading:!0,isSearchMode:!1,keyboardHeight:0,hasData:!1,canScroll:!0},cusData:{searchAll:[],searchKeys:[]},methods:{hideToast:function(){var t=this;this.setData({value:"",isShow:!1,anchors:[],hasData:!0,letterList:[],isLoading:!0,isSearchMode:!1},(function(){t.triggerEvent("cancel")}))},formatData:function(t){var e={},n=t.length?t:[],a=[],o=n.every((function(t){return t.list&&t.list.length}));n.forEach((function(t){t.list.forEach((function(t){e[(0,C.randomId)()+"__a$1$a__"+t.name]=t,e[(0,C.randomId)()+"__a$1$a__"+t.pinyin]=t})),a.push({name:t.title,id:"word-"+t.title})})),this.cusData.searchAll=e,this.cusData.searchKeys=Object.keys(e),t.length?this.setData({anchors:a,isLoading:!1,hasData:!0}):this.setData({anchors:a,hasData:o,isLoading:!1})},onInput:function(t){var e=[],n=(t.detail.value||"").replace(/\s/g,""),a=this.cusData.searchAll,o=this.cusData.searchKeys;if(n){for(var i=0;i<o.length;i++){var r=o[i].split("__a$1$a__")[1];new RegExp(this.searchFromFirst?"^"+n:n,"i").test(r)&&e.push(a[o[i]])}var s=Array.from(new Set(e));this.setData({showTip:!s.length,sugList:s})}else this.setData({showTip:!1,sugList:e})},onFocus:function(t){this.setData({isSearchMode:!0,inputDisabled:!1,keyboardHeight:t.detail.height})},onSelect:function(t){this.triggerEvent("select",t.currentTarget.dataset)},onClear:function(){this.setData({value:"",sugList:[],showTip:!1})},onSearchMode:function(){this.setData({isSearchMode:!0,inputDisabled:!1})},exitSearchMode:function(){this.setData({value:"",sugList:[],showTip:!1,showAnchorPop:!1,isSearchMode:!1})},getScrollTops:function(){var t=this,e=this.data.anchors;e&&e.length&&i.createSelectorQuery().selectAll(".letter-title").boundingClientRect((function(e){var n=t.cusData.scrollTop||0;t.cusData.titleTopAll=e.map((function(t){return{id:t.id,top:t.top+n}}))})).select(".city-fixed").boundingClientRect((function(e){e&&(t.cusData.fixedBarTop=e.top,t.cusData.fixedBarHieght=e.height)})).exec()},onScroll:function(t){var e=this;if(this.cusData.dontTriggerSwiperScrollEvent)this.cusData.dontTriggerSwiperScrollEvent=!1;else{var n=this.cusData.titleTopAll;if(n&&n.length){var a=t.detail.scrollTop+n[0].top;if(this.cusData.scrollTop=a,this.data.canScroll)i.createSelectorQuery().in(this).selectAll(".letter-title").boundingClientRect((function(t){if(t.length){var n=t.filter((function(t){return t.top<e.data.scrollBottom})).pop();if(n){var a=e.data.anchors.findIndex((function(t){return t.id===n.id}));e.setData({scrollIngItem:e.data.anchors[a].name,anchorSelected:a})}}})).exec()}}},onAnchorTap:function(t){var e=this,n=this.data.anchors[t];n&&this.setData({showAnchorPop:!0,anchorSelected:t,scrollIngItem:n.name,movingIndex:t},(function(){Promise.resolve().then((function(){e.setData({scrollIntoView:n.id,movingIndex:t})}))}))},getIndex:function(){var t=this.data.anchors.length,e=this.cusData,n=e.fixedBarTop,a=e.fixedBarHieght,o=(e.startPageY-n)/(a/t);return Math.floor(o)},onTouchStart:function(t){this.cusData.startPageY=t.touches[0].pageY,this.setData({canScroll:!1})},onTouchMove:function(t){this.setData({canScroll:!0}),this.cusData.startPageY=t.touches[0].pageY;var e=this.getIndex();this.onAnchorTap(e),this.setData({moving:!0})},onTouchEnd:function(t){var e=t.target.dataset.index||this.getIndex();this.cusData.dontTriggerSwiperScrollEvent=!0,this.onAnchorTap(e),this.setData({canScroll:!0})},onSearchResultTouchstart:function(){this.setData("inputDisabled",!0)}}})})),window.define("260",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{isShow:{type:Boolean,value:!1,observer:function(t){t&&this.triggerEvent("popupShow")}},zIndex:{type:Number,value:1e3},closeIcon:{type:String,value:"https://scenter.cdn.bcebos.com/smart-kit-popup-close.png"},showCloseBtn:{type:Boolean,value:!0}},methods:{handleClickMask:function(t){this.triggerEvent("clickMask",t)},handleClickCloseicon:function(t){this.triggerEvent("closePopup",t)},handleClickPopup:function(t){this.triggerEvent("clickPopup",t)},handleMaskTouchmove:function(){return!0}}})})),window.define("262",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{statusName:{type:String,value:""},bgImg:{type:String,value:""},price:{type:String,value:""},title:{type:String,value:""},contentTextColor:{type:String,value:"#FD503E"},fullReduction:{type:String,value:""},statusImgUrl:{type:String,value:""},couponNum:{type:Number,value:0},couponNumBgColor:{type:String,value:"rgba(227, 227, 227, .36)"},couponNumColor:{type:String,value:"#b8b8b8"}}})})),window.define("264",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{statusName:{type:String,value:""},bgImg:{type:String,value:""},price:{type:String,value:""},title:{type:String,value:""},contentTextColor:{type:String,value:"#FD503E"},fullReduction:{type:String,value:""},statusImgUrl:{type:String,value:""},couponNum:{type:Number,value:0},couponNumBgColor:{type:String,value:"rgba(227, 227, 227, .36)"},couponNumColor:{type:String,value:"#b8b8b8"}}})})),window.define("266",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C,x=t(10),_=x(t(16)),D=x(t(14)),k=t(9),P=t(26),E=6,L=3,A=5,O="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=914669747,2252204896&fm=179&app=35&f=PNG?w=927&h=246&s=19843C7A4B2367241CD5D1DA0300A0B1",N="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3953824360,949590157&fm=179&app=35&f=PNG?w=927&h=246&s=FDAE777E4B2367241CD5D1DA0300A034",R="#858585",B="#FD503E",j="",U="https://scenter.cdn.bcebos.com/operation_page/seal-get-red.png",M="https://scenter.cdn.bcebos.com/operation_page/seal-used-gray.png",F=(C={},(0,_.default)(C,E,{bgImg:N,contentTextColor:B,statusImgUrl:j,showBtn:!0}),(0,_.default)(C,A,{bgImg:N,contentTextColor:B,statusImgUrl:U}),(0,_.default)(C,L,{bgImg:O,contentTextColor:R,statusImgUrl:M}),C);Component({properties:{showPopup:{type:Boolean,value:!1,observer:function(t){this.sendShow(),this.setData({isShow:t})}},popupData:{type:Object,value:{},observer:function(){this.getConfig()}},isLogin:{type:Boolean,value:!1,observer:function(t){this.setData({status:+t+""})}}},data:{isShow:!1,status:"0",closeIcon:"http://t11.baidu.com/it/u=914730332,823448170&fm=179&app=35&f=PNG?w=129&h=129&s=4BA43A62E687D2A418F5D4DA0300C0B5",pocketBg:(0,P.gzipImg)("http://t12.baidu.com/it/u=2175036565,3603953168&fm=179&app=35&f=PNG?w=993&h=1368&s=75F35A7AEC8A676C56A39FBD0300E008"),pocket:(0,P.gzipImg)("https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2072024320,1727346524&fm=179&app=35&f=PNG?w=993&h=437&s=2491AA761DAB0724109F27AC0300E00A")},attr:{intersectionObserver:null,hasSendLog:{}},methods:{sendShow:function(){var t=this;a((function(){t.attr.intersectionObserver=i.createIntersectionObserver(t,{thresholds:[1],selectAll:!0}).relativeToViewport(),t.attr.intersectionObserver.observe(".popup-coupon-wrap",(function(e){var n=e.dataset,a=n.ubcShow,o=n.id,i=JSON.parse(a),r=i.module;delete i.module;var s=o||e.id;t.attr.hasSendLog[s]||(t.attr.hasSendLog[s]=!0,t.sendLog(i,"show",r)),t.attr.intersectionObserver.disconnect()}))}),200)},getConfig:function(){var t=this.data.popupData.coupons;Array.isArray(t)&&(t.forEach((function(t){Object.assign(t,F[t.status])})),this.setData({list:t}))},sendLog:function(t,e,n){i.$log.sendNew(t,e,{value:n})},handleCoupon:function(t){var e=this,n=t.currentTarget.dataset.module;this.sendLog({status:+this.data.isLogin+""},"click",n),(0,k.getLoginCode)().then((function(t){e.triggerEvent("loginSucess",t)})).catch((function(t){e.triggerEvent("loginFail",t)}))},hideMask:function(){this.setData({isShow:!1})},commonJump:function(t){this.hideMask(),D.default.withEvent(t)}}})})),window.define("268",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{show:{type:Boolean,value:!0}}})})),window.define("270",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{bgImg:{type:String,value:"https://scenter.cdn.bcebos.com/homepage%2Fsquare_loading.png"},realImg:{type:String,value:""},mode:{type:String,value:""}},data:{showBg:!0},methods:{imageLoad:function(){this.setData({showBg:!1})}}})})),window.define("272",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(27)),_=C(t(29)),D=C(t(15)),k=C(t(14)),P=C(t(17)),E=C(t(33)),L=t(26),A=t(9),O="https://scenter.cdn.bcebos.com/new-user/cashback-img-1.png",N="https://scenter.cdn.bcebos.com/new-user/cashback-imgBig.png",R="https://scenter.cdn.bcebos.com/new-user/cashback-img-2.png",B="https://scenter.cdn.bcebos.com/new-user/cashback-img-4.png",j="https://scenter.cdn.bcebos.com/new-user/cashback-img-5.png";Component({options:{addGlobalClass:!0},properties:{currentNo:{type:String,value:""},v:{type:Object,value:{}},needMargin:{type:Boolean,default:!1},isFrom:{type:String,default:""},couponFrom:{type:String,default:""},index:{type:Number,default:0}},attached:function(){this.setImgSrc(!0)},observers:{status:function(){this.setImgSrc()}},methods:{couponTap:function(t){var e=t.currentTarget.dataset,n=e.status,a=e.couponId,o=e.jumpUrl,i=e.jumpType,r=e.no,s=e.date;switch(+n){case 10:+r==+this.data.currentNo+1?(0,L.textToast)("明天0点开始领，记得回来哦"):(0,L.textToast)("".concat(s," 0点开始领，记得回来哦"));break;case 20:this.drawBackCoupon(a,r);break;case 30:k.default.to(o,i);break;case 40:(0,L.textToast)("红包已使用");break;case 50:(0,L.textToast)("红包已过期");break;case 60:(0,L.textToast)("红包已失效")}},sendShowLog:function(){var t=this;a((function(){t.intersectionObserver=i.createIntersectionObserver(t),t.intersectionObserver.relativeToViewport({bottom:0,top:0}).observe(".my-voucher-item",(function(e){var n=e.dataset.mod,a={};try{a=JSON.parse(n)}catch(t){}i.$log.sendNew((0,D.default)({},a),"show"),t.intersectionObserver.disconnect()}))}),1e3)},drawBackCoupon:function(t,e){var n=this;return(0,_.default)(x.default.mark((function a(){var o,i,r;return x.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,A.getSysData)();case 2:o=a.sent,i=o.zid,r=void 0===i?"":i,P.default.get(E.default.GET_ACTIVITY,{data:{coupon_id:t,act_id:5e4,zid:r,activity_id:"goodsWelfareActivity",action:"drawBackCoupon"},noTry:!0,canResArrayNull:!0}).then((function(t){(0,L.textToast)(t.msg||"领取成功，3天内使用有效"),n.triggerEvent("initGoodsWelfare",{drawFrom:n.data.couponFrom,no:e}),n.setData({img:R})})).catch((function(t){(0,L.textToast)(t.msg||"活动太火爆了,请稍后重试")}));case 6:case"end":return a.stop()}}),a)})))()},setImgSrc:function(t){var e=this.data.v,n=e.status,a=e.isBig,o=e.validTimeText,i="";switch(+n){case 10:i=B;break;case 20:i=j;break;case 30:i=R;break;case 40:case 50:case 60:i=O;break;default:i=B}10==+n&&1==+a&&(i=N),"pop"===this.data.isFrom&&o&&(i=O),t&&this.sendShowLog(),this.setData({img:i})}}})})),window.define("274",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";Component({options:{addGlobalClass:!0},properties:{coupons:{type:Array,value:[]},currentNo:{type:String,value:0},toastStyle:{type:Object,value:{}},toasts:{type:Object,value:{}},couponFrom:{type:String,value:""}},attached:function(){var t=this;if(this.data.currentNo>4){var e=26;"landingPage"===this.data.couponFrom&&(e=11),a((function(){var n=282*(t.data.currentNo-4)/3+e;t.setData({scrollLeft:n})}),600)}},methods:{initGoodsWelfare:function(t){this.triggerEvent("initGoodsWelfare",t)},anchorScroll:function(){this.triggerEvent("anchorScroll")}}})})),window.define("276",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=t(26),x=I(t(14)),_=t(31);Component({options:{addGlobalClass:!0},properties:{isLogin:{type:Boolean,value:!1},couponFrom:{type:String,value:""},firstOrderCoupon:{type:Object,value:{}},lockCoupon:{type:Object,value:{}},elCoupon:{type:Object,value:{}},isNa:{type:Boolean,value:!1}},attached:function(){o.$log.send({module:"".concat(this.data.isLogin?"":"noLogin-","firstorder-").concat(this.data.couponFrom),isLogin:this.data.isLogin},"display")},methods:{drawCoupon:function(t){var e=this.data.firstOrderCoupon,n=e.couponId,a=e.status;t.isLogin&&t.change?this.triggerEvent("drawFirst",{drawFrom:"LoginChanged",drawScene:"module"}):t.isLogin&&!t.change?20==+a?this.triggerEvent("drawFirst",{couponId:n,drawFrom:"twoGift"}):70==+a?(0,C.textToast)("已领完"):(+a===_.couponStatus.USE&&this.triggerEvent("anchorScroll"),"landingPage"===this.data.couponFrom||x.default.withEvent(t)):((0,C.textToast)("请登录您的百度账号"),o.$log.send({module:"giveup-login",couponId:n},"click")),o.$log.sendNew({module:"coupon",status:a},"click")},lockTap:function(){(0,C.textToast)("使用首单券下单后才可以解锁哦"),o.$log.send({module:"lock-coupon"},"click")},infoTap:function(){(0,C.textToast)("红包分6天返，每天0点开放领取哦")},onClick:function(t){x.default.withEvent(t)}}})})),window.define("278",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=t(26),x=I(t(14));Component({options:{addGlobalClass:!0},properties:{isLogin:{type:Boolean,value:!1},couponFrom:{type:String,value:""},firstOrderCoupon:{type:Object,value:{}},lockCoupon:{type:Object,value:{}}},attached:function(){o.$log.send({module:"".concat(this.data.isLogin?"":"noLogin-","firstorder-").concat(this.data.couponFrom),isLogin:this.data.isLogin},"display")},methods:{drawCoupon:function(t){var e=this.data.firstOrderCoupon,n=e.couponId,a=e.status;t.isLogin&&t.change?this.triggerEvent("drawFirst",{drawFrom:"LoginChanged",drawScene:"module"}):t.isLogin&&!t.change?20==+a?this.triggerEvent("drawFirst",{couponId:n,drawFrom:"twoGift"}):70==+a?(0,C.textToast)("已领完"):"landingPage"===this.data.couponFrom?this.triggerEvent("anchorScroll"):x.default.withEvent(t):((0,C.textToast)("请登录您的百度账号"),o.$log.send({module:"giveup-login",couponId:n},"click")),o.$log.send({module:"first-coupon-".concat(a),couponId:n,status:a},"click")},lockTap:function(){(0,C.textToast)("下单后才能解锁该权益"),o.$log.send({module:"lock-coupon"},"click")}}})})),window.define("280",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(19)),x=I(t(15)),_=I(t(14)),D=t(26);Component({externalClasses:["custom-round-style"],properties:{item:{type:Object,default:{}},itemType:"",xcxAppkey:""},data:{},methods:{navTo:function(){var t=this.properties.item.url,e=t.jumpUrl,n=t.jumpType;_.default.to(e,n)},sendLog:function(t,e,n){o.$log.sendNew((0,x.default)({module:t,appkey:e,sid:this.properties.sid},n),"click")},jumpTo:function(){var t,e,n=null===(t=this.properties)||void 0===t||null===(e=t.item)||void 0===e?void 0:e.url;n&&"xcx"===n[0].jumpType&&_.default.to(n[0].jumpUrl,n[0].jumpType)},commonJumpApp:function(t){var e=t.currentTarget.dataset,n=e.name,a=e.index,o=this.properties,i=o.itemType,r=o.xcxAppkey,s=o.item;if("hot_sku"===i){this.sendLog("xcx_card",r,{name:n,index:a});var c=null==s?void 0:s.url;(0,D.isNonEmptyArray)(c)&&_.default.to(c[0].jumpUrl,c[0].jumpType)}else"hot_item"===i&&(this.sendLog("goods_card",r,{name:n,index:a}),this.jumpTo())},handleBtnError:function(){var t,e,n=null===(t=this.properties)||void 0===t||null===(e=t.item)||void 0===e?void 0:e.url;if((0,D.isNonEmptyArray)(n)){var a=(0,C.default)(n,3),o=a[1],i=a[2],r=o||i||{},s=r.jumpUrl,c=r.jumpType,u=r.jumpModule;_.default.to(s,c,"",u)}}}})})),window.define("282",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(17)),x=I(t(33));Component({properties:{from:{type:String,default:"search"},query:{type:String,value:"",observer:function(t){this.getSug(t)}}},data:{isShow:!1,sugList:[]},methods:{getSug:function(t){var e=this,n="newSearch"===this.data.from?x.default.NEW_SEARCH_SUG:x.default.SEARCH_SUG;C.default.get(n,{data:{query:t,sandbox:!0}}).then((function(t){var n=t.sug||[];n=n.map((function(t){return{highLightVal:e.highlightStr(t),defaultVal:e.removeHTML(t)}})),e.setData({isShow:!!n.length,sugList:n}),n.length&&e.triggerEvent("sugshow",{sugList:n})})).catch((function(){e.setData({isShow:!1})}))},highlightStr:function(t){return(t||"").replace(/<b>/g,'<span style="color: #000; font-weight: bold;">').replace(/<\/b>/g,"</span>")},removeHTML:function(t){return(t||"").replace(/<b>/g,"").replace(/<\/b>/g,"")},sugClick:function(t){var e=t.currentTarget.dataset.word;this.triggerEvent("sugclick",e)}}})})),window.define("284",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{},methods:{}})})),window.define("286",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({data:{drawData:{}},properties:{userInfo:{type:Object,value:{}},isLogin:{type:Boolean,value:!0},canalName:{type:String,value:""}},methods:{btnMore:function(){o.redirectTo({url:"/pages/index/index"})},goJump:function(t){I.default.withEvent(t)},onGetMoney:function(t){t.isLogin&&t.change?(this.setData({isLogin:!0}),this.triggerEvent("afterlogin",{type:"login"})):t.isLogin&&this.goJump(t)}}})})),window.define("288",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({options:{addGlobalClass:!0},data:{cityCode:"",moreSkus:{},contents:0,activeNameOne:0},tabsThree:function(t){this.setData({contents:t.detail.name,activeNameOne:t.detail.name})},jumpTo:function(t){I.default.withEvent(t)},changeTab:function(t){this.triggerEvent("fixedtab",this.data.activeNameOne),this.triggerEvent("changetab",t)}})})),window.define("290",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(14)),x=I(t(17)),_=I(t(33));Component({data:{moneyText:{},signcolor:1,activeNameThree:"tab_name_0",content:"0"},jumpTo:function(t){C.default.withEvent(t)},jumpto:function(t){var e=t.target.dataset,n=e.type,a=e.url;C.default.to(a,n)},changeTab:function(t){this.triggerEvent("changetab",t)},getCoupon:function(t){var e=this;o.$log.send({module:"selectCardTabItem",index:t.currentTarget.dataset.index+1});var n=t.currentTarget.dataset.id,a=t.currentTarget.dataset,i=a.type,r=a.url,s=a.index,c=a.canalName;if("2"!==i){var u=this.data,d=u.content,l=u.moneyText;x.default.get(_.default.GET_ACTIVITY,{data:{req_from:"fw_xcx",activity_id:"clickCouponCardButton",pivotal_key:n}}).then((function(t){C.default.to(r,"xcx",c),l[d].list[s].click_flag="2",e.setData({moneyText:l})})).catch((function(t){C.default.to(r,"xcx",c),l[d].list[s].click_flag="2",e.setData({moneyText:l})}))}else C.default.to(r,"xcx",c)},tabsOne:function(t){this.setData({content:t.detail.name,activeNameThree:t.detail.name})}})})),window.define("292",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{tabs:{type:Array,value:[]},type:{type:String,value:""},isFixed:{type:Boolean,value:!1}},data:{selectedIndex:0,scrollIntoView:""},methods:{changeSkuTab:function(t){var e=t.currentTarget.dataset.index;this.setData({selectedIndex:e}),this.triggerEvent("changetab",{name:e})}}})})),window.define("294",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(14)),x=t(26),_=I(t(17)),D=I(t(33)),k=t(42),P=i();Component({data:{isFromSecondFloor:P.globalData.isFromSecondFloor,isShowHome:!1,isShowBack:!1,topBarTitle:"",tabIndex:0,page:1,tabs:[],cardList:[],header:{},showBar:!1,activeName:0,fixTop:!1,isBottom:!1,canalCode:"",pagesize:10,isLoading:!1,isHeightVersion:!1},lifetimes:{ready:function(){var t=getCurrentPages(),e=this.data.isFromSecondFloor,n=1===t.length&&!/^pages\/index\/index/.test(t[0].uri);this.setData({isHeightVersion:(0,k.isHeightVersion)(),isShowHome:!e&&n,isShowBack:!(!e&&n)}),this.initData()}},changeTabs:function(t){this.setData({activeName:t.detail.name})},jumpTo:function(t){C.default.withEvent(t)},scroll:function(t){var e=this.data.navigationBarHeight+this.data.statusBarHeight;t.detail.scrollTop>e?(this.setData({showBar:!0}),o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})):(this.setData({showBar:!1}),o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"})),t.detail.scrollTop>e+93?this.setData({fixTop:!0}):this.setData({fixTop:!1})},getCoupon:function(t){var e=this;o.$log.send({module:"cardItem",index:t.currentTarget.dataset.index+1});var n=t.currentTarget.dataset.id,a=t.currentTarget.dataset,i=a.type,r=a.url,s=a.index,c=a.canalName;if("2"!==i){var u=this.data,d=u.activeName,l=u.cardList;_.default.get(D.default.GET_ACTIVITY,{data:{req_from:"fw_xcx",activity_id:"clickCouponCardButton",pivotal_key:n}}).then((function(t){C.default.to(r,"xcx",c),l[d].list[s].click_flag="2",e.setData({cardList:l})})).catch((function(t){C.default.to(r,"xcx",c),l[d].list[s].click_flag="2",e.setData({cardList:l})}))}else C.default.to(r,"xcx",c)},onSwiperChange:function(t){var e=t.detail.current,n=t.currentTarget.dataset.dataPath;this.setData(n+".selected",e)},onHomeClick:function(){C.default.goHome()},onBackClick:function(){this.data.isFromSecondFloor&&1===getCurrentPages().length?o.exit():C.default.back()},initData:function(){var t=this;_.default.get(D.default.GET_ACTIVITY,{data:{activity_id:"getCouponCardAll",city_code:this.pageinstance.options.cityCode||"131",pagesize:10,page:1}}).then((function(e){var n=e.coupon,a=e.banner;t.setData({tabs:n.coupon_data.tab_map,cardList:n.coupon_data.data,banner:a,isLoading:!1})})).catch((function(e){t.triggerEvent("errevent",e)}))},scrolltolower:function(t){var e=this;this.data.isBottom||(this.setData({isLoading:!0}),_.default.get(D.default.GET_ACTIVITY,{data:{activity_id:"getCouponCardAll",city_code:this.pageinstance.options.cityCode,pagesize:10,page:++this.data.page}}).then((function(t){for(var n=t.coupon,a=0,o=0;o<e.data.cardList.length;o++)n.coupon_data.data[o].list.length?e.data.cardList[o].list=e.data.cardList[o].list.concat(n.coupon_data.data[o].list):(e.data.cardList[o].isBottom=1,a++);a===e.data.cardList.length&&e.setData({isBottom:!0}),e.setData({cardList:e.data.cardList,page:+e.data.page,isLoading:!1})})).catch((function(t){e.setData({isLoading:!1})})))},bannerRender:function(t){var e=(0,x.getTopHeight)(),n=(0,x.vwUnit)(527);return t.topHeigth=e+"px",t.height="calc(".concat(t.topHeigth," + ").concat(n,")"),t.mainImgHeight=(0,x.vwUnit)(497),t.value.forEach((function(t){t.oldBackground=t.background,t.background=(0,x.adaptBackground)(t.background)})),t.isShowDots=1!==t.value.length,t.isShow=!0,t}})})),window.define("296",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({options:{addGlobalClass:!0},properties:{tabs:{type:Array,value:[]},isFixed:{type:Boolean,value:!1},fixedindex:{type:Number,value:""}},observers:{fixedindex:function(t){this.setData({selectedIndex:t})}},data:{selectedIndex:0,scrollIntoView:""},methods:{changeSkuTab:function(t){var e=t.currentTarget.dataset.index,n=0===e?0:e-1;this.setData({selectedIndex:e,scrollIntoView:this.data.channelId+"-tab-"+n}),this.triggerEvent("changetab",{index:e})}}})})),window.define("298",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(14)),_=t(26),D=I(t(17)),k=I(t(33)),P=i();Component({data:{isFromSecondFloor:P.globalData.isFromSecondFloor,isShowHome:!1,isShowBack:!1,scrollTop:0,isTopArea:!0,showBanner:!1,topBarTitle:"",topBarOpacity:1,type:3,tabIndex:0,cityCode:"",channelId:"",page:1,pageSize:10,tabs:[],banner:{},skuList:[],showBar:!1,showErrorPage:!1,fixTop:!1,fixedindex:""},properties:{fixedindex:{type:Number,value:""}},lifetimes:{ready:function(){var t=getCurrentPages();this.data.isFromSecondFloor?this.setData({isShowHome:!1,isShowBack:!1}):1!==t.length||/^pages\/index\/index/.test(t[0].uri)?this.setData({isShowHome:!1,isShowBack:!0}):this.setData({isShowHome:!0,isShowBack:!1});var e=this.pageinstance.options,n=P.globalData.location;this.setData({cityCode:n.cityCode||"131",channelId:e.channelId||"sku_duxiaodian"}),this.initData()}},observers:{fixedindex:function(t){this.changeTab({index:t})}},scrolltolower:function(t){this.setData({type:2}),this.initData()},jumpTo:function(t){x.default.withEvent(t)},scroll:function(t){var e=this.data.navigationBarHeight+this.data.statusBarHeight;t.detail.scrollTop>e?(this.setData({showBar:!0}),o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})):(this.setData({showBar:!1}),o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"})),t.detail.scrollTop>e+93?this.setData({fixTop:!0}):this.setData({fixTop:!1})},changeTab:function(t){this.setData({type:2,tabIndex:t.index,page:1,skuList:[]}),this.initData()},onSwiperChange:function(t){var e=t.detail.current,n=t.currentTarget.dataset.dataPath;this.setData(n+".selected",e)},onHomeClick:function(){x.default.goHome()},onBackClick:function(){x.default.back()},initData:function(){var t=this;D.default.get(k.default.SKU_LANDING,{data:{cityCode:this.data.cityCode,channelId:this.data.channelId,type:this.data.type,page:this.data.page,pageSize:this.data.pageSize,tabIndex:3===this.data.type?void 0:this.data.tabIndex}}).then((function(e){if(2===t.data.type){var n=e.values,a=n&&n[0]&&n[0].skus?n[0].skus:[],i=[].concat((0,C.default)(t.data.skuList),(0,C.default)(a)),r=t.data.page+1;t.setData({skuList:i,page:r})}else if(3===t.data.type){var s=e.banner,c=e.values,u=e.channel,d=s&&s.value&&s.value.length,l=d?t.bannerRender(s):{},h=c&&0!==c.length&&1!==c.length?c:[],p=c&&c[0]&&c[0].skus?c[0].skus:[],f=u&&u[0]&&u[0].title?u[0].title:"",g=t.data.page+1;d?o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"}):o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"}),t.setData({tabs:h,banner:l,showBanner:d,topBarOpacity:d?0:1,isTopArea:d>0,skuList:p,topBarTitle:f,page:g})}})).catch((function(e){t.triggerEvent("errevent",e)}))},bannerRender:function(t){var e=(0,_.getTopHeight)(),n=(0,_.vwUnit)(527);return t.topHeigth=e+"px",t.height="calc(".concat(t.topHeigth," + ").concat(n,")"),t.mainImgHeight=(0,_.vwUnit)(497),t.value.forEach((function(t){t.oldBackground=t.background,t.background=(0,_.adaptBackground)(t.background)})),t.isShowDots=1!==t.value.length,t.isShow=!0,t}})})),window.define("300",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=(t(41)(t(9)),I(t(14)));Component({properties:{isLogin:{type:Boolean,value:!0},isJoin:{type:Number,value:1},prizeInfo:{type:Object,value:{}},userInfo:{type:Object,value:{}},endInfo:{type:Object,value:{}}},data:{},methods:{goAction:function(t){t.isLogin&&t.change?(this.triggerEvent("afterlogin",{type:"login"}),this.setData({isLogin:!0})):t.isLogin&&(this.data.isJoin?C.default.withEvent(t):C.default.goHome())}}})})),window.define("302",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(14));Component({options:{addGlobalClass:!0},properties:{prizeData:{type:Object,value:{}}},data:{weekToastShow:!1,btnStatus:1,customType:"",descr:"",price:"",icon:"",freeNum:""},methods:{getBridge:function(){return this.pageinstance.compBridge},open:function(){this.setData({weekToastShow:!0}),this.triggerEvent("open")},close:function(){this.setData({weekToastShow:!1}),this.triggerEvent("close")},onGetPrizeData:function(t){this.setData({customType:t.custom_type||"blank",descr:t.desc||"",price:t.price||"",icon:t.icon||"",freeNum:t.free_num||"",urlIntro:t.urlIntro||""}),this.updateBtnText(t)},updateBtnText:function(t){var e=t.free_num,n=t.custom_type,a=this.getBridge().getHasTask();this.getBridge().trigger("taskEnd",{hasTask:a,remainDraw:t.free_num});var o=0;"heichan"===n?o=1:e>0?o=4:e<=0&&(o=a?2:3),this.setData({btnStatus:o})},goAction:function(){var t=this.data.btnStatus;1===t?this.close():2===t?(this.close(),this.triggerEvent("showtaskview")):3===t?"blank"===this.data.customType?this.close():this.openShare():4===t&&(this.close(),this.getBridge().startDraw())},openShare:function(){var t=this;this.pageinstance.onShareClick({}).then((function(){t.close()})).catch((function(){t.open()}))},goCheck:function(t){I.default.withEvent(t)}}})})),window.define("304",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(16)),_=C(t(14)),D=t(9);Component({externalClasses:["ext-slot-machine-button","ext-slot-machine-bounce"],properties:{prizeImg:{type:Object,value:{},observer:function(){}},result:{type:Array,value:[0,0,0],observer:function(t){t&&t.length}},numPrise:Number,prizeMargin:{type:Number,value:10.145},disabled:Boolean,navNumber:{type:Number,value:3},animateDuration:{type:Number,value:2500},startIntervalTime:{type:Number,value:500},speed:{type:Number,value:1},newFreeNum:{type:Number,value:0},hasTask:{type:Boolean,value:!0},btnTextColor:{type:String,value:""},drawData:{type:Object,value:{}},buttonImg:String},data:{isLotterying:!1,reels:[{position:0,animateDuration:0,css:""},{position:0,animateDuration:0,css:""},{position:0,animateDuration:0,css:""}],reelStyle:"",navStyle:"",asyncTimer:[],transitionTime:0,lineNum:3},created:function(){},methods:{initData:function(){var t=this.data,e=t.numPrise,n=t.reels,a=t.prizeMargin,o=t.prizeImg,i=t.navNumber,r=o.width,s=o.height,c=s*i/e;this.setData({reels:n,reelStyle:"height:".concat(s,"vw;width:").concat(r,"vw;margin-right:").concat(a,"vw;\n                    background-image:url(").concat(o.bg,");"),navStyle:"height:".concat(c,"vw;\n                    "),cPrizeHeight:o.height/e})},onPrizeDataEnd:function(t){this.setData({prizeImg:t}),this.initData()},onGetResult:function(t){this.setData({result:t}),t&&t.length&&this.lotteryStart()},start:function(t){"web"!==(0,D.getSystemInfo)().platform?this.data.isLotterying||this.data.disabled||this.triggerEvent("onstart",t):_.default.openNA("homes/week_activity/week_activity?sfrom=shareUrl&source=shareUrl")},lotteryStart:function(){var t=this,e=this.data,n=e.startIntervalTime,a=e.isLotterying,o=e.result;e.disabled||a||(this.setData({transitionTime:0,isLotterying:!0}),this.runAsync(0).then((function(){return t.startAnimate(0,o[0]),t.runAsync(n)})).then((function(){return t.startAnimate(1,o[1]),t.runAsync(n)})).then((function(){t.startAnimate(2,o[2])})))},getPostion:function(t,e){var n=this.data,a=n.prizeImg,o=n.reels,i=n.numPrise,r=n.speed,s=n.navNumber,c=n.cPrizeHeight,u=o[t].position,d=-(e-parseInt(s/2,10))*c,l=Math.floor(Math.random()*i);return d+=parseInt(u/a.height,10)*a.height-a.height*r-l*a.height},startAnimate:function(t,e){var n=this.data.animateDuration;this.setData((0,x.default)({},"reels[".concat(t,"]"),{animateDuration:n,position:this.getPostion(t,e),css:"bounce ext-slot-machine-bounce;"}))},transitionend:function(){var t=this,e=this.data,n=e.transitionTime,a=e.lineNum,o=e.isLotterying,i=e.asyncTimer;++n===a&&(i.forEach((function(t){clearTimeout(t)})),[0,1,2].forEach((function(e){t.resetAnimate(e)})),this.triggerEvent("onfinish"),o=!1),this.setData({isLotterying:o,transitionTime:n})},resetAnimate:function(t){var e;this.setData((e={},(0,x.default)(e,"reels[".concat(t,"].css"),""),(0,x.default)(e,"reels[".concat(t,"].animateDuration"),0),e))},runAsync:function(t){var e=this;return new Promise((function(n,o){var i=a((function(){var t=e.data.asyncTimer;t.push(i),e.setData({asyncTimer:t}),n()}),t)}))}}})})),window.define("306",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(41),C=t(10),x=C(t(16)),_=C(t(14)),D=I(t(9)),k=C(t(33)),P="homes/week_activity/week_activity?sfrom=shareUrl&source=shareUrl";Component({data:{result:[],prizeImg:{bg:"",width:16.103,height:140.094},numPrise:6,navNumber:1,hasTask:!0,newFreeNum:0,showToast:!1,prizeData:{},drawData:{},isDrawing:!1},options:{addGlobalClass:!0},properties:{userInfo:{type:Object,value:{}},isLogin:{type:Boolean,value:!0},canalName:{type:String,value:""}},methods:{getBridge:function(){return this.pageinstance.compBridge},onGetDataEnd:function(t){this.initData(t.drawData),this.setData({newFreeNum:t.freeNum,drawData:t.drawData})},initData:function(t){var e,n=t.machine;this.setData((e={},(0,x.default)(e,"prizeImg.bg",n.prize_img[0].src),(0,x.default)(e,"prizeImg.height",23.349*n.prize_img[0].img_num),(0,x.default)(e,"numPrise",n.prize_img[0].img_num),e)),this.getBridge().trigger("prizeDataEnd",this.data.prizeImg)},onStart:function(t){t.isLogin&&t.change?(this.triggerEvent("afterlogin",{type:"login"}),this.beforeGetPrize(t)):t.isLogin&&this.beforeGetPrize(t)},beforeGetPrize:function(t){if(this.data.newFreeNum>0)this.getPrize(),o.$log.send({module:"getprize"});else{var e=this.getBridge().getHasTask();e&&(this.showTaskView(t),o.$log.send({module:"addtask"})),this.setData({hasTask:e})}},getPrize:function(){var t=this;this.setData({result:[]}),this.data.isDrawing||(this.setData({isDrawing:!0}),this.pageinstance.commonRequest(k.default.GET_ACTIVITY_DRAW,{data:{act:0}}).then((function(e){var n=e.slot_img.split("-");t.setData({result:n,prizeData:e}),t.getBridge().trigger("getResult",n)})).catch((function(e){if(t.setData({isDrawing:!1}),t.getBridge().showWeekToast(),"serverCase"===e.type){var n={custom_type:"heichan",desc:e.msg};t.getBridge().trigger("getPrizeData",n),t.triggerEvent("afterlogin",{type:"refresh"})}})))},onFinish:function(){this.setData({isDrawing:!1});var t=this.data.prizeData;this.getBridge().trigger("getPrizeData",t),this.getBridge().showWeekToast(),this.triggerEvent("afterlogin",{type:"refresh"})},showTaskView:function(t){"web"!==D.getSystemInfo().platform?t.isLogin&&t.change?(this.triggerEvent("afterlogin",{type:"login"}),this.triggerEvent("showtaskview")):t.isLogin&&(this.triggerEvent("showtaskview"),o.$log.send({module:"maketask"})):_.default.openNA(P)},goJump:function(t){_.default.withEvent(t)},onGetMoney:function(t){"web"!==D.getSystemInfo().platform?t.isLogin&&t.change?this.triggerEvent("afterlogin",{type:"login"}):t.isLogin&&this.goJump(t):_.default.openNA(P)},setTaskData:function(t){this.setData({hasTask:t.hasTask,newFreeNum:t.remainDraw||this.data.newFreeNum})},onTaskInited:function(t){this.setTaskData(t)},onTaskEnd:function(t){this.setTaskData(t)}}})})),window.define("308",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(15)),_=C(t(33)),D=C(t(14)),k=C(t(309)),P=t(26);Component({options:{addGlobalClass:!0},properties:{canalName:{type:String,value:""}},data:{taskTimeShow:!1,taskViewShow:!1},lifetimes:{created:function(){var t=this.pageinstance,e=t.options.activityId||"";this.compBridge=t.compBridge,this.activityId=e,this.initTask()}},pageLifetimes:{show:function(){var t=this;a((function(){var e=t.task.getGlobalTask(),n=e.id,a=e.action,o=e.time,i=!1;t.task.isJumpRuning&&n&&(a===k.default.actions.viewChannel?Date.now()-o>=15e3?i=!0:console.log("task faild：浏览任务没有完成"):i=!0,i&&(t.task.clearCurTask(),t.task.taskEnd(n).then((function(e){t.taskEnd(e)}))))}),100)}},methods:{getBridge:function(){return this.pageinstance.compBridge},onSubscribe:function(t){var e=this,n=t.currentTarget.dataset.index,o=this.data.tasks.list[n],i=+t.detail.status;500101===i&&(0,P.textToast)("再次订阅需开启权限~"),0===i&&this.task.do(o).then((function(){a((function(){e.task.taskEnd(o.task_id).then((function(t){e.taskEnd(t)}))}),100)}))},initTask:function(){var t=this;this.task=new k.default({context:this,activityId:this.activityId}),this.task.setAction(k.default.actions.share,(function(e){t.hide().then((function(){t.task.isJumpRuning=!0,t.pageinstance.onShareClick().catch((function(e){e&&3!==e.errCode&&(t.task.isJumpRuning=!1)}))}))})),this.task.setAction(k.default.actions.viewCurPage,(function(e){var n=t.selectComponent("#c-task-timer");t.hide(),n.addEndEvent(e,(function(){e().then((function(e){t.taskEnd(e),a((function(){n.hide()}),3e3)}))})).start()})),this.task.setAction(k.default.actions.search,(function(e,n,a){t.hide(),D.default.to(a.url,"box").then((function(){t.task.isJumpRuning=!0}))})),this.task.setAction(k.default.actions.viewChannel,(function(e,n){t.hide();var a=t.task.dataMap[n].jumpUrl,o="taskDoing=1&taskId=".concat(n),i=a.indexOf("?")>=0?a+"&"+o:a+"?"+o;D.default.to(i,"local").then((function(){t.task.isJumpRuning=!0}))})),this.task.setAction(k.default.actions.viewXcx,(function(e,n){t.hide();var a=t.task.dataMap[n];D.default.to(a.jumpUrl,a.jumpType,t.data.canalName).then((function(){t.task.isJumpRuning=!0}))}))},getTasks:function(t){var e=this;return this.pageinstance.commonRequest(_.default.WEEK_ACTIVITY_TASKS,{data:{act:0},isShowToast:t}).then((function(t){var n=e.filterTasks(t);e.setData("tasks",n,(function(){e.checkRemindTask(),e.getBridge().trigger("taskInited",{hasTask:e.hasTask()})}))}))},filterTasks:function(t){var e=t.task_module,n=t.task_pool;return n&&n.length&&n.forEach((function(t){t.task_status=+t.task_status})),e.main_bg=(0,P.adaptBackground)(e.main_bg),e.button_bg=(0,P.adaptBackground)(e.button_bg),(0,x.default)((0,x.default)({},e),{},{list:n||[]})},checkRemindTask:function(){var t=this,e=this.task.getGlobalTask();e.id&&(this.task.clearCurTask(),this.task.taskEnd(e.id).then((function(e){t.taskEnd(e)})))},taskEnd:function(t){var e=this;if(t&&t.id){var n=this.data.tasks.list,a=k.default.status.haveDone,o=n.findIndex((function(e){return e.task_id===t.id}));(0,P.textToast)("任务完成，抽奖次数+1"),this.setData("tasks.list[".concat(o,"].task_status"),a,(function(){var n=e.hasTask();n&&e.open(),e.getBridge().trigger("taskEnd",{hasTask:n,remainDraw:t.remainDraw})}))}},onTaskClick:function(t){var e=this;if(!this.doingTimer){var n=t.currentTarget.dataset.index,o=this.data.tasks.list[n];this.task.do(o),i.$log.send({module:"dotask",index:n+1}),this.doingTimer=a((function(){clearTimeout(e.doingTimer),e.doingTimer=null}),500)}},hideTaskTimerView:function(){this.setData("taskTimeShow",!1)},open:function(){this.setData("taskViewShow",!0),this.triggerEvent("show");var t=this.data.tasks&&this.data.tasks.list;if(t&&t.length||this.getTasks(!0),t&&t.length){var e={};t.forEach((function(t){e["task_"+t.task_id]=1}))}},hide:function(){return this.setData("taskViewShow",!1),this.triggerEvent("hide"),new Promise((function(t){a((function(){t()}),100)}))},hasTask:function(){var t=this.data.tasks||{};return!(!t.list||!t.list.length)&&!t.list.every((function(t){return t.task_status===k.default.status.haveDone}))}}})})),window.define("309",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=I(t(232)),x=I(t(233)),_=I(t(16)),D=I(t(33)),k=I(t(17)),P=t(9),E={willDo:0,doing:1,haveDone:2},L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,C.default)(this,t),this.dataMap={},this.userActionMap={},this.context=e.context,this.isJumpRuning=!1,this.activityId=e.activityId||""}return(0,x.default)(t,[{key:"do",value:function(t){var e=this,n=this.filter(t);return n.id?(this.dataMap[n.id]=n,this.clearCurTask(),this.updateCurTask(n.id,n.action),this.preTask(n.id).then((function(t){return e.dispatch(n.id,t)}))):Promise.reject("no task id!")}},{key:"filter",value:function(t){return{action:t.action,id:t.task_id,status:Number(t.task_status),jumpType:t.jump_type,jumpUrl:t.jump_url}}},{key:"preTask",value:function(t){var e=this;return new Promise((function(n,a){var i=e.dataMap[t];i.status===E.willDo||i.status===E.doing?e.changeTask(t).then(n).catch((function(t){o.showToast({icon:"none",title:"创建任务失败，请稍候重试~"}),a(t)})):i.status===E.haveDone&&(o.showToast({icon:"none",title:"该任务已完成，尝试下其他任务吧~"}),a())}))}},{key:"taskEnd",value:function(t){var e=this;return t?new Promise((function(n,a){e.changeTask(t,!0).then((function(e){n({id:t,remainDraw:e.remain_draw})})).catch((function(){a({id:t})}))})):Promise.reject()}},{key:"dispatch",value:function(t,e){var n=this.dataMap[t].action;this.userActionMap[n]&&this.userActionMap[n].call(this.context,this.taskEnd.bind(this,t),t,e)}},{key:"setAction",value:function(t,e){var n=this;t&&"function"==typeof e&&("string"==typeof t&&(t=[t]),t.forEach((function(t){n.userActionMap[t]=e})))}},{key:"changeTask",value:function(t,e){var n=this;return new Promise((function(a,o){var i=D.default.WEEK_ACTIVITY_TASKS,r={act:e?2:1,activityId:n.activityId,task_id:t};(0,P.getSysData)().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k.default.get(i,{isShowToast:!0,data:Object.assign({zid:t.zid||"",mac:t.imei||""},r)}).then(a).catch(o)})).catch((function(){k.default.get(i,{data:r}).then(a).catch(o)}))}))}},{key:"updateCurTask",value:function(t,e){Object.assign(i().taskData,{id:t,time:Date.now(),action:e})}},{key:"clearCurTask",value:function(){this.isJumpRuning=!1,i().taskData={}}},{key:"getGlobalTask",value:function(){return i().taskData||{}}}]),t}();n.default=L,(0,_.default)(L,"status",E),(0,_.default)(L,"actions",{share:"share",search:"search",viewXcx:"use_xcx",viewCurPage:"scan_local",viewChannel:"scan_chanal",subSection:"subsection",openSecondFloor:"use_secondfloor"})})),window.define("311",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Component({properties:{showRetain:{type:Boolean,value:!1}},data:{path:"",showCloseApp:!1},attr:{oldPath:"https://scenter.cdn.bcebos.com/seckill/afx2.mp4",newPath:"https://scenter.cdn.bcebos.com/seckill/afx1.mp4"},created:function(){o.canIUse("prefetchResources")&&o.prefetchResources({video:[{url:this.attr.oldPath},{url:this.attr.newPath}]})},attached:function(){this.myAnimationVideo=o.createAnimationVideo("myAnimationVideo");var t=o.getSystemInfoSync(),e=this.attr.oldPath;this.compareVersion(t.version,"13.0.0.0")>=0&&(e=this.attr.newPath),this.setData({path:e})},methods:{compareVersion:function(t,e){for(var n=t.split("."),a=e.split("."),o=Math.max(n.length,a.length);n.length<o;)n.push("0");for(;a.length<o;)a.push("0");for(var i=0;i<o;i++){var r=parseInt(n[i],10),s=parseInt(a[i],10);if(r>s)return 1;if(r<s)return-1}return 0},closeApp:function(){o.exit()}}})})),window.define("313",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C,x=t(10),_=x(t(15)),D=x(t(16)),k=x(t(14)),P=x(t(17)),E=x(t(33)),L=t(26),A=t(314),O={HAS_SIGNED:1,TODAY_NOT_SIGN:2,TODAY_SIGNED:3,NOT_SIGN:4,NOT_SIGN_BEFORE:5,HAS_SIGNED_BEFORE:6},N=(C={},(0,D.default)(C,O.HAS_SIGNED,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),(0,D.default)(C,O.TODAY_NOT_SIGN,"https://scenter.cdn.bcebos.com/qiandao/not-sign.png"),(0,D.default)(C,O.TODAY_SIGNED,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),(0,D.default)(C,O.NOT_SIGN,"https://scenter.cdn.bcebos.com/qiandao/not-sign.png"),(0,D.default)(C,O.NOT_SIGN_BEFORE,"https://scenter.cdn.bcebos.com/qiandao/miss-sign.png"),(0,D.default)(C,O.HAS_SIGNED_BEFORE,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),C);Component({options:{addGlobalClass:!0},properties:{showPopSwipe:{type:String,default:"task",observer:function(t){this.setData({showPopTask:t})}},ufrom:{type:String},refreshData:{type:Number,observer:function(t,e){0!==e&&this.showTaskData()}},sourceFrom:{type:String,default:""}},data:(0,_.default)((0,_.default)({coinImages:N},O),{},{showPopSwipeAnitation:!1,taskLoading:!1,calendarLoading:!1,taskList:[],signCanlendar:[],followBtn:!1}),intersectionObserver:{popTaskListObserver:null},observeObj:{},attached:function(){var t=this;"task"===this.data.showPopSwipe&&a((function(){t.setData({showPopSwipeAnitation:!0})}),100),this.showTaskData(),this.getFavorStatus()},detached:function(){var t=this.intersectionObserver.popTaskListObserver;t&&t.disconnect()},methods:{getFavorStatus:function(){var t=this;i.getFavorStatus&&i.getFavorStatus({success:function(e){1==+e.isFavor&&t.setData({followBtn:!0})},fail:function(){(0,L.textToast)("获取关注状态失败")}})},getFanliActivity:function(t){var e=this,n=JSON.stringify({follow_name:"huishenghuo",time:(Date.now()/1e3).toFixed(0).toString()});P.default.get(E.default.GET_ACTIVITY_DRAW,{data:{cmd:"grantScoreFollow",activity_id:"FanliActivity",req_from:"fw_xcx",token:(0,L.replaceAesStr)((0,L.aesCrypt)(n))}}).then((function(){e.setData({calendarLoading:!1,taskLoading:!1}),e.triggerEvent("bubble",t),e.showTaskData()})).catch((function(){(0,L.textToast)("关注返利失败")}))},favorStatusChangeHandle:function(t){var e=t.target.dataset,n=e.index,a=e.name,o=e.type,r=e.markCount;t.detail.isFavor&&(i.$log.sendNew({module:"task",rank:n,name:a,sourceFrom:this.data.sourceFrom,type:o,markCount:r},"click"),this.setData({followBtn:!0}),this.getFanliActivity(t))},showTaskData:function(){var t=this,e=this.data.ufrom;this.setData({calendarLoading:!0,taskLoading:!0}),Promise.all([this.getSignCanlendarData(e),this.getFanliTaskData()]).then((function(e){e.includes(!1)?t.setData({calendarLoading:!1,taskLoading:!1}):(t.isShowed||t.registerExposureLog("popTaskListObserver",".c-popup-tasklist-task-item"),t.isShowed=1,t.setData({calendarLoading:!0,taskLoading:!0}))})).catch((function(e){[e].includes(!1)&&t.setData({calendarLoading:!1,taskLoading:!1})}))},getSignCanlendarData:function(){var t=this,e=this.data.ufrom;return new Promise((function(n,a){(0,A.getSignCanlendar)(e).then((function(e){var a=e.items,o=e.preTitle,i=e.title,r=e.laterTitle;t.setData({signCanlendar:a,signCanlendarReverse:(0,L.reverseArr)(a),signPopupPreTitle:o,signPopupTitle:i,signPopupLaterTitle:r},(function(){a.length?n(!0):n(!1)}))})).catch((function(){a(!1)}))}))},getFanliTaskData:function(){var t=this;return new Promise((function(e,n){(0,A.getFanliTask)().then((function(n){var a;if(1==+n.isDanger)return(0,A.dangerUserModel)(n.feedback),(null==n||null===(a=n.feedback)||void 0===a?void 0:a.blackWindowText)&&t.hidePop(),void e(!1);n.item=(n.item||[]).map((function(t){return t.scoreText=(0,L.converterJinBi)(t.score),t})),t.setData({taskList:n},(function(){n.item.length?e(!0):e(!1)}))})).catch((function(){(0,L.textToast)("获取生活币任务列表失败，请刷新页面"),n(!1)}))}))},registerExposureLog:function(t,e){var n=this;a((function(){n.intersectionObserver[t]=i.createIntersectionObserver(n,{thresholds:[.5],selectAll:!0}),n.intersectionObserver[t].relativeToViewport({bottom:0,top:0}).observe(e,(function(t){t.intersectionRatio>0&&!n.observeObj[t.id]&&(n.observeObj[t.id]||(n.observeObj[t.id]=1),i.$log.sendNew(JSON.parse(t.dataset.show),"show"))}))}),1e3)},hidePop:function(t){this.setData({showPopSwipeAnitation:!1}),this.triggerEvent("close",t)},handelSign:function(t){var e=this,n=t.currentTarget.dataset.item,a=n.date,o=n.status,i=this.data.ufrom;o===this.data.TODAY_NOT_SIGN&&(0,A.getSignStatus)(i).then((function(){(0,A.getSignCanlendar)(i).then((function(t){var n=t.items,a=t.preTitle,o=t.title,i=t.laterTitle;e.setData({signCanlendar:n,signCanlendarReverse:(0,L.reverseArr)(n),signPopupPreTitle:a,signPopupTitle:o,signPopupLaterTitle:i,calendarLoading:!1})}))})).catch((function(t){(0,L.textToast)(t)})),this.showLog({from:"sign_task_board",module:"handel_sign",arg:{date:a},type:"click"})},taskListReload:function(){this.showTaskData()},searchTaskSuccess:function(t,e){var n=JSON.stringify({q:t.ext.queryShow,t:(Date.now()/1e3).toFixed(0).toString(),tk:e});return P.default.get(E.default.GET_ACTIVITY_DRAW,{data:{cmd:"grantScoreSearch",activity_id:"FanliActivity",t:(0,L.replaceAesStr)((0,L.aesCrypt)(n)),req_from:"fw_xcx",version:"v1"},canResArrayNull:!0,noTry:!0})},searchTaskErr:function(){i.hideLoading(),(0,L.textToast)("获取搜索任务失败，请重新进入页面～")},taskListJump:function(t){var e=this,n=t.currentTarget.dataset,a=n.item,o=n.status;if(1!=+o){switch(a.mark){case"Visit":var r=a.jumpUrl,s=a.jumpType,c=a.ext.text,u=JSON.stringify({path:r,type:s,text:c}),d={cmd:"grantScoreVisit",activity_id:"FanliActivity",req_from:"fw_xcx",token:(0,L.replaceAesStr)((0,L.aesCrypt)(u))};P.default.get(E.default.GET_ACTIVITY_DRAW,{data:d});break;case"Search":if(1==+o)return void(0,L.textToast)("您已完成任务，请明日再来～");i.showLoading({title:"正在加载..."});var l=JSON.stringify({q:a.ext.queryShow,t:(Date.now()/1e3).toFixed(0).toString()}),h={act:"activeTask",activity_id:"FanliActivity",mark:"Search",t:(0,L.replaceAesStr)((0,L.aesCrypt)(l)),req_from:"fw_xcx",version:"v1"};P.default.get(E.default.WEEK_ACTIVITY_TASKS,{data:h}).then((function(t){t.url?e.searchTaskSuccess(a,h.t).then((function(){i.hideLoading(),k.default.to(t.url,"box"),e.showTaskData()})).catch((function(){e.searchTaskErr()})):e.searchTaskErr()})).catch((function(t){e.searchTaskErr()}));break;case"CheckExpress":if(1==+o)return void(0,L.textToast)("您已完成任务，请明日再来～")}k.default.withEvent(t)}},tapShare:function(t){this.commonShare()},commonShare:function(){var t=r().globalData.rebateShareInfo,e=(0,L.shareAppMessageUrlPatch)(t);i.openShare(e)},showLog:function(t){t.canalName||"canalName"in(t.arg||{})||(t.arg=Object.assign({canalName:this.data.canalName},(0,_.default)({},t.arg||{}))),i.$log.send((0,_.default)({module:t.module},t.arg),t.type||"display",{from:t.from||this.ubcLog.from})}}})})),window.define("314",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(41),C=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.getSignStatus=function(t){return new Promise((function(e,n){O(E.default.GET_ACTIVITY,{activity_id:"FanliSign"},t).then((function(t){e(t)})).catch((function(t){n(t)}))}))},n.getSignCanlendar=function(t){return new Promise((function(e,n){O(E.default.GET_ACTIVITY,{activity_id:"FanliSignCalender"},t).then((function(t){e(t)})).catch((function(t){n(t)}))}))},n.getFanliTask=function(){return new Promise(function(){var t=(0,_.default)(x.default.mark((function t(e,n){var a,o;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,L.getZidReTry)(),(0,L.getJtData)(A.FENGKONG_PARAMS.HSH)]).catch((function(t){return n(t)}));case 2:if(!(a=t.sent)){t.next=7;break}return o={activity_id:"FanliTaskList",version:"v2",zid:a[0],jt:a[1],js_env:"swan"},t.next=7,O(E.default.GET_ACTIVITY,o).then((function(t){return e(t)})).catch((function(t){return n(t)}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},n.fetchData=O,n.dangerUserModel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.blackWindowLeftButton,n=t.blackWindowRightButton,a=t.blackWindowText,i=t.jumpType,r=t.jumpUrl,s=t.handleBackUrl,c=t.handleBackType;if(!a)return;o.showModal({content:a,showCancel:!0,cancelText:e,confirmText:n,success:function(t){t.cancel?P.default.to(r,i):o.navigateBack({fail:function(){P.default.to(s,c)}})}})};var x=C(t(27)),_=C(t(29)),D=I(t(9)),k=C(t(17)),P=C(t(14)),E=C(t(33)),L=t(144),A=t(31);function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,o){D.getSysData().then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign({activity_id:"FanliActivity",zid:i.zid,ufrom:n,version:"v1"},e);k.default.get(t,{data:r}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(t)})).catch((function(t){o(t)}))}))}))}})),window.define("316",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(15)),_=C(t(247)),D=C(t(317)),k=t(249),P=_.default.calcTime,E=_.default.request,L=_.default.getSystemInfo,A=_.default.get,O=_.default.isPlainObject,N=_.default.isEmptyObject,R=L(),B=null;Component({properties:{isTemplate:{type:Number,value:1},requestOptions:{type:Object,value:{},observer:function(t){t&&t.url&&(this.setData({isTemplate:0}),this.requestInitData("init"))}},drawOptions:{type:Object,value:{}},btnColor:{type:String,value:"#58A0FF"},lotteryInfo:{type:Array,value:[]},tabInfo:{type:Array,value:!0,observer:function(t){var e=this;if(t&&t.length){var n=t.findIndex((function(t){return t.isSelected}));if(n>=0){var a=this.calcPadding(n);this.setData({tabInfo:t,currentIndex:n},(function(){e.setData({scrollLeft:a})}))}}}},subscribe:{type:Object,value:{templateId:"",subscribeId:""}},mode:{type:String,value:"scaleToFill"}},data:{itemWidth:433/3,currentIndex:-1,scrollLeft:100,screenWidth:R.screenWidth},pageLifetimes:{hide:function(){this.runTimer=!1},show:function(){this.runTimer=!0}},observers:{lotteryInfo:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this;if(t){var n=this.data.currentIndex;if(-1===n){var o=t.findIndex((function(t){return t.prize}));n=o>=0?o:0}this.setData({currentIndex:n});var i=t[n]||{},r=i.enableTimeDown,s=i.closeCountDown,c=i.publishCountDown,u=i.finishCountDown;r&&(c||u)?c?this.timeDown(c,n):u&&this.timeDown(u,n):s&&a((function(){e.triggerEvent("timedownrefresh"),e.data.isTemplate||e.requestInitData()}),1e3*s)}}))},methods:{timeDown:function(t,e){var n=this,o=this.data.lotteryInfo,i=void 0===o?[]:o,r=i[e],s=r.publishCountDown,c=r.finishCountDown;if(r&&r.prize&&(s||c)){if(0===t)return this.triggerEvent("timedownrefresh"),void(this.data.isTemplate||this.requestInitData());var u="";u=t%2?P(t):P(t," "),s?r.publishCountDownNum=u:c&&(r.finishCountDownNum=u),i[e]=r,this.setData({lotteryInfo:i},(function(){clearTimeout(B),n.runTimer&&(B=a((function(){n.timeDown(t-1,e)}),1e3))}))}}},calcPadding:function(t){var e=this.data,n=e.screenWidth,a=e.itemWidth,o=a/2+t*a-n/2;return o=o<=0?0:o},tapMore:function(t){var e=this.data,n=e.lotteryInfo,a=e.currentIndex,o=e.isTemplate,i=n[a];if(this.triggerEvent("tapmore",i),!o){var r=i.moreData.jumpUrl,s=i.moreData.jumpType;r&&s&&D.default.to(r,s)}},tapSubscribe:function(t){t.currentIndex=this.data.currentIndex,this.draw(),this.triggerEvent("tapsubscribe",t)},tapItem:function(t){var e=this,n=t.currentTarget.dataset,a=n.index,o=n.item;a!==this.data.currentIndex&&this.setData({currentIndex:a},(function(){var t=e.data.isTemplate;e.triggerEvent("tapitem",(0,x.default)((0,x.default)({},o),{},{currentIndex:a})),t||e.requestInitData()}))},draw:function(){var t=this.data,e=t.currentIndex,n=t.isTemplate,a=this.data.lotteryInfo[e];if(a.currentIndex=e,this.triggerEvent("drawbtn",a),!n){if(a.warmToast)return void(0,k.textToast)(a.warmToast);this.requestDrawData()}},requestInitData:function(t){var e=this,n=this.data,a=n.requestOptions,o=n.currentIndex,i=n.tabInfo,r=void 0===i?[]:i,s=a.url;o>=0&&r[o]&&(a.data.lottery_id=r[o].globalLotteryId),E(s,a).then((function(n){var a=A(n,"code"),o=A(n,"data"),i=o.tabInfo,r=void 0===i?[]:i,s=o.lotteryInfo,c=void 0===s?{}:s;N(c)&&!N(o)&&(c=o);var u=e.data.currentIndex,d=e.data.lotteryInfo.length?e.data.lotteryInfo:[],l=r.findIndex((function(t){return t.isSelected}));-1===u&&l>=0?(u=l,O(c)&&((d=new Array(r.length).fill([]))[u]=c)):u>=0?d[u]=c:d[u=0]=c,0==+a&&o?(e.setData({tabInfo:r,lotteryInfo:d,currentIndex:u},(function(){if(t){var n=e.calcPadding(u);n&&e.setData({scrollLeft:n})}})),e.triggerEvent("requestdatasuccess",n)):((0,k.textToast)(n.msg||"请求失败~"),e.triggerEvent("requestdatafail",n))})).catch((function(t){(0,k.textToast)(t.msg||"请求失败~"),e.triggerEvent("requestdatacatch",t)}))},requestDrawData:function(){var t=this,e=this.data,n=e.drawOptions,a=e.currentIndex,o=e.tabInfo,i=void 0===o?[]:o,r=n.url;a>=0&&lotteryInfo[a]&&(n.data.lottery_id=i[a].globalLotteryId),E(r,n).then((function(e){var n=A(e,"code"),a=A(e,"data");0==+n&&a?((0,k.textToast)("参与成功~"),t.triggerEvent("drawbtnsuccess",e)):((0,k.textToast)(e.msg||"参与失败~"),t.triggerEvent("drawbtnfail",e))})).catch((function(e){(0,k.textToast)(e.msg||"参与失败~"),t.triggerEvent("drawbtncatch",e)}))}})})),window.define("317",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=I(t(15)),x=I(t(247)),_=x.default.parseQuery,D=x.default.stringifyQuery;function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.split("?"),r=i[0],s=_(i[1])||{};("xcx"===e||a)&&(s.unencode=!0),+s.unencode&&(a=!0,delete s.unencode);var c=i[1]?"?"+D(s,{encode:!a}):"";return new Promise((function(a,i){if("local"!==e)if("xcx"!==e)if("na"!==e){if("box"===e){var u={},d=r+c;if(d.startsWith("http"))u.module="browser",u.action="open",u.parameters={url:d,append:1};else{var l=r.replace(/^\w+:\/\//,"").split("/"),h=l[0],p="/"+l.slice(1).join("/");u.parameters=s,u.authority=h,u.path=p}o.openBdboxWebview(Object.assign({},u,{success:function(t){return a(t)},fail:function(t){return i((0,C.default)({url:d,type:e},t))}}))}}else{var f=r+c;o.openAppByURL({url:f,success:function(t){return a(t)},fail:function(t){return i((0,C.default)({url:f,type:"na"},t))}})}else{var g=r.slice(0,r.indexOf("/")),m=r.slice(r.indexOf("/"))+c,v={};if(s.extraData)try{v=JSON.parse(s.extraData)}catch(t){v={}}if(!n){var w=getCurrentPages();n=w[w.length-1].xcxFrom}o.navigateToSmartProgram({path:m,appKey:g,from:n,extraData:v,success:function(t){return a(t)},fail:function(e){return i((0,C.default)({url:t,type:"xcx"},e))}})}else{var b=Date.now(),y=r+c+(c?"&":"?")+"enterT="+b;o.navigateTo({url:y,success:function(t){return a(t)},fail:function(t){return i((0,C.default)({url:y,type:"local"},t))}})}}))}var P={withEvent:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpType,o=e.canalName,i=e.unencode;n&&a&&k(n,a,o,i)},to:function(t,e,n){return k(t,e,n)},back:function(){o.navigateBack()},goHome:function(){k("/pages/index/index","local")},openNA:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};""!==t&&o.openNASmartProgram({path:t,query:e})}};n.default=P})),window.define("318",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(141)),D=t(40),k=t(9),P=t(26);Page((0,_.default)({data:{hasInit:!1,hasShow:!1},onInit:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t),(0,D.sendDist)({version:(0,k.getSystemInfo)().version},{},"hsh"))},onLoad:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t),(0,D.sendDist)({version:(0,k.getSystemInfo)().version},{},"hsh"))},appInit:function(t){var e=this;this.$location.getAll().then(function(){var n=(0,x.default)(C.default.mark((function n(a){var o,i,r,s,c,u,d,l,h,p;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.city,i=void 0===o?"":o,r=a.cityCode,s=void 0===r?"":r,c=t.xfrom,u=void 0===c?"":c,d=t.sfrom,l=void 0===d?"":d,h="https://alayn.baidu.com/static/webapp/index.html?cityName=".concat(encodeURIComponent(i),"&cityCode=").concat(s,"&from=").concat(l,"&xfrom=").concat(u,"&timestamp=").concat(Date.now()),n.next=5,(0,P.getSessionId)();case 5:p=n.sent,e.setData({cityCode:s,src:h+"&sessionId=".concat(p)});case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},onShow:function(){var t=this;this.hasShow&&this.$location.getAll().then((function(e){e.cityCode!==t.data.cityCode&&o.reLaunch({url:"/"+t.uri})})),this.hasShow=!0}}))})),window.define("320",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=requireDynamicLib("swan-solutions-ug-template").navigateToTemplatePage;Page({onLoad:function(){I(this.options,this.uri)}})})),window.define("323",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(41),C=t(10),x=C(t(141)),_=C(t(14)),D=I(t(9)),k=t(26),P="homes/rebate/rebate?sfrom=shareUrl&source=shareUrl";Page((0,x.default)({data:{rendered:!1,showErrorPage:!1,shareInfo:null,defaultShareInfo:{title:"天天领红包",content:"你有一个超大红包待领取，复制口令，打开百度App查看",imageUrl:"https://scenter.cdn.bcebos.com/logo/updatelogo.png",path:"/homes/rebate/rebate?sfrom=shareUrl&source=shareUrl"},canalName:"",subscribe:{templateId:"BD0661",subscribeId:"ScenterLotteryFanli"},tabInfo:[],lotteryInfo:null,showTab:1},ubcLog:{from:"lottery"},hasInit:!1,onInit:function(){if(!this.hasInit){this.hasInit=!0;var t=(0,k.tagTester)("Undefined",this.options.showTab)?1:this.options.showTab||0,e=this.options.lottery_id;this.setData({lotteryId:e,showTab:t}),this.appInit(e,t)}},onLoad:function(){if(!this.hasInit){this.hasInit=!0;var t=(0,k.tagTester)("Undefined",this.options.showTab)?1:this.options.showTab||0,e=this.options.lottery_id;this.setData({lotteryId:e,showTab:t}),this.appInit(e,t)}},onShow:function(){this.data.rendered&&this.appInit("",0)},onHide:function(){},onErrorPageReload:function(){this.appInit("",this.data.showTab)},fetchData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,o){D.getSysData().then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.data=Object.assign({},{version:"v1",zid:i.zid},n.data),e.$http.get(t,n).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(t)})).catch((function(t){o(t)}))}))}))},appInit:function(t,e){var n=this;this.commonLoginPromise().then((function(){n.fetchData(n.$api.GET_ACTIVITY,{data:{activity_id:"FanliLottryJoinInfo",lottery_id:t||n.data.lotteryId,show_tab:e||0},noTry:!0}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.useData(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.$showErrorPage(t.errType||3),(0,k.textToast)(t&&t.msg?t.msg:"网络问题，请稍后再试~")}))})).catch((function(){n.setData({rendered:!0})}))},stopTou:function(){"web"!==D.getSystemInfo().platform?(0,k.textToast)("登录才能参与活动哦~"):_.default.openNA(P)},closeComPop:function(){"web"!==D.getSystemInfo().platform?(0,k.textToast)("登录才能参与活动哦~"):_.default.openNA(P)},getphonenumber:function(t){"web"!==D.getSystemInfo().platform?t.detail.encryptedData?(this.setData({showComPop:!1}),this.appInit("",this.data.showTab)):(0,k.textToast)("登录才能参与活动哦~"):_.default.openNA(P)},otherLogin:function(t){"web"!==D.getSystemInfo().platform?t.isLogin?(this.setData({showComPop:!1}),this.appInit("",this.data.showTab)):(0,k.textToast)("登录才能参与活动哦~"):_.default.openNA(P)},commonLoginPromise:function(){var t=this;return new Promise((function(e,n){if("web"===D.getSystemInfo().platform)return _.default.openNA(P),void n();D.isLogin()?e():((0,k.textToast)("登录才能参与活动哦~"),t.setData({showComPop:!0}),n())}))},useData:function(t){var e=this,n=this.data.lotteryInfo?(0,k.cloneDeep)(this.data.lotteryInfo):new Array((t.tabInfo||this.data.tabInfo).length||1).fill({}),a={showTab:0,showErrorPage:!1},o=null;if(0==+this.data.showTab)t.status.button.status=t.status.lotteryStatus,(o=this.batchProcessData(t)).status.joinCountText=this.calcPeopleNum(o.status.joinCount),o.status.button.status=o.status.lotteryStatus,n[this.data.currentIndex||0]=o,a.lotteryInfo=n,a.canalName=t.canalName;else{var i=t.tabInfo;a.tabInfo=i;var r=i.findIndex((function(t){return t.isSelected}));(o=t.lotteryInfo).status.joinCountText=this.calcPeopleNum(o.status.joinCount),o.status.button.status=o.status.lotteryStatus,n[r]=this.batchProcessData(o),a.currentIndex=r,a.lotteryInfo=n,a.canalName=o.canalName}this.setData(a,(function(){e.setData({rendered:!0})}))},calcPeopleNum:function(t){return t<1e4?t:t<1e7?(0,k.formatDecimal)(t/1e4,1)+"万":t<1e8?(0,k.formatDecimal)(t/1e4,0)+"万":(0,k.formatDecimal)(t/1e8,1)+"亿"},batchProcessData:function(t){var e=+t.status.lotteryStatus;switch(0!==e&&(delete t.publishCountDown,delete t.publishTime),1!==e&&2!==e&&(delete t.prize.scoreIcon,delete t.prize.score,delete t.prize.scoreUnit),1!==e&&2!==e&&3!==e&&delete t.finishCountDown,4!==e&&5!==e&&delete t.closeCountDown,6!==e&&7!==e&&delete t.lotteryRes.winUname,8!==e&&(delete t.winConf.lotteryPoint,delete t.winConf.winPoint),e){case 0:t.publishCountDownNum=(0,k.calcTime)(t.publishCountDown),t.enableTimeDown=1;break;case 1:case 2:case 3:t.finishCountDownNum=(0,k.calcTime)(t.finishCountDown),t.enableTimeDown=1}return t},tapItem:function(t){var e=this;this.commonLoginPromise().then((function(){o.$log.send({module:"lottery_tab_".concat(t.currentIndex),index:t.currentIndex,tab:t.tab,date:t.date,tabIcon:t.tabIcon,globalLotteryId:t.globalLotteryId,isSelected:t.isSelected,desc:t.desc,canalName:t.canalName},"click");e.setData({showTab:0,currentIndex:t.currentIndex,lotteryId:t.globalLotteryId},(function(){e.appInit(t.globalLotteryId,0)}))}))},tapMore:function(t){var e=this;this.commonLoginPromise().then((function(){var n=t.moreData.jumpUrl,a=t.moreData.jumpType;o.$log.send({module:"lottery_more",index:t.currentIndex,apptype:a,url:n,desc:t.moreData.desc,canalName:t.canalName},"click"),n&&a&&_.default.to(n,a,e.data.canalName)}))},doSubscribe:function(t){var e=this,n=t.currentIndex,a=t.detail,o=a.status,i=a.formId,r={currentIndex:n},s=this.data.subscribe,c=s.subscribeId;0==+o?(0,k.sendSubscribeToRd)({subscribeId:c,formId:i,self:this}).then((function(){var t=e.data.lotteryInfo;t[n].subStatus=1,r.lotteryInfo=t,e.setData(r)})).catch((function(){e.setData(r),(0,k.subscribeService)(s,"cancel")})):(0,k.subscribeService)(s,"cancel")},tapSubscribe:function(t){var e=this;this.commonLoginPromise().then((function(){e.doSubscribe(t.detail)}))},joinLottery:function(t){var e=this;this.fetchData(this.$api.GET_ACTIVITY_DRAW,{data:{cmd:"joinLottery",activity_id:"FanliActivity",lottery_id:t.globalLotteryId}}).then((function(){(0,k.textToast)("参与成功~"),e.appInit(t.globalLotteryId,0)})).catch((function(t){(0,k.textToast)(t&&t.msg?t.msg:"网络问题，请稍后再试~")}))},drawBtn:function(t){var e=this;this.commonLoginPromise().then((function(){if(o.$log.send({module:"lottery_btn_".concat(t.currentIndex),toJoin:2===t.status.button.status,showTab:e.data.showTab,index:t.currentIndex,title:t.prize.title,score:t.prize.score,img:t.prize.img,curPrice:t.prize.curPrice.priceNum,oriPrice:t.prize.oriPrice.priceNum,lotteryId:t.lotteryId,globalLotteryId:t.globalLotteryId,subStatus:t.subStatus,canalName:t.canalName,status:t.lotteryStatus,text:t.status.button.text,joinCount:t.status.joinCount,closeTime:t.closeTime,finishTime:t.finishTime,publishTime:t.publishTime},"click"),1===t.status.button.status||2===t.status.button.status||8===t.status.button.status)if(1!==t.status.button.status)if(2!==t.status.button.status){var n=t.winConf,a=n.jumpUrl,i=n.jumpType;8===t.status.button.status&&a&&i&&_.default.to(a,i,e.data.canalName)}else e.joinLottery(t);else(0,k.textToast)("生活币不足，快去做任务赚生活币吧~")}))},onShareAppMessage:function(){var t=i().globalData.rebateShareInfo;return(0,k.shareAppMessageUrlPatch)(t)}}))})),window.define("326",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x,_=t(10),D=t(41),k=_(t(157)),P=_(t(19)),E=_(t(27)),L=_(t(29)),A=_(t(15)),O=_(t(16)),N=_(t(141)),R=_(t(14)),B=D(t(9)),j=t(26),U=t(144),M=t(314),F=t(31),H=!0,G=null,$=null,q=null,V=0,Y="homes/rebate/rebate?sfrom=shareUrl&source=shareUrl",z={timer:null,timeout:4e3},W={timer:null,timeout:2e3},K={timer:null,timeout:600},J={timer:null,timeout:900},Q={timer:null,timeout:1400},X=["https://scenter.cdn.bcebos.com/ws/yun/yun_l.png","https://scenter.cdn.bcebos.com/ws/yun/yun_s.png","https://scenter.cdn.bcebos.com/ws/yun/yun_m.png"],Z="https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-share.png",tt={HAS_SIGNED:1,TODAY_NOT_SIGN:2,TODAY_SIGNED:3,NOT_SIGN:4,NOT_SIGN_BEFORE:5,HAS_SIGNED_BEFORE:6},et=(x={},(0,O.default)(x,tt.HAS_SIGNED,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),(0,O.default)(x,tt.TODAY_NOT_SIGN,"https://scenter.cdn.bcebos.com/qiandao/not-sign.png"),(0,O.default)(x,tt.TODAY_SIGNED,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),(0,O.default)(x,tt.NOT_SIGN,"https://scenter.cdn.bcebos.com/qiandao/not-sign.png"),(0,O.default)(x,tt.NOT_SIGN_BEFORE,"https://scenter.cdn.bcebos.com/qiandao/miss-sign.png"),(0,O.default)(x,tt.HAS_SIGNED_BEFORE,"https://scenter.cdn.bcebos.com/qiandao/signed-in.png"),x),nt={mainBg:"http://static.open.baidu.com/media/ch1000/png/toutut2.png",isFirework:!1,sheepStatus:{shearing:{bg:"https://scenter.cdn.bcebos.com/ws/afx/moren_yang.png",path:"https://scenter.cdn.bcebos.com/hym22/hym-afx.mp4",resourceWidth:1636,resourceHeight:846,video:null},normal:{bg:"https://scenter.cdn.bcebos.com/ws/afx/moren_yang.png",path:"https://scenter.cdn.bcebos.com/ws/afx/jinbi_shouji.mp4",resourceWidth:1636,resourceHeight:846,video:null}}},at="https://scenter.cdn.bcebos.com/hym22/hym-bottom.png";Page((0,N.default)({data:(0,A.default)((0,A.default)((0,A.default)({defaultShareInfo:{title:"天天领红包",content:"你有一个超大红包待领取，复制口令，打开百度App查看",imageUrl:"https://scenter.cdn.bcebos.com/logo/updatelogo.png",path:"/homes/rebate/rebate?sfrom=shareUrl&source=shareUrl"},perImgList:[].concat(X,[nt.sheepStatus.shearing.bg,nt.sheepStatus.shearing.path,nt.sheepStatus.normal.bg,nt.sheepStatus.normal.path,Z,at]),clouds:X,sheepStatusType:"normal"},nt),{},{videoParam:{loop:!0,autoplay:!0},assertInfo:null,currentPage:{jumpType:"local",jumpUrl:"/homes/rebate/rebate"},myWool:{jumpType:"local",jumpUrl:"/homes/rebate-list/rebate-list"},homePage:{jumpType:"local",jumpUrl:"/pages/index/index"},goodsDetail:{jumpType:"local",jumpUrl:"/homes/rebate-goods/rebate-goods"},ajaxLock:!1,guideStatus:0,oldUserGuideStatus:0,recodeWarnSub:!0,subStatus:1,hideSub:!0,showPopSwipe:!1,showComPop:void 0,comPopData:{},guideStep:1,showCollar:!1,totalScore:0,woolListPosition:[1,2,3,4],woolList:[],woolListTotal:0,tackScore:{mole:0,deno:1e4,status:1,speed:1e3},taskList:{bubble:"快来赚生活币吧～",item:null},activityStatus:1,canalName:"",scenterPayFanli:{templateId:"BD2406",subscribeId:"ScenterPayFanli"},feedBack:{},ruleInfo:void 0,shareInfo:void 0,shareImg:Z,isNewUser:!1,lotteryButton:{0:{text:"即将开始",color:"#58A0FF"},1:{text:"已参与",color:"#58A0FF"},2:{text:"立即抽奖",color:"#58A0FF"},3:{text:"开奖中",color:"#58A0FF"},4:{text:"已开奖",color:"#58A0FF"}},current:0,jinBiSwiper:{autoplay:!0,autoPlayInterval:3e3,switchVerticalStatus:!0,circular:!0},signCanlendar:[],signCanlendarReverse:[],signPopupPreTitle:"",signPopupTitle:"",signPopupLaterTitle:"",showSignPop:!1,signPopBg:at,signPrizeTitle:"",coinImages:et},tt),{},{isSign:0,taskLoading:!1,calendarLoading:!0,showYindao:!1,skuLoding:!0,tabSelect:0,refreshData:0,getGoodsListLock:!1,sheepImg:(0,j.gzipImg)("https://scenter.cdn.bcebos.com/ws/doudi/dd_sku.png"),notAuthAll:!1}),ubcLog:{from:"tthym_main"},hasInit:!1,hasRender:!1,observeObj:{},intersectionObserver:{productListObserver:null,productTabObserver:null,productCouponObserver:null},isShowed:0,attr:{tabListCache:null},onPrefetch:function(){this.attr.prefetchSheepTalk=this.fetchSheepTalk()},onInit:function(){this.originData=Object.assign({},this.data),this.hasInit||(this.hasInit=!0,this.initData(this.options.showPopSwipe)),s().event.on("appClose",this.appClose,this),this.initFetchSheepTalk()},onLoad:function(){this.initVideo(),this.originData=Object.assign({},this.data),this.hasInit||(this.hasInit=!0,this.initData(this.options.showPopSwipe))},connentObserver:function(){this.registerExposureLog("productListObserver",".coupon-horizontal-item"),this.registerExposureLog("productTabObserver",".coupon-horizontal-tab")},tryPlay:function(t){var e=this.data.sheepStatusType;if(e){var n=r.createAnimationVideo(e);n&&n.pause(),n&&n.play()}},playVideo:function(t){var e=this;this.tryPlay(!0),t||(clearTimeout($),$=a((function(){e.tryPlay()}),3e3))},onShow:function(){this.playVideo(1),H=!0,this.hasRender&&this.initData(void 0,!1,"onShow")},onHide:function(){this.setData({renderVideo:!1,showFeedback:!1}),H=!1,this.expireTimer&&clearInterval(this.expireTimer)},onUnload:function(){this.disconnentObserver();var t=this.intersectionObserver,e=t.productTabObserver,n=t.productCouponObserver;e&&e.disconnect(),n&&n.disconnect(),H=!1},disconnentObserver:function(){var t=this.intersectionObserver.productListObserver;t&&t.disconnect()},fetchSheepTalk:function(){return this.fetchData(this.$api.GET_ACTIVITY,{activity_id:"FanliNoticeText"})},initFetchSheepTalk:function(){var t=this;return(0,L.default)(E.default.mark((function e(){var n;return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.attr.prefetchSheepTalk;case 2:if(!(n=e.sent)){e.next=7;break}t.attr.prefetchActivity=null,e.next=10;break;case 7:return e.next=9,t.fetchSheepTalk();case 9:n=e.sent;case 10:n.text&&t.setData({sheepTalkText:n.text});case 11:case"end":return e.stop()}}),e)})))()},registerExposureLog:function(t,e){var n=this;this.intersectionObserver[t]=r.createIntersectionObserver(this,{thresholds:[.5],selectAll:!0}),a((function(){n.intersectionObserver[t].relativeToViewport().observe(e,(function(e){if(e.intersectionRatio>.5){var a={};if("productCouponObserver"===t&&Array.isArray(n.data.couponList))a=n.data.couponList[e.dataset.couponIndex].item[e.dataset.index];else if("productListObserver"===t&&Array.isArray(n.data.newGoodsList)){var o,i;a=null===(o=n.data.newGoodsList[e.dataset.selectIndex])||void 0===o||null===(i=o.goodsList)||void 0===i?void 0:i[e.dataset.index]}else{var r,s;a=null===(r=n.data.goodsList)||void 0===r||null===(s=r[0])||void 0===s?void 0:s[0]}var c=e.dataset.show;n.registerExposureSendLog(a,c)}}))}),1e3)},registerExposureSendLog:function(t,e){t&&!t.hasSendLog&&(t.hasSendLog=!0,r.$log.sendNew(JSON.parse(e),"show"))},onErrorPageReload:function(){this.initData()},showLog:function(t){t.canalName||"canalName"in(t.arg||{})||(t.arg=Object.assign({canalName:this.data.canalName},(0,A.default)({},t.arg||{}))),r.$log.send((0,A.default)({module:t.module},t.arg),t.type||"display",{from:t.from||this.ubcLog.from})},goHomePage:function(t){this.showLog({from:"tthym_backup_window",module:"view_btn",type:"click"}),R.default.withEvent(t)},commonLoginPromise:function(t){var e=this;return new Promise((function(n,a){if("web"===B.getSystemInfo().platform)return R.default.openNA(Y),void a();B.isLogin()?n():t?a():e.setData({showComPop:"login"},(function(){a()}))}))},tapMyWool:function(t){this.commonLoginPromise().then((function(){R.default.withEvent(t)}))},tapFeedBack:function(t){this.commonLoginPromise().then((function(){R.default.withEvent(t)}))},initVideo:function(){var t=s().globalData.systemInfo.screenWidth,e=this.data.sheepStatus;Object.entries(e).forEach((function(n){var a=(0,P.default)(n,2),o=a[0],i=a[1];e[o].width="".concat((i.resourceWidth/6/414*t).toFixed(2),"px"),e[o].height="".concat((i.resourceHeight/3/414*t).toFixed(2),"px")})),this.setData({sheepStatus:e})},initData:function(t,e,n){var a=this;this.getLotteryData(n);var o=this.options,i=o.t,r=void 0===i?"":i,s=o.ufrom;this.setData({ufrom:s});var c=this.fetchData(this.$api.GET_ACTIVITY,{shareToken:r}),u=this.$http.get(this.$api.THIRD_AUTH_LIST,{data:{path:this.route}});Promise.all([c,u]).then((function(n){var o=(0,P.default)(n,2),i=o[0],r=void 0===i?{}:i,s=o[1],c=void 0===s?{}:s,u=r.header,d=(void 0===u?{}:u).assertInfo,l=(void 0===d?{}:d).isSign,h=void 0===l?0:l,p=Object.values(c).some((function(t){return 0==+t}));a.setData({isSign:h}),a.useData(r,t,e,p)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(1==+t.errType)a.$showErrorPage(1);else{var e={};"error"!==a.data.showComPop&&(e.showComPop="error",a.showLog({from:"tthym_backup_window",module:"backup_window"})),a.setData(e)}})).finally((function(){a.setData({renderVideo:!0})}))},handleClickTab:function(t){this.disconnentObserver();var e=t.target.dataset.index;V=e,this.data.selectIndex===e||this.data.newGoodsList[e]||this.getGoodsList(),this.setData({selectIndex:e}),this.connentObserver()},signOpear:function(){var t=this,e=this.options.ufrom;return new Promise((function(n,a){(0,M.getSignStatus)(e).then((function(a){var o=a.sign_window.prize_title;t.getLotteryData(),t.fetchData(t.$api.GET_ACTIVITY,{}),(0,M.getSignCanlendar)(e).then((function(e){var a=e.items;t.setData({signCanlendarReverse:(0,j.reverseArr)(a),showComPop:"sign",signPrizeTitle:o},(function(){n(!0)})),t.showLog({from:"sign_window",module:"view_sign_window"})}))})).catch((function(){a(!1)}))}))},calcPercent:function(t,e){var n=t/e*100;return Math.floor(n<5?5:n)},useData:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c={},u=n.windowList,d=void 0===u?[]:u,l=n.activityStatus,h=n.header,p=n.other,f=h||{},g=f.ruleInfo,m=void 0===g?null:g,v=f.assertInfo,w=f.assertInfo,b=w.collar,y=w.score,T=w.totalScore,S=w.tackScore,I=w.isSign,C=h&&h.shareInfo&&h.shareInfo.img?h.shareInfo.img:this.data.shareImg,x=p||{},_=x.shareInfo,D=x.scenterPayFanli,k=void 0===D?{}:D,P=x.subStatus,E=x.guideStatus,L=x.oldUserGuideStatus,A=x.canalName,O=void 0===A?"":A,N=x.feedBackUrl,R=void 0===N?{}:N;P=0===Number(P)?0:1,0==+l&&(t="error",this.showLog({from:"tthym_backup_window",module:"backup_window"}));var U={};if(d=(d||[]).map((function(t){return t.item=(t.item||[]).map((function(t){return t.scoreText=(0,j.converterJinBi)(t.score),t})),t})),0!==E&&0!==L||d.push({mark:"guide"}),0===L||0===E||d.length||i||this.signOpear(),d.length&&"error"!==t)if(d[0]&&"Login"===d[0].mark)t="login",U=d[0],this.showLog({from:"tthym_login_window",module:t});else if(d[0]&&"NotReceive"===d[0].mark){t="NotReceive",U=d[0];var M=d[0].titleInfo,F=M.score,H=M.scoreUnit;this.showLog({from:"tthym_new_user_window",module:"new_user_window",arg:{reward:F+H}})}else"task"===this.data.showPopSwipe||"task"===o?(t=!1,c.showPopSwipe=this.data.showPopSwipe||o,this.showLog({from:"tthym_task_list",module:"task_list"})):d[0]&&"Lottery"===d[0].mark?(this.sendLotteryRecode(d[0].lotteryId),t="lottery",U=d[0]):d[0]&&"guide"===d[0].mark&&(t="guide",U=d[0],this.showLog({from:"tthym_new_user_guide",module:"new_user_guide"}));else t="error"===t&&"error",(this.data.showPopSwipe||o&&"error"!==t)&&(c.showPopSwipe=this.data.showPopSwipe||o,this.showLog({from:"tthym_task_list",module:"task_list"}));c.isNewUser=c.isNewUser||!1;var G=(y=(v.score||[]).map((function(t,n){if(t.scoreText=(0,j.converterJinBi)(t.score),t.expire){var a=(0,j.formatSecond)(+t.expire),o=a.hours,i=a.minutes,r=a.seconds;t.countDown="".concat(o,":").concat(i,":").concat(r),e.handleCountDown()}return t}))).reduce((function(t,e){return t+e.score}),0)||0;y.length&&r.$log.send({module:"wool_bubbles"},"display");var $=!y||!y.length;S.mole=Number(S.mole),S.deno=Number(S.deno),S.percent=this.calcPercent(S.mole,S.deno),(S=Object.assign({},this.data.tackScore,S)).status=Number(S.status),S.speed=!S.speed||S.speed<1e3?1e3:S.speed,k=Object.assign({},this.data.scenterPayFanli,k),_.shareType=Number(_.shareType)||0;var q={isLogin:B.isLogin(),showComPop:t,shareInfo:_,sheepStatusType:"normal",recodeWarnSub:0===P,subStatus:P,hideSub:1===P,guideStatus:E,oldUserGuideStatus:L,windowList:d,woolListTotal:G,comPopData:U,scenterPayFanli:k,guideStep:0===L?this.data.guideStep:2,ruleInfo:m,shareImg:C,activityStatus:l,assertInfo:v,collar:b,showCollar:$,woolList:y,totalScore:T,totalScoreText:(0,j.converterMG)(T),totalScoreJinbi:(0,j.converterJinBi)(T),totalScoreYuan:(0,j.converterYuan)(T),tackScore:S,canalName:O,feedBack:R,showErrorPage:!1,isSign:I,taskLoading:!1,tabSelect:0,notAuthAll:s};this.hasRender&&(q.refreshData=this.data.refreshData+1),this.setData(Object.assign({},this.originData,q,c),(function(){e.hasRender=!0,e.checkSubs(),e.playVideo(),e.setData({renderVideo:!0}),e.commonLoginPromise("noLoginPop").then((function(){e.autoAdd()}))})),1===S.status&&(this.setData({showYindao:!0}),a((function(){e.setData({showYindao:!1})}),5e3))},handleCountDown:function(){var t=this;this.expireTimer&&clearInterval(this.expireTimer),this.expireTimer=o((function(){var e=t.data.woolList;e.forEach((function(e){var n=+e.expire-1;n<=0&&(n=0,t.initData());var a=(0,j.formatSecond)(n),o=a.hours,i=a.minutes,r=a.seconds;e.countDown="".concat(o,":").concat(i,":").concat(r),e.expire=n})),t.setData({woolList:e})}),1e3)},autoAdd:function(t){var e=this,n=this.data.tackScore;if(n.mole>=n.deno||0===n.status)n.mole>n.deno&&(n.mole=n.deno,n.animation=!1,this.setData({tackScore:n}));else{n.mole=t?0:n.mole+1,n.mole=n.mole>=n.deno?n.deno:n.mole,n.percent=this.calcPercent(n.mole,n.deno),(n=Object.assign({},this.data.tackScore,n)).animation=!0;var o={tackScore:n},i=Date.now();this.setData(o,(function(){var t=Date.now()-i;clearTimeout(G),n.mole<n.deno&&H&&(a((function(){var t=e.data.tackScore;t.animation=!1,e.setData({tackScore:t})}),n.speed-t-90),G=a((function(){e.autoAdd()}),t<n.speed?n.speed-t:30))}))}},tapPopWelfareBtn:function(t){var e=t.currentTarget.dataset.module,n=this.data.subStatus,a=this.data.windowList,o=a.splice(0,1),i={windowList:a,comPopData:{}};1===n&&(i.hideSub=!0),o[0]&&"Lottery"===o[0].mark?this.showLog({from:"tthym_lottery_window",module:e||"close_btn",type:"click"}):o[0]&&"NotReceive"===o[0].mark&&this.showLog({from:"tthym_new_user_window",module:e||"go_on_collecting_btn",type:"click"}),a[0]&&"Lottery"===a[0].mark?(this.sendLotteryRecode(a[0].lotteryId),i.showComPop="lottery"):a[0]&&"guide"===a[0].mark?(this.showLog({from:"tthym_new_user_guide",module:"new_user_guide"}),i.showComPop="guide"):i.showComPop=!1,this.setData(i)},tapLotteryWindowBtn:function(t){var e=t.currentTarget.dataset,n=e.jumpType,a=e.jumpUrl,o=e.canalName,i=e.item;this.showLog({from:"tthym_lottery_window",module:"lottery",type:"click",arg:{apptype:n,url:a,canalName:o,title:i.title,lotteryIcon:i.lotteryIcon,lotteryTitle:i.lotteryTitle}}),this.commonLoginPromise().then((function(){R.default.withEvent(t)}))},tapOldGuide:function(t){var e=this.data.guideStep,n=t.currentTarget.dataset.module;this.showLog({from:"tthym_old_user_guide",module:n,type:"click"}),this.setData({guideStep:e+1})},tapGuide:function(t){var e=this,n=this.data.guideStep,a=t.currentTarget.dataset.module,o=this.data.windowList;o.shift(),this.setData({windowList:o}),this.showLog({from:"tthym_new_user_guide",module:a,type:"click"});var i={guideStep:n+1};3===i.guideStep&&this.showLog({from:"tthym_new_user_guide2",module:"new_user_guide"}),i.guideStep>=4&&this.signOpear().then((function(){e.showLog({from:"tthym_task_list",module:"task_list"}),e.setData({showPopSwipe:"task"})})).catch((function(){e.showLog({from:"sign_window",module:"view_sign_window"}),e.setData({showComPop:!1,showPopSwipe:"task"})})),this.setData(i),this.fetchData(this.$api.GET_ACTIVITY,{activity_id:0===this.data.oldUserGuideStatus?"FanliGuideRecordAfterWorldOutlook":"FanliGuideRecord"}).then((function(){e.setData({taskLoading:!1})}))},fetchData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(){var a=(0,L.default)(E.default.mark((function a(o,i){var r,s;return E.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([(0,U.getZidReTry)(),(0,U.getJtData)(F.FENGKONG_PARAMS.HSH)]).catch((function(t){return i(t)}));case 2:(r=a.sent)&&(s=Object.assign({activity_id:"FanliActivity",zid:r[0],jt:r[1],ufrom:e.options.ufrom,version:"v1",js_env:"swan"},n),e.$http.get(t,{data:s}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(t)})).catch((function(t){i(t)})));case 4:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())},modifyTotalAndWool:function(t,e){var n=this.data.tackScore.status,a=this.data.totalScore;(0,j.tagTester)("Object",t)?(a=t.totalScore||a,n=(0,j.tagTester)("Undefined",t.status)?n:t.status):a=t[0],this.setData({"tackScore.status":n,totalScore:a,totalScoreJinbi:(0,j.converterJinBi)(a),totalScoreYuan:(0,j.converterYuan)(a)}),this.setCouponListStatus(a),this.autoAdd(e?1:0)},getGoldCoin:function(t,e){var n=this;return(0,L.default)(E.default.mark((function a(){var o,i,s,c;return E.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=t?Object.assign({cmd:"draw"},t):{cmd:"draw"},a.next=3,Promise.all([(0,U.getZidReTry)(),(0,U.getJtData)(F.FENGKONG_PARAMS.HSH)]).catch((function(){return(0,j.textToast)("请求失败，请稍后再试哦~")}));case 3:if(!(i=a.sent)){a.next=16;break}return s=(0,A.default)((0,A.default)({},o),{},{zid:i[0],jt:i[1],js_env:"swan"}),a.next=8,n.fetchData(n.$api.GET_ACTIVITY_DRAW,s).catch((function(){n.autoAdd(),(0,j.textToast)("出了点问题，请稍后再试")})).finally((function(){n.setData({ajaxLock:!1})}));case 8:if(!(c=a.sent)){a.next=16;break}if(1!=+c.isDanger){a.next=13;break}return(0,M.dangerUserModel)(c.feedback),a.abrupt("return");case 13:n.setBubbleAnimation(e),n.modifyTotalAndWool(c,!t),c.scoreFanling&&r.showToast({icon:"none",title:"奖励的生活币还在生成中，等下再来吧"});case 16:case"end":return a.stop()}}),a)})))()},tapExchangeCoupon:function(t){var e=this,n=t.currentTarget.dataset,o=n.item,i=n.index,r=n.couponIndex,s=n.style;this.showLog({from:"tthym_coupon_window",module:"coupon_window",arg:{style:s,couponIndex:r,index:i,title:o.title,desc:o.desc,takeTime:o.takeTime,score:o.score,bubble:o.bubble,couponName:o.couponName,salePrice:o.saleInfo.salePrice,couponStatus:o.couponStatus,status:o.button.status,text:o.button.text,btnStatus:0==+o.couponStatus?0:1}}),this.commonLoginPromise().then((function(){3===o.button.status?e.$jump.to(o.jumpInfo.jumpUrl,o.jumpInfo.jumpType):e.setData({showPopSwipe:"exchange",windowInfo:o},(function(){a((function(){e.setData({showPopSwipeAnitation:!0})}),30)}))}))},closeComPop:function(t){var e=this,n=t.currentTarget.dataset.module,a=this.data.showComPop,o={ajaxLock:!1};if(1!==this.data.subStatus||this.data.hideSub||this.setData({hideSub:!0}),"error"===a)this.showLog({from:"tthym_backup_window",module:"view_btn",type:"click"});else if("login"===a)this.showLog({from:"tthym_login_window",module:n||"close_btn",type:"click"}),o.showComPop=!1,this.setData(o);else if("lottery"===a||"NotReceive"===a)this.tapPopWelfareBtn(t);else if("guide"===a)this.tapGuide(t);else if("sign"===a)if(this.showLog({from:"sign_window",module:"close_sign_window",type:"click"}),this.data.notAuthAll&&"pop_sign_close_btn"!==n){r.$log.sendNew({module:"preauth"},"show");var i=0;r.getPhoneNumber({success:function(t){i=1},complete:function(){r.$log.sendNew({module:"preauth",status:i},"click"),e.closeSignPopup(o),(0,j.textToast)("领取成功")}})}else this.closeSignPopup(o)},closeSignPopup:function(t){this.initData(void 0,!0),t.showComPop=!1,t.showPopSwipe=void 0,this.setData(t)},hidePopSwipe:function(t){var e=t.currentTarget.dataset.module,n=void 0===e?"close_btn":e,a=this.data.showPopSwipe,o="";"task"===a?o="tthym_task_list":"exchange"===a?o="tthym_coupon_window":"exchangeSuccess"!==a&&"exchangeError"!==a||(o="tthym_changing_window"),this.showLog({from:o,module:n,type:"click"}),"exchangeSuccess"===this.data.showPopSwipe&&this.initData(),this.setData({showPopSwipe:!1,showPopSwipeAnitation:!1,ajaxLock:!1})},getBubbleUp:function(){this.initData()},exchangeCouponWrap:function(t){var e=t.currentTarget.dataset.windowInfo;r.$log.sendNew({module:"discount_coupons_exchange",name:e.title},"click")},exchangeErrorJump:function(t){this.showLog({from:"tthym_changing_window",module:"chaning-end_btn",type:"click",arg:{status:1}}),R.default.withEvent(t)},exchangeSuccessJump:function(t){this.showLog({from:"tthym_changing_window",module:"chaning-end_btn",type:"click",arg:{status:0}}),R.default.withEvent(t)},getCommonRequestParams:function(){var t=getCurrentPages(),e=s().globalData,n=e.xfrom,a=e.sfrom;return{path:t[t.length-1].uri,sfrom:a,xfrom:n}},exchangeCoupon:function(t){var e=this;return(0,L.default)(E.default.mark((function n(){var a,o,i,r,s,c;return E.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.currentTarget.dataset,o=a.couponName,i=a.status,r=a.couponStatus,s=e.getCommonRequestParams(),0===r&&0===i&&!e.data.ajaxLock){n.next=4;break}return n.abrupt("return");case 4:return e.setData({ajaxLock:!0}),n.next=7,Promise.all([(0,U.getZidReTry)(),(0,U.getJtData)(F.FENGKONG_PARAMS.HSH)]).catch((function(){return(0,j.textToast)("请求失败，请稍后再试哦~")}));case 7:(c=n.sent)&&e.fetchData(e.$api.GET_ACTIVITY_DRAW,(0,A.default)((0,A.default)({cmd:"exchangeCoupon",coupon_name:o},s),{},{zid:c[0],jt:c[1],js_env:"swan"})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.showLog({from:"tthym_changing_window",module:"changing_window",arg:{status:0}}),e.setData({showPopSwipe:"exchangeSuccess","windowInfo.windowInfo.jumpUrl":t.jumpUrl,"windowInfo.windowInfo.jumpType":t.jumpType,remind:t.remind})})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.showLog({from:"tthym_changing_window",module:"changing_window",arg:{status:1}});var n="网络较差，请检查网络后重试~";t.isOffline&&(t.msg=n),e.setData({"windowInfo.msg":t.msg||n,showPopSwipe:"exchangeError"})})).finally((function(){e.setData({ajaxLock:!1})}));case 9:case"end":return n.stop()}}),n)})))()},setCouponListStatus:function(t){t=t||this.data.totalScore;var e=this.data.couponList,n=void 0===e?[]:e;n=n.map((function(e){return e.item=(e.item||[]).map((function(e){return(5140==+e.couponStatus||5111==+e.couponStatus)&&e.score<=t&&(e.button={status:0,text:"立即兑换"},e.couponStatus=0,e.windowInfo.exchangePoint=""),e})),e})),this.setData({couponList:n})},setBubbleAnimation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=this.data.woolList;-1!==e?(n[e].disable=!0,n[e].animationStatus=1):n=n.map((function(t){return t.disable=!0,t.animationStatus=1,t})),this.setData({woolList:n},(function(){-1!==e&&(clearTimeout(K.timer),K.timer=a((function(){t.setData({isCollect:!0},(function(){clearTimeout(Q.timer),Q.timer=a((function(){t.setData({isCollect:!1})}),Q.timeout)}))}),K.timeout)),clearTimeout(J.timer),J.timer=a((function(){if(void 0!==e){var a,o=n.splice(4,1);o[0]=o[0]||{},(a=n).splice.apply(a,[e,1].concat((0,k.default)(o))),n&&n[e]&&(n[e].animationStatus=2)}else n=[];var i=!n.length||!n.filter((function(t){return t.id})).length;t.setData({woolList:n,showCollar:i},(function(){void 0!==e&&(n&&n[e]&&(n[e].disable=!1),t.setData({woolList:n}))}))}),J.timeout)}))},tapWoolList:function(t){var e=this;this.commonLoginPromise().then((function(){var n=t.currentTarget.dataset,a=n.index,o=n.id,i=n.disable,r=n.score;if(o&&!i){e.getGoldCoin({id:o},a);var s=e.data.woolList.reduce((function(t,e){return t+e.score}),0)-r;e.setData({sheepStatusType:"normal",woolListTotal:s})}}))},tapWoolBtn:function(t){var e=this;r.$log.sendNew({module:"sheep"},"click"),this.commonLoginPromise().then((function(){var n=e.data,o=n.recodeWarnSub,i=n.hideSub,r=e.data,s=r.tackScore,c=r.woolListTotal;"submit"===t.type&&(!i&&o&&e.setData({recodeWarnSub:!1}),e.doSubmitSubs(t)),"shearing"!==e.data.sheepStatusType?!c&&0===s.status||s.mole<1?(0,j.textToast)("生活币已经被领光了，快去做任务赚生活币吧~"):e.data.ajaxLock||(e.setData({ajaxLock:!0}),e.getGoldCoin(),s.mole=0,s.percent=e.calcPercent(s.mole,s.deno),e.setData({sheepStatusType:"shearing",tackScore:s,woolListTotal:0},(function(){"shearing"===e.data.sheepStatusType&&(clearTimeout(W.timer),W.timer=a((function(){e.setData({isCollect:!0},(function(){clearTimeout(Q.timer),Q.timer=a((function(){e.setData({isCollect:!1})}),Q.timeout)}))}),W.timeout),clearTimeout(z.timer),z.timer=a((function(){e.setData({sheepStatusType:"normal"})}),z.timeout))}))):(0,j.textToast)("薅太快了，生活币都没长出来呢")}))},tapSign:function(t){r.$log.sendNew({module:"task_page"},"show"),this.tapEarnWoolBtn(t)},tapMainBtn:function(t){this.tapEarnWoolBtn(t)},tapEarnWoolBtn:function(t){var e=this;r.$log.sendNew({module:"task_page"},"show"),this.commonLoginPromise().then((function(){e.setData({showPopSwipe:"task"})}))},commonShare:function(){var t=s().globalData.rebateShareInfo,e=(0,j.shareAppMessageUrlPatch)(t);r.openShare(e)},otherLogin:function(t){this.showLog({from:"tthym_login_window",module:"toggle_btn",type:"click"}),"web"!==B.getSystemInfo().platform?this.setData({showComPop:!1}):R.default.openNA(Y)},getphonenumber:function(t){this.showLog({from:"tthym_login_window",module:"login_btn",type:"click"}),"web"!==B.getSystemInfo().platform?(this.setData({showComPop:!1}),t.detail.encryptedData&&this.initData(void 0,!1,"onShow")):R.default.openNA(Y)},doSubmitSubs:function(t){var e=this,n=t.detail,a=n.status,o=n.formId,i=0;0==+a?(0,j.sendSubscribeToRd)({subscribeId:this.data.scenterPayFanli.subscribeId,formId:o,self:this}).then((function(){i=1})).catch((function(){(0,j.textToast)("订阅失败~"),e.cancelSubs()})).finally((function(){e.setData({subStatus:i})})):(this.cancelSubs(),this.setData({subStatus:0}))},formSubmitSubs:function(t){var e=t.currentTarget.dataset.popType,n="";"new"===e?n="tthym_new_user_window":"welfare"===e&&this.data.isNewUser?n="tthym_older_history_window":"welfare"===e?n="tthym_normal_window":"lottery"===e&&(n="tthym_lottery_window"),this.showLog({from:n,module:"sbscribe_btn",type:"click"}),this.doSubmitSubs(t)},checkSubs:function(){var t=this;(0,j.subscribeService)(this.data.scenterPayFanli,"query").then((function(e){var n=0;1==+e.status&&(n=1),t.setData({subStatus:n})}))},cancelSubs:function(){var t=this;(0,j.subscribeService)(this.data.scenterPayFanli,"cancel").then((function(){t.setData({subStatus:0})})).catch((function(){t.setData({subStatus:0})}))},stopTou:function(t){},timeDown:function(t){var e=this,n=this.data.lotteryList,o={};if(0!==t){if(n&&n.button&&H){0===n.button.status&&(o["lotteryList.publishCountDownDate"]=(0,j.calcTime)(t)),1!==n.button.status&&2!==n.button.status||(o["lotteryList.closeCountDownDate"]=(0,j.calcTime)(t));var i=Date.now();this.setData(o,(function(){clearTimeout(q);var n=Date.now()-i;q=a((function(){e.timeDown(t-1)}),n<1e3?1e3-n:0)}))}}else n&&n.button&&0===n.button.status?this.getLotteryData():this.initData()},calcPeopleNum:function(t){return t<1e4?t:t<1e7?"".concat((0,j.formatDecimal)(t/1e4,1),"万"):t<1e8?"".concat((0,j.formatDecimal)(t/1e4,0),"万"):"".concat((0,j.formatDecimal)(t/1e8,1),"亿")},tapLottery:function(t){var e=t.currentTarget.dataset,n=e.id,a=e.item,o={activity_id:"FanliLotteryInfo",lottery_id:n},i="/homes/lottery/lottery?".concat((0,j.urlParams)(o)),r=this.data.canalName;this.showLog({from:"tthym_lottery",module:"lottery",type:"click",arg:{apptype:"local",url:i,id:n,title:a.title,score:a.score,scoreUnit:a.scoreUnit,oriPriceUnit:a.oriPriceUnit,oriPrice:a.oriPrice,status:a.button.status,text:a.button.text}}),this.commonLoginPromise().then((function(){R.default.to(i,"local",r)}))},setContentLoading:function(t,e){var n=this,a=(0,j.isNonEmptyArray)(this.data.tabList)?this.data.tabList.map((function(a,o){return void 0===+t?"loading":+t===o?+e?"loading":"complete":n.data.loadingStatusMap[o]})):[];this.setData({loadingStatusMap:a})},onReachBottom:function(){var t=this.data,e=t.loadingStatusMap,n=t.selectIndex;"loading"===(null==e?void 0:e[n])&&this.getGoodsList(0)},getGoodsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;return(0,L.default)(E.default.mark((function a(){var o,i,r,s,c,u,d;return E.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.data.getGoodsListLock){a.next=2;break}return a.abrupt("return");case 2:return t.setData({getGoodsListLock:!0}),r=V,t.setContentLoading(r,1),s="onShow"===n?[]:t.data.newGoodsList||[],c=(null===(o=s[r])||void 0===o?void 0:o.pn)||0,u={activity_id:"FanliWelfare",version:"v2",init_req:e,tab:null===(i=t.data.tabList)||void 0===i?void 0:i[r],rn:10,pn:c},a.next=10,t.fetchData(t.$api.REBATE_SKU_LIST,u).catch();case 10:d=a.sent,t.decorateGoodsList(d,s,r);case 12:case"end":return a.stop()}}),a)})))()},decorateGoodsList:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=n.tabList,r=n.skuList,s=n.pn,c=n.hasMore,u=[];if((0,j.isNonEmptyArray)(r)){var d=(0,j.cloneDeep)(r);u=d.map((function(t){return t.scoreText=(0,j.converterJinBi)(t.score),t.button.status=Number(t.button.status),t.showBtnBg=[0,2,3,10,11].includes(t.button.status),t.couponStatus=Number(t.couponStatus),t.salePrice="到手价￥".concat(t.salePrice),t.oriPrice="￥".concat(t.oriPrice),t}))}var l={};if(a[o]){var h=[].concat((0,k.default)(a[o].goodsList),(0,k.default)(u));l=(0,A.default)((0,A.default)({},a[o]),{},{hasMore:c,pn:s,goodsList:h,hasData:!!h.length})}else l={goodsList:u,pn:s,hasMore:c,hasData:!!u.length};a[o]=(0,A.default)((0,A.default)({},l),{},{rendered:!0}),this.attr.tabListCache=null!==(t=this.data.tabList)&&void 0!==t&&t.length?this.data.tabList:i,this.setData({selectIndex:o,tabList:this.attr.tabListCache,newGoodsList:a},(function(){e.setData({getGoodsListLock:!1}),e.setContentLoading(o,c),e.registerExposureLog("productListObserver",".coupon-horizontal-item")}))},getLotteryData:function(t){var e=this;this.fetchData(this.$api.GET_ACTIVITY,{activity_id:"FanliWelfare",version:"v2"}).then((function(n){var a=n.lottery,o=void 0===a?e.data.lotteryList:a,i=n.coupon,r=void 0===i?e.data.couponList:i,s=n.myCouponInfo;o&&o.button&&(o.publishCountDown&&0===o.button.status&&(o.publishCountDownDate=(0,j.calcTime)(o.publishCountDown)),!o.closeCountDown||1!==o.button.status&&2!==o.button.status||(o.closeCountDownDate=(0,j.calcTime)(o.closeCountDown)),o.joinCount=e.calcPeopleNum(o.joinCount));var c=(r||[]).map((function(t){return t.item=(t.item||[]).map((function(t){return t.scoreText=(0,j.converterJinBi)(t.score),t.button.status=Number(t.button.status),t.couponStatus=Number(t.couponStatus),t.saleInfo.saleUnit=t.saleInfo.saleUnit||"元",t.windowInfo.useGuide=t.windowInfo.useGuide.replace(/<br\/>/gi,"</br>").replace(/<br>/gi,"").split("</br>"),t.windowInfo.useRule=t.windowInfo.useRule.replace(/<br>/gi,"").split("</br>"),t})),t}));e.getGoodsList(1,t);var u={lotteryList:o,couponList:c,showFeedback:!0,myCouponInfo:s};e.setData(u,(function(){o&&o.button&&H&&(o.publishCountDown&&0===o.button.status&&e.timeDown(o.publishCountDown),!o.closeCountDown||1!==o.button.status&&2!==o.button.status||e.timeDown(o.closeCountDown)),e.registerExposureLog("productCouponObserver",".coupon-horizontal1-show-item")})),o&&o.button&&e.showLog({from:"tthym_lottery",module:"lottery"})})).catch((function(){e.setData({showFeedback:!0,couponList:null})}))},sendLotteryRecode:function(t){this.fetchData(this.$api.GET_ACTIVITY,{activity_id:"FanliWinGuideRecord",lottery_id:t}),this.showLog({from:"tthym_lottery_window",module:"lottery",arg:{lotteryId:t}})},onShareAppMessage:function(){var t=s().globalData.rebateShareInfo;return(0,j.shareAppMessageUrlPatch)(t)},goCouponPage:function(t){var e=t.target.dataset.info,n=e.jumpType,a=e.jumpUrl;r.$log.sendNew({module:"mine"},"click"),this.$jump.to(a,n)},toGoods:function(t){var e=this;this.commonLoginPromise().then((function(){var n=t.currentTarget.dataset,a=n.item,o=n.index;r.$log.sendNew({module:"discount_sku",rank:o,name:a.title,couponName:a.couponName},"click"),3===a.button.status||a.rankid?e.$jump.to(a.jumpInfo.jumpUrl,a.jumpInfo.jumpType):R.default.withEvent(t)}))},swiperChange:function(t){this.setData({current:t.detail.current})},appClose:function(){this.setData({showRetain:!0})}}))})),window.define("329",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C=t(26);Page((0,I.default)({data:{defaultShareInfo:{title:"天天领红包",content:"你有一个超大红包待领取，复制口令，打开百度App查看",imageUrl:"https://scenter.cdn.bcebos.com/logo/updatelogo.png",path:"/pages/rebate/rebate?sfrom=shareUrl&source=shareUrl"},shareInfo:null,rendered:!1,canalName:"",couponName:""},ubcLog:{from:"tthym_service"},hasInit:!1,onInit:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t))},onLoad:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t))},onErrorPageReload:function(){this.appInit()},appInit:function(){var t=this,e=this.options.coupon_name;this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"NormalCouponUseList",coupon_name:e,version:"v1"},noTry:!0}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.useData(e)})).catch((function(e){t.$showErrorPage(e.errType),(0,C.textToast)(e&&e.msg?e.msg:"网络问题，请稍后再试~")}))},useData:function(t){var e=t.item||[],n=this.options.coupon_name,a={rendered:!0,showErrorPage:!1,canalName:t.canalName,couponName:n,list:e};t.shareInfo&&(t.shareInfo.shareType=Number(t.shareInfo.shareType)||0,a.shareInfo=t.shareInfo),e.length||(a.empty=!0),this.setData(a)},onShareAppMessage:function(){var t=this.selectComponent("#c-com-share").getShareInfo(this.options);return(0,C.shareAppMessageUrlPatch)(t)}}))})),window.define("332",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(15)),_=C(t(141)),D=t(26),k=C(t(14));Page((0,_.default)({data:{defaultShareInfo:{title:"天天领红包",content:"你有一个超大红包待领取，复制口令，打开百度App查看",imageUrl:"https://scenter.cdn.bcebos.com/logo/updatelogo.png",path:"/pages/rebate/rebate?sfrom=shareUrl&source=shareUrl"},shareInfo:null,perImgList:["https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-user-info.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-empty.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-coupon-statusb1.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-coupon-statusr1.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-coupon-status2.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-center-wool-coupon-status3.png"],rendered:!1,ajaxLock:!1,jumpType:"local",jumpUrl:"/homes/rebate/rebate?showPopSwipe=task",tabSelected:"wool",tabList:[{key:"wool",text:"金币明细"},{key:"coupons",text:"我的卡券"},{key:"lottery",text:"我的中奖"}],woolType:"default",woolTypeList:[{type:"default",text:"全部记录"},{type:"income",text:"收入"},{type:"expend",text:"支出"}],uname:"",totalScore:"0",totalScoreText:"0",id:0,woolList:[],woolCompleted:!1,woolReachRecentSixMonth:!1,lotteryId:0,lotteryList:[],lotteryCompleted:!1,couponStatus:"1",couponStatusList:[{status:"1",text:"未使用"},{status:"2",text:"已使用"},{status:"3",text:"已过期"}],page:1,couponList:[],couponsCompleted:!1,canalName:""},ubcLog:{from:"tthym_my_wool"},tabDisplay:{},hasInit:!1,hasRender:!1,seconds:0,onInit:function(){},onLoad:function(){this.acceptParam()},onErrorPageReload:function(){this.appInit()},acceptParam:function(){var t=this,e=this.options.tabSelected||this.data.tabSelected,n=this.options,a=n.woolType,o=n.couponStatus,i=this.data,r=i.woolTypeList,s=i.couponStatusList,c={tabSelected:e};if("wool"===e||"coupons"===e||"lottery"===e){var u=r.find((function(t){return t.type===a})),d=s.find((function(t){return t.status===o}));"wool"===e&&u?c.woolType=u.type:"coupons"===e&&d&&(c.couponStatus=d.status),this.setData(c,(function(){t.appInit()}))}else this.appInit()},onShow:function(){this.hasRender&&this.appInit()},appInit:function(){var t=this;if(!(this.data.ajaxLock||"wool"===this.data.tabSelected&&this.data.woolCompleted||"coupons"===this.data.tabSelected&&this.data.couponsCompleted||"lottery"===this.data.tabSelected&&this.data.lotteryCompleted)){var e=this.data,n=e.tabSelected,a=e.woolType,o=e.id,r=e.couponStatus,s=e.page;e.lotteryId;this.setData({ajaxLock:!0});var c={};if("wool"===n)c={activity_id:"ScoreInfo",type:a,page_size:10,id:o,version:"v1"};else if("coupons"===n){c={activity_id:"CouponExchangeInfo",status:r,page_size:10,page:s,version:"v1"};var u=this.data.couponStatusList[0].text;this.tabDisplay[u]||(i.$log.sendNew({tab:u},"display"),this.tabDisplay[u]=!0)}else"lottery"===n&&(c={activity_id:"myWinList"});this.$http.get(this.$api.GET_ACTIVITY,{noTry:!1,data:c}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setData({showErrorPage:!1}),"wool"===t.data.tabSelected?t.parseWoolData(e):"coupons"===t.data.tabSelected?t.parseCouponsData(e):"lottery"===t.data.tabSelected&&t.parseLotteryData(e)})).catch((function(e){var n=t.data.tabSelected;if(1==+e.errType)t.$showErrorPage(1);else{var a={rendered:!0};2==+e.errType?"wool"===n&&0!=+t.data.id?a.woolCompleted="true":"coupons"===n&&1!=+t.data.page?a.couponsCompleted="true":"lottery"===n&&0!=+t.data.lotteryId?a.lotteryCompleted="true":a.emptyType=n:a.emptyType=n,t.setData(a)}t.setData({ajaxLock:!1})})).finally((function(){t.hasRender=!0,t.setDefaultMsg(),t.setData({rendered:!0})}))}},setDefaultMsg:function(){var t={emptyTypeTitle:"还没有记录哦",emptyTypeDes:"赶紧去赚生活币吧～"};if("coupons"===this.data.tabSelected){var e=this.data,n=e.couponStatus,a=e.couponStatusList,o=a.find((function(t){return+t.status==+n}));t.emptyTypeTitle=o?o.text:a[0].text,t.emptyTypeTitle="您还没有".concat(t.emptyTypeTitle,"卡券哦～")}else if("wool"===this.data.tabSelected){var i=this.data,r=i.woolType,s=i.woolTypeList,c=s.find((function(t){return t.type===r}));t.emptyTypeTitle=c?c.text:s[0].text,t.emptyTypeTitle="您还没有生活币".concat(t.emptyTypeTitle,"哦～")}else"lottery"===this.data.tabSelected&&(t.emptyTypeTitle="您还没有中奖记录哦～");this.setData(t)},parseWoolData:function(t){var e=this,n=this.data.id,a=t.reach_recent_six_month,o=(t.item||[]).map((function(t){return t.status=Number(t.status),t.scoreText=(0,D.converterJinBi)(t.score),t})),i={woolList:o};o.length||0==+n?o.length||(i.woolCompleted="true",i.emptyType=this.data.tabSelected):i.woolCompleted="true",(0==+n||t.totalScore)&&(i.totalScore=t.totalScore,i.totalScoreText=(0,D.converterJinBi)(t.totalScore)),0!=+n&&(o=this.data.woolList.concat(o)),n=o&&o.length?o[o.length-1].id:0,t.shareInfo&&(t.shareInfo.shareType=Number(t.shareInfo.shareType)||0,i.shareInfo=t.shareInfo),Object.assign(i,{uname:t.uname||this.data.uname,woolReachRecentSixMonth:a,woolList:o,id:n,canalName:t.canalName||this.data.canalName,emptyType:i.emptyType||""}),this.setData(i,(function(){e.setData({ajaxLock:!1},(function(){(t.item||[]).length<10&&e.setData({woolCompleted:"true"})}))}))},generateEncParam:function(t,e){var n=t+e,a=Math.random().toString().slice(2,12);return{reqTag:n,offset:a,encReqTag:(0,D.aesCrypt)("".concat(n,"_").concat(a))}},timingStart:function(){var t=this;this.addCoinTimer=o((function(){t.seconds++}),1e3)},clearTiming:function(){this.seconds=0,this.addCoinTimer&&clearInterval(this.addCoinTimer)},tapLotteryItem:function(t){var e=this,n=t.currentTarget.dataset,a=n.item,o=void 0===a?{}:a,i=n.curTimeStamp,r=this.generateEncParam(i,this.seconds),s=o.skuId,c=o.termId;if(this.setData({ajaxLock:!1}),s&&1===o.lotteryStatus.status){var u=(0,x.default)((0,x.default)({},r),{},{activity_id:"coinRaceExchange",sku_id:s,term_id:c});this.$http.get(this.$api.GET_ACTIVITY,{data:u}).then((function(t){var e=t.jumpUrl,n=t.jumpType;k.default.to(e,n)})).catch((function(t){var n=(0,x.default)((0,x.default)({},e.data),{},{tabSelected:"lottery",lotteryId:0});e.setData(n,(function(){e.appInit()}))}))}},parseLotteryData:function(t){var e=this.data.lotteryId,n=(t.item||[]).map((function(t){return t.showTimeText=(0,D.calcTime)(t.finishCountDown),t})),a={lotteryList:n};n.length||0==+e?n.length||(a.lotteryCompleted="true",a.emptyType=this.data.tabSelected):a.lotteryCompleted="true",e=n&&n.length?n[n.length-1].id:0,t.shareInfo&&(t.shareInfo.shareType=Number(t.shareInfo.shareType)||0,a.shareInfo=t.shareInfo),Object.assign(a,{lotteryList:n,lotteryId:e,id:e,curTimeStamp:t.curTimeStamp,canalName:t.canalName||this.data.canalName,emptyType:a.emptyType||"",ajaxLock:!1}),this.setData(a)},parseCouponsData:function(t){var e=this,n=this.data.page,a=(t.item||[]).map((function(t){return t.saleInfo.saleUnit=t.saleInfo.saleUnit||"元",t})),o={};a.length||1==+n?a.length||(o.couponsCompleted="true",o.emptyType=this.data.tabSelected):o.couponsCompleted="true",1!=+n&&(a=this.data.couponList.concat(a)),t.shareInfo&&(t.shareInfo.shareType=Number(t.shareInfo.shareType)||0,o.shareInfo=t.shareInfo),Object.assign(o,{couponList:a,page:n+1,canalName:t.canalName||this.data.canalName,emptyType:o.emptyType||""}),this.setData(o,(function(){e.setData({ajaxLock:!1},(function(){(t.item||[]).length<10&&e.appInit()}))}))},showLog:function(t){t.canalName||"canalName"in(t.arg||{})||(t.arg=Object.assign({canalName:this.data.canalName},(0,x.default)({},t.arg||{}))),i.$log.send((0,x.default)({module:t.module},t.arg),t.type||"show",{from:t.from||this.ubcLog.from})},couponJump:function(t){var e=t.currentTarget.dataset.item,n=void 0===e?{}:e,a=this.data,o=a.couponStatus,i=a.canalName,r=n.jumpInfo&&n.jumpInfo.jumpType?n.jumpInfo.jumpType:"",s=n.jumpInfo&&n.jumpInfo.jumpUrl?n.jumpInfo.jumpUrl:"";"1"===o&&k.default.to(s,r,i)},tapType:function(t){var e=this;if(this.clearTiming(),!this.data.ajaxLock){var n={woolCompleted:!1,couponsCompleted:!1,lotteryCompleted:!1},a=t.target.dataset,o=a.key,r=a.type,s=a.status,c=a.text,u=this.data,d=u.tabSelected,l=u.woolType,h=u.woolTypeList,p=u.couponStatus,f=u.couponStatusList;o!==d&&(s&&(this.tabDisplay[c]||(i.$log.sendNew({tab:c},"display"),this.tabDisplay[c]=!0)),!o&&(r&&r===l||s&&s===p)||(o&&o!==d?(n.tabSelected=o,"wool"===n.tabSelected?(n.woolType=h[0].type,n.id=0):"coupons"===n.tabSelected?(n.couponStatus=f[0].status,n.page=1):"lottery"===n.tabSelected&&(this.timingStart(),n.lotteryId=0)):r&&"type"!==l?(n.woolType=r,n.id=0,n.woolList=[]):s&&s!==p&&(n.couponStatus=s,n.page=1,n.couponList=[]),Object.keys(n).length&&this.setData(n,(function(){e.appInit()}))))}},onReachBottom:function(){this.data.ajaxLock||"wool"===this.data.tabSelected&&this.data.woolCompleted||"coupons"===this.data.tabSelected&&this.data.couponsCompleted||"lottery"===this.data.tabSelected&&this.data.lotteryCompleted||this.appInit()},onShareAppMessage:function(){var t=this.selectComponent("#c-com-share").getShareInfo(this.options);return(0,D.shareAppMessageUrlPatch)(t)}}))})),window.define("335",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(27)),_=C(t(29)),D=C(t(15)),k=C(t(141)),P=C(t(14)),E=t(9),L=t(26),A=t(144),O=t(31);Page((0,k.default)({data:{ajaxLock:!1,exchangeStatus:"0",currentPage:{jumpType:"local",jumpUrl:"/homes/rebate/rebate"},opacity:0,swiperCurrent:0,bannerList:[],isDirectSku:!1,directSkuInstr:(0,L.gzipImg)("https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3864245887,1897877976&fm=179&app=35&f=JPEG?w=1182&h=168"),couponInstr:(0,L.gzipImg)("https://b.bdstatic.com/searchbox/icms/searchbox/img/rwlc1.png"),coinImg:(0,L.gzipImg)("https://b.bdstatic.com/searchbox/icms/searchbox/img/jinbiicon.png")},timer:null,ubcLog:{from:"tthym_goods_detail"},attr:{query:{},hasShow:!1},hasInit:!1,onInit:function(t){this.attr.query=t,this.hasInit||(this.hasInit=!0,this.appInit())},onLoad:function(t){this.attr.query=t,this.hasInit||(this.hasInit=!0,this.appInit())},onShow:function(){this.attr.hasShow&&this.appInit("onShow"),this.attr.hasShow=!0},onErrorPageReload:function(){this.appInit()},onHide:function(){clearTimeout(this.timer)},fetchCoupon:function(t,e){var n=this;this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"FanliCouponDetail",zid:t.zid,coupon_name:e.couponName,version:"v1"}}).then((function(t){var e,a=t,o=(null===(e=a.jumpInfo)||void 0===e?void 0:e.jumpUrl)||"",i=(0,L.queryString)(o.split("?")[1]);a.scoreText=(0,L.converterJinBi)(a.score),a.button.status=Number(a.button.status),a.couponStatus=Number(a.couponStatus),a.oriPrice="￥"+a.oriPrice,a.windowInfo.useGuide=a.windowInfo.useGuide.replace(/<br\/>/gi,"</br>").replace(/<br>/gi,"").split("</br>"),a.windowInfo.useRule=a.windowInfo.useRule.replace(/<br>/gi,"").split("</br>"),a.productId=i.productId||"",a.brandId=i.brandId||"",n.setData((0,D.default)((0,D.default)({},a),{},{bannerList:[].concat(a.logo),showErrorPage:!1,rendered:!0}))})).catch((function(t){n.$showErrorPage(t.errType)}))},getDirectSku:function(t,e){var n=this;return(0,_.default)(x.default.mark((function a(){var o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,_,D,k,E,A,O,N,R;return x.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=n.attr.query,i=o.user_data,r=o.rankid,s={},c={zid:t.zid,rankid:r,user_data:i},a.prev=3,a.next=6,n.$http.get(n.$api.REBATE_GOODS_DETAIL,{data:c});case 6:s=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(3),n.$showErrorPage(a.t0.errType),a.abrupt("return");case 13:u=s.info||{},d=u.coverImages,l=u.title,h=u.sales,p=u.coin,f=u.priceSale,g=u.priceOrig,m=u.desc,v=void 0===m?"":m,w=u.albumImages,b=u.source,y=u.button,T=void 0===y?{}:y,S=u.buttonExt,I=void 0===S?null:S,C=s.order,_=parseFloat(f/100),D="￥"+parseFloat(g/100),k=(null==C?void 0:C.link)||{},E=k.jumpType,A=k.jumpUrl,T.jumpType=E,T.jumpUrl=A,O=(0,L.converterJinBi)(p),n.setData({rendered:!0,showErrorPage:!1,bannerList:d,scoreText:O,title:l,sales:h,salePrice:_,oriPrice:D,desc:v,albumImages:w,source:b,button:T,buttonExt:I}),i&&"onShow"!==e&&(201===(null==C?void 0:C.code)?P.default.to(A,E):(0,L.textToast)((null===(N=s)||void 0===N||null===(R=N.order)||void 0===R?void 0:R.data)||"请求失败"));case 23:case"end":return a.stop()}}),a,null,[[3,9]])})))()},appInit:function(t){var e=this,n=this.attr.query;(0,E.getSysData)().then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=!n.couponName&&n.rankid;e.setData({isDirectSku:o}),o?e.getDirectSku(a,t):e.fetchCoupon(a,n)}))},onPageScroll:function(t){var e=t.scrollTop,n=(0,E.getSystemInfo)(),a=(e/(n.navigationBarHeight+n.statusBarHeight)).toFixed(2),o=a>1?1:a;this.setData({opacity:o})},swiperChangeCustom:function(t){this.setData({swiperCurrent:t.detail.current})},toGoods:function(t){P.default.withEvent(t)},exchangeCoupon:function(t){var e=this;return(0,_.default)(x.default.mark((function n(){var o,r,s,c;return x.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.currentTarget.dataset,r=o.couponName,s=o.status,0===o.couponStatus&&0===s&&!e.data.ajaxLock){n.next=3;break}return n.abrupt("return");case 3:return e.setData({ajaxLock:!0}),n.next=6,Promise.all([(0,A.getZidReTry)(),(0,A.getJtData)(O.FENGKONG_PARAMS.HSH)]).catch((function(){return(0,L.textToast)("请求失败，请稍后再试哦~")}));case 6:(c=n.sent)&&e.$http.get(e.$api.GET_ACTIVITY_DRAW,{data:{cmd:"exchangeCoupon",coupon_name:r,activity_id:"FanliActivity",version:"v1",zid:c[0],jt:c[1],js_env:"swan"}}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.showToast({duration:2e3,title:"兑换成功",icon:"none"}),e.setData({exchangeStatus:"2","buttonJump.jumpUrl":t.jumpUrl,"buttonJump.jumpType":t.jumpType},(function(){e.timer=a((function(){P.default.to(t.jumpUrl,t.jumpType)}),2e3)}))})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="网络较差，请检查网络后重试~";t.isOffline&&(t.msg=n),i.showToast({duration:2e3,title:t.msg,icon:"none"}),e.setData({exchangeStatus:"1"})})).finally((function(){e.setData({ajaxLock:!1})}));case 8:case"end":return n.stop()}}),n)})))()},exchangeErrorJump:function(t){P.default.withEvent(t)},exchangeSuccessJump:function(t){clearTimeout(this.timer),P.default.withEvent(t)},goRebateHome:function(t){P.default.withEvent(t)},handleClickBtn:function(t){var e=this;return(0,_.default)(x.default.mark((function n(){var a,o,i,r,s,c;return x.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.change,o=t.isLogin,i=t.currentTarget,o){n.next=3;break}return n.abrupt("return",(0,L.textToast)("请先登录"));case 3:if(!o||!a){n.next=9;break}return n.next=6,(0,E.getSysData)();case 6:return r=n.sent,e.getDirectSku(r),n.abrupt("return");case 9:if(s=i.dataset.status,c=e.data.buttonExt,!s||10==+s){n.next=14;break}return c&&(0,L.textToast)(c.prompt),n.abrupt("return");case 14:P.default.withEvent(t);case 15:case"end":return n.stop()}}),n)})))()}}))})),window.define("338",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(14)),_=t(26),D=I(t(141)),k=(t(42),i());Page((0,D.default)({data:{isFromSecondFloor:k.globalData.isFromSecondFloor,isShowHome:!1,isShowBack:!1,scrollTop:0,isTopArea:!0,showBanner:!1,topBarTitle:"",topBarOpacity:1,type:3,tabIndex:0,cityCode:"",channelId:"",page:1,pageSize:10,tabs:[],banner:{},skuList:[],isHeightVersion:!1},ubcLog:{from:"sku_landing_page"},onLoad:function(t){var e=getCurrentPages();this.data.isFromSecondFloor?this.setData({isShowHome:!1,isShowBack:!1}):1!==e.length||/^pages\/index\/index/.test(e[0].uri)?this.setData({isShowHome:!1,isShowBack:!0}):this.setData({isShowHome:!0,isShowBack:!1});var n=t.cityCode,a=void 0===n?"":n,i=t.channelId,r=void 0===i?"":i,s=k.globalData.location,c=(0,_.compareVersion)(o.getSystemInfoSync().swanNativeVersion,"2.28.0")>=0;this.setData({isHeightVersion:c(),cityCode:a||s.cityCode,channelId:r}),this.initData()},onErrorPageReload:function(){this.initData()},changeTab:function(t){this.setData({type:2,tabIndex:t.index,page:1,skuList:[]}),this.initData()},onSwiperChange:function(t){var e=t.detail.current,n=t.currentTarget.dataset.dataPath;this.setData(n+".selected",e)},onHomeClick:function(){x.default.goHome()},onBackClick:function(){x.default.back()},initData:function(){var t=this;this.$http.get(this.$api.SKU_LANDING,{data:{cityCode:this.data.cityCode,channelId:this.data.channelId,type:this.data.type,page:this.data.page,pageSize:this.data.pageSize,tabIndex:3===this.data.type?void 0:this.data.tabIndex}}).then((function(e){if(2===t.data.type){var n=e.values,a=n&&n[0]&&n[0].skus?n[0].skus:[],i=[].concat((0,C.default)(t.data.skuList),(0,C.default)(a)),r=t.data.page+1;t.setData({skuList:i,page:r})}else if(3===t.data.type){var s=e.banner,c=e.values,u=e.channel,d=s&&s.value&&s.value.length,l=d?t.bannerRender(s):{},h=c&&0!==c.length&&1!==c.length?c:[],p=c&&c[0]&&c[0].skus?c[0].skus:[],f=u&&u[0]&&u[0].title?u[0].title:"",g=t.data.page+1;d?o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"}):o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"}),t.setData({tabs:h,banner:l,showBanner:d,topBarOpacity:d?0:1,isTopArea:d,skuList:p,topBarTitle:f,page:g})}})).catch((function(e){(0,_.setPullAreaBg)("#ffffff"),t.$showErrorPage(e.errType)}))},bannerRender:function(t){var e=(0,_.getTopHeight)(),n=(0,_.vwUnit)(527);return t.topHeigth=e+"px",t.height="calc(".concat(t.topHeigth," + ").concat(n,")"),t.mainImgHeight=(0,_.vwUnit)(497),t.value.forEach((function(t){t.oldBackground=t.background,t.background=(0,_.adaptBackground)(t.background)})),t.isShowDots=1!==t.value.length,t.isShow=!0,t},onPageScroll:function(t){var e=(t.scrollTop/90).toFixed(2);this.data.showBanner&&(o.setNavigationBarColor({frontColor:e>1?"#000000":"#ffffff",backgroundColor:"#ffffff"}),this.setData({topBarOpacity:e>1?1:e,isTopArea:e<=1}))},onReachBottom:function(){this.setData({type:2}),this.initData()}}))})),window.define("341",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C,x=t(10),_=x(t(16)),D=x(t(141)),k=t(40),P=null;Page((0,D.default)((C={ubcLog:{from:"all"},data:{originTotalList:[],isReady:!1,currentTab:0,tabs:[],duration:500,content:[],customHeight:60,isTap:!1,isShowLoading:!0}},(0,_.default)(C,"ubcLog",{from:"all"}),(0,_.default)(C,"allSelectors",[]),(0,_.default)(C,"hasInit",!1),(0,_.default)(C,"hasInitData",!1),(0,_.default)(C,"tabsHeaderToTop",0),(0,_.default)(C,"current",0),(0,_.default)(C,"jumpTabName",""),(0,_.default)(C,"attr",{prefetchPromise:null}),(0,_.default)(C,"onInit",(function(){if(!this.hasInit){this.hasInit=!0;var t=i.getURLQuery().tab_name;this.jumpTabName=t,this.initData()}})),(0,_.default)(C,"onPrefetch",(function(t){t.query;this.attr.prefetchPromise=this.fetchData()})),(0,_.default)(C,"onErrorPageReload",(function(){this.initData()})),(0,_.default)(C,"initData",(function(t){var e=this,n=this.options,a=n.cityCode,o=n.cityName;if(a&&o){var i={cityCode:a,city:o};this.$location.update(i)}this.$storage.get("TOTAL_SERVICE_V3").then((function(n){0===Object.keys(n).length||t?e.fetchServiceItems(1):e.initServiceItems(n,1)}))})),(0,_.default)(C,"fetchData",(function(){return this.$http.get(this.$api.ALL_SERVICE)})),(0,_.default)(C,"downloadAll",(function(t,e,n){return new Promise((function(a,o){i.downloadFile({url:t,header:{"content-type":"application/json"},success:function(t){var o=t.tempFilePath;a({tempFilePath:o,i:e,j:n})},fail:function(t){o(t)}})}))})),(0,_.default)(C,"revertListForLottie",(function(t){var e=this;for(var n in t){var a=t[n].value;for(var o in a){var i=a[o],r=i.bubble_type,s=i.bubble_dynamic;"lottie"===r&&this.downloadAll(s,n,o).then((function(n){var a=n.tempFilePath,o=n.i,i=n.j;t[o].value[i].shouldShowLottie=!0,t[o].value[i].tempFilePath=a,e.setData({originTotalList:t})}))}}})),(0,_.default)(C,"getAllSelectors",(function(){var t=this;i.createSelectorQuery().select("#c-tabs-header").boundingClientRect().exec((function(e){e&&e[0]&&(t.tabsHeaderToTop=e[0].height+e[0].top)}));var e=i.createSelectorQuery();return new Promise((function(n,a){t.data.tabs.map((function(o,i){var r=o.id;o.text;e.select("#tab-".concat(r)).boundingClientRect(),e.exec((function(e){e&&e.length===t.data.tabs.length?(t.allSelectors=e,n(e)):a()}))}))}))})),(0,_.default)(C,"initServiceItems",(function(t,e){var n=this,a=[];t&&Array.isArray(t)&&(a=t.map((function(t,e){return{text:t.tab_name,id:e}}))),this.setData({tabs:a},(function(){n.setData({originTotalList:t.slice(0,2),isShowLoading:!1},(function(){n.setData({originTotalList:t},(function(){n.revertListForLottie(t),e&&n.fetchServiceItems(),n.getAllSelectors().then((function(t){if(n.jumpTabName){var e=n.data.tabs.findIndex((function(t){t.id;return t.text===n.jumpTabName}));try{n.setContentScroll(e).then((function(t){n.setData({currentTab:e}),n.current=e,i.pageScrollTo({scrollTop:0===e?0:n.allSelectors[e].top-n.tabsHeaderToTop,duration:0})}))}catch(t){(0,k.reportJSError)({msg:"服务大全页面-then异常",extra:{error:t,detail:"getAllSelectors调用"}})}}}))}))}))}))})),(0,_.default)(C,"fetchServiceItems",(function(t){var e=this,n=this.attr.prefetchPromise;n?this.attr.prefetchPromise=null:n=this.fetchData(),n.then((function(n){t&&e.initServiceItems(n),e.$storage.set("TOTAL_SERVICE_V3",n)})).catch((function(n){t&&e.$showErrorPage(n.errType)}))})),(0,_.default)(C,"handleBubble",(function(t){var e=t.currentTarget.dataset.index,n=t.target.dataset,a=n.bubble,o=n.itemIndex;a&&this.setData((0,_.default)({},"originTotalList[".concat(e,"].value[").concat(o,"].bubble_title"),""))})),(0,_.default)(C,"serviceClick",(function(t){var e=t.currentTarget.dataset,n=e.title,a=e.tab;this.$http.get(this.$api.ALL_SERVICE_SERVICE_CLICK,{data:{tab:a,title:n,belong:"ServiceBox"},canResArrayNull:!0}),this.commonJump(t)})),(0,_.default)(C,"tabHeaderTap",(function(t){var e=this,n=t.tap,a=t.index;this.setData({isTap:n},(function(){e.jumpTabName="";try{n&&e.setContentScroll(a).then((function(t){e.setData({currentTab:a})}))}catch(t){(0,k.reportJSError)({msg:"服务大全页面-then异常",extra:{error:t,detail:"tabHeaderTap调用"}})}}))})),(0,_.default)(C,"onPageScroll",(function(t){var e=this;this.data.tabs.forEach((function(n,a){var o,i,r,s=null===(o=e.allSelectors[a])||void 0===o?void 0:o.top,c=a===e.data.tabs.length-1?null===(i=e.allSelectors[e.data.tabs.length-1])||void 0===i?void 0:i.top:null===(r=e.allSelectors[a+1])||void 0===r?void 0:r.top;if(s<=t.scrollTop+e.tabsHeaderToTop&&t.scrollTop+e.tabsHeaderToTop<c&&e.current!==a){if(e.data.isTap||e.jumpTabName)return;e.setData({currentTab:a}),e.current=a}})),this.jumpTabName=""})),(0,_.default)(C,"setContentScroll",(function(t){var e=this;if(P&&clearTimeout(P),this.allSelectors[t]&&this.allSelectors[t].top)return new Promise((function(n,o){i.pageScrollTo({scrollTop:0===t?0:e.allSelectors[t].top-e.tabsHeaderToTop,duration:0}),P=a((function(){n()}),260)}))})),C)))})),window.define("344",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(41),C=t(10),x=C(t(345)),_=I(t(9)),D=C(t(141)),k=t(26),P="百万现金免费拿",E="速来惠生活！现金红包一秒提现！",L="https://scenter.cdn.bcebos.com/shuangdan%2Fshareicon.png",A={bgColor:"#ffbf64",noJoinTip:"去惠生活体验更多服务吧",tip:"奖金提现时间截止2020年6月8日23:59"};Page((0,D.default)({data:{tabSelected:0,prevSelected:null,serviceList:[],isSpread:!1,isFirstInit:!0,lastIndex:0,activityStatus:-1,isJoin:1,prizeInfo:{},moneyText:{},moreSkus:{},activeNameThree:"tab_name_0",content:"tab_name_0",contents:0,activeNameOne:0,canalName:"",canalCode:"",fixedindex:"",tabIndex:0,noCardChoose:!1},ubcLog:{from:"week-activity"},onLoad:function(){this.setData({tabIndex:+this.options.tabIndex||this.data.tabIndex}),o.$log.send({module:+this.options.tabIndex||this.data.tabIndex?"chooseCardTab":"weekPriceTab"},"display"),this.compBridge=x.default,x.default.init(this),this.initData(),this.initUserInfo()},onShow:function(){this.checkTimer&&(clearTimeout(this.checkTimer),this.checkTimer=null)},onErrorPageReload:function(){this.initData()},afterLogin:function(t){var e=t.detail&&t.detail.type||t.type;this.initData(e),this.initUserInfo(e)},initUserInfo:function(t){var e=this,n=_.isLogin();this.setData({isLogin:n,isShowGuideBox:!n}),_.getUserInfo().then((function(t){e.setData({userInfo:t})}))},hideGuideBox:function(){this.setData("isShowGuideBox",!1)},toLogin:function(t){t.isLogin&&(this.setData({isLogin:!0}),this.afterLogin({type:"login"}))},initData:function(t){var e=this;this.$app.resourceLoader.getData("GET_ACTIVITY",this.options).then((function(n){e.setALLData(t,n),"login"!==t&&!e.data.isLogin||"refresh"===t||e.compBridge.taskView.getTasks()})).catch((function(t){e.$showErrorPage(t.errType)})),this.getCardLen()},getCardLen:function(){var t=this;this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"getCouponCardAll",city_code:"131",pagesize:10,page:1},noTry:!0}).then((function(e){e.coupon.coupon_data.data[0].list.length<4?t.setData({noCardChoose:!0}):o.$log.send({module:"chooseCardsShow"},"display")}))},setALLData:function(t,e){var n=this;t&&0!==e.activity_status||(this.setData({showErrorPage:!1,header:e.header,moreService:e.more_service,feedBack:e.feedback,canalName:e.other.canal_name,canalCode:e.other.channelCode,activityStatus:e.activity_status,moneyText:e.coupon&&e.coupon.coupon_data&&e.coupon.coupon_data.data,moreSkus:e.more_skus&&e.more_skus.data},(function(){n.initWeekList(e)})),this.setBackground(e.header)),0===e.activity_status&&this.setData({isJoin:e.user_attend_status,prizeInfo:e.user_assert_info,endInfo:e.header.end_info||A}),0!==e.activity_status&&(this.setData({drawData:e.draw,freeNum:e.draw.machine.free_num}),this.compBridge.trigger("getDataEnd",{drawData:e.draw,freeNum:e.draw.machine.free_num})),e.couponStyle&&this.setData({couponStyle:e.couponStyle})},setBackground:function(t){t&&t.background&&o.setBackgroundColor({backgroundColor:t.background})},initWeekList:function(t){if(t.week_list){var e=t.week_list;e&&e.list&&!e.list[0]&&(e.list=[e.list]),e.list=e.list||[];var n=e.limit,a=e.selected,o=[];if(e.list.forEach((function(t){o.push(!1),t.item.forEach((function(t){t.button_color=(0,k.adaptBackground)(t.button_color)}))})),this.setData({tabSelected:e.selected,lastIndex:e.selected,weekList:e,spreadImg:e.close_btn_img,closeImg:e.open_btn_img,spList:o}),this.data.weekList.list[a]){var i=this.data.weekList.list[a].item.length,r=this.cutCtList(a,n);this.setData({contentList:r,valueLen:i})}}},onShareAppMessage:function(){var t=(this.data.header||{}).share_info||{},e=this.data.tabIndex,n={};return 0===e&&(n={title:t.title||P,content:t.content||E,shareUrl:t.url,imageUrl:t.icon||L}),1===e&&(o.showToast({title:t.title}),n={title:t.title||"商家优惠券免费领",content:t.content||"领完券再消费，帮您省钱！",path:"/homes/week_activity/week_activity?tabIndex=1",imageUrl:t.icon||"https://b.bdstatic.com/searchbox/icms/searchbox/img/jingxuankaquan.png"}),2===e&&(n={title:t.title||"优选商品随心选购",content:t.content||"超值热卖商品，件件有折扣！",path:"/homes/week_activity/week_activity?tabIndex=2",imageUrl:t.icon||"https://b.bdstatic.com/searchbox/icms/searchbox/img/tuijianhaohuo.png"}),(0,k.shareAppMessageUrlPatch)(n)},onShareClick:function(t){var e=this;return new Promise((function(n,a){var i=e.data.header.share_info,r=(0,k.shareAppMessageUrlPatch)({title:i.title||P,content:i.content||E,shareUrl:i.url,imageUrl:i.icon||L,success:function(){t&&(0,k.textToast)("分享成功~"),n()},fail:function(t){a(t)}});o.openShare(r)}))},onContentList:function(t,e,n){var a=this.data.spList[t];if(!a&&this.data.isFirstInit)this.setData({contentList:this.data.weekList.list[t].item,isFirstInit:!1});else if(a){var o=this.cutCtList(t,e);this.setData({contentList:o})}else this.setData({contentList:this.data.weekList.list[t].item});var i=this.data.spList;i.forEach((function(e,n){n===t&&(i[n]=!e)})),this.setData({spList:i})},cutCtList:function(t,e){var n=(0,k.cloneDeep)(this.data.weekList).list[t].item;return n.length>e?n.splice(0,e):n},onTabChage:function(t){var e=t.currentTarget.dataset.index,n=this.data.tabSelected;if(n!==e)if(e>this.data.weekList.selected)(0,k.textToast)(this.data.weekList.tip);else{var a=this.data.spList[e],o=this.data.weekList.list[e].item;this.setData({tabSelected:e,prevSelected:n,isSpread:!this.data.isSpread,valueLen:o.length,contentList:a?this.data.weekList.list[n].item:this.cutCtList(e,this.data.weekList.limit)})}},onSrpead:function(){this.onContentList(this.data.tabSelected,this.data.weekList.limit)},showTaskView:function(){this.compBridge.taskView.open()},disablePageScroll:function(){this.setData({toastStatus:!0})},enablePageScroll:function(){this.setData({toastStatus:!1})},commonRequest:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,o){var i=e.options||{};_.getSysData().then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$http.get(t,{isShowToast:!!n.isShowToast,data:Object.assign({zid:r.zid||"",mac:r.imei||""},n.data||{},i)}).then(a).catch(o)})).catch((function(){e.$http.get(t,{data:n}).then(a).catch(o)}))}))},tabsOne:function(t){this.setData({content:t.detail.name,activeNameThree:t.detail.name})},tabsThree:function(t){this.setData({contents:t.detail.name,activeNameOne:t.detail.name})},listenError:function(t){this.$showErrorPage(t.errType)},changeTab:function(t){this.setData({tabIndex:+t.currentTarget.dataset.index}),o.$log.send({module:+t.currentTarget.dataset.index?"chooseCardTab":"weekPriceTab"},"display")},getCoupon:function(t){var e=this,n=t.target.dataset,a=n.type,o=n.url,i=n.index,r=n.id,s=this.data,c=s.content,u=s.moneyText.data;this.$http.get(this.$api.GET_ACTIVITY,{data:{req_from:"fw_xcx",activity_id:"clickCouponCardButton",pivotal_key:r}}).then((function(t){u[c][i].click_flag="2",e.$jump.to(o,a),e.setData({cardList:u})})).catch((function(t){u[c][i].click_flag="2",e.$jump.to(o,a),e.setData({cardList:u})}))},fixedtab:function(t){this.setData({fixedindex:t.detail})}}))})),window.define("345",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={init:function(t){this.page=t,this.events={},this.taskView=t.selectComponent("#task-view"),this.drawView=t.selectComponent("#slot-machine"),this.toastView=t.selectComponent("#week-toast"),this.machineView=t.selectComponent("#machine"),this.initEvent()},initEvent:function(){this.on("taskInited",this.drawView,this.drawView.onTaskInited),this.on("taskEnd",this.drawView,this.drawView.onTaskEnd),this.on("getPrizeData",this.toastView,this.toastView.onGetPrizeData),this.on("getDataEnd",this.drawView,this.drawView.onGetDataEnd),this.on("prizeDataEnd",this.machineView,this.machineView.onPrizeDataEnd),this.on("getResult",this.machineView,this.machineView.onGetResult)},on:function(t,e,n){if(t&&e&&n){var a=this.events[t]||[];a.push({fn:n,context:e}),this.events[t]=a}},trigger:function(t,e){(this.events[t]||[]).forEach((function(t){t.fn.call(t.context,e)}))},getHasTask:function(){return this.taskView.hasTask()},showWeekToast:function(){this.toastView.open()},startDraw:function(){this.drawView.onStart()}}})),window.define("348",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=t(26),x=I(t(141));Page((0,x.default)({data:{value:"",inputDisabled:!1,currentCity:{name:"定位中"},scrollIntoView:"",isLocating:!1,isSearchMode:!1},cusData:{timer:null,searchAll:{},searchKeys:[],titleTopAll:[],startPageY:0,scrollTop:0,moveTimer:null,realLocation:null},onLoad:function(){this.initData()},onReLocatingFaild:function(t){o.showToast({title:"定位失败，将默认定位于北京",icon:"none"}),this.cusData.realLocation=t,this.setData({isLocating:!1,currentCity:{name:t.city,code:t.cityCode}})},regetUserAuth:function(){return new Promise((function(t,e){(0,C.showModal)({content:"您已拒绝位置权限，请去权限设置界面开启~",confirmText:"前往",success:function(n){n.confirm?o.openSetting({success:function(n){n.authSetting&&n.authSetting["scope.userLocation"]?t():e()},fail:function(){e()}}):e()},fail:function(){e()}})}))},reLocating:function(){var t=this,e=this;this.setData({isLocating:!0},(function(){t.$location.getWithNative({reject:!0}).then((function(e){t.cusData.realLocation=e,t.setData({rendered:!0,isLocating:!1,currentCity:{name:e.city,code:e.cityCode}})}),(function(n){10003===n.errCode&&o.openSetting?t.regetUserAuth().then((function(){t.reLocating()}),(function(){t.onReLocatingFaild(n.locDefault)})):e.onReLocatingFaild(n.locDefault)}))}))},initData:function(){var t=this;this.$storage.get("searchHistory").then((function(e){e&&e.length&&t.setData({history:e})})),this.getCityData(),this.$http.get(this.$api.CITY_LIST).then((function(e){var n=e.all_city,a=e.hot_city,o=t.data,i=o.allCity,r=o.hotCity;if(n&&a)if(i&&r){if(n.city_list.length!==i.length&&a.city_list.length!==r.length)return;t.handleSetCityData(e),t.cacheCityData(e)}else t.handleSetCityData(e),t.cacheCityData(e)})).catch((function(e){t.$showErrorPage(e.errType)}))},cacheCityData:function(t){this.$storage.set("CITY_LIST",t)},getCityData:function(){var t=this;this.$storage.get("CITY_LIST").then((function(e){Object.keys(e).length&&t.handleSetCityData(e)}))},handleSetCityData:function(t){var e=this,n={rendered:!0,showErrorPage:!1},a=t.hot_city||{},i=t.all_city||{},r=this.getAnchors(t);a.city_list&&a.city_list.length&&(n.hotCity=a,n.showHot=!0),i.city_list&&i.city_list.length&&(n.allCity=i,n.showAll=!0),r&&r.length&&(n.anchors=r,n.showAnchors=!0),this.setData(n,(function(t){o.nextTick((function(){e.getScrollTops(),e.handlData(i),e.reLocating()}))}))},onErrorPageReload:function(){this.initData()},getAnchors:function(t){var e=t.hot_city,n=t.all_city,a=[{name:"历史",id:"history"}];return e&&e.city_list&&e.city_list.length&&a.push({name:"热门",id:"hot"}),n&&n.city_list&&n.city_list.length&&n.city_list.forEach((function(t){a.push({name:t.title,id:"word-"+t.title})})),a},handlData:function(t){if(t&&t.city_list&&t.city_list.length){var e={};t.city_list.forEach((function(t){t.city_list.forEach((function(t){e[t.name]=t,e[t.pinyin]=t,t.synonym&&t.synonym.length&&t.synonym.forEach((function(n){e[n]=t}))}))})),this.cusData.searchAll=e,this.cusData.searchKeys=Object.keys(e)}},onSearchMode:function(){this.data.isSearchMode||this.setData("isSearchMode",!0),this.setData("inputDisabled",!1)},offSearchMode:function(){this.setData({value:"",sugList:[],showTip:!1,isSearchMode:!1})},onInput:function(t){var e=[],n=(t.detail.value||"").replace(/\s/g,""),a=this.cusData.searchAll,o=this.cusData.searchKeys;if(n){for(var i=0;i<o.length;i++)new RegExp("^"+n,"i").test(o[i])&&e.push(a[o[i]]);this.setData({showTip:!e.length,sugList:e})}else this.setData({showTip:!1,sugList:e})},clear:function(){this.setData({value:"",sugList:[],showTip:!1})},chooseCity:function(t){var e=this,n=this.data.history||[],a=t.currentTarget.dataset,o=a.name,i=a.code,r=a.pinyin,s=a.isCur,c=n.findIndex((function(t){return t.code===i})),u=this.cusData.realLocation,d={city:o,cityCode:i,cityPinyin:r},l=s&&u&&u.longitude?u:d;if(i){c>-1&&n.splice(c,1),n.unshift({name:o,code:i,pinyin:r});var h=n.slice(0,3);this.$storage.set("searchHistory",h),this.setData({history:h},(function(t){e.$location.update(l),e.$jump.back()}))}},getScrollTops:function(){var t=this;this.data.showAnchors&&o.createSelectorQuery().selectAll(".city-title").boundingClientRect((function(e){var n=t.cusData.scrollTop||0;t.cusData.titleTopAll=e.map((function(t){return{id:t.id,top:t.top+n}}))})).select(".city-fixed").boundingClientRect((function(e){e&&(t.cusData.fixedBarTop=e.top,t.cusData.fixedBarHieght=e.height)})).exec()},onAnchorTap:function(t){var e=this.data.anchors[t];e&&this.setData({showAnchorPop:!0,scrollIntoView:e.id,anchorSelected:t})},onScroll:function(t){if(this.cusData.dontTriggerSwiperScrollEvent)this.cusData.dontTriggerSwiperScrollEvent=!1;else{var e=t.detail.scrollTop,n=this.cusData.titleTopAll;this.cusData.scrollTop=e;for(var a=0;a<n.length;a++)if(n[a].top>=e){this.setData({anchorSelected:a,showAnchorPop:!1});break}}},getIndex:function(){var t=this.data.anchors.length,e=this.cusData,n=e.fixedBarTop,a=e.fixedBarHieght,o=(e.startPageY-n)/(a/t);return Math.floor(o)},onTouchStart:function(t){this.cusData.startPageY=t.touches[0].pageY},onTouchMove:function(t){this.cusData.startPageY=t.touches[0].pageY;var e=this.getIndex();this.onAnchorTap(e)},onTouchEnd:function(){var t=this.getIndex();this.cusData.dontTriggerSwiperScrollEvent=!0,this.onAnchorTap(t)},onSearchResultTouchstart:function(){this.setData("inputDisabled",!0)}}))})),window.define("351",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C=i();Page((0,I.default)({onLoad:function(t){var e;try{e=JSON.parse(t.navBar)}catch(t){}if(t.url){if(e&&e.transSafeDist){var n=C.globalData.systemInfo;if(n.safeArea){var a=n.screenHeight-n.safeArea.bottom;a>0&&(t.url+="".concat(-1===t.url.indexOf("?")?"?":"&","xcx_safe_dist=").concat(a))}}this.setData("src",t.url)}if(e){var i=e,r=i.title,s=void 0===r?"":r,c=i.bgColor,u=void 0===c?"":c,d=i.frontColor,l=void 0===d?"":d;u&&o.setNavigationBarColor({frontColor:l||"#ffffff",backgroundColor:u}),s&&o.setNavigationBarTitle({title:s})}},selectedAddress:function(t){var e=t.detail.data[0].addrid;i().addrid=e}}))})),window.define("354",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(19)),x=I(t(355)),_=I(t(141)),D=t(26),k=i().globalData.systemInfo.host;Page((0,_.default)({ubcLog:{from:"history"},onLoad:function(t){var e=this,n=i().globalData.systemInfo.screenWidth;this.delWidth=240*n/1242;var a=[x.default.get(),this.$http.get(this.$api.HOME,{data:{channel_id:""}})];Promise.all(a).then((function(t){var n=(0,C.default)(t,2),a=n[0],o=n[1].conf_list;if(!a||!a.length)throw new Error("empty");var i=o&&o.his_key_position&&o.his_key_position.white_list||[];"bdmap"===k&&a.forEach((function(t,e){a[e].jump_url="".concat(t.appid,"/"),a[e].jump_type="xcx"}));var r=x.default.filter(a,i);if(!r||!r.length)throw new Error("empty");e.setData({list:r,showErrorPage:!1,whiteList:i})})).catch((function(){e.setData({list:[],showErrorPage:!0})}))},onShow:function(){var t=this,e=this.data.whiteList;e&&e.length&&x.default.get().then((function(n){if("bdmap"===k&&n.forEach((function(t,e){n[e].jump_url="".concat(t.appid,"/"),n[e].jump_type="xcx"})),n&&n.length){var a=x.default.filter(n,e);t.setData({list:a})}}))},getWhiteList:function(){return this.$http.get(this.$api.HOME,{data:{channel_id:""}})},del:function(t){var e=this,n=t.target.dataset.index,a=this.data.list[n].appid;x.default.del(a).then((function(){e.setData("list[".concat(n,"].remove"),!0),e.checkIsEmpty(),(0,D.textToast)("删除成功")})).catch((function(){return(0,D.textToast)("删除失败")}))},checkIsEmpty:function(){var t=this.data.list;Array.isArray(t)&&(t.every((function(t){return!0==!!t.remove}))&&this.setData({list:[],showErrorPage:!0}))},onTocuchstart:function(t){var e=t.currentTarget.dataset.index,n=this.cur,a=0;n===e?a=this.data.list[n]&&this.data.list[n].diff||0:this.setData("list[".concat(n,"].diff"),0),this.x=t.touches[0].clientX,this.y=t.touches[0].clientY,this.oldDiff=a,this.cur=e},onTouchmove:function(t){var e=this.cur,n=t.touches[0].clientX,a=t.touches[0].clientY,o=n-this.x,i=a-this.y;this.diff=this.oldDiff+o;var r=Math.abs(Math.atan(i/o)/(Math.PI/180));this.diff>0&&(this.diff=0),r<15&&-1*this.diff<this.delWidth&&(this.isValidMove=!0,this.setData("list[".concat(e,"].diff"),this.diff))},onTouchend:function(){if(this.isValidMove){var t=this.cur,e=this.delWidth,n=-1*this.diff>e/2,a=this.diff<0&&n?-e:0;this.isValidMove=!1,this.setData("list[".concat(t,"].diff"),a)}}}))})),window.define("355",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var I={filter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length?t.filter((function(t){return e.indexOf(t.appid)>=0})):t},get:function(){return new Promise((function(t){o.getHistory({success:function(e){var n,a=e.history;t((n=void 0===a?[]:a,Array.isArray(n)?n.map((function(t){if(0==+t.frameType)return{jump_type:"box",jump_url:t.scheme,title:t.title,appid:t.appid,icon:t.iconUrl}})).filter((function(t){return!!t})):[]))},fail:function(e){t([])}})}))},del:function(t){return new Promise((function(e,n){o.deleteHistory({appid:t,success:function(){e()},fail:function(){n()}})}))}};n.default=I})),window.define("358",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(157)),_=I(t(141)),D=t(31),k=t(26),P=I(t(14)),E=i(),L="",A={title:"惠生活",content:"吃喝玩乐购，真实惠生活",path:"/homes/search/search?query="},O=!1;Page((0,_.default)({data:{value:"",hotWordResult:{},banner:[],sku:[],service:[],hotChannel:{},hasMore:0,pn:0,research:{},isFixed:0,isLoading:!1,inputFocus:!1,sugShow:!1,valueSearch:"",showInputBtn:!1,pageStatus:"preSearch",historyArr:[],placeholder:"搜索你想找的服务",pageLoading:!1,searchBtnEnable:!0,showInput:!1,showErrorPage:!1,searchType:"",newData:[],services:[],sid:"",bannerData:null,sampleVal:""},attr:{intersectionObserver:null,serviceResultShowReported:[],firstShow:!0,sugList:[],reported:{},hasSendLog:{}},ubcLog:{from:"search"},hasInit:!1,appInit:function(t,e){var n=this,a=t.query,i=t.searchFrom;this.getHotWord(),e&&o.showLoading({title:"正在加载...",mask:!0}),a&&(i?this.setData({searchType:i},(function(){n.initData(a)})):this.initData(a))},onInit:function(t){this.setData({sid:t.sid}),this.hasInit||(this.hasInit=!0,this.appInit(t))},onLoad:function(t){var e=this,n=t.search_from,a=t.query,o=t.placeholder,i=this.data.searchBtnEnable;this.ubcLog.from=n||"fw_xcx",a||"搜索你想找的服务"!==o||(i=!1),n&&(L=n),this.setData({placeholder:o||"",pageStatus:a?"result":"preSearch",valueSearch:a,showInputBtn:!1,searchBtnEnable:i,inputFocus:!a},(function(){e.setData({showInput:!0})})),this.hasInit||(this.hasInit=!0,this.appInit(t,!0)),this.$storage.get("SEARCH_PAGE_HISTORY").then((function(t){Array.isArray(t)&&t.length>0&&e.setData({historyArr:t},(function(){e.sendHistoryShow()}))}))},onShow:function(){var t=this;if(this.attr.firstShow)this.attr.firstShow=!1;else{var e=this.data,n=e.sugShow,a=e.pageStatus,o=e.pageLoading,i=e.historyArr,r=e.hotWord,s=e.newData;n&&this.sendSugShow(),"preSearch"!==a||o||(i.length>0&&this.sendHistoryShow(),null!=r&&r.value.length&&this.sendHotShow(this.data.sampleVal)),"result"!==a||o||s.forEach((function(e,n){"hot_item"===e.type&&t.sendLogNew("hot_item","show")}))}},onReachBottom:function(){!this.data.isLoading&&+this.data.hasMore&&this.loadMore()},onShareAppMessage:function(){return A.path+=encodeURIComponent(this.data.valueSearch||""),(0,k.shareAppMessageUrlPatch)(A)},sendLog:function(t){o.$log.send({module:t||"",sid:this.options.sid},"display"),this.sendLogNew(t,"show")},getHotWord:function(){var t=this;this.$http.get(this.$api.NEW_PRE_SEARCH).then((function(e){var n=e.innerData,a=e.sampleVal;if((0,k.isNonEmptyArray)(n)){var i=n.find((function(t){return"hot_words"===t.type})),r=i.items,s=i.title,c={title:s,value:r},u=[],d=t.data.placeholder;Array.isArray(r)&&(r.forEach((function(t){u.push(t.text)})),t.sendHotShow(a)),d||(d=(0,k.randomSelect)(u)||"搜索你想找的服务"),c&&t.setData({sampleVal:a,placeholder:d,hotWord:c}),s&&o.setDocumentTitle({title:s})}})).finally((function(){t.options.query||t.setData({rendered:!0})}))},initData:function(t){var e=this;o.pageScrollTo({scrollTop:0,duration:0});var n=E.globalData.location;this.$http.get(this.$api.NEW_SEARCH_RESULT,{data:{sid:this.data.sid,query:t||this.data.valueSearch||"搬家",city_name:n.city||"北京",pn:this.data.pn,city_code:n.cityCode||"131",search_from:L||"fw_xcx"}}).then((function(t){O=!1;var n={},a={},i={},r=t||[];if((0,k.isNonEmptyArray)(r)){var s,c,u,d,l,h,p,f;r.forEach((function(t,e){var o,r;((0,k.isNonEmptyArray)(t.items)&&t.items.forEach((function(e,a){"research"===t.type&&(n.jump_text=e.jump_text,n.jump_type=e.type,n.jump_url=e.jump_url,n.sorryText=e.sorryText,n.tryText=e.tryText)})),"hot_words"===t.type)&&(a.type=t.type,a.title=t.title,a.value=[],(o=a.value).push.apply(o,(0,x.default)(t.items)));"hot_channels"===t.type&&(i.type=t.type,i.title=t.title,i.value=[],(r=i.value).push.apply(r,(0,x.default)(t.items)))}));var g=e.data.newData&&e.data.newData.length>0,m=(null===(s=r.filter((function(t){return"banner"===t.type})))||void 0===s?void 0:s[0])||null,v=null==m?void 0:m.items.map((function(t,e){return{src:(0,k.gzipImg)(t.img),type:"img"}}));e.setData({rendered:!0,valueSearch:e.data.valueSearch,hotWordResult:a,hotChannel:i,research:n,pageLoading:!1,sugShow:!1,newData:r,bannerData:m,bannerList:v},(function(){e.setData({isLoading:!1}),e.data.newData&&e.data.newData.length&&(g||(e.attr.serviceResultShowReported=[]),e.createIntersectionObserver())})),o.hideLoading(),null!==(c=e.data)&&void 0!==c&&null!==(u=c.research)&&void 0!==u&&u.jump_url&&(e.sendNoResultShow(),e.sendLog("whole_network_search")),null!==(d=e.data)&&void 0!==d&&null!==(l=d.hotChannel)&&void 0!==l&&null!==(h=l.value)&&void 0!==h&&h.length&&(e.sendHotShow(e.data.sampleVal),e.sendHotChannelShow()),null!==(p=e.data)&&void 0!==p&&null!==(f=p.sku)&&void 0!==f&&f.length&&e.sendLog("result_sku_item")}})).catch((function(t){e.$showErrorPage(t.errType),o.hideLoading()}))},getCommonExt:function(){return{sid:this.options.sid,query:this.data.valueSearch}},sendLogNew:function(t,e,n){var a=this.getCommonExt();o.$log.sendNew((0,C.default)((0,C.default)({module:t},n),a),e)},searchInput:function(t){var e=this.data.placeholder,n=this.data.searchBtnEnable,a=t.detail.value,o=this.data.pageStatus;n=!(!a&&"搜索你想找的服务"===e||""!==a&&!a.replace(/\s/g,"")),""===a&&(o="preSearch",this.sendLog(o)),this.setData({searchBtnEnable:n,pageStatus:o,valueSearch:a,showInputBtn:!!a,sugShow:!!a})},goToSmartProgram:function(t){var e=t.currentTarget.dataset.url,n="";e&&e.xcx_path&&(n=e.xcx_query?"".concat(e.xcx_path,"?").concat(e.xcx_query):e.xcx_path);var a=e.xcx_appkey;a===D.APPKEY_HSH?o.navigateTo({url:n||"/pages/index/index"}):o.navigateToSmartProgram({appKey:a,path:n})},loadMore:function(){var t=this;+this.data.hasMore&&this.setData({isLoading:!0},(function(){t.initData()}))},jump:function(t){var e=t.currentTarget.dataset.param;this.setData({searchBtnEnable:!0,pageStatus:"result",valueSearch:e.text,showInputBtn:!1,pn:0,service:[],pageLoading:!0,inputFocus:!1,searchType:"hot"}),this.initData(),this.updateStorage(e.text)},searchClear:function(){var t=!0;"搜索你想找的服务"===this.data.placeholder&&(t=!1),this.setData({searchBtnEnable:t,valueSearch:"",inputFocus:!0,pageStatus:"preSearch",sugShow:!1,showInputBtn:!1}),this.sendLog("preSearch"),o.pageScrollTo({scrollTop:0,duration:0});var e=this.data,n=e.historyArr,a=e.hotWord;n.length>0&&this.sendHistoryShow(),a&&a.value&&a.value.length&&this.sendHotShow(this.data.sampleVal)},jumpTo:function(t){var e=t.currentTarget.dataset.url;o.openBdboxWebview({module:"browser",action:"open",parameters:{url:e,forbidautorotate:1,simple:1,newbrowser:1,needParams:0}})},clickBanner:function(t){o.$log.handleClickLog(t),this.commonJump(t)},sugClick:function(t){var e=t.detail||"";this.setData({pageStatus:"result",sugShow:!1,valueSearch:e,pn:0,service:[],pageLoading:!0,showInputBtn:!1,searchType:"sug"}),this.initData(),this.updateStorage(e)},sugShow:function(t){this.attr.sugList=t.detail.sugList,this.sendSugShow()},searchTap:function(){if(!O){var t=this.data.placeholder,e=this.data.valueSearch||"";if((e||"搜索你想找的服务"!==t)&&(""===e||e.replace(/\s/g,""))){var n=e?"common":"empty";this.sendLogNew("search","click",{query:e||t,type:n}),e=e||t||"",this.setData({valueSearch:e,pageStatus:"result",sugShow:!1,showInputBtn:!1,pn:0,service:[],pageLoading:!0,searchType:n}),O=!0,this.initData(),this.updateStorage(e)}}},onErrorPageReload:function(){this.setData({pageLoading:!0,showErrorPage:!1}),this.initData()},updateStorage:function(t,e){var n=this.data.historyArr,a=n.indexOf(t);a>=0&&n.splice(a,1),t&&t.replace(/\s/g)&&n.unshift(t),n.length>9&&(n=n.slice(0,9)),this.setData({historyArr:n}),this.$storage.set("SEARCH_PAGE_HISTORY",this.data.historyArr)},commonJumpHot:function(t){var e=t.currentTarget.dataset,n=e.types,a=e.ext,o=e.hideMore,i=e.mod,r=this.data.newData.filter((function(t){return t.type===n}))[0].url,s=r[0],c=s.jumpUrl,u=s.jumpType,d=i||{},l=d.xcxappkey,h=d.module;this.sendLogNew(a||h,"click",{appkey:l||""}),o||r.length&&r&&P.default.to(c,u)},HistoryClear:function(){var t=this;o.showModal({title:"温馨提示",content:"确定要清空历史记录吗？",showCancel:!0,cancelText:"取消",confirmText:"确定清空",success:function(e){e.confirm&&o.removeStorage({key:"SEARCH_PAGE_HISTORY",success:function(){t.setData({historyArr:[]})},fail:function(){o.showToast({title:"清空历史记录失败",icon:"none"})}})}})},historyWordClick:function(t){var e=(t&&t.currentTarget.dataset||"").historyWord;this.setData({pageStatus:"result",valueSearch:e,sugShow:!1,showInputBtn:!1,pn:0,service:[],pageLoading:!0,searchBtnEnable:!0,inputFocus:!1,searchType:"his"}),this.initData(),this.updateStorage(e,1)},focusFunc:function(){this.data.valueSearch&&this.setData({sugShow:!0,showInputBtn:!0})},sendShowLog:function(t,e,n){var a=this.data.newData,o=(0,k.isNonEmptyArray)(a)&&a.filter((function(e){return e.type===t}));if((0,k.isNonEmptyArray)(o)){var i=o[0].items;if((0,k.isNonEmptyArray)(i)){var r=i[e];r&&!r.hasSendLog&&(r.hasSendLog=!0,this.sendLogNew(n,"show",{rank:e,name:r.title}))}}},createIntersectionObserver:function(){var t=this;this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=o.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport();this.attr.intersectionObserver.observe([".xcx-banner","#new-service-result, #shopItem, #coupon, #sku"].join(", "),(function(e){var n=e.dataset,a=n.module,o=n.index;switch(a){case"banner":t.attr.hasSendLog.banner||(t.attr.hasSendLog.banner=!0,t.sendLogNew("banner","show"));break;case"service":t.sendShowLog("service",o,"result");break;case"shopItem":t.sendShowLog("hot_item",o,"goods_card");break;case"coupon":t.sendShowLog("coupon",o,"coupon");break;case"sku":t.sendShowLog("hot_sku",o,"xcx_card")}}))},sendSugShow:function(){this.sendLogNew("sug","show",{list:this.attr.sugList})},sendHotShow:function(t){this.sendLogNew("hot","show",{sampleVal:t})},sendHistoryShow:function(){this.sendLogNew("his","show",{list:this.data.historyArr})},sendHotChannelShow:function(){this.sendLogNew("hot_channel","show")},sendNoResultShow:function(){this.sendLogNew("no_result","show",{query:this.data.valueSearch,type:this.data.searchType})}}))})),window.define("361",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(16)),_=C(t(15)),D=C(t(27)),k=C(t(29)),P=C(t(141)),E=C(t(14)),L=t(26),A=t(31);Page((0,P.default)({data:{rendered:!1,isIos:(0,L.isIOS)(),imageWidth:"46.12vw",tabs:[],currentTab:0,topBarOpacity:0,currentTabName:"",heightMap:{},navHeight:(0,L.getTopHeight)(),scrollTop:0,NEW_PEOPLE:A.NEW_PEOPLE,NEW_PEOPLE_CASH:A.NEW_PEOPLE_CASH},attr:{intersectionObserver:null,hasInit:!1,firstShow:!0,reported:[],scrollKey:!0,shareInfo:{}},ubcLog:{from:"user-welfare"},onInit:function(t){this.attr.hasInit||(this.attr.hasInit=!0,this.attr.options=t,this.initData())},onShareAppMessage:function(){return this.attr.shareInfo},fetchActivity:function(){var t,e,n=r().globalData.location;return this.$http.get(this.$api.GET_USER_WELFARE,{data:{key:(null===(t=this.attr)||void 0===t||null===(e=t.options)||void 0===e?void 0:e.key)||"",city_code:n.cityCode||"131"}})},onErrorPageReload:function(){this.initData()},onShow:function(){this.attr.firstShow?this.attr.firstShow=!1:(this.attr.reported=[],this.createIntersectionObserver())},onClickKey:function(t){E.default.withEvent(t)},onSkuJump:function(t){E.default.withEvent(t)},initGoodsWelfare:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a,o,i,r,s,c,u,d;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchActivity().catch((function(e){t.$showErrorPage(e.errType)}));case 2:if((o=e.sent)&&o.title&&o.tabs&&o.tabs.length){e.next=6;break}return t.$showErrorPage(),e.abrupt("return");case 6:i=o.bgImg,r=o.diamond,s=o.tabs,c=o.title,u=o.share,d=t.handleTabs(s),t.attr.shareInfo=Object.assign({},t.attr.shareInfo,{title:u&&u.title,content:u&&u.content,imageUrl:u&&u.img}),r.forEach((function(t){t.img=(0,L.gzipImg)(t.img)})),t.setData({title:c,diamond:r,tabs:d,bgImg:(0,L.gzipImg)(i),rendered:!0,key:(null===(n=t.attr)||void 0===n||null===(a=n.options)||void 0===a?void 0:a.key)||"",currentTabName:(0,L.isNonEmptyArray)(d)&&d[0]&&d[0].name||""},(function(){t.setHeight(0),t.createIntersectionObserver()}));case 11:case"end":return e.stop()}}),e)})))()},handleFirstRenderTas:function(t){var e=[];return t.forEach((function(t,n){0===n?e[0]=(0,_.default)((0,_.default)({},t),{},{sku:t.sku.slice(0,4)}):e[n]=(0,_.default)((0,_.default)({},t),{},{sku:[]})})),e},handleTabs:function(t){var e;return(0,L.isNonEmptyArray)(t)&&null!==(e=t[0])&&void 0!==e&&e.name&&t.forEach((function(t){t.sku=t.sku.map((function(t){var e="0"===t.price?0:"-1",n={type:e,buttonText:0===e?"":t.buttonText,showSourceValue:!0,img:(0,L.gzipImg)(t.img),origin_price:t.priceOri||"",discount:t.discountText||"",userNumText:t.userNumText||"",appkey:(0,L.getAppKey)(t.jumpType,t.jumpUrl)};return["discount","use_num"].forEach((function(e){delete t[e]})),(0,_.default)((0,_.default)({},t),n)}))})),t||[]},initData:function(){var t=this;return(0,k.default)(D.default.mark((function e(){return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initGoodsWelfare();case 2:case"end":return e.stop()}}),e)})))()},tabClick:function(t){var e=t.currentTarget.dataset,n=e.index,a=e.tab;n!==this.data.currentTab&&(this.setHeight(n),this.setData({currentTab:n,currentTabName:a}))},swiperChange:function(t){var e=t.detail,n=e.current;if("touch"===e.source){var a=this.data.tabs[n].name;this.setHeight(n),this.setData({currentTabName:a,currentTab:n})}},setHeight:function(t){var e=this;this.data.heightMap[t]||a((function(){i.createSelectorQuery().select(".c-welfare-waterfall-list-".concat(t)).boundingClientRect((function(n){n&&n.height&&e.setData((0,x.default)({},"heightMap[".concat(t,"]"),"".concat(Math.ceil(n.height),"px")))})).exec()}),10)},onPageScroll:function(t){var e=t.scrollTop,n=(e/80).toFixed(2),a=n>1?1:n;this.setData({topBarOpacity:a});var o=this.data,i=o.statusBarHeight,r=o.navigationBarHeight,s=o.fixHeader,c=e>=this.attr.firstCardTop-i-r;c&&!s?this.setData({fixHeader:!0}):!c&&s&&this.setData({fixHeader:!1})},createIntersectionObserver:function(){var t,e=this;this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=i.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport();var n=this.data,a=n.tabs,o=n.currentTab,r=n.currentTabName,s=null===(t=a[o])||void 0===t?void 0:t.sku,c=this.attr.reported,u=s&&Array.from(s,(function(t,e){return"#waterfall-content-list-item-".concat(e)})).join(", ");this.attr.intersectionObserver.observe(u,(function(t){var n=t.id.split("waterfall-content-list-item-")[1],a=s[n];c[n]||(i.$log.sendNew({tab:r,module:"welfare_goods",goods_order:n,sku_id:a.id||"",sku_title:a.title,appkey:a.appkey,url:a.jumpUrl,key:e.data.key},"show"),c[n]=!0)}))},queryNodeInfo:function(){var t=this,e=i.createSelectorQuery();e.select(".keyPosition").boundingClientRect(),e.exec((function(e){var n=e&&e[0];if(n){var a=n.top<=t.data.navHeight+1;t.data.isShowTopBarTitle!==a&&t.setData({isShowTopBarTitle:a})}}))}}))})),window.define("364",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C=t(26);Page((0,I.default)({data:{zhanjiList:[],isShowHome:!1,rendered:!1,emptyImg:(0,C.gzipImg)("https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3769435404,3312756878&fm=179&app=35&f=PNG?w=185&h=199&s=19843C7A4B6347241CD5D1DA0300E0B1")},ubcLog:{from:"share-zhanji"},onLoad:function(t){this.setNavColors();var e=t.act_id;this.initData(e)},initData:function(t){var e=this,n="share-zhanji";switch(+t){case 10006:this.ubcLog.from="".concat(n,"-express");break;case 10005:this.ubcLog.from="".concat(n,"-recharge");break;case 10002:this.ubcLog.from="".concat(n,"-movie");break;case 10007:this.ubcLog.from="".concat(n,"-cleanFestival")}this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"liebianActivity",act_id:t||"10006",action:"list"}}).then((function(t){e.setData({zhanjiList:t,rendered:!0})})).catch((function(t){e.$showErrorPage(t.errType)}))},setNavColors:function(){o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"}),o.setBackgroundColor({backgroundColor:"#e72f23"})}}))})),window.define("367",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(27)),D=x(t(29)),k=x(t(15)),P=x(t(141)),E=x(t(14)),L=t(9),A=t(26),O=x(t(368)),N=null,R=20,B=55;Page((0,P.default)((0,k.default)((0,k.default)({},O.default.config),{},{data:{shareInfo:{},defaultShareInfo:{},generateConfig:O.default.generateConfig,isLogin:!1,activity:{},coupon:{skeleton:!0},liebianCoupon:{},list:[],flow:[],moreService:{skeleton:!0,service:[{},{},{}],title:"更多服务"},baoInfo:{},zhanjiInfo:{},ruleInfo:{},subInfo:{},isShowHome:!1,isShowLeft:!1,hasSubscribe:!1,couponStatus:10,liebianCouponStatus:10,countInfo:"",showHover:!0,videoAdress:"https://scenter.cdn.bcebos.com/finger_afx.mp4",isNewUser:0,templateId:"BD2448",subscribeId:"ScenterPayFanli"},ubcLog:{from:"share-avtivity"},onHide:function(){this.setData({shareAjaxLock:!1}),clearTimeout(this.redPacketOpenShareTimer)},firstRender:!0,hasInit:!1,onInit:function(){this.hasInit||(this.hasInit=!0,this.initData())},onLoad:function(){this.hasInit||(this.hasInit=!0,this.initData()),r.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"}),r.setBackgroundColor({backgroundColor:"#d80007"})},onShow:function(){this.firstRender||this.initData(1),this.handleHelp()},handleHelp:function(){var t=this.options,e=t.share_liebian_id,n=t.actId;if(e){var o={activity_id:"liebianActivity",action:"help",liebian_id:e,actId:n};this.fetchData(this.$api.GET_ACTIVITY,o,!0).then((function(t){a((function(){(0,A.textToast)(t.msg,3e3)}),2e3)})).catch((function(t){a((function(){(0,A.textToast)(t.msg,3e3)}),2e3)}))}},onUnload:function(){N&&clearInterval(N),clearTimeout(this.redPacketOpenShareTimer)},onErrorPageReload:function(){this.initData(1)},initData:function(t){var e=this;N&&clearInterval(N);var n=this.options,a=n.act_id,o=n.shareAppKey,i=void 0===o?"":o,r=n.enShare,s={},c="share-avtivity";switch(a=+a){case 10006:s=O.default.express.defaultShareInfo,this.ubcLog.from="".concat(c,"-express");break;case 10005:s=O.default.recharge.defaultShareInfo,this.ubcLog.from="".concat(c,"-recharge");break;case 10002:s=O.default.movie.defaultShareInfo,this.ubcLog.from="".concat(c,"-movie");break;case 10007:s=O.default.cleanFestival.defaultShareInfo,this.ubcLog.from="".concat(c,"-cleanFestival");break;case 10015:s=O.default.waimaiCouponFestival.defaultShareInfo,this.ubcLog.from="".concat(c,"-waimaiCouponFestival")}r&&!t&&(this.setData({needRequestShare:1}),this.getShareInfoData(a).then((function(){})).catch((function(){e.setData({needRequestShare:0}),10015!=+a&&e.getShareData()}))),this.setData({defaultShareInfo:s,actId:a}),this.$http.get(this.$api.GET_ACTIVITY,{data:{shareAppKey:i,activity_id:"liebianActivity",act_id:a,path:"/homes/share_activity/share_activity"}}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.list.length=+t.liebianCoupon.inviteNum,e.options.enShare&&e.firstRender&&delete t.shareInfo;var n=(0,k.default)((0,k.default)({hasSubscribe:!!t.subInfo.status},t),{},{couponStatus:t.coupon.status,couponText:t.coupon.buttonText,showErrorPage:!1});delete n.moreService,delete n.coupon;var a=Object.assign({},t.moreService,{skeleton:!1}),o=Object.assign({},t.coupon,{skeleton:!1});e.setData(n,(function(){e.setData({moreService:a,coupon:o})})),t.liebianCoupon.remainTime&&e.handleTimer(+t.liebianCoupon.remainTime)})).catch((function(t){e.$showErrorPage(t.errType)})).finally((function(){e.firstRender=!1}))},jumpFunc:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpZhanji,o=e.jumpType,i=e.logName;if(r.$log.sendNew({module:"tab",name:i},"click"),a){var s="act_id=".concat(this.data.actId),c=n.indexOf("?")>=0?n+"&"+s:n+"?"+s;E.default.to(c,o)}else E.default.withEvent(t)},commonLogin:function(){var t=this;return new Promise((function(e,n){t.data.isLogin?e():(t.$showLogin(),n())}))},subscribeTo:function(t){var e=this,n=t.detail.formId;r.$log.send({module:"share_activity_subscribe",isNewUser:this.data.isNewUser,actId:this.data.actId},"click"),r.$log.sendNew({module:"tab",name:this.data.subInfo.text},"click"),this.commonLogin().then((function(){(0,A.sendSubscribeToRd)({subscribeId:"ScenterPayFanli",formId:n,source:"scenterShare",self:e}).then((function(){(0,A.textToast)("订阅成功~"),e.setData({hasSubscribe:!0})})).catch((function(){(0,A.textToast)("订阅失败，请重试")}))}))},loginSuccess:function(){this.$showLogin(!1),this.initData(1)},loginFail:function(){(0,A.textToast)("登录失败，请重试")},loginClose:function(){this.$showLogin(!1)},getShareInfo:O.default.methods.getShareInfo,getShareData:O.default.methods.getShareData,getShareInfoData:O.default.methods.getShareInfoData,fetchData:O.default.methods.fetchData,isBlackUser:function(){var t=this;return(0,D.default)(_.default.mark((function e(){var n,a,o,i,r;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1==+t.data.isAlwaysJoin){e.next=3;break}return e.abrupt("return",!1);case 3:return n=t.options,a=n.act_id,o=n.shareAppKey,i={shareAppKey:void 0===o?"":o,activity_id:"liebianActivity",action:"join",act_id:a||t.data.actId},e.next=7,t.fetchData(t.$api.GET_ACTIVITY,i,!0).catch((function(t){return(0,A.textToast)(t.msg)}));case 7:return r=e.sent,e.abrupt("return",!r);case 9:case"end":return e.stop()}}),e)})))()},mainButtonClick:function(){var t=this;return(0,D.default)(_.default.mark((function e(){var n,a,o,i,s,c,u;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.$log.sendNew({module:"invite"},"click"),n=t.data,a=n.liebianCoupon,o=void 0===a?{}:a,i=n.isLogin,s=o.status,i){e.next=6;break}return t.$showLogin(),e.abrupt("return");case 6:if(c=!1,![R,B].includes(+s)){e.next=11;break}return e.next=10,t.isBlackUser();case 10:c=e.sent;case 11:if(!c){e.next=13;break}return e.abrupt("return");case 13:if(t.setData({showHover:!1}),!t.data.shareAjaxLock){e.next=16;break}return e.abrupt("return");case 16:if(u=0,(void 0===t.data.needRequestShare&&(20==+o.status&&!o.liebianId||20==+o.status&&1==+o.liebianStatus)||55==+o.status)&&(u=1,t.setData({needRequestShare:u,shareAjaxLock:!0})),10!=+o.status){e.next=23;break}return(0,A.textToast)("活动还没开始哦，稍后再来!"),e.abrupt("return");case 23:if(!u){e.next=28;break}return t.getShareInfoData().then((function(){})).catch((function(){t.setData({needRequestShare:0}),t.getShareData()})),e.abrupt("return");case 28:if(20!=+o.status){e.next=33;break}return t.getShareData(),e.abrupt("return");case 33:if(50!=+o.status){e.next=36;break}return(0,A.textToast)("优惠券已抢光，明天再来吧~"),e.abrupt("return");case 36:E.default.to(o.jumpUrl,o.jumpType);case 37:case"end":return e.stop()}}),e)})))()},getCoupon:function(){var t=this,e=this.data,n=e.couponStatus,a=e.coupon;30!==n?this.commonLogin().then((function(){(0,L.getSysData)().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.$http.get(t.$api.GET_ACTIVITY,{data:{activity_id:"liebianActivity",act_id:t.data.actId,action:"draw",coupon_id:a.couponId,zid:e.zid||""},canResArrayNull:!0,noTry:!0}).then((function(e){(0,A.textToast)(e.msg),t.setData({couponStatus:30,couponText:"去使用"})})).catch((function(e){(0,A.textToast)(e.msg),t.initData(1)}))}))})):E.default.to(a.jumpUrl,a.jumpType)},handleTimer:function(t){var e=this;N=o((function(){var n=(0,A.countDown)(--t,"noUnit"),a=n.hour,o=n.minute,i=n.second;e.setData("countInfo","剩余助力时间 ".concat(e.getTime(a)," : ").concat(e.getTime(o)," : ").concat(e.getTime(i))),0===t&&(clearInterval(N),e.initData(1))}),1e3)},getTime:function(t){return t<10&&t>0?"0"+t:t||"00"},onShareAppMessage:function(){(0,A.get)(this.data,"shareInfo.normalShare.img")&&!(0,A.get)(this.data,"shareInfo.normalShare.imageUrl")&&(this.data.shareInfo.normalShare.imageUrl=this.data.shareInfo.normalShare.img);var t=(0,A.get)(this.data,"shareInfo.normalShare")?this.data.shareInfo.normalShare:this.data.defaultShareInfo;return(0,A.shareAppMessageUrlPatch)(t)}})))})),window.define("368",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(41),x=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var _=x(t(27)),D=x(t(29)),k=x(t(15)),P=x(t(14)),E=t(26),L=t(144),A=C(t(9)),O=t(31),N=["expressman_biyeji"],R={config:{redPacketRefreshTimer:null,redPacketOpenShareTimer:null,redPacketRequestTag:!1},express:{actId:"10006",actPage:"/channels/express/pages/index/index",defaultShareInfo:{title:"10元快递券就差你帮忙了！",content:"帮忙点一下，你也能得最高16元快递无门槛立减券哦！",imageUrl:"https://express-server.bj.bcebos.com/liebian/fenxiangtu.png",path:"/channels/express/pages/index/index?sfrom=shareUrl&source=shareUrl&activeIndex=1"},toastUseText:""},recharge:{actId:"10005",actPage:"/channels/recharge/pages/index/index",defaultShareInfo:{title:"5元话费券就差你帮忙了！",content:"帮忙点一下，你也能得最高7元话费无门槛立减券哦！",imageUrl:"https://express-server.bj.bcebos.com/liebian/sharetu.png",path:"/channels/recharge/pages/index/index?sfrom=shareUrl&source=shareUrl"},toastUseText:"已自动为您计算最大优惠，点击金额充值吧"},movie:{actId:"10002",actPage:"/channels/movie/pages/index/index",defaultShareInfo:{title:"10元观影优惠券就差你帮忙了！",content:"帮忙点一下，你也能得最高15元观影优惠券哦！",imageUrl:"https://express-server.bj.bcebos.com/liebian/10yuan.png",path:"/channels/movie/pages/index/index?sfrom=shareUrl&source=shareUrl"},toastUseText:"快去看电影吧~"},cleanFestival:{actId:"10007",actPage:"/homes/clean-festival/clean-festival",defaultShareInfo:{title:"40元家电清洗维修劵就差你帮忙了！",content:"帮忙点一下，你也能得最高40元家电清洗维修无门槛立减劵哦！",imageUrl:"https://express-server.bj.bcebos.com/liebian/10yuan.png",path:"/homes/clean-festival/clean-festival?sfrom=shareUrl&source=shareUrl"},toastUseText:"快去下单吧~"},waimaiCouponFestival:{actId:"10015",actPage:"/homes/coupon_page/index",defaultShareInfo:{title:"10元外卖优惠券还不赶紧上车！",content:"点击链接，与我一起获得美团外卖10元大额红包！",imageUrl:"https://express-server.bj.bcebos.com/liebian/10yuan.png",path:"/homes/coupon_page/index?sfrom=shareUrl&source=shareUrl"},toastUseText:"快去下单吧~"},generateConfig:{baseConfig:{backgroundImg:"https://express-server.bj.bcebos.com/liebian/shareIMG.jpg",width:1200,height:1600,quality:1,fileType:"jpeg",isCrossOrigin:!0},qrCode:{width:312,height:312,text:"{qrCodeUrl}",x:444,y:882,correctLevel:1,foreground:"#f97446"},dynamicConfig:[],replaceText:{qrCodeUrl:""}},methods:{getShareInfo:function(t){var e=this,n=t.detail;this.data.needRequestShare&&this.setData({needRequestShare:0,shareAjaxLock:!1},(function(){"android"===A.getSystemInfo().platform?(clearTimeout(e.redPacketOpenShareTimer),e.redPacketOpenShareTimer=a((function(){e.getShareData(n)}),1e3)):e.getShareData(n),(0,E.hideLoading)()})),this.setData({shareData:n})},getShareData:function(t){var e=this,n=t||this.data.shareData||this.data.defaultShareInfo,a=getCurrentPages();"/homes/share_activity/share_activity"==="/"+a[a.length-1].uri&&Object.assign(n,{complete:function(){e.initData(1)}}),n=(0,E.shareAppMessageUrlPatch)(n),i.openShare(n)},refresh:function(t){this.loadRedPacketData()},toRedPacket:function(t){var e=t.jumpUrl,n=t.jumpType,a=t.canalName;i.$log.send({module:"red_packet_detail",apptype:n,url:e,canalName:a,isNewUser:this.data.isNewUser},"click"),i.$log.sendNew({module:"activity"},"click"),P.default.to(e,n,a)},tapCommonBtn:function(t){if(t=this.deleteData(t),i.$log.send((0,k.default)((0,k.default)({},t),{},{module:"red_packet_c_btn",isNewUser:this.data.isNewUser}),"click"),i.$log.sendNew({module:"get"},"click"),this.data.shareAjaxLock)(0,E.textToast)("数据请求中，请稍后再试~");else{var e=t,n=e.status,a=e.couponId;10===n?(0,E.textToast)("活动还没开始哦，稍后再来!"):20===n?this.getRedPacketCoupon(a):30===n?((0,E.textToast)(this.data.toastUseText),this.handleUse(1)):50===n?(0,E.textToast)("优惠券已抢光，明天再来吧~"):60===n&&(0,E.textToast)("来晚啦，活动已结束~")}},tapToDetail:function(t){var e=this.options.shareAppKey,n=void 0===e?"":e,a=t.canalName,o=t.status;o=+o;var r="/homes/share_activity/share_activity?act_id=".concat(this.data.actId,"&shareAppKey=").concat(n);i.$log.send({module:"red_packet_lb_redian",apptype:"local",url:r,canalName:a,status:o,isNewUser:this.data.isNewUser},"click"),i.$log.sendNew({module:"share_bag"},"click"),20!==o&&30!==o||P.default.to(r,"local",a)},tapShareBtn:function(t,e){var n=this,a=this.options.shareAppKey,o=void 0===a?"":a,r="/homes/share_activity/share_activity?act_id=".concat(this.data.actId,"&enShare=1&shareAppKey=").concat(o),s=t,c=s.canalName,u=s.position,d=this.data.liebianCoupon,l=void 0===d?{}:d,h=l.status,p=l.liebianStatus,f=l.liebianId;h=+h,p=+p,t=this.deleteData(t);var g="red_packet_lb_".concat(u);if(i.$log.send((0,k.default)((0,k.default)({position:u},l),{},{module:g,apptype:"local",url:r,canalName:c,isNewUser:this.data.isNewUser,shareAjaxLock:this.data.shareAjaxLock}),"click"),"btn1"!==u&&"btn2"!==u||i.$log.sendNew({module:"share"},"click"),"finish"!==u&&"invalid"!==u||i.$log.sendNew({module:"invitepop"},"click"),!this.data.shareAjaxLock){var m=0;e&&1!==this.data.needRequestShare&&(55===h||20===h&&!f||20===h&&1===p)&&(m=1,this.setData({needRequestShare:m,shareAjaxLock:!0})),10===h?(0,E.textToast)("活动还没开始哦，稍后再来!"):e&&m?this.getShareInfoData().then((function(){})).catch((function(){n.setData({needRequestShare:0}),n.getShareData()})):20===h||55===h?e?this.getShareData():P.default.to(r,"local",c):30===h?((0,E.textToast)(this.data.toastUseText),this.setData({showPop:!1}),this.handleUse(2)):50===h?(0,E.textToast)("优惠券已抢光，明天再来吧~"):60===h&&(0,E.textToast)("来晚啦，活动已结束~")}},tapVipBtn:function(t){var e=t.status,n=t.jumpUrl,a=t.jumpType,o=t.canalName,i=t.toastText;switch(+e){case 1:P.default.to(n,a,o);break;case 2:(0,E.textToast)(i)}},tapDesc:function(t){var e=t.status,n=t.jumpUrl,a=t.jumpType;3!=+e&&4!=+e||P.default.to(n,a)},handleUse:function(t){var e=this;if(10006==+this.data.actId){var n=this.data,a=n.navigationBarHeight,o=n.statusBarHeight;(0,E.findTarget)("express-contain","class",this).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.top,i=n-a-o;i&&i>0&&(0,E.scrollTo)(i);try{var r=e.selectComponent("#compare-price").data.mailInfo,s=r.sender,c=r.receiver;s.hasChanged&&c.hasChanged||(0,E.textToast)("请填写地址信息~")}catch(t){}}))}10007==+this.data.actId&&(0,E.findTarget)("sku-area","class",this).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,n=e;n&&n>0&&(0,E.scrollTo)(n)}));var i=[10002];if(1==+t){var r=this.data.coupon,s=r.isJump,c=r.jumpUrl,u=r.jumpType;i.includes(+this.data.actId)&&s&&c&&u&&P.default.to(c,u)}if(2==+t){var d=this.data.liebianCoupon,l=d.isJump,h=d.jumpUrl,p=d.jumpType;i.includes(+this.data.actId)&&l&&h&&p&&P.default.to(h,p)}},tapPopClose:function(t){var e=t.position,n=this.data.liebianCoupon,a=void 0===n?{}:n;i.$log.send((0,k.default)((0,k.default)({},a),{},{module:"red_packet_close_".concat(e),isNewUser:this.data.isNewUser}),"click"),this.setData({showPop:!1})},tapPopBtn:function(){var t=this.data,e=t.drawCouponToast,n=void 0===e?{}:e,a=t.liebianCoupon,o=void 0===a?{}:a,r=t.isNewUser,s=n.goDarwJumpUrl;i.$log.send((0,k.default)((0,k.default)({},o),{},{module:"red_packet_pop_share",isNewUser:r}),"click"),i.$log.sendNew({module:"newpop"},"click"),this.setData({showPop:!1});var c=getCurrentPages(),u="/"+c[c.length-1].uri;if(s&&s.indexOf(u)>-1)this.tapShareBtn(o,!0);else{var d=this.options.shareAppKey,l=void 0===d?"":d;P.default.to("/homes/share_activity/share_activity?act_id=".concat(this.data.actId,"&enShare=1&shareAppKey=").concat(l),"local")}},tapPopGo:function(){this.setData({showPop:!1});var t=this.data,e=t.activity,n=void 0===e?{}:e,a=t.coupon,o=void 0===a?{}:a,r=t.drawCouponToast,s=void 0===r?{}:r,c=t.isNewUser,u=s||{},d=u.jumpUrl,l=u.jumpType,h=o.couponId,p=n.backPage;i.$log.send((0,k.default)((0,k.default)({},n),{},{module:"red_packet_pop_get",isNewUser:c,couponId:h}),"click"),50!=+o.status&&this.getRedPacketCoupon(h).then((function(){var t=getCurrentPages(),e="/"+t[t.length-1].uri;d&&p&&p!==e&&P.default.to(d,l)}))},loginHandle:function(t){if(i.$log.send({module:"red_packet_login",canalName:this.data.canalName,isLogin:t.isLogin},"click"),"web"!==A.getSystemInfo().platform)t.isLogin?this.redPacketRequestTag||(this.redPacketRequestTag=!0,this.loadRedPacketData()):(0,E.textToast)("登录失败~");else{var e=this.data.defaultShareInfo.path.replace("/","");this.$jump.openNA(e)}},fetchData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(o,i){A.getSysData().then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=Object.assign({zid:r.zid},n),e.$http.get(t,{noTry:a,data:n}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(t)})).catch((function(t){i(t)}))}))}))},loadRedPacketData:function(t){var e=this,n=this.getRedPacketData(t);return n.then((function(){e.refreshData&&e.refreshData()})),this.getRedPacketBackflow(),this.syncRefreshData&&this.syncRefreshData(),n},getRedPacketBackflow:function(){var t=this;return(0,D.default)(_.default.mark((function e(){var n,o,r,s,c,u,d,l;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.options.share_liebian_id)&&A.isLogin()){e.next=3;break}return e.abrupt("return");case 3:return o=t.data,r=o.canalName,s=o.actId,c=o.isNewUser,u=Object.assign({},t.data.liebianCoupon||{},{canalName:r,actId:s,isNewUser:c,liebian_id:n}),i.$log.send((0,k.default)((0,k.default)({},u),{},{module:"red_packet_backflow"}),"display"),delete t.options.share_liebian_id,e.next=9,Promise.all([(0,L.getZidReTry)(),(0,L.getJtData)(O.FENGKONG_PARAMS.CHONGZHI)]).catch((function(){return(0,E.textToast)("请求失败，请稍后再试哦~")}));case 9:(d=e.sent)&&(l={activity_id:"liebianActivity",action:"help",liebian_id:n,zid:d[0],jt:d[1],js_env:"swan"},t.fetchData(t.$api.GET_ACTIVITY,l,!0).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.$log.send((0,k.default)((0,k.default)({},u),{},{module:"red_packet_backflow_s"}),"display"),"10006"===t.data.actId?a((function(){(0,E.textToast)(e.msg,3e3)}),2e3):(0,E.textToast)(e.msg,3e3)})).catch((function(e){i.$log.send((0,k.default)((0,k.default)({},u),{},{module:"red_packet_backflow_e"}),"display"),"10006"===t.data.actId?a((function(){(0,E.textToast)(e.msg||"网络好像有些问题哦~",3e3)}),2e3):(0,E.textToast)(e.msg||"网络好像有些问题哦~",3e3)})));case 11:case"end":return e.stop()}}),e)})))()},getRedPacketCoupon:function(t){var e=this;return new Promise((function(n,a){if(!t)return(0,E.textToast)("好像有些问题哦~"),void a({msg:"好像有些问题哦~"});var o={activity_id:"liebianActivity",action:"draw",act_id:e.data.actId,coupon_id:t};e.fetchData(e.$api.GET_ACTIVITY,o,!0).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.loadRedPacketData(),(0,E.textToast)(t.msg),n(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,E.textToast)(t.msg||"网络好像有些问题哦~"),a(t)}))}))},getShareInfoData:function(t){var e=this;if("web"===A.getSystemInfo().platform)return Promise.resolve();i.$log.send({module:"red_packet_get_share",canalName:this.data.canalName,isNewUser:this.data.isNewUser,actId:this.data.actId},"click"),(0,E.showLoading)("正在加载..."),a((function(){(0,E.hideLoading)()}),2e3);var n=this.options.shareAppKey,o=void 0===n?"":n;return new Promise((function(n,a){var i={shareAppKey:o,activity_id:"liebianActivity",action:"join",act_id:t||e.data.actId};e.fetchData(e.$api.GET_ACTIVITY,i,!0).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setData({shareInfo:t.shareInfo}),n()})).catch((function(t){(0,E.textToast)(t.msg||"网络好像有些问题哦~"),a(t)}))}))},requestRedPacketData:function(t,e,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={shareAppKey:o,activity_id:"liebianActivity",action:"entry",act_id:e,page:n};void 0!==t&&(i.source=N[t]);var r=[this.fetchData(this.$api.GET_ACTIVITY,i,!1)];if(this.cusData&&this.cusData.hasVipCoupon){var s=Object.assign({},i,{action:"vip_coupon"});r.push(this.fetchData(this.$api.GET_DU_VIP_ACTIVITY,s,!1))}return new Promise((function(t,e){Promise.all(r).then((function(e){t(a.handleCouponsData(e))}))}))},getRedPacketData:function(t){var e=this;return new Promise((function(n,a){var o=e.data,r=o.actId,s=o.actPage,c=e.options.shareAppKey,u=void 0===c?"":c,d=null;e.cusData&&e.cusData.redPacketPrefetchPromise?(d=e.cusData.redPacketPrefetchPromise,e.cusData.redPacketPrefetchPromise=null):d=e.requestRedPacketData(t,r,s,u),d.then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isNewUser,o=t.isLogin,r=t.shareInfo,s=t.activity,c=t.entryPageInfo,d=t.coupon,l=void 0===d?{}:d,h=t.liebianCoupon,p=void 0===h?{}:h,f=t.toasts,g=void 0===f?{}:f,m=t.toastStyle,v=t.vipCoupon,w=t.couponNum,b=c&&c.canalName?c.canalName:"",y=g.drawCouponToast,T=g.finishToast,S=g.invalidToast;c.detailJumpUrl="/homes/share_activity/share_activity?act_id=".concat(e.data.actId,"&shareAppKey=").concat(u),c.detailJumpType="local",c.backgroundColor=c.background,c&&c.backgroundImg?c.background=(0,E.adaptBackground)(c.backgroundImg):c&&c.background?c.background=(0,E.adaptBackground)(c.background):!c&&c.backgroundImg||(c.background=(0,E.adaptBackground)("https://b.bdstatic.com/searchbox/icms/searchbox/img/red-packet-bg.png")),m&&m.backgroudColor&&(m.backgroudColor=(0,E.adaptBackground)(m.backgroudColor));var I=!1,C="";if(!(0,E.isEmptyObject)(y)||!(0,E.isEmptyObject)(T)||!(0,E.isEmptyObject)(S)){I=!0;var x="red_packet_show_";(0,E.isEmptyObject)(T)?(0,E.isEmptyObject)(S)?(0,E.isEmptyObject)(y)||(x="".concat(x,"draw"),C="newpop"):(x="".concat(x,"invalid"),C="invitepop"):(x="".concat(x,"finish"),C="invitepop"),i.$log.send((0,k.default)((0,k.default)({},p),{},{module:x,canalName:b,isNewUser:a}),"display")}(0,E.isEmptyObject)(y)||(0,E.isEmptyObject)(T)&&(0,E.isEmptyObject)(S)||(y=null,C="invitepop"),e.compareClacTimeDown(l,p);var _={showPop:I,isNewUser:a,isLogin:o,shareInfo:r,canalName:b,activity:s,entryPageInfo:c,coupon:l,liebianCoupon:p,drawCouponToast:y,finishToast:T,invalidToast:S,toastStyle:m,vipCoupon:v,couponNum:w},D=function(){C&&i.$log.sendNew({module:C},"show")};e.cusData&&e.cusData.redPacketManualSetData?(n(_),e.cusData.redPacketAfterSetData=D):e.setData(_,D)})).catch((function(){a()})).finally((function(){e.redPacketRequestTag=!1}))}))},compareClacTimeDown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=+e.snapUpRemainTime||0,i=+n.snapUpRemainTime||0,r=0;o&&i?r=o<i?o:i:o?r=o:i&&(r=i),r&&r<300&&(clearTimeout(this.redPacketRefreshTimer),this.redPacketRefreshTimer=a((function(){t.refresh()}),1e3*r))},deleteData:function(t){return delete t.currentTarget,delete t.detail,delete t.target,t},handleCouponsData:function(t){var e=0,n=t&&t[0],a=n.coupon,o=void 0===a?{}:a,i=n.liebianCoupon,r=void 0===i?{}:i,s=(t&&t[1]).vipCoupon,c=void 0===s?{}:s;return Object.values({coupon:o,liebianCoupon:r,vipCoupon:c}).forEach((function(t){return Object.keys(t).length&&e++})),Object.assign({},t[0],{vipCoupon:c},{couponNum:e})}}};n.default=R})),window.define("371",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(19)),_=C(t(15)),D=C(t(141)),k=t(26),P=t(40),E=t(31),L=t(372),A=null;Page((0,D.default)({data:{isReady:!1,currentTab:0,tabs:[],isTap:!1,navHeight:(0,k.getTopHeight)(),showBottomLoading:!0,LOG_MODULE:L.LOG_MODULE,HSH_UBC_TYPE:E.HSH_UBC_TYPE},attr:{prefetchPromise:null,intersectionObserver:null,reported:[]},ubcLog:{from:"recharge-second"},allSelectors:[],hasInit:!1,tabsHeaderToTop:0,tabsStickyToTop:0,current:0,onPrefetch:function(t){var e=t.query;this.attr.prefetchPromise=this.fetchData(e)},onInit:function(){this.hasInit||(this.hasInit=!0,this.initData())},onLoad:function(){this.hasInit||(this.hasInit=!0,this.initData())},onErrorPageReload:function(){this.initData()},fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$http.get(this.$api.RECHARGE_SECOND,{data:{key:t.key,city_code:t.cityCode}})},initData:function(){var t=this,e=this.attr.prefetchPromise;e?this.attr.prefetchPromise=null:e=this.fetchData(this.options),e.then((function(e){var n=[];e&&Array.isArray(e.group)&&(n=e.group.map((function(t,e){return{text:t.tab_name,id:e}})));var a={tabs:n.slice(),group:e.group.slice(),showBottomLoading:!1};n=n.slice(0,2),e.group=e.group.slice(0,2),t.setData((0,_.default)({rendered:!0,tabs:n},e),(function(){t.setData(a,(function(){var e=i.createSelectorQuery();t.data.tabs.map((function(n){var a=n.id;n.text;e.select("#tab-".concat(a)).boundingClientRect(),e.exec((function(e){t.allSelectors=e}))})),i.createSelectorQuery().select("#content-list-tabs").boundingClientRect().exec((function(e){e&&e[0]&&(t.tabsHeaderToTop=e[0].height+e[0].top,t.tabsStickyToTop=e[0].height+t.data.navHeight)})),t.createIntersectionObserver()}))}))})).catch((function(e){t.$showErrorPage(e.errType)}))},createIntersectionObserver:function(){this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=i.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport();var t=this.data.group,e=this.attr.reported,n=[];t.forEach((function(t,e){Array.isArray(null==t?void 0:t.value)&&t.value.forEach((function(t,a){n.push("#tabGood-".concat(e,"_").concat(a))}))}));var a=n.join(",");this.attr.intersectionObserver.observe(a,(function(n){var a=n.id.split("tabGood-")[1].split("_"),o=(0,x.default)(a,2),r=o[0],s=o[1];e["".concat(r,"_").concat(s)]||(i.$log.sendNew({tab:t[r].tab_name,module:L.LOG_MODULE.GOODS,title:t[r].value[s].title},"show"),e["".concat(r,"_").concat(s)]=!0)}))},tabHeaderTap:function(t){var e=this,n=t.tap,a=t.index;this.setData({isTap:n},(function(){try{n&&e.setContentScroll(a).then((function(t){e.setData({currentTab:a})}))}catch(t){(0,P.reportJSError)({msg:"充值二级页面-then异常",extra:{error:t,detail:"tabHeaderTap调用"}})}}))},onPageScroll:function(t){var e=this;this.data.tabs.forEach((function(n,a){var o,i,r,s=null===(o=e.allSelectors[a])||void 0===o?void 0:o.top,c=a===e.data.tabs.length-1?null===(i=e.allSelectors[e.data.tabs.length-1])||void 0===i?void 0:i.top:null===(r=e.allSelectors[a+1])||void 0===r?void 0:r.top;if(s<=t.scrollTop+e.tabsStickyToTop&&t.scrollTop+e.tabsStickyToTop<c&&e.current!==a){if(e.data.isTap)return;e.setData({currentTab:a}),e.current=a}}))},setContentScroll:function(t){var e=this;return A&&clearTimeout(A),new Promise((function(n,o){i.pageScrollTo({scrollTop:0===t?e.tabsHeaderToTop-e.tabsStickyToTop+1:e.allSelectors[t].top-e.tabsStickyToTop,duration:0}),A=a((function(){n()}),260)}))}}))})),window.define("372",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_MODULE=void 0;n.LOG_MODULE={GOODS:"goods",TAB:"tab"}})),window.define("375",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(27)),_=I(t(29)),D=t(26),k=I(t(141)),P=(0,t(9).getSystemInfo)();P.navigationBarHeight,P.statusBarHeight;Page((0,k.default)({data:{rendered:!1,showErrorPage:!1,opacity:0,head:null,bannerList:null,swiperCurrent:0,hotList:null,brandList:null,share:null},attr:{prefetchPromise:null},ubcLog:{from:"order_aggregation"},onPrefetch:function(t){var e=t.query;this.options=e,this.attr.prefetchPromise=this.fetchData()},onInit:function(t){this.options=t,this.initData()},onUnload:function(){this.disconnectObserver()},fetchData:function(){var t=i().globalData.location,e=this.options,n=e.cityName,a=e.cityCode;return this.$http.get(this.$api.ORDERFOOD,{data:{city_name:n||t.city,city_code:a||t.cityCode}})},initData:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o,i,r,s,c,u,d,l;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.attr.prefetchPromise)?t.attr.prefetchPromise=null:n=t.fetchData(t.options),e.prev=2,e.next=5,n;case 5:a=e.sent,o=a.head,i=a.hot,r=a.brand,s=a.share,c=a.uniformStyle,o.guideImg=(0,D.gzipImg)(o.guideImg),u=o.banner||[],(0,D.isNonEmptyArray)(u)&&u.forEach((function(t){t.url=(0,D.gzipImg)(t.url)})),d=null,(0,D.isNonEmptyArray)(i)&&(i.forEach((function(t){if(t.icon=(0,D.gzipImg)(t.icon),t.subTitle=t.subTitle.replace("起",""),(0,D.isNonEmptyArray)(t.sku)&&(t.sku=t.sku.slice(0,4),t.sku.forEach((function(t){t.img=(0,D.gzipImg)(t.img)}))),t.coupon){var e=t.coupon.endTime;if(e){e=new Date(e.replace(/-/g,"/")).getTime();var n=(new Date).getTime();t.isShowCoupon=n<e}else t.isShowCoupon=!0}})),d=i.filter((function(t){return(0,D.isNonEmptyArray)(t.sku)&&4===t.sku.length}))),(l=(0,D.isNonEmptyArray)(r)?r:[]).forEach((function(t){t.icon=(0,D.gzipImg)(t.icon)})),t.setData({rendered:!0,showErrorPage:!1,bannerList:u,hotList:d,brandList:l,share:s,head:o,uniformStyle:(0,D.gzipImgList)(c)},(function(){t.connectObserver()})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t.$showErrorPage(e.t0.errType||3);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))()},onErrorPageReload:function(){this.initData()},disconnectObserver:function(){this.intersectionObserver&&this.intersectionObserver.disconnect()},connectObserver:function(){var t=this;this.disconnectObserver(),this.intersectionObserver=o.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport(),this.intersectionObserver.observe(".swiper-item, .hot-container, .brand-item",(function(e){var n=e.dataset,a=n.module,o=n.index,i=t.data,r=i.bannerList,s=i.hotList,c=i.brandList;switch(a){case"swiper":if((0,D.isNonEmptyArray)(r)){var u=r[o];u&&!u.hasSendLog&&(u.hasSendLog=!0,t.sendLog("foodorder_banner","show",{sort:o}))}break;case"hot":if((0,D.isNonEmptyArray)(s)){var d=s[o];d&&!d.hasSendLog&&(d.hasSendLog=!0,t.sendLog("foodorder_specialcard","show",{sort:o,order_title:d.title}))}break;case"brand":if((0,D.isNonEmptyArray)(c)){var l=c[o];l&&!l.hasSendLog&&(l.hasSendLog=!0,t.sendLog("foodorder_normalcard","show",{sort:o,order_title:l.name}))}}}))},onPageScroll:function(t){var e=t.scrollTop>0?1:0;this.setData({opacity:e})},swiperChange:function(t){this.setData({swiperCurrent:t.detail.current})},sendLog:function(t,e,n){o.$log.sendNew((0,C.default)({module:t},n),e)},onShareTap:function(){var t=this.data.share||{},e=t.title,n=t.content,a=t.path,i=t.img,r=(0,D.shareAppMessageUrlPatch)({title:e,content:n,path:a,img:i});this.sendLog("foodorder_share","click"),o.openShare(r)},onShareAppMessage:function(){return(0,D.shareAppMessageUrlPatch)(this.data.share)}}))})),window.define("378",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(19)),_=C(t(27)),D=C(t(29)),k=C(t(16)),P=C(t(15)),E=C(t(141)),L=t(26),A=t(379),O=C(t(14));Page((0,E.default)({attr:{hasInited:!1,allBrandsList:"",interveneBrands:"",unFixedTabBgStyle:"background-image: linear-gradient(180deg, rgba(233, 36, 72, 0.8), rgba(233, 36, 72, 0.8) 70.79%, rgba(233, 36, 72, 0))",fixedTabBgStyle:"background-color: #ff7144",intersectionObserver:"",reported:{},firstShow:!0,prefetchPromise:null,seckillPromise:null},data:{rendered:!1,showErrorPage:!1,pageHeaderShow:!1,tabsBgColor:"transparent",currentTabIndex:0,tabs:[],brandInfo:{},cateInfos:[],cateInfo:{},moreBrand:[],bgColor:"#ff7144",tabBgStyle:"",opacity:0,startTitle:"",remainEndTime:0,isStart:!1,seckillList:[],brandList:[],countdown:{},overTime:{},scrollTop:0,shareInfo:{},bannerImg:(0,L.gzipImg)("http://static.open.baidu.com/media/ch1000/png/dapaicanyin516666.png")},countdown:null,overTime:null,onPrefetch:function(){this.attr.prefetchPromise=this.fetchData(),this.attr.seckillPromise=this.fetchSeckill()},onLoad:function(t){this.attr.hasInited||(this.attr.hasInited=!0,this.initData(t))},onInit:function(t){this.attr.hasInited||(this.attr.hasInited=!0,this.initData(t))},onShow:function(){this.attr.firstShow?this.attr.firstShow=!1:(this.attr.reported={},this.createIntersectionObserver(),this.initSeckillData())},onPageScroll:function(t){var e=t.scrollTop,n=(e/80).toFixed(2),a=n>1?1:n;this.setData({opacity:a,scrollTop:e})},onUnload:function(){clearInterval(this.countdown),clearInterval(this.overTime)},fetchData:function(){return this.$http.get(this.$api.CATE_CLASSIFIED_BRAND,{data:{city_name:r().globalData.location.city}})},fetchSeckill:function(){return this.$http.get(this.$api.SECKILL,{data:{city_name:r().globalData.location.city}})},setTimer:function(t){var e="start"===t?"countdown":"overTime",n=this.data[e],a=n&&n.time;a<=0&&("start"===t?(clearInterval(this.countdown),this.setData({isStart:!0}),this.initTime("end",this.data.remainEndTime)):(clearInterval(this.overTime),this.initSeckillData()));var o=(0,A.formatTimeDown)(a);n=(0,P.default)((0,P.default)((0,P.default)({},n),o),{},{time:a-1}),this.setData((0,k.default)({},e,n))},initTime:function(t,e){var n=this,a="start"===t?"countdown":"overTime",i=(0,A.formatTimeDown)(e);i.time=e,this.setData((0,k.default)({},a,i)),clearInterval(this[a]),this[a]=o((function(){n.setTimer(t)}),1e3)},initSeckillData:function(){var t=this;return(0,D.default)(_.default.mark((function e(){var n;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.attr.seckillPromise)?t.attr.seckillPromise=null:n=t.fetchSeckill(t.options),n.then((function(e){if(e){var n=e.startTitle,a=e.goodsList,o=e.brandList,i=e.remainStartTime,r=e.remainEndTime,s=e.shareInfo,c=0===i;i?t.initTime("start",Math.abs(i)):r&&t.initTime("end",Math.abs(r));var u=t.decorateSeckill(a);t.setData({startTitle:n,remainEndTime:r,isStart:c,seckillList:u,brandList:o,shareInfo:s,seckillFinish:!0})}})).catch((function(t){return Promise.resolve(1)}));case 3:case"end":return e.stop()}}),e)})))()},initData:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,i,r,s,c,u,d,l,h,p,f,g;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=e.attr.prefetchPromise)?e.attr.prefetchPromise=null:a=e.fetchData(e.options),n.next=4,e.initSeckillData();case 4:return n.prev=4,n.next=7,a;case 7:if(o=n.sent,i=o.brandInfo,r=o.cateInfos,s=o.bgColor,c=o.tabColor,u=o.allBrandsList,d=o.interveneBrands,i&&(0,L.isNonEmptyArray)(r)){n.next=17;break}return e.$showErrorPage(),n.abrupt("return");case 17:l=r.map((function(t){var e=t.name;return{text:e,id:e}})),h=0,t&&t.tabName&&-1!==(p=l.findIndex((function(e){return e.text===t.tabName})))&&(h=p),r.forEach((function(t){return t.brandInfo.forEach((function(t,e){var n=t.header,a=t.brandName,o=t.onlineorder,i=t.bubble,r=t.btnName,s=t.desc,c=t.list;n.label&&(n.label="兑换券"+n.label);if(Object.assign(t,{isbigbrand:!1}),i&&i.location>0){var u=i.location-1;c&&c[u]&&(c[u].bubble=i)}c.forEach((function(t,e){Object.assign(t,{btnName:r,desc:s,skuOrder:e,brandTitle:a,isbigbrand:!1})})),o&&o.bubble&&o.buttonName&&(o.bubble+="点餐 到店自提")}))})),e.attr.allBrandsList=u,e.attr.interveneBrands=d,f=e.data.bgColor,g=e.attr.unFixedTabBgStyle,s&&c&&(f=s,e.attr.fixedTabBgStyle="background-color: ".concat(s),e.attr.unFixedTabBgStyle="background-image: ".concat((0,L.adaptBackground)(c)),g=e.attr.unFixedTabBgStyle),e.setData({showErrorPage:!1,brandInfo:i,cateInfos:r,tabs:l,bgColor:f,tabBgStyle:g,currentTabIndex:h,cateInfo:r[h]},(function(){e.setData({rendered:!0}),e.createIntersectionObserver()})),n.next=32;break;case 29:n.prev=29,n.t0=n.catch(4),e.$showErrorPage(n.t0.errType||3);case 32:case"end":return n.stop()}}),n,null,[[4,29]])})))()},onErrorPageReload:function(){var t=this;this.setData({rendered:!1},(function(){t.initData()}))},onTabsHeaderFixed:function(t){var e=t.fixed;this.setData({tabFixed:e,tabsBgColor:e?this.data.bgColor:"transparent"})},onTabsHeaderTap:function(t){var e=this,n=t.index;if(t.tap){var a=this.data,o=a.currentTabIndex,i=a.cateInfos;o!==n&&n<i.length&&this.setData({currentTabIndex:n,cateInfo:i[n]},(function(){var t=e.attr.reported;e.attr.reported={banner:!!t.banner,morebrand:!!t.morebrand},e.createIntersectionObserver()}))}},createIntersectionObserver:function(){this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=i.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport();var t=this.attr.reported;this.attr.intersectionObserver.observe("#page-header-image, .card, .seckill-item, .brand-item",(function(e){var n=e.dataset,a=n.module,o=n.title,r=n.isbigbrand,s=n.activityid,c=n.index,u=n.id,d=a,l={module:a};switch(a){case"brand":d=a+o,Object.assign(l,{title:o,isbigbrand:r});break;case"banner":Object.assign(l,{avtivity_id:s});break;case"timelimitgoods":d=a+c,Object.assign(l,{skuid:u,order:c,goods_title:o});break;case"foodbrand_select":d=a+c,Object.assign(l,{order:c,title:o})}t[d]||(i.$log.sendNew(l,"show"),t[d]=!0)}))},decorateSeckill:function(t){var e=[];if(Array.isArray(t)&&t.length)for(var n=Math.min(3*Math.floor(t.length/3),9),a=t.splice(0,n).map((function(t){var e=t.price,n=t.originPrice,a=t.bubbleText,o=t.bubbleColor,i=t.img,r=t.title,s=t.jumpType,c=t.jumpUrl,u=t.percent,d=t.id,l=e&&parseFloat(e/100).toFixed(1).toString(),h=null==l?void 0:l.split("."),p=(0,x.default)(h,2),f=p[0],g=p[1],m=n&&parseFloat(n/100).toFixed(1),v="已抢".concat(100==+t.percent?"光":t.percent+"%");return{bubbleText:a,bubbleColor:o,img:i,title:r,jumpType:s,jumpUrl:c,percent:u,priceInt:f,priceFloat:g,originPrice:parseFloat(m),processDesc:v,id:d}})),o=0;o<a.length;o+=3)e.push(a.slice(o,o+3));return e},handelGoodsItem:function(t){this.data.isStart?this.data.isStart&&100===t.currentTarget.dataset.percent?i.showToast({icon:"none",title:"商品已售罄"}):O.default.withEvent(t):i.showToast({icon:"none",title:"秒杀未开始"})},onShare:function(){var t=(0,L.shareAppMessageUrlPatch)(this.data.shareInfo);i.openShare(t)},onShareAppMessage:function(){return(0,L.shareAppMessageUrlPatch)(this.data.shareInfo)}}))})),window.define("379",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.formatTimeDown=n.preFixZero=n.getDate=n.formatDate=void 0;var I=["日","一","二","三","四","五","六"];n.formatDate=function(t){var e=new Date(t),n=(new Date).getTime(),a=e.getMonth()+1,o=e.getDate(),i=e.getDay(),r=parseInt((t+864e5-n)/864e5,10);return{status:r>5?"":["今天","明天","后天"][r]||"星期"+I[i],dayStr:r>5?"".concat(a,"月").concat(o,"日"):"(".concat(a,"月").concat(o,"日)"),timeStamp:t}};n.getDate=function(t){if(t&&Date.parse(t)){var e=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0".concat(n):n;var a=t.getDate();return a=a<10?"0".concat(a):a,"".concat(e,"-").concat(n,"-").concat(a)}};var C=function(t){return t>=10?"".concat(t):"0".concat(t)};n.preFixZero=C;n.formatTimeDown=function(t){var e=Math.floor(t/86400),n=Math.floor(t/3600%24),a=Math.floor(t/60)%60,o=Math.floor(t%60);return{days:0===e?0:C(e),hours:0===e&&0===n?0:C(n),minutes:0===e&&0===n&&0===a?0:C(a),seconds:C(o)}}})),window.define("382",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x,_,D,k,P,E,L,A,O=t(10),N=O(t(15)),R=O(t(27)),B=O(t(19)),j=O(t(29)),U=O(t(157)),M=O(t(16)),F=O(t(141)),H=O(t(14)),G=t(9),$=t(383),q=t(26),V=t(40),Y=1,z=7,W=2,K=6,J=3,Q=8,X=5,Z=4,tt={GOTO_GET:6,GOTO_USE:5},et=0,nt=1,at=2,ot=3,it=4,rt={MONTHLY:"1",WEEKLY:"2",DAILY:"3",COIN_EXCHANGE:"4",PAY:"5",COMMUNITY:"6"},st={1:"MONTHLY",2:"WEEKLY",3:"DAILY",4:"COIN_EXCHANGE",5:"PAY",6:"COMMUNITY"},ct={PINK:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png",MEDIUM_PINK:"https://scenter.cdn.bcebos.com/hsh/coupon-bg-medium-pink.png",MINI_PINK:"https://scenter.cdn.bcebos.com/hsh/coupon-bg-mini-pink.png",GRAY:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-gray.png",MEDIUM_GRAY:"https://scenter.cdn.bcebos.com/coupon-bg-medium-gray-v2.png",MINI_GRAY:"https://scenter.cdn.bcebos.com/coupon-bg-mini-gray-v2.png",RED:"https://scenter.cdn.bcebos.com/operation_page/monthly-coupon-bg.png",BTN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/red-packet.png",PLAIN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/plain-packet2.png"},ut="transparent",dt="#f30",lt="#fff",ht="#858585",pt="#FD503E",ft="rgba(133, 133, 133, .16)",gt="rgba(253, 80, 62, .16)",mt="#b8b8b8",vt={NONE:"",RECEIVED:"https://scenter.cdn.bcebos.com/operation_page/seal-get-red.png",USED:"https://scenter.cdn.bcebos.com/operation_page/seal-used-gray.png",EMPTY:"https://scenter.cdn.bcebos.com/operation_page/seal-empty-gray.png",RECEIVED_WHITE:"https://scenter.cdn.bcebos.com/operation_page/seal-get-white.png"},wt="normalBgImg",bt="mediumBgImg",yt="miniBgImg",Tt=(x={},(0,M.default)(x,rt.MONTHLY,"waimai18"),(0,M.default)(x,rt.WEEKLY,"waimaiweekCoupons"),(0,M.default)(x,rt.DAILY,"waimaieverydayCoupons"),(0,M.default)(x,rt.COIN_EXCHANGE,"waimaishenghuobiCoupons"),(0,M.default)(x,rt.PAY,"waimaifufeiCoupons"),(0,M.default)(x,rt.COMMUNITY,"waimaishequnCoupons"),x),St=(_={},(0,M.default)(_,Y,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.NONE}),(0,M.default)(_,K,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusImgUrl:vt.NONE,showCountdown:!0}),(0,M.default)(_,X,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:dt,btnBg:lt,statusImgUrl:vt.RECEIVED_WHITE,showCountdown:!0}),(0,M.default)(_,Z,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:ut,btnBg:lt,statusImgUrl:vt.RECEIVED_WHITE}),_),It=(A={},(0,M.default)(A,rt.MONTHLY,(D={},(0,M.default)(D,Y,{bgImg:ct.RED,contentTextColor:lt,btnTextColor:lt,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.NONE}),(0,M.default)(D,K,{bgImg:ct.RED,contentTextColor:lt,btnTextColor:dt,btnBorderColor:ut,btnBg:lt,statusImgUrl:vt.NONE,showCountdown:!0}),(0,M.default)(D,X,{bgImg:ct.RED,contentTextColor:lt,btnTextColor:dt,btnBorderColor:ut,btnBg:lt,statusImgUrl:vt.RECEIVED_WHITE,showCountdown:!0}),(0,M.default)(D,Z,{bgImg:ct.RED,contentTextColor:lt,btnTextColor:dt,btnBorderColor:ut,btnBg:lt,statusImgUrl:vt.RECEIVED_WHITE}),(0,M.default)(D,J,{bgImg:ct.GRAY,contentTextColor:ht,btnTextColor:ut,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.USED}),(0,M.default)(D,z,{bgImg:ct.GRAY,contentTextColor:ht,btnTextColor:ut,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.EMPTY}),D)),(0,M.default)(A,rt.WEEKLY,(k={},(0,M.default)(k,Y,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.NONE}),(0,M.default)(k,K,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusImgUrl:vt.NONE,showProgress:!0}),(0,M.default)(k,X,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:dt,btnBg:lt,statusImgUrl:vt.RECEIVED,showProgress:!1}),(0,M.default)(k,J,{bgImg:ct.GRAY,contentTextColor:ht,btnTextColor:ut,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.USED}),(0,M.default)(k,z,{bgImg:ct.GRAY,contentTextColor:ht,btnTextColor:ut,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.EMPTY}),k)),(0,M.default)(A,rt.DAILY,(P={},(0,M.default)(P,Y,{normalBgImg:ct.PINK,mediumBgImg:ct.MEDIUM_PINK,miniBgImg:ct.MINI_PINK,contentTextColor:pt,couponNumBgColor:gt,couponNumColor:pt,opacity:".3"}),(0,M.default)(P,K,{normalBgImg:ct.PINK,mediumBgImg:ct.MEDIUM_PINK,miniBgImg:ct.MINI_PINK,contentTextColor:pt,couponNumBgColor:gt,couponNumColor:pt,opacity:"1"}),(0,M.default)(P,X,{normalBgImg:ct.PINK,mediumBgImg:ct.MEDIUM_PINK,miniBgImg:ct.MINI_PINK,contentTextColor:pt,statusImgUrl:vt.RECEIVED,couponNumBgColor:gt,couponNumColor:pt,opacity:"1"}),(0,M.default)(P,J,{normalBgImg:ct.GRAY,mediumBgImg:ct.MEDIUM_GRAY,miniBgImg:ct.MINI_GRAY,contentTextColor:ht,statusImgUrl:vt.USED,couponNumBgColor:ft,couponNumColor:mt,opacity:".3"}),(0,M.default)(P,z,{normalBgImg:ct.GRAY,mediumBgImg:ct.MEDIUM_GRAY,miniBgImg:ct.MINI_GRAY,contentTextColor:ht,statusImgUrl:vt.NONE,couponNumBgColor:ft,couponNumColor:mt,opacity:".3"}),(0,M.default)(P,W,{normalBgImg:ct.GRAY,mediumBgImg:ct.MEDIUM_GRAY,miniBgImg:ct.MINI_GRAY,contentTextColor:ht,statusImgUrl:vt.NONE,couponNumBgColor:ft,couponNumColor:mt,opacity:".3"}),P)),(0,M.default)(A,rt.COIN_EXCHANGE,(E={},(0,M.default)(E,et,{opacity:"1",skuStyle:!0,bgImg:ct.PINK,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusImgUrl:vt.NONE}),(0,M.default)(E,ot,{opacity:"1",skuStyle:!0,bgImg:ct.PINK,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusImgUrl:vt.NONE}),(0,M.default)(E,nt,{opacity:"1",skuStyle:!0,bgImg:ct.PINK,btnTextColor:dt,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.NONE}),(0,M.default)(E,at,{opacity:"0.3",skuStyle:!0,bgImg:ct.GRAY,btnTextColor:ut,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.EMPTY}),(0,M.default)(E,it,{opacity:"1",skuStyle:!0,bgImg:ct.PINK,btnTextColor:dt,btnBorderColor:ut,btnBg:ut,statusImgUrl:vt.NONE}),E)),(0,M.default)(A,rt.PAY,(0,M.default)({},K,{opacity:"1",skuStyle:!0,bgImg:ct.PINK,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusName:"立即抢购",statusImgUrl:vt.NONE})),(0,M.default)(A,rt.COMMUNITY,(L={},(0,M.default)(L,K,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:lt,btnBorderColor:ut,btnBg:dt,statusImgUrl:vt.NONE,showProgress:!0}),(0,M.default)(L,X,{bgImg:ct.PINK,contentTextColor:dt,btnTextColor:dt,btnBorderColor:dt,btnBg:lt,statusImgUrl:vt.RECEIVED,showProgress:!1}),L)),A),Ct=(0,G.isLogin)();Page((0,F.default)({attr:{hasInited:!1,firstShow:!0,brand:"meituan",firstCardTop:0,intersectionObserver:null,hasShow:!1,isActTask:!1},data:{rendered:!1,showErrorPage:!1,modules:[],pageInfo:{},newUserModule:{},fixHeader:!1,perImgList:[].concat((0,U.default)(Object.values(ct)),(0,U.default)(Object.values(vt))),showBottomLoading:!0,opacity:0,BROAD_IMG:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2966228317,3623265130&fm=179&app=35&f=PNG?w=54&h=54&s=67B5C26E167C3E36E0C69EA903003019",notice:{},isShowBroadcast:!1,isLogin:Ct,btnList:[]},newUserTimer:null,onInit:function(t){this.setData({isRepurchase:null==t?void 0:t.isRepurchase}),this.attr.hasInited||(this.attr.brand=t.brand||this.attr.brand,this.attr.hasInited=!0,this.getCoupon=(0,q.throttle)(this._getCoupon.bind(this),500,!0),this.getNewUserCoupon=(0,q.throttle)(this._getNewUserCoupon.bind(this),500,!0),this.initTask(t),this.initData(),this.handleFetchMeiTuanAuth(),s().event.on("appClose",this.onAppClose,this),r.setBackgroundColor({backgroundColor:"#f2f3f5"}))},onLoad:function(t){this.attr.hasInited||(this.attr.brand=t.brand||this.attr.brand,this.attr.hasInited=!0,this.initData())},onHide:function(){$.taskSupplier.execute({command:"pause",aid:[814]})},onShow:function(){this.attr.firstShow?this.attr.firstShow=!1:($.taskSupplier.execute({command:"start",aid:[814]}),this.data.showErrorPage||(this.attr.hasShow=!0,this.initData(!0)),this.createIntersectionObserver(),this.handleFetchMeiTuanAuth())},handlePopupWindow:function(t){var e=this,n=(0,G.isLogin)();this.setData({isLogin:n,showPopup:(0,q.isNonEmptyArray)(null==t?void 0:t.coupons)||!1,popupData:t||{}},(function(){e.data.showPopup&&e.syncPopup()}))},initTask:function(t){try{var e=t.task||"{}",n=JSON.parse(decodeURIComponent(e));this.options.taskObj=n;var a=(null==n?void 0:n.actId)&&(null==n?void 0:n.taskId);this.attr.isActTask=a,(0,$.initTaskSupplier)(Object.assign(t,n),{noJump:a})}catch(t){}},handleTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.finished,o=e.toastIcon,i=e.toastText,r=e.popupImage,s=e.appCloseTitle,c=e.appCloseContent,u={finished:n,toastIcon:o,toastText:i,popupImage:r,appCloseTitle:s,appCloseContent:c};1===n?(this.finishTast({finished:n}),this.setData({taskInfo:u})):0===n&&(u.isShowToast=!0,this.setData({taskInfo:u},(function(){a((function(){u.isShowToast=!1,t.setData({taskInfo:u})}),3e3)})))},finishTast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&1===t.finished&&$.taskSupplier.execute({command:"action",aid:[871]})},ugTaskBackHandle:function(t){if(this.attr.isActTask){var e=this.data.taskInfo||{};e.isShowPopup=!0,e.popupLink=t.data.backBtn.schema,this.setData({taskInfo:e})}},onPopupClickMask:function(){var t=this.data.taskInfo||{};t.isShowPopup=!1,this.setData({taskInfo:t})},onPopupClickPopup:function(){var t=(this.data.taskInfo||{}).popupLink;t&&H.default.to(t,"box")},onUnload:function(){clearInterval(this.newUserTimer)},onAppClose:function(){var t=this.data.taskInfo||{},e=t.finished,n=t.appCloseTitle,a=t.appCloseContent;0===e&&r.showModal({title:n,content:a,confirmText:"残忍离开",cancelText:"取消",success:function(t){t.confirm&&r.exit()}})},initData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,j.default)(R.default.mark((function n(){var a,o,i,c,u,d,l,h,p,f,g,m,v,w,b,y,T;return R.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=[{text:"分享",eventType:"share"}],o=t.getPageData(t.attr.brand),i=(0,B.default)(o,3),c=i[0],u=i[1],d=i[2],n.next=6,Promise.all([c,d]);case 6:return l=n.sent,h=l&&l[1],p=l&&l[0]||{},f=p.pageInfo,g=p.module_info,m=p.popupWindow,v=p.uniformStyle,null!=(w=p.newUserModule)&&w.show&&(Object.keys(St).forEach((function(t){It[rt.MONTHLY][t]=St[t]})),r.$log.sendNew({module:"waimainew",batch_id:null===(b=w.coupon)||void 0===b?void 0:b.id},"show")),t.setData({authList:h}),t.handlePopupWindow(m),n.next=14,t.handleCoinModule(u,g,e,!0);case 14:(y=n.sent).forEach((function(e){return t.handleModule(e)})),f.coupon_bag&&a.unshift({text:"券包",eventType:"coupon"}),f.rule_info&&(0,q.isNonEmptyArray)(f.rule_info.rule)&&(a.push({text:"规则",eventType:"rule"}),f.rule_info.rule.forEach((function(t){t.paragraphs=t.content.split("brbr")}))),f.task&&t.handleTask(f.task),s().globalData.meituanCouponPageRule=f.rule_info,T={},e||(T={modules:y.slice(),showBottomLoading:!1},y=y.slice(0,3)),t.setData({rendered:!0,showErrorPage:!1,modules:y,pageInfo:f,btnList:a,uniformStyle:(0,q.gzipImgList)(v),newUserModule:w},(0,j.default)(R.default.mark((function n(){return R.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e||$.taskSupplier.execute({command:"start",aid:[814]}),t.attr.firstCardTop||r.createSelectorQuery().select(".before-first-card").boundingClientRect().exec((function(e){e[0]&&e[0].top&&(t.attr.firstCardTop=e[0].top)})),n.next=4,t.handleCoinModule(u,g,e,!1);case 4:y=n.sent,t.setData(Object.assign(T,{modules:y}),(function(){!e&&t.createIntersectionObserver()})),t.handleNewUserCountdown();case 7:case"end":return n.stop()}}),n)})))),n.next=29;break;case 25:n.prev=25,n.t0=n.catch(0),(0,V.reportError)({type:V.errorType.COUPON_PAGE_ERROR,msg:"优惠券页面调用同步接口异常",extra:{error:n.t0 instanceof Error?n.t0.message:n.t0}}),!e&&t.$showErrorPage(n.t0.errType||3);case 29:case"end":return n.stop()}}),n,null,[[0,25]])})))()},handleNewUserCountdown:function(){var t=this;if(this.data.newUserModule.show&&this.data.isLogin){clearInterval(this.newUserTimer);var e=this.data.newUserModule.coupon.countdown,n=function(){if(0!==--e){var n=(0,q.formatSecond)(e),a=n.days,o=n.hours,i=n.minutes,r=n.seconds,s="";a&&(s+="".concat(a,"天")),s+="".concat(o,":").concat(i,":").concat(r),Object.assign(t.data.newUserModule.coupon,{countdownText:s}),t.setData({newUserModule:t.data.newUserModule,isDays:Boolean(a)})}else t.initData(!0)};this.newUserTimer=o((function(){n()}),1e3),n()}},handleCoinModule:function(t,e,n,a){var o=this;return(0,j.default)(R.default.mark((function i(){var r,s,c;return R.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(n&&a||!n&&!a)){i.next=6;break}return i.next=3,t.catch((function(){return null}));case 3:r=i.sent,(s=e.find((function(t){return t.type===rt.COIN_EXCHANGE})))&&(r?(Object.assign(s,r),!a&&o.handleModule(s)):n&&(0,q.isNonEmptyArray)(o.data.modules)&&(c=o.data.modules.find((function(t){return t.type===rt.COIN_EXCHANGE})))&&Object.assign(s,c));case 6:return i.abrupt("return",e.filter((function(t){return t.title&&t.type&&t.indexImg&&(0,q.isNonEmptyArray)(t.coupon)})));case 7:case"end":return i.stop()}}),i)})))()},handleModule:function(t){var e,n=this;if(t.couponType=st[t.type],t.opacity=null===(e=It[t.type][t.status])||void 0===e?void 0:e.opacity,t.type===rt.DAILY){t.coupon=t.coupon.slice(0,6);var a=t.coupon.length;4===a?(t.coupon.forEach((function(t,e){0===e?(t.size=wt,t.style="coupon-wrap-medium"):(t.size=yt,t.style="coupon-wrap-mini")})),t.normalCoupon=t.coupon[0],t.littleCoupon=t.coupon.slice(1)):2===a?t.coupon.forEach((function(t){t.size=bt,t.style="coupon-wrap-medium"})):3===a||6===a?t.coupon.forEach((function(t){t.size=yt,t.style="coupon-wrap-mini"})):5===a&&t.coupon.forEach((function(t,e){t.size=0===e||2===e?bt:yt,t.style=e<2?"coupon-wrap-medium":"coupon-wrap-mini"}))}(0,q.isNonEmptyArray)(t.coupon)&&t.coupon.forEach((function(e){e.shouldLoginOutsideBtn=n.shouldLoginOutsideBtn(t.type,e.status),e.buttonType=n.getCouponButtonType(e),Object.assign(e,n.getCouponConfig(t.type,e.status)),t.type===rt.PAY&&(e.price=+e.price/100),e.smallPadding=!1,t.type===rt.MONTHLY&&(e.smallPadding=e.showCountdown&&e.finalTime>0),t.type!==rt.WEEKLY&&t.type!==rt.COMMUNITY||(e.smallPadding=e.showProgress&&e.process>0)}))},getCouponButtonType:function(t){if(!this.data.isLogin&&t.status===K)return"getPhoneNumber";var e=this.data.authList||{},n=(0,q.getAppKey)(t.jumpType,t.jumpUrl);return 1===e[n]||"OH9cGOCgFeij1gmQ8B4TP2pLL3NVLP1n"===n?"login":"getPhoneNumber"},handleFetchMeiTuanAuth:function(){var t=this;return(0,j.default)(R.default.mark((function e(){var n;return R.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.$api.XCX_AUTH,{data:{brand:"meituan"}});case 2:(n=e.sent)&&t.setData({isShowBroadcast:0===n.status,notice:n.notice,window:n.window});case 4:case"end":return e.stop()}}),e)})))()},getCommonRequestParams:function(){var t,e=getCurrentPages(),n=s().globalData,a=n.xfrom,o=n.sfrom,i=(null===(t=this.options)||void 0===t?void 0:t.taskObj)||{},r=i.actId,c=i.taskId;return{path:e[e.length-1].uri,sfrom:o,xfrom:a,actId:r,taskId:c}},getPageData:function(t){var e=this,n=this.getCommonRequestParams(),a=[this.$api.COUPON_PAGE_INFO,this.$api.COUPON_PAGE_COIN].map(function(){var a=(0,j.default)(R.default.mark((function a(o,i){var r,s,c;return R.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,G.getSysData)();case 2:return r=a.sent,s=r.zid,c={zid:s,brand:t||e.attr.brand,sfrom:e.options.sfrom},0===i&&Object.assign(c,n),a.abrupt("return",e.$http.get(o,{data:c}));case 7:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}());return a.push(this.$http.get(this.$api.THIRD_AUTH_LIST,{data:{path:this.route}})),a},_getNewUserCoupon:function(t){var e=this;return(0,j.default)(R.default.mark((function n(){var a,o,i,s;return R.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r.showLoading({title:"领券中...",mask:!0}),n.next=4,(0,G.getSysData)();case 4:return a=n.sent,o=a.zid,n.next=8,e.$http.get(e.$api.COUPON_NEWUSER_GET,{data:{zid:o,coupon:t}});case 8:if(0===(i=n.sent).code){n.next=11;break}throw Error(i.msg);case 11:return n.next=13,e.$http.get(e.$api.COUPON_NEWUSER,{data:{coupon:t}});case 13:s=n.sent,e.setData({newUserModule:s}),r.hideLoading(),e.toast(i.msg||"领券成功"),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(0),r.hideLoading(),e.toast("领券失败");case 23:case"end":return n.stop()}}),n,null,[[0,19]])})))()},_getCoupon:function(t,e){var n=this;return(0,j.default)(R.default.mark((function a(){var o,i,s,c,u,d,l,h,p,f,g,m,v,w;return R.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r.showLoading({title:"领券中...",mask:!0}),a.next=4,(0,G.getSysData)();case 4:return i=a.sent,s=i.zid,a.next=8,n.getCommonRequestParams();case 8:return c=a.sent,u=n.$api.COUPON_PAGE_GET,d="couponName",l=e.couponName,t===rt.DAILY&&(u=n.$api.COUPON_ALL_PAGE_GET,d="couponName2num",l={},e.coupon.forEach((function(t){l[t.couponName]=t.max_num})),l=JSON.stringify(l)),a.next=15,n.$http.get(u,{data:(0,N.default)((o={},(0,M.default)(o,d,l),(0,M.default)(o,"moduleType",t),(0,M.default)(o,"brand",n.attr.brand),(0,M.default)(o,"zid",s),o),c)});case 15:h=a.sent,t===rt.DAILY?(f=h.couponName2num,g=Object.keys(f),Object.assign(e,h),e.opacity=null===(p=It[e.type][e.status])||void 0===p?void 0:p.opacity,e.coupon.forEach((function(e){if(g.includes(e.couponName)){var a=n.getCouponConfig(t,f[e.couponName].status);Object.assign(e,f[e.couponName],a)}}))):Object.assign(e,h,n.getCouponConfig(t,h.status)),n.setData({modules:n.data.modules},(function(){r.hideLoading(),n.finishTast(h),n.toast(h.toast||"领券成功"),t!==rt.MONTHLY&&e.status!==X&&(0,V.reportError)({type:V.errorType.COUPON_PAGE_GET_ERROR,msg:"优惠券页面领券接口状态流转错误",extra:{coupon:e,res:h}})})),a.next=34;break;case 20:a.prev=20,a.t0=a.catch(0),r.hideLoading(),m=+a.t0.code,v=!1,w=90005300;case 26:if(!(w<=90005309)){a.next=33;break}if(m!==w){a.next=30;break}return v=!0,a.abrupt("break",33);case 30:w++,a.next=26;break;case 33:n.toast(v&&a.t0.msg||"领券失败");case 34:case"end":return a.stop()}}),a,null,[[0,20]])})))()},onErrorPageReload:function(){this.initData()},sendLog:function(t,e,n){t===rt.DAILY?r.$log.sendNew({module:Tt[t],status:e.status},"click"):r.$log.sendNew({module:Tt[t],order:n+1,batch_id:e.couponName},"click")},getPhoneNumber:function(t){var e=this;return(0,j.default)(R.default.mark((function n(){var a,o,i,r,s,c,u,d,l,h;return R.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.data.isLogin,r=(0,G.isLogin)(),s=t.couponData,c=s.dataIsBtnTap,u=s.dataCouponType,d=s.dataCouponIndex,l=s.dataUseCButtonLogin,!1!==i||!0!==r){n.next=6;break}return n.next=6,e.initData(!0);case 6:"getPhoneNumber:ok"===(null===(a=t.detail)||void 0===a||null===(o=a.detail)||void 0===o?void 0:o.errMsg)&&(h=e.data.modules.map((function(t){return null==t||t.coupon.forEach((function(t){return"getPhoneNumber"===t.buttonType&&(t.buttonType="login"),t})),t})),e.setData({modules:h,isShowBroadcast:!1})),e.onCouponTap({currentTarget:{dataset:{isBtnTap:c,couponType:u,couponIndex:d,useCButtonLogin:l}},loginInfo:{errMsg:r?"login:ok":""}});case 8:case"end":return n.stop()}}),n)})))()},newUserJump:function(t){var e;if(r.$log.sendNew({module:"waimainew",batch_id:null===(e=this.data.newUserModule.coupon)||void 0===e?void 0:e.id},"click"),"web"!==s().globalData.systemInfo.platform){if(t.isLogin){if(t.isLogin&&t.change)return this.setData({isShowBroadcast:!1}),void this.initData(!0);if(this.data.newUserModule.coupon){var n=this.data.newUserModule.coupon,a=n.jump,o=n.jump_link,i=n.id;a?H.default.to(o.jumpUrl,o.jumpType):this.getNewUserCoupon(i)}}}else this.$jump.openNA("homes/coupon_page/index?sfrom=shareUrl&source=shareUrl")},onCouponTap:function(t){if("web"!==s().globalData.systemInfo.platform){var e=t.currentTarget.dataset,n=e.couponType,a=e.couponIndex,o=e.useCButtonLogin,i=e.isBtnTap,r=this.data.modules,c=n===rt.DAILY?r.find((function(t){return t.type===n})):r.find((function(t){return t.type===n})).coupon[a],u=[rt.PAY,rt.COIN_EXCHANGE].includes(n),d=!this.isFreeCouponStatusValid(c.status);if(i||u||d){if(this.sendLog(n,c,a),n!==rt.PAY)if(!this.checkLoginState(t,o))return;if(u)H.default.to(c.jumpUrl,c.jumpType);else if(d)c.toast&&this.toast(c.toast);else if(i)if(this.isFreeCouponJump(c.status))H.default.to(c.jumpUrl,c.jumpType);else if(this.isFreeCouponGet(c.status)){if(n===rt.COMMUNITY)return void H.default.to(c.jumpUrl,c.jumpType);this.getCoupon(n,c)}}}else this.$jump.openNA("homes/coupon_page/index?sfrom=shareUrl&source=shareUrl")},onBtnTap:function(t){var e=t.eventType;"coupon"===e?this.onCouponBagTap():"share"===e?this.onShareTap():"rule"===e&&this.onRuleTap()},onRuleTap:function(){r.$log.sendNew({module:"more"},"click"),H.default.to("/homes/coupon_rule/index","local")},onCouponBagTap:function(){var t=this.data.pageInfo.coupon_bag,e=t.jump_type,n=t.jump_url;r.$log.sendNew({module:"more"},"click"),H.default.to(n,e)},generateShareData:function(){var t=this.data.pageInfo.share_info,e=t.title,n=t.content,a=t.path,o=t.image_url;return(0,q.shareAppMessageUrlPatch)({title:e,content:n,path:a,imageUrl:o})},onShareTap:function(){var t=this.generateShareData();r.$log.sendNew({module:"waimaishare"},"click"),r.openShare(t)},onShareAppMessage:function(){return this.generateShareData()},onPageScroll:function(t){var e=t.scrollTop,n=e>0?1:0;this.setData({opacity:n});var a=this.data,o=a.statusBarHeight,i=a.navigationBarHeight,r=a.fixHeader,s=e>=this.attr.firstCardTop-o-i;s&&!r?this.setData({fixHeader:!0}):!s&&r&&this.setData({fixHeader:!1})},toast:function(t){r.showToast({title:t,icon:"none"})},getCouponConfig:function(t,e){return t!==rt.COIN_EXCHANGE&&(e===W&&(e=z),e===Q&&(e=J)),t===rt.PAY&&(e=K),(It[t]||{})[e]||{}},isFreeCouponStatusValid:function(t){return Object.values(tt).includes(t)},isFreeCouponJump:function(t){return t===X},isFreeCouponGet:function(t){return t===K},shouldLoginOutsideBtn:function(t,e){return t!==rt.PAY&&(t===rt.COIN_EXCHANGE||!this.isFreeCouponStatusValid(e||t===rt.DAILY))},checkLoginState:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isLogin:!1,change:!1};return e?(n.isLogin=t.isLogin,n.change=t.change):(n.isLogin=t.loginInfo&&"login:ok"===t.loginInfo.errMsg,n.isLogin&&!Ct&&(n.change=!0,Ct=!0)),!!n.isLogin&&(!n.isLogin||!n.change||(this.initData(!0),!1))},createIntersectionObserver:function(){var t={};this.attr.intersectionObserver&&this.attr.intersectionObserver.disconnect(),this.attr.intersectionObserver=r.createIntersectionObserver(this,{thresholds:[.9],selectAll:!0}).relativeToViewport(),this.attr.intersectionObserver.observe(".coupon, .red-packet-box, .get-coin",(function(e){var n=e.dataset.set,a=n.couponType,o=n.couponIndex,i=n.couponName,s="".concat(a).concat(o);if(!t[s]){var c="shenghuobi"===a,u=c?a:Tt[a];r.$log.sendNew(Object.assign({module:u,batch_id:i},c?{}:{order:o+1}),"show"),t[s]=!0}}))},syncPopup:function(){this.$http.get(this.$api.COUPON_SYNC_POPUP,{data:{sfrom:this.options.sfrom}})},loginSucess:function(){this.attr.hasShow||(this.initData(!0),this.handleFetchMeiTuanAuth())}}))})),window.define("383",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initTaskSupplier=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{I.taskSupplier.init({query:{taskInfo:t.taskInfo},sdkConfig:Object.assign({},{useBdtls:!0,secretMap:x},e)})}catch(e){(0,C.reportError)({type:C.errorType.INIT_TASK_ERROR,msg:"初始化任务中台失败",extra:{taskInfo:t.taskInfo}})}},n.canDoTask=_,n.executeTask=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];_(t,n,a)&&I.taskSupplier.execute({command:e,aid:t})},Object.defineProperty(n,"taskSupplier",{enumerable:!0,get:function(){return I.taskSupplier}});var I=t(224),C=t(40),x={600:"fxVSVLOKjNlnavX9pEEwWQzlc1LBgL7P",354:"6495656b-0eba-3c4c-7a0b-7c2075f67202",452:"a8fbe10a-b5dc-d507-bc8e-454389c0a101",778:"Qzf9qFqY9oDLrFOKx+WDpYZJCwr2krdEh1xy8wymGbU=",771:"4Ad+4rZwwNaJ9u7c7z9iaZEhIKl+s2yElia4sfSn1G4=",814:"RRjA5I1egG/ofczV9eR+sTRfmZqt7RXX8mIsOGyMHyw=",871:"u2q9nCMRYJPx0z+Ifx0Xs7mEujXNrQZBm+4uSnJV/xs="};function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.isComplete,o=e.taskInfo;return I.taskSupplier.isTaskUser({id:t})&&(!a||"0"===a)&&(!n||o)}})),window.define("386",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141));Page((0,I.default)({data:{couponRule:i().globalData.meituanCouponPageRule}}))})),window.define("389",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(27)),_=C(t(29)),D=C(t(15)),k=C(t(141)),P=C(t(390)),E=t(9),L=t(26),A=t(256),O=t(383),N=C(t(368)),R=(0,L.cloneDeep)(N.default.generateConfig);R.baseConfig.backgroundImg="https://express-server.bj.bcebos.com/liebian/shareimg.jpg";var B=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,j=null,U=null,M={title:"上百度优惠充话费",content:"惠生活充话费单单995折，点击立即充值",path:"channels/recharge/pages/index/index?sfrom=shareUrl&source=shareUrl"};Page((0,k.default)((0,D.default)((0,D.default)((0,D.default)({},N.default.config),N.default.methods),{},{data:(0,D.default)((0,D.default)({},N.default.recharge),{},{generateConfig:R,selected:0,inputData:{sp:"",tel:""},history:[],showCloseIcon:!1,showGetNumberBtn:!0,isLetterSortShow:!1,topBarOpacity:0,fixed:!1,isShowDesopitSelectBox:!1,isShowPopup:!1,isShowRepurchasePopup:!1,hideActivity:!1,index:"",perImgList:["https://b.bdstatic.com/searchbox/icms/searchbox/img/service-recharge-ticket.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/service-recharge-quan.png"],newYearData:null,shareInfo:{},generateConfigNY:A.NY_SHARE_GEN_CONFIG,sourceInfo:{jump_type:"",jump_url:"",right_text:"充值记录"},brandRecommend:"",showBottomLoading:!0}),hasNotifyUG:!1,ubcLog:{from:"recharge-payment"},cusData:{realVal:"",target:"",initTabContents:[],scrollTips:{},isLoading:!1,lastValidPhones:["",""],redPacketSendNew:!0,prefetchPromise:null,redPacketPrefetchPromise:null,infoPrefetchPromise:null,redPacketManualSetData:!0,redPacketDataPromise:null,redPacketAfterSetData:null,hasVipCoupon:!0},hasInit:!1,hasShow:!1,onPrefetch:function(){this.cusData.prefetchPromise=this.$http.get(this.$api.RECHARGE_INFO),this.cusData.infoPrefetchPromise=this.$http.get(this.$api.RECHARGE__CHARGE_INFO);var t=N.default.recharge,e=t.actId,n=t.actPage;this.cusData.redPacketPrefetchPromise=this.requestRedPacketData(void 0,e,n)},onInit:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t))},onLoad:function(t){this.hasInit||(this.hasInit=!0,this.appInit(t))},appInit:function(t){this.isRepurchasePopup(t),(0,O.initTaskSupplier)(t),this.cusData.redPacketDataPromise=this.loadRedPacketData();var e=t.tab?t.tab-1:0;this.cusData.target=t.target,this.initData(e),t&&"activity2"===t.local_jump_from||this.checkActivity()},onShow:function(){this.hasShow&&(O.taskSupplier.execute({command:"start",aid:[771]}),this.redPacketRequestTag||(this.redPacketRequestTag=!0,this.loadRedPacketData()),this.getCouponAivity(!0),this.observeBrandRecommend(),i.$log.sendNew({module:0===this.data.selected?"huafei":"liuliang"},"show")),this.hasShow=!0},syncRefreshData:function(){var t=this;this.hasShow&&(this.cusData.lastValidPhones=["",""],0===this.isValidPhone()&&this.getPackage().catch((function(){t.showModal("数据异常，请稍候重试")})))},onUnload:function(){clearTimeout(this.redPacketRefreshTimer),clearTimeout(this.redPacketOpenShareTimer),clearTimeout(j),clearTimeout(U)},onHide:function(){O.taskSupplier.execute({command:"pause",aid:[771]}),clearTimeout(j),clearTimeout(U),clearTimeout(this.redPacketRefreshTimer),clearTimeout(this.redPacketOpenShareTimer)},onPageScroll:function(t){var e=t.scrollTop;this.setData("topBarOpacity",e>0?1:0)},getScrollTip:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.cusData.infoPrefetchPromise)?t.cusData.infoPrefetchPromise=null:n=t.$http.get(t.$api.RECHARGE__CHARGE_INFO),e.prev=2,e.next=5,n;case 5:a=e.sent,o=a.scrollBar,t.setData({notices:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.$showErrorPage(e.t0.errType);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},initData:function(t){var e=this;this.getScrollTip(),this.$storage.get("CHANNEL_RECHARGE_HISTORY").then((function(t){t&&t.length&&e.setData("history",t)})),this.getCouponAivity(!0);var n=this.cusData.prefetchPromise;n?this.cusData.prefetchPromise=null:n=this.$http.get(this.$api.RECHARGE_INFO),n.then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.lifeCharges,o=void 0===a?{}:a,r=n.tabs,s=void 0===r?[]:r,c=n.banner,u=void 0===c?{}:c,d=n.scrollTipsV2,l=void 0===d?[]:d,h=n.phoneBill,p=n.phoneSlow,f=n.phoneFlow,g=n.brandRecommend,m=n.appKeyList,v=n.uniformStyle;o&&o.value&&(o.value=o.value.slice(0,5));var w=s&&s[0]&&s[0].source_info;u&&u.value&&u.value.length>0&&(u.isShowDots=!0,u.dart="dart");var b=[[h,p],[f]].map((function(t,e){return t.map((function(t,n){return Object.assign(t,{hideAll:!0,boxActive:!1,breakIndex:9,module:0===e?0===n?"huafei":"huafei_slowcharge":"liuliang"})}))})),y={list:l,isShow:l&&l.length>0},T=g||{},S=T.sku_list,I=void 0===S?[]:S,C=T.hot_sell,x=!1;Array.isArray(I)&&I.length&&(I.forEach((function(t){t.appkey=(0,L.getAppKey)(t.jump_type,t.jump_url)})),x=!0),C&&(C.appkey=(0,L.getAppKey)(C.jump_type,C.jump_url),x=!0),x&&g&&(g.appkey=(0,L.getAppKey)(g.jump_type,g.jump_url));var _={tabContents:b.slice(),brandRecommend:x?g:"",banner:u,showBottomLoading:!1};b[1-t]="",e.setData({rendered:!0,scrollTips:y,tabContents:b,selected:t,tabs:s||[],showErrorPage:!1,lifeCharges:o,sourceInfo:w,uniformStyle:(0,L.gzipImgList)(v)},(function(){e.setData(_),O.taskSupplier.execute({command:"start",aid:[771]}),(0,L.preloadXcx)(m),(0,L.preloadXcxResource)("yvxXQWp8cjdVnRN3D3KyEjrorXMPlYum","pages/huafei/pay/pay"),e.cusData.redPacketManualSetData&&e.cusData.redPacketDataPromise.then((function(t){t&&t.coupon&&(t.coupon.tips=""),e.setData(t,e.cusData.redPacketAfterSetData),e.cusData.redPacketManualSetData=!1})),i.$log.sendNew({module:0===t?"huafei":"liuliang"},"show"),e.cusData.initTabContents=(0,L.cloneDeep)(_.tabContents),e.cusData.scrollTips=(0,L.cloneDeep)(y),"life"===e.cusData.target&&i.pageScrollTo({scrollTop:1e3,duration:0}),e.data.history&&e.data.history.length?(e.hideClearIcon(),e.setData("showGetNumberBtn",!1),e.onInputData({detail:{value:e.data.history[0].tel}})):n.inputTip&&"输入手机号码"!==n.inputTip&&(e.setData("showGetNumberBtn",!1),e.onInputData({detail:{value:n.inputTip}})),e.initTask(),e.observeBrandRecommend()}))})).catch((function(t){e.$showErrorPage(t.errType)}))},initTask:function(){var t=this.selectComponent("#c-task-timer");(0,L.runFn)((0,L.get)(t,"channelStart"),this.options)},observeBrandRecommend:function(){var t=this;this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=i.createIntersectionObserver(this,{thresholds:[1]}).relativeToViewport(),this.intersectionObserver.observe(".recommend-sku",(function(){var e,n;t.intersectionObserver.disconnect();var a=null===(e=t.data.brandRecommend)||void 0===e?void 0:e.hot_sell,o=null===(n=t.data.brandRecommend)||void 0===n?void 0:n.sku_list;a&&i.$log.sendNew({module:"bigbrand",rank:"0",appkey:a.appkey,name:a.sku_title,url:a.jump_url,apptype:a.jump_type,couponId:a.coupon_id,skuId:a.sku_id,originalPrice:a.origin_price,currentPrice:a.price,discount:a.discount,discount_message:a.description},"show"),(null==o?void 0:o.length)>0&&o.forEach((function(t,e){i.$log.sendNew({module:"bigbrand",rank:e+1,appkey:t.appkey,name:t.sku_title,url:t.jump_url,apptype:t.jump_type,couponId:t.coupon_id,skuId:t.sku_id,originalPrice:t.origin_price,currentPrice:t.price,discount:t.discount,discount_message:t.description},"show")}))}))},onErrorPageReload:function(){this.loadRedPacketData(),this.initData(this.data.selected)},onContactClick:function(){if("web"!==(0,E.getSystemInfo)().platform){this.onInputAreaTap();var t=this,e=this.data.phontContact;i.showLoading({title:"正在加载...",mask:!0}),e&&e.length?this.setData({isLetterSortShow:!0},(function(){i.hideLoading(),t.setData("phontContact",e)})):i.getPhoneContacts({success:function(e){var n=e.contacts,a=void 0===n?[]:n,o={},r=[],s=a.length,c=[];t.setData("isLetterSortShow",!0);for(var u=function(t){var e=a[t];Array.isArray(e.phoneNumbers)&&e.phoneNumbers.forEach((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=P.default.getPinyin(e.name);if(n&&n[0]){var a=n[0].toUpperCase();t=t.replace("+86","").replace(/^86/,"").replace(/[- ]/g,"").trim(),/[a-z]/i.test(a)?(o[a]||(o[a]=[]),o[a].push({name:e.name,code:t,pinyin:n.replace(/\s/g,""),pinyinFirst:n.split(" ").map((function(t){return t[0]})).join("")})):c.push({name:e.name,code:t,pinyin:n.replace(/\s/g,""),pinyinFirst:n.split(" ").map((function(t){return t[0]})).join("")})}}))},d=0;d<s;d++)u(d);for(var l=65;l<=90;l++){var h=String.fromCharCode(l);r.push({title:h,list:o[h]||[]})}r.push({title:"#",list:c}),i.hideLoading(),t.setData("phontContact",r)},fail:function(t){i.hideLoading(),10003===t.errCode&&i.showModal({title:"权限设置",content:"是否前往权限设置开启通讯录权限?",showCancel:!0,cancelText:"取消",confirmText:"前往",success:function(t){t.cancel||i.openSetting()}})}})}else this.$jump.openNA(M.path)},onTabChange:function(t){var e=this,n=t.currentTarget.dataset.index;i.$log.sendNew({module:0===n?"huafei":"liuliang"},"show"),this.setData({selected:n},(function(){var t=e.cusData,a=t.lastValidPhones,o=t.realVal;0===e.isValidPhone()&&a[n]!==o&&e.getPackage().catch((function(){e.showModal("数据异常，请稍候重试")}))}))},isValidPhone:function(){var t=this.cusData.realVal;return 0===t.length?1:11!==t.length?2:B.test(t)?0:4},switchMore:function(t){if("web"!==(0,E.getSystemInfo)().platform){var e=this.data.selected,n=t.currentTarget.dataset.moduleIndex,a=this.data.tabContents[e][n];this.setData("tabContents[".concat(e,"][").concat(n,"].hideAll"),!a.hideAll)}else this.$jump.openNA(M.path)},onSelectSku:function(t){var e=this;if("web"!==(0,E.getSystemInfo)().platform){var n=t.currentTarget.dataset,o=n.tabIndex,r=n.colIndex,s=n.moduleIndex;i.$log.sendNew(t.currentTarget.dataset,"click");var c=this.data.tabContents[o][s],u=this.data.scrollTips||{},d=c.list[r],l=d.resId||c.resId;if(1!==d.status)if(c.boxActive){if(!t.isLogin)return void(0,L.textToast)("登录失败~");if(t.isLogin&&t.change)return void(this.redPacketRequestTag||(this.redPacketRequestTag=!0,this.loadRedPacketData()));var h=function(){i.showLoading({title:"正在创建订单...",mask:!0}),(0,L.getRequestIdentifier)({phone:e.cusData.realVal,goodsId:d.goodsId,resId:l}).then((function(t){e.$http.post(e.$api.RECHARGE_BUY,{data:(0,D.default)({phone:e.cusData.realVal,goodsId:d.goodsId,resId:l},t),isShowToast:!0}).then((function(t){i.hideLoading(),t.redirectUrl?e.$jump.to(t.redirectUrl,"xcx"):(0,L.textToast)("订单创建失败")})).catch((function(t){i.hideLoading(),(0,L.textToast)("订单创建失败")}))}))},p=this.data.coupon;if(0===o&&p&&20===p.status){i.showLoading({title:"加载中...",mask:!0});var f={activity_id:"liebianActivity",action:"draw",act_id:this.data.actId,coupon_id:p.couponId};this.fetchData(this.$api.GET_ACTIVITY,f,!0).then((function(t){i.hideLoading(),(0,L.textToast)("领取成功")})).catch((function(t){i.hideLoading(),(0,L.textToast)(t.msg||"领取失败")})).finally((function(){a(h,1e3)}))}else h()}else{if(u.toastTip)return void(0,L.textToast)(u.toastTip);this.setData("noInputTel",!0,(function(){a((function(){e.setData({noInputTel:!1,inputFocus:!0})}),600)})),this.showModal()}}else this.$jump.openNA(M.path)},onInputBlur:function(){var t=this;a((function(){t.hideClearIcon()}),100)},hideClearIcon:function(){this.setData({showCloseIcon:!1,inputFocus:!1})},onInputFocus:function(){if("web"!==(0,E.getSystemInfo)().platform){i.hideToast();var t=this.data.history,e={showCloseIcon:!0};t&&t.length&&11!==this.cusData.realVal.length&&(e.showHistory=!0),this.setData(e)}else this.$jump.openNA(M.path)},extendOldScrollTipsData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.cusData.scrollTips||{};return e?Object.assign(t,{"scrollTips.list":e.list||[],"scrollTips.isShow":!!e.isShow,"scrollTips.toastTip":""}):t},showModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请输入正确的手机号码";i.showToast({icon:"none",title:t,duration:3e3})},showDefaultData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.cusData.initTabContents||[],a=this.data.tabContents||[];return this.cusData.lastValidPhones=["",""],new Promise((function(o){var i={};a.forEach((function(t,e){return t.forEach((function(t,a){i["tabContents[".concat(e,"][").concat(a,"].boxActive")]=!1,i["tabContents[".concat(e,"][").concat(a,"].list")]=n[e][a].list}))})),t.setData(Object.assign(i,{"inputData.sp":""},e),(function(){o()}))}))},onInputData:function(t){var e=this;if("web"!==(0,E.getSystemInfo)().platform){var n=this.handleTel(t.detail.value).showVal,a=this.isValidPhone();if(1!==a)if(2!==a){if(4===a)return this.showDefaultData({showHistory:!1,"inputData.sp":"未知运营商"}),void this.showModal();this.cusData.isLoading=!0,this.setData("showHistory",!1),this.getPackage().then((function(t){var a=e.data.history||[],o=a.findIndex((function(t){return t.tel===n}));o>=0&&a.splice(o,1),a.unshift({tel:n,sp:t}),e.updateHistory(a.slice(0,5),!1),e.cusData.isLoading=!1})).catch((function(){e.showModal("数据异常，请稍候重试"),e.cusData.isLoading=!1}))}else this.showDefaultData();else this.showDefaultData({showHistory:0!==this.data.history.length})}else this.$jump.openNA(M.path)},getPackage:function(){var t=this;return new Promise((function(e,n){var a=t.cusData.realVal,o=t.data.selected,r=0===o?[t.$api.RECHARGE_PRODUCT_FAST,t.$api.RECHARGE_SLOW_QUERY]:[t.$api.RECHARGE_FLOW_QUERY];a?Promise.all(r.map((function(e){return t.$http.get("".concat(e,"?phone=").concat(a,"&actId=").concat(t.data.actId),{isShowToast:!0})}))).then((function(r){var s=0===o?[r[0].phoneBill,r[1].phoneSlow]:[r[0].phoneFlow],c=r[0].chargeTask,u=t.data.tabContents[o],d=s[0].operator?s[0].province+s[0].operator:"未知运营商",l=s.every((function(t){return!t||!t.list||!t.list.length}));("未知运营商"===d||l)&&n(d);var h={},p=[],f=!1,g="";h["tabContents[".concat(o,"]")]=s.map((function(t,e){1===t.isClosed?(t.list=u[e].list,t.closedNoticeText&&p.push({text:t.closedNoticeText}),t.closedToastTip&&!g&&(g=t.closedToastTip),f=!0):(t.list.forEach((function(t){if(t.activity_price_color&&t.description){var e=t.description.split(" ");t.descPrefix=e[0],t.descValue=e[1]}})),0===e&&c&&t.list.length%3==0&&(t.list=t.list.slice(0,t.list.length-1)));var n=u[e];return Object.assign(t,{hideAll:n.hideAll,boxActive:1!==t.isClosed,breakIndex:9,chargeTask:0===e&&c||"",module:n.module,label:n.label,description:n.description})})),h["inputData.sp"]=d,f?(h["scrollTips.list"]=p,h["scrollTips.toastTip"]=g):t.extendOldScrollTipsData(h),t.cusData.lastValidPhones[o]=a,t.setData(h),e(d),c&&i.$log.send({module:"recharge-col-six-palaces-show"},"display")}),(function(t){n("未知运营商")})):n()}))},onClearInput:function(){var t=this;this.onInputAreaTap(),this.cusData.isLoading?(0,L.textToast)("正在获取充值信息，请稍等"):(this.cusData.realVal="",this.showDefaultData({"inputData.tel":"",inputFocus:!1}).then((function(){a((function(){t.setData(t.extendOldScrollTipsData({inputFocus:!0}))}),300)})))},onClearHistory:function(){var t=this;i.showModal({title:"温馨提示",content:"是否要清空历史充值号码",cancelText:"暂不清空",cancelColor:"#000",confirmText:"立即清空",confirmColor:"#38f",success:function(e){e.confirm&&t.updateHistory([],!1)}})},updateHistory:function(t,e){var n={history:t};void 0!==e&&(n.showHistory=e),this.setData(n),this.$storage.set("CHANNEL_RECHARGE_HISTORY",t)},onSelectHistory:function(t){var e=t.currentTarget.dataset.index,n=this.data.history[e];this.setData({inputData:n,showHistory:!1}),this.onInputData({detail:{value:n.tel}})},onRmoveHistory:function(t){var e=t.currentTarget.dataset.index,n=this.data.history||[];n.splice(e,1),this.updateHistory(n,0!==n.length)},onSearchMaskTap:function(){this.setData("showHistory",!1)},handleTel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.length,n=t=t.replace(/[^\d]/g,"");return e>3&&e<8?n=t.replace(/(\d{3})(\d+)/g,"$1 $2"):e>=8&&(n=t.replace(/(\d{3})(\d{4})(\d+)/g,"$1 $2 $3")),this.cusData.realVal=t,this.setData("inputData.tel",n),{realVal:t,showVal:n}},onConcatSelect:function(t){this.onConcatCancel(),this.onInputData({detail:{value:t.code}})},onConcatCancel:function(){this.setData("isLetterSortShow",!1)},hideScrollTips:function(){this.setData("scrollTips.isShow",!1)},userInputHandle:function(){this.setData({inputFocus:!0},(function(){a((function(){(0,L.textToast)("获取手机号失败，请手动输入")}),1e3)}))},onGetPhoneNumber:function(t){var e=this,n=t.detail||{},a=n.iv,o=n.encryptedData;this.setData({showCloseIcon:!1,showMobileConfirm:!1,showGetNumberBtn:!1}),o&&a?(0,E.getLoginCode)().then((function(t){var n=t.code;e.$http.post(e.$api.GET_PHONE_NUM,{noTry:!0,data:{iv:a,code:n,ciphertext:o}}).then((function(t){e.onInputData({detail:{value:t.mobile}}),e.$http.get(e.$api.PUT_USER_INFO,{data:{phoneNumber:t.mobile,service:"charge"}})})).catch((function(t){e.userInputHandle()}))})).catch((function(){e.userInputHandle()})):this.setData("inputFocus",!0)},hideAvardToast:function(t){var e=t.currentTarget.dataset.action;"login"===e?t.isLogin&&(this.initData(this.data.selected),this.setData("awardToastData.isShow",!1),this.checkActivity("showToast")):"close"===e&&this.setData("awardToastData.isShow",!1)},showMobileConfirmToast:function(){this.data.history&&this.data.history.length||this.setData("showMobileConfirm",!0)},isRepurchasePopup:function(t){null!=t&&t.isRepurchase?this.setData({isRepurchase:null==t?void 0:t.isRepurchase}):this.isCloseRepurchase()},hideMobileConfirm:function(){this.setData("showMobileConfirm",!1)},checkActivity:function(t){var e=this;this.$http.get(this.$api.RECHARGE_ACTIVITY).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};1===n.have_activity&&1===n.have_ticket&&((0,E.isLogin)()?1===n.show_awards&&e.getCoupon(n.invset_tickets,t):e.setData("awardToastData",{isShow:!0,name:"手机充值优惠券",num:"三张",btnText:"立即登录领取",btnAction:"login",list:["https://b.bdstatic.com/searchbox/icms/searchbox/img/chongzhi10y.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/chongzhi5y.png","https://b.bdstatic.com/searchbox/icms/searchbox/img/chongzhi3y.png"]}))}))},isCloseRepurchase:function(){this.setData({isShowRepurchasePopup:!0})},getCoupon:function(t,e){var n=this;(0,E.getSysData)().then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="showToast"===e;o&&i.showLoading({title:"福利发放中..."}),n.$http.get(n.$api.GET_ACTIVITY_DRAW,{noTry:!0,isShowToast:o,data:{zid:a.zid||"",mac:a.imei||"",coupon:t,act:2}}).then((function(t){n.showResultToast(t),n.getPackage()})).finally((function(){i.hideLoading()}))}))},showResultToast:function(t){var e=t.img_list&&t.img_list.length,n=t.assert_info||{};e>0&&this.setData("awardToastData",{isShow:!0,name:"手机充值优惠券",num:"一二三四五六七"[e-1]+"张",btnText:"立即使用",btnAction:"close",pocketJumpType:n.jump_type,pocketJumpUrl:n.jump_url,list:t.img_list})},onShareAppMessage:function(){return this.data.newYearData&&i.$log.send({module:"ny_recharge_default_share"}),(0,L.get)(this.data,"shareInfo.normalShare.img")&&!(0,L.get)(this.data,"shareInfo.normalShare.imageUrl")&&(this.data.shareInfo.normalShare.imageUrl=this.data.shareInfo.normalShare.img),(0,L.shareAppMessageUrlPatch)((0,L.get)(this.data,"shareInfo.normalShare")||M)},onClickCustomShare:function(){var t=(0,L.shareAppMessageUrlPatch)(this.selectComponent("#c-com-share").getShareInfo(this.options)||M);i.openShare(t)},isShowDesopit:function(){this.setData("isShowDesopitSelectBox",!0)},hideDesopitSelectBox:function(){this.setData("isShowDesopitSelectBox",!1),this.setData("isShowPopup",!1)},getPopup:function(t){"web"!==(0,E.getSystemInfo)().platform?t.isLogin&&(0==+this.data.couponArea.button.status?(this.getDraw(),i.$log.send({module:"get-activity"})):2==+this.data.couponArea.button.status?((0,L.textToast)("本次活动已结束，感谢小主支持"),this.setData({isShowPopup:!1})):(this.setData({isShowPopup:!0}),i.$log.send({module:"activity-popup"},"display"))):this.$jump.openNA(M.path)},getUse:function(){this.setData({isShowPopup:!1}),i.$log.send({module:"get-use"})},getDraw:function(){var t=this;i.showLoading({title:"抢券中请稍等...",mask:!0}),(0,E.getSysData)().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.$http.get(t.$api.GET_ACTIVITY_DRAW,{data:{activity_id:"ChargeActivity",zid:e.zid}}).then((function(){t.getCouponAivity(!1,1)})).catch((function(e){i.hideLoading(),t.setData({isShowPopup:!1}),(0,L.textToast)(e.msg)}))}))},initNewYear:function(){this.getCouponAivity()},dealNewYear:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.button){(t=(0,A.formatNewYearData)(t)).shareTokenOther=n;var a=t,o=a.button.status,i=a.nowTime,r=a.startTime;+o===A.NY_ACTIVITY_STATUS.NOT_START&&(0,A.countDown)(r-i,(function(){return e.initNewYear()})),this.setData({shareInfo:t.shareInfo,newYearData:t,hideActivity:!0}),this.getPackage()}else this.setData({newYearData:null,hideActivity:!1})},getCouponAivity:function(t,e){var n=this,o=this.options.shareToken;"tomas"!==(0,E.getSystemInfo)().host&&this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"ChargeActivity",shareToken:o},noTry:!0}).then((function(r){if(r.newYear)n.dealNewYear(r.newYear,o);else if(r.couponArea&&r.couponArea.button)return n.setData({couponArea:r.couponArea,couponWindow:r.couponWindow,status:r.couponArea.button.status,static:r.couponWindow.buttonText.status,couponTime:r.couponTime,hideActivity:!0}),1==+r.couponArea.button.status?(j&&clearTimeout(j),void(j=a((function(){n.getCouponAivity()}),2e3))):t?(n.getPackage(),void(0==+r.couponArea.button.status&&-1===e&&n.getDraw())):void(0==+r.couponArea.button.status&&e&&e<5?(U&&clearTimeout(U),U=a((function(){n.getCouponAivity(!1,++e)}),200)):(i.hideLoading(),n.setData({isShowPopup:!0}),n.getPackage()))})).catch((function(t){n.$showErrorPage(t.errType||1)}))},onInputAreaTap:function(){i.$log.sendNew({module:"telephone"},"click")}})))})),window.define("390",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=I(t(18)),x=I(t(391)),_={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"},D={},k={parseDict:function(){if(x.default)for(var t in D.notone={},D.py2hz=x.default,x.default)for(var e=0,n=(a=x.default[t]).length;e<n;e++)D.notone[a[e]]||(D.notone[a[e]]=t);var a},getPinyin:function(t,e,n,a){if(!t||/^ +$/g.test(t))return"";e=null==e?" ":e,n=null==n||n,a=null!=a&&a;var o=[];if(D.withtone){for(var i="",s=0,c=t.length;s<c;s++){(u=D.withtone[t[s]])?(a||(u=u.replace(/ .*$/g,"")),n||(u=this.removeTone(u)),i&&(o.push(i),i=""),o.push(u)):!t[s]||/^ +$/g.test(t[s])?i&&(o.push(i),i=""):i+=t[s]}i&&(o.push(i),i="")}else{if(!D.notone)throw"抱歉，未找到合适的拼音字典文件！";n&&console.warn("pinyin_dict_notone 字典文件不支持声调！"),a&&console.warn("pinyin_dict_notone 字典文件不支持多音字！");for(i="",s=0,c=t.length;s<c;s++){var u,d=t.charAt(s);(u=D.notone[d])?(i&&(o.push(i),i=""),o.push(u)):!d||/^ +$/g.test(d)?i&&(o.push(i),i=""):i+=d}i&&(o.push(i),i="")}return a?r.pinyin_dict_polyphone?function(t,e,n,a){var o=r.pinyin_dict_polyphone,i=o[t];if(i){i=i.split(" ");for(var s=0;s<i.length;s++)e[s]=i[s]||e[s],a||(e[s]=k.removeTone(e[s]));return e.join(n)}for(s=0;s<t.length;s++){i="";for(var c=0;c<7&&s+c<t.length&&/^[\u2E80-\u9FFF]+$/.test(t[s+c]);c++){i+=t[s+c];var u=o[i];if(u){u=u.split(" ");for(var d=0;d<=c;d++)u[d]&&(e[s+d]=a?u[d]:k.removeTone(u[d]));break}}}for(s=0;s<e.length;s++)e[s]=e[s].replace(/ .*$/g,"");return e.join(n)}(t,o,e,n):P(o," ",e):o.join(e)},getFirstLetter:function(t,e){if(e=null!=e&&e,!t||/^ +$/g.test(t))return"";if(D.firstletter){for(var n=[],a=0;a<t.length;a++){var o=t.charCodeAt(a),i=t.charAt(a);o>=19968&&o<=40869&&(i=D.firstletter.all.charAt(o-19968),e&&(i=D.firstletter.polyphone[o]||i)),n.push(i)}return e?P(n,"",""):n.join("")}var r=this.getPinyin(t," ",!1,e);r=r instanceof Array?r:[r];for(n=[],a=0;a<r.length;a++)n.push(r[a].replace(/(^| )(\w)\w*/g,(function(t,e,n){return n.toUpperCase()})));return e?E(n):n[0]},getHanzi:function(t){if(!D.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return D.py2hz[this.removeTone(t)]||""},getSameVoiceWord:function(t,e){return e=e||!1,this.getHanzi(this.getPinyin(t," ",!1))},removeTone:function(t){return t.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,(function(t){return _[t][0]}))},getTone:function(t){var e={};for(var n in _)e[_[n]]=n;return(t||"").replace(/[a-z]\d/g,(function(t){return e[t]||t}))}};function P(t,e,n){e=e||"";for(var a=[""],o=[],i=0;i<t.length;i++){o=[];for(var r=t[i].split(e),s=0;s<r.length;s++)for(var c=0;c<a.length;c++)o.push(a[c]+(a[c]?n:"")+r[s]);a=o}return E(a)}function E(t){for(var e=[],n={},a=0;a<t.length;a++){var o=(0,C.default)(t[a])+t[a];n[o]||(e.push(t[a]),n[o]=!0)}return e}k.parseDict(),k.dict=D;var L=k;n.default=L})),window.define("391",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={a:"阿啊呵腌嗄吖锕",e:"额阿俄恶鹅遏鄂厄饿峨扼娥鳄哦蛾噩愕讹锷垩婀鹗萼谔莪腭锇颚呃阏屙苊轭",ai:"爱埃艾碍癌哀挨矮隘蔼唉皑哎霭捱暧嫒嗳瑷嗌锿砹",ei:"诶",xi:"系西席息希习吸喜细析戏洗悉锡溪惜稀袭夕洒晰昔牺腊烯熙媳栖膝隙犀蹊硒兮熄曦禧嬉玺奚汐徙羲铣淅嘻歙熹矽蟋郗唏皙隰樨浠忾蜥檄郄翕阋鳃舾屣葸螅咭粞觋欷僖醯鼷裼穸饩舄禊诶菥蓰",yi:"一以已意议义益亿易医艺食依移衣异伊仪宜射遗疑毅谊亦疫役忆抑尾乙译翼蛇溢椅沂泄逸蚁夷邑怡绎彝裔姨熠贻矣屹颐倚诣胰奕翌疙弈轶蛾驿壹猗臆弋铱旖漪迤佚翊诒怿痍懿饴峄揖眙镒仡黟肄咿翳挹缢呓刈咦嶷羿钇殪荑薏蜴镱噫癔苡悒嗌瘗衤佾埸圯舣酏劓",an:"安案按岸暗鞍氨俺胺铵谙庵黯鹌桉埯犴揞厂广",han:"厂汉韩含旱寒汗涵函喊憾罕焊翰邯撼瀚憨捍酣悍鼾邗颔蚶晗菡旰顸犴焓撖",ang:"昂仰盎肮",ao:"奥澳傲熬凹鳌敖遨鏖袄坳翱嗷拗懊岙螯骜獒鏊艹媪廒聱",wa:"瓦挖娃洼袜蛙凹哇佤娲呙腽",yu:"于与育余预域予遇奥语誉玉鱼雨渔裕愈娱欲吁舆宇羽逾豫郁寓吾狱喻御浴愉禹俞邪榆愚渝尉淤虞屿峪粥驭瑜禺毓钰隅芋熨瘀迂煜昱汩於臾盂聿竽萸妪腴圄谕觎揄龉谀俣馀庾妤瘐鬻欤鹬阈嵛雩鹆圉蜮伛纡窬窳饫蓣狳肀舁蝓燠",niu:"牛纽扭钮拗妞忸狃",o:"哦噢喔",ba:"把八巴拔伯吧坝爸霸罢芭跋扒叭靶疤笆耙鲅粑岜灞钯捌菝魃茇",pa:"怕帕爬扒趴琶啪葩耙杷钯筢",pi:"被批副否皮坏辟啤匹披疲罢僻毗坯脾譬劈媲屁琵邳裨痞癖陂丕枇噼霹吡纰砒铍淠郫埤濞睥芘蚍圮鼙罴蜱疋貔仳庀擗甓陴",bi:"比必币笔毕秘避闭佛辟壁弊彼逼碧鼻臂蔽拂泌璧庇痹毙弼匕鄙陛裨贲敝蓖吡篦纰俾铋毖筚荸薜婢哔跸濞秕荜愎睥妣芘箅髀畀滗狴萆嬖襞舭",bai:"百白败摆伯拜柏佰掰呗擘捭稗",bo:"波博播勃拨薄佛伯玻搏柏泊舶剥渤卜驳簿脖膊簸菠礴箔铂亳钵帛擘饽跛钹趵檗啵鹁擗踣",bei:"北被备倍背杯勃贝辈悲碑臂卑悖惫蓓陂钡狈呗焙碚褙庳鞴孛鹎邶鐾",ban:"办版半班般板颁伴搬斑扮拌扳瓣坂阪绊钣瘢舨癍",pan:"判盘番潘攀盼拚畔胖叛拌蹒磐爿蟠泮袢襻丬",bin:"份宾频滨斌彬濒殡缤鬓槟摈膑玢镔豳髌傧",bang:"帮邦彭旁榜棒膀镑绑傍磅蚌谤梆浜蒡",pang:"旁庞乓磅螃彷滂逄耪",beng:"泵崩蚌蹦迸绷甭嘣甏堋",bao:"报保包宝暴胞薄爆炮饱抱堡剥鲍曝葆瀑豹刨褒雹孢苞煲褓趵鸨龅勹",bu:"不部步布补捕堡埔卜埠簿哺怖钚卟瓿逋晡醭钸",pu:"普暴铺浦朴堡葡谱埔扑仆蒲曝瀑溥莆圃璞濮菩蹼匍噗氆攵镨攴镤",mian:"面棉免绵缅勉眠冕娩腼渑湎沔黾宀眄",po:"破繁坡迫颇朴泊婆泼魄粕鄱珀陂叵笸泺皤钋钷",fan:"反范犯繁饭泛翻凡返番贩烦拚帆樊藩矾梵蕃钒幡畈蘩蹯燔",fu:"府服副负富复福夫妇幅付扶父符附腐赴佛浮覆辅傅伏抚赋辐腹弗肤阜袱缚甫氟斧孚敷俯拂俘咐腑孵芙涪釜脯茯馥宓绂讣呋罘麸蝠匐芾蜉跗凫滏蝮驸绋蚨砩桴赙菔呒趺苻拊阝鲋怫稃郛莩幞祓艴黻黼鳆",ben:"本体奔苯笨夯贲锛畚坌",feng:"风丰封峰奉凤锋冯逢缝蜂枫疯讽烽俸沣酆砜葑唪",bian:"变便边编遍辩鞭辨贬匾扁卞汴辫砭苄蝙鳊弁窆笾煸褊碥忭缏",pian:"便片篇偏骗翩扁骈胼蹁谝犏缏",zhen:"镇真针圳振震珍阵诊填侦臻贞枕桢赈祯帧甄斟缜箴疹砧榛鸩轸稹溱蓁胗椹朕畛浈",biao:"表标彪镖裱飚膘飙镳婊骠飑杓髟鳔灬瘭",piao:"票朴漂飘嫖瓢剽缥殍瞟骠嘌莩螵",huo:"和活或货获火伙惑霍祸豁嚯藿锪蠖钬耠镬夥灬劐攉",bie:"别鳖憋瘪蹩",min:"民敏闽闵皿泯岷悯珉抿黾缗玟愍苠鳘",fen:"分份纷奋粉氛芬愤粪坟汾焚酚吩忿棼玢鼢瀵偾鲼",bing:"并病兵冰屏饼炳秉丙摒柄槟禀枋邴冫",geng:"更耕颈庚耿梗埂羹哽赓绠鲠",fang:"方放房防访纺芳仿坊妨肪邡舫彷枋鲂匚钫",xian:"现先县见线限显险献鲜洗宪纤陷闲贤仙衔掀咸嫌掺羡弦腺痫娴舷馅酰铣冼涎暹籼锨苋蚬跹岘藓燹鹇氙莶霰跣猃彡祆筅",fou:"不否缶",ca:"拆擦嚓礤",cha:"查察差茶插叉刹茬楂岔诧碴嚓喳姹杈汊衩搽槎镲苴檫馇锸猹",cai:"才采财材菜彩裁蔡猜踩睬",can:"参残餐灿惨蚕掺璨惭粲孱骖黪",shen:"信深参身神什审申甚沈伸慎渗肾绅莘呻婶娠砷蜃哂椹葚吲糁渖诜谂矧胂",cen:"参岑涔",san:"三参散伞叁糁馓毵",cang:"藏仓苍沧舱臧伧",zang:"藏脏葬赃臧奘驵",chen:"称陈沈沉晨琛臣尘辰衬趁忱郴宸谌碜嗔抻榇伧谶龀肜",cao:"草操曹槽糙嘈漕螬艚屮",ce:"策测册侧厕栅恻",ze:"责则泽择侧咋啧仄箦赜笮舴昃迮帻",zhai:"债择齐宅寨侧摘窄斋祭翟砦瘵哜",dao:"到道导岛倒刀盗稻蹈悼捣叨祷焘氘纛刂帱忉",ceng:"层曾蹭噌",zha:"查扎炸诈闸渣咋乍榨楂札栅眨咤柞喳喋铡蚱吒怍砟揸痄哳齄",chai:"差拆柴钗豺侪虿瘥",ci:"次此差词辞刺瓷磁兹慈茨赐祠伺雌疵鹚糍呲粢",zi:"资自子字齐咨滋仔姿紫兹孜淄籽梓鲻渍姊吱秭恣甾孳訾滓锱辎趑龇赀眦缁呲笫谘嵫髭茈粢觜耔",cuo:"措错磋挫搓撮蹉锉厝嵯痤矬瘥脞鹾",chan:"产单阐崭缠掺禅颤铲蝉搀潺蟾馋忏婵孱觇廛谄谗澶骣羼躔蒇冁",shan:"山单善陕闪衫擅汕扇掺珊禅删膳缮赡鄯栅煽姗跚鳝嬗潸讪舢苫疝掸膻钐剡蟮芟埏彡骟",zhan:"展战占站崭粘湛沾瞻颤詹斩盏辗绽毡栈蘸旃谵搌",xin:"新心信辛欣薪馨鑫芯锌忻莘昕衅歆囟忄镡",lian:"联连练廉炼脸莲恋链帘怜涟敛琏镰濂楝鲢殓潋裢裣臁奁莶蠊蔹",chang:"场长厂常偿昌唱畅倡尝肠敞倘猖娼淌裳徜昶怅嫦菖鲳阊伥苌氅惝鬯",zhang:"长张章障涨掌帐胀彰丈仗漳樟账杖璋嶂仉瘴蟑獐幛鄣嫜",chao:"超朝潮炒钞抄巢吵剿绰嘲晁焯耖怊",zhao:"着照招找召朝赵兆昭肇罩钊沼嘲爪诏濯啁棹笊",zhou:"调州周洲舟骤轴昼宙粥皱肘咒帚胄绉纣妯啁诌繇碡籀酎荮",che:"车彻撤尺扯澈掣坼砗屮",ju:"车局据具举且居剧巨聚渠距句拒俱柜菊拘炬桔惧矩鞠驹锯踞咀瞿枸掬沮莒橘飓疽钜趄踽遽琚龃椐苣裾榘狙倨榉苴讵雎锔窭鞫犋屦醵",cheng:"成程城承称盛抢乘诚呈净惩撑澄秤橙骋逞瞠丞晟铛埕塍蛏柽铖酲裎枨",rong:"容荣融绒溶蓉熔戎榕茸冗嵘肜狨蝾",sheng:"生声升胜盛乘圣剩牲甸省绳笙甥嵊晟渑眚",deng:"等登邓灯澄凳瞪蹬噔磴嶝镫簦戥",zhi:"制之治质职只志至指织支值知识直致执置止植纸拓智殖秩旨址滞氏枝芝脂帜汁肢挚稚酯掷峙炙栉侄芷窒咫吱趾痔蜘郅桎雉祉郦陟痣蛭帙枳踯徵胝栀贽祗豸鸷摭轵卮轾彘觯絷跖埴夂黹忮骘膣踬",zheng:"政正证争整征郑丁症挣蒸睁铮筝拯峥怔诤狰徵钲",tang:"堂唐糖汤塘躺趟倘棠烫淌膛搪镗傥螳溏帑羰樘醣螗耥铴瑭",chi:"持吃池迟赤驰尺斥齿翅匙痴耻炽侈弛叱啻坻眙嗤墀哧茌豉敕笞饬踟蚩柢媸魑篪褫彳鸱螭瘛眵傺",shi:"是时实事市十使世施式势视识师史示石食始士失适试什泽室似诗饰殖释驶氏硕逝湿蚀狮誓拾尸匙仕柿矢峙侍噬嗜栅拭嘘屎恃轼虱耆舐莳铈谥炻豕鲥饣螫酾筮埘弑礻蓍鲺贳",qi:"企其起期气七器汽奇齐启旗棋妻弃揭枝歧欺骑契迄亟漆戚岂稽岐琦栖缉琪泣乞砌祁崎绮祺祈凄淇杞脐麒圻憩芪伎俟畦耆葺沏萋骐鳍綦讫蕲屺颀亓碛柒啐汔綮萁嘁蛴槭欹芑桤丌蜞",chuai:"揣踹啜搋膪",tuo:"托脱拓拖妥驼陀沱鸵驮唾椭坨佗砣跎庹柁橐乇铊沲酡鼍箨柝",duo:"多度夺朵躲铎隋咄堕舵垛惰哆踱跺掇剁柁缍沲裰哚隳",xue:"学血雪削薛穴靴谑噱鳕踅泶彐",chong:"重种充冲涌崇虫宠忡憧舂茺铳艟",chou:"筹抽绸酬愁丑臭仇畴稠瞅踌惆俦瘳雠帱",qiu:"求球秋丘邱仇酋裘龟囚遒鳅虬蚯泅楸湫犰逑巯艽俅蝤赇鼽糗",xiu:"修秀休宿袖绣臭朽锈羞嗅岫溴庥馐咻髹鸺貅",chu:"出处础初助除储畜触楚厨雏矗橱锄滁躇怵绌搐刍蜍黜杵蹰亍樗憷楮",tuan:"团揣湍疃抟彖",zhui:"追坠缀揣椎锥赘惴隹骓缒",chuan:"传川船穿串喘椽舛钏遄氚巛舡",zhuan:"专转传赚砖撰篆馔啭颛",yuan:"元员院原源远愿园援圆缘袁怨渊苑宛冤媛猿垣沅塬垸鸳辕鸢瑗圜爰芫鼋橼螈眢箢掾",cuan:"窜攒篡蹿撺爨汆镩",chuang:"创床窗闯幢疮怆",zhuang:"装状庄壮撞妆幢桩奘僮戆",chui:"吹垂锤炊椎陲槌捶棰",chun:"春纯醇淳唇椿蠢鹑朐莼肫蝽",zhun:"准屯淳谆肫窀",cu:"促趋趣粗簇醋卒蹴猝蹙蔟殂徂",dun:"吨顿盾敦蹲墩囤沌钝炖盹遁趸砘礅",qu:"区去取曲趋渠趣驱屈躯衢娶祛瞿岖龋觑朐蛐癯蛆苣阒诎劬蕖蘧氍黢蠼璩麴鸲磲",xu:"需许续须序徐休蓄畜虚吁绪叙旭邪恤墟栩絮圩婿戌胥嘘浒煦酗诩朐盱蓿溆洫顼勖糈砉醑",chuo:"辍绰戳淖啜龊踔辶",zu:"组族足祖租阻卒俎诅镞菹",ji:"济机其技基记计系期际及集级几给积极己纪即继击既激绩急奇吉季齐疾迹鸡剂辑籍寄挤圾冀亟寂暨脊跻肌稽忌饥祭缉棘矶汲畸姬藉瘠骥羁妓讥稷蓟悸嫉岌叽伎鲫诘楫荠戟箕霁嵇觊麂畿玑笈犄芨唧屐髻戢佶偈笄跽蒺乩咭赍嵴虮掎齑殛鲚剞洎丌墼蕺彐芰哜",cong:"从丛匆聪葱囱琮淙枞骢苁璁",zong:"总从综宗纵踪棕粽鬃偬枞腙",cou:"凑辏腠楱",cui:"衰催崔脆翠萃粹摧璀瘁悴淬啐隹毳榱",wei:"为位委未维卫围违威伟危味微唯谓伪慰尾魏韦胃畏帷喂巍萎蔚纬潍尉渭惟薇苇炜圩娓诿玮崴桅偎逶倭猥囗葳隗痿猬涠嵬韪煨艉隹帏闱洧沩隈鲔軎",cun:"村存寸忖皴",zuo:"作做座左坐昨佐琢撮祚柞唑嘬酢怍笮阼胙",zuan:"钻纂攥缵躜",da:"大达打答搭沓瘩惮嗒哒耷鞑靼褡笪怛妲",dai:"大代带待贷毒戴袋歹呆隶逮岱傣棣怠殆黛甙埭诒绐玳呔迨",tai:"大台太态泰抬胎汰钛苔薹肽跆邰鲐酞骀炱",ta:"他它她拓塔踏塌榻沓漯獭嗒挞蹋趿遢铊鳎溻闼",dan:"但单石担丹胆旦弹蛋淡诞氮郸耽殚惮儋眈疸澹掸膻啖箪聃萏瘅赕",lu:"路六陆录绿露鲁卢炉鹿禄赂芦庐碌麓颅泸卤潞鹭辘虏璐漉噜戮鲈掳橹轳逯渌蓼撸鸬栌氇胪镥簏舻辂垆",tan:"谈探坦摊弹炭坛滩贪叹谭潭碳毯瘫檀痰袒坍覃忐昙郯澹钽锬",ren:"人任认仁忍韧刃纫饪妊荏稔壬仞轫亻衽",jie:"家结解价界接节她届介阶街借杰洁截姐揭捷劫戒皆竭桔诫楷秸睫藉拮芥诘碣嗟颉蚧孑婕疖桀讦疥偈羯袷哜喈卩鲒骱",yan:"研严验演言眼烟沿延盐炎燕岩宴艳颜殷彦掩淹阎衍铅雁咽厌焰堰砚唁焉晏檐蜒奄俨腌妍谚兖筵焱偃闫嫣鄢湮赝胭琰滟阉魇酽郾恹崦芫剡鼹菸餍埏谳讠厣罨",dang:"当党档荡挡宕砀铛裆凼菪谠",tao:"套讨跳陶涛逃桃萄淘掏滔韬叨洮啕绦饕鼗",tiao:"条调挑跳迢眺苕窕笤佻啁粜髫铫祧龆蜩鲦",te:"特忑忒铽慝",de:"的地得德底锝",dei:"得",di:"的地第提低底抵弟迪递帝敌堤蒂缔滴涤翟娣笛棣荻谛狄邸嘀砥坻诋嫡镝碲骶氐柢籴羝睇觌",ti:"体提题弟替梯踢惕剔蹄棣啼屉剃涕锑倜悌逖嚏荑醍绨鹈缇裼",tui:"推退弟腿褪颓蜕忒煺",you:"有由又优游油友右邮尤忧幼犹诱悠幽佑釉柚铀鱿囿酉攸黝莠猷蝣疣呦蚴莸莜铕宥繇卣牖鼬尢蚰侑",dian:"电点店典奠甸碘淀殿垫颠滇癫巅惦掂癜玷佃踮靛钿簟坫阽",tian:"天田添填甜甸恬腆佃舔钿阗忝殄畋栝掭",zhu:"主术住注助属逐宁著筑驻朱珠祝猪诸柱竹铸株瞩嘱贮煮烛苎褚蛛拄铢洙竺蛀渚伫杼侏澍诛茱箸炷躅翥潴邾槠舳橥丶瘃麈疰",nian:"年念酿辗碾廿捻撵拈蔫鲶埝鲇辇黏",diao:"调掉雕吊钓刁貂凋碉鲷叼铫铞",yao:"要么约药邀摇耀腰遥姚窑瑶咬尧钥谣肴夭侥吆疟妖幺杳舀窕窈曜鹞爻繇徭轺铫鳐崾珧",die:"跌叠蝶迭碟爹谍牒耋佚喋堞瓞鲽垤揲蹀",she:"设社摄涉射折舍蛇拾舌奢慑赦赊佘麝歙畲厍猞揲滠",ye:"业也夜叶射野液冶喝页爷耶邪咽椰烨掖拽曳晔谒腋噎揶靥邺铘揲",xie:"些解协写血叶谢械鞋胁斜携懈契卸谐泄蟹邪歇泻屑挟燮榭蝎撷偕亵楔颉缬邂鲑瀣勰榍薤绁渫廨獬躞",zhe:"这者着著浙折哲蔗遮辙辄柘锗褶蜇蛰鹧谪赭摺乇磔螫",ding:"定订顶丁鼎盯钉锭叮仃铤町酊啶碇腚疔玎耵",diu:"丢铥",ting:"听庭停厅廷挺亭艇婷汀铤烃霆町蜓葶梃莛",dong:"动东董冬洞懂冻栋侗咚峒氡恫胴硐垌鸫岽胨",tong:"同通统童痛铜桶桐筒彤侗佟潼捅酮砼瞳恸峒仝嗵僮垌茼",zhong:"中重种众终钟忠仲衷肿踵冢盅蚣忪锺舯螽夂",dou:"都斗读豆抖兜陡逗窦渎蚪痘蔸钭篼",du:"度都独督读毒渡杜堵赌睹肚镀渎笃竺嘟犊妒牍蠹椟黩芏髑",duan:"断段短端锻缎煅椴簖",dui:"对队追敦兑堆碓镦怼憝",rui:"瑞兑锐睿芮蕊蕤蚋枘",yue:"月说约越乐跃兑阅岳粤悦曰钥栎钺樾瀹龠哕刖",tun:"吞屯囤褪豚臀饨暾氽",hui:"会回挥汇惠辉恢徽绘毁慧灰贿卉悔秽溃荟晖彗讳诲珲堕诙蕙晦睢麾烩茴喙桧蛔洄浍虺恚蟪咴隳缋哕",wu:"务物无五武午吴舞伍污乌误亡恶屋晤悟吾雾芜梧勿巫侮坞毋诬呜钨邬捂鹜兀婺妩於戊鹉浯蜈唔骛仵焐芴鋈庑鼯牾怃圬忤痦迕杌寤阢",ya:"亚压雅牙押鸭呀轧涯崖邪芽哑讶鸦娅衙丫蚜碣垭伢氩桠琊揠吖睚痖疋迓岈砑",he:"和合河何核盖贺喝赫荷盒鹤吓呵苛禾菏壑褐涸阂阖劾诃颌嗬貉曷翮纥盍",wo:"我握窝沃卧挝涡斡渥幄蜗喔倭莴龌肟硪",en:"恩摁蒽",n:"嗯唔",er:"而二尔儿耳迩饵洱贰铒珥佴鸸鲕",fa:"发法罚乏伐阀筏砝垡珐",quan:"全权券泉圈拳劝犬铨痊诠荃醛蜷颧绻犭筌鬈悛辁畎",fei:"费非飞肥废菲肺啡沸匪斐蜚妃诽扉翡霏吠绯腓痱芾淝悱狒榧砩鲱篚镄",pei:"配培坏赔佩陪沛裴胚妃霈淠旆帔呸醅辔锫",ping:"平评凭瓶冯屏萍苹乒坪枰娉俜鲆",fo:"佛",hu:"和护许户核湖互乎呼胡戏忽虎沪糊壶葫狐蝴弧瑚浒鹄琥扈唬滹惚祜囫斛笏芴醐猢怙唿戽槲觳煳鹕冱瓠虍岵鹱烀轷",ga:"夹咖嘎尬噶旮伽尕钆尜",ge:"个合各革格歌哥盖隔割阁戈葛鸽搁胳舸疙铬骼蛤咯圪镉颌仡硌嗝鬲膈纥袼搿塥哿虼",ha:"哈蛤铪",xia:"下夏峡厦辖霞夹虾狭吓侠暇遐瞎匣瑕唬呷黠硖罅狎瘕柙",gai:"改该盖概溉钙丐芥赅垓陔戤",hai:"海还害孩亥咳骸骇氦嗨胲醢",gan:"干感赶敢甘肝杆赣乾柑尴竿秆橄矸淦苷擀酐绀泔坩旰疳澉",gang:"港钢刚岗纲冈杠缸扛肛罡戆筻",jiang:"将强江港奖讲降疆蒋姜浆匠酱僵桨绛缰犟豇礓洚茳糨耩",hang:"行航杭巷夯吭桁沆绗颃",gong:"工公共供功红贡攻宫巩龚恭拱躬弓汞蚣珙觥肱廾",hong:"红宏洪轰虹鸿弘哄烘泓訇蕻闳讧荭黉薨",guang:"广光逛潢犷胱咣桄",qiong:"穷琼穹邛茕筇跫蛩銎",gao:"高告搞稿膏糕镐皋羔锆杲郜睾诰藁篙缟槁槔",hao:"好号毫豪耗浩郝皓昊皋蒿壕灏嚎濠蚝貉颢嗥薅嚆",li:"理力利立里李历例离励礼丽黎璃厉厘粒莉梨隶栗荔沥犁漓哩狸藜罹篱鲤砺吏澧俐骊溧砾莅锂笠蠡蛎痢雳俪傈醴栎郦俚枥喱逦娌鹂戾砬唳坜疠蜊黧猁鬲粝蓠呖跞疬缡鲡鳢嫠詈悝苈篥轹",jia:"家加价假佳架甲嘉贾驾嫁夹稼钾挟拮迦伽颊浃枷戛荚痂颉镓笳珈岬胛袈郏葭袷瘕铗跏蛱恝哿",luo:"落罗络洛逻螺锣骆萝裸漯烙摞骡咯箩珞捋荦硌雒椤镙跞瘰泺脶猡倮蠃",ke:"可科克客刻课颗渴壳柯棵呵坷恪苛咳磕珂稞瞌溘轲窠嗑疴蝌岢铪颏髁蚵缂氪骒钶锞",qia:"卡恰洽掐髂袷咭葜",gei:"给",gen:"根跟亘艮哏茛",hen:"很狠恨痕哏",gou:"构购够句沟狗钩拘勾苟垢枸篝佝媾诟岣彀缑笱鞲觏遘",kou:"口扣寇叩抠佝蔻芤眍筘",gu:"股古顾故固鼓骨估谷贾姑孤雇辜菇沽咕呱锢钴箍汩梏痼崮轱鸪牯蛊诂毂鹘菰罟嘏臌觚瞽蛄酤牿鲴",pai:"牌排派拍迫徘湃俳哌蒎",gua:"括挂瓜刮寡卦呱褂剐胍诖鸹栝呙",tou:"投头透偷愉骰亠",guai:"怪拐乖",kuai:"会快块筷脍蒯侩浍郐蒉狯哙",guan:"关管观馆官贯冠惯灌罐莞纶棺斡矜倌鹳鳏盥掼涫",wan:"万完晚湾玩碗顽挽弯蔓丸莞皖宛婉腕蜿惋烷琬畹豌剜纨绾脘菀芄箢",ne:"呢哪呐讷疒",gui:"规贵归轨桂柜圭鬼硅瑰跪龟匮闺诡癸鳜桧皈鲑刽晷傀眭妫炅庋簋刿宄匦",jun:"军均俊君峻菌竣钧骏龟浚隽郡筠皲麇捃",jiong:"窘炯迥炅冂扃",jue:"决绝角觉掘崛诀獗抉爵嚼倔厥蕨攫珏矍蹶谲镢鳜噱桷噘撅橛孓觖劂爝",gun:"滚棍辊衮磙鲧绲丨",hun:"婚混魂浑昏棍珲荤馄诨溷阍",guo:"国过果郭锅裹帼涡椁囗蝈虢聒埚掴猓崞蜾呙馘",hei:"黑嘿嗨",kan:"看刊勘堪坎砍侃嵌槛瞰阚龛戡凵莰",heng:"衡横恒亨哼珩桁蘅",mo:"万没么模末冒莫摩墨默磨摸漠脉膜魔沫陌抹寞蘑摹蓦馍茉嘿谟秣蟆貉嫫镆殁耱嬷麽瘼貊貘",peng:"鹏朋彭膨蓬碰苹棚捧亨烹篷澎抨硼怦砰嘭蟛堋",hou:"后候厚侯猴喉吼逅篌糇骺後鲎瘊堠",hua:"化华划话花画滑哗豁骅桦猾铧砉",huai:"怀坏淮徊槐踝",huan:"还环换欢患缓唤焕幻痪桓寰涣宦垸洹浣豢奂郇圜獾鲩鬟萑逭漶锾缳擐",xun:"讯训迅孙寻询循旬巡汛勋逊熏徇浚殉驯鲟薰荀浔洵峋埙巽郇醺恂荨窨蕈曛獯",huang:"黄荒煌皇凰慌晃潢谎惶簧璜恍幌湟蝗磺隍徨遑肓篁鳇蟥癀",nai:"能乃奶耐奈鼐萘氖柰佴艿",luan:"乱卵滦峦鸾栾銮挛孪脔娈",qie:"切且契窃茄砌锲怯伽惬妾趄挈郄箧慊",jian:"建间件见坚检健监减简艰践兼鉴键渐柬剑尖肩舰荐箭浅剪俭碱茧奸歼拣捡煎贱溅槛涧堑笺谏饯锏缄睑謇蹇腱菅翦戬毽笕犍硷鞯牮枧湔鲣囝裥踺搛缣鹣蒹谫僭戋趼楗",nan:"南难男楠喃囡赧腩囝蝻",qian:"前千钱签潜迁欠纤牵浅遣谦乾铅歉黔谴嵌倩钳茜虔堑钎骞阡掮钤扦芊犍荨仟芡悭缱佥愆褰凵肷岍搴箝慊椠",qiang:"强抢疆墙枪腔锵呛羌蔷襁羟跄樯戕嫱戗炝镪锖蜣",xiang:"向项相想乡象响香降像享箱羊祥湘详橡巷翔襄厢镶飨饷缃骧芗庠鲞葙蟓",jiao:"教交较校角觉叫脚缴胶轿郊焦骄浇椒礁佼蕉娇矫搅绞酵剿嚼饺窖跤蛟侥狡姣皎茭峤铰醮鲛湫徼鹪僬噍艽挢敫",zhuo:"着著缴桌卓捉琢灼浊酌拙茁涿镯淖啄濯焯倬擢斫棹诼浞禚",qiao:"桥乔侨巧悄敲俏壳雀瞧翘窍峭锹撬荞跷樵憔鞘橇峤诮谯愀鞒硗劁缲",xiao:"小效销消校晓笑肖削孝萧俏潇硝宵啸嚣霄淆哮筱逍姣箫骁枭哓绡蛸崤枵魈",si:"司四思斯食私死似丝饲寺肆撕泗伺嗣祀厮驷嘶锶俟巳蛳咝耜笥纟糸鸶缌澌姒汜厶兕",kai:"开凯慨岂楷恺揩锴铠忾垲剀锎蒈",jin:"进金今近仅紧尽津斤禁锦劲晋谨筋巾浸襟靳瑾烬缙钅矜觐堇馑荩噤廑妗槿赆衿卺",qin:"亲勤侵秦钦琴禽芹沁寝擒覃噙矜嗪揿溱芩衾廑锓吣檎螓",jing:"经京精境竞景警竟井惊径静劲敬净镜睛晶颈荆兢靖泾憬鲸茎腈菁胫阱旌粳靓痉箐儆迳婧肼刭弪獍",ying:"应营影英景迎映硬盈赢颖婴鹰荧莹樱瑛蝇萦莺颍膺缨瀛楹罂荥萤鹦滢蓥郢茔嘤璎嬴瘿媵撄潆",jiu:"就究九酒久救旧纠舅灸疚揪咎韭玖臼柩赳鸠鹫厩啾阄桕僦鬏",zui:"最罪嘴醉咀蕞觜",juan:"卷捐圈眷娟倦绢隽镌涓鹃鄄蠲狷锩桊",suan:"算酸蒜狻",yun:"员运云允孕蕴韵酝耘晕匀芸陨纭郧筠恽韫郓氲殒愠昀菀狁",qun:"群裙逡麇",ka:"卡喀咖咔咯佧胩",kang:"康抗扛慷炕亢糠伉钪闶",keng:"坑铿吭",kao:"考靠烤拷铐栲尻犒",ken:"肯垦恳啃龈裉",yin:"因引银印音饮阴隐姻殷淫尹荫吟瘾寅茵圻垠鄞湮蚓氤胤龈窨喑铟洇狺夤廴吲霪茚堙",kong:"空控孔恐倥崆箜",ku:"苦库哭酷裤枯窟挎骷堀绔刳喾",kua:"跨夸垮挎胯侉",kui:"亏奎愧魁馈溃匮葵窥盔逵睽馗聩喟夔篑岿喹揆隗傀暌跬蒉愦悝蝰",kuan:"款宽髋",kuang:"况矿框狂旷眶匡筐邝圹哐贶夼诳诓纩",que:"确却缺雀鹊阙瘸榷炔阕悫",kun:"困昆坤捆琨锟鲲醌髡悃阃",kuo:"扩括阔廓蛞",la:"拉落垃腊啦辣蜡喇剌旯砬邋瘌",lai:"来莱赖睐徕籁涞赉濑癞崃疠铼",lan:"兰览蓝篮栏岚烂滥缆揽澜拦懒榄斓婪阑褴罱啉谰镧漤",lin:"林临邻赁琳磷淋麟霖鳞凛拎遴蔺吝粼嶙躏廪檩啉辚膦瞵懔",lang:"浪朗郎廊狼琅榔螂阆锒莨啷蒗稂",liang:"量两粮良辆亮梁凉谅粱晾靓踉莨椋魉墚",lao:"老劳落络牢捞涝烙姥佬崂唠酪潦痨醪铑铹栳耢",mu:"目模木亩幕母牧莫穆姆墓慕牟牡募睦缪沐暮拇姥钼苜仫毪坶",le:"了乐勒肋叻鳓嘞仂泐",lei:"类累雷勒泪蕾垒磊擂镭肋羸耒儡嫘缧酹嘞诔檑",sui:"随岁虽碎尿隧遂髓穗绥隋邃睢祟濉燧谇眭荽",lie:"列烈劣裂猎冽咧趔洌鬣埒捩躐",leng:"冷愣棱楞塄",ling:"领令另零灵龄陵岭凌玲铃菱棱伶羚苓聆翎泠瓴囹绫呤棂蛉酃鲮柃",lia:"俩",liao:"了料疗辽廖聊寥缪僚燎缭撂撩嘹潦镣寮蓼獠钌尥鹩",liu:"流刘六留柳瘤硫溜碌浏榴琉馏遛鎏骝绺镏旒熘鹨锍",lun:"论轮伦仑纶沦抡囵",lv:"率律旅绿虑履吕铝屡氯缕滤侣驴榈闾偻褛捋膂稆",lou:"楼露漏陋娄搂篓喽镂偻瘘髅耧蝼嵝蒌",mao:"贸毛矛冒貌茂茅帽猫髦锚懋袤牦卯铆耄峁瑁蟊茆蝥旄泖昴瞀",long:"龙隆弄垄笼拢聋陇胧珑窿茏咙砻垅泷栊癃",nong:"农浓弄脓侬哝",shuang:"双爽霜孀泷",shu:"术书数属树输束述署朱熟殊蔬舒疏鼠淑叔暑枢墅俞曙抒竖蜀薯梳戍恕孰沭赎庶漱塾倏澍纾姝菽黍腧秫毹殳疋摅",shuai:"率衰帅摔甩蟀",lve:"略掠锊",ma:"么马吗摩麻码妈玛嘛骂抹蚂唛蟆犸杩",me:"么麽",mai:"买卖麦迈脉埋霾荬劢",man:"满慢曼漫埋蔓瞒蛮鳗馒幔谩螨熳缦镘颟墁鞔",mi:"米密秘迷弥蜜谜觅靡泌眯麋猕谧咪糜宓汨醚嘧弭脒冖幂祢縻蘼芈糸敉",men:"们门闷瞒汶扪焖懑鞔钔",mang:"忙盲茫芒氓莽蟒邙硭漭",meng:"蒙盟梦猛孟萌氓朦锰檬勐懵蟒蜢虻黾蠓艨甍艋瞢礞",miao:"苗秒妙描庙瞄缪渺淼藐缈邈鹋杪眇喵",mou:"某谋牟缪眸哞鍪蛑侔厶",miu:"缪谬",mei:"美没每煤梅媒枚妹眉魅霉昧媚玫酶镁湄寐莓袂楣糜嵋镅浼猸鹛",wen:"文问闻稳温纹吻蚊雯紊瘟汶韫刎璺玟阌",mie:"灭蔑篾乜咩蠛",ming:"明名命鸣铭冥茗溟酩瞑螟暝",na:"内南那纳拿哪娜钠呐捺衲镎肭",nei:"内那哪馁",nuo:"难诺挪娜糯懦傩喏搦锘",ruo:"若弱偌箬",nang:"囊馕囔曩攮",nao:"脑闹恼挠瑙淖孬垴铙桡呶硇猱蛲",ni:"你尼呢泥疑拟逆倪妮腻匿霓溺旎昵坭铌鲵伲怩睨猊",nen:"嫩恁",neng:"能",nin:"您恁",niao:"鸟尿溺袅脲茑嬲",nie:"摄聂捏涅镍孽捻蘖啮蹑嗫臬镊颞乜陧",niang:"娘酿",ning:"宁凝拧泞柠咛狞佞聍甯",nu:"努怒奴弩驽帑孥胬",nv:"女钕衄恧",ru:"入如女乳儒辱汝茹褥孺濡蠕嚅缛溽铷洳薷襦颥蓐",nuan:"暖",nve:"虐疟",re:"热若惹喏",ou:"区欧偶殴呕禺藕讴鸥瓯沤耦怄",pao:"跑炮泡抛刨袍咆疱庖狍匏脬",pou:"剖掊裒",pen:"喷盆湓",pie:"瞥撇苤氕丿",pin:"品贫聘频拼拚颦姘嫔榀牝",se:"色塞瑟涩啬穑铯槭",qing:"情青清请亲轻庆倾顷卿晴氢擎氰罄磬蜻箐鲭綮苘黥圊檠謦",zan:"赞暂攒堑昝簪糌瓒錾趱拶",shao:"少绍召烧稍邵哨韶捎勺梢鞘芍苕劭艄筲杓潲",sao:"扫骚嫂梢缫搔瘙臊埽缲鳋",sha:"沙厦杀纱砂啥莎刹杉傻煞鲨霎嗄痧裟挲铩唼歃",xuan:"县选宣券旋悬轩喧玄绚渲璇炫萱癣漩眩暄煊铉楦泫谖痃碹揎镟儇",ran:"然染燃冉苒髯蚺",rang:"让壤攘嚷瓤穰禳",rao:"绕扰饶娆桡荛",reng:"仍扔",ri:"日",rou:"肉柔揉糅鞣蹂",ruan:"软阮朊",run:"润闰",sa:"萨洒撒飒卅仨脎",suo:"所些索缩锁莎梭琐嗦唆唢娑蓑羧挲桫嗍睃",sai:"思赛塞腮噻鳃",shui:"说水税谁睡氵",sang:"桑丧嗓搡颡磉",sen:"森",seng:"僧",shai:"筛晒",shang:"上商尚伤赏汤裳墒晌垧觞殇熵绱",xing:"行省星腥猩惺兴刑型形邢饧醒幸杏性姓陉荇荥擤悻硎",shou:"收手受首售授守寿瘦兽狩绶艏扌",shuo:"说数硕烁朔铄妁槊蒴搠",su:"速素苏诉缩塑肃俗宿粟溯酥夙愫簌稣僳谡涑蔌嗉觫",shua:"刷耍唰",shuan:"栓拴涮闩",shun:"顺瞬舜吮",song:"送松宋讼颂耸诵嵩淞怂悚崧凇忪竦菘",sou:"艘搜擞嗽嗖叟馊薮飕嗾溲锼螋瞍",sun:"损孙笋荪榫隼狲飧",teng:"腾疼藤滕誊",tie:"铁贴帖餮萜",tu:"土突图途徒涂吐屠兔秃凸荼钍菟堍酴",wai:"外歪崴",wang:"王望往网忘亡旺汪枉妄惘罔辋魍",weng:"翁嗡瓮蓊蕹",zhua:"抓挝爪",yang:"样养央阳洋扬杨羊详氧仰秧痒漾疡泱殃恙鸯徉佯怏炀烊鞅蛘",xiong:"雄兄熊胸凶匈汹芎",yo:"哟唷",yong:"用永拥勇涌泳庸俑踊佣咏雍甬镛臃邕蛹恿慵壅痈鳙墉饔喁",za:"杂扎咱砸咋匝咂拶",zai:"在再灾载栽仔宰哉崽甾",zao:"造早遭枣噪灶燥糟凿躁藻皂澡蚤唣",zei:"贼",zen:"怎谮",zeng:"增曾综赠憎锃甑罾缯",zhei:"这",zou:"走邹奏揍诹驺陬楱鄹鲰",zhuai:"转拽",zun:"尊遵鳟樽撙",dia:"嗲",nou:"耨"}})),window.define("395",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(14)),_=t(26),D={"channels/express/pages/index/index":"pages/index/index","channels/express/pages/myexpress/index":"pages/myexpress/index","channels/express/pages/order-success/index":"pages/order-success/index"};Page({attr:{firstShow:!0},onShow:function(){if(this.attr.firstShow){this.attr.firstShow=!1;var t=i().globalData.appShowOptions,e=t.path,n=t.query,a=(0,_.urlParams)((0,C.default)({unencode:!0},n));a&&(a="?".concat(a));var o=D[e];o||(o="pages/index/index"),x.default.to("nbuAoUtA8IpsWLQVGvfSNwbOR2R5oDZn/".concat(o).concat(a),"xcx")}else x.default.to("/pages/index/index","local")}})})),window.define("398",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(16)),_=C(t(157)),D=C(t(27)),k=C(t(29)),P=C(t(141)),E=C(t(399)),L=C(t(400)),A=C(t(14)),O=t(26),N=t(9),R=C(t(401)),B={title:"来百度享便捷上门服务",content:"惠生活为您提供安全放心有保障的搬家｜家政｜维修等服务",path:"channels/family-service/pages/index/index?sfrom=shareUrl&source=shareUrl"};Page((0,P.default)({mixins:[L.default,E.default],ubcLog:{from:"family-service"},data:{showComplaintBox:!1,showEnsurePopup:!1,ensureData:{},brand:{provider:[]},isLoading:!1},attr:{reported:{},prefetchMainInfo:null,lastShopId:"",pageOffset:0,hasMore:!1},onShareAppMessage:function(){return(0,O.shareAppMessageUrlPatch)(B)},onPrefetch:function(t){var e=t.query;this.options=e;var n=this.getValidCity(this.options),a=n.cityCode,o=n.cityName;a&&o&&(this.attr.prefetchMainInfo=this.getMainInfo())},onInit:function(){this.hasOnInit||(this.initData(),this.hasOnInit=!0)},onLoad:function(t){this.ubcLog.from=t.canalName||"family-service",t.query&&(this.ubcLog.from="".concat(this.ubcLog.from,"##").concat(t.query)),this.fromwise=t.fromwise,this.options=t,this.hasOnInit||(this.initData(),this.hasOnInit=!0)},onShow:function(){var t=this.options,e=t.query,n=void 0===e?"":e,o=t.cate,r=void 0===o?"":o;a((function(){i.$log.sendNew({service_two:r,service_three:n},"display",{},"shangMen")}),1e3)},onUnload:function(){var t=this.attr,e=t.intersectionObserverProduct,n=t.intersectionObserverShop;e&&e.disconnect(),n&&n.disconnect()},onErrorPageReload:function(){this.initData()},onReachBottom:function(t){var e=this;this.data.hasMore&&!this.data.isLoading&&(this.setData({isLoading:!0}),this.fetchPageData().then((function(){e.setData({isLoading:!1})})))},costJump:function(t){var e=t.currentTarget.dataset.costUrl;e&&this.$http.get(e,{noTry:!0}),this.commonJump(t)},getValidCity:function(t){var e="",n="";return t.cityCode&&!/LOC_CITY_CODE/i.test(t.cityCode)&&(e=t.cityCode),t.cityName&&!/LOC_CITY_NAME/i.test(t.cityName)&&(n=t.cityName),{cityCode:e,cityName:n}},getMainInfo:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a,o,i,r,s,c,u,d,l,h;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.options,a=n.query,o=void 0===a?"":a,i=n.cate,r=void 0===i?"":i,s=n.expand,c=void 0===s?"":s,u=t.getValidCity(t.options),d=u.cityCode,l=u.cityName,d&&l){e.next=8;break}return e.next=5,t.$location.getAll();case 5:h=e.sent,d=h.cityCode,l=h.city;case 8:return e.abrupt("return",t.$http.get(t.$api.FAMILY_SERVICE,{isShowToast:!1,data:{query:o,cityCode:d,cityName:l,offset:t.attr.pageOffset,lastShopId:t.attr.lastShopId,superiorCategory:r,expand:c}}));case 9:case"end":return e.stop()}}),e)})))()},initData:function(){var t=this.options,e=t.query,n=void 0===e?"":e,a=t.cate,o=void 0===a?"":a;this.attr.query=n,this.fetchData(),this.setData({title:n||"家庭服务",cate:o,query:n})},handleShopProductLog:function(t,e){var n=this;(Array.isArray(t)||t.length)&&i.nextTick((function(){n.attr.intersectionObserverProduct&&n.attr.intersectionObserverProduct.disconnect(),n.attr.intersectionObserverProduct=i.createIntersectionObserver(n,{thresholds:[.9],selectAll:!0}).relativeToViewport();var a=n.attr.reported,o=n.options,r=o.cate,s=o.query,c=o.srcid,u=Array.from(t,(function(t,n){return"#merchant-".concat(e,"-service-").concat(n)})).join(", ");n.attr.intersectionObserverProduct.observe(u,(function(t){var n=t.id,o=t.dataset,u=n.split("merchant-".concat(e,"-service-"))[1],d=o.shopId,l=o.type,h=o.index,p=o.idx,f=o.merchantScore,g=o.merchantType,m=o.serviceId,v=o.servicePrice,w=o.title,b=o.bdVid;a["shop-".concat(e)][u]||(i.$log.sendNew({module:"service",title:w,service_two:r,service_three:s,shop_id:d,merchant_type:l,merchant_rank:h,merchant_score:f,service_id:m,service_price:v,service_rank:p,buy_order:"channel",cmatch:"2"===g?"1629":void 0,bd_vid:"2"===g?b:void 0,srcid:c},"show",{},"shangMen"),a["shop-".concat(e)][u]=!0)}))}))},handleShopShow:function(t){var e=this;(Array.isArray(t)||t.length)&&i.nextTick((function(){e.attr.intersectionObserverShop&&e.attr.intersectionObserverShop.disconnect(),e.attr.intersectionObserverShop=i.createIntersectionObserver(e,{thresholds:[.9],selectAll:!0}).relativeToViewport();var n=e.attr.reported,a=e.options,o=a.cate,r=a.query,s=a.srcid,c=Array.from(t,(function(t,e){return"#merchant-".concat(e)})).join(", ");e.attr.intersectionObserverShop.observe(c,(function(a){var c=a.id,u=a.dataset,d=u.shopId,l=u.type,h=u.index,p=u.shopName,f=u.bdVid,g=c.split("merchant-")[1];n["shop-".concat(g)]||(i.$log.sendNew({module:"merchant",service_two:o,service_three:r,shop_id:d,merchant_type:l,merchant_rank:h,shopName:p,buy_order:"channel",cmatch:"2"===l?"1629":void 0,bd_vid:"2"===l?f:void 0,srcid:s},"show",{},"shangMen"),n["shop-".concat(g)]={}),e.handleShopProductLog(t[g].services,g)}))}))},fetchData:function(){var t=this,e=this.attr.prefetchMainInfo||this.getMainInfo();this.attr.prefetchMainInfo=null,e.then((function(e){var n=(0,R.default)(e),a=(null==n?void 0:n.brand)||{},o=a.isShow,i=a.providers,r=void 0===i?[]:i,s=a.hasMore,c=a.offset,u=1==+s;n.brand&&Array.isArray(r)&&(a.providers=r.slice(0,3)),t.setData({rendered:!0,showEmptyCard:!o&&t.attr.query,showErrorPage:!1,banner:n.banner,keyPosition:n.key_position,safe:n.safe,channel:n.channel,brand:a,feedback:n.feedback,recommand:n.recommand,hasMore:u,platformGuarantee:n.platformGuarantee},(function(){t.initTask(),t.setData({"brand.providers":r},(function(){t.attr.pageOffset=void 0!==c?c:t.attr.pageOffset,t.attr.lastShopId=a.lastShopId})),t.data.brand&&t.data.brand.providers&&t.handleShopShow(t.data.brand.providers)}))})).catch((function(e){t.$showErrorPage(e.errType)}))},fetchPageData:function(){var t=this;return this.getMainInfo().then((function(e){var n,a,o,i,r=(0,R.default)(e),s=(null==r||null===(n=r.brand)||void 0===n?void 0:n.providers)||[],c=null==r||null===(a=r.brand)||void 0===a?void 0:a.offset,u=(null===(o=t.data.brand)||void 0===o?void 0:o.providers)||[],d=null==r||null===(i=r.brand)||void 0===i?void 0:i.hasMore;t.setData({"brand.providers":[].concat((0,_.default)(u),(0,_.default)(s)),hasMore:1==+d},(function(){var e;t.attr.pageOffset=void 0!==c?c:t.attr.pageOffset,t.attr.lastShopId=null==r||null===(e=r.brand)||void 0===e?void 0:e.lastShopId,s&&s.length&&t.handleShopShow(t.data.brand.providers)}))})).catch((function(e){t.setData({hasMore:!1})}))},tapServiceBao:function(){A.default.to("https://baozhang.baidu.com/guarantee/m/#/","h5")},initTask:function(){var t=this.selectComponent("#c-task-timer");(0,O.runFn)((0,O.get)(t,"channelStart"),this.options)},toggleOptionsFn:function(){this.setData({showComplaintBox:!this.data.showComplaintBox})},tapServiceBtnFn:function(t){this.data.showComplaintBox&&this.setData({showComplaintBox:!1});var e=t.currentTarget.dataset.jumpUrl,n=t.currentTarget.dataset,a=n.url,o=n.type,r=n.index,s=n.adIcon,c=n.poster,u=n.bdVid,d=n.shopId,l=n.merchantScore,h=n.merchantType,p=n.serviceId,f=n.servicePrice;e+="&location=".concat(r),s&&c&&(e+="&iscost=1&bd_vid=".concat(u),this.$http.get(c,{noTry:!0}));var g=this.options,m=g.cate,v=g.query,w=g.srcid;i.$log.sendNew({module:"service",service_two:m,service_three:v,shop_id:d,merchant_type:h,merchant_rank:r,merchant_score:l,service_id:p,service_price:f,buy_order:"channel",cmatch:"2"===h?"1629":void 0,bd_vid:"2"===h?u:void 0,srcid:w},"click",{},"shangMen"),"web"!==(0,N.getSystemInfo)().platform||"1"!==this.fromwise?A.default.to(e,o):i.openAdWebPage({url:a})},tapMoreBtn:function(t){var e=t.target.dataset.index;this.setData((0,x.default)({},"brand.providers[".concat(e,"].spread"),!0))},tapEnsureFn:function(t){this.data.showComplaintBox&&this.setData({showComplaintBox:!1});var e=t.target.dataset.index,n=this.data.brand.providers&&this.data.brand.providers[e].ScenterGuarantee;this.setData({ensureData:n,showEnsurePopup:!0})},closeEnsurePopupFn:function(){this.setData({showEnsurePopup:!1})},jumpFeedback:function(){var t=this.data.feedback;A.default.to(t.jumpUrl,t.jumpType)},goToShopCore:function(t){var e=t.currentTarget.dataset,n=e.poster,a=e.jumpType,o=e.adIcon,r=e.index,s=e.bdVid,c=e.shopId,u=e.type,d=e.url,l=t.currentTarget.dataset.jumpUrl,h=this.options,p=h.cate,f=h.query,g=h.srcid;l+="&location=".concat(r),o&&n&&(l+="&iscost=1&bd_vid=".concat(s),this.$http.get(n,{noTry:!0})),i.$log.sendNew({module:"merchant",merchant_rank:r,service_two:p,service_three:f,shop_id:c,merchant_type:u,buy_order:"channel",cmatch:"2"===u?"1629":void 0,bd_vid:"2"===u?s:void 0,srcid:g},"click",{},"shangMen"),"web"!==(0,N.getSystemInfo)().platform||"1"!==this.fromwise?A.default.to(l,a):i.openAdWebPage({url:d})},showEnsurePop:function(){var t=this.data.platformGuarantee;this.setData({ensureData:t,showEnsurePopup:!0})},tapPageFn:function(t){var e=t.target.dataset.mark;this.data.showComplaintBox&&!e&&this.setData({showComplaintBox:!1})}}))})),window.define("399",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={ubcLog:{from:"c-family-channel"}}})),window.define("400",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var C=0,x={onChanneEntryScroll:function(t){var e,n,o,i,r=this,s=(e=function(){var e=t.detail,n=e.scrollLeft,a=e.scrollWidth,o=t.currentTarget.dataset,i=o.perWidth,c=n/(i/100*a)*(i/100*90)/1242*100,u={};u[o.dataPath+".scrollBarLeft"]=c.toFixed(3),r.setData(u,(function(){clearTimeout(s),s=null}))},n=(new Date).getTime(),o=Math.max(0,16-(n-C)),i=a((function(){e(n+o)}),o),C=n+o,i)}};n.default=x})),window.define("401",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e={},n=t.canal_name||"";return Object.keys(t).forEach((function(a){D[a]&&(e[a]=D[a](t[a],n))})),e};var C=I(t(19)),x=t(26),_=I(t(17)),D={banner:function(t){return t.isShow=!(0,x.valueLengthZero)(t),t.titleColor="#000",t.descColor="#999",t.isShowDots=t.isShow&&t.value.length>1,t.dart="dart",t},key_position:function(t,e){if(!(0,x.valueLengthZero)(t)){var n=+t.row_num||2,a=+t.col_num||4,o=t.value.length;if(t.isShow=!0,t.showArr=[],o>a)if(o>a*n)t.value.forEach((function(a,o){t.showArr[o%n]||(t.showArr[o%n]=[]),a.jump_url="".concat(a.jump_url,"&canalName=").concat(e),t.showArr[o%n].push(a)}));else{var i=-1;t.value.forEach((function(n,o){o%a==0&&(i++,t.showArr[i]=[]),n.jump_url="".concat(n.jump_url,"&canalName=").concat(e),t.showArr[i].push(n)}))}else t.showArr=[t.value];var r=t.showArr[0].length;t.perWidth=1182/1242/a*100,t.allWidth=t.perWidth*r,o>n*a&&(t.showScrollBar=!0,t.scrollBarWidth=a/r*100)}return t},safe:function(t){return t.isShow=!(0,x.valueLengthZero)(t),t},channel:function(t){return t.length&&t.forEach((function(e,n){t[n].isShow=!(0,x.valueLengthZero)(e)})),t},brand:function(t){return t&&t.providers&&t.providers.length&&(t.isShow=!0,t.providers.forEach((function(t){t.fclick_url&&_.default.get(t.fclick_url,{noTry:!0}),t.services&&t.services.length&&(t.info={},["name","userNum","hasBdGuarantee","tag","tagDesc","safegardTags","logo","jumpType","jumpUrl","click_url","priceMode","bd_vid"].forEach((function(e){e in t&&(t.info[e]=t[e],delete t[e])})),t.services=t.services.map((function(t){t.price||t.oriPrice||(t.price="价格面议");var e=0,n=0;switch(t.priceMode){case"1":t.priceModeType="一口价";var a=t.newPrice&&t.newPrice.toString(),o=null==a?void 0:a.split("."),i=(0,C.default)(o,2);e=i[0],n=i[1];break;case"4":var r=t.prepay_price&&parseFloat(Number(t.prepay_price).toFixed(2));t.priceModeType="预付金";var s=r&&r.toString(),c=null==s?void 0:s.split("."),u=(0,C.default)(c,2);e=u[0],n=u[1]}return{jumpUrl:t.jumpUrl,jumpType:t.jumpType,img:t.img,title:t.name,price:t.price,origin_price:t.oriPrice,priceMode:t.priceMode,priceModeType:t.priceModeType,img_label:t.imgLabel,labels:t.colorLabels,grayLabels:t.labels,activity:t.activity,newActLabels:t.newActLabels,computedPriceInt:e,computedPriceFloat:n,imgLabelType:"top",url:t.url,newPrice:t.newPrice,newPriceAfter:t.newPriceAfter}})))}))),t},feedback:function(t){return t},platformGuarantee:function(t){return t},recommand:function(t,e){return t.isShow=!1,t.value&&t.value.length&&(t.isShow=!0,t.value.forEach((function(t){t.jump_url="".concat(t.jump_url,"&canalName=").concat(e)}))),t}}})),window.define("404",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(16)),x=t(405),_=t(9),D=I(t(14));Page({data:{tplInfo:{},componentList:[],errStatus:{errPage:!0,loading:!0,errType:1}},attr:{isLogin:!1,subParams:{},onInitHook:!1,pageQuery:null},onInit:function(t){this.fetchData(t),(0,x.getCommonSysInfo)(),this.attr.onInitHook=!0},onShow:function(){this.attr.onInitHook||this.fetchData(this.options),o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"})},checkNetwork:function(){return new Promise((function(t,e){o.getNetworkType({success:function(n){"none"===n.networkType?e():t()},fail:function(){e()}})}))},reFetchData:function(){this.fetchData(this.attr.pageQuery||{})},fetchData:function(t){var e=this,n=t.pageSource;n?(this.data.errStatus.loading||this.setData({errStatus:{errPage:!0,loading:!0}}),this.attr.pageQuery||(this.attr.pageQuery=t),(0,x.post)({pageSource:n}).then((function(t){if(+t.errNo)e.setData({errStatus:{errPage:!0,loading:!1,errType:1}});else{t=t.data;var n=[];t.components.forEach((function(e){t[e.key]&&("banner"!==e.type&&"service"!==e.type||!t[e.key].list||(t[e.key].list=t[e.key].list.map((function(t){return t.imgSrc=t.bigUrl,t}))),e.compData=t[e.key],void 0!==e.compData.packStyle&&(e.compData.packStyle=+e.compData.packStyle),n.push(e))})),o.setBackgroundColor({backgroundColor:t.tplInfo.bgColor}),e.setData({componentList:n,tplInfo:t.tplInfo,errStatus:{errPage:!1,loading:!1}}),e.attr.isLogin=e.getLoginStatus()}})).catch((function(t){e.checkNetwork().then((function(t){e.setData({errStatus:{errPage:!0,loading:!1,errType:2}})})).catch((function(t){e.setData({errStatus:{errPage:!0,loading:!1,errType:1}})})),console.log(t)}))):this.setData({errStatus:{errPage:!0,loading:!1,errType:2}})},getCouponPack:function(t){var e=this;if(this.getLoginStatus()){var n=t.currentTarget.dataset.cIndex,a=this.data.componentList[n].compData;2!==a.packStatus&&1!==a.packStatus||(this.ubcLog({module:"collection_get"}),Promise.all([(0,x.getCommonSysInfo)(),(0,x.getDataV2)()]).then((function(t){var i=t[0],r=i.cuid,s=i.zid,c=t[1],u=c.view,d=c.Token;o.showLoading({title:"正在加载...",mask:!0}),(0,x.post)({pageSource:"component_coupon_mtake",params:{uid:r},data:{zid:s,couponPackId:a.packId,vw:u,to:d}}).then((function(t){if(o.hideLoading(),!+t.errNo&&t.data){var i=t.data.component_coupon_mtake;a.coupons=a.coupons.map((function(t,e){return i.coupons&&i.coupons[t.couponId]&&(t.showStatus=i.coupons[t.couponId].showStatus),t})),a.packStatus=i.packStatus,e.setData((0,C.default)({},"componentList[".concat(n,"].compData"),a)),o.showToast({title:i.toast,mask:!0,icon:"none"})}else o.showToast({title:"领取失败",mask:!0,icon:"none"})})).catch((function(t){o.hideLoading(),e.checkNetwork().then((function(t){o.showToast({title:"网络不给力，请稍后重试",mask:!0,icon:"none"})})).catch((function(t){o.showToast({title:"领取失败",mask:!0,icon:"none"})}))}))})).catch((function(t){console.log(t),o.showToast({title:"领取失败",mask:!0,icon:"none"})})))}},sendLog:function(t,e){if(3===t){var n="";1===e?n="collection_use":2===e?n="seckill_use":3===e?n="horizontal_bar_use":4===e?n="block_use":5===e&&(n="vertical_use"),n&&this.ubcLog({module:n})}if(2===t||1===t){var a="";1===e?a="collection_get":2===e?a="seckill_get":3===e?a="horizontal_bar_get":4===e?a="block_get":5===e&&(a="vertical_get"),a&&this.ubcLog({module:a})}},ubcLog:function(t){this.attr&&this.attr.pageQuery&&this.attr.pageQuery.pageSource&&(t.module="".concat(t.module,"-").concat(this.attr.pageQuery&&this.attr.pageQuery.pageSource)),o.$log.send(t)},getCoupon:function(t){var e=this;if(this.getLoginStatus()){var n=t.currentTarget.dataset,a=n.compIndex,i=n.coupIndex,r=this.data.componentList[a].compData,s=r.coupons[i];this.sendLog(s.showStatus,r.packStyle),3!==s.showStatus?2!==s.showStatus&&1!==s.showStatus||Promise.all([(0,x.getCommonSysInfo)(),(0,x.getDataV2)()]).then((function(t){var n=t[0],c=n.cuid,u=n.zid,d=t[1],l=d.view,h=d.Token;o.showLoading({title:"正在加载...",mask:!0}),(0,x.post)({pageSource:"component_coupon_take",params:{uid:c},data:{zid:u,couponPackId:r.packId,couponId:s.couponId,vw:l,to:h}}).then((function(t){if(o.hideLoading(),!+t.errNo&&t.data){var n=t.data.component_coupon_take;e.setData((0,C.default)({},"componentList[".concat(a,"].compData.coupons[").concat(i,"].showStatus"),n.showStatus)),o.showToast({title:n.toast,mask:!0,icon:"none"})}else o.showToast({title:"领取失败",mask:!0,icon:"none"})})).catch((function(t){o.hideLoading(),e.checkNetwork().then((function(t){o.showToast({title:"网络不给力，请稍后重试",mask:!0,icon:"none"})})).catch((function(t){o.showToast({title:"领取失败",mask:!0,icon:"none"})}))}))})).catch((function(t){o.showToast({title:"领取失败",mask:!0,icon:"none"})})):(0,x.navigator)(s)}},getLoginStatus:function(){return o.isLoginSync().isLogin},jump:function(t){var e=t.currentTarget.dataset.type;this.ubcLog({module:e}),(0,x.navigator)(t.detail)},onLoginPack:function(t){"web"===(0,_.getSystemInfo)().platform&&this.options?D.default.openNA("channels/car-owner/pages/operatingActivities/index?pageSource=".concat(this.options.pageSource,"&xfrom=").concat(this.options.xfrom)):this.attr.isLogin?this.getCouponPack(t):this.fetchData(this.attr.pageQuery)},onLoginCoupon:function(t){"web"===(0,_.getSystemInfo)().platform&&this.options?D.default.openNA("channels/car-owner/pages/operatingActivities/index?pageSource=".concat(this.options.pageSource,"&xfrom=").concat(this.options.xfrom)):this.attr.isLogin?this.getCoupon(t):this.fetchData(this.attr.pageQuery)},toCouponApp:function(){(0,x.navigator)(this.data.tplInfo.couponApp)},toRule:function(){this.ubcLog({module:"rule"}),D.default.to(this.data.tplInfo.ruleUrl,"h5")},feedback:function(){(0,x.navigator)({linkType:3,linkPath:encodeURIComponent(this.data.tplInfo.feedbackUrl)})},onShare:function(){if(this.ubcLog({module:"share"}),this.data.tplInfo.shareInfo){var t=this.data.tplInfo.shareInfo,e=t.title,n=t.content,a=t.imageUrl;o.openShare({title:e,content:n,imageUrl:a,success:function(t){o.showToast({title:"分享成功",icon:"none"})},fail:function(t){console.log("openShare fail",t)}})}else o.openShare()}})})),window.define("405",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.navigator=function(t){var e=t.appKey,n=t.linkType,a=t.linkQuery,i=t.linkPath;a&&a.length&&(i=i+"?"+a);if(1==+n)o.navigateToSmartProgram({appKey:e,path:i});else if(0==+n)o.navigateTo({url:i});else if(3==+n)o.navigateTo({url:"/channels/car-owner/pages/rule/index?url="+i});else if(5==+n){var r={};a.split("&").forEach((function(t){var e=t.split("=");r=(0,k.default)((0,D.default)({},e[0],e[1]),r)})),o.openBdboxWebview({authority:"browser",path:i,parameters:(0,k.default)({},r)})}},n.getBDUSS=M,n.post=function(t){return H.apply(this,arguments)},n.getDataV2=function(){N||(O.init({aid:6470,dataApp:"eyJhcHBfa2V5IjoiNjQ3MCIsImFwcF92aWV3IjoicHJvbW90ZSIsImJyb3dzZXJfdXJsIjoiaHR0cHM6Ly9zb2ZpcmUuYmFpZHUuY29tL2RhdGEvdWEvYWIuanNvbiIsImZvcm1fZGVzYyI6IiIsInNlbmRfaW50ZXJ2YWwiOjUwLCJzZW5kX21ldGhvZCI6M30="}),N=!0);return new Promise((function(t,e){O.getDataV2((function(e){t(e)}))}))},n.pathWithQuery=n.queryStringify=n.getCommonSysInfo=void 0;var C,x=I(t(27)),_=I(t(29)),D=I(t(16)),k=I(t(15)),P=t(31),E="https://mbd.baidu.com",L="/ma/smarket-api/pagedata",A=P.APPKEY_HSH,O=t(145),N=!1,R=t(36);n.getCommonSysInfo=function(){return C?Promise.resolve(C):new Promise((function(t,e){o.getCommonSysInfo({success:function(e){C=e,t(e)},fail:function(t){e(t)}})}))};var B=function(t){return Object.keys(t).reduce((function(e,n){return e.push("".concat(encodeURIComponent(n),"=").concat(t[n])),e}),[]).join("&")};n.queryStringify=B;var j=function(t,e){return~t.indexOf("?")?"".concat(t,"&").concat(B(e)):"".concat(t,"?").concat(B(e))};n.pathWithQuery=j;var U=function(t){var e=Object.keys(t).sort(),n="";return e.forEach((function(e){n+="".concat(e,"=").concat(t[e])})),R(n)};function M(){return F.apply(this,arguments)}function F(){return(F=(0,_.default)(x.default.mark((function t(){return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){o.canIUse("getBDUSS")?o.getBDUSS({success:function(e){e&&e.bduss?t(e.bduss):t()},fail:function(t){e(t)}}):t()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=(0,_.default)(x.default.mark((function t(e){var n,a,i,r,s,c;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.prev=1,t.next=4,M();case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n="";case 10:return a=e.pageSource,i=Math.floor(Date.now()/1e3).toString(),r={appKey:A,pageSource:a,timestamp:i},s=(0,k.default)((0,k.default)({},r),e.data||{}),c=j(E+(e.url||L),(0,k.default)((0,k.default)((0,k.default)({},r),e.params||{}),{},{sign:U(s)})),t.abrupt("return",new Promise((function(t,a){o.request({url:c,data:e.data,header:(0,k.default)({"Content-Type":"application/x-www-form-urlencoded",Cookie:n?"BDUSS=".concat(n):""},e.header||{}),method:"POST",success:function(e){return e.data?t(e.data):a()},fail:function(t){a(t)}})})));case 16:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}})),window.define("408",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C={jtbj:"家庭保洁",sjwx:"手机维修",fwwx:"房屋维修",kshs:"开锁换锁",bj:"搬家",jdwx:"家电维修",ywxh:"衣物洗护",dnwx:"电脑维修"};Page((0,I.default)({ubcLog:{from:"family-navs"},data:{noResult:!1},getValidCity:function(t){var e="",n="";return t.cityCode&&!/LOC_CITY_CODE/i.test(t.cityCode)&&(e=t.cityCode),t.cityName&&!/LOC_CITY_NAME/i.test(t.cityName)&&(n=t.cityName),{cityCode:e,cityName:n}},onLoad:function(){var t=this.options,e=C[t.type]||"家庭服务";this.setData({title:e,type:t.type}),this.initData()},onErrorPageReload:function(){this.initData()},initData:function(){var t=this,e=this.getValidCity(this.options),n=e.cityCode,a=e.cityName;n&&a?this.fetchData(n,a):this.$location.getAll().then((function(e){t.fetchData(e.cityCode,e.city)}))},fetchData:function(t,e){var n=this;this.$http.get(this.$api.FAMILY_NAVS,{data:{cityCode:t,cityName:e,type:this.data.type}}).then((function(t){n.setData({data:t})})).catch((function(t){n.$showErrorPage(t.errType)}))}}))})),window.define("411",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(16)),x=I(t(27)),_=I(t(29)),D=I(t(141)),k=I(t(399)),P=I(t(400)),E=I(t(14)),L=t(26),A=t(9),O=I(t(412)),N={title:"来百度享便捷上门服务",content:"惠生活为您提供安全放心有保障的搬家｜家政｜维修等服务",path:"channels/family-service/pages/landing-page/index?sfrom=shareUrl&source=shareUrl"};Page((0,D.default)({mixins:[P.default,k.default],ubcLog:{from:"family-service"},data:{showComplaintBox:!1,showEnsurePopup:!1,ensureData:{},rendered:!1},attr:{prefetchMainInfo:null},onShareAppMessage:function(){return(0,L.shareAppMessageUrlPatch)(N)},onPrefetch:function(t){var e=t.query;this.options=e;var n=this.getValidCity(this.options),a=n.cityCode,o=n.cityName;a&&o&&(this.attr.prefetchMainInfo=this.getMainInfo())},onInit:function(){this.hasOnInit||(this.initData(),this.hasOnInit=!0)},onLoad:function(t){this.ubcLog.from=t.canalName||"family-service",t.query&&(this.ubcLog.from="".concat(this.ubcLog.from,"##").concat(t.query),N.path="".concat(N.path,"&query=").concat(this.options.query)),this.fromwise=t.fromwise,this.options=t,this.hasOnInit||(this.initData(),this.hasOnInit=!0)},onErrorPageReload:function(){this.initData()},costJump:function(t){var e=t.currentTarget.dataset.costUrl;e&&this.$http.get(e,{noTry:!0}),this.commonJump(t)},getValidCity:function(t){var e="",n="";return t.cityCode&&!/LOC_CITY_CODE/i.test(t.cityCode)&&(e=t.cityCode),t.cityName&&!/LOC_CITY_NAME/i.test(t.cityName)&&(n=t.cityName),{cityCode:e,cityName:n}},initData:function(){var t=this.options.query,e=void 0===t?"":t;this.fetchData(e),this.setData({title:e.length>6?"".concat(e.slice(0,6),"..."):e||"家庭服务"})},getMainInfo:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o,i,r,s,c,u,d,l,h;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.options,a=n.query,o=void 0===a?"":a,i=n.cate,r=void 0===i?"":i,s=n.expand,c=void 0===s?"":s,u=t.getValidCity(t.options),d=u.cityCode,l=u.cityName,d&&l){e.next=8;break}return e.next=5,t.$location.getAll();case 5:h=e.sent,d=h.cityCode,l=h.city;case 8:return e.abrupt("return",t.$http.get(t.$api.FAMILY_SERVICE,{isShowToast:!1,data:{query:o,cityCode:d,cityName:l,superiorCategory:r,expand:c}}));case 9:case"end":return e.stop()}}),e)})))()},fetchData:function(t){var e=this,n=this.attr.prefetchMainInfo;n?this.attr.prefetchMainInfo=null:n=this.getMainInfo(),n.then((function(n){var a=(0,O.default)(n),o=!1,i=[];if(a.brand){var r=a.brand,s=r.isShow,c=r.providers;o=s,e.providers=c,Array.isArray(a.brand.providers)&&(i=a.brand.providers.slice(0,3),a.brand.providers=i)}e.setData({rendered:!0,showEmptyCard:!o&&t,showErrorPage:!1,banner:a.banner,keyPosition:a.key_position,safe:a.safe,channel:a.channel,brand:a.brand,feedback:a.feedback,recommand:a.recommand,platformGuarantee:a.platformGuarantee},(function(){e.setData({"brand.providers":e.providers})}))})).catch((function(t){e.$showErrorPage(t.errType)}))},tapServiceBao:function(){E.default.to("https://baozhang.baidu.com/guarantee/m/#/","h5")},initTask:function(){var t=this.selectComponent("#c-task-timer");(0,L.runFn)((0,L.get)(t,"channelStart"),this.options)},toggleOptionsFn:function(){this.setData({showComplaintBox:!this.data.showComplaintBox})},tapServiceBtnFn:function(t){this.data.showComplaintBox&&this.setData({showComplaintBox:!1});var e=t.currentTarget.dataset.jumpUrl,n=t.currentTarget.dataset,a=n.url,i=n.type,r=n.idx,s=n.adIcon,c=n.poster,u=t.currentTarget.dataset.index;e+="&location=".concat(u),s&&c&&(e+="&iscost=1",this.$http.get(c,{noTry:!0})),o.$log.send({module:"ppfw-".concat(u),index:"ppfw-".concat(u,"-c").concat(r),apptype:i,url:e},"click"),"web"!==(0,A.getSystemInfo)().platform||"1"!==this.fromwise?E.default.to(e,i):o.openAdWebPage({url:a})},tapMoreBtn:function(t){var e=t.target.dataset.index;this.setData((0,C.default)({},"brand.providers[".concat(e,"].spread"),!0))},tapEnsureFn:function(t){this.data.showComplaintBox&&this.setData({showComplaintBox:!1});var e=t.target.dataset.index,n=this.data.brand.providers&&this.data.brand.providers[e].ScenterGuarantee;this.setData({ensureData:n,showEnsurePopup:!0})},closeEnsurePopupFn:function(){this.setData({showEnsurePopup:!1})},jumpFeedback:function(){var t=this.data.feedback;E.default.to(t.jumpUrl,t.jumpType)},goToShopCore:function(t){var e=t.currentTarget.dataset.jumpUrl,n=t.currentTarget.dataset,a=n.jumpType,i=n.index,r=n.poster,s=n.url,c=n.adIcon;e+="&location=".concat(i),c&&r&&(e+="&iscost=1",this.$http.get(r,{noTry:!0})),o.$log.send({module:"ppfw-".concat(i),index:"ppfw-".concat(i,"-t"),apptype:a,url:e},"click"),"web"===(0,A.getSystemInfo)().platform&&this.fromwise&&"1"===this.fromwise?E.default.to(s,"h5"):E.default.to(e,a)},showEnsurePop:function(){var t=this.data.platformGuarantee;this.setData({ensureData:t,showEnsurePopup:!0})},tapPageFn:function(t){var e=t.target.dataset.mark;this.data.showComplaintBox&&!e&&this.setData({showComplaintBox:!1})}}))})),window.define("412",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e={},n=t.canal_name||"";return Object.keys(t).forEach((function(a){_[a]&&(e[a]=_[a](t[a],n))})),e};var C=I(t(19)),x=t(26),_={banner:function(t){return t.isShow=!(0,x.valueLengthZero)(t),t.titleColor="#000",t.descColor="#999",t.isShowDots=t.isShow&&t.value.length>1,t.dart="dart",t},key_position:function(t,e){if(!(0,x.valueLengthZero)(t)){var n=+t.row_num||2,a=+t.col_num||4,o=t.value.length;if(t.isShow=!0,t.showArr=[],o>a)if(o>a*n)t.value.forEach((function(a,o){t.showArr[o%n]||(t.showArr[o%n]=[]),a.jump_url="".concat(a.jump_url,"&canalName=").concat(e),t.showArr[o%n].push(a)}));else{var i=-1;t.value.forEach((function(n,o){o%a==0&&(i++,t.showArr[i]=[]),n.jump_url="".concat(n.jump_url,"&canalName=").concat(e),t.showArr[i].push(n)}))}else t.showArr=[t.value];var r=t.showArr[0].length;t.perWidth=1182/1242/a*100,t.allWidth=t.perWidth*r,o>n*a&&(t.showScrollBar=!0,t.scrollBarWidth=a/r*100)}return t},safe:function(t){return t.isShow=!(0,x.valueLengthZero)(t),t},channel:function(t){return t.length&&t.forEach((function(e,n){t[n].isShow=!(0,x.valueLengthZero)(e)})),t},brand:function(t){return t&&t.providers&&t.providers.length&&(t.isShow=!0,t.providers.forEach((function(t){t.services&&t.services.length&&(t.info={},["name","userNum","hasBdGuarantee","tag","tagDesc","safegardTags","logo","jumpType","jumpUrl","click_url","priceMode"].forEach((function(e){e in t&&(t.info[e]=t[e],delete t[e])})),t.services=t.services.map((function(t){t.price||t.oriPrice||(t.price="价格面议");var e=0,n=0;switch(t.priceMode){case"1":t.priceModeType="一口价";var a=t.newPrice&&t.newPrice.toString(),o=null==a?void 0:a.split("."),i=(0,C.default)(o,2);e=i[0],n=i[1];break;case"4":t.priceModeType="预付金";var r=t.prepay_price&&parseFloat(Number(t.prepay_price).toFixed(2)),s=r&&r.toString(),c=null==s?void 0:s.split("."),u=(0,C.default)(c,2);e=u[0],n=u[1]}return{jumpUrl:t.jumpUrl,jumpType:t.jumpType,img:t.img,title:t.name,price:t.price,origin_price:t.oriPrice,priceMode:t.priceMode,priceModeType:t.priceModeType,img_label:t.imgLabel,labels:t.colorLabels,grayLabels:t.labels,activity:t.activity,computedPriceInt:e,computedPriceFloat:n,newPriceAfter:t.newPriceAfter,imgLabelType:"top",url:t.url}})))}))),t},feedback:function(t){return t},platformGuarantee:function(t){return t},recommand:function(t,e){return t.isShow=!1,t.value&&t.value.length&&(t.isShow=!0,t.value.forEach((function(t){t.jump_url="".concat(t.jump_url,"&canalName=").concat(e)}))),t}}})),window.define("415",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(14)),x=t(26),_=I(t(141)),D=t(42),k=i(),P=[{title:"旅游特惠天天领",content:"惠生活特价景点酒店机票抢不停",path:"channels/travel-special-offer/pages/index/index?sfrom=shareUrl&source=shareUrl"},{title:"火爆景区门票1元抢！",content:"五一敞开玩，低价酒店捡漏，现金红包等你来领！",imageUrl:"https://b.bdstatic.com/searchbox/icms/searchbox/img/fenxiang0422.png",path:"channels/travel-special-offer/pages/index/index?sfrom=shareUrl&source=shareUrl&activity=1"}];Page((0,_.default)({data:{isFromSecondFloor:k.globalData.isFromSecondFloor,isShowHome:!1,firstLoad:!0,tabId:null,options:null,showBar:!1,topBarTitle:"",banner:null,hasBanner:!0,hasActivity:!1,tabs:null,tabData:null,selectIndex:1,navHeight:0,scrollTop:0,isFixedTab:!1,minHeight:"100vh",loadingStatus:"loading",filterParams:{},pn:0,isReachBottom:!1,isHeightVersion:!1,currentCity:"",currentCityCode:"",activityTitle:"五一酒旅敞开订"},ubcLog:{from:"travel-price",sfrom:""},onShareAppMessage:function(){return(0,x.shareAppMessageUrlPatch)(this.data.options.activity?P[1]:P[0])},onLoad:function(t){this.data.tabId=t.tab_id,this.data.activity=t.activity,t.activity&&(this.ubcLog.from="travel-activity"),t.activity&&this.setData({hasActivity:!0});var e=getCurrentPages(),n=1===e.length&&!/^pages\/index\/index/.test(e[0].uri);if(this.setData({isShowHome:!this.data.isFromSecondFloor&&n,isHeightVersion:(0,D.isHeightVersion)()}),t.tab_id&&delete t.tab_id,this.data.options=t,!this.data.options.city_code){var a=k.globalData.location;this.data.options.city_code=a.cityCode}this.setData({navHeight:(0,x.getTopHeight)()});var o=Object.assign({},this.data.options,{pn:this.data.pn});this.initData(o)},onShow:function(){this.handleDefaultInfo()},initData:function(t){var e=this;this.data.isReachBottom&&(this.data.isReachBottom=!1),this.$http.get(this.$api.TRAVEL_SPECIAL_OFFER,{data:t}).then((function(t){if(t&&t.values&&t.values.length>0){var n=t.banner,a=t.title,i=t.values,r=n&&n.value&&n.value.length?e.formatBanner(n):null,s=i&&i.length?i:null,c=e.findSelected(s,e.data.tabId);c=c>-1?c:1,e.setData({topBarTitle:a||"旅游特价",banner:r,tabs:s,selectIndex:c,tabData:s[c],firstLoad:!1},(function(){e.data.banner&&e.data.banner.value&&e.data.banner.value.length>0||(e.setData({hasBanner:!1}),o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})),e.data.isReachBottom=!0,"0"===e.data.tabData.hasMore&&e.setData({loadingStatus:"complete"}),o.nextTick((function(){0===e.data.scrollTop&&o.createSelectorQuery().select(".sroll-container").boundingClientRect((function(t){e.setData({scrollTop:t.top})})).exec()}))}))}else e.setData({loadingStatus:"complete"})})).catch((function(){e.setData({loadingStatus:"complete"})}))},formatBanner:function(t){return t.top="".concat(this.data.navHeight+10,"px"),t.value.forEach((function(t){t.oldBackground=t.background,t.background=(0,x.adaptBackground)(t.background)})),t},findSelected:function(t,e){return t.findIndex((function(t){return t.tab_id===e}))},onChange:function(t){var e=t.detail;if(o.$log.send({module:"tabName",index:e.index},"click"),e){this.setData({selectIndex:e.index}),this.data.isReachBottom=!1,this.data.pn=0,this.data.tabId=e.id;var n=Object.assign({},this.data.options,{tab_id:this.data.tabId,pn:this.data.pn});this.data.tabs[e.index].filters&&(n=Object.assign(n,this.data.filterParams)),this.loadData(n)}},onFilter:function(t){var e=t.detail,n=this.data.tabs.map((function(t){return t.filters&&(t.filters=t.filters.map((function(t,n){return n===e.filterIndex&&(t.selectValue=e.data),t}))),t}));this.setData({tabs:n}),e.data.id?this.data.filterParams[e.key]=e.data.id:this.data.filterParams[e.key]=e.data.code,this.data.pn=0;var a=Object.assign({},this.data.options,this.data.filterParams,{tab_id:"hotel",pn:this.data.pn});this.loadData(a)},loadData:function(t){var e=this;this.setData({minHeight:"400vh",loadingStatus:"loading",tabData:null},(function(){e.data.isFixedTab&&o.pageScrollTo({scrollTop:e.data.scrollTop,duration:0}),e.getRequest(t,"loadData")}))},onPageScroll:function(t){var e=this;if(0===this.data.scrollTop&&o.createSelectorQuery().select(".travel-newday").boundingClientRect((function(t){t&&e.setData({scrollTop:t.height-e.data.navigationBarHeight-e.data.statusBarHeight})})).exec(),t.scrollTop>this.data.scrollTop?this.setData({isFixedTab:!0}):this.setData({isFixedTab:!1}),this.data.hasBanner){var n=this.data.navigationBarHeight+this.data.statusBarHeight;t.scrollTop>n?(this.setData({showBar:!0}),o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})):(this.setData({showBar:!1}),o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000"}))}},onReachBottom:function(){if(this.data.isReachBottom&&"complete"!==this.data.loadingStatus){this.data.isReachBottom=!1,this.data.pn++;var t=Object.assign({},this.data.options,{tab_id:this.data.tabId,pn:this.data.pn});this.data.tabs[this.data.selectIndex].filters&&(t=Object.assign(t,this.data.filterParams)),this.getRequest(t)}},getRequest:function(t,e){var n=this;this.$http.get(this.$api.TRAVEL_SPECIAL_OFFER,{data:t}).then((function(t){if(n.data.isReachBottom=!0,t&&t.values&&t.values[0]&&t.values[0].skus&&t.values[0].skus.length>0){var a=!1;"sku_template_2"===t.values[0].tab_template_id&&(a=!0),"loadData"===e?n.setData({tabData:t.values[0]},(function(){a||n.setMinHeight()})):n.setData({"tabData.skus":n.data.tabData.skus.concat(t.values[0].skus)}),"0"===t.values[0].hasMore&&n.setData({loadingStatus:"complete"})}else n.setData({loadingStatus:"complete"})})).catch((function(){n.setData({loadingStatus:"complete"})}))},watefallEnd:function(){this.setMinHeight()},setMinHeight:function(){var t=this;o.nextTick((function(){t.setData({minHeight:"100vh"})}))},onClick:function(t){C.default.withEvent(t)},onLeftTap:function(t){var e=t.target.dataset.action;"back"===e&&this.onBackClick(t),"home"===e&&this.onHomeClick(t)},onBackClick:function(){this.data.isFromSecondFloor&&1===getCurrentPages().length?o.exit():C.default.back()},onHomeClick:function(){C.default.goHome()},activityEvent:function(){this.setData({hasActivity:!0})},handleDefaultInfo:function(){var t=this,e=this.options;if(this.loc={},e.cityCode&&e.cityName)return this.loc={cityName:e.cityName||"北京市",cityCode:e.cityCode||"131"},void this.setData({currentCity:this.loc.cityName,currentCityCode:this.loc.cityCode});this.$location.getAll().then((function(e){t.$location.update(e),t.loc={cityName:e.city,cityCode:e.cityCode,longitude:e.mc_longitude,latitude:e.mc_latitude},t.setData({currentCity:t.loc.cityName,currentCityCode:t.loc.cityCode})}))}}))})),window.define("418",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(18)),D=x(t(16)),k=x(t(27)),P=x(t(19)),E=x(t(29)),L=x(t(15)),A=x(t(157)),O=x(t(419)),N=x(t(420)),R=x(t(141)),B=x(t(14)),j=t(26),U=t(9),M=t(421),F=t(422);function H(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var $=s(),q={title:"来百度享便捷上门服务",content:"惠生活为您提供安全放心有保障的搬家｜家政｜维修等服务",path:"channels/shop/pages/sku/index?sfrom=shareUrl&source=shareUrl"},V=0,Y=["100776_3","101379_2"];Page((0,R.default)({data:{pageTitle:"",bannerCurrent:1,isShowTopTag:!1,opacity:0,addressData:{sender:{is:"sender",addressId:"",addressText:"请选择您要搬出的地址",titleText:"搬出地址",isNoService:!1,addType:"",modile:"",name:"",jumpType:"local",jumpUrl:""},receiver:{is:"receiver",addressId:"",addressText:"请选择您要搬入的地址",titleText:"搬入地址",isNoService:!1,addType:"book",modile:"",name:"",jumpType:"local",jumpUrl:""},norms:{titleText:"服务规格",normsText:"请选择服务规格"},time:{titleText:"预约时间",timeText:"期望上门时间"},service:{is:"service",addressId:"",addressText:"请选择您的上门地址",titleText:"服务地址",isNoService:!1,addType:"",modile:"",name:"",jumpType:"local",jumpUrl:""}},introduceTab:[{text:"评价",selected:1,id:"comment"},{text:"服务简介",selected:1,id:"easy"},{text:"价格表",selected:0,id:"price"},{text:"服务流程",selected:0,id:"process"},{text:"常见问题",selected:0,id:"question"}],isMoveFamily:!1,skuIsDel:!1,stickyHight:64,pageScrollTop:0,showNormsPop:!1,showTimePop:!1,showCheckOrderPop:!1,showPaymebt:!1,chooseDateIndex:0,timeItemList:[],normsBtnText:"确定",selectnomrsprice:"false",normsSelect:[],canClickNorms:!1,normsChooseText:"",skuNumNo:!1,canPlaceOrder:!0,isSelectTime:!1,timeList:[],showSkuModal:!1,commentSwiperCurrent:0,toBeUseCoupon:[],maxSaveCoupon:[],lastCanDraw:!0,showCouponPop:!1,hoopUseCoupon:[],useCouponAfterPrice:0,showHoldPop:!1,computedDone:!1,isCost:!1,statusMap:{60:"type-expired",30:"type-received",50:"type-soldout",40:"type-used"},showTimeQuickly:!1,showNormCard:!0,extCommonData:{},showRetain:!1,hideCoupon:null,hideCouponInfo:null,retainFrom:"",showEnsurePopup:!1,recommendTitle:"",recommendList:[],lastPage:"0",recommendStatus:!1,noServiceInfo:{show:!1,text:"",jumpType:"local",jumpUrl:""},serviceTwo:"",serviceThree:"",masterShopId:""},attr:{preBcpSmartPhone:{},fmcPhoneSdkInstance:null,fmcPhoneSdkKey:"",allowShowHideCouponModal:!0,query:"",pageNum:1,fromPage:2,haveRecommend:!1},interVal:null,onInit:function(t){this.setData({masterShopId:t.masterShopId||""}),this.hasOnInit||(this.hasOnInit=!0,this.initData(t),this.firstRequest=!0)},onLoad:function(t){this.setData({opt:this.options}),this.options&&O.default.setDefaultParams({bdVid:this.options.bd_vid,query:this.options}),this.hasOnInit||(this.hasOnInit=!0,this.initData(t),this.firstRequest=!0)},onReady:function(){this.setSomeEleHeight()},onUnload:function(){clearInterval(this.interVal)},onReachBottom:function(){this.fetchRecommendList()},fetchRecommendList:function(){var t=this;if(!this.options.bd_vid&&this.attr.query&&this.attr.haveRecommend&&!+this.data.lastPage&&!this.data.recommendStatus){1!==this.attr.pageNum&&this.setData({recommendStatus:!0});var e=this.attr,n=e.query,a=e.fromPage,o=e.pageNum;this.$http.get(this.$api.MALL_INDEX,{data:{type:2,page:o,act:"recommendAreaList",query:n,fromPage:a,spuId:this.options.spuId,masterShopId:this.data.masterShopId}}).then((function(e){t.attr.pageNum+=1;var n=e.recommendTitle,a=e.lastPage,o=e.aspData,i=void 0===o?[]:o,r=e.rightData,s=void 0===r?[]:r,c=e.servData,u=void 0===c?[]:c,d=[].concat((0,A.default)(i),(0,A.default)(s),(0,A.default)(u)),l=t.data.recommendList.length;t.setData({recommendStatus:!1,recommendTitle:n,recommendList:[].concat((0,A.default)(t.data.recommendList),(0,A.default)(d)),lastPage:a},(function(){t.bindRecommendDisplay(d,l)}))})).catch((function(e){t.setData({recommendStatus:!1})}))}},bindRecommendDisplay:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=".recommend-list-";r.nextTick((function(){for(var o=function(o){var i=a+o,s=r.createIntersectionObserver(e);s.relativeToViewport().observe(i,(function(){s.disconnect(),e.$http.get(e.$api.MALL_INDEX,{data:{type:1,act:"recommendAreaList",fromPage:e.attr.fromPage,logInfo:JSON.stringify(t[o].logInfo),masterShopId:e.data.masterShopId}}),e.sendLog("recommendSku","show",(0,L.default)({order:n+o},t[o].logInfo||{}))}))},i=0;i<t.length;i+=1)o(i)}))},onRecommendClk:function(t){var e=t.currentTarget.dataset.index,n=this.data.recommendList[e];if(n&&n.xcx_params){var a=n.xcx_params,o=a.jump_url,i=a.jump_type,r=o;"local"===i&&(r+="&isRecommend=1"),this.$jump.to(r,i),this.sendLog("recommendSku","click",(0,L.default)({order:+e},n.logInfo||{}))}},sendLog:function(t,e,n){var a=this.getCommonExt();r.$log.sendNew((0,L.default)((0,L.default)({module:t},n),a),e,{},"shangMen")},handleObserver:function(){var t=this,e=[["#question","question"],["#process","process"],["#price","price"],[".comment-header-title","comment"],["#priceList","priceList"]];a((function(){var n,a=H(e);try{var o=function(){var e=n.value;t["observer-".concat(e[1])]=r.createIntersectionObserver(t),t["observer-".concat(e[1])].relativeToViewport({bottom:0,top:88}).observe(e[0],(function(n){t.sendLog(e[1],"show"),t["observer-".concat(e[1])].disconnect()}))};for(a.s();!(n=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}}),1e3)},onShow:function(){if(V=(new Date).valueOf(),!$.addrid){var t=this.data,e=t.isMoveFamily,n=t.addressData;return this.firstRequest?void(this.firstRequest=!1):e?!n.sender.info&&this.getAddressInfo():!n.service.info&&this.getAddressInfo()}this.mergeWeb()&&this.getAddressByAddId()},onHide:function(){var t=(new Date).valueOf(),e=Math.floor((t-V)/1e3);r.$log.sendNew((0,L.default)({time:e},this.getCommonExt()),"duration",{},"shangMen"),clearInterval(this.interVal)},onShareAppMessage:function(){var t=this.data,e=t.shopId,n=void 0===e?"":e,a=t.spuId,o=void 0===a?"":a,i=t.location,r=void 0===i?"":i,s=t.iscost,c=void 0===s?"":s,u=t.nonAdLocation,d=void 0===u?"":u,l=t.adLocation,h=void 0===l?"":l,p="".concat(q.path,"&shopId=").concat(n,"&spuId=").concat(o,"&location=").concat(r,"&iscost=").concat(c,"&nonAdLocation=").concat(d,"&adLocation=").concat(h,"&platform=xcx"),f=Object.assign({},q,{path:p});return(0,j.shareAppMessageUrlPatch)(f)},initData:function(t){t.id&&(t.spuId=t.id),t.shopid&&(t.shopId=t.shopid),1==+t.isFromSearch&&($.globalData.isFromSearch=+t.isFromSearch),1==+t.iscost&&this.setData({isCost:!0}),t.query&&(this.attr.query=t.query),this.attr.fmcPhoneSdkInstance=new N.default({sourceType:2003}),this.setLogFrom(t.shopId,t.spuId,t.location,t.iscost,t.adLocation,t.nonAdLocation),this.getSkuInfo(t)},closeCouponPop:function(){var t=this;this.setData({showCouponPop:!1},(function(){t.allowShowHideCouponModal()})),r.$log.send({module:"yhqfc_exit"},"click")},getCouponList:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n,a,o,i,s;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=n.shopId,o=n.spuId,i=n.supportPayType,s=n.masterShopId,e.t0=t.$http,e.t1=t.$api.ORDER_INDEX,e.t2=L.default,e.t3={act:"myCoupon",shopId:a,spuId:o,masterShopId:s,priceMode:i},e.next=7,(0,M.postBackSid)(t.options);case 7:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t6).then((function(e){var n=t.data.toBeUseCoupon,a=[],o=t.data.lastCanDraw,i=[],r=[];Array.isArray(e.couponList)&&(i=e.couponList.slice(0,3).map((function(t){return{couponBizType:t.couponBizType,label:t.showLabel}})),r=e.couponList.map((function(t){return t.isLoading=!1,50!=+t.status&&60!=+t.status||(t.btnBgOpacity="0.5"),30==+t.status&&n.push(t),40==+t.status||50==+t.status||60==+t.status?(t.bgImg="https://b.bdstatic.com/searchbox/image/gcp/20210819/3172963979.png",t.isShowBtn=!1,t.textColor="#858585",t.discountBg="linear-gradient(90deg, #FFDAD6, #FFD8D4)"):(a.push(t),t.bgImg="https://b.bdstatic.com/searchbox/image/gcp/20210817/3885092315.png",t.isShowBtn=!0,t.btnBorder=30==+t.status?"#FD503E":"",t.btnBg=30==+t.status?"#fff":20==+t.status?"#FD503E":"",t.textColor="#FD503E",t.discountBg="linear-gradient(90deg, #FFDAD6, #FFD8D4)",t.btnTextColor=20==+t.status?"#fff":"#FD503E"),t})),o=e.couponList.findIndex((function(t){return 20==+t.status}))>-1);var s=e.maxSavePrice&&parseFloat(Number(e.maxSavePrice/100).toFixed(2)),c=s.toString(),u=null==c?void 0:c.split("."),d=(0,P.default)(u,2),l=d[0],h=d[1],p=a.slice(0,3);return t.setData({newCouponLabel:i,couponList:r,assertInfo:e.assertInfo,toBeUseCoupon:n,lastCanDraw:o,maxSaveCouponList:p,maxSavePrice:s,maxSavePriceInt:l,maxSavePriceFloat:h}),Promise.resolve(1)})).catch((function(){return r.hideLoading()})));case 11:case"end":return e.stop()}}),e)})))()},drawCoupon:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return(0,E.default)(k.default.mark((function o(){var i,s;return k.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.length){o.next=25;break}return i={act:"takeCoupon",couponList:[],masterShopId:e.data.masterShopId},Array.isArray(t)?i.couponList=t:i.couponList.push(t),a&&(i.type=a),o.prev=4,o.next=7,(0,U.getSysData)();case 7:return s=o.sent,o.next=10,e.$http.post(e.$api.ORDER_INDEX,{data:(0,L.default)({zid:s.zid||""},i),noTry:!0});case 10:if(!o.sent){o.next=17;break}return r.hideLoading(),r.showToast({title:"领取优惠券成功",icon:"none"}),e.handleCouponBtnStatus(n),e.getCouponList(),o.abrupt("return",Promise.resolve());case 17:o.next=25;break;case 19:return o.prev=19,o.t0=o.catch(4),e.handleCouponBtnStatus(n),n&&r.showToast({title:"领取优惠券失败，请您重新尝试",icon:"none"}),r.hideLoading(),o.abrupt("return",Promise.reject(o.t0));case 25:case"end":return o.stop()}}),o,null,[[4,19]])})))()},handleCouponBtnStatus:function(t){if(t){var e=this.data.couponList;e[t].isLoading=!e[t].isLoading,this.setData({couponList:e})}},getLoginCodePop:function(){var t=this;(0,U.getLoginCode)().then((function(e){e.code&&(t.data.isCost&&O.default.log({convertType:12}),t.autoDrawCoupon(),t.checkEndPrice(),t.showCheckOrderPop())})).catch((function(t){r.showToast({title:"请登录您的百度账号",icon:"none"})}))},loginAndShowCheckOrderPop:function(){this.getLoginCodePop(),this.sendLog("book","click")},loginAndGetCoupon:function(){var t=this;this.disallowShowHideCouponModal(),(0,U.getLoginCode)().then((function(e){e.code?(r.showLoading({title:"正在加载...",mask:!0}),t.getCouponList().then((function(e){r.hideLoading(),Array.isArray(t.data.couponList)&&t.data.couponList.length?t.setData({showCouponPop:!0}):(t.allowShowHideCouponModal(),r.showToast({title:"优惠券走丢了，重新试试",icon:"none"}))})).catch((function(){t.allowShowHideCouponModal()}))):t.allowShowHideCouponModal()})).catch((function(e){t.allowShowHideCouponModal(),r.hideLoading(),r.showToast({title:"登录后才能领券哦",icon:"none"})})),this.sendLog("coupon","click")},getCommonExt:function(){var t=this.options,e=t.shopId,n=t.spuId,a=this.data,o=a.remarkInfo,i=void 0===o?{}:o,r=a.useCouponMinPrice,s=a.estimatedPrice;return{shop_id:e,service_id:n,is_evaluation:i.totalCount&&i.totalCount>0?1:0,service_price:r||s}},onPageScroll:function(t){var e=t.scrollTop,n=(e/80).toFixed(2),a=n>1?1:n;this.setData({pageScrollTop:e,opacity:a}),this.throttlePageScroll()},throttlePageScroll:(0,j.throttle)((function(){this.checkIntroduceHeight()}),100),setLogFrom:function(t,e,n,a,o,i){this.ubcLog={},this.ubcLog.from="".concat(t,"_").concat(e),r.$log.send((0,L.default)({module:"order-track",location:n,iscost:a,adLocation:o,nonAdLocation:i},this.getPageDetail()),"display"),this.setData({location:n,iscost:a,adLocation:o,nonAdLocation:i})},goOrderPage:function(){if(this.orderId){var t=this.options.bd_vid?"&bd_vid=".concat(this.options.bd_vid):"";B.default.to("/channels/shop/pages/order/index?orderId=".concat(this.orderId,"&iscost=").concat(this.data.isCost||"").concat(t),"local"),this.orderId=""}},getAddressByAddId:function(){var t=this,e="".concat(this.$api.SHOP_ADDRESS_BY_ID,"?addrId=").concat($.addrid,"&masterShopId=").concat(this.data.masterShopId);this.$http.get(e).then((function(e){var n=["sender","service"].includes($.addressType)?$.addressType:"receiver";t.dealAddressData(e,n),$.addrid=""})).catch((function(t){r.showToast({title:"获取地址信息失败，请重新尝试",icon:"none",mask:!0}),$.addrid=""}))},checkAddService:function(t){var e=+t.city_id,n=+t.province_id,a=this.data.supportCityList||{};return!!a.allArea||a.serviceArea.some((function(t){return t.city===e||!e&&t.province===n}))},handleAddress:function(t){var e=t.province_name+t.city_name+t.district_name+t.town_name+t.detail_addr;return this.setData({addressText:e}),e},getAddressInfo:function(){var t=this;(0,U.isLogin)()&&this.$http.get(this.$api.SHOP_ADDRESS_INFO+"?masterShopId=".concat(this.data.masterShopId)).then((function(e){var n,a=t.data.isMoveFamily?"sender":"service",o="sender"===a?"请选择您要搬出的地址":"请选择您的上门地址";switch(+e.addr_type){case 1:case 2:t.dealAddressData(e,a);break;case 3:t.setData((n={"addressData.sender.addType":"book","addressData.service.addType":"book"},(0,D.default)(n,"addressData.".concat(a,".addressText"),o),(0,D.default)(n,"addressData.".concat(a,".name"),""),(0,D.default)(n,"addressData.".concat(a,".mobile"),""),(0,D.default)(n,"addressData.".concat(a,".isNoService"),!1),(0,D.default)(n,"addressData.".concat(a,".info"),""),(0,D.default)(n,"noServiceInfo.addr",""),(0,D.default)(n,"canPlaceOrder",!0),n))}}))},dealAddressData:function(t,e){var n,a=t.addr_info,o=!this.checkAddService(a),i=this.handleAddress(a),r=this.data.noServiceInfo,s=r.jumpType,c=r.jumpUrl,u=a||{},d=u.city_id,l=u.province_id,h=u.city_name,p=u.province_name,f=c?"".concat(c,"&expand=").concat(JSON.stringify({city:h||p})):"";this.setData((n={},(0,D.default)(n,"addressData.".concat(e,".addressText"),this.handleAddress(t.addr_info)),(0,D.default)(n,"addressData.".concat(e,".addType"),"book"),(0,D.default)(n,"addressData.".concat(e,".name"),t.name),(0,D.default)(n,"addressData.".concat(e,".mobile"),t.mobile),(0,D.default)(n,"addressData.".concat(e,".isNoService"),o),(0,D.default)(n,"addressData.".concat(e,".info"),t),(0,D.default)(n,"addressData.".concat(e,".jumpUrl"),f),(0,D.default)(n,"addressData.".concat(e,".jumpType"),s),(0,D.default)(n,"noServiceInfo.addr",o?i:""),(0,D.default)(n,"noServiceInfo.realJumpUrl",f),(0,D.default)(n,"canPlaceOrder",!o),n)),o&&this.sendLog("noService","show",{skuId:this.data.skuId,serviceTwo:this.data.serviceTwo,serviceThree:this.data.serviceThree,cityId:d,provinceId:l})},getHideCoupon:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=n.shopId,o=n.spuId,i=n.masterShopId,e.t0=t.$http,e.t1=t.$api.MALL_INDEX,e.t2=L.default,e.t3={act:"hideCouponList",shopId:a,type:2,spuId:o,masterShopId:i},e.next=7,(0,M.postBackSid)(t.options);case 7:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5},e.t0.get.call(e.t0,e.t1,e.t6).then((function(e){var n=e.couponInfo,a=Array.isArray(n)&&n[0];t.setData({hideCouponInfo:a})}));case 11:case"end":return e.stop()}}),e)})))()},getSkuInfo:function(t){var e=this;return(0,E.default)(k.default.mark((function n(){var a;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.scrollEnd=!0,t.shopId&&t.spuId){n.next=4;break}return r.showModal({content:"商品id缺失，请回到商品列表重新选择",showCancel:!1}),n.abrupt("return");case 4:return a=e.$api.SHOP_SKU_INFO+"?shopId=".concat(t.shopId,"&spuId=").concat(t.spuId,"&masterShopId=").concat(e.data.masterShopId),n.t0=e.$http,n.t1=a,n.next=9,(0,M.postBackSid)(e.options);case 9:n.t2=n.sent,n.t3={data:n.t2},n.t0.get.call(n.t0,n.t1,n.t3).then((function(n){var a=(0,F.getSkuCategory)(n.categoryList),i=(0,F.handlePageData)(n);t.serviceName&&(i.nameBak=i.name,i.name=t.serviceName);var r=i.conversionSetting,s=n.preBcpSmartPhone,c=n.haveRecommend;null!=r&&r.isConsultationConversionOpen&&e.sendLog("im","show",e.getPageDetail()),null!=r&&r.isPhoneConversionOpen&&e.sendLog("phone","show",e.getPageDetail()),e.attr.query||(e.attr.query=a),c&&(e.attr.haveRecommend=!0,e.fetchRecommendList()),r&&r.phoneConversion&&s&&(e.attr.preBcpSmartPhone=s,2===s.type&&(0,U.getCuid)().then((function(t){var n=t.uid;e.attr.fmcPhoneSdkKey=e.attr.fmcPhoneSdkInstance.init({uid:s.uid,realPhones:e.getPhoneNumber(),solutionIds:s.solutionIds,baiduid:n,extraInfo:{bdVid:e.options.bd_vid}})}))),e.setData((0,L.default)((0,L.default)({},i),{},{categoryName:a,pageRender:!0}),(function(){e.getCouponList().then((function(t){e.handleObserver();var n=e.data.introduceTab.slice(1),a=0;i.remarkInfo.totalCount&&(e.setRemarkList(i.remarkInfo),n=e.data.introduceTab.slice(0,4),a=-1),e.setData({introduceTab:e.handleIntroduceData(n,a)}),["productDesc","quotation","serviceProcess"].forEach((function(t){e.judgeJSON(t)})),e.chooseNormsDefault(),e.chooseTimeItem("",!0)}));var t=e.data,n=t.sampleVal,a=t.hideCoupon||{},r=a.stayTime,s=a.stayPic,c=a.canGetHideCoupon;if(Y.some((function(t){return n.includes(t)}))&&r){var u=0;e.interVal=o((function(){++u>=+r&&e.data.hideCouponInfo&&e.attr.allowShowHideCouponModal&&(clearInterval(e.interVal),e.setData({couponRetainBg:s,retainFrom:"stay",showRetain:!0},(function(){e.recordRetain(2),e.sendLog("popups","show",{sampleVal:e.data.sampleVal})})))}),1e3)}c?e.getHideCoupon():clearInterval(e.interVal)})),e.getAddressInfo()}));case 12:case"end":return n.stop()}}),n)})))()},chooseNormsDefault:function(){var t=[],e=this.data.normsList;if(e.length>1){var n=e.map((function(e){return e.values.map((function(e,n){return 0===n&&(e.selected=1,t.push({select:!0,optionId:e.optionId,text:e.optionValue})),e})),e}));this.setData({normsList:n,normsSelect:t})}else{var a=e;a[0].values[0].selected=1,t=[{select:!0,optionId:e[0].values[0].optionId,text:e[0].values[0].optionValue}],this.setData({normsList:a,normsSelect:t})}r.setStorage({key:"cacheNormsSelect",data:(0,j.cloneDeep)(t)}),this.handleNorms(),this.handleNormsSelectList(),this.setData({"addressData.norms.normsText":this.data.normsChooseText}),this.checkEndPrice()},setRemarkList:function(t){var e=t.totalCount,n=t.hasContentCount,a=t.remarkList;e>1&&(a=n<=1?a.slice(0,1):n<=3?a.slice(0,n):a.slice(0,3),this.setData({"remarkInfo.remarkList":a}))},judgeJSON:function(t){var e=this.data[t];try{if((e=JSON.parse(e))&&"object"===(0,_.default)(e))switch(t){case"productDesc":this.setData({productDesc:e});break;case"quotation":this.setData({quotation:e});break;case"serviceProcess":this.setData({serviceProcess:e})}}catch(t){}},checkIntroduceHeight:function(){var t=this;if(this.scrollEnd){var e=this.data,n=e.stickyHight,a=e.introduceTabHight,o=e.introduceTab,i=n+a,r=this,s=[];o.forEach((function(e){s.push((0,j.findTarget)(e.id,"id",t))})),Promise.all(s).then((function(t){var e,n=(0,P.default)(t,4),a=n[0],s=n[1],c=n[2],u=n[3];e=a.top>i||a.top<i&&s.top>i?a.dataset.index:s.top<i&&c.top>i?s.dataset.index:c.top<i&&u.top>i?c.dataset.index:u.dataset.index,r.setData({introduceTab:r.handleIntroduceData(o,e)})}))}},onSwiperBannerChange:function(t){var e=t.detail.current+1;this.setData({bannerCurrent:e})},setSomeEleHeight:function(){var t=this;(0,j.findTarget)("top-fixed-bar","",this).then((function(e){t.setData({stickyHight:e.bottom})})),(0,j.findTarget)("introduceTab","",this).then((function(e){t.setData({introduceTabHight:e.height})}))},goToTabContent:function(t,e){var n=this,o=t,i=this.data,s=i.stickyHight,c=i.introduceTabHight,u=i.pageScrollTop,d=i.introduceTab;"comment"===d[0].id&&o--;var l=this.handleIntroduceData(d,o),h=this;this.scrollEnd=!1,this.setData({introduceTab:l}),r.nextTick((function(){(0,j.findTarget)(e,"id",n).then((function(t){r.pageScrollTo({scrollTop:u+t.top-s-c,duration:300,success:function(t){a((function(){h.scrollEnd=!0}),1500)}})}))}))},introduceTabTap:function(t){if(this.mergeWeb()){var e=t.currentTarget.dataset,n=e.id,a=e.selectIndex;this.goToTabContent(a,n)}},handleIntroduceData:function(t,e){return t&&t[0]&&"comment"===t[0].id?t.map((function(t,n){return t.selected=n-1==+e?1:0,t})):t.map((function(t,n){return t.selected=n===+e?1:0,t}))},foldNormCard:function(){var t=this.data.showNormCard;this.setData({showNormCard:!t})},chooseNorms:function(){this.mergeWeb()&&this.getLoginCodePop()},chooseTime:function(){var t=this,e=this.data,n=e.shopId,a=e.spuId,o=e.masterShopId;this.mergeWeb()&&(this.disallowShowHideCouponModal(),r.showLoading({title:"正在加载...",mask:!0}),this.$http.get(this.$api.MALL_INDEX,{data:{act:"skuAppointmentTime",shopId:n,spuId:a,masterShopId:o}}).then((function(e){r.hideLoading(),t.setData({timeList:e}),t.setData({showAnimate:!0,showTimePop:!0,showNormsAnimate:!0})})).catch((function(){t.allowShowHideCouponModal()})))},closeTimePop:function(){var t=this,e=this.data,n=e.chooseDateIndex,o=e.chooseTimeIndex;this.setData({showAnimate:!1,showNormsAnimate:!1}),a((function(){var e=t.chooseDateIndex,n=t.chooseTimeIndexResult;0!==e&&!Boolean(e)||0!==n&&!Boolean(n)?t.setData({showTimePop:!1},(function(){t.allowShowHideCouponModal()})):t.setData({showTimePop:!1,chooseDateIndex:t.chooseDateIndex,chooseTimeIndex:t.chooseTimeIndexResult},(function(){t.allowShowHideCouponModal()}))}),300),0===n&&0===o?this.setData({showTimeQuickly:!0}):this.setData({showTimeQuickly:!1}),this.getLoginCodePop()},useCoupon:function(){this.selectComponent("#skuCoupon").closeCouponPop(),this.showCheckOrderPop()},showCheckOrderPop:function(){if(!this.checkSkuIsDel()){var t=this.data;t.isMoveFamily,t.addressData;this.disallowShowHideCouponModal(),this.setData({isInPop:!0,showAnimate:!1,showNormsAnimate:!1,showCheckOrderPop:!0}),this.sendLog("pay","show")}},closeCheckOrderPop:function(){var t=this,e=new Date,n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();(o<8||o>=8&&i<31)&&2021==+n?this.$http.post(this.$api.ORDER_INDEX,{data:{act:"judgeFlag",method:"get",activity:"homeClean",masterShopId:this.data.masterShopId}}).then((function(e){e.success?(t.setData({showAnimate:!0,showNormsAnimate:!1},(function(){a((function(){t.setData({showHoldPop:!0})}),300)})),t.$http.post(t.$api.ORDER_INDEX,{data:{act:"judgeFlag",method:"set",activity:"homeClean",masterShopId:t.data.masterShopId},noTry:!0})):(t.setData({isInPop:!1,showAnimate:!0,showNormsAnimate:!1}),a((function(){t.setData({showCheckOrderPop:!1},(function(){t.allowShowHideCouponModal()}))}),300))})):(this.setData({isInPop:!1,showAnimate:!0,showNormsAnimate:!1}),a((function(){t.setData({showCheckOrderPop:!1},(function(){t.allowShowHideCouponModal()}))}),300))},useCouponAgain:function(){this.disallowShowHideCouponModal(),this.setData({showHoldPop:!1,showCheckOrderPop:!0,showAnimate:!1})},closeAllPop:function(){var t=this;this.setData({showAnimate:!0,showNormsAnimate:!1,isInPop:!1,fromCheckOrder:!1,showHoldPop:!1}),a((function(){var e=t.chooseDateIndex,n=t.chooseTimeIndexResult;0!==e&&!Boolean(e)||0!==n&&!Boolean(n)?t.setData({showNormsPop:!1,showTimePop:!1,showCheckOrderPop:!1},(function(){t.allowShowHideCouponModal()})):t.setData({showNormsPop:!1,showTimePop:!1,showCheckOrderPop:!1,chooseDateIndex:t.chooseDateIndex,chooseTimeIndex:t.chooseTimeIndexResult},(function(){t.allowShowHideCouponModal()}))}),300)},chooseDate:function(t){var e=t.currentTarget.dataset.index;this.setData({chooseDateIndex:e,chooseTimeIndex:null,timeScrollTop:0}),e===this.chooseDateIndex&&this.setData({chooseTimeIndex:this.chooseTimeIndexResult})},chooseTimeItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&!n){var a=t.currentTarget.dataset.index;this.setData({chooseTimeIndex:a,chooseTimeIndexResult:a})}else this.setData({chooseTimeIndex:0,chooseTimeIndexResult:0,showTimeQuickly:!0});r.nextTick((function(){var n=e.data,a=n.timeList,o=n.chooseDateIndex,i=n.chooseTimeIndexResult,r=a[o].title,s=a[o].list[i].text.split("-")[0];e.setData({"addressData.time.timeText":"".concat(r," ").concat(s),isSelectTime:!0,timeScrollTop:null}),t&&e.setData({showNormCard:!0}),e.chooseDateIndex=o,e.chooseTimeIndexResult=i,e.firstSelectTime&&e.closeTimePop(),e.firstSelectTime=!0}))},normsComputed:function(t){var e=this,n=t.currentTarget.dataset,o=n.parent,i=n.index;this.sendLog("norms-select","click",{index:i});var s=this.data,c=s.normsList,u=s.normsSelect;c[o].values=this.data.normsList[o].values.map((function(t,e){return e===i?(t.selected=1,u[o]={select:!0,optionId:t.optionId,text:t.optionValue}):t.selected=0,t})),(0===u.length||u.every((function(t){return!t})))&&this.setData({priceType:!0}),this.setData({normsList:c,normsSelect:u}),r.nextTick((function(){e.handleNorms(),a((function(){1==+e.data.supportPayType&&e.autoDrawCoupon()}),300),e.handleNormsSelectList()}))},couponComputed:function(t){var e={},n=this.data,a=n.supportPayType,o=n.couponList;Array.isArray(o)&&o.forEach((function(n){1!==n.share&&(1===n.couponBizType&&n.stock>0&&1===n.ableUse&&(4==+a||1==+a&&n.fullPrice/100<=t)?e.platform&&e.platform.cutPrice<n.salePrice/100?e.platform={useCouponPrice:t-n.salePrice/100,couponId:n.batchId,cutPrice:n.salePrice/100,couponStatus:n.status}:e.platform||(e.platform={useCouponPrice:t-n.salePrice/100,couponId:n.batchId,cutPrice:n.salePrice/100,couponStatus:n.status}):2===n.couponBizType&&n.stock>0&&1===n.ableUse&&(4==+a||1==+a&&n.fullPrice/100<=t)&&(e.shop&&e.shop.cutPrice<n.salePrice/100?e.shop={useCouponPrice:t-n.salePrice/100,couponId:n.batchId,cutPrice:n.salePrice/100,couponStatus:n.status,showTitle:n.showTitle}:e.shop||(e.shop={useCouponPrice:t-n.salePrice/100,couponId:n.batchId,cutPrice:n.salePrice/100,couponStatus:n.status,showTitle:n.showTitle})))})),Array.isArray(this.data.couponList)&&this.data.couponList.forEach((function(n){1===n.share&&30===n.statsu&&(n.salePrice/100>e.platform.cutPrice&&(e.platform={useCouponPrice:t-n.salePrice/100,couponId:n.batchId,cutPrice:n.salePrice/100,couponStatus:n.status}))}));var i=(t-(e.platform?e.platform.cutPrice:0)-(e.shop?e.shop.cutPrice:0)).toFixed(2);this.setData({hoopUseCoupon:e,useCouponAfterPrice:i>=0?i:0,useCouponAfterAndEndPrice:(+this.data.endPrice+ +i).toFixed(2),computedDone:!0})},handleNormsSelectList:function(){var t=this.data.normsSelect.reduce((function(t,e,n){return 0===n?e&&e.text&&(t+=e.text):t+=""===t?e.text:", ".concat(e.text),t}),"");t&&this.setData({normsChooseText:t,"addressData.norms.normsText":t}),this.firstHandleNormsSelect&&this.data.showCheckOrderPop&&this.checkEndPrice(),this.firstHandleNormsSelect=!0},formatPrice:function(t){var e=(t&&parseFloat(Number(t).toFixed(2))).toString(),n=null==e?void 0:e.split("."),a=(0,P.default)(n,2);return[a[0],a[1]]},handleNorms:function(){var t=this,e=this.data,n=e.normsSelect,a=e.normsList,o=e.normsNumList,i=e.supportPayType,s=e.estimatedPrice;if(n.length===a.length&&n.every((function(t){return t&&t.select})))o.forEach((function(e){var a=[];e.value.forEach((function(t,e){n[e].optionId===t.optionId&&a.push(!0)}));var o=t.formatPrice(e.estimatedPrice),s=(0,P.default)(o,2),c=s[0],u=s[1];a.length===n.length&&(e.nums>0?t.setData({skuId:e.skuId,priceType:!1,price:e.salePrice,normsBtnText:4==+i?"确定":"立即预约",noNormsNumClick:!1,skuNumNo:!1,selectnomrsprice:!0,estimatedPrice:e.estimatedPrice,endPricedInt:c,endPricedFloat:u,showEndPrice:(e.estimatedPrice-t.data.endPrice).toFixed(2)},(function(){t.data.useCouponMinPrice&&(4===t.data.supportPayType?t.couponComputed(e.estimatedPrice-e.salePrice):t.couponComputed(e.estimatedPrice))})):(r.showToast({title:"当前服务暂无库存，请选择其他服务",icon:"none"}),t.setData({normsBtnText:"当前服务暂无库存，提醒商家补充",priceType:!1,price:e.salePrice,noNormsNumClick:!1,skuNumNo:!0,estimatedPrice:e.estimatedPrice,endPricedInt:c,endPricedFloat:u,selectnomrsprice:!0})))})),this.setData({canClickNorms:!0});else{var c=this.formatPrice(s),u=(0,P.default)(c,2),d=u[0],l=u[1];this.setData({canClickNorms:!1,selectnomrsprice:!1,estimatedPrice:s,endPricedInt:d,endPricedFloat:l})}},afterDrawCoupon:function(){this.getCouponList(),this.checkEndPrice(),!this.data.isInPop&&this.data.fromCheckOrder&&(this.disallowShowHideCouponModal(),this.setData({showCheckOrderPop:!0,showAnimate:!1,isInPop:!0}))},checkEndPrice:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n,a,o,i,r,s,c,u;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=n.skuId,o=n.spuId,i=n.estimatedPrice,r=n.price,s=n.shopId,c=n.supportPayType,u=n.masterShopId,e.t0=t.$http,e.t1=t.$api.ORDER_INDEX,e.t2=L.default,e.t3={act:"calculatePrice",salePrice:100*i,restPrice:100*(i-r),skuId:a,spuId:o,shopId:s,masterShopId:u,priceMode:c},e.next=7,(0,M.postBackSid)(t.options);case 7:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5},e.t0.post.call(e.t0,e.t1,e.t6).then((function(e){Array.isArray(e.discountPrice)&&e.discountPrice.forEach((function(t){var e=t.price&&parseFloat(t.price/100).toFixed(2),n=null==e?void 0:e.split("."),a=(0,P.default)(n,2);t.priceInt=a[0],t.priceFloat=a[1]}));var n=t.formatPrice(e.payAmount/100),a=(0,P.default)(n,2),o=a[0],i=a[1];t.setData({serverComputedPrice:e.payAmount.toString(),serverComputedPriceInt:o,serverComputedPriceFloat:i,discountPrice:e.discountPrice?e.discountPrice:null,overUseCoupon:e.coupons},(function(){var n=0;e.discountPrice&&e.discountPrice.forEach((function(t){n+=t.price})),t.setData({allCutPrice:n&&n.toFixed(2)})}))}));case 11:case"end":return e.stop()}}),e)})))()},checkIsNoService:function(t,e){return!(t&&(e.sender.isNoService||e.receiver.isNoService)||e.service.isNoService)||(r.showToast({title:"抱歉，该地址暂未在商家的服务范围内",icon:"none",mask:!0}),!1)},checkAddress:function(t,e,n){var a=this.data.addressData;if(!this.checkIsNoService(t,a))return!1;if(t){if(!e||e.length<10)return r.showToast({title:"请填写搬出地址",icon:"none",mask:!0}),!1;if(!n||n.length<10)return r.showToast({title:"请填写搬入地址",icon:"none",mask:!0}),!1}else if(!e||e.length<10)return r.showToast({title:"请完善地址信息",icon:"none",mask:!0}),!1;return!0},checkNorms:function(){var t=this.data,e=t.normsSelect,n=t.normsList,a=t.addressData;return e.length===n.length&&e.every((function(t){return t&&t.select}))?!(!a.norms.normsText||"请选择服务规格"===a.norms.normsText)||(r.showToast({title:"请确认规格选择",icon:"none",mask:!0}),!1):(r.showToast({title:"请选择完整规格",icon:"none",mask:!0}),!1)},postBackSid:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.getSysData)();case 2:return n=e.sent,e.abrupt("return",{iscost:t.options.iscost,sid:n.sid});case 4:case"end":return e.stop()}}),e)})))()},doPlaceOrder:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n,a,o,i,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,x,_,D,P,E,A,N,R,B,j,U,F,H,G,$;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.data,o=a.isMoveFamily,i=a.addressData,c=a.shopId,u=a.masterShopId,d=a.skuId,l=a.spuId,h=a.chooseDateIndex,p=a.timeList,f=a.cateId,g=a.supportPayType,m=a.isSelectTime,v=a.price,w=a.chooseTimeIndexResult,b=a.ucId,y=a.shopContent,T=a.conversionSetting,S=a.location,I=a.iscost,C=a.nonAdLocation,x=a.adLocation,_=a.estimatedPrice,D=a.overUseCoupon,P=a.sampleVal,E=a.iconId,A=s().globalData,N=A.xfrom,R=A.sfrom,B=A.enterQid,r.showToast({title:"sfrom"+R,mask:!0,icon:"loading",duration:2e4}),j=t.options,U=j.bd_vid,F=j.srcid,H=j.source,G=o?JSON.stringify(i.sender.info):JSON.stringify(i.service.info),$=o?JSON.stringify(i.receiver.info):"",t.checkAddress(o,G,$)){e.next=8;break}return e.abrupt("return");case 8:if(t.checkNorms()){e.next=10;break}return e.abrupt("return");case 10:if(m){e.next=13;break}return r.showToast({title:"请选择预约时间",icon:"none",mask:!0}),e.abrupt("return");case 13:return t.data.isCost&&O.default.log({convertType:7}),r.showToast({title:"订单生成中...sfrom"+R,mask:!0,icon:"loading",duration:2e4}),e.t0=t.$http,e.t1=t.$api.ORDER_INDEX,e.t2=L.default,e.t3={act:"submitOrder",appointmentDate:null===(n=p[h])||void 0===n?void 0:n.data,appointmentTime:p[h].list[w].text,shopName:y.shopName,ucid:b,fromAddr:G,toAddr:$,shopId:c,masterShopId:u,skuId:d,spuId:l,cateId:f,supportPayType:g,location:S,iscost:I,adLocation:x,nonAdLocation:C,sampleVal:P,conversionSetting:JSON.stringify(T),originalPrice:100*_,restPrice:4===g?100*(_-v):0,coupons:D,iconId:E,isRecommend:t.options.isRecommend,xfrom:N,sfrom:R,qid:B,srcid:F,bd_vid:U,cmatch:U?"1629":void 0,buy_order:H},e.next=21,(0,M.postBackSid)(t.options);case 21:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5,noTry:!0},e.t0.post.call(e.t0,e.t1,e.t6).then((function(e){if(r.hideToast(),t.orderId=e.orderId,t.closeAllPop(),t.data.isCost&&O.default.log({convertType:14}),0!=+v&&0!==e.payAmount){var n=t;r.requestPolymerPayment({orderInfo:e.payInfo,success:function(){n.data.isCost&&O.default.log({convertType:10}),n.goOrderPage()},fail:function(){n.goOrderPage()}})}else t.goOrderPage()})).catch((function(t){r.hideToast(),r.showToast({title:"创建订单失败，请重新尝试",icon:"none",mask:!0})})),t.sendLog("yy-pay","click",{sampleVal:t.data.sampleVal});case 26:case"end":return e.stop()}}),e)})))()},checkSkuIsDel:function(){return!!this.data.skuIsDel&&(r.showToast({mask:!0,icon:"none",title:"商品已下架,请选择其他商品"}),!0)},checkAddressByLogin:function(){this.getAddressInfo()},closeEnsurePopupFn:function(){var t=this;r.$log.send({module:"sku-close-ensure-pop",sampleVal:this.data.sampleVal},"click"),this.setData({showEnsurePopup:!1},(function(){t.allowShowHideCouponModal()}))},showEnsurePop:function(){this.sendLog("guarantee","click"),this.disallowShowHideCouponModal(),this.setData({showEnsurePopup:!0})},mergeWeb:function(){var t=this.data,e=t.shopId,n=t.spuId,a=t.location,o=t.iscost,i=t.nonAdLocation,r=t.adLocation;return"web"!==(0,U.getSystemInfo)().platform||(this.$jump.openNA("".concat(q.path,"&shopId=").concat(e,"&spuId=").concat(n,"\n            &location=").concat(a,"&iscost=").concat(o,"&nonAdLocation=").concat(i,"&adLocation=").concat(r)),!1)},getPageDetail:function(){return{merchant_rank:this.options.location,shop_id:this.options.shopId,buy_order:this.options.source,srcid:this.options.srcid,bd_vid:this.options.bd_vid,cmatch:this.options.bd_vid?"1629":void 0}},toggleSkuModal:function(t){this.data.isCost&&O.default.log({convertType:2}),this.setData({showSkuModal:t.currentTarget.dataset.showModal}),this.sendLog("phone-popup","show",this.getPageDetail()),this.sendLog("phone","click",this.getPageDetail())},getPhoneNumber:function(){if(!this.data.conversionSetting||!this.data.conversionSetting.phoneConversion)return"";var t=this.data.conversionSetting.phoneConversion,e=t.beforeSalesPhone,n=t.afterSalesPhone,a=t.mobilePhoneNumber,o=t.fixedPhoneNumber,i=t.realPhoneNum;return e||n||a||o||i},makePhone:function(){var t=this;return(0,E.default)(k.default.mark((function e(){var n,a,o,i,s,c,u,d,l,h,p,f,g;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==t||null===(n=t.data)||void 0===n||null===(a=n.conversionSetting)||void 0===a||null===(o=a.phoneConversion)||void 0===o?void 0:o.isCost)&&O.default.log({convertType:18}),i=t.getPhoneNumber(),s=t.attr,c=s.preBcpSmartPhone,u=s.fmcPhoneSdkKey,d=s.fmcPhoneSdkInstance,l=c.type,h=c.uid,p=c.solutionIds,!(2===l&&h&&p&&d)){e.next=13;break}return e.next=8,(0,U.getCuid)();case 8:f=e.sent,g=f.uid,d.getCallNumber({uid:h,realPhone:i,solutionId:p,key:u,baiduid:g,extraInfo:{bdVid:t.options.bd_vid}}).then((function(t){var e=t.virtualPhone;r.makePhoneCall({phoneNumber:e})}),(function(){r.makePhoneCall({phoneNumber:i})})),e.next=14;break;case 13:r.makePhoneCall({phoneNumber:i});case 14:t.sendLog("phone-popup","click",t.getPageDetail());case 15:case"end":return e.stop()}}),e)})))()},autoDrawCoupon:function(){var t=this,e=[];Object.values(this.data.hoopUseCoupon).forEach((function(t){30!==t.couponStatus&&e.push(t.couponId)})),e.length&&(r.showLoading({title:"正在领取优惠券",mask:!0}),this.drawCoupon(e).then((function(e){t.afterDrawCoupon()})).catch((function(e){t.afterDrawCoupon()})))},drawCouponOrder:function(){this.autoDrawCoupon(),this.loginAndShowCheckOrderPop()},jumpCommentDetail:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpType,o=e.listLoc,i=n,r=this.data,s=r.shopId,c=r.spuId,u=r.masterShopId;i="".concat(i,"?shopId=").concat(s,"&spuId=").concat(c,"&masterShopId=").concat(u),o&&(i+="&listLoc=".concat(o)),B.default.to(i,a)},swiperChangeCustom:function(t){var e=t.detail.current;this.setData({swiperHeight:this.data.remarkInfo.remarkList[e].height}),this.setData({commentSwiperCurrent:e})},addBsLog:function(){this.data.isCost&&O.default.log({convertType:1}),this.sendLog("im","click",this.getPageDetail())},goToPrice:function(){this.sendLog("priceList","click");var t=this.data.introduceTab.findIndex((function(t){return"price"===t.id}));this.goToTabContent(t,"price")},hidePopup:function(){this.sendLog("popups-jujue","click",{sampleVal:this.data.sampleVal}),this.setData({showRetain:!1})},getRetainCoupon:function(){var t=this;this.sendLog("popups-lingqu","click",{sampleVal:this.data.sampleVal}),r.showLoading({title:"正在领取优惠券",mask:!0});var e=this.data.hideCouponInfo.batchId;this.drawCoupon(e,"","hideCoupon").then((function(e){t.setData({showRetain:!1}),t.getCouponList(),t.checkEndPrice(),t.showCheckOrderPop()})).catch((function(e){var n="领取失败了，请重试一次吧";90008026!=+e.code&&90008029!=+e.code||(n="您已领取过，不能领取了哦",t.setData({showRetain:!1})),r.showToast({title:n,icon:"none"})}))},clickLeave:function(){this.hidePopup()},clickMask:function(){this.hidePopup()},recordRetain:function(t){this.$http.get(this.$api.MALL_INDEX,{data:{act:"writeRate",type:t,masterShopId:this.data.masterShopId}})},allowShowHideCouponModal:function(){this.attr.allowShowHideCouponModal=!0},disallowShowHideCouponModal:function(){this.attr.allowShowHideCouponModal=!1}}))})),window.define("420",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var x=C(t(18));function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function R(t,e){if(e&&("object"===(0,x.default)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=A(t);if(e){var o=A(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R(this,n)}}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var M={JMY:1001,JMY_MEDICAL_ACCOUNT:4003,JMY_MEDICAL_PAGE:4004,CONSULT_LP:26001,BAOZHANG_PC:33001,BAOZHANG_PASS:33002,BAOZHANG_WISE:33003,ZHIDAO_LP:16001,VUI:19002,PC:39001,HEALTH_SWAN:41001,HAOZHUYE_H5:37001,ALADDIN_VUI:45001,ALADDIN_SERVIECE:45002},F={0:"companyName",1:"brandName"},H="show",G="click",$={SMARTLP:1,AIPAGE:2,NA:3,JIMUYU:4,THIRD:5,PREVIEW:6,BAOZHANG:7,OTHER:0},q=["preview-sjh-offline.baidu.com","preview-sjh-preonline.baidu.com","preview-sjh.baidu.com","audit-sjh-offline.baidu.com","audit-sjh-preonline.baidu.com","audit-sjh.baidu.com","sjh-offline.baidu.com"],V="https://leads.baidu.com",Y="4",z="5",W="3",K="1",J="swan",Q="jmy",X="hn",Z=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=0;e<q.length;e++)if(-1!==t.indexOf(q[e]))return!0;return!1},tt=function(t){return[M.VUI].includes(+t)},et=function(t){return[M.JMY_MEDICAL_ACCOUNT,M.JMY_MEDICAL_PAGE].includes(+t)};function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.location,a=new RegExp("(^|&|\\?)"+t+"=([^&]*)(&|$)");try{var o=n[e].substr(1).match(a);return null!=o?unescape(o[2]):null}catch(t){return null}}function at(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.location.href,e=t.split("?").length>1?t.split("?")[1]:null;if(!e)return{};var n={},a=e.split("&");return a.forEach((function(t){var e=j(t.split("="),2),a=e[0],o=void 0===a?"":a,i=e[1],r=void 0===i?"":i;n[o]=r})),n}function ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.location;return nt(t,"search",e)||nt(t,"hash",e)}function it(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),n=c.cookie.match(e);return n?unescape(n[2]):null}function rt(t){var e=c.referrer,n=new RegExp("(\\?|&)"+t+"=[^&]*");return n.test(e)?e.match(n)[0].split("=")[1]:null}var st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==t.indexOf("baidu.php")},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c&&c.referrer||"";return st(t)},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c&&c.referrer||"";if(!ct())return"";var e=/url=([^\.]+\.)([^\.]+\.)([^&]+)/,n=/sc\.([^\.]+\.)([^\.]+\.)([^&]+)/;return e.test(t)?e.exec(t)[3]:n.test(t)?n.exec(t)[3]:""},dt=function(t){return!t&&0!==t},lt=function(t){var e=t.url,n=t.sourceType,a=t.userType;return function(t){return[M.BAOZHANG_PC,M.BAOZHANG_PASS,M.BAOZHANG_WISE].indexOf(+t)>=0}(n)?$.BAOZHANG:Z(e)?$.PREVIEW:a===Q?$.JIMUYU:$.OTHER},ht=function(t){var e=t.expInfo,n=t.userType,a="";e&&(a=e);try{if(n===Q)a=it(s.location.pathname.split("/").pop())||""}catch(t){}return a},pt=function(t){var e=t.channel,n=t.ch,a=t.kDomain,o=t.url,i=t.fid,r=t.userType,s=-1!==r.indexOf(J),c=r===Q;return s||r===X||!dt(e)||a?e:c&&n&&i?function(t){var e;return(L(e={},W,W),L(e,Y,K),e)[t]||t}(n):at(o).channel?at(o).channel:Z(o)?z:Y},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceType,a=void 0===n?"":n,o=e.userType,i=e.infos,r=void 0===i?{}:i,s=e.cusConf,c=-1!==o.indexOf(J),u=-1!==o.indexOf(X),d=r.url,l=t.sid,h=void 0===l?"":l,p=t.kDomain,f=void 0===p?c||u?"":ut():p,g=t.channel,m=void 0===g?"":g,v=t.query,w=void 0===v?"":v,b=t.busSiteId,y=void 0===b?"":b,T=t.busPageId,S=void 0===T?"":T,I=t.fid,C=void 0===I?c||u?"":ot("fid"):I,x=t.ch,_=void 0===x?c||u?"":ot("ch"):x,k=t.spid,P=void 0===k?c||u?"":ot("spid"):k,E=t.xst,L=void 0===E?c||u?"":ot("xst"):E,A=t.uid,O=void 0===A?"":A,N=t.from,R=void 0===N?"lp":N,B=t.mode,j=void 0===B?"show":B,U=t.type,F=void 0===U?void 0:U,H=t.extraInfo,G=void 0===H?null:H,q=t.expInfo,V=void 0===q?null:q,Y=t.pvid,z=void 0===Y?"":Y,W=t.baiduid,K=void 0===W?"":W,Q=t.showCallNum,Z=t.solutionId&&!t.solutionIds?t.solutionId:t.solutionIds,tt=t.realPhone&&!t.realPhones?t.realPhone:t.realPhones,et=function(t){if(c||u)return t;var e=t||rt("cegduid")||rt("cegduid")||rt("cegduid")||rt("BD_FC_UID");return e?String(e):""},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(c||u)return t;var e=t||it("BAIDUID")||it("BAIDUID_BFESS")||"";return e},at=D({solutionIds:dt(Z)?"":String(Z),realPhones:dt(tt)?"":String(tt),sourceType:a,mode:j,extraInfo:G,url:d,referrer:r.referrer,lpType:lt({url:d,sourceType:a,type:F,userType:o}),expInfo:ht({url:d,expInfo:V,userType:o}),channel:pt({channel:m,ch:_,fid:C,kDomain:f,url:d,userType:o}),uid:et(O),baiduid:nt(K),sid:h?String(h):"",kDomain:f,query:w,busSiteId:y,busPageId:S,pageid:"p"+(new Date).getTime().toString(16)+parseInt(1e6*Math.random(),10).toString(16),siteid:h?String(h):"",fid:C,ch:_,spid:P,xst:L,from:R,pvid:z,showCallNum:Q},s),st=-1!==[M.HAOZHUYE_H5,M.CONSULT_LP,M.ZHIDAO_LP,M.BAOZHANG_PC,M.BAOZHANG_PASS,M.BAOZHANG_WISE,M.ALADDIN_VUI,M.ALADDIN_SERVIECE].indexOf(at.sourceType),ct=-1!==[$.JIMUYU,$.PREVIEW].indexOf(at.lpType);return at.fromAd=!!(c||u||"ad"===at.from||at.kDomain||at.fid||at.spid||at.xst||st||ct),at},gt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"object"===k(t)?(t.key=t.key||t.uid||t.sid,t):{realPhone:t,key:e}},mt=function(t){return t&&"string"==typeof t?JSON.parse(t):t},vt="86";function wt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/-/g,"").replace(/\+/g,"").replace(/\s/,"")}function bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,n="+".concat(e);return 0===t.indexOf(n)?t.substring(3):0===t.indexOf(e)?t.substring(2):t}function yt(t,e){if((t=bt(wt(t)))===(e=bt(wt(e))))return!0;var n=t.indexOf(e),a=e.indexOf(t);return(3===n||4===n)&&0===t.indexOf("0")||(3===a||4===a)&&0===e.indexOf("0")}function Tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e?e.split("|"):[],a=n.filter((function(e){return yt(t,e)}));return!!a.length}var St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{virtualPhone:e,realPhone:e,solutionId:n,key:t,phoneAntiCheatConf:null,openPopUps:null}},It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return t.dynamicPhone||t.virtualPhone||e},Ct=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.realPhone,o=t.solutionId,i=t.key,r=t.sourceType;if(!e||!e.length)return St(i,a,o);var s=tt(r)||et(r)||n.multiMatch,c=e.filter((function(t){return s&&+t.solutionId==+o||Tt(a,t.realPhone)})),u=c&&c.length?c[0]:{};return u},xt=function(t,e){var n=t.realPhone,a=void 0===n?"":n,o=t.solutionId,i=t.key,r=e.sourceType,s=e.numberStore[i]||[],c=tt(r)||et(r)||e.multiMatch,u=Ct(D(D({},t),{},{sourceType:r}),s,e),d=mt(u),l=d[F[d.companyNameType]||"companyName"]||"";return{key:i,solutionId:o,realPhone:!a&&c&&u?u.realPhone:a,virtualPhone:It(u,a),phoneAntiCheatConf:mt(u.phoneAntiCheatConf)||null,openPopUps:u.openPopUps||null,companyNameType:d.companyNameType||"",companyName:l}},_t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a={};e instanceof Array&&e.length?a=e[0]:"object"!==k(e)||e instanceof Array||(a=e||{});var o=xt(t,n),i=a.dynamicPhone||"";return D(D({},o),i?{virtualPhone:i}:{})},Dt={};var kt={setGlobalStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===k(t)&&(Dt=D(D({},Dt),t))},getGlobalStore:function(t){return Dt[t]},globalStore:Dt},Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uid,n=t.sid,a=t.mode,o=void 0===a?"":a,i=t.solutionIds,r=void 0===i?"":i,s=t.realPhones,c=void 0===s?"":s;if(!e&&!n)return null;var u=e||n;return u+=r.replace(/![0-9,a-z,A-z]/g,"")+c.replace(/![0-9,a-z,A-z]/g,"")+(o||"")},Et="identity",Lt="number",At={status:100,errors:"fmc-phone-sdk: 用户来源不明"},Ot={status:101,errors:"fmc-phone-sdk: 非广告渠道"},Nt={status:103,errors:"fmc-phone-sdk: log请求构建失败"},Rt=1,Bt=2,jt=3,Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.reqType;if(t)return"".concat(t,"/").concat(e);var o="jsonp"===a?"https://ada.baidu.com":V;return"".concat(o,"/").concat(e)},Mt={show:"internal/virtualPhone/getPhone",click:"internal/virtualPhone/clickPhone",bcp:"phone-tracker/getNumber"};function Ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.reqType,o=e.requester,i=e.sdkHost,r=void 0===i?"":i,s=n.mode,c=void 0===s?"show":s,u="jsonp"===a?Mt.bcp:Mt[c||"show"],d=Ut(r,u,{reqType:a});return o({data:D(D({},t),{},{sdkVersion:"newSDK"}),path:d})}var Ht={status:{status:4,errors:"fmc-phone-sdk: getNumber请求失败"}.status,data:[]},Gt={status:{status:5,errors:"fmc-phone-sdk: 点击换号手动超时"}.status,data:[]};function $t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.url,i=t.siteid,r=t.pageid,s=void 0===r?"":r,c=t.uid,u=t.channel,d=t.query,l=t.solutionIds,h=t.reqMd5,p=void 0===h?"":h,f=t.kDomain,g=t.fid,m=t.spid,v=t.xst,w=t.expInfo,b=t.busSiteId,y=void 0===b?"":b,T=t.busPageId,S=void 0===T?"":T,I=t.baiduid,C=void 0===I?"":I,x=t.realPhones,_=void 0===x?"":x,k=t.showCallNum,P=void 0===k?"":k,E=t.extraInfo,L=void 0===E?{}:E,A=t.mode,O=e.infos,N=void 0===O?{}:O,R=e.waitTime,B=N.locationInfo,j=void 0===B?{}:B,U=j.result||{},M={mode:A,baiduid:C,useridInBase64:c,siteid:i,channel:u,query:d,reqMd5:p,solutionIds:l,realPhones:_.split("|").map((function(t){return wt(bt(t))})).join("|"),extraInfo:D(D({},U),{},{pageid:s,fid:g,spid:m,xst:v,expInfo:w,busSiteId:y,busPageId:S,showCallNum:P,passid:"",kdomain:f,sourceType:e.sourceType||"",lpUrl:e.domainInverse?e.domainInverse(o):o},L||{})};return e._setStore(t.key,{status:Rt}),new Promise((function(o,i){var r=null;"click"===A&&(r=a((function(){o(Gt),e._setStore(t.key,{status:jt})}),R)),Ft(M,e,n).then((function(n){clearTimeout(r),e._setStore(t.key,{status:Bt}),o(n)})).catch((function(n){clearTimeout(r),e._setStore(t.key,{status:jt}),o(Ht)}))}))}var qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.hector,a=it("BAIDUID_BFESS")||"",o=it("BCLID_BFESS")||"",i=it("BIDUPSID")||"",r=it("BAIDUCUID")||"",s=it("BAIDULOC")||"",u=n&&n.getData?n.getData():"",d=c.referrer||"",l=h.userAgent,p=e.pvid||"",f=(new Date).getTime();return D({baiduId:a,logId:o,baiduPsId:i,cuid:r,baHector:u,baiduLoc:s,referrer:d,ua:l,pvId:p,clickTime:f},t)},Vt={online:"internal/verify/userCheck",preonline:"internal/verify/userCheck",offline:"test/verify/userCheck",bcp:"identityUserCheck"},Yt={passCheck:!0,status:2};function zt(t,e){var n=t.uid,a=void 0===n?"":n,o=t.busSiteId,i=void 0===o?"":o,r=t.busPageId,s=void 0===r?"":r,c=t.url,u=void 0===c?"":c,d=e.reqType,l=e.requester,h=e.sdkHost,p=void 0===h?null:h,f="jsonp"===d?Vt.bcp:Vt[e.env||"online"],g=Ut(p,f,{reqType:d});return l({data:qt({useridInBase64:a,siteId:i,pageId:s,lpUrl:u},e),path:g}).then((function(t){return 0===t.status?t:Yt})).catch((function(t){return Yt}))}var Wt={online:"internal/verify/createVerifyInfo",preonline:"internal/verify/createVerifyInfo",offline:"test/verify/createVerifyInfo",bcp:"identityCreateVerify"};function Kt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.uid,o=void 0===a?"":a,i=e.reqType,r=e.requester,s=e.sdkHost,c=void 0===s?"":s,u=n.onLoad,d=void 0===u?function(){}:u,l=qt({useridInBase64:o},e),h="jsonp"===i?Wt.bcp:Wt[e.env||"online"],p=Ut(c,h,{reqType:i});return"function"==typeof d&&d(),r({data:l,path:p})}var Jt={online:"internal/verify/checkVerifyInfo",preonline:"internal/verify/checkVerifyInfo",offline:"test/verify/checkVerifyInfo",bcp:"identityCheckVerify"};function Qt(t,e){var n=t.uid,a=void 0===n?"":n,o=t.coordinate,i=void 0===o?0:o,r=e.reqType,s=e.requester,c=e.sdkHost,u=void 0===c?"":c,d=e.globalStoreUtils.getGlobalStore,l="jsonp"===r?Jt.bcp:Jt[e.env||"online"],h=Ut(u,l,{reqType:r});return s({data:qt({useridInBase64:a,verifyIdentifyCode:d("".concat(a,"Code"))||"",coordinate:i},e),path:h})}var Xt=["verifyIdentifyCode"],Zt=2,te=1,ee=0,ne=0,ae=2,oe={status:2,data:{}};function ie(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.globalStoreUtils,o=a.setGlobalStore,i=n.onLoad,r=void 0===i?function(){}:i,s=n.onSuccess,c=void 0===s?function(){}:s,u=n.onError,d=void 0===u?function(){}:u,l=t.uid;return Kt(t,e,{onLoad:r}).then((function(t){var e,n=t.data,a=void 0===n?{}:n,i=t.status,r=a.verifyIdentifyCode,s=void 0===r?"":r,u=N(a,Xt);return i?(o(L({},"".concat(l,"CodePulled"),!1)),d(oe),oe):(c({status:ne,data:u}),o((L(e={},"".concat(l,"Code"),s),L(e,"".concat(l,"Image"),a.pictureBase64||""),L(e,"".concat(l,"BackgroundImage"),a.bkPictureBase64||""),L(e,"".concat(l,"CodePulled"),!0),e)),{status:ne,data:u})})).catch((function(t){return o(L({},"".concat(l,"CodePulled"),!1)),oe}))}function re(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.globalStoreUtils,o=n.onSuccess,i=void 0===o?function(){}:o,r=n.onError,s=void 0===r?function(){}:r,c=t.uid,u=a.setGlobalStore;return Qt(t,e).then((function(t){var e=t.data,n=void 0===e?{}:e,a=t.status;return u(L({},"".concat(c,"Pass"),!!n.result)),a?s():i({result:!!n.result}),{result:!!n.result,status:a}})).catch((function(t){return u(L({},"".concat(c,"Pass"),!1)),{result:!1,status:ae}}))}function se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=n.globalStoreUtils,i=n.store,r=n.numberStore,s=n.useIdentity,c=i[t],u=Ct(e,r[t],n),d=c.uid,l=o.getGlobalStore,h=a.onLoad,p=void 0===h?function(){}:h,f=mt(u.phoneAntiCheatConf)?mt(u.phoneAntiCheatConf).beforeShow:ee,g=l("".concat(d,"Pass")),m=l("".concat(d,"CodePulled"))||!1;return s&&f&&!g?new Promise((function(t,e){t(f!==Zt?null:zt(c,n))})).then((function(t){return t&&t.passCheck||f===te?m?{data:{pictureBase64:l("".concat(d,"Image")),bkPictureBase64:l("".concat(d,"BackgroundImage"))},status:ne,existed:!0}:ie({uid:d},n,{onLoad:p}):null})):new Promise((function(t,e){return t(null)}))}var ce={ad:"ecom_virtual_phone",lp:"ec_bcp_virtualNum"};function ue(t,e){var n=e.requester,a=e.logHost,o=Ut(a,"internal/virtualPhone/clickLog"),i=(new Date).getTime();return n({params:D(D({logtype:"click"},t),{},{lpFrom:t.sourceType,tag:ce[t.from||"lp"],cuid:e.infos&&e.infos.cuid||"",customInfo:{userType:e.userType||"swan"},rand:i,timestamp:i}),method:"GET",path:o})}function de(t,e){var n=[];for(var a in e)e.hasOwnProperty(a)&&n.push(a+"="+encodeURIComponent(void 0===e[a]?"":e[a]));var o=(new Date).getTime();n.push("rand="+o),n.push("timestamp="+o),t+="?"+n.join("&");var i=new Image,r=0;i.onload=i.onerror=i.onabort=function(e){if("error"===e.type&&r<2)return r++,void(i.src=t+"&retryCount="+r);i.onload=i.onerror=i.onabort=null,i=null},i.src=t}var le={clickLog:["phone-tracker/clicklog2yxt"]};function he(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clickLog",a=e.infos,o=a.accountPhoneInfo,i=void 0===o?{}:o,r=a.onError,s=void 0===r?function(){}:r,c=t.extraInfo,u=void 0===c?{}:c,d=D(D(D({},t),u||{}),{},{token:i.token,tag:ce[t.from||"lp"],logtype:"click"});+e.sourceType===M.HEALTH_SWAN&&(d.orderId=u.orderId||"",d.callNo=u.callNo||"");var l=e.userType,h=l===X,p=l===J;if(h)ue(d,e);else if(p)ue(d,e);else if(le[n])try{le[n].forEach((function(t){de("".concat(e.logHost||"https://ada.baidu.com","/").concat(t),d)}))}catch(t){s(Nt)}}var pe=["hector","onVerify","onLoad","callback","kDomain"],fe=0,ge=function(){function t(e){var n=this;P(this,t),this.userType=e.userType||"h5",this.env=e.env||"online",this.requester=e.requester||null,this.reqType=e.reqType||null,this.hector=e.hector||null,this.onError=e.onError,this.clientFunctions=e.clientFunctions||{},this.waitTime=e.waitTime,this.domainInverse=e.domainInverse||null,this.globalStoreUtils=e.globalStoreUtils||kt,this.store={},this.numberStore={},this.infos=e.infos,this.sdkHost=e.sdkHost,this.logHost=e.logHost,this.pvid=e.pvid,this.sourceType=e.sourceType,this.useIdentity=!!e.useIdentity,this.cusConf=e.cusConf||{};(this.clientFunctions.getAccountPhone||function(){return new Promise((function(t,e){return t({})}))})().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.result,a=void 0===e?{}:e,o=a.data,i=void 0===o?{}:o;n.infos.accountPhoneInfo=D(D({},t),{},{token:i.token||""})}))}var e,n,a;return e=t,(n=[{key:"_setStore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&"object"===k(e)&&(this.store[t]=D(D({},this.store[t]),e))}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ft(e,this),a=Pt(n);if(!a)return this.onError(At),"";if(!n.fromAd)return this.onError(Ot),"";if(this.store[a]&&this.store[a].status)return a;this.store[a]=n;var o=function(){return new Promise((function(t,e){return t({})}))},i=this.clientFunctions.getLocationInfo||o,r=this;return i().then((function(o){t.infos.locationInfo={result:o&&o.result||{},originResult:o&&o.originResult||{}},$t(D(D({},n),{},{key:a}),r,{mode:H}).then((function(n){var o=n.data,i=void 0===o?[]:o;if(t.numberStore[a]=i,"function"==typeof e.onShow){var r=i.map((function(t){var e=mt(t.phoneAntiCheatConf);return D(D({},t),{},{phoneAntiCheatConf:e})}));e.onShow(r)}}))})),a}},{key:"getCallNumber",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=gt(e),a=n.hector,o=void 0===a?null:a,i=n.onVerify,r=void 0===i?function(){}:i,s=n.onLoad,c=void 0===s?function(){}:s,u=n.callback,d=void 0===u?function(){}:u,l=n.kDomain,h=void 0===l?"":l,p=N(n,pe),f=p.realPhone,g=p.solutionId,m=p.key;!this.hector&&o&&(this.hector=o);var v=this.numberStore[m]||[],w=!!v.filter((function(t){return t.mode===G})).length,b=this.store[m]?D(D(D(D({},this.store[m]),p),h?{kDomain:h}:{}),{},{mode:G}):ft(D(D({from:e.from||"lp",mode:G,realPhones:f,solutionIds:g},h?{kDomain:h}:{}),p),this);return se(m,e,this,{onLoad:c}).then((function(n){var a=t;return n?D(D({},n),{},{state:Et}):w?new Promise((function(n,o){$t(D(D({},b),{},{key:m}),a,{mode:G}).then((function(a){var o=a.status;if(+o)n(D(D({},xt(e,t)),{},{status:o,state:Lt}));else{var i=a.data;n(D(D({},_t(e,void 0===i?[]:i,t)),{},{status:o,state:Lt}))}}))})):D(D({},xt(e,t)),{},{status:fe,state:Lt})})).then((function(e){if(e.state===Et)return r(e),e;var n=t.infos,a=n.accountPhoneInfo,o=void 0===a?{}:a,i=n.locationInfo,s=void 0===i?{}:i,c=o.token,u=void 0===c?"":c,l=o.originResult,h=void 0===l?{}:l,p=o.clientStatus,f={accountPhoneToken:u,locationInfo:s.result,accountPhoneResult:D(D({},h),{},{clientStatus:p}),locationInfoResult:s.originResult};return he(D(D({},b),{},{virtualPhone:e.virtualPhone||"",realPhone:e.realPhone||"",phoneNum:e.virtualPhone||e.realPhone}),t),d(D(D({},e),{},{clientInfo:f})),D(D({},e),{},{clientInfo:f})}))}},{key:"createVerify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uid,n=t.onLoad,a=t.onSuccess;return ie({uid:e},this,{onLoad:n,onSuccess:a})}},{key:"checkVerify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uid,n=t.coordinate,a=t.onSuccess,o=t.onError,i={uid:e,coordinate:n};return re(i,this,{onSuccess:a,onError:o})}}])&&E(e.prototype,n),a&&E(e,a),t}();function me(t){var e=t.params,n=void 0===e?{}:e,a=t.path,o=t.data,r=t.method,s=void 0===r?"POST":r;if(!a)return Promise.resolve(null);var c=a;return"GET"!==s&&"get"!==s||(c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(t);if(!n.length)return e;var a=n.filter((function(e){return-1===["function","object"].indexOf(k(t[e]))})).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&");return a?"".concat(e,"?").concat(a):e}(n,a)),new Promise((function(t,e){i.request({url:c,method:s,header:{"Content-Type":"application/json"},data:o,success:function(e){t(e.data||{})},fail:function(t){e(t)}})}))}var ve=L({},M.HEALTH_SWAN,"swan_health_store"),we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(n,t);var e=B(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P(this,n);var a={url:""},o=t.sourceType,i=void 0===o?null:o,r=t.onError,s=void 0===r?function(){}:r,c=t.env,u=void 0===c?"online":c,d=t.infos,l=void 0===d?a:d,h=t.sdkHost,p=void 0===h?"":h,f=t.logHost,g=void 0===f?"":f,m=t.waitTime,v=void 0===m?1e3:m,w=ve[i];return e.call(this,{env:u,userType:w||"swan",requester:me,waitTime:v,sourceType:i,useIdentity:!1,onError:s,infos:l,sdkHost:p,logHost:g})}return n}(ge);n.default=we})),window.define("421",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.postBackSid=void 0;var C=I(t(27)),x=I(t(29)),_=t(9),D=function(){var t=(0,x.default)(C.default.mark((function t(e){var n;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,_.getSysData)();case 3:return n=t.sent,t.abrupt("return",{iscost:e.iscost,sid:n.sid});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();n.postBackSid=D})),window.define("422",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.handlePageData=function(t){var e,n,a,o,i,r,s,c={};c.isMoveFamily=1===t.addrType,c.pageTitle=t.name,c.name=t.name,c.tagList=function(t){var e=t.map((function(t){return t.length<=6?t:""}));return e.length>4?e.slice(0,4):e}(t.labels||[]),c.banner=t.images||[],c.salePriceDesc=t.salePriceDesc,c.productDesc=t.productDesc,c.quotation=t.quotation,c.serviceProcess=t.serviceProcess,c.serviceProcessText=t.serviceProcessText,c.shopContent={shopId:t.shopId,shopName:t.shopName,shopLogo:t.shopLogo,shopUsed:t.shopUsed,shopBtnText:null===(e=t.shopBtn)||void 0===e?void 0:e.text,shopJumpType:null===(n=t.shopBtn)||void 0===n?void 0:n.jump_type,shopJumpUrl:null===(a=t.shopBtn)||void 0===a?void 0:a.jump_url},c.normsList=t.specifications&&t.specifications.map((function(t,e){return t.values.forEach((function(t){t.selected=0,t.parent=e})),t})),c.normsNumList=function(t){if(t){return t.map((function(t){return{nums:t.restStock,value:t.specifications,skuId:t.skuId,estimatedPrice:t.estimatedPrice/100,salePrice:t.salePrice/100}}))}}(t.skuList),c.timeList=t.homeTime,c.price=function(t){if(t){var e=t.map((function(t){return t.salePrice})),n=Math.min.apply(Math,(0,x.default)(e)),a=Math.max.apply(Math,(0,x.default)(e));return n===a?n:[n,a]}return[]}(c.normsNumList),c.estimatedPrice=function(t){if(t){var e=t.map((function(t){return t.estimatedPrice})),n=Math.min.apply(Math,(0,x.default)(e)),a=Math.max.apply(Math,(0,x.default)(e));return n===a?n:[n]}return[]}(c.normsNumList)||[],c.priceType=Array.isArray(c.price),c.supportCityIdList=t.supportCityIdList,c.shopId=t.shopId,c.spuId=t.spuId,c.cateId=t.categoryId,c.supportPayType=t.supportPayType,c.isAdvancePay=4===t.supportPayType,c.isOnePrice=1===t.supportPayType,c.conversionSetting=t.conversionSetting,c.skuIsDel=2==+t.status,c.posterNormal=t.posterNormal,c.endPrice=c.priceType?c.price[0]:c.price,c.endPriced=c.priceType?c.estimatedPrice[0]:c.estimatedPrice;var u=c.endPrice&&parseFloat(Number(c.endPrice).toFixed(2)),d=null==u?void 0:u.toString(),l=(null==d?void 0:d.split("."))||[],h=(0,C.default)(l,2);c.endPriceInt=h[0],c.endPriceFloat=h[1];var p=c.endPriced&&parseFloat(Number(c.endPriced).toFixed(2)),f=null==p?void 0:p.toString(),g=(null==f?void 0:f.split("."))||[],m=(0,C.default)(g,2);c.endPricedInt=m[0],c.endPricedFloat=m[1],c.priceFromTo=c.price,c.endPriceType=c.priceType,c.questionList=t.commonProblem,c.ucId=t.ucId,c.guarantee=t.guarantee,c.securityList=t.guarantee.promises&&t.guarantee.promises.slice(0,3)||[],c.remarkInfo=t.remarkInfo||{},c.remarkInfo.remarkList&&c.remarkInfo.remarkList.length&&(c.remarkInfo.remarkList.forEach((function(t,e){var n=232;t.images&&t.images.length&&(n+=297),(t.label||t.city||t.specification)&&(n+=96),t.height="".concat(n/1242*100,"vw")})),c.swiperHeight=c.remarkInfo.remarkList[0].height);if(c.sampleVal=t.sampleVal,t.newCouponInfo){var v=t.newCouponInfo,w=v.couponList,b=v.maxSavePrice,y=v.discountPrice,T=Array.isArray(w)?w.slice(0,3):[];c.allCouponList=T||[],c.newCouponLabel=T.map((function(t){return{couponBizType:t.couponBizType,label:t.showLabel}})),c.maxSavePrice=b&&parseFloat(Number(b/100).toFixed(2)),y&&(c.useCouponMinPrice=parseFloat((y/100).toFixed(2)))}return c.newHomeTime=t.newHomeTime,c.hideCoupon=t.hideCoupon,c.iconId=t.iconId,c.supportCityList=t.supportCityList,c.noServiceInfo=t.serviceAreaTanChuang,c.cityDiffText=t.cityDiffText,c.serviceTwo=null===(o=t.categoryList)||void 0===o||null===(i=o[3])||void 0===i?void 0:i.id,c.serviceThree=null===(r=t.categoryList)||void 0===r||null===(s=r[4])||void 0===s?void 0:s.id,c},n.getSkuCategory=function(t){if(!t||!Array.isArray(t))return"";for(var e=t.length-1;e>=0;--e){if(!t[e]||"string"!=typeof t[e].name)return"";if(!t[e].name.includes("其他"))return t[e].name}return""};var C=I(t(19)),x=I(t(157))})),window.define("425",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(16)),D=x(t(27)),k=x(t(19)),P=x(t(15)),E=x(t(29)),L=x(t(419)),A=x(t(141)),O=t(17),N=t(26),R=x(t(14)),B=t(9),j=t(421);function U(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var F=null,H=s();Page((0,A.default)({ubcLog:{from:"dingdanxiangqing"},data:{status:"loading",topBarOpacity:0,info:"",showMask:!1,isInPop:!1,transactionMode:-1,maskTitle:"",showCancel:!1,showEvaluate:!1,anonymous:!1,starIndex:-1,orderStatus:{},orderSteps:[],serviceData:{},orderData:{},shop:{},skus:{},refund:null,payList:[],buttonList:[],legalText:"",bottomButton:[],reason:[],stars:[],comment:"",retainBounced:{show:!1,play:!1},phoneNumber:"",showCouponPop:!1,spuUrl:"../sku/index",imageList:[],masterShopId:""},attr:{zid:"",imei:"",brand:"",model:""},onInit:function(t){var e=H.globalData.systemInfo||{},n=e.brand,a=e.model;this.attr.brand=n,this.attr.model=a;var o=t.masterShopId||"";this.setData({masterShopId:o}),this.hasOnInit||(this.hasOnInit=!0,this.orderId=t.orderId,this.initData(this.orderId))},onLoad:function(t){this.hasOnInit||(this.hasOnInit=!0,this.orderId=t.orderId,this.initData(this.orderId)),this.options&&L.default.setDefaultParams({bdVid:this.options.bd_vid,query:this.options})},onShow:function(){this.hasInit&&((this.hasPayment||!1===this.paymentOver||H.hasPayBalance)&&r.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),this.initData(this.orderId))},loginSuccess:function(){this.$showLogin(!1),this.initData(this.orderId)},loginFail:function(){(0,N.textToast)("请先进行登录")},chooseImage:function(t){this.setData({imageList:t.list||[]})},getCouponList:function(t){var e=this;return(0,E.default)(D.default.mark((function n(){var a,o,i;return D.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.data,o=a.shopId,i=a.spuId,n.t0=e.$http,n.t1=e.$api.ORDER_INDEX,n.t2=P.default,n.t3={act:"myCoupon",shopId:o,masterShopId:e.data.masterShopId,spuId:i,iscost:e.options.iscost},n.next=7,(0,j.postBackSid)(e.options);case 7:return n.t4=n.sent,n.t5=(0,n.t2)(n.t3,n.t4),n.t6={data:n.t5},n.abrupt("return",n.t0.post.call(n.t0,n.t1,n.t6).then((function(n){var a,o,i=[],r=n.couponList.map((function(t){return t.isLoading=!1,50!=+t.status&&60!=+t.status||(t.btnBgOpacity="0.5"),40==+t.status||50==+t.status||60==+t.status?(t.bgImg="https://b.bdstatic.com/searchbox/image/gcp/20210819/3172963979.png",t.isShowBtn=!1,t.textColor="#858585",t.discountBg="linear-gradient(90deg, #FFDAD6, #FFD8D4)"):(i.push(t),t.bgImg="https://b.bdstatic.com/searchbox/image/gcp/20210817/3885092315.png",t.isShowBtn=!0,t.btnBorder=30==+t.status?"#FD503E":"",t.btnBg=30==+t.status?"#fff":20==+t.status?"#FD503E":"",t.textColor="#FD503E",t.discountBg="linear-gradient(90deg, #FFDAD6, #FFD8D4)",t.btnTextColor=20==+t.status?"#fff":"#FD503E"),t})),s=i.slice(0,3),c=(n.maxSavePrice&&parseFloat(Number(n.maxSavePrice/100).toFixed(2))).toString(),u=null==c?void 0:c.split("."),d=(0,k.default)(u,2);a=d[0],o=d[1];var l="".concat(e.data.spuUrl,"?shopId=").concat(e.data.shop.shopId,"&spuId=").concat(e.data.skus.spu);return e.setData({couponPopList:r,assertInfo:n.assertInfo,showCouponPop:t,spuUrl:l,newCouponLabel:s,maxSavePriceInt:a,maxSavePriceFloat:o}),Promise.resolve(n)})).catch((function(t){return Promise.resolve("error")})));case 11:case"end":return n.stop()}}),n)})))()},getCommonExt:function(){var t=this.data.skus;return{sku_id:t.sku,service_id:t.spu}},sendLog:function(t,e,n){var a=this.getCommonExt();r.$log.sendNew((0,P.default)((0,P.default)({module:t},n),a),e,{},"shangMen")},handleObserver:function(){var t=this,e=(this.getCommonExt(),[["#couponList","coupon"]]);a((function(){var n,a=U(e);try{var o=function(){var e=n.value;t["observer-".concat(e[1])]=r.createIntersectionObserver(t),t["observer-".concat(e[1])].relativeToViewport({bottom:0,top:88}).observe(e[0],(function(n){t.sendLog(e[1],"show"),t["observer-".concat(e[1])].disconnect()}))};for(a.s();!(n=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}}),1e3)},initData:function(t){var e=this;(0,B.isLogin)()?(0,B.getSysData)().then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.attr,i=o.model,s=o.brand,c=n.zid,u=void 0===c?"":c,d=n.imei,l=void 0===d?"":d,h=n.sid,p=void 0===h?"":h;e.attr.imei=l,e.attr.zid=u,e.$http.get(e.$api.ORDER_INDEX,{data:{orderId:e.x||t,masterShopId:e.data.masterShopId,act:"orderInfo",zid:u,imei:l,model:i,brand:s,sid:p,iscost:e.options.iscost}}).then((function(t){if(a((function(){1==+t.noticeFrame&&e.setData("retainBounced.show",!0)}),1e3),F&&clearInterval(F),e.hasInit=!0,e.hasPayment=!1,t.serviceData&&t.serviceData.value&&t.serviceData.value.forEach((function(t){if("address"===t.handle){var e=t.value&&t.value.addr_info,n=e?e.country_name+e.province_name+e.city_name+e.district_name+e.town_name+e.detail_addr:"";t.addressInfo=n,t.userInfo="".concat(t.value.name," ").concat(t.value.mobile)}})),0==+t.transactionMode)t.payStep=t.payStep.concat(t.payList);else if(4==+t.transactionMode){var n=new Map;t.payStep.map((function(t,e){if(!Array.isArray(t.value))return 0==+t.status&&t.value>=0&&!n.has("highlight")&&(n.set("highlight",e),t.highlight=1),t.newValue=(t.value/100).toFixed(2),t.integer=t.newValue.slice(0,t.newValue.length-3),t.decimal=t.newValue.slice(t.newValue.length-2),t}))}t.refund&&t.refund.amount&&(t.refund.amount=(t.refund.amount/100).toFixed(2)),t.downButtonList||(t.downButtonList=[]),t.upButtonList&&1===t.upButtonList.length&&t.upButtonList.push({}),e.selectedIndex=-1;var o="";if(100==+t.orderStatus.status){var i=(0,N.countDown)(t.orderStatus.desc);if(e.countOver||!i)o="超时未支付";else{var s=i.day,c=i.hour,u=i.minute,d=i.second;o="还剩".concat(s).concat(c).concat(u).concat(d,"自动关闭")}}var l="",h="",p=t.downButtonList,f=t.payStep;if(Array.isArray(p)&&p.length>0&&Array.isArray(f)&&f.length&&50==+p[0].status){var g=f[f.length-1].value,m=f[0].value;h=0==+e.data.transactionMode?"¥".concat(g/100):"¥".concat(m/100);var v=m-g;l=v>0&&"¥".concat(v/100)}e.setData((0,P.default)({status:"",payAmount:h,discountAmount:l,info:o,shopId:t.shop.shopId,spuId:t.skus.spu},t),(function(){r.hideToast(),e.countOver?(r.showToast({title:"超时未支付，您的交易已关闭",icon:"none"}),e.countOver=!1):100==+t.orderStatus.status&&e.handleTime(+t.orderStatus.desc),Array.isArray(t.downButtonList)&&t.downButtonList.length>0&&80==+t.downButtonList[0].status&&H.hasPayBalance&&(H.hasPayBalance=!1,e.handleBtn(null,t.downButtonList[0])),t.upButtonList&&t.upButtonList.length&&t.upButtonList.forEach((function(t){if(10===t.status){var n=t.conversionSetting.phoneConversion,a=n.beforeSalesPhone,o=n.afterSalesPhone,i=n.mobilePhoneNumber,r=n.fixedPhoneNumber,s=n.realPhoneNum,c=a||o||i||r||s;e.setData({phoneNumber:c})}})),e.handleObserver(),e.getCouponList(!1)}))})).catch((function(t){r.hideToast(),e.setData({status:"error",errType:t.errType})}))})):this.$showLogin()},handleTime:function(t){var e=this;F=o((function(){var n=(0,N.countDown)(--t),a=n.day,o=n.hour,i=n.minute,s=n.second;t>0?e.setData("info","还剩".concat(a).concat(o).concat(i).concat(s,"自动关闭")):(clearInterval(F),r.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),e.data.showMask&&e.closeMask(),e.countOver=!0,e.initData(e.orderId))}),1e3)},onErrorPageReload:function(){this.initData(this.orderId)},onPageScroll:function(t){var e=t.scrollTop;this.setData("topBarOpacity",e>0?1:0)},copyOrderId:function(t){var e=t.currentTarget.dataset.info;r.setClipboardData({data:e,success:function(){r.showToast({title:"复制成功",icon:"none"})},fail:function(t){r.showToast({title:"复制失败",icon:"none"})}})},modalForCall:function(t,e){r.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#f5f5f5"}),r.showModal({title:t,content:e,confirmText:"确认",cancelText:"取消",confirmColor:"#58a0ff",cancelColor:"#000000",success:function(t){t.confirm&&r.makePhoneCall({phoneNumber:e})},complete:function(t){r.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#f5f5f5"})}})},makePhoneCallMaster:function(t){var e;e="string"==typeof t?t:t.currentTarget.dataset.info,this.modalForCall("联系师傅",e)},handleOrder:function(t){var e=this,n=t.currentTarget.dataset.item,a=this.data,o=a.phoneNumber,i=a.transactionMode,s=a.shop.shopName,c="联系商家".concat(s);switch(+n.status){case 10:this.modalForCall(c,o);break;case 20:R.default.to(n.jump_url,n.jump_type);break;case 30:0===i?R.default.to(n.jump_url,n.jump_type):4===i&&r.showModal({title:"申请退款提示",content:n.refundNotice,confirmText:"仍要退款",cancelText:"电话商家",confirmColor:"#000000",cancelColor:"#58A0FF",success:function(t){t.confirm&&R.default.to(n.jump_url,n.jump_type),t.cancel&&e.modalForCall(c,o)}});break;case 40:return;case 60:var u={showMask:!0,showCancel:!0,isInPop:!0,maskTitle:n.reasonList.title};this.data.reason.length||(u.reason=n.reasonList.value.map((function(t){return{name:t,selected:!1}}))),this.setData(u,(function(){r.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#f5f5f5"})}));break;case 90:r.navigateTo({url:n.jump_url});break;case 100:this.makePhoneCallMaster(n.mobile)}},jumpToPay:function(){var t="".concat(this.orderId,"&skuId=").concat(this.data.skus.sku,"&spuId=").concat(this.data.skus.spu,"&masterShopId=").concat(this.data.masterShopId);R.default.to("/channels/shop/pages/pay/index?orderId="+t,"local")},handleBtn:function(t,e){var n=e;switch(t&&t.currentTarget&&(n=t.currentTarget.dataset.item),+n.status){case 50:this.payment(n);break;case 70:try{var a=(0,N.get)(this.data,"downButtonList[0].payData","");return void(a?this.payment(a):this.jumpToPay())}catch(t){}break;case 80:var o={showMask:!0,isInPop:!0,showEvaluate:!0,maskTitle:n.evaluateLevel.title};this.data.stars.length||(o.stars=n.evaluateLevel.stars),this.setData(o,(function(){r.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#f5f5f5"})}))}if(!this.scrollHeight){var i=this.$storage.getSync("SYSTEM_INFO");i&&i.windowHeight||(i=r.getSystemInfoSync());var s=i,c=s.windowHeight,u=s.windowWidth;this.scrollHeight=.2*c,this.scrollWidth=.2*u}},payment:function(t){var e=this;r.requestPolymerPayment({orderInfo:t.payInfo,success:function(t){r.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),e.options.iscost&&L.default.log({convertType:10}),e.initData(e.orderId),e.paymentOver=!0,e.hasPayment=!1},fail:function(t){e.paymentOver=!0,e.hasPayment=!1}}),this.paymentOver=!1,this.hasPayment=!0},selectReason:function(t){var e=this,n=t.currentTarget.dataset.index;if(this.selectedIndex!==n){var a=(0,_.default)({},"reason[".concat(n,"].selected"),!0);-1!==this.selectedIndex&&(a["reason[".concat(this.selectedIndex,"].selected")]=!1),this.setData(a,(function(){e.selectedIndex=n}))}},closeMask:function(){var t=this,e={anonymous:!1,isInPop:!1};-1!==this.selectedIndex&&this.data.reason.some((function(n){if(n.selected)return e["reason[".concat(t.selectedIndex,"].selected")]=!1,!0})),-1!==this.data.starIndex&&(e.starIndex=-1,e.evaluateInfo="",e.comment=""),this.setData(e,(function(){t.selectedIndex=-1})),a((function(){t.setData({showMask:!1,showCancel:!1,showEvaluate:!1},(function(){r.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#f5f5f5"})}))}),300)},touchStart:function(t){if(t.target.id!==t.currentTarget.id)return this.startX=!1,void(this.startY=!1);var e=t.touches[0];this.startX=e.clientX,this.startY=e.clientY},touchEnd:function(t){if(!1!==this.startX){var e=t.touches[0]||t.changedTouches[0],n=e.clientX-this.startX,a=e.clientY-this.startY;(n>=this.scrollWidth||a>=this.scrollWidth)&&this.closeMask()}},confirm:function(t){if(-1!==this.selectedIndex){var e=this.data.reason[this.selectedIndex].name;return"close"===this.status&&(e="超时未支付"),this.closeMask(),r.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),void this.cancelOrder(e)}r.showToast({title:"请选择取消原因",icon:"none",duration:2e3})},cancelOrder:function(t){var e=this;return(0,E.default)(D.default.mark((function n(){var a,o,i,s,c;return D.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.hasClickCancel){n.next=2;break}return n.abrupt("return");case 2:return e.hasClickCancel=!0,a=e.attr,o=a.zid,i=a.imei,s=a.model,c=a.brand,n.t0=e.$http,n.t1=e.$api.ORDER_INDEX,n.t2=P.default,n.t3={act:"cancelOrder",orderId:e.orderId,masterShopId:e.data.masterShopId,reason:t,zid:o,imei:i,model:s,brand:c},n.next=10,(0,j.postBackSid)(e.options);case 10:n.t4=n.sent,n.t5=(0,n.t2)(n.t3,n.t4),n.t6={data:n.t5,noTry:!0},n.t0.get.call(n.t0,n.t1,n.t6).then((function(t){r.hideToast(),e.hasClickCancel=!1,clearInterval(F),e.setData((0,P.default)({status:"",info:""},t)),e.initData(e.orderId)})).catch((function(t){r.hideToast(),e.hasClickCancel=!1,e.setData({status:"error",errType:t.errType})}));case 14:case"end":return n.stop()}}),n)})))()},handleOpen:function(){this.setData({anonymous:!this.data.anonymous})},selectStar:function(t){var e=t.currentTarget.dataset.index;this.setData({starIndex:e})},bindInput:function(t){t.detail.value.length>=200&&r.showToast({title:"最多输入200字",icon:"none"}),this.setData({comment:t.detail.value})},uploadImage:function(){var t=this;return new Promise((function(e){t.data.imageList&&t.data.imageList.length||e([]),(0,O.resolveHeader)({method:"POST"}).then((function(n){var a={act:"uploadFile",type:"remark",orderId:t.orderId},o=t.data.imageList.map((function(e){return new Promise((function(o,i){r.uploadFile({url:(0,O.replaceUrl)(t.$api.ORDER_INDEX+"?act=uploadFile&masterShopId=".concat(t.data.masterShopId)),filePath:e,name:"file",header:n,formData:a,success:function(t){t.data&&t.data.data&&t.data.data[0]?o(t.data.data[0]):i(new Error("uploadImageFail"))},fail:function(t){i(t.errMsg),r.showToast({title:t.errMsg})}})}))}));e(Promise.all(o))}))}))},confirmEvaluate:function(){var t=this;-1===this.data.starIndex||this.hasClickConfirm||(this.hasClickConfirm=!0,r.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),this.uploadImage().then(function(){var e=(0,E.default)(D.default.mark((function e(n){return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.$http,e.t1=t.$api.ORDER_INDEX,e.t2=P.default,e.t3={images:n,orderId:t.orderId,masterShopId:t.data.masterShopId,content:t.data.comment,score:+t.data.starIndex+1,isAnonymous:t.data.anonymous,act:"remarkSubmit"},e.next=6,(0,j.postBackSid)(t.options);case 6:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5,noTry:!0},e.t0.get.call(e.t0,e.t1,e.t6).then((function(){r.hideToast(),t.hasClickConfirm=!1,r.showToast({title:"评价成功",icon:"none"});t.setData({downButtonList:[]}),t.closeMask()})).catch((function(e){r.hideToast(),t.hasClickConfirm=!1,r.showToast({title:e.msg,icon:"none"})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onUnload:function(){clearInterval(F)},animationEnd:function(){this.setData("retainBounced.play",!0)},handleRetainBounced:function(){this.setData("retainBounced.show",!1)},gotoGuarantee:function(t){"已失效"!==t.currentTarget.dataset.desc?this.commonJump(t):r.showToast({title:"您的保障已过期",icon:"none"})},handleClickCoupon:function(){r.showLoading({title:"正在加载...",mask:!0}),this.sendLog("coupon","click"),this.getCouponList(!0).then((function(t){r.hideLoading(),"error"===t&&r.showToast({title:"优惠券走丢了，刷新试试看吧！",icon:"none"})})).catch((function(){return r.hideLoading()}))},closeCouponPop:function(){this.setData({showCouponPop:!1})},useCoupon:function(){var t,e,n=null===(t=this.data)||void 0===t||null===(e=t.orderStatus)||void 0===e?void 0:e.status;if([100,200,205].includes(n))r.showToast({title:"师傅上门服务后才可使用尾款券",icon:"none"});else if(210===n){var a=Array.isArray(this.data.downButtonList)&&this.data.downButtonList[0],o=(0,N.get)(this.data,"downButtonList[0].payData","");50===(null==a?void 0:a.status)?this.payment(a):o?this.payment(o):this.jumpToPay()}else{var i="../sku/index?shopId="+this.data.shop.shopId+"&spuId="+this.data.skus.spu+"&masterShopId="+this.data.masterShopId;this.$jump.to(i,"local")}},stopTouchMove:function(){}}))})),window.define("428",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141));Page((0,I.default)({ubcLog:{from:"f-shop-imlp"},onLoad:function(t){var e=this.$app.envInfo||o.getEnvInfoSync();i().envInfo=e;var n={pageParams:{url:t.url,appName:e.appName,appKey:e.appKey,cuid:this.$app.loginData.cuid}};this.selectComponent("imlp").setInitData(n)}}))})),window.define("431",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10)(t(141)),x=t(17),_=t(9),D=r(),k={reason:"请选择退款原因",maxLength:"最多输入".concat(200,"字"),success:"提交成功",fail:"提交失败"};Page((0,C.default)({ubcLog:{from:"tuikuanshenqing"},data:{refundDesc:{},refundInfo:{},value:{refundReason:-1,refundDesc:"",refundImage:[]},chooseIndex:-1,selectValue:"",maxLength:200,maskHeight:0,click:!1,option:!1,hideLoading:!1,masterShopId:""},attr:{imei:"",zid:"",brand:"",model:""},onInit:function(t){var e=t.orderId,n=t.refundId,a=t.masterShopId;this.setData({masterShopId:a||""}),this.query=t,this.initialize({orderId:e,refundId:n})},initialize:function(t){var e=this,n=t.orderId,a=t.refundId;this.initAttr();var o=(0,_.getSystemInfo)().screenWidth/1242;this.$http.get(this.$api.ORDER_INDEX,{data:{orderId:n,refundId:a,masterShopId:this.data.masterShopId,act:"refundConf"}}).then((function(t){var n=t.refundDesc,a=t.refundInfo,i=t.value,r=a.refundReason.length,s=o*(471+180*r);if(e.setData({refundDesc:n,refundInfo:a,maskHeight:s,hideLoading:!0}),i){i.refundReason=i.refundReason?i.refundReason:-1,i.refundImage=i.refundImage?i.refundImage:[],i.refundDesc=i.refundDesc?i.refundDesc:"";var c=a.refundReason.findIndex((function(t){return t.key===i.refundReason})),u=a.refundReason[c].value;e.setData({selectValue:u,chooseIndex:i.refundReason||-1,value:i})}})).catch((function(t){i.hideToast(),e.setData({status:"error",errType:t.errType||"初始化页面错误"})}))},initAttr:function(){var t=this,e=D.globalData.systemInfo||{},n=e.brand,a=e.model;this.attr.brand=n,this.attr.model=a,(0,_.getSysData)().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.zid,a=void 0===n?"":n,o=e.imei,i=void 0===o?"":o;t.attr.imei=i,t.attr.zid=a}))},showshadow:function(){this.data.click||this.setData({click:!0,option:!0})},bindCancel:function(){var t=this;this.setData({option:!1,chooseIndex:this.data.value.refundReason}),a((function(){t.setData({click:!1})}),500)},bindConfirm:function(){var t=this,e=this.data,n=e.chooseIndex,o=e.refundInfo.refundReason;if(n<0)i.showToast({title:k.reason,icon:"none"});else{var r=o.findIndex((function(t){return t.key===n})),s=this.data.value;s.refundReason=n,this.setData({option:!1,selectValue:o[r].value,value:s}),a((function(){t.setData({click:!1})}),500)}},chooseReason:function(t){var e=t.currentTarget.dataset.index;this.setData({chooseIndex:e})},bindInput:function(t){t.detail.value.length>=200&&i.showToast({title:k.maxLength,icon:"none"});var e=this.data.value;e.refundDesc=t.detail.value,this.setData({value:e})},chooseImage:function(){var t=this,e=6-this.data.value.refundImage.length,n=this;i.chooseImage({count:e,success:function(e){var a=t.data.value,o=e.tempFilePaths,r={act:"uploadFile",orderId:t.query.orderId};(0,x.resolveHeader)({method:"POST"}).then((function(e){o.map((function(s,c){t.applyRefundLock=!0,i.uploadFile({url:(0,x.replaceUrl)(t.$api.ORDER_INDEX+"?act=uploadFile&masterShopId=".concat(t.data.masterShopId)),filePath:s,name:"file",header:e,formData:r,success:function(t){t&&t.data&&t.data.data&&(a.refundImage=a.refundImage.concat(t.data.data[0]),n.setData({value:a},(function(){o.length-1===c&&(n.applyRefundLock=!1)})))},fail:function(t){i.showToast({title:t.errMsg})}})}))})),t.setData({value:a},(function(){i.pageScrollTo({scrollTop:1125})}))}})},deleteImage:function(t){var e,n,a,o,i=t.currentTarget.dataset.index,r=this.data.value;e=r.refundImage,n=i,o=e.slice((a||n)+1||e.length),e.length=n<0?e.length+n:n,e.push.apply(e,o),this.setData({value:r})},applyRefund:function(){var t=this;if(!this.applyRefundLock){var e=this.data,n=e.refundInfo,a=e.value,o=this.query;if(a.refundReason<0)i.showToast({title:k.reason,icon:"none"});else{var r=this.$api.ORDER_INDEX,s=o.refundId?"".concat(r,"?act=modifyRefund&masterShopId=").concat(this.data.masterShopId):"".concat(r,"?act=applyRefund&masterShopId=").concat(this.data.masterShopId),c=this.attr,u=c.zid,d=c.imei,l=c.model,h=c.brand;this.applyRefundLock=!0,i.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),this.$http.post(s,{noTry:void 0===o.refundId,dataType:"json",data:{orderId:o.orderId,refundId:o.refundId,payOrderId:o.payOrderId,refundAmount:n.refundAmount,refundReason:a.refundReason,refundDesc:a.refundDesc,refundImage:a.refundImage,zid:u,imei:d,model:l,brand:h}}).then((function(t){i.hideToast(),("success"===t[0]||t.refundId)&&(o.refundId?i.navigateBack():i.redirectTo({url:"/channels/shop/pages/refund/index?orderId=".concat(o.orderId,"&refundId=").concat(t.refundId)}))})).catch((function(e){i.hideToast();var n=e.msg||k.fail;i.showToast({title:n,icon:"none"}),t.applyRefundLock=!1}))}}}}))})),window.define("434",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(141)),_=t(26),D=C(t(14)),k={title:"来百度享便捷上门服务",content:"惠生活为您提供安全放心有保障的搬家｜家政｜维修等服务",path:"channels/family-service/pages/index/index?sfrom=shareUrl&source=shareUrl"},P=null;Page((0,x.default)({data:{topBarOpacity:0,rendered:!1,showMore:!1,info:{},stepsIndex:0,masterShopId:""},ubcLog:{from:"tuikuanxiangiqngye"},onInit:function(t){this.setData({masterShopId:t.masterShopId||""}),this.hasOnInit||(this.hasOnInit=!0,this.orderId=t.orderId,this.refundId=t.refundId,this.initData(this.orderId,this.refundId))},onLoad:function(t){this.hasOnInit||(this.hasOnInit=!0,this.orderId=t.orderId,this.refundId=t.refundId,this.initData(this.orderId,this.refundId))},onShow:function(){this.hasInit&&this.initData(this.orderId,this.refundId)},initData:function(t,e){var n=this;this.$http.get(this.$api.ORDER_INDEX,{data:{act:"refundInfo",refundId:e,orderId:t,masterShopId:this.data.masterShopId},noTry:!0}).then((function(t){P&&clearInterval(P),n.hasInit=!0;var e=t.refundStatus,a=t.refundSteps,o=e||{},i=o.step,r=o.time,s=o.status,c=a.findIndex((function(t){return+t.index==+i}))||0;n.setData({rendered:!0,info:t,status:s,stepsIndex:c},(function(){n.foldDesc()})),n.countOver=!1,r>0&&(100==+s||300==+s)?n.timeStrCountDown(r):n.setData("info.refundStatus.timeStr","")})).catch((function(t){n.$showErrorPage(t.errType)}))},onErrorPageReload:function(){this.initData(this.orderId,this.refundId)},onPageScroll:function(t){var e=t.scrollTop;this.setData("topBarOpacity",e>0?1:0)},timeStrCountDown:function(t){var e=this,n=(0,_.countDown)(t),a=n.day,i=n.hour,r=n.minute,s=n.second;this.setData("info.refundStatus.timeStr","还剩".concat(a).concat(i).concat(r).concat(s)),P=o((function(){var n=(0,_.countDown)(--t),a=n.day,o=n.hour,i=n.minute,r=n.second;e.setData("info.refundStatus.timeStr","还剩".concat(a).concat(o).concat(i).concat(r)),0===t&&(e.setData("info.refundStatus.timeStr",""),clearInterval(P),e.countOver=!0,e.initData(e.orderId,e.refundId))}),1e3)},onUnload:function(){P&&clearInterval(P)},foldDesc:function(){var t=this;i.createSelectorQuery().select("#fold-desc").boundingClientRect().exec((function(e){e&&e[0]&&e[0].height>=51&&t.setData({showMoreLess:1,showMore:!0})}))},foldDescTap:function(){this.setData({showMore:!this.data.showMore})},copyOrderId:function(t){var e=t.currentTarget.dataset.value;i.setClipboardData({data:e,success:function(){i.showToast({title:"复制成功",icon:"none"})},fail:function(){i.showToast({title:"复制失败",icon:"none"})}})},handleRefund:function(t){var e=t.currentTarget.dataset.item;switch(+e.status){case 10:var n="联系商家 ".concat((0,_.get)(this.data,"info.refundInfo.shopName")),a=(0,_.get)(e,"conversionSetting.phoneConversion")||{},o=a.beforeSalesPhone,r=a.afterSalesPhone,s=a.mobilePhoneNumber,c=a.fixedPhoneNumber,u=a.realPhoneNum,d=o||r||s||c||u;this.showModal({title:n,content:d,success:function(t){t.confirm&&i.makePhoneCall({phoneNumber:d})}});break;case 20:D.default.withEvent(t)}},handleBtn:function(t){var e=this;switch(+t.currentTarget.dataset.status){case 30:return;case 40:this.showModal({title:"撤销退款提示",content:"建议您耐心等待商家处理。如果商家坚持要求您先撤销，您可以联系平台介入。",confirmText:"仍要撤销",success:function(t){if(null!=t&&t.confirm){if(e.countOver)return i.showToast({title:"您已超时，不可撤销申请",icon:"none"}),void(e.countOver=!1);e.cancelRefundAjax((function(){i.showToast({title:"撤销成功",icon:"none"}),e.initData(e.orderId,e.refundId)}))}}});break;case 50:if(this.countOver)return i.showToast({title:"您已超时，不可修改申请",icon:"none"}),void(this.countOver=!1);D.default.withEvent(t)}},cancelRefundAjax:function(t){var e=this;i.showLoading({title:"正在撤销中...",mask:!0}),this.$http.get(this.$api.ORDER_INDEX,{data:{act:"cancelRefund",refundId:this.refundId,orderId:this.orderId,masterShopId:this.data.masterShopId}}).then((function(e){i.hideLoading(),t&&t()})).catch((function(t){i.hideLoading(),e.showModal({title:"撤销退款失败提示",content:"您的撤销操作失败，请重试。",confirmText:"重试",success:function(t){t.confirm&&e.cancelRefundAjax((function(){i.showToast({title:"撤销成功",icon:"none"}),e.initData(e.orderId,e.refundId)}))}})}))},onShareAppMessage:function(){return(0,_.shareAppMessageUrlPatch)(k)},showModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.setNavigationBarColor({frontColor:"#000",backgroundColor:"#f5f5f5"}),i.showModal(Object.assign({},{content:"",confirmText:"确认",cancelText:"取消",confirmColor:"#58A0FF",cancelColor:"#000",complete:function(t){i.setNavigationBarColor({frontColor:"#fff",backgroundColor:"#f5f5f5"})}},t))}}))})),window.define("437",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(16)),D=I(t(157)),k=I(t(15)),P=I(t(141)),E=t(26),L=I(t(14)),A=t(9),O={valueList:["￥"],unit:"",highlight:!1,disable:!0,imgList:{0:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2068336371,972338159&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",1:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3578344868,3583424835&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",2:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3321943205,1814553279&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",3:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=4197030855,575639040&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",4:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=300357355,4276295255&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",5:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2499655834,1488564178&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",6:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2800447567,2677212974&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",7:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1273899304,3615074656&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",8:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3283765039,1560921529&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",9:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=851083825,2749060122&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",dian:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3179418,2894515026&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1"}};Page((0,P.default)({data:(0,k.default)({showCursor:!0,numberList:[[1,2,3],[4,5,6],[7,8,9],[0,"."]],dynamicPriceList:[],limit:[0,29999],masterShopId:""},O),keyConf:{skuId:0,spuId:0},onLoad:function(t){this.orderId=t.orderId,this.keyConf.skuId=t.skuId,this.keyConf.spuId=t.spuId,this.setData({masterShopId:t.masterShopId||""})},onShow:function(){this.data.showCursor||this.setData("showCursor",!0),this.hasShow&&this.hasPayment&&(o.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),this.checkStatus()),this.hasShow=!0},checkStatus:function(){var t=this;this.$http.get(this.$api.ORDER_INDEX,{data:{act:"balanceStatus",orderId:this.orderId,masterShopId:this.data.masterShopId}}).then((function(e){o.hideToast(),2==+e.balanceStatus&&(t.hasPayBalance||(t.hasPayBalance=!0,i().hasPayBalance=!0,o.navigateBack()))})).catch((function(t){o.hideToast(),o.showToast({title:t.msg,icon:"none"})}))},touchStart:function(t){},touchEnd:function(t){},clickItem:function(t){var e=+t.target.dataset.info,n=this.data.valueList.length,a=this.data.valueList.indexOf("."),i=(0,D.default)(this.data.valueList);if(a>-1&&n-2>a||-1===a&&7===n||this.data.highlight)o.vibrateShort();else if(isNaN(e))a>-1?o.vibrateShort():this.handlePoint(n);else{var r=(0,_.default)({},"valueList[".concat(n,"]"),e);2===n&&0==+this.data.valueList[1]?(r={"valueList[1]":e},i[1]=e):i.push(e),this.hanldeStauts(r,i)}},handlePoint:function(t){o.vibrateShort();var e={};e=1===this.data.valueList.length?{"valueList[1]":"0","valueList[2]":"."}:(0,_.default)({},"valueList[".concat(t,"]"),"."),this.setData(e)},hanldeStauts:function(t,e){this.result=+e.join("").substr(1);var n=this.result>this.data.limit[1],a=e.length<=1||this.result>this.data.limit[1]||this.result===this.data.limit[0],i="";this.result>=100&&this.result<1e3?i="百":this.result>=1e3&&this.result<1e4?i="千":this.result>=1e4&&(i="万"),n!==this.data.highlight&&(t.highlight=n),a!==this.data.disable&&(t.disable=a),i!==this.data.unit&&(t.unit=i),o.vibrateShort(),this.queryDiscount(this.result),this.setData(t)},queryDiscount:function(t){var e=this;return(0,x.default)(C.default.mark((function n(){var a;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.result>e.data.limit[1])){n.next=4;break}return(0,E.textToast)("单笔金额不可超过".concat(e.data.limit[1])),e.setData({dynamicPriceList:[],coupons:[]}),n.abrupt("return");case 4:return n.next=6,(0,A.getSysData)();case 6:a=n.sent,e.$http.get(e.$api.ORDER_INDEX,{data:{act:"calculatePrice",restPrice:(100*t).toFixed(0),skuId:e.keyConf.skuId,spuId:e.keyConf.spuId,masterShopId:e.data.masterShopId,orderId:e.orderId,zid:a.zid||"",checkCoupon:1},noTry:!0}).then((function(n){var a=n.payAmount,o=n.coupons,i=n.discountPrice,r=[{price:(100*t).toFixed(0),title:"尾款金额"}];(r=r.concat(i)).push({price:a,title:"实际待支付尾款"}),o||(r=[]),e.setData({dynamicPriceList:r,coupons:o})})).catch((function(t){e.setData({dynamicPriceList:null,coupons:null})}));case 8:case"end":return n.stop()}}),n)})))()},handlebutton:function(t){var e=t.target.dataset.info;if(void 0!==e){"confirm"===e&&this.data.disable||o.vibrateShort();var n=this.data.valueList.length,a=(0,D.default)(this.data.valueList);switch(e){case"delete":if(1===this.data.valueList.length)return;if(0===(n-=1))return;a.splice(n,1);break;case"confirm":if(this.data.disable)return;return this.setData("showCursor",!1),void this.payBalance()}this.hanldeStauts({valueList:a},a)}},clearInput:function(){this.setData(O)},payBalance:function(){var t=this;o.showToast({title:"正在加载...",mask:!0,icon:"loading",duration:2e4}),this.$http.post(this.$api.ORDER_INDEX,{data:{act:"payBalance",orderId:this.orderId,masterShopId:this.data.masterShopId,coupons:this.data.coupons,dueAmount:(100*this.result).toFixed(0)},noTry:!0}).then((function(e){if(o.hideToast(),e.payInfo){t.hasPayment=!0;var n=e.discountAmount||0;if(e.payInfo.totalAmount-n<=0)return(0,E.textToast)("即将跳转..."),void t.goOrderPage();o.requestPolymerPayment({orderInfo:e.payInfo,success:function(e){t.hasPayment=!1,t.hasPayBalance?t.goOrderPage():(t.hasPayBalance=!0,i().hasPayBalance=!0,o.navigateBack())},fail:function(e){t.hasPayment=!1,t.setData("showCursor",!0),t.goOrderPage()}})}})).catch((function(e){o.hideToast(),o.showToast({title:e.msg,icon:"none"}),t.setData("showCursor",!0)}))},goOrderPage:function(){this.orderId&&L.default.to("/channels/shop/pages/order/index?orderId=".concat(this.orderId),"local")}}))})),window.define("440",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(19)),_=C(t(157)),D=C(t(27)),k=C(t(29)),P=C(t(15)),E=C(t(419)),L=C(t(420)),A=C(t(14)),O=C(t(141)),N=t(42),R=t(26),B=t(9),j=t(40),U=t(421),M=r(),F=["100776_3","101379_2"];Page((0,O.default)({data:{isFromSecondFloor:M.globalData.isFromSecondFloor,isShowHome:!1,showBar:!1,topBarTitle:"",navHeight:0,scrollTop:0,shopDetailTxt:"",shopDetailSpread:!1,viewTab:"",selectedTabIndex:0,viewSubTab:"",selectedSubTabIndex:0,skuList:[],loadStatus:"more",tabs:[],subTabs:[],showEnsurePopup:!1,isHeightVersion:!1,servicePhone:"",showSkuModal:!1,scoreStarsWidth:0,showRetain:!1,hideCoupon:null,hideCouponInfo:null,retainFrom:"",pageScrollTop:0,titleTips:"",recommendTitle:"",recommendList:[],lastPage:"0",recommendStatus:!1},attr:{reported:{},preBcpSmartPhone:{},fmcPhoneSdkInstance:null,fmcPhoneSdkKey:"",prefetchPromise:null,hasInit:!1,hasPrefetch:!1,query:"",pageNum:1,fromPage:1,haveRecommend:!1},ubcLog:{from:"pinpaijieshao"},cusData:{shopId:"",masterShopId:"",pn:1,location:"",iscost:"",adLocation:"",nonAdLocation:"",firstPnData:[],firstPnHasMore:0,interVal:null},onPrefetch:function(t){if(!this.attr.hasPrefetch){this.attr.hasPrefetch=!0;var e=this.generateQuery(t.query);this.attr.prefetchPromise=this.getMainInfo(e)}},onInit:function(t){if(!this.attr.hasInit){var e=t.shopId,n=t.shopid,a=t.id,o=t.location,i=t.iscost,r=t.adLocation,s=t.nonAdLocation,c=t.sa,u=t.masterShopId;this.cusData=Object.assign(this.cusData,{shopId:e||n||a,masterShopId:u||"",location:o,iscost:i,adLocation:r,nonAdLocation:s,sa:c}),this.attr.hasInit=!0,this.initData(t)}},onLoad:function(t){var e=getCurrentPages(),n=1===e.length&&!/^pages\/index\/index/.test(e[0].uri),a=this.cusData,o=a.shopId,i=a.location,r=a.iscost,s=a.adLocation,c=a.nonAdLocation;this.options&&E.default.setDefaultParams({bdVid:this.options.bd_vid,query:this.options}),this.setData({isHeightVersion:(0,N.isHeightVersion)(),isShowHome:!this.data.isFromSecondFloor&&n}),this.setLogFrom(o,i,r,s,c),this.attr.hasInit||(this.attr.hasInit=!0,this.initData(t))},onHide:function(){clearInterval(this.cusData.interVal)},getCommonExt:function(){return{shop_id:this.cusData.shopId,master_shop_id:this.cusData.masterShopId}},sendLog:function(t,e,n){var a=this.getCommonExt();i.$log.sendNew((0,P.default)((0,P.default)({module:t},n),a),e,{},"shangMen")},setUrlParams:function(t,e){var n=t;return n.endsWith("/")&&(n=n.slice(0,-1)),n.includes("?")?n.endsWith("?")||(n+="&"):n+="?",e.filter((function(t){return t&&t[1]})).forEach((function(t,e,a){n+="".concat(t[0],"=").concat(t[1]),e!==a.length-1&&(n+="&")})),n},goToPay:function(t){if(this.sendLog("go-to-pay","click",{sa:this.cusData.sa}),t.isLogin){var e=this.data.buySku,n=e.skuId,a=e.spuId,o=e.toastText;if(o)i.showToast({title:o,icon:"none",duration:2e3});else{var r=this.cusData.shopId,s=this.cusData.masterShopId,c=this.options,u=c.srcid,d=c.bd_vid,l=c.source,h=c.location,p=this.setUrlParams("/channels/shop/pages/order-creater/index",[["shopId",r],["masterShopId",s],["skuId",n],["spuId",a],["srcid",u],["bd_vid",d],["source",l],["location",h]]);this.$jump.to(p,"local")}}},setLogFrom:function(t,e,n,a,o){this.ubcLog={},this.ubcLog.from="".concat(t),i.$log.send((0,P.default)({module:"order-track",location:e,iscost:n,adLocation:a,nonAdLocation:o},this.getPageDetail()),"display")},initData:function(t){var e=this;return(0,k.default)(D.default.mark((function n(){var a,o,i;return D.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.cusData.shopId){n.next=2;break}return n.abrupt("return");case 2:if(e.attr.fmcPhoneSdkInstance=new L.default({sourceType:2003}),a=null,!e.attr.prefetchPromise){n.next=10;break}return n.next=7,e.attr.prefetchPromise;case 7:a=n.sent,n.next=14;break;case 10:return o=e.generateQuery(t),n.next=13,e.getMainInfo(o);case 13:a=n.sent;case 14:a.data.masterShopId=t.masterShopId,i=e.$http.get(e.$api.SHOP_INFO,a),e.getSkuInfo(i),e.getSkuList(!0);case 18:case"end":return n.stop()}}),n)})))()},onUnload:function(){this.disconnectObserver(),clearInterval(this.cusData.interVal)},onReachBottom:function(){this.fetchRecommendList()},fetchRecommendList:function(){var t=this;if(!this.options.bd_vid&&this.options.query&&this.attr.haveRecommend&&!+this.data.lastPage&&!this.data.recommendStatus){1!==this.attr.pageNum&&this.setData({recommendStatus:!0});var e=this.attr,n=e.fromPage,a=e.pageNum;this.$http.get(this.$api.MALL_INDEX,{data:{type:2,page:a,fromPage:n,act:"recommendAreaList",query:this.options.query,shopId:this.cusData.shopId,masterShopId:this.cusData.masterShopId}}).then((function(e){t.attr.pageNum+=1;var n=e.recommendTitle,a=e.lastPage,o=e.aspData,i=void 0===o?[]:o,r=e.rightData,s=void 0===r?[]:r,c=e.servData,u=void 0===c?[]:c,d=[].concat((0,_.default)(i),(0,_.default)(s),(0,_.default)(u)),l=t.data.recommendList.length;t.setData({recommendStatus:!1,recommendTitle:n,recommendList:[].concat((0,_.default)(t.data.recommendList),(0,_.default)(d)),lastPage:a},(function(){t.bindRecommendDisplay(d,l)}))})).catch((function(e){t.setData({recommendStatus:!1})}))}},bindRecommendDisplay:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=".recommend-list-";i.nextTick((function(){for(var o=function(o){var r=a+o,s=i.createIntersectionObserver(e);s.relativeToViewport().observe(r,(function(){s.disconnect(),e.$http.get(e.$api.MALL_INDEX,{data:{type:1,act:"recommendAreaList",fromPage:e.attr.fromPage,logInfo:JSON.stringify(t[o].logInfo),masterShopId:e.cusData.masterShopId}}),e.sendLog("recommendShop","show",(0,P.default)({order:n+o},t[o].logInfo||{}))}))},r=0;r<t.length;r+=1)o(r)}))},onRecommendClk:function(t){var e=t.currentTarget.dataset.index,n=this.data.recommendList[e];if(n&&n.xcx_params){var a=n.xcx_params,o=a.jump_url,i=a.jump_type,r=o;"local"===i&&(r+="&isRecommend=1"),this.$jump.to(r,i),this.sendLog("recommendSku","click",(0,P.default)({order:+e},n.logInfo||{}))}},disconnectObserver:function(){var t=this.attr.intersectionObserver;t&&t.disconnect()},generateQuery:function(t){var e=t.shopId,n=t.shopid,a=t.id;return{shopId:e||n||a,sa:t.sa}},getPageDetail:function(){return{merchant_rank:this.options.location,shop_id:this.options.shopId,buy_order:this.options.source,srcid:this.options.srcid,bd_vid:this.options.bd_vid,cmatch:this.options.bd_vid?"1629":void 0}},getSkuInfo:function(t){var e=this;t.then((function(t){if(t){var n=t.name,a=t.logo,r=t.visitors,s=t.homeTime,c=t.description,u=t.companyName,d=t.authImage,l=t.guarantee,h=t.shopGuarantee,p=t.servicePhone,f=void 0===p?"":p,g=t.remarkInfo,m=void 0===g?{}:g,v=t.sampleVal,w=void 0===v?"":v,b=t.buySku,y=void 0===b?{}:b,T=t.preBcpSmartPhone,S=void 0===T?{}:T,I=t.hideCoupon,C=t.haveRecommend;f&&e.sendLog("phone","show",e.getPageDetail()),C&&(e.attr.haveRecommend=!0,e.fetchRecommendList()),e.attr.preBcpSmartPhone=S,2===S.type&&(0,B.getCuid)().then((function(t){var n=t.uid;e.attr.fmcPhoneSdkKey=e.attr.fmcPhoneSdkInstance.init({uid:S.uid,realPhones:f,solutionIds:S.solutionIds,baiduid:n,extraInfo:{bdVid:e.options.bd_vid}})}));var x=m.remarkScore?(0,R.transScoreToStarsWidth)(m.remarkScore):{},_=x.score,D=void 0===_?"":_,k=x.scoreStarsWidth;m.remarkScore=D,m.remarkList&&m.remarkList.length>2&&(m.remarkList=m.remarkList.slice(0,2)),e.setData({securityList:l.promises.length&&l.promises.slice(0,3)||[],name:n,logo:a,visitors:r,homeTime:s,description:c,companyName:u,authImage:d,guarantee:l,shopGuarantee:h,servicePhone:f,remarkInfo:m,scoreStarsWidth:k,sampleVal:w,buySku:y,hideCoupon:I},(function(){i.$log.send({module:"shop-page-show",sampleVal:e.data.sampleVal},"display"),e.handleShopDetailClamp()}));var P=I||{},E=P.stayTime,L=P.stayPic,A=P.canGetHideCoupon;if(F.some((function(t){return w.includes(t)}))&&E){var O=0;e.cusData.interVal=o((function(){++O>=+E&&e.data.hideCouponInfo&&!e.data.showEnsurePopup&&(clearInterval(e.cusData.interVal),e.setData({couponRetainBg:L,retainFrom:"stay",showRetain:!0},(function(){e.recordRetain(2),e.sendLog("popups","show",{sampleVal:e.data.sampleVal})})))}),1e3)}A?e.getHideCoupon():clearInterval(e.cusData.interVal)}}))},getMainInfo:function(t){var e=this;return(0,k.default)(D.default.mark((function n(){var a,o,i,r,s;return D.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(null===(a=M.globalData)||void 0===a?void 0:a.systemInfo)||{},i=o.brand,r=o.model,n.next=3,(0,B.getSysData)();case 3:return s=n.sent,n.t0=P.default,n.t1={shopId:t.shopId,masterShopId:t.masterShopId||"",sa:t.sa,zid:s.zid,imei:s.imei,brand:i,model:r},n.next=8,(0,U.postBackSid)(e.options);case 8:return n.t2=n.sent,n.t3=(0,n.t0)(n.t1,n.t2),n.abrupt("return",{data:n.t3});case 11:case"end":return n.stop()}}),n)})))()},getSkuList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,k.default)(D.default.mark((function n(){var a,o,i,r,s,c,u,d,l;return D.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=[],!e){n.next=5;break}t.cusData.pn=1,n.next=13;break;case 5:if("end"!==t.data.loadStatus){n.next=7;break}return n.abrupt("return");case 7:if(1!==t.cusData.pn){n.next=13;break}return o=[].concat((0,_.default)(t.data.skuList),(0,_.default)(t.cusData.firstPnData)),t.setData({skuList:o,loadStatus:t.cusData.firstPnHasMore?"more":"end"}),t.handleShopShow(o.length),t.cusData.pn++,n.abrupt("return");case 13:return t.setData({loadStatus:"loading"}),n.t0=P.default,n.t1={shopId:t.cusData.shopId,masterShopId:t.cusData.masterShopId,page:t.cusData.pn},n.next=18,(0,U.postBackSid)(t.options);case 18:n.t2=n.sent,i=(0,n.t0)(n.t1,n.t2),r=t.data,s=r.selectedTabIndex,c=r.selectedSubTabIndex,u=r.tabs,d=r.subTabs,l={},s>0&&0===c?l.tabId="".concat(u[s].id):c>0&&(l.tabId="".concat(u[s].id),l.tagList="".concat(d[c].id)),l.tabId&&Object.assign(i,l),t.$http.get(t.$api.SHOP_SKU_LIST,{data:i}).then((function(n){if(n){var o=n.tab,r=n.skuList,c=n.hasMore;Array.isArray(r)&&r.forEach((function(t){var e=t.supportPayType,n=t.price,a=t.prepayPrice,o=t.couponPrice,i=t.couponLabel,r=i&&i.length?o/100:n/100;4==+e&&(r=a/100);var s=r.toString(),c=null==s?void 0:s.split("."),u=(0,x.default)(c,2);t.priceInt=u[0],t.priceFloat=u[1]})),0===t.data.tabs.length&&Array.isArray(o)&&(o.forEach((function(t){t.tag&&t.tag.unshift({id:"0",name:"全部"})})),t.setData({tabs:o}),o[s].tag&&t.setData({subTabs:o[s].tag})),e&&1===i.page?(t.cusData.firstPnData=r.slice(2),t.cusData.firstPnHasMore=c,a=r.slice(0,2),t.setData({skuList:a,loadStatus:r.length>2?"more":"end"})):(a=e?r:[].concat((0,_.default)(t.data.skuList),(0,_.default)(r)),t.setData({skuList:a,loadStatus:c?"more":"end"}),t.cusData.pn++),t.handleShopShow(a.length)}}));case 25:case"end":return n.stop()}}),n)})))()},onClick:function(t){A.default.withEvent(t)},onLeftTap:function(t){var e=t.target.dataset.action;"back"===e&&this.onBackClick(t),"home"===e&&this.onHomeClick(t)},onBackClick:function(){this.data.isFromSecondFloor&&1===getCurrentPages().length?i.exit():A.default.back()},onHomeClick:function(){var t,e=((null===(t=M.globalData)||void 0===t?void 0:t.systemInfo)||{}).host;(0,j.sendCount)({homeClick:1}),"baiduboxapp"===e&&(0,N.isGreaterVersion)("13.2.0")?i.openBdboxWebview({module:"appTab",action:"select",parameters:{item:"service"}}):A.default.goHome()},handleShopDetailClamp:function(){this.data.description&&(this.data.description.length>50?this.setData({shopDetailTxt:this.data.description.slice(0,50)}):this.setData({shopDetailTxt:this.data.description,shopDetailSpread:!0}))},spreadShopDetail:function(){this.setData({shopDetailTxt:this.data.description,shopDetailSpread:!0})},changeShopTab:function(t){var e=t.currentTarget.dataset.index,n=this.data.tabs[e].tag;this.setData({selectedTabIndex:e,viewTab:"shop-tab-".concat(e>0?e-1:0),subTabs:n||[],selectedSubTabIndex:0}),this.getSkuList(!0)},changeShopSubTab:function(t){var e=t.currentTarget.dataset.index;this.setData({selectedSubTabIndex:e,viewSubTab:"shop-sub-tab-".concat(e)}),this.getSkuList(!0)},tapMoreBtn:function(){this.sendLog("more","click",{}),this.getSkuList()},jumpFn:function(t){var e=t.target.dataset.jumpUrl.split("?"),n=e[0],a="?url=".concat(encodeURIComponent("".concat(n,"?").concat(e[1])));i.navigateTo({url:"/homes/webview/webview".concat(a)})},jumpSkuFn:function(t){var e=t.currentTarget.dataset,n=e.type,a=e.index,o=e.item,i=e.url,r=this.options,s=r.bd_vid,c=r.srcid,u=r.source,d=this.cusData,l=d.location,h=d.iscost,p=d.adLocation,f=d.nonAdLocation,g=this.data,m=g.selectedSubTabIndex,v=g.selectedTabIndex,w=g.tabs,b=g.subTabs,y=w[v],T=b[m],S=this.setUrlParams(i,[["location",l],["adLocation",p],["nonAdLocation",f],["iscost",h],["bd_vid",s],["srcid",c],["source",u]]);this.sendLog("service","click",(0,P.default)((0,P.default)({service_two:y.name,service_three:T.name,merchant_type:n,service_price:o.couponPrice||o.price,service_rank:a,service_id:o.spuId},this.getPageDetail()),{},{shop_id:y.id})),A.default.to(S,n)},handleShopShow:function(t){var e=this;t&&i.nextTick((function(){e.attr.intersectionObserver&&e.attr.intersectionObserver.disconnect(),e.attr.intersectionObserver=i.createIntersectionObserver(e,{thresholds:[.9],selectAll:!0}).relativeToViewport({bottom:-36,top:0});var n=e.attr.reported,a=e.data,o=a.selectedSubTabIndex,r=a.selectedTabIndex,s=a.tabs,c=a.subTabs,u=s[r],d=c[o],l=Array.from({length:t},(function(t,e){return"#shop-service-item-img-".concat(e)})).join(", ");e.attr.intersectionObserver.observe(l,(function(t){var a=t.id,o=t.dataset,i=a.split("shop-service-item-img-")[1],r=o.type,s=o.index,c=o.item;n[i]||(e.sendLog("service","show",{service_two:u.name,service_three:d.name,merchant_type:r,shop_id:u.id,service_price:c.couponPrice||c.price,service_rank:s,service_id:c.spuId,name:c.name}),n[i]=!0)}))}))},jumpCommentDetail:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpType,o=e.listLoc,i=n;i="".concat(i,"?shopId=").concat(this.cusData.shopId,"&masterShopId=").concat(this.cusData.masterShopId),o&&(i+="&listLoc=".concat(o)),A.default.to(i,a)},showEnsurePop:function(t){this.sendLog("module","click",{shop_id:this.options.id}),this.setData({showEnsurePopup:!0})},closeEnsurePopupFn:function(){i.$log.send({module:"shop-close-ensure-pop",sampleVal:this.data.sampleVal},"click"),this.setData({showEnsurePopup:!1})},toggleSkuModal:function(t){this.setData({showSkuModal:t.currentTarget.dataset.showModal}),this.cusData.iscost&&E.default.log({convertType:2}),this.sendLog("phone-popup","show",this.getPageDetail()),this.sendLog("phone","click",this.getPageDetail())},makePhone:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a,o,r,s,c,u,d,l,h;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data.servicePhone,a=t.attr,o=a.preBcpSmartPhone,r=a.fmcPhoneSdkKey,s=a.fmcPhoneSdkInstance,c=o.type,u=o.uid,d=o.solutionIds,!(2===c&&u&&d&&s)){e.next=11;break}return e.next=6,(0,B.getCuid)();case 6:l=e.sent,h=l.uid,s.getCallNumber({uid:u,realPhone:n,solutionId:d,key:r,baiduid:h,extraInfo:{bdVid:t.options.bd_vid}}).then((function(t){var e=t.virtualPhone;i.makePhoneCall({phoneNumber:e})}),(function(){i.makePhoneCall({phoneNumber:n})})),e.next=12;break;case 11:i.makePhoneCall({phoneNumber:n});case 12:t.sendLog("phone-popup","click",t.getPageDetail());case 13:case"end":return e.stop()}}),e)})))()},getHideCoupon:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a,o;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cusData,a=n.shopId,o=n.masterShopId,e.t0=t.$http,e.t1=t.$api.MALL_INDEX,e.t2=P.default,e.t3={act:"hideCouponList",shopId:a,masterShopId:o,type:1},e.next=7,(0,U.postBackSid)(t.options);case 7:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={data:e.t5},e.t0.get.call(e.t0,e.t1,e.t6).then((function(e){var n=e.couponInfo,a=Array.isArray(n)&&n[0];t.setData({hideCouponInfo:a})}));case 11:case"end":return e.stop()}}),e)})))()},hidePopup:function(){this.sendLog("popups-jujue","click",{sampleVal:this.data.sampleVal}),this.setData({showRetain:!1})},drawCoupon:function(t,e){var n=this;return(0,k.default)(D.default.mark((function a(){var o,r;return D.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.length){a.next=21;break}return o={act:"takeCoupon",masterShopId:n.cusData.masterShopId,couponList:[]},Array.isArray(t)?o.couponList=t:o.couponList.push(t),e&&(o.type=e),a.prev=4,a.next=7,(0,B.getSysData)();case 7:return r=a.sent,a.next=10,n.$http.post(n.$api.ORDER_INDEX,{data:(0,P.default)({zid:r.zid||""},o),noTry:!0});case 10:if(!a.sent){a.next=15;break}return i.hideLoading(),i.showToast({title:"领取优惠券成功",icon:"none"}),a.abrupt("return",Promise.resolve());case 15:a.next=21;break;case 17:return a.prev=17,a.t0=a.catch(4),i.hideLoading(),a.abrupt("return",Promise.reject(a.t0));case 21:case"end":return a.stop()}}),a,null,[[4,17]])})))()},onPageScroll:function(t){var e=t.scrollTop;this.setData({pageScrollTop:e})},getRetainCoupon:function(){var t=this;this.sendLog("popups-lingqu","click",{sampleVal:this.data.sampleVal}),i.showLoading({title:"正在领取优惠券",mask:!0});var e=this.data.hideCouponInfo.batchId;this.drawCoupon(e,"hideCoupon").then((function(e){t.setData({showRetain:!1,titleTips:"以下服务可使用刚领取的优惠券"}),(0,R.findTarget)("shop-service","",t).then((function(e){var n=M.globalData.systemInfo,a=n.navigationBarHeight,o=n.statusBarHeight;i.pageScrollTo({scrollTop:t.data.pageScrollTop+e.top-a-o-10,duration:300})}))})).catch((function(e){var n="领取失败了，请重试一次吧";90008026!=+e.code&&90008029!=+e.code||(n="您已领取过，不能领取了哦",t.setData({showRetain:!1})),i.showToast({title:n,icon:"none"})}))},clickLeave:function(){this.hidePopup()},clickMask:function(){this.hidePopup()},recordRetain:function(t){this.$http.get(this.$api.MALL_INDEX,{data:{act:"writeRate",type:t,masterShopId:this.cusData.masterShopId}})}}))})),window.define("443",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(19)),x=I(t(157)),_=I(t(141)),D=t(26);Page((0,_.default)({ubcLog:{from:"evaluation_page"},data:{status:"loading",hasMore:1,remarkList:[],showTip:!1,topText:"",text:"",isHaveRiskRemark:0,showRiskRemark:!1},cusData:{shopId:"",masterShopId:"",spuId:"",pageNum:1,listLoc:""},onInit:function(t){this.hasOnInit||(this.initData(t),this.hasOnInit=!0)},onLoad:function(t){this.hasOnInit||(this.initData(t),this.hasOnInit=!0)},initData:function(t){var e=t.shopId,n=t.masterShopId,a=t.spuId,o=t.listLoc;this.cusData.shopId=e,this.cusData.masterShopId=n||"",this.cusData.spuId=a||"",o&&(this.cusData.listLoc=o),this.getRemarkList(!0)},getRemarkList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cusData,a=n.shopId,o=n.spuId,i=n.pageNum,r=n.masterShopId,s={shopId:a,masterShopId:r,pageNum:i,act:"remarkList"};o&&(s.spuId=o),this.data.showRiskRemark&&(s.type="riskRemark");var c=this.data,u=c.isHaveRiskRemark,d=c.showRiskRemark;(!u||u&&d)&&this.$http.get(this.$api.ORDER_INDEX,{data:s}).then((function(n){var a=n.hasMore,o=n.totalCount,i=n.remarkList,r=n.topText,s=n.text,c=n.isHaveRiskRemark;t.setData({topText:r,text:s,hasMore:a,isHaveRiskRemark:c,totalCount:o,remarkList:[].concat((0,x.default)(t.data.remarkList),(0,x.default)(i)),status:""},(function(){t.cusData.pageNum++,e&&t.scrollToListItem()}))})).catch((function(e){t.setData({status:"error"})}))},scrollToListItem:function(){var t=this,e=this.cusData.listLoc;e&&Promise.all([(0,D.findTarget)("top-fixed-bar","",this),(0,D.findTarget)("cm_"+e,"id",this)]).then((function(e){var n=(0,C.default)(e,2),a=n[0],i=n[1],r=t;o.pageScrollTo({scrollTop:i.top-a.bottom,success:function(){if(r.data.hasMore){var t=0;try{t=o.getSystemInfoSync().windowHeight}catch(t){}(0,D.findTarget)("bottom-tip","",r).then((function(e){e.top-i.top+e.height<=t&&r.loadMore()}))}}})}))},loadMore:(0,D.throttle)((function(){this.data.hasMore&&this.getRemarkList()}),1e3),onReachBottom:function(){this.loadMore()},onShowTipBoard:function(t){this.setData({showTip:!this.data.showTip})},onHideTipBoard:function(){this.setData({showTip:!1})},onSpreadBtnClk:function(){var t=this;this.cusData.pageNum=1,this.setData({showRiskRemark:!0},(function(){t.loadMore()}))}}))})),window.define("446",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141));Page((0,I.default)({data:{authAfterText:"以上经营证照资质信息由卖家自行申报填写，如需进一步核实，请联系当地市场监督管理部门。",authBeforeText:"根据国家相关政策要求，对网店经营者相关资质信息公示如下：",shopPrice:""},onLoad:function(t){this.hasOnInit||(this.hasOnInit=!0,this.setData({shopPrice:t.authImage}))}}))})),window.define("449",(function(t,e,n,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(19)),_=C(t(15)),D=t(9),k=C(t(141)),P=["","个","十","百","千","万",""],E=[{prop:"原价",noPrice:!1,origin:0,unit:"￥",integer:"0.",decimal:"00"},{prop:"百度立减",noPrice:!0,origin:"",unit:"",integer:"",decimal:""},{prop:"店铺优惠",noPrice:!0,origin:"",unit:"",integer:"",decimal:""}],L=r();Page((0,k.default)({data:{MAX_PRICE:29999,MIN_PRICE:0,rendered:!1,showErrorPage:!1,serviceName:"买单",originCost:"",inputValue:"",errMsg:"",showPopupBox:!1,discountInfo:E,finalCost:{origin:0,unit:"￥",integer:"0.",decimal:"00"},inputValueUnitCN:"",originCostUnitCN:"",showLabel:!1,numberList:[[1,2,3],[4,5,6],[7,8,9],[0]],imgList:{0:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2068336371,972338159&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",1:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3578344868,3583424835&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",2:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3321943205,1814553279&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",3:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=4197030855,575639040&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",4:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=300357355,4276295255&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",5:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2499655834,1488564178&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",6:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2800447567,2677212974&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",7:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1273899304,3615074656&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",8:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3283765039,1560921529&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",9:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=851083825,2749060122&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1",dian:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3179418,2894515026&fm=179&app=35&f=PNG?w=54&h=54&s=6B61736EFAA5B37C4E719C0F0300E0C1"},disable:!0,masterShopId:""},attr:{shopId:"",skuId:"",orderData:null,spuid:"",couponData:null,loading:!1,zid:"",imei:"",model:"",brand:"",riskUser:""},ubcLog:{from:"order-creater"},onInit:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e;var n=e.skuId,a=void 0===n?"":n,o=e.spuId,i=void 0===o?"":o,r=e.shopId,s=void 0===r?"":r,c=e.masterShopId,u=void 0===c?"":c;this.attr.skuId=a,this.attr.spuId=i,this.attr.shopId=s,this.attr.cityCode=(null===(t=L.globalData.location)||void 0===t?void 0:t.cityCode)||"",this.setData({masterShopId:u}),this.initData(i,s)},initData:function(t,e){var n=this;(0,D.getSysData)().then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=L.globalData.systemInfo||{},i=o.brand,r=o.model,s=a.zid,c=void 0===s?"":s,u=a.imei,d=void 0===u?"":u;n.attr.zid=c,n.attr.imei=d,n.attr.brand=i,n.attr.model=r,n.$http.get(n.$api.ORDER_INDEX,{data:{act:"getBuyInfo",shopId:e,masterShopId:n.data.masterShopId,spuId:t,zid:c,imei:d,brand:i,model:r}}).then((function(t){var e=t.orderData,a=t.showData,o=void 0===a?{}:a,i=t.checkData,r=(void 0===i?{}:i).priceLimit||0,s=o.shopName;n.attr.orderData=e,n.setData({rendered:!0,showErrorPage:!1,serviceName:s,showPopupBox:!0,MIN_PRICE:r/100})})).catch((function(t){n.setData({rendered:!0,showErrorPage:!1,serviceName:"测试",showPopupBox:!0,MIN_PRICE:100})}))}))},onErrorPageReload:function(){this.initData()},navTo:function(t){var e=t.currentTarget.dataset.info,n=e.jumpUrl,a=e.jumpType;this.$jump.to(n,a)},onPopupBoxClose:function(){this.setData({showPopupBox:!1})},onInputConfirm:function(){var t=this.data.inputValue;if(t){var e=this.checkInput(t);e?this.showInputErrorToast(e):(this.setData({showPopupBox:!1,originCost:t,originCostUnitCN:P[t.length]}),this.calculatePrice(t))}},calculatePrice:function(t){var e=this;if(!this.attr.loading){this.attr.loading=!0,i.showLoading({title:"优惠计算中",mask:!0});var n=this.attr,a=n.shopId,o=n.spuId,r=n.skuId,s=n.zid,c=n.imei,u=n.model,d=n.brand;this.$http.get(this.$api.ORDER_INDEX,{data:{act:"buyCalculatePrice",price:100*t,spuId:o,skuId:r,shopId:a,masterShopId:this.data.masterShopId,zid:s,imei:c,model:u,brand:d}}).then((function(n){var a=n.payAmount,o=void 0===a?0:a,r=n.discountPrice,s=void 0===r?[]:r,c=n.couponData,u=n.toastText,d=n.status,l=n.riskUser;if(e.attr.riskUser=l,!d)return u&&i.showToast({title:u,icon:"none",duration:2e3}),i.hideLoading(),void e.initStatus();var h=s.map((function(t){return(0,_.default)({prop:t.title},e.dealPrice(t.price,!0))}));h.unshift((0,_.default)({prop:"总价"},e.dealPrice(100*t,!1)));var p=e.dealPrice(o,!1);e.attr.loading=!1,e.attr.couponData=c,e.setData({finalCost:p,discountInfo:h,showLabel:c&&c.length>0}),i.hideLoading(),u&&i.showToast({title:u,icon:"none",duration:2e3})})).catch((function(t){e.attr.loading=!1,e.initStatus(),i.hideLoading(),i.showToast({title:"优惠计算失败",icon:"none",duration:1e3})}))}},dealPrice:function(t,e){if(0===t&&e)return{origin:t,noPrice:!0,unit:"",integer:"",decimal:""};var n=(t/100).toFixed(2).split("."),a=(0,x.default)(n,2),o=a[0],i=a[1],r=void 0===i?"":i;return{origin:t,noPrice:!1,unit:"￥",integer:"".concat(o,"."),decimal:r}},onPayTap:function(){var t=this,e=this.data.originCost;""===this.checkInput(e)&&(this.attr.loading||(this.attr.loading=!0,i.hideToast(),i.showLoading({title:"订单生成中...",mask:!0}),this.buyOrder(e).then((function(e){var n=e.orderId,o=e.payAmount,r=e.payInfo,s=e.status,c=e.toastText;if(!s)return i.hideLoading(),i.showToast({title:c,icon:"none",duration:2e3}),void(t.attr.loading=!1);o<=0?a((function(){t.afterPay(n)}),1e3):t.payment(r,(function(e){t.afterPay(n)}))})).catch((function(e){t.attr.loading=!1,i.hideLoading(),i.showToast({title:"下单失败，请重试",icon:"none",duration:2e3})}))))},buyOrder:function(t){var e=this.attr,n=e.orderData,a=e.couponData,o=e.cityCode,i=e.zid,r=e.imei,s=e.model,c=e.brand,u=e.riskUser,d=this.options,l=d.source,h=d.srcid,p=d.shopId,f=d.location,g=d.bd_vid,m=L.globalData,v=m.xfrom,w=m.sfrom,b=m.enterQid;return this.$http.get(this.$api.ORDER_INDEX,{data:{act:"buyOrder",cityCode:o,originalPrice:100*t,orderData:n,couponData:a,zid:i,imei:r,model:s,brand:c,riskUser:u,qid:b,srcid:h,buy_order:l,bd_vid:g,cmatch:g?"1629":void 0,shopId:p,masterShopId:this.data.masterShopId,xfrom:v,sfrom:w,location:f}})},payment:function(t,e){i.requestPolymerPayment({orderInfo:t,success:e,fail:e})},afterPay:function(t){this.attr.loading=!1,this.initStatus(),i.hideLoading(),this.$jump.to("/channels/shop/pages/order/index?orderId=".concat(t),"local")},initStatus:function(){this.setData({originCost:"",inputValue:"",discountInfo:E,disable:!0,errMsg:"",finalCost:{origin:0,unit:"￥",integer:"0.",decimal:"00"},inputValueUnitCN:"",originCostUnitCN:"",showLabel:!1}),this.attr.couponData=null,this.attr.loading=!1},onOriginValueTap:function(){this.setData({showPopupBox:!0})},clearInputValue:function(){this.setData({inputValue:"",inputValueUnitCN:"",disable:!0})},checkInput:function(t){var e=+t;return e<this.data.MIN_PRICE?"买单金额最低¥".concat(this.data.MIN_PRICE,".00"):e>this.data.MAX_PRICE?"买单金额不可超过¥".concat(this.data.MAX_PRICE,".00"):""},onKeyboardNumberTap:function(t){i.vibrateShort();var e=t.target.dataset.info;if("."!==e){var n=this.data,a=n.inputValue;if(!(a>n.MAX_PRICE)){var o=a+e;o.length>1&&"0"===o[0]&&(o=o.substr(1)),isNaN(+o)&&(o=a);var r=this.checkInput(o);this.setData({inputValue:o,inputValueUnitCN:P[o.length],disable:Boolean(r),errMsg:r})}}},showInputErrorToast:function(t){i.showToast({title:t,icon:"none",duration:2e3})},onKeyboardDelete:function(){i.vibrateShort();var t=this.data.inputValue;if(!(t.length<=0)){t=t.substr(0,t.length-1);var e=this.checkInput(t);this.setData({inputValue:t,inputValueUnitCN:P[t.length],disable:Boolean(e),errMsg:e})}},onKeyboardConfirm:function(){i.vibrateShort(),this.onInputConfirm()}}))})),window.define("452",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(16)),x=I(t(141)),_=t(169);Page((0,x.default)({data:{pageTitle:"",topBarOpacity:0,tabs:[],discountList:[],recommend:[],current:0},ubcLog:{from:"coupon-channel-home"},attr:{hasInit:!1,title:"",options:{},prefetchPromise:null},onPrefetch:function(t){var e=t.query;this.attr.prefetchPromise=this.fetchData(e)},onInit:function(t){this.attr.hasInit||(this.attr.hasInit=!0,this.attr.options=t,this.initData())},onLoad:function(t){this.attr.hasInit||(this.attr.hasInit=!0,this.attr.options=t,this.initData())},fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.tab,n=void 0===e?0:e,a=t.city_name,o=void 0===a?"北京":a,i=t.query,r=void 0===i?"":i;return this.$http.get(this.$api.GET_COMMON_PAGE,{data:{serviceId:"103",paramIndex:2,query:r,city_name:o,tab:n,pn:0,rn:10}})},initData:function(){var t=this,e=this.attr.prefetchPromise;e?this.attr.prefetchPromise=null:e=this.fetchData(this.attr.options),e.then((function(e){var n=e.welfare_page,a=n.recommend,o=n.title,i=n.tabs,r=n.discountList,s=n.bgImg,c=(0,_.getTabIndex)(i,+r.selectTag);t.setData((0,C.default)({showErrorPage:!1,rendered:!0,urlQuery:t.attr.options,recommend:a,tabs:i,bgImg:s,current:c},"discountList[".concat(c,"]"),r),(function(){t.attr.title=o}))})).catch((function(e){return t.$showErrorPage(e.errType)}))},onPageScroll:function(t){var e=t.scrollTop>0?1:0;this.setData({topBarOpacity:e,pageTitle:1===e?this.attr.title:""})},recommendClick:function(t){var e=t.currentTarget.dataset.item.url,n=e.jumpType,a=e.jumpUrl;this.$jump.to(a+"&city_code=".concat(this.attr.options.city_code),n)},onErrorPageReload:function(){this.initData()}}))})),window.define("455",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(157)),x=I(t(141));Page((0,x.default)({data:{pn:"0",isLoading:"loading",rendered:!1,showErrorPage:!1},hasInit:!1,ubcLog:{from:"coupon-list"},onInit:function(t){this.hasInit||(this.hasInit=!0,this.opt=t,this.initData())},onLoad:function(t){this.hasInit||(this.hasInit=!0,this.opt=t,this.initData())},initData:function(){var t=this,e=this.opt,n=e.city_name,a=void 0===n?"北京":n,o=e.brand_name,i=e.query;this.$http.get(this.$api.GET_COMMON_PAGE,{data:{city_name:a,brand_name:o,pn:0,rn:10,serviceId:103,paramIndex:3,query:i}}).then((function(e){t.setData({rendered:!0,showErrorPage:!1,title:e.welfare_brand.title||"",color:e.welfare_brand.color||"",header:e.welfare_brand&&e.welfare_brand.header,coupon:e.welfare_brand&&e.welfare_brand.recommend,couponList:e.welfare_brand.recommend&&e.welfare_brand.recommend.recommendList,discountList:e.welfare_brand&&e.welfare_brand.discountList,isLoading:e.welfare_brand.discountList&&+e.welfare_brand.discountList.hasMore?"loading":"complete"},(function(){+t.data.discountList.hasMore||t.setData({isLoading:"complete"})}))})).catch((function(e){return t.$showErrorPage(e.errType)}))},couponJump:function(t){var e=t.currentTarget.dataset.item.url,n=e.jumpType,a=e.jumpUrl;this.$jump.to(a,n)},onErrorPageReload:function(){this.initData()},onReachBottom:function(){var t=this;if("loading"===this.data.isLoading){var e=this.data.discountList,n=this.opt,a=n.city_code,i=n.brand_name,r=n.query;this.$http.get(this.$api.GET_COMMON_PAGE,{data:{pn:e.pn,city_code:a,brand_name:i,rn:10,serviceId:103,paramIndex:3,query:r},isShowToast:!0}).then((function(n){var a=n.welfare_brand.discountList,o=a.hasMore,i=a.list,r=a.pn;t.setData({showErrorPage:!1,"discountList.pn":r,"discountList.list":[].concat((0,C.default)(e.list),(0,C.default)(i)),isLoading:+o?"loading":"complete"})})),o.$log.send({module:"load_more_data"},"scroll")}else o.$log.send({module:"no_more_data"},"scroll")}}))})),window.define("458",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(141)),D=t(459),k=t(26);Page((0,_.default)({data:{serviceName:"",showErrorPage:!0,rendered:!1,customHeight:90,backgroundColor:"linear-gradient(to right, #FF8049 0%, #FF5C56 100%);",tabs:[],discountList:[],recommend:[],currentTab:0,contentList:[],urlQuery:{},minContentHeight:0,tap:!1},ubcLog:{from:"brand-channel-home"},attr:{hasInit:!1,options:{},prefetchPromise:null},onPrefetch:function(t){var e=t.query;this.attr.prefetchPromise=this.fetchData(e)},onInit:function(t){this.attr.hasInit||(this.attr.hasInit=!0,this.attr.options=t,this.initData())},onLoad:function(t){this.attr.hasInit||(this.attr.hasInit=!0,this.attr.options=t,this.initData())},initData:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,o,i,r,s,c,u,d;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.attr,a=n.options,o=n.prefetchPromise,i=a.cityName,r=void 0===i?"":i,s=a.cityCode,c=void 0===s?"":s,u=a.brand,(d=o)?t.attr.prefetchPromise=null:d=t.fetchData(a),d.then((function(e){var n=e.allTabs,a=e.serviceName,o=e.uniformStyle;if(n&&n.length){var i=(0,D.revertToObjArr)(n,"text","id"),s=u?(0,D.getTabIndexFromName)(n,i,u):0,d=i.map((function(t,n){return n===s?e:null}));delete e.allTabs,t.setData({urlQuery:{city_name:r,city_code:c},serviceName:a,tabs:i,showErrorPage:!1,currentTab:s,contentList:d,uniformStyle:(0,k.gzipImgList)(o)},(function(){t.setData({rendered:!0})}))}else t.$showErrorPage(3)})).catch((function(e){t.$showErrorPage(e.errType)}));case 5:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cityName,n=void 0===e?"":e,a=t.cityCode,o=void 0===a?"":a,i=t.brand;return this.$http.get(this.$api.FOOD_SPECIALS,{data:{init_req:1,serviceId:"105",paramIndex:1,query:i,city_name:n,city_code:o,rn:10,pn:0}})},onErrorPageReload:function(){this.initData()},getMinContentHeight:function(t){var e=t.detail.minContentHeight;this.setData({minContentHeight:e})},tabHeaderTap:function(t){var e=t.index,n=t.tap;this.setData({currentTab:e,tap:n})},changeSwiper:function(t){var e=this.data,n=e.tap,a=e.tabs,i=t.currentTab;n||this.data.currentTab===i||o.$log.send({module:"tehui_tab",type:"swpier",tabName:a[i]},"click"),this.setData({currentTab:i})},getFeedTabRectTopOnce:function(t){var e=this;return new Promise((function(n){if(!t&&e.attr.feedTabRectTop)return n(e.attr.feedTabRectTop);(0,k.findTarget)("waterfall-tab","",e).then((function(t){e.attr.feedTabRectTop=t.top+e.attr.scrollTop,n(e.attr.feedTabRectTop)}))}))},onPageScroll:function(t){var e=this,n=t.scrollTop,a=n>0?1:0;this.attr.scrollTop=n,this.getFeedTabRectTopOnce().then((function(t){if(t){var o=e.data,i=o.statusBarHeight,r=o.navigationBarHeight,s=n+(i+r)>=t;e.setData({opacity:a,isFixed:s})}}))}}))})),window.define("459",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.getTabIndexFromName=n.revertToObjArr=n.getTabId=n.getTabIndex=void 0;var C=I(t(16));n.getTabIndex=function(t,e){var n=0;return t.forEach((function(t,a){return e===+t.id&&(n=a)})),n};n.getTabId=function(t,e){return t.filter((function(t,n){return n===e}))[0].id};n.revertToObjArr=function(t,e,n){return t.map((function(t,a){var o;return o={},(0,C.default)(o,e,t),(0,C.default)(o,n,a),o}))};n.getTabIndexFromName=function(t,e,n){return t.includes(n)?e.filter((function(t,e){return t.text===n}))[0].id:0}})),window.define("462",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C=t(26),x="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=4096820804,3601850059&fm=179&app=35&f=PNG?w=1242&h=840&s=FD2E777E4B6367240C7050FE0300C030";Page((0,I.default)({data:{currentTab:0,bgImg:(0,C.gzipImg)(x)},attr:{prefetchPromise:null},ubcLog:{from:"recharge-second"},hasInit:!1,onPrefetch:function(){this.attr.prefetchPromise=this.fetchData(),o.canIUse("prefetchResources")&&o.prefetchResources({image:[{url:(0,C.gzipImg)(x)}]})},onInit:function(){this.hasInit||(this.hasInit=!0,this.initData())},onLoad:function(){this.hasInit||(this.hasInit=!0,this.initData())},fetchData:function(){return this.$http.get(this.$api.NEW_USER_GUIDE,{})},initData:function(){var t=this,e=this.attr.prefetchPromise;e?this.attr.prefetchPromise=null:e=this.fetchData(),e.then((function(e){var n=e.title,a=e.data;(0,C.isNonEmptyArray)(a)&&a.forEach((function(t){t.icon=(0,C.gzipImg)(t.icon),t.icon_hit=(0,C.gzipImg)(t.icon_hit),t.img_list.forEach((function(t){t.img=(0,C.gzipImg)(t.img)}))})),t.setData({title:n,rendered:!0,data:a.slice(0)},(function(){t.setData({data:a})}))})).catch((function(e){t.$showErrorPage(e.errType)}))},tabHeaderTap:function(t){var e,n=t.currentTarget.dataset.index;this.setData({currentTab:n,scrollTop:0}),o.$log.sendNew({module:"save_money",order:n+1,title:null===(e=this.data)||void 0===e?void 0:e.data[n].title},"click")},onSwiperBannerChange:function(t){var e=t.detail.current;this.setData({currentTab:e})}}))})),window.define("465",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(157)),D=x(t(15)),k=x(t(27)),P=x(t(29)),E=x(t(141)),L=t(26),A=t(144),O=x(t(14)),N=t(42),R=t(31),B=t(9),j=t(40),U=t(466),M=(0,B.getSystemInfo)(),F=M.navigationBarHeight,H=M.statusBarHeight,G=(0,B.isLogin)();Page((0,E.default)({data:{rendered:!1,showErrorPage:!1,bannerImg:(0,L.gzipImg)(U.BANNER),voiceImg:(0,L.gzipImg)(U.VOICE),couponImg:(0,L.gzipImg)(U.EXPRESS_COUPON),decorateImg:(0,L.gzipImg)(U.DECORATE),topImg:(0,L.gzipImg)(U.TOPIMG),opacity:0,tips:null,baoInfo:null,orderInfo:null,ruleInfo:null,dotUserTag:null,countdown:0,formatCountDown:null,currentTab:"feature",tabList:null,scrollIntoView:"tab-0",featureTitle:"",featureList:[],hasMore:1,hasMoreData:!0,allSkuList:[],cardList:[],pageScrollTop:0,stickyHeight:64,tabHeight:104,fixedTabHeight:59,isNeedDrawCoupon:!1,loginChange:!1,videoPath:U.VIDEO_PATH,canvasStyle:"width:".concat((0,L.vwUnit)(992),";height:").concat((0,L.vwUnit)(1216)),isShowPop:!1,popStatus:U.NO_ACTION,isLogin:G},attr:{hasInit:!1,hasShow:!1,scrollEnd:!0,commonPrefetch:null,featureDataPrefetch:null,hasRefuseAuth:!1,hasSendLog:{},selector:[]},ubcLog:{from:"new-freshmen-welfare"},onPrefetch:function(t){var e=t.query;this.attr.options=e,this.attr.commonPrefetch=this.fetchCommonData(),this.attr.featureDataPrefetch=this.fetchFeaturedData(),r.canIUse("prefetchResources")&&r.prefetchResources({video:[{url:this.data.videoPath}]})},onInit:function(t){this.attr.options=t,this.attr.hasInit||(this.attr.hasInit=!0,this.initData(!0))},onReady:function(){this.setSomeEleHeight()},onLoad:function(){r.setBackgroundColor({backgroundColorTop:"#FD0F21",backgroundColor:"#FBE7CD"})},onHide:function(){this.skuTimer&&clearInterval(this.skuTimer),this.attr.observe&&this.attr.observe.disconnect()},onShow:function(){this.sendPageShowLog(),this.attr.hasShow&&(this.attr.selector=[],this.attr.hasSendLog={},this.initData(!1)),this.attr.hasShow=!0},onErrorPageReload:function(){this.initData(!1)},sendPageShowLog:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchCommonData();case 2:n=e.sent,a=JSON.stringify({user_type:null==n?void 0:n.dotUserTag}),t.sendLog(a,"display");case 5:case"end":return e.stop()}}),e)})))()},newObserver:function(){var t=this;this.attr.observe=r.createIntersectionObserver(this,{thresholds:[1],selectAll:!0}).relativeToViewport(),this.attr.observe.observe(this.attr.selector.join(", "),(function(e){var n=e.dataset,a=n.ubcShow,o=n.id||e.id;t.attr.hasSendLog[o]||(t.attr.hasSendLog[o]=!0,t.sendLog(a,"show"))}))},setSomeEleHeight:function(){var t=this;(0,L.findTarget)("top-fixed-bar","",this).then((function(e){t.setData({stickyHeight:e.bottom})})),(0,L.findTarget)("tab-container","",this).then((function(e){t.setData({tabHeight:e.height})}))},fetchShowPop:function(){return this.$http.get(this.$api.COUPON_USEAGE_FLAG)},fetchNoticeServer:function(){return this.$http.get(this.$api.NOTIFY_COUPON_USEAGE_FLAG)},fetchDrawCoupon:function(t){var e=this;return(0,P.default)(k.default.mark((function t(){var n,a;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,A.getZidReTry)(),(0,A.getJtData)(R.FENGKONG_PARAMS.XINREN)]).catch((function(){return(0,L.textToast)("请求失败，请稍后再试哦~")}));case 2:return n=t.sent,a={data:{zid:n[0],jt:n[1],js_env:"swan",activity_id:"userCouponService",action:"draw"},noTry:!0,canResArrayNull:!0},t.abrupt("return",e.$http.get(e.$api.GET_ACTIVITY,a));case 5:case"end":return t.stop()}}),t)})))()},fetchCommonData:function(){return this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"userCouponService",action:"actv2"}})},fetchAuthList:function(){return this.$http.get(this.$api.THIRD_AUTH_LIST,{data:{path:this.route}})},fetchFeaturedData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=s().globalData.location,a=this.attr.options.top_rankid,o=void 0===a?"":a,i={data:{serviceId:103,paramIndex:7,pn:t,rn:e,city_name:n.city||"北京",city_code:n.cityCode||"131",top_rankid:o}};return this.$http.get(this.$api.ACTFEED,i)},getCouponConfig:function(t){return t===U.COUPON_STATUS.EMPTY_NOT_TERM_LAST_DAY&&(t=U.COUPON_STATUS.EMPTY_TERM_LAST_DAY),t===U.COUPON_STATUS.USED_NEXT_MONTH&&(t=U.COUPON_STATUS.USED),U.CONFIG[t]},updateCardList:function(t,e,n,a){var o=this,i=this.data.cardList,r=i.findIndex((function(e){return+e.type===t}));if(r>-1){var s=i[r];s=(0,D.default)((0,D.default)({},s),{},{loading:!s.data&&e,loadError:n}),a&&(s=(0,D.default)((0,D.default)({},s),{},{data:a})),i.splice(r,1,s)}this.setData({cardList:i},(function(){var e=o.getSelector(t,U.CARDCONF[t].id);o.attr.selector=o.attr.selector.concat(e),o.newObserver&&o.newObserver(e.join(", "),[1])}))},getDataError:function(t){if((0,L.isNonEmptyArray)(this.data.cardList)){var e=this.data.cardList.find((function(e){return+e.type===t}));null!=e&&e.data||this.updateCardList(t,!1,!0)}},fetchFoodData:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{activity_id:"userCouponService",action:"act_brand"}},a={},e.prev=2,e.next=5,t.$http.get(t.$api.GET_ACTIVITY,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.getDataError(U.CARDTYPE.FOOD),e.abrupt("return");case 12:o=null,(0,L.isNonEmptyArray)(a.skus)&&(i=a.skus.slice(0,3),o=i.map((function(e){var n=e.price,a=e.originPrice,o=e.useNum,i=e.tips,r=t.priceHandle(+n),s=t.priceHandle(+a),c=t.getUseNum(o);return(0,D.default)((0,D.default)({},e),{},{priceNum:r,originPrice:s,sold:c,tips:i||""})}))),t.updateCardList(U.CARDTYPE.FOOD,!1,!1,o);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})))()},fetchCoupon:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{activity_id:"userCouponService",action:"act_takeout",brand:"meituan"}},a={},e.prev=2,e.next=5,t.$http.get(t.$api.GET_ACTIVITY,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.getDataError(U.CARDTYPE.COUPON),e.abrupt("return");case 12:if((0,L.isNonEmptyArray)(a.valid_coupons)){e.next=15;break}return t.getDataError(U.CARDTYPE.COUPON),e.abrupt("return");case 15:(0,L.isNonEmptyArray)(a.valid_coupons)&&(o=1==+a.valid_coupons[0].type?3:2,(i=a.valid_coupons.slice(0,o)).forEach((function(e){Object.assign(e,t.getCouponConfig(e.status))})),t.updateCardList(U.CARDTYPE.COUPON,!1,!1,i));case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))()},fetchMovie:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i,r,c;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,a=s().globalData.location,o=t.attr.options.cityCode,e.next=6,t.$http.get(t.$api.MOVIE_LIST,{data:{cityCode:o||a.cityCode,dataIndex:0,onlyMovies:1}});case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),t.getDataError(U.CARDTYPE.MOVIE),e.abrupt("return");case 13:i=n.movies,r=null,(0,L.isNonEmptyArray)(i)&&(c=t.data.cardList.find((function(t){return+t.type===U.CARDTYPE.MOVIE})).appkey,i=i.slice(0,3),r=i.map((function(e){var n=e.movieId,a=e.score,o=e.poster,i=e.sourceList,r=e.name,s=e.wishNum,u=e.isPresale,d=e.jumpUrl;return{movieId:n,poster:o,sourceList:i,name:r,star:t.movieStar(e.score),score:a,wishNum:s,isPresale:u,jumpType:"xcx",jumpUrl:"".concat(c).concat(d)}}))),t.updateCardList(U.CARDTYPE.MOVIE,!1,!1,r);case 17:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchExpress:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{activity_id:"userCouponService",action:"act_express"}},a={},e.prev=2,e.next=5,t.$http.get(t.$api.GET_ACTIVITY,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.getDataError(U.CARDTYPE.EXPRESS),e.abrupt("return");case 12:o=null,(0,L.isNonEmptyArray)(a.couponInfo)&&(i=a.couponInfo.slice(0,3),o=i.map((function(t){var e=t.desc,n=t.unit,a=t.value,o=t.id,i=t.status,r=t.jumpType,s=t.jumpUrl;return(0,D.default)({desc:e,unit:n,value:a,id:o,status:i,jumpType:r,jumpUrl:s},U.EXPRESSMAP[i])}))),t.updateCardList(U.CARDTYPE.EXPRESS,!1,!1,o);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})))()},getUseNum:function(t){var e="";if(t&&!isNaN(t)){if(t<0)return"0";if(t<1e4)e=t;else{if(!(t>1e4&&t<=1e5))return"10万+";e=Math.floor(parseFloat(t/1e3))/10+"万"}}return e},priceHandle:function(t){var e="";if(t&&!isNaN(t)){if(t<0)return"";if(t<1e6)e=Math.floor(parseFloat(t))/100;else if(t>=1e6&&t<1e10){e=Math.floor(parseFloat(t/1e4))/100+"万"}else if(t>=1e10){e=Math.floor(parseFloat(t/1e8))/100+"亿"}}return e},formatTitle:function(t,e){var n=e;return t.forEach((function(t){n=n.replace(/\$\{highlight\}/,"<span class='highlight'>".concat(t,"</span>"))})),n},getSecondScreen:function(){this.fetchFoodData(),this.fetchCoupon(),this.fetchMovie(),this.fetchExpress()},handleClickMore:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i,s,c,u,d;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data.featureList,a=t.data,o=a.allSkuList,i=a.pn,s=a.hasMore,c=a.hasMoreData){e.next=4;break}return e.abrupt("return");case 4:if(r.showLoading({title:"正在加载...",mask:!0}),!(o.length>=6)&&+s){e.next=9;break}n.push.apply(n,(0,_.default)(o.splice(0,6))),e.next=23;break;case 9:return u=null,e.prev=10,e.next=13,t.fetchFeaturedData(i);case 13:u=e.sent,e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(10),r.hideLoading(),(0,L.textToast)("加载失败，请重试"),e.abrupt("return");case 21:(d=t.handleFeatureData(u))&&(i=d.pn,s=d.hasMore,o=d.allSkuList,n.push.apply(n,(0,_.default)(o.splice(0,6))));case 23:c=!(!o.length&&!+s),t.setData({allSkuList:o,featureList:n,pn:i,hasMore:s,hasMoreData:c},(function(){r.hideLoading();var e=t.getFeatureSelector();t.attr.selector=t.attr.selector.concat(e),t.newObserver&&t.newObserver(e.join(", "),[1])}));case 25:case"end":return e.stop()}}),e,null,[[10,16]])})))()},handleFeatureData:function(t){var e=this;if(t){var n=t.goods_welfare||{},a=n.skus,o=n.hasMore,i=n.pn,r=[];return(0,L.isNonEmptyArray)(a)&&(a.unshift.apply(a,(0,_.default)(this.data.allSkuList)),r=a.map((function(t){var n=t.price,a=t.origin_price,o=t.jump_type,i=t.jump_url,r=t.use_num,s=t.tips,c=e.priceHandle(n),u=e.priceHandle(a),d=e.getUseNum(r);return(0,D.default)((0,D.default)({},t),{},{priceNum:c,originPrice:u,jumpType:o,jumpUrl:i,sold:d,tips:s||""})}))),{allSkuList:r,hasMore:o,pn:i}}},getCardList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if((0,L.isNonEmptyArray)(t)){var o=t.filter((function(t){return+t.type!==U.CARDTYPE.FEATURE}));a=o.map((function(t){var a=t.type,o=t.feed,i=o.appkey,r=o.highlight,s=o.jumpType,c=o.jumpUrl,u=o.bannerImg,d=o.bannerNotice,l=o.bannerTitle,h=o.more,p=e.formatTitle(r,o.title),f=null;if((0,L.isNonEmptyArray)(e.data.cardList)){var g=e.data.cardList.find((function(e){return e.type===t.type}));f=null==g?void 0:g.data}return+t.type===U.CARDTYPE.RECHARGE&&(f=[].concat({bannerImg:(0,L.gzipImg)(u),notice:d,title:l})),(0,D.default)((0,D.default)({},U.CARDCONF[a]),{},{appkey:i,type:a,title:p,more:h,jumpType:s,jumpUrl:c,loading:n,reloadImg:(0,L.gzipImg)(U.RELOAD),data:f})}))}return a},getSelector:function(t,e){var n=this.data.cardList.find((function(e){return+e.type===t}));return null!=n&&n.data?Array.from(n.data,(function(t,n){return"#".concat(e,"-").concat(n)})):[]},getFeatureSelector:function(){return this.data.featureList?Array.from(this.data.featureList,(function(t,e){return"#recommend-".concat(e)})):[]},getTabList:function(t){return(0,L.isNonEmptyArray)(t)?t.map((function(t){var e=t.type,n=t.title,a=t.notice,o=t.img,i=t.hitImg;return(0,D.default)((0,D.default)({},U.CARDCONF[e]),{},{title:n,notice:a,img:o,hitImg:i})})):null},getInitFeature:function(t,e){var n=(0,L.isNonEmptyArray)(t)&&t.find((function(t){return+t.type===U.CARDTYPE.FEATURE})),a="";if(n){var o=n.feed,i=o.highlight;a=o.title,a=this.formatTitle(i,a)}var r=this.handleFeatureData(e),s=r.allSkuList,c=r.hasMore,u=r.pn;return{featureTitle:a,featureList:s.splice(0,6),allSkuList:s,hasMore:c,pn:u}},initData:function(t){var e=this;return(0,P.default)(k.default.mark((function n(){var a,o,i,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},o=e.fetchAuthList(),(i=e.attr.commonPrefetch)?e.attr.commonPrefetch=null:i=e.fetchCommonData(),n.prev=4,n.next=7,i;case 7:a=n.sent,n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),e.$showErrorPage(n.t0.errType),n.abrupt("return");case 14:c=(s=a).isLogin,u=s.noticeInfo,d=s.baoInfo,l=s.orderInfo,h=s.ruleInfo,p=s.dotUserTag,f=s.countdown,g=s.isNeedDrawCoupon,m=s.tabInfo,v=s.topImg,w=s.subtitle,b=e.getTabList(m),y=(u||{}).tips,T=e.getCardList(m,t),c&&f>0&&e.handleFetchShowPop(),e.setData({tips:y,subtitle:w,rendered:!0,showErrorPage:!1,isNeedDrawCoupon:g,baoInfo:d,orderInfo:l,ruleInfo:h,dotUserTag:p,countdown:f,tabList:b,tabInfo:m,cardList:T,topImg:(0,L.gzipImg)(v),isLogin:c,hasMoreData:!!t||e.data.hasMoreData,allSkuList:t?[]:e.data.allSkuList},(0,P.default)(k.default.mark((function n(){var a,i,s,c;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.countdown>0&&e.handleCountDown(),e.attr.selector=e.attr.selector.concat([".card"]),e.newObserver&&e.newObserver(".card",[1]),t?e.initFeatureData():(a=e.getFeatureSelector().join(", "),e.attr.selector=e.attr.selector.concat(a),e.newObserver&&e.newObserver(a,[1])),e.getSecondScreen(),i={},n.prev=6,n.next=9,o;case 9:i=n.sent,n.next=14;break;case 12:n.prev=12,n.t0=n.catch(6);case 14:Object.values(i).some((function(t){return 0==+t}))&&!e.attr.hasRefuseAuth&&(s=JSON.stringify({module:"preauth"}),e.sendLog(s,"show"),c=0,r.getPhoneNumber({success:function(t){(0,L.textToast)("授权成功"),c=1},fail:function(t){e.attr.hasRefuseAuth=!0},complete:function(){var t=JSON.stringify({module:"preauth",status:c});e.sendLog(t,"click")}}));case 16:case"end":return n.stop()}}),n,null,[[6,12]])}))));case 20:case"end":return n.stop()}}),n,null,[[4,10]])})))()},initFeatureData:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},(a=t.attr.featureDataPrefetch)?t.attr.featureDataPrefetch=null:a=t.fetchFeaturedData(),e.prev=3,e.next=6,a;case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t.$showErrorPage(e.t0.errType),e.abrupt("return");case 13:o=t.getInitFeature(t.data.tabInfo,n),t.setData(o,(function(){var e=t.getFeatureSelector().join(", ");t.attr.selector=t.attr.selector.concat(e),t.newObserver&&t.newObserver(e,[1])}));case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))()},handleCountDown:function(){var t=this;this.skuTimer&&clearInterval(this.skuTimer),this.skuTimer=o((function(){var e=t.data.countdown;if(0===e)return clearInterval(t.skuTimer);e--,t.setData({countdown:e,formatCountDown:(0,L.formatSecond)(+e)})}),1e3)},onPageScroll:function(t){var e=this,n=t.scrollTop,a=(n/(F+H)).toFixed(2),o=a>=1?1:a;this.setData({opacity:o,pageScrollTop:n}),1!==o||this.has||(0,L.findTarget)("tab-fixed","",this).then((function(t){t&&(e.has=!0,e.setData({fixedTabHeight:t.height}))})),this.pageScroll()},pageScroll:(0,L.throttle)((function(){var t=this;if(this.attr.scrollEnd){var e=this.data,n=e.tabList,a=e.stickyHeight+e.tabHeight,o=this,i=[];(0,L.isNonEmptyArray)(n)&&(n.forEach((function(e){i.push((0,L.findTarget)(e.id,"id",t))})),Promise.all(i).then((function(t){for(var e="",i=0;i<t.length-1;i++){var r=t[i],s=t[i+1];(0===i&&r.top>a||r.top<a&&s.top>a)&&(e=r.id),i===t.length-2&&s.top<a&&(e=s.id)}var c=n.findIndex((function(t){return t.id===e}));o.setData({currentTab:e,scrollIntoView:"tab-".concat(c)})})))}}),50),handleClickTab:function(t){var e=this,n=this;this.attr.scrollEnd=!1;var o=t.currentTarget.dataset,i=o.index,s=o.id;this.setData({currentTab:s,scrollIntoView:"tab-".concat(i)});var c=this.data,u=c.pageScrollTop,d=c.stickyHeight,l=c.opacity,h=c.tabHeight,p=c.fixedTabHeight;r.nextTick((function(){(0,L.findTarget)(s,"id",e).then((function(t){var e=l<1?h+p+22:p+8,o="feature"===s?0:u+t.top-d-e;null!=t&&t.top&&r.pageScrollTo({scrollTop:o,duration:300,success:function(t){a((function(){n.attr.scrollEnd=!0}),1500)}})}))}))},movieStar:function(t){var e=Math.floor(t/2),n=t%2,a=Array.from({length:e},(function(){return 0}));n&&a.push(2);for(var o=5-a.length,i=0;i<o;i++)a.push(1);return a},jumpToHshTalos:function(){"baiduboxapp"===((0,B.getSystemInfo)()||{}).host&&(0,N.isGreaterVersion)(R.HSH_TALOS_VERSION)?r.openBdboxWebview({module:"appTab",action:"select",parameters:{item:"service"}}):O.default.goHome()},handleFetchDrawCouponError:function(t,e,n){var o=this;n&&+t.code===U.HAS_COUPON&&this.fetchNoticeServer(),+t.code==+U.WARING_CODE?((0,L.textToast)(t.msg),a((function(){o.jumpToHshTalos()}),600)):a((function(){O.default.withEvent(e)}),600)},handleFetchShowPop:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchShowPop();case 2:(n=e.sent)&&t.setData({popStatus:+n.isNeedToast,isShowPop:+n.isNeedToast===U.SHOW_POP});case 4:case"end":return e.stop()}}),e)})))()},handleDrawCoupon:function(t,e){var n=this;this.fetchDrawCoupon().then((function(o){a((function(){e&&n.fetchNoticeServer(),O.default.withEvent(t)}),600)})).catch((function(a){return n.handleFetchDrawCouponError(a,t,e)}))},sendLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n={};try{n=JSON.parse(t)||{}}catch(e){r.reportAnalytics("logjson_parse_error",{msg:e instanceof Error?e.message:JSON.stringify(e),target_json:t}),n={},(0,j.reportError)({type:j.errorType.UBC_JSON_FAIL,msg:"埋点数据json格式不对",extra:{mod:t}})}var a=n.module;delete n.module,r.$log.sendNew(n,e,{value:a})},handleClickSku:function(t){var e=t.change,n=t.isLogin,a=t.currentTarget.dataset,o=void 0===a?{}:a,i=o.isNeedDrawCoupon,r=o.mod,s=this.data.popStatus;this.sendLog(r),n?(e||s!==U.NOTICE_SERVICE||this.fetchNoticeServer(),i?this.handleDrawCoupon(t,e):O.default.withEvent(t)):(0,L.textToast)("请先登录")},getCommonRequestParams:function(){var t=getCurrentPages(),e=s().globalData,n=e.xfrom,a=e.sfrom;return{path:t[t.length-1].uri,sfrom:a,xfrom:n}},getCoupon:(0,L.throttle)(function(){var t=(0,P.default)(k.default.mark((function t(e){var n,a,o,i,s,c,u;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.showLoading({title:"领券中...",mask:!0}),t.next=4,(0,B.getSysData)();case 4:return n=t.sent,a=n.zid,o=this.getCommonRequestParams(),t.next=9,this.$http.get(this.$api.COUPON_PAGE_GET,{data:(0,D.default)({couponName:e.couponName,moduleType:"2",brand:"meituan",zid:a},o)});case 9:i=t.sent,Object.assign(e,i,this.getCouponConfig(i.status)),this.setData({cardList:this.data.cardList},(function(){r.hideLoading(),(0,L.textToast)(i.toast||"领券成功"),e.status!==U.COUPON_STATUS.GOTO_USE&&(0,j.reportError)({type:j.errorType.COUPON_PAGE_GET_ERROR,msg:"优惠券页面领券接口状态流转错误",extra:{coupon:e,res:i}})})),t.next=29;break;case 14:t.prev=14,t.t0=t.catch(0),r.hideLoading(),s=+t.t0.code,c=!1,u=90005300;case 20:if(!(u<=90005309)){t.next=27;break}if(s!==u){t.next=24;break}return c=!0,t.abrupt("break",27);case 24:u++,t.next=20;break;case 27:(0,L.textToast)(c&&t.t0.msg||"领券失败"),this.data.loginChange&&this.initData(!1);case 29:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),500,!0),onCouponTap:function(t){var e,n=t.currentTarget.dataset,a=n.couponIndex,o=n.module,i=n.couponId,r=JSON.stringify({module:o,couponIndex:a,coupon_id:i,rank:a});this.sendLog(r);var s="login:ok"===(null===(e=t.loginInfo)||void 0===e?void 0:e.errMsg);if(s){s&&!G&&(G=!0,this.setData({isLogin:!0,loginChange:!0}));var c=this.data.cardList.filter((function(t){return"coupon"===t.id}))[0].data[a];c.status!==U.COUPON_STATUS.GOTO_USE?c.status===U.COUPON_STATUS.GOTO_GET&&this.getCoupon(c):O.default.to(c.jumpUrl,c.jumpType)}},getExpressCoupon:function(t){var e=this;return(0,P.default)(k.default.mark((function n(){var a,o,i,s;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r.showLoading({title:"领券中...",mask:!0}),n.next=4,(0,B.getSysData)();case 4:return a=n.sent,o=a.zid,i=void 0===o?"":o,n.next=9,e.$http.get(e.$api.GET_ACTIVITY,{data:{activity_id:"userCouponService",action:"act_draw",coupon_id:t.id,zid:i}});case 9:s=n.sent,Object.assign(t,(0,D.default)({status:1},U.EXPRESSMAP[1])),e.setData({cardList:e.data.cardList},(function(){r.hideLoading(),(0,L.textToast)(s.toast||"领券成功")})),n.next=19;break;case 14:n.prev=14,n.t0=n.catch(0),r.hideLoading(),(0,L.textToast)("领券失败"),e.data.loginChange&&e.initData(!1);case 19:case"end":return n.stop()}}),n,null,[[0,14]])})))()},handleExpress:function(t){var e=t.currentTarget.dataset,n=e.index,a=e.mod;if(this.sendLog(a),t.isLogin){t.change&&this.setData({isLogin:!0,loginChange:t.change});var o=this.data.cardList.filter((function(t){return"express"===t.id}))[0].data[n];switch(o.status){case 0:this.getExpressCoupon(o);break;case 1:O.default.to(o.jumpUrl,o.jumpType);break;default:(0,L.textToast)(o.toastText)}}},clickBottom:function(){this.setData({isShowPop:!1})},handleReload:function(){var t=this;(0,L.isNonEmptyArray)(this.data.cardList)&&this.data.cardList.forEach((function(e){if(!e.data)switch(+e.type){case U.CARDTYPE.FOOD:t.updateCardList(U.CARDTYPE.FOOD,!0,!1),t.fetchFoodData();break;case U.CARDTYPE.COUPON:t.updateCardList(U.CARDTYPE.COUPON,!0,!1),t.fetchCoupon();break;case U.CARDTYPE.MOVIE:t.updateCardList(U.CARDTYPE.MOVIE,!0,!1),t.fetchMovie();break;case U.CARDTYPE.EXPRESS:t.updateCardList(U.CARDTYPE.EXPRESS,!0,!1),t.fetchExpress()}}))}}))})),window.define("466",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.VIDEO_PATH=n.NOTICE_SERVICE=n.SHOW_POP=n.NO_ACTION=n.HAS_COUPON=n.RELOAD=n.DECORATE=n.EXPRESS_COUPON=n.VOICE=n.TOPIMG=n.BANNER=n.WARING_CODE=n.EXPRESSMAP=n.CONFIG=n.STATUS_IMG=n.COLOR=n.COUPON_BG_IMG=n.COUPON_STATUS=n.CARDCONF=n.CARDTYPE=void 0;var C,x,_=I(t(16)),D={FEATURE:1,FOOD:2,COUPON:3,MOVIE:4,RECHARGE:5,EXPRESS:6};n.CARDTYPE=D;var k=(C={},(0,_.default)(C,D.FEATURE,{id:"feature",color:"#FF5500",background:"linear-gradient(180deg, rgba(255, 71, 71, 0.08) 0%, rgba(255, 71, 71, 0.0001) 100%)",module:"recommend"}),(0,_.default)(C,D.FOOD,{id:"food",color:"#FF4747",background:"linear-gradient(180deg, rgba(255, 71, 71, 0.08) 0%, rgba(255, 71, 71, 0.0001) 100%)",module:"brandfood"}),(0,_.default)(C,D.COUPON,{id:"coupon",color:"#F6B800",background:"linear-gradient(180deg, rgba(255, 198, 25, 0.1) 0%, rgba(255, 198, 25, 0.0001) 100%)",module:"delivery"}),(0,_.default)(C,D.MOVIE,{id:"movie",color:"#198CFF",background:"linear-gradient(180deg, rgba(66, 167, 255, 0.08) 0%, rgba(66, 167, 255, 0.0001) 100%)",module:"movie"}),(0,_.default)(C,D.RECHARGE,{id:"recharges",color:"#00C060",background:"linear-gradient(180deg, rgba(37, 204, 115, 0.07) 0%, rgba(37, 204, 115, 0.0001) 100%)",module:"recharge"}),(0,_.default)(C,D.EXPRESS,{id:"express",color:"#FF2B79",background:"linear-gradient(180deg, rgba(255, 43, 121, 0.08) 0%, rgba(255, 43, 121, 0.0001) 100%)",module:"express"}),C);n.CARDCONF=k;var P={EMPTY_TERM_LAST_DAY:7,EMPTY_NOT_TERM_LAST_DAY:2,GOTO_GET:6,GOTO_USE:5};n.COUPON_STATUS=P;var E={PINK:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png",GRAY:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-gray.png",RED:"https://scenter.cdn.bcebos.com/operation_page/monthly-coupon-bg.png",BTN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/red-packet.png",PLAIN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/plain-packet2.png"};n.COUPON_BG_IMG=E;var L={TRANSPARENT:"transparent",RED:"#f30",WHITE:"#fff",GRAY:"#858585"};n.COLOR=L;var A={NONE:"",RECEIVED:"https://scenter.cdn.bcebos.com/operation_page/seal-get-red.png",USED:"https://scenter.cdn.bcebos.com/operation_page/seal-used-gray.png",EMPTY:"https://scenter.cdn.bcebos.com/operation_page/seal-empty-gray.png",RECEIVED_WHITE:"https://scenter.cdn.bcebos.com/operation_page/seal-get-white.png"};n.STATUS_IMG=A;var O=(x={},(0,_.default)(x,P.NOT_START,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.RED,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.NONE}),(0,_.default)(x,P.GOTO_GET,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.WHITE,btnBorderColor:L.TRANSPARENT,btnBg:L.RED,statusImgUrl:A.NONE,showProgress:!0}),(0,_.default)(x,P.GOTO_USE,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.RED,btnBorderColor:L.RED,btnBg:L.WHITE,statusImgUrl:A.RECEIVED,showProgress:!1}),(0,_.default)(x,P.USED,{bgImg:E.GRAY,contentTextColor:L.GRAY,btnTextColor:L.TRANSPARENT,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.USED}),(0,_.default)(x,P.EMPTY_TERM_LAST_DAY,{bgImg:E.GRAY,contentTextColor:L.GRAY,btnTextColor:L.TRANSPARENT,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.EMPTY}),x);n.CONFIG=O;n.EXPRESSMAP={0:{text:"立即领取",statusImgUrl:"",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!1,toastText:""},1:{text:"去使用",statusImgUrl:"https://scenter.cdn.bcebos.com/operation_page/seal-get-white.png",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!1,toastText:""},2:{text:"已使用",statusImgUrl:"",background:"",color:"rgba(255, 255, 255, .8)",needMask:!1,toastText:"已使用"},3:{text:"已结束",statusImgUrl:"",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!0,toastText:""},4:{text:"已抢完 下次再来",statusImgUrl:"",background:"",color:"#fff",needMask:!1,toastText:"优惠券已抢光"}};n.WARING_CODE=90008322;n.BANNER="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=324192172,2937988243&fm=179&app=35&f=PNG?w=1242&h=774&s=FE498A566CEB032C6A3B6BAE0300E00A";n.TOPIMG="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=742083166,1702568115&amp;amp;amp;fm=179&amp;amp;amp;app=35&amp;amp;amp;f=PNG?w=749&amp;amp;amp;h=90";n.VOICE="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=449706476,1621608141&fm=179&app=35&f=PNG?w=54&h=54&s=22112A66B6DCAF96E5828E690300305B";n.EXPRESS_COUPON="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=254566292,1243965049&fm=179&app=35&f=PNG?w=368&h=325&s=ADAFFB1objurl";n.DECORATE="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=378411343,2847854719&fm=179&app=35&f=PNG?w=147&h=3";n.RELOAD="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=4029511767,348092419&fm=179&app=35&f=PNG?w=54&h=54&s=29417A6E7FA8B7704C7999170300E0C1";n.HAS_COUPON=90008325;n.NO_ACTION=0;n.SHOW_POP=1;n.NOTICE_SERVICE=2;n.VIDEO_PATH="https://scenter.cdn.bcebos.com/afxdandu.mp4"})),window.define("469",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(19)),D=x(t(15)),k=x(t(27)),P=x(t(29)),E=x(t(141)),L=t(26),A=t(144),O=x(t(14)),N=t(42),R=t(31),B=t(9),j=t(40),U=t(470),M=(0,B.getSystemInfo)(),F=M.navigationBarHeight,H=M.statusBarHeight,G=(0,B.isLogin)();Page((0,E.default)({data:{rendered:!1,showErrorPage:!1,bannerImg:(0,L.gzipImg)(U.BANNER),voiceImg:(0,L.gzipImg)(U.VOICE),couponImg:(0,L.gzipImg)(U.EXPRESS_COUPON),decorateImg:(0,L.gzipImg)(U.DECORATE),topImg:(0,L.gzipImg)(U.TOPIMG),topImgRepurchase:(0,L.gzipImg)(U.TOPIMGREPURCHASE),titleLeftShadowImg:(0,L.gzipImg)(U.TITLE_LEFT_SHADOW),titleRightShadowImg:(0,L.gzipImg)(U.TITLE_RIGHT_SHADOW),strongCouponImg:(0,L.gzipImg)(U.STRONG_COUPON),strongCouponImgGray:(0,L.gzipImg)(U.STRONG_COUPON_GRAY),couponShort:(0,L.gzipImg)(U.COUPON_SHORT),arrowBlack:(0,L.gzipImg)(U.ARROWBLACK),arrowRed:(0,L.gzipImg)(U.ARROWRED),lockImg:(0,L.gzipImg)(U.LOCKIMG),redPacketIcon:(0,L.gzipImg)(U.REDPACKETICON),opacity:0,tips:null,baoInfo:null,orderInfo:null,ruleInfo:null,dotUserTag:null,userStatus:0,countdown:0,formatCountDown:null,currentTab:"feature",tabList:null,scrollIntoView:"tab-0",featureTitle:"",featureList:[],hasMore:1,hasMoreData:!0,allSkuList:[],cardList:[],pageScrollTop:0,stickyHeight:64,tabHeight:104,fixedTabHeight:59,isNeedDrawCoupon:!1,loginChange:!1,videoPath:U.VIDEO_PATH,canvasStyle:"width:".concat((0,L.vwUnit)(992),";height:").concat((0,L.vwUnit)(1216)),isShowPop:!1,popStatus:U.NO_ACTION,isLogin:G,styleStatus:0,hasScroll:!1,hasPayableCoupon:!1,showMask:!1,showPanel:!1,freshmenCouponStatus:U.FRESHMEN_COUPON_STATUS,coupons:[],jumpItems:[]},attr:{hasInit:!1,hasShow:!1,scrollEnd:!0,commonPrefetch:null,featureDataPrefetch:null,hasRefuseAuth:!1,hasSendLog:{},selector:[]},ubcLog:{from:"new-freshmen-welfare"},onPrefetch:function(t){var e=t.query;this.attr.options=e,this.attr.commonPrefetch=this.fetchCommonData(),r.canIUse("prefetchResources")&&r.prefetchResources({video:[{url:this.data.videoPath}]})},onInit:function(t){this.attr.options=t,this.setData({isRepurchase:null==t?void 0:t.isRepurchase}),this.attr.hasInit||(this.attr.hasInit=!0,this.initData(!0))},onHide:function(){this.skuTimer&&clearInterval(this.skuTimer),this.setData({hasScroll:!1}),this.attr.observe&&this.attr.observe.disconnect()},onShow:function(){this.attr.hasShow&&(this.setData({showMask:!1,showPanel:!1}),this.attr.selector=[],this.attr.hasSendLog={},this.initData(!1)),this.attr.hasShow=!0},onErrorPageReload:function(){this.initData(!1)},sendPageShowLog:function(){var t=JSON.stringify({user_type:this.data.dotUserTag,user_status:this.data.userStatus});this.sendLog(t,"display")},newObserver:function(){var t=this;this.attr.observe=r.createIntersectionObserver(this,{thresholds:[1],selectAll:!0}).relativeToViewport(),this.attr.observe.observe(this.attr.selector.join(", "),(function(e){var n=e.dataset,a=n.ubcShow,o=n.id||e.id;t.attr.hasSendLog[o]||(t.attr.hasSendLog[o]=!0,t.sendLog(a,"show"))}))},fetchShowPop:function(){return this.$http.get(this.$api.COUPON_USEAGE_FLAG)},fetchNoticeServer:function(){return this.$http.get(this.$api.NOTIFY_COUPON_USEAGE_FLAG)},fetchDrawCoupon:function(t){var e=this;return(0,P.default)(k.default.mark((function t(){var n,a;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,A.getZidReTry)(),(0,A.getJtData)(R.FENGKONG_PARAMS.XINREN)]).catch((function(){return(0,L.textToast)("请求失败，请稍后再试哦~")}));case 2:return n=t.sent,a={data:{zid:n[0],jt:n[1],js_env:"swan",activity_id:"userCouponService",action:"draw"},noTry:!0,canResArrayNull:!0},t.abrupt("return",e.$http.get(e.$api.GET_ACTIVITY,a));case 5:case"end":return t.stop()}}),t)})))()},fetchCommonData:function(){var t=[];return t.push(this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"userCouponService",action:"actv2"}})),t.push(this.$http.get(this.$api.GET_FRESHMEN_COUPON,{data:{pg_source:"lp"}})),t.push(this.$http.get(this.$api.REPURCHASE,{data:{pg_source:"lp"}})),t},fetchAuthList:function(){return this.$http.get(this.$api.THIRD_AUTH_LIST,{data:{path:this.route}})},getCouponConfig:function(t){return t===U.COUPON_STATUS.EMPTY_NOT_TERM_LAST_DAY&&(t=U.COUPON_STATUS.EMPTY_TERM_LAST_DAY),t===U.COUPON_STATUS.USED_NEXT_MONTH&&(t=U.COUPON_STATUS.USED),U.CONFIG[t]},updateCardList:function(t,e,n,a){var o=this,i=this.data.cardList,r=i.findIndex((function(e){return+e.type===t}));if(r>-1){var s=i[r];s=(0,D.default)((0,D.default)({},s),{},{loading:!s.data&&e,loadError:n}),a&&(s=(0,D.default)((0,D.default)({},s),{},{data:a})),i.splice(r,1,s)}this.setData({cardList:i},(function(){var e=o.getSelector(t,U.CARDCONF[t].id);o.attr.selector=o.attr.selector.concat(e),o.newObserver&&o.newObserver(e.join(", "),[1])}))},getDataError:function(t){if((0,L.isNonEmptyArray)(this.data.cardList)){var e=this.data.cardList.find((function(e){return+e.type===t}));null!=e&&e.data||this.updateCardList(t,!1,!0)}},fetchFoodData:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{activity_id:"userCouponService",action:"act_brand"}},a={},e.prev=2,e.next=5,t.$http.get(t.$api.GET_ACTIVITY,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.getDataError(U.CARDTYPE.FOOD),e.abrupt("return");case 12:o=null,(0,L.isNonEmptyArray)(a.skus)&&(i=a.skus.slice(0,3),o=i.map((function(e){var n=e.price,a=e.originPrice,o=e.useNum,i=e.tips,r=t.priceHandle(+n),s=t.priceHandle(+a),c=t.getUseNum(o);return(0,D.default)((0,D.default)({},e),{},{priceNum:r,originPrice:s,sold:c,tips:i||""})}))),t.updateCardList(U.CARDTYPE.FOOD,!1,!1,o);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})))()},fetchCoupon:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n,a,o,i;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{activity_id:"userCouponService",action:"act_takeout",brand:"meituan"}},a={},e.prev=2,e.next=5,t.$http.get(t.$api.GET_ACTIVITY,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.getDataError(U.CARDTYPE.COUPON),e.abrupt("return");case 12:if((0,L.isNonEmptyArray)(a.valid_coupons)){e.next=15;break}return t.getDataError(U.CARDTYPE.COUPON),e.abrupt("return");case 15:(0,L.isNonEmptyArray)(a.valid_coupons)&&(o=1==+a.valid_coupons[0].type?3:2,(i=a.valid_coupons.slice(0,o)).forEach((function(e){Object.assign(e,t.getCouponConfig(e.status))})),t.updateCardList(U.CARDTYPE.COUPON,!1,!1,i));case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))()},getUseNum:function(t){var e="";if(t&&!isNaN(t)){if(t<0)return"0";if(t<1e4)e=t;else{if(!(t>1e4&&t<=1e5))return"10万+";e=Math.floor(parseFloat(t/1e3))/10+"万"}}return e},priceHandle:function(t){var e="";if(t&&!isNaN(t)){if(t<0)return"";if(t<1e6)e=Math.floor(parseFloat(t))/100;else if(t>=1e6&&t<1e10){e=Math.floor(parseFloat(t/1e4))/100+"万"}else if(t>=1e10){e=Math.floor(parseFloat(t/1e8))/100+"亿"}}return e},formatTitle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#f11",a=e;return t.forEach((function(t){a=a.replace(/\$\{highlight\}/,"<span class='highlight' style=\"color:".concat(n,'">').concat(t,"</span>"))})),a},getSecondScreen:function(){this.fetchFoodData(),this.fetchCoupon()},getCardList:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if((0,L.isNonEmptyArray)(t)){var o=t.filter((function(t){return+t.type===U.CARDTYPE.COUPON||+t.type===U.CARDTYPE.RECHARGE||+t.type===U.CARDTYPE.FOOD}));a=o.map((function(t){var a=t.type,o=t.feed,i=o.appkey,r=o.highlight,s=o.highlightColor,c=o.jumpType,u=o.jumpUrl,d=o.more,l=e.formatTitle(r,o.title,s),h=null;if((0,L.isNonEmptyArray)(e.data.cardList)){var p=e.data.cardList.find((function(e){return e.type===t.type}));h=null==p?void 0:p.data}if(+t.type===U.CARDTYPE.RECHARGE&&null!=t&&t.extraData){var f=[].concat(t.extraData);f.forEach((function(t){t.bannerImg=(0,L.gzipImg)(t.bannerImg)}));var g=(h=f)?Array.from(h,(function(t,e){return"#recharge-".concat(e)})):[];e.attr.selector=e.attr.selector.concat(g),e.newObserver&&e.newObserver()}return(0,D.default)((0,D.default)({},U.CARDCONF[a]),{},{appkey:i,type:a,title:l,more:d,jumpType:c,jumpUrl:u,loading:n,reloadImg:(0,L.gzipImg)(U.RELOAD),data:h})}))}return a},getSelector:function(t,e){var n=this.data.cardList.find((function(e){return+e.type===t}));return null!=n&&n.data?Array.from(n.data,(function(t,n){return"#".concat(e,"-").concat(n)})):[]},getFeatureSelector:function(){return this.data.featureList?Array.from(this.data.featureList,(function(t,e){return"#recommend-".concat(e)})):[]},getTabList:function(t){return(0,L.isNonEmptyArray)(t)?t.map((function(t){var e=t.type,n=t.title,a=t.notice,o=t.img,i=t.hitImg;return(0,D.default)((0,D.default)({},U.CARDCONF[e]),{},{title:n,notice:a,img:o,hitImg:i})})):null},initData:function(t){var e=this;return(0,P.default)(k.default.mark((function n(){var a,o,i,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,x,D,E,A,O,N,R,B,j,M,F,H,G,$,q,V,Y,z,W,K,J,Q;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},o={},i={},s=e.fetchAuthList(),(c=e.attr.commonPrefetch)?e.attr.commonPrefetch=null:c=e.fetchCommonData(),n.prev=6,u=c,d=(0,_.default)(u,3),l=d[0],h=d[1],p=d[2],n.next=10,Promise.all([l,h,p]);case 10:f=n.sent,a=f&&f[0]||{},o=f&&f[1]||{},i=f&&f[2]||{},n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(6),e.$showErrorPage(n.t0.errType),n.abrupt("return");case 20:m=(g=a).noticeInfo,v=g.baoInfo,w=g.orderInfo,b=g.ruleInfo,y=g.countdown,T=g.isNeedDrawCoupon,S=g.tabInfo,I=g.subtitle,C=g.isLogin,x=e.getTabList(S),D=(m||{}).tips,E=e.getCardList(S,t),C&&y>0&&e.handleFetchShowPop(),O=(A=o).status,N=A.coupons,R=A.topImg,B=A.isNewUser,j=A.dotUserTag,M=A.userStatus,F=A.tip,H=A.wfAmount,G=A.isRcpHit,q=($=i).coupons,V=$.tip,Y=$.tipType,z=$.tipUrl,W=$.topImg,K=!!F,J=O+"",Q=N.flat().some((function(t){return t.couponStatus===U.FRESHMEN_COUPON_STATUS.TO_BE_PAY})),e.setData({tips:D,subtitle:I,rendered:!0,showErrorPage:!1,isNeedDrawCoupon:T,baoInfo:v,orderInfo:w,ruleInfo:b,dotUserTag:j,countdown:y,tabList:x,tabInfo:S,cardList:E,topImg:(0,L.gzipImg)(R),repurchaseTopImg:(0,L.gzipImg)(W),isLogin:C,hasMoreData:!!t||e.data.hasMoreData,allSkuList:t?[]:e.data.allSkuList,coupons:N,isRcpHit:G,wfAmount:H,isLocked:K,repurchaseCoupons:q,repurchaseTip:V,repurchaseTipType:Y,repurchaseTipUrl:z,isNewUser:B,userStatus:M,styleStatus:O,boughtCouponNum:J,hasPayableCoupon:Q},(0,P.default)(k.default.mark((function n(){var a,o,i,c,u,d,l,h;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.countdown>0&&e.handleCountDown(),e.attr.selector=e.attr.selector.concat([".card"]),e.newObserver&&e.newObserver(".card",[1]),(null==N?void 0:N.length)>0&&(o=JSON.stringify({module:"fresh_focus_coupon_module",user_type:e.data.dotUserTag,user_status:e.data.userStatus}),e.sendLog(o,"show")),(null===(a=e.data.coupons)||void 0===a?void 0:a.length)>0&&N.forEach((function(t){if(Array.isArray(t)){var n=JSON.stringify({module:"fresh_focus_coupon",user_type:e.data.dotUserTag,user_status:e.data.userStatus,coupon_status:t[0].couponStatus,coupon_id:t.map((function(t){return t.coupon_name})).join(","),coupon_package:t[0].skuId});e.sendLog(n,"show")}})),e.data.repurchaseCoupons&&(i=JSON.stringify({module:"fujiafuli",user_status:e.data.userStatus}),e.sendLog(i,"show")),e.data.repurchaseCoupons&&q.forEach((function(t,n){var a=JSON.stringify({module:"fujiafuli_new_task",new_task_name:t.jumpText,new_task_status:t.couponStatus,industry:t.couponType,order:n+1});e.sendLog(a,"show")})),e.data.repurchaseTip&&(c=JSON.stringify({module:"fujiafuli_shoudanquan_bar"}),e.sendLog(c,"show")),e.sendPageShowLog(),t||(u=e.getFeatureSelector().join(", "),e.attr.selector=e.attr.selector.concat(u),e.newObserver&&e.newObserver(u,[1])),e.getSecondScreen(),d={},n.prev=12,n.next=15,s;case 15:d=n.sent,n.next=20;break;case 18:n.prev=18,n.t0=n.catch(12);case 20:Object.values(d).some((function(t){return 0==+t}))&&!e.attr.hasRefuseAuth&&(l=JSON.stringify({module:"preauth"}),e.sendLog(l,"show"),h=0,r.getPhoneNumber({success:function(t){(0,L.textToast)("授权成功"),h=1},fail:function(t){e.attr.hasRefuseAuth=!0},complete:function(){var t=JSON.stringify({module:"preauth",status:h});e.sendLog(t,"click")}}));case 22:case"end":return n.stop()}}),n,null,[[12,18]])}))));case 31:case"end":return n.stop()}}),n,null,[[6,16]])})))()},handleCountDown:function(){var t=this;this.skuTimer&&clearInterval(this.skuTimer),this.skuTimer=o((function(){var e=t.data.countdown;if(0===e)return clearInterval(t.skuTimer);e--,t.setData({countdown:e,formatCountDown:(0,L.formatSecond)(+e)})}),1e3)},onPageScroll:function(t){var e=this,n=t.scrollTop,a=(n/(F+H)).toFixed(2),o=a>=1?1:a;this.setData({opacity:o,pageScrollTop:n}),1!==o||this.has||(0,L.findTarget)("tab-fixed","",this).then((function(t){t&&(e.has=!0,e.setData({fixedTabHeight:t.height}))})),this.pageScroll()},pageScroll:(0,L.throttle)((function(){var t=this;if(this.attr.scrollEnd){var e=this.data,n=e.tabList,a=e.stickyHeight+e.tabHeight,o=this,i=[];(0,L.isNonEmptyArray)(n)&&(n.forEach((function(e){i.push((0,L.findTarget)(e.id,"id",t))})),Promise.all(i).then((function(t){for(var e="",i=0;i<t.length-1;i++){var r=t[i],s=t[i+1];(0===i&&r.top>a||r.top<a&&s.top>a)&&(e=r.id),i===t.length-2&&s.top<a&&(e=s.id)}var c=n.findIndex((function(t){return t.id===e}));o.setData({currentTab:e,scrollIntoView:"tab-".concat(c)})})))}}),50),jumpToHshTalos:function(){"baiduboxapp"===((0,B.getSystemInfo)()||{}).host&&(0,N.isGreaterVersion)(R.HSH_TALOS_VERSION)?r.openBdboxWebview({module:"appTab",action:"select",parameters:{item:"service"}}):O.default.goHome()},handleFetchDrawCouponError:function(t,e,n){var o=this;n&&+t.code===U.HAS_COUPON&&this.fetchNoticeServer(),+t.code==+U.WARING_CODE?((0,L.textToast)(t.msg),a((function(){o.jumpToHshTalos()}),600)):a((function(){O.default.withEvent(e)}),600)},handleFetchShowPop:function(){var t=this;return(0,P.default)(k.default.mark((function e(){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchShowPop();case 2:(n=e.sent)&&t.setData({popStatus:+n.isNeedToast,isShowPop:+n.isNeedToast===U.SHOW_POP});case 4:case"end":return e.stop()}}),e)})))()},handleDrawCoupon:function(t,e){var n=this;this.fetchDrawCoupon().then((function(o){a((function(){e&&n.fetchNoticeServer(),O.default.withEvent(t)}),600)})).catch((function(a){return n.handleFetchDrawCouponError(a,t,e)}))},sendLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n={};try{n=JSON.parse(t)||{},Object.assign(n,{coupon_num:this.data.boughtCouponNum||""})}catch(e){r.reportAnalytics("logjson_parse_error",{msg:e instanceof Error?e.message:JSON.stringify(e),target_json:t}),n={},(0,j.reportError)({type:j.errorType.UBC_JSON_FAIL,msg:"埋点数据json格式不对",extra:{mod:t}})}var a=n.module;r.$log.sendNew(n,e,{value:a})},handleClickSku:function(t){var e=t.change,n=t.isLogin,a=t.currentTarget.dataset,o=void 0===a?{}:a,i=o.isNeedDrawCoupon,r=o.mod,s=this.data.popStatus;this.sendLog(r),n?(e||s!==U.NOTICE_SERVICE||this.fetchNoticeServer(),i?this.handleDrawCoupon(t,e):O.default.withEvent(t)):(0,L.textToast)("请先登录")},getCommonRequestParams:function(){var t=getCurrentPages(),e=s().globalData,n=e.xfrom,a=e.sfrom;return{path:t[t.length-1].uri,sfrom:a,xfrom:n}},getCoupon:(0,L.throttle)(function(){var t=(0,P.default)(k.default.mark((function t(e){var n,a,o,i,s,c,u;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.showLoading({title:"领券中...",mask:!0}),t.next=4,(0,B.getSysData)();case 4:return n=t.sent,a=n.zid,o=this.getCommonRequestParams(),t.next=9,this.$http.get(this.$api.COUPON_PAGE_GET,{data:(0,D.default)({couponName:e.couponName,moduleType:"2",brand:"meituan",zid:a},o)});case 9:i=t.sent,Object.assign(e,i,this.getCouponConfig(i.status)),this.setData({cardList:this.data.cardList},(function(){r.hideLoading(),(0,L.textToast)(i.toast||"领券成功"),e.status!==U.COUPON_STATUS.GOTO_USE&&(0,j.reportError)({type:j.errorType.COUPON_PAGE_GET_ERROR,msg:"优惠券页面领券接口状态流转错误",extra:{coupon:e,res:i}})})),t.next=29;break;case 14:t.prev=14,t.t0=t.catch(0),r.hideLoading(),s=+t.t0.code,c=!1,u=90005300;case 20:if(!(u<=90005309)){t.next=27;break}if(s!==u){t.next=24;break}return c=!0,t.abrupt("break",27);case 24:u++,t.next=20;break;case 27:(0,L.textToast)(c&&t.t0.msg||"领券失败"),this.data.loginChange&&this.initData(!1);case 29:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),500,!0),onCouponTap:function(t){var e,n=t.currentTarget.dataset,a=n.couponIndex,o=n.module,i=n.couponId,r=JSON.stringify({module:o,couponIndex:a,coupon_id:i,rank:a});this.sendLog(r);var s="login:ok"===(null===(e=t.loginInfo)||void 0===e?void 0:e.errMsg);if(s){s&&!G&&(G=!0,this.setData({isLogin:!0,loginChange:!0}));var c=this.data.cardList.filter((function(t){return"coupon"===t.id}))[0].data[a];c.status!==U.COUPON_STATUS.GOTO_USE?c.status===U.COUPON_STATUS.GOTO_GET&&this.getCoupon(c):O.default.to(c.jumpUrl,c.jumpType)}},clickBottom:function(){this.setData({isShowPop:!1})},handleReload:function(){var t=this;(0,L.isNonEmptyArray)(this.data.cardList)&&this.data.cardList.forEach((function(e){if(!e.data)switch(+e.type){case U.CARDTYPE.FOOD:t.updateCardList(U.CARDTYPE.FOOD,!0,!1),t.fetchFoodData();break;case U.CARDTYPE.COUPON:t.updateCardList(U.CARDTYPE.COUPON,!0,!1),t.fetchCoupon()}}))},handleScroll:function(){this.setData({hasScroll:!0})},closePanel:function(){var t=this;this.setData({showPanel:!1},(0,P.default)(k.default.mark((function e(){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.sleep)(300);case 2:t.setData({showMask:!1});case 3:case"end":return e.stop()}}),e)}))))},jumpWithParams:function(t){if(t){var e=t.jumpUrl,n=t.jumpType;e&&n&&O.default.to(e,n)}},onRepurchaseCouponTap:function(t){var e=this;return(0,P.default)(k.default.mark((function n(){var a,o,i,s,c,u,d;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=null==t||null===(a=t.currentTarget)||void 0===a||null===(o=a.dataset)||void 0===o?void 0:o.coupon,u=null==t||null===(i=t.currentTarget)||void 0===i||null===(s=i.dataset)||void 0===s?void 0:s.index,1===c.couponStatus&&(d=c.jumpUrl,"local",d&&(O.default.to(d,"local"),r.$log.sendNew({module:"fujiafuli_new_task",value:"fujiafuli_new_task",new_task_name:c.jumpText,new_task_status:c.couponStatus,industry:c.couponType,order:u+1},"click",{page:getCurrentPages()[0].uri}))),2!=+(null==c?void 0:c.couponStatus)){n.next=8;break}if(null==c?void 0:c.jumpUrl){n.next=7;break}return n.abrupt("return");case 7:e.jumpWithParams(c);case 8:case"end":return n.stop()}}),n)})))()},onFreshmenCouponTap:function(t){var e=this;return(0,P.default)(k.default.mark((function n(){var a,o,i,s,c,u,d,l,h,p,f,g;return k.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=null==t||null===(a=t.currentTarget)||void 0===a||null===(o=a.dataset)||void 0===o?void 0:o.coupon)&&(u=(null==t||null===(s=t.currentTarget)||void 0===s||null===(c=s.dataset)||void 0===c?void 0:c.coupons)||[i],d=JSON.stringify({module:"fresh_focus_coupon",user_type:e.data.dotUserTag,user_status:e.datauserStatus,coupon_status:i.couponStatus,coupon_id:u.map((function(t){return t.coupon_name})).join(","),coupon_package:i.skuId}),e.sendLog(d)),+(null==i?void 0:i.couponStatus)!==U.FRESHMEN_COUPON_STATUS.SELL_OUT){n.next=5;break}return(0,L.textToast)("该券已售罄，看看别的券吧"),n.abrupt("return");case 5:if(+(null==i?void 0:i.couponStatus)!==U.FRESHMEN_COUPON_STATUS.HAS_GOT){n.next=11;break}if(l=null==i?void 0:i.jumpUrls){n.next=9;break}return n.abrupt("return");case 9:return l.length>1?e.setData({showMask:!0,showPanel:!0,jumpItems:l}):e.jumpWithParams(l[0]),n.abrupt("return");case 11:if(t.isLogin&&i){n.next=13;break}return n.abrupt("return");case 13:if(h=e.data.isNewUser,e.data.isLogin){n.next=20;break}return n.next=17,e.$http.get(e.$api.GET_FRESHMEN_COUPON,{data:{pg_source:"lp"}}).catch((function(t){(0,L.textToast)("加载失败，请稍后重试")}));case 17:p=n.sent,h=p.isNewUser,e.setData({isLogin:!0,isNewUser:h});case 20:if(+(null==i?void 0:i.couponStatus)!==U.FRESHMEN_COUPON_STATUS.NOT_GET){n.next=29;break}if(!e.data.hasPayableCoupon){n.next=24;break}return r.showModal({title:"您有一笔待支付的订单",content:"新人1分购福利为三选一，您需要取消之前的订单才能购买其它优惠券",showCancel:!0,cancelText:"关闭",confirmText:"去取消",confirmColor:"#000",success:function(t){if(t.confirm){var n,a=e.data.coupons.flat().find((function(t){return t.couponStatus===U.FRESHMEN_COUPON_STATUS.TO_BE_PAY}));e.jumpWithParams(null==a||null===(n=a.jumpUrls)||void 0===n?void 0:n[0])}}}),n.abrupt("return");case 24:if(h){n.next=27;break}return(0,L.textToast)("您已是老用户，无法购买该券"),n.abrupt("return");case 27:return e.jumpWithParams(null==i||null===(f=i.jumpUrls)||void 0===f?void 0:f[0]),n.abrupt("return");case 29:+(null==i?void 0:i.couponStatus)===U.FRESHMEN_COUPON_STATUS.TO_BE_PAY&&e.jumpWithParams(null==i||null===(g=i.jumpUrls)||void 0===g?void 0:g[0]);case 30:case"end":return n.stop()}}),n)})))()}}))})),window.define("470",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.VIDEO_PATH=n.NOTICE_SERVICE=n.SHOW_POP=n.NO_ACTION=n.HAS_COUPON=n.REDPACKETICON=n.LOCKIMG=n.ARROWRED=n.ARROWBLACK=n.COUPON_SHORT=n.STRONG_COUPON_GRAY=n.STRONG_COUPON=n.TITLE_RIGHT_SHADOW=n.TITLE_LEFT_SHADOW=n.RELOAD=n.DECORATE=n.EXPRESS_COUPON=n.VOICE=n.TOPIMGREPURCHASE=n.TOPIMG=n.BANNER=n.WARING_CODE=n.EXPRESSMAP=n.CONFIG=n.STATUS_IMG=n.COLOR=n.COUPON_BG_IMG=n.FRESHMEN_COUPON_STATUS=n.COUPON_STATUS=n.CARDCONF=n.CARDTYPE=void 0;var C,x,_=I(t(16)),D={FEATURE:1,FOOD:2,COUPON:3,MOVIE:4,RECHARGE:5,EXPRESS:6};n.CARDTYPE=D;var k=(C={},(0,_.default)(C,D.FEATURE,{id:"feature",color:"#FF5500",background:"linear-gradient(180deg, rgba(255, 71, 71, 0.08) 0%, rgba(255, 71, 71, 0.0001) 100%)",module:"recommend"}),(0,_.default)(C,D.FOOD,{id:"food",color:"#FF4747",background:"linear-gradient(180deg, rgba(255, 71, 71, 0.08) 0%, rgba(255, 71, 71, 0.0001) 100%)",module:"brandfood"}),(0,_.default)(C,D.COUPON,{id:"coupon",color:"#F6B800",background:"linear-gradient(180deg, rgba(255, 198, 25, 0.1) 0%, rgba(255, 198, 25, 0.0001) 100%)",module:"delivery"}),(0,_.default)(C,D.MOVIE,{id:"movie",color:"#198CFF",background:"linear-gradient(180deg, rgba(66, 167, 255, 0.08) 0%, rgba(66, 167, 255, 0.0001) 100%)",module:"movie"}),(0,_.default)(C,D.RECHARGE,{id:"recharges",color:"#00C060",background:"linear-gradient(180deg, rgba(37, 204, 115, 0.07) 0%, rgba(37, 204, 115, 0.0001) 100%)",module:"recharge"}),(0,_.default)(C,D.EXPRESS,{id:"express",color:"#FF2B79",background:"linear-gradient(180deg, rgba(255, 43, 121, 0.08) 0%, rgba(255, 43, 121, 0.0001) 100%)",module:"express"}),C);n.CARDCONF=k;var P={EMPTY_TERM_LAST_DAY:7,EMPTY_NOT_TERM_LAST_DAY:2,GOTO_GET:6,GOTO_USE:5};n.COUPON_STATUS=P;n.FRESHMEN_COUPON_STATUS={NOT_GET:0,TO_BE_PAY:1,HAS_GOT:2,SELL_OUT:3,HAS_USE:4};var E={PINK:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-pink.png",GRAY:"https://scenter.cdn.bcebos.com/operation_page/coupon-bg-gray.png",RED:"https://scenter.cdn.bcebos.com/operation_page/monthly-coupon-bg.png",BTN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/red-packet.png",PLAIN_PACKET:"https://scenter.cdn.bcebos.com/operation_page/plain-packet2.png"};n.COUPON_BG_IMG=E;var L={TRANSPARENT:"transparent",RED:"#f30",WHITE:"#fff",GRAY:"#858585"};n.COLOR=L;var A={NONE:"",RECEIVED:"https://scenter.cdn.bcebos.com/operation_page/seal-get-red.png",USED:"https://scenter.cdn.bcebos.com/operation_page/seal-used-gray.png",EMPTY:"https://scenter.cdn.bcebos.com/operation_page/seal-empty-gray.png",RECEIVED_WHITE:"https://scenter.cdn.bcebos.com/operation_page/seal-get-white.png"};n.STATUS_IMG=A;var O=(x={},(0,_.default)(x,P.NOT_START,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.RED,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.NONE}),(0,_.default)(x,P.GOTO_GET,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.WHITE,btnBorderColor:L.TRANSPARENT,btnBg:L.RED,statusImgUrl:A.NONE,showProgress:!0}),(0,_.default)(x,P.GOTO_USE,{bgImg:E.PINK,contentTextColor:L.RED,btnTextColor:L.RED,btnBorderColor:L.RED,btnBg:L.WHITE,statusImgUrl:A.RECEIVED,showProgress:!1}),(0,_.default)(x,P.USED,{bgImg:E.GRAY,contentTextColor:L.GRAY,btnTextColor:L.TRANSPARENT,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.USED}),(0,_.default)(x,P.EMPTY_TERM_LAST_DAY,{bgImg:E.GRAY,contentTextColor:L.GRAY,btnTextColor:L.TRANSPARENT,btnBorderColor:L.TRANSPARENT,btnBg:L.TRANSPARENT,statusImgUrl:A.EMPTY}),x);n.CONFIG=O;n.EXPRESSMAP={0:{text:"立即领取",statusImgUrl:"",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!1,toastText:""},1:{text:"去使用",statusImgUrl:"https://scenter.cdn.bcebos.com/operation_page/seal-get-white.png",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!1,toastText:""},2:{text:"已使用",statusImgUrl:"",background:"",color:"rgba(255, 255, 255, .8)",needMask:!1,toastText:"已使用"},3:{text:"已结束",statusImgUrl:"",background:"linear-gradient(180deg,#feb63e 0%,#fd8e39 100%)",color:"#fff",needMask:!0,toastText:""},4:{text:"已抢完 下次再来",statusImgUrl:"",background:"",color:"#fff",needMask:!1,toastText:"优惠券已抢光"}};n.WARING_CODE=90008322;n.BANNER="https://scenter.bj.bcebos.com/hshwd/ldy-bj.png";n.TOPIMG="https://search-operate.cdn.bcebos.com/b142cc632bd266293f663ba6c7b1027e.png";n.TOPIMGREPURCHASE="https://search-operate.cdn.bcebos.com/4a095ed0495ba6d44235ef7d940e6f2c.png";n.VOICE="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=449706476,1621608141&fm=179&app=35&f=PNG?w=54&h=54&s=22112A66B6DCAF96E5828E690300305B";n.EXPRESS_COUPON="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=254566292,1243965049&fm=179&app=35&f=PNG?w=368&h=325&s=ADAFFB1objurl";n.DECORATE="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=378411343,2847854719&fm=179&app=35&f=PNG?w=147&h=3";n.RELOAD="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=4029511767,348092419&fm=179&app=35&f=PNG?w=54&h=54&s=29417A6E7FA8B7704C7999170300E0C1";n.TITLE_LEFT_SHADOW="https://scenter.bj.bcebos.com/hshwd/ldy-nrbty.png";n.TITLE_RIGHT_SHADOW="https://scenter.bj.bcebos.com/hshwd/ldy-nrbtz.png";n.STRONG_COUPON="https://search-operate.cdn.bcebos.com/3674e9e3af3e98c7af2a6916b13b870d.png";n.STRONG_COUPON_GRAY="https://search-operate.cdn.bcebos.com/bb6df1b744f8d353ffa55ad54a84cbb7.png";n.COUPON_SHORT="https://search-operate.cdn.bcebos.com/d0552c3dcb2448d4e22c2c9906f59cb8.png";n.ARROWBLACK="https://search-operate.cdn.bcebos.com/46e5fa5f594449058b0872ec2fdd81b3.png";n.ARROWRED="https://search-operate.cdn.bcebos.com/699229ee89fabb11c305c70d1b45f276.png";n.LOCKIMG="https://search-operate.cdn.bcebos.com/1e0e374094831bd303abe98431889244.png";n.REDPACKETICON="https://search-operate.cdn.bcebos.com/bdfefe0eaaeffaf29b89df51197fe188.png";n.HAS_COUPON=90008325;n.NO_ACTION=0;n.SHOW_POP=1;n.NOTICE_SERVICE=2;n.VIDEO_PATH="https://scenter.cdn.bcebos.com/afxdandu.mp4"})),window.define("473",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(27)),_=I(t(29)),D=I(t(141)),k=t(26),P=I(t(14)),E={type:1,model:"92#"},L="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1016133068,4225983267&fm=179&app=35&f=PNG?w=261&h=153&s=E7552A666BF690511E40641A0300F0C3";Page((0,D.default)({data:{rendered:!1,showErrorPage:!1,opacity:0,order:null,list:[],guide:"",head:"",share:null,bottomInfo:null,shareInfo:{},btnList:[]},attr:{hasInit:!1,hasShow:!1,storage:{},hasSendLog:{}},ubcLog:{from:"refuel"},onInit:function(){this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},onLoad:function(){this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},onShow:function(){this.attr.hasShow&&(this.attr.hasSendLog={},this.initData()),this.attr.hasShow=!0},getLocation:function(){var t=this;return new Promise((function(e,n){t.$location.getWithNative({realResult:!0}).then((function(t){e(t)})).catch((function(t){n(t)}))}))},initData:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$location.getAll().then((function(e){var n=e.mc_latitude,a=e.mc_longitude;t.attr.storage=n&&a?{crd:"".concat(a,"_").concat(n)}:{},t.getData(t.attr.storage)})),e.prev=1,e.next=4,t.getLocation();case 4:(n=e.sent)&&t.attr.storage.crd!=="".concat(n.mc_longitude,"_").concat(n.mc_latitude)&&(t.$location.update(n),t.getData({crd:"".concat(n.mc_longitude,"_").concat(n.mc_latitude)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),10003!==e.t0.errCode&&10005!==e.t0.errCode||t.getData(t.attr.storage,!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,_.default)(x.default.mark((function a(){var o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b;return x.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=null,a.prev=1,a.next=4,e.$http.get(e.$api.REFUEL,{data:t});case 4:o=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),e.$showErrorPage(a.t0.errType);case 10:o&&(r=(i=o).page,s=i.user,c=i.body,u=i.uniformStyle,d=r.head,l=r.guide,h=r.share,p=r.order_jump_type,f=r.order_jump_url,g=s.info,m=g?{text:g}:null,n&&(m={text:"地理位置未开启，推荐油价有偏差",button:"去开启"}),v=c.oil[E.type],w=(0,k.isNonEmptyArray)(v)?v.map((function(t){var e=t.jump_type,n=t.jump_url,a=t.logo,o=t.name,i=t.price,r=t.coupon,s=i.base_price,c=i.real_price,u=i.discount_price,d=i.discount_minus,l=parseFloat(s/100),h=parseFloat(c/100),p=u&&d?"满".concat(parseFloat(u/100),"最高比油站优惠").concat(parseFloat(d/100),"元"):"",f=null!=r&&r.image?(0,k.gzipImg)(r.image):"";return{jump_type:e,jump_url:n,logo:a,name:o,model:E.model,basePrice:l,realPrice:h,text:p,coupon:r,oilTrend:(0,k.gzipImg)(L),banner:f}})):[],b=[{text:"分享",eventType:"share"}],p&&f&&b.unshift({text:"订单",eventType:"order"}),e.setData({rendered:!0,showErrorPage:!1,head:(0,k.gzipImg)(d),guide:(0,k.gzipImg)(l),share:h,order:{type:p,url:f},list:w,bottomInfo:m,btnList:b,uniformStyle:(0,k.gzipImgList)(u)},(function(){e.commonObserver&&e.commonObserver(".oil-item",[1],e.attr.hasSendLog)})));case 11:case"end":return a.stop()}}),a,null,[[1,7]])})))()},onErrorPageReload:function(){this.initData()},onPageScroll:function(t){var e=t.scrollTop>0?1:0;this.setData({opacity:e})},goOpenSetting:function(t,e,n){t.confirm?o.openSetting({success:function(t){null!=t&&t.authSetting["scope.userLocation"]?e():n()},fail:function(){n()}}):n()},regetUserAuth:function(){var t=this;return new Promise((function(e,n){var a=t;(0,k.showModal)({content:"您已拒绝位置权限，请去权限设置界面开启~",confirmText:"前往",success:function(t){a.goOpenSetting(t,e,n)},fail:function(){n()}})}))},sendLog:function(t,e,n){o.$log.sendNew((0,C.default)({module:t},n),e)},reLocate:function(){var t=this;this.sendLog("position_limit","click"),this.getLocation().catch((function(e){10003===e.errCode&&o.openSetting&&t.regetUserAuth().then((function(){t.reLocate()}))}))},onBtnTap:function(t){var e=t.eventType;"order"===e?this.onOrderTap():"share"===e&&this.onShare()},onOrderTap:function(){var t=this.data.order,e=t.url,n=t.type;this.sendLog("order","click"),P.default.to(e,n)},onShare:function(){var t=(0,k.shareAppMessageUrlPatch)(this.data.share);this.sendLog("share","click"),o.openShare(t)},onShareAppMessage:function(){return(0,k.shareAppMessageUrlPatch)(this.data.share)}}))})),window.define("476",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(157)),D=x(t(16)),k=x(t(15)),P=x(t(27)),E=x(t(29)),L=x(t(141)),A=t(26),O=t(9),N=t(379),R=x(t(14)),B=t(477);Page((0,L.default)({data:{rendered:!1,showErrorPage:!1,opacity:0,headerImg:"",headerInfo:[],activeSeckillIndex:0,subscribe:!1,tempId:"BD5862",subscribeId:"hshFridaySpike202205",currentCate:0,currentBrand:0,isFixed:!1,seckillTab:[],seckillTabContent:[],countdown:{},overTime:{},isStart:!1,shareInfo:{},orderInfo:{},seriesBg:B.SERIESBG,goodsPn:0,swiperCurrent:0,shareImg:B.SHAREIMG,cateSelect:B.CATESELECT,brandScrollLeft:0,cateScrollLeft:0,isIos:(0,A.isIOS)(),contentTop:(0,A.vwUnit)(46,!1)*s().globalData.systemInfo.screenWidth/100,waterfallList:[],heightMap:{},isShowPop:!1,popStatus:B.NO_ACTION,videoPath:B.VIDEO_PATH,canvasStyle:"width:".concat((0,A.vwUnit)(992),";height:").concat((0,A.vwUnit)(1216)),hasCoupon:!1,isLogin:(0,O.isLogin)(),btnList:[]},attr:{countdown:null,overTime:null,secKillModule:{},firstShow:!0,hasInit:!1,tabItemWidth:0,promiseFetch:null,promiseFetchData:null,ajaxLock:!1,storageData:{},storageBrand:{},hasSendLog:{},options:{},scrollTop:0},ubcLog:{from:"half-price-day"},onPrefetch:function(t){var e=t.query;this.attr.options=e,this.attr.promiseFetchData=this.fetchData()},onInit:function(t){this.attr.options=t,this.setData({isRepurchase:null==t?void 0:t.isRepurchase}),this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},onShow:function(){if(this.attr.firstShow)this.attr.firstShow=!1;else{this.attr.hasSendLog={};this.initData(!0)}},onUnload:function(){clearInterval(this.attr.countdown),clearInterval(this.attr.overTime)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return(0,E.default)(P.default.mark((function o(){var i,r,c,u,d,l,h;return P.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=s().globalData.location,r=t.attr.options,c=r.cityName,u=r.cityCode,o.next=4,(0,O.getSysData)();case 4:return d=o.sent,l=d.zid,h={city_name:c||i.city,city_code:u||i.cityCode,pn:e,zid:l,rn:10},n&&(h.tab=n),a&&(h.query=a),o.abrupt("return",t.$http.get(t.$api.HALFPRICE,{data:h}));case 10:case"end":return o.stop()}}),o)})))()},decorateGoodsList:function(t,e){var n=[],a=(0,O.isLogin)();return(0,A.isNonEmptyArray)(t)&&(n=t.map((function(t){var n=t.id,o=t.img,i=t.title,r=t.extraDesc,s=t.peopleOrderQuantity,c=t.monthOrderQuantity,u=t.abstract,d=t.url,l=u.originPrice,h=u.price,p=u.coupon,f=u.discount,g=parseFloat(f/100),m=h/100;return(0,k.default)((0,k.default)({},d),{},{id:n,img:o,title:i,extraDesc:r,peopleOrderQuantity:(0,A.formatNum)(s),monthOrderQuantity:(0,A.formatNum)(c),originPrice:l/100,coupon:(e||!a)&&p,discountPrice:g,priceInt:parseInt(m,10),priceFloat:(m+"").split(".")[1]})}))),n},decorateWaterfall:function(t,e){if(t){var n=t.brandAggregateName,a=t.cateInfo||{},o=a.brandList,i=a.goodsList,r=a.hasMore,s=a.goodsPn;return{cateTabs:n,brandList:(0,A.isNonEmptyArray)(o)?o.map((function(t){return{isHotList:+t.isHotList,logo:t.logo,name:t.name}})):[],goodsList:this.decorateGoodsList(i,e),goodsPn:s,hasMore:!!+r}}},decorateSeckillList:function(t,e,n,a){var o=[],i=(0,O.isLogin)();if((0,A.isNonEmptyArray)(t)){var r=3===t.length?{0:"待开抢",1:"抢",2:"已抢光"}:{0:"待开抢",1:"去抢购",2:"已抢光"};o=t.map((function(t){var o=t.id,s=t.img,c=t.jumpType,u=t.jumpUrl,d=t.title,l=t.bubbleText,h=t.bubbleColor,p=t.percent,f=t.price,g=t.originPrice,m=t.peopleOrderQuantity,v=t.monthOrderQuantity,w=t.discount_pct,b=t.coupon,y=t.discount,T=parseInt(f/100,10),S=parseFloat(f/100).toString().split(".")[1],I=parseFloat(g/100),C=parseFloat(y/100),x=0;return 0===e&&n&&(x=100==+p?2:1),{id:o,img:s,jumpType:c,jumpUrl:u,title:d,bubbleText:l,bubbleColor:h,percent:p,coupon:(a||!i)&&b,discountPrice:C,discount_pct:w,priceInt:T,priceFloat:S,originPrice:I,showPercent:0!==x,showOrigin:1===x,peopleOrderQuantity:(0,A.formatNum)(m),monthOrderQuantity:(0,A.formatNum)(v),btnStatus:x,btnDisabled:2===x,btnText:r[x]}}))}return o},decorateSeckillModel:function(t,e,n){var a=this,o=[];return(0,A.isNonEmptyArray)(null==t?void 0:t.goodsTabs)&&(o=t.goodsTabs.map((function(t,o){var i=t.goodsList,r=[];if((0,A.isNonEmptyArray)(i)){var s=i.length<3?1:3;i=i.slice(0,s),r=a.decorateSeckillList(i,o,e,n)}return r}))),o},setTimer:function(t){var e="start"===t?"countdown":"overTime",n=this.data[e],a=n&&n.time;if(a<=0)if("start"===t){var o=this.data.seckillTab[0],i=o.isFriday,r=o.subTitle;clearInterval(this.attr.countdown),this.data.seckillTab[0].subTitle=i?r:"疯抢中",this.setData({seckillTab:this.data.seckillTab,isStart:!0}),this.initTime("end",this.data.remainEndTime);var s=this.decorateSeckillModel(this.attr.secKillModule,!0,this.data.hasCoupon);this.setData({seckillTabContent:s})}else clearInterval(this.attr.overTime),this.initData(!0);var c=(0,N.formatTimeDown)(a);n=(0,k.default)((0,k.default)((0,k.default)({},n),c),{},{time:a-1}),this.setData((0,D.default)({},e,n))},initTime:function(t,e){var n=this,a="start"===t?"countdown":"overTime",i=(0,N.formatTimeDown)(e);i.time=e,this.setData((0,D.default)({},a,i)),clearInterval(this.attr[a]),this.attr[a]=o((function(){n.setTimer(t)}),1e3)},interObserve:function(){var t=this;r.nextTick((function(){if(t.commonObserver){t.commonObserver(".seckill-horizontal-item, .seckill-item, .sku-item, .banner-img",[1],t.attr.hasSendLog)}}))},decorateSeckillData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,E.default)(P.default.mark((function a(){var o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T;return P.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=!1,"devtools"===(0,O.getSystemInfo)().platform){a.next=9;break}return a.next=4,t.subscribeService("query");case 4:if(a.t1=a.sent,a.t0=1===a.t1,a.t0){a.next=8;break}a.t0=!1;case 8:o=a.t0;case 9:return i=e.topImg,r=e.secKillModule,s=e.banner,c=e.shareInfo,u=e.orderInfo,d=e.remainStartTime,l=e.remainEndTime,t.attr.secKillModule=r,h=0===d,f=(p=r||{}).isFriday,g=p.isBrandDay,m=p.brandImg,v=null==r?void 0:r.goodsTabs,(0,A.isNonEmptyArray)(v)||(v=[]),f&&(v=v.slice(0,2)),w=v.length,b=v.map((function(e,n){var a=e.tab,o=e.goodsList,i=e.unStartToast,r=o.length<3?1:3,s=f&&0===n?g?"brand":"firdayBg":"img",c=B.BGMAP["TABLEN".concat(w)]["SKULEN".concat(r)].info[n][s];"brand"===s&&(c=1===r?null==m?void 0:m.singleBg:null==m?void 0:m.multipleBg);var u=a.title,d=a.subtitle,l="",p="",v="seckill-tab-active";return f?(0===t.data.activeSeckillIndex&&(v="seckill-tab-active-white"),0===n&&(l=g?m.whiteLogo:B.FRIDAY.whiteLogo,p=g?m.logo:B.FRIDAY.logo)):n===w-1&&(p=g?m.logo:B.FRIDAY.logo,l=g?m.logo:B.FRIDAY.logo),0===n&&h&&!f&&(d="疯抢中"),{title:u,subTitle:d,bgImg:c,img:l,notAtiveImg:p,isFriday:f,isBrandDay:g,activeClass:v,unStartToast:i}})),y=t.decorateSeckillModel(r,h,n),d?t.initTime("start",Math.abs(d)):l&&t.initTime("end",Math.abs(l)),T=(0,A.isNonEmptyArray)(null==i?void 0:i.subtitle)?i.subtitle.slice(0,3):[],a.abrupt("return",{subscribe:o,seckillTab:b,banner:s,headerImg:(null==i?void 0:i.img)||B.HEADER,headerInfo:T,seckillTabContent:y,remainEndTime:l,isStart:h,shareInfo:c,orderInfo:u});case 22:case"end":return a.stop()}}),a)})))()},setHeight:function(){var t=this;r.nextTick((function(){var e=t.data.currentCate;(0,A.findTarget)("c-welfare-waterfall-list-".concat(e),"",t).then((function(n){n&&n.height&&t.setData((0,D.default)({},"heightMap[".concat(e,"]"),Math.ceil(n.height)+"px"))}))}))},getWaterFallList:function(t,e,n,a){var o,i,r,s,c=this.data.waterfallList,u=t.cateTabs,d=t.goodsList,l=t.brandList,h=t.goodsPn,p=t.hasMore,f=function(){return l.map((function(t,e){return e===n&&(t.goodsPn=h,t.hasMore=p,t.goodsList=(0,_.default)(d)),t}))};0===c.length&&u.forEach((function(t,n){c.push({name:t,brandList:n===e?(0,_.default)(f()):[]})})),0===(null===(o=c[e])||void 0===o||null===(i=o.brandList)||void 0===i?void 0:i.length)&&(c[e].brandList=(0,_.default)(f()));var g=null===(r=c[e])||void 0===r||null===(s=r.brandList)||void 0===s?void 0:s[n],m=null==g?void 0:g.goodsList;return c[e].brandList[n]={logo:g.logo,name:g.name,isHotList:g.isHotList,goodsList:a?[].concat((0,_.default)(m),(0,_.default)(d)):(0,_.default)(d),goodsPn:h,hasMore:p},c},initData:function(t){var e=this;return(0,E.default)(P.default.mark((function n(){var o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,x;return P.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=0,s=t?e.data.currentCate:0,c=t?e.data.currentBrand:0,u=t?e.data.activeSeckillIndex:0,d=(null===(o=e.data.waterfallList)||void 0===o?void 0:o[s])||{},l=e.attr.promiseFetchData,h={},l?e.attr.promiseFetchData=null:l=e.fetchData(r,(null==d?void 0:d.name)||"",(null==d||null===(p=d.brandList)||void 0===p||null===(f=p[c])||void 0===f?void 0:f.name)||""),n.prev=8,e.attr.ajaxLock=!0,n.next=12,l;case 12:h=n.sent,n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(8),e.attr.ajaxLock=!1,e.$showErrorPage(n.t0.errType),n.abrupt("return");case 20:return m=(g=h).seckill,v=g.feeds,w=g.coupon,b=g.uniformStyle,y=Boolean(null==w?void 0:w.has_coupon),T=(0,O.isLogin)(),n.next=25,e.decorateSeckillData(m,y);case 25:S=n.sent,I=e.decorateWaterfall(v,y),C=e.getWaterFallList(I,s,c),x=[{text:"分享",eventType:"share"}],null!==(i=S.orderInfo)&&void 0!==i&&i.jumpUrl&&x.unshift({text:"订单",eventType:"order"}),e.setData((0,k.default)((0,k.default)({},S),{},{hasCoupon:y,rendered:!0,showErrorPage:!1,activeSeckillIndex:u,isLogin:T,currentCate:s,currentBrand:c,waterfallList:C,btnList:x,uniformStyle:(0,A.gzipImgList)(b)}),(function(){e.attr.ajaxLock=!1,e.setHeight(),e.interObserve(),e.getWaterFall(s+1,c,r),T&&(e.preload(),e.handleFetchShowPop()),w&&w.toast&&a((function(){(0,A.textToast)(w.toast)}),500)}));case 31:case"end":return n.stop()}}),n,null,[[8,15]])})))()},getWaterFall:function(t,e,n,a){var o=this;return new Promise(function(){var i=(0,E.default)(P.default.mark((function i(r){var s,c,u,d,l,h,p,f,g;return P.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=o.data.waterfallList[t]){i.next=4;break}return r(),i.abrupt("return");case 4:if(u=c.name,d=(null===(s=c.brandList[e])||void 0===s?void 0:s.name)||"",!o.attr.ajaxLock){i.next=9;break}return r(),i.abrupt("return");case 9:return i.prev=9,o.attr.ajaxLock=!0,i.next=13,o.fetchData(n,u,d);case 13:l=i.sent,h=l.feeds,p=o.data.hasCoupon,f=o.decorateWaterfall(h,p),g=o.getWaterFallList(f,t,e,a),o.setData((0,D.default)({},"waterfallList[".concat(t,"]"),g[t]),(function(){o.attr.ajaxLock=!1,r()})),i.next=25;break;case 21:i.prev=21,i.t0=i.catch(9),o.attr.ajaxLock=!1,r();case 25:case"end":return i.stop()}}),i,null,[[9,21]])})));return function(t){return i.apply(this,arguments)}}())},preload:function(){r.canIUse("prefetchResources")&&r.prefetchResources({video:[{url:this.data.videoPath}]})},onErrorPageReload:function(){this.initData()},getFeedTabRectTopOnce:function(t){var e=this;return new Promise((function(n){if(!t&&e.attr.feedTabRectTop)return n(e.attr.feedTabRectTop);(0,A.findTarget)("waterfall-tab","",e).then((function(t){e.attr.feedTabRectTop=t.top+e.attr.scrollTop,n(e.attr.feedTabRectTop)}))}))},onPageScroll:function(t){var e=this,n=t.scrollTop,a=n>0?1:0;this.attr.scrollTop=n,this.getFeedTabRectTopOnce().then((function(t){if(t){var o=e.data,i=o.statusBarHeight,r=o.navigationBarHeight,s=n+(i+r)>=t;e.setData({opacity:a,isFixed:s})}}))},seckillTabChange:function(t){var e=t.currentTarget.dataset.index;this.updateSeckillTab(e)},swiperChange:function(t){var e=t.detail,n=e.current;"touch"===e.source&&this.updateSeckillTab(n)},updateSeckillTab:function(t){var e=this,n=this.data.seckillTab,a=n[t],o=a.isFriday||!1,i=t===n.length-1&&!a.isFriday&&a.isBrandDay,r=t,s=this.data.seckillTab;s[t].activeClass=o?0===r?"seckill-tab-active-white":"seckill-tab-active":!o&&i?"":"seckill-tab-active",this.setData({activeSeckillIndex:r,seckillTab:s},(function(){e.interObserve()}))},cancelSubscribe:function(){var t=this;return(0,E.default)(P.default.mark((function e(){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sendLog("timelimitseckill","click",{status:0}),e.next=3,t.subscribeService("cancel");case 3:t.setData("subscribe",!1),(0,A.textToast)("取消订阅成功");case 5:case"end":return e.stop()}}),e)})))()},formSubmit:function(t){this.sendLog("timelimitseckill","click",{status:1});var e=0==+t.detail.status;this.setData({subscribe:e}),(0,A.textToast)(e?"您已订阅成功！":"订阅失败，请尝试刷新页面再试")},subscribeService:function(t){var e=this,n="submit"===t?"query":t;return new Promise((function(a,o){r.subscribeService({type:n,templateId:e.data.tempId,subscribeId:e.data.subscribeId,success:function(e){var n=e.status;switch(t){case"submit":1===n?a(n):o();break;case"cancel":0===n||void 0===n?a(n):o();break;default:a(n)}},fail:o})}))},selSwitch:function(){this.data.subscribe=!this.data.subscribe,this.setData({subscribe:this.data.subscribe})},swiperChangeCustom:function(t){this.setData({swiperCurrent:t.detail.current})},onReachBottom:function(){var t=this;return(0,E.default)(P.default.mark((function e(){var n,a,o,i,r,s,c;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,a=n.waterfallList,o=n.currentCate,i=n.currentBrand,r=a[o].brandList[i],s=r.hasMore,c=r.goodsPn,s){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,t.getWaterFall(o,i,c,!0);case 7:t.setHeight(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:case"end":return e.stop()}}),e,null,[[4,10]])})))()},setFixedTop:function(){var t=this;return new Promise((function(e){var n=t.attr.scrollTop,o=t.data,i=o.statusBarHeight+o.navigationBarHeight;(0,A.findTarget)("waterfall-wrap","",t).then((function(t){r.pageScrollTo({scrollTop:t.top+n-i,duration:300}),a((function(){e()}),400)}))}))},reachBottomChecker:function(){var t=this;return(0,E.default)(P.default.mark((function e(){var n,a,o,i,r,s,c,u;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.data,r=i.currentCate,s=i.currentBrand,c=(null===(n=t.data.waterfallList[r])||void 0===n||null===(a=n.brandList)||void 0===a?void 0:a[s])||{},u=(null==c||null===(o=c.goodsList)||void 0===o?void 0:o.length)||0,!(null!=c&&c.hasMore&&u<=3)){e.next=7;break}return e.next=6,(0,A.sleep)(300);case 6:t.getWaterFall(r,s,c.goodsPn,!0);case 7:case"end":return e.stop()}}),e)})))()},swiperCateChange:function(t){var e=t.detail,n=e.current;"touch"===e.source&&this.onClickCateTab({currentTarget:{dataset:{index:n}}})},onClickCateTab:function(t){var e=this,n=t.currentTarget.dataset.index,a=this.data.currentCate;(0,A.findTarget)("cate-item","",this).then((function(t){e.setData({currentCate:n,currentBrand:0,brandScrollLeft:0,cateScrollLeft:(a-1.8)*t.width},(function(){e.setHeight(),e.setFixedTop(),e.interObserve(),e.reachBottomChecker()}))}))},onClickBrandTab:function(t){var e,n,a=this,o=t.currentTarget.dataset.index,i=this.data.currentCate,r=null===(e=this.data.waterfallList[i])||void 0===e||null===(n=e.brandList[o])||void 0===n?void 0:n.goodsList;(0,A.findTarget)("brand-item","",this).then((function(t){a.setData({currentBrand:o,brandScrollLeft:(o-1.8)*t.width},(0,E.default)(P.default.mark((function t(){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.setFixedTop();case 2:if(Array.isArray(r)&&r.length){t.next=5;break}return t.next=5,a.getWaterFall(i,o,0);case 5:a.setHeight(),a.interObserve(),a.reachBottomChecker();case 8:case"end":return t.stop()}}),t)}))))}))},handleSeckillItem:function(t){var e=t.currentTarget.dataset,n=void 0===e?{}:e,a=n.status,o=n.jumpUrl,i=n.jumpType,r=this.data,s=r.activeSeckillIndex,c=r.seckillTab[s];a===B.SECKILLSTATUS.END?(0,A.textToast)("商品已抢光，下次早点来~"):a===B.SECKILLSTATUS.UNSTART?(0,A.textToast)(c.unStartToast||"待开抢"):R.default.to(o,i)},sendLog:function(t,e,n){r.$log.sendNew((0,k.default)({module:t},n),e)},onBtnTap:function(t){var e=t.eventType;"order"===e?this.onOrderTap():"share"===e&&this.onShareTap()},onOrderTap:function(){var t=this.data.orderInfo,e=t.jumpType,n=t.jumpUrl;this.sendLog("foodbrand_order","click"),R.default.to(n,e)},onShareTap:function(){var t=this.data.shareInfo,e=t.title,n=t.content,a=t.path,o=t.imageUrl,i=(0,A.shareAppMessageUrlPatch)({title:e,content:n,path:a,imageUrl:o});this.sendLog("foodorder_share","click"),r.openShare(i)},onShareAppMessage:function(){return(0,A.shareAppMessageUrlPatch)(this.data.shareInfo)},fetchShowPop:function(){return this.$http.get(this.$api.COUPON_USEAGE_FLAG)},handleFetchShowPop:function(){var t=this;return(0,E.default)(P.default.mark((function e(){var n;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchShowPop();case 2:(n=e.sent)&&t.setData({popStatus:+n.isNeedToast,isShowPop:+n.isNeedToast===B.SHOW_POP});case 4:case"end":return e.stop()}}),e)})))()},fetchNoticeServer:function(){return this.$http.get(this.$api.NOTIFY_COUPON_USEAGE_FLAG)},clickBottom:function(){this.setData({isShowPop:!1})},handleClickSku:function(t){var e,n,a,o,i,r,s=t.isLogin,c=t.currentTarget.dataset,u=void 0===c?{}:c,d=u.type,l=u.id,h=this.data.popStatus,p=l.split("-"),f="waterfall"===d?null===(e=this.data.waterfallList)||void 0===e||null===(n=e[p[0]])||void 0===n||null===(a=n.brandList)||void 0===a||null===(o=a[p[1]])||void 0===o?void 0:o.goodsList[p[2]]:null===(i=this.data.seckillTabContent)||void 0===i||null===(r=i[p[0]])||void 0===r?void 0:r[p[1]];if(s)switch(h===B.NOTICE_SERVICE&&null!=f&&f.coupon&&this.fetchNoticeServer(),d){case"seckillModule":this.handleSeckillItem(t);break;case"waterfall":R.default.withEvent(t)}else(0,A.textToast)("请先登录")}}))})),window.define("477",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VIDEO_PATH=n.NOTICE_SERVICE=n.SHOW_POP=n.NO_ACTION=n.CATESELECT=n.SHAREIMG=n.SERIESBG=n.FRIDAY=n.SECKILLSTATUS=n.BGMAP=n.HEADER=void 0;var I=t(26),C=(0,I.gzipImg)("http://static.open.baidu.com/media/ch1000/png/scekill_top_img.png");n.HEADER=C;var x={TABLEN2:{SKULEN1:{info:[{firdayBg:(0,I.gzipImg)("http://t12.baidu.com/it/u=3672313965,3936632562&fm=179&app=35&f=PNG?w=1194&h=580&s=BB85136E4A479B2E2612A6690200F05B"),img:(0,I.gzipImg)("http://t12.baidu.com/it/u=824310400,310435904&fm=179&app=35&f=PNG?w=1194&h=580&s=BD8E777E4AC79B0BA251B4E902006073")},{img:(0,I.gzipImg)("http://t10.baidu.com/it/u=2188234596,1671783455&fm=179&app=35&f=PNG?w=1194&h=580&s=AF8E336E5A85AE0BF07D4CF902008030")}]},SKULEN3:{info:[{firdayBg:(0,I.gzipImg)("http://t10.baidu.com/it/u=1375231333,2949793571&fm=179&app=35&f=PNG?w=1194&h=850&s=BB87136E0867932E3203A66C0200607B"),img:(0,I.gzipImg)("http://t11.baidu.com/it/u=951117148,1612975625&fm=179&app=35&f=PNG?w=1194&h=850&s=BD8E777E0ACFD20B1A51B4EB02006031")},{img:(0,I.gzipImg)("http://t12.baidu.com/it/u=3992494807,1892097623&fm=179&app=35&f=PNG?w=1194&h=850&s=AF8E336E4ACFE60B507D44FB0200C032")}]}},TABLEN3:{SKULEN1:{info:[{img:(0,I.gzipImg)("http://t10.baidu.com/it/u=3539865466,154262945&fm=179&app=35&f=PNG?w=1194&h=580&s=AD8E777E56CF9B0F3058F0C903006061")},{img:(0,I.gzipImg)("http://t10.baidu.com/it/u=2497081008,3745037764&fm=179&app=35&f=PNG?w=1194&h=580&s=AF8E336E29C1F00D33EDF4F903008030")},{img:(0,I.gzipImg)("http://t11.baidu.com/it/u=3454485167,473354287&fm=179&app=35&f=PNG?w=1194&h=580&s=AF8E336E168FAF0F627418D90300C062")}]},SKULEN3:{info:[{img:(0,I.gzipImg)("http://t11.baidu.com/it/u=2602546940,2118988021&fm=179&app=35&f=PNG?w=1194&h=850&s=AD8E777E0ACF930F1859F0EB03006071")},{img:(0,I.gzipImg)("http://t10.baidu.com/it/u=768606581,1799851160&fm=179&app=35&f=PNG?w=1194&h=850&s=AF8E336E42CBD30D12EDD4FA0300C030")},{img:(0,I.gzipImg)("http://t10.baidu.com/it/u=2031976089,3428775409&fm=179&app=35&f=PNG?w=1194&h=850&s=AF8E336E4A8FA70D427500FB03008072")}]}}};n.BGMAP=x;n.SECKILLSTATUS={UNSTART:0,START:1,END:2};var _={logo:(0,I.gzipImg)("http://t10.baidu.com/it/u=3096697482,4099210009&fm=179&app=35&f=PNG?w=191&h=48&s=BFA1DB06CB4A873A066A27B90300E00B"),whiteLogo:(0,I.gzipImg)("http://t10.baidu.com/it/u=2067331391,1093001119&fm=179&app=35&f=PNG?w=191&h=48&s=0BEC7A22C3D2879A0A3DA4DB0300E0B1")};n.FRIDAY=_;var D={0:(0,I.gzipImg)("http://t10.baidu.com/it/u=700443583,2435995568&fm=179&app=35&f=PNG?w=125&h=134&s=BD93CB166E31198A46BFD3FC0300501F"),1:(0,I.gzipImg)("http://t12.baidu.com/it/u=2821977421,6872392&fm=179&app=35&f=PNG?w=125&h=134&s=EC11CA1E3C71188E46BFD1FC0300501B"),2:(0,I.gzipImg)("http://t12.baidu.com/it/u=3568149263,3030633875&fm=179&app=35&f=PNG?w=125&h=134&s=7E85C60E6C31198E46FFD37C0300501B"),3:(0,I.gzipImg)("http://t11.baidu.com/it/u=1206424464,3563529862&fm=179&app=35&f=PNG?w=125&h=134&s=BFE872236C31198E1CF9BDD30300C0B1")};n.SERIESBG=D;var k=(0,I.gzipImg)("http://t10.baidu.com/it/u=2906654379,2461556194&fm=179&app=35&f=PNG?w=96&h=96&s=2FE67A22D4C7A2A24E5DB9C60300C0B5");n.SHAREIMG=k;var P=(0,I.gzipImg)("http://t12.baidu.com/it/u=3616689527,586529132&fm=179&app=35&f=PNG?w=77&h=29");n.CATESELECT=P;n.NO_ACTION=0;n.SHOW_POP=1;n.NOTICE_SERVICE=2;n.VIDEO_PATH="https://scenter.cdn.bcebos.com/afxdandu.mp4"})),window.define("480",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(27)),_=I(t(29)),D=I(t(141)),k=t(26),P=I(t(14));Page((0,D.default)({data:{rendered:!1,showErrorPage:!1,opacity:0,background:"#FD5D5E",title:"",headPic:"",order:null,share:null,list:[],moreTitle:"",moreCardList:[],decorate:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2328157948,172411707&fm=179&app=35&f=PNG?w=210&h=4",btnList:[]},attr:{promiseFetch:null,hasSendLog:{},options:{}},ubcLog:{from:"universal-channel"},onPrefetch:function(t){var e=t.query;this.attr.options=e,this.attr.promiseFetch=this.fetchData()},onInit:function(t){this.attr.options=t,this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},fetchData:function(){var t;return this.$http.get(this.$api.CHANNEL,{data:{way:(null===(t=this.attr.options)||void 0===t?void 0:t.way)||"taxi"}})},initData:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o,i,r,s,c,u,d,l,h,p,f,g;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.attr.promiseFetch)?t.attr.promiseFetch=null:n=t.fetchData(),a={},e.prev=3,e.next=6,n;case 6:a=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t.$showErrorPage(e.t0.errType),e.abrupt("return");case 13:i=(o=a).title,r=o.headPic,s=o.order,c=o.share,u=o.cardList,d=o.moreCard,l=o.background,h=o.uniformStyle,p=[],(0,k.isNonEmptyArray)(u)&&(p=(p=u.slice(0,5)).map((function(t){var e=t.list;return{name:t.name,logo:t.logo,background:t.background,skuList:(0,k.isNonEmptyArray)(e)?e.slice(0,3):[]}}))),f=(0,k.isNonEmptyArray)(null==d?void 0:d.cards)?d.cards.slice(0,2):[],g=[],s&&g.push({text:"订单",eventType:"order"}),c&&g.push({text:"分享",eventType:"share"}),t.setData({rendered:!0,showErrorPage:!1,background:l,title:i,headPic:r,order:s,share:c,list:p,btnList:g,uniformStyle:(0,k.gzipImgList)(h)},(function(){t.interObserve(".resource"),t.setData({moreTitle:null==d?void 0:d.title,moreCardList:f},(function(){t.interObserve(".more-card-item")}))}));case 21:case"end":return e.stop()}}),e,null,[[3,9]])})))()},onErrorPageReload:function(){this.initData()},interObserve:function(t){if(this.commonObserver){var e="string"==typeof t?t:t.join(", ");this.commonObserver(e,[1],this.attr.hasSendLog)}},onPageScroll:function(t){var e=t.scrollTop>0?1:0;this.setData({opacity:e})},onShare:function(){var t=(0,k.shareAppMessageUrlPatch)(this.data.share);this.sendLog("share","click"),o.openShare(t)},onShareAppMessage:function(){return(0,k.shareAppMessageUrlPatch)(this.data.share)},onOrderTap:function(){var t=this.data.order,e=t.jumpType,n=t.jumpUrl;this.sendLog("order","click"),P.default.to(n,e)},onBtnTap:function(t){var e=t.eventType;"order"===e?this.onOrderTap():"share"===e&&this.onShare()},sendLog:function(t,e,n){o.$log.sendNew((0,C.default)({module:t},n),e)}}))})),window.define("483",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I,C=t(10),x=C(t(27)),_=C(t(15)),D=C(t(29)),k=C(t(16)),P=t(26),E=t(9),L=t(31),A=t(144),O=C(t(14)),N=C(t(141)),R=C(t(484)),B="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1690965407,102755644&fm=179&app=35&f=PNG?w=1182&h=462&s=B9811B7CC9836774448FB7BC0300700A",j="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1883327853,163003391&fm=179&app=35&f=PNG?w=1182&h=761&s=B9811B7CC983677454AB9FAC0300E00A",U=(I={},(0,k.default)(I,0,"button-loading"),(0,k.default)(I,10,"button-buy"),(0,k.default)(I,20,"button-disable"),(0,k.default)(I,30,"button-disable"),(0,k.default)(I,40,"button-disable"),(0,k.default)(I,50,"button-disable"),I);Page((0,N.default)({mixins:[R.default],data:{rendered:!0,showErrorPage:!1,topBarOpacity:0,CLASS_CONFIG:U,couponData:{line1:{couponList:[],with:(0,P.vwUnit)(352)},line2:{couponList:[],with:(0,P.vwUnit)(352)}},isShowSingleCoupon:!1,isSubmiting:!1,button:{status:0,text:"",jumpType:"local",jumpUrl:"/homes/coupon-shop-pay/index"},isShowSkeleton:!0,titleStyle:"font-size:".concat((0,P.vwUnit)(48),";line-height:").concat((0,P.vwUnit)(48),";"),LOADING:0,BUY:10,couponBoxImg:(0,P.gzipImg)(B),perImgList:[(0,P.gzipImg)(B),(0,P.gzipImg)(j)]},attr:{},ubcLog:{from:"coupon_shop"},onInit:function(t){this.options=t,this.initData()},onPrefetch:function(){o.canIUse("prefetchResources")&&o.prefetchResources({image:[{url:(0,P.gzipImg)(B)},{url:(0,P.gzipImg)(j)}]})},fetchPayParams:function(t){var e=this;return(0,D.default)(x.default.mark((function n(){var a,o,r,s,c,u;return x.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,P.getRequestIdentifier)(t);case 2:return a=n.sent,o=a.enc_req_tag,r=a.req_tag,s=a.offset,c=function(t){"web"!==(0,E.getSystemInfo)().platform&&(0,P.textToast)(t.msg)},n.next=9,e.$http.get(e.$api.COUPON_SHOP_PAY_INFO,{data:(0,_.default)({encReqTag:o,reqTag:r,offset:s},t)}).catch(c);case 9:(u=n.sent)&&(i().globalData.couponShopPayParams=Object.assign(i().globalData.couponShopPayParams||{},u));case 11:case"end":return n.stop()}}),n)})))()},initData:function(){var t=this;return(0,D.default)(x.default.mark((function e(){var n,a,o,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,D,k,O,N,R,B,j,U,M,F,H,G,$,q,V,Y,z,W,K,J,Q;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.options,a=n.skuId,o=n.appKey,r=void 0===o?L.APPKEY_HSH:o,s=n.source,u={skuId:a,appKey:r,source:c=void 0===s?2:s},d="web"===(0,E.getSystemInfo)().platform,l=function(e){return t.$showErrorPage(e.errType)},h={},t.setData({isWeb:d,source:c,topBarOpacity:1==+c?0:1}),1!=+c){e.next=13;break}return e.next=9,t.$location.getWithNative();case 9:p=e.sent,h.crd="".concat(null==p?void 0:p.mc_longitude,"_").concat(null==p?void 0:p.mc_latitude),h.cityName=(null==p?void 0:p.city)||"",h.cityCode=(null==p?void 0:p.cityCode)||"";case 13:return f=(0,_.default)((0,_.default)({},u),h),t.attr.query=f,e.next=17,Promise.all([(0,A.getZidReTry)(),(0,A.getJtData)(L.FENGKONG_PARAMS.XINREN)]).catch((function(){return(0,P.textToast)("请求失败，请稍后再试哦~")}));case 17:if(g=e.sent){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,t.$http.get(t.$api.COUPON_SHOP_DETAIL,{data:(0,_.default)((0,_.default)({},f),{},{zid:g[0],jt:g[1],js_env:"swan"})}).catch(l);case 22:return(m=e.sent)&&(v=m.title,w=m.tag,b=m.saleNum,y=m.salePrice,T=m.originPrice,S=m.yinxiaoTitle,I=m.useTips,C=m.useRule,D=m.useGuid,k=m.button,O=m.orderExplanation,N=m.refundExplanation,R=m.image,B=m.images,j=m.skuType,U=m.coupon,M=m.shop,F=m.loc,H=m.descInfo,G=m.buyNotice,$=m.tpCompany,q=t.handleCoupon(U),V=t.handleShopData(M),Y=t.handleRotateImgs(B),z=t.handleListData(H),W=t.handleListData(G),t.setData({source:c,tpCompany:$,couponData:q,rotateImgs:Y,shopData:V,goodsDetail:z,buyNoticeData:W,isShowCoupon:U&&U.length>0,isShowSingleCoupon:U&&1===U.length,title:v,tag:w,orderExplanation:O,saleNum:b&&"月销".concat(b),originPrice:T/100,salePrice:y/100,yinxiaoTitle:S,useTipsData:I&&t.getInfoListData(I,"温馨提示"),useRuleData:C&&t.getInfoListData(C,"使用规则"),useGuidData:D&&t.handleUseGuid(D),button:k,footerPrice:(y/100+"").split("."),isShowSkeleton:!1,showErrorPage:!1}),1,K="共计".concat(1,"件商品 合计 "),Q={loc:F,image:R,skuId:a,appKey:r,title:v,orderExplanation:O,refundExplanation:N,salePrice:y/100,orderCount:1,count:1,skuType:j,source:c,priceDesc:K,price:(J=1*y)/100,totalMoney:J/100,originPrice:T/100},t.fetchPayParams({appKey:r,skuId:a,totalMoney:J}),i().globalData.couponShopOrderInfo=Q,i().globalData.couponShopSnapShot=m,i().globalData.couponShopPayParams=Object.assign(i().globalData.couponShopPayParams||{},{totalAmount:String(J)})),e.abrupt("return",m);case 25:case"end":return e.stop()}}),e)})))()},onErrorPageReload:function(){this.initData()},getInfoListData:function(t,e){return{title:e,infoList:t.map((function(t){return{text:t,isShowCircle:!0}}))}},handleUseGuid:function(t){var e,n=null==t||null===(e=t.info)||void 0===e?void 0:e.map((function(t){return(0,_.default)((0,_.default)({},t),{},{height:t.height&&(0,P.vwUnit)(+t.height),img:(0,P.gzipImg)(t.img)})}));return{title:t.title,info:n}},handleRotateImgs:function(t){var e=this;return{isRotation:1,selected:0,isShowNums:1,preview:1,mode:"aspectFill",value:(t||[]).map((function(t,n){return{img:t,log:JSON.stringify({index:n,module:"imgs",skuid:e.options.skuId})}}))}},handleShopData:function(t){return{showLogo:!0,jumpType:"local",jumpUrl:"/homes/shop-list/index?".concat((0,P.urlParams)(this.attr.query)),linkTexts:[{text:"查看全部门店",color:"#999"}],count:(null==t?void 0:t.count)||0,logo:(null==t?void 0:t.shopImage)||"",name:(null==t?void 0:t.shopName)||"",tel:(null==t?void 0:t.shopTel)||"",address:(null==t?void 0:t.shopAddr)||"",distance:(((null==t?void 0:t.distance)||0)/1e3).toFixed(2)+"km",shopJumpUrl:t.shopJumpUrl,navigationJumpUrl:t.navigationJumpUrl,skuId:this.options.skuId,log:JSON.stringify({module:"moreshop",skuid:this.options.skuId})}},onPageScroll:function(t){var e=t.scrollTop;if(1==+this.data.source){var n=(e/80).toFixed(2),a=n>1?1:n;this.setData({topBarOpacity:a})}},handleListData:function(t){return(t||[]).map((function(t){return(0,_.default)((0,_.default)({},t),{},{list:((null==t?void 0:t.list)||[]).filter((function(t){return!!t.text})).map((function(t){return(0,_.default)((0,_.default)({},t),{},{right:t.price?"￥".concat(t.price/100):"",isShowCircle:!0})}))})}))},handleCoupon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length,n={},a=t.map((function(t){return(0,_.default)((0,_.default)({},t),{},{tipsText:"x".concat(t.num,"张"),discount:+t.discount/100})}));return e>3&&this.setData({couponBoxImg:(0,P.gzipImg)(j)}),e<=3&&(n.line1={couponList:a,width:2===e?(0,P.vwUnit)(540):(0,P.vwUnit)(352)}),e>3&&e<=5&&(n.line1={couponList:a.slice(0,2),width:(0,P.vwUnit)(540)},n.line2={couponList:a.slice(2),width:(0,P.vwUnit)(4===e?540:352)}),6===e&&(n.line1={couponList:a.slice(0,3),width:(0,P.vwUnit)(352)},n.line2={couponList:a.slice(3),width:(0,P.vwUnit)(352)}),n},handleCLickLogin:function(t){var e=this;return(0,D.default)(x.default.mark((function n(){var a,i,r;return x.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.change,i=t.isLogin,10===(r=e.data.button).status){n.next=4;break}return n.abrupt("return");case 4:if(i){n.next=6;break}return n.abrupt("return",(0,P.textToast)("请先登录"));case 6:if(!i||!a){n.next=13;break}return e.setData({button:(0,_.default)((0,_.default)({},r),{},{status:0})}),n.next=10,e.initData();case 10:if(10===n.sent.button.status){n.next=13;break}return n.abrupt("return");case 13:o.$log.sendNew({skuid:e.options.skuId},"click",{value:"buy"}),O.default.withEvent(t);case 15:case"end":return n.stop()}}),n)})))()},handleButton:function(t){(0,P.textToast)(t.target.dataset.text)},handleOpenBaiduApp:function(t){var e;if(10!==(null===(e=this.data.button)||void 0===e?void 0:e.status))return(0,P.textToast)(t.target.dataset.text);var n=this.options,a=n.skuId,o=n.appKey,i=n.source,r="homes/coupon-shop/index?skuId=".concat(a,"&source=").concat(i,"&appKey=").concat(o);return this.$jump.openNA(r)}}))})),window.define("484",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var I={onShopItemCallClick:function(t){var e,n=null===(e=t.currentTarget.dataset)||void 0===e?void 0:e.tel;o.makePhoneCall({phoneNumber:n})}};n.default=I})),window.define("487",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(15)),_=I(t(29)),D=t(26),k=I(t(141)),P=t(9),E=t(31),L=t(144),A=(0,P.getSystemInfo)(),O=A.navigationBarHeight,N=A.statusBarHeight,R="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1523904162,1859961888&fm=179&app=35&f=PNG?w=69&h=66&s=49E43262B7AF36B10D7189140300E0C1";Page((0,k.default)({data:{rendered:!1,showErrorPage:!1,inlinePaySign:"",promotionTag:"promotionTag",enablePageBackModal:!0,customStyle:{panel:{background:"#ffffff"},checkedBase:{background:"#FD503E"}},buttonText:"提交订单",bottomDescText:"合计: ",symbol:"¥",orderData:{},isShowSkeleton:!1,navigationBarHeight:O,statusBarHeight:N,isShowHome:!1,LOADING_IMG:R,loading:!1,perImgList:[(0,D.gzipImg)(R)]},ubcLog:{from:"coupon_shop_pay"},onInit:function(t){this.options=t,this.initData()},initData:function(){this.getOrderData(),this.fetchPayParams()},onLoad:function(){o.$log.sendNew({skuid:i().globalData.couponShopOrderInfo.skuId},"display")},fetchPayParams:function(){var t=this;return(0,_.default)(C.default.mark((function e(){var n,a,o,r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i().globalData.couponShopPayParams,!i().globalData.couponShopPayParams){e.next=5;break}return e.abrupt("return",t.setData((0,x.default)({},n)));case 5:return e.next=7,(0,D.getRequestIdentifier)();case 7:return a=e.sent,o=function(t){return(0,D.textToast)("获取交易信息失败")},e.next=11,t.$http.get(t.$api.COUPON_SHOP_PAY_INFO,{data:a}).catch(o);case 11:r=e.sent,i().globalData.couponShopPayParams=r,t.setData((0,x.default)({},r));case 14:case"end":return e.stop()}}),e)})))()},getOrderData:function(){var t=i().globalData.couponShopOrderInfo;this.setData({orderData:(0,x.default)((0,x.default)({},t),{},{salePrice:"¥".concat(t.salePrice),orderCount:"x".concat(t.orderCount)})})},onErrorPageReload:function(){this.initData()},navTo:function(t){var e=t.currentTarget.dataset.info,n=e.jumpUrl,a=e.jumpType;this.$jump.to(n,a)},getPaymentInfo:function(t){this.setData({inlinePaySign:t.detail.inlinePaySign,userPayAmount:t.detail.userPayAmount/100})},getError:function(){(0,D.textToast)("网络异常,请稍后重试")},handleSubmitError:function(t){1001==+t.code?(0,D.textToast)("网络慢，请重试"):(0,D.textToast)(t.msg)},handleInvokePay:function(t){var e=this;o.requestPolymerPayment({orderInfo:t,success:function(){e.$jump.to("/homes/coupon-shop-deal/index?orderId=".concat(t.tpOrderId),"local")},fail:function(){e.fetchOrderPush(t.tpOrderId),e.$jump.to("/homes/coupon-shop-deal/index?orderId=".concat(t.tpOrderId),"local")}})},fetchOrderPush:function(t){var e=this;return(0,_.default)(C.default.mark((function n(){var a;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get(e.$api.COUPON_SHOP_PAY_ORDER_PUSH,{data:{orderId:t}});case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},handleSubmit:(0,D.throttle)(function(){var t=(0,_.default)(C.default.mark((function t(){var e,n,a,r,s,c,u,d,l,h,p,f,g,m,v,w,b;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i().globalData.couponShopOrderInfo||{},n=e.skuId,a=e.count,r=e.totalMoney,s=e.loc,c=e.appKey,u=e.skuType,d=e.source,l=void 0===d?2:d,t.next=3,(0,D.getRequestIdentifier)({appKey:c,count:a,skuId:n,skuType:u,source:l,totalMoney:100*r});case 3:return h=t.sent,p=h.enc_req_tag,f=h.req_tag,g=h.offset,t.next=9,Promise.all([(0,L.getZidReTry)(),(0,L.getJtData)(E.FENGKONG_PARAMS.XINREN)]).catch((function(){return(0,D.textToast)("请求失败，请稍后再试哦~")}));case 9:if(m=t.sent){t.next=12;break}return t.abrupt("return");case 12:return v={skuId:n,count:a,totalMoney:100*r,loc:s,appKey:c,skuType:u,source:l,encReqTag:p,reqTag:f,offset:g,snapshot:JSON.stringify(i().globalData.couponShopSnapShot),zid:m[0],jt:m[1],js_env:"swan"},this.setData({loading:!0}),t.next=16,this.$http.post(this.$api.COUPON_SHOP_PAY_SUBMIT,{data:v}).catch(this.handleSubmitError);case 16:w=t.sent,this.setData({loading:!1}),o.$log.sendNew({skuid:this.options.skuId||i().globalData.couponShopOrderInfo.skuId},"click",{value:"placeorder"}),w&&w.tpOrderId&&(b=(0,x.default)((0,x.default)({},w),{},{inlinePaySign:this.data.inlinePaySign}),this.handleInvokePay(b));case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),1e3)}))})),window.define("490",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(27)),D=x(t(15)),k=x(t(29)),P=t(49),E=t(26),L=x(t(141)),A=x(t(491)),O=t(492);Page((0,L.default)({data:{rendered:!1,showErrorPage:!1,COUPON_STATUS_CONFIG:O.COUPON_STATUS_CONFIG,status:1,descTime:null,loading:!0,statusText:"",description:"",skuInfo:{},orderTitle:"订单信息",orderInfo:{orderId:222222,createTime:1398250549123,count:222,totalMoney:222},goodsDetailTitle:"商品详情",titleStyle:"font-size:".concat((0,E.vwUnit)(48),";line-height:").concat((0,E.vwUnit)(48),";"),isShowCancelButton:!1,isShowBuyAgainButton:!1,isShowPayButton:!1,isShowContactButton:!0,couponTitle:"",isShowSkeleton:!0,WAIT_PAY:O.WAIT_PAY,LOADING_IMG:O.LOADING_IMG,cancelLoading:!1},attr:{initBlock:!1},ubcLog:{from:"coupon_shop_deal"},onShow:function(){this.attr.initBlock?this.attr.initBlock=!1:this.initData()},onHidden:function(){this.skuTimer&&clearInterval(this.skuTimer)},onInit:function(t){this.attr.initBlock=!0,this.options=t,this.initData()},initData:function(){var t=this;return(0,k.default)(_.default.mark((function e(){var n,a,o,i,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C,x,k,P,E,L,A,O,N,R,B,j,U,M,F,H,G,$,q,V,Y,z,W,K,J;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,a=n.orderId,o=n.source,i=n.appKey,s={orderId:a,source:o,appKey:i},e.next=4,t.fetchOrderInfo(s);case 4:if(!(c=e.sent)){e.next=32;break}if(u=c.descTime,d=c.description,l=c.orderInfo,h=c.detail,p=void 0===h?{}:h,f=c.serviceUrl,g=c.serviceType,m=c.status,v=c.skuDetail,w=void 0===v?{}:v,b=c.skuCode,y=c.skuInfo,T=c.shopInfo,S=c.payInfo,I=void 0===S?{}:S,C=c.againUrl,x=c.againType,k=c.statusText,t.handlePolling(m),P=p.couponDesc,E=p.useTips,L=p.useRule,A=p.buyNotice,O=p.descInfo,N=w.title,R=w.couponList,B=void 0===R?[]:R,j=w.jumpType,U=w.jumpUrl,M=w.totalNum,F=null,H=null,G={},1!=+o){e.next=20;break}return e.next=16,t.$location.getWithNative();case 16:$=e.sent,G.crd="".concat(null==$?void 0:$.mc_longitude,"_").concat(null==$?void 0:$.mc_latitude),G.cityName=(null==$?void 0:$.city)||"",G.cityCode=(null==$?void 0:$.cityCode)||"";case 20:if(q=(0,D.default)((0,D.default)({},s),G),t.attr.query=q,P&&(H=t.handleGoodsDetailInfo(P)),l&&(F=t.handleOrderInfo(l,y)),V=null,I)try{V=JSON.parse(I)}catch(t){}Y=t.handleShopData(T,y),z=t.handleListData(O),W=t.handleListData(A),K=t.handleButtonShow(m,u),J=t.handleCodeInfo(b),t.setData((0,D.default)((0,D.default)({},c),{},{shopData:Y,codeInfo:J,goodsDetail:z,buyNoticeData:W,status:m,loading:!1,description:u?t.getCountTimeText(u):t.handleDescription(u,m,d),formatOrderInfo:F,formatGoosDetailInfo:H,serviceType:g,serviceUrl:f,showErrorPage:!1,couponTitle:N&&"".concat(N,"(").concat(M,"张)"),payOrderDetail:V,couponList:t.handleCouponList(B),couponTitleJumpType:j,couponTitleJumpUrl:U,againUrl:C,againType:x,isShowSkeleton:!1,skuInfo:t.handleSkuInfoData(y),useTipsData:E&&t.getInfoListData(E,"温馨提示"),useRuleData:L&&t.getInfoListData(L,"使用规则"),isShowBuyInfo:E||L,statusText:t.handleStatusText(m,k,u)},K),(function(){t.handleCountDown(c),t.showQRcode(J),r.$log.sendNew({skuid:y.skuId,ordertype:m},"display")}));case 32:case"end":return e.stop()}}),e)})))()},handleShopData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{showLogo:!0,jumpType:"local",jumpUrl:"/homes/shop-list/index?".concat((0,E.urlParams)(this.attr.query)),linkTexts:[{text:"查看全部门店",color:"#999"}],count:(null==t?void 0:t.count)||0,logo:(null==t?void 0:t.shopImage)||"",name:(null==t?void 0:t.shopName)||"",tel:(null==t?void 0:t.shopTel)||"",address:(null==t?void 0:t.shopAddr)||"",distance:(((null==t?void 0:t.distance)||0)/1e3).toFixed(2)+"km",shopJumpUrl:t.shopJumpUrl,navigationJumpUrl:t.navigationJumpUrl,skuId:e.skuId,log:JSON.stringify({module:"moreshop",skuid:e.skuId})}},handleListData:function(t){return(t||[]).map((function(t){return(0,D.default)((0,D.default)({},t),{},{list:((null==t?void 0:t.list)||[]).map((function(t){return(0,D.default)((0,D.default)({},t),{},{right:t.price?"￥".concat(t.price/100):"",isShowCircle:!0})}))})}))},handleCodeInfo:function(t){return{title:"券码信息",loadState:"loading",linkTexts:[{text:"".concat((null==t?void 0:t.length)||0,"个券码"),color:"#999"}],list:(Array.isArray(t)?t:[]).map((function(t){return{uniqueStr:t.uniqueStr,passStatus:t.passStatus,date:"有效期至".concat((0,P.formatDate)(1e3*t.validTime,"YYYY年MM月DD日")),status:t.passText||"",showCodeStyle:[0,1,2,3].includes(t.passType)&&[4].includes(t.passStatus),showNumStyle:[4,5].includes(t.passType)||[5,6].includes(t.passStatus),showNumInvalidStyle:[5,6].includes(t.passStatus)}}))}},showQRcode:function(t){var e,n=this,o=s().globalData.systemInfo.screenWidth;null==t||null===(e=t.list)||void 0===e||e.forEach((function(t,e){t.uniqueStr&&new A.default("code-canvas-".concat(e),{text:t.uniqueStr,width:38.65*o/100,height:38.65*o/100})})),a((function(){n.setData("codeInfo.loadState","done")}),1e3)},showCode:function(t){var e=t.currentTarget.dataset.code;r.showModal({title:"券码信息",content:e})},copyCode:function(t){var e=t.currentTarget.dataset.code;r.setClipboardData({data:e,success:function(){r.showToast({title:"复制成功",icon:"none"})},fail:function(t){r.showToast({title:"复制失败",icon:"none"})}})},handleStatusText:function(t,e,n){return n||t!==O.WAIT_PAY?e:O.STATUS_CONFIG[O.DEAL_CANCEL]},handleDescription:function(t,e,n){return e!==O.WAIT_PAY||t?n:O.DESCRIPTION},handlePolling:function(t){var e=this;this.polling&&clearInterval(this.polling),t===O.SHIPPING&&(this.polling=o((function(){e.initData()}),1e3))},getInfoListData:function(t,e){return{title:e,infoList:t.map((function(t){return{text:t,isShowCircle:!0}}))}},handleSkuInfoData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.default)((0,D.default)({},t),{},{priceDesc:"合计: ",totalMoney:t.totalMoney/100,salePrice:"¥".concat(t.salePrice/100),orderCount:"x".concat(t.count),originPrice:"¥".concat(t.originPrice/100)})},handleOrderInfo:function(t,e){var n=t.orderId,a=t.createTime,o=t.count,i=t.totalMoney,r={text:"订单编号: ".concat(n),isShowCopy:!0,skuId:e.skuId},s=(0,P.formatDate)(1e3*+a,"YYYY-MM-DD hh:mm:ss");return[r,{text:"创建时间: ".concat(s)},{text:"购买份数: x".concat(o)},{text:"订单金额: ¥ ".concat(i/100)}]},handleCouponList:function(t){return t.length?t.map((function(t){var e=t.price,n=t.useNum,a=void 0===n?0:n,o=t.totalNum,i=t.title,r=t.subTitle,s=t.status,c=t.statusText,u=t.validTime;return O.COUPON_STATUS_CONFIG[t.status]===O.COUPON_WAIT_USE&&Object.assign(t,{isShowButton:!0}),Object.assign(t,{discount:e/100,priceText:o>1&&"已用".concat(a,"/").concat(o),desc:i,tips:r,tips1:u,rightText:O.COUPON_WAIT_USE===O.COUPON_STATUS_CONFIG[s]?c:"",isShowButton:O.COUPON_WAIT_USE===O.COUPON_STATUS_CONFIG[s]}),t})):null},handleClickCouponLeft:function(t){var e=t.data;O.COUPON_STATUS_CONFIG[e.status]===O.COUPON_WAIT_USE&&this.setData({bottomPopUpShow:!0,bottomPopUpData:this.handleBottomPopUpData(e),bottomPopUpTitle:"优惠券详情",bottomPopUpJumpType:e.jumpType,bottomPopUpJumpUrl:e.jumpUrl})},handleClickCouponRight:function(t){var e=t.data;O.COUPON_STATUS_CONFIG[e.status]===O.COUPON_WAIT_USE&&this.$jump.to(e.jumpUrl,e.jumpType)},handleClickHeadRight:function(t){var e=this.data,n=e.couponTitleJumpType,a=e.couponTitleJumpUrl;this.$jump.to(a,n)},handleUse:function(t){var e=this.data,n=e.bottomPopUpJumpUrl,a=e.bottomPopUpJumpType;this.$jump.to(n,a),this.sendClickLog("coupondetail")},handlePopupBoxClose:function(t){this.setData({bottomPopUpShow:!1})},handleBottomPopUpData:function(t){var e=t.subTitle,n=t.useRules;return{useTipsData:{title:"使用说明",infoList:[{text:e,isShowCircle:!0}]},validTimeData:{title:"有效期",infoList:[{text:t.validTime,isShowCircle:!0}]},useRulesData:{title:"使用规则",infoList:n.map((function(t){return{text:t,isShowCircle:!0}}))}}},handleGoodsDetailInfo:function(t){return t.map((function(t){return{text:t.title,right:t.num,isShowCircle:!0}}))},handleButtonShow:function(t,e){var n={isShowCancelButton:!1,isShowBuyAgainButton:!1,isShowPayButton:!1};return t===O.WAIT_PAY&&(n.isShowPayButton=!!e,n.isShowCancelButton=!0),[O.DEAL_CANCEL,O.SHIPPED,O.DEAL_SUCCESS].includes(t)&&(n.isShowBuyAgainButton=!0),n},handleCancelOrder:(0,E.throttle)(function(){var t=(0,k.default)(_.default.mark((function t(){var e,n,a;return _.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options.orderId,n=function(t){return(0,E.textToast)(t.msg)},this.setData({cancelLoading:!0}),t.next=5,this.$http.get(this.$api.COUPON_SHOP_DEAL_CANCEL,{data:{orderId:e}}).catch(n);case 5:a=t.sent,this.setData({cancelLoading:!1}),a&&((0,E.textToast)("取消成功"),clearInterval(this.skuTimer),this.initData()),this.sendClickLog("cancel");case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),1e3),handleCountDown:function(t){var e=this,n=t.descTime,a=t.status;this.skuTimer&&clearInterval(this.skuTimer),0!==n?n>0&&(this.skuTimer=o((function(){var t=e.data.descTime-1;0===t?(e.skuTimer&&clearInterval(e.skuTimer),e.handleCountdownZero(a)):e.setData({descTime:t,description:e.getCountTimeText(t)})}),1e3)):a===O.WAIT_PAY&&this.setData({statusText:O.STATUS_CONFIG[O.DEAL_CANCEL],description:O.DESCRIPTION,isShowPayButton:!1})},handleCountdownZero:function(t){this.skuTimer&&clearInterval(this.skuTimer),t===O.WAIT_PAY&&this.setData({description:O.DESCRIPTION,statusText:O.STATUS_CONFIG[O.DEAL_CANCEL]}),this.initData()},handlePay:function(){var t=this,e=this.data.payOrderDetail;this.sendClickLog("continue"),r.requestPolymerPayment({orderInfo:e,success:function(e){t.initData()},fail:function(e){t.initData()}})},sendClickLog:function(t){var e=this.data,n=e.skuInfo.skuId,a=e.status;r.$log.sendNew({skuid:n,ordertype:a},"click",{value:t})},onErrorPageReload:function(){this.initData()},getCountTimeText:function(t){var e=(0,E.formatSecond)(+t),n=e.minutes,a=e.seconds;return"剩余".concat(n,"分").concat(a,"秒 自动取消")},fetchOrderInfo:function(t){var e=this;return(0,k.default)(_.default.mark((function n(){var a,o;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(t){(0,E.textToast)(t.msg),e.$showErrorPage(t.errType||3)},n.next=3,e.$http.get(e.$api.COUPON_SHOP_DEAL_INFO,{data:t}).catch(a);case 3:return o=n.sent,n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})))()}}))})),window.define("491",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I;!function(){function t(t,e){for(var n=1,a=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,r=y.length;o<=r;o++){var s=0;switch(e){case i.L:s=y[o][0];break;case i.M:s=y[o][1];break;case i.Q:s=y[o][2];break;case i.H:s=y[o][3]}if(a<=s)break;n++}if(n>y.length)throw new Error("Too long data");return n}function e(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var o=[],i=this.data.charCodeAt(e);i>65536?(o[0]=240|(1835008&i)>>>18,o[1]=128|(258048&i)>>>12,o[2]=128|(4032&i)>>>6,o[3]=128|63&i):i>2048?(o[0]=224|(61440&i)>>>12,o[1]=128|(4032&i)>>>6,o[2]=128|63&i):i>128?(o[0]=192|(1984&i)>>>6,o[1]=128|63&i):o[0]=i,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function n(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},n.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[a][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var a=-1;a<=7;a++)e+a<=-1||this.moduleCount<=e+a||(this.modules[t+n][e+a]=0<=n&&n<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=a&&a<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var a=f.getLostPoint(this);(0==n||t>a)&&(t=a,e=n)}return e},createMovieClip:function(t,e,n){var a=t.createEmptyMovieClip(e,n);this.make();for(var o=0;o<this.modules.length;o++)for(var i=1*o,r=0;r<this.modules[o].length;r++){var s=1*r;this.modules[o][r]&&(a.beginFill(0,100),a.moveTo(s,i),a.lineTo(s+1,i),a.lineTo(s+1,i+1),a.lineTo(s,i+1),a.endFill())}return a},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=f.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var a=t[e],o=t[n];if(null==this.modules[a][o])for(var i=-2;i<=2;i++)for(var r=-2;r<=2;r++)this.modules[a+i][o+r]=-2==i||2==i||-2==r||2==r||0==i&&0==r}},setupTypeNumber:function(t){for(var e=f.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(n=0;n<18;n++){a=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,a=f.getBCHTypeInfo(n),o=0;o<15;o++){var i=!t&&1==(a>>o&1);o<6?this.modules[o][8]=i:o<8?this.modules[o+1][8]=i:this.modules[this.moduleCount-15+o][8]=i}for(o=0;o<15;o++){i=!t&&1==(a>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=i:o<9?this.modules[8][15-o-1+1]=i:this.modules[8][15-o-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,a=this.moduleCount-1,o=7,i=0,r=this.moduleCount-1;r>0;r-=2)for(6==r&&r--;;){for(var s=0;s<2;s++)if(null==this.modules[a][r-s]){var c=!1;i<t.length&&(c=1==(t[i]>>>o&1)),f.getMask(e,a,r-s)&&(c=!c),this.modules[a][r-s]=c,-1==--o&&(i++,o=7)}if((a+=n)<0||this.moduleCount<=a){a-=n,n=-n;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(t,e,a){for(var o=w.getRSBlocks(t,e),i=new b,r=0;r<a.length;r++){var s=a[r];i.put(s.mode,4),i.put(s.getLength(),f.getLengthInBits(s.mode,t)),s.write(i)}var c=0;for(r=0;r<o.length;r++)c+=o[r].dataCount;if(i.getLengthInBits()>8*c)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*c+")");for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(n.PAD0,8),i.getLengthInBits()>=8*c));)i.put(n.PAD1,8);return n.createBytes(i,o)},n.createBytes=function(t,e){for(var n=0,a=0,o=0,i=new Array(e.length),r=new Array(e.length),s=0;s<e.length;s++){var c=e[s].dataCount,u=e[s].totalCount-c;a=Math.max(a,c),o=Math.max(o,u),i[s]=new Array(c);for(var d=0;d<i[s].length;d++)i[s][d]=255&t.buffer[d+n];n+=c;var l=f.getErrorCorrectPolynomial(u),h=new v(i[s],l.getLength()-1).mod(l);r[s]=new Array(l.getLength()-1);for(d=0;d<r[s].length;d++){var p=d+h.getLength()-r[s].length;r[s][d]=p>=0?h.get(p):0}}var g=0;for(d=0;d<e.length;d++)g+=e[d].totalCount;var m=new Array(g),w=0;for(d=0;d<a;d++)for(s=0;s<e.length;s++)d<i[s].length&&(m[w++]=i[s][d]);for(d=0;d<o;d++)for(s=0;s<e.length;s++)d<r[s].length&&(m[w++]=r[s][d]);return m};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},r=0,s=1,c=2,u=3,d=4,l=5,h=6,p=7,f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;f.getBCHDigit(e)-f.getBCHDigit(f.G15)>=0;)e^=f.G15<<f.getBCHDigit(e)-f.getBCHDigit(f.G15);return(t<<10|e)^f.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;f.getBCHDigit(e)-f.getBCHDigit(f.G18)>=0;)e^=f.G18<<f.getBCHDigit(e)-f.getBCHDigit(f.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return f.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case r:return(e+n)%2==0;case s:return e%2==0;case c:return n%3==0;case u:return(e+n)%3==0;case d:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case l:return e*n%2+e*n%3==0;case h:return(e*n%2+e*n%3)%2==0;case p:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new v([1],0),n=0;n<t;n++)e=e.multiply(new v([1,g.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,a=0;a<e;a++)for(var o=0;o<e;o++){for(var i=0,r=t.isDark(a,o),s=-1;s<=1;s++)if(!(a+s<0||e<=a+s))for(var c=-1;c<=1;c++)o+c<0||e<=o+c||0==s&&0==c||r==t.isDark(a+s,o+c)&&i++;i>5&&(n+=3+i-5)}for(a=0;a<e-1;a++)for(o=0;o<e-1;o++){var u=0;t.isDark(a,o)&&u++,t.isDark(a+1,o)&&u++,t.isDark(a,o+1)&&u++,t.isDark(a+1,o+1)&&u++,0!=u&&4!=u||(n+=3)}for(a=0;a<e;a++)for(o=0;o<e-6;o++)t.isDark(a,o)&&!t.isDark(a,o+1)&&t.isDark(a,o+2)&&t.isDark(a,o+3)&&t.isDark(a,o+4)&&!t.isDark(a,o+5)&&t.isDark(a,o+6)&&(n+=40);for(o=0;o<e;o++)for(a=0;a<e-6;a++)t.isDark(a,o)&&!t.isDark(a+1,o)&&t.isDark(a+2,o)&&t.isDark(a+3,o)&&t.isDark(a+4,o)&&!t.isDark(a+5,o)&&t.isDark(a+6,o)&&(n+=40);var d=0;for(o=0;o<e;o++)for(a=0;a<e;a++)t.isDark(a,o)&&d++;return n+=10*(Math.abs(100*d/e/e-50)/5)}},g={glog:function(t){if(t<1)throw new Error("glog("+t+")");return g.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return g.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)g.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)g.EXP_TABLE[m]=g.EXP_TABLE[m-4]^g.EXP_TABLE[m-5]^g.EXP_TABLE[m-6]^g.EXP_TABLE[m-8];for(m=0;m<255;m++)g.LOG_TABLE[g.EXP_TABLE[m]]=m;function v(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var a=0;a<t.length-n;a++)this.num[a]=t[a+n]}function w(t,e){this.totalCount=t,this.dataCount=e}function b(){this.buffer=[],this.length=0}v.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<t.getLength();a++)e[n+a]^=g.gexp(g.glog(this.get(n))+g.glog(t.get(a)));return new v(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=g.glog(this.get(0))-g.glog(t.get(0)),n=new Array(this.getLength()),a=0;a<this.getLength();a++)n[a]=this.get(a);for(a=0;a<t.getLength();a++)n[a]^=g.gexp(g.glog(t.get(a))+e);return new v(n,0).mod(t)}},w.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],w.getRSBlocks=function(t,e){var n=w.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var a=n.length/3,o=[],i=0;i<a;i++)for(var r=n[3*i+0],s=n[3*i+1],c=n[3*i+2],u=0;u<r;u++)o.push(new w(s,c));return o},w.getRsBlockTable=function(t,e){switch(e){case i.L:return w.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return w.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return w.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return w.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},b.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var y=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];(I=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];this._oQRCode=null,this.canvasId=t,this._htOption.text&&this.canvasId&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e,a){this._oQRCode=new n(t(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this.makeImage(a)},I.prototype.makeImage=function(t){var e;e=this._htOption.usingIn?o.createCanvasContext(this.canvasId,this._htOption.usingIn):o.createCanvasContext(this.canvasId);var n=this._htOption,a=this._oQRCode,i=a.getModuleCount(),r=n.width/i,s=n.height/i,c=Math.round(r),u=Math.round(s);n.image&&""!=n.image&&e.drawImage(n.image,0,0,n.width,n.height);for(var d=0;d<i;d++)for(var l=0;l<i;l++){var h=a.isDark(d,l),p=l*r,f=d*s;e.setStrokeStyle(h?n.colorDark:n.colorLight),e.setLineWidth(1),e.setFillStyle(h?n.colorDark:n.colorLight),e.fillRect(p,f,r,s),e.strokeRect(Math.floor(p)+.5,Math.floor(f)+.5,c,u),e.strokeRect(Math.ceil(p)-.5,Math.ceil(f)-.5,c,u)}e.draw(!1,t)},I.prototype.exportImage=function(t){t&&o.canvasToTempFilePath({x:0,y:0,width:this._htOption.width,height:this._htOption.height,destWidth:this._htOption.width,destHeight:this._htOption.height,canvasId:this.canvasId,success:function(e){t(e.tempFilePath)},fail:function(t){console.log(t)}},this._htOption.usingIn)},I.CorrectLevel=i}(),e.exports=I})),window.define("492",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.COUPON_STATUS_CONFIG=n.LOADING_IMG=n.DESCRIPTION=n.COUPON_EXPIRED=n.COUPON_USED=n.COUPON_WAIT_USE=n.STATUS_CONFIG=n.DEAL_SUCCESS=n.DRAW_BACK_FAIL=n.DRAW_BACK_DONE=n.DRAW_BACK=n.DEAL_CANCEL=n.USED=n.SHIPPED=n.WAIT_USE=n.SHIPPING=n.HAS_PAY=n.WAIT_PAY=void 0;var C,x=I(t(16));n.WAIT_PAY=10;n.HAS_PAY=20;n.SHIPPING=30;n.WAIT_USE=40;n.SHIPPED=45;n.USED=50;n.DEAL_CANCEL=60;n.DRAW_BACK=70;n.DRAW_BACK_DONE=80;n.DRAW_BACK_FAIL=90;n.DEAL_SUCCESS=100;var _=(C={},(0,x.default)(C,10,"待支付"),(0,x.default)(C,20,"已支付"),(0,x.default)(C,30,"出货中"),(0,x.default)(C,40,"待使用"),(0,x.default)(C,50,"已使用"),(0,x.default)(C,60,"交易取消"),(0,x.default)(C,70,"退款中"),(0,x.default)(C,80,"已退款"),(0,x.default)(C,90,"退款失败"),(0,x.default)(C,100,"交易完成"),C);n.STATUS_CONFIG=_;n.COUPON_WAIT_USE="COUPON_WAIT_USE";n.COUPON_USED="COUPON_USED";n.COUPON_EXPIRED="COUPON_EXPIRED";n.DESCRIPTION="支付超时，交易将自动取消";n.LOADING_IMG="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=427771197,267679665&fm=179&app=35&f=PNG?w=69&h=66&s=C8C23A6637DF15D05F7509160300C0C1";var D={10:"COUPON_WAIT_USE",20:"COUPON_USED",30:"COUPON_EXPIRED"};n.COUPON_STATUS_CONFIG=D})),window.define("495",(function(t,e,n,a,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I){"use strict";var C=t(10),x=C(t(15)),_=C(t(27)),D=C(t(29)),k=t(49),P=C(t(141)),E=C(t(14)),L=t(26),A=t(9),O=t(496),N=null,R=(0,A.getSystemInfo)().windowWidth,B=24/1242*R,j=148/1242*R;Page((0,P.default)({data:{showNav:!1,opacity:0,currentImgOrder:1,showPanel:!1,showPanelCloseIcon:!0,showFixedTab:!1,showActiveTab:!0,activeTabIndex:0,scrollTop:0,panelTemplate:"",imgMap:O.imgMap,SALE_STATUS:O.SALE_STATUS,MODULE_GAP:O.MODULE_GAP,tabsName:["商品详情","可选团购","购买须知","图文详情"],navHeight:0,rendered:!1,showErrorPage:!1,spuId:"",spuTitle:"",swiperImgList:[],instructions:[],servicePhone:[],allSkus:[],currentSku:{},skuIndex:0,skusCountdown:[],countdownArr:[],skusPayParams:[],platformCredential:{},userLogin:(0,A.isLogin)(),hasShow:!1,formatPrice:L.formatPrice},attr:{hasInit:!1,prefetchPromise:null,cityCode:"",crd:""},timer:null,onPrefetch:function(t){var e=t.query;this.attr.prefetchPromise=this.fetchMainData(e)},onInit:function(t){this.options=t,this.attr.hasInit||(this.attr.hasInit=!0,this.initData(t));var e=this.data,n=e.statusBarHeight+e.navigationBarHeight;this.setData({navHeight:n}),this.setNavigationBarColor("#ffffff","#000000")},onShow:function(){var t=this;return(0,D.default)(_.default.mark((function e(){var n,a,o;return _.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasShow){e.next=12;break}return a=t.fetchStatus(t.options),o={},e.prev=3,e.next=6,a;case 6:o=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:t.updateSkusStatus(null===(n=o)||void 0===n?void 0:n.skusStatus,!0);case 12:t.hasShow=!0;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()},onUnload:function(){this.timer&&clearInterval(this.timer)},onPageScroll:function(t){var e=this,n=t.scrollTop,a=Math.min(n/this.data.navHeight,1);this.getTapTops(),this.setData({scrollTop:n,opacity:a,navColor:"rgba(255, 255, 255, ".concat(a,")")},(function(){1!==a||e.data.showNav?a<1&&e.data.showNav&&(e.setNavigationBarColor("#ffffff","#000000"),e.setData({showNav:!e.data.showNav})):(e.setNavigationBarColor("#000000","#ffffff"),e.setData({showNav:!e.data.showNav}))}))},initData:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,r,s,c,u,d,l,h,p,f,g,m;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.fetchStatus(t),(o=e.attr.prefetchPromise)?e.attr.prefetchPromise=null:o=e.fetchMainData(t),r={},n.prev=4,n.next=7,o;case 7:r=n.sent,n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),e.$showErrorPage(n.t0.errType),n.abrupt("return");case 14:c=(s=r).spuId,u=s.spuTitle,d=s.images,l=s.instructions,h=s.bottomBar,p=s.appKey,f=s.skus,g=e.handleSkusData(f),(m=e.data.tabsName)[1]=g.length>1?"可选团购":"团购详情",e.setData({spuId:c,spuTitle:u,swiperImgList:d,instructions:l,servicePhone:(null==h?void 0:h.servicePhone)||[],platformCredential:(null==h?void 0:h.platformCredential)||{},allSkus:g,currentSku:g[0]||{},tabsName:m,appKey:p,rendered:!0,shopParams:e.handleShopParams(g[0]||{},p),userLogin:(0,A.isLogin)()},(0,D.default)(_.default.mark((function t(){var n,o,r;return _.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.$log.sendNew({module:"goodsdetail",spuId:e.data.spuId},"display"),i.$log.sendNew({module:"sku",skuId:e.data.currentSku.id},"show"),(N=i.createSelectorQuery()).selectAll(".page-module").boundingClientRect(),e.getTapTops(),o={},t.prev=6,t.next=9,a;case 9:o=t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(6);case 14:e.updateSkusStatus(null===(n=o)||void 0===n?void 0:n.skusStatus),r=[],e.data.allSkus.forEach(function(){var t=(0,D.default)(_.default.mark((function t(n){var a;return _.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPayParams({appKey:p,skuId:n.id,totalMoney:n.salePriceByCent});case 2:a=t.sent,r.push(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.setData({skusPayParams:r});case 18:case"end":return t.stop()}}),t,null,[[6,12]])}))));case 19:case"end":return n.stop()}}),n,null,[[4,10]])})))()},onErrorPageReload:function(){this.initData(this.options)},handleShopParams:function(t,e){return{skuId:t.id,appKey:e,crd:this.attr.crd,cityCode:this.attr.cityCode}},handleSkusData:function(t){var e=this;if(!t||(null==t?void 0:t.length)<1)return this.$showErrorPage(2),[];this.initCountdown(t);var n=t.map((function(t,e){return{id:t.id,mealIndex:e,mealName:t.title,mealPrice:(0,L.formatPrice)(t.salePrice),htmlText:t.details_html,htmlStruct:t.details_struct}}));return t.map((function(t){if(!((0,L.isObject)(t)&&Object.keys(t).length>0))return{};var a=e.initskuConfig(t.status),o=10==+t.buyStatus,i=t.salePrice,r=t.originPrice,s=t.promoMoney;return Object.assign({},t,a,{salePrice:(0,L.formatPrice)(i),salePriceByCent:i,originPrice:(0,L.formatPrice)(r),promoMoney:(0,L.formatPrice)(s),enableBuy:o,meals:n})}))},updateSkusStatus:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&!((null==t?void 0:t.length)<1)){var a=this.data.allSkus;t.forEach((function(t){a.forEach((function(e,n){t.id===e.id&&Object.assign(a[n],t)}))})),this.initCountdown(a);var o=a.map((function(t){if(!((0,L.isObject)(t)&&Object.keys(t).length>0))return{};var n=e.initskuConfig(t.status),a=10==+t.buyStatus;return Object.assign({},t,n,{enableBuy:a})}));this.setData({allSkus:o,currentSku:o[this.data.skuIndex],userLogin:(0,A.isLogin)()},(function(){n&&(i.$log.sendNew({module:"goodsdetail",spuId:e.data.spuId},"display"),i.$log.sendNew({module:"sku",skuId:e.data.currentSku.id},"show"))}))}},fetchMainData:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,i,r,s,c,u;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t&&t.spuId&&(null!=t&&t.appKey||null!=t&&t.customAppKey)){n.next=3;break}return e.$showErrorPage(2),n.abrupt("return",null);case 3:return a=t.spuId,o=t.appKey,i=t.customAppKey,r=t.mktCrd,n.next=6,(0,L.getLocation)();case 6:return s=n.sent,c=(null==t?void 0:t.cityCode)||s.cityCode,u=c===s.cityCode?"".concat(s.longitude,"_").concat(s.latitude):"",e.attr.crd=u,e.attr.cityCode=c,n.abrupt("return",e.$http.get(e.$api.GOODS_DETAIL,{data:{spuId:a,appKey:o||i,crd:u,mktCrd:r,cityCode:c,source:"1"}}));case 12:case"end":return n.stop()}}),n)})))()},fetchStatus:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,i,r,s;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.spuId,o=t.appKey,i=t.customAppKey,n.next=3,(0,L.getLocation)();case 3:return r=n.sent,s=(null==t?void 0:t.cityCode)||r.cityCode,n.abrupt("return",e.$http.get(e.$api.GOODS_STATUS,{data:{spuId:a,appKey:o||i,cityCode:s}}));case 6:case"end":return n.stop()}}),n)})))()},fetchPayParams:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,i,r,s,c;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,L.getRequestIdentifier)(t);case 2:return a=n.sent,o=a.enc_req_tag,i=a.req_tag,r=a.offset,s=function(t){"web"!==(0,A.getSystemInfo)().platform&&(0,L.textToast)(t.msg)},n.next=9,e.$http.get(e.$api.ORDER_PARAMS,{data:(0,x.default)({encReqTag:o,reqTag:i,offset:r},t)}).catch(s);case 9:return c=n.sent,n.abrupt("return",c||{});case 11:case"end":return n.stop()}}),n)})))()},setNavigationBarColor:function(t,e){i.setNavigationBarColor({frontColor:t,backgroundColor:e})},swiperImgChange:function(t){this.setData({currentImgOrder:t.detail.current+1})},closePanel:function(){this.setData({showPanel:!1,showPanelCloseIcon:!0,panelTemplate:""})},initskuConfig:function(t){var e={};return t===O.SALE_STATUS.AVAILABLE_FOR_SALE||t===O.SALE_STATUS.SOLD_OUT||t===O.SALE_STATUS.OFF_SHELF?(e.top=O.STATUS_GAP,e.isEmphasizeStatus=!1,e.priceBg=t===O.SALE_STATUS.AVAILABLE_FOR_SALE?O.imgMap.normalPriceBg:O.imgMap.disablePriceBg):t!==O.SALE_STATUS.TO_BE_SOLD&&t!==O.SALE_STATUS.ALMOST_SOLD_OUT&&t!==O.SALE_STATUS.READY_OFF_SHELF||(e.top=O.ACTIVE_STATUS_GAP,e.isEmphasizeStatus=!0,e.priceBg=O.imgMap.activePriceBg),e},showRuleDetail:function(){i.$log.sendNew({module:"refundinstruction"},"click"),this.setData({showPanel:!0,panelTemplate:"instructions"})},handleChangeMeal:function(t){var e=null==t?void 0:t.detail;null!=e&&e.id&&(i.$log.sendNew({module:"sku",skuId:e.id},"click"),this.setData({currentSku:this.data.allSkus[e.mealIndex],skuIndex:e.mealIndex},(function(){i.$log.sendNew({module:"sku",skuId:e.id},"show")})))},getTapTops:function(){var t=this;N.exec((function(e){var n,a,o,i,r,s,c,u,d=t.data.navHeight,l=t.data,h=l.showFixedTab,p=l.activeTabIndex,f=[(null==e||null===(n=e[0])||void 0===n||null===(a=n[0])||void 0===a?void 0:a.bottom)+B,null==e||null===(o=e[0])||void 0===o||null===(i=o[1])||void 0===i?void 0:i.top,null==e||null===(r=e[0])||void 0===r||null===(s=r[2])||void 0===s?void 0:s.top,null==e||null===(c=e[0])||void 0===c||null===(u=c[3])||void 0===u?void 0:u.top];(f[0]<d&&!h||f[0]>=d&&h)&&(h=!h),(null==f?void 0:f[p+1])<=d+j?p++:(null==f?void 0:f[p])>d+j&&p--,t.setData({showFixedTab:h,activeTabIndex:p})}))},scollToModule:function(t){var e,n,a=this,o=null==t||null===(e=t.currentTarget)||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.index;(o||0===o)&&this.setData({showActiveTab:!1},(function(){N.exec(function(){var t=(0,D.default)(_.default.mark((function t(e){var n,r,s,c,u,d,l,h,p,f;return _.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=[0,null==e||null===(n=e[0])||void 0===n||null===(r=n[1])||void 0===r?void 0:r.top,null==e||null===(s=e[0])||void 0===s||null===(c=s[2])||void 0===c?void 0:c.top,null==e||null===(u=e[0])||void 0===u||null===(d=u[3])||void 0===d?void 0:d.top],h=a.data,p=h.scrollTop,f=h.navHeight,i.pageScrollTo({scrollTop:0===o?0:l[o]+1+p-j-f,duration:300}),t.next=5,(0,k.delay)(300);case 5:a.setData({showActiveTab:!0});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},handlePhone:function(){i.$log.sendNew({module:"customerservice"},"click");var t=this.data.servicePhone;t.length<1||(1!==t.length?this.setData({showPanel:!0,showPanelCloseIcon:!1,panelTemplate:"phone"}):this.handleCall(t[0]))},handleCall:function(t){this.closePanel(),i.makePhoneCall({phoneNumber:t})},handlePhoneNumber:function(t){var e=t.currentTarget.dataset.phone;this.handleCall(e)},jumpQualification:function(){var t,e,n,a=[{title:"服务商资质",imgs:(null===(t=this.data.platformCredential)||void 0===t?void 0:t.imgs)||[]},{title:"商户资质",imgs:(null===(e=this.data.currentSku)||void 0===e||null===(n=e.shop)||void 0===n?void 0:n.credentialImg)||[]}],o="/homes/transaction-qualifications/index?qualificationList="+encodeURIComponent(JSON.stringify(a));E.default.to(o,"local")},jumpSubmitOrder:function(t){var e;if("login:ok"===(null==t||null===(e=t.detail)||void 0===e?void 0:e.errMsg))if(!(0,A.isLogin)()||this.data.userLogin){var n=this.data,a=n.swiperImgList,o=n.spuTitle,s=n.currentSku,c=n.appKey,u=n.spuId;if(s.enableBuy){i.$log.sendNew({module:"purchase",spuId:u,skuId:s.id},"click");var d={goodImg:(0,L.gzipImg)(a[0]),goodName:o,useRules:s.serviceLabel,setMealName:this.data.allSkus.length>1?s.title:"",payDetail:[{name:"商品原价",price:s.originPrice},{name:"平台专享价",price:s.salePrice}],priceTotal:s.salePrice,appKey:c,skuId:s.id,totalMoney:s.salePriceByCent,spuId:u,crd:this.attr.crd,cityCode:this.attr.cityCode};r().globalData.transactionOrderInfo=d,r().globalData.transactionPayParams=Object.assign({},this.data.skusPayParams[this.data.skuIndex],{totalAmount:s.salePriceByCent+""}),E.default.to("/homes/transaction-submit-order/index","local")}}else this.initData(this.options)},initCountdown:function(t){var e=this,n=[];t.forEach((function(t){var e=+t.coutdownSecond||0;n.push(e)})),this.setData({skusCountdown:n},(function(){e.startInterval()}))},startInterval:function(){var t=this;this.data.skusCountdown.some((function(t){return t>0}))&&(this.timer&&clearInterval(this.timer),this.calcTime(),this.timer=o((function(){t.calcTime()}),1e3))},calcTime:function(){var t=this;if(!this.data.skusCountdown.some((function(t){return t>=0})))return clearInterval(this.timer),void this.setData({countdownArr:[]});var e=[],n=[];this.data.skusCountdown.forEach((function(a,o){var i=(0,L.formatSecond)(a),r=a<=0?[]:[i.hours,i.minutes,i.seconds];e.push(r);var s=a<=0?-1:a-1;n.push(s);var c=t.data.allSkus;if(0===a&&c[o].status===O.SALE_STATUS.READY_OFF_SHELF){c[o].status=O.SALE_STATUS.OFF_SHELF,c[o].enableBuy=!1,c[o].buyStatusText="已下架";var u=t.initskuConfig(O.SALE_STATUS.OFF_SHELF);Object.assign(c[o],u),t.setData({allSkus:c,currentSku:c[t.data.skuIndex]})}})),this.setData({skusCountdown:n,countdownArr:e})},fetchSubs:function(t,e){return this.$http.get(this.$api.DISCOUNT_SUBS,{data:{act:e,subscribe_id:t}})},formSubmit:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=t.detail.status,o=t.currentTarget.dataset.subscribeId,!(0==+a)){n.next=9;break}return n.next=7,e.fetchSubs(o,1);case 7:e.initData(e.options),(0,L.textToast)("已成功设置抢购提醒");case 9:n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),n,null,[[0,11]])})))()},cancelSubscribe:function(t){var e=this;return(0,D.default)(_.default.mark((function n(){var a,o,i;return _.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=t.currentTarget.dataset,o=a.subscribeId,i=a.templateId,n.next=4,(0,L.subscribeService)({templateId:i,subscribeId:o});case 4:return n.next=6,e.fetchSubs(o,0);case 6:e.initData(e.options),(0,L.textToast)("已取消抢购提醒"),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}))})),window.define("496",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MODULE_GAP=n.ACTIVE_STATUS_GAP=n.STATUS_GAP=n.SALE_STATUS=n.imgMap=void 0;n.imgMap={hightArrow:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-highlight-arrow_1669724316000.png",commonArrow:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-arrow_1669724305000.png",normalPriceBg:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-price-bg_1669725539000.png",disablePriceBg:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-disable-price-bg_1669726948000.png",activePriceBg:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-active-price-bg_1669726937000.png",toBeSoldTip:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-ready-for-sale-tips_1669778162000.png",almostSoldOutTip:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-ready-sold-out-tips_1669778171000.png",soldOutSeal:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-sold-out-seal_1669783806000.png",offShelfSeal:"https://psstatic.cdn.bcebos.com/aladdin/service_center/hsh-thjx-sxy-off-shelf-seal_1669783794000.png",authenticationIcon:"https://psstatic.cdn.bcebos.com/aladdin/service_center/authentication-icon_1669868956000.png",authRightArrow:"https://psstatic.cdn.bcebos.com/aladdin/service_center/authentication-arrow-icon_1669869780000.png",bgBottomIcon:"https://psstatic.cdn.bcebos.com/aladdin/service_center/bg-bottom-icon_1671188925000.png",customerServiceIcon:"https://psstatic.cdn.bcebos.com/aladdin/service_center/customer-service-icon_1669871473000.png",buyNowIcon:"https://psstatic.cdn.bcebos.com/aladdin/service_center/buy-now-icon_1669882644000.png",saleHotIcon:"https://psstatic.cdn.bcebos.com/aladdin/service_center/sale-hot-icon_1669873910000.png"};n.SALE_STATUS={AVAILABLE_FOR_SALE:10,TO_BE_SOLD:20,ALMOST_SOLD_OUT:30,READY_OFF_SHELF:40,SOLD_OUT:50,OFF_SHELF:60};n.STATUS_GAP=12.319;n.ACTIVE_STATUS_GAP=15.7;n.MODULE_GAP=1.932})),window.define("499",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(15)),x=I(t(27)),_=I(t(29)),D=I(t(141)),k=t(26),P=t(31),E=t(144),L=t(9);Page((0,D.default)({data:{enablePageBackModal:!0,customStyle:{panel:{background:"#fff"},checkedBase:{background:"#EB3333"}},promotionTag:"promotionTag",orderInfo:{},LOADING_IMG:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2969029221,3908970645&fm=179&app=35&f=PNG?w=240&h=240&s=E4F0667A08D766D04A34D60B020040C5",loading:!1,totalAmount:"",appKey:"",dealId:"",buttonType:"getPhoneNumber"},attr:{hasInit:!1,prefetchPromise:null},onPrefetch:function(){this.attr.prefetchPromise=this.fetchAuthList()},onInit:function(){this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},initData:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.attr.prefetchPromise)?t.attr.prefetchPromise=null:n=t.fetchAuthList(),t.getOrderInfo(),t.getPayParams(),a={},e.prev=5,e.next=8,n;case 8:a=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:o=Object.values(a).some((function(t){return 0==+t})),i=(0,L.isLogin)(),t.setData({buttonType:!i||o?"getPhoneNumber":"login"});case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))()},fetchAuthList:function(){return this.$http.get(this.$api.THIRD_AUTH_LIST,{data:{path:this.route}})},getOrderInfo:function(){var t=i().globalData.transactionOrderInfo;this.setData({orderInfo:t},(function(){o.$log.sendNew({module:"sumbitorder",spuId:t.spuId,skuId:t.skuId},"display")}))},getPayParams:function(){var t=this;return(0,_.default)(x.default.mark((function e(){var n,a,o,r,s,c,u,d,l,h,p;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=i().globalData.transactionPayParams)){e.next=5;break}t.setData((0,C.default)({},n)),e.next=19;break;case 5:return a=i().globalData.transactionOrderInfo,o=a.appKey,r=a.skuId,s=a.totalMoney,e.next=9,(0,k.getRequestIdentifier)({appKey:o,skuId:r,totalMoney:s});case 9:return c=e.sent,u=c.enc_req_tag,d=c.req_tag,l=c.offset,h=function(t){return(0,k.textToast)("获取交易信息失败")},e.next=16,t.$http.get(t.$api.COUPON_SHOP_PAY_INFO,{data:{appKey:o,skuId:r,totalMoney:s,encReqTag:u,reqTag:d,offset:l}}).catch(h);case 16:p=e.sent,i().globalData.transactionPayParams=Object.assign({},p,{totalAmount:s+""}),t.setData((0,C.default)({totalAmount:s+""},p));case 19:case"end":return e.stop()}}),e)})))()},getPaymentInfo:function(t){this.setData({inlinePaySign:t.detail.inlinePaySign})},fetchOrderPush:function(t){var e=this;return(0,_.default)(x.default.mark((function n(){var a;return x.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get(e.$api.ORDER_PUSH,{data:{orderId:t}});case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},getError:function(){(0,k.textToast)("网络异常,请稍后重试")},handleSubmitError:function(t){1001==+t.code?(0,k.textToast)("网络慢，请重试"):(0,k.textToast)(t.msg)},handleGetPhoneNumber:function(t){var e;"getPhoneNumber:ok"===(null==t||null===(e=t.detail)||void 0===e?void 0:e.errMsg)&&(this.setData({buttonType:"login"}),this.submitOrder())},handleLogin:function(t){var e;"login:ok"===(null==t||null===(e=t.detail)||void 0===e?void 0:e.errMsg)&&this.submitOrder()},submitOrder:(0,k.throttle)(function(){var t=(0,_.default)(x.default.mark((function t(){var e,n,a,r,s,c,u,d,l,h,p,f,g,m,v,w,b=this;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i().globalData.transactionOrderInfo||{},n=e.appKey,a=e.skuId,r=e.spuId,s=e.totalMoney,c=e.crd,u=e.cityCode,o.$log.sendNew({module:"sumbitorder",spuId:r,skuId:a},"click"),d=1,t.next=5,(0,k.getRequestIdentifier)({appKey:n,count:d,skuId:a,totalMoney:s});case 5:return l=t.sent,h=l.enc_req_tag,p=l.req_tag,f=l.offset,t.next=11,Promise.all([(0,E.getZidReTry)(),(0,E.getJtData)(P.FENGKONG_PARAMS.TRANSACTION)]).catch((function(){return(0,k.textToast)("请求失败，请稍后再试哦~")}));case 11:if(g=t.sent){t.next=14;break}return t.abrupt("return");case 14:return m={spuId:r,skuId:a,crd:c,cityCode:u,count:d,totalMoney:s,appKey:n,encReqTag:h,reqTag:p,offset:f,zid:g[0],jt:g[1],js_env:"swan"},this.setData({loading:!0}),t.next=18,this.$http.post(this.$api.ORDER_SUBMIT,{data:m}).catch(this.handleSubmitError);case 18:v=t.sent,this.setData({loading:!1}),v&&v.tpOrderId&&(w=(0,C.default)((0,C.default)({},v),{},{inlinePaySign:this.data.inlinePaySign}),(0,k.requestPayment)(w).catch((function(t){b.fetchOrderPush(w.tpOrderId)})).finally((function(){o.redirectTo({url:"/homes/order-details/index?orderId=".concat(w.tpOrderId,"&appKey=").concat(n)})})));case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),1e3)}))})),window.define("502",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10)(t(141)),C=t(26);Page((0,I.default)({data:{qualificationList:[]},onInit:function(t){var e=[];try{e=JSON.parse(t.qualificationList)}catch(t){}e.forEach((function(t){t.imgs=(0,C.gzipImgList)(t.imgs)})),this.setData({qualificationList:e})}}))})),window.define("505",(function(t,e,n,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S,I,C){"use strict";var x=t(10),_=x(t(15)),D=x(t(27)),k=x(t(29)),P=t(26),E=x(t(141)),L=x(t(14)),A=t(506);Page((0,E.default)({data:{rendered:!1,showErrorPage:!1,title:"",IOrderStatus:A.IOrderStatus,isShowSkeleton:!0,isShowPayButton:!0,isHide:!1,preStatus:0},attr:{initBlock:!1},onShow:function(){this.setData({isHide:!1}),this.attr.initBlock?this.attr.initBlock=!1:this.init()},onHidden:function(){this.setData({isHide:!0})},onUnload:function(){this.setData({isHide:!0})},onInit:function(t){this.attr.initBlock=!0,this.options=t,this.init()},init:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.handlePolling(),r.$log.sendNew({module:"orderdetail",skuId:null===(n=t.data.skuInfo)||void 0===n?void 0:n.id,spuId:null===(a=t.data.snapshot)||void 0===a?void 0:a.spuId},"display");case 4:case"end":return e.stop()}}),e)})))()},onPageScroll:function(t){var e=t.scrollTop;this.setData({title:e>20?"订单详情":""})},initData:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,a,o,i,r,s,c,u,d;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.options.orderId,e.next=4,t.fetchOrderInfo({orderId:n});case 4:a=e.sent,o=a.orderInfo,i=a.skuInfo,r=a.orderStatus,s=a.refundInfo,c=void 0===s?"":s,u=a.ticketInfo,d=void 0===u?"":u,t.setData((0,_.default)((0,_.default)({},a),{},{orderIntro:t.handleOrderIntro(a),meals:t.handleMeals(i),shopParams:t.handleShopParams(i),orderInfo:o,refundInfo:c,ticketInfo:d,showErrorPage:!1,isShowSkeleton:!1,isShowPayButton:!0,preStatus:r}),(function(){t.handleCountDown()})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("获取订单详情失败：",e.t0),t.setData({showErrorPage:!0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleShopParams:function(t){return{skuId:t.id,isNeedLocation:!0}},handleOrderIntro:function(t){var e=t.skuInfo,n=e.images,a=e.title,o=e.serviceLabel,i=e.salePrice,r=t.snapshot;return{goodImg:n&&n[0],goodName:r.spuTitle,useRules:o,setMealName:r.skus.length>1?a:"",priceTotal:(0,P.formatPrice)(i)}},handleMeals:function(t){return[{id:t.id,mealIndex:0,mealName:t.title,mealPrice:(0,P.formatPrice)(t.salePrice),htmlText:t.details_html,htmlStruct:t.details_struct}]},handlePolling:function(){var t=this;return(0,k.default)(D.default.mark((function e(){var n,o;return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.isHide){e.next=2;break}return e.abrupt("return");case 2:if(t.data.orderStatus===t.data.IOrderStatus.COrderUnpaid||t.data.orderStatus===t.data.IOrderStatus.COrderShipping){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.fetchOrderInfo({orderId:t.options.orderId},!0);case 6:if(n=e.sent,o=null==n?void 0:n.orderStatus){e.next=11;break}return a((function(){t.handlePolling()}),1e3),e.abrupt("return");case 11:if(t.data.preStatus===o){e.next=16;break}return e.next=14,t.initData();case 14:return t.handlePolling(),e.abrupt("return");case 16:o!==t.data.IOrderStatus.COrderUnpaid&&o!==t.data.IOrderStatus.COrderShipping||a((function(){t.handlePolling()}),1e3);case 17:case"end":return e.stop()}}),e)})))()},handleCancel:(0,P.throttle)(function(){var t=(0,k.default)(D.default.mark((function t(){var e,n;return D.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sendClickLog("cancelorder"),e=this.options.orderId,n=function(t){return(0,P.textToast)(t.msg)},t.next=5,this.$http.get(this.$api.ORDER_CANCEL,{data:{orderId:e}}).catch(n);case 5:t.sent&&((0,P.textToast)("取消成功"),this.initData());case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),1e3),handleUfo:function(){var t,e;this.sendClickLog("contactservice");var n=null===(t=this.data.snapshot)||void 0===t||null===(e=t.bottomBar)||void 0===e?void 0:e.servicePhone[0];r.makePhoneCall({phoneNumber:n})},handleCountDown:function(){var t=this,e=function(){var e=t.data,n=e.expireTime;if(e.orderStatus===A.IOrderStatus.COrderUnpaid)if(0!==n)if(n<0)t.setData({statusText:"已取消",description:A.DESCRIPTION,isShowPayButton:!1});else{var a=n-1;t.setData({expireTime:a,expireTimeText:t.getCountTimeText(a)})}else t.initData()};e(),clearInterval(this.skuTimer),this.skuTimer=o((function(){e()}),1e3)},handlePay:function(){var t=this;return(0,k.default)(D.default.mark((function e(){return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sendClickLog("continuepay"),e.next=3,(0,P.requestPayment)(t.data.payInfo);case 3:t.initData();case 4:case"end":return e.stop()}}),e)})))()},sendClickLog:function(t){r.$log.sendNew({module:t,skuId:this.data.skuInfo.id,spuId:this.data.snapshot.spuId},"click",{page:getCurrentPages()[0].uri})},onErrorPageReload:function(){this.initData()},getCountTimeText:function(t){var e=(0,P.formatSecond)(+t),n=e.minutes,a=e.seconds;return"".concat(n,":").concat(a)},fetchOrderInfo:function(t,e){var n=this;return(0,k.default)(D.default.mark((function a(){var o,i;return D.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=function(t){e||((0,P.textToast)(t.msg),n.$showErrorPage(t.errType||3))},a.next=3,n.$http.get(n.$api.ORDER_STATUS,{data:t}).catch(o);case 3:return i=a.sent,a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},onPullDownRefresh:function(){var t=this;return(0,k.default)(D.default.mark((function e(){return D.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:r.stopPullDownRefresh();case 3:case"end":return e.stop()}}),e)})))()},handleAgain:function(){this.sendClickLog("buymore");var t=this.data,e=t.snapshot,n=e.appKey,a=e.spuId,o=t.skuInfo.shop.cityCode,i=void 0===o?"":o;L.default.to("/homes/transaction-goods-detail/index?spuId=".concat(a,"&customAppKey=").concat(n,"&cityCode=").concat(i),"local")},handleRefund:function(){this.sendClickLog("refund"),s().globalData.transactionRefundConf=(0,_.default)((0,_.default)({},this.data.refundConf),{},{skuId:this.data.skuInfo.id,spuId:this.data.snapshot.spuId,orderId:this.options.orderId}),L.default.to("/homes/apply-refund/index","local")}}))})),window.define("506",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DESCRIPTION=n.IOrderStatus=void 0;n.IOrderStatus={COrderUnpaid:10,COrderShipping:20,COrderUserCancel:30,COrderAutoCancel:40,COrderUnused:50,COrderUsed:60,COrderExpired:70,COrderRefunding:80,COrderRefunded:90};n.DESCRIPTION="支付超时，交易将自动取消"})),window.define("509",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(141)),D=t(26),k=I(t(14));Page((0,_.default)({data:{refundConf:{},reasonCode:"",desc:""},onInit:function(){var t=i().globalData.transactionRefundConf;this.setData({refundConf:Object.assign(t,{refundMoney:(0,D.formatPrice)(t.refundMoney)})},(function(){o.$log.sendNew({module:"applyrefund",spuId:t.spuId,skuId:t.skuId},"display")}))},handleClick:function(t){var e=t.currentTarget.dataset.title;this.setData({reasonCode:e})},handleInput:function(t){t.detail.value.length>=100&&o.showToast({title:"已达上限",icon:"none"})},handleApply:function(){var t=this;this.data.reasonCode?(o.$log.sendNew({module:"ensurerefundbar",spuId:this.data.refundConf.spuId,skuId:this.data.refundConf.skuId,reasonCode:this.data.reasonCode},"click"),(0,D.showModal)({title:"申请退款",content:"退款申请一旦提交，将不能撤销，是否确认继续退款",success:function(e){e.confirm&&t.handleRefund()}})):o.showToast({title:"请选择退款原因",icon:"none"})},handleRefund:(0,D.throttle)(function(){var t=(0,x.default)(C.default.mark((function t(){var e,n=this;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t){(0,D.textToast)(t.msg),n.$showErrorPage(t.errType||3)},t.next=3,this.$http.post(this.$api.ORDER_REFUND,{data:{orderId:this.data.refundConf.orderId,reasonCode:this.data.reasonCode,desc:this.data.desc}}).catch(e);case 3:k.default.back();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),1e3)}))})),window.define("512",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(141)),D=t(26),k=I(t(14)),P=t(31),E=t(144),L=t(9),A=t(513),O="lucky-new-year23";Page((0,_.default)({data:{tasksData:[],topBg:A.IMG_MAP.TOP_BG,imgMap:A.IMG_MAP,rendered:!1,showErrorPage:!1,carouselList:[],ruleInfo:{},record:{},remainnumArr:[{taskCode:"trade",remainnum:0},{taskCode:"invite_user",remainnum:0},{taskCode:"video",remainnum:0},{taskCode:"search",remainnum:0}],lotteryStatus:"",lotteryExtraTip:"",lotteryTaskCode:"",lotteryPrice:"",lotteryName:"",lotteryTips:"",userLogin:(0,L.isLogin)(),inLottery:!1,inActive:!1,inActiveTask:"",pageHide:!1,LOTTERY_STATUS:A.LOTTERY_STATUS},attr:{hasInit:!1,hasShow:!1,prefetchPromise:null,brand:"",model:""},onPrefetch:function(t){var e=t.query;this.attr.prefetchPromise=this.fetchData(e)},onInit:function(t){this.options=t;var e=i().globalData.systemInfo||{},n=e.brand,a=e.model;this.attr.brand=n,this.attr.model=a,this.attr.hasInit||(this.attr.hasInit=!0,this.initData(t))},onHide:function(){this.setData({pageHide:!0})},onShow:function(){this.attr.hasShow&&(this.setData({pageHide:!1}),this.initData({},!0)),this.attr.hasShow=!0},onErrorPageReload:function(){this.initData(this.options)},initData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,x.default)(C.default.mark((function a(){var i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S;return C.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=e.attr.prefetchPromise)?e.attr.prefetchPromise=null:r=e.fetchData(t),s={},a.prev=3,a.next=6,r;case 6:s=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(3),e.$showErrorPage(a.t0.errType),a.abrupt("return");case 13:u=(c=s).headImg,d=c.taskList,l=c.carousel,h=c.ruleInfo,p=c.record,f=c.isNew,g=c.inviteResult,m=c.toast,v=e.handleTaskList(d),w=v.map((function(t){return{taskCode:t.taskCode,remainnum:t.remainnum}})),b=n?e.data.carouselList:l.slice(0,3),!n&&(null===(i=b)||void 0===i?void 0:i.length)>0&&(b=b.map((function(t){return e.formatText(t.text,t.highlight,!1,"carousel-highlight")}))),y="",T="",S="",f&&(y=A.LOTTERY_STATUS.PENDING,T=A.TASK_CODE.NEW_USER,S=(null==g?void 0:g.msg)||""),e.setData({topBg:u,tasksData:v,carouselList:b,ruleInfo:h,record:p,remainnumArr:w,rendered:!0,lotteryStatus:y,lotteryTaskCode:T,lotteryExtraTip:S,showErrorPage:!1,userLogin:(0,L.isLogin)()},(0,x.default)(C.default.mark((function t(){var a,i;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.$log.sendNew({activity_id:O},"display"),f&&o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.REDPACKET_POP,task_id:A.TASK_CODE.NEW_USER},"show"),v.forEach((function(t){o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.TASK,task_id:t.taskCode},"show")})),m&&(0,D.textToast)(m),f||null==g||!g.msg){t.next=9;break}if(!m){t.next=8;break}return t.next=8,(0,D.sleep)(2e3);case 8:(0,D.textToast)(g.msg);case 9:n||(i=l.slice(3),(null===(a=i)||void 0===a?void 0:a.length)>0&&(i=i.map((function(t){return e.formatText(t.text,t.highlight,!1,"carousel-highlight")}))),e.setData({carouselList:b.concat(i)}));case 10:case"end":return t.stop()}}),t)}))));case 23:case"end":return a.stop()}}),a,null,[[3,9]])})))()},fetchData:function(t){var e=this;return(0,x.default)(C.default.mark((function n(){var a,o,i,r,s;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=(null==t?void 0:t.t)||"",n.next=3,e.getRiskControlParams();case 3:if(o=n.sent){n.next=6;break}return n.abrupt("return",Promise.reject({errType:3}));case 6:return i=e.attr,r=i.brand,s=i.model,n.abrupt("return",e.$http.get(e.$api.GET_ACTIVITY,{data:{activity_id:"luckyYearIndex",zid:o[0],jt:o[1],js_env:"swan",brand:r,model:s,shareToken:a}}));case 8:case"end":return n.stop()}}),n)})))()},handleTaskList:function(t){var e=this;return!t||(null==t?void 0:t.length)<1?(this.$showErrorPage(2),[]):t.map((function(t){var n=e.formatText(t.title,t.titleHighlight),a=e.formatText(t.subTitle,t.subHighlight,!1),o=t.status===A.STATUS.TO_COMPLETE?A.IMG_MAP.TASK_BTN_ENABLE:A.IMG_MAP.TASK_BTN_DISABLE,i=t.status===A.STATUS.TO_COMPLETE;return Object.assign({},t,{titleNodes:n,subTitleNodes:a,btnImg:o,btnEnable:i,remainnum:+t.remainnum})}))},formatText:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"highlight";if(!t||!Array.isArray(e))return"";var o=t,i=n?"":"&nbsp;";return e.forEach((function(t){o=o.replace(/\$\{highlight\}/,"".concat(i,'<span class="').concat(a,'">').concat(t,"</span>").concat(i))})),o},taskJump:function(t){var e,n,a;if("login:ok"===(null==t||null===(e=t.detail)||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.errMsg))if(!(0,L.isLogin)()||this.data.userLogin){var i=null==t||null===(a=t.currentTarget)||void 0===a?void 0:a.dataset,r=i.status,s=i.taskCode,c=i.jumpUrl,u=i.jumpType;r===A.STATUS.TO_COMPLETE?(o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.TASK_COMPLETE,task_id:s},"click",{page:getCurrentPages()[0].uri}),s!==A.TASK_CODE.SEARCH&&s!==A.TASK_CODE.VIDEO?c&&u&&(s===A.TASK_CODE.TRADE?this.finishTradeTask(c,u):k.default.to(c,u)):this.activeTask(s)):A.STATUS_TOAST[r]&&(0,D.textToast)(A.STATUS_TOAST[r])}else this.initData(this.options)},activeTask:function(t){var e=this;return(0,x.default)(C.default.mark((function n(){var a,o,i,r,s,c,u,d,l,h,p;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.data.inActive){n.next=3;break}return(0,D.textToast)("任务领取中，请稍后～"),n.abrupt("return");case 3:if(e.setData({inActive:!0,inActiveTask:t}),a="",t===A.TASK_CODE.SEARCH?a="luckyYearSearchTask":t===A.TASK_CODE.VIDEO&&(a="luckyYearVideoTask"),a){n.next=9;break}return e.enableBtn(),n.abrupt("return");case 9:return n.next=11,e.getRiskControlParams();case 11:if(o=n.sent){n.next=16;break}return(0,D.textToast)("请求失败，请稍后再试哦~"),e.enableBtn(),n.abrupt("return");case 16:return i=e.attr,r=i.brand,s=i.model,c=e.cryptTimeStamp(),u=function(t){(0,D.textToast)(t.msg),e.enableBtn()},n.next=21,e.$http.get(e.$api.GET_ACTIVITY,{data:{activity_id:a,zid:o[0],jt:o[1],js_env:"swan",brand:r,model:s,t:c}}).catch(u);case 21:d=n.sent,e.enableBtn(),l=d.taskStatus,h=d.jumpUrl,p=d.jumpType,0==+l&&h&&p&&k.default.to(h,p);case 25:case"end":return n.stop()}}),n)})))()},finishTradeTask:function(t,e){var n=this;return(0,x.default)(C.default.mark((function a(){var o,i,r,s,c,u,d;return C.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.data.inActive){a.next=3;break}return(0,D.textToast)("任务领取中，请稍后～"),a.abrupt("return");case 3:return n.setData({inActive:!0,inActiveTask:A.TASK_CODE.TRADE}),a.next=6,n.getRiskControlParams();case 6:if(o=a.sent){a.next=11;break}return n.enableBtn(),(0,D.textToast)("请求失败，请稍后再试哦~"),a.abrupt("return");case 11:return i=n.attr,r=i.brand,s=i.model,c=n.cryptTimeStamp(),u=function(t){n.enableBtn(),(0,D.textToast)(t.msg)},a.next=16,n.$http.get(n.$api.GET_ACTIVITY,{data:{activity_id:"luckyYearTradeTask",zid:o[0],jt:o[1],js_env:"swan",brand:r,model:s,t:c}}).catch(u);case 16:d=a.sent,n.enableBtn(),0==+(null==d?void 0:d.taskStatus)&&k.default.to(t,e);case 19:case"end":return a.stop()}}),a)})))()},handleCommonJump:function(t){var e,n=(null==t||null===(e=t.currentTarget)||void 0===e?void 0:e.dataset).module;if(n){"record"===n&&o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.WINNING_RECORD},"click",{page:getCurrentPages()[0].uri});var a=this.data[n],i=a.jumpUrl,r=a.jumpType;i&&r&&k.default.to(i,r)}},handleLottery:function(t){var e,n,a;if("login:ok"===(null==t||null===(e=t.detail)||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.errMsg))if(!(0,L.isLogin)()||this.data.userLogin){var i=null==t||null===(a=t.currentTarget)||void 0===a?void 0:a.dataset,r=i.remainnum,s=i.taskCode,c=i.status;if((0===r||r)&&s)if(o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.TASK_LOTTERY,task_id:s},"click"),r<1){if(c===A.STATUS.TO_COMPLETE)return void(0,D.textToast)("完成任务即可获得抽红包机会～");var u=this.data.remainnumArr.some((function(t){return t.remainnum>0})),d=this.data.tasksData.some((function(t){return t.status===A.STATUS.TO_COMPLETE})),l=u||d?"该任务抽奖机会已用完，去看看其他任务吧":"今日次数已用完，明天再来吧";(0,D.textToast)(l)}else this.setData({lotteryStatus:A.LOTTERY_STATUS.PENDING,lotteryTaskCode:s},(function(){o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.REDPACKET_POP,task_id:s},"show")}))}else this.initData(this.options)},goLottery:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,i,r,s,c,u,d,l,h,p,f,g,m;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.inLottery){e.next=3;break}return(0,D.textToast)("奖品抽取中，请稍后～"),e.abrupt("return");case 3:if(t.setData({inLottery:!0}),n=t.data.lotteryTaskCode){e.next=8;break}return t.lotteryFail(),e.abrupt("return");case 8:return o.$log.sendNew({activity_id:O,module:A.LOG_MODULE.REDPACKET_POP,task_id:n},"click"),e.next=11,t.getRiskControlParams();case 11:return(a=e.sent)||t.lotteryFail(),i=t.attr,r=i.brand,s=i.model,c=function(e){(0,D.textToast)("抽奖太火爆了，可点击中奖记录查看结果"),t.setData({lotteryStatus:"",lotteryTaskCode:"",lotteryExtraTip:"",inLottery:!1})},e.next=17,t.$http.get(t.$api.GET_ACTIVITY,{data:{activity_id:"luckyYearDraw",taskCode:n,zid:a[0],jt:a[1],js_env:"swan",brand:r,model:s}}).catch(c);case 17:if(u=e.sent,d=u.price,l=u.taskCode,h=u.remainnum,p=u.name,f=u.tips,g=u.isWin,m={taskCode:l,remainnum:h},t.updateRemainNum(m),g){e.next=24;break}return t.setData({lotteryStatus:A.LOTTERY_STATUS.NONE,lotteryTaskCode:"",inLottery:!1}),e.abrupt("return");case 24:t.setData({lotteryStatus:A.LOTTERY_STATUS.WINING,lotteryPrice:d,lotteryName:p,lotteryTips:f,inLottery:!1});case 25:case"end":return e.stop()}}),e)})))()},lotteryFail:function(){(0,D.textToast)("请求失败，请稍后再试哦~"),this.closePopup()},updateRemainNum:function(t){var e=this.data.remainnumArr;e.forEach((function(n,a){n.taskCode===t.taskCode&&(e[a].remainnum=t.remainnum||0)})),this.setData({remainnumArr:e})},closePopup:function(){this.setData({lotteryStatus:"",lotteryTaskCode:"",lotteryExtraTip:"",inLottery:!1})},cryptTimeStamp:function(){var t={q:"LuckyYear2023",t:(new Date).getTime()+""},e=JSON.stringify(t);return(0,D.aesCrypt)(e,"en",!1,{str:"",keyKey:"67db776cd95f48c6339f8d97c3bbd9fb",ivKey:"d95f48c6339f8d97"})},getRiskControlParams:function(){return Promise.all([(0,E.getZidReTry)(),(0,E.getJtData)(P.FENGKONG_PARAMS.LUCKYYEAR)]).catch((function(){return null}))},enableBtn:function(){this.setData({inActive:!1,inActiveTask:""})},handleCatchTap:function(){},handleTouchmove:function(){}}))})),window.define("513",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10);Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_MODULE=n.LOTTERY_STATUS=n.TASK_CODE=n.STATUS_TOAST=n.STATUS=n.IMG_MAP=void 0;var C,x=I(t(16));n.IMG_MAP={TOP_BG:"https://gips0.baidu.com/it/u=1077868369,1416278458&fm=3028&app=3028&f=JPEG&fmt=auto&q=90&size=f1242_1242",RULE:"https://gips2.baidu.com/it/u=1605657517,2002888234&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f121_121",BROADCAST_BG:"https://gips2.baidu.com/it/u=1883739324,3120643978&fm=3028&app=3028&f=PNG&fmt=auto&q=90&size=f714_62",TASK_BG:"https://gips1.baidu.com/it/u=3506513502,1439438300&fm=3028&app=3028&f=PNG&fmt=auto&q=90&size=f1194_1520",TASK_LABEL:"https://gips3.baidu.com/it/u=1655558903,1297315385&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f212_65",TASK_BTN_ENABLE:"https://gips2.baidu.com/it/u=165937292,46375647&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f320_161",TASK_BTN_DISABLE:"https://gips0.baidu.com/it/u=2915795605,689738652&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f320_161",REDPACKET_CLOSE:"https://gips0.baidu.com/it/u=686660835,3730399870&fm=3028&app=3028&f=PNG&fmt=auto&q=85&size=f844_930",REDPACKET_OPEN:"https://gips3.baidu.com/it/u=2524185667,728690555&fm=3028&app=3028&f=PNG&fmt=auto&q=85&size=f920_1158",REDPACKET_NONE:"https://gips2.baidu.com/it/u=4200790094,2106518183&fm=3028&app=3028&f=PNG&fmt=auto&q=85&size=f920_1018",REDPACKET_BTN:"https://gips3.baidu.com/it/u=4155895897,1030687439&fm=3028&app=3028&f=PNG&fmt=auto&q=85&size=f717_224",CLOSE_ICON:"https://gips0.baidu.com/it/u=3042678637,1860142908&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f116_116",LOADING_IMG:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2969029221,3908970645&fm=179&app=35&f=PNG?w=240&h=240&s=E4F0667A08D766D04A34D60B020040C5"};var _={TO_COMPLETE:"10",COMPLETED:"20",FINISHED:"30",NOT_START:"40"};n.STATUS=_;var D=(C={},(0,x.default)(C,_.FINISHED,"活动已结束，可点击中奖记录查看奖品"),(0,x.default)(C,_.NOT_START,"活动暂未开始，敬请期待"),C);n.STATUS_TOAST=D;n.TASK_CODE={TRADE:"trade",SEARCH:"search",VIDEO:"video",INVITE_USER:"invite_user",NEW_USER:"new_user"};n.LOTTERY_STATUS={PENDING:"10",WINING:"20",NONE:"30"};n.LOG_MODULE={REDPACKET_POP:"redpacket_pop",WINNING_RECORD:"winning_record",TASK:"task",TASK_COMPLETE:"task_complete",TASK_LOTTERY:"task_lottery"}})),window.define("516",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(491)),D=I(t(141)),k=t(26),P=t(517);Page((0,D.default)({data:{imgMap:P.IMG_MAP,rendered:!1,showErrorPage:!1,inviteRecords:[],cmdInfo:null},attr:{hasInit:!1,prefetchPromise:null},onPrefetch:function(){this.attr.prefetchPromise=this.fetchData()},onInit:function(){this.attr.hasInit||(this.attr.hasInit=!0,this.initData())},onErrorPageReload:function(){this.initData()},initData:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,o,i,r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.attr.prefetchPromise)?t.attr.prefetchPromise=null:n=t.fetchData(),a={},e.prev=3,e.next=6,n;case 6:a=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t.$showErrorPage(e.t0.errType),e.abrupt("return");case 13:i=(o=a).shareInfo,r=o.inviteRecords,t.setData({inviteRecords:r.slice(0,10)||[],cmdInfo:i.duShare,rendered:!0,showErrorPage:!1},(function(){t.showQrcode(i.shareUrl)}));case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))()},fetchData:function(){return this.$http.get(this.$api.GET_ACTIVITY,{data:{activity_id:"luckyYearShare"}})},showQrcode:function(t){if(t){var e=i().globalData.systemInfo.screenWidth;new _.default("qrcode-canvas",{text:t,width:23.99*e/100,height:23.99*e/100})}},shareCmd:function(){var t=this.data.cmdInfo;if(t){var e={pannel:["weixin_friend","weixin_timeline"],command:{cmd_pannel:["weixin_friend","weixin_timeline"],info:t}};o.openShare(e)}},downloadQrcode:function(){o.canvasToTempFilePath({canvasId:"qrcode-canvas",success:function(t){null!=t&&t.tempFilePath?o.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){(0,k.textToast)("下载成功，已保存到本地相册")},fail:function(t){(0,k.textToast)("下载失败，请稍后再试")}}):(0,k.textToast)("下载失败，请稍后再试")},fail:function(t){(0,k.textToast)("下载失败，请稍后再试")}})}}))})),window.define("517",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IMG_MAP=void 0;n.IMG_MAP={TOP_BG:"https://gips3.baidu.com/it/u=1737894560,917863266&fm=3028&app=3028&f=JPEG&fmt=auto&q=100&size=f1242_1095",RED_PACKET:"https://gips1.baidu.com/it/u=3975600548,2022087939&fm=3028&app=3028&f=PNG&fmt=auto&q=90&size=f1097_1578",SHARE_BTN:"https://gips1.baidu.com/it/u=1913624047,3680615524&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f717_224",ASSIST_HEADER:"https://gips0.baidu.com/it/u=2779768867,3130975319&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f1194_144",COMPLETE:"https://gips3.baidu.com/it/u=3691646577,1741049255&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f42_43",LOADING:"http://gips1.baidu.com/it/u=2839163028,715528855&fm=3028&app=3028&f=GIF?w=106&h=106"}})),window.define("520",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(157)),_=I(t(29)),D=I(t(141)),k=t(26),P=t(9),E=I(t(14));Page((0,D.default)({data:{rendered:!1,currentIndex:0,topBarOpacity:0,btnList:[{text:"分享",eventType:"share"}],pageData:[],userLogin:(0,P.isLogin)(),uniformStyle:{subtitleImg:(0,k.gzipImg)("https://psstatic.cdn.bcebos.com/aladdin/service_center/xiaobiaoti_1672311444000.png"),titleImg:(0,k.gzipImg)("https://psstatic.cdn.bcebos.com/aladdin/service_center/dabiaoti_1672311452000.png"),backgroundImg:(0,k.gzipImg)("https://psstatic.cdn.bcebos.com/aladdin/service_center/yinghebutitoutu_1672745658000.png"),subBackgroundImg:(0,k.gzipImg)("https://psstatic.cdn.bcebos.com/aladdin/service_center/xianjie_1672311471000.png")},shareInfo:{},pn:0,rn:10},attr:{prefetchPromise:null,hasSendLog:{}},onPrefetch:function(t){var e=t.query;this.options=e,this.attr.prefetchPromise=this.fetchData()},onInit:function(t){this.options=t,this.setData({shareInfo:{content:"本本地美食/丽人/休闲娱乐/酒旅爆品特惠秒杀，每日10点开抢>>",imageUrl:"https://psstatic.cdn.bcebos.com/aladdin/service_center/yinghebutiefenxiantu_1673349327000.png",path:"homes/seckill/index?sfrom=shareUrl&cityCode=".concat(this.options.cityCode,"&realCityCode=").concat(this.options.realCityCode,"&longitude=").concat(this.options.longitude,"&latitude=").concat(this.options.latitude),title:"吃喝玩乐低至3折"}}),this.getData()},onReachBottom:function(){this.getData()},fetchData:function(){var t=this.options,e=t.cityCode,n=t.realCityCode,a=t.subscribe_id,o=t.longitude,i=t.latitude,r=this.data,s=r.pn,c=r.rn;return this.$http.get(this.$api.DISCOUNT_PAGE,{data:{city_code:e,real_city_code:n,subscribe_id:a,lon:o,lat:i,pn:s,rn:c,cootype:"bd09"}})},getData:function(t){var e=this;return(0,_.default)(C.default.mark((function n(){var a,o,i,r,s,c;return C.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=e.attr.prefetchPromise)?e.attr.prefetchPromise=null:a=e.fetchData(e.options),n.prev=2,n.next=5,a;case 5:o=n.sent,i=o.items,r=o.pn,s=o.hasMore,c=e.data.pageData,e.handleData(i),e.setData({pn:r,rendered:!0,pageData:t?i:[].concat((0,x.default)(c),(0,x.default)(i)),hasMore:"1"===s,fetchCatch:!1,footerText:"1"===s?"正在加载...":"已经到底了",userLogin:(0,P.isLogin)()},(function(){e.interObserve()})),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),e.$showErrorPage(2),e.setData({errMsg:n.t0.msg,fetchCatch:!0});case 18:case"end":return n.stop()}}),n,null,[[2,14]])})))()},handleData:function(t){t.forEach((function(t){t.sale_price=(0,k.formatPrice)(t.sale_price),t.lowest_price=(0,k.formatPrice)(t.lowest_price),t.image=(0,k.gzipImg)(t.image)}))},handleGood:function(t){var e=t.currentTarget.dataset,n=e.jumpUrl,a=e.jumpType,i=e.skuid,r=e.subscribed;o.$log.sendNew({module:"hard_discount_single",skuid:i,remind_status:r},"click",{page:getCurrentPages()[0].uri}),E.default.to(n,a)},getFeedTabRectTopOnce:function(t){var e=this;return new Promise((function(n){if(!t&&e.attr.feedTabRectTop)return n(e.attr.feedTabRectTop);(0,k.findTarget)("tab-box","",e).then((function(t){var a=(null==t?void 0:t.top)||0;e.attr.feedTabRectTop=a+e.attr.scrollTop,n(e.attr.feedTabRectTop)}))}))},onPageScroll:function(t){var e=this,n=t.scrollTop,a=n>0?1:0;this.attr.scrollTop=n,this.getFeedTabRectTopOnce().then((function(t){if(t){var o=e.data,i=o.statusBarHeight,r=o.navigationBarHeight,s=n+(i+r)>=t;e.setData({topBarOpacity:a,isFixed:s})}}))},onPullDownRefresh:function(){var t=this;return(0,_.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setData({pn:0}),e.next=3,t.getData(!0);case 3:o.stopPullDownRefresh();case 4:case"end":return e.stop()}}),e)})))()},onBtnTap:function(t){"share"===t.eventType&&this.onShareTap()},onShareTap:function(){var t=this.data.shareInfo,e=t.title,n=t.content,a=t.path,i=t.imageUrl,r=(0,k.shareAppMessageUrlPatch)({title:e,content:n,path:a,imageUrl:i});o.openShare(r)},onShareAppMessage:function(){return(0,k.shareAppMessageUrlPatch)(this.data.shareInfo)},interObserve:function(){var t=this;o.nextTick((function(){if(t.commonObserver){t.commonObserver(".card",[1],t.attr.hasSendLog)}}))}}))})),window.define("523",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";var I=t(10),C=I(t(27)),x=I(t(29)),_=I(t(491)),D=I(t(141)),k=t(26),P=t(9),E=t(524),L=(0,P.getSystemInfo)(),A=L.navigationBarHeight,O=L.statusBarHeight;Page((0,D.default)({data:{imgMap:E.IMG_MAP,imgContent:E.IMG_CONTENT,navHeight:A+O,navigationBarHeight:A,statusBarHeight:O,title:"",subTitle:"1、长按二维码识别添加",subTitleSecond:"【惠生活福利官惠仔】",bubbleText:"保存二维码，使用微信扫一扫也可添加",bottomTitle:"2、福利官邀你进群，领取福利",explanText:"加群后自动发放领券链接，点击即可成功领券",showErrorPage:!1},attr:{option:"",prefetchPromise:null},onPrefetch:function(t){var e=t.query;this.attr.option=e.cpType,this.attr.prefetchPromise=this.fetchData()},onInit:function(t){this.attr.option=t.cpType,this.initData()},onErrorPageReload:function(){this.initData()},initData:function(){var t=this;return(0,x.default)(C.default.mark((function e(){var n,a,o,i,r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.attr.prefetchPromise)?t.attr.prefetchPromise=null:n=t.fetchData(),a={},e.prev=3,e.next=6,n;case 6:a=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t.$showErrorPage(e.t0.errType),e.abrupt("return");case 13:i=(o=a).qrCodeUrl,r=o.title,t.showQrcode(i),t.setData({qrCodeUrl:i,title:r,showErrorPage:!1},(function(){t.sendLog("homes/wechat-group/index",t.attr.option,"display"),t.showQrcode(i)}));case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))()},fetchData:function(){return this.$http.get(this.$api.WX_COMMUNITY,{data:{receive_type:this.attr.option}})},showQrcode:function(t){if(t){var e=i().globalData.systemInfo.screenWidth;new _.default("qrcode-canvas",{text:t,width:46*e/100,height:46*e/100})}},downloadQrcode:function(){var t=this;o.canvasToTempFilePath({canvasId:"qrcode-canvas",success:function(e){null!=e&&e.tempFilePath?o.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){(0,k.textToast)("二维码已成功保存到相册"),t.sendLog("pic_toast",t.attr.option,"display")},fail:function(t){(0,k.textToast)("下载失败，请稍后再试")}}):(0,k.textToast)("下载失败，请稍后再试")},fail:function(t){(0,k.textToast)("下载失败，请稍后再试")}})},sendLog:function(t,e,n){o.$log.sendNew({module:t,industry:e},n)}}))})),window.define("524",(function(t,e,n,a,o,i,r,s,c,u,d,l,h,p,f,g,m,v,w,b,y,T,S){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.content=n.IMG_CONTENT=n.IMG_MAP=void 0;n.IMG_MAP={TOP_BG:"https://search-operate.cdn.bcebos.com/e1e82d583302bc8e234f4a84045adf9d.jpg",TOP_IMG:"https://search-operate.cdn.bcebos.com/5cebbf830cb75d9f30930557538753df.png",BUBBLE:"https://search-operate.cdn.bcebos.com/4b20c0f33230b3de506335054a001661.png",UNIONLEFT:"https://search-operate.cdn.bcebos.com/a348fe49ce8750a17fc858c678578fa3.png",UNIONRIGHT:"https://search-operate.cdn.bcebos.com/7f798e2aeaf8a5619d0b51551e35f23c.png",LOADING:"http://gips1.baidu.com/it/u=2839163028,715528855&fm=3028&app=3028&f=GIF?w=106&h=106"};n.IMG_CONTENT=[{icon:"https://search-operate.cdn.bcebos.com/eb2ac0ae7d0c28a5f4b304ade982df7d.png",title:"每日福利",subText:"最低6元券包"},{icon:"https://search-operate.cdn.bcebos.com/e33cd42676ba071fbdde1f8f0eb02d04.png",title:"邀请奖励",subText:"邀好友赚红包"},{icon:"https://search-operate.cdn.bcebos.com/38bf9384e487f5e81fcac83188c87144.png",title:"丰富活动",subText:"不定时大额券"}];n.content="https://www.google.com.hk/webhp?hl=zh-CN&sourceid=cnhp&gws_rd=ssl"})),window.__swanRoute="components/page-loading/page-loading",window.usingComponents=[],window.usingPluginComponents=[],require("2"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container",window.usingComponents=[],window.usingPluginComponents=[],require("4"),window.__swanRoute="components/c-shop-card/index",window.usingComponents=[],window.usingPluginComponents=[],require("6"),window.__swanRoute="components/c-button-login/c-button-login",window.usingComponents=[],window.usingPluginComponents=[],require("8"),window.__swanRoute="components/top-fixed-bar/tpl",window.usingComponents=[],window.usingPluginComponents=[],require("13"),window.__swanRoute="components/order-intro/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("44"),window.__swanRoute="components/set-meal-detail/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("46"),window.__swanRoute="components/refund-progress/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("48"),window.__swanRoute="components/order-info/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("79"),window.__swanRoute="components/buy-notes/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("81"),window.__swanRoute="components/c-panel/index",window.usingComponents=[],window.usingPluginComponents=[],require("83"),window.__swanRoute="components/phone-btn/index",window.usingComponents=["components/c-shop-card/index","components/c-panel/index"],window.usingPluginComponents=[],require("85"),window.__swanRoute="components/shop-info/index",window.usingComponents=["components/c-shop-card/index","components/phone-btn/index","components/c-panel/index"],window.usingPluginComponents=[],require("87"),window.__swanRoute="components/qrcode-info/index",window.usingComponents=["components/c-shop-card/index"],window.usingPluginComponents=[],require("89"),window.__swanRoute="components/goods-detail/index",window.usingComponents=[],window.usingPluginComponents=[],require("91"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/popup-box/src/index",window.usingComponents=[],window.usingPluginComponents=[],require("93"),window.__swanRoute="homes/coupon-shop-deal/components/bottom-pop/index",window.usingComponents=["components/c-shop-info-box/index","components/c-shop-coupon-template/index","components/security-bottom/index","components/line/index","components/c-shop-info-list/index","node_modules/@baidu/smart-kit/dist/components/popup-box/src/index"],window.usingPluginComponents=[],require("95"),window.__swanRoute="homes/coupon-shop-deal/components/coupon-list/index",window.usingComponents=["components/c-shop-info-box/index","components/c-shop-coupon-template/index"],window.usingPluginComponents=[],require("97"),window.__swanRoute="components/c-shop-coupon-template/index",window.usingComponents=[],window.usingPluginComponents=[],require("99"),window.__swanRoute="components/security-bottom/index",window.usingComponents=[],window.usingPluginComponents=[],require("101"),window.__swanRoute="components/use-guid/index",window.usingComponents=[],window.usingPluginComponents=[],require("103"),window.__swanRoute="components/buy-info/index",window.usingComponents=["components/info-list/index","components/use-guid/index","components/c-shop-info-list/index"],window.usingPluginComponents=[],require("105"),window.__swanRoute="components/c-shop-info-list/index",window.usingComponents=["components/c-shop-info-box/index","components/line/index"],window.usingPluginComponents=[],require("107"),window.__swanRoute="components/c-shop-info-box/index",window.usingComponents=[],window.usingPluginComponents=[],require("109"),window.__swanRoute="components/c-order-info/index",window.usingComponents=["components/c-shop-info-box/index"],window.usingPluginComponents=[],require("111"),window.__swanRoute="components/info-list/index",window.usingComponents=[],window.usingPluginComponents=[],require("113"),window.__swanRoute="components/line/index",window.usingComponents=[],window.usingPluginComponents=[],require("115"),window.__swanRoute="components/goods-order-info/index",window.usingComponents=["components/line/index"],window.usingPluginComponents=[],require("117"),window.__swanRoute="components/loading/index",window.usingComponents=[],window.usingPluginComponents=[],require("119"),window.__swanRoute="components/c-image/index",window.usingComponents=[],window.usingPluginComponents=[],require("121"),window.__swanRoute="components/c-card/c-card",window.usingComponents=[],window.usingPluginComponents=[],require("123"),window.__swanRoute="components/preload-image/preload-image",window.usingComponents=[],window.usingPluginComponents=[],require("125"),window.__swanRoute="components/coupon-desc/index",window.usingComponents=[],window.usingPluginComponents=[],require("127"),window.__swanRoute="components/coupon-template-small/index",window.usingComponents=[],window.usingPluginComponents=[],require("129"),window.__swanRoute="components/coupon_template/index",window.usingComponents=["components/c-shop-coupon-template/index"],window.usingPluginComponents=[],require("131"),window.__swanRoute="components/coupon-box/index",window.usingComponents=[],window.usingPluginComponents=[],require("133"),window.__swanRoute="components/c-swiper-banner/index",window.usingComponents=[],window.usingPluginComponents=[],require("136"),window.__swanRoute="components/c-to-top/index",window.usingComponents=[],window.usingPluginComponents=[],require("138"),window.__swanRoute="components/c-repurchase-popup/index",window.usingComponents=[],window.usingPluginComponents=[],require("140"),window.__swanRoute="components/c-tabs-header-top/index",window.usingComponents=[],window.usingPluginComponents=[],require("147"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/coupon/src/index",window.usingComponents=[],window.usingPluginComponents=[],require("149"),window.__swanRoute="components/coupon-repurchase/index",window.usingComponents=[],window.usingPluginComponents=[],require("152"),window.__swanRoute="components/discount-items/index",window.usingComponents=[],window.usingPluginComponents=[],require("154"),window.__swanRoute="channels/brand/components/list-content/index",window.usingComponents=["components/loading/index","components/discount-items/index"],window.usingPluginComponents=[],require("156"),window.__swanRoute="channels/brand/components/tabs-header/index",window.usingComponents=[],window.usingPluginComponents=[],require("162"),window.__swanRoute="channels/coupon/components/discount-items/index",window.usingComponents=[],window.usingPluginComponents=[],require("164"),window.__swanRoute="channels/coupon/components/tabs-header/index",window.usingComponents=[],window.usingPluginComponents=[],require("166"),window.__swanRoute="channels/coupon/components/tabs/index",window.usingComponents=["channels/coupon/components/tabs-header/index","components/loading/index","channels/coupon/components/discount-items/index"],window.usingPluginComponents=[],require("168"),window.__swanRoute="channels/shop/components/comment/index",window.usingComponents=[],window.usingPluginComponents=[],require("171"),window.__swanRoute="channels/shop/components/recommend-item/index",window.usingComponents=[],window.usingPluginComponents=[],require("173"),window.__swanRoute="channels/shop/components/coupon-retain/index",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("175"),window.__swanRoute="channels/shop/components/sku-modal/index",window.usingComponents=[],window.usingPluginComponents=[],require("177"),window.__swanRoute="components/ensure-popup/ensure-popup",window.usingComponents=[],window.usingPluginComponents=[],require("179"),window.__swanRoute="channels/shop/components/coupon/index",window.usingComponents=[],window.usingPluginComponents=[],require("181"),window.__swanRoute="channels/shop/components/security-sku/index",window.usingComponents=[],window.usingPluginComponents=[],require("183"),window.__swanRoute="channels/shop/components/dynamic-discount/index",window.usingComponents=[],window.usingPluginComponents=[],require("185"),window.__swanRoute="channels/shop/components/imlp-view/index",window.usingComponents=["dynamicLib://bd_bcp_sdk/csdk"],window.usingPluginComponents=[],require("187"),window.__swanRoute="channels/shop/components/img-uploader/index",window.usingComponents=[],window.usingPluginComponents=[],require("189"),window.__swanRoute="components/sku-coupon/index",window.usingComponents=["node_modules/@baidu/smart-kit/dist/components/coupon/src/index","node_modules/@baidu/smart-kit/dist/components/popup-box/src/index"],window.usingPluginComponents=[],require("191"),window.__swanRoute="components/c-login/c-login",window.usingComponents=[],window.usingPluginComponents=[],require("193"),window.__swanRoute="channels/shop/components/sku-detail/index",window.usingComponents=[],window.usingPluginComponents=[],require("195"),window.__swanRoute="channels/shop/components/address/index",window.usingComponents=[],window.usingPluginComponents=[],require("197"),window.__swanRoute="channels/travel-special-offer/components/activity/index",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("199"),window.__swanRoute="components/waterfall/index",window.usingComponents=[],window.usingPluginComponents=[],require("201"),window.__swanRoute="components/plane-ticket-list/index",window.usingComponents=[],window.usingPluginComponents=[],require("203"),window.__swanRoute="components/c-cascader/c-cascader",window.usingComponents=[],window.usingPluginComponents=[],require("205"),window.__swanRoute="components/new-filter/index",window.usingComponents=["components/c-cascader/c-cascader"],window.usingPluginComponents=[],require("207"),window.__swanRoute="components/c-tabs/index",window.usingComponents=[],window.usingPluginComponents=[],require("209"),window.__swanRoute="channels/shop/components/security/index",window.usingComponents=[],window.usingPluginComponents=[],require("211"),window.__swanRoute="components/c-task-timer/c-task-timer",window.usingComponents=[],window.usingPluginComponents=[],require("213"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/three-service/src/three-service",window.usingComponents=[],window.usingPluginComponents=[],require("215"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/banner/common-banner/index",window.usingComponents=[],window.usingPluginComponents=[],require("217"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/banner/src/banner",window.usingComponents=["node_modules/@baidu/smart-kit/dist/components/banner/common-banner/index"],window.usingPluginComponents=[],require("219"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/car-coupon/src/car-coupon",window.usingComponents=[],window.usingPluginComponents=[],require("221"),window.__swanRoute="node_modules/@baidu/ug-task-supplier/dist/swan/ui/src/index",window.usingComponents=[],window.usingPluginComponents=[],require("223"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/popup-coupon/src/popup-coupon",window.usingComponents=[],window.usingPluginComponents=[],require("238"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/c-button-login/src/c-button-login",window.usingComponents=[],window.usingPluginComponents=[],require("240"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/red-packet/src/red-packet",window.usingComponents=["node_modules/@baidu/smart-kit/dist/components/c-button-login/src/c-button-login"],window.usingPluginComponents=[],require("246"),window.__swanRoute="components/c-com-share/c-com-share",window.usingComponents=["dynamicLib://generate-image/generateImage"],window.usingPluginComponents=[],require("252"),window.__swanRoute="components/new-year/recharge/index",window.usingComponents=["components/c-button-login/c-button-login","components/preload-image/preload-image"],window.usingPluginComponents=[],require("255"),window.__swanRoute="components/c-letter-sort/c-letter-sort",window.usingComponents=[],window.usingPluginComponents=[],require("258"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/full-screen-popup/src/full-screen-popup",window.usingComponents=[],window.usingPluginComponents=[],require("260"),window.__swanRoute="components/little-coupon/index",window.usingComponents=[],window.usingPluginComponents=[],require("262"),window.__swanRoute="components/normal-coupon/index",window.usingComponents=[],window.usingPluginComponents=[],require("264"),window.__swanRoute="components/popup-coupon/index",window.usingComponents=["components/c-button-login/c-button-login","node_modules/@baidu/smart-kit/dist/components/coupon/src/index"],window.usingPluginComponents=[],require("266"),window.__swanRoute="components/skeleton-container/index",window.usingComponents=[],window.usingPluginComponents=[],require("268"),window.__swanRoute="components/bg-image/index",window.usingComponents=[],window.usingPluginComponents=[],require("270"),window.__swanRoute="components/goods-welfare-couponitem/index",window.usingComponents=[],window.usingPluginComponents=[],require("272"),window.__swanRoute="components/goods-welfare-coupon/index",window.usingComponents=["components/goods-welfare-couponitem/index"],window.usingPluginComponents=[],require("274"),window.__swanRoute="components/goods-welfare-three-gift/index",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("276"),window.__swanRoute="components/goods-welfare-two-gift/index",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("278"),window.__swanRoute="components/search-result-shop-list-xcx/index",window.usingComponents=["channels/shop/components/comment/index"],window.usingPluginComponents=[],require("280"),window.__swanRoute="components/search-sug/index",window.usingComponents=[],window.usingPluginComponents=[],require("282"),window.__swanRoute="components/c-loading/c-loading",window.usingComponents=[],window.usingPluginComponents=[],require("284"),window.__swanRoute="components/custom-modal/custom-modal",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("286"),window.__swanRoute="components/c-sku-goods/c-sku-goods",window.usingComponents=["components/c-sku-landing-tabs-week/c-sku-landing-tabs"],window.usingPluginComponents=[],require("288"),window.__swanRoute="components/c-choice-cards/c-choice-cards",window.usingComponents=["components/c-sku-landing-tabs-week/c-sku-landing-tabs"],window.usingPluginComponents=[],require("290"),window.__swanRoute="components/c-sku-landing-tabs-week/c-sku-landing-tabs",window.usingComponents=[],window.usingPluginComponents=[],require("292"),window.__swanRoute="components/selected-cards/selected-cards",window.usingComponents=["components/c-swiper-banner/index","components/c-sku-landing-tabs-week/c-sku-landing-tabs"],window.usingPluginComponents=[],require("294"),window.__swanRoute="components/c-sku-landing-tabs/c-sku-landing-tabs",window.usingComponents=[],window.usingPluginComponents=[],require("296"),window.__swanRoute="components/find-goods/find-goods",window.usingComponents=["components/c-swiper-banner/index","components/c-sku-landing-tabs/c-sku-landing-tabs"],window.usingPluginComponents=[],require("298"),window.__swanRoute="components/c-week-end/c-week-end",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("300"),window.__swanRoute="components/c-week-toast/c-week-toast",window.usingComponents=[],window.usingPluginComponents=[],require("302"),window.__swanRoute="components/c-slot-machine/c-slot-machine",window.usingComponents=["components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("304"),window.__swanRoute="components/wa-slot-machine-cont/tpl",window.usingComponents=["components/c-slot-machine/c-slot-machine","components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("306"),window.__swanRoute="components/c-task-view/c-task-view",window.usingComponents=["components/c-task-timer/c-task-timer"],window.usingPluginComponents=[],require("308"),window.__swanRoute="components/c-retain/index",window.usingComponents=[],window.usingPluginComponents=[],require("311"),window.__swanRoute="components/rebate-popup/rebate-popup",window.usingComponents=[],window.usingPluginComponents=[],require("313"),window.__swanRoute="node_modules/@baidu/smart-kit/dist/components/lottery/src/lottery",window.usingComponents=[],window.usingPluginComponents=[],require("316"),window.__swanRoute="pages/index/index",window.usingComponents=[],window.usingPluginComponents=[],require("318"),window.__swanRoute="pages/bootstrap/index",window.usingComponents=[],window.usingPluginComponents=[],require("320"),window.__swanRoute="homes/lottery/lottery",window.usingComponents=["components/c-button-login/c-button-login","components/c-com-share/c-com-share","components/page-loading/page-loading","node_modules/@baidu/smart-kit/dist/components/lottery/src/lottery"],window.usingPluginComponents=[],require("323"),window.__swanRoute="homes/rebate/rebate",window.usingComponents=["components/rebate-popup/rebate-popup","components/c-button-login/c-button-login","components/c-com-share/c-com-share","components/c-retain/index","components/preload-image/preload-image","components/top-fixed-bar/tpl","components/loading/index"],window.usingPluginComponents=[],require("326"),window.__swanRoute="homes/service-list/service-list",window.usingComponents=["components/c-com-share/c-com-share","components/page-loading/page-loading","components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("329"),window.__swanRoute="homes/rebate-list/rebate-list",window.usingComponents=["components/c-com-share/c-com-share","components/page-loading/page-loading","components/preload-image/preload-image","components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("332"),window.__swanRoute="homes/rebate-goods/rebate-goods",window.usingComponents=["components/page-loading/page-loading","components/top-fixed-bar/tpl","components/c-button-login/c-button-login","components/c-image/index"],window.usingPluginComponents=[],require("335"),window.__swanRoute="homes/sku_landing_page/sku_landing_page",window.usingComponents=["components/c-swiper-banner/index","components/c-sku-landing-tabs/c-sku-landing-tabs"],window.usingPluginComponents=[],require("338"),window.__swanRoute="homes/all/all",window.usingComponents=["components/top-fixed-bar/tpl","components/c-tabs-header-top/index","components/page-loading/page-loading"],window.usingPluginComponents=[],require("341"),window.__swanRoute="homes/week_activity/week_activity",window.usingComponents=["components/c-task-view/c-task-view","components/top-fixed-bar/tpl","components/wa-slot-machine-cont/tpl","components/c-week-toast/c-week-toast","components/c-week-end/c-week-end","components/find-goods/find-goods","components/selected-cards/selected-cards","components/c-choice-cards/c-choice-cards","components/c-sku-goods/c-sku-goods","components/custom-modal/custom-modal","components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("344"),window.__swanRoute="homes/city/city",window.usingComponents=["components/page-loading/page-loading","components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("348"),window.__swanRoute="homes/webview/webview",window.usingComponents=[],window.usingPluginComponents=[],require("351"),window.__swanRoute="homes/history/history",window.usingComponents=["components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("354"),window.__swanRoute="homes/new-search/new-search",window.usingComponents=["components/c-loading/c-loading","components/search-sug/index","components/discount-items/index","components/top-fixed-bar/tpl","components/search-result-shop-list-xcx/index","node_modules/@baidu/smart-kit/dist/components/banner/src/banner"],window.usingPluginComponents=[],require("358"),window.__swanRoute="homes/user-welfare/index",window.usingComponents=["components/page-loading/page-loading","components/top-fixed-bar/tpl","components/goods-welfare-two-gift/index","components/goods-welfare-three-gift/index","components/goods-welfare-coupon/index","components/loading/index","components/bg-image/index","components/preload-image/preload-image"],window.usingPluginComponents=[],require("361"),window.__swanRoute="homes/share_zhanji/share_zhanji",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading"],window.usingPluginComponents=[],require("364"),window.__swanRoute="homes/share_activity/share_activity",window.usingComponents=["components/c-login/c-login","components/c-com-share/c-com-share","components/page-loading/page-loading","components/skeleton-container/index","components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("367"),window.__swanRoute="homes/recharge-second/recharge-second",window.usingComponents=["components/top-fixed-bar/tpl","components/c-tabs-header-top/index","components/page-loading/page-loading","components/loading/index"],window.usingPluginComponents=[],require("371"),window.__swanRoute="homes/order_aggregation/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("375"),window.__swanRoute="homes/food_brand_aggregation/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","components/c-tabs-header-top/index"],window.usingPluginComponents=[],require("378"),window.__swanRoute="homes/coupon_page/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","components/preload-image/preload-image","components/popup-coupon/index","components/normal-coupon/index","components/little-coupon/index","components/loading/index","components/c-repurchase-popup/index","node_modules/@baidu/smart-kit/dist/components/coupon/src/index","node_modules/@baidu/smart-kit/dist/components/c-button-login/src/c-button-login","node_modules/@baidu/smart-kit/dist/components/full-screen-popup/src/full-screen-popup","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container","node_modules/@baidu/ug-task-supplier/dist/swan/ui/src/index"],window.usingPluginComponents=[],require("382"),window.__swanRoute="homes/coupon_rule/index",window.usingComponents=["components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("386"),window.__swanRoute="channels/recharge/pages/index/index",window.usingComponents=["components/page-loading/page-loading","components/c-button-login/c-button-login","components/preload-image/preload-image","components/c-card/c-card","components/c-swiper-banner/index","components/top-fixed-bar/tpl","components/c-task-timer/c-task-timer","components/c-letter-sort/c-letter-sort","components/new-year/recharge/index","components/c-com-share/c-com-share","components/loading/index","components/c-repurchase-popup/index","node_modules/@baidu/smart-kit/dist/components/red-packet/src/red-packet","node_modules/@baidu/smart-kit/dist/components/popup-coupon/src/popup-coupon","node_modules/@baidu/ug-task-supplier/dist/swan/ui/src/index","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("389"),window.__swanRoute="channels/express/pages/proxy/index",window.usingComponents=[],window.usingPluginComponents=[],require("395"),window.__swanRoute="channels/family-service/pages/index/index",window.usingComponents=["components/page-loading/page-loading","components/c-card/c-card","components/c-swiper-banner/index","components/top-fixed-bar/tpl","components/c-task-timer/c-task-timer","components/ensure-popup/ensure-popup","channels/shop/components/security/index","components/loading/index"],window.usingPluginComponents=[],require("398"),window.__swanRoute="channels/car-owner/pages/operatingActivities/index",window.usingComponents=["components/page-loading/page-loading","node_modules/@baidu/smart-kit/dist/components/car-coupon/src/car-coupon","node_modules/@baidu/smart-kit/dist/components/banner/src/banner","node_modules/@baidu/smart-kit/dist/components/three-service/src/three-service"],window.usingPluginComponents=[],require("404"),window.__swanRoute="channels/family-service/pages/navs/index",window.usingComponents=["components/c-card/c-card","components/top-fixed-bar/tpl"];window.usingPluginComponents=[],require("408"),window.__swanRoute="channels/family-service/pages/landing-page/index",window.usingComponents=["components/page-loading/page-loading","components/c-card/c-card","components/c-swiper-banner/index","components/top-fixed-bar/tpl","components/c-task-timer/c-task-timer","components/ensure-popup/ensure-popup","channels/shop/components/security/index"],window.usingPluginComponents=[],require("411"),window.__swanRoute="channels/travel-special-offer/pages/index/index",window.usingComponents=["components/c-tabs/index","components/new-filter/index","components/plane-ticket-list/index","components/loading/index","components/waterfall/index","channels/travel-special-offer/components/activity/index"],window.usingPluginComponents=[],require("415"),window.__swanRoute="channels/shop/pages/sku/index",window.usingComponents=["components/c-card/c-card","components/top-fixed-bar/tpl","channels/shop/components/security-sku/index","channels/shop/components/address/index","channels/shop/components/imlp-view/index","components/page-loading/page-loading","components/ensure-popup/ensure-popup","channels/shop/components/sku-modal/index","channels/shop/components/comment/index","channels/shop/components/sku-detail/index","components/c-button-login/c-button-login","components/sku-coupon/index","channels/shop/components/coupon-retain/index","channels/shop/components/recommend-item/index","node_modules/@baidu/smart-kit/dist/components/coupon/src/index","node_modules/@baidu/smart-kit/dist/components/popup-box/src/index"],window.usingPluginComponents=[],require("418"),window.__swanRoute="channels/shop/pages/order/index",window.usingComponents=["components/c-login/c-login","components/page-loading/page-loading","components/top-fixed-bar/tpl","channels/shop/components/dynamic-discount/index","channels/shop/components/imlp-view/index","components/sku-coupon/index","channels/shop/components/img-uploader/index"],window.usingPluginComponents=[],require("425"),window.__swanRoute="channels/shop/pages/imlp/index",window.usingComponents=["dynamicLib://bd_bcp_sdk/imlp"],window.usingPluginComponents=[],require("428"),window.__swanRoute="channels/shop/pages/apply-refund/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading"],window.usingPluginComponents=[],require("431"),window.__swanRoute="channels/shop/pages/refund/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","channels/shop/components/imlp-view/index"],window.usingPluginComponents=[],require("434"),window.__swanRoute="channels/shop/pages/pay/index",window.usingComponents=["channels/shop/components/dynamic-discount/index","components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("437"),window.__swanRoute="channels/shop/pages/shop-core/index",window.usingComponents=["channels/shop/components/security-sku/index","channels/shop/components/coupon/index","components/ensure-popup/ensure-popup","channels/shop/components/sku-modal/index","channels/shop/components/comment/index","components/c-button-login/c-button-login","components/top-fixed-bar/tpl","channels/shop/components/coupon-retain/index","channels/shop/components/recommend-item/index"],window.usingPluginComponents=[],require("440"),window.__swanRoute="channels/shop/pages/comment-detail/index",window.usingComponents=["components/page-loading/page-loading","components/top-fixed-bar/tpl","channels/shop/components/comment/index"],window.usingPluginComponents=[],require("443"),window.__swanRoute="channels/shop/pages/shop-intelligence/index",window.usingComponents=["components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("446"),window.__swanRoute="channels/shop/pages/order-creater/index",window.usingComponents=["components/page-loading/page-loading","components/top-fixed-bar/tpl","components/c-button-login/c-button-login","node_modules/@baidu/smart-kit/dist/components/popup-box/src/index"],window.usingPluginComponents=[],require("449"),window.__swanRoute="channels/coupon/pages/index/index",window.usingComponents=["channels/coupon/components/tabs/index","components/top-fixed-bar/tpl","components/page-loading/page-loading"],window.usingPluginComponents=[],require("452"),window.__swanRoute="channels/coupon/pages/list/index",window.usingComponents=["components/top-fixed-bar/tpl","channels/coupon/components/discount-items/index","components/loading/index","components/page-loading/page-loading"],window.usingPluginComponents=[],require("455"),window.__swanRoute="channels/brand/pages/index/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","channels/brand/components/tabs-header/index","channels/brand/components/list-content/index","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("458"),window.__swanRoute="homes/new-user-guide/new-user-guide",window.usingComponents=["components/page-loading/page-loading","components/loading/index"],window.usingPluginComponents=[],require("462"),window.__swanRoute="homes/new-freshmen-welfare/index",window.usingComponents=["components/c-button-login/c-button-login","components/page-loading/page-loading","components/top-fixed-bar/tpl","components/loading/index","node_modules/@baidu/smart-kit/dist/components/coupon/src/index"],window.usingPluginComponents=[],require("465"),window.__swanRoute="homes/fresh-focus/index",window.usingComponents=["components/c-button-login/c-button-login","components/page-loading/page-loading","components/loading/index","components/coupon-repurchase/index","components/c-repurchase-popup/index","node_modules/@baidu/smart-kit/dist/components/coupon/src/index"],window.usingPluginComponents=[],require("469"),window.__swanRoute="homes/refuel/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("473"),window.__swanRoute="homes/half-price-day/index",window.usingComponents=["components/c-button-login/c-button-login","components/top-fixed-bar/tpl","components/page-loading/page-loading","components/c-tabs-header-top/index","components/loading/index","components/c-repurchase-popup/index","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("476"),window.__swanRoute="homes/universal-channel/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","components/c-image/index","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("480"),window.__swanRoute="homes/coupon-shop/index",window.usingComponents=["components/c-card/c-card","components/c-image/index","components/c-to-top/index","components/c-swiper-banner/index","components/top-fixed-bar/tpl","components/c-swiper-banner/index","components/coupon-box/index","components/coupon_template/index","components/coupon-template-small/index","components/coupon-desc/index","components/c-shop-info-list/index","components/buy-info/index","components/use-guid/index","components/c-button-login/c-button-login","components/c-button-login/c-button-login","components/c-shop-coupon-template/index","components/preload-image/preload-image"],window.usingPluginComponents=[],require("483"),window.__swanRoute="homes/coupon-shop-pay/index",window.usingComponents=["components/page-loading/page-loading","components/goods-order-info/index","components/security-bottom/index","components/top-fixed-bar/tpl","components/preload-image/preload-image"],window.usingPluginComponents=[],require("487"),window.__swanRoute="homes/coupon-shop-deal/index",window.usingComponents=["components/c-card/c-card","components/c-image/index","components/loading/index","components/page-loading/page-loading","components/goods-order-info/index","components/info-list/index","components/c-order-info/index","components/c-shop-info-list/index","components/buy-info/index","components/security-bottom/index","components/c-shop-coupon-template/index","components/c-shop-info-box/index","homes/coupon-shop-deal/components/coupon-list/index","homes/coupon-shop-deal/components/bottom-pop/index"],window.usingPluginComponents=[],require("490"),window.__swanRoute="homes/transaction-goods-detail/index",window.usingComponents=["components/top-fixed-bar/tpl","components/page-loading/page-loading","components/shop-info/index","components/buy-notes/index","components/set-meal-detail/index","components/goods-detail/index","components/c-panel/index"],window.usingPluginComponents=[],require("495"),window.__swanRoute="homes/transaction-submit-order/index",window.usingComponents=["components/top-fixed-bar/tpl","components/order-intro/index"],window.usingPluginComponents=[],require("499"),window.__swanRoute="homes/transaction-qualifications/index",window.usingComponents=["components/top-fixed-bar/tpl"],window.usingPluginComponents=[],require("502"),window.__swanRoute="homes/order-details/index",window.usingComponents=["components/top-fixed-bar/tpl","components/c-shop-card/index","components/qrcode-info/index","components/shop-info/index","components/buy-notes/index","components/order-info/index","components/refund-progress/index","components/set-meal-detail/index","components/order-intro/index"],window.usingPluginComponents=[],require("505"),window.__swanRoute="homes/apply-refund/index",window.usingComponents=["components/top-fixed-bar/tpl","components/c-shop-card/index"],window.usingPluginComponents=[],require("509"),window.__swanRoute="homes/lucky-new-year/index",window.usingComponents=["components/page-loading/page-loading","components/c-button-login/c-button-login"],window.usingPluginComponents=[],require("512"),window.__swanRoute="homes/lucky-new-year-assist/index",window.usingComponents=["components/page-loading/page-loading"],window.usingPluginComponents=[],require("516"),window.__swanRoute="homes/seckill/index",window.usingComponents=["components/page-loading/page-loading","components/c-shop-card/index","node_modules/@baidu/smart-kit/dist/components/service-container/src/service-container"],window.usingPluginComponents=[],require("520"),window.__swanRoute="homes/wechat-group/index",window.usingComponents=["components/page-loading/page-loading"],window.usingPluginComponents=[],require("523")}(__hacked);