!function(t){t.global,t.Function,t.setTimeout,t.setInterval,t.setImmediate,t.requestAnimationFrame,t.swanGlobal,t.jsNative,t.masterManager,t._openSourceDebugInfo,t.System,t.Bdbox_aiapps_jsbridge,t.Bdbox_android_jsbridge,t.Bdbox_android_utils,t._naFile,t._naInteraction,t._naNetwork,t._naRouter,t._naSetting,t._naStorage,t._naUtils,t.globalThis;window.define("4",(function(t,e,r,n,i,a,o,l,u,c,s,d,f,m,p,h,v,y,g,b,_,S,C){"use strict";var x=t(5);e.exports={openIM:x.openHnOrH5}})),window.define("5",(function(t,e,r,n,i,a,o,l,u,c,s,d,f,m,p,h,v,y,g,b,_,S,C){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,l=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);o=!0);}catch(t){l=!0,i=t}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t){return"undefined"===t&&(t=void 0),t}function w(t){try{return JSON.stringify(t)}catch(t){}}function O(t){return function(t){try{return JSON.parse(t)}catch(t){}}(w(t))}function k(t){return(k="function"==typeof Symbol&&"symbol"===x(Symbol.iterator)?function(t){return void 0===t?"undefined":x(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":x(t)})(t)}function T(t){return new function t(e){var r={},n=(e=e||"").indexOf("#"),i="";-1!==n&&(i=e.substring(n),e=e.substring(0,n));for(var a=e.split("?"),o=a[0],l=(a[1]||"").split("&"),u=0;u<l.length;u++){var c=l[u];if(c){var s=c.split("="),d=s[0],f=s[1]||"";try{f=decodeURIComponent(f)}catch(t){f=s[1]||""}r[d]=f}}var m=o.replace(/\?.*/,"").replace(/^(https?:)?\/\//i,"").replace(/\/.*/,""),p=m.replace(/:\d+$/,""),h=o.replace(/:?\/\/.*/,""),v=o.replace(/^(https?:)?\/\/.*?(\/|$)/i,"");function y(){var t=(h?h+":":"")+"//"+m+v,e=this.params;if(e){var r=[];for(var n in e){var a=e[n];if(null!=a){var o=k(a);if("string"!==o&&"number"!==o)try{a=JSON.stringify(a)}catch(t){continue}r.push(n+"="+encodeURIComponent(a))}}r&&r.length&&(t+="?"+r.join("&"))}return i&&(t+=i),t}v&&(v="/"+v),this.params=r,this.url=e,this.removeParam=function(t){delete this.params[t],this.url=y.call(this)},this.addParam=function(t,e){this.params[t]=e,this.url=y.call(this)},this.getHost=function(){return m},this.getHostname=function(){return p},this.getProtocol=function(){return h},this.getPathname=function(){return v},this.removeHash=function(){i="",this.url=y.call(this)},this.setOrigin=function(e){var r=new t(e);h=r.getProtocol(),p=r.getHostname(),m=r.getHost(),this.url=y.call(this)}}(t)}function j(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}function N(t){var e=t.imParam,r=void 0===e?{}:e,n=t.ext,i=void 0===n?{}:n,a=t.options,o=void 0===a?{}:a,l=t.globalTradeid,u=t.inviteCache,c={im:{level1:r.level1,level2:A(r.level2),level3:A(r.level3),im_type:r.im_type}},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.question,r="我想咨询";if(e){if("去咨询更多问题"!==e)return r+'"'+e+'"';if(e.indexOf("？")>-1||e.indexOf("?")>-1)return e}var n=t.disease;if(n)return"我想咨询一下"+n;var i=t.doctor;if(i)return"我想咨询一下"+i+"大夫的情况"}(i);s&&(c.preset_message=s);var d=i.init_cards;d instanceof Array&&d.length>0&&(c.init_cards=d);var f=i.init_msg;f&&(c.preset_input={message:f.msg||"",action:f.type||""}),[["appid","appid","xyl_cip"],["channel","channel",""],["imlpAccessId","imlpAccessId",""],["ucid","ucid",""],["tradeid","tradeid",l],["clientSource","clientSource",""],["cuserid","cuserid",""],["localPageType","localPageType",""],["shopId","shopId",""],["merchantId","merchantId",""],["spuId","spuId",""],["productId","productId",""]].forEach((function(t){var e=I(t,3),n=e[0],i=e[1],a=e[2];c[i]=r[n]||a}));[["theme","theme"],["appKey","appKey"],["appName","appName"]].forEach((function(t){var e=I(t,2),r=e[0],n=e[1];o[r]&&(c[n]=o[r])}));var m=r.inviteType;if("smart"===m)c.inviteType=m,c.inviteData=r.inviteText||"";else if("manual"===m&&u[m]){var p=u.manual&&u.manual.length||1,h=(null==r?void 0:r.inviteSeq)||p;h=h<=u.manual.length?h:1;var v=u.manual[h-1];c.inviteType=m,c.inviteData=v.content,c.im={level1:v.level1,level2:A(v.level2),level3:A(v.level3)},c.im.im_type=v.imType}else if(u&&u[m]){var y=u[m][0];c.inviteType=m,c.inviteData=y.content}return c}j.prototype.encode=function(t){var e,r,n,i,a,o,l,u="",c=0;for(t=this._utf8_encode(t);c<t.length;)i=(e=t.charCodeAt(c++))>>2,a=(3&e)<<4|(r=t.charCodeAt(c++))>>4,o=(15&r)<<2|(n=t.charCodeAt(c++))>>6,l=63&n,isNaN(r)?o=l=64:isNaN(n)&&(l=64),u=u+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(l);return u},j.prototype.decode=function(t){var e,r,n,i,a,o,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=this._keyStr.indexOf(t.charAt(u++))<<2|(i=this._keyStr.indexOf(t.charAt(u++)))>>4,r=(15&i)<<4|(a=this._keyStr.indexOf(t.charAt(u++)))>>2,n=(3&a)<<6|(o=this._keyStr.indexOf(t.charAt(u++))),l+=String.fromCharCode(e),64!==a&&(l+=String.fromCharCode(r)),64!==o&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l)},j.prototype._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},j.prototype._utf8_decode=function(t){for(var e="",r=0,n=0,i=0,a=0;r<t.length;)(n=t.charCodeAt(r))<128?(e+=String.fromCharCode(n),r++):n>191&&n<224?(i=t.charCodeAt(r+1),e+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=t.charCodeAt(r+1),a=t.charCodeAt(r+2),e+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a),r+=3);return e};function H(t){var e=t.imParam,r=t.visitParam,n=t.options,i=t.isPopupInit,a=t.ext,o=t.baiduid,l=t.materialData,u=t.openImUrl,c=t.globalTradeid,s=t.inviteCache,d=t.paramsData,f=t.urlParams,m=t.isPreview,p=t.storage,h=t.xst,v=N({imParam:e,ext:a,options:n,globalTradeid:c,inviteCache:s}),y=w(v),g=function(t){var e=t.imParam,r=t.materialData,n=t.urlParams,i=t.isPreview,a=t.baiduid,o=t.storage,l=t.xst,u=t.configstr,c={};if(null!=e&&e.imid)c.imid=e.imid;else if(null!=e&&e.imUrl){var s=T(null==e?void 0:e.imUrl).params;null!=s&&s.imid&&(c.imid=s.imid)}if(!c.imid)return"error-log-noimid";c.config=u,c.from="sdk",i&&(c.preview=1);var d=null==e?void 0:e.fid,f=null==e?void 0:e.ch,m=null==e?void 0:e.zjopen;return d&&(c.fid=d),f&&(c.ch=f),m&&(c.zjopen=m),l&&(c.xst=l),a&&(c.baiduid=a),o&&(c.storage=o),null!=r&&r.params&&((null==r?void 0:r.key)&&(c.key=null==r?void 0:r.key),c.params=r.params),null!=n&&n.imlpFeature&&(c.feature=n.imlpFeature),c}({imParam:e,paramsData:d,materialData:l,urlParams:f,isPreview:m,baiduid:o,storage:p,xst:h,configstr:y=(new j).encode(y)});if("string"==typeof g&&"error-log-noimid"===g)return{error:"error-log-noimid",data:[{type:i?"popupInit":"openIM",data:{imParam:e,visitParam:r}}]};if(u){var b=T(u);return Object.entries(g).forEach((function(t){var e=I(t,2),r=e[0],n=e[1];b.addParam(r,n)})),{url:b.url}}var _=O(g);_.config=v;var S="";null!=l&&l.params&&(S="com");var C="//"+(n.domain||"ada.baidu.com")+"/imlp/"+S+"?"+function(t){t=t||{};var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+encodeURIComponent(t[r]));return e.join("&")}(g);return{url:C=0===C.indexOf("//".concat("ada.baidu.com"))?"https:"+C:"http:"+C,urlParamsJson:_}}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.openBdboxWebview({module:"imChatHN",action:"entry",parameters:{url:t,sourceType:"swan"},success:function(t){},fail:function(){D(t,e)}})}function D(t,e){i.navigateTo({url:"dynamicLib://"+(e.dynamicLib||"bd_bcp_sdk_mini")+"/pages/cip/cip?url="+encodeURIComponent(t)})}function M(t){try{return!(!i||!i.canIUse("openBdboxWebview"))&&function(t,e){t=t.split("."),e=e.split(".");for(var r=Math.max(t.length,e.length);t.length<r;)t.push("0");for(;e.length<r;)e.push("0");for(var n=0;n<r;n++){var i=parseInt(t[n],10),a=parseInt(e[n],10);if(i>a)return 1;if(i<a)return-1}return 0}(i.getSystemInfoSync().version||"",t)>-1}catch(t){return!1}}r.openHnOrH5=function(t,e,r){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(e.minHnVersion||"12.21.0.0")?U(t,e):D(t,e)}(H({ext:(null==e?void 0:e.ext)||{},imParam:t,visitParam:e,options:r,xst:(null==r?void 0:r.xst)||(null==e?void 0:e.xst)||"",bd_bxst:(null==r?void 0:r.bd_bxst)||(null==e?void 0:e.bd_bxst)||""}).url,r)}}))}(__hacked);