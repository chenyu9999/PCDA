!function(t){t.global,t.Function;var e=t.setTimeout,o=t.setInterval;t.setImmediate,t.requestAnimationFrame,t.swanGlobal,t.jsNative,t.masterManager,t._openSourceDebugInfo,t.System,t.Bdbox_aiapps_jsbridge,t.Bdbox_android_jsbridge,t.Bdbox_android_utils,t._naFile,t._naInteraction,t._naNetwork,t._naRouter,t._naSetting,t._naStorage,t._naUtils,t.globalThis;window.define("1183",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1184)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1184",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(6);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=t(38),P=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_(t)&&"function"!=typeof t)return{default:t};var o=k(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}i.default=t,o&&o.set(t,i);return i}(t(36));function k(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(k=function(t){return t?o:e})(t)}var D=(0,S.vueCompCreator)({options:{addGlobalClass:!0},props:{isHeadCustom:{type:Boolean,default:!1},isAnimation:{type:Boolean,default:!1},topNavBarHasBg:{type:Number,default:0}},data:function(){return{ctnSty:{height:"",visibility:"hidden"},height:{top:"",bottom:""},sty:{top:{},content:{},bottom:{}},toView:"",view:{top:"st_".concat(P.rand()),bottom:"st_".concat(P.rand())},screenHei:0}},mounted:function(){this.screenHei=(0,T.getSystemInfo)().screenHeight},methods:{scrollTo:function(t){var o=this;!function(t){o.getContentHei().then((function(i){o.ctnSty={height:i.contentHei+"px",visibility:"visible"},o.$mpUpdated((function(){o.toView="top"===t?o.view.top:"bottom"===t?o.view.bottom:t,e((function(){o.view={top:"st_".concat(P.rand()),bottom:"st_".concat(P.rand())}}),100)}))}))}(t)},setContentHei:function(){var t=this;this.getContentHei().then((function(e){t.ctnSty={height:e.contentHei+"px",visibility:"visible"},t.$emit("contentHeightChange",e)}))},onTapContent:function(t){this.$emit("tapContent",t)},onHeightChange:function(t){var e=t.pos,o=t.height;this.height[e]="".concat(o/100,"rem"),this.scrollTo("bottom")},getContentHei:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(o){var i,n,s=0,a=0,r=(0,T.getSystemInfo)();i=r.navigationBarHeight,n=r.statusBarHeight,r.system.toLocaleLowerCase(),t.$api.createSelectorQuery().selectAll(".chat-top, .chat-bottom").boundingClientRect((function(r){r&&r.length&&(s=e.top||r[0].height,a=e.bottom||r[1].height),o({top:s,bottom:a,contentHei:t.screenHei-(t.isHeadCustom?0:i+n)-s-a})})).exec()}))}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[[{class:{"chat-top":!0,"top-bar-bg":!!t.topNavBarHasBg}}]],[[]],,[[{"scroll-y":"","scroll-into-view":t.toView,"scroll-with-animation":t.isAnimation,"upper-threshold":"1",style:t.ctnSty}]],[,[[{id:t.view.top}]],,[,[[{style:{height:t.height.top}}]],[],,[[{style:{height:t.height.bottom}}]]],,[[{id:t.view.bottom}]]],,[[]]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=D})),window.define("1371",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1372)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1372",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var x=t(25),_=t(292),S=t(36),T=(0,x.vueCompCreator)({props:{type:{type:String,default:"multi"},list:{type:Array,default:function(){return[]}},checked:{type:Array,default:function(){return[]}},baseColor:{type:String,default:"#00C8C8"}},data:function(){return{items:[],chks:[]}},watch:{list:function(){this.items=this.list},checked:function(t){this.chks=t,this.updateChk()}},created:function(){this.items=this.list},methods:{onTap:function(t){"radio"===this.type||"ai_radio"===this.type&&"2"!==t.exclude?this.chks=[t]:("multi"===this.type||"ai_multi"===this.type||"ai_radio"===this.type&&"2"===t.exclude)&&(t.isChk?this.chks=this.chks.filter((function(e){return e.text!==t.text})):"1"===t.exclude||"2"===t.exclude?this.chks=[t]:this.chks=this.chks.filter((function(t){return"1"!==t.exclude&&"2"!==t.exclude})).concat(t)),"upload_opt"!==this.type&&this.$emit("tapTag",this.chks),this.$emit("eachTagTap",t),(0,_.send)({type:"b",action:"inputSel",extra:{name:t.text}})},updateChk:function(){var t=this;this.items=this.items.map((function(e){return(0,S.extend)(e,{isChk:t.chks.map((function(t){return t.text})).indexOf(e.text)>-1})}))},subSelectGroup:function(){this.$emit("mulitSub")}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,t._l(t.items,(function(e,o){e.isChk||e.exclude&&"3"===e.exclude||t.baseColor,(e.isChk||e.exclude&&"3"===e.exclude)&&t.baseColor,e.text})),1]},staticRenderFns:[]}.render.bind(this)()}});o.default=T})),window.define("1374",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1375)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1375",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5),_=t(6);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var S=x(t(32)),T=t(25),P=x(t(283)),k=t(288),D=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_(t)&&"function"!=typeof t)return{default:t};var o=E(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}i.default=t,o&&o.set(t,i);return i}(t(295)),B=t(36),$=t(292);function E(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(E=function(t){return t?o:e})(t)}var M=(0,T.vueCompCreator)({options:{addGlobalClass:!0},props:{},components:{CIcon:P.default},created:function(){this.loadHistory()},data:function(){return{api:D.apiHost+"/med/api/questionhistory?vn=med",wzHistory:{tips:"",historyList:[],deleteUrl:""},listConfig:{status:"init",page:1,pageSize:5},isFirstShow:!0,isNull:!1,isDelEnable:!1}},methods:{onTapItem:(0,B.throttle)((function(t){this.isDelEnable||((0,$.send)({type:"b",action:"wz-hository-click",extra:{qid:t.qid}}),this.$emit("tapItem",t))}),1e3),onEnableDel:function(){this.isDelEnable=!0},onDelete:function(t,e){this.$set(this.wzHistory.historyList[e],"isDel",!0)},onDelAll:function(){this.wzHistory.historyList=this.wzHistory.historyList.map((function(t){return t.isDel=!0,t}))},onConfirm:function(){var t=this,e=this.wzHistory.historyList.filter((function(t){return t.isDel})).map((function(t){return t.text})).join();(0,k.request)({method:"POST",url:this.wzHistory.deleteUrl,data:{contents:e},header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(){t.isDelEnable=!1}))},loadHistory:function(){var t=this,e=this.listConfig,o=e.status,i=e.page,n=e.pageSize;"loading"!==o&&"complete"!==o&&(this.$set(this.listConfig,"status","loading"),(0,k.request)({url:this.api,data:{page:i,pageSize:n}}).then((function(e){var o,i=e.data.historyList;(o=t.wzHistory.historyList).push.apply(o,(0,S.default)(i||[])),t.wzHistory.tips=e.data.tips,t.wzHistory.deleteUrl=e.data.deleteUrl,t.isFirstShow&&(t.isFirstShow=!1)})))}},lifetimes:{detached:function(){}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{id:"wz-history"}]],[,,[,[,t.wzHistory.deleteUrl&&!t.isFirstShow&&t.wzHistory.historyList.length>0?[,[t.isDelEnable?[,[,]]:[]]]:[]],,[[{class:t.isFirstShow?"":"wz-history__show"}]],[t.isFirstShow||!t.isFirstShow&&t.wzHistory.historyList.length>0?[,t._l(t.wzHistory.historyList,(function(e,o){e.isDel,e.text2?e.text2:(e.wz_patient_name&&e.wz_patient_name,e.sex&&e.sex,e.age,e.text&&e.text),t.isDelEnable&&t._pp({name:"close",compId:(t.compId?t.compId:"$root")+",0-"+o})})),1]:[]]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=M})),window.define("1377",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1378)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1378",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=t(25),S=x(t(283)),T=t(36),P=(0,_.vueCompCreator)({props:{voiceValue:{type:String,default:""}},components:{CIcon:S.default},data:function(){return{voicePlaceholder:"您可以描述身体哪里不舒服",voiceManager:{},voiceDisabled:!0,voicePress:!1,voiceStatus:0,preVoice:""}},methods:{voiceStart:(0,T.throttle)((function(){var t=this;this.voicePress=!0,this.voicePlaceholder="准备中",this.voiceManager=n.ai.getVoiceRecognizer(),this.voiceManager.onStart((function(){t.voiceStatus=1,t.voicePlaceholder="请描述您的问题…",t.preVoice=t.voiceValue})),this.voiceManager.onRecognize((function(e){t.voiceStatus=2,t.voiceDisabled=!1,t.$emit("recognizeVoice",t.preVoice+e.result)})),this.voiceManager.onFinish((function(e){t.preVoice+=e.result,t.$emit("recognizeVoice",t.preVoice),t.voiceStatus=3})),this.voiceManager.onError((function(e){t.voiceStop(),[1001,2009,3001,3003,4001,4002,4004,9e3].includes(+e.errorCode)?n.showModal({title:"提示",content:"识别错误，请您稍后重试",showCancel:!1}):4003===e.errorCode?n.showModal({title:"提示",content:"没有匹配的识别结果，请您稍后重试",showCancel:!1}):1002===e.errorCode?n.showModal({title:"提示",content:"请求超时，请您稍后重试",showCancel:!1}):[1003,1004].includes(+e.errorCode)?n.showModal({title:"提示",content:"请求超时，请您检查网络状态是否良好",showCancel:!1}):2001===e.errorCode?n.showModal({title:"提示",content:"录音设备异常，当前功能不可用，建议您手动输入问题",showCancel:!1}):[2002,2003].includes(+e.errorCode)?n.showModal({title:"提示",content:"检测不到语音，请您尝试重新录入",showCancel:!1}):[2004,2005].includes(+e.errorCode)?n.showModal({title:"提示",content:"您未授权麦克风权限，当前功能不可用，建议您手动输入",showCancel:!1}):2006===e.errorCode?n.showModal({title:"提示",content:"识别被打断，请您尝试重新录入",showCancel:!1}):[2007,2008].includes(+e.errorCode)?n.showModal({title:"提示",content:"当前功能不可用，建议您手动输入问题",showCancel:!1}):4002===e.errorCode&&n.showModal({title:"提示",content:"语音过长，请您尝试重新录入",showCancel:!1})})),this.voiceManager.start({mode:"touch",longSpeech:!1}),this.$emit("voiceStart")}),1e3),voiceInput:function(t){this.$emit("recognizeVoice",t.detail.value)},voiceSend:function(){this.$emit("voiceSend")},voiceStop:function(){this.voicePlaceholder="您可以描述身体哪里不舒服",this.voiceStatus=0,this.voicePress=!1,this.voiceManager.stop()},closeVoicePopup:function(){this.$emit("closeVoice")},clearVoiceContent:function(){this.preVoice="",this.$emit("clearVoice")},onMoveStop:function(){return!1}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[,[,[[{"confirm-type":"send",fixed:"true",maxlength:200,disabled:t.voiceDisabled,placeholder:t.voicePlaceholder}],[{value:t.voiceValue}]]],,[[{selectable:!1}]],[,[[{"v-show":!t.voicePress}]],,[[{"v-show":1===t.voiceStatus}]],[,[[{mode:"aspectFit",src:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2666215013,2658882851&fm=179&app=35&f=GIF?w=300&h=150&s=A3518B6AD5E7BB510C40D41B0000E0C2"}]]],t.voiceValue.length?[]:[,[,[[t._pp({name:"down","font-size":"19px",compId:(t.compId?t.compId:"$root")+",0"})]]]],(t.voiceValue.length,[]),,[[{class:{press:t.voicePress}}]],[,[[t._pp({name:"microphone1","font-size":"25px",compId:(t.compId?t.compId:"$root")+",1"})]]],(t.voiceValue.length,[])]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=P})),window.define("1380",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1381)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1381",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=t(25),S=x(t(283)),T=t(38),P=t(1382),k=(0,_.vueCompCreator)({options:{addGlobalClass:!0},props:{value:{type:String,default:""},adjustPosition:{type:Boolean,default:!0},confirmHold:{type:Boolean,default:!1},isExpEnable:{type:Boolean,default:!0},isShowMultiCol:{type:Boolean,default:!0},isToolMulti:{type:Boolean,default:!1},isShowPic:{type:Boolean,default:!1},isShowVoice:{type:Boolean,default:!1},isExpHistory:{type:Boolean,default:!1},isShowHistory:{type:Boolean,default:!1},placeholder:{type:String,default:""},isEnable:{type:Boolean,default:!1},primaryColor:{type:String,default:"#00c8c8"},handleBtns:{type:Array},maxLen:{type:Number,default:200},hideBorderTop:{type:Boolean,default:!1},withUsePush:{type:Boolean,default:!1},subscribeParams:{type:Object,default:function(){return{templateId:"",subscribeId:""}}},minInputLen:{type:Number,default:0},inputType:{type:String,default:""}},components:{CIcon:S.default},data:function(){return{val:"",xval:"",usePush:!1,isFocus:!1,isAutoHeight:!0}},watch:{value:function(t){this.val=t,this.xval=t},withUsePush:function(t){t||(this.usePush=!1)}},created:function(){if(this.withUsePush){var t=(0,T.getSystemInfo)(),e=this.$api.canIUse("form.skip-subscribe-authorize");this.usePush=t.notificationAuthorized&&e}},methods:{onTapHistory:function(){this.$emit("tapHistory",this.isExpHistory)},showVoicePopup:function(t){t&&this.$emit("voicePopup")},onTapPlus:function(){this.$emit("expand")},onTapImg:function(t){t&&this.$emit("uploadImg")},onFocus:function(t){this.isFocus=!0,this.$emit("focus",t)},onBlur:function(){this.isFocus=!1,this.$emit("blur")},sendFormId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t&&t.formId;e&&this.$emit("sendFormId",{formId:e})},onAuthFormSubmit:function(t){this.sendFormId(t.detail),this.onSend()},onSend:function(){var t=this;if(this.xval){var e=this.onTrim(this.xval);if(this.minInputLen&&e.length<this.minInputLen)this.$api.showToast({title:"请输入".concat(this.minInputLen,"个字以上"),icon:"none"});else{var o=this.inputType;o&&P.VALIDATE_RULES[o]&&!P.VALIDATE_RULES[o].rule(e)?this.$api.showToast({title:P.VALIDATE_RULES[o].toast,icon:"none"}):(this.$emit("send",this.xval),this.inputType||(this.val=".",this.$mpUpdated().then((function(){t.val="",t.xval=""}))))}}},onTrim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},onInput:function(t){this.xval=t.detail.value,this.$emit("input",this.xval)},onLinechange:function(t){t.detail.lineCount>4?(this.isAutoHeight=!1,this.$emit("lineChange",t.detail)):(this.isAutoHeight=!0,this.$emit("lineChange",t.detail))},toggleMulti:function(){this.$emit("togglemulti")},setFocus:function(){this.isFocus=!0}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[[{class:[t.hideBorderTop?"hide-border-top":""]}]],[t.isShowVoice?[,[,[[{class:["triage-voice-btn c-color",t.isEnable?"":"icon-disabled"]}]],[,[[t._pp({name:"microphone","font-size":"23px",compId:(t.compId?t.compId:"$root")+",0",class:t.isEnable?"":"icon-disabled"})]]]]]:[],t.isShowHistory?[,[,[[{class:t.isExpHistory?"c-color-green":"c-color"}]]]]:[],,[,[[{"confirm-type":"send","confirm-hold":t.confirmHold,maxlength:t.maxLen,disabled:!t.isEnable,placeholder:t.placeholder,"auto-height":t.isAutoHeight,"show-confirm-bar":!1,"adjust-position":t.adjustPosition,fixed:!0,focus:t.isFocus,"cursor-spacing":"20"}],[{value:t.val}]]],t.isShowPic?[,[[t._pp({name:"img-circle","font-size":"22px",compId:(t.compId?t.compId:"$root")+",1",class:t.isEnable?"":"icon-disabled"})]]]:[],t.isExpEnable&&0===t.xval.length?[,[[t._pp({name:"tianjia","font-size":"22px",compId:(t.compId?t.compId:"$root")+",2"})]]]:[],!t.isExpEnable&&t.isToolMulti&&0===t.xval.length?[,[[t._pp({name:"tianjia","font-size":"22px",compId:(t.compId?t.compId:"$root")+",3",style:{color:t.isShowMultiCol?"#00C8C8":"#1f1f1f"}})]]]:[],!t.isExpEnable&&!t.isToolMulti||t.xval.length>0?[,[,[[{class:0===t.xval.length?"ip-btn-disable":"",style:{"background-color":t.primaryColor}}]],t.usePush?[,[[{"report-submit":"","report-type":"subscribe","skip-subscribe-authorize":"","template-id":t.subscribeParams.templateId,"subscribe-id":t.subscribeParams.subscribeId}]],[,[[{"form-type":"submit",type:"submit"}]]]]:[]]]:[]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=k})),window.define("1382",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.VALIDATE_RULES=void 0;var x=t(514),_={name:{rule:x.isChineseName,toast:"请输入正确姓名信息"},idCard:{rule:x.isValidIdCard,toast:"请输入正确身份证信息"}};o.VALIDATE_RULES=_})),window.define("1384",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1385)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1385",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5),S=t(6);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var T=t(25),P=_(t(283)),k=_(t(1381)),D=_(t(1378)),B=_(t(1375)),$=t(40),E=t(407),M=t(299),U=t(292),L=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==S(t)&&"function"!=typeof t)return{default:t};var o=z(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}i.default=t,o&&o.set(t,i);return i}(t(36));function z(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(z=function(t){return t?o:e})(t)}var j=(0,T.vueCompCreator)({options:{addGlobalClass:!0},props:{value:{type:String,default:""},adjustPosition:{type:Boolean,default:!0},confirmHold:{type:Boolean,default:!1},item:{type:Object,default:function(){return{placeholder:"",box:[]}}},isShowBoxExp:{type:Boolean,default:!0},isBoxExp:{type:Boolean,default:!1},primaryColor:{type:String,default:"#00c8c8"},isTextareaPopup:{type:Boolean,default:!0},hidePicIcon:{type:Boolean,default:!1},withUsePush:{type:Boolean,default:!1},subscribeParams:{type:Object,default:function(){return{templateId:"",subscribeId:""}}},handleBtns:{type:Array},page:{type:String,default:""}},watch:{isExpHistory:function(t){var e=this;this.item.box2&&this.item.box2.length>0&&this.item.box2.map((function(o,i){"history"===o.info.type&&e.$set(e.item.box2[i],"isExp",t)}))},isExpVoice:function(t){this.inputShow=!t,t?(this.isExp=!1,this.isExpHistory=!1):this.isShowBoxExp||(this.isExp=!0)},value:function(t){this.val=t},item:function(t){var e=this;t.box2&&t.box2.length>0&&t.box2.map((function(t){"history"===t.info.type&&(e.isExpHistory=t.isExp)}));var o=t.box2&&t.box2.length<3?"":"empty";this.tools=L.equal(t.box2||t.box,t.box2?3:4,o),this.isToolMulti=!!t.box2&&!(t.box2.length<4),t.beforeSendMode?this.isEnable="input"===t.beforeSendMode:this.isEnable="input"===t.showmodel,this.item.picUpload&&this.item.picUpload.info&&!this.hidePicIcon&&(this.isShowPic=!0),this.item.isShowVoice&&(this.isShowVoice=!0),this.item.isShowHistory&&(this.isShowHistory=!0)}},data:function(){return{val:"",isEnable:!1,isExp:!1,tools:[],isExpVoice:!1,voiceValue:"",inputShow:!0,isShowPic:!1,isShowVoice:!1,isShowHistory:!1,isExpHistory:!1,env:"swan",isFocus:!1,isToolMulti:!1,isShowMultiCol:!1,needPh:!1}},components:{CIcon:P.default,InputSwan:k.default,VoicePopup:D.default,WzHistory:B.default},lifetimes:{attached:function(){var t=this;this.isExp=this.isBoxExp,this.val=this.value;var e=this.item.box2&&this.item.box2.length<3?"":"empty";this.tools=L.equal(this.item.box2||this.item.box,this.item.box2?3:4,e),this.isToolMulti=!!this.item.box2&&!(this.item.box2.length<4),this.item.beforeSendMode?this.isEnable="input"===this.item.beforeSendMode:this.isEnable="input"===this.item.showmodel,this.item.picUpload&&this.item.picUpload.info&&!this.hidePicIcon&&(this.isShowPic=!0),this.item.isShowVoice&&(this.isShowVoice=!0),this.item.isShowHistory&&(this.isShowHistory=!0),this.isExp&&this.$mpUpdated((function(){t.$emit("bottomheightchange")})),this.handleBtns&&this.handleBtns.length&&this.handleBtns.forEach((function(e){e.text&&(0,U.ubcSend)({page:t.page,type:"view",value:"input_top_".concat(e.text)}),e.badge&&(0,U.ubcSend)({page:t.page,type:"view",value:"badge_".concat(e.text)})}))}},methods:{onTapHistory:function(t){this.isExpHistory=!t},onTapHistoryItem:L.throttle((function(t){var e={questionID:"",qid:t.qid,age:t.age,nextkey:"end",key:"directedAge",from:"history"};this.$emit("tapHistoryItem",{name:t.text,value:t.query||t.age+"",params:e})}),2e3),showVoicePopup:function(){this.$emit("voiceScrollUp"),this.isExpVoice=!0,(0,U.send)({type:"b",action:"isExpVoice"})},voiceStart:function(){(0,U.send)({type:"b",action:"voiceStart"})},voiceSend:function(){this.onSend(this.voiceValue,"voice"),(0,U.send)({type:"b",action:"voiceSend"})},voiceRecognize:function(t){this.voiceValue=t},clearVoiceContent:function(){this.voiceValue="",(0,U.send)({type:"b",action:"voiceClear"})},closeVoice:function(){var t=this;this.isExpVoice=!1,this.$emit("voiceClose"),this.$mpUpdated((function(){t.$emit("heightChange")})),(0,U.send)({type:"b",action:"voiceClose"})},onExpand:function(){var t=this;this.isExp=!this.isExp,e((function(){t.$emit("tapPlus",t.isExp)}),10),(0,U.send)({type:"b",action:this.isExp?"openTools":"closeTools"}),(0,U.ubcSend)({page:this.page,type:"clk",value:this.isExp?"openTools":"closeTools"})},onUploadImg:function(){(0,U.send)({type:"b",action:"uploadImgIcon"}),this.onTapTool(this.item.picUpload.info)},onTapTool:function(t,e){var o=this;if(t&&(this.isEnable||t.clickable&&"1"===t.clickable)){if("url"===t.type){var i=t.msUrl||t.url;i&&i.indexOf(!1)&&(0,U.ubcSend)({page:this.page,type:"clk",value:"imInputBottom"}),(0,$.navigate)({url:i})}if("feedbackUrl"===t.type&&t.url)(0,$.navToBdBoxH5)(t.url);else if("uploadpic"===t.type){this.isExpVoice=!1,this.isExpHistory=!1;var n=!0;if(this.$emit("beforeChoose",t,(function(e){return t.limit>0&&(n=e<t.limit),n})),!n)return;(0,E.upload)({url:t.callback||t.callbackUrl,count:t.limit||9,multi:!0,name:"picFile",onChoose:function(e){o.isExp&&o.isShowBoxExp&&(o.isExp=!o.isExp),(0,U.send)({type:"b",action:"chooseImg"}),o.$emit("chooseImg",e,t)},onPreview:function(e){(0,U.send)({type:"b",action:"previewImg"}),o.$emit("previewImg",e,t)},onUploadSuccess:function(e){var i=e.resp;(0,U.send)({type:"b",action:"uploadSuccess"}),o.$emit("uploadSuccess",{callbackUrl:t.subCallbackUrl||o.item.messageCallback,params:{content:i.origin,pic_ids:i.picID,orientation:i.orientation,answerType:M.answerType.USER,contentType:M.contentType.PIC},file:e.file},t)},onUploadError:function(t){(0,U.send)({type:"b",action:"uploadError"}),o.$emit("uploadError",t),t.toast||(t.toast="图片上传失败，请重新上传"),o.$api.showToast({title:t.toast,icon:"none"})},onUploadAll:function(e){o.$emit("uploadAll",{callbackUrl:o.item.picsCallback||"",res:e},t)}}),(0,U.send)({type:"b",action:"upload"})}else if("phone"===t.type){var s=this.$api;s.makePhoneCall({phoneNumber:t.num,fail:function(){s.showToast({title:"拨号失败",icon:"none"})}}),(0,U.send)({type:"b",action:"makePhoneCall"})}else"ajax"===t.type?this.$emit("request",{url:t.callback,act:t.act||"comment"}):"history"===t.type?(this.isExpHistory=!this.isExpHistory,this.isExpVoice=!1):"voice"===t.type?(this.isExpVoice=!this.isExpVoice,this.isExpHistory=!1):"goods"===t.type?this.$emit("chooseGoods",t):"orders"===t.type&&this.$emit("chooseOrders",t);(0,U.send)({type:"b",action:t.type}),e>-1&&this.item.box&&this.item.box.length&&this.tools&&this.tools[0].length&&this.tools[0][e].txt&&(0,U.ubcSend)({page:this.page,type:"clk",value:"input-tools-".concat(this.tools[0][e].txt)})}},onInput:function(t){this.$emit("input",t)},onBlur:function(){var t=this;this.isFocus=!1,this.isShowBoxExp&&(this.isExp=!1),this.$emit("blur"),e((function(){t.$emit("tapPlus",t.isExp)}),400)},onSend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t=t.trim()){var o=this.item||{},i=o.minLen,n=o.maxLen,s=o.messageCallback,a=o.resetUrl,r=this.validateLen(t,i,n);if(r.length>0)this.$api.showToast({title:r,icon:"none"});else{(0,U.send)({type:"b",action:"sendMsg"});var c=L.getQueryObject(s);this.$emit("send",{callbackUrl:s,resetUrl:a,sdtype:e,params:L.extend({content:t,answerType:M.answerType.USER,contentType:M.contentType.TEXT},{content:c.value,answerType:c.answerType,contentType:c.contentType})}),this.val="",this.voiceValue="","disableInput"===this.item.afterSendMode&&(this.isEnable=!1)}}},onSendFormId:function(t){this.$emit("sendFormId",t)},onFocus:function(t){this.isFocus=!0,this.isShowBoxExp&&(this.isExp=!1),this.isExpHistory=!1,this.$emit("focus",t)},onCancel:function(t){var o=this;this.val=t,e((function(){o.$emit("cancel",o.isExp)}),400)},validateLen:function(t,e,o){var i="",n=Number(e),s=Number(o);return s>0&&n>0&&!(t.length>=n&&t.length<=s)&&(i="".concat(n,"-").concat(s)),n>0&&isNaN(s)&&t.length<n&&(i="至少".concat(n)),s>0&&isNaN(n)&&t.length>s&&(i="最多".concat(s)),i.length?"请输入".concat(i,"个字"):""},toggleMulti:function(){this.isShowMultiCol=!this.isShowMultiCol},onStyChange:function(t){this.isShowMultiCol=!1,this.$emit("styChange",t)},onTouch:function(t){this.$refs.inputh5&&this.$refs.inputh5.getTextareaDom()&&(this.$refs.inputh5.getTextareaDom().blur(),t&&t.stopPropagation&&t.stopPropagation())},btnTap:function(t){this.$emit("btnTap",t)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{class:"swan"!==t.env||t.isFocus?"":"swan-security-padding-bottom ip-swan-security"}]],[t.item.inputHidden?[]:[,[,[[{target:"swan"}]],[t.handleBtns&&t.handleBtns.length?[,[[{"scroll-x":""}]],[,t._l(t.handleBtns,(function(e,o){e.badge,(!e.icon||e.icon&&"none"!==e.icon)&&t._pp({name:e.icon||"pingjiayisheng","font-size":"0.13rem",compId:(t.compId?t.compId:"$root")+",0-"+o}),e.text,e.badge&&(e.badge>99||e.badge)})),1]]:[],,[[t._pp({"confirm-hold":t.confirmHold,"hide-border-top":!(!t.handleBtns||!t.handleBtns.length),"handle-btns":t.handleBtns,value:t.val,"adjust-position":t.adjustPosition,"is-exp-enable":t.tools&&t.tools.length>0&&t.isShowBoxExp,placeholder:t.item.placeholder,"is-enable":t.isEnable,"primary-color":t.primaryColor,"is-show-pic":t.isShowPic,"is-show-voice":t.isShowVoice,"is-show-history":t.isShowHistory,"is-exp-history":t.isExpHistory,"is-show-multi-col":t.isShowMultiCol,"is-tool-multi":t.isToolMulti,"max-len":t.item.maxLen,"min-input-len":t.item.minInputLen||0,"with-use-push":t.withUsePush,"subscribe-params":t.subscribeParams,"input-type":t.item.inputType,compId:(t.compId?t.compId:"$root")+",1","v-show":t.inputShow})]]]]],t.isExp?[,[t.item.box2&&t.item.box2.length?[,[,[[{class:["ipt-tools-wrap",t.isShowMultiCol?"":"ipt-tools-line"]}]],t._l(t.tools,(function(e,o){t._l(e,(function(e,o){!t.isEnable&&e.info&&("uploadpic"==e.info.type||e.info.type),"empty"!==e&&(e.isExp&&t.primaryColor,e.icon,e.txt)}))})),1]]:[t.item.box&&t.item.box.length?[,t._l(t.tools,(function(e,o){t._l(e,(function(e,i){!t.isEnable&&e.info&&("uploadpic"==e.info.type||e.info.type),"empty"!==e&&(e.micon?e.micon:t._pp({name:e.icon,"font-size":"25px",compId:(t.compId?t.compId:"$root")+",4-"+i+"_"+o}),e.txt)}))})),1]:[]]]]:[],,[[{target:"swan"}]],[t.isExpVoice?[,[[t._pp({"voice-value":t.voiceValue,compId:(t.compId?t.compId:"$root")+",5"})]]]:[]],t.isExpHistory?[,[[t._pp({compId:(t.compId?t.compId:"$root")+",6"})]]]:[],t.needPh?[,[[{style:{height:t.isFocus?"20px":"0px"}}]]]:[]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=j})),window.define("1555",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1556)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1556",(function(t,e,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5),S=t(6);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var T=t(25),P=_(t(311)),k=_(t(283)),D=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==S(t)&&"function"!=typeof t)return{default:t};var o=$(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}i.default=t,o&&o.set(t,i);return i}(t(36)),B=t(292);function $(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return($=function(t){return t?o:e})(t)}var E=(0,T.vueCompCreator)({options:{addGlobalClass:!0},props:{content:{type:Object,default:function(){return{text:"",btn:[]}}},disabled:{type:Boolean,default:!1},needLogin:{type:Boolean,default:!1},page:{type:String,default:""}},components:{LoginBtn:P.default,CIcon:k.default},created:function(){this.fmtTip()},beforeDestroy:function(){this.timer=null},data:function(){return{countDown:0,tips:[],timer:null}},computed:{getBtnWid:function(){var t=this.content.btn.length-1;return this.content.btn.length>1?this.content.hasSmallBtn?"calc("+100/t+"% - "+(this.content.smallWidth/t+13.5)+"px)":"calc("+100/this.content.btn.length+"% - 5px)":"100%"}},watch:{"content.text":function(){this.fmtTip()}},methods:{fmtTip:function(){var t=this;this.content.text&&(Array.isArray(this.content.text)?this.tips=[].concat(this.content.text):this.tips=[{text:this.content.text}],this.tips.forEach((function(e,i){if(e.text&&e.text.indexOf("{")>-1){var n=e.text;t.countDown=t.content.duration,t.$set(t.tips[i],"text",n.replace(/{duration}/,'<span style="color:#ff6050;font-weight:bold;">\n                        '.concat(D.fmtCountDown(t.countDown),"</span>"))),t.timer=o((function(){t.countDown>1?t.countDown-=1:(t.countDown=0,t.timer=null),t.$set(t.tips[i],"text",n.replace(/{duration}/,'<span style="color:#ff6050;font-weight:bold;">'.concat(D.fmtCountDown(t.countDown),"</span>")))}),1e3)}})))},onBtnTap:D.throttle((function(t){(0,B.ubcSend)({page:this.page,type:"clk",value:"bottom-btn-".concat(t.title)}),this.$emit("bottomBtnTap",t)}),2e3),onTapStart:function(t){this.$emit("onTapStart",t)},onLoginFail:function(){this.$emit("onLoginFail")}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{style:{background:t.content.bgColor||"#fff"}}]],[t.tips&&t.tips.length?[,t._l(t.tips,(function(t,e){t.color,t.text})),1]:[],t.content.optionTip&&t.content.optionTip.tipList&&t.content.optionTip.tipList.length>0?[,t._l(t.content.optionTip.tipList,(function(t,e){t.color,t.text&&t.text,t.iconUrl&&(t.iconUrl,t.iconWidth)})),1]:[],,[t.content.icon&&t.content.icon.name?[,[,[[{class:"m-icon-"+t.content.icon.name}]],,[t.content.icon.title]]]:[],t.content.hasSmallBtn?[,t._l(t.content.btn,(function(e,o){e.type,e.fontColor,e.bgColor,e.bgColor,e.width||t.getBtnWid,t.disabled,e.width,e.boxShadow,e.icon&&e.title&&(t._pp({name:e.icon,"font-size":"16px",color:e.iconColor,compId:(t.compId?t.compId:"$root")+",0-"+o}),e.color,e.fontSize,e.title),e.title&&!e.icon&&e.title,e.desc&&e.desc})),1]:[t.needLogin?[,t._l(t.content.btn,(function(e,o){e.type,e.fontColor,e.bgColor,e.bgColor,t.content.btn.length>1&&t.content.btn.length,t.disabled,e.boxShadow,t._pp({disabled:!1,compId:(t.compId?t.compId:"$root")+",1-"+o}),e.title&&e.title,e.desc&&e.desc})),1]:[,t._l(t.content.btn,(function(e,o){e.type,e.fontColor,e.bgColor,e.bgColor,t.content.btn.length>1&&t.content.btn.length,t.disabled,e.boxShadow,e.title&&(e.title,e.oldPrice),e.desc&&e.desc})),1]]]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=E})),window.define("1672",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(1673)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("1673",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=_(t(605)),P=_(t(283)),k=(0,S.vueCompCreator)({props:{showCloseIcon:{type:Boolean,default:!1},dynamics:{type:Array},exp:{type:String,default:"whole"},height:{type:Number,default:38},iconSize:{type:Number,default:24},textLeft:{type:String,default:".1rem"},delay:{type:Number,default:-1},hideBgColor:{type:Boolean,default:!1}},data:function(){return{icon:"https://expertimg.cdn.bcebos.com/expertcms%2Fmed%2Fallhealth%2Fprofile%2Fprofile_avatar.png",currentIndex:-1,timer:3e3,showTrans:!1,showBubbleBar:!0}},components:{"c-avatar":T.default,"c-icon":P.default},watch:{currentIndex:function(t){this.carouselLoop(t)}},created:function(){this.carouselLoop(0)},methods:{onClose:function(){this.showBubbleBar=!1},carouselLoop:function(t){var o=this;t===this.dynamics.length-1?e((function(){o.currentIndex=0,o.showTrans=!1}),this.timer/2):this.delay>=0&&0===t?e((function(){o.currentIndex+=1,o.showTrans=!0}),this.delay):e((function(){o.currentIndex+=1,o.showTrans=!0}),this.timer)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[[{class:t.showBubbleBar?"":"hidden-style"}]],[t.showBubbleBar&&"whole"===t.exp?[,[[{style:{transform:"translateY("+-t.currentIndex*t.height+"px)",transition:t.showTrans?"all .7s cubic-bezier(0.2, 0, 0.2, 1)":"none"}}]],t._l(t.dynamics,(function(e,o){t.currentIndex,t.showTrans,t.height,t._pp({src:t.icon,size:t.iconSize,compId:(t.compId?t.compId:"$root")+",0-"+o}),t.textLeft})),1]:[t.showBubbleBar&&t.currentIndex>=0?[,[[{class:{"bubble-item-white":"whitetext"===t.exp,"bubble-text--transparent":t.hideBgColor},style:{height:t.height+"px"}}]],[,[[{style:{transform:"translateY("+-t.currentIndex*t.height+"px)",transition:t.showTrans?"all .7s cubic-bezier(0.2, 0, 0.2, 1)":"none"}}]],t._l(t.dynamics,(function(e,o){t.currentIndex,t.showTrans,t.height,t._pp({src:t.icon,size:t.iconSize,compId:(t.compId?t.compId:"$root")+",1-"+o}),t.textLeft,t.showCloseIcon,t._pp({name:"close","font-size":"18px",compId:(t.compId?t.compId:"$root")+",2-"+o})})),1]]:[]]]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=k})),window.define("3095",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3096)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3096",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=t(25),S=x(t(283)),T=t(292),P=(0,_.vueCompCreator)({props:{data:{type:Object,default:function(){return{}}},smallModal:{type:Boolean,default:!1},page:{type:String,default:""}},components:{"c-icon":S.default},data:function(){return{showModal:!0,showSmall:!0}},created:function(){var t=(new Date).getTime(),e=this.$api.getStorageSync("cmpopup-last-time");e&&t-e<864e5||this.data&&this.data.isPop?this.showModal=!1:(0,T.ubcSend)({type:"view",value:"newuser_coupons",page:this.page})},methods:{onClose:function(){this.showModal=!1;var t=(new Date).getTime();this.$api.setStorageSync("cmpopup-last-time",t),this.$emit("closePop")},onOpen:function(){this.showModal=!0,this.$emit("openPop"),(0,T.ubcSend)({type:"view",value:"newuser_coupons_open",page:this.page})},hideSmallBtn:function(){this.showSmall=!1}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[t.showModal&&t.data?[,[t.data.couponImg?[,[,[[{src:t.data.couponImg,width:"100%",height:"100%",mode:"widthFix"}]],,[,[t.data.beginTime],,,[t.data.endTime]],,[[t._pp({name:"close-circle","font-size":"40px",compId:(t.compId?t.compId:"$root")+",0"})]]]]:[]]]:[],t.showSmall&&!t.showModal&&t.smallModal&&t.data?[,[,[[t._pp({name:"close-circle","font-size":"15px",compId:(t.compId?t.compId:"$root")+",1"})]],t.data.smallCouponImg?[,[,[[{src:t.data.smallCouponImg,mode:"widthFix"}]]]]:[]]]:[]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=P})),window.define("3107",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3108)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3108",(function(t,e,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=_(t(24)),P=(0,S.vueCompCreator)({props:{doctorTips:{type:Object,default:function(){return{}}}},data:function(){return{text:[],originText:[],defaultExpertLogo:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=3070734021,137864038&fm=179&app=35&f=PNG?w=144&h=144&s=88011F7C4F236B241E5E49D9030070B9",defaultTiemoutText:["等待医生回复，已通知医生尽快接诊。"]}},components:{"b-img":T.default},mounted:function(){this.doctorTips.text&&this.handleCountDownTime()},destroyed:function(){clearInterval(this.timer)},methods:{handleCountDownTime:function(){var t=this;this.originText=this.doctorTips.text;var e=this.doctorTips.duration;this.replaceTextToTime(this.fmtCountDownMinutes(e)),this.timer=o((function(){e-=60,t.replaceTextToTime(t.fmtCountDownMinutes(e)),e<0&&(clearInterval(t.timer),t.text=t.doctorTips.timeoutText||t.defaultTiemoutText)}),6e4)},replaceTextToTime:function(t){this.text=this.originText.map((function(e){return e.replace("{{duration}}",'<span style="color:#fd503e;">'.concat(t,"分钟</span>"))}))},fmtCountDownMinutes:function(t){var e=Math.floor(t),o=Math.floor(e/60);return o<10&&(o="0"+o),o},onTextTap:function(t){t.clkable&&"customer"===t.type&&this.$emit("onOpenDialog",t)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[t.doctorTips&&"1"===t.doctorTips.isShow?[,[,,[,[[t._pp({"has-compress":"",src:t.doctorTips.icon||t.defaultExpertLogo,"has-border":"",width:"0.44rem",height:"0.44rem",extra:{column:2},compId:(t.compId?t.compId:"$root")+",0"})]],,[,[[{class:{"c-line-clamp1":!t.doctorTips.subtitle}}]],[t.doctorTips.title?[,[t.doctorTips.title]]:[],t.doctorTips.subtitle?[,[t.doctorTips.subtitle]]:[]],t.text?[,t._l(t.text,(function(t,e){})),1]:[],t.doctorTips.subText?[,t._l(t.doctorTips.subText,(function(t,e){t.color,t.text})),1]:[]]]]]:[]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=P})),window.define("3110",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3111)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3111",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=t(25),S=x(t(283)),T=x(t(3108)),P=(0,_.vueCompCreator)({props:{tip:{type:Array,default:function(){return[]}},progress:{type:Object,default:function(){return{}}},topNavBarHasBg:{type:Number,default:0},doctorTips:{type:Object,default:function(){return{}}}},data:function(){return{rate:100}},components:{CIcon:S.default,ImCardDoctorReception:T.default},lifetimes:{attached:function(){}},methods:{},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[[{class:{"step-bg":!!t.topNavBarHasBg}}]],[t.tip&&t.tip.length?[,[[{class:{"step-top-has-bg":!!t.topNavBarHasBg}}]],[t._l(t.tip,(function(e,o){o<t.tip.length-1&&t._pp({name:"youjiantou","font-size":"16px",compId:(t.compId?t.compId:"$root")+",0-"+o}),e.selected,e.txt}))]]:[],t.progress&&t.progress.total?[,[,[[{style:{width:t.progress.current/t.progress.total*100+"%",backgroundColor:t.progress.progressColor?t.progress.progressColor:""}}]],t.progress.current>0&&(t.progress.current<t.progress.total||t.progress.showLast&&t.progress.current<=t.progress.total)?[,[[{class:[t.progress.showLast&&t.progress.current==t.progress.total?"last":"","small"===t.progress.size?"":"c-gap-inner-top-small c-gap-inner-bottom-small"],style:{left:t.progress.current/t.progress.total*100+"%",width:t.progress.width?t.progress.width+"px":"",marginLeft:t.progress.width?-t.progress.width/(t.progress.showLast&&t.progress.current==t.progress.total?1:2)+"px":""}}]],["\n                "+t.progress.text,t.progress.showTotal?[,["/"+t.progress.total]]:[]]]:[]]]:[],t.doctorTips&&"1"===t.doctorTips.isShow?[,[,[[t._pp({"doctor-tips":t.doctorTips,compId:(t.compId?t.compId:"$root")+",1"})]]]]:[]],,[[{style:{height:t.progress&&t.progress.total||t.topNavBarHasBg>0?".55rem":".38rem",display:t.progress&&t.progress.hideLayer?"none":"block"}}]],(t.doctorTips&&t.doctorTips.isShow,[])]]},staticRenderFns:[]}.render.bind(this)()}});o.default=P})),window.define("3173",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3174)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3174",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=x(t(11)),S=t(25),T=t(739),P=(0,S.vueCompCreator)({options:{addGlobalClass:!0},props:{zIndex:{type:String,default:"999"},layerPosition:{type:String,default:"right"},layerBottom:{type:String,default:"20vw"}},data:function(){return{page:"",layer:null,isLayerClosed:!1}},created:function(){var t=this,e=getCurrentPages();this.page=e[e.length-1].route,T.eventCenter.on("taskUi",this.eventHandler),T.eventCenter.on("taskUiInit",(function(){t.isLayerClosed=!1})),T.eventCenter.on("clearUi",(function(){t.layer=null}))},methods:{eventHandler:function(t){var e=t.page,o=t.uiType,i=t.ui;e&&e!==this.page||o===T.uiTypes.LAYER&&((i.isStart||i.isCompolete)&&(this.isLayerClosed=!1),this.isLayerClosed||(this.layer={message:i.message.split("\n"),txtColor:i.txtColor,bgUrl:i.bgUrl,closeBg:i.closeBg,progress:i.progress,backBtn:i.backBtn,proportion:i.proportion}))},closeLayerHandle:function(){this.isLayerClosed=!0,this.layer=null},jumpHandle:function(){var t=this.layer;if(t&&t.backBtn){if(this.$emit("backBtnClk",{data:t}),t.backBtn.inside&&t.backBtn.options){var e={};try{e=JSON.parse(t.backBtn.options)}catch(t){}!!e.appKey&&!!e.path?n.navigateToSmartProgram((0,_.default)((0,_.default)({},e),{},{fail:function(){}})):n.openBdboxWebview((0,_.default)((0,_.default)({},e),{},{fail:function(){}}))}else n.openAppByURL({url:t.backBtn.schema,fail:function(){}});this.layer=null}}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{style:{"z-index":t.zIndex}}]],[t.layer?[,[[{class:{"ui-layer-left":"left"===t.layerPosition},style:{bottom:t.layerBottom,"background-image":"url("+t.layer.bgUrl+")"}}]],[,[[{class:{"layer-text-noprogress":t.layer.progress&&!t.layer.progress.forecolor}}]],[,t._l(t.layer.message,(function(e,o){t.layer.txtColor})),1,t.layer.progress&&t.layer.progress.forecolor?[,[[{style:{"background-color":t.layer.progress&&t.layer.progress.backcolor}}]],[,[[{style:{width:t.layer.proportion+"%","background-color":t.layer.progress&&t.layer.progress.forecolor}}]]]]:[]],,[[{style:{"background-image":"url("+t.layer.closeBg+")"}}]]]]:[]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=P})),window.define("3176",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3177)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3177",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var x=t(25),_=(t(3178),t(288)),S=(0,x.vueCompCreator)({props:{checkCode:{type:Number,require:!0},callbackUrl:{type:String,require:!0}},data:function(){return{showPass:!1,aibotConfig:{ak:"f9b44ed71ec0ca1f5267cf5436340c51",type:"spin",maskModule:!0,hideCloseIcon:!0,slideConfig:{headTitle:"安全验证",bottomTitle:"为了你的帐号安全，本次操作需要进行安全验证"},spinConfig:{headTitle:"身份验证"}}}},methods:{reqCallback:function(t){var e=this;this.callbackUrl&&(0,_.request)({url:this.callbackUrl,data:{ds:t&&t.ds,tk:t&&t.tk}}).then((function(t){t&&t.data&&t.data.verify&&(e.showPass=!1)})).catch((function(t){console.err(t)}))}},lifetimes:{attached:function(){this.checkCode&&(this.showPass=!0)}},render:function(){return{render:function(){var t=this.$createElement;this._self._c;return[this.showPass?[,[,[[{target:"swan"}]],[,[,[,[[{id:"vcode",config:this.aibotConfig}]]]]]]]:[]]},staticRenderFns:[]}.render.bind(this)()}});o.default=S})),window.define("3178",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";function x(t){var e=t.type,o=t.id,i=t.cb,n=new(0,a.PassMachine.mkd)({type:e||"spin",id:o,ak:"f9b44ed71ec0ca1f5267cf5436340c51",initApiSuccessFn:function(){n.initVcode()},verifySuccessFn:function(t){i&&i(t)}});return n}Object.defineProperty(o,"__esModule",{value:!0}),o.getPassObj=function(t){return new Promise((function(e,o){if(r)if(a.PassMachine&&a.PassMachine.mkd)e(x(t));else{var i=r.createElement("script");i.async=!0,i.src="https://wappass.baidu.com/static/machine/js/api/mkd.js",r.body.appendChild(i),i.onload=i.onreadystatechange=function(){a.PassMachine&&a.PassMachine.mkd&&(e(x(t)),i.onload=i.onreadystatechange=null)}}else console.error("document未定义"),o()}))}})),window.define("3180",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3181)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3181",(function(t,e,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(6);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_(t)&&"function"!=typeof t)return{default:t};var o=P(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}i.default=t,o&&o.set(t,i);return i}(t(36));function P(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(P=function(t){return t?o:e})(t)}var k=(0,S.vueCompCreator)({props:{tips:{type:Object,default:function(){return{}}}},data:function(){return{text:[],originText:[]}},lifetimes:{attached:function(){this.text=this.tips.text,this.originText=this.tips.text,this.handleCountDownTime()},detached:function(){clearInterval(this.timer)}},methods:{handleCountDownTime:function(){var t=this,e=this.tips.duration;this.replaceTextToTime(T.fmtCountDown(e)),this.timer=o((function(){e-=1,t.replaceTextToTime(T.fmtCountDown(e)),e<0&&(clearInterval(t.timer),t.$emit("reloadPage"))}),1e3)},replaceTextToTime:function(t){this.text=this.originText&&this.originText.map((function(e){return e.replace("{{duration}}",'<span style="color:#fd503e;">'.concat(t,"</span>"))}))}},render:function(){return{render:function(){var t=this.$createElement;this._self._c;return[,[,this._l(this.text,(function(t,e){})),1]]},staticRenderFns:[]}.render.bind(this)()}});i.default=k})),window.define("3183",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3184)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3184",(function(t,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x,_){"use strict";var S=t(5);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var T=t(25),P=t(292),k=t(36),D=t(288),B=S(t(344)),$=S(t(283)),E=(0,T.vueCompCreator)({props:{item:{type:Object,default:{}},qid:{type:String,default:""},page:{type:String,default:""}},data:function(){return{isShow:!0,type:"",title:"",second:0,isCountdownFinish:!1,isExcuteAutoClose:!1,isTiggerAI:!1}},watch:{item:function(){},isShow:function(t){!1===t&&this.$emit("close")},type:function(t){var e=this;"tip"===t&&!this.isTiggerAI&&this.item.aiUrl&&(0,D.request)({url:this.item.aiUrl}).then((function(){e.isTiggerAI=!0}))}},components:{CButton:B.default,CIcon:$.default},created:function(){this.type=this.item.type,this.setData(),this.item.second&&this.countdown(),(0,P.ubcSend)({page:this.page,type:"view",value:"im_countdown_rec"}),(0,P.send)({type:"b",action:"show_im_cr_pay_"+this.type,extra:{qid:this.qid}})},methods:{countdown:function(){var t=this,o=parseInt((Date.now()-1e3*this.item.distributeTime)/1e3,10);if(!this.isExcuteAutoClose&&"popup"===this.type&&o>=(this.item.delay||10)&&(this.onSwitchType(),this.isExcuteAutoClose=!0),o<this.item.second){var i=this.item.second-o;this.$set(this,"title",this.item.title.replace(/\{\{second\}\}/,'<span style="font-weight: bold;" class="c-color-orange c-gap-left-small c-gap-right-small">'.concat(i,"</span>"))),e((function(){t.countdown()}),1e3)}else this.isCountdownFinish=!0,this.title="正在为您优先连线医生...",this.item.titleArr&&this.titleArrInit()},setData:function(t){this.$set(this,"title",(t||this.item.title).replace(/\{\{limit\}\}/,'<span class="c-color-orange c-gap-left-small c-gap-right-small">'.concat(this.item.limit,"</span>")))},onTap:function(t){this.isExcuteAutoClose=!0;var e=t.name,o=t.callbackUrl;"cancel"===e?this.onSwitchType():"pay"===e&&this.toPay(o)},toPay:(0,k.throttle)((function(t){t&&this.$emit("questionReply",{callbackUrl:t}),(0,P.send)({type:"b",action:"im_cr_pay",extra:{qid:this.qid}})}),2e3),onSwitchType:function(){},titleArrInit:function(){var t=this,e=0;this.setData(this.item.titleArr[e]),o((function(){e<t.item.titleArr.length?(t.setData(t.item.titleArr[e]),e++):(e=0,t.setData(t.item.titleArr[e]),e=1)}),1*this.autoTabTime||4e3)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{"v-show":t.isShow}]],[,[[{"v-show":"popup"===t.type}]],[(t.isExcuteAutoClose,[]),,[[{class:t.item.btn&&0!==t.item.btn.length?"":"c-gap-inner-bottom"}]],[t.item.btn&&0!==t.item.btn.length?[]:[,[[t._pp({name:"close","font-size":"16px",compId:(t.compId?t.compId:"$root")+",0"})]]],,[[{src:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2666215013,2658882851&fm=179&app=35&f=GIF?w=300&h=150&s=A3518B6AD5E7BB510C40D41B0000E0C2"}]],t.title?[,[[{nodes:t.title}]]]:[],t.item.btn&&t.item.btn.length>0?[,[t.item.tip?[,[,,[t.item.tip]]]:[],,[,t._l(t.item.list,(function(e,o){t.item.list.length,e.icon,e.text})),1],,[,,[t.item.price],t.item.orgPrice?[,[t.item.orgPrice]]:[]],t.item.btn&&t.item.btn.length>0?[,t._l(t.item.btn,(function(e,o){t._pp({type:e.type,"primary-color":e.primary,background:e.bg,"font-size":16,"font-weight":"700",shadow:"","border-radius":"20px",compId:(t.compId?t.compId:"$root")+",1-"+o}),e.text})),1]:[]]]:[]]],,[[{"v-show":"tip"===t.type}]],[,[,,[t.title?[,[[{nodes:t.title}]]]:[]]]]]]},staticRenderFns:[]}.render.bind(this)()}});n.default=E})),window.define("3186",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3187)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3187",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=x(t(11)),S=t(25),T=x(t(283)),P=x(t(324)),k=x(t(619)),D=x(t(437)),B=x(t(392)),$=x(t(406)),E=t(288),M=t(36),U=t(292),L=(0,S.vueCompCreator)({props:{popupShow:{type:Boolean,default:!1},groupData:{type:Object,default:function(){return{}}},addImg:{type:Boolean,default:!1},page:{type:String,default:""}},options:{addGlobalClass:!0},components:{CIcon:T.default,CPopup:P.default,CCascader:k.default,ImageCollect:$.default,CLabel:D.default,CDialog:B.default},data:function(){return{scrollView:!0,showMainPopup:!1,showDepartment:!1,showPatients:!1,showAge:!1,departmentData:[],collectList:[],mainPopup:{},nameTip:"输入咨询人姓名",editPatientInfo:{realName:0,name:"",age:"",ageValue:"",gender:"",content:"",imgInfoList:[],contactId:"",imgLimit:3},patientInfoCache:null,patientsPopup:null,departmentPopup:null,agePopup:null,picIds:[],curImgs:[],canSubmit:!0,ageScrollIndex:30,nameFocus:!1,isDirected:!1,dialogCont:{show:!1,title:"是否删除就诊人",content:"就诊人删除后将不可恢复，确定删除该就诊人吗",btnOpts:[{event:"cancel",text:"我再想想"},{event:"confirm",text:"立即删除",color:"#FF6050"}]},delPatientId:"",autoUpload:!1}},watch:{popupShow:function(t){this.showMainPopup=t,this.patientInfoCache&&(this.editPatientInfo=(0,M.deepCopy)(this.patientInfoCache),this.departmentPopup.defaultValue=(0,M.deepCopy)(this.departmentPopup.defaultValue),this.curImgs=this.editPatientInfo.imgInfoList||[],this.ageScrollIndex=(0,M.deepCopy)(this.agePopup.defaultIndex))},groupData:function(t){if(t.popupInfo){this.mainPopup=t.popupInfo,this.patientInfoCache=(0,M.deepCopy)(t.popupInfo.patientInfo),this.editPatientInfo=(0,M.deepCopy)(this.patientInfoCache);var e=this.groupData.popupInfo,o=e.patientsPopup,i=e.departmentPopup,n=e.agePopup;this.patientsPopup=o||{},this.departmentPopup=i||{},this.agePopup=n||{},this.curImgs=this.editPatientInfo.imgInfoList||[],this.ageScrollIndex=(0,M.deepCopy)(n.defaultIndex),this.isDirected=t.isDirected}},addImg:function(t){this.autoUpload=t}},created:function(){(0,U.ubcSend)({page:this.page,type:"view",value:"im_consult_popup_group"})},mounted:function(){},methods:{chooseGender:function(t){this.editPatientInfo.gender=t},handleBtnTap:function(){this.show=!0},handlePopupClose:function(){this.show=!1},contentInput:function(t){var e=this.isDirected,o=t.detail.value;e&&o.length<10||!e&&o.length<2?this.canSubmit=!1:(this.canSubmit=!0,this.editPatientInfo.content=o)},onDepartmentPop:function(){this.showDepartment=!0,this.departmentData=this.groupData.popupInfo.departmentPopup.options},onPatientChoose:function(){this.showPatients=!0},onAgePop:function(){this.showAge=!0},handleLastColumnItemTap:function(t){t.option.value!==this.department&&(this.editPatientInfo.department=t.option.value,this.showDepartment=!1)},onDepartmentClose:function(){this.showDepartment=!1},onPatientsClose:function(){this.showPatients=!1},onWrapClose:function(){this.$emit("popupGroupClose",this.groupData)},onPatientTap:function(t){this.editPatientInfo=(0,_.default)((0,_.default)({},this.editPatientInfo),t),this.showPatients=!1},onAgeTap:function(t,e){this.editPatientInfo.age=t.name,this.editPatientInfo.ageValue=t.value,this.ageScrollIndex=e,this.showAge=!1},onNameInput:function(t){this.editPatientInfo.name=t.detail.value},onNameFocus:function(){this.editPatientInfo.name=""},onNameBlur:function(){this.nameFocus=!1},onAgeClose:function(){this.showAge=!1},imageCollectChange:function(t){t.images&&t.images.length>this.editPatientInfo.imgLimit?(t.images.splice(this.editPatientInfo.imgLimit),this.curImgs=t.images):this.curImgs=t.images},getPicIds:function(){var t=[];return this.curImgs.forEach((function(e){t.push(e.picID)})),t.join(",")},submit:function(){var t=this;if(this.canSubmit){var e=this.mainPopup.btnInfo||{},o=this.getPicIds(),i={name:this.editPatientInfo.name||"",gender:this.editPatientInfo.gender,age:this.editPatientInfo.ageValue,department:this.editPatientInfo.department||"",content:this.editPatientInfo.content,contactId:this.editPatientInfo.contactId||"",picID:o};e.callbackUrl&&(this.$api.showToast({title:"咨询信息提交中……",icon:"none",mask:!0}),(0,E.request)({method:"POST",url:e.callbackUrl,data:i,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){t.$emit("questionReply",e.data),t.onWrapClose()})).catch((function(t){console.log(t)})))}},onAddConsultant:function(t){"add"===t.btnType?(this.showPatients=!1,this.editPatientInfo=(0,_.default)((0,_.default)({},this.editPatientInfo),{realName:0,age:"20岁",ageValue:"20",name:"",contactId:""})):this.showPatients=!1},onDelete:(0,M.throttle)((function(t){this.delPatientId=t.contactId,this.dialogCont.show=!0}),2e3),handleDialogBtnTap:function(t){var e=this;if("confirm"===t.btn.event){var o=this.patientsPopup.params&&this.patientsPopup.params.deleteUrl,i=this.delPatientId;if(o){this.dialogCont.show=!1;var n=this.patientsPopup.options.slice();this.$api.showLoading({title:"正在删除中..."}),(0,E.request)({url:o,data:{patientId:i}}).then((function(){n.forEach((function(t,e){t.contactId===i&&n.splice(e,1)})),e.patientsPopup.options=n,e.$api.hideLoading()})).catch((function(){e.$api.hideLoading(),e.$api.showToast({title:"删除失败，请重试",icon:"none"})}))}}"cancel"===t.btn.event&&(this.dialogCont.show=!1)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[[t._pp({show:t.showMainPopup,title:"咨询信息","show-close":!0,"visibility-only-mask":!0,"show-title-line":!0,"show-close-handler":!1,height:"70vh","max-height":"70vh",background:"#f5f5f5","background-top":"#f5f5f5","row-tile":!0,"scroll-view":t.scrollView,compId:(t.compId?t.compId:"$root")+",0"})]],[t.editPatientInfo?[,[,[,[[{class:t.editPatientInfo.realName?"higher-item":""}]],[,[,(t.editPatientInfo.realName,[])],t.patientsPopup&&t.patientsPopup.options?[,[,,[[t._pp({name:"chuangzuo","font-size":"14",compId:(t.compId?t.compId:"$root")+",1"})]]]]:[]],,,[,t.editPatientInfo.realName?[,["\n                        "+t.editPatientInfo.name+"\n                    "]]:[,[[{placeholder:t.nameTip,"placeholder-class":"gray-font",type:"text",maxlength:20}],[{value:t.editPatientInfo.name}]]]],,,[,t.editPatientInfo.realName?[,["\n                        "+("0"===t.editPatientInfo.gender?"男":"女")+"\n                    "]]:[,[,[[{class:"0"===t.editPatientInfo.gender?"btn-active":""}]],,[[{class:"1"===t.editPatientInfo.gender?"btn-active":""}]]]]],,,[,t.editPatientInfo.realName?[,[" "+t.editPatientInfo.age]]:[,["\n                        "+t.editPatientInfo.age+"\n                        ",t.editPatientInfo.realName?[]:[,[[t._pp({name:"right","font-size":"10",compId:(t.compId?t.compId:"$root")+",2"})]]]]]]],t.editPatientInfo.department&&!t.isDirected?[,[,,,[,,["\n                        "+t.editPatientInfo.department+"\n                        ",,[[t._pp({name:"right","font-size":"10",compId:(t.compId?t.compId:"$root")+",3"})]]]]]]:[],,[,,[[{placeholder:t.isDirected?"请输入问题描述":"请输入问题描述（最少2个字）",maxlength:t.isDirected?200:500,disabled:!1,"placeholder-class":"textarea-placeholder"}],[{value:t.editPatientInfo.content}]],,[,[[t._pp({"auto-upload":t.autoUpload,tip:"上传患处、用药、检查报告等图片，仅您与医生可见","add-style":{border:"1px dotted #F0f0f0"},"del-style":{background:"#858585",color:"#fff",width:"18px",height:"18px",display:"flex","justify-content":"center","align-items":"center"},"img-width":.54,"line-num":6,"img-file-size":20971520,inputname:t.editPatientInfo.name,limit:t.editPatientInfo.imgLimit,multi:!0,value:t.curImgs,compId:(t.compId?t.compId:"$root")+",4"})]]]],t.mainPopup&&t.mainPopup.btnInfo&&t.mainPopup.btnInfo.btnText?[,[,[[{class:t.canSubmit?"":"btn-disabled"}]],["\n                    "+t.mainPopup.btnInfo.btnText+"\n                "]]]:[]]]:[]],t.departmentPopup?[,[,[[t._pp({show:t.showDepartment,title:"科室信息","show-close":!0,"show-close-handler":!1,"show-title-line":!0,"row-tile":!0,"stop-scroll-through":"","z-index":"922",compId:(t.compId?t.compId:"$root")+",5"})]],[,[[t._pp({"stop-scroll-through":"","max-height":"70vh","default-value":t.departmentPopup.defaultValue,options:t.departmentData,column:2,"column-width-ratio":[1,1],"primary-color":"#00C8C8",compId:(t.compId?t.compId:"$root")+",6"})]]]]]:[],t.patientsPopup?[,[,[[t._pp({show:t.showPatients,title:"选择咨询人","show-close":!0,"show-close-handler":!1,"show-title-line":!0,"row-tile":!0,"scroll-view":t.scrollView,background:"#f5f5f5","background-top":"#f5f5f5",height:"60vh","max-height":"60vh","z-index":"922",compId:(t.compId?t.compId:"$root")+",7"})]],[,[t.patientsPopup.options&&t.patientsPopup.options.length>0?[,t._l(t.patientsPopup.options,(function(e,o){t.editPatientInfo.contactId,e.contactId,e.name&&e.name,e.gender&&(e.gender,t._s(e.age?"/":"")),e.age&&e.age,e.label&&t._pp({text:e.label,color:"box_green",compId:(t.compId?t.compId:"$root")+",8-"+o}),"1"===e.isCanDel&&t.editPatientInfo.contactId!==e.contactId&&t._pp({name:"del","font-size":"15",compId:(t.compId?t.compId:"$root")+",9-"+o,style:{color:"#858585"}})})),1]:[],,[,[t.patientsPopup.btnText?[,[t.patientsPopup.btnType?[,[[t._pp({name:"add-solid","font-size":"9",compId:(t.compId?t.compId:"$root")+",10",style:{color:"#00C8C8"}})]]]:[],"\n                            "+t.patientsPopup.btnText+"\n                        "]]:[]]]]]]]:[],t.agePopup?[,[,[[t._pp({show:t.showAge,"show-close":!1,"show-close-handler":!1,"show-title-line":!1,"row-tile":!0,height:"70vh","z-index":"922",compId:(t.compId?t.compId:"$root")+",11"})]],[,[[{"scroll-y":!0,"scroll-into-view":"scroll"+t.editPatientInfo.ageValue,"scroll-with-animation":!0}]],t._l(t.agePopup.options,(function(e,o){e.value,e.name&&(t.editPatientInfo.ageValue,e.value,e.name)})),1]]]:[],,[[t._pp({show:t.dialogCont.show,title:t.dialogCont.title,content:t.dialogCont.content,"content-text-align":"center","btn-opts":t.dialogCont.btnOpts,"z-index":"923",compId:(t.compId?t.compId:"$root")+",12"})]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=L})),window.define("3189",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3190)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3190",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var x=(0,t(25).vueCompCreator)({props:{leaveDialog:{type:Object,default:function(){return{}}}},data:function(){return{value:"",iptfocus:!1}},methods:{},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,["wzInfoDialog"===t.leaveDialog.type||"wzPhoneDialog"===t.leaveDialog.type||"wzFillinDialog"===t.leaveDialog.type||"wzChatBackDialog"===t.leaveDialog.type?[[t.leaveDialog.img?[,[,[[{src:t.leaveDialog.img}]]]]:[],t._l(t.leaveDialog.texts,(function(t,e){}))]]:["wzCouponDialog"===t.leaveDialog.type?[[,[,[,[,[t.leaveDialog.header]],,[,[,[t.leaveDialog.title],,[t.leaveDialog.subTitle]]]]]]]:[]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=x})),window.define("3192",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3193)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3193",(function(t,e,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=t(40),P=t(36),k=t(292),D=_(t(283)),B=(0,S.vueCompCreator)({props:{tip:{type:Object,default:{text:"",duration:"",turn:"",rightIcon:{}}},showBottomLine:{type:Boolean,default:!0},page:{type:String,default:""}},data:function(){return{text:"",timeRefresh:!1}},created:function(){(0,k.ubcSend)({page:this.page,type:"view",value:"im_top_tip"})},watch:{tip:function(){this.fmtTip()},timeRefresh:function(t){t&&this.timeInterval()}},components:{CIcon:D.default},lifetimes:{attached:function(){this.fmtTip()}},methods:{onTap:function(){(0,T.navigate)({url:this.tip.rightIcon.msUrl||this.tip.rightIcon.sfUrl})},onTapCb:function(t){this.$emit("questionReply",{callbackUrl:t.callbackUrl})},fmtDuration:function(t){return t<=60&&t>=0?"".concat(t,"分钟"):t>60&&t<=1440?t%60==0?"".concat(Math.floor(t/60),"小时"):"".concat(Math.floor(t/60),"时").concat(t%60,"分"):t>1440?0===Math.floor(t%1440/60)?"".concat(Math.floor(t/24/60),"天"):"".concat(Math.floor(t/24/60),"天").concat(Math.floor(t%1440/60),"时"):"0分钟"},fmtDurationNew:function(t){this.timeRefresh=!0;var e=[],o=Math.floor(t/86400);o>0&&e.push(o+"天"),t-=86400*o;var i=Math.floor(t/3600);if(i>0&&e.push(i+"时"),o>0&&0===i)return e.slice(0,1).join("");t-=3600*i;var n=Math.floor(t/60);if(n>0&&e.push(n+"分"),e.length>1)return e.slice(0,2).join("");if(i>0&&0===n)return e.slice(0,1).join("");var s=t-=60*n;return s>0&&e.push(s+"秒"),e.slice(0,2).join("")},timeInterval:function(){var t=this;if(this.tip&&this.tip.duration)var e=o((function(){t.tip.duration>=0?(t.tip.duration--,t.fmtTip()):clearInterval(e)}),1e3)},fmtTip:function(){this.tip.textArr||(this.tip.text.indexOf("{{")>-1?this.text=this.tip.text.replace(/{{num}}/,"{{".concat(this.tip.num,"}}")).replace(/{{duration}}/,"{{".concat(1===this.tip.durationType?this.fmtDurationNew(this.tip.duration):this.fmtDuration(this.tip.duration),"}}")).replace(/{{turn}}/,"{{".concat(this.tip.turn,"}}")).replace(/{{time}}/,"{{".concat((0,P.formatDate)(1e3*(this.tip.time||0),this.tip.timeFormat||""),"}}")).replace(/{{/g,'<span style="color:#F60;font-weight:bold;">').replace(/}}/g,"</span>"):this.text=this.tip.text,this.tip.duration<=0&&(this.text="咨询即将关闭"))}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[t.tip.textArr?[,t._l(t.tip.textArr,(function(t,e){t.callbackUrl,t.txt})),1]:[,[[{nodes:t.text}]]],t.tip.rightIcon&&t.text?[,[[t._pp({name:"question-circle",compId:(t.compId?t.compId:"$root")+",0"})]]]:[],(t.showBottomLine,[])]]},staticRenderFns:[]}.render.bind(this)()}});i.default=B})),window.define("3195",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3196)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3196",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=x(t(12)),S=t(25),T=x(t(283)),P=t(40),k=t(292),D=(0,S.vueCompCreator)({props:{showCloseIcon:{type:Boolean,default:!1},content:{type:String,default:""},icon:{type:String,default:"https://expertimg.cdn.bcebos.com/expertcms%2Fmed%2Fallhealth%2Fprofile%2Fprofile_avatar.png"},btn:{type:Object,default:function(){}},ubcType:{type:String,default:""},type:{type:String,default:""}},data:function(){return this.ubcMap=(0,_.default)({msgNotice:{view:"ongoingNotice",close:"ongoingNoticeClose",btnTap:"ongoingNoticeLook"}},"msgNotice",{view:"updateService",close:"updateServiceClose"}),{showBubbleBar:!0}},components:{"c-icon":T.default},created:function(){this.handleUbcSend("view")},methods:{onClose:function(){this.showBubbleBar=!1,this.handleUbcSend("close","clk")},onBtnClick:function(t){t.navigateUrl&&(this.handleUbcSend("btnTap","clk"),(0,P.navigate)({url:t.navigateUrl}))},handleUbcSend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view";this.ubcType&&this.ubcMap[this.ubcType]&&t&&(0,k.ubcSend)({type:e,value:this.ubcMap[this.ubcType][t]})}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[{class:"updateService"===t.type?"update-bottom":""}]],[,[[{class:t.showBubbleBar?"":"hidden-style"}]],["updateService"===t.type?[,[,,[[t._pp({name:"upgrade","font-size":"14",compId:(t.compId?t.compId:"$root")+",0"})]]]]:[t.icon?[,[[{mode:"aspectFit",src:t.icon}]]]:[]],t.content?[,[[{nodes:t.content}]]]:[],t.btn?[,["\n            "+t.btn.text+"\n        "]]:[],,[[{"v-show":t.showCloseIcon}]],[,[[t._pp({name:"close",compId:(t.compId?t.compId:"$root")+",1"})]]]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=D})),window.define("3198",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3199)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3199",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var _=t(25),S=t(40),T=x(t(283)),P=(0,_.vueCompCreator)({components:{CIcon:T.default},props:{item:{type:Object,default:function(){return{}}}},methods:{onConfirm:function(t){this.close(),t.url&&(0,S.navigate)({url:t.url}),t.msUrl&&(0,S.navigate)({url:t.msUrl}),t.type&&"pay"===t.type&&t.callbackUrl&&this.$emit("btnTap",{type:"pay",url:t.callbackUrl})},close:function(){this.$emit("close",this.item)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[t.item.type&&"servicePkgPopup"===t.item.type?[,[t.item.title?[,[,[t.item.title]]]:[],t.item.list&&t.item.list.length>0?[,t._l(t.item.list,(function(e,o){e.title,e.newPrice,t._l(e.descList,(function(t,e){t.text})),e.btnInfo&&e.btnInfo.text&&e.btnInfo.text})),1]:[],t.item.closeIcon?[,[[{src:t.item.closeIcon}]]]:[]]]:[,[t.item.headIcon?[,[[{src:t.item.headIcon}]]]:[],t.item.closeIcon?[,[[t._pp({name:"close","font-size":"25px",compId:(t.compId?t.compId:"$root")+",0"})]]]:[],t.item.headTitle?[,[t.item.headTitle]]:[],t.item.paras&&t.item.paras.length>0?[,t._l(t.item.paras,(function(t,e){t.indent,"title"===t.type&&t.content,"text"===t.type&&t.content})),1]:[],t.item.inlineParas&&t.item.inlineParas.length>0?[,t._l(t.item.inlineParas,(function(t,e){t.indent,"link"===t.type&&t.content,"text"===t.type&&t.content})),1]:[],,[t.item.confirmBtn?[,[[{style:t.item.confirmBtn.style}]],[t.item.confirmBtn.text]]:[]]]]]]]},staticRenderFns:[]}.render.bind(this)()}});o.default=P})),window.define("3201",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3202)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3202",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=_(t(283)),P=t(292),k=(0,S.vueCompCreator)({created:function(){var t=this;(0,P.ubcSend)({page:this.page,type:"view",value:"coupon_tjhb_red"}),this.timer=e((function(){t.$emit("btntap",{type:"close",item:t.item})}),1e4)},beforeDestroy:function(){clearTimeout(this.timer)},props:{show:{type:Boolean,default:!1},item:{type:Object,default:function(){return{}}},page:{type:String,default:""}},data:function(){return{timer:null}},components:{CIcon:T.default},methods:{onTapBtn:function(t){var e="";"receive"===t?e="coupon_tjhb_get":"close"===t&&(e="coupon_tjhb_cancel"),(0,P.ubcSend)({page:this.page,type:"clk",value:e}),this.$emit("btntap",{type:t,item:this.item}),clearTimeout(this.timer)}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[,[,[,[t.item.text?[,[" 恭喜抽中"+t.item.text+" "]]:[],t.item.price&&t.item.type?[,[,[t.item.price],,[1===t.item.type?"元":"折"]]]:[],t.item.btn?[,[t.item.btn.text]]:[],t.item.validPeriod?[,[,[t.item.validPeriod]]]:[]]],,[,[[t._pp({name:"coupon-close","font-size":"35px",color:"#fff",compId:(t.compId?t.compId:"$root")+",0"})]]]]]]},staticRenderFns:[]}.render.bind(this)()}});i.default=k})),window.define("3204",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";var x=t(5)(t(3205)),_=t(25);Component((0,_.createComponent)(x.default))})),window.define("3205",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=t(25),T=_(t(283)),P=_(t(344)),k=_(t(24)),D=_(t(441)),B=t(288),$=t(292),E=(0,S.vueCompCreator)({props:{isShow:{type:Boolean,default:!1},item:{type:[Object,Array],default:function(){return{}}}},data:function(){return{isShareSuccess:!1}},components:{navigate:D.default,"c-icon":T.default,"c-image":k.default,"c-button":P.default},methods:{close:function(){this.$emit("close")},onTapBtn:function(t){var o=this;(0,$.send)({type:"b",action:"coupon_share"});var i=e((function(){o.share(t,"wz_share_time"),clearTimeout(i)}),6e3);this.$api.openShare({title:t.shareTitle,content:t.shareContent,path:t.sharePath,imageUrl:t.imageUrl,success:function(){share(t,"wz_share_cb")}})},share:function(t,e){var o=this;this.isShareSuccess||(0,B.request)({url:t.callback,data:{tg:e}}).then((function(t){o.isShareSuccess=!0,o.$emit("update",t.data)}))}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[t.isShow?[,[,[[{class:t.item.tickets&&1===t.item.tickets.length?"coupon-card-offset":""}]],[t.item.title?[,["\n            "+t.item.title+"\n        "]]:[],t.item.subtitle?[,["\n            "+t.item.subtitle+"\n        "]]:[],"mission"===t.item.style?[,t._l(t.item.tickets,(function(e,o){t._pp({src:e.icon,width:"37px",height:"37px",compId:(t.compId?t.compId:"$root")+",0-"+o}),e.title,e.subtitle,t._pp({type:"primary",background:"linear-gradient(42deg, #07D2C7 0%, #2FEBA7 100%)","border-radius":"20px",height:28,"font-size":13,compId:(t.compId?t.compId:"$root")+",1-"+o}),e.btnText})),1]:[,t._l(t.item.tickets,(function(t,e){t.priceText?(t.useStatus,t.priceText):(t.useStatus,t.price),t.useStatus,t.title,t.useStatus,t.subtitle,t.timecolor&&t.timecolor,t.useStatus,t.times,t.watermark&&t.watermark})),1],,["\n            "+t.item.warning+"\n            ",,[[t._pp({url:t.item.url,"class-name":"c-inline c-line-bottom",compId:(t.compId?t.compId:"$root")+",2"})]],["\n                "+t.item.linkText+"\n            "]],t.item.btnText?[,[t.item.btnText]]:[],,[[t._pp({name:"close","font-size":"20px",compId:(t.compId?t.compId:"$root")+",3",style:{color:"#fff"}})]]]]]:[]]},staticRenderFns:[]}.render.bind(this)()}});i.default=E})),window.define("3402",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.initAntibot=function(t,e){if(a&&a.BCat_2093)return void a.BCat_2093.miaowu({subid:e});if(t){var o=t.createElement("script");o.async=!0,o.src="https://dlswbr.baidu.com/heicha/mw/abclite-2093-s.js",t.body.appendChild(o)}else console.error("document未定义")},o.setSubid=function(t){a&&(a.__abbaidu_2093_subidgetf=function(){return t})}})),window.define("3409",(function(t,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C,x){"use strict";var _=t(5),S=t(6),T=_(t(32)),P=t(25),k=_(t(793)),D=_(t(3111)),B=_(t(3205)),$=_(t(3202)),E=_(t(3199)),M=_(t(1673)),U=_(t(3193)),L=_(t(395)),z=_(t(1556)),j=_(t(1385)),H=_(t(1184)),O=_(t(604)),R=_(t(3187)),N=_(t(282)),F=_(t(3190)),q=_(t(3184)),A=_(t(3181)),V=_(t(392)),W=_(t(1372)),G=_(t(3177)),Q=_(t(728)),J=_(t(3096)),Z=_(t(3196)),Y=_(t(3174)),X=ft(t(292)),K=ft(t(295)),tt=ft(t(36)),et=ft(t(290)),ot=t(288),it=t(297),nt=t(40),st=t(306),at=t(3368),rt=_(t(1294)),ct=t(299),lt=(_(t(291)),t(38)),pt=t(298),ut=(t(3402),t(3410)),dt=t(542),ht=t(739);function mt(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(mt=function(t){return t?o:e})(t)}function ft(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==S(t)&&"function"!=typeof t)return{default:t};var o=mt(e);if(o&&o.has(t))return o.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=n?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,o&&o.set(t,i),i}function gt(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return wt(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return wt(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return a=t.done,t},e:function(t){r=!0,s=t},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw s}}}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}var bt="",vt="";Page((0,P.createPage)({data:function(){var t=(0,lt.getSystemInfo)(),e=(t.statusBarHeight||0)+(t.navigationBarHeight||44);return this.query={},this.couponInfoApi="/med/api/popinfo",this.isWzHistory=!1,this.imgTaskList={preview:[],uploading:[],finish:[],fail:[]},this.firstShow=!0,this.needScroll=!1,this.needScrollToTop=!1,this.curPath="",this.baiduID="",this.imgNextMsg=null,this.selectlist=[],{isWeixinApp:!1,msgList:[],menu:[],topNavBar:null,progress:null,tip:null,leaveTip:"",couponTip:null,leaveBtn:ut.LEAVE_BTN_TRIAGE,isShowBtnBlock:!1,bottomTrickHeight:"0",input:null,placeholder:"",scrollHeight:0,coupon:null,isShowCoupon:!1,isVoice:"",isPopupShow:!1,isConsultGroupPopupShow:!1,leaveChatDialog:null,isChatBack:!1,groupData:{},popupItem:{},popupParams:{},dynamics:[],dynamicDelay:1e3,msgNotice:null,bottomBtn:null,topBarHeight:e,imgUploadList:[],qid:"",leaveDialog:{},retainingModal:null,backType:"",popupShow:!1,popupSlide:{},changePhonePopup:null,ongoing:null,isShowGoing:!1,countRec:null,whiteTipNew:null,topNavBarHasBg:0,normalDialog:null,showNormalDialog:!1,showFeedBack:!1,previewImgList:[],previewImgInd:0,previewImgShow:!1,baiduID:"",needScroll:!1,needScrollToTop:!1,imgNextMsg:null,message:"",select:null,disabled:!1,bottomBtnShow:!0,countRecs:null,hideHeader:!1,expertName:"",delaySetNavBar:!0,delaySetHeaderColor:!0,delayCompateDevices:!0,modify:{text:"修改",color:"#00C8C8"},resetUrl:"",resetTxt:"",timer:null,timer2:null,noDocdialog:{},realtimeCoupon:null,showRealtimeCoupon:!1,passCallbackUrl:"",checkCode:0,couponPopup:null,prevReplyInfo:null}},computed:{listenChange:function(){return{input:this.input,countRecs:this.countRecs}},isBaiduhi:function(){return!1}},watch:{msgList:function(t){var o=this,i=t[t.length-1];if(!i||("ask"!==i.name||"text"!==i.content[0].type)&&"loading"!==i.content[0].type){if(this.isShowBtnBlock=i&&(i.content||[]).filter((function(t){return"radioBtn"===t.type||"selectPop"===t.type||"selectPopAi"===t.type||"selectBottom"===t.type})).length>0,!0===this.isShowBtnBlock)if(i.content.filter((function(t){return"selectBottom"===t.type})).length>0){var n=i.content.filter((function(t){return"selectBottom"===t.type}))[0];this.$mpUpdated((function(){o.$api.createSelectorQuery().select("#selectBottomWrapper").boundingClientRect((function(t){var e=(t||{}).height;o.bottomTrickHeight=e?e-(n.privacyDeclaration&&n.privacyDeclaration.text?31:15)+"px":"300px",o.$refs.im&&o.$refs.im.scrollTo("bottom")})).exec()}))}else i.content.filter((function(t){return"radioBtn"===t.type})).length>0?this.setBottomPlaceholderHeight():this.bottomTrickHeight="1.2rem";var s=this.query,a=this.firstShow,r=!1;1===Number(s.isDirected)&&t&&t[0]&&"card"===t[0].type&&a&&(this.firstShow=!1,r=!0,t[0].content&&t[0].content[0]&&t[0].content[0].expertName&&(this.expertName=t[0].content[0].expertName)),this.input?e((function(){o.$refs.im?o.$refs.im.scrollTo(r?"top":"bottom"):(o.needScroll=!0,r&&(o.needScrollToTop=!0))}),300):this.$mpUpdated((function(){o.$refs.im&&o.$refs.im.scrollTo("bottom")}))}},isShowCoupon:function(t){this.placeholder=t?"":this.input&&this.input.placeholder}},components:{MedContainer:L.default,ImMsg:k.default,ImStep:D.default,ImCoupon:B.default,ImRealtimeCoupon:$.default,ImPopup:E.default,ImTopBubble:M.default,ImMsgNotice:Z.default,ImBottomBtn:z.default,ImInput:j.default,ImLayout:H.default,ImTip:U.default,TopBar:N.default,LeaveInfoDialogCont:F.default,ImPopupSlide:O.default,ImConsultPopupGroup:R.default,ImCountdownRec:q.default,ImCardTopTip:A.default,CImageViewer:rt.default,CDialog:V.default,ImInputSelect:W.default,Pass:G.default,ImPopupInfocollect:Q.default,CouponPopup:J.default,UgUi:Y.default},onInit:function(t){var e=this;this.query=t,a().globalData.chatBackDiaInfo={},this.initLog(),this.isBaiduhi&&(this.hideHeader=!0),this.$api.removeStorageSync("wz_im-enter-banner_appeal"),this.safeSdk().then((function(o){e.getFirstview(Object.assign({},t,JSON.parse(o))),e.$mpUpdated((function(){a().globalData.wzTaskFlag&&ht.taskSupplier&&ht.taskSupplier.execute({command:"clear",id:[831,867]}),e.initTaskInfo(e.query)}))})),this.getCouponInfo(t)},onReady:function(){this.getCurPath(),this.needScroll&&(this.$refs.im&&this.$refs.im.scrollTo("bottom"),this.needScroll=!1),this.needScrollToTop&&(this.$refs.im&&this.$refs.im.scrollTo("top"),this.needScrollToTop=!1)},onShow:function(){this.handleChatBackDialog();var t=this.query,e="";if(t.expert_id)e="专家图文";else{var o=t.type;e="phone"===o?"快速电话":"video"===o?"极速视频":"极速问诊"}(0,at.setPageInfo)({title:"百度健康_".concat(e)}),this.$refs.im&&this.$refs.im.setContentHei(),this.$mpUpdated((function(){})),this.executeTask("start")},onHide:function(){this.executeTask("pause")},destroyed:function(){clearTimeout(this.timer),clearTimeout(this.timer2)},methods:{safeSdk:function(){return(0,pt.getFkParamsAll)({ak:"6810",ev:"page_enter",dataApp:"eyJhcHBfa2V5IjoiNjgxMCIsImFwcF92aWV3IjoicHJvbW90ZSIsImJyb3dzZXJfdXJsIjoiaHR0cHM6Ly9zb2ZpcmUuYmFpZHUuY29tL2RhdGEvdWEvYWIuanNvbiIsImZvcm1fZGVzYyI6IiIsInNlbmRfaW50ZXJ2YWwiOjUwLCJzZW5kX21ldGhvZCI6M30="}).then((function(t){return t=JSON.stringify(t||{})})).catch((function(){}))},getCurPath:function(){var t=getCurrentPages(),e=t&&t.length?t[t.length-1]:{},o=e.route||"",i=tt.getQueryStr(e.options);this.curPath="/"+o+"?"+i},handleChatBackDialog:function(){if(this.leaveChatDialog&&this.leaveChatDialog.type&&"wzChatBackDialog"===this.leaveChatDialog.type){var t=a().globalData.chatBackDiaInfo,e=["100","102","107","109"].includes(t.chatStatus);t&&"serviceCard"===t.tapFrom&&t.chatPath&&e?this.isChatBack=!0:this.isChatBack=!1}else this.isChatBack=!1},onChatBackBtn:function(t){var e=a().globalData.chatBackDiaInfo.chatPath;"confirm"===t.btn.event?(0,nt.navigate)({url:this.curPath,openType:"redirect"}):"cancel"===t.btn.event&&(0,nt.navigate)({url:e})},getFirstview:function(t){var e=this,o=t.form,i=K.apiHost+(0,it.getWZTriageRequestUrl)(t);(0,X.ubcSend)({type:"view",value:"beforereq",ext:{pd:"wz",time:(new Date).getTime(),baiduID:this.baiduID,url:i,query:tt.getQueryStr(t)||""}}),(0,ot.request)({url:i,data:t,isFirstScreen:!0,isCheckLogin:!1}).then((function(i){var n=i.data;n&&n.leaveDialog?e.leaveDialog=n.leaveDialog:n&&n.leaveTip&&(e.leaveDialog={type:"normal",text:n.leaveTip}),n&&n.leaveChatDialog&&(e.leaveChatDialog=n.leaveChatDialog),n&&n.checkCode&&(e.checkCode=n.checkCode,e.passCallbackUrl=n.verifyCodeUrl),e.delaySetNavBar=!1,e.delaySetHeaderColor=!1,e.delayCompateDevices=!1,e.setData(n),(0,X.ubcSend)({type:"view",value:"reqsuccess",ext:{pd:"wz",time:(new Date).getTime(),baiduID:e.baiduID,query:tt.getQueryStr(t)||"",feReload:t.feReload||"",qid:i.data&&i.data.questionId}}),i.update.call(e,(function(){e.$mp.scope.removeSkeleton()})),e.$mpUpdated((function(){"indirechat_reconsult"===o&&e.scrollToBottom()}))})).catch((function(o){(0,X.ubcSend)({type:"view",value:"reqfail",ext:{pd:"wz",time:(new Date).getTime(),baiduID:e.baiduID,err:JSON.stringify(o||{}),url:i,query:tt.getQueryStr(t)||""}})}))},onTapBack:function(t){this.backType=t},closeRetainingModal:function(){this.backType=""},topbarHeightHandle:function(t){this.isWeixinApp||this.isBaiduhi||(this.topBarHeight=t)},handleAnchor:function(t){var o=this,i="";this.msgList.forEach((function(e){e.anchorID&&e.anchorID===t&&e.rand&&(i=e.rand)})),i&&this.$refs.im&&e((function(){o.$refs.im.scrollTo("stm_".concat(i))}),1e3)},handleWxCode:function(t){if(t&&"help"===t.wx&&!t.code){var e=u.href;e.replace(/([^?&=#]+)=([^?&#]*)/g,(function(t,o,i){"code"===o&&(u.href=tt.urlAddQuery(e,{code:i}))}))}},setData:function(t){var o=this;X.send({type:"view",action:"show",extra:{time:(new Date).getTime(),tools:t.tools&&t.tools.showmodel,qid:t.questionID&&t.questionID.toString()}}),(0,X.ubcSend)({type:"view",value:"show",ext:{time:(new Date).getTime(),tools:t.tools&&t.tools.showmodel,qid:t.questionID&&t.questionID.toString()}}),t.text&&this.showBottomBtn(t),t.navigateUrl&&(0,nt.navigate)({url:t.navigateUrl}),t.realtimeCoupon&&(this.$set(this,"realtimeCoupon",t.realtimeCoupon),this.timer2=e((function(){o.showRealtimeCoupon=!0}),3e3)),this.changeAppeal(t.serviceGrid&&t.serviceGrid.appeal);var i=this.msgList.slice(),n=this.getLoadingIndex()||i.length;[].splice.apply(i,[n,t.medMsgList.length].concat(t.medMsgList.map((function(t){return tt.extend(t,{rand:tt.rand()})})))),this.msgList=i,this.isVoice="1"===t.is_voice||this.isVoice,this.isWzHistory=1===t.isWzHistory||this.isWzHistory;var s="";if(t.medMsgList&&t.medMsgList.length){var a=t.medMsgList[t.medMsgList.length-1].content;"text"===a[a.length-1].type&&(s=a[a.length-1].callbackUrl)}if(this.input=t.tools&&tt.isObject(t.tools)&&"noinput"!==t.tools.showmodel?Object.assign({usable:1,isShowVoice:this.isVoice,isShowHistory:this.isWzHistory},t.tools,{messageCallback:s||t.tools.messageCallback}):null,this.tip=t.tip||this.tip,this.qid=t.questionId||this.qid,this.message=t.tools&&t.tools.inputTxt||"",this.placeholder=t.tools&&t.tools.placeholder||this.placeholder,this.bottomBtn=t.bottomBtn||this.bottomBtn,this.menu=t._menu||this.menu,this.progress=t.subTopProgressBar||this.progress,this.topNavBar=t.topNavBar||this.topNavBar,this.whiteTipNew=t.whiteTipNew||this.whiteTipNew,this.topNavBarHasBg=t.topNavBarHasBg||this.topNavBarHasBg,t.autoMsUrl&&this.autoNavi(t.autoMsUrl,{isNeedLgoin:1===t.isNeedLogin}),t.submitCallback&&this.submit(t.submitCallback),bt=tt.getDataByPath(t,"role.user.avatar")||bt,vt=tt.getDataByPath(t,"role.sys.avatar")||vt,this.countRec=null===t.countRec?null:t.countRec||this.countRec,this.normalDialog=t.normalDialog||this.normalDialog,this.normalDialog&&(this.showNormalDialog=!0),this.showFeedBack=t.showFeedBack||this.showFeedBack,this.dynamics=t.dynamics||this.dynamics,this.msgNotice=t.msgNotice||this.msgNotice,t.anchorID&&this.handleAnchor(t.anchorID),this.countRecs=null===t.countRecs?null:t.countRecs||this.countRecs,this.input&&this.input.select&&(this.select=this.input.select,this.select&&this.select.type&&"ai_multi"===this.select.type&&this.select.list&&this.select.list.length>0)){var r=!0;this.select.list.map((function(t){t.isChk&&(r=!1)})),this.disabled=r}this.couponTip=t.couponTips||this.couponTip,this.retainingModal=t.retainingModal||this.retainingModal,this.resetUrl=t.resetUrl||this.resetUrl,1===t.clearResetFlag&&(this.modify=null),t.showToast&&this.$api.showToast({title:t.showToast,icon:"none",duration:3e3}),this.autoSubmitJump(t),this.couponPopup=t.couponPopup||this.couponPopup},submit:function(t){var e=this.imgUploadList.map((function(t){return t.pic_ids})).join();e&&0!==e.length&&(0,ot.request)({method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},url:t,data:{picIds:e}})},getCouponInfo:function(t){var e=this;(0,ot.request)({url:K.apiHost+this.couponInfoApi,data:t,isFirstScreen:!1,isCheckLogin:!1}).then((function(t){var o=t.data;e.coupon=o.coupon||null,e.isShowCoupon=o.coupon&&(o.coupon.tickets||[]).length>0&&1===o.coupon.isOpen,e.dynamics=o.dynamics||e.dynamics,!isNaN(o.dynamicDelay)&&o.dynamicDelay>=0&&(e.dynamicDelay=o.dynamicDelay),e.leaveDialog=t.data.leaveDialog||e.leaveDialog,e.ongoing=o.ongoing&&o.ongoing.btns?o.ongoing:null,e.ongoing&&(e.isShowGoing=!0,X.send({type:"o",action:"wz_ongoing_show"}))}))},getLoadingIndex:function(){for(var t=this.msgList.length-1;t>=0;t--){var e=this.msgList[t];if(e.content[0]&&"loading"===e.content[0].type)return t}},onTapContent:function(){if(this.input&&this.input.box2){var t=this.input.box2.map((function(t){return t.isExp=!1,t}));this.input=Object.assign({},this.input,{box2:t})}},onSend:function(t){var e=this;this.select&&(this.select=null,this.input.select=null),this.bottomBtn=null,this.message="";var o=t.params.content;this.resetUrl&&(this.resetTxt=o);var i=tt.rand();this.pushMsg("ask",{type:"text",text:"idCard"===this.input.inputType?this.formatIdCard(o):o},"text",{feMsgId:i,sendMsgCallback:t.callbackUrl,resetUrl:this.resetUrl}),this.resetUrl="",this.message="",this.input&&this.input.onceAnwser&&1===this.input.onceAnwser&&(this.input.usable=0),this.sendMsg(t).then((function(t){var o=t.data;o.jumpUrl?(0,nt.navigate)({url:o.jumpUrl}):(e.selectlist=[],e.setData(o))})).catch((function(){}))},formatIdCard:function(t){return t.replace(/(\d{3})\d{11}([\d|X]{4}|[\d|X]{1})/,"$1***********$2")},autoSubmitJump:function(t){var o=this,i=t.autoSubmitUrl||"";i&&(0,ot.request)({url:i}).then((function(t){if(t&&t.data){var o=t.data,i=o.jumpUrl,n=o.pay_url;n?(0,st.pay)({url:n}):i&&e((function(){(0,nt.navigate)({url:i,openType:"redirect"})}),3e3)}})).catch((function(){o.$api.showToast({title:"服务异常，请稍后重试",icon:"none"})}))},sendInfoFormate:function(t,e){return new Promise((function(o){var i=tt.getQueryObject(t);o({callbackUrl:t,params:tt.extend({content:e,answerType:ct.answerType.USER,contentType:ct.contentType.TEXT},{content:i.value,answerType:i.answerType,contentType:i.contentType})})}))},onTapTag:function(t){var e=this,o=t.map((function(t){return t.text}));this.$set(this.select,"checked",t),this.message=o.join("，"),this.selectlist=t,this.select&&"ai_radio"===this.select.type&&this.input&&this.input.messageCallback&&t.length&&"2"!==t[0].exclude&&(this.input.usable=0,this.sendInfoFormate(this.input.messageCallback,this.message).then((function(t){e.onSend(t)}))),this.select&&"ai_multi"===this.select.type&&(this.message?this.disabled=!1:this.disabled=!0)},onEachTagTap:function(t){var e=this;if(t.exclude&&"2"===t.exclude)this.select&&"ai_radio"===this.select.type?(t.isChk?this.bottomBtnShow=t.isChk:this.bottomBtnShow=!1,t.tools&&!this.bottomBtnShow?(this.input=t.tools,this.message="",this.input.usable=1):this.input.usable=0):(t.isChk?this.bottomBtnShow=t.isChk:this.bottomBtnShow=!1,t.tools&&(this.input=t.tools,this.message=""));else if(t.exclude&&"3"===t.exclude)this.onUpload(t.tools).then((function(){e.input.select=null})).catch((function(){e.select=e.input.select}));else if(t.exclude&&"4"===t.exclude){var o=tt.getQueryObject(this.input.messageCallback),i={callbackUrl:this.input.messageCallback,params:tt.extend({content:t.text,answerType:ct.answerType.USER,contentType:ct.contentType.TEXT},{content:o.value,answerType:o.answerType,contentType:o.contentType})};this.onSend(i)}else this.bottomBtnShow=!0},onClose:function(){this.countRecs=null},onFocus:function(t){var e=this,o=t.detail.height;this.scrollHeight=o,this.$mpUpdated((function(){e.$refs.im&&e.$refs.im.scrollTo("bottom")}))},onBlur:function(){var t=this;e((function(){t.scrollHeight=0,t.$mpUpdated((function(){t.$refs.im&&t.$refs.im.scrollTo("bottom")}))}),50)},onTapHistoryItem:function(t){var e=t.params,o=t.name,i=t.value;this.select&&(this.select=null,this.input.select=null),tt.getQueryObject(this.input.messageCallback).questionID&&delete e.questionID;var n=this.input.messageCallback+"&"+tt.getQueryStr(Object.assign(e,"phone"===this.query.type?{stream_type:"phone",key:"age",nextkey:"phoneCollector"}:{}));this.onQuestionreply({callbackUrl:n,name:o,value:i})},onQuestionreply:function(t){var e=this,o=t.name,i=t.serviceCallbackUrl,n=t.params,s=t.msgList,a=t.isSms,r=t.anchorID,c=t.serviceGrid,l=t.realtimeCoupon;if(this.prevReplyInfo=Object.assign({},t),this.changeAppeal(c&&c.appeal),l&&(this.$set(this,"realtimeCoupon",l),this.showRealtimeCoupon=!0),i)return this.prevServiceRequest(i,n);if(s&&s.length&&this.msgList&&this.msgList.length)this.replaceMsgByType(s),r&&this.handleAnchor(r);else{if(o&&this.pushMsg("ask",{type:"text",text:o}),a){var p=-1;this.msgList.forEach((function(t,e){p<0&&"login-phone"===t.type&&(p=e)})),this.msgList.splice(p)}this.sendMsg(t).then((function(t){var o=t.data;o.jumpUrl?(0,nt.navigate)({url:o.jumpUrl}):e.setData(o)}))}},onPopup:function(t){var e=this;if(t&&t.popType&&"pay"===t.popType&&t.callbackUrl&&(this.$api.showLoading({title:t.loadingTxt||"正在跳转支付..."}),(0,ot.request)({url:t.callbackUrl,isNeedLogin:!0,isFirstScreen:!1}).then((function(t){e.$api.hideLoading(),t.data&&t.data.payUrl&&(0,st.pay)({url:t.data.payUrl})}))),t&&"changephone"===t.popType&&t.popup&&(this.changePhonePopup=t.popup),t&&t.popType&&"coupon"===t.popType&&(this.isShowCoupon=!0,X.send({type:"b",action:"triage_open_"+this.coupon.style})),t&&t.item&&t.type&&"popup"===t.type&&(this.popupItem=t.item,this.isPopupShow=!0,t.clkmark)){var o={};Object.keys(t.clkmark).map((function(e){o[e]=t.clkmark[e]})),X.send({type:"b",action:"popup",extra:o})}if("expert-faq"===t.type){var i={showClose:!0,closeIcon:"close-circle",title:t.title.length>10?t.title.slice(0,10)+"...":t.title,showCloseHandler:!1,showTitleLine:!0};this.popupParams=i,this.popupShow=!0,this.popupSlide=t}t&&t.type&&"guarantee"===t.type&&(this.popupSlide=t,this.popupShow=!0),t&&"cardDetail"===t.type&&(this.popupShow=!0,this.popupSlide=t,this.popupParams={showClose:!0,closeIcon:"close-circle",showCloseHandler:!1,showTitleLine:!1,rowTile:!0}),t&&"serviceIndicators"===t.type&&(this.popupShow=!0,this.popupSlide=t,this.popupParams={showCloseHandler:!1,showTitleLine:!1,rowTile:!0})},prevServiceRequest:function(t,o){var i=this;return new Promise((function(){(0,ot.request)({method:"POST",url:t,data:o,header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(n){if(i.$api.hideLoading(),n&&n.data){var s=n.data,a=s.toast,r=s.payUrl,c=s.jumpMsUrl,l=s.medMsgList,p=s.repeat,u=s.wxPayInfo;a&&i.$api.showToast({title:a,icon:"none",duration:3e3}),e((function(){r&&c?(0,st.pay)({url:r,wxPayConfig:u?(0,dt.getNkWxPaymentParams)(u,c,c):null}):c&&(0,nt.navigate)({url:c})}),a?2e3:0),l&&l.length&&(i.popupShow=!1,i.replaceMsgByType(l)),1==+p&&(i.ongoing=ut.ORDER_REPEAT,i.isShowGoing=!0,i.ongoingOrderInfo={url:t,params:o},(0,X.ubcSend)({type:"view",value:"checkRepeatDialog"}))}})).catch((function(){i.$api.hideLoading()}))}))},onGroupPopup:function(t){this.groupData=t,this.groupData.isDirected=!!this.query.isDirected,"consultEdit"===t.type&&(this.isConsultGroupPopupShow=!0)},onPopupGroupClose:function(t){"consultEdit"===t.type&&(this.isConsultGroupPopupShow=!1)},onPopupClose:function(){this.isPopupShow=!1,this.popupShow=!1},onCouponClose:function(){this.isShowCoupon=!1},onChangePhoneClose:function(){this.changePhonePopup=null},onDialogClose:function(){this.isShowGoing=!1,this.normalDialog=null,this.showNormalDialog=!1},onUpdate:function(t){var e=this;this.isShowCoupon=!1,this.coupon=t.coupon;var o=[];t.medMsgList.map((function(t){o=e.msgList.map((function(e){return t.messageID===e.messageID?t:e}))})),this.msgList=o,this.$mpUpdated().then((function(){e.isShowCoupon=!0}))},onTapGoing:function(t){var e=t.btn,o=e.event,i=e.url,n=e.msUrl,s=e.ubcValue;if(s&&(0,X.ubcSend)({type:"clk",value:s}),"cancel"===o)this.onDialogClose(),X.send({type:"b",action:"wz_ongoing_btn_cancel"});else if("navi"===o)this.isShowGoing=!1,X.send({type:"b",action:"wz_ongoing_btn_navi"}),(0,nt.navigate)({url:i});else if("normalCancel"===o&&n)(0,nt.navigate)({url:n}),this.showNormalDialog=!1;else if("callback"===o&&n)(0,nt.navigate)({url:n}),this.showNormalDialog=!1;else if("cancelAppoint"===o)(0,nt.navigate)({url:n}),this.$set(this.noDocdialog,"show",!1);else if("reAppoint"===o&&n)(0,X.ubcSend)({type:"clk",value:"failed_dianhuamenzhen"}),(0,nt.navigate)({url:n}),this.$set(this.noDocdialog,"show",!1);else if("makeOrder"===o){var a=this.ongoingOrderInfo,r=a.url,c=a.params;c.checkRepeat=0,this.prevServiceRequest(r,c)}},beforeChoose:function(t,e){e(this.imgUploadList.length)||this.$api.showToast({title:"您已上传".concat(t.limit,"张图片，更多图片可在医生响应后发送"),icon:"none"})},onPreview:function(t,e){var o=this.imgTaskList.finish.length||0;if(this.imgTaskList.preview.length>=e.limit-o)this.$api.showToast({title:"您已上传".concat(e.limit,"张图片，更多图片可在医生响应后发送"),icon:"none"});else{var i=t.upid;this.imgTaskList.preview.push(t),this.pushMsg("ask",{type:"img",imgUrl:t.base64,upid:t.upid},"1",{sendState:"imgLoading",feMsgId:i})}},onUploadSuccess:function(){this.select&&(this.select=null,this.input.select=null)},onUploadAll:function(t){var e=this,o="",i=t.res,n=t.callbackUrl,s=[];if(i&&i.length){var a,r=gt(i);try{var c=function(){var t=a.value;t&&t.resp&&t.resp.picID&&t.file&&t.file.upid&&e.imgTaskList.preview.filter((function(e){return e.upid===t.file.upid})).length>0&&(s.push(t),o?o=o+","+t.resp.picID:o+=t.resp.picID)};for(r.s();!(a=r.n()).done;)c()}catch(t){r.e(t)}finally{r.f()}}n&&o&&(0,ot.request)({method:"POST",url:n,data:{picIds:o},header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){t.data&&(e.updateImgState(s,{state:"imgSuccess"}),e.$mpUpdated((function(){e.setData(t.data)})))})).catch((function(){e.updateImgState(s,{state:"imgFail"})})),this.imgTaskList.preview=[]},updateImgState:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.length&&t.forEach((function(t){if(t&&t.resp&&t.resp.origin&&t.file&&t.file.upid&&(e.msgList.forEach((function(i){i.feMsgId&&i.feMsgId===t.file.upid&&(i.sendState=o&&o.state,i.content&&i.content.length&&i.content[0].imgUrl&&(i.content[0].imgUrl=t.resp.origin),"imgSuccess"===o.state&&e.imgTaskList.finish.push(t.file))})),"imgSuccess"===o.state)){var i={content:t.resp&&t.resp.origin||"",pic_ids:t.resp&&t.resp.picID||"",orientation:t.resp&&t.resp.orientation||0,answerType:ct.answerType.USER,contentType:ct.contentType.PIC};e.imgUploadList.push(i)}}))},onToolHeightChange:function(){this.$refs.im.setContentHei()},sendMsg:function(t){var e=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i){var n=t.callbackUrl,s=t.params,r=t.value,c=t.sdtype,l=t.intent,p=t.isSendPhone,u=t.isSms;o&&e.pushMsg("system",{type:"loading"});var d=a().globalData.city,h=d.lng,m=d.lat,f={answer:(s&&s.content||r||"").replace(/[ \r\n]/g,""),isVoice:"voice"===c?"1":"",lng:h,lat:m};l&&(f.intent=l),s&&s.pic_ids&&(f.picID=s.pic_ids),p||u?(0,ot.request)({method:"POST",url:n,data:{answer:s},header:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){i(t)})):(0,ot.request)({url:n,data:f}).then((function(t){i(t)})),e.historyExtraValue={}}))},getMsg:function(t,e,o,i){return{avatar:"system"===t?vt:"ask"===t?bt:"",control:"normal",from:"system"===t?2:"ask"===t?0:-1,name:t,content:e,type:o,custom:i&&i.custom,rand:tt.rand(),feMsgId:i&&i.feMsgId,sendState:i&&i.sendState,resetUrl:i&&i.resetUrl}},pushMsg:function(t,e,o,i){e=e instanceof Array?e:[e];var n=this.getMsg(t,e,o,i);this.msgList=this.msgList.concat(n)},replaceMsg:function(t,e,o){var i=this,n=this.getMsg(t,e);this.msgList.forEach((function(e,s){e.name===t&&"function"==typeof o&&o.call(i,e)&&i.msgList.splice(s,1,n)}))},autoNavi:function(t,e){Object.assign({isNeedLgoin:!1},e).isNeedLgoin?et.getBduss().then((function(){(0,nt.navigate)({url:t})})).catch((function(){et.toLoginPage({href:t,openType:"navigate"})})):(0,nt.navigate)({url:t})},onBottomBtnTap:tt.throttle((function(t){var e=this;if(t.type&&"reply"===t.type){if(!this.message)return;this.sendInfoFormate(t.callbackUrl,this.message).then((function(t){e.onSend(t)}))}else t.callbackUrl&&(this.$api.showLoading({title:t.loadingTxt||"正在跳转支付..."}),(0,ot.request)({url:t.callbackUrl,isNeedLogin:!0,isFirstScreen:!1}).then((function(t){e.$api.hideLoading(),t.data&&t.data.payUrl&&(0,st.pay)({url:t.data.payUrl})}))),t.url&&(0,nt.navigate)({url:t.url})}),2e3),showBottomBtn:function(t){this.bottomBtn={btn:[{fontColor:"#fff",bgColor:"#00C8C8",title:t.text,url:t.url||t.navigateUrl}]},this.input&&(this.input.usable=1)},reloadPage:function(){this.$set(this,"msgList",[]),this.getFirstview(this.query)},navigateToPage:function(){(0,nt.navigate)({url:this.whiteTipNew.url})},onMsgTap:function(t){var o=this;if(t.content&&t.content[0]&&t.content[0].imgUrl){var i=[],n=0;this.msgList.forEach((function(e){e.content&&e.content[0]&&e.content[0].imgUrl&&(n++,i=i.concat({src:e.content[0].imgUrl}),t.content[0].imgUrl===e.content[0].imgUrl&&(o.previewImgInd=n-1))})),this.previewImgList=i,e((function(){o.previewImgShow=!0}),50)}},setMsgState:function(t,e){this.msgList.forEach((function(o){o.feMsgId&&o.feMsgId===t&&(o.sendState=e,o.rand=tt.rand())}))},onUploadError:function(t){this.select&&(this.select=null,this.input.select=null),t&&t.file&&t.file.upid&&this.setMsgState(t.file.upid,"imgFail")},onImgClose:function(){this.previewImgShow=!1,this.previewImgList=[]},onContentTouch:function(){},onDialog:function(t){this.normalDialog=t.normalDialog||this.normalDialog,this.normalDialog&&(this.showNormalDialog=!0),this.noDocdialog=t.noDocdialog||this.noDocdialog,this.noDocdialog&&this.noDocdialog.show&&(0,X.ubcSend)({type:"view",value:"failed_dianhuamenzhen"}),"last"===t.anchor&&this.$refs.im&&this.$refs.im.scrollTo("bottom")},onAskReset:function(t){if(t.resetUrl){(0,X.ubcSend)({type:"clk",value:"modify-btn",ext:{pd:"wz"}});var e=decodeURIComponent(t.resetUrl);this.$set(this,"msgList",[]),this.select=null,this.query=tt.getQueryObject(e),this.resetTxt&&(this.query.word=this.resetTxt),this.initLog(),this.getFirstview(Object.assign(this.query,{feReload:"modify"})),this.getCouponInfo(Object.assign(this.query,{feReload:"modify"}))}},initLog:function(){var t=this;try{this.$api.getCommonSysInfo({success:function(e){t.baiduID=e.baidu_id||"",(0,X.ubcSend)({type:"view",value:"init",ext:{pd:"wz",time:(new Date).getTime(),baiduID:t.baiduID,plate:"swan"}})}})}catch(t){this.baiduID=""}},replaceMsgByType:function(t){t.map((function(t){return tt.extend(t,{rand:tt.rand()})}));var e=this.msgList.slice(),o=t[0].type||"",i=e.length;o&&e.forEach((function(t,e){t.type&&t.type===o&&(i=e)})),e.splice(i),this.msgList=[].concat((0,T.default)(e),(0,T.default)(t))},setBottomPlaceholderHeight:function(){var t=this;this.$api.createSelectorQuery().select("#radioBtnWrapper"),this.timer=e((function(){t.$api.createSelectorQuery().select("#radioBtnWrapper").boundingClientRect((function(e){var o=(e||{}).height;o?(t.bottomTrickHeight=o+9+"px",t.$mpUpdated((function(){t.$refs.im&&t.$refs.im.scrollTo("bottom")}))):t.setBottomPlaceholderHeight()})).exec()}),300)},onRealTimeCouponTap:function(t){var e=this,o=t.type,i=t.item,n=i&&i.btn&&i.btn.callbackUrl;this.showRealtimeCoupon=!1,"receive"===o&&n&&(0,ot.request)({url:n}).then((function(t){if(t&&t.data&&t.data.toast&&e.$api.showToast({icon:"none",title:t.data.toast}),e.prevReplyInfo&&e.prevReplyInfo.callbackUrl){var o={answer:e.prevReplyInfo.value,intent:e.prevReplyInfo.intent};e.prevServiceRequest(e.prevReplyInfo.callbackUrl,o)}}))},changeAppeal:function(t){t&&this.$api.setStorage({key:"wz_im-enter-banner_appeal",data:t})},scrollToBottom:function(){this.$refs.im&&this.$refs.im.scrollTo("bottom")},initTaskInfo:function(t){try{var e=t.entryType,o=t.scene;"schema"!==e||["12110047","12110048","12010043","12010044","12010045","12010046"].includes(o)||ht.taskSupplier.init({query:{taskInfo:t.taskInfo},sdkConfig:{useBdtls:!0,secretMap:{867:"CoTY5hkFRbkFrS0aTKn2fckhotJE6bey",831:"vyLVZdU9aPBKBryC6Zx5PJSR0arMUS5m"}}}),a().globalData.wzTaskFlag=ht.taskSupplier.taskExecutor&&ht.taskSupplier.taskExecutor.getCando(),ht.taskSupplier&&ht.taskSupplier.execute({command:"guide",aid:[831,867]}),ht.taskSupplier&&ht.taskSupplier.execute({command:"start",aid:[831]})}catch(t){}},executeTask:function(t){a().globalData.wzTaskFlag&&ht.taskSupplier&&ht.taskSupplier.execute({command:t,aid:[831]})}},render:function(){return{render:function(){var t=this,e=t.$createElement;t._self._c;return[,[[t._pp({"bg-color":"#f4f4f4",page:"triage",menu:t.menu,"navi-bg-color":t.topNavBarHasBg?"transparent":"#f4f4f4","navi-font-color":t.topNavBarHasBg?"#fff":"","leave-text":t.leaveDialog.text||t.leaveDialog.type,"leave-btn":t.leaveBtn[t.leaveDialog.type],"leave-type":t.leaveDialog.type,"retaining-modal":t.retainingModal,"retaining-modal-back-type":t.backType,"feedback-is-show":t.showFeedBack,"hide-header":t.hideHeader,"delay-set-nav-bar":t.delaySetNavBar,compId:(t.compId?t.compId:"$root")+",0"})]],[,[[t._pp({"is-animation":!0,"is-head-custom":"","top-nav-bar-has-bg":t.topNavBarHasBg,"top-bar-height":t.topBarHeight,compId:(t.compId?t.compId:"$root")+",1",ref:"im"})]],[,[[{slot:"top"}],"top"],[,[[{target:"swan"}]],[,[[{style:{height:t.topBarHeight+"px",background:t.topNavBarHasBg?"transparent":"#f4f4f4"}}]]],,[[{target:"swan"}]],[,[[t._pp({"bar-class":"transparent","text-color":t.topNavBarHasBg?"#fff":"#333",blank:!1,"back-detain":!!(t.retainingModal||t.leaveDialog&&t.leaveDialog.type),"delay-set-header-color":t.delaySetHeaderColor,"delay-compate-devices":t.delayCompateDevices,compId:(t.compId?t.compId:"$root")+",2"})]]],t.topNavBar||t.progress?[,[[t._pp({tip:t.topNavBar,"top-nav-bar-has-bg":t.topNavBarHasBg,progress:t.progress,compId:(t.compId?t.compId:"$root")+",3"})]]]:[],t.dynamics&&t.dynamics.length?[,[[t._pp({dynamics:t.dynamics,delay:t.dynamicDelay,"show-close-icon":!0,exp:"nowhole",compId:(t.compId?t.compId:"$root")+",4"})]]]:[],t.countRec?[,[[t._pp({item:t.countRec,page:"pages/wz/triage/index",compId:(t.compId?t.compId:"$root")+",5"})]]]:[],t.tip?[,[[t._pp({tip:t.tip,page:"pages/wz/triage/index",compId:(t.compId?t.compId:"$root")+",6"})]]]:[],t.whiteTipNew?[,[[t._pp({tips:t.whiteTipNew,compId:(t.compId?t.compId:"$root")+",7"})]]]:[]],,[[{slot:"content"}],"content"],[(t.whiteTipNew,[]),t.isPopupShow&&t.popupItem?[,[[t._pp({item:t.popupItem,compId:(t.compId?t.compId:"$root")+",8"})]]]:[],t._l(t.msgList,(function(e,o){e.rand,t._pp({num:o,msg:e,qid:t.qid+"","is-last":o===t.msgList.length-1,"img-upload-list":t.imgUploadList,"coupon-tip":t.couponTip,"expert-name":t.expertName,modify:t.modify,compId:(t.compId?t.compId:"$root")+",9-"+o})})),t.select?[,[[t._pp({type:t.select.type,list:t.select.list,checked:t.select.checked,compId:(t.compId?t.compId:"$root")+",10"})]]]:[],t.isShowBtnBlock?[,[[{style:{height:t.bottomTrickHeight}}]]]:[]],,[[{slot:"bottom"}],"bottom"],[t.countRecs?[,[[t._pp({item:t.countRecs,qid:t.qid,page:"pages/wz/triage/index",compId:(t.compId?t.compId:"$root")+",11"})]]]:[],t.input&&1===t.input.usable?[,[[t._pp({value:t.message,"adjust-position":!1,item:t.input,"is-box-exp":"","is-show-box-exp":!1,"is-textarea-popup":!1,compId:(t.compId?t.compId:"$root")+",12",ref:"inputref"})]]]:[],t.msgNotice&&t.msgNotice.isShow?[,[[t._pp({"font-size":"14px","text-left":".1rem","ubc-type":"msgNotice",height:48,content:t.msgNotice.text,icon:t.msgNotice.icon,btn:t.msgNotice.btn,"show-close-icon":!0,compId:(t.compId?t.compId:"$root")+",13"})]]]:[],t.scrollHeight>0?[,[[{style:{height:t.scrollHeight+"px"}}]]]:[],,[t.bottomBtn&&t.bottomBtn.btn&&t.bottomBtnShow?[,[[t._pp({content:t.bottomBtn,disabled:t.disabled,compId:(t.compId?t.compId:"$root")+",14"})]]]:[]]]],t.leaveDialog&&t.leaveDialog.type&&"normal"!=t.leaveDialog.type?[,[[t._pp({slot:"leave-dialog-cont","leave-dialog":t.leaveDialog,compId:(t.compId?t.compId:"$root")+",15"})],"leave-dialog-cont"]]:[],t.changePhonePopup?[,[[t._pp({item:t.changePhonePopup,compId:(t.compId?t.compId:"$root")+",16"})]]]:[],,[[t._pp({"popup-info":t.popupSlide,"popup-show":t.popupShow,"popup-params":t.popupParams,compId:(t.compId?t.compId:"$root")+",17"})]],,[[t._pp({"popup-show":t.isConsultGroupPopupShow,"group-data":t.groupData,"add-img":t.groupData.addImg,page:"pages/wz/triage/index",compId:(t.compId?t.compId:"$root")+",18"})]],,[[t._pp({show:t.isChatBack,"gap-top":15,width:.72,"btn-opts":t.leaveBtn.wzChatBackDialogBtn,compId:(t.compId?t.compId:"$root")+",19"})]],[t.isChatBack&&t.leaveChatDialog?[,[[t._pp({"leave-dialog":t.leaveChatDialog,compId:(t.compId?t.compId:"$root")+",20"})]]]:[]],,[[t._pp({show:t.isShowGoing,"gap-top":15,width:331,"btn-opts":t.ongoing?t.ongoing.btns:[],"border-radius":"21px",compId:(t.compId?t.compId:"$root")+",21"})]],[t.ongoing?[,[[t._pp({"leave-dialog":{type:"wzPhoneDialog",img:t.ongoing.img,texts:[t.ongoing.text]},compId:(t.compId?t.compId:"$root")+",22"})]]]:[]],,[[t._pp({show:t.showNormalDialog,"gap-top":15,"gap-bottom":10,content:t.normalDialog&&t.normalDialog.content||"","btn-opts":t.normalDialog&&t.normalDialog.btns||[],width:.72,compId:(t.compId?t.compId:"$root")+",23"})]],t.noDocdialog?[,[[t._pp({show:t.noDocdialog.show,"btn-opts":t.noDocdialog.btnOpts,"gap-top":24,"gap-slot-bottom":24,compId:(t.compId?t.compId:"$root")+",24"})]],[t.noDocdialog.detail?[,t._l(t.noDocdialog.detail,(function(t,e){})),1]:[]]]:[],,[[t._pp({"is-show":t.isShowCoupon,item:t.coupon,compId:(t.compId?t.compId:"$root")+",25"})]],t.showRealtimeCoupon?[,[[t._pp({item:t.realtimeCoupon,compId:(t.compId?t.compId:"$root")+",26"})]]]:[],t.previewImgList.length&&t.previewImgList.length>0?[,[,[[t._pp({"hidden-close":"","img-list":t.previewImgList,index:t.previewImgInd,show:t.previewImgShow,compId:(t.compId?t.compId:"$root")+",27"})]]]]:[],t.checkCode?[,[[t._pp({"callback-url":t.passCallbackUrl,"check-code":t.checkCode,compId:(t.compId?t.compId:"$root")+",28"})]]]:[],,[[t._pp({data:t.couponPopup,page:"pages/wz/triage/index",compId:(t.compId?t.compId:"$root")+",29"})]],,[[{target:"swan"}]],[,[[t._pp({"z-index":"100","layer-bottom":"50vw",compId:(t.compId?t.compId:"$root")+",30"})]]]]]},staticRenderFns:[]}.render.bind(this)()}}))})),window.define("3410",(function(t,e,o,i,n,s,a,r,c,l,p,u,d,h,m,f,g,w,b,v,y,I,C){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ORDER_REPEAT=o.LEAVE_BTN_TRIAGE=void 0;o.LEAVE_BTN_TRIAGE={normal:[{event:"confirm",text:"放弃咨询",fontSize:"17px"},{color:"#4d9cf3",event:"cancel",text:"继续咨询",fontSize:"17px"}],wzInfoDialog:[{event:"confirm",color:"#555",text:"放弃咨询",fontSize:"17px",bold:!0},{color:"#00c8c8",event:"cancel",text:"继续咨询",fontSize:"17px",test:1,bold:!0}],wzCouponDialog:[{event:"confirm",color:"#555",text:"残忍离开",fontSize:"17px",bold:!0},{color:"#00c8c8",event:"cancel",text:"继续咨询",fontSize:"17px",test:1,bold:!0}],wzFillinDialog:[{event:"confirm",color:"#555",text:"放弃填写",fontSize:"17px",bold:!0},{color:"#00c8c8",event:"cancel",text:"继续填写",fontSize:"17px",test:1,bold:!0}],wzChatBackDialogBtn:[{event:"confirm",color:"#555",text:"重新提问",fontSize:"17px",bold:!0},{color:"#00c8c8",event:"cancel",text:"继续咨询",fontSize:"17px",test:1,bold:!0}]};o.ORDER_REPEAT={img:"https://med-fe.cdn.bcebos.com/wz/comicon/wz-tip.png",text:"您已咨询过该主诉的问题，为避免重复提交，请再次确认",btns:[{event:"makeOrder",text:"确认提交",fontSize:"17px",ubcValue:"checkRepeatConfirm"},{event:"navi",url:"/pages/wz/list/index?status=2&atn=list&openapi=1&pd=med&title=我的问医生&vn=med&fclk=我的问医生&_=lu6pwnlve8",text:"查看订单",fontSize:"17px",ubcValue:"checkRepeatToOrder"}]}})),window.__swanRoute="components/im/im-layout",window.usingComponents=[],window.usingPluginComponents=[],require("1183"),window.__swanRoute="components/im/im-input-select",window.usingComponents=[],window.usingPluginComponents=[],require("1371"),window.__swanRoute="components/wz/WzHistory",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("1374"),window.__swanRoute="components/wz/voice-popup",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("1377"),window.__swanRoute="components/im/im-input/im-input-swan",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("1380"),window.__swanRoute="components/im/im-input/index",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon","components/im/im-input/im-input-swan","components/wz/voice-popup","components/wz/WzHistory"],window.usingPluginComponents=[],require("1384"),window.__swanRoute="components/im/im-bottom-btn",window.usingComponents=["components/common/login-btn","mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("1555"),window.__swanRoute="components/im/im-top-bubble",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Avatar/Avatar","mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("1672"),window.__swanRoute="components/wz/coupon-popup",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3095"),window.__swanRoute="components/im/im-card-doctor-reception",window.usingComponents=["components/common/image"],window.usingPluginComponents=[],require("3107"),window.__swanRoute="components/im/im-top-step",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon","components/im/im-card-doctor-reception"],window.usingPluginComponents=[],require("3110"),window.__swanRoute="components/wz/UgUi",window.usingComponents=[],window.usingPluginComponents=[],require("3173"),window.__swanRoute="components/wz/Pass",window.usingComponents=["dynamicLib://passanti-vcode-dynamic/vcode"],window.usingPluginComponents=[],require("3176"),window.__swanRoute="components/im/im-card-top-tip",window.usingComponents=[],window.usingPluginComponents=[],require("3180"),window.__swanRoute="components/im/im-countdown-rec",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Button/Button","mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3183"),window.__swanRoute="components/im/im-consult-popup-group",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon","mars_modules/@baidu/med-ui/dist/swan/components/Popup/Popup","mars_modules/@baidu/med-ui/dist/swan/components/Cascader/Cascader","components/common/image-collect","mars_modules/@baidu/med-ui/dist/swan/components/Label/Label","mars_modules/@baidu/med-ui/dist/swan/components/Dialog/Dialog"],window.usingPluginComponents=[],require("3186"),window.__swanRoute="components/wz/LeaveInfoDialogCont",window.usingComponents=[],window.usingPluginComponents=[],require("3189"),window.__swanRoute="components/im/im-top-tip",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3192"),window.__swanRoute="components/im/im-msg-notice",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3195"),window.__swanRoute="components/im/im-popup",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3198"),window.__swanRoute="components/im/im-realtime-coupon",window.usingComponents=["mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon"],window.usingPluginComponents=[],require("3201"),window.__swanRoute="components/im/im-coupon",window.usingComponents=["components/common/navigate","mars_modules/@baidu/med-ui/dist/swan/components/Icon/Icon","components/common/image","mars_modules/@baidu/med-ui/dist/swan/components/Button/Button"],window.usingPluginComponents=[],require("3204"),window.__swanRoute="pages/wz/triage/index",window.usingComponents=["components/common/container","components/im/im-msg","components/im/im-top-step","components/im/im-coupon","components/im/im-realtime-coupon","components/im/im-popup","components/im/im-top-bubble","components/im/im-msg-notice","components/im/im-bottom-btn","components/im/im-input/index","components/im/im-layout","components/im/im-top-tip","components/common/topbar","components/wz/LeaveInfoDialogCont","components/im/ImPopupSlide","components/im/im-consult-popup-group","components/im/im-countdown-rec","components/im/im-card-top-tip","mars_modules/@baidu/med-ui/dist/swan/components/ImageViewer/ImageViewer","mars_modules/@baidu/med-ui/dist/swan/components/Dialog/Dialog","components/im/im-input-select","components/wz/Pass","components/im/im-popup-infocollect","components/wz/coupon-popup","components/wz/UgUi"],window.usingPluginComponents=[],require("3409")}(__hacked);
//# sourceMappingURL=/output/pages/wz/triage/index.js.map